const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-in9isEBO.js","./basedecoder-B2c5_Eok.js","./lzw-_aCqfs4w.js","./jpeg-CKYXsxFN.js","./deflate-B9JhHpvg.js","./pako.esm-Cram60i4.js","./packbits-DDWKfGV_.js","./lerc-CjeFe3TU.js","./index-pI1ZzCnb.js","./chunk-L4EGOTBX-MeRNY0HT.js","./entry-preview-DcOUyBkG.js","./lit-element-CIht5NN8.js","./index-DrFu-skq.js","./index-CxYCQ2X3.js","./index-Cks9mwmH.js","./iframe-BesLq1q_.js","./index-CfOrKyLd.js","./directive-BHgxrErO.js","./main-AosdcwyK.js","./core-C4kcdPvA.js","./webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
var JHe=Object.defineProperty;var yxe=e=>{throw TypeError(e)};var eqe=(e,t,n)=>t in e?JHe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cn=(e,t,n)=>eqe(e,typeof t!="symbol"?t+"":t,n),M$=(e,t,n)=>t.has(e)||yxe("Cannot "+n);var fn=(e,t,n)=>(M$(e,t,"read from private field"),n?n.call(e):t.get(e)),zn=(e,t,n)=>t.has(e)?yxe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ko=(e,t,n,r)=>(M$(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),In=(e,t,n)=>(M$(e,t,"access private method"),n);import{s as tqe}from"./chunk-L4EGOTBX-MeRNY0HT.js";import{m as $N,p as nqe,v as D0,r as i2,M as O$,f as rqe}from"./entry-preview-DcOUyBkG.js";import{j as kc,c as jo,g as Fa,b as JTe}from"./index-pI1ZzCnb.js";import{u as eDe}from"./index-CxYCQ2X3.js";import{a9 as iqe,aa as oqe,ab as sqe,ac as aqe,ad as lqe,ae as uqe,af as cqe}from"./index-Cks9mwmH.js";import{a as Pi,x as yt,E as Li,T as Sb,i as MN,b as Vy}from"./lit-element-CIht5NN8.js";import{c as V_,n as fqe,d as dqe,I as k3,R as tDe,r as hqe,g as pqe,h as gqe,j as mqe,k as vqe,m as bxe,u as xxe,C as yqe,v as ON,w as Y0,x as eI,y as Ic,z as tI,A as IN,B as bqe,D as xqe,E as wqe,F as _qe,i as Eqe,G as Aqe,H as Cqe,J as Sqe,K as kqe,L as Tqe,M as Dqe,N as NN,O as Lqe,p as PN,P as wxe,Q as nDe,S as BN,T as Y_,U as LL,V as Av,W as Rqe,X as Fqe,Y as $qe,Z as rDe,_ as RL,$ as FL,a0 as Mqe,a1 as Oqe,a2 as Iqe,a3 as Nqe,a4 as _xe,a5 as Pqe,a6 as Bqe,a7 as zqe,f as Uqe,a8 as jqe,l as Hqe,a9 as qqe,aa as Gqe,ab as Wqe,ac as Vqe,s as iDe,ad as Yqe,ae as Xqe,af as Kqe,ag as Zqe,q as Qqe,t as Jqe,o as oDe,ah as eGe,ai as tGe,aj as T3,ak as nGe,al as rGe,e as aA,a as $L,b as Tg}from"./directive-BHgxrErO.js";import{G as zN,F as sDe,a as Xh,b as dc,t as La,c as dm,M as lA,d as rx,e as ML,P as uA,L as Yd,f as Cf,g as X_,p as nI,J as iGe,h as Qi,i as oGe,j as sGe,l as aGe,k as D3,m as rI,X as OL,n as lr,o as nr,q as nn,r as UN,s as L3,u as lGe,v as uGe,w as tm,x as R3,y as aDe,z as Gr,A as at,B as Do,C as sc,D as li,O as ix,E as jg,H as K_,I as lDe,K as F3,N as $3,Q as En,R as ot,S as Jt,T as IL,U as Ls,V as xl,W as uDe,Y as M3,Z as L0,_ as cGe,$ as jN,a0 as Wc,a1 as so,a2 as fGe,a3 as dGe,a4 as Exe,a5 as hGe,a6 as Sf,a7 as kd,a8 as HN,a9 as pGe,aa as gGe,ab as O3,ac as mGe,ad as Z_,ae as vGe,af as yGe,ag as cDe,ah as I3,ai as Axe,aj as Fk,ak as Cxe,al as N3,am as X0,an as NL,ao as bGe,ap as xGe,aq as wGe,ar as Od,as as Q_,at as PL,au as nm,av as $k,aw as u1,ax as Za,ay as us,az as c1,aA as kb,aB as _Ge,aC as oo,aD as fDe,aE as Wa,aF as qN,aG as EGe,aH as AGe,aI as Zl,aJ as oi,aK as GN,aL as Ff,aM as CGe,aN as WN,aO as iI,aP as oI,aQ as hm,aR as SGe,aS as sI,aT as I$,aU as kGe,aV as aI,aW as dDe,aX as TGe,aY as mb,aZ as DGe,a_ as Sxe,a$ as LGe,b0 as VN,b1 as RGe,b2 as hDe,b3 as Ap,b4 as cA,b5 as FGe,b6 as $Ge,b7 as qi,b8 as BL,b9 as J_,ba as Mu,bb as pm,bc as ox,bd as MGe,be as Xr,bf as pDe,bg as OGe,bh as IGe,bi as gDe,bj as mDe,bk as NGe,bl as PGe,bm as eE,bn as BGe,bo as fA,bp as op,bq as Hg,br as zGe,bs as gm,bt as zL,bu as YN,bv as P3,bw as vDe,bx as K0,by as UGe,bz as jGe,bA as yDe,bB as $f,bC as HGe,bD as qGe,bE as XN,bF as GGe,bG as bDe,bH as WGe,bI as VGe,bJ as lI,bK as kxe,bL as YGe,bM as XGe,bN as KGe,bO as ZGe,bP as QGe,bQ as KN,bR as dA,bS as hA,bT as JGe,bU as eWe,bV as tWe,bW as N$,bX as tE,bY as UL,bZ as nWe,b_ as rWe,b$ as iWe,c0 as Txe,c1 as Dxe,c2 as sx,c3 as ey,c4 as ZN,c5 as Pp,c6 as QN,c7 as xDe,c8 as oWe,c9 as sWe,ca as aWe,cb as JN,cc as lWe,cd as uI,ce as cI,cf as wDe,cg as B3,ch as uWe,ci as _De,cj as cWe,ck as fWe,cl as fI,cm as dWe,cn as eP,co as hWe,cp as pWe,cq as gWe,cr as Lxe,cs as mWe,ct as vWe,cu as dI,cv as EDe,cw as Rxe,cx as z3,cy as ADe,cz as Fxe,cA as yWe,cB as CDe,cC as bWe,cD as tP,cE as xWe,cF as wWe,cG as _We,cH as EWe,cI as AWe,cJ as CWe,cK as SWe,cL as kWe,cM as TWe,cN as DWe}from"./main-AosdcwyK.js";import{A as nP,J as lv,S as LWe}from"./core-C4kcdPvA.js";import{_ as Om}from"./iframe-BesLq1q_.js";const $xe={duration:750,padding:[20,20,20,20]},Mxe={type:"FeatureCollection",features:[]},RWe={type:"object",properties:{fallback:{format:"info",title:"No schema provided",description:"Pass a schema to <code>eox-jsonform</code> via the <code>schema</code> property"}}};function FWe(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function $We(e,t){const n=FWe(e,t);return n&&Math.sqrt(n)}class eu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function MWe(e,t){return Array.from(t,n=>e[n])}function OWe(e=V_){if(e===V_)return SDe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function SDe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function dv(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hI(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kDe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?SDe:OWe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),c=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*c*(l-c)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(t-u*c/l+d)),h=Math.min(r,Math.floor(t+(l-u)*c/l+d));kDe(e,t,p,h,i)}const o=e[t];let s=n,a=r;for(o2(e,n,t),i(e[r],o)>0&&o2(e,n,r);s<a;){for(o2(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?o2(e,n,a):(++a,o2(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function o2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pI(e,t,n){if(e=Float64Array.from(fqe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hI(e);if(t>=1)return dv(e);var r,i=(r-1)*t,o=Math.floor(i),s=dv(kDe(e,o).subarray(0,o+1)),a=hI(e.subarray(o+1));return s+(a-s)*(i-o)}}function TDe(e,t,n=dqe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function IWe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function DDe(e,t){return pI(e,.5,t)}function*NWe(e){for(const t of e)yield*t}function LDe(e){return Array.from(NWe(e))}function nc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function RDe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function PWe(e,...t){e=new k3(e),t=t.map(BWe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function BWe(e){return e instanceof k3?e:new k3(e)}function zWe(...e){const t=new k3;for(const n of e)for(const r of n)t.add(r);return t}var FDe=-.14861,rP=1.78277,iP=-.29227,jL=-.90649,nE=1.97294,Oxe=nE*jL,Ixe=nE*rP,Nxe=rP*iP-jL*FDe;function UWe(e){if(e instanceof hv)return new hv(e.h,e.s,e.l,e.opacity);e instanceof tDe||(e=hqe(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Nxe*r+Oxe*t-Ixe*n)/(Nxe+Oxe-Ixe),o=r-i,s=(nE*(n-i)-iP*o)/jL,a=Math.sqrt(s*s+o*o)/(nE*i*(1-i)),l=a?Math.atan2(s,o)*pqe-120:NaN;return new hv(l<0?l+360:l,a,i,e.opacity)}function gI(e,t,n,r){return arguments.length===1?UWe(e):new hv(e,t,n,r??1)}function hv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gqe(hv,gI,mqe(yqe,{brighter(e){return e=e==null?xxe:Math.pow(xxe,e),new hv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bxe:Math.pow(bxe,e),new hv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*vqe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new tDe(255*(t+n*(FDe*r+rP*i)),255*(t+n*(iP*r+jL*i)),255*(t+n*(nE*r)),this.opacity)}}));function jWe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function HWe(e,t){var n=ON(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var Pxe=180/Math.PI,mI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $De(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Pxe,skewX:Math.atan(l)*Pxe,scaleX:s,scaleY:a}}var cS;function qWe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mI:$De(t.a,t.b,t.c,t.d,t.e,t.f)}function GWe(e){return e==null||(cS||(cS=document.createElementNS("http://www.w3.org/2000/svg","g")),cS.setAttribute("transform",e),!(e=cS.transform.baseVal.consolidate()))?mI:(e=e.matrix,$De(e.a,e.b,e.c,e.d,e.e,e.f))}function MDe(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,d,p,h){if(u!==c||f!==d){var g=p.push("translate(",null,t,null,n);h.push({i:g-4,x:Y0(u,c)},{i:g-2,x:Y0(f,d)})}else(c||d)&&p.push("translate("+c+t+d+n)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Y0(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Y0(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,p,h){if(u!==c||f!==d){var g=p.push(i(p)+"scale(",null,",",null,")");h.push({i:g-4,x:Y0(u,c)},{i:g-2,x:Y0(f,d)})}else(c!==1||d!==1)&&p.push(i(p)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(p){for(var h=-1,g=d.length,m;++h<g;)c[(m=d[h]).i]=m.x(p);return c.join("")}}}var WWe=MDe(qWe,"px, ","px)","deg)"),VWe=MDe(GWe,", ",")",")"),YWe=1e-12;function Bxe(e){return((e=Math.exp(e))+1/e)/2}function XWe(e){return((e=Math.exp(e))-1/e)/2}function KWe(e){return((e=Math.exp(2*e))-1)/(e+1)}const ZWe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],c=s[1],d=s[2],p=f-a,h=c-l,g=p*p+h*h,m,y;if(g<YWe)y=Math.log(d/u)/t,m=function(w){return[a+w*p,l+w*h,u*Math.exp(t*w*y)]};else{var v=Math.sqrt(g),x=(d*d-u*u+r*g)/(2*u*n*v),_=(d*d-u*u-r*g)/(2*d*n*v),E=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(_*_+1)-_);y=(C-E)/t,m=function(w){var T=w*y,R=Bxe(E),L=u/(n*v)*(R*KWe(t*T+E)-XWe(E));return[a+L*p,l+L*h,u*R/Bxe(t*T+E)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function ODe(e){return function(t,n){var r=e((t=eI(t)).h,(n=eI(n)).h),i=Ic(t.s,n.s),o=Ic(t.l,n.l),s=Ic(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const QWe=ODe(ON);var JWe=ODe(Ic);function eVe(e,t){var n=Ic((e=tI(e)).l,(t=tI(t)).l),r=Ic(e.a,t.a),i=Ic(e.b,t.b),o=Ic(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function IDe(e){return function t(n){n=+n;function r(i,o){var s=e((i=gI(i)).h,(o=gI(o)).h),a=Ic(i.s,o.s),l=Ic(i.l,o.l),u=Ic(i.opacity,o.opacity);return function(f){return i.h=s(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const tVe=IDe(ON);var nVe=IDe(Ic);function rVe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const iVe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:IN,interpolateArray:bqe,interpolateBasis:xqe,interpolateBasisClosed:wqe,interpolateCubehelix:tVe,interpolateCubehelixLong:nVe,interpolateDate:_qe,interpolateDiscrete:jWe,interpolateHcl:Eqe,interpolateHclLong:Aqe,interpolateHsl:QWe,interpolateHslLong:JWe,interpolateHue:HWe,interpolateLab:eVe,interpolateNumber:Y0,interpolateNumberArray:Cqe,interpolateObject:Sqe,interpolateRgb:kqe,interpolateRgbBasis:Tqe,interpolateRgbBasisClosed:Dqe,interpolateRound:NN,interpolateString:Lqe,interpolateTransformCss:WWe,interpolateTransformSvg:VWe,interpolateZoom:ZWe,piecewise:PN,quantize:rVe},Symbol.toStringTag,{value:"Module"}));function NDe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,wxe),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return NDe(e).unknown(t)},e=arguments.length?Array.from(e,wxe):[0,1],nDe(n)}function PDe(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=TDe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Y_(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(V_),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return PDe().domain(e).range(t).unknown(r)},BN.apply(o,arguments)}const P$=new Date,B$=new Date;function ca(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>ca(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(P$.setTime(+o),B$.setTime(+s),e(P$),e(B$),Math.floor(n(P$,B$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const f1=ca(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);f1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):f1);f1.range;const sp=1e3,Nc=sp*60,ap=Nc*60,Cp=ap*24,oP=Cp*7,zxe=Cp*30,z$=Cp*365,lp=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sp)},(e,t)=>(t-e)/sp,e=>e.getUTCSeconds());lp.range;const HL=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sp)},(e,t)=>{e.setTime(+e+t*Nc)},(e,t)=>(t-e)/Nc,e=>e.getMinutes());HL.range;const qL=ca(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Nc)},(e,t)=>(t-e)/Nc,e=>e.getUTCMinutes());qL.range;const GL=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sp-e.getMinutes()*Nc)},(e,t)=>{e.setTime(+e+t*ap)},(e,t)=>(t-e)/ap,e=>e.getHours());GL.range;const WL=ca(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ap)},(e,t)=>(t-e)/ap,e=>e.getUTCHours());WL.range;const gp=ca(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Nc)/Cp,e=>e.getDate()-1);gp.range;const rm=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cp,e=>e.getUTCDate()-1);rm.range;const BDe=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cp,e=>Math.floor(e/Cp));BDe.range;function ty(e){return ca(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Nc)/oP)}const ax=ty(0),U3=ty(1),oVe=ty(2),sVe=ty(3),d1=ty(4),aVe=ty(5),lVe=ty(6);ax.range;U3.range;oVe.range;sVe.range;d1.range;aVe.range;lVe.range;function ny(e){return ca(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/oP)}const lx=ny(0),j3=ny(1),uVe=ny(2),cVe=ny(3),h1=ny(4),fVe=ny(5),dVe=ny(6);lx.range;j3.range;uVe.range;cVe.range;h1.range;fVe.range;dVe.range;const rE=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rE.range;const iE=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());iE.range;const Xd=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Xd.range;const Kd=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Kd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Kd.range;function zDe(e,t,n,r,i,o){const s=[[lp,1,sp],[lp,5,5*sp],[lp,15,15*sp],[lp,30,30*sp],[o,1,Nc],[o,5,5*Nc],[o,15,15*Nc],[o,30,30*Nc],[i,1,ap],[i,3,3*ap],[i,6,6*ap],[i,12,12*ap],[r,1,Cp],[r,2,2*Cp],[n,1,oP],[t,1,zxe],[t,3,3*zxe],[e,1,z$]];function a(u,f,c){const d=f<u;d&&([u,f]=[f,u]);const p=c&&typeof c.range=="function"?c:l(u,f,c),h=p?p.range(u,+f+1):[];return d?h.reverse():h}function l(u,f,c){const d=Math.abs(f-u)/c,p=LL(([,,m])=>m).right(s,d);if(p===s.length)return e.every(Av(u/z$,f/z$,c));if(p===0)return f1.every(Math.max(Av(u,f,c),1));const[h,g]=s[d/s[p-1][2]<s[p][2]/d?p-1:p];return h.every(g)}return[a,l]}const[hVe,pVe]=zDe(Kd,iE,lx,BDe,WL,qL),[gVe,mVe]=zDe(Xd,rE,ax,gp,GL,HL);function U$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function j$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function s2(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function UDe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=a2(i),f=l2(i),c=a2(o),d=l2(o),p=a2(s),h=l2(s),g=a2(a),m=l2(a),y=a2(l),v=l2(l),x={a:N,A:j,b:q,B:W,c:null,d:Wxe,e:Wxe,f:BVe,g:XVe,G:ZVe,H:IVe,I:NVe,j:PVe,L:jDe,m:zVe,M:UVe,p:Q,q:ee,Q:Xxe,s:Kxe,S:jVe,u:HVe,U:qVe,V:GVe,w:WVe,W:VVe,x:null,X:null,y:YVe,Y:KVe,Z:QVe,"%":Yxe},_={a:H,A:se,b:ne,B:ge,c:null,d:Vxe,e:Vxe,f:nYe,g:dYe,G:pYe,H:JVe,I:eYe,j:tYe,L:qDe,m:rYe,M:iYe,p:we,q:$e,Q:Xxe,s:Kxe,S:oYe,u:sYe,U:aYe,V:lYe,w:uYe,W:cYe,x:null,X:null,y:fYe,Y:hYe,Z:gYe,"%":Yxe},E={a:L,A:B,b:P,B:S,c:k,d:qxe,e:qxe,f:FVe,g:Hxe,G:jxe,H:Gxe,I:Gxe,j:TVe,L:RVe,m:kVe,M:DVe,p:R,q:SVe,Q:MVe,s:OVe,S:LVe,u:wVe,U:_Ve,V:EVe,w:xVe,W:AVe,x:D,X:O,y:Hxe,Y:jxe,Z:CVe,"%":$Ve};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),_.x=C(n,_),_.X=C(r,_),_.c=C(t,_);function C(ve,Ee){return function(Ve){var Ue=[],ft=-1,ht=0,zt=ve.length,$t,Tn,it;for(Ve instanceof Date||(Ve=new Date(+Ve));++ft<zt;)ve.charCodeAt(ft)===37&&(Ue.push(ve.slice(ht,ft)),(Tn=Uxe[$t=ve.charAt(++ft)])!=null?$t=ve.charAt(++ft):Tn=$t==="e"?" ":"0",(it=Ee[$t])&&($t=it(Ve,Tn)),Ue.push($t),ht=ft+1);return Ue.push(ve.slice(ht,ft)),Ue.join("")}}function w(ve,Ee){return function(Ve){var Ue=s2(1900,void 0,1),ft=T(Ue,ve,Ve+="",0),ht,zt;if(ft!=Ve.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(Ee&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(ht=j$(s2(Ue.y,0,1)),zt=ht.getUTCDay(),ht=zt>4||zt===0?j3.ceil(ht):j3(ht),ht=rm.offset(ht,(Ue.V-1)*7),Ue.y=ht.getUTCFullYear(),Ue.m=ht.getUTCMonth(),Ue.d=ht.getUTCDate()+(Ue.w+6)%7):(ht=U$(s2(Ue.y,0,1)),zt=ht.getDay(),ht=zt>4||zt===0?U3.ceil(ht):U3(ht),ht=gp.offset(ht,(Ue.V-1)*7),Ue.y=ht.getFullYear(),Ue.m=ht.getMonth(),Ue.d=ht.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),zt="Z"in Ue?j$(s2(Ue.y,0,1)).getUTCDay():U$(s2(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(zt+5)%7:Ue.w+Ue.U*7-(zt+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,j$(Ue)):U$(Ue)}}function T(ve,Ee,Ve,Ue){for(var ft=0,ht=Ee.length,zt=Ve.length,$t,Tn;ft<ht;){if(Ue>=zt)return-1;if($t=Ee.charCodeAt(ft++),$t===37){if($t=Ee.charAt(ft++),Tn=E[$t in Uxe?Ee.charAt(ft++):$t],!Tn||(Ue=Tn(ve,Ve,Ue))<0)return-1}else if($t!=Ve.charCodeAt(Ue++))return-1}return Ue}function R(ve,Ee,Ve){var Ue=u.exec(Ee.slice(Ve));return Ue?(ve.p=f.get(Ue[0].toLowerCase()),Ve+Ue[0].length):-1}function L(ve,Ee,Ve){var Ue=p.exec(Ee.slice(Ve));return Ue?(ve.w=h.get(Ue[0].toLowerCase()),Ve+Ue[0].length):-1}function B(ve,Ee,Ve){var Ue=c.exec(Ee.slice(Ve));return Ue?(ve.w=d.get(Ue[0].toLowerCase()),Ve+Ue[0].length):-1}function P(ve,Ee,Ve){var Ue=y.exec(Ee.slice(Ve));return Ue?(ve.m=v.get(Ue[0].toLowerCase()),Ve+Ue[0].length):-1}function S(ve,Ee,Ve){var Ue=g.exec(Ee.slice(Ve));return Ue?(ve.m=m.get(Ue[0].toLowerCase()),Ve+Ue[0].length):-1}function k(ve,Ee,Ve){return T(ve,t,Ee,Ve)}function D(ve,Ee,Ve){return T(ve,n,Ee,Ve)}function O(ve,Ee,Ve){return T(ve,r,Ee,Ve)}function N(ve){return s[ve.getDay()]}function j(ve){return o[ve.getDay()]}function q(ve){return l[ve.getMonth()]}function W(ve){return a[ve.getMonth()]}function Q(ve){return i[+(ve.getHours()>=12)]}function ee(ve){return 1+~~(ve.getMonth()/3)}function H(ve){return s[ve.getUTCDay()]}function se(ve){return o[ve.getUTCDay()]}function ne(ve){return l[ve.getUTCMonth()]}function ge(ve){return a[ve.getUTCMonth()]}function we(ve){return i[+(ve.getUTCHours()>=12)]}function $e(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Ee=C(ve+="",x);return Ee.toString=function(){return ve},Ee},parse:function(ve){var Ee=w(ve+="",!1);return Ee.toString=function(){return ve},Ee},utcFormat:function(ve){var Ee=C(ve+="",_);return Ee.toString=function(){return ve},Ee},utcParse:function(ve){var Ee=w(ve+="",!0);return Ee.toString=function(){return ve},Ee}}}var Uxe={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,vVe=/^%/,yVe=/[\\^$*+?|[\]().{}]/g;function Ji(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function bVe(e){return e.replace(yVe,"\\$&")}function a2(e){return new RegExp("^(?:"+e.map(bVe).join("|")+")","i")}function l2(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xVe(e,t,n){var r=$a.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function wVe(e,t,n){var r=$a.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _Ve(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function EVe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function AVe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function jxe(e,t,n){var r=$a.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Hxe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function CVe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function SVe(e,t,n){var r=$a.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function kVe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function qxe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function TVe(e,t,n){var r=$a.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Gxe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function DVe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function LVe(e,t,n){var r=$a.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function RVe(e,t,n){var r=$a.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function FVe(e,t,n){var r=$a.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function $Ve(e,t,n){var r=vVe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function MVe(e,t,n){var r=$a.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function OVe(e,t,n){var r=$a.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Wxe(e,t){return Ji(e.getDate(),t,2)}function IVe(e,t){return Ji(e.getHours(),t,2)}function NVe(e,t){return Ji(e.getHours()%12||12,t,2)}function PVe(e,t){return Ji(1+gp.count(Xd(e),e),t,3)}function jDe(e,t){return Ji(e.getMilliseconds(),t,3)}function BVe(e,t){return jDe(e,t)+"000"}function zVe(e,t){return Ji(e.getMonth()+1,t,2)}function UVe(e,t){return Ji(e.getMinutes(),t,2)}function jVe(e,t){return Ji(e.getSeconds(),t,2)}function HVe(e){var t=e.getDay();return t===0?7:t}function qVe(e,t){return Ji(ax.count(Xd(e)-1,e),t,2)}function HDe(e){var t=e.getDay();return t>=4||t===0?d1(e):d1.ceil(e)}function GVe(e,t){return e=HDe(e),Ji(d1.count(Xd(e),e)+(Xd(e).getDay()===4),t,2)}function WVe(e){return e.getDay()}function VVe(e,t){return Ji(U3.count(Xd(e)-1,e),t,2)}function YVe(e,t){return Ji(e.getFullYear()%100,t,2)}function XVe(e,t){return e=HDe(e),Ji(e.getFullYear()%100,t,2)}function KVe(e,t){return Ji(e.getFullYear()%1e4,t,4)}function ZVe(e,t){var n=e.getDay();return e=n>=4||n===0?d1(e):d1.ceil(e),Ji(e.getFullYear()%1e4,t,4)}function QVe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ji(t/60|0,"0",2)+Ji(t%60,"0",2)}function Vxe(e,t){return Ji(e.getUTCDate(),t,2)}function JVe(e,t){return Ji(e.getUTCHours(),t,2)}function eYe(e,t){return Ji(e.getUTCHours()%12||12,t,2)}function tYe(e,t){return Ji(1+rm.count(Kd(e),e),t,3)}function qDe(e,t){return Ji(e.getUTCMilliseconds(),t,3)}function nYe(e,t){return qDe(e,t)+"000"}function rYe(e,t){return Ji(e.getUTCMonth()+1,t,2)}function iYe(e,t){return Ji(e.getUTCMinutes(),t,2)}function oYe(e,t){return Ji(e.getUTCSeconds(),t,2)}function sYe(e){var t=e.getUTCDay();return t===0?7:t}function aYe(e,t){return Ji(lx.count(Kd(e)-1,e),t,2)}function GDe(e){var t=e.getUTCDay();return t>=4||t===0?h1(e):h1.ceil(e)}function lYe(e,t){return e=GDe(e),Ji(h1.count(Kd(e),e)+(Kd(e).getUTCDay()===4),t,2)}function uYe(e){return e.getUTCDay()}function cYe(e,t){return Ji(j3.count(Kd(e)-1,e),t,2)}function fYe(e,t){return Ji(e.getUTCFullYear()%100,t,2)}function dYe(e,t){return e=GDe(e),Ji(e.getUTCFullYear()%100,t,2)}function hYe(e,t){return Ji(e.getUTCFullYear()%1e4,t,4)}function pYe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?h1(e):h1.ceil(e),Ji(e.getUTCFullYear()%1e4,t,4)}function gYe(){return"+0000"}function Yxe(){return"%"}function Xxe(e){return+e}function Kxe(e){return Math.floor(+e/1e3)}var Yy,sP,WDe,aP,VDe;mYe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mYe(e){return Yy=UDe(e),sP=Yy.format,WDe=Yy.parse,aP=Yy.utcFormat,VDe=Yy.utcParse,Yy}function vYe(e){return new Date(e)}function yYe(e){return e instanceof Date?+e:+new Date(+e)}function lP(e,t,n,r,i,o,s,a,l,u){var f=Rqe(),c=f.invert,d=f.domain,p=u(".%L"),h=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),x=u("%B"),_=u("%Y");function E(C){return(l(C)<C?p:a(C)<C?h:s(C)<C?g:o(C)<C?m:r(C)<C?i(C)<C?y:v:n(C)<C?x:_)(C)}return f.invert=function(C){return new Date(c(C))},f.domain=function(C){return arguments.length?d(Array.from(C,yYe)):d().map(vYe)},f.ticks=function(C){var w=d();return e(w[0],w[w.length-1],C??10)},f.tickFormat=function(C,w){return w==null?E:u(w)},f.nice=function(C){var w=d();return(!C||typeof C.range!="function")&&(C=t(w[0],w[w.length-1],C??10)),C?d(Fqe(w,C)):f},f.copy=function(){return $qe(f,lP(e,t,n,r,i,o,s,a,l,u))},f}function bYe(){return BN.apply(lP(gVe,mVe,Xd,rE,ax,gp,GL,HL,lp,sP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xYe(){return BN.apply(lP(hVe,pVe,Kd,iE,lx,rm,WL,qL,lp,aP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function VL(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=rDe,f,c=!1,d;function p(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-o)*(r*g<r*o?a:l),u(c?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=f(e=+e),o=f(t=+t),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(c=!!g,p):c},p.interpolator=function(g){return arguments.length?(u=g,p):u};function h(g){return function(m){var y,v,x;return arguments.length?([y,v,x]=m,u=PN(g,[y,v,x]),p):[u(0),u(.5),u(1)]}}return p.range=h(IN),p.rangeRound=h(NN),p.unknown=function(g){return arguments.length?(d=g,p):d},function(g){return f=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p}}function YDe(){var e=nDe(VL()(rDe));return e.copy=function(){return RL(e,YDe())},FL.apply(e,arguments)}function XDe(){var e=Mqe(VL()).domain([.1,1,10]);return e.copy=function(){return RL(e,XDe()).base(e.base())},FL.apply(e,arguments)}function KDe(){var e=Iqe(VL());return e.copy=function(){return RL(e,KDe()).constant(e.constant())},FL.apply(e,arguments)}function uP(){var e=Oqe(VL());return e.copy=function(){return RL(e,uP()).exponent(e.exponent())},FL.apply(e,arguments)}function wYe(){return uP.apply(null,arguments).exponent(.5)}const _Ye="1.0.0",EYe="",AYe=JSON.parse('[{"kind":"javascript-module","path":"elements/chart/src/main.js","declarations":[{"kind":"class","description":"Chart component based on [Vega-Lite](https://vega.github.io/vega-lite/)/[Vega-Embed](https://github.com/vega/vega-embed).\\nPass a valid Vega spec as `spec` property in order to render a chart.\\n\\nThe `eox-chart` provides some default `spec` settings (merged with the provided `spec` property) and helper functionalities on top of Vega-Lite.","name":"EOxChart","members":[{"kind":"method","name":"_dispatchItemPointerMoveEvent","parameters":[{"name":"detail"}]},{"kind":"method","name":"_dispatchItemClickEvent","parameters":[{"name":"detail"}]},{"kind":"field","name":"spec","privacy":"public","type":{"text":"VisualizationSpec"},"description":"[Vega-Lite spec](https://vega.github.io/vega-lite/docs/spec.html)","default":"undefined"},{"kind":"field","name":"dataValues","privacy":"public","type":{"text":"{[dataSourceName: string]: InlineData}"},"description":"Data values passed on runtime. Requires a [named data source](https://vega.github.io/vega-lite/docs/data.html#named) in the provided `spec`","default":"undefined"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"pointermove:item","type":{"text":"CustomEvent"},"description":"Chart item is hovered. Event detail includes\\n`event` (pointermove event) and `item` (the hovered item on the chart)"},{"name":"click:item","type":{"text":"CustomEvent"},"description":"Chart item is clicked. Event detail includes\\n`event` (click event) and `item` (the clicked item on the chart)"}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-chart","customElement":true}],"exports":[{"kind":"js","name":"EOxChart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}},{"kind":"custom-element-definition","name":"eox-chart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}}]},{"kind":"javascript-module","path":"elements/drawtools/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxDrawTools","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"field","name":"#olMap","privacy":"private","type":{"text":"Map"}},{"kind":"field","name":"#geoJSON","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#layerId","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#continuous","privacy":"private","type":{"text":"boolean"}},{"kind":"field","name":"continuous","privacy":"public","type":{"text":"boolean"},"description":"Enables the user to draw continuously one feature after another\\nwithout having to discard previous ones manually","attribute":"continuous"},{"kind":"field","name":"layerId","privacy":"public","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","attribute":"layer-id"},{"kind":"method","name":"startDrawing"},{"kind":"method","name":"discardDrawing"},{"kind":"method","name":"handleFeatureChange","parameters":[{"name":"text","description":"The string representation of the features to be parsed.","type":{"text":"string"}},{"name":"replaceFeatures","default":"false","description":"A boolean flag indicating whether to replace the existing features.","type":{"text":"boolean"}},{"name":"animate","default":"true","description":"A boolean flag indicating whether to animate the map on feature change.","type":{"text":"boolean"}}]},{"kind":"method","name":"handleFilesChange","parameters":[{"name":"evt","description":"The event object from the file input interaction.","type":{"text":"DragEvent"}}]},{"kind":"method","name":"onModifyEnd"},{"kind":"method","name":"updateGeoJSON","description":"Update #geoJSON with stringify feature."},{"kind":"method","name":"emitDrawnFeatures","description":"Triggers different events when the drawing of a shape is completed."},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"allowModify","privacy":"public","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","attribute":"allow-modify"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"currentlyDrawing","privacy":"public","type":{"text":"boolean"},"description":"Whether the user is currently in the process of drawing or not","default":"false"},{"kind":"field","name":"draw","privacy":"public","type":{"text":"Draw | EOxMap[\\"selectInteractions\\"][string]"},"description":"The current native OpenLayers `draw` interaction","default":"null"},{"kind":"field","name":"drawLayer","privacy":"public","type":{"text":"default"},"description":"The current native OpenLayers draw `layer` (initialized with a `zIndex` of 100)","default":"null"},{"kind":"field","name":"drawnFeatures","privacy":"public","type":{"text":"Array<Feature>"},"description":"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.","default":"[]"},{"kind":"field","name":"featureName","privacy":"public","type":{"text":"string"},"description":"The display name of drawn features, shown e.g. in the feature list.","default":"\\"Feature\\"","attribute":"feature-name"},{"kind":"field","name":"featureStyles","privacy":"public","type":{"text":"{\\n     * layer?: FlatStyleLike\\n     * hover?: FlatStyleLike\\n     * click?: FlatStyleLike\\n     * } | null"},"description":"Flat styles for the drawn/selected features","default":"null"},{"kind":"field","name":"modify","privacy":"public","type":{"text":"Modify"},"description":"The current native OpenLayers `modify` interaction","default":"null"},{"kind":"field","name":"multipleFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","attribute":"multiple-features"},{"kind":"field","name":"importFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","attribute":"import-features"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","attribute":"show-editor"},{"kind":"field","name":"showList","privacy":"public","type":{"text":"boolean"},"description":"Show list of features","default":"false","attribute":"show-list"},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","attribute":"projection"},{"kind":"field","name":"type","privacy":"public","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","attribute":"type"},{"kind":"field","name":"selectionEvents","type":{"text":"ReturnType<typeof default>"},"default":"null"},{"kind":"field","name":"format","privacy":"public","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","attribute":"format"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"noShadow"}],"events":[{"name":"drawupdate","type":{"text":"Array<Feature>"},"description":"Fires whenever features are added, modified or discarded, where the event detail\\nis the `drawnFeatures` array"}],"attributes":[{"name":"allow-modify","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","fieldName":"allowModify"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"continuous","type":{"text":"boolean"},"description":"Enables the user to draw continuously one feature after another\\nwithout having to discard previous ones manually","fieldName":"continuous"},{"name":"feature-name","type":{"text":"string"},"description":"The display name of drawn features, shown e.g. in the feature list.","default":"\\"Feature\\"","fieldName":"featureName"},{"name":"layer-id","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","fieldName":"layerId"},{"name":"multiple-features","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","fieldName":"multipleFeatures"},{"name":"import-features","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","fieldName":"importFeatures"},{"name":"show-editor","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","fieldName":"showEditor"},{"name":"show-list","type":{"text":"boolean"},"description":"Show list of features","default":"false","fieldName":"showList"},{"name":"projection","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","fieldName":"projection"},{"name":"noShadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"format","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","fieldName":"format"},{"name":"type","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","fieldName":"type"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-drawtools","customElement":true}],"exports":[{"kind":"js","name":"EOxDrawTools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}},{"kind":"custom-element-definition","name":"eox-drawtools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}}]},{"kind":"javascript-module","path":"elements/feedback/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxFeedback","members":[{"kind":"method","name":"onKeyboardInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onOverlayDraw","parameters":[{"name":"e"}]},{"kind":"method","name":"onTextInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onToggleScreenshot","parameters":[{"name":"e"}]},{"kind":"method","name":"onSubmit"},{"kind":"method","name":"onCancel"},{"kind":"field","name":"includeScreenshot","type":{"text":"null"},"default":"null"},{"kind":"field","name":"areaSelection","type":{"text":"null"},"default":"null"},{"kind":"field","name":"regionScreenshot","type":{"text":"null"},"default":"null"},{"kind":"field","name":"screenShotFile","type":{"text":"null"},"default":"null"},{"kind":"field","name":"endpoint"}],"events":[{"name":"submit","type":{"text":"CustomEvent"},"description":"The feedback was submitted. The `CustomEvent.detail` contains the FormData object."},{"name":"close","type":{"text":"Event"},"description":"The modal was closed."}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The endpoint to send the feedback to as POST message."},{"name":"unstyled","type":{"text":"string|null"},"description":"If provided, the element will not be styled with EOX styles.","default":"undefined"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-feedback","customElement":true}],"exports":[{"kind":"js","name":"EOxFeedback","declaration":{"name":"EOxFeedback","module":"elements/feedback/src/main.js"}},{"kind":"custom-element-definition","name":"eox-feedback","declaration":{"name":"EOxFeedback","module":"elements/feedback/src/main.js"}}]},{"kind":"javascript-module","path":"elements/geosearch/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxGeoSearch","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"method","name":"onInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onInputBlur"},{"kind":"method","name":"onButtonClick"},{"kind":"method","name":"getFlexDirection"},{"kind":"method","name":"getResultsDirection"},{"kind":"method","name":"getVerticalAlign"},{"kind":"method","name":"getMarginDirection","parameters":[{"name":"direction"}]},{"kind":"method","name":"handleSelect","parameters":[{"name":"event"}]},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"_data","privacy":"private","description":"Internal storage of OpenCage API data after a successful API request.","type":{"text":"array"},"default":"[]"},{"kind":"field","name":"_isListVisible","privacy":"private","description":"Whether or not the list dropdown is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_isInputVisible","privacy":"private","description":"Whether or not the input field is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_query","privacy":"private","description":"The search query, which is bound to the input field.","type":{"text":"string"},"default":"\\"\\""},{"kind":"field","name":"_isLoading","privacy":"private","description":"Returns true if the element is currently loading data from the API.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"endpoint","privacy":"public","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","default":"undefined","attribute":"endpoint"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"queryParameter","privacy":"public","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","default":"\\"q\\"","attribute":"queryParameter"},{"kind":"field","name":"button","privacy":"public","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","default":"false","attribute":"button"},{"kind":"field","name":"label","privacy":"public","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","default":"undefined","attribute":"label"},{"kind":"field","name":"direction","privacy":"public","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"right\\"","attribute":"list-direction"},{"kind":"field","name":"resultsDirection","privacy":"public","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","attribute":"results-direction"},{"kind":"field","name":"interval","privacy":"public","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","attribute":"interval"},{"kind":"field","name":"small","privacy":"public","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","default":"false","attribute":"small"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"loaderSvg","privacy":"public","type":{"text":"string"},"description":"Svg used as loading indicator","default":"` <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 100 100\\" preserveAspectRatio=\\"xMidYMid\\" width=\\"50\\" height=\\"50\\" style=\\"shape-rendering: auto; display: block; background: transparent;\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" > <g> <circle stroke-dasharray=\\"164.93361431346415 56.97787143782138\\" r=\\"35\\" stroke-width=\\"12\\" stroke=\\"#1a467c\\" fill=\\"none\\" cy=\\"50\\" cx=\\"50\\" > <animateTransform keyTimes=\\"0;1\\" values=\\"0 50 50;360 50 50\\" dur=\\"1.2222222222222223s\\" repeatCount=\\"indefinite\\" type=\\"rotate\\" attributeName=\\"transform\\" ></animateTransform> </circle> <g></g> </g> </svg> `","attribute":"loader-svg"},{"kind":"field","name":"fetchDebounced","privacy":"private"}],"events":[{"name":"geosearchSelect","type":{"text":"CustomEvent"},"description":"The select event, including the details of the selected item"}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","default":"undefined","fieldName":"endpoint"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"queryParameter","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","default":"\\"q\\"","fieldName":"queryParameter"},{"name":"button","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","default":"false","fieldName":"button"},{"name":"interval","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","fieldName":"interval"},{"name":"small","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","default":"false","fieldName":"small"},{"name":"label","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","default":"undefined","fieldName":"label"},{"name":"list-direction","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"right\\"","fieldName":"direction"},{"name":"results-direction","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","fieldName":"resultsDirection"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"loader-svg","type":{"text":"string"},"description":"Svg used as loading indicator","default":"loaderSvg","fieldName":"loaderSvg"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch","customElement":true},{"kind":"class","description":"","name":"EOxGeoSearchItem","members":[{"kind":"field","name":"item","privacy":"public","type":{"text":"object"},"default":"undefined","attribute":"item"},{"kind":"field","name":"onClick","privacy":"public","type":{"text":"function"},"default":"undefined","attribute":"onClick"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"}],"attributes":[{"name":"item","type":{"text":"object"},"default":"undefined","fieldName":"item"},{"name":"onClick","type":{"text":"function"},"default":"undefined","fieldName":"onClick"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch-item","customElement":true}],"exports":[{"kind":"custom-element-definition","name":"eox-geosearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}},{"kind":"custom-element-definition","name":"eox-geosearch-item","declaration":{"name":"EOxGeoSearchItem","module":"elements/geosearch/src/main.js"}},{"kind":"js","name":"EOxGeoSearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}}]},{"kind":"javascript-module","path":"elements/itemfilter/src/main.js","declarations":[{"kind":"class","description":"EOxItemFilter is a custom web component that provides a comprehensive item filtering system.\\nIt includes methods for applying filters, searching, sorting results, and resetting filters.\\nThe component supports both inline and dropdown modes for filter display.","name":"EOxItemFilter","members":[{"kind":"field","name":"#resultAggregation","privacy":"private","type":{"text":"Array<string>"},"default":"[]"},{"kind":"field","name":"#items","privacy":"private","type":{"text":"Array<object>"},"default":"[]"},{"kind":"field","name":"#config","privacy":"private","default":"ELEMENT_CONFIG","type":{"text":"Object"}},{"kind":"method","name":"apply","description":"Applies the filters to the items and updates the result aggregation."},{"kind":"method","name":"searchHandler","description":"Performs a search based on the current configuration and items.\\nRequests an update after the search completes."},{"kind":"method","name":"sortResults","parameters":[{"name":"items","description":"The items to be sorted.","type":{"text":"Array<object>"}}],"description":"Sorts the given items based on the current configuration.","return":{"type":{"text":"Array<object>"}}},{"kind":"method","name":"#createFilter","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the filter element.","type":{"text":"number"}}],"description":"Creates a filter element based on the given filter object and tab index.","return":{"type":{"text":"HTMLTemplateResult"}}},{"kind":"method","name":"#createReset","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the reset element.","type":{"text":"number"}}],"description":"Creates a reset element for the given filter object and tab index.","return":{"type":{"text":"HTMLTemplateResult"}}},{"kind":"method","name":"resetFilters","description":"Resets all applied filters."},{"kind":"method","name":"updateResult","parameters":[{"name":"evt","description":"\\"result\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Updates selected result when result component triggers the \\"result\\" event."},{"kind":"method","name":"emitResultAction","parameters":[{"name":"evt","description":"\\"click:result-action\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Emits \\"click:result-action\\" event."},{"kind":"field","name":"items","privacy":"public","type":{"text":"Array<Object>"},"description":"The items to be filtered","default":"null"},{"kind":"field","name":"filters","privacy":"public","type":{"text":"Object"},"description":"The state object containing the applied filters.","default":"{}"},{"kind":"field","name":"results","privacy":"public","type":{"text":"Array<Object>"},"description":"The state object containing the filtered results.","default":"[]"},{"kind":"field","name":"selectedResult","privacy":"public","type":{"text":"Object"},"description":"The currently selected result","default":"null"},{"kind":"field","name":"search","type":{"text":"Function"},"privacy":"private"},{"kind":"field","name":"aggregateResults","privacy":"public","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","attribute":"aggregate-results"},{"kind":"field","name":"autoSpreadSingle","privacy":"public","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","attribute":"auto-spread-single"},{"kind":"field","name":"enableHighlighting","privacy":"public","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","attribute":"enable-highlighting"},{"kind":"field","name":"externalFilter","privacy":"public","type":{"text":"Function"},"description":"Use an external search endpoint instead of fuse search.\\nPassed properties: input string, filters object","default":"null"},{"kind":"field","name":"filterProperties","privacy":"public","type":{"text":"Array<{key?: String, keys?: Array<String>, title: String, type: String, placeholder?: String, format?: String, state?: Object}>"},"description":"The filter properties.","default":"[]"},{"kind":"field","name":"fuseConfig","privacy":"public","type":{"text":"Object"},"description":"Native fuse.js config override","default":"{}"},{"kind":"field","name":"inlineMode","privacy":"public","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","attribute":"inline-mode"},{"kind":"field","name":"matchAllWhenEmpty","privacy":"public","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","attribute":"match-all-when-empty"},{"kind":"field","name":"showResults","privacy":"public","type":{"text":"Boolean"},"description":"Display results list","default":"true","attribute":"show-result"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"subTitleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","attribute":"sub-title-property"},{"kind":"field","name":"imageProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","attribute":"image-property"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"expandMultipleFilters","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","attribute":"enable-multiple-filter"},{"kind":"field","name":"expandResults","privacy":"public","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","attribute":"expand-result"},{"kind":"field","name":"expandMultipleResults","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","attribute":"expand-multiple-results"},{"kind":"field","name":"resultType","privacy":"public","type":{"text":"String"},"description":"Rendering type for results. Can be `list`or `cards` (`cards` requires also importing the `eox-layout` element)","default":"\\"list\\"","attribute":"result-type"},{"kind":"field","name":"enableResultAction","privacy":"public","type":{"text":"Boolean"},"description":"Enable result action button (a secondary action besides the normal result selection)","default":"false"},{"kind":"field","name":"resultActionIcon","privacy":"public","type":{"text":"String"},"description":"Icon for result action. Supports html","default":"\'<svg style=\\"width: 24px;\\" xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 24 24\\"><title>click me!</title><path fill=\\"#004170\\" d=\\"M11.5,11L17.88,16.37L17,16.55L16.36,16.67C15.73,16.8 15.37,17.5 15.65,18.07L15.92,18.65L17.28,21.59L15.86,22.25L14.5,19.32L14.24,18.74C13.97,18.15 13.22,17.97 12.72,18.38L12.21,18.78L11.5,19.35V11M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10\\" /></svg>\'"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"filter","type":{"text":"CustomEvent"},"description":"Fires when the filters are changed; event detail includes `filters` and `results`"},{"name":"select","type":{"text":"CustomEvent"},"description":"Fires when a result is selected; event detail is `selectedResult`"},{"name":"click:result-action","type":{"text":"CustomEvent"},"description":"Fires when a result-action is clicked; event detail is `result`"}],"attributes":[{"name":"aggregate-results","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","fieldName":"aggregateResults"},{"name":"auto-spread-single","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","fieldName":"autoSpreadSingle"},{"name":"enable-highlighting","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","fieldName":"enableHighlighting"},{"name":"inline-mode","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","fieldName":"inlineMode"},{"name":"match-all-when-empty","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","fieldName":"matchAllWhenEmpty"},{"name":"show-result","type":{"text":"Boolean"},"description":"Display results list","default":"true","fieldName":"showResults"},{"name":"id-property","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"sub-title-property","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","fieldName":"subTitleProperty"},{"name":"image-property","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","fieldName":"imageProperty"},{"name":"enable-multiple-filter","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","fieldName":"expandMultipleFilters"},{"name":"expand-result","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","fieldName":"expandResults"},{"name":"expand-multiple-results","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","fieldName":"expandMultipleResults"},{"name":"result-type","type":{"text":"String"},"description":"Rendering type for results. Can be `list`or `cards` (`cards` requires also importing the `eox-layout` element)","default":"\\"list\\"","fieldName":"resultType"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-itemfilter","customElement":true}],"exports":[{"kind":"js","name":"EOxItemFilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}},{"kind":"custom-element-definition","name":"eox-itemfilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}}]},{"kind":"javascript-module","path":"elements/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitReady","privacy":"private","description":"Editor has loaded schema and API is ready to be used"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{}"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"customEditorInterfaces","privacy":"public","type":{"text":"Array"},"description":"List of custom editor interface\\nRead more about the implementation of custom editor interfaces here:\\nhttps://github.com/json-editor/json-editor/blob/master/docs/custom-editor.html","default":"[]"}],"events":[{"name":"ready","type":{"text":"Event"}},{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/src/main.js","declarations":[{"kind":"class","description":"Display layers and groups of a connected OpenLayers map\\n\\n## Layer properties\\nIn order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. `layer.set(property, value)`).\\n\\n#### `id?: string`\\nThe layer id. Not required but recommended. Can also be any other layer property (defined via the `idProperty` property or `id-property`attribute - see API).\\n\\n#### `title?: string`\\nThe title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the `titleProperty` property or `title-property`attribute - see API).\\n\\n#### `layerControlHide?: Boolean`\\nCompletely hide a layer from the layer control.\\n\\n#### `layerControlOptional?: Boolean`\\nInitially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.\\n\\n#### `layerControlExclusive?: Boolean`\\nMake layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.\\n\\n#### `layerControlExpand?: Boolean`\\nPre-expand a layer dropdown so that it is always open when the component initializes.\\n\\n#### `layerControlToolsExpand?: Boolean`\\nPre-expand the layer tools so they are visible when the component initializes.\\n\\n#### `layerConfig?: Object`\\nConfiguration options for the layer (displayed in the layer tools\' \\"config\\" tab)\\n\\n#### `layerDateTime?: Object`\\nPartial eox-timecontrol config passed to the \\"datetime\\" tool\\n\\n### `layerLegend`?: Object\\nCreates a dynamic color legend based on range & domain of values. Extenteds partial config of `color-legend-element`","name":"EOxLayerControl","members":[{"kind":"field","name":"#eoxMap","privacy":"private","description":"Instance of `eox-map` which is a wrapper for the OL","type":{"text":"EOxMap"}},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"#handleLayerControlLayerListChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent & {target: Element}"}}],"description":"Event handler for changes in the layer list"},{"kind":"method","name":"#handleDatetimeUpdate","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches datetime updates from layer datetime to the layercontrol"},{"kind":"method","name":"#handleLayerConfigChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches jsonform updates from layer config to the layercontrol"},{"kind":"field","name":"#styleEOX","privacy":"private","default":"` :host, :root { font-family: Roboto, sans-serif; --padding: 0.5rem; --padding-vertical: .2rem; --list-padding: 48px; --layer-input-visibility: flex; --layer-summary-visibility: flex; --layer-type-visibility: block; --layer-title-visibility: flex; --layer-visibility: block; --layer-tools-button-visibility: flex; display: block; padding: var(--padding) 0; --background-color: var(--eox-background-color, transparent); background-color: var(--background-color, transparent); } select { background-color: var(--background-color); } `"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"map","privacy":"public","type":{"text":"Map"},"description":"The native OL map instance","default":"null"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"showLayerZoomState","privacy":"public","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","attribute":"show-layer-zoom-state"},{"kind":"field","name":"tools","privacy":"public","type":{"text":"Array<String>"},"description":"Layer tools","default":"[\\"info\\", \\"opacity\\", \\"datetime\\", \\"config\\", \\"remove\\", \\"sort\\"]"},{"kind":"field","name":"addExternalLayers","privacy":"public","type":{"text":"Boolean"},"description":"Enable-disable external layer","default":"false"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"toolsAsList","privacy":"public","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","attribute":"toolsAsList"}],"events":[{"name":"layerchange","type":{"text":"CustomEvent"},"description":"A generic layer change event; could be a layer visibility, group length updates and others.\\nPasses the changed layer in the `detail`."},{"name":"datetime:updated","type":{"text":"CustomEvent"}},{"name":"layerConfig:change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"id-property","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"show-layer-zoom-state","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","fieldName":"showLayerZoomState"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"toolsAsList","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","fieldName":"toolsAsList"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-layercontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxLayerControl","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layercontrol","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layout/src/main.js","declarations":[{"kind":"class","description":"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\\n- `eox-layout`: the container holding all the items\\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight), which can be single values or three vlaues for small/medium/large","name":"EOxLayout","members":[{"kind":"field","name":"mediaBreakpoints","type":{"text":"array"},"description":"The breakpoints for small/medium/large screens (in pixel).","default":"[0, 600, 1280]"}],"attributes":[{"name":"column-width"},{"name":"fill-grid"},{"name":"gap"},{"name":"row-height"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout","customElement":true},{"kind":"class","description":"","name":"EOxLayoutItem","members":[],"attributes":[{"name":"x"},{"name":"y"},{"name":"w"},{"name":"h"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout-item","customElement":true}],"exports":[{"kind":"js","name":"EOxLayout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"js","name":"EOxLayoutItem","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout-item","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}}]},{"kind":"javascript-module","path":"elements/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"string"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"ControlDictionary"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"boolean"}}],"return":{"type":{"text":"boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string | number"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"boolean"}}],"return":{"type":{"text":"boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/stacinfo/src/main.js","declarations":[{"kind":"class","description":"### Introduction\\nWorking with STAC catalogs, collections and items often times requires\\nto fetch a JSON file, parse its contents and display some of its fields\\nin some formatted way. To make these steps reusable, the `eox-stacinfo`\\nelement offers a set of functionalities:\\n- **automatically fetch a STAC file** as soon as the element loads\\n- offer a **property whitelist** functionality to choose which properties to display\\n- display the properties in **configurable sections** (header, body, featured, footer)\\n- allow to **override** any property display for application-specific custom needs\\n\\nThe use case for this element is alongside a map which displays STAC files\\nor in a catalog browsing scenario where a quick look at the most important properties\\nis needed.\\n\\n#### Technology\\nUnder the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.","name":"EOxStacInfo","members":[{"kind":"field","name":"allowHtml","privacy":"public","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","attribute":"allow-html"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","attribute":"unstyled"},{"kind":"field","name":"for","privacy":"public","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","attribute":"for"},{"kind":"field","name":"header","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the header","default":"[]"},{"kind":"field","name":"tags","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display as tags","default":"[]"},{"kind":"field","name":"body","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display in the main body","default":"[]"},{"kind":"field","name":"featured","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the featured section","default":"[]"},{"kind":"field","name":"footer","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the footer","default":"[]"},{"kind":"field","name":"stacInfo","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the fetched STAC information","default":"[]"},{"kind":"field","name":"stacProperties","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the parsed STAC properties","default":"[]"}],"attributes":[{"name":"allow-html","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","fieldName":"allowHtml"},{"name":"unstyled","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","fieldName":"unstyled"},{"name":"for","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","fieldName":"for"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-stacinfo","customElement":true}],"exports":[{"kind":"js","name":"EOxStacInfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}},{"kind":"custom-element-definition","name":"eox-stacinfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}}]},{"kind":"javascript-module","path":"elements/storytelling/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxStoryTelling","members":[{"kind":"field","name":"#html","privacy":"private","description":"Generated HTML Elements using markdown","type":{"text":"HTMLElement[]"},"default":"undefined"},{"kind":"field","name":"#config","privacy":"private","type":{"text":"Object"},"default":"{}","description":"Basic config"},{"kind":"field","name":"#debounceUpdateMarkdown","privacy":"private","type":{"text":"Object"},"default":"null","description":"Debounce update markdown"},{"kind":"method","name":"#dispatchInitEvent","privacy":"private","parameters":[{"name":"element","description":"Dom element","type":{"text":"Element"}}]},{"kind":"method","name":"handleSlotChange","description":"Handles changes to the slot\'s content, updating the component\'s internal state."},{"kind":"method","name":"waitForHtmlInitialization"},{"kind":"field","name":"markdown","privacy":"public","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","attribute":"markdown"},{"kind":"field","name":"markdownURL","privacy":"public","type":{"text":"String"},"description":"Markdown Content URL","default":"null","attribute":"markdown-url"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"disableAutosave","privacy":"public","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","attribute":"disable-autosave"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","attribute":"show-editor"},{"kind":"field","name":"showNav","privacy":"public","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","attribute":"show-nav"},{"kind":"field","name":"nav","privacy":"public","type":{"text":"Array<Object>"},"description":"List of items in navigation","default":"[]"},{"kind":"field","name":"addCustomSectionIndex","privacy":"public","type":{"text":"Number"},"description":"custom section index","default":"-1","attribute":"addCustomSectionIndex"},{"kind":"field","name":"selectedCustomElement","privacy":"public","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","attribute":"selectedCustomElement"}],"events":[{"name":"init","type":{"text":"CustomEvent"}},{"name":"changed","type":{"text":"CustomEvent"}}],"attributes":[{"name":"markdown","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","fieldName":"markdown"},{"name":"markdown-url","type":{"text":"String"},"description":"Markdown Content URL","default":"null","fieldName":"markdownURL"},{"name":"show-nav","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","fieldName":"showNav"},{"name":"show-editor","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","fieldName":"showEditor"},{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"disable-autosave","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","fieldName":"disableAutosave"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"addCustomSectionIndex","type":{"text":"Number"},"description":"custom section index","default":"-1","fieldName":"addCustomSectionIndex"},{"name":"selectedCustomElement","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","fieldName":"selectedCustomElement"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-storytelling","customElement":true}],"exports":[{"kind":"js","name":"EOxStoryTelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}},{"kind":"custom-element-definition","name":"eox-storytelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}}]},{"kind":"javascript-module","path":"elements/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"play","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"play"},{"kind":"field","name":"navigation","privacy":"public","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","attribute":"navigation"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"displayFormat","privacy":"public","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","attribute":"display-format"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"navigation","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","fieldName":"navigation"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"play"},{"name":"display-format","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","fieldName":"displayFormat"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/flatgeobuf/dist/doc/assets/main.js","declarations":[],"exports":[]}]'),CYe={schemaVersion:_Ye,readme:EYe,modules:AYe};function Zxe(e){const t={h3:"h3",...eDe(),...e.components};return kc.jsxs(kc.Fragment,{children:[`
`,`
`,kc.jsx(iqe,{isTemplate:!0}),`
`,kc.jsx(oqe,{}),`
`,kc.jsx(sqe,{}),`
`,kc.jsx(aqe,{}),`
`,kc.jsx(lqe,{}),`
`,kc.jsx(t.h3,{id:"api",children:"API"}),`
`,kc.jsx(uqe,{}),`
`,kc.jsx(cqe,{includePrimary:!1})]})}function SYe(e={}){const{wrapper:t}={...eDe(),...e.components};return t?kc.jsx(t,{...e,children:kc.jsx(Zxe,{...e})}):Zxe(e)}const kYe=`
  :root, :host, eox-chart {
    display: block;
  }
  #vis {
    width: 100%;
    height: 100%;
  }
`,TYe=`
  eox-chart {
    font-family: Roboto, sans-serif;
  }
`,YL=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}:root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}`,DYe=/("(?:[^\\"]|\\.)*")|[:,]/g;function H$(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const u=JSON.stringify(s,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const c=u.replace(DYe,(d,p)=>p||`${d} `);if(c.length<=f)return c}if(i!=null&&(s=JSON.parse(u),i=void 0),typeof s=="object"&&s!==null){const c=a+n,d=[];let p=0,h,g;if(Array.isArray(s)){h="[",g="]";const{length:m}=s;for(;p<m;p++)d.push(o(s[p],c,p===m-1?0:1)||"null")}else{h="{",g="}";const m=Object.keys(s),{length:y}=m;for(;p<y;p++){const v=m[p],x=`${JSON.stringify(v)}: `,_=o(s[v],c,x.length+(p===y-1?0:1));_!==void 0&&d.push(x+_)}}if(d.length>0)return[h,n+d.join(`,
${c}`),g].join(`
${a}`)}return u}(e,"",0)}function ju(e,t,n){return e.fields=t||[],e.fname=n,e}function Fs(e){return e==null?null:e.fname}function Al(e){return e==null?null:e.fields}function ZDe(e){return e.length===1?LYe(e[0]):RYe(e)}const LYe=e=>function(t){return t[e]},RYe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function _t(e){throw Error(e)}function sh(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||_t("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&_t("Access path missing closing bracket: "+e),r&&_t("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Vc(e,t,n){const r=sh(e);return e=r.length===1?r[0]:e,ju((n&&n.get||ZDe)(r),[e],t||e)}const pA=Vc("id"),$l=ju(e=>e,[],"identity"),Pg=ju(()=>0,[],"zero"),ux=ju(()=>1,[],"one"),Yc=ju(()=>!0,[],"true"),Ag=ju(()=>!1,[],"false");function FYe(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const QDe=0,cP=1,fP=2,JDe=3,eLe=4;function dP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FYe,r=e||QDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=cP&&n(t||"error","ERROR",arguments),this},warn(){return r>=fP&&n(t||"warn","WARN",arguments),this},info(){return r>=JDe&&n(t||"log","INFO",arguments),this},debug(){return r>=eLe&&n(t||"log","DEBUG",arguments),this}}}var Dt=Array.isArray;function mn(e){return e===Object(e)}const Qxe=e=>e!=="__proto__";function cx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=$Ye(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;fx(r,o,i[o],s)}return r},{})}function fx(e,t,n,r){if(!Qxe(t))return;let i,o;if(mn(n)&&!Dt(n)){o=mn(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?fx(o,i,n[i]):Qxe(i)&&(o[i]=n[i])}else e[t]=n}function $Ye(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ri(e){return e[e.length-1]}function _l(e){return e==null||e===""?null:+e}const tLe=e=>t=>e*Math.exp(t),nLe=e=>t=>Math.log(e*t),rLe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),iLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,H3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function XL(e,t,n,r){const i=n(e[0]),o=n(Ri(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function oLe(e,t){return XL(e,t,_l,$l)}function sLe(e,t){var n=Math.sign(e[0]);return XL(e,t,nLe(n),tLe(n))}function aLe(e,t,n){return XL(e,t,H3(n),H3(1/n))}function lLe(e,t,n){return XL(e,t,rLe(n),iLe(n))}function KL(e,t,n,r,i){const o=r(e[0]),s=r(Ri(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function hP(e,t,n){return KL(e,t,n,_l,$l)}function pP(e,t,n){const r=Math.sign(e[0]);return KL(e,t,n,nLe(r),tLe(r))}function q3(e,t,n,r){return KL(e,t,n,H3(r),H3(1/r))}function gP(e,t,n,r){return KL(e,t,n,rLe(r),iLe(r))}function uLe(e){return 1+~~(new Date(e).getMonth()/3)}function cLe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function vn(e){return e!=null?Dt(e)?e:[e]:[]}function fLe(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Br(e){return typeof e=="function"}const MYe="descending";function mP(e,t,n){n=n||{},t=vn(t)||[];const r=[],i=[],o={},s=n.comparator||OYe;return vn(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===MYe?-1:1),i.push(a=Br(a)?a:Vc(a,null,n)),(Al(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:ju(s(i,r),Object.keys(o))}const gA=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),OYe=(e,t)=>e.length===1?IYe(e[0],t[0]):NYe(e,t,e.length),IYe=(e,t)=>function(n,r){return gA(e(n),e(r))*t},NYe=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=gA(o(r),o(i));return s*t[a]});function Ml(e){return Br(e)?e:()=>e}function vP(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Kr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Zd(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function dLe(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}function yn(e,t){return Object.hasOwn(e,t)}const fS={};function dx(e){let t={},n;function r(o){return yn(t,o)&&t[o]!==fS}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===fS&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=fS),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==fS&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function hLe(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=Ri(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=s?r:f<=s?i:o}function tn(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Kr(r,n)}function Tb(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Im(e){return typeof e=="boolean"}function im(e){return Object.prototype.toString.call(e)==="[object Date]"}function pLe(e){return e&&Br(e[Symbol.iterator])}function eo(e){return typeof e=="number"}function yP(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pn(e){return typeof e=="string"}function bP(e,t,n){e&&(e=t?vn(e).map(a=>a.replace(/\\(.)/g,"$1")):vn(e));const r=e&&e.length,i=n&&n.get||ZDe,o=a=>i(t?[a]:sh(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return ju(s,e,"key")}function gLe(e,t){const n=e[0],r=Ri(e),i=+t;return i?i===1?r:n+i*(r-n):n}const PYe=1e4;function mLe(e){e=+e||PYe;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>yn(t,s)||yn(n,s),get:s=>yn(t,s)?t[s]:yn(n,s)?o(s,n[s]):void 0,set:(s,a)=>yn(t,s)?t[s]=a:o(s,a)}}function vLe(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function N2(e,t){let n="";for(;--t>=0;)n+=e;return n}function yLe(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?N2(i,s)+o:r==="center"?N2(i,~~(s/2))+o+N2(i,Math.ceil(s/2)):o+N2(i,s)}function mA(e){return e&&Ri(e)-e[0]||0}function Qt(e){return Dt(e)?"["+e.map(Qt)+"]":mn(e)||pn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const BYe=e=>eo(e)||im(e)?e:Date.parse(e);function wP(e,t){return t=t||BYe,e==null||e===""?null:t(e)}function _P(e){return e==null||e===""?null:e+""}function hc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function bLe(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Dg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var Jxe={},q$={},G$=34,u2=10,W$=13;function xLe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function zYe(e,t){var n=xLe(e);return function(r,i){return t(n(r),i,e)}}function ewe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function UYe(e){return e<0?"-"+vu(-e,6):e>9999?"+"+vu(e,6):vu(e,4)}function jYe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":UYe(e.getUTCFullYear())+"-"+vu(e.getUTCMonth()+1,2)+"-"+vu(e.getUTCDate(),2)+(i?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"."+vu(i,3)+"Z":r?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"Z":n||t?"T"+vu(t,2)+":"+vu(n,2)+"Z":"")}function HYe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var p,h,g=i(c,function(m,y){if(p)return p(m,y-1);h=m,p=d?zYe(m,d):xLe(m)});return g.columns=h||[],g}function i(c,d){var p=[],h=c.length,g=0,m=0,y,v=h<=0,x=!1;c.charCodeAt(h-1)===u2&&--h,c.charCodeAt(h-1)===W$&&--h;function _(){if(v)return q$;if(x)return x=!1,Jxe;var C,w=g,T;if(c.charCodeAt(w)===G$){for(;g++<h&&c.charCodeAt(g)!==G$||c.charCodeAt(++g)===G$;);return(C=g)>=h?v=!0:(T=c.charCodeAt(g++))===u2?x=!0:T===W$&&(x=!0,c.charCodeAt(g)===u2&&++g),c.slice(w+1,C-1).replace(/""/g,'"')}for(;g<h;){if((T=c.charCodeAt(C=g++))===u2)x=!0;else if(T===W$)x=!0,c.charCodeAt(g)===u2&&++g;else if(T!==n)continue;return c.slice(w,C)}return v=!0,c.slice(w,h)}for(;(y=_())!==q$;){for(var E=[];y!==Jxe&&y!==q$;)E.push(y),y=_();d&&(E=d(E,m++))==null||p.push(E)}return p}function o(c,d){return c.map(function(p){return d.map(function(h){return f(p[h])}).join(e)})}function s(c,d){return d==null&&(d=ewe(c)),[d.map(f).join(e)].concat(o(c,d)).join(`
`)}function a(c,d){return d==null&&(d=ewe(c)),o(c,d).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?jYe(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}function qYe(e){return e}function GYe(e){if(e==null)return qYe;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,c=new Array(f);for(c[0]=(t+=a[0])*r+o,c[1]=(n+=a[1])*i+s;u<f;)c[u]=a[u],++u;return c}}function WYe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function VYe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return twe(e,n)})}:twe(e,t)}function twe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=wLe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function wLe(e,t){var n=GYe(e.transform),r=e.arcs;function i(f,c){c.length&&c.pop();for(var d=r[f<0?~f:f],p=0,h=d.length;p<h;++p)c.push(n(d[p],p));f<0&&WYe(c,h)}function o(f){return n(f)}function s(f){for(var c=[],d=0,p=f.length;d<p;++d)i(f[d],c);return c.length<2&&c.push(c[0]),c}function a(f){for(var c=s(f);c.length<4;)c.push(c[0]);return c}function l(f){return f.map(a)}function u(f){var c=f.type,d;switch(c){case"GeometryCollection":return{type:c,geometries:f.geometries.map(u)};case"Point":d=o(f.coordinates);break;case"MultiPoint":d=f.coordinates.map(o);break;case"LineString":d=s(f.arcs);break;case"MultiLineString":d=f.arcs.map(s);break;case"Polygon":d=l(f.arcs);break;case"MultiPolygon":d=f.arcs.map(l);break;default:return null}return{type:c,coordinates:d}}return u(t)}function YYe(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,f){var c=e.arcs[u<0?~u:u],d;c.length<3&&!c[1][0]&&!c[1][1]&&(d=t[++s],t[s]=u,t[f]=d)}),t.forEach(function(u){var f=a(u),c=f[0],d=f[1],p,h;if(p=i[c])if(delete i[p.end],p.push(u),p.end=d,h=r[d]){delete r[h.start];var g=h===p?p:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[p.start]=i[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(u),p.start=c,h=i[c]){delete i[h.end];var m=h===p?p:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[p.start]=i[p.end]=p;else p=[u],r[p.start=c]=i[p.end=d]=p});function a(u){var f=e.arcs[u<0?~u:u],c=f[0],d;return e.transform?(d=[0,0],f.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=f[f.length-1],u<0?[d,c]:[c,d]}function l(u,f){for(var c in u){var d=u[c];delete f[d.start],delete d.start,delete d.end,d.forEach(function(p){n[p<0?~p:p]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function XYe(e){return wLe(e,KYe.apply(this,arguments))}function KYe(e,t,n){var r,i,o;if(arguments.length>1)r=ZYe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:YYe(e,r)}}function ZYe(e,t,n){var r=[],i=[],o;function s(c){var d=c<0?~c:c;(i[d]||(i[d]=[])).push({i:c,g:o})}function a(c){c.forEach(s)}function l(c){c.forEach(a)}function u(c){c.forEach(l)}function f(c){switch(o=c,c.type){case"GeometryCollection":c.geometries.forEach(f);break;case"LineString":a(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return f(t),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}const Qa="year",Ou="quarter",Cl="month",aa="week",Iu="date",wl="day",Qd="dayofyear",pc="hours",gc="minutes",Xc="seconds",Pf="milliseconds",EP=[Qa,Ou,Cl,aa,Iu,wl,Qd,pc,gc,Xc,Pf],V$=EP.reduce((e,t,n)=>(e[t]=1+n,e),{});function AP(e){const t=vn(e).slice(),n={};return t.length||_t("Missing time unit."),t.forEach(i=>{yn(V$,i)?n[i]=1:_t(`Invalid time unit: ${i}.`)}),(n[aa]||n[wl]?1:0)+(n[Ou]||n[Cl]||n[Iu]?1:0)+(n[Qd]?1:0)>1&&_t(`Incompatible time units: ${e}`),t.sort((i,o)=>V$[i]-V$[o]),t}const QYe={[Qa]:"%Y ",[Ou]:"Q%q ",[Cl]:"%b ",[Iu]:"%d ",[aa]:"W%U ",[wl]:"%a ",[Qd]:"%j ",[pc]:"%H:00",[gc]:"00:%M",[Xc]:":%S",[Pf]:".%L",[`${Qa}-${Cl}`]:"%Y-%m ",[`${Qa}-${Cl}-${Iu}`]:"%Y-%m-%d ",[`${pc}-${gc}`]:"%H:%M"};function _Le(e,t){const n=Kr({},QYe,t),r=AP(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const tv=new Date;function CP(e){return tv.setFullYear(e),tv.setMonth(0),tv.setDate(1),tv.setHours(0,0,0,0),tv}function ELe(e){return CLe(new Date(e))}function ALe(e){return vI(new Date(e))}function CLe(e){return gp.count(CP(e.getFullYear())-1,e)}function vI(e){return ax.count(CP(e.getFullYear())-1,e)}function yI(e){return CP(e).getDay()}function JYe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function SLe(e){return TLe(new Date(e))}function kLe(e){return bI(new Date(e))}function TLe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return rm.count(t-1,e)}function bI(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lx.count(t-1,e)}function xI(e){return tv.setTime(Date.UTC(e,0,1)),tv.getUTCDay()}function eXe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function DLe(e,t,n,r,i){const o=t||1,s=Ri(e),a=(y,v,x)=>(x=x||y,tXe(n[x],r[x],y===s&&o,v)),l=new Date,u=hc(e),f=u[Qa]?a(Qa):Ml(2012),c=u[Cl]?a(Cl):u[Ou]?a(Ou):Pg,d=u[aa]&&u[wl]?a(wl,1,aa+wl):u[aa]?a(aa,1):u[wl]?a(wl,1):u[Iu]?a(Iu,1):u[Qd]?a(Qd,1):ux,p=u[pc]?a(pc):Pg,h=u[gc]?a(gc):Pg,g=u[Xc]?a(Xc):Pg,m=u[Pf]?a(Pf):Pg;return function(y){l.setTime(+y);const v=f(l);return i(v,c(l),d(l,v),p(l),h(l),g(l),m(l))}}function tXe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function p1(e,t,n){return t+e*7-(n+6)%7}const nXe={[Qa]:e=>e.getFullYear(),[Ou]:e=>Math.floor(e.getMonth()/3),[Cl]:e=>e.getMonth(),[Iu]:e=>e.getDate(),[pc]:e=>e.getHours(),[gc]:e=>e.getMinutes(),[Xc]:e=>e.getSeconds(),[Pf]:e=>e.getMilliseconds(),[Qd]:e=>CLe(e),[aa]:e=>vI(e),[aa+wl]:(e,t)=>p1(vI(e),e.getDay(),yI(t)),[wl]:(e,t)=>p1(1,e.getDay(),yI(t))},rXe={[Ou]:e=>3*e,[aa]:(e,t)=>p1(e,0,yI(t))};function LLe(e,t){return DLe(e,t||1,nXe,rXe,JYe)}const iXe={[Qa]:e=>e.getUTCFullYear(),[Ou]:e=>Math.floor(e.getUTCMonth()/3),[Cl]:e=>e.getUTCMonth(),[Iu]:e=>e.getUTCDate(),[pc]:e=>e.getUTCHours(),[gc]:e=>e.getUTCMinutes(),[Xc]:e=>e.getUTCSeconds(),[Pf]:e=>e.getUTCMilliseconds(),[Qd]:e=>TLe(e),[aa]:e=>bI(e),[wl]:(e,t)=>p1(1,e.getUTCDay(),xI(t)),[aa+wl]:(e,t)=>p1(bI(e),e.getUTCDay(),xI(t))},oXe={[Ou]:e=>3*e,[aa]:(e,t)=>p1(e,0,xI(t))};function RLe(e,t){return DLe(e,t||1,iXe,oXe,eXe)}const sXe={[Qa]:Xd,[Ou]:rE.every(3),[Cl]:rE,[aa]:ax,[Iu]:gp,[wl]:gp,[Qd]:gp,[pc]:GL,[gc]:HL,[Xc]:lp,[Pf]:f1},aXe={[Qa]:Kd,[Ou]:iE.every(3),[Cl]:iE,[aa]:lx,[Iu]:rm,[wl]:rm,[Qd]:rm,[pc]:WL,[gc]:qL,[Xc]:lp,[Pf]:f1};function hx(e){return sXe[e]}function px(e){return aXe[e]}function FLe(e,t,n){return e?e.offset(t,n):void 0}function $Le(e,t,n){return FLe(hx(e),t,n)}function MLe(e,t,n){return FLe(px(e),t,n)}function OLe(e,t,n,r){return e?e.range(t,n,r):void 0}function ILe(e,t,n,r){return OLe(hx(e),t,n,r)}function NLe(e,t,n,r){return OLe(px(e),t,n,r)}const P2=1e3,B2=P2*60,z2=B2*60,ZL=z2*24,lXe=ZL*7,nwe=ZL*30,wI=ZL*365,PLe=[Qa,Cl,Iu,pc,gc,Xc,Pf],U2=PLe.slice(0,-1),j2=U2.slice(0,-1),H2=j2.slice(0,-1),uXe=H2.slice(0,-1),cXe=[Qa,aa],rwe=[Qa,Cl],BLe=[Qa],c2=[[U2,1,P2],[U2,5,5*P2],[U2,15,15*P2],[U2,30,30*P2],[j2,1,B2],[j2,5,5*B2],[j2,15,15*B2],[j2,30,30*B2],[H2,1,z2],[H2,3,3*z2],[H2,6,6*z2],[H2,12,12*z2],[uXe,1,ZL],[cXe,1,lXe],[rwe,1,nwe],[rwe,3,3*nwe],[BLe,1,wI]];function zLe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(mA(t))/n;let i=LL(a=>a[2]).right(c2,r),o,s;return i===c2.length?(o=BLe,s=Av(t[0]/wI,t[1]/wI,n)):i?(i=c2[r/c2[i-1][2]<c2[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=PLe,s=Math.max(Av(t[0],t[1],n),1)),{units:o,step:s}}function q2(e){const t={};return n=>t[n]||(t[n]=e(n))}function fXe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=dXe(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function dXe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function ULe(e){const t=q2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=_xe(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return fXe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=_xe(s??",f");const a=Av(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=zqe(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=Bqe(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=Pqe(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let _I;jLe();function jLe(){return _I=ULe({format:Uqe,formatPrefix:jqe})}function HLe(e){return ULe(Nqe(e))}function G3(e){return arguments.length?_I=HLe(e):_I}function iwe(e,t,n){n=n||{},mn(n)||_t(`Invalid time multi-format specifier: ${n}`);const r=t(Xc),i=t(gc),o=t(pc),s=t(Iu),a=t(aa),l=t(Cl),u=t(Ou),f=t(Qa),c=e(n[Pf]||".%L"),d=e(n[Xc]||":%S"),p=e(n[gc]||"%I:%M"),h=e(n[pc]||"%I %p"),g=e(n[Iu]||n[wl]||"%a %d"),m=e(n[aa]||"%b %d"),y=e(n[Cl]||"%B"),v=e(n[Ou]||"%B"),x=e(n[Qa]||"%Y");return _=>(r(_)<_?c:i(_)<_?d:o(_)<_?p:s(_)<_?h:l(_)<_?a(_)<_?g:m:f(_)<_?u(_)<_?y:v:x)(_)}function qLe(e){const t=q2(e.format),n=q2(e.utcFormat);return{timeFormat:r=>pn(r)?t(r):iwe(t,hx,r),utcFormat:r=>pn(r)?n(r):iwe(n,px,r),timeParse:q2(e.parse),utcParse:q2(e.utcParse)}}let EI;GLe();function GLe(){return EI=qLe({format:sP,parse:WDe,utcFormat:aP,utcParse:VDe})}function WLe(e){return qLe(UDe(e))}function oE(e){return arguments.length?EI=WLe(e):EI}const AI=(e,t)=>Kr({},e,t);function VLe(e,t){const n=e?HLe(e):G3(),r=t?WLe(t):oE();return AI(n,r)}function SP(e,t){const n=arguments.length;return n&&n!==2&&_t("defaultLocale expects either zero or two arguments."),n?AI(G3(e),oE(t)):AI(G3(),oE())}function hXe(){return jLe(),GLe(),SP()}const pXe=/^(data:|([A-Za-z]+:)?\/\/)/,gXe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,mXe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,owe="file://";function vXe(e,t){return n=>({options:n||{},sanitize:bXe,load:yXe,fileAccess:!1,file:xXe(t),http:_Xe(e)})}async function yXe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function bXe(e,t){t=Kr({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=gXe.test(e.replace(mXe,""));(e==null||typeof e!="string"||!a)&&_t("Sanitize failure, invalid URI: "+Qt(e));const l=pXe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(owe))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(owe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function xXe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):wXe}async function wXe(){_t("No file system access.")}function _Xe(e){return e?async function(t,n){const r=Kr({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Br(o[i])?o[i]():o.text():_t(o.status+""+o.statusText)}:EXe}async function EXe(){_t("No HTTP fetch method available.")}const AXe=e=>e!=null&&e===e,CXe=e=>e==="true"||e==="false"||e===!0||e===!1,SXe=e=>!Number.isNaN(Date.parse(e)),YLe=e=>!Number.isNaN(+e)&&!(e instanceof Date),kXe=e=>YLe(e)&&Number.isInteger(+e),CI={boolean:xP,integer:_l,number:_l,date:wP,string:_P,unknown:$l},dS=[CXe,kXe,YLe,SXe],TXe=["boolean","integer","number","date"];function XLe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=dS.length,i=dS.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&AXe(l)&&!dS[a](l)&&(i[a]=0,++s,s===dS.length))return"string";return TXe[i.reduce((o,s)=>o===0?s:o,0)-1]}function KLe(e,t){return t.reduce((n,r)=>(n[r]=XLe(e,r),n),{})}function swe(e){const t=function(n,r){const i={delimiter:e};return kP(n,r?Kr(r,i):i)};return t.responseType="text",t}function kP(e,t){return t.header&&(e=t.header.map(Qt).join(t.delimiter)+`
`+e),HYe(t.delimiter).parse(e+"")}kP.responseType="text";function DXe(e){return typeof Buffer=="function"&&Br(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function TP(e,t){const n=t&&t.property?Vc(t.property):$l;return mn(e)&&!DXe(e)?LXe(n(e),t):n(JSON.parse(e))}TP.responseType="json";function LXe(e,t){return!Dt(e)&&pLe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const RXe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function ZLe(e,t){let n,r,i,o;return e=TP(e,t),t&&t.feature?(n=VYe,i=t.feature):t&&t.mesh?(n=XYe,i=t.mesh,o=RXe[t.filter]):_t("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):_t("Invalid TopoJSON object: "+i),r&&r.features||[r]}ZLe.responseType="json";const Mk={dsv:kP,csv:swe(","),tsv:swe("	"),json:TP,topojson:ZLe};function DP(e,t){return arguments.length>1?(Mk[e]=t,this):yn(Mk,e)?Mk[e]:null}function QLe(e){const t=DP(e);return t&&t.responseType||"text"}function JLe(e,t,n,r){t=t||{};const i=DP(t.type||"json");return i||_t("Unknown data format type: "+t.type),e=i(e,t),t.parse&&FXe(e,t.parse,n,r),yn(e,"columns")&&delete e.columns,e}function FXe(e,t,n,r){if(!e.length)return;const i=oE();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,f,c;t==="auto"&&(t=KLe(e,o)),o=Object.keys(t);const d=o.map(p=>{const h=t[p];let g,m;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return g=h.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!CI[h])throw Error("Illegal format pattern: "+p+":"+h);return CI[h]});for(l=0,f=e.length,c=o.length;l<f;++l)for(s=e[l],u=0;u<c;++u)a=o[u],s[a]=d[u](s[a])}const QL=vXe(typeof fetch<"u"&&fetch,null);function JL(e){const t=e||$l,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function Ok(e,t){try{await t(e)}catch(n){e.error(n)}}const eRe=Symbol("vega_id");let $Xe=1;function eR(e){return!!(e&&Zn(e))}function Zn(e){return e[eRe]}function tRe(e,t){return e[eRe]=t,e}function lo(e){const t=e===Object(e)?e:{data:e};return Zn(t)?t:tRe(t,$Xe++)}function LP(e){return tR(e,lo({}))}function tR(e,t){for(const n in e)t[n]=e[n];return t}function nRe(e,t){return tRe(t,Zn(e))}function ry(e,t){return e?t?(n,r)=>e(n,r)||Zn(t(n))-Zn(t(r)):(n,r)=>e(n,r)||Zn(n)-Zn(r):null}function rRe(e){return e&&e.constructor===iy}function iy(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:iy,insert(a){const l=vn(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=Br(a)?r:t,u=vn(a),f=u.length;for(let c=0;c<f;++c)l.push(u[c]);return this},modify(a,l,u){const f={field:l,value:Ml(u)};return Br(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return Br(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},f={};let c,d,p,h,g,m;for(c=0,d=l.length;c<d;++c)u[Zn(l[c])]=1;for(c=0,d=t.length;c<d;++c)g=t[c],u[Zn(g)]=-1;for(c=0,d=r.length;c<d;++c)h=r[c],l.forEach(v=>{h(v)&&(u[Zn(v)]=-1)});for(c=0,d=e.length;c<d;++c)g=e[c],m=Zn(g),u[m]?u[m]=1:a.add.push(lo(e[c]));for(c=0,d=l.length;c<d;++c)g=l[c],u[Zn(g)]<0&&a.rem.push(g);function y(v,x,_){_?v[x]=_(v):a.encode=x,s||(f[Zn(v)]=v)}for(c=0,d=n.length;c<d;++c)p=n[c],g=p.tuple,h=p.field,m=u[Zn(g)],m>0&&(y(g,h,p.value),a.modifies(h));for(c=0,d=i.length;c<d;++c)p=i[c],h=p.filter,l.forEach(v=>{h(v)&&u[Zn(v)]>0&&y(v,p.field,p.value)}),a.modifies(p.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[Zn(v)]>0):l.slice();else for(m in f)a.mod.push(f[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const Ik="_:mod:_";function nR(){Object.defineProperty(this,Ik,{writable:!0,value:{}})}nR.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[Ik];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=Dt(n)?1+n.length:-1),i},modified(e,t){const n=this[Ik];if(arguments.length){if(Dt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Ik]={},this}};let MXe=0;const OXe="pulse",IXe=new nR,NXe=1,PXe=2;function Mo(e,t,n,r){this.id=++MXe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function awe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Mo.prototype={targets(){return this._targets||(this._targets=JL(pA))},set(e){return this.value!==e?(this.value=e,1):0},skip:awe(NXe),modified:awe(PXe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new nR,i=this._argops=this._argops||[],o=[];let s,a,l,u;const f=(c,d,p)=>{p instanceof Mo?(p!==this&&(t&&p.targets().add(this),o.push(p)),i.push({op:p,name:c,index:d})):r.set(c,d,p)};for(s in e)if(a=e[s],s===OXe)vn(a).forEach(c=>{c instanceof Mo?c!==this&&(c.targets().add(this),o.push(c)):_t("Pulse parameters must be operator instances.")}),this.source=a;else if(Dt(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)f(s,u,a[u]);else f(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||IXe,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function BXe(e,t,n,r){let i=1,o;return e instanceof Mo?o=e:e&&e.prototype instanceof Mo?o=new e:Br(e)?o=new Mo(null,e):(i=0,o=new Mo(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function zXe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let UXe=0;function rR(e,t,n){this.id=++UXe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Cg(e,t,n){return new rR(e,t,n)}rR.prototype={_filter:Yc,_apply:$l,targets(){return this._targets||(this._targets=JL(pA))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Cg(e);return this.targets().add(t),t},apply(e){const t=Cg(null,e);return this.targets().add(t),t},merge(){const e=Cg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Cg();return this.targets().add(Cg(null,null,vP(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Cg(null,null,()=>n=!0)),t.targets().add(Cg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Yc,this._targets=null}};function jXe(e,t,n,r){const i=this,o=Cg(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=vn(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function HXe(e,t){const n=this.locale();return JLe(e,t,n.timeParse,n.utcParse)}function qXe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function GXe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:QLe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function WXe(e,t,n){const r=this,i=r._pending||VXe(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Yc).insert(o.data||[])),i.done(),o}function VXe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const YXe={skip:!0};function XXe(e,t,n,r,i){return(e instanceof Mo?ZXe:KXe)(this,e,t,n,r,i),this}function KXe(e,t,n,r,i,o){const s=Kr({},o,YXe);let a,l;Br(n)||(n=Ml(n)),r===void 0?a=u=>e.touch(n(u)):Br(r)?(l=new Mo(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),c=l.value;rRe(c)?e.pulse(f,c,o):e.update(f,c,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function ZXe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new Mo(null,QXe(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function QXe(e,t){return t=Br(t)?t:Ml(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function JXe(e){e.rank=++this._rank}function eKe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&_t("Cycle detected in dataflow graph.")}const W3={},Cd=1,Lg=2,Yh=4,tKe=Cd|Lg,lwe=Cd|Yh,Xy=Cd|Lg|Yh,uwe=8,f2=16,cwe=32,fwe=64;function om(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Y$(e,t){const n=[];return Dg(e,t,r=>n.push(r)),n}function dwe(e,t){const n={};return e.visit(t,r=>{n[Zn(r)]=1}),r=>n[Zn(r)]?null:r}function hS(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}om.prototype={StopPropagation:W3,ADD:Cd,REM:Lg,MOD:Yh,ADD_REM:tKe,ADD_MOD:lwe,ALL:Xy,REFLOW:uwe,SOURCE:f2,NO_SOURCE:cwe,NO_FIELDS:fwe,fork(e){return new om(this.dataflow).init(this,e)},clone(){const e=this.fork(Xy);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Xy|f2)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new om(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&fwe)&&(n.fields=e.fields),t&Cd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Lg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Yh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&cwe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Xy;return t&Cd&&this.add.length||t&Lg&&this.rem.length||t&Yh&&this.mod.length},reflow(e){if(e)return this.fork(Xy).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Yh,dwe(this,Cd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Dt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Dt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Cd&&(n.addF=hS(n.addF,t)),e&Lg&&(n.remF=hS(n.remF,t)),e&Yh&&(n.modF=hS(n.modF,t)),e&f2&&(n.srcF=hS(n.srcF,t)),n},materialize(e){e=e||Xy;const t=this;return e&Cd&&t.addF&&(t.add=Y$(t.add,t.addF),t.addF=null),e&Lg&&t.remF&&(t.rem=Y$(t.rem,t.remF),t.remF=null),e&Yh&&t.modF&&(t.mod=Y$(t.mod,t.modF),t.modF=null),e&f2&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&f2)return Dg(n.source,n.srcF,r),n;e&Cd&&Dg(n.add,n.addF,r),e&Lg&&Dg(n.rem,n.remF,r),e&Yh&&Dg(n.mod,n.modF,r);const i=n.source;if(e&uwe&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Dg(i,dwe(n,lwe),r):Dg(i,n.srcF,r))}return n}};function RP(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}tn(RP,om,{fork(e){const t=new om(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Dt(e)?e.some(r=>n[r]):n[e]:0},filter(){_t("MultiPulse does not support filtering.")},materialize(){_t("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function nKe(e,t,n){const r=this,i=[];if(r._pulse)return iRe(r);if(r._pending&&await r._pending,t&&await Ok(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new om(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=JL(pA);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=W3),l!==W3&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++s}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((c,d)=>d.priority-c.priority);r._postrun=[];for(let c=0;c<f.length;++c)await Ok(r,f[c].callback)}return n&&await Ok(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(c=>{try{c(r)}catch(d){r.error(d)}})})),r}async function rKe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function iKe(e,t,n){return this._pulse?iRe(this):(this.evaluate(e,t,n),this)}function oKe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function iRe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function sKe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function aKe(e,t){const n=e.source,r=this._clock;return n&&Dt(n)?new RP(this,r,n.map(i=>i.pulse),t):this._input[e.id]||lKe(this._pulse,n&&n.pulse)}function lKe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==W3&&(e.source=t.source),e)}const FP={skip:!1,force:!1};function uKe(e,t){const n=t||FP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function cKe(e,t,n){const r=n||FP;return(e.set(t)||r.force)&&this.touch(e,r),this}function fKe(e,t,n){this.touch(e,n||FP);const r=new om(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function dKe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),oRe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,hKe(t,0,e)):r=n,r}}}function oRe(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function hKe(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,oRe(e,r,t,n)}function Ub(){this.logger(dP()),this.logLevel(cP),this._clock=0,this._rank=0,this._locale=SP();try{this._loader=QL()}catch{}this._touched=JL(pA),this._input={},this._pulse=null,this._heap=dKe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function d2(e){return function(){return this._log[e].apply(this,arguments)}}Ub.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:d2("error"),warn:d2("warn"),info:d2("info"),debug:d2("debug"),logLevel:d2("level"),cleanThreshold:1e4,add:BXe,connect:zXe,rank:JXe,rerank:eKe,pulse:fKe,touch:uKe,update:cKe,changeset:iy,ingest:qXe,parse:HXe,preload:WXe,request:GXe,events:jXe,on:XXe,evaluate:nKe,run:iKe,runAsync:rKe,runAfter:oKe,_enqueue:sKe,_getPulse:aKe};function wt(e,t){Mo.call(this,e,null,t)}tn(wt,Mo,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const g1={};function sRe(e){const t=aRe(e);return t&&t.Definition||null}function aRe(e){return e=e&&e.toLowerCase(),yn(g1,e)?g1[e]:null}function*lRe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function $P(e,t,n){const r=Float64Array.from(lRe(e,n));return r.sort(V_),t.map(i=>TDe(r,i))}function MP(e,t){return $P(e,[.25,.5,.75],t)}function OP(e,t){const n=e.length,r=$We(e,t),i=MP(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function uRe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,f,c,d;const p=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(f=p/t,c=0,d=e.steps.length;c<d&&e.steps[c]<f;++c);a=e.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(p)/r)-l));Math.ceil(p/a)>t;)a*=n;for(c=0,d=i.length;c<d;++c)f=a/i[c],f>=u&&p/f<=t&&(a=f)}f=Math.log(a);const h=f>=0?0:~~(-f/r)+1,g=Math.pow(n,-h-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/a+g)*a,o=o<f?f-a:f,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Kc=Math.random;function pKe(e){Kc=e}function cRe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(lRe(e,r)),o=i.length,s=t;let a,l,u,f;for(u=0,f=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Kc()*o)];f[u]=a/o}return f.sort(V_),[pI(f,n/2),pI(f,1-n/2)]}function fRe(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,f=l+t,c;for(;a<i;++a){if(c=r(e[a]),c>=f){for(u=(l+u)/2;s<a;++s)o[s]=u;f=c+t,l=c}u=c}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?gKe(o,t+t/4):o}function gKe(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function mKe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function vKe(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Kc())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const dRe=Math.sqrt(2*Math.PI),yKe=Math.SQRT2;let h2=NaN;function iR(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(h2===h2)n=h2,h2=NaN;else{do n=Kc()*2-1,r=Kc()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,h2=r*o}return e+n*t}function IP(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*dRe)}function oR(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function sR(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*yKe*bKe(2*e-1)}function bKe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function NP(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>iR(n,r),pdf:o=>IP(o,n,r),cdf:o=>oR(o,n,r),icdf:o=>sR(o,n,r)};return i.mean(e).stdev(t)}function PP(e,t){const n=NP();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=OP(e)),i):t},sample(){return e[~~(Kc()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function BP(e,t){return e=e||0,t=t??1,Math.exp(e+iR()*t)}function zP(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*dRe*e)}function UP(e,t,n){return oR(Math.log(e),t,n)}function jP(e,t,n){return Math.exp(sR(e,t,n))}function hRe(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>BP(n,r),pdf:o=>zP(o,n,r),cdf:o=>UP(o,n,r),icdf:o=>jP(o,n,r)};return i.mean(e).stdev(t)}function pRe(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Kc();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function HP(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Kc()}function qP(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GP(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function WP(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function gRe(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>HP(n,r),pdf:o=>qP(o,n,r),cdf:o=>GP(o,n,r),icdf:o=>WP(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function VP(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function vA(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function aR(e,t,n,r){e=e.filter(p=>{let h=t(p),g=n(p);return h!=null&&(h=+h)>=h&&g!=null&&(g=+g)>=g}),r&&e.sort((p,h)=>t(p)-t(h));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,f,c,d;for(d of e)o[a]=f=+t(d),s[a]=c=+n(d),++a,l+=(f-l)/a,u+=(c-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function yA(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function gx(e,t,n,r,i){let o=0,s=0;return yA(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;o+=u*u,s+=f*f}),1-o/s}function YP(e,t,n){let r=0,i=0,o=0,s=0,a=0;yA(e,t,n,(f,c)=>{++a,r+=(f-r)/a,i+=(c-i)/a,o+=(f*c-o)/a,s+=(f*f-s)/a});const l=vA(r,i,o,s),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:gx(e,t,n,i,u)}}function mRe(e,t,n){let r=0,i=0,o=0,s=0,a=0;yA(e,t,n,(f,c)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(c-i)/a,o+=(f*c-o)/a,s+=(f*f-s)/a});const l=vA(r,i,o,s),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:gx(e,t,n,i,u)}}function vRe(e,t,n){const[r,i,o,s]=aR(e,t,n);let a=0,l=0,u=0,f=0,c=0,d,p,h;yA(e,t,n,(v,x)=>{d=r[c++],p=Math.log(x),h=d*x,a+=(x*p-a)/c,l+=(h-l)/c,u+=(h*p-u)/c,f+=(d*h-f)/c});const[g,m]=vA(l/s,a/s,u/s,f/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:gx(e,t,n,s,y)}}function yRe(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;yA(e,t,n,(c,d)=>{const p=Math.log(c),h=Math.log(d);++l,r+=(p-r)/l,i+=(h-i)/l,o+=(p*h-o)/l,s+=(p*p-s)/l,a+=(d-a)/l});const u=vA(r,i,o,s),f=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:gx(e,t,n,a,f)}}function XP(e,t,n){const[r,i,o,s]=aR(e,t,n),a=r.length;let l=0,u=0,f=0,c=0,d=0,p,h,g,m;for(p=0;p<a;)h=r[p],g=i[p++],m=h*h,l+=(m-l)/p,u+=(m*h-u)/p,f+=(m*m-f)/p,c+=(h*g-c)/p,d+=(m*g-d)/p;const y=f-l*l,v=l*y-u*u,x=(d*l-c*u)/v,_=(c*y-d*u)/v,E=-x*l,C=w=>(w=w-o,x*w*w+_*w+E+s);return{coef:[E-_*o+x*o*o+s,_-2*x*o,x],predict:C,rSquared:gx(e,t,n,s,C)}}function bRe(e,t,n,r){if(r===0)return VP(e,t,n);if(r===1)return YP(e,t,n);if(r===2)return XP(e,t,n);const[i,o,s,a]=aR(e,t,n),l=i.length,u=[],f=[],c=r+1;let d,p,h,g,m;for(d=0;d<c;++d){for(h=0,g=0;h<l;++h)g+=Math.pow(i[h],d)*o[h];for(u.push(g),m=new Float64Array(c),p=0;p<c;++p){for(h=0,g=0;h<l;++h)g+=Math.pow(i[h],d+p);m[p]=g}f.push(m)}f.push(u);const y=wKe(f),v=x=>{x-=s;let _=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<c;++d)_+=y[d]*Math.pow(x,d);return _};return{coef:xKe(c,y,-s,a),predict:v,rSquared:gx(e,t,n,a,v)}}function xKe(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function wKe(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const hwe=2,pwe=1e-12;function xRe(e,t,n,r){const[i,o,s,a]=aR(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),c=new Float64Array(l),d=new Float64Array(l).fill(1);for(let p=-1;++p<=hwe;){const h=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=h[0],x=h[1],_=y-i[v]>i[x]-y?v:x;let E=0,C=0,w=0,T=0,R=0;const L=1/Math.abs(i[_]-y||1);for(let S=v;S<=x;++S){const k=i[S],D=o[S],O=_Ke(Math.abs(y-k)*L)*d[S],N=k*O;E+=O,C+=N,w+=D*O,T+=D*N,R+=k*N}const[B,P]=vA(C/E,w/E,T/E,R/E);f[m]=B+P*y,c[m]=Math.abs(o[m]-f[m]),EKe(i,m+1,h)}if(p===hwe)break;const g=DDe(c);if(Math.abs(g)<pwe)break;for(let m=0,y,v;m<l;++m)y=c[m]/(6*g),d[m]=y>=1?pwe:(v=1-y*y)*v}return AKe(i,f,s,a)}function _Ke(e){return(e=1-e*e*e)*e*e}function EKe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function AKe(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const CKe=.5*Math.PI/180;function lR(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],f=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{f.push(i(s));for(let g=n;--g>0;)f.push(i(o+g/n*a))}let c=u[0],d=f[f.length-1];const p=1/a,h=SKe(c[1],f);for(;d;){const g=i((c[0]+d[0])/2);g[0]-c[0]>=l&&kKe(c,g,d,p,h)>CKe?f.push(g):(c=d,u.push(d),f.pop()),d=f[f.length-1]}return u}function SKe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function kKe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function TKe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function SI(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:TKe(e)}function wRe(e,t,n){return n||e+(t?"_"+t:"")}const X$=()=>{},DKe={init:X$,add:X$,rem:X$,idx:0},sE={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},bA=Object.keys(sE).filter(e=>e!=="__count__");function LKe(e,t){return(n,r)=>Kr({name:e,aggregate_param:r,out:n||e},DKe,t)}[...bA,"__count__"].forEach(e=>{sE[e]=LKe(e,sE[e])});function _Re(e,t,n){return sE[e](n,t)}function ERe(e,t){return e.idx-t.idx}function RKe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=sE[i]())})};return e.forEach(n),Object.values(t).sort(ERe)}function FKe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function $Ke(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function MKe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function OKe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function ARe(e,t){const n=t||$l,r=RKe(e),i=e.slice().sort(ERe);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=FKe,o.prototype.add=$Ke,o.prototype.rem=MKe,o.prototype.set=OKe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function KP(e){this._key=e?Vc(e):Zn,this.reset()}const rl=KP.prototype;rl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};rl.add=function(e){this._add.push(e)};rl.rem=function(e){this._rem.push(e)};rl.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};rl.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",yn(n,o)||(n[o]=1,++i);return i};rl.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=dLe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};rl.argmin=function(e){return this.extent(e)[0]||{}};rl.argmax=function(e){return this.extent(e)[1]||{}};rl.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};rl.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};rl.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=MP(this.values(),e),this._get=e),this._q};rl.q1=function(e){return this.quartile(e)[0]};rl.q2=function(e){return this.quartile(e)[1]};rl.q3=function(e){return this.quartile(e)[2]};rl.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=cRe(this.values(),1e3,.05,e),this._get=e),this._ci};rl.ci0=function(e){return this.ci(e)[0]};rl.ci1=function(e){return this.ci(e)[1]};function mm(e){wt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}mm.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bA},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};tn(mm,wt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,f,c;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][c=f[n[u]]]=c}o(e._prev),o(t);function s(a,l,u){const f=n[u],c=r[u++];for(const d in c){const p=a?a+"|"+d:d;l[f]=c[d],u<i?s(p,l,u):t[p]||e.cell(p,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const x=vn(Al(v)),_=x.length;let E=0,C;for(;E<_;++E)r[C=x[E]]||(r[C]=1,t.push(C))}this._dims=vn(e.groupby),this._dnames=this._dims.map(v=>{const x=Fs(v);return i(v),n.push(x),x}),this.cellkey=e.key?e.key:SI(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,f={};let c,d,p,h,g,m,y;for(u!==s.length&&_t("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(c=o[y],d=s[y],p=a[y]||null,c==null&&d!=="count"&&_t("Null aggregate field specified."),g=Fs(c),m=wRe(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}h=f[g],h||(i(c),h=f[g]=[],h.field=c,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(_Re(d,p,m))}return this._measures=this._measures.map(v=>ARe(v,v.field)),Object.create(null)},cellkey:SI(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new KP),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?nRe(t.tuple,o):lo(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,f,c;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(f=0,c=this._alen;f<c;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,c=this._mlen;f<c;++f)l=n[f],(l.num===0&&i?s:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const IKe=1e-14;function ZP(e){wt.call(this,null,e)}ZP.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};tn(ZP,wt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Al(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const c=r(f);f[a]=c,f[l]=c==null?null:i+o*(1+(c-i)/o)}:f=>f[a]=r(f)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=uRe(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let f=_l(t(u));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(IKe+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=ju(l,Al(t),e.name||"bin_"+Fs(t))}});function CRe(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!s[r(f)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?vLe(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function QP(e){wt.call(this,[],e)}QP.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};tn(QP,wt,{transform(e,t){const n=t.fork(t.ALL),r=CRe(Zn,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(ry(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function SRe(e){Mo.call(this,null,NKe,e)}tn(SRe,Mo);function NKe(e){return this.value&&!e.modified()?this.value:mP(e.fields,e.orders)}function JP(e){wt.call(this,null,e)}JP.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function PKe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}tn(JP,wt,{transform(e,t){const n=c=>d=>{for(var p=PKe(a(d),e.case,o)||[],h,g=0,m=p.length;g<m;++g)s.test(h=p[g])||c(h)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(c=>i[c]=1+(i[c]||0)),f=n(c=>i[c]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=lo({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function eB(e){wt.call(this,null,e)}eB.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};tn(eB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=BKe(a,i,o,e.filter||Yc)):n.mod=a,n.source=this.value,n.modifies(r)}});function BKe(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(lo(o)),o={},o[t]=u);return i}const gwe={kde:PP,mixture:pRe,normal:NP,lognormal:hRe,uniform:gRe},zKe="distributions",mwe="function",UKe="field";function kRe(e,t){const n=e[mwe];yn(gwe,n)||_t("Unknown distribution function: "+n);const r=gwe[n]();for(const i in e)i===UKe?r.data((e.from||t()).map(e[i])):i===zKe?r[i](e[i].map(o=>kRe(o,t))):typeof r[i]===mwe&&r[i](e[i]);return r}function tB(e){wt.call(this,null,e)}const TRe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],jKe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:TRe},{name:"weights",type:"number",array:!0}]};tB.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:TRe.concat(jKe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};tn(tB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=kRe(e.distribution,HKe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&_t("Invalid density method: "+s),!e.extent&&!r.data&&_t("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Zd(r.data()),u=lR(s,l,i,o).map(f=>{const c={};return c[a[0]]=f[0],c[a[1]]=f[1],lo(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function HKe(e){return()=>e.materialize(e.SOURCE).source}function DRe(e,t){return e?e.map((n,r)=>t[r]||Fs(n)):null}function nB(e,t,n){const r=[],i=c=>c(l);let o,s,a,l,u,f;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),f=o[u],f||(o[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const LRe="bin";function rB(e){wt.call(this,null,e)}rB.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:LRe}]};const qKe=(e,t)=>mA(Zd(e,t))/30;tn(rB,wt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=nB(t.source,e.groupby,$l),i=e.smooth||!1,o=e.field,s=e.step||qKe(n,o),a=ry((h,g)=>o(h)-o(g)),l=e.as||LRe,u=r.length;let f=1/0,c=-1/0,d=0,p;for(;d<u;++d){const h=r[d].sort(a);p=-1;for(const g of fRe(h,s,i,o))g<f&&(f=g),g>c&&(c=g),h[++p][l]=g}return this.value={start:f,stop:c,step:s},t.reflow(!0).modifies(l)}});function RRe(e){Mo.call(this,null,GKe,e),this.modified(!0)}tn(RRe,Mo);function GKe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ju(n=>t(n,e),Al(t),Fs(t))}function iB(e){wt.call(this,[void 0,void 0],e)}iB.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};tn(iB,wt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=_l(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Fs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function oB(e,t){Mo.call(this,e),this.parent=t,this.count=0}tn(oB,Mo,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function uR(e){wt.call(this,{},e),this._keys=dx();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}tn(uR,wt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=yn(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new oB(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Zn(l),f=o.get(u);f!==void 0&&(o.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(Zn(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Zn(l),f=o.get(u),c=r(l);f===c?a(c).mod(l):(o.set(u,c),a(f).rem(l),a(c).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Zn(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Zn(l),f=o.get(u),c=r(l);f!==c&&(o.set(u,c),a(f).rem(l),a(c).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function FRe(e){Mo.call(this,null,WKe,e)}tn(FRe,Mo);function WKe(e){return this.value&&!e.modified()?this.value:Dt(e.name)?vn(e.name).map(t=>Vc(t)):Vc(e.name,e.as)}function sB(e){wt.call(this,dx(),e)}sB.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};tn(sB,wt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,c=>{const d=Zn(c);r.has(d)?r.delete(d):s.push(c)}),t.visit(t.ADD,c=>{l(c,e)?o.push(c):r.set(Zn(c),1)});function f(c){const d=Zn(c),p=l(c,e),h=r.get(d);p&&h?(r.delete(d),o.push(c)):!p&&!h?(r.set(d,1),s.push(c)):u&&p&&!h&&a.push(c)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function aB(e){wt.call(this,[],e)}aB.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};tn(aB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=DRe(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(h=>h(a)),u=l.reduce((h,g)=>Math.max(h,g.length),0);let f=0,c,d,p;for(;f<u;++f){for(d=LP(a),c=0;c<s;++c)d[i[c]]=(p=l[c][f])==null?null:p;o&&(d[o]=f),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function lB(e){wt.call(this,[],e)}lB.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};tn(lB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Fs),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,c;f<l;++f)c=LP(u),c[s]=i[f],c[a]=r[f](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(o)}});function uB(e){wt.call(this,null,e)}uB.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};tn(uB,wt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function $Re(e){wt.call(this,[],e)}tn($Re,wt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=lo(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const pS={value:"value",median:DDe,mean:IWe,min:hI,max:dv},VKe=[];function cB(e){wt.call(this,[],e)}cB.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function YKe(e){var t=e.method||pS.value,n;if(pS[t]==null)_t("Unrecognized imputation method: "+t);else return t===pS.value?(n=e.value!==void 0?e.value:0,()=>n):pS[t]}function XKe(e){const t=e.field;return n=>n?t(n):NaN}tn(cB,wt,{transform(e,t){var n=t.fork(t.ALL),r=YKe(e),i=XKe(e),o=Fs(e.field),s=Fs(e.key),a=(e.groupby||[]).map(Fs),l=KKe(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,c=l.domain.length,d,p,h,g,m,y,v,x,_,E;for(m=0,x=l.length;m<x;++m)for(d=l[m],h=d.values,p=NaN,v=0;v<c;++v)if(d[v]==null){for(g=l.domain[v],E={_impute:!0},y=0,_=h.length;y<_;++y)E[a[y]]=h[y];E[s]=g,E[o]=Number.isNaN(p)?p=r(d,i):p,u.push(lo(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function KKe(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,f,c,d,p,h,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],h=n(m),p=a[h]||(a[h]=s.push(h)),f=(u=t?t.map(i):VKe)+"",(c=l[f])||(c=l[f]=[],o.push(c),c.values=u),c[p-1]=m;return o.domain=s,o}function fB(e){mm.call(this,e)}fB.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bA},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};tn(fB,mm,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Kr(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function dB(e){wt.call(this,null,e)}dB.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};tn(dB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=nB(r,e.groupby,e.field),o=(e.groupby||[]).map(Fs),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,c=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&_t("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=Zd(r,e.field)),c=d=e.steps||d),i.forEach(p=>{const h=PP(p,s)[a],g=e.counts?p.length:1,m=f||Zd(p);lR(h,m,c,d).forEach(y=>{const v={};for(let x=0;x<o.length;++x)v[o[x]]=p.dims[x];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(lo(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function MRe(e){Mo.call(this,null,ZKe,e)}tn(MRe,Mo);function ZKe(e){return this.value&&!e.modified()?this.value:bP(e.fields,e.flat)}function ORe(e){wt.call(this,[],e),this._pending=null}tn(ORe,wt,{transform(e,t){const n=t.dataflow;return this._pending?K$(this,t,this._pending):QKe(e)?t.StopPropagation:e.values?K$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=vn(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>K$(this,t,vn(r.data)))}});function QKe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function K$(e,t,n){n.forEach(lo);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function hB(e){wt.call(this,{},e)}hB.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};tn(hB,wt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,f=e.as,c,d,p;return i?(d=i.length,a>1&&!f&&_t('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*d&&_t('The "as" parameter has too few output field names.'),f=f||i.map(Fs),c=function(h){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](h)),v==null)for(y=0;y<d;++y,++m)h[f[m]]=o;else for(y=0;y<d;++y,++m)h[f[m]]=i[y](v)}):(f||_t("Missing output field names."),c=function(h){for(var g=0,m;g<a;++g)m=r.get(n[g](h)),h[f[g]]=m??o}),s?u=t.reflow(!0):(p=n.some(h=>t.modified(h.fields)),l|=p?t.MOD:0),t.visit(l,c),u.modifies(f)}});function IRe(e){Mo.call(this,null,JKe,e)}tn(IRe,Mo);function JKe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function NRe(e){Mo.call(this,null,eZe,e)}tn(NRe,Mo);function eZe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function PRe(e){wt.call(this,null,e)}tn(PRe,wt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pB(e){mm.call(this,e)}pB.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bA,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};tn(pB,mm,{_transform:mm.prototype.transform,transform(e,t){return this._transform(tZe(e,t),t)}});function tZe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Al(n).concat(Al(r)),s=rZe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>nZe(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function nZe(e,t,n,r){return ju(i=>t(i)===e?n(i):NaN,r,e+"")}function rZe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(gA),t?i.slice(0,t):i}function BRe(e){uR.call(this,e)}tn(BRe,uR,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Zn(o),n,t,o);return(e.modified("field")||r&&t.modified(Al(r)))&&_t("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(lo(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function gB(e){wt.call(this,null,e)}gB.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};tn(gB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=DRe(e.fields,e.as||[]),o=r?(a,l)=>iZe(a,l,r,i):tR;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Zn(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,lo({}));s[Zn(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Zn(a)]))}),n}});function iZe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function zRe(e){wt.call(this,null,e)}tn(zRe,wt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mB(e){wt.call(this,null,e)}mB.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const oZe=1e-14;tn(mB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=nB(i,e.groupby,e.field),s=(e.groupby||[]).map(Fs),a=[],l=e.step||.01,u=e.probs||nc(l/2,1-oZe,l),f=u.length;return o.forEach(c=>{const d=$P(c,u);for(let p=0;p<f;++p){const h={};for(let g=0;g<s.length;++g)h[s[g]]=c.dims[g];h[r[0]]=u[p],h[r[1]]=d[p],a.push(lo(h))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function URe(e){wt.call(this,null,e)}tn(URe,wt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Zn(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=LP(i);r[Zn(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Zn(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function vB(e){wt.call(this,[],e),this.count=0}vB.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};tn(vB,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,c)=>(f[Zn(c)]=1,f),{});let s=this.value,a=this.count,l=0;function u(f){let c,d;s.length<i?s.push(f):(d=~~((a+1)*Kc()),d<s.length&&d>=l&&(c=s[d],o[Zn(c)]&&n.rem.push(c),s[d]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const c=Zn(f);o[c]&&(o[c]=-1,n.rem.push(f)),--a}),s=s.filter(f=>o[Zn(f)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,f=>{o[Zn(f)]||u(f)}),l=-1),r&&s.length>i){const f=s.length-i;for(let c=0;c<f;++c)o[Zn(s[c])]=-1,n.rem.push(s[c]);s=s.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[Zn(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(f=>!o[Zn(f)])),this.count=a,this.value=n.source=s,n}});function yB(e){wt.call(this,null,e)}yB.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};tn(yB,wt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=nc(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,lo(o)}),n.add=t.add.concat(this.value),n}});function jRe(e){wt.call(this,null,e),this.modified(!0)}tn(jRe,wt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function bB(e){wt.call(this,null,e)}const HRe=["unit0","unit1"];bB.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:EP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:HRe}]};tn(bB,wt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?px:hx)(o.unit).offset,a=e.as||HRe,l=a[0],u=a[1],f=o.step;let c=o.start||1/0,d=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Al(n)))&&(t=t.reflow(!0),p=t.SOURCE,c=1/0,d=-1/0),t.visit(p,h=>{const g=n(h);let m,y;g==null?(h[l]=null,r&&(h[u]=null)):(h[l]=m=y=o(g),r&&(h[u]=y=s(m,f)),m<c&&(c=m),y>d&&(d=y))}),o.start=c,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:zLe({extent:e.extent||Zd(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=AP(r),s=this.value||{},a=(n?RLe:LLe)(o,i);return a.unit=Ri(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function qRe(e){wt.call(this,dx(),e)}tn(qRe,wt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function GRe(e){wt.call(this,null,e)}tn(GRe,wt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ry(e.sort)):t.source).map(e.field))}});function sZe(e,t,n,r){const i=aE[e](t,n);return{init:i.init||Pg,update:function(o,s){s[r]=i.next(o)}}}const aE={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=aE.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||_t("ntile num must be greater than zero.");const n=aE.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||_t("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=aZe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function aZe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const lZe=Object.keys(aE);function WRe(e){const t=vn(e.ops),n=vn(e.fields),r=vn(e.params),i=vn(e.aggregate_params),o=vn(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},f=[],c=[];let d=!0;function p(h){vn(Al(h)).forEach(g=>l[g]=1)}p(e.sort),t.forEach((h,g)=>{const m=n[g],y=r[g],v=i[g]||null,x=Fs(m),_=wRe(h,x,o[g]);if(p(m),s.push(_),yn(aE,h))a.push(sZe(h,m,y,_));else{if(m==null&&h!=="count"&&_t("Null aggregate field specified."),h==="count"){f.push(_);return}d=!1;let E=u[x];E||(E=u[x]=[],E.field=m,c.push(E)),E.push(_Re(h,v,_))}}),(f.length||c.length)&&(this.cell=uZe(c,f,d)),this.inputs=Object.keys(l)}const VRe=WRe.prototype;VRe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};VRe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function uZe(e,t,n){e=e.map(l=>ARe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new KP;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=o.length;u<f;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function xB(e){wt.call(this,{},e),this._mlen=0,this._mods=[]}xB.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:lZe.concat(bA)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};tn(xB,wt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=ry(e.sort),i=SI(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new WRe(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)cZe(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=CRe(Zn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function cZe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?LL(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ml(-1)};t.init();for(let c=0;c<l;++c)fZe(f,s,c,l),o&&dZe(f,u),t.update(f,a[c])}function fZe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function dZe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const hZe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:mm,bin:ZP,collect:QP,compare:SRe,countpattern:JP,cross:eB,density:tB,dotbin:rB,expression:RRe,extent:iB,facet:uR,field:FRe,filter:sB,flatten:aB,fold:lB,formula:uB,generate:$Re,impute:cB,joinaggregate:fB,kde:dB,key:MRe,load:ORe,lookup:hB,multiextent:IRe,multivalues:NRe,params:PRe,pivot:pB,prefacet:BRe,project:gB,proxy:zRe,quantile:mB,relay:URe,sample:vB,sequence:yB,sieve:jRe,subflow:oB,timeunit:bB,tupleindex:qRe,values:GRe,window:xB},Symbol.toStringTag,{value:"Module"}));function po(e){return function(){return e}}const vwe=Math.abs,dl=Math.atan2,R0=Math.cos,pZe=Math.max,Z$=Math.min,gd=Math.sin,uv=Math.sqrt,ml=1e-12,m1=Math.PI,V3=m1/2,YRe=2*m1;function gZe(e){return e>1?0:e<-1?m1:Math.acos(e)}function ywe(e){return e>=1?V3:e<=-1?-V3:Math.asin(e)}const kI=Math.PI,TI=2*kI,Z0=1e-6,mZe=TI-Z0;function XRe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vZe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XRe;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let wB=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XRe:vZe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,f=s-t,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Z0)if(!(Math.abs(c*l-u*f)>Z0)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-s,h=i-a,g=l*l+u*u,m=p*p+h*h,y=Math.sqrt(g),v=Math.sqrt(d),x=o*Math.tan((kI-Math.acos((g+d-m)/(2*y*v)))/2),_=x/v,E=x/y;Math.abs(_-1)>Z0&&this._append`L${t+_*f},${n+_*c}`,this._append`A${o},${o},0,0,${+(c*p>f*h)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,c=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Z0||Math.abs(this._y1-f)>Z0)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%TI+TI),d>mZe?this._append`A${r},${r},0,1,${c},${t-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:d>Z0&&this._append`A${r},${r},0,${+(d>=kI)},${c},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function cR(){return new wB}cR.prototype=wB.prototype;function fR(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wB(t)}function yZe(e){return e.innerRadius}function bZe(e){return e.outerRadius}function xZe(e){return e.startAngle}function wZe(e){return e.endAngle}function _Ze(e){return e&&e.padAngle}function EZe(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,f=s-i,c=a-o,d=c*l-f*u;if(!(d*d<ml))return d=(f*(t-o)-c*(e-i))/d,[e+d*l,t+d*u]}function gS(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/uv(a*a+l*l),f=u*l,c=-u*a,d=e+f,p=t+c,h=n+f,g=r+c,m=(d+h)/2,y=(p+g)/2,v=h-d,x=g-p,_=v*v+x*x,E=i-o,C=d*g-h*p,w=(x<0?-1:1)*uv(pZe(0,E*E*_-C*C)),T=(C*x-v*w)/_,R=(-C*v-x*w)/_,L=(C*x+v*w)/_,B=(-C*v+x*w)/_,P=T-m,S=R-y,k=L-m,D=B-y;return P*P+S*S>k*k+D*D&&(T=L,R=B),{cx:T,cy:R,x01:-f,y01:-c,x11:T*(i/E-1),y11:R*(i/E-1)}}function AZe(){var e=yZe,t=bZe,n=po(0),r=null,i=xZe,o=wZe,s=_Ze,a=null,l=fR(u);function u(){var f,c,d=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-V3,g=o.apply(this,arguments)-V3,m=vwe(g-h),y=g>h;if(a||(a=f=l()),p<d&&(c=p,p=d,d=c),!(p>ml))a.moveTo(0,0);else if(m>YRe-ml)a.moveTo(p*R0(h),p*gd(h)),a.arc(0,0,p,h,g,!y),d>ml&&(a.moveTo(d*R0(g),d*gd(g)),a.arc(0,0,d,g,h,y));else{var v=h,x=g,_=h,E=g,C=m,w=m,T=s.apply(this,arguments)/2,R=T>ml&&(r?+r.apply(this,arguments):uv(d*d+p*p)),L=Z$(vwe(p-d)/2,+n.apply(this,arguments)),B=L,P=L,S,k;if(R>ml){var D=ywe(R/d*gd(T)),O=ywe(R/p*gd(T));(C-=D*2)>ml?(D*=y?1:-1,_+=D,E-=D):(C=0,_=E=(h+g)/2),(w-=O*2)>ml?(O*=y?1:-1,v+=O,x-=O):(w=0,v=x=(h+g)/2)}var N=p*R0(v),j=p*gd(v),q=d*R0(E),W=d*gd(E);if(L>ml){var Q=p*R0(x),ee=p*gd(x),H=d*R0(_),se=d*gd(_),ne;if(m<m1)if(ne=EZe(N,j,H,se,Q,ee,q,W)){var ge=N-ne[0],we=j-ne[1],$e=Q-ne[0],ve=ee-ne[1],Ee=1/gd(gZe((ge*$e+we*ve)/(uv(ge*ge+we*we)*uv($e*$e+ve*ve)))/2),Ve=uv(ne[0]*ne[0]+ne[1]*ne[1]);B=Z$(L,(d-Ve)/(Ee-1)),P=Z$(L,(p-Ve)/(Ee+1))}else B=P=0}w>ml?P>ml?(S=gS(H,se,N,j,p,P,y),k=gS(Q,ee,q,W,p,P,y),a.moveTo(S.cx+S.x01,S.cy+S.y01),P<L?a.arc(S.cx,S.cy,P,dl(S.y01,S.x01),dl(k.y01,k.x01),!y):(a.arc(S.cx,S.cy,P,dl(S.y01,S.x01),dl(S.y11,S.x11),!y),a.arc(0,0,p,dl(S.cy+S.y11,S.cx+S.x11),dl(k.cy+k.y11,k.cx+k.x11),!y),a.arc(k.cx,k.cy,P,dl(k.y11,k.x11),dl(k.y01,k.x01),!y))):(a.moveTo(N,j),a.arc(0,0,p,v,x,!y)):a.moveTo(N,j),!(d>ml)||!(C>ml)?a.lineTo(q,W):B>ml?(S=gS(q,W,Q,ee,d,-B,y),k=gS(N,j,H,se,d,-B,y),a.lineTo(S.cx+S.x01,S.cy+S.y01),B<L?a.arc(S.cx,S.cy,B,dl(S.y01,S.x01),dl(k.y01,k.x01),!y):(a.arc(S.cx,S.cy,B,dl(S.y01,S.x01),dl(S.y11,S.x11),!y),a.arc(0,0,d,dl(S.cy+S.y11,S.cx+S.x11),dl(k.cy+k.y11,k.cx+k.x11),y),a.arc(k.cx,k.cy,B,dl(k.y11,k.x11),dl(k.y01,k.x01),!y))):a.arc(0,0,d,E,_,y)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-m1/2;return[R0(c)*f,gd(c)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:po(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:po(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:po(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:po(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:po(+f),u):i},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:po(+f),u):o},u.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:po(+f),u):s},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function KRe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZRe(e){this._context=e}ZRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _B(e){return new ZRe(e)}function QRe(e){return e[0]}function JRe(e){return e[1]}function eFe(e,t){var n=po(!0),r=null,i=_B,o=null,s=fR(a);e=typeof e=="function"?e:e===void 0?QRe:po(e),t=typeof t=="function"?t:t===void 0?JRe:po(t);function a(l){var u,f=(l=KRe(l)).length,c,d=!1,p;for(r==null&&(o=i(p=s())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,u,l),+t(c,u,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:po(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:po(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:po(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function tFe(e,t,n){var r=null,i=po(!0),o=null,s=_B,a=null,l=fR(u);e=typeof e=="function"?e:e===void 0?QRe:po(+e),t=typeof t=="function"?t:po(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?JRe:po(+n);function u(c){var d,p,h,g=(c=KRe(c)).length,m,y=!1,v,x=new Array(g),_=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=c[d],d,c))===y)if(y=!y)p=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=p;--h)a.point(x[h],_[h]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(m,d,c),_[d]=+t(m,d,c),a.point(r?+r(m,d,c):x[d],n?+n(m,d,c):_[d]))}if(v)return a=null,v+""||null}function f(){return eFe().defined(i).curve(s).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:po(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:po(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:po(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:po(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:po(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:po(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:po(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),u):s},u.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),u):o},u}const CZe={draw(e,t){const n=uv(t/m1);e.moveTo(n,0),e.arc(0,0,n,0,YRe)}};function SZe(e,t){let n=null,r=fR(i);e=typeof e=="function"?e:po(e||CZe),t=typeof t=="function"?t:po(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:po(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:po(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function vm(){}function Y3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dR(e){this._context=e}dR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kZe(e){return new dR(e)}function nFe(e){this._context=e}nFe.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Y3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TZe(e){return new nFe(e)}function rFe(e){this._context=e}rFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Y3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DZe(e){return new rFe(e)}function iFe(e,t){this._basis=new dR(e),this._beta=t}iFe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const LZe=function e(t){function n(r){return t===1?new dR(r):new iFe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function X3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function EB(e,t){this._context=e,this._k=(1-t)/6}EB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:X3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RZe=function e(t){function n(r){return new EB(r,t)}return n.tension=function(r){return e(+r)},n}(0);function AB(e,t){this._context=e,this._k=(1-t)/6}AB.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const FZe=function e(t){function n(r){return new AB(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CB(e,t){this._context=e,this._k=(1-t)/6}CB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:X3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $Ze=function e(t){function n(r){return new CB(r,t)}return n.tension=function(r){return e(+r)},n}(0);function SB(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>ml){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ml){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function oFe(e,t){this._context=e,this._alpha=t}oFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:SB(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MZe=function e(t){function n(r){return t?new oFe(r,t):new EB(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sFe(e,t){this._context=e,this._alpha=t}sFe.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:SB(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OZe=function e(t){function n(r){return t?new sFe(r,t):new AB(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aFe(e,t){this._context=e,this._alpha=t}aFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:SB(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const IZe=function e(t){function n(r){return t?new aFe(r,t):new CB(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lFe(e){this._context=e}lFe.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function NZe(e){return new lFe(e)}function bwe(e){return e<0?-1:1}function xwe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(bwe(o)+bwe(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function wwe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Q$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function K3(e){this._context=e}K3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Q$(this,this._t0,wwe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Q$(this,wwe(this,n=xwe(this,e,t)),n);break;default:Q$(this,this._t0,n=xwe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function uFe(e){this._context=new cFe(e)}(uFe.prototype=Object.create(K3.prototype)).point=function(e,t){K3.prototype.point.call(this,t,e)};function cFe(e){this._context=e}cFe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function PZe(e){return new K3(e)}function BZe(e){return new uFe(e)}function fFe(e){this._context=e}fFe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=_we(e),i=_we(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _we(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function zZe(e){return new fFe(e)}function hR(e,t){this._context=e,this._t=t}hR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function UZe(e){return new hR(e,.5)}function jZe(e){return new hR(e,0)}function HZe(e){return new hR(e,1)}function sm(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const qZe=()=>typeof Image<"u"?Image:null;function ah(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const GZe=ah("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),WZe=ah("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),VZe=ah("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),YZe=ah("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),XZe=ah("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),KZe=ah("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ZZe=ah("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),QZe=ah("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),JZe=ah("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),eQe=ah("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function kB(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const tQe="identity",v1="linear",Sp="log",xA="pow",wA="sqrt",pR="symlog",Cv="time",Sv="utc",Ud="sequential",mx="diverging",y1="quantile",gR="quantize",mR="threshold",TB="ordinal",DI="point",dFe="band",DB="bin-ordinal",fa="continuous",_A="discrete",EA="discretizing",tf="interpolating",LB="temporal";function nQe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function rQe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function RB(){const e=oDe().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const c=t().length,d=r[1]<r[0],p=r[1-d],h=kB(c,a,l);let g=r[d-0];i=(p-g)/(h||1),s&&(i=Math.floor(i)),g+=(p-g-i*(c-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=nc(c).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(c){return arguments.length?(t(c),f()):t()},e.range=function(c){return arguments.length?(r=[+c[0],+c[1]],f()):r.slice()},e.rangeRound=function(c){return r=[+c[0],+c[1]],s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(c){return arguments.length?(s=!!c,f()):s},e.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),a=l,f()):a},e.paddingInner=function(c){return arguments.length?(a=Math.max(0,Math.min(1,c)),f()):a},e.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),f()):l},e.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),f()):u},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const d=r[1]<r[0],p=d?n().reverse():n(),h=p.length-1;let g=+c[0],m=+c[1],y,v,x;if(!(g!==g||m!==m)&&(m<g&&(x=g,g=m,m=x),!(m<p[0]||g>r[1-d])))return y=Math.max(0,Y_(p,g)-1),v=g===m?y:Y_(p,m)-1,g-p[y]>o+1e-10&&++y,d&&(x=y,y=h-v,v=h-x),y>v?void 0:t().slice(y,v+1)},e.invert=function(c){const d=e.invertRange([c,c]);return d&&d[0]},e.copy=function(){return RB().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},f()}function hFe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return hFe(t())},e}function iQe(){return hFe(RB().paddingInner(1))}var oQe=Array.prototype.map;function sQe(e){return oQe.call(e,_l)}const aQe=Array.prototype.slice;function pFe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Y_(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=sQe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=aQe.call(r),n):t.slice()},n.tickFormat=function(r,i){return eGe(e[0],Ri(e),r??10,i)},n.copy=function(){return pFe().domain(n.domain()).range(n.range())},n}const Z3=new Map,gFe=Symbol("vega_scale");function mFe(e){return e[gFe]=!0,e}function Ewe(e){return e&&e[gFe]===!0}function lQe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?nQe(o):o.invertExtent?rQe(o):void 0),o.type=e,mFe(o)};return r.metadata=hc(vn(n)),r}function to(e,t,n){return arguments.length>1?(Z3.set(e,lQe(e,t,n)),this):vFe(e)?Z3.get(e):void 0}to(tQe,NDe);to(v1,Hqe,fa);to(Sp,qqe,[fa,Sp]);to(xA,Gqe,fa);to(wA,Wqe,fa);to(pR,Vqe,fa);to(Cv,bYe,[fa,LB]);to(Sv,xYe,[fa,LB]);to(Ud,iDe,[fa,tf]);to(`${Ud}-${v1}`,iDe,[fa,tf]);to(`${Ud}-${Sp}`,Yqe,[fa,tf,Sp]);to(`${Ud}-${xA}`,Xqe,[fa,tf]);to(`${Ud}-${wA}`,Kqe,[fa,tf]);to(`${Ud}-${pR}`,Zqe,[fa,tf]);to(`${mx}-${v1}`,YDe,[fa,tf]);to(`${mx}-${Sp}`,XDe,[fa,tf,Sp]);to(`${mx}-${xA}`,uP,[fa,tf]);to(`${mx}-${wA}`,wYe,[fa,tf]);to(`${mx}-${pR}`,KDe,[fa,tf]);to(y1,PDe,[EA,y1]);to(gR,Qqe,EA);to(mR,Jqe,EA);to(DB,pFe,[_A,EA]);to(TB,oDe,_A);to(dFe,RB,_A);to(DI,iQe,_A);function vFe(e){return Z3.has(e)}function oy(e,t){const n=Z3.get(e);return n&&n.metadata[t]}function FB(e){return oy(e,fa)}function b1(e){return oy(e,_A)}function LI(e){return oy(e,EA)}function yFe(e){return oy(e,Sp)}function uQe(e){return oy(e,LB)}function bFe(e){return oy(e,tf)}function xFe(e){return oy(e,y1)}const cQe=["clamp","base","constant","exponent"];function wFe(e,t){const n=t[0],r=Ri(t)-n;return function(i){return e(n+i*r)}}function vR(e,t,n){return PN($B(t||"rgb",n),e)}function _Fe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function EFe(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Ml(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=to(o)().domain([t,n]).range([0,1]),cQe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function $B(e,t){const n=iVe[fQe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function fQe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const dQe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},hQe={accent:WZe,category10:GZe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:VZe,observable10:YZe,paired:XZe,pastel1:KZe,pastel2:ZZe,set1:QZe,set2:JZe,set3:eQe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function AFe(e){if(Dt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function CFe(e,t){for(const n in e)MB(n,t(e[n]))}const Awe={};CFe(hQe,AFe);CFe(dQe,e=>vR(AFe(e)));function MB(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Awe[e]=t,this):Awe[e]}const Nk="symbol",pQe="discrete",gQe="gradient",mQe=e=>Dt(e)?e.map(t=>String(t)):String(e),vQe=(e,t)=>e[1]-t[1],yQe=(e,t)=>t[1]-e[1];function OB(e,t,n){let r;return eo(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(mA(e.domain())/n||1)+1))),mn(t)&&(r=t.step,t=t.interval),pn(t)&&(t=e.type===Cv?hx(t):e.type==Sv?px(t):_t("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function SFe(e,t,n){let r=e.range(),i=r[0],o=Ri(r),s=vQe;if(i>o&&(r=o,o=i,i=r,s=yQe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Ri(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function IB(e,t){return e.bins?SFe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function kFe(e,t,n,r,i,o){const s=t.type;let a=mQe;if(s===Cv||i===Cv)a=e.timeFormat(r);else if(s===Sv||i===Sv)a=e.utcFormat(r);else if(yFe(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=TFe(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function TFe(e,t,n){const r=IB(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const RI={[y1]:"quantiles",[gR]:"thresholds",[mR]:"domain"},DFe={[y1]:"quantiles",[gR]:"domain"};function LFe(e,t){return e.bins?wQe(e.bins):e.type===Sp?TFe(e,t,!0):RI[e.type]?xQe(e[RI[e.type]]()):IB(e,t)}function bQe(e,t,n){const r=t[DFe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function xQe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function wQe(e){const t=e.slice(0,-1);return t.max=Ri(e),t}const _Qe=e=>RI[e.type]||e.bins;function RFe(e,t,n,r,i,o,s){const a=DFe[t.type]&&o!==Cv&&o!==Sv?bQe(e,t,i):kFe(e,t,n,i,o,s);return r===Nk&&_Qe(t)?EQe(a):r===pQe?AQe(a):CQe(a)}const EQe=e=>(t,n,r)=>{const i=Cwe(r[n+1],Cwe(r.max,1/0)),o=Swe(t,e),s=Swe(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},Cwe=(e,t)=>e??t,AQe=e=>(t,n)=>n?e(t):null,CQe=e=>t=>e(t),Swe=(e,t)=>Number.isFinite(e)?t(e):null;function SQe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Ri(t),o=i-r;if(e.type===mR){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function kQe(e,t,n,r){const i=r||t.type;return pn(n)&&uQe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Cv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Sv?e.utcFormat("%A, %d %B %Y, %X UTC"):RFe(e,t,5,null,n,r,!0)}function FFe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=kQe(e,t,n.format,n.formatType);if(LI(t.type)){const o=LFe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(b1(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(Ri(o))}`}}let $Fe=0;function TQe(){$Fe=0}const Q3="p_";function NB(e){return e&&e.gradient}function MFe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Q3:"";return i||(i=e.id="gradient_"+$Fe++,r==="radial"?(e.x1=md(e.x1,.5),e.y1=md(e.y1,.5),e.r1=md(e.r1,0),e.x2=md(e.x2,.5),e.y2=md(e.y2,.5),e.r2=md(e.r2,.5),o=Q3):(e.x1=md(e.x1,0),e.y1=md(e.y1,0),e.x2=md(e.x2,1),e.y2=md(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function md(e,t){return e??t}function OFe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const kwe={basis:{curve:kZe},"basis-closed":{curve:TZe},"basis-open":{curve:DZe},bundle:{curve:LZe,tension:"beta",value:.85},cardinal:{curve:RZe,tension:"tension",value:0},"cardinal-open":{curve:$Ze,tension:"tension",value:0},"cardinal-closed":{curve:FZe,tension:"tension",value:0},"catmull-rom":{curve:MZe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:OZe,tension:"alpha",value:.5},"catmull-rom-open":{curve:IZe,tension:"alpha",value:.5},linear:{curve:_B},"linear-closed":{curve:NZe},monotone:{horizontal:BZe,vertical:PZe},natural:{curve:zZe},step:{curve:UZe},"step-after":{curve:HZe},"step-before":{curve:jZe}};function PB(e,t,n){var r=yn(kwe,e)&&kwe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const DQe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},LQe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,RQe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,FQe=/^((\s+,?\s*)|(,\s*))/,$Qe=/^[01]/;function x1(e){const t=[];return(e.match(LQe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=DQe[o],a=MQe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function MQe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?$Qe:RQe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(FQe);l!==null&&(i+=l[0].length)}return r}const ym=Math.PI/180,OQe=1e-14,nv=Math.PI/2,Rd=Math.PI*2,Ky=Math.sqrt(3)/2;var J$={},eM={},IFe=[].join;function IQe(e,t,n,r,i,o,s,a,l){const u=IFe.call(arguments);if(J$[u])return J$[u];const f=s*ym,c=Math.sin(f),d=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const p=d*(a-e)*.5+c*(l-t)*.5,h=d*(l-t)*.5-c*(a-e)*.5;let g=p*p/(n*n)+h*h/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=c/n,v=-c/r,x=d/r,_=m*a+y*l,E=v*a+x*l,C=m*e+y*t,w=v*e+x*t;let R=1/((C-_)*(C-_)+(w-E)*(w-E))-.25;R<0&&(R=0);let L=Math.sqrt(R);o==i&&(L=-L);const B=.5*(_+C)-L*(w-E),P=.5*(E+w)+L*(C-_),S=Math.atan2(E-P,_-B);let D=Math.atan2(w-P,C-B)-S;D<0&&o===1?D+=Rd:D>0&&o===0&&(D-=Rd);const O=Math.ceil(Math.abs(D/(nv+.001))),N=[];for(let j=0;j<O;++j){const q=S+j*D/O,W=S+(j+1)*D/O;N[j]=[B,P,q,W,n,r,c,d]}return J$[u]=N}function NQe(e){const t=IFe.call(e);if(eM[t])return eM[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const f=u*s,c=-l*a,d=l*s,p=u*a,h=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),x=Math.sin(v*.5),_=8/3*x*x/Math.sin(v),E=n+h-_*g,C=r+g+_*h,w=n+m,T=r+y,R=w+_*y,L=T-_*m;return eM[t]=[f*E+c*C,d*E+p*C,f*R+c*L,d*R+p*L,f*w+c*T,d*w+p*T]}const Ac=["l",0,0,0,0,0,0,0];function PQe(e,t,n){const r=Ac[0]=e[0];if(r==="a"||r==="A")Ac[1]=t*e[1],Ac[2]=n*e[2],Ac[3]=e[3],Ac[4]=e[4],Ac[5]=e[5],Ac[6]=t*e[6],Ac[7]=n*e[7];else if(r==="h"||r==="H")Ac[1]=t*e[1];else if(r==="v"||r==="V")Ac[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Ac[i]=(i%2==1?t:n)*e[i];return Ac}function lE(e,t,n,r,i,o){var s,a=null,l=0,u=0,f=0,c=0,d,p,h,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,x=t.length;v<x;++v){switch(s=t[v],(i!==1||o!==1)&&(s=PQe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],p=u+s[6],f=l+s[3],c=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,f+n,c+r,d+n,p+r),l=d,u=p;break;case"C":l=s[5],u=s[6],f=s[3],c=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,f+n,c+r,l+n,u+r);break;case"s":d=l+s[3],p=u+s[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,l+s[1]+n,u+s[2]+r,d+n,p+r),f=l+s[1],c=u+s[2],l=d,u=p;break;case"S":d=s[3],p=s[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,s[1]+n,s[2]+r,d+n,p+r),l=d,u=p,f=s[1],c=s[2];break;case"q":d=l+s[3],p=u+s[4],f=l+s[1],c=u+s[2],e.quadraticCurveTo(f+n,c+r,d+n,p+r),l=d,u=p;break;case"Q":d=s[3],p=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,p+r),l=d,u=p,f=s[1],c=s[2];break;case"t":d=l+s[1],p=u+s[2],a[0].match(/[QqTt]/)===null?(f=l,c=u):a[0]==="t"?(f=2*l-h,c=2*u-g):a[0]==="q"&&(f=2*l-f,c=2*u-c),h=f,g=c,e.quadraticCurveTo(f+n,c+r,d+n,p+r),l=d,u=p,f=l+s[1],c=u+s[2];break;case"T":d=s[1],p=s[2],f=2*l-f,c=2*u-c,e.quadraticCurveTo(f+n,c+r,d+n,p+r),l=d,u=p;break;case"a":Twe(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":Twe(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function Twe(e,t,n,r){const i=IQe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=NQe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Dwe=.5773502691896257,Lwe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Rd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n,i=r-n*Dwe,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n,i=r-n*Dwe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ky*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function NFe(e){return yn(Lwe,e)?Lwe[e]:BQe(e)}var tM={};function BQe(e){if(!yn(tM,e)){const t=x1(e);tM[e]={draw:function(n,r){lE(n,t,0,0,Math.sqrt(r)/2)}}}return tM[e]}const _g=.448084975506;function zQe(e){return e.x}function UQe(e){return e.y}function jQe(e){return e.width}function HQe(e){return e.height}function jh(e){return typeof e=="function"?e:()=>+e}function mS(e,t,n){return Math.max(t,Math.min(e,n))}function PFe(){var e=zQe,t=UQe,n=jQe,r=HQe,i=jh(0),o=i,s=i,a=i,l=null;function u(f,c,d){var p,h=c??+e.call(this,f),g=d??+t.call(this,f),m=+n.call(this,f),y=+r.call(this,f),v=Math.min(m,y)/2,x=mS(+i.call(this,f),0,v),_=mS(+o.call(this,f),0,v),E=mS(+s.call(this,f),0,v),C=mS(+a.call(this,f),0,v);if(l||(l=p=cR()),x<=0&&_<=0&&E<=0&&C<=0)l.rect(h,g,m,y);else{var w=h+m,T=g+y;l.moveTo(h+x,g),l.lineTo(w-_,g),l.bezierCurveTo(w-_g*_,g,w,g+_g*_,w,g+_),l.lineTo(w,T-C),l.bezierCurveTo(w,T-_g*C,w-_g*C,T,w-C,T),l.lineTo(h+E,T),l.bezierCurveTo(h+_g*E,T,h,T-_g*E,h,T-E),l.lineTo(h,g+x),l.bezierCurveTo(h,g+_g*x,h+_g*x,g,h+x,g),l.closePath()}if(p)return l=null,p+""||null}return u.x=function(f){return arguments.length?(e=jh(f),u):e},u.y=function(f){return arguments.length?(t=jh(f),u):t},u.width=function(f){return arguments.length?(n=jh(f),u):n},u.height=function(f){return arguments.length?(r=jh(f),u):r},u.cornerRadius=function(f,c,d,p){return arguments.length?(i=jh(f),o=c!=null?jh(c):i,a=d!=null?jh(d):i,s=p!=null?jh(p):o,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function BFe(){var e,t,n,r,i=null,o,s,a,l;function u(c,d,p){const h=p/2;if(o){var g=a-d,m=c-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,x=(m/=y)*l,_=Math.atan2(m,g);i.moveTo(s-v,a-x),i.lineTo(c-g*h,d-m*h),i.arc(c,d,h,_-Math.PI,_),i.lineTo(s+v,a+x),i.arc(s,a,l,_,_+Math.PI)}else i.arc(c,d,h,0,Rd);i.closePath()}else o=1;s=c,a=d,l=h}function f(c){var d,p=c.length,h,g=!1,m;for(i==null&&(i=m=cR()),d=0;d<=p;++d)!(d<p&&r(h=c[d],d,c))===g&&(g=!g)&&(o=0),g&&u(+e(h,d,c),+t(h,d,c),+n(h,d,c));if(m)return i=null,m+""||null}return f.x=function(c){return arguments.length?(e=c,f):e},f.y=function(c){return arguments.length?(t=c,f):t},f.size=function(c){return arguments.length?(n=c,f):n},f.defined=function(c){return arguments.length?(r=c,f):r},f.context=function(c){return arguments.length?(c==null?i=null:i=c,f):i},f}function AA(e,t){return e??t}const CA=e=>e.x||0,SA=e=>e.y||0,qQe=e=>e.width||0,GQe=e=>e.height||0,WQe=e=>(e.x||0)+(e.width||0),VQe=e=>(e.y||0)+(e.height||0),YQe=e=>e.startAngle||0,XQe=e=>e.endAngle||0,KQe=e=>e.padAngle||0,ZQe=e=>e.innerRadius||0,QQe=e=>e.outerRadius||0,JQe=e=>e.cornerRadius||0,eJe=e=>AA(e.cornerRadiusTopLeft,e.cornerRadius)||0,tJe=e=>AA(e.cornerRadiusTopRight,e.cornerRadius)||0,nJe=e=>AA(e.cornerRadiusBottomRight,e.cornerRadius)||0,rJe=e=>AA(e.cornerRadiusBottomLeft,e.cornerRadius)||0,iJe=e=>AA(e.size,64),oJe=e=>e.size||1,yR=e=>e.defined!==!1,sJe=e=>NFe(e.shape||"circle"),aJe=AZe().startAngle(YQe).endAngle(XQe).padAngle(KQe).innerRadius(ZQe).outerRadius(QQe).cornerRadius(JQe),lJe=tFe().x(CA).y1(SA).y0(VQe).defined(yR),uJe=tFe().y(SA).x1(CA).x0(WQe).defined(yR),cJe=eFe().x(CA).y(SA).defined(yR),fJe=PFe().x(CA).y(SA).width(qQe).height(GQe).cornerRadius(eJe,tJe,nJe,rJe),dJe=SZe().type(sJe).size(iJe),hJe=BFe().x(CA).y(SA).defined(yR).size(oJe);function BB(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function pJe(e,t){return aJe.context(e)(t)}function gJe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?uJe:lJe).curve(PB(r,n.orient,n.tension)).context(e)(t)}function mJe(e,t){const n=t[0],r=n.interpolate||"linear";return cJe.curve(PB(r,n.orient,n.tension)).context(e)(t)}function vx(e,t,n,r){return fJe.context(e)(t,n,r)}function vJe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function yJe(e,t){return dJe.context(e)(t)}function bJe(e,t){return hJe.context(e)(t)}var zFe=1;function UFe(){zFe=1}function zB(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+zFe++),s=i.clipping[o]||(i.clipping[o]={id:o});return Br(r)?s.path=r(null):BB(n)?s.path=vx(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Zs(e){this.clear(),e&&this.union(e)}Zs.prototype={clone(){return new Zs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*s+u,l*r+a*s+f,a*o-l*i+u,l*o+a*i+f,a*o-l*s+u,l*o+a*s+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function bR(e){this.mark=e,this.bounds=this.bounds||new Zs}function xR(e){bR.call(this,e),this.items=this.items||[]}tn(xR,bR);class jFe{constructor(t){this._pending=0,this._loader=t||QL()}pending(){return this._pending}sanitizeURL(t){const n=this;return Rwe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(p2(n),r)).catch(()=>(p2(n),null))}loadImage(t){const n=this,r=qZe();return Rwe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=yn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>p2(n),s.onerror=()=>p2(n),s.src=o,s}).catch(i=>(p2(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Rwe(e){e._pending+=1}function p2(e){e._pending-=1}function Bp(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?xJe(t,r):0))}return e}function xJe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const wJe=Rd-1e-8;let wR,Pk,Bk,cv,FI,zk,$I,MI;const qg=(e,t)=>wR.add(e,t),Uk=(e,t)=>qg(Pk=e,Bk=t),Fwe=e=>qg(e,wR.y1),$we=e=>qg(wR.x1,e),rv=(e,t)=>FI*e+$I*t,iv=(e,t)=>zk*e+MI*t,nM=(e,t)=>qg(rv(e,t),iv(e,t)),rM=(e,t)=>Uk(rv(e,t),iv(e,t));function kA(e,t){return wR=e,t?(cv=t*ym,FI=MI=Math.cos(cv),zk=Math.sin(cv),$I=-zk):(FI=MI=1,cv=zk=$I=0),_Je}const _Je={beginPath(){},closePath(){},moveTo:rM,lineTo:rM,rect(e,t,n,r){cv?(nM(e+n,t),nM(e+n,t+r),nM(e,t+r),rM(e,t)):(qg(e+n,t+r),Uk(e,t))},quadraticCurveTo(e,t,n,r){const i=rv(e,t),o=iv(e,t),s=rv(n,r),a=iv(n,r);Mwe(Pk,i,s,Fwe),Mwe(Bk,o,a,$we),Uk(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=rv(e,t),a=iv(e,t),l=rv(n,r),u=iv(n,r),f=rv(i,o),c=iv(i,o);Owe(Pk,s,l,f,Fwe),Owe(Bk,a,u,c,$we),Uk(f,c)},arc(e,t,n,r,i,o){if(r+=cv,i+=cv,Pk=n*Math.cos(i)+e,Bk=n*Math.sin(i)+t,Math.abs(i-r)>wJe)qg(e-n,t-n),qg(e+n,t+n);else{const s=u=>qg(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Rd,r<0&&(r+=Rd),i=i%Rd,i<0&&(i+=Rd),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Rd,a=r-r%nv,l=0;l<4&&a>i;++l,a-=nv)s(a);else for(a=r-r%nv+nv,l=0;l<4&&a<i;++l,a=a+nv)s(a)}}};function Mwe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Owe(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(o)>OQe?(f=s*s+a*o,f>=0&&(f=Math.sqrt(f),l=(-s+f)/o,u=(-s-f)/o)):l=.5*a/s,0<l&&l<1&&i(Iwe(l,e,t,n,r)),0<u&&u<1&&i(Iwe(u,e,t,n,r))}function Iwe(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var am=(am=sm(1,1))?am.getContext("2d"):null;const OI=new Zs;function UB(e){return function(t,n){if(!am)return!0;e(am,t),OI.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=OI;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(am.isPointInPath(l,a))return!0;return!1}}function jB(e,t){return t.contains(e.x||0,e.y||0)}function HFe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(OI.set(n,r,n+i,r+o))}function qFe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Db(t,n,r,i,o)}function Db(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,f=i-n;let c=0,d=1,p,h,g,m;for(m=0;m<4;++m){if(m===0&&(p=-u,h=-(o-t)),m===1&&(p=u,h=a-t),m===2&&(p=-f,h=-(s-n)),m===3&&(p=f,h=l-n),Math.abs(p)<1e-10&&h<0)return!1;if(g=h/p,p<0){if(g>d)return!1;g>c&&(c=g)}else if(p>0){if(g<c)return!1;g<d&&(d=g)}}return!0}function w1(e,t){e.globalCompositeOperation=t.blend||"source-over"}function vf(e,t){return e??t}function Nwe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function EJe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+vf(t.x1,.5)*r,n.y1+vf(t.y1,.5)*i,Math.max(r,i)*vf(t.r1,0),n.x1+vf(t.x2,.5)*r,n.y1+vf(t.y2,.5)*i,Math.max(r,i)*vf(t.r2,.5));else{const s=vf(t.x1,0),a=vf(t.y1,0),l=vf(t.x2,1),u=vf(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=sm(Math.ceil(r),Math.ceil(i)),c=f.getContext("2d");return c.scale(r,i),c.fillStyle=Nwe(c.createLinearGradient(s,a,l,u),t.stops),c.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return Nwe(o,t.stops)}function GFe(e,t,n){return NB(n)?EJe(e,n,t.bounds):n}function J3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=GFe(e,t,t.fill),!0):!1}var AJe=[];function _1(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=GFe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||AJe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function CJe(e,t){return e.zindex-t.zindex||e.index-t.index}function HB(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(CJe)}function Bf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=HB(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function eT(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=HB(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function qB(e){return function(t,n,r){Bf(n,i=>{(!r||r.intersects(i.bounds))&&WFe(e,t,i,i)})}}function SJe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&WFe(e,t,n.items[0],n.items)}}function WFe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(w1(t,n),n.fill&&J3(t,n,i)&&t.fill(),n.stroke&&_1(t,n,i)&&t.stroke()))}function _R(e){return e=e||Yc,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,eT(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function TA(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,f;return l&&(u=s.strokeWidth,f=s.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function GB(e){return _R(TA(e))}function pv(e,t){return"translate("+e+","+t+")"}function WB(e){return"rotate("+e+")"}function kJe(e,t){return"scale("+e+","+t+")"}function VFe(e){return pv(e.x||0,e.y||0)}function TJe(e){return pv(e.x||0,e.y||0)+(e.angle?" "+WB(e.angle):"")}function DJe(e){return pv(e.x||0,e.y||0)+(e.angle?" "+WB(e.angle):"")+(e.scaleX||e.scaleY?" "+kJe(e.scaleX||1,e.scaleY||1):"")}function VB(e,t,n){function r(s,a){s("transform",TJe(a)),s("d",t(null,a))}function i(s,a){return t(kA(s,a.angle),a),Bp(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,f=a.angle||0;s.translate(l,u),f&&s.rotate(f*=ym),s.beginPath(),t(s,a),f&&s.rotate(-f),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:qB(o),pick:GB(o),isect:n||UB(o)}}var LJe=VB("arc",pJe);function RJe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function FJe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function $Je(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function YB(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(kA(l),f),Bp(l,f[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=TA(o);function a(l,u,f,c,d,p){var h=u.items,g=u.bounds;return!h||!h.length||g&&!g.contains(d,p)?null:(f*=l.pixelRatio,c*=l.pixelRatio,s(l,h,f,c)?h[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:SJe(o),pick:a,isect:jB,tip:n}}var MJe=YB("area",gJe,RJe);function OJe(e,t){var n=t.clip;e.save(),Br(n)?(e.beginPath(),n(e),e.clip()):YFe(e,t.group)}function YFe(e,t){e.beginPath(),BB(t)?vx(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function XFe(e){const t=vf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function IJe(e,t){e("transform",VFe(t))}function KFe(e,t){const n=XFe(t);e("d",vx(null,t,n,n))}function NJe(e,t){e("class","background"),e("aria-hidden",!0),KFe(e,t)}function PJe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?KFe(e,t):e("d","")}function BJe(e,t,n){const r=t.clip?zB(n,t,t):null;e("clip-path",r)}function zJe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Bp(e,t),e.translate(t.x||0,t.y||0)}function uE(e,t,n,r){const i=XFe(t);e.beginPath(),vx(e,t,(n||0)+i,(r||0)+i)}const UJe=TA(uE),jJe=TA(uE,!1),HJe=TA(uE,!0);function qJe(e,t,n,r){Bf(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(uE(e,i,o,s),w1(e,i),i.fill&&J3(e,i,l)&&e.fill(),i.stroke&&!a&&_1(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&YFe(e,i),n&&n.translate(-o,-s),Bf(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(uE(e,i,o,s),w1(e,i),_1(e,i,l)&&e.stroke())})}function GJe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return eT(t,l=>{let u,f,c;const d=l.bounds;if(d&&!d.contains(i,o))return;f=l.x||0,c=l.y||0;const p=f+(l.width||0),h=c+(l.height||0),g=l.clip;if(g&&(i<f||i>p||o<c||o>h))return;if(e.save(),e.translate(f,c),f=i-f,c=o-c,g&&BB(l)&&!HJe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&jJe(e,l,s,a)?(e.restore(),l):(u=eT(l,v=>WJe(v,f,c)?this.pick(v,n,r,f,c):null),!u&&y&&(l.fill||!m&&l.stroke)&&UJe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function WJe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var VJe={type:"group",tag:"g",nested:!1,attr:IJe,bound:zJe,draw:qJe,pick:GJe,isect:HFe,content:BJe,background:NJe,foreground:PJe},cE={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function XB(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function KB(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function ZB(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function ER(e,t){return e==="center"?t/2:e==="right"?t:0}function AR(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function YJe(e,t,n){const r=XB(t,n),i=KB(t,r),o=ZB(t,r),s=(t.x||0)-ER(t.align,i),a=(t.y||0)-AR(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,cE["xmlns:xlink"],"xlink:href"),e("transform",pv(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function XJe(e,t){const n=t.image,r=KB(t,n),i=ZB(t,n),o=(t.x||0)-ER(t.align,r),s=(t.y||0)-AR(t.baseline,i);return e.set(o,s,o+r,s+i)}function KJe(e,t,n){Bf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=XB(r,this);let o=KB(r,i),s=ZB(r,i);if(o===0||s===0)return;let a=(r.x||0)-ER(r.align,o),l=(r.y||0)-AR(r.baseline,s),u,f,c,d;r.aspect!==!1&&(f=i.width/i.height,c=r.width/r.height,f===f&&c===c&&f!==c&&(c<f?(d=o/f,l+=(s-d)/2,s=d):(d=s*f,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(w1(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var ZJe={type:"image",tag:"image",nested:!1,attr:YJe,bound:XJe,draw:KJe,pick:_R(),isect:Yc,get:XB,xOffset:ER,yOffset:AR},QJe=YB("line",mJe,FJe);function JJe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",DJe(t)),e("d",t.path)}function jk(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*ym,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=x1(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),lE(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):lE(e,l,r,i,o,s)}function eet(e,t){return jk(kA(e,t.angle),t)?e.set(0,0,0,0):Bp(e,t,!0)}var tet={type:"path",tag:"path",nested:!1,attr:JJe,bound:eet,draw:qB(jk),pick:GB(jk),isect:UB(jk)};function net(e,t){e("d",vx(null,t))}function ret(e,t){var n,r;return Bp(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Pwe(e,t){e.beginPath(),vx(e,t)}var iet={type:"rect",tag:"path",nested:!1,attr:net,bound:ret,draw:qB(Pwe),pick:GB(Pwe),isect:HFe};function oet(e,t){e("transform",VFe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function set(e,t){var n,r;return Bp(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function ZFe(e,t,n){var r,i,o,s;return t.stroke&&_1(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function aet(e,t,n){Bf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&ZFe(e,r,i)&&(w1(e,r),e.stroke())}})}function uet(e,t,n,r){return e.isPointInStroke?ZFe(e,t,1)&&e.isPointInStroke(n,r):!1}var cet={type:"rule",tag:"line",nested:!1,attr:oet,bound:set,draw:aet,pick:_R(uet),isect:qFe},fet=VB("shape",vJe),det=VB("symbol",yJe,jB);const Bwe=mLe();var ac={height:lh,measureWidth:QB,estimateWidth:tT,width:tT,canvas:QFe};QFe(!0);function QFe(e){ac.width=e&&am?QB:tT}function tT(e,t){return JFe(xm(e,t),lh(e))}function JFe(e,t){return~~(.8*e.length*t)}function QB(e,t){return lh(e)<=0||!(t=xm(e,t))?0:e$e(t,CR(e))}function e$e(e,t){const n=`(${t}) ${e}`;let r=Bwe.get(n);return r===void 0&&(am.font=t,r=am.measureText(e).width,Bwe.set(n,r)),r}function lh(e){return e.fontSize!=null?+e.fontSize||0:11}function bm(e){return e.lineHeight!=null?e.lineHeight:lh(e)+2}function het(e){return Dt(e)?e.length>1?e:e[0]:e}function DA(e){return het(e.lineBreak&&e.text&&!Dt(e.text)?e.text.split(e.lineBreak):e.text)}function JB(e){const t=DA(e);return(Dt(t)?t.length-1:0)*bm(e)}function xm(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?get(e,n):n}function pet(e){if(ac.width===QB){const t=CR(e);return n=>e$e(n,t)}else if(ac.width===tT){const t=lh(e);return n=>JFe(n,t)}else return t=>ac.width(e,t)}function get(e,t){var n=+e.limit,r=pet(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function LA(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function CR(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+lh(e)+"px "+LA(e,t)}function e9(e){var t=e.baseline,n=lh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*bm(e):t==="line-bottom"?.29*n-.5*bm(e):0)}const met={left:"start",center:"middle",right:"end"},y_=new Zs;function SR(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-nv,t+=r*Math.cos(i),n+=r*Math.sin(i)),y_.x1=t,y_.y1=n,y_}function vet(e,t){var n=t.dx||0,r=(t.dy||0)+e9(t),i=SR(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",met[t.align]||"start"),a?(l=pv(o,s)+" "+WB(a),(n||r)&&(l+=" "+pv(n,r))):l=pv(o+n,s+r),e("transform",l)}function t9(e,t,n){var r=ac.height(t),i=t.align,o=SR(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+e9(t)-Math.round(.8*r),f=DA(t),c;if(Dt(f)?(r+=bm(t)*(f.length-1),c=f.reduce((d,p)=>Math.max(d,ac.width(t,p)),0)):c=ac.width(t,f),i==="center"?l-=c/2:i==="right"&&(l-=c),e.set(l+=s,u+=a,l+c,u+r),t.angle&&!n)e.rotate(t.angle*ym,s,a);else if(n===2)return e.rotatedPoints(t.angle*ym,s,a);return e}function yet(e,t,n){Bf(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,f,c;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=CR(r),e.textAlign=r.align||"left",o=SR(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*ym),s=a=0),s+=r.dx||0,a+=(r.dy||0)+e9(r),f=DA(r),w1(e,r),Dt(f))for(u=bm(r),l=0;l<f.length;++l)c=xm(r,f[l]),r.fill&&J3(e,r,i)&&e.fillText(c,s,a),r.stroke&&_1(e,r,i)&&e.strokeText(c,s,a),a+=u;else c=xm(r,f),r.fill&&J3(e,r,i)&&e.fillText(c,s,a),r.stroke&&_1(e,r,i)&&e.strokeText(c,s,a);r.angle&&e.restore()}})}function bet(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=SR(t),a=s.x1,l=s.y1,u=t9(y_,t,1),f=-t.angle*ym,c=Math.cos(f),d=Math.sin(f),p=c*i-d*o+(a-c*a+d*l),h=d*i+c*o+(l-d*a-c*l);return u.contains(p,h)}function xet(e,t){const n=t9(y_,e,2);return Db(t,n[0],n[1],n[2],n[3])||Db(t,n[0],n[1],n[4],n[5])||Db(t,n[4],n[5],n[6],n[7])||Db(t,n[2],n[3],n[6],n[7])}var wet={type:"text",tag:"text",nested:!1,attr:vet,bound:t9,draw:yet,pick:_R(bet),isect:xet},_et=YB("trail",bJe,$Je),mc={arc:LJe,area:MJe,group:VJe,image:ZJe,line:QJe,path:tet,rect:iet,rule:cet,shape:fet,symbol:det,text:wet,trail:_et};function II(e,t,n){var r=mc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Zs),e,n)}var zwe={mark:null};function t$e(e,t,n){var r=mc[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,f;if(r.nested)return s?u=o[0]:(zwe.mark=e,u=zwe),f=II(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new Zs,s)for(a=0,l=o.length;a<l;++a)t.union(II(o[a],i,n));return e.bounds=t}const Eet=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function n$e(e,t){return JSON.stringify(e,Eet,t)}function r$e(e){const t=typeof e=="string"?JSON.parse(e):e;return i$e(t)}function i$e(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&i$e(n[i]);return t&&t$e(e),e}class o$e{constructor(t){arguments.length?this.root=r$e(t):(this.root=Uwe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new xR(this.root)])}toJSON(t){return n$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Uwe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Uwe(e,t){const n={bounds:new Zs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Gg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function n9(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function oa(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Gg(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function $c(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function s$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function kR(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Aet(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=mc[i.marktype]).tip){for(s=kR(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let r9=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||QL(),this._tooltip=n||Cet}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Gg(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Aet(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Cet(e,t,n,r){e.element().setAttribute("title",r||"")}let RA=class{constructor(t){this._el=null,this._bgcolor=null,this._loader=new jFe(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}};const ket="keydown",Tet="keypress",Det="keyup",a$e="dragenter",Hk="dragleave",l$e="dragover",NI="pointerdown",Let="pointerup",nT="pointermove",qk="pointerout",u$e="pointerover",PI="mousedown",Ret="mouseup",c$e="mousemove",rT="mouseout",f$e="mouseover",iT="click",Fet="dblclick",$et="wheel",d$e="mousewheel",oT="touchstart",sT="touchmove",aT="touchend",Met=[ket,Tet,Det,a$e,Hk,l$e,NI,Let,nT,qk,u$e,PI,Ret,c$e,rT,f$e,iT,Fet,$et,d$e,oT,sT,aT],BI=nT,b_=rT,zI=iT;class FA extends r9{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Met,this.pointermove=Hwe([nT,c$e],[u$e,f$e],[qk,rT]),this.dragover=Hwe([l$e],[a$e],[Hk]),this.pointerout=qwe([qk,rT]),this.dragleave=qwe([Hk])}initialize(t,n,r){return this._canvas=t&&n9(t,"canvas"),[iT,PI,NI,nT,qk,Hk].forEach(i=>jwe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(d$e,t)}pointerdown(t){this._down=this._active,this.fire(NI,t)}mousedown(t){this._down=this._active,this.fire(PI,t)}click(t){this._down===this._active&&(this.fire(iT,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(oT,t,!0)}touchmove(t){this.fire(sT,t,!0)}touchend(t){this.fire(aT,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===zI&&i&&i.href?this.handleHref(n,i,i.href):(t===BI||t===b_)&&this.handleTooltip(n,i,t!==b_),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(jwe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=kR(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return mc[t.marktype].pick.call(this,s,t,n,r,i,o)}}const Oet=e=>e===oT||e===sT||e===aT?[oT,sT,aT]:[e];function jwe(e,t){Oet(t).forEach(n=>Iet(e,n))}function Iet(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function G2(e,t,n){t.forEach(r=>e.fire(r,n))}function Hwe(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?G2(this,e,r):((!i||!i.exit)&&G2(this,n,r),this._active=o,G2(this,t,r),G2(this,e,r))}}function qwe(e){return function(t){G2(this,e,t),this._active=null}}function Net(){return typeof window<"u"&&window.devicePixelRatio||1}function Pet(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?Net():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class lT extends RA{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Zs,this._tempb=new Zs}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:sm(1,1,this._options.type),t&&this._canvas&&($c(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Pet(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||_t("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=Bet(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):zet(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=mc[n.marktype];n.clip&&OJe(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const Bet=(e,t,n)=>new Zs().set(0,0,t,n).translate(-e[0],-e[1]);function zet(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class h$e extends r9{constructor(t,n){super(t,n);const r=this;r._hrefHandler=iM(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=iM(r,(i,o)=>{r.handleTooltip(i,o,i.type!==b_)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(zI,this._hrefHandler),i.removeEventListener(BI,this._tooltipHandler),i.removeEventListener(b_,this._tooltipHandler)),this._svg=i=t&&n9(t,"svg"),i&&(i.addEventListener(zI,this._hrefHandler),i.addEventListener(BI,this._tooltipHandler),i.addEventListener(b_,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:iM(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const iM=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},p$e="aria-hidden",i9="aria-label",o9="role",s9="aria-roledescription",g$e="graphics-object",a9="graphics-symbol",m$e=(e,t,n)=>({[o9]:e,[s9]:t,[i9]:n||void 0}),Uet=hc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Gwe={axis:{desc:"axis",caption:qet},legend:{desc:"legend",caption:Get},"title-text":{desc:"title",caption:e=>`Title text '${Vwe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Vwe(e)}'`}},Wwe={ariaRole:o9,ariaRoleDescription:s9,description:i9};function v$e(e,t){const n=t.aria===!1;if(e(p$e,n||void 0),n||t.description==null)for(const r in Wwe)e(Wwe[r],void 0);else{const r=t.mark.marktype;e(i9,t.description),e(o9,t.ariaRole||(r==="group"?g$e:a9)),e(s9,t.ariaRoleDescription||`${r} mark`)}}function y$e(e){return e.aria===!1?{[p$e]:!0}:Uet[e.role]?null:Gwe[e.role]?Het(e,Gwe[e.role]):jet(e)}function jet(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return m$e(n?g$e:a9,`${t} mark container`,e.description)}function Het(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return m$e(t.role||a9,t.desc,n.description||r(n))}catch{return null}}function Vwe(e){return vn(e.text).join(" ")}function qet(e){const t=e.datum,n=e.orient,r=t.title?b$e(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${b1(a)?"discrete":a} scale with ${FFe(s,o,e)}`}function Get(e){const t=e.datum,n=t.title?b$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return Vet(r)+(n?` titled '${n}'`:"")+` for ${Wet(o)} with ${FFe(l,a,e)}`}function b$e(e){try{return vn(Ri(e.items).items[0].text).join(" ")}catch{return null}}function Wet(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ri(e)}function Vet(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const x$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Yet=e=>x$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function l9(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${Yet(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];for(const d of f)for(const p in d)s(p,d[p]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=x$e(l),a),toString:()=>e};return a}const w$e=e=>_$e(l9(),e)+"";function _$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):_$e(e,r)}return e.close()}const uT={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},cT={blend:"mix-blend-mode"},E$e={fill:"none","stroke-miterlimit":10},g2=0,Ywe="http://www.w3.org/2000/xmlns/",ia=cE.xmlns;class u9 extends RA{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=oa(t,0,"svg",ia),this._svg.setAttributeNS(Ywe,"xmlns",ia),this._svg.setAttributeNS(Ywe,"xmlns:xlink",cE["xmlns:xlink"]),this._svg.setAttribute("version",cE.version),this._svg.setAttribute("class","marks"),$c(t,1),this._root=oa(this._svg,g2,"g",ia),Wg(this._root,E$e),$c(this._svg,g2+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Wg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=oa(t,g2,"rect",ia),Wg(r,{width:this._width,height:this._height,fill:n}));const i=w$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),$c(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=mc[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Xwe(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Xwe(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=mc[s],l=n.interactive===!1?"none":null,u=a.tag==="g",f=Kwe(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return $c(f,0),n._svg;f.setAttribute("class",s$e(n));const c=y$e(n);for(const g in c)Hl(f,g,c[g]);u||Hl(f,"pointer-events",l),Hl(f,"clip-path",n.clip?zB(this,n,n.group):null);let d=null,p=0;const h=g=>{const m=this.isDirty(g),y=Kwe(g,f,d,a.tag,o);m&&(this._update(a,y,g),u&&Zet(this,y,g,i)),d=y,++p};return a.nested?n.items.length&&h(n.items[0]):Bf(n,h),$c(f,p),f}_update(t,n,r){up=n,bl=n.__values__,v$e(x_,r),t.attr(x_,r,this);const i=Jet[t.type];i&&i.call(this,t,n,r),up&&this.style(up,r)}style(t,n){if(n!=null){for(const r in uT){let i=r==="font"?LA(n):n[r];if(i===bl[r])continue;const o=uT[r];i==null?t.removeAttribute(o):(NB(i)&&(i=MFe(i,this._defs.gradient,A$e())),t.setAttribute(o,i+"")),bl[r]=i}for(const r in cT)Gk(t,cT[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=oa(t,g2+1,"defs",ia)),i=Xet(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=oa(t,g2+1,"defs",ia)),i=Ket(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):$c(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Xwe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Xet(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=oa(e,n++,"pattern",ia);Wg(s,{id:Q3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=oa(s,0,"rect",ia),Wg(s,{width:1,height:1,fill:`url(${A$e()}#${t.id})`}),e=oa(e,n++,"radialGradient",ia),Wg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=oa(e,n++,"linearGradient",ia),Wg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=oa(e,r,"stop",ia),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return $c(e,r),n}function Ket(e,t,n){let r;return e=oa(e,n,"clipPath",ia),e.setAttribute("id",t.id),t.path?(r=oa(e,0,"path",ia),r.setAttribute("d",t.path)):(r=oa(e,0,"rect",ia),Wg(r,{x:0,y:0,width:t.width,height:t.height})),$c(e,1),n+1}function Zet(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;Bf(n,s=>{i=e.mark(t,s,i,r),++o}),$c(t,1+o)}function Kwe(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Gg(s,r,ia),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Gg(s,"path",ia);o.appendChild(a),a.__data__=e;const l=Gg(s,"g",ia);o.appendChild(l),l.__data__=e;const u=Gg(s,"path",ia);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Qet(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Qet(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let up=null,bl=null;const Jet={group(e,t,n){const r=up=t.childNodes[2];bl=r.__values__,e.foreground(x_,n,this),bl=t.__values__,up=t.childNodes[1],e.content(x_,n,this);const i=up=t.childNodes[0];e.background(x_,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==bl.events&&(Hl(r,"pointer-events",o),Hl(i,"pointer-events",o),bl.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Hl(r,"display",null),this.style(i,n),Hl(i,"stroke",null),s&&(n.fill=null),bl=r.__values__,this.style(r,n),s&&(n.fill=s),up=null}else Hl(r,"display","none")},image(e,t,n){n.smooth===!1?(Gk(t,"image-rendering","optimizeSpeed"),Gk(t,"image-rendering","pixelated")):Gk(t,"image-rendering",null)},text(e,t,n){const r=DA(n);let i,o,s,a;Dt(r)?(o=r.map(l=>xm(n,l)),i=o.join(`
`),i!==bl.text&&($c(t,0),s=t.ownerDocument,a=bm(n),o.forEach((l,u)=>{const f=Gg(s,"tspan",ia);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),bl.text=i)):(o=xm(n,r),o!==bl.text&&(t.textContent=o,bl.text=o)),Hl(t,"font-family",LA(n)),Hl(t,"font-size",lh(n)+"px"),Hl(t,"font-style",n.fontStyle),Hl(t,"font-variant",n.fontVariant),Hl(t,"font-weight",n.fontWeight)}};function x_(e,t,n){t!==bl[e]&&(n?ett(up,e,t,n):Hl(up,e,t),bl[e]=t)}function Gk(e,t,n){n!==bl[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),bl[t]=n)}function Wg(e,t){for(const n in t)Hl(e,n,t[n])}function Hl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ett(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function A$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class C$e extends RA{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=l9();n.open("svg",Kr({},cE,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",E$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=mc[n.marktype],i=r.tag,o=[v$e,r.attr];t.open("g",{class:s$e(n),"clip-path":n.clip?zB(this,n,n.group):null},y$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=DA(a);if(Dt(u)){const f={x:0,dy:bm(a)};for(let c=0;c<u.length;++c)t.open("tspan",c?f:null).text(xm(a,u[c])).close()}else t.text(xm(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,c=a.stroke;u&&c&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Bf(a,d=>this.mark(t,d)),t.close(),u&&c?(f&&(a.fill=null),a.stroke=c,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):Bf(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,f)=>{o[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&ttt(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Q3+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function ttt(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=LA(t),e["font-size"]=lh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in uT){let a=t[s];const l=uT[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(NB(a)&&(a=MFe(a,i.gradient,"")),e[l]=a)}for(const s in cT){const a=t[s];a!=null&&(o=o||[],o.push(`${cT[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const xf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ntt(e){xf.svgMarkTypes=e.svgMarkTypes??["text"],xf.svgOnTop=e.svgOnTop??!0,xf.debug=e.debug??!1}class UI extends RA{constructor(t){super(t),this._svgRenderer=new u9(t),this._canvasRenderer=new lT(t)}initialize(t,n,r,i,o){this._root_el=oa(t,0,"div");const s=oa(this._root_el,0,"div"),a=oa(this._root_el,1,"div");return this._root_el.style.position="relative",xf.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=xf.svgOnTop?a:s,this._canvasEl=xf.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return xf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!xf.svgMarkTypes.includes(o));this._svgRenderer.render(t,xf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return xf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class S$e extends FA{constructor(t,n){super(t,n)}initialize(t,n,r){const i=oa(oa(t,0,"div"),xf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const k$e="canvas",T$e="hybrid",D$e="png",L$e="svg",R$e="none",Vg={Canvas:k$e,PNG:D$e,SVG:L$e,Hybrid:T$e,None:R$e},kv={};kv[k$e]=kv[D$e]={renderer:lT,headless:lT,handler:FA};kv[L$e]={renderer:u9,headless:C$e,handler:h$e};kv[T$e]={renderer:UI,headless:UI,handler:S$e};kv[R$e]={};function TR(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(kv[e]=t,this):kv[e]}function F$e(e,t,n){const r=[],i=new Zs().union(t),o=e.marktype;return o?$$e(e,i,n,r):o==="group"?M$e(e,i,n,r):_t("Intersect scene must be mark node or group item.")}function $$e(e,t,n,r){if(rtt(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)M$e(i[a],t,n,r);else for(const l=mc[o].isect;a<s;++a){const u=i[a];O$e(u,t,l)&&r.push(u)}}return r}function rtt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function M$e(e,t,n,r){n&&n(e.mark)&&O$e(e,t,mc.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)$$e(i[l],t,n,r);t.translate(s,a)}return r}function O$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const oM=new Zs;function I$e(e){const t=e.clip;if(Br(t))t(kA(oM.clear()));else if(t)oM.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(oM)}const itt=1e-9;function c9(e,t,n){return e===t?!0:n==="path"?N$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:eo(e)&&eo(t)?Math.abs(e-t)<=itt:!e||!t||!mn(e)&&!mn(t)?e==t:ott(e,t)}function N$e(e,t){return c9(x1(e),x1(t))}function ott(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!c9(e[i],t[i],i))return!1;return typeof e==typeof t}function stt(){UFe(),TQe()}const E1="top",Af="left",kf="right",wm="bottom",att="top-left",ltt="top-right",utt="bottom-left",ctt="bottom-right",f9="start",jI="middle",ql="end",ftt="x",dtt="y",DR="group",d9="axis",h9="title",htt="frame",ptt="scope",p9="legend",P$e="row-header",B$e="row-footer",z$e="row-title",U$e="column-header",j$e="column-footer",H$e="column-title",gtt="padding",mtt="symbol",q$e="fit",G$e="fit-x",W$e="fit-y",vtt="pad",g9="none",vS="all",HI="each",m9="flush",Yg="column",Xg="row";function V$e(e){wt.call(this,null,e)}tn(V$e,wt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=mc[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=yS(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===DR||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(yS(u,s))),r.role){case d9:case p9:case h9:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(yS(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(yS(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return I$e(r),t.modifies("bounds")}});function yS(e,t,n){return t(e.bounds.clear(),e,n)}const Zwe=":vega_identifier:";function v9(e){wt.call(this,0,e)}v9.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};tn(v9,wt,{transform(e,t){const n=ytt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function ytt(e){return e._signals[Zwe]||(e._signals[Zwe]=e.add(0))}function Y$e(e){wt.call(this,null,e)}tn(Y$e,wt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,btt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===DR?xR:bR;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function btt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function X$e(e){wt.call(this,null,e)}const Qwe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!K$e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},K$e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Jwe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(K$e(i,o=e[n].bounds,t))return!0},xtt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},wtt=(e,t,n)=>{var r=e.range(),i=new Zs;return t===E1||t===wm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},e2e=e=>(e.forEach(t=>t.opacity=1),e),t2e=(e,t)=>e.reflow(t.modified()).modifies("opacity");tn(X$e,wt,{transform(e,t){const n=Qwe[e.method]||Qwe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(e2e(i),t=t2e(t,e)),t;if(i=i.filter(xtt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=e2e(i),t=t2e(t,e),o.length>=3&&Jwe(o,r)){do o=n(o,r);while(o.length>=3&&Jwe(o,r));o.length<3&&!Ri(i).opacity&&(o.length>1&&(Ri(o).opacity=0),Ri(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=wtt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Z$e(e){wt.call(this,null,e)}tn(Z$e,wt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const vl=new Zs;function Lb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function _tt(e){var t=e.items[0].orient;return t===Af||t===kf}function Ett(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Att(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Ett(o),u=i.range,f=i.offset,c=i.position,d=i.minExtent,p=i.maxExtent,h=o.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=h&&JB(h),v=0,x=0,_,E;switch(vl.clear().union(m),m.clear(),(_=l[0])>-1&&m.union(i.items[_].bounds),(_=l[1])>-1&&m.union(i.items[_].bounds),a){case E1:v=c||0,x=-f,E=Math.max(d,Math.min(p,-m.y1)),m.add(0,-E).add(u,0),h&&bS(e,h,E,g,y,0,-1,m);break;case Af:v=-f,x=c||0,E=Math.max(d,Math.min(p,-m.x1)),m.add(-E,0).add(0,u),h&&bS(e,h,E,g,y,1,-1,m);break;case kf:v=n+f,x=c||0,E=Math.max(d,Math.min(p,m.x2)),m.add(0,0).add(E,u),h&&bS(e,h,E,g,y,1,1,m);break;case wm:v=c||0,x=r+f,E=Math.max(d,Math.min(p,m.y2)),m.add(0,0).add(u,E),h&&bS(e,h,E,g,0,0,1,m);break;default:v=i.x,x=i.y}return Bp(m.translate(v,x),i),Lb(i,"x",v+s)|Lb(i,"y",x+s)&&(i.bounds=vl,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function bS(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let f=0,c=0;e.dirty(t),o?f=(t.x||0)-(t.x=u):c=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-c)),e.dirty(t)}a.union(l)}const n2e=(e,t)=>Math.floor(Math.min(e,t)),r2e=(e,t)=>Math.ceil(Math.max(e,t));function Ctt(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===DR)switch(i.role){case d9:case p9:case h9:break;case P$e:s.rowheaders.push(...o);break;case B$e:s.rowfooters.push(...o);break;case U$e:s.colheaders.push(...o);break;case j$e:s.colfooters.push(...o);break;case z$e:s.rowtitle=o[0];break;case H$e:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Stt(e){return new Zs().set(0,0,e.width||0,e.height||0)}function ktt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function cs(e,t,n){const r=mn(e)?e[t]:e;return r??(n!==void 0?n:0)}function i2e(e){return e<0?Math.ceil(-e):0}function Q$e(e,t,n){var r=!n.nodirty,i=n.bounds===m9?Stt:ktt,o=vl.set(0,0,0,0),s=cs(n.align,Yg),a=cs(n.align,Xg),l=cs(n.padding,Yg),u=cs(n.padding,Xg),f=n.columns||t.length,c=f<=0?1:Math.ceil(t.length/f),d=t.length,p=Array(d),h=Array(f),g=0,m=Array(d),y=Array(c),v=0,x=Array(d),_=Array(d),E=Array(d),C,w,T,R,L,B,P,S,k,D,O;for(w=0;w<f;++w)h[w]=0;for(w=0;w<c;++w)y[w]=0;for(w=0;w<d;++w)B=t[w],L=E[w]=i(B),B.x=B.x||0,x[w]=0,B.y=B.y||0,_[w]=0,T=w%f,R=~~(w/f),g=Math.max(g,P=Math.ceil(L.x2)),v=Math.max(v,S=Math.ceil(L.y2)),h[T]=Math.max(h[T],P),y[R]=Math.max(y[R],S),p[w]=l+i2e(L.x1),m[w]=u+i2e(L.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%f===0&&(p[w]=0),w<f&&(m[w]=0);if(s===HI)for(T=1;T<f;++T){for(O=0,w=T;w<d;w+=f)O<p[w]&&(O=p[w]);for(w=T;w<d;w+=f)p[w]=O+h[T-1]}else if(s===vS){for(O=0,w=0;w<d;++w)w%f&&O<p[w]&&(O=p[w]);for(w=0;w<d;++w)w%f&&(p[w]=O+g)}else for(s=!1,T=1;T<f;++T)for(w=T;w<d;w+=f)p[w]+=h[T-1];if(a===HI)for(R=1;R<c;++R){for(O=0,w=R*f,C=w+f;w<C;++w)O<m[w]&&(O=m[w]);for(w=R*f;w<C;++w)m[w]=O+y[R-1]}else if(a===vS){for(O=0,w=f;w<d;++w)O<m[w]&&(O=m[w]);for(w=f;w<d;++w)m[w]=O+v}else for(a=!1,R=1;R<c;++R)for(w=R*f,C=w+f;w<C;++w)m[w]+=y[R-1];for(k=0,w=0;w<d;++w)k=p[w]+(w%f?k:0),x[w]+=k-t[w].x;for(T=0;T<f;++T)for(D=0,w=T;w<d;w+=f)D+=m[w],_[w]+=D-t[w].y;if(s&&cs(n.center,Yg)&&c>1)for(w=0;w<d;++w)L=s===vS?g:h[w%f],k=L-E[w].x2-t[w].x-x[w],k>0&&(x[w]+=k/2);if(a&&cs(n.center,Xg)&&f!==1)for(w=0;w<d;++w)L=a===vS?v:y[~~(w/f)],D=L-E[w].y2-t[w].y-_[w],D>0&&(_[w]+=D/2);for(w=0;w<d;++w)o.union(E[w].translate(x[w],_[w]));switch(k=cs(n.anchor,ftt),D=cs(n.anchor,dtt),cs(n.anchor,Yg)){case ql:k-=o.width();break;case jI:k-=o.width()/2}switch(cs(n.anchor,Xg)){case ql:D-=o.height();break;case jI:D-=o.height()/2}for(k=Math.round(k),D=Math.round(D),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)B=t[w],B.x+=x[w]+=k,B.y+=_[w]+=D,o.union(B.mark.bounds.union(B.bounds.translate(x[w],_[w]))),r&&e.dirty(B);return o}function Ttt(e,t,n){var r=Ctt(t),i=r.marks,o=n.bounds===m9?Dtt:Ltt,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,c,d,p,h,g,m;const y=Q$e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=cs(n.headerBand,Xg,null),f=xS(e,r.rowheaders,i,a,l,-cs(s,"rowHeader"),n2e,0,o,"x1",0,a,1,g)),r.colheaders&&(g=cs(n.headerBand,Yg,null),c=xS(e,r.colheaders,i,a,a,-cs(s,"columnHeader"),n2e,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=cs(n.footerBand,Xg,null),d=xS(e,r.rowfooters,i,a,l,cs(s,"rowFooter"),r2e,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=cs(n.footerBand,Yg,null),p=xS(e,r.colfooters,i,a,a,cs(s,"columnFooter"),r2e,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(h=cs(n.titleAnchor,Xg),m=cs(s,"rowTitle"),m=h===ql?d+m:f-m,g=cs(n.titleBand,Xg,.5),o2e(e,r.rowtitle,m,0,y,g)),r.coltitle&&(h=cs(n.titleAnchor,Yg),m=cs(s,"columnTitle"),m=h===ql?p+m:c-m,g=cs(n.titleBand,Yg,.5),o2e(e,r.coltitle,m,1,y,g))}function Dtt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Ltt(e,t){return e.bounds[t]}function xS(e,t,n,r,i,o,s,a,l,u,f,c,d,p){var h=n.length,g=0,m=0,y,v,x,_,E,C,w,T,R;if(!h)return g;for(y=f;y<h;y+=c)n[y]&&(g=s(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=f,v=0,_=t.length;v<_;++v,y+=c){for(C=t[v],E=C.mark.bounds,x=y;x>=0&&(w=n[x])==null;x-=d);a?(T=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),R=g):(T=g,R=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),E.union(C.bounds.translate(T-(C.x||0),R-(C.y||0))),C.x=T,C.y=R,e.dirty(C),m=s(m,E[u])}return m}function o2e(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Rtt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Ftt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function $tt(e,t,n,r,i,o,s){const a=Rtt(n,t),l=Ftt(e,a("offset",0)),u=a("anchor",f9),f=u===ql?1:u===jI?.5:0,c={align:HI,bounds:a("bounds",m9),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Af:c.anchor={x:Math.floor(r.x1)-l,column:ql,y:f*(s||r.height()+2*r.y1),row:u};break;case kf:c.anchor={x:Math.ceil(r.x2)+l,y:f*(s||r.height()+2*r.y1),row:u};break;case E1:c.anchor={y:Math.floor(i.y1)-l,row:ql,x:f*(o||i.width()+2*i.x1),column:u};break;case wm:c.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:u};break;case att:c.anchor={x:l,y:l};break;case ltt:c.anchor={x:o-l,y:l,column:ql};break;case utt:c.anchor={x:l,y:s-l,row:ql};break;case ctt:c.anchor={x:o-l,y:s-l,column:ql,row:ql};break}return c}function Mtt(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Itt(e,n,n.items[0].items[0]),o=Ott(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===mtt&&Ntt(n.items[0].items[0].items[0].items),i!==g9&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Bp(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function Ott(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Itt(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&m2(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,f=r-s.y;switch(s.orient){case Af:i+=Math.ceil(s.bounds.width())+l;break;case kf:case wm:break;default:o+=s.bounds.height()+l}switch((i||o)&&m2(e,n,i,o),s.orient){case Af:f+=Zy(t,n,s,a,1,1);break;case kf:u+=Zy(t,n,s,ql,0,0)+l,f+=Zy(t,n,s,a,1,1);break;case wm:u+=Zy(t,n,s,a,0,0),f+=Zy(t,n,s,ql,-1,0,1)+l;break;default:u+=Zy(t,n,s,a,0,0)}(u||f)&&m2(e,s,u,f),(u=Math.round(s.bounds.x1-r))<0&&(m2(e,n,-u,0),m2(e,s,-u,0))}}function Zy(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,c=l&&o?f:0,d=l&&o?0:f,p=i<=0?0:JB(n);return Math.round(r===f9?c:r===ql?d-p:.5*(f-p))}function m2(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Ntt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Ptt(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,f=o.padding,c=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=a===Af||a===kf?r:n,h=0,g=0,m=0,y=0,v=0,x;if(s!==DR?a===Af?(h=i.y2,p=i.y1):a===kf?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):a===Af&&(h=r,p=0),x=l===f9?h:l===ql?p:(h+p)/2,d&&d.text){switch(a){case E1:case wm:v=c.bounds.height()+f;break;case Af:y=c.bounds.width()+f;break;case kf:y=-c.bounds.width()-f;break}vl.clear().union(d.bounds),vl.translate(y-(d.x||0),v-(d.y||0)),Lb(d,"x",y)|Lb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(vl),d.mark.bounds.clear().union(vl),e.dirty(d)),vl.clear().union(d.bounds)}else vl.clear();switch(vl.union(c.bounds),a){case E1:g=x,m=i.y1-vl.height()-u;break;case Af:g=i.x1-vl.width()-u,m=x;break;case kf:g=i.x2+vl.width()+u,m=x;break;case wm:g=x,m=i.y2+u;break;default:g=o.x,m=o.y}return Lb(o,"x",g)|Lb(o,"y",m)&&(vl.translate(g,m),e.dirty(o),o.bounds.clear().union(vl),t.bounds.clear().union(vl),e.dirty(o)),o.bounds}function J$e(e){wt.call(this,null,e)}tn(J$e,wt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Ttt(n,r,e.layout),ztt(n,r,e)}),Btt(e.mark.group)?t.reflow():t}});function Btt(e){return e&&e.mark.role!=="legend-entry"}function ztt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Zs().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],f,c,d,p,h,g;for(h=0,g=r.length;h<g;++h)switch(c=r[h],c.role){case d9:p=_tt(c)?a:l,p.union(Att(e,c,i,o));break;case h9:f=c;break;case p9:u.push(Mtt(e,c));break;case htt:case ptt:case P$e:case B$e:case z$e:case U$e:case j$e:case H$e:a.union(c.bounds),l.union(c.bounds);break;default:s.union(c.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||kf,d!==g9&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];Q$e(e,v,$tt(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===q$e||n.autosize.type===G$e||n.autosize.type===W$e))switch(y.orient){case Af:case kf:s.add(v.x1,0).add(v.x2,0);break;case E1:case wm:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),f&&s.union(Ptt(e,f,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Utt(e,t,s,n)}function Utt(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),c=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),p=Math.max(0,Math.ceil(n.y2-f));if(i.contains===gtt){const h=e.padding();s-=h.left+h.right,a-=h.top+h.bottom}o===g9?(u=0,c=0,l=s,f=a):o===q$e?(l=Math.max(0,s-u-d),f=Math.max(0,a-c-p)):o===G$e?(l=Math.max(0,s-u-d),a=f+c+p):o===W$e?(s=l+u+d,f=Math.max(0,a-c-p)):o===vtt&&(s=l+u+d,a=f+c+p),e._resizeView(s,a,l,f,[u,c],i.resize)}const jtt=Object.freeze(Object.defineProperty({__proto__:null,bound:V$e,identifier:v9,mark:Y$e,overlap:X$e,render:Z$e,viewlayout:J$e},Symbol.toStringTag,{value:"Module"}));function eMe(e){wt.call(this,null,e)}tn(eMe,wt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=OB(o,s,e.minstep),l=e.format||kFe(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?SFe(o,e.values,a):IB(o,a);return i&&(r.rem=i),i=u.map((f,c)=>lo({index:c/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(lo({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function tMe(e){wt.call(this,null,e)}function Htt(){return lo({})}function qtt(e){const t=dx().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}tn(tMe,wt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Htt,o=e.key||Zn,s=this.value;return Dt(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&_t("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=qtt(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function nMe(e){wt.call(this,null,e)}tn(nMe,wt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Dt(o))if(n.changed()||o.every(c=>i[c]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Ag,l=i.enter||Ag,u=i.exit||Ag,f=(o&&!s?i[o]:a)||Ag;if(t.changed(t.ADD)&&(t.visit(t.ADD,c=>{l(c,e),a(c,e)}),n.modifies(l.output),n.modifies(a.output),f!==Ag&&f!==a&&(t.visit(t.ADD,c=>{f(c,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==Ag&&(t.visit(t.REM,c=>{u(c,e)}),n.modifies(u.output)),s||f!==Ag){const c=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(c,d=>{const p=l(d,e)||r;(f(d,e)||p)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(c,d=>{(f(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function rMe(e){wt.call(this,[],e)}tn(rMe,wt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Nk,s=e.scale,a=+e.limit,l=OB(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===Nk,f=e.format||RFe(n,s,l,o,e.formatSpecifier,e.formatType,u),c=e.values||LFe(s,l),d,p,h,g,m;return i&&(r.rem=i),o===Nk?(a&&c.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=c.slice(0,a-1),m=!0):i=c,Br(h=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,h(v,e)),0)):h=Ml(g=h||8),i=i.map((y,v)=>lo({index:v,label:f(y,v,i),value:y,offset:g,size:h(y,e)})),m&&(m=c[i.length],i.push(lo({index:i.length,label:`${c.length-i.length} entries`,value:m,offset:g,size:h(m,e)})))):o===gQe?(d=s.domain(),p=EFe(s,d[0],Ri(d)),c.length<3&&!e.values&&d[0]!==Ri(d)&&(c=[d[0],Ri(d)]),i=c.map((y,v)=>lo({index:v,label:f(y,v,c),value:y,perc:p(y)}))):(h=c.length-1,p=SQe(s),i=c.map((y,v)=>lo({index:v,label:f(y,v,c),value:y,perc:v?p(y):0,perc2:v===h?1:p(c[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Gtt=e=>e.source.x,Wtt=e=>e.source.y,Vtt=e=>e.target.x,Ytt=e=>e.target.y;function y9(e){wt.call(this,{},e)}y9.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};tn(y9,wt,{transform(e,t){var n=e.sourceX||Gtt,r=e.sourceY||Wtt,i=e.targetX||Vtt,o=e.targetY||Ytt,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=s2e.get(l+"-"+a)||s2e.get(l);return u||_t("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[s]=u(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(s)}});const iMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Xtt=(e,t,n,r)=>iMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oMe=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},Ktt=(e,t,n,r)=>oMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sMe=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},Ztt=(e,t,n,r)=>sMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Qtt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Jtt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,ent=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},tnt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},nnt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},rnt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},s2e=dx({line:iMe,"line-radial":Xtt,arc:oMe,"arc-radial":Ktt,curve:sMe,"curve-radial":Ztt,"orthogonal-horizontal":Qtt,"orthogonal-vertical":Jtt,"orthogonal-radial":ent,"diagonal-horizontal":tnt,"diagonal-vertical":nnt,"diagonal-radial":rnt});function b9(e){wt.call(this,null,e)}b9.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};tn(b9,wt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||ux,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),f=u.length,c=s,d=(a-s)/RDe(u),p=nc(f),h,g,m;for(e.sort&&p.sort((y,v)=>u[y]-u[v]),h=0;h<f;++h)m=u[p[h]],g=l[p[h]],g[r]=c,g[i]=c+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const int=5;function ont(e){const t=e.type;return!e.bins&&(t===v1||t===xA||t===wA)}function aMe(e){return FB(e)&&e!==Ud}const snt=hc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lMe(e){wt.call(this,null,e),this.modified(!0)}tn(lMe,wt,{transform(e,t){var n=t.dataflow,r=this.value,i=ant(e);(!r||i!==r.type)&&(this.value=r=to(i)());for(i in e)if(!snt[i]){if(i==="padding"&&aMe(r.type))continue;Br(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return hnt(r,e,dnt(r,e,unt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ant(e){var t=e.type,n="",r;return t===Ud?Ud+"-"+v1:(lnt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Ud+"-":r===3?mx+"-":""),(n+t||v1).toLowerCase())}function lnt(e){const t=e.type;return FB(t)&&t!==Cv&&t!==Sv&&(e.scheme||e.range&&e.range.length&&e.range.every(pn))}function unt(e,t,n){const r=cnt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&ont(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return aMe(o)&&t.padding&&i[0]!==Ri(i)&&(i=fnt(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uMe(o,i,n)),o===TB&&e.unknown(t.domainImplicit?tGe:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&OB(e,t.nice)||null),i.length}function cnt(e,t,n){return t?(e.domain(uMe(e.type,t,n)),t.length):-1}function fnt(e,t,n,r,i,o){var s=Math.abs(Ri(n)-n[0]),a=s/(s-2*r),l=e===Sp?pP(t,null,a):e===wA?q3(t,null,a,.5):e===xA?q3(t,null,a,i||1):e===pR?gP(t,null,a,o||1):hP(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function uMe(e,t,n){if(yFe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Qt(t))}return t}function dnt(e,t,n){let r=t.bins;if(r&&!Dt(r)){const i=e.domain(),o=i[0],s=Ri(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||_t("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=nc(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===DB&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function hnt(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=pnt(r,t,n);else if(t.scheme&&(o=gnt(r,t,n),Br(o))){if(e.interpolator)return e.interpolator(o);_t(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&bFe(r))return e.interpolator(vR(qI(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate($B(t.interpolate,t.interpolateGamma)):Br(e.round)?e.round(i):Br(e.rangeRound)&&e.interpolate(i?NN:IN),o&&e.range(qI(o,t.reverse))}function pnt(e,t,n){e!==dFe&&e!==DI&&_t("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===DI?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*kB(n,i,r)]}function gnt(e,t,n){var r=t.schemeExtent,i,o;return Dt(t.scheme)?o=vR(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=MB(i),o||_t(`Unrecognized scheme name: ${t.scheme}`)),n=e===mR?n+1:e===DB?n-1:e===y1||e===gR?+t.schemeCount||int:n,bFe(e)?a2e(o,r,t.reverse):Br(o)?_Fe(a2e(o,r),n):e===TB?o:o.slice(0,n)}function a2e(e,t,n){return Br(e)&&(t||n)?wFe(e,qI(t||[0,1],n)):e}function qI(e,t){return t?e.slice().reverse():e}function cMe(e){wt.call(this,null,e)}tn(cMe,wt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ry(e.sort)),this.modified(n),t}});const l2e="zero",fMe="center",dMe="normalize",hMe=["y0","y1"];function x9(e){wt.call(this,null,e)}x9.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:l2e,values:[l2e,fMe,dMe]},{name:"as",type:"string",array:!0,length:2,default:hMe}]};tn(x9,wt,{transform(e,t){var n=e.as||hMe,r=n[0],i=n[1],o=ry(e.sort),s=e.field||ux,a=e.offset===fMe?mnt:e.offset===dMe?vnt:ynt,l,u,f,c;for(l=bnt(t.source,e.groupby,o,s),u=0,f=l.length,c=l.max;u<f;++u)a(l[u],c,s,r,i);return t.reflow(e.modified()).modifies(n)}});function mnt(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function vnt(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=s,f[i]=s=o*(u+=Math.abs(n(f)))}function ynt(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=s,f[i]=s+=u):(f[r]=o,f[i]=o+=u)}function bnt(e,t,n,r){var i=[],o=g=>g(f),s,a,l,u,f,c,d,p,h;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)f=e[a],c=t.map(o),d=s[c],d||(s[c]=d=[],i.push(d)),d.push(f);for(c=0,h=0,u=i.length;c<u;++c){for(d=i[c],a=0,p=0,l=d.length;a<l;++a)p+=Math.abs(r(d[a]));d.sum=p,p>h&&(h=p),n&&d.sort(n)}return i.max=h,i}const xnt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:eMe,datajoin:tMe,encode:nMe,legendentries:rMe,linkpath:y9,pie:b9,scale:lMe,sortitems:cMe,stack:x9},Symbol.toStringTag,{value:"Module"}));var cr=1e-6,GI=1e-12,di=Math.PI,Rs=di/2,fT=di/4,nu=di*2,Is=180/di,ai=di/180,Di=Math.abs,yx=Math.atan,Zc=Math.atan2,ir=Math.cos,wS=Math.ceil,pMe=Math.exp,WI=Math.hypot,dT=Math.log,sM=Math.pow,Jn=Math.sin,Pc=Math.sign||function(e){return e>0?1:e<0?-1:0},ru=Math.sqrt,w9=Math.tan;function gMe(e){return e>1?0:e<-1?di:Math.acos(e)}function Nu(e){return e>1?Rs:e<-1?-Rs:Math.asin(e)}function Va(){}function hT(e,t){e&&c2e.hasOwnProperty(e.type)&&c2e[e.type](e,t)}var u2e={Feature:function(e,t){hT(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)hT(n[r].geometry,t)}},c2e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){VI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)VI(n[r],t,0)},Polygon:function(e,t){f2e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)f2e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)hT(n[r],t)}};function VI(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function f2e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)VI(e[n],t,1);t.polygonEnd()}function rp(e,t){e&&u2e.hasOwnProperty(e.type)?u2e[e.type](e,t):hT(e,t)}var pT=new eu,gT=new eu,mMe,vMe,YI,XI,KI,Jd={point:Va,lineStart:Va,lineEnd:Va,polygonStart:function(){pT=new eu,Jd.lineStart=wnt,Jd.lineEnd=_nt},polygonEnd:function(){var e=+pT;gT.add(e<0?nu+e:e),this.lineStart=this.lineEnd=this.point=Va},sphere:function(){gT.add(nu)}};function wnt(){Jd.point=Ent}function _nt(){yMe(mMe,vMe)}function Ent(e,t){Jd.point=yMe,mMe=e,vMe=t,e*=ai,t*=ai,YI=e,XI=ir(t=t/2+fT),KI=Jn(t)}function yMe(e,t){e*=ai,t*=ai,t=t/2+fT;var n=e-YI,r=n>=0?1:-1,i=r*n,o=ir(t),s=Jn(t),a=KI*s,l=XI*o+a*ir(i),u=a*r*Jn(i);pT.add(Zc(u,l)),YI=e,XI=o,KI=s}function Ant(e){return gT=new eu,rp(e,Jd),gT*2}function mT(e){return[Zc(e[1],e[0]),Nu(e[2])]}function Tv(e){var t=e[0],n=e[1],r=ir(n);return[r*ir(t),r*Jn(t),Jn(n)]}function _S(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function A1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function aM(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ES(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function vT(e){var t=ru(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var vs,Eu,Ts,Qu,Q0,bMe,xMe,jb,w_,Rg,kp,Kh={point:ZI,lineStart:d2e,lineEnd:h2e,polygonStart:function(){Kh.point=_Me,Kh.lineStart=Cnt,Kh.lineEnd=Snt,w_=new eu,Jd.polygonStart()},polygonEnd:function(){Jd.polygonEnd(),Kh.point=ZI,Kh.lineStart=d2e,Kh.lineEnd=h2e,pT<0?(vs=-(Ts=180),Eu=-(Qu=90)):w_>cr?Qu=90:w_<-1e-6&&(Eu=-90),kp[0]=vs,kp[1]=Ts},sphere:function(){vs=-(Ts=180),Eu=-(Qu=90)}};function ZI(e,t){Rg.push(kp=[vs=e,Ts=e]),t<Eu&&(Eu=t),t>Qu&&(Qu=t)}function wMe(e,t){var n=Tv([e*ai,t*ai]);if(jb){var r=A1(jb,n),i=[r[1],-r[0],0],o=A1(i,r);vT(o),o=mT(o);var s=e-Q0,a=s>0?1:-1,l=o[0]*Is*a,u,f=Di(s)>180;f^(a*Q0<l&&l<a*e)?(u=o[1]*Is,u>Qu&&(Qu=u)):(l=(l+360)%360-180,f^(a*Q0<l&&l<a*e)?(u=-o[1]*Is,u<Eu&&(Eu=u)):(t<Eu&&(Eu=t),t>Qu&&(Qu=t))),f?e<Q0?Ku(vs,e)>Ku(vs,Ts)&&(Ts=e):Ku(e,Ts)>Ku(vs,Ts)&&(vs=e):Ts>=vs?(e<vs&&(vs=e),e>Ts&&(Ts=e)):e>Q0?Ku(vs,e)>Ku(vs,Ts)&&(Ts=e):Ku(e,Ts)>Ku(vs,Ts)&&(vs=e)}else Rg.push(kp=[vs=e,Ts=e]);t<Eu&&(Eu=t),t>Qu&&(Qu=t),jb=n,Q0=e}function d2e(){Kh.point=wMe}function h2e(){kp[0]=vs,kp[1]=Ts,Kh.point=ZI,jb=null}function _Me(e,t){if(jb){var n=e-Q0;w_.add(Di(n)>180?n+(n>0?360:-360):n)}else bMe=e,xMe=t;Jd.point(e,t),wMe(e,t)}function Cnt(){Jd.lineStart()}function Snt(){_Me(bMe,xMe),Jd.lineEnd(),Di(w_)>cr&&(vs=-(Ts=180)),kp[0]=vs,kp[1]=Ts,jb=null}function Ku(e,t){return(t-=e)<0?t+360:t}function knt(e,t){return e[0]-t[0]}function p2e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Tnt(e){var t,n,r,i,o,s,a;if(Qu=Ts=-(vs=Eu=1/0),Rg=[],rp(e,Kh),n=Rg.length){for(Rg.sort(knt),t=1,r=Rg[0],o=[r];t<n;++t)i=Rg[t],p2e(r,i[0])||p2e(r,i[1])?(Ku(r[0],i[1])>Ku(r[0],r[1])&&(r[1]=i[1]),Ku(i[0],r[1])>Ku(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Ku(r[1],i[0]))>s&&(s=a,vs=i[0],Ts=r[1])}return Rg=kp=null,vs===1/0||Eu===1/0?[[NaN,NaN],[NaN,NaN]]:[[vs,Eu],[Ts,Qu]]}var W2,yT,bT,xT,wT,_T,ET,AT,QI,JI,e6,EMe,AMe,Gl,Wl,Vl,Tf={sphere:Va,point:_9,lineStart:g2e,lineEnd:m2e,polygonStart:function(){Tf.lineStart=Rnt,Tf.lineEnd=Fnt},polygonEnd:function(){Tf.lineStart=g2e,Tf.lineEnd=m2e}};function _9(e,t){e*=ai,t*=ai;var n=ir(t);$A(n*ir(e),n*Jn(e),Jn(t))}function $A(e,t,n){++W2,bT+=(e-bT)/W2,xT+=(t-xT)/W2,wT+=(n-wT)/W2}function g2e(){Tf.point=Dnt}function Dnt(e,t){e*=ai,t*=ai;var n=ir(t);Gl=n*ir(e),Wl=n*Jn(e),Vl=Jn(t),Tf.point=Lnt,$A(Gl,Wl,Vl)}function Lnt(e,t){e*=ai,t*=ai;var n=ir(t),r=n*ir(e),i=n*Jn(e),o=Jn(t),s=Zc(ru((s=Wl*o-Vl*i)*s+(s=Vl*r-Gl*o)*s+(s=Gl*i-Wl*r)*s),Gl*r+Wl*i+Vl*o);yT+=s,_T+=s*(Gl+(Gl=r)),ET+=s*(Wl+(Wl=i)),AT+=s*(Vl+(Vl=o)),$A(Gl,Wl,Vl)}function m2e(){Tf.point=_9}function Rnt(){Tf.point=$nt}function Fnt(){CMe(EMe,AMe),Tf.point=_9}function $nt(e,t){EMe=e,AMe=t,e*=ai,t*=ai,Tf.point=CMe;var n=ir(t);Gl=n*ir(e),Wl=n*Jn(e),Vl=Jn(t),$A(Gl,Wl,Vl)}function CMe(e,t){e*=ai,t*=ai;var n=ir(t),r=n*ir(e),i=n*Jn(e),o=Jn(t),s=Wl*o-Vl*i,a=Vl*r-Gl*o,l=Gl*i-Wl*r,u=WI(s,a,l),f=Nu(u),c=u&&-f/u;QI.add(c*s),JI.add(c*a),e6.add(c*l),yT+=f,_T+=f*(Gl+(Gl=r)),ET+=f*(Wl+(Wl=i)),AT+=f*(Vl+(Vl=o)),$A(Gl,Wl,Vl)}function Mnt(e){W2=yT=bT=xT=wT=_T=ET=AT=0,QI=new eu,JI=new eu,e6=new eu,rp(e,Tf);var t=+QI,n=+JI,r=+e6,i=WI(t,n,r);return i<GI&&(t=_T,n=ET,r=AT,yT<cr&&(t=bT,n=xT,r=wT),i=WI(t,n,r),i<GI)?[NaN,NaN]:[Zc(n,t)*Is,Nu(r/i)*Is]}function t6(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function n6(e,t){return Di(e)>di&&(e-=Math.round(e/nu)*nu),[e,t]}n6.invert=n6;function SMe(e,t,n){return(e%=nu)?t||n?t6(y2e(e),b2e(t,n)):y2e(e):t||n?b2e(t,n):n6}function v2e(e){return function(t,n){return t+=e,Di(t)>di&&(t-=Math.round(t/nu)*nu),[t,n]}}function y2e(e){var t=v2e(e);return t.invert=v2e(-e),t}function b2e(e,t){var n=ir(e),r=Jn(e),i=ir(t),o=Jn(t);function s(a,l){var u=ir(l),f=ir(a)*u,c=Jn(a)*u,d=Jn(l),p=d*n+f*r;return[Zc(c*i-p*o,f*n-d*r),Nu(p*i+c*o)]}return s.invert=function(a,l){var u=ir(l),f=ir(a)*u,c=Jn(a)*u,d=Jn(l),p=d*i-c*o;return[Zc(c*i+d*o,f*n+p*r),Nu(p*n-f*r)]},s}function Ont(e){e=SMe(e[0]*ai,e[1]*ai,e.length>2?e[2]*ai:0);function t(n){return n=e(n[0]*ai,n[1]*ai),n[0]*=Is,n[1]*=Is,n}return t.invert=function(n){return n=e.invert(n[0]*ai,n[1]*ai),n[0]*=Is,n[1]*=Is,n},t}function Int(e,t,n,r,i,o){if(n){var s=ir(t),a=Jn(t),l=r*n;i==null?(i=t+r*nu,o=t-l/2):(i=x2e(s,i),o=x2e(s,o),(r>0?i<o:i>o)&&(i+=r*nu));for(var u,f=i;r>0?f>o:f<o;f-=l)u=mT([s,-a*ir(f),-a*Jn(f)]),e.point(u[0],u[1])}}function x2e(e,t){t=Tv(t),t[0]-=e,vT(t);var n=gMe(-t[1]);return((-t[2]<0?-n:n)+nu-cr)%nu}function kMe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Va,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Wk(e,t){return Di(e[0]-t[0])<cr&&Di(e[1]-t[1])<cr}function AS(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TMe(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(h){if(!((g=h.length-1)<=0)){var g,m=h[0],y=h[g],v;if(Wk(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=h[a])[0],m[1]);i.lineEnd();return}y[0]+=2*cr}o.push(v=new AS(m,h,null,!0)),s.push(v.o=new AS(m,null,v,!1)),o.push(v=new AS(y,h,null,!1)),s.push(v.o=new AS(y,null,v,!0))}}),!!o.length){for(s.sort(t),w2e(o),w2e(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],f,c;;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(a=0,l=f.length;a<l;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,p=!p}while(!d.v);i.lineEnd()}}}function w2e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function lM(e){return Di(e[0])<=di?e[0]:Pc(e[0])*((Di(e[0])+di)%nu-di)}function Nnt(e,t){var n=lM(t),r=t[1],i=Jn(r),o=[Jn(n),-ir(n),0],s=0,a=0,l=new eu;i===1?r=Rs+cr:i===-1&&(r=-Rs-cr);for(var u=0,f=e.length;u<f;++u)if(d=(c=e[u]).length)for(var c,d,p=c[d-1],h=lM(p),g=p[1]/2+fT,m=Jn(g),y=ir(g),v=0;v<d;++v,h=_,m=C,y=w,p=x){var x=c[v],_=lM(x),E=x[1]/2+fT,C=Jn(E),w=ir(E),T=_-h,R=T>=0?1:-1,L=R*T,B=L>di,P=m*C;if(l.add(Zc(P*R*Jn(L),y*w+P*ir(L))),s+=B?T+R*nu:T,B^h>=n^_>=n){var S=A1(Tv(p),Tv(x));vT(S);var k=A1(o,S);vT(k);var D=(B^T>=0?-1:1)*Nu(k[2]);(r>D||r===D&&(S[0]||S[1]))&&(a+=B^T>=0?1:-1)}}return(s<-1e-6||s<cr&&l<-1e-12)^a&1}function DMe(e,t,n,r){return function(i){var o=t(i),s=kMe(),a=t(s),l=!1,u,f,c,d={point:p,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=x,f=[],u=[]},polygonEnd:function(){d.point=p,d.lineStart=g,d.lineEnd=m,f=LDe(f);var _=Nnt(u,r);f.length?(l||(i.polygonStart(),l=!0),TMe(f,Bnt,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(_,E){e(_,E)&&i.point(_,E)}function h(_,E){o.point(_,E)}function g(){d.point=h,o.lineStart()}function m(){d.point=p,o.lineEnd()}function y(_,E){c.push([_,E]),a.point(_,E)}function v(){a.lineStart(),c=[]}function x(){y(c[0][0],c[0][1]),a.lineEnd();var _=a.clean(),E=s.result(),C,w=E.length,T,R,L;if(c.pop(),u.push(c),c=null,!!w){if(_&1){if(R=E[0],(T=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<T;++C)i.point((L=R[C])[0],L[1]);i.lineEnd()}return}w>1&&_&2&&E.push(E.pop().concat(E.shift())),f.push(E.filter(Pnt))}}return d}}function Pnt(e){return e.length>1}function Bnt(e,t){return((e=e.x)[0]<0?e[1]-Rs-cr:Rs-e[1])-((t=t.x)[0]<0?t[1]-Rs-cr:Rs-t[1])}const _2e=DMe(function(){return!0},znt,jnt,[-di,-Rs]);function znt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?di:-di,l=Di(o-t);Di(l-di)<cr?(e.point(t,n=(n+s)/2>0?Rs:-Rs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=di&&(Di(t-r)<cr&&(t-=r*cr),Di(o-a)<cr&&(o-=a*cr),n=Unt(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Unt(e,t,n,r){var i,o,s=Jn(e-n);return Di(s)>cr?yx((Jn(t)*(o=ir(r))*Jn(n)-Jn(r)*(i=ir(t))*Jn(e))/(i*o*s)):(t+r)/2}function jnt(e,t,n,r){var i;if(e==null)i=n*Rs,r.point(-di,i),r.point(0,i),r.point(di,i),r.point(di,0),r.point(di,-i),r.point(0,-i),r.point(-di,-i),r.point(-di,0),r.point(-di,i);else if(Di(e[0]-t[0])>cr){var o=e[0]<t[0]?di:-di;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Hnt(e){var t=ir(e),n=2*ai,r=t>0,i=Di(t)>cr;function o(f,c,d,p){Int(p,e,n,d,f,c)}function s(f,c){return ir(f)*ir(c)>t}function a(f){var c,d,p,h,g;return{lineStart:function(){h=p=!1,g=1},point:function(m,y){var v=[m,y],x,_=s(m,y),E=r?_?0:u(m,y):_?u(m+(m<0?di:-di),y):0;if(!c&&(h=p=_)&&f.lineStart(),_!==p&&(x=l(c,v),(!x||Wk(c,x)||Wk(v,x))&&(v[2]=1)),_!==p)g=0,_?(f.lineStart(),x=l(v,c),f.point(x[0],x[1])):(x=l(c,v),f.point(x[0],x[1],2),f.lineEnd()),c=x;else if(i&&c&&r^_){var C;!(E&d)&&(C=l(v,c,!0))&&(g=0,r?(f.lineStart(),f.point(C[0][0],C[0][1]),f.point(C[1][0],C[1][1]),f.lineEnd()):(f.point(C[1][0],C[1][1]),f.lineEnd(),f.lineStart(),f.point(C[0][0],C[0][1],3)))}_&&(!c||!Wk(c,v))&&f.point(v[0],v[1]),c=v,p=_,d=E},lineEnd:function(){p&&f.lineEnd(),c=null},clean:function(){return g|(h&&p)<<1}}}function l(f,c,d){var p=Tv(f),h=Tv(c),g=[1,0,0],m=A1(p,h),y=_S(m,m),v=m[0],x=y-v*v;if(!x)return!d&&f;var _=t*y/x,E=-t*v/x,C=A1(g,m),w=ES(g,_),T=ES(m,E);aM(w,T);var R=C,L=_S(w,R),B=_S(R,R),P=L*L-B*(_S(w,w)-1);if(!(P<0)){var S=ru(P),k=ES(R,(-L-S)/B);if(aM(k,w),k=mT(k),!d)return k;var D=f[0],O=c[0],N=f[1],j=c[1],q;O<D&&(q=D,D=O,O=q);var W=O-D,Q=Di(W-di)<cr,ee=Q||W<cr;if(!Q&&j<N&&(q=N,N=j,j=q),ee?Q?N+j>0^k[1]<(Di(k[0]-D)<cr?N:j):N<=k[1]&&k[1]<=j:W>di^(D<=k[0]&&k[0]<=O)){var H=ES(R,(-L+S)/B);return aM(H,w),[k,mT(H)]}}}function u(f,c){var d=r?e:di-e,p=0;return f<-d?p|=1:f>d&&(p|=2),c<-d?p|=4:c>d&&(p|=8),p}return DMe(s,a,o,r?[0,-e]:[-di,e-di])}function qnt(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],f=0,c=1,d=l-s,p=u-a,h;if(h=n-s,!(!d&&h>0)){if(h/=d,d<0){if(h<f)return;h<c&&(c=h)}else if(d>0){if(h>c)return;h>f&&(f=h)}if(h=i-s,!(!d&&h<0)){if(h/=d,d<0){if(h>c)return;h>f&&(f=h)}else if(d>0){if(h<f)return;h<c&&(c=h)}if(h=r-a,!(!p&&h>0)){if(h/=p,p<0){if(h<f)return;h<c&&(c=h)}else if(p>0){if(h>c)return;h>f&&(f=h)}if(h=o-a,!(!p&&h<0)){if(h/=p,p<0){if(h>c)return;h>f&&(f=h)}else if(p>0){if(h<f)return;h<c&&(c=h)}return f>0&&(e[0]=s+f*d,e[1]=a+f*p),c<1&&(t[0]=s+c*d,t[1]=a+c*p),!0}}}}}var CS=1e9,SS=-1e9;function LMe(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,c,d){var p=0,h=0;if(u==null||(p=s(u,c))!==(h=s(f,c))||l(u,f)<0^c>0)do d.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+c+4)%4)!==h);else d.point(f[0],f[1])}function s(u,f){return Di(u[0]-e)<cr?f>0?0:3:Di(u[0]-n)<cr?f>0?2:1:Di(u[1]-t)<cr?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var c=s(u,1),d=s(f,1);return c!==d?c-d:c===0?f[1]-u[1]:c===1?u[0]-f[0]:c===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,c=kMe(),d,p,h,g,m,y,v,x,_,E,C,w={point:T,lineStart:P,lineEnd:S,polygonStart:L,polygonEnd:B};function T(D,O){i(D,O)&&f.point(D,O)}function R(){for(var D=0,O=0,N=p.length;O<N;++O)for(var j=p[O],q=1,W=j.length,Q=j[0],ee,H,se=Q[0],ne=Q[1];q<W;++q)ee=se,H=ne,Q=j[q],se=Q[0],ne=Q[1],H<=r?ne>r&&(se-ee)*(r-H)>(ne-H)*(e-ee)&&++D:ne<=r&&(se-ee)*(r-H)<(ne-H)*(e-ee)&&--D;return D}function L(){f=c,d=[],p=[],C=!0}function B(){var D=R(),O=C&&D,N=(d=LDe(d)).length;(O||N)&&(u.polygonStart(),O&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),N&&TMe(d,a,D,o,u),u.polygonEnd()),f=u,d=p=h=null}function P(){w.point=k,p&&p.push(h=[]),E=!0,_=!1,v=x=NaN}function S(){d&&(k(g,m),y&&_&&c.rejoin(),d.push(c.result())),w.point=T,_&&f.lineEnd()}function k(D,O){var N=i(D,O);if(p&&h.push([D,O]),E)g=D,m=O,y=N,E=!1,N&&(f.lineStart(),f.point(D,O));else if(N&&_)f.point(D,O);else{var j=[v=Math.max(SS,Math.min(CS,v)),x=Math.max(SS,Math.min(CS,x))],q=[D=Math.max(SS,Math.min(CS,D)),O=Math.max(SS,Math.min(CS,O))];qnt(j,q,e,t,n,r)?(_||(f.lineStart(),f.point(j[0],j[1])),f.point(q[0],q[1]),N||f.lineEnd(),C=!1):N&&(f.lineStart(),f.point(D,O),C=!1)}v=D,x=O,_=N}return w}}function E2e(e,t,n){var r=nc(e,t-cr,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function A2e(e,t,n){var r=nc(e,t-cr,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function Gnt(){var e,t,n,r,i,o,s,a,l=10,u=l,f=90,c=360,d,p,h,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return nc(wS(r/f)*f,n,f).map(h).concat(nc(wS(a/c)*c,s,c).map(g)).concat(nc(wS(t/l)*l,e,l).filter(function(x){return Di(x%f)>cr}).map(d)).concat(nc(wS(o/u)*u,i,u).filter(function(x){return Di(x%c)>cr}).map(p))}return y.lines=function(){return v().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(g(s).slice(1),h(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],s=+x[1][1],r>n&&(x=r,r=n,n=x),a>s&&(x=a,a=s,s=x),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),y.precision(m)):[[t,o],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(f=+x[0],c=+x[1],y):[f,c]},y.stepMinor=function(x){return arguments.length?(l=+x[0],u=+x[1],y):[l,u]},y.precision=function(x){return arguments.length?(m=+x,d=E2e(o,i,90),p=A2e(t,e,m),h=E2e(a,s,90),g=A2e(r,n,m),y):m},y.extentMajor([[-180,-90+cr],[180,90-cr]]).extentMinor([[-180,-80-cr],[180,80+cr]])}const fE=e=>e;var uM=new eu,r6=new eu,RMe,FMe,i6,o6,ip={point:Va,lineStart:Va,lineEnd:Va,polygonStart:function(){ip.lineStart=Wnt,ip.lineEnd=Ynt},polygonEnd:function(){ip.lineStart=ip.lineEnd=ip.point=Va,uM.add(Di(r6)),r6=new eu},result:function(){var e=uM/2;return uM=new eu,e}};function Wnt(){ip.point=Vnt}function Vnt(e,t){ip.point=$Me,RMe=i6=e,FMe=o6=t}function $Me(e,t){r6.add(o6*e-i6*t),i6=e,o6=t}function Ynt(){$Me(RMe,FMe)}var C1=1/0,CT=C1,dE=-C1,ST=dE,kT={point:Xnt,lineStart:Va,lineEnd:Va,polygonStart:Va,polygonEnd:Va,result:function(){var e=[[C1,CT],[dE,ST]];return dE=ST=-(CT=C1=1/0),e}};function Xnt(e,t){e<C1&&(C1=e),e>dE&&(dE=e),t<CT&&(CT=t),t>ST&&(ST=t)}var s6=0,a6=0,V2=0,TT=0,DT=0,Rb=0,l6=0,u6=0,Y2=0,MMe,OMe,Fd,$d,Mc={point:Dv,lineStart:C2e,lineEnd:S2e,polygonStart:function(){Mc.lineStart=Qnt,Mc.lineEnd=Jnt},polygonEnd:function(){Mc.point=Dv,Mc.lineStart=C2e,Mc.lineEnd=S2e},result:function(){var e=Y2?[l6/Y2,u6/Y2]:Rb?[TT/Rb,DT/Rb]:V2?[s6/V2,a6/V2]:[NaN,NaN];return s6=a6=V2=TT=DT=Rb=l6=u6=Y2=0,e}};function Dv(e,t){s6+=e,a6+=t,++V2}function C2e(){Mc.point=Knt}function Knt(e,t){Mc.point=Znt,Dv(Fd=e,$d=t)}function Znt(e,t){var n=e-Fd,r=t-$d,i=ru(n*n+r*r);TT+=i*(Fd+e)/2,DT+=i*($d+t)/2,Rb+=i,Dv(Fd=e,$d=t)}function S2e(){Mc.point=Dv}function Qnt(){Mc.point=ert}function Jnt(){IMe(MMe,OMe)}function ert(e,t){Mc.point=IMe,Dv(MMe=Fd=e,OMe=$d=t)}function IMe(e,t){var n=e-Fd,r=t-$d,i=ru(n*n+r*r);TT+=i*(Fd+e)/2,DT+=i*($d+t)/2,Rb+=i,i=$d*e-Fd*t,l6+=i*(Fd+e),u6+=i*($d+t),Y2+=i*3,Dv(Fd=e,$d=t)}function NMe(e){this._context=e}NMe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,nu);break}}},result:Va};var c6=new eu,cM,PMe,BMe,X2,K2,hE={point:Va,lineStart:function(){hE.point=trt},lineEnd:function(){cM&&zMe(PMe,BMe),hE.point=Va},polygonStart:function(){cM=!0},polygonEnd:function(){cM=null},result:function(){var e=+c6;return c6=new eu,e}};function trt(e,t){hE.point=zMe,PMe=X2=e,BMe=K2=t}function zMe(e,t){X2-=e,K2-=t,c6.add(ru(X2*X2+K2*K2)),X2=e,K2=t}let k2e,LT,T2e,D2e;class L2e{constructor(t){this._append=t==null?UMe:nrt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==T2e||this._append!==LT){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,T2e=r,LT=this._append,D2e=this._,this._=i}this._+=D2e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function UMe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nrt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return UMe;if(t!==k2e){const n=10**t;k2e=t,LT=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return LT}function jMe(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),rp(a,i(o))),o.result()}return s.area=function(a){return rp(a,i(ip)),ip.result()},s.measure=function(a){return rp(a,i(hE)),hE.result()},s.bounds=function(a){return rp(a,i(kT)),kT.result()},s.centroid=function(a){return rp(a,i(Mc)),Mc.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,fE):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new L2e(n)):new NMe(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new L2e(n)),s},s.projection(e).digits(n).context(t)}function LR(e){return function(t){var n=new f6;for(var r in e)n[r]=e[r];return n.stream=t,n}}function f6(){}f6.prototype={constructor:f6,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function E9(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),rp(n,e.stream(kT)),t(kT.result()),r!=null&&e.clipExtent(r),e}function RR(e,t,n){return E9(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function A9(e,t,n){return RR(e,[[0,0],t],n)}function C9(e,t,n){return E9(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function S9(e,t,n){return E9(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var R2e=16,rrt=ir(30*ai);function F2e(e,t){return+t?ort(e,t):irt(e)}function irt(e){return LR({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ort(e,t){function n(r,i,o,s,a,l,u,f,c,d,p,h,g,m){var y=u-r,v=f-i,x=y*y+v*v;if(x>4*t&&g--){var _=s+d,E=a+p,C=l+h,w=ru(_*_+E*E+C*C),T=Nu(C/=w),R=Di(Di(C)-1)<cr||Di(o-c)<cr?(o+c)/2:Zc(E,_),L=e(R,T),B=L[0],P=L[1],S=B-r,k=P-i,D=v*S-y*k;(D*D/x>t||Di((y*S+v*k)/x-.5)>.3||s*d+a*p+l*h<rrt)&&(n(r,i,o,s,a,l,B,P,R,_/=w,E/=w,C,g,m),m.point(B,P),n(B,P,R,_,E,C,u,f,c,d,p,h,g,m))}}return function(r){var i,o,s,a,l,u,f,c,d,p,h,g,m={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=E},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(T,R){T=e(T,R),r.point(T[0],T[1])}function v(){c=NaN,m.point=x,r.lineStart()}function x(T,R){var L=Tv([T,R]),B=e(T,R);n(c,d,f,p,h,g,c=B[0],d=B[1],f=T,p=L[0],h=L[1],g=L[2],R2e,r),r.point(c,d)}function _(){m.point=y,r.lineEnd()}function E(){v(),m.point=C,m.lineEnd=w}function C(T,R){x(i=T,R),o=c,s=d,a=p,l=h,u=g,m.point=x}function w(){n(c,d,f,p,h,g,o,s,i,a,l,u,R2e,r),m.lineEnd=_,_()}return m}}var srt=LR({point:function(e,t){this.stream.point(e*ai,t*ai)}});function art(e){return LR({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function lrt(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function $2e(e,t,n,r,i,o){if(!o)return lrt(e,t,n,r,i);var s=ir(o),a=Jn(o),l=s*e,u=a*e,f=s/e,c=a/e,d=(a*n-s*t)/e,p=(a*t+s*n)/e;function h(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return h.invert=function(g,m){return[r*(f*g-c*m+d),i*(p-c*g-f*m)]},h}function uh(e){return HMe(function(){return e})()}function HMe(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,f,c=0,d=1,p=1,h=null,g=_2e,m=null,y,v,x,_=fE,E=.5,C,w,T,R,L;function B(D){return T(D[0]*ai,D[1]*ai)}function P(D){return D=T.invert(D[0],D[1]),D&&[D[0]*Is,D[1]*Is]}B.stream=function(D){return R&&L===D?R:R=srt(art(f)(g(C(_(L=D)))))},B.preclip=function(D){return arguments.length?(g=D,h=void 0,k()):g},B.postclip=function(D){return arguments.length?(_=D,m=y=v=x=null,k()):_},B.clipAngle=function(D){return arguments.length?(g=+D?Hnt(h=D*ai):(h=null,_2e),k()):h*Is},B.clipExtent=function(D){return arguments.length?(_=D==null?(m=y=v=x=null,fE):LMe(m=+D[0][0],y=+D[0][1],v=+D[1][0],x=+D[1][1]),k()):m==null?null:[[m,y],[v,x]]},B.scale=function(D){return arguments.length?(n=+D,S()):n},B.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],S()):[r,i]},B.center=function(D){return arguments.length?(o=D[0]%360*ai,s=D[1]%360*ai,S()):[o*Is,s*Is]},B.rotate=function(D){return arguments.length?(a=D[0]%360*ai,l=D[1]%360*ai,u=D.length>2?D[2]%360*ai:0,S()):[a*Is,l*Is,u*Is]},B.angle=function(D){return arguments.length?(c=D%360*ai,S()):c*Is},B.reflectX=function(D){return arguments.length?(d=D?-1:1,S()):d<0},B.reflectY=function(D){return arguments.length?(p=D?-1:1,S()):p<0},B.precision=function(D){return arguments.length?(C=F2e(w,E=D*D),k()):ru(E)},B.fitExtent=function(D,O){return RR(B,D,O)},B.fitSize=function(D,O){return A9(B,D,O)},B.fitWidth=function(D,O){return C9(B,D,O)},B.fitHeight=function(D,O){return S9(B,D,O)};function S(){var D=$2e(n,0,0,d,p,c).apply(null,t(o,s)),O=$2e(n,r-D[0],i-D[1],d,p,c);return f=SMe(a,l,u),w=t6(t,O),T=t6(f,w),C=F2e(w,E),k()}function k(){return R=L=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&P,S()}}function k9(e){var t=0,n=di/3,r=HMe(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*ai,n=o[1]*ai):[t*Is,n*Is]},i}function urt(e){var t=ir(e);function n(r,i){return[r*t,Jn(i)/t]}return n.invert=function(r,i){return[r/t,Nu(i*t)]},n}function crt(e,t){var n=Jn(e),r=(n+Jn(t))/2;if(Di(r)<cr)return urt(e);var i=1+n*(2*r-n),o=ru(i)/r;function s(a,l){var u=ru(i-2*r*Jn(l))/r;return[u*Jn(a*=r),o-u*ir(a)]}return s.invert=function(a,l){var u=o-l,f=Zc(a,Di(u))*Pc(u);return u*r<0&&(f-=di*Pc(a)*Pc(u)),[f/r,Nu((i-(a*a+u*u)*r*r)/(2*r))]},s}function RT(){return k9(crt).scale(155.424).center([0,33.6442])}function qMe(){return RT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function frt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function drt(){var e,t,n=qMe(),r,i=RT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=RT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,p){l=[d,p]}};function f(d){var p=d[0],h=d[1];return l=null,r.point(p,h),l||(o.point(p,h),l)||(a.point(p,h),l)}f.invert=function(d){var p=n.scale(),h=n.translate(),g=(d[0]-h[0])/p,m=(d[1]-h[1])/p;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},f.stream=function(d){return e&&t===d?e:e=frt([n.stream(t=d),i.stream(d),s.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),c()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,g-.238*p],[h+.455*p,g+.238*p]]).stream(u),o=i.translate([h-.307*p,g+.201*p]).clipExtent([[h-.425*p+cr,g+.12*p+cr],[h-.214*p-cr,g+.234*p-cr]]).stream(u),a=s.translate([h-.205*p,g+.212*p]).clipExtent([[h-.214*p+cr,g+.166*p+cr],[h-.115*p-cr,g+.234*p-cr]]).stream(u),c()},f.fitExtent=function(d,p){return RR(f,d,p)},f.fitSize=function(d,p){return A9(f,d,p)},f.fitWidth=function(d,p){return C9(f,d,p)},f.fitHeight=function(d,p){return S9(f,d,p)};function c(){return e=t=null,f}return f.scale(1070)}function GMe(e){return function(t,n){var r=ir(t),i=ir(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Jn(t),o*Jn(n)]}}function MA(e){return function(t,n){var r=ru(t*t+n*n),i=e(r),o=Jn(i),s=ir(i);return[Zc(t*o,r*s),Nu(r&&n*o/r)]}}var WMe=GMe(function(e){return ru(2/(1+e))});WMe.invert=MA(function(e){return 2*Nu(e/2)});function hrt(){return uh(WMe).scale(124.75).clipAngle(180-.001)}var VMe=GMe(function(e){return(e=gMe(e))&&e/Jn(e)});VMe.invert=MA(function(e){return e});function prt(){return uh(VMe).scale(79.4188).clipAngle(180-.001)}function FR(e,t){return[e,dT(w9((Rs+t)/2))]}FR.invert=function(e,t){return[e,2*yx(pMe(t))-Rs]};function grt(){return YMe(FR).scale(961/nu)}function YMe(e){var t=uh(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(c){return arguments.length?(r(c),f()):r()},t.translate=function(c){return arguments.length?(i(c),f()):i()},t.center=function(c){return arguments.length?(n(c),f()):n()},t.clipExtent=function(c){return arguments.length?(c==null?s=a=l=u=null:(s=+c[0][0],a=+c[0][1],l=+c[1][0],u=+c[1][1]),f()):s==null?null:[[s,a],[l,u]]};function f(){var c=di*r(),d=t(Ont(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]]:e===FR?[[Math.max(d[0]-c,s),a],[Math.min(d[0]+c,l),u]]:[[s,Math.max(d[1]-c,a)],[l,Math.min(d[1]+c,u)]])}return f()}function kS(e){return w9((Rs+e)/2)}function mrt(e,t){var n=ir(e),r=e===t?Jn(e):dT(n/ir(t))/dT(kS(t)/kS(e)),i=n*sM(kS(e),r)/r;if(!r)return FR;function o(s,a){i>0?a<-Rs+cr&&(a=-Rs+cr):a>Rs-cr&&(a=Rs-cr);var l=i/sM(kS(a),r);return[l*Jn(r*s),i-l*ir(r*s)]}return o.invert=function(s,a){var l=i-a,u=Pc(r)*ru(s*s+l*l),f=Zc(s,Di(l))*Pc(l);return l*r<0&&(f-=di*Pc(s)*Pc(l)),[f/r,2*yx(sM(i/u,1/r))-Rs]},o}function vrt(){return k9(mrt).scale(109.5).parallels([30,30])}function FT(e,t){return[e,t]}FT.invert=FT;function yrt(){return uh(FT).scale(152.63)}function brt(e,t){var n=ir(e),r=e===t?Jn(e):(n-ir(t))/(t-e),i=n/r+e;if(Di(r)<cr)return FT;function o(s,a){var l=i-a,u=r*s;return[l*Jn(u),i-l*ir(u)]}return o.invert=function(s,a){var l=i-a,u=Zc(s,Di(l))*Pc(l);return l*r<0&&(u-=di*Pc(s)*Pc(l)),[u/r,i-Pc(r)*ru(s*s+l*l)]},o}function xrt(){return k9(brt).scale(131.154).center([0,13.9389])}var __=1.340264,E_=-.081106,A_=893e-6,C_=.003796,$T=ru(3)/2,wrt=12;function XMe(e,t){var n=Nu($T*Jn(t)),r=n*n,i=r*r*r;return[e*ir(n)/($T*(__+3*E_*r+i*(7*A_+9*C_*r))),n*(__+E_*r+i*(A_+C_*r))]}XMe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<wrt&&(a=n*(__+E_*r+i*(A_+C_*r))-t,l=__+3*E_*r+i*(7*A_+9*C_*r),n-=s=a/l,r=n*n,i=r*r*r,!(Di(s)<GI));++o);return[$T*e*(__+3*E_*r+i*(7*A_+9*C_*r))/ir(n),Nu(Jn(n)/$T)]};function _rt(){return uh(XMe).scale(177.158)}function KMe(e,t){var n=ir(t),r=ir(e)*n;return[n*Jn(e)/r,Jn(t)/r]}KMe.invert=MA(yx);function Ert(){return uh(KMe).scale(144.049).clipAngle(60)}function Art(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,f,c,d=1,p=1,h=LR({point:function(_,E){var C=x([_,E]);this.stream.point(C[0],C[1])}}),g=fE,m,y;function v(){return d=e*r,p=e*i,m=y=null,x}function x(_){var E=_[0]*d,C=_[1]*p;if(o){var w=C*s-E*a;E=E*s+C*a,C=w}return[E+t,C+n]}return x.invert=function(_){var E=_[0]-t,C=_[1]-n;if(o){var w=C*s+E*a;E=E*s-C*a,C=w}return[E/d,C/p]},x.stream=function(_){return m&&y===_?m:m=h(g(y=_))},x.postclip=function(_){return arguments.length?(g=_,l=u=f=c=null,v()):g},x.clipExtent=function(_){return arguments.length?(g=_==null?(l=u=f=c=null,fE):LMe(l=+_[0][0],u=+_[0][1],f=+_[1][0],c=+_[1][1]),v()):l==null?null:[[l,u],[f,c]]},x.scale=function(_){return arguments.length?(e=+_,v()):e},x.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},x.angle=function(_){return arguments.length?(o=_%360*ai,a=Jn(o),s=ir(o),v()):o*Is},x.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},x.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},x.fitExtent=function(_,E){return RR(x,_,E)},x.fitSize=function(_,E){return A9(x,_,E)},x.fitWidth=function(_,E){return C9(x,_,E)},x.fitHeight=function(_,E){return S9(x,_,E)},x}function ZMe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ZMe.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Di(i)>cr&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Crt(){return uh(ZMe).scale(175.295)}function QMe(e,t){return[ir(t)*Jn(e),Jn(t)]}QMe.invert=MA(Nu);function Srt(){return uh(QMe).scale(249.5).clipAngle(90+cr)}function JMe(e,t){var n=ir(t),r=1+ir(e)*n;return[n*Jn(e)/r,Jn(t)/r]}JMe.invert=MA(function(e){return 2*yx(e)});function krt(){return uh(JMe).scale(250).clipAngle(142)}function e5e(e,t){return[dT(w9((Rs+t)/2)),-e]}e5e.invert=function(e,t){return[-t,2*yx(pMe(e))-Rs]};function Trt(){var e=YMe(e5e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Drt=Math.abs,d6=Math.cos,MT=Math.sin,Lrt=1e-6,t5e=Math.PI,h6=t5e/2,M2e=Rrt(2);function O2e(e){return e>1?h6:e<-1?-h6:Math.asin(e)}function Rrt(e){return e>0?Math.sqrt(e):0}function Frt(e,t){var n=e*MT(t),r=30,i;do t-=i=(t+MT(t)-n)/(1+d6(t));while(Drt(i)>Lrt&&--r>0);return t/2}function $rt(e,t,n){function r(i,o){return[e*i*d6(o=Frt(n,o)),t*MT(o)]}return r.invert=function(i,o){return o=O2e(o/t),[i/(e*d6(o)),O2e((2*o+MT(2*o))/n)]},r}var Mrt=$rt(M2e/h6,M2e,t5e);function Ort(){return uh(Mrt).scale(169.529)}const Irt=jMe(),p6=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Nrt(e,t){return function n(){const r=t();return r.type=e,r.path=jMe().projection(r),r.copy=r.copy||function(){const i=n();return p6.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},mFe(r)}}function T9(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(OT[e]=Nrt(e,t),this):OT[e]||null}function n5e(e){return e&&e.path||Irt}const OT={albers:qMe,albersusa:drt,azimuthalequalarea:hrt,azimuthalequidistant:prt,conicconformal:vrt,conicequalarea:RT,conicequidistant:xrt,equalEarth:_rt,equirectangular:yrt,gnomonic:Ert,identity:Art,mercator:grt,mollweide:Ort,naturalEarth1:Crt,orthographic:Srt,stereographic:krt,transversemercator:Trt};for(const e in OT)T9(e,OT[e]);function Prt(){}const Hh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function r5e(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],c=[];return o(l,u,d=>{n(d,l,u),Brt(d)>0?f.push([d]):c.push(d)}),c.forEach(d=>{for(var p=0,h=f.length,g;p<h;++p)if(zrt((g=f[p])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(l,u,f){var c=[],d=[],p,h,g,m,y,v;for(p=h=-1,m=l[0]>=u,Hh[m<<1].forEach(x);++p<e-1;)g=m,m=l[p+1]>=u,Hh[g|m<<1].forEach(x);for(Hh[m<<0].forEach(x);++h<t-1;){for(p=-1,m=l[h*e+e]>=u,y=l[h*e]>=u,Hh[m<<1|y<<2].forEach(x);++p<e-1;)g=m,m=l[h*e+e+p+1]>=u,v=y,y=l[h*e+p+1]>=u,Hh[g|m<<1|y<<2|v<<3].forEach(x);Hh[m|y<<3].forEach(x)}for(p=-1,y=l[h*e]>=u,Hh[y<<2].forEach(x);++p<e-1;)v=y,y=l[h*e+p+1]>=u,Hh[y<<2|v<<3].forEach(x);Hh[y<<3].forEach(x);function x(_){var E=[_[0][0]+p,_[0][1]+h],C=[_[1][0]+p,_[1][1]+h],w=s(E),T=s(C),R,L;(R=d[w])?(L=c[T])?(delete d[R.end],delete c[L.start],R===L?(R.ring.push(C),f(R.ring)):c[R.start]=d[L.end]={start:R.start,end:L.end,ring:R.ring.concat(L.ring)}):(delete d[R.end],R.ring.push(C),d[R.end=T]=R):(R=c[T])?(L=d[w])?(delete c[R.start],delete d[L.end],R===L?(R.ring.push(C),f(R.ring)):c[L.start]=d[R.end]={start:L.start,end:R.end,ring:L.ring.concat(R.ring)}):(delete c[R.start],R.ring.unshift(E),c[R.start=w]=R):c[w]=d[T]={start:w,end:T,ring:[E,C]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(c=>{var d=c[0],p=c[1],h=d|0,g=p|0,m,y=u[g*e+h];d>0&&d<e&&h===d&&(m=u[g*e+h-1],c[0]=d+(f-m)/(y-m)-.5),p>0&&p<t&&g===p&&(m=u[(g-1)*e+h],c[1]=p+(f-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||_t("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:Prt,r):n===a},r}function Brt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function zrt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Urt(e,t[n]))return i;return 0}function Urt(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],f=l[1],c=e[a],d=c[0],p=c[1];if(jrt(l,c,t))return 0;f>r!=p>r&&n<(d-u)*(r-f)/(p-f)+u&&(i=-i)}return i}function jrt(e,t,n){var r;return Hrt(e,t,n)&&qrt(e[r=+(e[0]===t[0])],n[r],t[r])}function Hrt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function qrt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function i5e(e,t,n){return function(r){var i=Zd(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?Av(o,s,e):a/(e+1);return nc(o+l,s,l)}}function D9(e){wt.call(this,null,e)}D9.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};tn(D9,wt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||$l,o=r5e().smooth(e.smooth!==!1),s=e.thresholds||Grt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),c=o.size([f.width,f.height])(f.values,Dt(s)?s:s(f.values));Wrt(c,f,u,e),c.forEach(d=>{l.push(tR(u,lo(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Grt(e,t,n){const r=i5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>dv(t(i).values)))}function Wrt(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Br(i)&&(i=i(n,r)),Br(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(eo(i)?i:i[0])||1,a=(eo(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(o5e(t,s,a,l,u))}function o5e(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(c){c.forEach(u)}function u(c){a&&c.reverse(),c.forEach(f)}function f(c){c[0]=(c[0]-o)*t+r,c[1]=(c[1]-s)*n+i}return function(c){return c.coordinates.forEach(l),c}}function I2e(e,t,n){const r=e>=0?e:OP(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function fM(e){return Br(e)?e:Ml(+e)}function s5e(){var e=l=>l[0],t=l=>l[1],n=ux,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const f=I2e(r[0],l,e)>>s,c=I2e(r[1],l,t)>>s,d=f?f+2:0,p=c?c+2:0,h=2*d+(i>>s),g=2*p+(o>>s),m=new Float32Array(h*g),y=new Float32Array(h*g);let v=m;l.forEach(_=>{const E=d+(+e(_)>>s),C=p+(+t(_)>>s);E>=0&&E<h&&C>=0&&C<g&&(m[E+C*h]+=+n(_))}),f>0&&c>0?(Qy(h,g,m,y,f),Jy(h,g,y,m,c),Qy(h,g,m,y,f),Jy(h,g,y,m,c),Qy(h,g,m,y,f),Jy(h,g,y,m,c)):f>0?(Qy(h,g,m,y,f),Qy(h,g,y,m,f),Qy(h,g,m,y,f),v=y):c>0&&(Jy(h,g,m,y,c),Jy(h,g,y,m,c),Jy(h,g,m,y,c),v=y);const x=u?Math.pow(2,-2*s):1/RDe(v);for(let _=0,E=h*g;_<E;++_)v[_]*=x;return{values:v,scale:1<<s,width:h,height:g,x1:d,y1:p,x2:d+(i>>s),y2:p+(o>>s)}}return a.x=function(l){return arguments.length?(e=fM(l),a):e},a.y=function(l){return arguments.length?(t=fM(l),a):t},a.weight=function(l){return arguments.length?(n=fM(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],f=+l[1];return u>=0&&f>=0||_t("invalid size"),i=u,o=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||_t("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=vn(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&_t("invalid bandwidth"),r=l,a):r},a}function Qy(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function Jy(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function L9(e){wt.call(this,null,e)}L9.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Vrt=["x","y","weight","size","cellSize","bandwidth"];function a5e(e,t){return Vrt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}tn(L9,wt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Yrt(r,e.groupby),o=(e.groupby||[]).map(Fs),s=a5e(s5e(),e),a=e.as||"grid",l=[];function u(f,c){for(let d=0;d<o.length;++d)f[o[d]]=c[d];return f}return l=i.map(f=>lo(u({[a]:s(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Yrt(e,t){var n=[],r=f=>f(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function R9(e){wt.call(this,null,e)}R9.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};tn(R9,wt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=r5e().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||i5e(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=a5e(s5e(),e)(i,!0),l=o5e(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=Dt(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(lo),n}});const g6="Feature",F9="FeatureCollection",Xrt="MultiPoint";function $9(e){wt.call(this,null,e)}$9.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};tn($9,wt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&$l,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Al(a))||o&&t.modified(Al(o))||s&&t.modified(Al(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),o&&s&&(t.visit(l,f=>{var c=o(f),d=s(f);c!=null&&d!=null&&(c=+c)===c&&(d=+d)===d&&r.push([c,d])}),n=n.concat({type:g6,geometry:{type:Xrt,coordinates:r}})),this.value={type:F9,features:n}}});function M9(e){wt.call(this,null,e)}M9.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};tn(M9,wt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||$l,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=n5e(e.projection),n.materialize().reflow()):s=i===$l||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Krt(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function Krt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function O9(e){wt.call(this,null,e)}O9.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};tn(O9,wt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(f){const c=n([r(f),i(f)]);c?(f[s]=c[0],f[a]=c[1]):(f[s]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function I9(e){wt.call(this,null,e)}I9.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};tn(I9,wt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Zrt(n5e(e.projection),e.field||Vc("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Zrt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function N9(e){wt.call(this,[],e),this.generator=Gnt()}N9.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};tn(N9,wt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Br(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(nRe(n[0],i)):t.add.push(lo(i)),n[0]=i,t}});function P9(e){wt.call(this,null,e)}P9.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};tn(P9,wt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||$l,o=Jrt(e.opacity,e),s=Qrt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?dv(n.map(u=>dv(i(u).values))):0};return n.forEach(u=>{const f=i(u),c=Kr({},u,l);r||(c.$max=dv(f.values||[])),u[a]=eit(f,c,s.dep?s:Ml(s(c)),o.dep?o:Ml(o(c)))}),t.reflow(!0).modifies(a)}});function Qrt(e,t){let n;return Br(e)?(n=r=>T3(e(r,t)),n.dep=l5e(e)):n=Ml(T3(e||"#888")),n}function Jrt(e,t){let n;return Br(e)?(n=r=>e(r,t),n.dep=l5e(e)):e?n=Ml(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function l5e(e){if(!Br(e))return!1;const t=hc(Al(e));return t.$x||t.$y||t.$value||t.$max}function eit(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,f=e.values,c=f?m=>f[m]:Pg,d=sm(l-s,u-a),p=d.getContext("2d"),h=p.getImageData(0,0,l-s,u-a),g=h.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,x=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=c(v+x);const _=n(t);g[y+0]=_.r,g[y+1]=_.g,g[y+2]=_.b,g[y+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}function u5e(e){wt.call(this,null,e),this.modified(!0)}tn(u5e,wt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=nit(e.type),p6.forEach(r=>{e[r]!=null&&N2e(n,r,e[r])})):p6.forEach(r=>{e.modified(r)&&N2e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&tit(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function tit(e,t){const n=rit(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function nit(e){const t=T9((e||"mercator").toLowerCase());return t||_t("Unrecognized projection type: "+e),t()}function N2e(e,t,n){Br(e[t])&&e[t](n)}function rit(e){return e=vn(e),e.length===1?e[0]:{type:F9,features:e.reduce((t,n)=>t.concat(iit(n)),[])}}function iit(e){return e.type===F9?e.features:vn(e).filter(t=>t!=null).map(t=>t.type===g6?t:{type:g6,geometry:t})}const oit=Object.freeze(Object.defineProperty({__proto__:null,contour:R9,geojson:$9,geopath:M9,geopoint:O9,geoshape:I9,graticule:N9,heatmap:P9,isocontour:D9,kde2d:L9,projection:u5e},Symbol.toStringTag,{value:"Module"}));function sit(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function ait(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return c5e(this.cover(t,n),t,n,e)}function c5e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,c,d,p,h,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(c=(a+u)/2))?a=c:u=c,(m=n>=(d=(l+f)/2))?l=d:f=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(p=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===p&&n===h)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(c=(a+u)/2))?a=c:u=c,(m=n>=(d=(l+f)/2))?l=d:f=d;while((y=m<<1|g)===(v=(h>=d)<<1|p>=c));return i[v]=o,i[y]=s,e}function lit(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>c&&(c=o));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),n=0;n<r;++n)c5e(this,s[n],a[n],e[n]);return this}function uit(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function cit(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function fit(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function dit(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,f=this._x1,c=this._y1,d=[],p=this._root,h,g;for(p&&d.push(new Yl(p,i,o,f,c)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,c=t+n,n*=n);h=d.pop();)if(!(!(p=h.node)||(s=h.x0)>f||(a=h.y0)>c||(l=h.x1)<i||(u=h.y1)<o))if(p.length){var m=(s+l)/2,y=(a+u)/2;d.push(new Yl(p[3],m,y,l,u),new Yl(p[2],s,y,m,u),new Yl(p[1],m,a,l,y),new Yl(p[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=h)}else{var v=e-+this._x.call(null,p.data),x=t-+this._y.call(null,p.data),_=v*v+x*x;if(_<n){var E=Math.sqrt(n=_);i=e-E,o=t-E,f=e+E,c=t+E,r=p.data}}return r}function hit(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,f,c,d,p,h,g,m,y;if(!n)return this;if(n.length)for(;;){if((h=f>=(d=(s+l)/2))?s=d:l=d,(g=c>=(p=(a+u)/2))?a=p:u=p,t=n,!(n=n[m=g<<1|h]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function pit(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function git(){return this._root}function mit(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function vit(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Yl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,f=(s+l)/2;(i=r[3])&&t.push(new Yl(i,u,f,a,l)),(i=r[2])&&t.push(new Yl(i,o,f,u,l)),(i=r[1])&&t.push(new Yl(i,u,s,a,f)),(i=r[0])&&t.push(new Yl(i,o,s,u,f))}return this}function yit(e){var t=[],n=[],r;for(this._root&&t.push(new Yl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(s+l)/2,c=(a+u)/2;(o=i[0])&&t.push(new Yl(o,s,a,f,c)),(o=i[1])&&t.push(new Yl(o,f,a,l,c)),(o=i[2])&&t.push(new Yl(o,s,c,f,u)),(o=i[3])&&t.push(new Yl(o,f,c,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function bit(e){return e[0]}function xit(e){return arguments.length?(this._x=e,this):this._x}function wit(e){return e[1]}function _it(e){return arguments.length?(this._y=e,this):this._y}function B9(e,t,n){var r=new z9(t??bit,n??wit,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function z9(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function P2e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ou=B9.prototype=z9.prototype;ou.copy=function(){var e=new z9(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=P2e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=P2e(r));return e};ou.add=ait;ou.addAll=lit;ou.cover=uit;ou.data=cit;ou.extent=fit;ou.find=dit;ou.remove=hit;ou.removeAll=pit;ou.root=git;ou.size=mit;ou.visit=vit;ou.visitAfter=yit;ou.x=xit;ou.y=_it;function Ql(e){return function(){return e}}function Kg(e){return(e()-.5)*1e-6}function Eit(e){return e.x+e.vx}function Ait(e){return e.y+e.vy}function Cit(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Ql(e==null?1:+e));function s(){for(var u,f=t.length,c,d,p,h,g,m,y=0;y<o;++y)for(c=B9(t,Eit,Ait).visitAfter(a),u=0;u<f;++u)d=t[u],g=n[d.index],m=g*g,p=d.x+d.vx,h=d.y+d.vy,c.visit(v);function v(x,_,E,C,w){var T=x.data,R=x.r,L=g+R;if(T){if(T.index>d.index){var B=p-T.x-T.vx,P=h-T.y-T.vy,S=B*B+P*P;S<L*L&&(B===0&&(B=Kg(r),S+=B*B),P===0&&(P=Kg(r),S+=P*P),S=(L-(S=Math.sqrt(S)))/S*i,d.vx+=(B*=S)*(L=(R*=R)/(m+R)),d.vy+=(P*=S)*L,T.vx-=B*(L=1-L),T.vy-=P*L)}return}return _>p+L||C<p-L||E>h+L||w<h-L}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,c;for(n=new Array(f),u=0;u<f;++u)c=t[u],n[c.index]=+e(c,u,t)}}return s.initialize=function(u,f){t=u,r=f,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ql(+u),l(),s):e},s}function Sit(e){return e.index}function B2e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function kit(e){var t=Sit,n=c,r,i=Ql(30),o,s,a,l,u,f=1;e==null&&(e=[]);function c(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<f;++y)for(var x=0,_,E,C,w,T,R,L;x<v;++x)_=e[x],E=_.source,C=_.target,w=C.x+C.vx-E.x-E.vx||Kg(u),T=C.y+C.vy-E.y-E.vy||Kg(u),R=Math.sqrt(w*w+T*T),R=(R-o[x])/R*m*r[x],w*=R,T*=R,C.vx-=w*(L=l[x]),C.vy-=T*L,E.vx+=w*(L=1-L),E.vy+=T*L}function p(){if(s){var m,y=s.length,v=e.length,x=new Map(s.map((E,C)=>[t(E,C,s),E])),_;for(m=0,a=new Array(y);m<v;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=B2e(x,_.source)),typeof _.target!="object"&&(_.target=B2e(x,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)_=e[m],l[m]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),h(),o=new Array(v),g()}}function h(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,p()},d.links=function(m){return arguments.length?(e=m,p(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(f=+m,d):f},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ql(+m),h(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ql(+m),g(),d):i},d}var Tit={value:()=>{}};function f5e(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vk(n)}function Vk(e){this._=e}function Dit(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vk.prototype=f5e.prototype={constructor:Vk,on:function(e,t){var n=this._,r=Dit(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Lit(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=z2e(n[i],e.name,t);else if(t==null)for(i in n)n[i]=z2e(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vk(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Lit(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function z2e(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tit,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var S1=0,Z2=0,v2=0,d5e=1e3,IT,Q2,NT=0,Lv=0,$R=0,pE=typeof performance=="object"&&performance.now?performance:Date,h5e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function U9(){return Lv||(h5e(Rit),Lv=pE.now()+$R)}function Rit(){Lv=0}function PT(){this._call=this._time=this._next=null}PT.prototype=p5e.prototype={constructor:PT,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?U9():+n)+(t==null?0:+t),!this._next&&Q2!==this&&(Q2?Q2._next=this:IT=this,Q2=this),this._call=e,this._time=n,m6()},stop:function(){this._call&&(this._call=null,this._time=1/0,m6())}};function p5e(e,t,n){var r=new PT;return r.restart(e,t,n),r}function Fit(){U9(),++S1;for(var e=IT,t;e;)(t=Lv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--S1}function U2e(){Lv=(NT=pE.now())+$R,S1=Z2=0;try{Fit()}finally{S1=0,Mit(),Lv=0}}function $it(){var e=pE.now(),t=e-NT;t>d5e&&($R-=t,NT=e)}function Mit(){for(var e,t=IT,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:IT=n);Q2=e,m6(r)}function m6(e){if(!S1){Z2&&(Z2=clearTimeout(Z2));var t=e-Lv;t>24?(e<1/0&&(Z2=setTimeout(U2e,e-pE.now()-$R)),v2&&(v2=clearInterval(v2))):(v2||(NT=pE.now(),v2=setInterval($it,d5e)),S1=1,h5e(U2e))}}function Oit(e,t,n){var r=new PT,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?U9():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const Iit=1664525,Nit=1013904223,j2e=4294967296;function Pit(){let e=1;return()=>(e=(Iit*e+Nit)%j2e)/j2e}function Bit(e){return e.x}function zit(e){return e.y}var Uit=10,jit=Math.PI*(3-Math.sqrt(5));function Hit(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=p5e(c),u=f5e("tick","end"),f=Pit();e==null&&(e=[]);function c(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var x=0;x<g;++x)for(n+=(o-n)*i,a.forEach(function(_){_(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function p(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Uit*Math.sqrt(.5+g),x=g*jit;y.x=v*Math.cos(x),y.y=v*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function h(g){return g.initialize&&g.initialize(e,f),g}return p(),t={tick:d,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,p(),a.forEach(h),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(f=g,a.forEach(h),t):f},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,h(m)),t):a.get(g)},find:function(g,m,y){var v=0,x=e.length,_,E,C,w,T;for(y==null?y=1/0:y*=y,v=0;v<x;++v)w=e[v],_=g-w.x,E=m-w.y,C=_*_+E*E,C<y&&(T=w,y=C);return T},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function qit(){var e,t,n,r,i=Ql(-30),o,s=1,a=1/0,l=.81;function u(p){var h,g=e.length,m=B9(e,Bit,zit).visitAfter(c);for(r=p,h=0;h<g;++h)t=e[h],m.visit(d)}function f(){if(e){var p,h=e.length,g;for(o=new Array(h),p=0;p<h;++p)g=e[p],o[g.index]=+i(g,p,e)}}function c(p){var h=0,g,m,y=0,v,x,_;if(p.length){for(v=x=_=0;_<4;++_)(g=p[_])&&(m=Math.abs(g.value))&&(h+=g.value,y+=m,v+=m*g.x,x+=m*g.y);p.x=v/y,p.y=x/y}else{g=p,g.x=g.data.x,g.y=g.data.y;do h+=o[g.data.index];while(g=g.next)}p.value=h}function d(p,h,g,m){if(!p.value)return!0;var y=p.x-t.x,v=p.y-t.y,x=m-h,_=y*y+v*v;if(x*x/l<_)return _<a&&(y===0&&(y=Kg(n),_+=y*y),v===0&&(v=Kg(n),_+=v*v),_<s&&(_=Math.sqrt(s*_)),t.vx+=y*p.value*r/_,t.vy+=v*p.value*r/_),!0;if(p.length||_>=a)return;(p.data!==t||p.next)&&(y===0&&(y=Kg(n),_+=y*y),v===0&&(v=Kg(n),_+=v*v),_<s&&(_=Math.sqrt(s*_)));do p.data!==t&&(x=o[p.data.index]*r/_,t.vx+=y*x,t.vy+=v*x);while(p=p.next)}return u.initialize=function(p,h){e=p,n=h,f()},u.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Ql(+p),f(),u):i},u.distanceMin=function(p){return arguments.length?(s=p*p,u):Math.sqrt(s)},u.distanceMax=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.theta=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u}function Git(e){var t=Ql(.1),n,r,i;typeof e!="function"&&(e=Ql(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ql(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ql(+a),s(),o):e},o}function Wit(e){var t=Ql(.1),n,r,i;typeof e!="function"&&(e=Ql(e==null?0:+e));function o(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ql(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ql(+a),s(),o):e},o}const H2e={center:sit,collide:Cit,nbody:qit,link:kit,x:Git,y:Wit},J2="forces",v6=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Vit=["static","iterations"],g5e=["x","y","vx","vy"];function j9(e){wt.call(this,null,e)}j9.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:g5e}]};tn(j9,wt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(v6),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&m5e(n,e,0,t)):(this.value=n=Xit(t.source,e),n.on("tick",Yit(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Vit)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==J2||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(g5e)}});function Yit(e,t){return()=>e.touch(t).run()}function Xit(e,t){const n=Hit(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),m5e(n,t,!0).on("end",()=>o=!0)}function m5e(e,t,n,r){var i=vn(t.forces),o,s,a,l;for(o=0,s=v6.length;o<s;++o)a=v6[o],a!==J2&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=J2+o,a=n||t.modified(J2,o)?Zit(i[o]):r&&Kit(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(J2+o,null);return e.numForces=i.length,e}function Kit(e,t){var n,r;for(n in e)if(Br(r=e[n])&&t.modified(Al(r)))return 1;return 0}function Zit(e){var t,n;yn(H2e,e.force)||_t("Unrecognized force: "+e.force),t=H2e[e.force]();for(n in e)Br(t[n])&&Qit(t[n],e[n],e);return t}function Qit(e,t,n){e(Br(t)?r=>t(r,n):t)}const Jit=Object.freeze(Object.defineProperty({__proto__:null,force:j9},Symbol.toStringTag,{value:"Module"}));function eot(e,t){return e.parent===t.parent?1:2}function tot(e){return e.reduce(not,0)/e.length}function not(e,t){return e+t.x}function rot(e){return 1+e.reduce(iot,0)}function iot(e,t){return Math.max(e,t.y)}function oot(e){for(var t;t=e.children;)e=t[0];return e}function sot(e){for(var t;t=e.children;)e=t[t.length-1];return e}function aot(){var e=eot,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var p=d.children;p?(d.x=tot(p),d.y=rot(p)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=oot(o),u=sot(o),f=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-f)/(c-f)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function lot(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function uot(){return this.eachAfter(lot)}function cot(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function fot(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function dot(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function hot(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function pot(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function got(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function mot(e){for(var t=this,n=vot(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function vot(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function yot(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function bot(){return Array.from(this)}function xot(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function wot(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*_ot(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function H9(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Cot)):t===void 0&&(t=Aot);for(var n=new k1(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new k1(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(v5e)}function Eot(){return H9(this).eachBefore(Sot)}function Aot(e){return e.children}function Cot(e){return Array.isArray(e)?e[1]:null}function Sot(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function v5e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function k1(e){this.data=e,this.depth=this.height=0,this.parent=null}k1.prototype=H9.prototype={constructor:k1,count:uot,each:cot,eachAfter:dot,eachBefore:fot,find:hot,sum:pot,sort:got,path:mot,ancestors:yot,descendants:bot,leaves:xot,links:wot,copy:Eot,[Symbol.iterator]:_ot};function Yk(e){return e==null?null:y5e(e)}function y5e(e){if(typeof e!="function")throw new Error;return e}function ov(){return 0}function vb(e){return function(){return e}}const kot=1664525,Tot=1013904223,q2e=4294967296;function Dot(){let e=1;return()=>(e=(kot*e+Tot)%q2e)/q2e}function Lot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rot(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Fot(e,t){for(var n=0,r=(e=Rot(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&b5e(s,o)?++n:(s=Mot(i=$ot(i,o)),n=0);return s}function $ot(e,t){var n,r;if(dM(t,e))return[t];for(n=0;n<e.length;++n)if(TS(t,e[n])&&dM(e_(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(TS(e_(e[n],e[r]),t)&&TS(e_(e[n],t),e[r])&&TS(e_(e[r],t),e[n])&&dM(x5e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function TS(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function b5e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function dM(e,t){for(var n=0;n<t.length;++n)if(!b5e(e,t[n]))return!1;return!0}function Mot(e){switch(e.length){case 1:return Oot(e[0]);case 2:return e_(e[0],e[1]);case 3:return x5e(e[0],e[1],e[2])}}function Oot(e){return{x:e.x,y:e.y,r:e.r}}function e_(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,f=a-i,c=Math.sqrt(l*l+u*u);return{x:(n+o+l/c*f)/2,y:(r+s+u/c*f)/2,r:(c+i+a)/2}}function x5e(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,f=n.y,c=n.r,d=r-s,p=r-u,h=i-a,g=i-f,m=l-o,y=c-o,v=r*r+i*i-o*o,x=v-s*s-a*a+l*l,_=v-u*u-f*f+c*c,E=p*h-d*g,C=(h*_-g*x)/(E*2)-r,w=(g*m-h*y)/E,T=(p*x-d*_)/(E*2)-i,R=(d*y-p*m)/E,L=w*w+R*R-1,B=2*(o+C*w+T*R),P=C*C+T*T-o*o,S=-(Math.abs(L)>1e-6?(B+Math.sqrt(B*B-4*L*P))/(2*L):P/B);return{x:r+C+w*S,y:i+T+R*S,r:S}}function G2e(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function W2e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function V2e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function DS(e){this._=e,this.next=null,this.previous=null}function Iot(e,t){if(!(o=(e=Lot(e)).length))return 0;var n,r,i,o,s,a,l,u,f,c,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;G2e(r,n,i=e[2]),n=new DS(n),r=new DS(r),i=new DS(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){G2e(n._,r._,i=e[l]),i=new DS(i),u=r.next,f=n.previous,c=r._.r,d=n._.r;do if(c<=d){if(W2e(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(W2e(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}d+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=V2e(n);(i=i.next)!==r;)(a=V2e(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Fot(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function Not(e){return Math.sqrt(e.value)}function Pot(){var e=null,t=1,n=1,r=ov;function i(o){const s=Dot();return o.x=t/2,o.y=n/2,e?o.eachBefore(Y2e(e)).eachAfter(hM(r,.5,s)).eachBefore(X2e(1)):o.eachBefore(Y2e(Not)).eachAfter(hM(ov,1,s)).eachAfter(hM(r,o.r/Math.min(t,n),s)).eachBefore(X2e(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Yk(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:vb(+o),i):r},i}function Y2e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function hM(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=Iot(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function X2e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function w5e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function OA(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function Bot(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(w5e),s}function o(s,a){return function(l){l.children&&OA(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,f=l.y0,c=l.x1-n,d=l.y1-n;c<u&&(u=c=(u+c)/2),d<f&&(f=d=(f+d)/2),l.x0=u,l.y0=f,l.x1=c,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var zot={depth:-1},K2e={},pM={};function Uot(e){return e.id}function jot(e){return e.parentId}function Z2e(){var e=Uot,t=jot,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,f,c,d,p,h,g,m=new Map;if(n!=null){const y=o.map((_,E)=>Hot(n(_,E,i))),v=y.map(Q2e),x=new Set(y).add("");for(const _ of v)x.has(_)||(x.add(_),y.push(_),v.push(Q2e(_)),o.push(pM));s=(_,E)=>y[E],a=(_,E)=>v[E]}for(f=0,l=o.length;f<l;++f)u=o[f],p=o[f]=new k1(u),(h=s(u,f,i))!=null&&(h+="")&&(g=p.id=h,m.set(g,m.has(g)?K2e:p)),(h=a(u,f,i))!=null&&(h+="")&&(p.parent=h);for(f=0;f<l;++f)if(p=o[f],h=p.parent){if(d=m.get(h),!d)throw new Error("missing: "+h);if(d===K2e)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(c)throw new Error("multiple roots");c=p}if(!c)throw new Error("no root");if(n!=null){for(;c.data===pM&&c.children.length===1;)c=c.children[0],--l;for(let y=o.length-1;y>=0&&(p=o[y],p.data===pM);--y)p.data=null}if(c.parent=zot,c.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(v5e),c.parent=null,l>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=Yk(i),r):e},r.parentId=function(i){return arguments.length?(t=Yk(i),r):t},r.path=function(i){return arguments.length?(n=Yk(i),r):n},r}function Hot(e){e=`${e}`;let t=e.length;return y6(e,t-1)&&!y6(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Q2e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!y6(e,t););return e.slice(0,t)}function y6(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function qot(e,t){return e.parent===t.parent?1:2}function gM(e){var t=e.children;return t?t[0]:e.t}function mM(e){var t=e.children;return t?t[t.length-1]:e.t}function Got(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Wot(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Vot(e,t,n){return e.a.parent===t.parent?e.a:n}function Xk(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Xk.prototype=Object.create(k1.prototype);function Yot(e){for(var t=new Xk(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Xk(o[s],s)),i.parent=n;return(t.parent=new Xk(null,0)).children=[t],t}function Xot(){var e=qot,t=1,n=1,r=null;function i(u){var f=Yot(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(s),r)u.eachBefore(l);else{var c=u,d=u,p=u;u.eachBefore(function(v){v.x<c.x&&(c=v),v.x>d.x&&(d=v),v.depth>p.depth&&(p=v)});var h=c===d?1:e(c,d)/2,g=h-c.x,m=t/(d.x+h+g),y=n/(p.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function o(u){var f=u.children,c=u.parent.children,d=u.i?c[u.i-1]:null;if(f){Wot(u);var p=(f[0].z+f[f.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-p):u.z=p}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||c[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,c){if(f){for(var d=u,p=u,h=f,g=d.parent.children[0],m=d.m,y=p.m,v=h.m,x=g.m,_;h=mM(h),d=gM(d),h&&d;)g=gM(g),p=mM(p),p.a=u,_=h.z+v-d.z-m+e(h._,d._),_>0&&(Got(Vot(h,u,c),u,_),m+=_,y+=_),v+=h.m,m+=d.m,x+=g.m,y+=p.m;h&&!mM(p)&&(p.t=h,p.m+=v-y),d&&!gM(g)&&(g.t=d,g.m+=m-x,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function MR(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var _5e=(1+Math.sqrt(5))/2;function E5e(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,f=0,c=0,d=a.length,p,h,g=t.value,m,y,v,x,_,E,C;f<d;){p=i-n,h=o-r;do m=a[c++].value;while(!m&&c<d);for(y=v=m,E=Math.max(h/p,p/h)/(g*e),C=m*m*E,_=Math.max(v/C,C/y);c<d;++c){if(m+=u=a[c].value,u<y&&(y=u),u>v&&(v=u),C=m*m*E,x=Math.max(v/C,C/y),x>_){m-=u;break}_=x}s.push(l={value:m,dice:p<h,children:a.slice(f,c)}),l.dice?OA(l,n,r,i,g?r+=h*m/g:o):MR(l,n,r,g?n+=p*m/g:i,o),g-=m,f=c}return s}const A5e=function e(t){function n(r,i,o,s,a){E5e(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(_5e);function Kot(){var e=A5e,t=!1,n=1,r=1,i=[0],o=ov,s=ov,a=ov,l=ov,u=ov;function f(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(w5e),d}function c(d){var p=i[d.depth],h=d.x0+p,g=d.y0+p,m=d.x1-p,y=d.y1-p;m<h&&(h=m=(h+m)/2),y<g&&(g=y=(g+y)/2),d.x0=h,d.y0=g,d.x1=m,d.y1=y,d.children&&(p=i[d.depth+1]=o(d)/2,h+=u(d)-p,g+=s(d)-p,m-=a(d)-p,y-=l(d)-p,m<h&&(h=m=(h+m)/2),y<g&&(g=y=(g+y)/2),e(d,h,g,m,y))}return f.round=function(d){return arguments.length?(t=!!d,f):t},f.size=function(d){return arguments.length?(n=+d[0],r=+d[1],f):[n,r]},f.tile=function(d){return arguments.length?(e=y5e(d),f):e},f.padding=function(d){return arguments.length?f.paddingInner(d).paddingOuter(d):f.paddingInner()},f.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:vb(+d),f):o},f.paddingOuter=function(d){return arguments.length?f.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):f.paddingTop()},f.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:vb(+d),f):s},f.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:vb(+d),f):a},f.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:vb(+d),f):l},f.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:vb(+d),f):u},f}function Zot(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;f(0,a,e.value,t,n,r,i);function f(c,d,p,h,g,m,y){if(c>=d-1){var v=o[c];v.x0=h,v.y0=g,v.x1=m,v.y1=y;return}for(var x=u[c],_=p/2+x,E=c+1,C=d-1;E<C;){var w=E+C>>>1;u[w]<_?E=w+1:C=w}_-u[E-1]<u[E]-_&&c+1<E&&--E;var T=u[E]-x,R=p-T;if(m-h>y-g){var L=p?(h*R+m*T)/p:m;f(c,E,T,h,g,L,y),f(E,d,R,L,g,m,y)}else{var B=p?(g*R+y*T)/p:y;f(c,E,T,h,g,m,B),f(E,d,R,h,B,m,y)}}}function Qot(e,t,n,r,i){(e.depth&1?MR:OA)(e,t,n,r,i)}const Jot=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,c,d=-1,p,h=l.length,g=r.value;++d<h;){for(u=l[d],f=u.children,c=u.value=0,p=f.length;c<p;++c)u.value+=f[c].value;u.dice?OA(u,i,o,s,g?o+=(a-o)*u.value/g:a):MR(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=E5e(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(_5e);function b6(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function q9(e){wt.call(this,null,e)}q9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const est=e=>e.values;tn(q9,wt,{transform(e,t){t.source||_t("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&eR(s.data)&&i.rem.push(s.data)}),this.value=o=H9({values:vn(e.keys).reduce((s,a)=>(s.key(a),s),tst()).entries(i.source)},est),n&&o.each(s=>{s.children&&(s=lo(s.data),i.add.push(s),i.source.push(s))}),b6(o,Zn,Zn)),i.source.root=o,i}});function tst(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let f=-1,c,d,p;for(;++f<s;)c=a(d=i[f])+"",(p=l[c])?p.push(d):l[c]=[d];for(c in l)u[c]=n(l[c],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function zp(e){wt.call(this,null,e)}const nst=(e,t)=>e.parent===t.parent?1:2;tn(zp,wt,{transform(e,t){(!t.source||!t.source.root)&&_t(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(ry(e.sort,s=>s.data)),rst(n,this.params,e),n.separation&&n.separation(e.separation!==!1?nst:ux);try{this.value=n(i)}catch(s){_t(s)}return i.each(s=>ist(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function rst(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function ist(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const x6=["x","y","r","depth","children"];function G9(e){zp.call(this,e)}G9.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:x6.length,default:x6}]};tn(G9,zp,{layout:Pot,params:["radius","size","padding"],fields:x6});const w6=["x0","y0","x1","y1","depth","children"];function W9(e){zp.call(this,e)}W9.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:w6.length,default:w6}]};tn(W9,zp,{layout:Bot,params:["size","round","padding"],fields:w6});function V9(e){wt.call(this,null,e)}V9.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};tn(V9,wt,{transform(e,t){t.source||_t("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?b6(Z2e().id(e.key).parentId(e.parentKey)(i.source),e.key,Yc):b6(Z2e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const J2e={tidy:Xot,cluster:aot},_6=["x","y","depth","children"];function Y9(e){zp.call(this,e)}Y9.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:_6.length,default:_6}]};tn(Y9,zp,{layout(e){const t=e||"tidy";if(yn(J2e,t))return J2e[t]();_t("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:_6});function X9(e){wt.call(this,[],e)}X9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};tn(X9,wt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||_t("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Zn(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Zn(a)]&&o[Zn(l)]&&i.add.push(lo({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Zn(s)]=1),n.forEach(s=>{(o[Zn(s.source)]||o[Zn(s.target)])&&i.mod.push(s)})),i}});const e_e={binary:Zot,dice:OA,slice:MR,slicedice:Qot,squarify:A5e,resquarify:Jot},E6=["x0","y0","x1","y1","depth","children"];function K9(e){zp.call(this,e)}K9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:E6.length,default:E6}]};tn(K9,zp,{layout(){const e=Kot();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{yn(e_e,t)?e.tile(e_e[t]):_t("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:E6});const ost=Object.freeze(Object.defineProperty({__proto__:null,nest:q9,pack:G9,partition:W9,stratify:V9,tree:Y9,treelinks:X9,treemap:K9},Symbol.toStringTag,{value:"Module"})),vM=4278190080;function sst(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function ast(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=sm(o,s).getContext("2d"),u=sm(o,s).getContext("2d"),f=a&&sm(o,s).getContext("2d");n.forEach(T=>Kk(l,T,!1)),Kk(u,t,!1),a&&Kk(f,t,!0);const c=yM(l,o,s),d=yM(u,o,s),p=a&&yM(f,o,s),h=e.bitmap(),g=a&&e.bitmap();let m,y,v,x,_,E,C,w;for(y=0;y<s;++y)for(m=0;m<o;++m)_=y*o+m,E=c[_]&vM,w=d[_]&vM,C=a&&p[_]&vM,(E||C||w)&&(v=e(m),x=e(y),!i&&(E||w)&&h.set(v,x),a&&(E||C)&&g.set(v,x));return[h,g]}function yM(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Kk(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>Kk(e,o.items,n))}):mc[r].draw(e,{items:n?t.map(lst):t})}function lst(e){const t=tR(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const qh=5,Pl=31,gE=32,Fg=new Uint32Array(gE+1),Ef=new Uint32Array(gE+1);Ef[0]=0;Fg[0]=~Ef[0];for(let e=1;e<=gE;++e)Ef[e]=Ef[e-1]<<1|1,Fg[e]=~Ef[e];function ust(e,t){const n=new Uint32Array(~~((e*t+gE)/gE));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>qh]&1<<(a&Pl)},set:(o,s)=>{const a=s*e+o;r(a>>>qh,1<<(a&Pl))},clear:(o,s)=>{const a=s*e+o;i(a>>>qh,~(1<<(a&Pl)))},getRange:(o,s,a,l)=>{let u=l,f,c,d,p;for(;u>=s;--u)if(f=u*e+o,c=u*e+a,d=f>>>qh,p=c>>>qh,d===p){if(n[d]&Fg[f&Pl]&Ef[(c&Pl)+1])return!0}else{if(n[d]&Fg[f&Pl]||n[p]&Ef[(c&Pl)+1])return!0;for(let h=d+1;h<p;++h)if(n[h])return!0}return!1},setRange:(o,s,a,l)=>{let u,f,c,d,p;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,c=u>>>qh,d=f>>>qh,c===d)r(c,Fg[u&Pl]&Ef[(f&Pl)+1]);else for(r(c,Fg[u&Pl]),r(d,Ef[(f&Pl)+1]),p=c+1;p<d;++p)r(p,4294967295)},clearRange:(o,s,a,l)=>{let u,f,c,d,p;for(;s<=l;++s)if(u=s*e+o,f=s*e+a,c=u>>>qh,d=f>>>qh,c===d)i(c,Ef[u&Pl]|Fg[(f&Pl)+1]);else for(i(c,Ef[u&Pl]),i(d,Fg[(f&Pl)+1]),p=c+1;p<d;++p)i(p,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function cst(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>ust(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function fst(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,f=ac.width(s.datum,s.datum.text);let c=0,d,p,h,g,m,y,v;for(let x=0;x<l;++x)d=a[x].x,h=a[x].y,p=a[x].x2===void 0?d:a[x].x2,g=a[x].y2===void 0?h:a[x].y2,m=(d+p)/2,y=(h+g)/2,v=Math.abs(p-d+g-h),v>=c&&(c=v,s.x=m,s.y=y);return m=f/2,y=u/2,d=s.x-m,p=s.x+m,h=s.y-y,g=s.y+y,s.align="center",d<0&&p<=i?s.align="left":0<=d&&i<p&&(s.align="right"),s.baseline="middle",h<0&&g<=o?s.baseline="top":0<=h&&o<g&&(s.baseline="bottom"),!0}}function BT(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Zg(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),f=e(t+l),c=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,c,f,d)||s.getRange(u,c,f,d)||a&&a.getRange(u,c,f,d)}function dst(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,f,c,d,p){const h=e.invert(u),g=e.invert(f);let m=c,y=o,v;if(!BT(h,g,d,p,i,o)&&!Zg(e,h,g,p,d,m,s,a)&&!Zg(e,h,g,p,d,p,s,null)){for(;y-m>=1;)v=(m+y)/2,Zg(e,h,g,p,d,v,s,a)?y=v:m=v;if(m>c)return[h,g,m,!0]}}return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,p=ac.width(u.datum,u.datum.text);let h=n?d:0,g=!1,m=!1,y=0,v,x,_,E,C,w,T,R,L,B,P,S,k,D,O,N,j;for(let q=0;q<c;++q){for(v=f[q].x,_=f[q].y,x=f[q].x2===void 0?v:f[q].x2,E=f[q].y2===void 0?_:f[q].y2,v>x&&(j=v,v=x,x=j),_>E&&(j=_,_=E,E=j),L=e(v),P=e(x),B=~~((L+P)/2),S=e(_),D=e(E),k=~~((S+D)/2),T=B;T>=L;--T)for(R=k;R>=S;--R)N=l(T,R,h,p,d),N&&([u.x,u.y,h,g]=N);for(T=B;T<=P;++T)for(R=k;R<=D;++R)N=l(T,R,h,p,d),N&&([u.x,u.y,h,g]=N);!g&&!n&&(O=Math.abs(x-v+E-_),C=(v+x)/2,w=(_+E)/2,O>=y&&!BT(C,w,p,d,i,o)&&!Zg(e,C,w,d,p,d,s,null)&&(y=O,u.x=C,u.y=w,m=!0))}return g||m?(C=p/2,w=d/2,s.setRange(e(u.x-C),e(u.y-w),e(u.x+C),e(u.y+w)),u.align="center",u.baseline="middle",!0):!1}}const hst=[-1,-1,1,1],pst=[-1,1,-1,1];function gst(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,p=ac.width(u.datum,u.datum.text),h=[];let g=n?d:0,m=!1,y=!1,v=0,x,_,E,C,w,T,R,L,B,P,S,k;for(let D=0;D<c;++D){for(x=f[D].x,E=f[D].y,_=f[D].x2===void 0?x:f[D].x2,C=f[D].y2===void 0?E:f[D].y2,h.push([e((x+_)/2),e((E+C)/2)]);h.length;)if([R,L]=h.pop(),!(s.get(R,L)||a.get(R,L)||l.get(R,L))){l.set(R,L);for(let O=0;O<4;++O)w=R+hst[O],T=L+pst[O],l.outOfBounds(w,T,w,T)||h.push([w,T]);if(w=e.invert(R),T=e.invert(L),B=g,P=o,!BT(w,T,p,d,i,o)&&!Zg(e,w,T,d,p,B,s,a)&&!Zg(e,w,T,d,p,d,s,null)){for(;P-B>=1;)S=(B+P)/2,Zg(e,w,T,d,p,S,s,a)?P=S:B=S;B>g&&(u.x=w,u.y=T,g=B,m=!0)}}!m&&!n&&(k=Math.abs(_-x+C-E),w=(x+_)/2,T=(E+C)/2,k>=v&&!BT(w,T,p,d,i,o)&&!Zg(e,w,T,d,p,d,s,null)&&(v=k,u.x=w,u.y=T,y=!0))}return m||y?(w=p/2,T=d/2,s.setRange(e(u.x-w),e(u.y-T),e(u.x+w),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const mst=["right","center","left"],vst=["bottom","middle","top"];function yst(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,c=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let d=u.textWidth??0,p,h,g,m,y,v,x,_,E,C,w,T,R,L,B;for(let P=0;P<l;++P){if(p=(n[P]&3)-1,h=(n[P]>>>2&3)-1,g=p===0&&h===0||r[P]<0,m=p&&h?Math.SQRT1_2:1,y=r[P]<0?-1:1,v=f[1+p]+r[P]*p*m,w=f[4+h]+y*c*h/2+r[P]*h*m,_=w-c/2,E=w+c/2,T=e(v),L=e(_),B=e(E),!d)if(t_e(T,T,L,B,s,a,v,v,_,E,f,g))d=ac.width(u.datum,u.datum.text);else continue;if(C=v+y*d*p/2,v=C-d/2,x=C+d/2,T=e(v),R=e(x),t_e(T,R,L,B,s,a,v,x,_,E,f,g))return u.x=p?p*y<0?x:v:C,u.y=h?h*y<0?E:_:w,u.align=mst[p*y+1],u.baseline=vst[h*y+1],s.setRange(T,L,R,B),!0}return!1}}function t_e(e,t,n,r,i,o,s,a,l,u,f,c){return!(i.outOfBounds(e,n,t,r)||(c&&o||i).getRange(e,n,t,r))}const bM=0,xM=4,wM=8,_M=0,EM=1,AM=2,bst={"top-left":bM+_M,top:bM+EM,"top-right":bM+AM,left:xM+_M,middle:xM+EM,right:xM+AM,"bottom-left":wM+_M,bottom:wM+EM,"bottom-right":wM+AM},xst={naive:fst,"reduced-search":dst,floodfill:gst};function wst(e,t,n,r,i,o,s,a,l,u,f){if(!e.length)return e;const c=Math.max(r.length,i.length),d=_st(r,c),p=Est(i,c),h=Ast(e[0].datum),g=h==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=Cst(h,g,a,l),v=u===null||u===1/0,x=m&&f==="naive";let _=-1,E=-1;const C=e.map(L=>{const B=v?ac.width(L,L.text):void 0;return _=Math.max(_,B),E=Math.max(E,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(L),textWidth:B}});u=u===null||u===1/0?Math.max(_,E)+Math.max(...r):u;const w=cst(t[0],t[1],u);let T;if(!x){n&&C.sort((P,S)=>n(P.datum,S.datum));let L=!1;for(let P=0;P<p.length&&!L;++P)L=p[P]===5||d[P]<0;const B=(h&&s||m)&&e.map(P=>P.datum);T=o.length||B?ast(w,B||[],o,L,m):sst(w,s&&C)}const R=m?xst[f](w,T,s,l):yst(w,T,p,d);return C.forEach(L=>L.opacity=+R(L)),C}function _st(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Est(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=bst[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Ast(e){return e&&e.mark&&e.mark.marktype}function Cst(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const A6=["x","y","opacity","align","baseline"],C5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Z9(e){wt.call(this,null,e)}Z9.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:C5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:A6.length,default:A6}]};tn(Z9,wt,{transform(e,t){function n(o){const s=e[o];return Br(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&_t("Size parameter should be specified as a [width, height] array.");const i=e.as||A6;return wst(t.materialize(t.SOURCE).source||[],e.size,e.sort,vn(e.offset==null?1:e.offset),vn(e.anchor||C5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Sst=Object.freeze(Object.defineProperty({__proto__:null,label:Z9},Symbol.toStringTag,{value:"Module"}));function S5e(e,t){var n=[],r=function(f){return f(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function Q9(e){wt.call(this,null,e)}Q9.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};tn(Q9,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S5e(r,e.groupby),o=(e.groupby||[]).map(Fs),s=o.length,a=e.as||[Fs(e.x),Fs(e.y)],l=[];i.forEach(u=>{xRe(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const c={};for(let d=0;d<s;++d)c[o[d]]=u.dims[d];c[a[0]]=f[0],c[a[1]]=f[1],l.push(lo(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const C6={constant:VP,linear:YP,log:mRe,exp:vRe,pow:yRe,quad:XP,poly:bRe},kst=(e,t)=>e==="poly"?t:e==="quad"?2:1;function J9(e){wt.call(this,null,e)}J9.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(C6)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};tn(J9,wt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S5e(r,e.groupby),o=(e.groupby||[]).map(Fs),s=e.method||"linear",a=e.order==null?3:e.order,l=kst(s,a),u=e.as||[Fs(e.x),Fs(e.y)],f=C6[s],c=[];let d=e.extent;yn(C6,s)||_t("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(p=>{if(p.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=f(p,e.x,e.y,a);if(e.params){c.push(lo({keys:p.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||Zd(p,e.x),y=v=>{const x={};for(let _=0;_<o.length;++_)x[o[_]]=p.dims[_];x[u[0]]=v[0],x[u[1]]=v[1],c.push(lo(x))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):lR(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const Tst=Object.freeze(Object.defineProperty({__proto__:null,loess:Q9,regression:J9},Symbol.toStringTag,{value:"Module"})),mp=11102230246251565e-32,hl=134217729,Dst=(3+8*mp)*mp;function CM(e,t,n,r,i){let o,s,a,l,u=t[0],f=r[0],c=0,d=0;f>u==f>-u?(o=u,u=t[++c]):(o=f,f=r[++d]);let p=0;if(c<e&&d<n)for(f>u==f>-u?(s=u+o,a=o-(s-u),u=t[++c]):(s=f+o,a=o-(s-f),f=r[++d]),o=s,a!==0&&(i[p++]=a);c<e&&d<n;)f>u==f>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++c]):(s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++d]),o=s,a!==0&&(i[p++]=a);for(;c<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++c],o=s,a!==0&&(i[p++]=a);for(;d<n;)s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++d],o=s,a!==0&&(i[p++]=a);return(o!==0||p===0)&&(i[p++]=o),p}function Lst(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function IA(e){return new Float64Array(e)}const Rst=(3+16*mp)*mp,Fst=(2+12*mp)*mp,$st=(9+64*mp)*mp*mp,eb=IA(4),n_e=IA(8),r_e=IA(12),i_e=IA(16),Bl=IA(4);function Mst(e,t,n,r,i,o,s){let a,l,u,f,c,d,p,h,g,m,y,v,x,_,E,C,w,T;const R=e-i,L=n-i,B=t-o,P=r-o;_=R*P,d=hl*R,p=d-(d-R),h=R-p,d=hl*P,g=d-(d-P),m=P-g,E=h*m-(_-p*g-h*g-p*m),C=B*L,d=hl*B,p=d-(d-B),h=B-p,d=hl*L,g=d-(d-L),m=L-g,w=h*m-(C-p*g-h*g-p*m),y=E-w,c=E-y,eb[0]=E-(y+c)+(c-w),v=_+y,c=v-_,x=_-(v-c)+(y-c),y=x-C,c=x-y,eb[1]=x-(y+c)+(c-C),T=v+y,c=T-v,eb[2]=v-(T-c)+(y-c),eb[3]=T;let S=Lst(4,eb),k=Fst*s;if(S>=k||-S>=k||(c=e-R,a=e-(R+c)+(c-i),c=n-L,u=n-(L+c)+(c-i),c=t-B,l=t-(B+c)+(c-o),c=r-P,f=r-(P+c)+(c-o),a===0&&l===0&&u===0&&f===0)||(k=$st*s+Dst*Math.abs(S),S+=R*f+P*a-(B*u+L*l),S>=k||-S>=k))return S;_=a*P,d=hl*a,p=d-(d-a),h=a-p,d=hl*P,g=d-(d-P),m=P-g,E=h*m-(_-p*g-h*g-p*m),C=l*L,d=hl*l,p=d-(d-l),h=l-p,d=hl*L,g=d-(d-L),m=L-g,w=h*m-(C-p*g-h*g-p*m),y=E-w,c=E-y,Bl[0]=E-(y+c)+(c-w),v=_+y,c=v-_,x=_-(v-c)+(y-c),y=x-C,c=x-y,Bl[1]=x-(y+c)+(c-C),T=v+y,c=T-v,Bl[2]=v-(T-c)+(y-c),Bl[3]=T;const D=CM(4,eb,4,Bl,n_e);_=R*f,d=hl*R,p=d-(d-R),h=R-p,d=hl*f,g=d-(d-f),m=f-g,E=h*m-(_-p*g-h*g-p*m),C=B*u,d=hl*B,p=d-(d-B),h=B-p,d=hl*u,g=d-(d-u),m=u-g,w=h*m-(C-p*g-h*g-p*m),y=E-w,c=E-y,Bl[0]=E-(y+c)+(c-w),v=_+y,c=v-_,x=_-(v-c)+(y-c),y=x-C,c=x-y,Bl[1]=x-(y+c)+(c-C),T=v+y,c=T-v,Bl[2]=v-(T-c)+(y-c),Bl[3]=T;const O=CM(D,n_e,4,Bl,r_e);_=a*f,d=hl*a,p=d-(d-a),h=a-p,d=hl*f,g=d-(d-f),m=f-g,E=h*m-(_-p*g-h*g-p*m),C=l*u,d=hl*l,p=d-(d-l),h=l-p,d=hl*u,g=d-(d-u),m=u-g,w=h*m-(C-p*g-h*g-p*m),y=E-w,c=E-y,Bl[0]=E-(y+c)+(c-w),v=_+y,c=v-_,x=_-(v-c)+(y-c),y=x-C,c=x-y,Bl[1]=x-(y+c)+(c-C),T=v+y,c=T-v,Bl[2]=v-(T-c)+(y-c),Bl[3]=T;const N=CM(O,r_e,4,Bl,i_e);return i_e[N-1]}function LS(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=Rst*u?l:-Mst(e,t,n,r,i,o,u)}const o_e=Math.pow(2,-52),RS=new Uint32Array(512);class zT{static from(t,n=Bst,r=zst){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new zT(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let R=0;R<s;R++){const L=t[2*R],B=t[2*R+1];L<a&&(a=L),B<l&&(l=B),L>u&&(u=L),B>f&&(f=B),this._ids[R]=R}const c=(a+u)/2,d=(l+f)/2;let p,h,g;for(let R=0,L=1/0;R<s;R++){const B=SM(c,d,t[2*R],t[2*R+1]);B<L&&(p=R,L=B)}const m=t[2*p],y=t[2*p+1];for(let R=0,L=1/0;R<s;R++){if(R===p)continue;const B=SM(m,y,t[2*R],t[2*R+1]);B<L&&B>0&&(h=R,L=B)}let v=t[2*h],x=t[2*h+1],_=1/0;for(let R=0;R<s;R++){if(R===p||R===h)continue;const L=Nst(m,y,v,x,t[2*R],t[2*R+1]);L<_&&(g=R,_=L)}let E=t[2*g],C=t[2*g+1];if(_===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];Fb(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let L=0;for(let B=0,P=-1/0;B<s;B++){const S=this._ids[B],k=this._dists[S];k>P&&(R[L++]=S,P=k)}this.hull=R.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(LS(m,y,v,x,E,C)<0){const R=h,L=v,B=x;h=g,v=E,x=C,g=R,E=L,C=B}const w=Pst(m,y,v,x,E,C);this._cx=w.x,this._cy=w.y;for(let R=0;R<s;R++)this._dists[R]=SM(t[2*R],t[2*R+1],w.x,w.y);Fb(this._ids,this._dists,0,s-1),this._hullStart=p;let T=3;r[p]=n[g]=h,r[h]=n[p]=g,r[g]=n[h]=p,i[p]=0,i[h]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=p,o[this._hashKey(v,x)]=h,o[this._hashKey(E,C)]=g,this.trianglesLen=0,this._addTriangle(p,h,g,-1,-1,-1);for(let R=0,L,B;R<this._ids.length;R++){const P=this._ids[R],S=t[2*P],k=t[2*P+1];if(R>0&&Math.abs(S-L)<=o_e&&Math.abs(k-B)<=o_e||(L=S,B=k,P===p||P===h||P===g))continue;let D=0;for(let W=0,Q=this._hashKey(S,k);W<this._hashSize&&(D=o[(Q+W)%this._hashSize],!(D!==-1&&D!==r[D]));W++);D=n[D];let O=D,N;for(;N=r[O],LS(S,k,t[2*O],t[2*O+1],t[2*N],t[2*N+1])>=0;)if(O=N,O===D){O=-1;break}if(O===-1)continue;let j=this._addTriangle(O,P,r[O],-1,-1,i[O]);i[P]=this._legalize(j+2),i[O]=j,T++;let q=r[O];for(;N=r[q],LS(S,k,t[2*q],t[2*q+1],t[2*N],t[2*N+1])<0;)j=this._addTriangle(q,P,N,i[P],-1,i[q]),i[P]=this._legalize(j+2),r[q]=q,T--,q=N;if(O===D)for(;N=n[O],LS(S,k,t[2*N],t[2*N+1],t[2*O],t[2*O+1])<0;)j=this._addTriangle(N,P,O,-1,i[O],i[N]),this._legalize(j+2),i[N]=j,r[O]=O,T--,O=N;this._hullStart=n[P]=O,r[O]=n[q]=P,r[P]=q,o[this._hashKey(S,k)]=P,o[this._hashKey(t[2*O],t[2*O+1])]=O}this.hull=new Uint32Array(T);for(let R=0,L=this._hullStart;R<T;R++)this.hull[R]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ost(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=RS[--o];continue}const u=a-a%3,f=l+(t+1)%3,c=u+(a+2)%3,d=n[s],p=n[t],h=n[f],g=n[c];if(Ist(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[c];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===c){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,c);const v=u+(a+1)%3;o<RS.length&&(RS[o++]=v)}else{if(o===0)break;t=RS[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Ost(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function SM(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Ist(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,f=n-s,c=r-a,d=i-s,p=o-a,h=l*l+u*u,g=f*f+c*c,m=d*d+p*p;return l*(c*m-g*p)-u*(f*m-g*d)+h*(f*p-c*d)<0}function Nst(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,c=l*l+u*u,d=.5/(s*u-a*l),p=(u*f-a*c)*d,h=(s*c-l*f)*d;return p*p+h*h}function Pst(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,f=s*s+a*a,c=l*l+u*u,d=.5/(s*u-a*l),p=e+(u*f-a*c)*d,h=t+(s*c-l*f)*d;return{x:p,y:h}}function Fb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;y2(e,i,o),t[e[n]]>t[e[r]]&&y2(e,n,r),t[e[o]]>t[e[r]]&&y2(e,o,r),t[e[n]]>t[e[o]]&&y2(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;y2(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Fb(e,t,o,r),Fb(e,t,n,s-1)):(Fb(e,t,n,s-1),Fb(e,t,o,r))}}function y2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Bst(e){return e[0]}function zst(e){return e[1]}const s_e=1e-6;class fv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>s_e||Math.abs(this._y1-o)>s_e)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class S6{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Ust=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,x;g<y;g+=3,m+=2){const _=r[g]*2,E=r[g+1]*2,C=r[g+2]*2,w=t[_],T=t[_+1],R=t[E],L=t[E+1],B=t[C],P=t[C+1],S=R-w,k=L-T,D=B-w,O=P-T,N=(S*O-k*D)*2;if(Math.abs(N)<1e-9){if(o===void 0){o=s=0;for(const q of n)o+=t[q*2],s+=t[q*2+1];o/=n.length,s/=n.length}const j=1e9*Math.sign((o-w)*O-(s-T)*D);v=(w+B)/2-j*O,x=(T+P)/2+j*D}else{const j=1/N,q=S*S+k*k,W=D*D+O*O;v=w+(O*q-k*W)*j,x=T+(S*W-D*q)*j}a[m]=v,a[m+1]=x}let l=n[n.length-1],u,f=l*4,c,d=t[2*l],p,h=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=f,c=d,p=h,f=l*4,d=t[2*l],h=t[2*l+1],i[u+2]=i[f]=p-h,i[u+3]=i[f+1]=d-c}render(t){const n=t==null?t=new fv:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let f=0,c=r.length;f<c;++f){const d=r[f];if(d<f)continue;const p=Math.floor(f/3)*2,h=Math.floor(d/3)*2,g=s[p],m=s[p+1],y=s[h],v=s[h+1];this._renderSegment(g,m,y,v,t)}let l,u=o[o.length-1];for(let f=0;f<o.length;++f){l=u,u=o[f];const c=Math.floor(i[u]/3)*2,d=s[c],p=s[c+1],h=l*4,g=this._project(d,p,a[h+2],a[h+3]);g&&this._renderSegment(d,p,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new fv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new fv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new S6;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),c,d=0;for(let p=0;p<r;p+=2)if(o=a,s=l,a=n[p],l=n[p+1],u=f,f=this._regioncode(a,l),u===0&&f===0)c=d,d=0,i?i.push(a,l):i=[a,l];else{let h,g,m,y,v;if(u===0){if((h=this._clipSegment(o,s,a,l,u,f))===null)continue;[g,m,y,v]=h}else{if((h=this._clipSegment(a,l,o,s,f,u))===null)continue;[y,v,g,m]=h,c=d,d=this._edgecode(g,m),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(g,m):i=[g,m]}c=d,d=this._edgecode(y,v),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)c=d,d=this._edgecode(i[0],i[1]),c&&d&&this._edge(t,c,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,f=o||s;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,c,d=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)c=d,d=this._edgecode(a[u],a[u+1]),c&&d&&(u=this._edge(t,c,d,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const jst=2*Math.PI,tb=Math.pow;function Hst(e){return e[0]}function qst(e){return e[1]}function Gst(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Wst(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ez{static from(t,n=Hst,r=qst,i){return new ez("length"in t?Vst(t,n,r,i):Float64Array.from(Yst(t,n,r,i)))}constructor(t){this._delaunator=new zT(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Gst(t)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let d=0,p=n.length/2;d<p;++d){const h=Wst(n[2*d],n[2*d+1],c);n[2*d]=h[0],n[2*d+1]=h[1]}this._delaunator=new zT(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||s[f]===-1)&&(s[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Ust(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const c=a.indexOf(t);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const c=r[(i[t]+1)%r.length];c!==f&&(yield c);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,c=tb(n-u[t*2],2)+tb(r-u[t*2+1],2);const d=i[t];let p=d;do{let h=l[p];const g=tb(n-u[h*2],2)+tb(r-u[h*2+1],2);if(g<c&&(c=g,f=h),p=p%3===2?p-2:p+1,l[p]!==t)break;if(p=a[p],p===-1){if(p=o[(s[t]+1)%o.length],p!==h&&tb(n-u[p*2],2)+tb(r-u[p*2+1],2)<c)return p;break}}while(p!==d);return f}render(t){const n=t==null?t=new fv:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,f=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new fv:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,jst)}return r&&r.value()}renderHull(t){const n=t==null?t=new fv:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new S6;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new fv:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new S6;return this.renderTriangle(t,n),n.value()}}function Vst(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*Yst(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function tz(e){wt.call(this,null,e)}tz.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Xst=[-1e5,-1e5,1e5,1e5];tn(tz,wt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Xst;const o=this.value=ez.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!Zst(l)?Kst(l):null}return t.reflow(e.modified()).modifies(n)}});function Kst(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Zst(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Qst=Object.freeze(Object.defineProperty({__proto__:null,voronoi:tz},Symbol.toStringTag,{value:"Module"}));var kM=Math.PI/180,t_=64,Zk=2048;function Jst(){var e=[256,256],t,n,r,i,o,s,a,l=k5e,u=[],f=Math.random,c={};c.layout=function(){for(var h=d(sm()),g=oat((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,x=[],_=u.map(C=>({text:t(C),font:n(C),style:i(C),weight:o(C),rotate:s(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,w)=>w.size-C.size);++v<y;){var E=_[v];E.x=e[0]*(f()+.5)>>1,E.y=e[1]*(f()+.5)>>1,eat(h,E,_,v),E.hasText&&p(g,E,m)&&(x.push(E),m?nat(m,E):m=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return x};function d(h){h.width=h.height=1;var g=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(t_<<5)/g,h.height=Zk/g;var m=h.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function p(h,g,m){for(var y=g.x,v=g.y,x=Math.hypot(e[0],e[1]),_=l(e),E=f()<.5?1:-1,C=-E,w,T,R;(w=_(C+=E))&&(T=~~w[0],R=~~w[1],!(Math.min(Math.abs(T),Math.abs(R))>=x));)if(g.x=y+T,g.y=v+R,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!tat(g,h,e[0]))&&(!m||rat(g,m))){for(var L=g.sprite,B=g.width>>5,P=e[0]>>5,S=g.x-(B<<4),k=S&127,D=32-k,O=g.y1-g.y0,N=(g.y+g.y0)*P+(S>>5),j,q=0;q<O;q++){j=0;for(var W=0;W<=B;W++)h[N+W]|=j<<D|(W<B?(j=L[q*B+W])>>>k:0);N+=P}return g.sprite=null,!0}return!1}return c.words=function(h){return arguments.length?(u=h,c):u},c.size=function(h){return arguments.length?(e=[+h[0],+h[1]],c):e},c.font=function(h){return arguments.length?(n=F0(h),c):n},c.fontStyle=function(h){return arguments.length?(i=F0(h),c):i},c.fontWeight=function(h){return arguments.length?(o=F0(h),c):o},c.rotate=function(h){return arguments.length?(s=F0(h),c):s},c.text=function(h){return arguments.length?(t=F0(h),c):t},c.spiral=function(h){return arguments.length?(l=sat[h]||h,c):l},c.fontSize=function(h){return arguments.length?(r=F0(h),c):r},c.padding=function(h){return arguments.length?(a=F0(h),c):a},c.random=function(h){return arguments.length?(f=h,c):f},c}function eat(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(t_<<5)/o,Zk/o);var s=0,a=0,l=0,u=n.length,f,c,d,p,h;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*kM),m=Math.cos(t.rotate*kM),y=f*m,v=f*g,x=d*m,_=d*g;f=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(v+x),Math.abs(v-x))}else f=f+31>>5<<5;if(d>l&&(l=d),s+f>=t_<<5&&(s=0,a+=l,l=0),a+d>=Zk)break;i.translate((s+(f>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*kM),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=d,t.xoff=s,t.yoff=a,t.x1=f>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var E=i.getImageData(0,0,(t_<<5)/o,Zk/o).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,c=f>>5,d=t.y1-t.y0,p=0;p<d*c;p++)C[p]=0;if(s=t.xoff,s==null)return;a=t.yoff;var w=0,T=-1;for(h=0;h<d;h++){for(p=0;p<f;p++){var R=c*h+(p>>5),L=E[(a+h)*(t_<<5)+(s+p)<<2]?1<<31-p%32:0;C[R]|=L,w|=L}w?T=h:(t.y0++,d--,h--,a++)}t.y1=t.y0+T,t.sprite=C.slice(0,(t.y1-t.y0)*c)}}}function tat(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f,c=0;c<l;c++){f=0;for(var d=0;d<=i;d++)if((f<<a|(d<i?(f=r[c*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function nat(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function rat(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function k5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function iat(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function oat(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function F0(e){return typeof e=="function"?e:function(){return e}}var sat={archimedean:k5e,rectangular:iat};const T5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],aat=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nz(e){wt.call(this,Jst(),e)}nz.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:T5e}]};tn(nz,wt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&_t("Wordcloud size dimensions must be non-zero.");function n(h){const g=e[h];return Br(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||aat.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||T5e;let a=e.fontSize||14,l;if(Br(a)?l=e.fontSizeRange:a=Ml(a),l){const h=a,g=to("sqrt")().domain(Zd(i,h)).range(l);a=m=>g(h(m))}i.forEach(h=>{h[s[0]]=NaN,h[s[1]]=NaN,h[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Kc).layout(),f=o.size(),c=f[0]>>1,d=f[1]>>1,p=u.length;for(let h=0,g,m;h<p;++h)g=u[h],m=g.datum,m[s[0]]=g.x+c,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const lat=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:nz},Symbol.toStringTag,{value:"Module"})),uat=e=>new Uint8Array(e),cat=e=>new Uint16Array(e),S_=e=>new Uint32Array(e);function fat(){let e=8,t=[],n=S_(0),r=FS(0,e),i=FS(0,e);return{data:()=>t,seen:()=>n=dat(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let f,c,d;for(c=0;!s[c]&&c<a;++c)l[c]=t[c],u[c]=c;for(d=c;c<a;++c)f=t[c],s[c]?u[c]=-1:(u[c]=d,r[d]=r[c],i[d]=i[c],l[d]=f,f._index=d++),r[c]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=FS(o,e,r),i=FS(o,e))}}}function dat(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function FS(e,t,n){const r=(t<257?uat:t<65537?cat:S_)(e);return n&&r.set(n),r}function a_e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],f=a[1],c=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=f;d<c;++d)o[l[d]]|=r;return s}}}function l_e(){let e=S_(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,c=l.length,d=S_(c);let p=Array(c),h,g,m;for(m=0;m<c;++m)p[m]=a(l[m]),d[m]=m;if(p=hat(p,d),f)h=t,g=e,t=Array(f+c),e=S_(f+c),pat(u,h,g,f,p,d,c,t,e);else{if(u>0)for(m=0;m<c;++m)d[m]+=u;t=p,e=d}return n=f+c,{index:d,value:p}}function i(a,l){const u=n;let f,c,d;for(c=0;!l[e[c]]&&c<u;++c);for(d=c;c<u;++c)l[f=e[c]]||(e[d]=f,t[d]=t[c],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[nGe(l,a[0],0,u),Y_(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function hat(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),MWe(e,t)}function pat(e,t,n,r,i,o,s,a,l){let u=0,f=0,c;for(c=0;u<r&&f<s;++c)t[u]<i[f]?(a[c]=t[u],l[c]=n[u++]):(a[c]=i[f],l[c]=o[f++]+e);for(;u<r;++u,++c)a[c]=t[u],l[c]=n[u];for(;f<s;++f,++c)a[c]=i[f],l[c]=o[f]+e}function rz(e){wt.call(this,fat(),e),this._indices=null,this._dims=null}rz.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};tn(rz,wt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=l_e()),o.push(a_e(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),c=n.rem=n.add,d=n.mod,p=i.length,h={};let g,m,y,v,x,_,E,C,w;if(u.set(l),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,E=0,C=v.length;E<C;++E)_[v[E]._index]=1;for(E=0;E<p;++E)w=r[E],(!s[E]||e.modified("fields",E)||t.modified(w.fields))&&(y=w.fname,(g=h[y])||(o[y]=m=l_e(),h[y]=g=m.insert(w,t.source,0)),s[E]=a_e(m,E,i[E]).onAdd(g,l));for(E=0,C=a.data().length;E<C;++E)x[E]||(u[E]!==l[E]?c.push(E):_[E]&&l[E]!==f&&d.push(E));return a.mask=(1<<p)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,c=o.length;let d=i.size(),p,h,g;i.resize(f,c),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(p=0;p<c;++p)h=a[p].fname,g=l[h]||(l[h]=s[h].insert(a[p],r,d)),o[p].onAdd(g,m);for(;d<f;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let c,d,p,h;for(c=0,d=f.length;c<d;++c)p=f[c]._index,l[p]=1,s[p]=h=o[p],o[p]=a,h!==a&&u.push(p);for(p in r)r[p].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),c=f[0],d=f[1],p=u[0],h=u[1],g=e.one;let m,y,v;if(c<p)for(m=c,y=Math.min(p,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(c>p)for(m=p,y=Math.min(c,h);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>h)for(m=Math.max(c,h),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<h)for(m=Math.max(p,d),y=h;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],c=a[0],d=a[1],p=e.one;let h,g,m;if(u<c)for(h=u,g=Math.min(c,f);h<g;++h)m=s[h],o[m]^=p,n.push(m);else if(u>c)for(h=c,g=Math.min(u,d);h<g;++h)m=s[h],o[m]^=p,r.push(m);if(f>d)for(h=Math.max(u,d),g=f;h<g;++h)m=s[h],o[m]^=p,n.push(m);else if(f<d)for(h=Math.max(c,f),g=d;h<g;++h)m=s[h],o[m]^=p,r.push(m);e.range=t.slice()}});function iz(e){wt.call(this,null,e)}iz.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};tn(iz,wt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:s[f];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,f=>{const c=a[f]&n;return!c&&c^l[f]&n?s[f]:null}),o.filter(o.REM,f=>{const c=a[f]&n;return c&&!(c^(c^l[f]&n))?s[f]:null})):(o.filter(o.ADD,u),o.filter(o.REM,f=>(a[f]&n)===i?s[f]:null)),o.filter(o.SOURCE,f=>u(f._index))}});const gat=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:rz,resolvefilter:iz},Symbol.toStringTag,{value:"Module"})),mat="RawCode",T1="Literal",vat="Property",yat="Identifier",bat="ArrayExpression",xat="BinaryExpression",D5e="CallExpression",wat="ConditionalExpression",_at="LogicalExpression",Eat="MemberExpression",Aat="ObjectExpression",Cat="UnaryExpression";function Vf(e){this.type=e}Vf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Sat(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Sat(e){switch(e.type){case bat:return e.elements;case xat:case _at:return[e.left,e.right];case D5e:return[e.callee].concat(e.arguments);case wat:return[e.test,e.consequent,e.alternate];case Eat:return[e.object,e.property];case Aat:return e.properties;case vat:return[e.key,e.value];case Cat:return[e.argument];case yat:case T1:case mat:default:return[]}}var ch,Fn,Ct,Sl,xo,OR=1,NA=2,Rv=3,Nm=4,IR=5,sy=6,bu=7,PA=8,kat=9;ch={};ch[OR]="Boolean";ch[NA]="<end>";ch[Rv]="Identifier";ch[Nm]="Keyword";ch[IR]="Null";ch[sy]="Numeric";ch[bu]="Punctuator";ch[PA]="String";ch[kat]="RegularExpression";var Tat="ArrayExpression",Dat="BinaryExpression",Lat="CallExpression",Rat="ConditionalExpression",L5e="Identifier",Fat="Literal",$at="LogicalExpression",Mat="MemberExpression",Oat="ObjectExpression",Iat="Property",Nat="UnaryExpression",Aa="Unexpected token %0",Pat="Unexpected number",Bat="Unexpected string",zat="Unexpected identifier",Uat="Unexpected reserved word",jat="Unexpected end of input",k6="Invalid regular expression",TM="Invalid regular expression: missing /",R5e="Octal literals are not allowed in strict mode.",Hat="Duplicate data property in object literal not allowed in strict mode",Ya="ILLEGAL",mE="Disabled.",qat=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Gat=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function NR(e,t){if(!e)throw new Error("ASSERT: "+t)}function Zh(e){return e>=48&&e<=57}function oz(e){return"0123456789abcdefABCDEF".includes(e)}function k_(e){return"01234567".includes(e)}function Wat(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function vE(e){return e===10||e===13||e===8232||e===8233}function BA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&qat.test(String.fromCharCode(e))}function UT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Gat.test(String.fromCharCode(e))}const Vat={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function F5e(){for(;Ct<Sl;){const e=Fn.charCodeAt(Ct);if(Wat(e)||vE(e))++Ct;else break}}function T6(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ct<Sl&&oz(Fn[Ct])?(r=Fn[Ct++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Yi({},Aa,Ya);return String.fromCharCode(i)}function Yat(){var e,t,n,r;for(e=Fn[Ct],t=0,e==="}"&&Yi({},Aa,Ya);Ct<Sl&&(e=Fn[Ct++],!!oz(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Yi({},Aa,Ya),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function $5e(){var e,t;for(e=Fn.charCodeAt(Ct++),t=String.fromCharCode(e),e===92&&(Fn.charCodeAt(Ct)!==117&&Yi({},Aa,Ya),++Ct,e=T6("u"),(!e||e==="\\"||!BA(e.charCodeAt(0)))&&Yi({},Aa,Ya),t=e);Ct<Sl&&(e=Fn.charCodeAt(Ct),!!UT(e));)++Ct,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Fn.charCodeAt(Ct)!==117&&Yi({},Aa,Ya),++Ct,e=T6("u"),(!e||e==="\\"||!UT(e.charCodeAt(0)))&&Yi({},Aa,Ya),t+=e);return t}function Xat(){var e,t;for(e=Ct++;Ct<Sl;){if(t=Fn.charCodeAt(Ct),t===92)return Ct=e,$5e();if(UT(t))++Ct;else break}return Fn.slice(e,Ct)}function Kat(){var e,t,n;return e=Ct,t=Fn.charCodeAt(Ct)===92?$5e():Xat(),t.length===1?n=Rv:Vat.hasOwnProperty(t)?n=Nm:t==="null"?n=IR:t==="true"||t==="false"?n=OR:n=Rv,{type:n,value:t,start:e,end:Ct}}function DM(){var e=Ct,t=Fn.charCodeAt(Ct),n,r=Fn[Ct],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ct,{type:bu,value:String.fromCharCode(t),start:e,end:Ct};default:if(n=Fn.charCodeAt(Ct+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ct+=2,{type:bu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ct};case 33:case 61:return Ct+=2,Fn.charCodeAt(Ct)===61&&++Ct,{type:bu,value:Fn.slice(e,Ct),start:e,end:Ct}}}if(s=Fn.substr(Ct,4),s===">>>=")return Ct+=4,{type:bu,value:s,start:e,end:Ct};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return Ct+=3,{type:bu,value:o,start:e,end:Ct};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Ct+=2,{type:bu,value:i,start:e,end:Ct};if(i==="//"&&Yi({},Aa,Ya),"<>=!+-*%&|^/".includes(r))return++Ct,{type:bu,value:r,start:e,end:Ct};Yi({},Aa,Ya)}function Zat(e){let t="";for(;Ct<Sl&&oz(Fn[Ct]);)t+=Fn[Ct++];return t.length===0&&Yi({},Aa,Ya),BA(Fn.charCodeAt(Ct))&&Yi({},Aa,Ya),{type:sy,value:parseInt("0x"+t,16),start:e,end:Ct}}function Qat(e){let t="0"+Fn[Ct++];for(;Ct<Sl&&k_(Fn[Ct]);)t+=Fn[Ct++];return(BA(Fn.charCodeAt(Ct))||Zh(Fn.charCodeAt(Ct)))&&Yi({},Aa,Ya),{type:sy,value:parseInt(t,8),octal:!0,start:e,end:Ct}}function u_e(){var e,t,n;if(n=Fn[Ct],NR(Zh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ct,e="",n!=="."){if(e=Fn[Ct++],n=Fn[Ct],e==="0"){if(n==="x"||n==="X")return++Ct,Zat(t);if(k_(n))return Qat(t);n&&Zh(n.charCodeAt(0))&&Yi({},Aa,Ya)}for(;Zh(Fn.charCodeAt(Ct));)e+=Fn[Ct++];n=Fn[Ct]}if(n==="."){for(e+=Fn[Ct++];Zh(Fn.charCodeAt(Ct));)e+=Fn[Ct++];n=Fn[Ct]}if(n==="e"||n==="E")if(e+=Fn[Ct++],n=Fn[Ct],(n==="+"||n==="-")&&(e+=Fn[Ct++]),Zh(Fn.charCodeAt(Ct)))for(;Zh(Fn.charCodeAt(Ct));)e+=Fn[Ct++];else Yi({},Aa,Ya);return BA(Fn.charCodeAt(Ct))&&Yi({},Aa,Ya),{type:sy,value:parseFloat(e),start:t,end:Ct}}function Jat(){var e="",t,n,r,i,o=!1;for(t=Fn[Ct],NR(t==="'"||t==='"',"String literal must starts with a quote"),n=Ct,++Ct;Ct<Sl;)if(r=Fn[Ct++],r===t){t="";break}else if(r==="\\")if(r=Fn[Ct++],!r||!vE(r.charCodeAt(0)))switch(r){case"u":case"x":Fn[Ct]==="{"?(++Ct,e+=Yat()):e+=T6(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:k_(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),Ct<Sl&&k_(Fn[Ct])&&(o=!0,i=i*8+"01234567".indexOf(Fn[Ct++]),"0123".includes(r)&&Ct<Sl&&k_(Fn[Ct])&&(i=i*8+"01234567".indexOf(Fn[Ct++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Fn[Ct]===`
`&&++Ct;else{if(vE(r.charCodeAt(0)))break;e+=r}return t!==""&&Yi({},Aa,Ya),{type:PA,value:e,octal:o,start:n,end:Ct}}function elt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Yi({},k6)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Yi({},k6)}try{return new RegExp(e,t)}catch{return null}}function tlt(){var e,t,n,r,i;for(e=Fn[Ct],NR(e==="/","Regular expression literal must start with a slash"),t=Fn[Ct++],n=!1,r=!1;Ct<Sl;)if(e=Fn[Ct++],t+=e,e==="\\")e=Fn[Ct++],vE(e.charCodeAt(0))&&Yi({},TM),t+=e;else if(vE(e.charCodeAt(0)))Yi({},TM);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Yi({},TM),i=t.substr(1,t.length-2),{value:i,literal:t}}function nlt(){var e,t,n;for(t="",n="";Ct<Sl&&(e=Fn[Ct],!!UT(e.charCodeAt(0)));)++Ct,e==="\\"&&Ct<Sl?Yi({},Aa,Ya):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Yi({},k6,n),{value:n,literal:t}}function rlt(){var e,t,n,r;return xo=null,F5e(),e=Ct,t=tlt(),n=nlt(),r=elt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ct}}function ilt(e){return e.type===Rv||e.type===Nm||e.type===OR||e.type===IR}function M5e(){if(F5e(),Ct>=Sl)return{type:NA,start:Ct,end:Ct};const e=Fn.charCodeAt(Ct);return BA(e)?Kat():e===40||e===41||e===59?DM():e===39||e===34?Jat():e===46?Zh(Fn.charCodeAt(Ct+1))?u_e():DM():Zh(e)?u_e():DM()}function Cu(){const e=xo;return Ct=e.end,xo=M5e(),Ct=e.end,e}function O5e(){const e=Ct;xo=M5e(),Ct=e}function olt(e){const t=new Vf(Tat);return t.elements=e,t}function c_e(e,t,n){const r=new Vf(e==="||"||e==="&&"?$at:Dat);return r.operator=e,r.left=t,r.right=n,r}function slt(e,t){const n=new Vf(Lat);return n.callee=e,n.arguments=t,n}function alt(e,t,n){const r=new Vf(Rat);return r.test=e,r.consequent=t,r.alternate=n,r}function sz(e){const t=new Vf(L5e);return t.name=e,t}function n_(e){const t=new Vf(Fat);return t.value=e.value,t.raw=Fn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function f_e(e,t,n){const r=new Vf(Mat);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function llt(e){const t=new Vf(Oat);return t.properties=e,t}function d_e(e,t,n){const r=new Vf(Iat);return r.key=t,r.value=n,r.kind=e,r}function ult(e,t){const n=new Vf(Nat);return n.operator=e,n.argument=t,n.prefix=!0,n}function Yi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(NR(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=Ct,n.description=i,n}function PR(e){e.type===NA&&Yi(e,jat),e.type===sy&&Yi(e,Pat),e.type===PA&&Yi(e,Bat),e.type===Rv&&Yi(e,zat),e.type===Nm&&Yi(e,Uat),Yi(e,Aa,e.value)}function kl(e){const t=Cu();(t.type!==bu||t.value!==e)&&PR(t)}function Xo(e){return xo.type===bu&&xo.value===e}function LM(e){return xo.type===Nm&&xo.value===e}function clt(){const e=[];for(Ct=xo.start,kl("[");!Xo("]");)Xo(",")?(Cu(),e.push(null)):(e.push(Fv()),Xo("]")||kl(","));return Cu(),olt(e)}function h_e(){Ct=xo.start;const e=Cu();return e.type===PA||e.type===sy?(e.octal&&Yi(e,R5e),n_(e)):sz(e.value)}function flt(){var e,t,n,r;if(Ct=xo.start,e=xo,e.type===Rv)return n=h_e(),kl(":"),r=Fv(),d_e("init",n,r);if(e.type===NA||e.type===bu)PR(e);else return t=h_e(),kl(":"),r=Fv(),d_e("init",t,r)}function dlt(){var e=[],t,n,r,i={},o=String;for(Ct=xo.start,kl("{");!Xo("}");)t=flt(),t.key.type===L5e?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Yi({},Hat):i[r]=!0,e.push(t),Xo("}")||kl(",");return kl("}"),llt(e)}function hlt(){kl("(");const e=az();return kl(")"),e}const plt={if:1};function glt(){var e,t,n;if(Xo("("))return hlt();if(Xo("["))return clt();if(Xo("{"))return dlt();if(e=xo.type,Ct=xo.start,e===Rv||plt[xo.value])n=sz(Cu().value);else if(e===PA||e===sy)xo.octal&&Yi(xo,R5e),n=n_(Cu());else{if(e===Nm)throw new Error(mE);e===OR?(t=Cu(),t.value=t.value==="true",n=n_(t)):e===IR?(t=Cu(),t.value=null,n=n_(t)):Xo("/")||Xo("/=")?(n=n_(rlt()),O5e()):PR(Cu())}return n}function mlt(){const e=[];if(kl("("),!Xo(")"))for(;Ct<Sl&&(e.push(Fv()),!Xo(")"));)kl(",");return kl(")"),e}function vlt(){Ct=xo.start;const e=Cu();return ilt(e)||PR(e),sz(e.value)}function ylt(){return kl("."),vlt()}function blt(){kl("[");const e=az();return kl("]"),e}function xlt(){var e,t,n;for(e=glt();;)if(Xo("."))n=ylt(),e=f_e(".",e,n);else if(Xo("("))t=mlt(),e=slt(e,t);else if(Xo("["))n=blt(),e=f_e("[",e,n);else break;return e}function p_e(){const e=xlt();if(xo.type===bu&&(Xo("++")||Xo("--")))throw new Error(mE);return e}function Qk(){var e,t;if(xo.type!==bu&&xo.type!==Nm)t=p_e();else{if(Xo("++")||Xo("--"))throw new Error(mE);if(Xo("+")||Xo("-")||Xo("~")||Xo("!"))e=Cu(),t=Qk(),t=ult(e.value,t);else{if(LM("delete")||LM("void")||LM("typeof"))throw new Error(mE);t=p_e()}}return t}function g_e(e){let t=0;if(e.type!==bu&&e.type!==Nm)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function wlt(){var e,t,n,r,i,o,s,a,l,u;if(e=xo,l=Qk(),r=xo,i=g_e(r),i===0)return l;for(r.prec=i,Cu(),t=[e,xo],s=Qk(),o=[l,r,s];(i=g_e(xo))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=c_e(a,l,s),o.push(n);r=Cu(),r.prec=i,o.push(r),t.push(xo),n=Qk(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=c_e(o[u-1].value,o[u-2],n),u-=2;return n}function Fv(){var e,t,n;return e=wlt(),Xo("?")&&(Cu(),t=Fv(),kl(":"),n=Fv(),e=alt(e,t,n)),e}function az(){const e=Fv();if(Xo(","))throw new Error(mE);return e}function _lt(e){Fn=e,Ct=0,Sl=Fn.length,xo=null,O5e();const t=az();if(xo.type!==NA)throw new Error("Unexpect token after expression.");return t}var I5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function N5e(e){function t(s,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&_t("Missing arguments to clamp function."),s.length>3&&_t("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&_t("Missing arguments to if function."),s.length>3&&_t("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Elt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Alt(e){e=e||{};const t=e.allowed?hc(e.allowed):{},n=e.forbidden?hc(e.forbidden):{},r=e.constants||I5e,i=(e.functions||N5e)(c),o=e.globalvar,s=e.fieldvar,a=Br(o)?o:h=>`${o}["${h}"]`;let l={},u={},f=0;function c(h){if(pn(h))return h;const g=d[h.type];return g==null&&_t("Unsupported type: "+h.type),g(h)}const d={Literal:h=>h.raw,Identifier:h=>{const g=h.name;return f>0?g:yn(n,g)?_t("Illegal identifier: "+g):yn(r,g)?r[g]:yn(t,g)?g:(l[g]=1,a(g))},MemberExpression:h=>{const g=!h.computed,m=c(h.object);g&&(f+=1);const y=c(h.property);return m===s&&(u[Elt(y)]=1),g&&(f-=1),m+(g?"."+y:"["+y+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&_t("Illegal callee type: "+h.callee.type);const g=h.callee.name,m=h.arguments,y=yn(i,g)&&i[g];return y||_t("Unrecognized function: "+g),Br(y)?y(m):y+"("+m.map(c).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(c).join(",")+"]",BinaryExpression:h=>"("+c(h.left)+" "+h.operator+" "+c(h.right)+")",UnaryExpression:h=>"("+h.operator+c(h.argument)+")",ConditionalExpression:h=>"("+c(h.test)+"?"+c(h.consequent)+":"+c(h.alternate)+")",LogicalExpression:h=>"("+c(h.left)+h.operator+c(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(c).join(",")+"}",Property:h=>{f+=1;const g=c(h.key);return f-=1,g+":"+c(h.value)}};function p(h){const g={code:c(h),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return p.functions=i,p.constants=r,p}const Clt="Literal";var fh,Slt=1,klt=2,Tlt=3,Dlt=4,Llt=5,Rlt=6,Flt=7,$lt=8,Mlt=9;fh={};fh[Slt]="Boolean";fh[klt]="<end>";fh[Tlt]="Identifier";fh[Dlt]="Keyword";fh[Llt]="Null";fh[Rlt]="Numeric";fh[Flt]="Punctuator";fh[$lt]="String";fh[Mlt]="RegularExpression";const m_e=Symbol("vega_selection_getter");function P5e(e){return(!e.getter||!e.getter[m_e])&&(e.getter=Vc(e.field),e.getter[m_e]=!0),e.getter}const lz="intersect",v_e="union",Olt="vlMulti",Ilt="vlPoint",y_e="or",Nlt="and",Td="_vgsid_",yE=Vc(Td),Plt="E",Blt="R",zlt="R-E",Ult="R-LE",jlt="R-RE",Hlt="E-LT",qlt="E-LTE",Glt="E-GT",Wlt="E-GTE",Vlt="E-VALID",Ylt="E-ONE",jT="index:unit";function b_e(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=P5e(a)(e),im(s)&&(s=_l(s)),im(r[o])&&(r[o]=_l(r[o])),Dt(r[o])&&im(r[o][0])&&(r[o]=r[o].map(_l)),a.type===Plt){if(Dt(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===Blt){if(!Tb(s,r[o]))return!1}else if(a.type===jlt){if(!Tb(s,r[o],!0,!1))return!1}else if(a.type===zlt){if(!Tb(s,r[o],!1,!1))return!1}else if(a.type===Ult){if(!Tb(s,r[o],!1,!0))return!1}else if(a.type===Hlt){if(s>=r[o])return!1}else if(a.type===qlt){if(s>r[o])return!1}else if(a.type===Glt){if(s<=r[o])return!1}else if(a.type===Wlt){if(s<r[o])return!1}else if(a.type===Vlt){if(s===null||isNaN(s))return!1}else if(a.type===Ylt&&r[o].indexOf(s)===-1)return!1;return!0}function Xlt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[jT]&&r[jT].value:void 0,s=n===lz,a=i.length,l=0,u,f,c,d,p;l<a;++l)if(u=i[l],o&&s){if(f=f||{},c=f[d=u.unit]||0,c===-1)continue;if(p=b_e(t,u),f[d]=p?-1:++c,p&&o.size===1)return!0;if(!p&&c===o.get(d).count)return!1}else if(p=b_e(t,u),s^p)return p;return a&&s}const B5e=LL(yE),Klt=B5e.left,Zlt=B5e.right;function Qlt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[jT]&&r[jT].value:void 0,s=n===lz,a=yE(t),l=Klt(i,a);if(l===i.length||yE(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(Zlt(i,a)-l<o.size)return!1}return!0}function Jlt(e,t){return e.map(n=>Kr(t.fields?{values:t.fields.map(r=>P5e(r)(n.datum))}:{[Td]:yE(n.datum)},t))}function eut(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,f,c,d,p,h,g,m,y,v,x=o.length,_=0,E,C;_<x;++_)if(u=o[_],d=u.unit,f=u.fields,c=u.values,f&&c){for(E=0,C=f.length;E<C;++E)p=f[E],g=s[p.field]||(s[p.field]={}),m=g[d]||(g[d]=[]),l[p.field]=y=p.type.charAt(0),v=RM[`${y}_union`],g[d]=v(m,vn(c[E]));n&&(m=a[d]||(a[d]=[]),m.push(vn(c).reduce((w,T,R)=>(w[f[R].field]=T,w),{})))}else p=Td,h=yE(u),g=s[p]||(s[p]={}),m=g[d]||(g[d]=[]),m.push(h),n&&(m=a[d]||(a[d]=[]),m.push({[Td]:h}));if(t=t||v_e,s[Td]?s[Td]=RM[`${Td}_${t}`](...Object.values(s[Td])):Object.keys(s).forEach(w=>{s[w]=Object.keys(s[w]).map(T=>s[w][T]).reduce((T,R)=>T===void 0?R:RM[`${l[w]}_${t}`](T,R))}),o=Object.keys(a),n&&o.length){const w=r?Ilt:Olt;s[w]=t===v_e?{[y_e]:o.reduce((T,R)=>(T.push(...a[R]),T),[])}:{[Nlt]:o.map(T=>({[y_e]:a[T]}))}}return s}var RM={[`${Td}_union`]:zWe,[`${Td}_intersect`]:PWe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=_l(t[0]),r=_l(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=_l(t[0]),r=_l(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const tut=":",nut="@";function uz(e,t,n,r){t[0].type!==Clt&&_t("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Ri(t).value,s="unit",a=nut+s,l=tut+i;o===lz&&!yn(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),yn(r,l)||(r[l]=n.getData(i).tuplesRef())}function z5e(e){const t=this.context.data[e];return t?t.values.value:[]}function rut(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function iut(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Yc).insert(t)),1}function out(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const zA=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},sut=zA("format"),U5e=zA("timeFormat"),aut=zA("utcFormat"),lut=zA("timeParse"),uut=zA("utcParse"),$S=new Date(2e3,0,1);function BR(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":($S.setYear(2e3),$S.setMonth(e),$S.setDate(t),U5e.call(this,$S,n))}function cut(e){return BR.call(this,e,1,"%B")}function fut(e){return BR.call(this,e,1,"%b")}function dut(e){return BR.call(this,0,2+e,"%A")}function hut(e){return BR.call(this,0,2+e,"%a")}const put=":",gut="@",D6="%",j5e="$";function cz(e,t,n,r){t[0].type!==T1&&_t("First argument to data functions must be a string literal.");const i=t[0].value,o=put+i;if(!yn(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function mut(e,t,n,r){t[0].type!==T1&&_t("First argument to indata must be a string literal."),t[1].type!==T1&&_t("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=gut+o;yn(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function tu(e,t,n,r){if(t[0].type===T1)x_e(n,r,t[0].value);else for(e in n.scales)x_e(n,r,e)}function x_e(e,t,n){const r=D6+n;if(!yn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function dh(e,t){if(pn(e)){const n=t.scales[e];return n&&Ewe(n.value)?n.value:void 0}else if(Br(e))return Ewe(e)?e:void 0}function vut(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=tu,n._range=tu,n._scale=tu;const r=i=>"_["+(i.type===T1?Qt(D6+i.value):Qt(D6)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function fz(e,t){return function(n,r,i){if(n){const o=dh(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const yut=fz("area",Ant),but=fz("bounds",Tnt),xut=fz("centroid",Mnt);function wut(e,t){const n=dh(e,(t||this).context);return n&&n.scale()}function _ut(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function dz(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Eut(){return dz(this.context.dataflow,"warn",arguments)}function Aut(){return dz(this.context.dataflow,"info",arguments)}function Cut(){return dz(this.context.dataflow,"debug",arguments)}function FM(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function L6(e){const t=T3(e),n=FM(t.r),r=FM(t.g),i=FM(t.b);return .2126*n+.7152*r+.0722*i}function Sut(e,t){const n=L6(e),r=L6(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function kut(){const e=[].slice.call(arguments);return e.unshift({}),Kr(...e)}function H5e(e,t){return e===t||e!==e&&t!==t?!0:Dt(e)?Dt(t)&&e.length===t.length?Tut(e,t):!1:mn(e)&&mn(t)?q5e(e,t):!1}function Tut(e,t){for(let n=0,r=e.length;n<r;++n)if(!H5e(e[n],t[n]))return!1;return!0}function q5e(e,t){for(const n in e)if(!H5e(e[n],t[n]))return!1;return!0}function w_e(e){return t=>q5e(e,t)}function Dut(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let f=a.changes,c,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=s.changeset(),f.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(c=n===!0?Yc:Dt(n)||eR(n)?n:w_e(n),f.remove(c)),t&&f.insert(t),r&&(c=w_e(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(d in o)f.modify(i,d,o[d]);return 1}function Lut(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Rut(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const __e={};function Fut(e,t){const n=__e[t]||(__e[t]=Vc(t));return Dt(e)?e.map(n):n(e)}function zR(e){return Dt(e)||ArrayBuffer.isView(e)?e:null}function hz(e){return zR(e)||(pn(e)?e:null)}function $ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zR(e).join(...n)}function Mut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hz(e).indexOf(...n)}function Out(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hz(e).lastIndexOf(...n)}function Iut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hz(e).slice(...n)}function Nut(e,t,n){return Br(n)&&_t("Function argument passed to replace."),!pn(t)&&!yP(t)&&_t("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Put(e){return zR(e).slice().reverse()}function But(e){return zR(e).slice().sort(gA)}function zut(e,t,n){return kB(e||0,t||0,n||0)}function Uut(e,t){const n=dh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function jut(e,t){const n=dh(e,(t||this).context);return n?n.copy():void 0}function Hut(e,t){const n=dh(e,(t||this).context);return n?n.domain():[]}function qut(e,t,n){const r=dh(e,(n||this).context);return r?Dt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Gut(e,t){const n=dh(e,(t||this).context);return n&&n.range?n.range():[]}function Wut(e,t,n){const r=dh(e,(n||this).context);return r?r(t):void 0}function Vut(e,t,n,r,i){e=dh(e,(i||this).context);const o=OFe(t,n);let s=e.domain(),a=s[0],l=Ri(s),u=$l;return l-a?u=EFe(e,a,l):e=(e.interpolator?to("sequential")().interpolator(e.interpolator()):to("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==Ri(s)&&s.push(l)),s.forEach(f=>o.stop(u(f),e(f))),o}function Yut(e,t,n){const r=dh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Xut(e){let t=null;return function(n){return n?lE(n,t=t||x1(e)):e}}const G5e=e=>e.data;function W5e(e,t){const n=z5e.call(t,e);return n.root&&n.root.lookup||{}}function Kut(e,t,n){const r=W5e(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(G5e):void 0}function Zut(e,t){const n=W5e(e,this)[t];return n?n.ancestors().map(G5e):void 0}const V5e=()=>typeof window<"u"&&window||null;function Qut(){const e=V5e();return e?e.screen:{}}function Jut(){const e=V5e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ect(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Y5e(e,t,n){if(!e)return[];const[r,i]=e,o=new Zs().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return F$e(s,o,tct(t))}function tct(e){let t=null;if(e){const n=vn(e.marktype),r=vn(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function nct(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=vn(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function rct(e){return vn(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function ict(e,t,n){const{x:r,y:i,mark:o}=n,s=new Zs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),Y5e([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>oct(l.x,l.y,t))}function oct(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const bE={random(){return Kc()},cumulativeNormal:oR,cumulativeLogNormal:UP,cumulativeUniform:GP,densityNormal:IP,densityLogNormal:zP,densityUniform:qP,quantileNormal:sR,quantileLogNormal:jP,quantileUniform:WP,sampleNormal:iR,sampleLogNormal:BP,sampleUniform:HP,isArray:Dt,isBoolean:Im,isDate:im,isDefined(e){return e!==void 0},isNumber:eo,isObject:mn,isRegExp:yP,isString:pn,isTuple:eR,isValid(e){return e!=null&&e===e},toBoolean:xP,toDate(e){return wP(e)},toNumber:_l,toString:_P,indexof:Mut,join:$ut,lastindexof:Out,replace:Nut,reverse:Put,sort:But,slice:Iut,flush:hLe,lerp:gLe,merge:kut,pad:yLe,peek:Ri,pluck:Fut,span:mA,inrange:Tb,truncate:bLe,rgb:T3,lab:tI,hcl:rGe,hsl:eI,luminance:L6,contrast:Sut,sequence:nc,format:sut,utcFormat:aut,utcParse:uut,utcOffset:MLe,utcSequence:NLe,timeFormat:U5e,timeParse:lut,timeOffset:$Le,timeSequence:ILe,timeUnitSpecifier:_Le,monthFormat:cut,monthAbbrevFormat:fut,dayFormat:dut,dayAbbrevFormat:hut,quarter:uLe,utcquarter:cLe,week:ALe,utcweek:kLe,dayofyear:ELe,utcdayofyear:SLe,warn:Eut,info:Aut,debug:Cut,extent(e){return Zd(e)},inScope:_ut,intersect:Y5e,clampRange:fLe,pinchDistance:Lut,pinchAngle:Rut,screen:Qut,containerSize:ect,windowSize:Jut,bandspace:zut,setdata:iut,pathShape:Xut,panLinear:oLe,panLog:sLe,panPow:aLe,panSymlog:lLe,zoomLinear:hP,zoomLog:pP,zoomPow:q3,zoomSymlog:gP,encode:out,modify:Dut,lassoAppend:nct,lassoPath:rct,intersectLasso:ict},sct=["view","item","group","xy","x","y"],act="event.vega.",X5e="this.",pz={},K5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Qt(j5e+e)}]`,functions:lct,constants:I5e,visitors:pz},R6=Alt(K5e);function lct(e){const t=N5e(e);sct.forEach(n=>t[n]=act+n);for(const n in bE)t[n]=X5e+n;return Kr(t,vut(e,bE,pz)),t}function zs(e,t,n){return arguments.length===1?bE[e]:(bE[e]=t,n&&(pz[e]=n),R6&&(R6.functions[e]=X5e+e),this)}zs("bandwidth",Uut,tu);zs("copy",jut,tu);zs("domain",Hut,tu);zs("range",Gut,tu);zs("invert",qut,tu);zs("scale",Wut,tu);zs("gradient",Vut,tu);zs("geoArea",yut,tu);zs("geoBounds",but,tu);zs("geoCentroid",xut,tu);zs("geoShape",Yut,tu);zs("geoScale",wut,tu);zs("indata",rut,mut);zs("data",z5e,cz);zs("treePath",Kut,cz);zs("treeAncestors",Zut,cz);zs("vlSelectionTest",Xlt,uz);zs("vlSelectionIdTest",Qlt,uz);zs("vlSelectionResolve",eut,uz);zs("vlSelectionTuples",Jlt);function eh(e,t){const n={};let r;try{e=pn(e)?e:Qt(e)+"",r=_lt(e)}catch{_t("Expression parse error: "+e)}r.visit(o=>{if(o.type!==D5e)return;const s=o.callee.name,a=K5e.visitors[s];a&&a(s,o.arguments,t,n)});const i=R6(r);return i.globals.forEach(o=>{const s=j5e+o;!yn(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Kr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function uct(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const cct=hc(["rule"]),E_e=hc(["group","image","rect"]);function fct(e,t){let n="";return cct[t]||(e.x2&&(e.x?(E_e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(E_e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function gz(e){return(e+"").toLowerCase()}function dct(e){return gz(e)==="operator"}function hct(e){return gz(e)==="collect"}function b2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function pct(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var gct={operator:(e,t)=>b2(e,["_"],t.code),parameter:(e,t)=>b2(e,["datum","_"],t.code),event:(e,t)=>b2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return b2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+Qt(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=fct(r,n),i+="return m;",b2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Qt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),pct(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function mct(e){const t=this;dct(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function vct(e){const t=this;if(e.params){const n=t.get(e.id);n||_t("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function yct(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Dt(i)?i.map(o=>A_e(o,n,t)):A_e(i,n,t)}return t}function A_e(e,t,n){if(!e||!mn(e))return e;for(let r=0,i=C_e.length,o;r<i;++r)if(o=C_e[r],yn(e,o.key))return o.parse(e,t,n);return e}var C_e=[{key:"$ref",parse:bct},{key:"$key",parse:wct},{key:"$expr",parse:xct},{key:"$field",parse:_ct},{key:"$encode",parse:Act},{key:"$compare",parse:Ect},{key:"$context",parse:Cct},{key:"$subflow",parse:Sct},{key:"$tupleid",parse:kct}];function bct(e,t){return t.get(e.$ref)||_t("Operator not defined: "+e.$ref)}function xct(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ju(t.parameterExpression(e.$expr),e.$fields))}function wct(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=bP(e.$key,e.$flat,t.expr.codegen))}function _ct(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Vc(e.$field,e.$name,t.expr.codegen))}function Ect(e,t){const n="c:"+e.$compare+"_"+e.$order,r=vn(e.$compare).map(i=>i&&i.$tupleid?Zn:i);return t.fn[n]||(t.fn[n]=mP(r,e.$order,t.expr.codegen))}function Act(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=ju(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Cct(e,t){return t}function Sct(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function kct(){return Zn}function Tct(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&_t("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Dct(e){var t=this,n=mn(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||_t("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Lct={skip:!0};function Rct(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Fct(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Lct)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Yc).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function Z5e(e,t,n,r){return new Q5e(e,t,n,r)}function Q5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||gct,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function S_e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Q5e.prototype=S_e.prototype={fork(){const e=new S_e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),hct(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[gz(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:uct,parseOperator:mct,parseOperatorParameters:vct,parseParameters:yct,parseStream:Tct,parseUpdate:Dct,getState:Rct,setState:Fct};function $ct(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),J5e(t,e.description()))}function J5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Mct(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const $M="default";function Oct(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:$M,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?pn(i)?i:i.user:$M,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pn(r)||(i=r.item,r=r.user),F6(e,r&&r!==$M?r:i||r),i},{cursor:t})}function F6(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function HT(e,t){var n=e._runtime.data;return yn(n,t)||_t("Unrecognized data set: "+t),n[t]}function Ict(e,t){return arguments.length<2?HT(this,e).values.value:UR.call(this,e,iy().remove(Yc).insert(t))}function UR(e,t){rRe(t)||_t("Second argument to changes must be a changeset.");const n=HT(this,e);return n.modified=!0,this.pulse(n.input,t)}function Nct(e,t){return UR.call(this,e,iy().insert(t))}function Pct(e,t){return UR.call(this,e,iy().remove(t))}function eOe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function tOe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function jR(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Bct(e){var t=jR(e),n=eOe(e),r=tOe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function zct(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=jR(e),s=t.changedTouches?t.changedTouches[0]:t,o=kR(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Uct(e,n,o),t}function Uct(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;pn(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Ml(e),item:Ml(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const k_e="view",jct="timer",Hct="window",qct={trap:!1};function Gct(e){const t=Kr({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{Dt(r[o])&&(r[o]=hc(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function nOe(e,t,n,r){e._eventListeners.push({type:n,sources:vn(t),handler:r})}function Wct(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function MS(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mn(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Vct(e,t,n){var r=this,i=new rR(n),o=function(u,f){r.runAsync(null,()=>{e===k_e&&Wct(r,t)&&u.preventDefault(),i.receive(zct(r,u,f))})},s;if(e===jct)MS(r,"timer",t)&&r.timer(o,t);else if(e===k_e)MS(r,"view",t)&&r.addEventListener(t,o,qct);else if(e===Hct?MS(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&MS(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);nOe(r,s,t,o)}return i}function T_e(e){return e.item}function D_e(e){return e.item.mark.source}function L_e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Yct(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",T_e),D_e,L_e(e)),this.on(this.events("view","pointerout",T_e),D_e,L_e(t)),this}function Xct(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function lc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Kct="vega-bind",Zct="vega-bind-name",Qct="vega-bind-radio";function Jct(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=vP(r.debounce,i.update))),(r.input==null&&r.element?eft:nft)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function eft(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),nOe(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(tft(i))}}function tft(e){return typeof Event<"u"?new Event(e):{type:e}}function nft(e,t,n,r){const i=r.signal(n.signal),o=lc("div",{class:Kct}),s=n.input==="radio"?o:o.appendChild(lc("label"));s.appendChild(lc("span",{class:Zct},n.name||n.signal)),t.appendChild(o);let a=rft;switch(n.input){case"checkbox":a=ift;break;case"select":a=oft;break;case"radio":a=sft;break;case"range":a=aft;break}a(e,s,n,i)}function rft(e,t,n,r){const i=lc("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function ift(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=lc("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function oft(e,t,n,r){const i=lc("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};qT(s,r)&&(l.selected=!0),i.appendChild(lc("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(qT(n.options[a],s)){i.selectedIndex=a;return}}}function sft(e,t,n,r){const i=lc("span",{class:Qct}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};qT(s,r)&&(l.checked=!0);const u=lc("input",l);u.addEventListener("change",()=>e.update(s));const f=lc("label",{},(o[a]||s)+"");return f.prepend(u),i.appendChild(f),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)qT(a[u].value,s)&&(a[u].checked=!0)}}function aft(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Av(o,i,100),a=lc("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=lc("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function qT(e,t){return e===t||e+""==t+""}function rOe(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,eOe(e),tOe(e),jR(e),i,o).background(e.background())}function mz(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function lft(e,t,n,r){const i=new r(e.loader(),mz(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,jR(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function uft(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=TR(r);e=n._el=e?MM(n,e,!0):null,$ct(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||FA,a=e?o.renderer:o.headless;return n._renderer=a?rOe(n,n._renderer,e,a):null,n._handler=lft(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=MM(n,t,!0):e.appendChild(lc("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=MM(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Jct(n,l.element||t,l)})),n}function MM(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const x2=e=>+e||0,cft=e=>({top:e,bottom:e,left:e,right:e});function R_e(e){return mn(e)?{top:x2(e.top),bottom:x2(e.bottom),left:x2(e.left),right:x2(e.right)}:cft(x2(e))}async function vz(e,t,n,r){const i=TR(t),o=i&&i.headless;return o||_t("Unrecognized renderer type: "+t),await e.runAsync(),rOe(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function fft(e,t){e!==Vg.Canvas&&e!==Vg.SVG&&e!==Vg.PNG&&_t("Unrecognized image type: "+e);const n=await vz(this,e,t);return e===Vg.SVG?dft(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function dft(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function hft(e,t){return(await vz(this,Vg.Canvas,e,t)).canvas()}async function pft(e){return(await vz(this,Vg.SVG,e)).svg()}function gft(e,t,n){return Z5e(e,g1,bE,n).parse(t)}function mft(e){var t=this._runtime.scales;return yn(t,e)||_t("Unrecognized scale or projection: "+e),t[e].value}var iOe="width",oOe="height",yz="padding",F_e={skip:!0};function sOe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yz?r.left+r.right:0)}function aOe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yz?r.top+r.bottom:0)}function vft(e){var t=e._signals,n=t[iOe],r=t[oOe],i=t[yz];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=sOe(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=aOe(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function yft(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(iOe,n,F_e),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(oOe,r,F_e),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function bft(e){return this._runtime.getState(e||{data:xft,signals:wft,recurse:!0})}function xft(e,t){return t.modified&&Dt(t.input.value)&&!e.startsWith("_:vega:_")}function wft(e,t){return!(e==="parent"||t instanceof g1.proxy)}function _ft(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Eft(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Oit(n,t))}function Aft(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Cft(r))}function Cft(e){return e==null?"":Dt(e)?lOe(e):mn(e)&&!im(e)?Sft(e):e+""}function Sft(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Dt(n)?lOe(n):uOe(n))}).join(`
`)}function lOe(e){return"["+e.map(uOe).join(", ")+"]"}function uOe(e){return Dt(e)?"[]":mn(e)&&!im(e)?"{}":e}function kft(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function cOe(e,t){const n=this;if(t=t||{},Ub.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Kr({},e.locale,t.locale);n.locale(VLe(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vg.Canvas,n._scenegraph=new o$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Aft,n._redraw=!0,n._handler=new FA().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Gct(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=gft(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Kr({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=sOe(n,n._width),n._viewHeight=aOe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,vft(n),Mct(n),Oct(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function OS(e,t){return yn(e._signals,t)?e._signals[t]:_t("Unrecognized signal name: "+Qt(t))}function fOe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function $_e(e,t,n,r){let i=fOe(n,r);return i||(i=mz(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function M_e(e,t,n){const r=fOe(t,n);return r&&t._targets.remove(r),e}tn(cOe,Ub,{async evaluate(e,t,n){if(await Ub.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Bct(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Ok(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&J5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=OS(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",R_e(e)):R_e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(TR(e)||_t("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Ub.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(OS(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:yft,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=mz(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return $_e(this,e,OS(this,e),t)},removeSignalListener(e,t){return M_e(this,OS(this,e),t)},addDataListener(e,t){return $_e(this,e,HT(this,e).values,t)},removeDataListener(e,t){return M_e(this,HT(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=F6(this,null);this._globalCursor=!!e,t&&F6(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Eft,events:Vct,finalize:Xct,hover:Yct,data:Ict,change:UR,insert:Nct,remove:Pct,scale:mft,initialize:uft,toImageURL:fft,toCanvas:hft,toSVG:pft,getState:bft,setState:_ft,_watchPixelRatio:kft});const Tft="view",GT="[",WT="]",dOe="{",hOe="}",Dft=":",pOe=",",Lft="@",Rft=">",Fft=/[[\]{}]/,$ft={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let gOe,mOe;function Pm(e,t,n){return gOe=t||Tft,mOe=n||$ft,vOe(e.trim()).map($6)}function Mft(e){return mOe[e]}function T_(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function vOe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=T_(e,i,pOe,GT+dOe,WT+hOe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function $6(e){return e[0]==="["?Oft(e):Ift(e)}function Oft(e){const t=e.length;let n=1,r;if(n=T_(e,n,WT,GT,WT),n===t)throw"Empty between selector: "+e;if(r=vOe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Rft)throw"Expected '>' after between selector: "+e;r=r.map($6);const i=$6(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Ift(e){const t={source:gOe},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===hOe){if(a=e.lastIndexOf(dOe),a>=0){try{r=Nft(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Lft&&(i=++a),l=T_(e,a,Dft),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=T_(e,a,GT),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=T_(e,a,WT),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==GT)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||Fft.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Mft(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Nft(e){const t=e.split(pOe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Pft(e){return mn(e)?e:{type:e||"pad"}}const w2=e=>+e||0,Bft=e=>({top:e,bottom:e,left:e,right:e});function zft(e){return mn(e)?e.signal?e:{top:w2(e.top),bottom:w2(e.bottom),left:w2(e.left),right:w2(e.right)}:Bft(w2(e))}const Ca=e=>mn(e)&&!Dt(e)?Kr({},e):{value:e};function O_e(e,t,n,r){return n!=null?(mn(n)&&!Dt(n)||Dt(n)&&n.length&&mn(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function nl(e,t,n){for(const r in t)O_e(e,r,t[r]);for(const r in n)O_e(e,r,n[r],"update")}function bx(e,t,n){for(const r in t)n&&yn(n,r)||(e[r]=Kr(e[r]||{},t[r]));return e}function yb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const bz="mark",xz="frame",wz="scope",Uft="axis",jft="axis-domain",Hft="axis-grid",qft="axis-label",Gft="axis-tick",Wft="axis-title",Vft="legend",Yft="legend-band",Xft="legend-entry",Kft="legend-gradient",yOe="legend-label",Zft="legend-symbol",Qft="legend-title",Jft="title",edt="title-text",tdt="title-subtitle";function ndt(e,t,n,r,i){const o={},s={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!yb(l,e)&&OM(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===xz?i.group:n===bz?Kr({},i.mark,i[t]):null;for(l in f)u=yb(l,e)||(l==="fill"||l==="stroke")&&(yb("fill",e)||yb("stroke",e)),u||OM(o,l,f[l]);vn(r).forEach(c=>{const d=i.style&&i.style[c];for(const p in d)yb(p,e)||OM(o,p,d[p])}),e=Kr({},e);for(l in o)f=o[l],f.signal?(a=a||{})[l]=f:s[l]=f;return e.enter=Kr(s,e.enter),a&&(e.update=Kr(a,e.update)),e}function OM(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const bOe=e=>pn(e)?Qt(e):e.signal?`(${e.signal})`:xOe(e);function HR(e){if(e.gradient!=null)return idt(e);let t=e.signal?`(${e.signal})`:e.color?rdt(e.color):e.field!=null?xOe(e.field):e.value!==void 0?Qt(e.value):void 0;return e.scale!=null&&(t=odt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Jk(e.exponent)})`),e.mult!=null&&(t+=`*${Jk(e.mult)}`),e.offset!=null&&(t+=`+${Jk(e.offset)}`),e.round&&(t=`round(${t})`),t}const IS=(e,t,n,r)=>`(${e}(${[t,n,r].map(HR).join(",")})+'')`;function rdt(e){return e.c?IS("hcl",e.h,e.c,e.l):e.h||e.s?IS("hsl",e.h,e.s,e.l):e.l||e.a?IS("lab",e.l,e.a,e.b):e.r||e.g||e.b?IS("rgb",e.r,e.g,e.b):null}function idt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Qt(n));for(;t.length&&Ri(t)==null;)t.pop();return t.unshift(bOe(e.gradient)),`gradient(${t.join(",")})`}function Jk(e){return mn(e)?"("+HR(e)+")":e}function xOe(e){return wOe(mn(e)?e:{datum:e})}function wOe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):_t("Invalid field reference: "+Qt(e));return e.signal||(r=pn(r)?sh(r).map(Qt).join("]["):wOe(r)),t+"["+r+"]"}function odt(e,t){const n=bOe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Jk(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function sdt(e){let t="";return e.forEach(n=>{const r=HR(n);t+=n.test?`(${n.test})?${r}:`:r}),Ri(t)===":"&&(t+="null"),t}function _Oe(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=ndt(e,t,n,r,i.config);for(const a in e)s[a]=adt(e[a],t,o,i);return o}function adt(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=udt(ldt(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function ldt(e){return Dt(e)?sdt(e):HR(e)}function udt(e,t,n,r){const i=eh(e,t);return i.$fields.forEach(o=>r[o]=1),Kr(n,i.$params),i.$expr}const cdt="outer",fdt=["value","update","init","react","bind"];function I_e(e,t){_t(e+' for "outer" push: '+Qt(t))}function EOe(e,t){const n=e.name;if(e.push===cdt)t.signals[n]||I_e("No prior signal definition",n),fdt.forEach(r=>{e[r]!==void 0&&I_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function M6(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function qR(e,t,n,r){return new M6(e,t,n,r)}function VT(e,t){return qR("operator",e,t)}function Kn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function xE(e,t){return t?{$field:e,$name:t}:{$field:e}}const O6=xE("key");function N_e(e,t){return{$compare:e,$order:t}}function ddt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const hdt="ascending",pdt="descending";function gdt(e){return mn(e)?(e.order===pdt?"-":"+")+GR(e.op,e.field):""}function GR(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const _z="scope",I6="view";function ua(e){return e&&e.signal}function mdt(e){return e&&e.expr}function e3(e){if(ua(e))return!0;if(mn(e)){for(const t in e)if(e3(e[t]))return!0}return!1}function wf(e,t){return e??t}function gv(e){return e&&e.signal||e}const P_e="timer";function wE(e,t){return(e.merge?ydt:e.stream?bdt:e.type?xdt:_t("Invalid stream specification: "+Qt(e)))(e,t)}function vdt(e){return e===_z?I6:e||I6}function ydt(e,t){const n=e.merge.map(i=>wE(i,t)),r=Ez({merge:n},e,t);return t.addStream(r).id}function bdt(e,t){const n=wE(e.stream,t),r=Ez({stream:n},e,t);return t.addStream(r).id}function xdt(e,t){let n;e.type===P_e?(n=t.event(P_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(vdt(e.source),e.type);const r=Ez({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Ez(e,t,n){let r=t.between;return r&&(r.length!==2&&_t('Stream "between" parameter must have 2 entries: '+Qt(t)),e.between=[wE(r[0],n),wE(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(wdt(t.marktype,t.markname,t.markrole)),t.source===_z&&r.push("inScope(event.item)"),r.length&&(e.filter=eh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function wdt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const _dt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Edt(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||_t("Signal update missing events specification."),pn(o)&&(o=Pm(o,t.isSubscope()?_z:I6)),o=vn(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Cdt(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&_t("Signal encode and update are mutually exclusive."),s="encode(item(),"+Qt(r)+")"),i.update=pn(s)?eh(s,t):s.expr!=null?eh(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:_dt,$params:{$value:t.signalRef(s.signal)}}:_t("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Kr(Adt(l,t),i)))}function Adt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):wE(e,t)}}function Cdt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Sdt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?_t("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=eh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Edt(i,t,n.id))}const $o=e=>(t,n,r)=>qR(e,n,t||void 0,r),AOe=$o("aggregate"),kdt=$o("axisticks"),COe=$o("bound"),Yf=$o("collect"),B_e=$o("compare"),Tdt=$o("datajoin"),SOe=$o("encode"),Ddt=$o("expression"),Ldt=$o("facet"),Rdt=$o("field"),Fdt=$o("key"),$dt=$o("legendentries"),Mdt=$o("load"),Odt=$o("mark"),Idt=$o("multiextent"),Ndt=$o("multivalues"),Pdt=$o("overlap"),Bdt=$o("params"),kOe=$o("prefacet"),zdt=$o("projection"),Udt=$o("proxy"),jdt=$o("relay"),TOe=$o("render"),Hdt=$o("scale"),ay=$o("sieve"),qdt=$o("sortitems"),DOe=$o("viewlayout"),Gdt=$o("values");let Wdt=0;const LOe={min:"min",max:"max",count:"sum"};function Vdt(e,t){const n=e.type||"linear";vFe(n)||_t("Unrecognized scale type: "+Qt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Ydt(e,t){const n=t.getScale(e.name).params;let r;n.domain=ROe(e.domain,e,t),e.range!=null&&(n.range=$Oe(e,t,n)),e.interpolate!=null&&iht(e.interpolate,n),e.nice!=null&&(n.nice=rht(e.nice,t)),e.bins!=null&&(n.bins=nht(e.bins,t));for(r in e)yn(n,r)||r==="name"||(n[r]=Bc(e[r],t))}function Bc(e,t){return mn(e)?e.signal?t.signalRef(e.signal):_t("Unsupported object: "+Qt(e)):e}function t3(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Bc(n,t))}function WR(e){_t("Can not find data set: "+Qt(e))}function ROe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&_t("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Dt(e)?Xdt:e.fields?Zdt:Kdt)(e,t,n)}function Xdt(e,t,n){return e.map(r=>Bc(r,n))}function Kdt(e,t,n){const r=n.getData(e.data);return r||WR(e.data),b1(t.type)?r.valuesRef(n,e.field,FOe(e.sort,!1)):xFe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Zdt(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=pn(s)?{data:r,field:s}:Dt(s)||s.signal?Qdt(s,n):s,o.push(s),o),[]);return(b1(t.type)?Jdt:xFe(t.type)?eht:tht)(e,n,i)}function Qdt(e,t){const n="_:vega:_"+Wdt++,r=Yf({});if(Dt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Qt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ay({})]),{data:n,field:"data"}}function Jdt(e,t,n){const r=FOe(e.sort,!0);let i,o;const s=n.map(u=>{const f=t.getData(u.data);return f||WR(u.data),f.countsRef(t,u.field,r)}),a={groupby:O6,pulse:s};r&&(i=r.op||"count",o=r.field?GR(i,r.field):"count",a.ops=[LOe[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(AOe(a));const l=t.add(Yf({pulse:Kn(i)}));return o=t.add(Gdt({field:O6,sort:t.sortRef(r),pulse:Kn(l)})),Kn(o)}function FOe(e,t){return e&&(!e.field&&!e.op?mn(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?_t("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!LOe[e.op]&&_t("Multiple domain scales can not be sorted using "+e.op)),e}function eht(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||WR(i.data),o.domainRef(t,i.field)});return Kn(t.add(Ndt({values:r})))}function tht(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||WR(i.data),o.extentRef(t,i.field)});return Kn(t.add(Idt({extents:r})))}function nht(e,t){return e.signal||Dt(e)?t3(e,t):t.objectProperty(e)}function rht(e,t){return e.signal?t.signalRef(e.signal):mn(e)?{interval:Bc(e.interval),step:Bc(e.step)}:Bc(e)}function iht(e,t){t.interpolate=Bc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Bc(e.gamma))}function $Oe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pn(i)){if(r&&yn(r,i))return e=Kr({},e,{range:r[i]}),$Oe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=b1(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:_t("Unrecognized scale range value: "+Qt(i))}else if(i.scheme){n.scheme=Dt(i.scheme)?t3(i.scheme,t):Bc(i.scheme,t),i.extent&&(n.schemeExtent=t3(i.extent,t)),i.count&&(n.schemeCount=Bc(i.count,t));return}else if(i.step){n.rangeStep=Bc(i.step,t);return}else{if(b1(e.type)&&!Dt(i))return ROe(i,e,t);Dt(i)||_t("Unsupported range type: "+Qt(i))}return i.map(o=>(Dt(o)?t3:Bc)(o,t))}function oht(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=N6(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=N6(n[i],i,t));t.addProjection(e.name,r)}function N6(e,t,n){return Dt(e)?e.map(r=>N6(r,t,n)):mn(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:_t("Unsupported parameter object: "+Qt(e)):e}const Xf="top",xx="left",wx="right",_m="bottom",MOe="center",sht="vertical",aht="start",lht="middle",uht="end",P6="index",Az="label",cht="offset",D1="perc",fht="perc2",jc="value",UA="guide-label",Cz="guide-title",dht="group-title",hht="group-subtitle",z_e="symbol",n3="gradient",B6="discrete",z6="size",pht="shape",ght="fill",mht="stroke",vht="strokeWidth",yht="strokeDash",bht="opacity",Sz=[z6,pht,ght,mht,vht,yht,bht],jA={name:1,style:1,interactive:1},Ii={value:0},Hc={value:1},VR="group",OOe="rect",kz="rule",xht="symbol",ly="text";function _E(e){return e.type=VR,e.interactive=e.interactive||!1,e}function Hu(e,t){const n=(r,i)=>wf(e[r],wf(t[r],i));return n.isVertical=r=>sht===wf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>wf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>wf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>wf(e.columns,wf(t.columns,+n.isVertical(!0))),n}function IOe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function wht(e,t,n){const r=t.config.style[n];return r&&r[e]}function YR(e,t,n){return`item.anchor === '${aht}' ? ${e} : item.anchor === '${uht}' ? ${t} : ${n}`}const Tz=YR(Qt(xx),Qt(wx),Qt(MOe));function _ht(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mn(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function NOe(e,t){return t?e?mn(e)?Object.assign({},e,{offset:NOe(e.offset,t)}):{value:e,offset:t}:t:e}function vc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=bx(e.encode,t,jA)):e.interactive=!1,e}function Eht(e,t,n,r){const i=Hu(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,f,c,d;o?(u=[0,1],f=[0,0],c=s,d=a):(u=[0,0],f=[1,0],c=a,d=s);const p={enter:l={opacity:Ii,x:Ii,y:Ii,width:Ca(c),height:Ca(d)},update:Kr({},l,{opacity:Hc,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:Ii}};return nl(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vc({type:OOe,role:Kft,encode:p},r)}function Aht(e,t,n,r,i){const o=Hu(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,f,c,d,p="";s?(u="y",c="y2",f="x",d="width",p="1-"):(u="x",c="x2",f="y",d="height");const h={opacity:Ii,fill:{scale:t,field:jc}};h[u]={signal:p+"datum."+D1,mult:l},h[f]=Ii,h[c]={signal:p+"datum."+fht,mult:l},h[d]=Ca(a);const g={enter:h,update:Kr({},h,{opacity:Hc}),exit:{opacity:Ii}};return nl(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vc({type:OOe,role:Yft,key:jc,from:i,encode:g},r)}const Cht=`datum.${D1}<=0?"${xx}":datum.${D1}>=1?"${wx}":"${MOe}"`,Sht=`datum.${D1}<=0?"${_m}":datum.${D1}>=1?"${Xf}":"${lht}"`;function U_e(e,t,n,r){const i=Hu(e,t),o=i.isVertical(),s=Ca(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,c,d,p="";const h={enter:u={opacity:Ii},update:f={opacity:Hc,text:{field:Az}},exit:{opacity:Ii}};return nl(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:wf(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=f.baseline={signal:Sht},c="y",d="x",p="1-"):(u.align=f.align={signal:Cht},u.baseline={value:"top"},c="x",d="y"),u[c]=f[c]={signal:p+"datum."+D1,mult:a},u[d]=f[d]=s,s.offset=wf(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+P6}:void 0,vc({type:ly,role:yOe,style:UA,key:jc,from:r,encode:h,overlap:l},n)}function kht(e,t,n,r,i){const o=Hu(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),f=o("symbolOffset"),c={data:"value"},d=`(${i}) ? datum.${cht} : datum.${z6}`,p=u?Ca(u):{field:z6},h=`datum.${P6}`,g=`max(1, ${i})`;let m,y,v,x,_;p.mult=.5,m={enter:y={opacity:Ii,x:{signal:d,mult:.5,offset:f},y:p},update:v={opacity:Hc,x:y.x,y:y.y},exit:{opacity:Ii}};let E=null,C=null;e.fill||(E=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),nl(m,{fill:o("symbolFillColor",E),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",C),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Sz.forEach(L=>{e[L]&&(v[L]=y[L]={scale:e[L],field:jc})});const w=vc({type:xht,role:Zft,key:jc,from:c,clip:u?!0:void 0,encode:m},n.symbols),T=Ca(f);T.offset=o("labelOffset"),m={enter:y={opacity:Ii,x:{signal:d,offset:T},y:p},update:v={opacity:Hc,text:{field:Az},x:y.x,y:y.y},exit:{opacity:Ii}},nl(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const R=vc({type:ly,role:yOe,style:UA,key:jc,from:c,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Ii,height:u?Ca(u):Ii,opacity:Ii},exit:{opacity:Ii},update:v={opacity:Hc,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(x=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${h}%${x}`,v.column.signal=`floor(${h} / ${x})`,_={field:["row",h]}):(v.row.signal=`floor(${h} / ${g})`,v.column.signal=`${h} % ${g}`,_={field:h}),v.column.signal=`(${i})?${v.column.signal}:${h}`,r={facet:{data:r,name:"value",groupby:P6}},_E({role:wz,from:r,encode:bx(m,s,jA),marks:[w,R],name:l,interactive:a,sort:_})}function Tht(e,t){const n=Hu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Dz='item.orient === "left"',Lz='item.orient === "right"',XR=`(${Dz} || ${Lz})`,Dht=`datum.vgrad && ${XR}`,Lht=YR('"top"','"bottom"','"middle"'),Rht=YR('"right"','"left"','"center"'),Fht=`datum.vgrad && ${Lz} ? (${Rht}) : (${XR} && !(datum.vgrad && ${Dz})) ? "left" : ${Tz}`,$ht=`item._anchor || (${XR} ? "middle" : "start")`,Mht=`${Dht} ? (${Dz} ? -90 : 90) : 0`,Oht=`${XR} ? (datum.vgrad ? (${Lz} ? "bottom" : "top") : ${Lht}) : "top"`;function Iht(e,t,n,r){const i=Hu(e,t),o={enter:{opacity:Ii},update:{opacity:Hc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ii}};return nl(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:$ht},angle:{signal:Mht},align:{signal:Fht},baseline:{signal:Oht},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vc({type:ly,role:Qft,style:Cz,from:r,encode:o},n)}function Nht(e,t){let n;return mn(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+j_e(e.path)+")":e.sphere&&(n="geoShape("+j_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function j_e(e){return mn(e)&&e.signal?e.signal:Qt(e)}function POe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===VR?wz:t||bz}function Pht(e){return{marktype:e.type,name:e.name||void 0,role:e.role||POe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Bht(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Rz(e,t){const n=sRe(e.type);n||_t("Unrecognized transform type: "+Qt(e.type));const r=qR(n.type.toLowerCase(),null,BOe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function BOe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=zht(s,t,n)}return r}function zht(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Uht(e,t,n);if(i===void 0){e.required&&_t("Missing required "+Qt(t.type)+" parameter: "+Qt(e.name));return}else{if(r==="param")return jht(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ua(i)?i.map(o=>H_e(e,o,n)):H_e(e,i,n)}function H_e(e,t,n){const r=e.type;if(ua(t))return G_e(r)?_t("Expression references can not be signals."):IM(r)?n.fieldRef(t):W_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||IM(r);return i&&Hht(t)?n.exprRef(t.expr,t.as):i&&qht(t)?xE(t.field,t.as):G_e(r)?eh(t,n):Ght(r)?Kn(n.getData(t).values):IM(r)?xE(t):W_e(r)?n.compareRef(t):t}}function Uht(e,t,n){return pn(t.from)||_t('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function jht(e,t,n){const r=t[e.name];return e.array?(Dt(r)||_t("Expected an array of sub-parameters. Instead: "+Qt(r)),r.map(i=>q_e(e,i,n))):q_e(e,r,n)}function q_e(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||_t("Unsupported parameter: "+Qt(t));const o=Kr(BOe(i,t,n),i.key);return Kn(n.add(Bdt(o)))}const Hht=e=>e&&e.expr,qht=e=>e&&e.field,Ght=e=>e==="data",G_e=e=>e==="expr",IM=e=>e==="field",W_e=e=>e==="compare";function Wht(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||_t("Only group marks can be faceted."),r.field!=null?s=a=r3(r,n):(e.data?a=Kn(n.getData(e.data).aggregate):(o=Rz(Kr({type:"aggregate",groupby:vn(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=r3(r,n),s=a=Kn(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Kn(n.add(Yf(null,[{}]))),s||(s=r3(e,n)),{key:i,pulse:s,parent:a}}function r3(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Kn(t.getData(e.data).output)}function $v(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}$v.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Kn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new $v(e,o,i,r,s)};function zOe(e){return pn(e)?e:null}function V_e(e,t,n){const r=GR(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function _2(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=gdt(o);let u=zOe(i),f,c;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const d=o?{field:O6,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Kn(t.output)};l&&(d.sort=e.sortRef(o)),c=e.add(qR(r,void 0,d)),s&&(t.index[i]=c),f=Kn(c),u!=null&&(a[u]=f)}return f}$v.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=zOe(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&V_e(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Kn(r.output)},n&&n.field&&V_e(e,l,n),a=e.add(AOe(l)),s=e.add(Yf({pulse:Kn(a)})),s={agg:a,ref:Kn(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Kn(this.values)},extentRef(e,t){return _2(e,this,"extent","extent",t,!1)},domainRef(e,t){return _2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return _2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return _2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return _2(e,this,"indata","tupleindex",t,!0,!0)}};function Vht(e,t,n){const r=e.from.facet,i=r.name,o=r3(r,t);let s;r.name||_t("Facet must have a name: "+Qt(r)),r.data||_t("Facet must reference a data set: "+Qt(r)),r.field?s=t.add(kOe({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(Ldt({key:t.keyRef(r.groupby),group:Kn(t.proxy(n.parent)),pulse:o})):_t("Facet must specify groupby or field: "+Qt(r));const a=t.fork(),l=a.add(Yf()),u=a.add(ay({pulse:Kn(l)}));a.addData(i,new $v(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function Yht(e,t,n){const r=t.add(kOe({pulse:n.pulse})),i=t.fork();i.add(ay()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function UOe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(VT()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(c=>c??"null").join(",")+"),0)",f=eh(u,t);l.update=f.$expr,l.params=f.$params}function KR(e,t){const n=POe(e),r=e.type===VR,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===wz||n===xz,a,l,u,f,c,d,p;const h=n===bz||s||i,g=Wht(e.from,r,t);l=t.add(Tdt({key:g.key||(e.key?xE(e.key):void 0),pulse:g.pulse,clean:!r}));const m=Kn(l);l=u=t.add(Yf({pulse:m})),l=t.add(Odt({markdef:Pht(e),interactive:Bht(e.interactive,t),clip:Nht(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Kn(l)}));const y=Kn(l);l=f=t.add(SOe(_Oe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const w=Rz(C,t),T=w.metadata;(T.generates||T.changes)&&_t("Mark transforms should not generate new data."),T.nomod||(f.params.mod=!0),w.params.pulse=Kn(l),t.add(l=w)}),e.sort&&(l=t.add(qdt({sort:t.compareRef(e.sort),pulse:Kn(l)})));const v=Kn(l);(i||s)&&(s=t.add(DOe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Kn(s));const x=t.add(COe({mark:y,pulse:d||v}));p=Kn(x),r&&(h&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||p,m),i?Vht(e,t,g):h?Yht(e,t,g):t.parse(e),t.popState(),h&&(s&&a.push(s),a.push(x))),o&&(p=Xht(o,p,t));const _=t.add(TOe({pulse:p})),E=t.add(ay({pulse:Kn(_)},void 0,t.parent()));e.name!=null&&(c=e.name,t.addData(c,new $v(t,u,_,E)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&_t("Marks only support modify triggers."),UOe(C,t,c)}))}function Xht(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:ua(o)?n.signalRef(o.signal):o,method:ua(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=ua(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Kn(n.add(Pdt(s)))}function Kht(e,t){const n=t.config.legend,r=e.encode||{},i=Hu(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let f=0,c,d,p;Sz.forEach(x=>e[x]?(u[x]=e[x],f=f||e[x]):0),f||_t("Missing valid scale for legend.");const h=Zht(e,t.scaleType(f)),g={title:e.title!=null,scales:u,type:h,vgrad:h!=="symbol"&&i.isVertical()},m=Kn(t.add(Yf(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=Kn(t.add($dt(d={type:h,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===n3?(p=[Eht(e,f,n,r.gradient),U_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${gv(i.gradientLength())})/100))`)):h===B6?p=[Aht(e,f,n,r.gradient,v),U_e(e,n,r.labels,v)]:(c=Tht(e,n),p=[kht(e,n,r,v,gv(c.columns))],d.size=ept(e,t,p[0].marks)),p=[_E({role:Xft,from:m,encode:y,marks:p,layout:c,interactive:a})],g.title&&p.push(Iht(e,n,r.title,m)),KR(_E({role:Vft,from:m,encode:bx(Jht(i,e,n),o,jA),marks:p,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function Zht(e,t){let n=e.type||z_e;return!e.type&&Qht(e)===1&&(e.fill||e.stroke)&&(n=FB(t)?n3:LI(t)?B6:z_e),n!==n3?n:LI(t)?B6:n3}function Qht(e){return Sz.reduce((t,n)=>t+(e[n]?1:0),0)}function Jht(e,t,n){const r={enter:{},update:{}};return nl(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function ept(e,t,n){const r=gv(Y_e("size",e,n)),i=gv(Y_e("strokeWidth",e,n)),o=gv(tpt(n[1].encode,t,UA));return eh(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Y_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:IOe(e,n[0].encode)}function tpt(e,t,n){return IOe("fontSize",e)||wht("fontSize",t,n)}const npt=`item.orient==="${xx}"?-90:item.orient==="${wx}"?90:0`;function rpt(e,t){e=pn(e)?{text:e}:e;const n=Hu(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},f=Kn(t.add(Yf(null,[u])));return l.push(spt(e,n,ipt(e),f)),e.subtitle&&l.push(apt(e,n,r.subtitle,f)),KR(_E({role:Jft,from:f,encode:opt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function ipt(e){const t=e.encode;return t&&t.title||Kr({name:e.name,interactive:e.interactive,style:e.style},t)}function opt(e,t){const n={enter:{},update:{}};return nl(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Tz},angle:{signal:npt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),bx(n,t,jA)}function spt(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nl(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vc({type:ly,role:edt,style:dht,from:r,encode:s},n)}function apt(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nl(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vc({type:ly,role:tdt,style:hht,from:r,encode:s},n)}function lpt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Rz(r,t))}),e.on&&e.on.forEach(r=>{UOe(r,t,e.name)}),t.addDataPipeline(e.name,upt(e,t,n))}function upt(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,f,c;for(e.values?ua(e.values)||e3(e.format)?(r.push(X_e(t,e)),r.push(i=$0())):r.push(i=$0({$ingest:e.values,$format:e.format})):e.url?e3(e.url)||e3(e.format)?(r.push(X_e(t,e)),r.push(i=$0())):r.push(i=$0({$request:e.url,$format:e.format})):e.source&&(i=a=vn(e.source).map(d=>Kn(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],c=f.metadata,!i&&!c.source&&r.push(i=$0()),r.push(f),c.generates&&(s=!0),c.modifies&&!s&&(o=!0),c.source?i=f:c.changes&&(i=null);return a&&(u=a.length-1,r[0]=jdt({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,$0())),i||r.push($0()),r.push(ay({})),r}function $0(e){const t=Yf({},e);return t.metadata={source:!0},t}function X_e(e,t){return Mdt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const jOe=e=>e===_m||e===Xf,ZR=(e,t,n)=>ua(e)?hpt(e.signal,t,n):e===xx||e===Xf?t:n,Sa=(e,t,n)=>ua(e)?fpt(e.signal,t,n):jOe(e)?t:n,Mf=(e,t,n)=>ua(e)?dpt(e.signal,t,n):jOe(e)?n:t,HOe=(e,t,n)=>ua(e)?ppt(e.signal,t,n):e===Xf?{value:t}:{value:n},cpt=(e,t,n)=>ua(e)?gpt(e.signal,t,n):e===wx?{value:t}:{value:n},fpt=(e,t,n)=>qOe(`${e} === '${Xf}' || ${e} === '${_m}'`,t,n),dpt=(e,t,n)=>qOe(`${e} !== '${Xf}' && ${e} !== '${_m}'`,t,n),hpt=(e,t,n)=>Fz(`${e} === '${xx}' || ${e} === '${Xf}'`,t,n),ppt=(e,t,n)=>Fz(`${e} === '${Xf}'`,t,n),gpt=(e,t,n)=>Fz(`${e} === '${wx}'`,t,n),qOe=(e,t,n)=>(t=t!=null?Ca(t):t,n=n!=null?Ca(n):n,K_e(t)&&K_e(n)?(t=t?t.signal||Qt(t.value):null,n=n?n.signal||Qt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Kr({test:e},t)].concat(n||[])),K_e=e=>e==null||Object.keys(e).length===1,Fz=(e,t,n)=>({signal:`${e} ? (${$b(t)}) : (${$b(n)})`}),mpt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${xx}' ? (${$b(r)}) : `:"")+(n!=null?`${e} === '${_m}' ? (${$b(n)}) : `:"")+(i!=null?`${e} === '${wx}' ? (${$b(i)}) : `:"")+(t!=null?`${e} === '${Xf}' ? (${$b(t)}) : `:"")+"(null)"}),$b=e=>ua(e)?e.signal:e==null?null:Qt(e),vpt=(e,t)=>t===0?0:ua(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Hb=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function nb(e,t,n,r){let i;if(t&&yn(t,e))return t[e];if(yn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Cz][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[UA][i]}return null}function Z_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function ypt(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(ua(s)){const c=Z_e([n.axisX,n.axisY]),d=Z_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of c)a[u]=Sa(s,nb(u,n.axisX,i,r),nb(u,n.axisY,i,r));l={};for(u of d)l[u]=mpt(s.signal,nb(u,n.axisTop,i,r),nb(u,n.axisBottom,i,r),nb(u,n.axisLeft,i,r),nb(u,n.axisRight,i,r))}else a=s===Xf||s===_m?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Kr({},i,a,l,o):i}function bpt(e,t,n,r){const i=Hu(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ii},update:a={opacity:Hc},exit:{opacity:Ii}};nl(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Q_e(e,0),f=Q_e(e,1);return s.x=a.x=Sa(o,u,Ii),s.x2=a.x2=Sa(o,f),s.y=a.y=Mf(o,u,Ii),s.y2=a.y2=Mf(o,f),vc({type:kz,role:jft,from:r,encode:l},n)}function Q_e(e,t){return{scale:e.scale,range:t}}function xpt(e,t,n,r,i){const o=Hu(e,t),s=e.orient,a=e.gridScale,l=ZR(s,1,-1),u=wpt(e.offset,l);let f,c,d;const p={enter:f={opacity:Ii},update:d={opacity:Hc},exit:c={opacity:Ii}};nl(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const h={scale:e.scale,field:jc,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Sa(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Kr(g,{mult:l,offset:u});return f.x=d.x=Sa(s,h,m),f.y=d.y=Mf(s,h,m),f.x2=d.x2=Mf(s,y),f.y2=d.y2=Sa(s,y),c.x=Sa(s,h),c.y=Mf(s,h),vc({type:kz,role:Hft,key:jc,from:r,encode:p},n)}function wpt(e,t){if(t!==1)if(!mn(e))e=ua(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Kr({},e);for(;n.mult!=null;)if(mn(n.mult))n=n.mult=Kr({},n.mult);else return n.mult=ua(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _pt(e,t,n,r,i,o){const s=Hu(e,t),a=e.orient,l=ZR(a,-1,1);let u,f,c;const d={enter:u={opacity:Ii},update:c={opacity:Hc},exit:f={opacity:Ii}};nl(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const p=Ca(i);p.mult=l;const h={scale:e.scale,field:jc,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return c.y=u.y=Sa(a,Ii,h),c.y2=u.y2=Sa(a,p),f.x=Sa(a,h),c.x=u.x=Mf(a,Ii,h),c.x2=u.x2=Mf(a,p),f.y=Mf(a,h),vc({type:kz,role:Gft,key:jc,from:r,encode:d},n)}function NM(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Ept(e,t,n,r,i,o){const s=Hu(e,t),a=e.orient,l=e.scale,u=ZR(a,-1,1),f=gv(s("labelFlush")),c=gv(s("labelFlushOffset")),d=s("labelAlign"),p=s("labelBaseline");let h=f===0||!!f,g;const m=Ca(i);m.mult=u,m.offset=Ca(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:jc,band:.5,offset:NOe(o.offset,s("labelOffset"))},v=Sa(a,h?NM(l,f,'"left"','"right"','"center"'):{value:"center"},cpt(a,"left","right")),x=Sa(a,HOe(a,"bottom","top"),h?NM(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),_=NM(l,f,`-(${c})`,c,0);h=h&&c;const E={opacity:Ii,x:Sa(a,y,m),y:Mf(a,y,m)},C={enter:E,update:g={opacity:Hc,text:{field:Az},x:E.x,y:E.y,align:v,baseline:x},exit:{opacity:Ii,x:E.x,y:E.y}};nl(C,{dx:!d&&h?Sa(a,_):null,dy:!p&&h?Mf(a,_):null}),nl(C,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:p});const w=s("labelBound");let T=s("labelOverlap");return T=T||w?{separation:s("labelSeparation"),method:T,order:"datum.index",bound:w?{scale:l,orient:a,tolerance:w}:null}:void 0,g.align!==v&&(g.align=Hb(g.align,v)),g.baseline!==x&&(g.baseline=Hb(g.baseline,x)),vc({type:ly,role:qft,style:UA,key:jc,from:r,encode:C,overlap:T},n)}function Apt(e,t,n,r){const i=Hu(e,t),o=e.orient,s=ZR(o,-1,1);let a,l;const u={enter:a={opacity:Ii,anchor:Ca(i("titleAnchor",null)),align:{signal:Tz}},update:l=Kr({},a,{opacity:Hc,text:Ca(e.title)}),exit:{opacity:Ii}},f={signal:`lerp(range("${e.scale}"), ${YR(0,1,.5)})`};return l.x=Sa(o,f),l.y=Mf(o,f),a.angle=Sa(o,Ii,vpt(s,90)),a.baseline=Sa(o,HOe(o,_m,Xf),{value:_m}),l.angle=a.angle,l.baseline=a.baseline,nl(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Cpt(i,o,u,n),u.update.align=Hb(u.update.align,a.align),u.update.angle=Hb(u.update.angle,a.angle),u.update.baseline=Hb(u.update.baseline,a.baseline),vc({type:ly,role:Wft,style:Cz,from:r,encode:u},n)}function Cpt(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Hb(Ca(a),n.update[l]),!1):!yb(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Ca(s):Sa(t,Ca(s),Ca(o))}function Spt(e,t){const n=ypt(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Hu(e,n),u=_ht(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},c=Kn(t.add(Yf({},[f]))),d=Kn(t.add(kdt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];let h;return f.grid&&p.push(xpt(e,n,r.grid,d,u)),f.ticks&&(h=l("tickSize"),p.push(_pt(e,n,r.ticks,d,h,u))),f.labels&&(h=f.ticks?h:0,p.push(Ept(e,n,r.labels,d,h,u))),f.domain&&p.push(bpt(e,n,r.domain,c)),f.title&&p.push(Apt(e,n,r.title,c)),KR(_E({role:Uft,from:c,encode:bx(kpt(l,e),i,jA),marks:p,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function kpt(e,t){const n={enter:{},update:{}};return nl(n,{orient:e("orient"),offset:e("offset")||0,position:wf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function GOe(e,t,n){const r=vn(e.signals),i=vn(e.scales);return n||r.forEach(o=>EOe(o,t)),vn(e.projections).forEach(o=>oht(o,t)),i.forEach(o=>Vdt(o,t)),vn(e.data).forEach(o=>lpt(o,t)),i.forEach(o=>Ydt(o,t)),(n||r).forEach(o=>Sdt(o,t)),vn(e.axes).forEach(o=>Spt(o,t)),vn(e.marks).forEach(o=>KR(o,t)),vn(e.legends).forEach(o=>Kht(o,t)),e.title&&rpt(e.title,t),t.parseLambdas(),t}const Tpt=e=>bx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Dpt(e,t){const n=t.config,r=Kn(t.root=t.add(VT())),i=Lpt(e,n);i.forEach(u=>EOe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Yf()),s=t.add(SOe(_Oe(Tpt(e.encode),VR,xz,e.style,t,{pulse:Kn(o)}))),a=t.add(DOe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Kn(s)}));t.operators.pop(),t.pushState(Kn(s),Kn(a),null),GOe(e,t,i),t.operators.push(a);let l=t.add(COe({mark:r,pulse:Kn(a)}));return l=t.add(TOe({pulse:Kn(l)})),l=t.add(ay({pulse:Kn(l)})),t.addData("root",new $v(t,o,o,l)),t}function E2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Lpt(e,t){const n=s=>wf(e[s],t[s]),r=[E2("background",n("background")),E2("autosize",Pft(n("autosize"))),E2("padding",zft(n("padding"))),E2("width",n("width")||0),E2("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return vn(e.signals).forEach(s=>{yn(i,s.name)?s=Kr(i[s.name],s):r.push(s),o[s.name]=s}),vn(t.signals).forEach(s=>{!yn(o,s.name)&&!yn(i,s.name)&&r.push(s)}),r}function WOe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function J_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}WOe.prototype=J_e.prototype={parse(e){return GOe(e,this)},fork(){return new J_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof M6?Kn(e):e;return this.add(Udt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Kn(this.add(ay({pulse:e})))),this._parent.push(t),this._lookup.push(n?Kn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ri(this._parent)},encode(){return Ri(this._encode)},lookup(){return Ri(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pn(e))return xE(e,t);e.signal||_t("Unsupported field reference: "+Qt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Kn(this.add(Rdt(i)))}return r},compareRef(e){let t=!1;const n=o=>ua(o)?(t=!0,this.signalRef(o.signal)):mdt(o)?(t=!0,this.exprRef(o.expr)):o,r=vn(e.field).map(n),i=vn(e.order).map(n);return t?Kn(this.add(B_e({fields:r,orders:i}))):N_e(r,i)},keyRef(e,t){let n=!1;const r=o=>ua(o)?(n=!0,Kn(i[o.signal])):o,i=this.signals;return e=vn(e).map(r),n?Kn(this.add(Fdt({fields:e,flat:t}))):ddt(e,t)},sortRef(e){if(!e)return e;const t=GR(e.op,e.field),n=e.order||hdt;return n.signal?Kn(this.add(B_e({fields:t,orders:this.signalRef(n.signal)}))):N_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return yn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&_t("Duplicate signal name: "+Qt(e));const n=t instanceof M6?t:this.add(VT(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||_t("Unrecognized signal name: "+Qt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Kn(this.signals[e]):(yn(this.lambdas,e)||(this.lambdas[e]=this.add(VT(null))),Kn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=eh(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mn(e)?e:this.signalRef(e.signal||$z(e))},exprRef(e,t){const n={expr:eh(e,this)};return t&&(n.expr.$name=t),Kn(this.add(Ddt(n)))},addBinding(e,t){this.bindings||_t("Nested signals do not support binding: "+Qt(e)),this.bindings.push(Kr({signal:e},t))},addScaleProj(e,t){yn(this.scales,e)&&_t("Duplicate scale or projection name: "+Qt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Hdt(t))},addProjection(e,t){this.addScaleProj(e,zdt(t))},getScale(e){return this.scales[e]||_t("Unrecognized scale name: "+Qt(e)),this.scales[e]},scaleRef(e){return Kn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return yn(this.data,e)&&_t("Duplicate data set name: "+Qt(e)),this.data[e]=t},getData(e){return this.data[e]||_t("Undefined data set name: "+Qt(e)),this.data[e]},addDataPipeline(e,t){return yn(this.data,e)&&_t("Duplicate data set name: "+Qt(e)),this.addData(e,$v.fromEntries(this,t))}};function $z(e){return(Dt(e)?Rpt:Fpt)(e)}function Rpt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mn(i)?i.signal||$z(i):Qt(i))}return n+"]"}function Fpt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Qt(r)+":"+(mn(i)?i.signal||$z(i):Qt(i));return t+"}"}function $pt(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Mpt(e,t,n){return mn(e)||_t("Input Vega specification must be an object."),t=cx($pt(),t,e.config),Dpt(e,new WOe(t,n)).toRuntime()}const Opt="RawCode",Ipt="Literal",Npt="Property",Ppt="Identifier",Bpt="ArrayExpression",zpt="BinaryExpression",Upt="CallExpression",jpt="ConditionalExpression",Hpt="LogicalExpression",qpt="MemberExpression",Gpt="ObjectExpression",Wpt="UnaryExpression";function Kf(e){this.type=e}Kf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Vpt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Vpt(e){switch(e.type){case Bpt:return e.elements;case zpt:case Hpt:return[e.left,e.right];case Upt:return[e.callee].concat(e.arguments);case jpt:return[e.test,e.consequent,e.alternate];case qpt:return[e.object,e.property];case Gpt:return e.properties;case Npt:return[e.key,e.value];case Wpt:return[e.argument];case Ppt:case Ipt:case Opt:default:return[]}}var hh,$n,St,Tl,wo,QR=1,HA=2,Mv=3,Bm=4,JR=5,uy=6,xu=7,qA=8,Ypt=9;hh={};hh[QR]="Boolean";hh[HA]="<end>";hh[Mv]="Identifier";hh[Bm]="Keyword";hh[JR]="Null";hh[uy]="Numeric";hh[xu]="Punctuator";hh[qA]="String";hh[Ypt]="RegularExpression";var Xpt="ArrayExpression",Kpt="BinaryExpression",Zpt="CallExpression",Qpt="ConditionalExpression",VOe="Identifier",Jpt="Literal",egt="LogicalExpression",tgt="MemberExpression",ngt="ObjectExpression",rgt="Property",igt="UnaryExpression",ka="Unexpected token %0",ogt="Unexpected number",sgt="Unexpected string",agt="Unexpected identifier",lgt="Unexpected reserved word",ugt="Unexpected end of input",U6="Invalid regular expression",PM="Invalid regular expression: missing /",YOe="Octal literals are not allowed in strict mode.",cgt="Duplicate data property in object literal not allowed in strict mode",Xa="ILLEGAL",EE="Disabled.",fgt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),dgt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function eF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Qh(e){return e>=48&&e<=57}function Mz(e){return"0123456789abcdefABCDEF".includes(e)}function D_(e){return"01234567".includes(e)}function hgt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function AE(e){return e===10||e===13||e===8232||e===8233}function GA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&fgt.test(String.fromCharCode(e))}function YT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&dgt.test(String.fromCharCode(e))}const pgt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function XOe(){for(;St<Tl;){const e=$n.charCodeAt(St);if(hgt(e)||AE(e))++St;else break}}function j6(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)St<Tl&&Mz($n[St])?(r=$n[St++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Xi({},ka,Xa);return String.fromCharCode(i)}function ggt(){var e,t,n,r;for(e=$n[St],t=0,e==="}"&&Xi({},ka,Xa);St<Tl&&(e=$n[St++],!!Mz(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Xi({},ka,Xa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function KOe(){var e,t;for(e=$n.charCodeAt(St++),t=String.fromCharCode(e),e===92&&($n.charCodeAt(St)!==117&&Xi({},ka,Xa),++St,e=j6("u"),(!e||e==="\\"||!GA(e.charCodeAt(0)))&&Xi({},ka,Xa),t=e);St<Tl&&(e=$n.charCodeAt(St),!!YT(e));)++St,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),$n.charCodeAt(St)!==117&&Xi({},ka,Xa),++St,e=j6("u"),(!e||e==="\\"||!YT(e.charCodeAt(0)))&&Xi({},ka,Xa),t+=e);return t}function mgt(){var e,t;for(e=St++;St<Tl;){if(t=$n.charCodeAt(St),t===92)return St=e,KOe();if(YT(t))++St;else break}return $n.slice(e,St)}function vgt(){var e,t,n;return e=St,t=$n.charCodeAt(St)===92?KOe():mgt(),t.length===1?n=Mv:pgt.hasOwnProperty(t)?n=Bm:t==="null"?n=JR:t==="true"||t==="false"?n=QR:n=Mv,{type:n,value:t,start:e,end:St}}function BM(){var e=St,t=$n.charCodeAt(St),n,r=$n[St],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++St,{type:xu,value:String.fromCharCode(t),start:e,end:St};default:if(n=$n.charCodeAt(St+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return St+=2,{type:xu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:St};case 33:case 61:return St+=2,$n.charCodeAt(St)===61&&++St,{type:xu,value:$n.slice(e,St),start:e,end:St}}}if(s=$n.substr(St,4),s===">>>=")return St+=4,{type:xu,value:s,start:e,end:St};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return St+=3,{type:xu,value:o,start:e,end:St};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return St+=2,{type:xu,value:i,start:e,end:St};if(i==="//"&&Xi({},ka,Xa),"<>=!+-*%&|^/".includes(r))return++St,{type:xu,value:r,start:e,end:St};Xi({},ka,Xa)}function ygt(e){let t="";for(;St<Tl&&Mz($n[St]);)t+=$n[St++];return t.length===0&&Xi({},ka,Xa),GA($n.charCodeAt(St))&&Xi({},ka,Xa),{type:uy,value:parseInt("0x"+t,16),start:e,end:St}}function bgt(e){let t="0"+$n[St++];for(;St<Tl&&D_($n[St]);)t+=$n[St++];return(GA($n.charCodeAt(St))||Qh($n.charCodeAt(St)))&&Xi({},ka,Xa),{type:uy,value:parseInt(t,8),octal:!0,start:e,end:St}}function eEe(){var e,t,n;if(n=$n[St],eF(Qh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=St,e="",n!=="."){if(e=$n[St++],n=$n[St],e==="0"){if(n==="x"||n==="X")return++St,ygt(t);if(D_(n))return bgt(t);n&&Qh(n.charCodeAt(0))&&Xi({},ka,Xa)}for(;Qh($n.charCodeAt(St));)e+=$n[St++];n=$n[St]}if(n==="."){for(e+=$n[St++];Qh($n.charCodeAt(St));)e+=$n[St++];n=$n[St]}if(n==="e"||n==="E")if(e+=$n[St++],n=$n[St],(n==="+"||n==="-")&&(e+=$n[St++]),Qh($n.charCodeAt(St)))for(;Qh($n.charCodeAt(St));)e+=$n[St++];else Xi({},ka,Xa);return GA($n.charCodeAt(St))&&Xi({},ka,Xa),{type:uy,value:parseFloat(e),start:t,end:St}}function xgt(){var e="",t,n,r,i,o=!1;for(t=$n[St],eF(t==="'"||t==='"',"String literal must starts with a quote"),n=St,++St;St<Tl;)if(r=$n[St++],r===t){t="";break}else if(r==="\\")if(r=$n[St++],!r||!AE(r.charCodeAt(0)))switch(r){case"u":case"x":$n[St]==="{"?(++St,e+=ggt()):e+=j6(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:D_(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),St<Tl&&D_($n[St])&&(o=!0,i=i*8+"01234567".indexOf($n[St++]),"0123".includes(r)&&St<Tl&&D_($n[St])&&(i=i*8+"01234567".indexOf($n[St++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&$n[St]===`
`&&++St;else{if(AE(r.charCodeAt(0)))break;e+=r}return t!==""&&Xi({},ka,Xa),{type:qA,value:e,octal:o,start:n,end:St}}function wgt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Xi({},U6)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Xi({},U6)}try{return new RegExp(e,t)}catch{return null}}function _gt(){var e,t,n,r,i;for(e=$n[St],eF(e==="/","Regular expression literal must start with a slash"),t=$n[St++],n=!1,r=!1;St<Tl;)if(e=$n[St++],t+=e,e==="\\")e=$n[St++],AE(e.charCodeAt(0))&&Xi({},PM),t+=e;else if(AE(e.charCodeAt(0)))Xi({},PM);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Xi({},PM),i=t.substr(1,t.length-2),{value:i,literal:t}}function Egt(){var e,t,n;for(t="",n="";St<Tl&&(e=$n[St],!!YT(e.charCodeAt(0)));)++St,e==="\\"&&St<Tl?Xi({},ka,Xa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Xi({},U6,n),{value:n,literal:t}}function Agt(){var e,t,n,r;return wo=null,XOe(),e=St,t=_gt(),n=Egt(),r=wgt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:St}}function Cgt(e){return e.type===Mv||e.type===Bm||e.type===QR||e.type===JR}function ZOe(){if(XOe(),St>=Tl)return{type:HA,start:St,end:St};const e=$n.charCodeAt(St);return GA(e)?vgt():e===40||e===41||e===59?BM():e===39||e===34?xgt():e===46?Qh($n.charCodeAt(St+1))?eEe():BM():Qh(e)?eEe():BM()}function Su(){const e=wo;return St=e.end,wo=ZOe(),St=e.end,e}function QOe(){const e=St;wo=ZOe(),St=e}function Sgt(e){const t=new Kf(Xpt);return t.elements=e,t}function tEe(e,t,n){const r=new Kf(e==="||"||e==="&&"?egt:Kpt);return r.operator=e,r.left=t,r.right=n,r}function kgt(e,t){const n=new Kf(Zpt);return n.callee=e,n.arguments=t,n}function Tgt(e,t,n){const r=new Kf(Qpt);return r.test=e,r.consequent=t,r.alternate=n,r}function Oz(e){const t=new Kf(VOe);return t.name=e,t}function r_(e){const t=new Kf(Jpt);return t.value=e.value,t.raw=$n.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nEe(e,t,n){const r=new Kf(tgt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Dgt(e){const t=new Kf(ngt);return t.properties=e,t}function rEe(e,t,n){const r=new Kf(rgt);return r.key=t,r.value=n,r.kind=e,r}function Lgt(e,t){const n=new Kf(igt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Xi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(eF(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=St,n.description=i,n}function tF(e){e.type===HA&&Xi(e,ugt),e.type===uy&&Xi(e,ogt),e.type===qA&&Xi(e,sgt),e.type===Mv&&Xi(e,agt),e.type===Bm&&Xi(e,lgt),Xi(e,ka,e.value)}function Dl(e){const t=Su();(t.type!==xu||t.value!==e)&&tF(t)}function Ko(e){return wo.type===xu&&wo.value===e}function zM(e){return wo.type===Bm&&wo.value===e}function Rgt(){const e=[];for(St=wo.start,Dl("[");!Ko("]");)Ko(",")?(Su(),e.push(null)):(e.push(Ov()),Ko("]")||Dl(","));return Su(),Sgt(e)}function iEe(){St=wo.start;const e=Su();return e.type===qA||e.type===uy?(e.octal&&Xi(e,YOe),r_(e)):Oz(e.value)}function Fgt(){var e,t,n,r;if(St=wo.start,e=wo,e.type===Mv)return n=iEe(),Dl(":"),r=Ov(),rEe("init",n,r);if(e.type===HA||e.type===xu)tF(e);else return t=iEe(),Dl(":"),r=Ov(),rEe("init",t,r)}function $gt(){var e=[],t,n,r,i={},o=String;for(St=wo.start,Dl("{");!Ko("}");)t=Fgt(),t.key.type===VOe?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Xi({},cgt):i[r]=!0,e.push(t),Ko("}")||Dl(",");return Dl("}"),Dgt(e)}function Mgt(){Dl("(");const e=Iz();return Dl(")"),e}const Ogt={if:1};function Igt(){var e,t,n;if(Ko("("))return Mgt();if(Ko("["))return Rgt();if(Ko("{"))return $gt();if(e=wo.type,St=wo.start,e===Mv||Ogt[wo.value])n=Oz(Su().value);else if(e===qA||e===uy)wo.octal&&Xi(wo,YOe),n=r_(Su());else{if(e===Bm)throw new Error(EE);e===QR?(t=Su(),t.value=t.value==="true",n=r_(t)):e===JR?(t=Su(),t.value=null,n=r_(t)):Ko("/")||Ko("/=")?(n=r_(Agt()),QOe()):tF(Su())}return n}function Ngt(){const e=[];if(Dl("("),!Ko(")"))for(;St<Tl&&(e.push(Ov()),!Ko(")"));)Dl(",");return Dl(")"),e}function Pgt(){St=wo.start;const e=Su();return Cgt(e)||tF(e),Oz(e.value)}function Bgt(){return Dl("."),Pgt()}function zgt(){Dl("[");const e=Iz();return Dl("]"),e}function Ugt(){var e,t,n;for(e=Igt();;)if(Ko("."))n=Bgt(),e=nEe(".",e,n);else if(Ko("("))t=Ngt(),e=kgt(e,t);else if(Ko("["))n=zgt(),e=nEe("[",e,n);else break;return e}function oEe(){const e=Ugt();if(wo.type===xu&&(Ko("++")||Ko("--")))throw new Error(EE);return e}function i3(){var e,t;if(wo.type!==xu&&wo.type!==Bm)t=oEe();else{if(Ko("++")||Ko("--"))throw new Error(EE);if(Ko("+")||Ko("-")||Ko("~")||Ko("!"))e=Su(),t=i3(),t=Lgt(e.value,t);else{if(zM("delete")||zM("void")||zM("typeof"))throw new Error(EE);t=oEe()}}return t}function sEe(e){let t=0;if(e.type!==xu&&e.type!==Bm)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function jgt(){var e,t,n,r,i,o,s,a,l,u;if(e=wo,l=i3(),r=wo,i=sEe(r),i===0)return l;for(r.prec=i,Su(),t=[e,wo],s=i3(),o=[l,r,s];(i=sEe(wo))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=tEe(a,l,s),o.push(n);r=Su(),r.prec=i,o.push(r),t.push(wo),n=i3(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=tEe(o[u-1].value,o[u-2],n),u-=2;return n}function Ov(){var e,t,n;return e=jgt(),Ko("?")&&(Su(),t=Ov(),Dl(":"),n=Ov(),e=Tgt(e,t,n)),e}function Iz(){const e=Ov();if(Ko(","))throw new Error(EE);return e}function Hgt(e){$n=e,St=0,Tl=$n.length,wo=null,QOe();const t=Iz();if(wo.type!==HA)throw new Error("Unexpect token after expression.");return t}var qgt={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Ggt(e){function t(s,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&_t("Missing arguments to clamp function."),s.length>3&&_t("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&_t("Missing arguments to if function."),s.length>3&&_t("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Wgt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Vgt(e){e=e||{};const t=e.allowed?hc(e.allowed):{},n=e.forbidden?hc(e.forbidden):{},r=e.constants||qgt,i=(e.functions||Ggt)(c),o=e.globalvar,s=e.fieldvar,a=Br(o)?o:h=>`${o}["${h}"]`;let l={},u={},f=0;function c(h){if(pn(h))return h;const g=d[h.type];return g==null&&_t("Unsupported type: "+h.type),g(h)}const d={Literal:h=>h.raw,Identifier:h=>{const g=h.name;return f>0?g:yn(n,g)?_t("Illegal identifier: "+g):yn(r,g)?r[g]:yn(t,g)?g:(l[g]=1,a(g))},MemberExpression:h=>{const g=!h.computed,m=c(h.object);g&&(f+=1);const y=c(h.property);return m===s&&(u[Wgt(y)]=1),g&&(f-=1),m+(g?"."+y:"["+y+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&_t("Illegal callee type: "+h.callee.type);const g=h.callee.name,m=h.arguments,y=yn(i,g)&&i[g];return y||_t("Unrecognized function: "+g),Br(y)?y(m):y+"("+m.map(c).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(c).join(",")+"]",BinaryExpression:h=>"("+c(h.left)+" "+h.operator+" "+c(h.right)+")",UnaryExpression:h=>"("+h.operator+c(h.argument)+")",ConditionalExpression:h=>"("+c(h.test)+"?"+c(h.consequent)+":"+c(h.alternate)+")",LogicalExpression:h=>"("+c(h.left)+h.operator+c(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(c).join(",")+"}",Property:h=>{f+=1;const g=c(h.key);return f-=1,g+":"+c(h.value)}};function p(h){const g={code:c(h),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return p.functions=i,p.constants=r,p}var Ygt="5.33.0";Kr(g1,hZe,jtt,xnt,oit,Jit,Sst,ost,Tst,Qst,lat,gat);const Xgt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Zs,CanvasHandler:FA,CanvasRenderer:lT,DATE:Iu,DAY:wl,DAYOFYEAR:Qd,Dataflow:Ub,Debug:eLe,Error:cP,EventStream:rR,Gradient:OFe,GroupItem:xR,HOURS:pc,Handler:r9,HybridHandler:S$e,HybridRenderer:UI,Info:JDe,Item:bR,MILLISECONDS:Pf,MINUTES:gc,MONTH:Cl,Marks:mc,MultiPulse:RP,None:QDe,Operator:Mo,Parameters:nR,Pulse:om,QUARTER:Ou,RenderType:Vg,Renderer:RA,ResourceLoader:jFe,SECONDS:Xc,SVGHandler:h$e,SVGRenderer:u9,SVGStringRenderer:C$e,Scenegraph:o$e,TIME_UNITS:EP,Transform:wt,View:cOe,WEEK:aa,Warn:fP,YEAR:Qa,accessor:ju,accessorFields:Al,accessorName:Fs,array:vn,ascending:gA,bandwidthNRD:OP,bin:uRe,bootstrapCI:cRe,boundClip:I$e,boundContext:kA,boundItem:II,boundMark:t$e,boundStroke:Bp,changeset:iy,clampRange:fLe,codegenExpression:Vgt,compare:mP,constant:Ml,cumulativeLogNormal:UP,cumulativeNormal:oR,cumulativeUniform:GP,dayofyear:ELe,debounce:vP,defaultLocale:SP,definition:sRe,densityLogNormal:zP,densityNormal:IP,densityUniform:qP,domChild:oa,domClear:$c,domCreate:Gg,domFind:n9,dotbin:fRe,error:_t,expressionFunction:zs,extend:Kr,extent:Zd,extentIndex:dLe,falsy:Ag,fastmap:dx,field:Vc,flush:hLe,font:CR,fontFamily:LA,fontSize:lh,format:Mk,formatLocale:G3,formats:DP,hasOwnProperty:yn,id:pA,identity:$l,inferType:XLe,inferTypes:KLe,ingest:lo,inherits:tn,inrange:Tb,interpolate:$B,interpolateColors:vR,interpolateRange:wFe,intersect:F$e,intersectBoxLine:Db,intersectPath:UB,intersectPoint:jB,intersectRule:qFe,isArray:Dt,isBoolean:Im,isDate:im,isFunction:Br,isIterable:pLe,isNumber:eo,isObject:mn,isRegExp:yP,isString:pn,isTuple:eR,key:bP,lerp:gLe,lineHeight:bm,loader:QL,locale:VLe,logger:dP,lruCache:mLe,markup:l9,merge:vLe,mergeConfig:cx,multiLineOffset:JB,one:ux,pad:yLe,panLinear:oLe,panLog:sLe,panPow:aLe,panSymlog:lLe,parse:Mpt,parseExpression:Hgt,parseSelector:Pm,path:cR,pathCurves:PB,pathEqual:N$e,pathParse:x1,pathRectangle:PFe,pathRender:lE,pathSymbols:NFe,pathTrail:BFe,peek:Ri,point:kR,projection:T9,quantileLogNormal:jP,quantileNormal:sR,quantileUniform:WP,quantiles:$P,quantizeInterpolator:_Fe,quarter:uLe,quartiles:MP,get random(){return Kc},randomInteger:vKe,randomKDE:PP,randomLCG:mKe,randomLogNormal:hRe,randomMixture:pRe,randomNormal:NP,randomUniform:gRe,read:JLe,regressionConstant:VP,regressionExp:vRe,regressionLinear:YP,regressionLoess:xRe,regressionLog:mRe,regressionPoly:bRe,regressionPow:yRe,regressionQuad:XP,renderModule:TR,repeat:N2,resetDefaultLocale:hXe,resetSVGClipId:UFe,resetSVGDefIds:stt,responseType:QLe,runtimeContext:Z5e,sampleCurve:lR,sampleLogNormal:BP,sampleNormal:iR,sampleUniform:HP,scale:to,sceneEqual:c9,sceneFromJSON:r$e,scenePickVisit:eT,sceneToJSON:n$e,sceneVisit:Bf,sceneZOrder:HB,scheme:MB,serializeXML:w$e,setHybridRendererOptions:ntt,setRandom:pKe,span:mA,splitAccessPath:sh,stringValue:Qt,textMetrics:ac,timeBin:zLe,timeFloor:LLe,timeFormatLocale:oE,timeInterval:hx,timeOffset:$Le,timeSequence:ILe,timeUnitSpecifier:_Le,timeUnits:AP,toBoolean:xP,toDate:wP,toNumber:_l,toSet:hc,toString:_P,transform:aRe,transforms:g1,truncate:bLe,truthy:Yc,tupleid:Zn,typeParsers:CI,utcFloor:RLe,utcInterval:px,utcOffset:MLe,utcSequence:NLe,utcdayofyear:SLe,utcquarter:cLe,utcweek:kLe,version:Ygt,visitArray:Dg,week:ALe,writeConfig:fx,zero:Pg,zoomLinear:hP,zoomLog:pP,zoomPow:q3,zoomSymlog:gP},Symbol.toStringTag,{value:"Module"}));function Kgt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Zgt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Qgt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Jgt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const emt=Array.prototype.slice,M0=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,emt.call(t,1))},tmt=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var nmt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:tmt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return M0("join",arguments)},indexof:function(){return M0("indexOf",arguments)},lastindexof:function(){return M0("lastIndexOf",arguments)},slice:function(){return M0("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return M0("substring",arguments,String)},split:function(){return M0("split",arguments,String)},replace:function(){return M0("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const rmt=["view","item","group","xy","x","y"],H6=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&H6.add(setImmediate);const imt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Zgt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),H6.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||nmt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Qgt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Jgt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,H6.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function A2(e,t,n,r,i,o){const s=a=>imt[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,rmt.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var omt={operator(e,t){const n=t.ast,r=e.functions;return i=>A2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>A2(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>A2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return A2(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,f;for(const c in r)f=A2(r[c].ast,i,a,l,void 0,s),s[c]!==f&&(s[c]=f,u=1);return n!=="rule"&&Kgt(s,r,o),u}}};const smt="5.23.0",amt={version:smt};function Nz(e){return Vt(e,"or")}function Pz(e){return Vt(e,"and")}function Bz(e){return Vt(e,"not")}function o3(e,t){if(Bz(e))o3(e.not,t);else if(Pz(e))for(const n of e.and)o3(n,t);else if(Nz(e))for(const n of e.or)o3(n,t);else t(e)}function qb(e,t){return Bz(e)?{not:qb(e.not,t)}:Pz(e)?{and:e.and.map(n=>qb(n,t))}:Nz(e)?{or:e.or.map(n=>qb(n,t))}:t(e)}const Lr=structuredClone;function JOe(e){throw new Error(e)}function L1(e,t){const n={};for(const r of t)yn(e,r)&&(n[r]=e[r]);return n}function Fu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fo(e)).join(",")})`};function wi(e){if(eo(e))return e;const t=pn(e)?e:Fo(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function q6(e){return e===!1||e===null}function hi(e,t){return e.includes(t)}function R1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function zz(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function e4e(e,...t){for(const n of t)lmt(e,n??{});return e}function lmt(e,t){for(const n of Wt(t))fx(e,n,t[n],!0)}function Id(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function umt(e,t){const n=Wt(e),r=Wt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function t4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Uz(e,t){for(const n of e)if(t.has(n))return!0;return!1}function G6(e){const t=new Set;for(const n of e){const i=sh(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function jz(e,t){return e===void 0||t===void 0?!0:Uz(G6(e),G6(t))}function Ro(e){return Wt(e).length===0}const Wt=Object.keys,Ja=Object.values,Em=Object.entries;function CE(e){return e===!0||e===!1}function fs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function L_(e,t){return Bz(e)?`!(${L_(e.not,t)})`:Pz(e)?`(${e.and.map(n=>L_(n,t)).join(") && (")})`:Nz(e)?`(${e.or.map(n=>L_(n,t)).join(") || (")})`:t(e)}function XT(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&XT(e[n],t)&&delete e[n],Ro(e)}function WA(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Hz(e,t="datum"){const n=sh(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(Qt).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function n4e(e,t="datum"){return`${t}[${Qt(sh(e).join("."))}]`}function bo(e){return`datum['${e.replaceAll("'","\\'")}']`}function cmt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Qc(e){return`${sh(e).map(cmt).join("\\.")}`}function Iv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _x(e){return`${sh(e).join(".")}`}function F1(e){return e?sh(e).length:0}function Ps(...e){return e.find(t=>t!==void 0)}let r4e=42;function i4e(e){const t=++r4e;return e?String(e)+t:t}function fmt(){r4e=42}function o4e(e){return s4e(e)?e:`__${e}`}function s4e(e){return e.startsWith("__")}function SE(e){if(e!==void 0)return(e%360+360)%360}function nF(e){return eo(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const aEe=Object.getPrototypeOf(structuredClone({}));function rc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!rc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!rc(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==aEe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==aEe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!rc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Fo(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function Vt(e,t){return mn(e)&&yn(e,t)&&e[t]!==void 0}const vp="row",yp="column",rF="facet",ds="x",Ma="y",Zf="x2",ph="y2",zm="xOffset",Ex="yOffset",Qf="radius",Up="radius2",nf="theta",jp="theta2",Jf="latitude",ed="longitude",td="latitude2",Jc="longitude2",Um="time",Pu="color",gh="fill",mh="stroke",Bu="shape",Hp="size",cy="angle",qp="opacity",jm="fillOpacity",Hm="strokeOpacity",qm="strokeWidth",Gm="strokeDash",VA="text",$1="order",YA="detail",iF="key",Nv="tooltip",oF="href",sF="url",aF="description",dmt={x:1,y:1,x2:1,y2:1},a4e={theta:1,theta2:1,radius:1,radius2:1};function l4e(e){return yn(a4e,e)}const qz={longitude:1,longitude2:1,latitude:1,latitude2:1};function u4e(e){switch(e){case Jf:return"y";case td:return"y2";case ed:return"x";case Jc:return"x2"}}function c4e(e){return yn(qz,e)}const hmt=Wt(qz),Gz={...dmt,...a4e,...qz,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Gb(e){return e===Pu||e===gh||e===mh}const f4e={row:1,column:1,facet:1},zc=Wt(f4e),Wz={...Gz,...f4e},pmt=Wt(Wz),{order:pXt,detail:gXt,tooltip:mXt,...gmt}=Wz,{row:vXt,column:yXt,facet:bXt,...mmt}=gmt;function vmt(e){return yn(mmt,e)}function d4e(e){return yn(Wz,e)}const ymt=[Zf,ph,td,Jc,jp,Up];function h4e(e){return fy(e)!==e}function fy(e){switch(e){case Zf:return ds;case ph:return Ma;case td:return Jf;case Jc:return ed;case jp:return nf;case Up:return Qf}return e}function Am(e){if(l4e(e))switch(e){case nf:return"startAngle";case jp:return"endAngle";case Qf:return"outerRadius";case Up:return"innerRadius"}return e}function vh(e){switch(e){case ds:return Zf;case Ma:return ph;case Jf:return td;case ed:return Jc;case nf:return jp;case Qf:return Up}}function zu(e){switch(e){case ds:case Zf:return"width";case Ma:case ph:return"height"}}function p4e(e){switch(e){case ds:return"xOffset";case Ma:return"yOffset";case Zf:return"x2Offset";case ph:return"y2Offset";case nf:return"thetaOffset";case Qf:return"radiusOffset";case jp:return"theta2Offset";case Up:return"radius2Offset"}}function Vz(e){switch(e){case ds:return"xOffset";case Ma:return"yOffset"}}function bmt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const xmt=Wt(Gz),{x:xXt,y:wXt,x2:_Xt,y2:EXt,xOffset:AXt,yOffset:CXt,latitude:SXt,longitude:kXt,latitude2:TXt,longitude2:DXt,theta:LXt,theta2:RXt,radius:FXt,radius2:$Xt,...Yz}=Gz,wmt=Wt(Yz),Xz={x:1,y:1},Gp=Wt(Xz);function Bs(e){return yn(Xz,e)}const Kz={theta:1,radius:1},_mt=Wt(Kz);function lF(e){return e==="width"?ds:Ma}const g4e={xOffset:1,yOffset:1};function XA(e){return yn(g4e,e)}const Emt={time:1};function UM(e){return e in Emt}const{text:MXt,tooltip:OXt,href:IXt,url:NXt,description:PXt,detail:BXt,key:zXt,order:UXt,...m4e}=Yz,Amt=Wt(m4e);function Cmt(e){return yn(Yz,e)}function Smt(e){switch(e){case Pu:case gh:case mh:case Hp:case Bu:case qp:case qm:case Gm:return!0;case jm:case Hm:case cy:case Um:return!1}}const v4e={...Xz,...Kz,...g4e,...m4e},Zz=Wt(v4e);function yh(e){return yn(v4e,e)}function kmt(e,t){return Dmt(e)[t]}const y4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:jXt,...Tmt}=y4e;function Dmt(e){switch(e){case Pu:case gh:case mh:case aF:case YA:case iF:case Nv:case oF:case $1:case qp:case jm:case Hm:case qm:case rF:case vp:case yp:return y4e;case ds:case Ma:case zm:case Ex:case Jf:case ed:case Um:return Tmt;case Zf:case ph:case td:case Jc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Hp:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gm:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Bu:return{point:"always",geoshape:"always"};case VA:return{text:"always"};case cy:return{point:"always",square:"always",text:"always"};case sF:return{image:"always"};case nf:return{text:"always",arc:"always"};case Qf:return{text:"always",arc:"always"};case jp:case Up:return{arc:"always"}}}function jM(e){switch(e){case ds:case Ma:case nf:case Qf:case zm:case Ex:case Hp:case cy:case qm:case qp:case jm:case Hm:case Um:case Zf:case ph:case jp:case Up:return;case rF:case vp:case yp:case Bu:case Gm:case VA:case Nv:case oF:case sF:case aF:return"discrete";case Pu:case gh:case mh:return"flexible";case Jf:case ed:case td:case Jc:case YA:case iF:case $1:return}}const Lmt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Rmt={count:1,min:1,max:1};function Tp(e){return Vt(e,"argmin")}function Wm(e){return Vt(e,"argmax")}function Qz(e){return pn(e)&&yn(Lmt,e)}const Fmt=new Set(["count","valid","missing","distinct"]);function uF(e){return pn(e)&&Fmt.has(e)}function $mt(e){return pn(e)&&hi(["min","max"],e)}const Mmt=new Set(["count","sum","distinct","valid","missing"]),Omt=new Set(["mean","average","median","q1","q3","min","max"]);function b4e(e){return Im(e)&&(e=wF(e,void 0)),"bin"+Wt(e).map(t=>cF(e[t])?fs(`_${t}_${Em(e[t])}`):fs(`_${t}_${e[t]}`)).join("")}function qo(e){return e===!0||dy(e)&&!e.binned}function ja(e){return e==="binned"||dy(e)&&e.binned===!0}function dy(e){return mn(e)}function cF(e){return Vt(e,"param")}function lEe(e){switch(e){case vp:case yp:case Hp:case Pu:case gh:case mh:case qm:case qp:case jm:case Hm:case Bu:return 6;case Gm:return 4;default:return 10}}function KA(e){return Vt(e,"expr")}function Ha(e,{level:t}={level:0}){const n=Wt(e||{}),r={};for(const i of n)r[i]=t===0?ec(e[i]):Ha(e[i],{level:t-1});return r}function x4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:c,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:h,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...c?{subtitleFontStyle:c}:{},...d?{subtitleFontWeight:d}:{},...p?{subtitleLineHeight:p}:{},...h?{subtitlePadding:h}:{}},x=L1(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:x,nonMarkTitleProperties:y,subtitle:v}}function $g(e){return pn(e)||Dt(e)&&pn(e[0])}function Nn(e){return Vt(e,"signal")}function hy(e){return Vt(e,"step")}function Imt(e){return Dt(e)?!1:Vt(e,"fields")&&!Vt(e,"data")}function Nmt(e){return Dt(e)?!1:Vt(e,"fields")&&Vt(e,"data")}function cp(e){return Dt(e)?!1:Vt(e,"field")&&Vt(e,"data")}const Pmt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Bmt=Wt(Pmt),zmt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},W6=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function w4e(e){const t=Dt(e.condition)?e.condition.map(uEe):uEe(e.condition);return{...ec(e),condition:t}}function ec(e){if(KA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function uEe(e){if(KA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Zo(e){if(KA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nn(e)?e:e!==void 0?{value:e}:void 0}function Umt(e){return Nn(e)?e.signal:Qt(e)}function cEe(e){return Nn(e)?e.signal:Qt(e.value)}function Df(e){return Nn(e)?e.signal:e==null?null:Qt(e)}function jmt(e,t,n){for(const r of n){const i=th(r,t.markDef,t.config);i!==void 0&&(e[r]=Zo(i))}return e}function _4e(e){return[].concat(e.type,e.style??[])}function Lo(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&Vt(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:th(e,t,n,r)}function th(e,t,n,{vgChannel:r}={}){const i=V6(e,t,n.style);return Ps(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function V6(e,t,n){return E4e(e,_4e(t),n)}function E4e(e,t,n){t=vn(t);let r;for(const i of t){const o=n[i];Vt(o,e)&&(r=o[e])}return r}function A4e(e,t){return vn(e).reduce((n,r)=>(n.field.push(on(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function C4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(rc(i,r))return;n.push(r)}),n}function S4e(e,t){return rc(e,t)||!t?e:e?[...vn(e),...vn(t)].join(", "):t}function k4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if(($g(n)||Nn(n))&&($g(r)||Nn(r)))return{explicit:e.explicit,value:S4e(n,r)};if($g(n)||Nn(n))return{explicit:e.explicit,value:n};if($g(r)||Nn(r))return{explicit:e.explicit,value:r};if(!$g(n)&&!Nn(n)&&!$g(r)&&!Nn(r))return{explicit:e.explicit,value:C4e(n,r)};throw new Error("It should never reach here")}function Jz(e){return`Invalid specification ${Fo(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Hmt='Autosize "fit" only works for single views and layered views.';function fEe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function dEe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function hEe(e){return e?`Dropping "fit-${e}" because spec has discrete ${zu(e)}.`:'Dropping "fit" because spec has discrete size.'}function e7(e){return`Unknown field for ${e}. Cannot calculate view size.`}function pEe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function qmt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Gmt(e){return`The "nearest" transform is not supported for ${e} marks.`}function T4e(e){return`Selection not supported for ${e} yet.`}function Wmt(e){return`Cannot find a selection named "${e}".`}const Vmt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Ymt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Xmt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Kmt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Zmt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Qmt="The same selection must be used to override scale domains in a layered view.",Jmt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function e0t(e){return`Unknown repeated value "${e}".`}function gEe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const t0t="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",t7="Animation involving facet, layer, or concat is currently unsupported.";function n0t(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Qt(e)}.`}function r0t(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Qt(t)} encoding found for selection ${Qt(n.param)}. Using "field": ${Qt(r)}.`}const i0t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function o0t(e){return`Unrecognized parse "${e}".`}function mEe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const s0t="Attempt to add the same child twice.";function a0t(e){return`Ignoring an invalid transform: ${Fo(e)}.`}const l0t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function vEe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function u0t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fo(t)} is overridden by a child projection ${Fo(n)}.`}const c0t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function f0t(e){return`${e}Offset dropped because ${e} is continuous`}function d0t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fo(n)}}.`}function D4e(e){return`Invalid field type "${e}".`}function h0t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function p0t(e){return`Invalid aggregation operator "${e}".`}function L4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function g0t(e){return`Position range does not support relative band size for ${e}.`}function Y6(e,t){return`Dropping ${Fo(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const m0t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function fF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function v0t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function y0t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function b0t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function x0t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function HM(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function w0t(e){return`The ${e} for range marks cannot be an expression`}function _0t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function E0t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function A0t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function C0t(e){return`Cannot use the relative band size with ${e} scale.`}function S0t(e){return`Using unaggregated domain with raw field has no effect (${Fo(e)}).`}function k0t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function T0t(e){return`Unaggregated domain is currently unsupported for log scale (${Fo(e)}).`}function D0t(e){return`Cannot apply size to non-oriented mark "${e}".`}function L0t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function R0t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function R4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function F4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function F0t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fo(n)} and ${Fo(r)}). Using ${Fo(n)}.`}function $0t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fo(n)} and ${Fo(r)}). Using the union of the two domains.`}function M0t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function O0t(e){return`Dropping sort property ${Fo(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const yEe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",I0t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",N0t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",P0t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function B0t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function z0t(e){return`Stack is applied to a non-linear scale (${e}).`}function U0t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function KT(e,t){return`Invalid ${e}: ${Fo(t)}.`}function j0t(e){return`Dropping day from datetime ${Fo(e)} as day cannot be combined with other units.`}function H0t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function q0t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function G0t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function bEe(e){return`1D error band does not support ${e}.`}function $4e(e){return`Channel ${e} is required for "binned" bin.`}function W0t(e){return`Channel ${e} should not be used with "binned" bin.`}function V0t(e){return`Domain for ${e} is required for threshold scale.`}const M4e=dP(fP);let Pv=M4e;function Y0t(e){return Pv=e,Pv}function X0t(){return Pv=M4e,Pv}function n7(...e){Pv.error(...e)}function Xt(...e){Pv.warn(...e)}function K0t(...e){Pv.debug(...e)}function py(e){if(e&&mn(e)){for(const t of i7)if(Vt(e,t))return!0}return!1}const O4e=["january","february","march","april","may","june","july","august","september","october","november","december"],Z0t=O4e.map(e=>e.substr(0,3)),I4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Q0t=I4e.map(e=>e.substr(0,3));function J0t(e){if(nF(e)&&(e=+e),eo(e))return e>4&&Xt(KT("quarter",e)),e-1;throw new Error(KT("quarter",e))}function evt(e){if(nF(e)&&(e=+e),eo(e))return e-1;{const t=e.toLowerCase(),n=O4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Z0t.indexOf(r);if(i!==-1)return i;throw new Error(KT("month",e))}}function tvt(e){if(nF(e)&&(e=+e),eo(e))return e%7;{const t=e.toLowerCase(),n=I4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Q0t.indexOf(r);if(i!==-1)return i;throw new Error(KT("day",e))}}function r7(e,t){const n=[];if(t&&e.day!==void 0&&Wt(e).length>1&&(Xt(j0t(e)),e=Lr(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?evt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?J0t(e.quarter):e.quarter;n.push(eo(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?tvt(e.day):e.day;n.push(eo(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Bv(e){const n=r7(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function nvt(e){const n=r7(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function rvt(e){const t=r7(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const N4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},i7=Wt(N4e);function ivt(e){return yn(N4e,e)}function gy(e){return mn(e)?e.binned:P4e(e)}function P4e(e){return e&&e.startsWith("binned")}function o7(e){return e.startsWith("utc")}function ovt(e){return e.substring(3)}const svt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function dF(e){return i7.filter(t=>z4e(e,t))}function B4e(e){const t=dF(e);return t[t.length-1]}function z4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function avt(e,t,{end:n}={end:!1}){const r=Hz(t),i=o7(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of i7)z4e(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),nvt(a)}function U4e(e){if(!e)return;const t=dF(e);return`timeUnitSpecifier(${Fo(t)}, ${Fo(svt)})`}function lvt(e,t,n){if(!e)return;const r=U4e(e);return`${n||o7(e)?"utc":"time"}Format(${t}, ${r})`}function Da(e){if(!e)return;let t;return pn(e)?P4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mn(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),o7(t.unit)&&(t.utc=!0,t.unit=ovt(t.unit)),t}function uvt(e){const{utc:t,...n}=Da(e);return n.unit?(t?"utc":"")+Wt(n).map(r=>fs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Wt(n).map(r=>fs(`_${r}_${n[r]}`)).join("")}function j4e(e,t=n=>n){const n=Da(e),r=B4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=H4e(r,n.step),a={...i,[s]:+i[s]+o};return`${t(Bv(a))} - ${t(Bv(i))}`}}const cvt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function fvt(e){return yn(cvt,e)}function H4e(e,t=1){if(fvt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function dvt(e){return Vt(e,"param")}function s7(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function a7(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function l7(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function u7(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function c7(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function f7(e){if(e!=null&&e.field){if(Dt(e.range)&&e.range.length===2)return!0;if(Nn(e.range))return!0}return!1}function d7(e){return!!(e!=null&&e.field)&&(Dt(e.oneOf)||Dt(e.in))}function hvt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function q4e(e){return d7(e)||s7(e)||f7(e)||a7(e)||u7(e)||l7(e)||c7(e)}function wd(e,t){return _F(e,{timeUnit:t,wrapTime:!0})}function pvt(e,t){return e.map(n=>wd(n,t))}function G4e(e,t=!0){const{field:n}=e,r=Da(e.timeUnit),{unit:i,binned:o}=r||{},s=on(e,{expr:"datum"}),a=i?`time(${o?s:avt(i,n)})`:s;if(s7(e))return`${a}===${wd(e.equal,i)}`;if(a7(e)){const l=e.lt;return`${a}<${wd(l,i)}`}else if(u7(e)){const l=e.gt;return`${a}>${wd(l,i)}`}else if(l7(e)){const l=e.lte;return`${a}<=${wd(l,i)}`}else if(c7(e)){const l=e.gte;return`${a}>=${wd(l,i)}`}else{if(d7(e))return`indexof([${pvt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(hvt(e))return hF(a,e.valid);if(f7(e)){const{range:l}=Ha(e),u=Nn(l)?{signal:`${l.signal}[0]`}:l[0],f=Nn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return"inrange("+a+", ["+wd(u,i)+", "+wd(f,i)+"])";const c=[];return u!==null&&c.push(`${a} >= ${wd(u,i)}`),f!==null&&c.push(`${a} <= ${wd(f,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fo(e)}`)}function hF(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function gvt(e){return q4e(e)&&e.timeUnit?{...e,timeUnit:Da(e.timeUnit)}:e}const ZA={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function mvt(e){return e==="quantitative"||e==="temporal"}function W4e(e){return e==="ordinal"||e==="nominal"}const zv=ZA.quantitative,h7=ZA.ordinal,M1=ZA.temporal,p7=ZA.nominal,Ax=ZA.geojson;function vvt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case zv:return"quantitative";case"t":case M1:return"temporal";case"o":case h7:return"ordinal";case"n":case p7:return"nominal";case Ax:return"geojson"}}const qa={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},X6={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function yvt(e,t){const n=X6[e],r=X6[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const bvt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function xEe(e){return bvt[e]}const V4e=new Set(["linear","log","pow","sqrt","symlog"]),Y4e=new Set([...V4e,"time","utc"]);function X4e(e){return V4e.has(e)}const K4e=new Set(["quantile","quantize","threshold"]),xvt=new Set([...Y4e,...K4e,"sequential","identity"]),wvt=new Set(["ordinal","bin-ordinal","point","band"]);function Ra(e){return wvt.has(e)}function zf(e){return xvt.has(e)}function Nd(e){return Y4e.has(e)}function O1(e){return K4e.has(e)}const _vt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Evt(e){return!pn(e)&&Vt(e,"name")}function Z4e(e){return Vt(e,"param")}function Avt(e){return Vt(e,"unionWith")}function Cvt(e){return mn(e)&&"field"in e}const Svt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:HXt,domain:qXt,range:GXt,rangeMax:WXt,rangeMin:VXt,scheme:YXt,...kvt}=Svt,Tvt=Wt(kvt);function K6(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Nd(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Nd(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Nd(e);case"nice":return Nd(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return zf(e)&&!hi(["log","time","utc","threshold","quantile"],e)}}function Q4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Gb(e)?void 0:A0t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Dvt(e,t){return hi([h7,p7],t)?e===void 0||Ra(e):t===M1?hi([qa.TIME,qa.UTC,void 0],e):t===zv?X4e(e)||O1(e)||e===void 0:!0}function Lvt(e,t,n=!1){if(!yh(e))return!1;switch(e){case ds:case Ma:case zm:case Ex:case nf:case Qf:return Nd(t)||t==="band"?!0:t==="point"?!n:!1;case Um:return hi(["linear","band"],t);case Hp:case qm:case qp:case jm:case Hm:case cy:return Nd(t)||O1(t)||hi(["band","point","ordinal"],t);case Pu:case gh:case mh:return t!=="band";case Gm:case Bu:return t==="ordinal"||O1(t)}}function Rvt(e){return mn(e)&&"value"in e}const su={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},J4e=su.arc,pF=su.area,gF=su.bar,Fvt=su.image,mF=su.line,vF=su.point,$vt=su.rect,ZT=su.rule,eIe=su.text,g7=su.tick,Mvt=su.trail,m7=su.circle,v7=su.square,tIe=su.geoshape;function Vm(e){return["line","area","trail"].includes(e)}function kE(e){return["rect","bar","image","arc","tick"].includes(e)}const Ovt=new Set(Wt(su));function nh(e){return Vt(e,"type")}const Ivt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Nvt=["fill","fillOpacity"],Pvt=[...Ivt,...Nvt],Bvt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},wEe=Wt(Bvt),qM=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],zvt={area:["line","point"],bar:qM,rect:qM,line:["point"],tick:["bandSize","thickness",...qM]},Uvt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},jvt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},nIe=Wt(jvt);function Uv(e){return Vt(e,"band")}const Hvt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},qvt=5,y7={binSpacing:0,continuousBandSize:qvt,minBandSize:.25,timeUnitBandPosition:.5},Gvt={...y7,binSpacing:1},Wvt={...y7,thickness:1};function Vvt(e){return nh(e)?e.type:e}function rIe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function b7({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!zf(r)||i)return"always-valid";const o=rIe(Lo("invalid",e,t),{isPath:Vm(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function Yvt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function iIe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function oIe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var f;const s=n==null?void 0:n.get("type"),a=jf(t),l=uF(a==null?void 0:a.aggregate),u=b7({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const c=((f=o.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:hF(on(a,{expr:"datum"}),!1),...Xvt(c,n,r)}}}function Xvt(e,t,n){if(Rvt(e)){const{value:r}=e;return Nn(r)?{signal:r.signal}:{value:r}}return iIe({scale:t,scaleName:n,mode:"zeroOrMin"})}function x7(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=fy(t),l=w7(e),u=oIe({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function Kvt(e){const{datum:t}=e;return py(t)?Bv(t):`${Fo(t)}`}function mv(e,t,n,r){const i={};if(t&&(i.scale=t),bh(e)){const{datum:o}=e;py(o)?i.signal=Bv(o):Nn(o)?i.signal=o.signal:KA(o)?i.signal=o.expr:i.value=o}else i.field=on(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function QT({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!Nn(s)&&0<s&&s<1?"datum":void 0,l=on(t,{expr:a,suffix:i}),u=n!==void 0?on(n,{expr:a}):on(t,{suffix:o,expr:a}),f={};if(s===0||s===1){f.scale=e;const c=s===0?l:u;f.field=c}else{const c=Nn(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;f.signal=`scale("${e}", ${c})`}return r&&(f.offset=r),f}function Zvt({scaleName:e,fieldDef:t}){const n=on(t,{expr:"datum"}),r=on(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function w7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Mr(t)){const c=s==null?void 0:s.get("type");if(iu(t)){f??(f=Cm({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:p,type:h}=t;if(qo(d)||f&&p&&h===M1)return a!=null&&a.impute?mv(t,o,{binSuffix:"mid"},{offset:l}):f&&!Ra(c)?QT({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):mv(t,o,nC(t,e)?{binSuffix:"range"}:{},{offset:l});if(ja(d)){if(Zt(n))return QT({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});Xt($4e(e===ds?Zf:ph))}}return mv(t,o,Ra(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?f??t.bandPosition??.5:void 0})}else if(Uf(t)){const c=t.value,d=l?{offset:l}:{};return{...R_(e,c),...d}}}return Br(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function R_(e,t){return hi(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:hi(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Zo(t)}function jv(e){return e&&e!=="number"&&e!=="time"}function sIe(e,t,n){return`${e}(${t}${n?`, ${Fo(n)}`:""})`}const Qvt="  ";function _7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(jv(n))return Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=aIe(e,r,i),a=I1(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return Lf({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Lf({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&Zt(e)&&e.timeUnit===void 0)return Lf({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(P1(e)){const f=eyt({field:s,timeUnit:Zt(e)?(l=Da(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:my(e)&&((u=e.scale)==null?void 0:u.type)===qa.UTC});return f?{signal:f}:void 0}if(t=Z6({type:a,specifiedFormat:t,config:o,normalizeStack:i}),Zt(e)&&qo(e.bin)){const f=on(e,{expr:r,binSuffix:"end"});return{signal:QA(s,f,t,n,o)}}else return t||I1(e)==="quantitative"?{signal:`${cIe(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function aIe(e,t,n){return Zt(e)?n?`${on(e,{expr:t,suffix:"end"})}-${on(e,{expr:t,suffix:"start"})}`:on(e,{expr:t}):Kvt(e)}function Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=aIe(e,r,i)),s!=="datum.value"&&Zt(e)&&qo(e.bin)){const a=on(e,{expr:r,binSuffix:"end"});return{signal:QA(s,a,t,n,o)}}return{signal:sIe(n,s,t)}}function lIe(e,t,n,r,i,o){var s;if(!(pn(r)&&jv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&I1(e)==="quantitative"&&(i.normalizedNumberFormatType&&N1(e)&&e.stack==="normalize"||i.numberFormatType))){if(N1(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return Z6({type:"quantitative",config:i,normalizeStack:!0});if(P1(e)){const a=Zt(e)?(s=Da(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Jvt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return Z6({type:t,specifiedFormat:n,config:i})}}function uIe(e,t,n){var r;if(e&&(Nn(e)||e==="number"||e==="time"))return e;if(P1(t)&&n!=="time"&&n!=="utc")return Zt(t)&&((r=Da(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function Z6({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pn(t))return t;if(e===zv)return r?n.normalizedNumberFormat:n.numberFormat}function Jvt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:U4e(t)}:r?void 0:n.timeFormat)}function cIe(e,t){return`format(${e}, "${t||""}")`}function _Ee(e,t,n,r){return jv(n)?sIe(n,e,t):cIe(e,(pn(t)?t:void 0)??r.numberFormat)}function QA(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return QA(e,t,i.numberFormat,i.numberFormatType,i);const o=_Ee(e,n,r,i),s=_Ee(t,n,r,i);return`${hF(e,!1)} ? "null" : ${o} + "${Qvt}" + ${s}`}function eyt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pn(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):lvt(t,e,o)}const yF="min",tyt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function EEe(e){return yn(tyt,e)}function nyt(e){return Vt(e,"encoding")}function bp(e){return e&&(e.op==="count"||Vt(e,"field"))}function fIe(e){return e&&Dt(e)}function JA(e){return Vt(e,"row")||Vt(e,"column")}function E7(e){return Vt(e,"header")}function bF(e){return Vt(e,"facet")}function ryt(e){return Vt(e,"param")}function iyt(e){return!pn(e)&&Vt(e,"repeat")}function AEe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function A7(e){return Vt(e,"sort")}function Cm({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Mr(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Zt(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return th("timeUnitBandPosition",n,r);if(qo(o))return .5}}function dIe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,f,c;const a=zu(e),l=Lo(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(Zt(t)){const{timeUnit:d,bin:p}=t;if(d&&!n)return{band:th("timeUnitBandSize",r,i)};if(qo(p)&&!Ra(o))return{band:1}}if(kE(r.type))return o?Ra(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(c=i[r.type])==null?void 0:c.discreteBandSize}function hIe(e,t,n,r){return qo(e.bin)||e.timeUnit&&iu(e)&&e.type==="temporal"?Cm({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function pIe(e){return Vt(e,"sort")&&!Vt(e,"field")}function eC(e){return Vt(e,"condition")}function xF(e){const t=e==null?void 0:e.condition;return!!t&&!Dt(t)&&Zt(t)}function tC(e){const t=e==null?void 0:e.condition;return!!t&&!Dt(t)&&Mr(t)}function oyt(e){const t=e==null?void 0:e.condition;return!!t&&(Dt(t)||Uf(t))}function Zt(e){return Vt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function I1(e){return e==null?void 0:e.type}function bh(e){return Vt(e,"datum")}function Qg(e){return iu(e)&&!eD(e)||JT(e)}function CEe(e){return iu(e)&&e.type==="quantitative"&&!e.bin||JT(e)}function JT(e){return bh(e)&&eo(e.datum)}function Mr(e){return Zt(e)||bh(e)}function iu(e){return e&&(Vt(e,"field")||e.aggregate==="count")&&Vt(e,"type")}function Uf(e){return Vt(e,"value")}function my(e){return Vt(e,"scale")||Vt(e,"sort")}function N1(e){return Vt(e,"axis")||Vt(e,"stack")||Vt(e,"impute")}function gIe(e){return Vt(e,"legend")}function mIe(e){return Vt(e,"format")||Vt(e,"formatType")}function syt(e){return Fu(e,["legend","axis","header","scale"])}function ayt(e){return Vt(e,"op")}function on(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(uyt(e))n=o4e("count");else{let s;if(!t.nofn)if(ayt(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;qo(a)?(s=b4e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Wm(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Tp(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!gy(u)&&(s=uvt(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?_x(n):t.expr?n4e(n,t.expr)+o:Qc(n)+o}function eD(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Zt(e)&&!!e.bin;case"temporal":return!1}throw new Error(D4e(e.type))}function lyt(e){var t;return my(e)&&O1((t=e.scale)==null?void 0:t.type)}function uyt(e){return e.aggregate==="count"}function cyt(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(qo(r))return`${n} (binned)`;if(i&&!gy(i)){const a=(s=Da(i))==null?void 0:s.unit;if(a)return`${n} (${dF(a).join("-")})`}else if(o)return Wm(o)?`${n} for max ${o.argmax}`:Tp(o)?`${n} for min ${o.argmin}`:`${WA(o)} of ${n}`;return n}function fyt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Wm(t))return`${i} for argmax(${t.argmax})`;if(Tp(t))return`${i} for argmin(${t.argmin})`;const o=r&&!gy(r)?Da(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||qo(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const vIe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return fyt(e);default:return cyt(e,t)}};let yIe=vIe;function bIe(e){yIe=e}function dyt(){bIe(vIe)}function Wb(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=C7(e))==null?void 0:a.title;if(!Zt(e))return i??e.title;const o=e,s=r?S7(o,t):void 0;return n?Ps(i,o.title,s):i??o.title??s}function C7(e){if(N1(e)&&e.axis)return e.axis;if(gIe(e)&&e.legend)return e.legend;if(E7(e)&&e.header)return e.header}function S7(e,t){return yIe(e,t)}function tD(e){if(mIe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=C7(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function hyt(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(A7(e)&&Dt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Wm(n)&&!Tp(n))return"quantitative";if(my(e)&&((o=e.scale)!=null&&o.type))switch(X6[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function jf(e){if(Zt(e))return e;if(xF(e))return e.condition}function la(e){if(Mr(e))return e;if(tC(e))return e.condition}function xIe(e,t,n,r={}){if(pn(e)||eo(e)||Im(e)){const i=pn(e)?"string":eo(e)?"number":"boolean";return Xt(d0t(t,i,e)),{value:e}}return Mr(e)?nD(e,t,n,r):tC(e)?{...e,condition:nD(e.condition,t,n,r)}:e}function nD(e,t,n,r){if(mIe(e)){const{format:i,formatType:o,...s}=e;if(jv(o)&&!n.customFormatTypes)return Xt(vEe(t)),nD(s,t,n,r)}else{const i=N1(e)?"axis":gIe(e)?"legend":E7(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(jv(s)&&!n.customFormatTypes)return Xt(vEe(t)),nD({...e,[i]:a},t,n,r)}}return Zt(e)?k7(e,t,r):pyt(e)}function pyt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=eo(n)?"quantitative":pn(n)?"nominal":py(n)?"temporal":void 0,{...e,type:t}}function k7(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!Qz(r)&&!Wm(r)&&!Tp(r)&&(Xt(p0t(r)),delete a.aggregate),i&&(a.timeUnit=Da(i)),s&&(a.field=`${s}`),qo(o)&&(a.bin=wF(o,t)),ja(o)&&!Bs(t)&&Xt(W0t(t)),iu(a)){const{type:l}=a,u=vvt(l);l!==u&&(a.type=u),l!=="quantitative"&&uF(r)&&(Xt(h0t(l,r)),a.type="quantitative")}else if(!h4e(t)){const l=hyt(a,t);a.type=l}if(iu(a)){const{compatible:l,warning:u}=gyt(a,t)||{};l===!1&&Xt(u)}if(A7(a)&&pn(a.sort)){const{sort:l}=a;if(EEe(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&EEe(u))return{...a,sort:{encoding:u,order:"descending"}}}if(E7(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function wF(e,t){return Im(e)?{maxbins:lEe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:lEe(t)}:e}const rb={compatible:!0};function gyt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case vp:case yp:case rF:return eD(e)?rb:{compatible:!1,warning:y0t(t)};case ds:case Ma:case zm:case Ex:case Pu:case gh:case mh:case VA:case YA:case iF:case Nv:case oF:case sF:case cy:case nf:case Qf:case aF:return rb;case ed:case Jc:case Jf:case td:return n!==zv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:rb;case qp:case jm:case Hm:case qm:case Hp:case jp:case Up:case Zf:case ph:case Um:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:rb;case Bu:case Gm:return!eD(e)&&!lyt(e)?{compatible:!1,warning:b0t(t)}:rb;case $1:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:rb}}function P1(e){const{formatType:t}=tD(e);return t==="time"||!t&&myt(e)}function myt(e){return e&&(e.type==="temporal"||Zt(e)&&!!e.timeUnit)}function _F(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=Da(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return KA(e)?a=e.expr:Nn(e)?a=e.signal:py(e)?(s=!0,a=Bv(e)):(pn(e)||eo(e))&&s&&(a=`datetime(${Fo(e)})`,ivt(o)&&(eo(e)&&e<1e4||pn(e)&&isNaN(Date.parse(e)))&&(a=Bv({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:Fo(e)}function wIe(e,t){const{type:n}=e;return t.map(r=>{const i=Zt(e)&&!gy(e.timeUnit)?e.timeUnit:void 0,o=_F(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function nC(e,t){return qo(e.bin)?yh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const SEe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function rC(e){return e==null?void 0:e.condition}const _Ie=["domain","grid","labels","ticks","title"],vyt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},EIe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},yyt={...EIe,style:1,labelExpr:1,encoding:1};function kEe(e){return yn(yyt,e)}const byt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},AIe=Wt(byt);function Wp(e){return Vt(e,"mark")}class EF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Wp(t)?Vvt(t.mark)===this.name:!1}}function vv(e,t){const n=e&&e[t];return n?Dt(n)?R1(n,r=>!!r.field):Zt(n)||xF(n):!1}function CIe(e,t){const n=e&&e[t];return n?Dt(n)?R1(n,r=>!!r.field):Zt(n)||bh(n)||tC(n):!1}function SIe(e,t){if(Bs(t)){const n=e[t];if((Zt(n)||bh(n))&&(W4e(n.type)||Zt(n)&&n.timeUnit)){const r=Vz(t);return CIe(e,r)}}return!1}function kIe(e){return R1(pmt,t=>{if(vv(e,t)){const n=e[t];if(Dt(n))return R1(n,r=>!!r.aggregate);{const r=jf(n);return r&&!!r.aggregate}}return!1})}function TIe(e,t){const n=[],r=[],i=[],o=[],s={};return T7(e,(a,l)=>{if(Zt(a)){const{field:u,aggregate:f,bin:c,timeUnit:d,...p}=a;if(f||d||c){const h=C7(a),g=h==null?void 0:h.title;let m=on(a,{forAs:!0});const y={...g?[]:{title:Wb(a,t,{allowDisabling:!0})},...p,field:m};if(f){let v;if(Wm(f)?(v="argmax",m=on({op:"argmax",field:f.argmax},{forAs:!0}),y.field=`${m}.${u}`):Tp(f)?(v="argmin",m=on({op:"argmin",field:f.argmin},{forAs:!0}),y.field=`${m}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(v=f),v){const x={op:v,as:m};u&&(x.field=u),o.push(x)}}else if(n.push(m),iu(a)&&qo(c)){if(r.push({bin:c,field:u,as:m}),n.push(on(a,{binSuffix:"end"})),nC(a,l)&&n.push(on(a,{binSuffix:"range"})),Bs(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",h4e(l)||(y.type=zv)}else if(d&&!gy(d)){i.push({timeUnit:d,field:u,as:m});const v=iu(a)&&a.type!==M1&&"time";v&&(l===VA||l===Nv?y.formatType=v:Cmt(l)?y.legend={formatType:v,...y.legend}:Bs(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function xyt(e,t,n){const r=kmt(t,n);if(r){if(r==="binned"){const i=e[t===Zf?ds:Ma];return!!(Zt(i)&&Zt(e[t])&&ja(i.bin))}}else return!1;return!0}function wyt(e,t,n,r){const i={};for(const o of Wt(e))d4e(o)||Xt(v0t(o));for(let o of xmt){if(!e[o])continue;const s=e[o];if(XA(o)){const a=bmt(o),l=i[a];if(Zt(l)&&mvt(l.type)&&Zt(s)&&!l.timeUnit){Xt(f0t(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Xt(c0t),o=nf),!xyt(e,o,t)){Xt(fF(o,t));continue}if(o===Hp&&t==="line"){const a=jf(e[o]);if(a!=null&&a.aggregate){Xt(m0t);continue}}if(o===Pu&&(n?"fill"in e:"stroke"in e)){Xt(L4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===YA||o===$1&&!Dt(s)&&!Uf(s)||o===Nv&&Dt(s)){if(s){if(o===$1){const a=e[o];if(pIe(a)){i[o]=a;continue}}i[o]=vn(s).reduce((a,l)=>(Zt(l)?a.push(k7(l,o)):Xt(Y6(l,o)),a),[])}}else{if(o===Nv&&s===null)i[o]=null;else if(!Zt(s)&&!bh(s)&&!Uf(s)&&!eC(s)&&!Nn(s)){Xt(Y6(s,o));continue}i[o]=xIe(s,o,r)}}return i}function AF(e,t){const n={};for(const r of Wt(e)){const i=xIe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function _yt(e){const t=[];for(const n of Wt(e))if(vv(e,n)){const r=e[n],i=vn(r);for(const o of i)Zt(o)?t.push(o):xF(o)&&t.push(o.condition)}return t}function T7(e,t,n){if(e)for(const r of Wt(e)){const i=e[r];if(Dt(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function Eyt(e,t,n,r){return e?Wt(e).reduce((i,o)=>{const s=e[o];return Dt(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function DIe(e,t){return Wt(t).reduce((n,r)=>{switch(r){case ds:case Ma:case oF:case aF:case sF:case Zf:case ph:case zm:case Ex:case nf:case jp:case Qf:case Up:case Um:case Jf:case ed:case td:case Jc:case VA:case Bu:case cy:case Nv:return n;case $1:if(e==="line"||e==="trail")return n;case YA:case iF:{const i=t[r];if(Dt(i)||Zt(i))for(const o of vn(i))o.aggregate||n.push(on(o,{}));return n}case Hp:if(e==="trail")return n;case Pu:case gh:case mh:case qp:case jm:case Hm:case Gm:case qm:{const i=jf(t[r]);return i&&!i.aggregate&&n.push(on(i,{})),n}}},[])}function Ayt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Dt(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Dt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Q6(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${D7(t)}`:"";return{field:s+t.field,type:t.type,title:Nn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=_yt(n).map(syt);return{tooltip:[...i,...Id(o,wi)]}}function D7(e){const{title:t,field:n}=e;return Ps(t,n)}function L7(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:c={}})=>{const d=D7(n);return LIe(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...pn(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...c}})}}function LIe(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...nh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Im(e[t])?{}:e[t]}}]:[]}function RIe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:NS(o,n),continuousAxisChannelDef2:NS(s,n),continuousAxisChannelDefError:NS(a,n),continuousAxisChannelDefError2:NS(l,n),continuousAxis:i}}function NS(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Xt(G0t(n,t)),r}else return e}function FIe(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(nh(n)&&n.orient)return n.orient;if(Qg(i)){if(Qg(o)){const s=Zt(i)&&i.aggregate,a=Zt(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return P1(o)&&!P1(i)?"horizontal":"vertical"}return"horizontal"}else{if(Qg(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const rD="boxplot",Cyt=["box","median","outliers","rule","ticks"],Syt=new EF(rD,MIe);function $Ie(e){return eo(e)?"tukey":e}function MIe(e,{config:t}){e={...e,encoding:AF(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=nh(n)?n:{type:n};i&&Xt(T4e("boxplot"));const l=a.extent??t.boxplot.extent,u=Lo("size",a,t),f=a.invalid,c=$Ie(l),{bins:d,timeUnits:p,transform:h,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:x,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:C}=kyt(e,l,t),w=_x(g.field),{color:T,size:R,...L}=x,B=it=>L7(a,m,g,it,t.boxplot),P=B(L),S=B(x),k=(mn(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",D=B({...L,...R?{size:R}:{},color:{condition:{test:`${bo(`lower_box_${g.field}`)} >= ${bo(`upper_box_${g.field}`)}`,...T||{value:k}}}}),O=Q6([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,x),N={type:"tick",color:"black",opacity:1,orient:_,invalid:f,aria:!1},j=c==="min-max"?O:Q6([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,x),q=[...P({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:j}),...P({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:j}),...P({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:j}),...P({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:j})],W=[...c!=="tukey"?q:[],...S({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:E,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O}),...D({partName:"median",mark:{type:"tick",invalid:f,...mn(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:O})];if(c==="min-max")return{...s,transform:(s.transform??[]).concat(h),layer:W};const Q=bo(`lower_box_${g.field}`),ee=bo(`upper_box_${g.field}`),H=`(${ee} - ${Q})`,se=`${Q} - ${l} * ${H}`,ne=`${ee} + ${l} * ${H}`,ge=bo(g.field),we={joinaggregate:OIe(g.field),groupby:y},$e={transform:[{filter:`(${se} <= ${ge}) && (${ge} <= ${ne})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${w}`},{op:"max",field:g.field,as:`upper_whisker_${w}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${w}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${w}`},...v],groupby:y}],layer:q},{tooltip:ve,...Ee}=L,{scale:Ve,axis:Ue}=g,ft=D7(g),ht=Fu(Ue,["title"]),zt=LIe(a,"outliers",t.boxplot,{transform:[{filter:`(${ge} < ${se}) || (${ge} > ${ne})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...ft!==void 0?{title:ft}:{},...Ve!==void 0?{scale:Ve}:{},...Ro(ht)?{}:{axis:ht}},...Ee,...T?{color:T}:{},...C?{tooltip:C}:{}}})[0];let $t;const Tn=[...d,...p,we];return zt?$t={transform:Tn,layer:[zt,$e]}:($t=$e,$t.transform.unshift(...Tn)),{...s,layer:[$t,{transform:h,layer:W}]}}function OIe(e){const t=_x(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function kyt(e,t,n){const r=FIe(e,rD),{continuousAxisChannelDef:i,continuousAxis:o}=RIe(e,r,rD),s=i.field,a=_x(s),l=$Ie(t),u=[...OIe(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${bo(`upper_box_${a}`)} - ${bo(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${bo(`upper_box_${a}`)} + ${bo(`iqr_${a}`)} * ${t}, ${bo(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${bo(`lower_box_${a}`)} - ${bo(`iqr_${a}`)} * ${t}, ${bo(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:p,filteredEncoding:h}=Ayt(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:x}=TIe(h,n),_=r==="vertical"?"horizontal":"vertical",E=r,C=[...g,...m,{aggregate:[...y,...u],groupby:v},...f];return{bins:g,timeUnits:m,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:p}}const R7="errorbar",Tyt=["ticks","rule"],Dyt=new EF(R7,IIe);function IIe(e,{config:t}){e={...e,encoding:AF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=NIe(e,R7,t);delete o.size;const f=L7(a,i,r,o,t.errorbar),c=a.thickness,d=a.size,p={type:"tick",orient:s,aria:!1,...c!==void 0?{thickness:c}:{},...d!==void 0?{size:d}:{}},h=[...f({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...h.length>1?{layer:h}:{...h[0]}}}function Lyt(e,t){const{encoding:n}=e;if(Ryt(n))return{orient:FIe(e,t),inputType:"raw"};const r=Fyt(n),i=$yt(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Mr(a)&&Mr(l))throw new Error(`${t} cannot have both x2 and y2`);if(Mr(a)){if(Qg(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Mr(l)){if(Qg(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Mr(l)&&!Mr(a))throw new Error(`${t} cannot have xError2 without xError`);if(Mr(f)&&!Mr(u))throw new Error(`${t} cannot have yError2 without yError`);if(Mr(a)&&Mr(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Mr(a)){if(Qg(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Mr(u)){if(Qg(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Ryt(e){return(Mr(e.x)||Mr(e.y))&&!Mr(e.x2)&&!Mr(e.y2)&&!Mr(e.xError)&&!Mr(e.xError2)&&!Mr(e.yError)&&!Mr(e.yError2)}function Fyt(e){return Mr(e.x2)||Mr(e.y2)}function $yt(e){return Mr(e.xError)||Mr(e.xError2)||Mr(e.yError)||Mr(e.yError2)}function NIe(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=nh(r)?r:{type:r};o&&Xt(T4e(t));const{orient:u,inputType:f}=Lyt(e,t),{continuousAxisChannelDef:c,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:g}=RIe(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:x}=Myt(l,c,d,p,h,f,t,n),{[g]:_,[g==="x"?"x2":"y2"]:E,[g==="x"?"xError":"yError"]:C,[g==="x"?"xError2":"yError2"]:w,...T}=i,{bins:R,timeUnits:L,aggregate:B,groupby:P,encoding:S}=TIe(T,n),k=[...B,...m],D=f!=="raw"?[]:P,O=Q6(v,c,S,x);return{transform:[...a.transform??[],...R,...L,...k.length===0?[]:[{aggregate:k,groupby:D}],...y],groupby:D,continuousAxisChannelDef:c,continuousAxis:g,encodingWithoutContinuousAxis:S,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:O}}function Myt(e,t,n,r,i,o,s,a){let l=[],u=[];const f=t.field;let c,d=!1;if(o==="raw"){const p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,h=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(h==="iqr")&&Xt(q0t(p,h,s)),h==="stderr"||h==="stdev")l=[{op:h,field:f,as:`extent_${f}`},{op:p,field:f,as:`center_${f}`}],u=[{calculate:`${bo(`center_${f}`)} + ${bo(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${bo(`center_${f}`)} - ${bo(`extent_${f}`)}`,as:`lower_${f}`}],c=[{fieldPrefix:"center_",titlePrefix:WA(p)},{fieldPrefix:"upper_",titlePrefix:TEe(p,h,"+")},{fieldPrefix:"lower_",titlePrefix:TEe(p,h,"-")}],d=!0;else{let g,m,y;h==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:f,as:`lower_${f}`},{op:y,field:f,as:`upper_${f}`},{op:g,field:f,as:`center_${f}`}],c=[{fieldPrefix:"upper_",titlePrefix:Wb({field:f,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Wb({field:f,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Wb({field:f,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Xt(H0t(e.center,e.extent)),o==="aggregated-upper-lower"?(c=[],u=[{calculate:bo(n.field),as:`upper_${f}`},{calculate:bo(f),as:`lower_${f}`}]):o==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${bo(f)} + ${bo(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${bo(f)} + ${bo(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${bo(f)} - ${bo(r.field)}`,as:`lower_${f}`}));for(const p of u)c.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Iv(Iv(p.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:d}}function TEe(e,t,n){return`${WA(e)} ${n} ${t}`}const F7="errorband",Oyt=["band","borders"],Iyt=new EF(F7,PIe);function PIe(e,{config:t}){e={...e,encoding:AF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=NIe(e,F7,t),u=s,f=L7(u,i,r,o,t.errorband),c=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:c?"area":"rect"},p={type:c?"line":"rule"};const h={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(d={...d,...h,ariaRoleDescription:"errorband"},p={...p,...h,aria:!1}):u.interpolate?Xt(bEe("interpolate")):u.tension&&Xt(bEe("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]}}const BIe={};function $7(e,t,n){const r=new EF(e,t);BIe[e]={normalizer:r,parts:n}}function Nyt(){return Wt(BIe)}$7(rD,MIe,Cyt);$7(R7,IIe,Tyt);$7(F7,PIe,Oyt);const Pyt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],zIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Byt=Wt(zIe),zyt=Wt(UIe),Uyt={header:1,headerRow:1,headerColumn:1,headerFacet:1},jIe=Wt(Uyt),HIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],jyt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Hyt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Hf="_vgsid_",qyt={point:{on:"click",fields:[Hf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function M7(e){return e==="legend"||!!(e!=null&&e.legend)}function GM(e){return M7(e)&&mn(e)}function O7(e){return!!(e!=null&&e.select)}function qIe(e){const t=[];for(const n of e||[]){if(O7(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function Gyt(e){return CF(e)||N7(e)||I7(e)}function I7(e){return Vt(e,"concat")}function CF(e){return Vt(e,"vconcat")}function N7(e){return Vt(e,"hconcat")}function GIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rh(e){return Vt(e,"step")}function DEe(e){return Vt(e,"view")||Vt(e,"width")||Vt(e,"height")}const LEe=20,Wyt={align:1,bounds:1,center:1,columns:1,spacing:1},Vyt=Wt(Wyt);function Yyt(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(bF(e)&&!JA(e.facet)||I7(e))&&(i.columns=s),CF(e)&&(i.columns=1);for(const a of Vyt)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=eo(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function J6(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function e8(e,t){const n=iD(e,t);return rh(n)?n.step:WIe}function iD(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ps(n,{step:e.step})}const WIe=20,Xyt={continuousWidth:200,continuousHeight:200,step:WIe},Kyt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Xyt,mark:Uvt,arc:{},area:{},bar:Gvt,circle:{},geoshape:{},image:{},line:{},point:{},rect:y7,rule:{color:"black"},square:{},text:{color:"black"},tick:Wvt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_vt,projection:{},legend:jyt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:qyt,style:{},title:{},facet:{spacing:LEe},concat:{spacing:LEe},normalizedNumberFormat:".0%"},Gh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],REe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},FEe={blue:Gh[0],orange:Gh[1],red:Gh[2],teal:Gh[3],green:Gh[4],yellow:Gh[5],purple:Gh[6],pink:Gh[7],brown:Gh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Zyt(e={}){return{signals:[{name:"color",value:mn(e)?{...FEe,...e}:FEe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Qyt(e){return{signals:[{name:"fontSize",value:mn(e)?{...REe,...e}:REe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Jyt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function VIe(e){const t=Wt(e||{}),n={};for(const r of t){const i=e[r];n[r]=rC(i)?w4e(i):ec(i)}return n}function ebt(e){const t=Wt(e),n={};for(const r of t)n[r]=VIe(e[r]);return n}const tbt=[...nIe,...AIe,...jIe,"background","padding","legend","lineBreak","scale","style","title","view"];function YIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=cx({},Lr(Kyt),n?Jyt(n):{},t?Zyt(t):{},r?Qyt(r):{},o||{});i&&fx(s,"selection",i,!0);const a=Fu(s,tbt);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=ec(s[l]));for(const l of nIe)s[l]&&(a[l]=Ha(s[l]));for(const l of AIe)s[l]&&(a[l]=VIe(s[l]));for(const l of jIe)s[l]&&(a[l]=Ha(s[l]));if(s.legend&&(a.legend=Ha(s.legend)),s.scale){const{invalid:l,...u}=s.scale,f=Ha(l,{level:1});a.scale={...Ha(u),...Wt(f).length>0?{invalid:f}:{}}}return s.style&&(a.style=ebt(s.style)),s.title&&(a.title=Ha(s.title)),s.view&&(a.view=Ha(s.view)),a}const nbt=new Set(["view",...Ovt]),rbt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ibt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...zvt};function obt(e){e=Lr(e);for(const t of rbt)delete e[t];if(e.axis)for(const t in e.axis)rC(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Pyt)delete e.legend[t];if(e.mark){for(const t of wEe)delete e.mark[t];e.mark.tooltip&&mn(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(qIe(e.params)),delete e.params);for(const t of nbt){for(const r of wEe)delete e[t][r];const n=ibt[t];if(n)for(const r of n)delete e[t][r];abt(e,t)}for(const t of Nyt())delete e[t];sbt(e);for(const t in e)mn(e[t])&&Ro(e[t])&&delete e[t];return Ro(e)?void 0:e}function sbt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=x4e(e.title);Ro(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ro(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ro(r)?delete e.title:e.title=r}function abt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};Ro(o)||(e.style[n??t]=o),delete e[t]}function SF(e){return Vt(e,"layer")}function lbt(e){return Vt(e,"repeat")}function ubt(e){return!Dt(e.repeat)&&Vt(e.repeat,"layer")}class P7{map(t,n){return bF(t)?this.mapFacet(t,n):lbt(t)?this.mapRepeat(t,n):N7(t)?this.mapHConcat(t,n):CF(t)?this.mapVConcat(t,n):I7(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(SF(t))return this.mapLayer(t,n);if(Wp(t))return this.mapUnit(t,n);throw new Error(Jz(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const cbt={zero:1,center:1,normalize:1};function fbt(e){return yn(cbt,e)}const dbt=new Set([J4e,gF,pF,ZT,vF,m7,v7,mF,eIe,g7]),hbt=new Set([gF,pF,J4e]);function ib(e){return Zt(e)&&I1(e)==="quantitative"&&!e.bin}function $Ee(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(Zt(s)&&Zt(a))if(ib(s)&&ib(a)){if(s.stack)return t;if(a.stack)return i;const l=Zt(s)&&!!s.aggregate,u=Zt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(ib(s))return t;if(ib(a))return i}else{if(ib(s))return o&&n==="vertical"?void 0:t;if(ib(a))return o&&n==="horizontal"?void 0:i}}function pbt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function XIe(e,t){var g,m;const n=nh(e)?e:{type:e},r=n.type;if(!dbt.has(r))return null;const i=$Ee(t,"x",n)||$Ee(t,"theta",n);if(!i)return null;const o=t[i],s=Zt(o)?on(o,{}):void 0,a=pbt(i),l=[],u=new Set;if(t[a]){const y=t[a],v=Zt(y)?on(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const f=a==="x"?"xOffset":"yOffset",c=t[f],d=Zt(c)?on(c,{}):void 0;d&&d!==s&&(l.push(f),u.add(d));const p=wmt.reduce((y,v)=>{if(v!=="tooltip"&&vv(t,v)){const x=t[v];for(const _ of vn(x)){const E=jf(_);if(E.aggregate)continue;const C=on(E,{});(!C||!u.has(C))&&y.push({channel:v,fieldDef:E})}}return y},[]);let h;return o.stack!==void 0?Im(o.stack)?h=o.stack?"zero":null:h=o.stack:hbt.has(r)&&(h="zero"),!h||!fbt(h)||kIe(t)&&p.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==qa.LINEAR&&o!=null&&o.stack&&Xt(z0t(o.scale.type)),Mr(t[vh(i)])?(o.stack!==void 0&&Xt(B0t(i)),null):(Zt(o)&&o.aggregate&&!Mmt.has(o.aggregate)&&Xt(U0t(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:Vm(r),stackBy:p,offset:h}))}function KIe(e,t,n){const r=Ha(e),i=Lo("orient",r,n);if(r.orient=ybt(r.type,t,i),i!==void 0&&i!==r.orient&&Xt(E0t(r.orient,i)),r.type==="bar"&&r.orient){const l=Lo("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Hvt[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Lo("opacity",r,n),s=Lo("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=mbt(r.type,t)),Lo("cursor",r,n)===void 0&&(r.cursor=gbt(r,t,n)),r}function gbt(e,t,n){return t.href||e.href||Lo("href",e,n)?"pointer":e.cursor}function mbt(e,t){if(hi([vF,g7,m7,v7],e)&&!kIe(t))return .7}function vbt(e,t,{graticule:n}){if(n)return!1;const r=th("filled",e,t),i=e.type;return Ps(r,i!==vF&&i!==mF&&i!==ZT)}function ybt(e,t,n){switch(e){case vF:case m7:case v7:case eIe:case $vt:case Fvt:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case gF:if(Zt(r)&&(ja(r.bin)||Zt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Zt(i)&&(ja(i.bin)||Zt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(Zt(r)&&r.type===zv&&!qo(r.bin)||JT(r))&&Zt(i)&&ja(i.bin)?"horizontal":"vertical";if(!s)return(Zt(i)&&i.type===zv&&!qo(i.bin)||JT(i))&&Zt(r)&&ja(r.bin)?"vertical":"horizontal"}case ZT:if(o&&!(Zt(r)&&ja(r.bin))&&s&&!(Zt(i)&&ja(i.bin)))return;case pF:if(s)return Zt(i)&&ja(i.bin)?"horizontal":"vertical";if(o)return Zt(r)&&ja(r.bin)?"vertical":"horizontal";if(e===ZT){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case mF:case g7:{const a=CEe(r),l=CEe(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=iu(r)&&r.type===M1,f=iu(i)&&i.type===M1;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function bbt(e){const{point:t,line:n,...r}=e;return Wt(r).length>1?r:r.type}function xbt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Fu(e[t],["point","line"])});return e}function WM(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mn(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mn(t.point)?t.point:{}:void 0}function MEe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class wbt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Wp(t)){const{mark:r,encoding:i}=t,o=nh(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!WM(o,n[o.type],i);case"area":return!!WM(o,n[o.type],i)||!!MEe(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...f}=t,c=AF(u,i),d=nh(a)?a:{type:a},p=WM(d,i[d.type],c),h=d.type==="area"&&MEe(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:bbt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Fu(c,["shape"])}],m=XIe(KIe(d,c,i),c);let y=c;if(m){const{fieldChannel:v,offset:x}=m;y={...c,[v]:{...c[v],...x?{stack:x}:{}}}}return y=Fu(y,["y2","x2"]),h&&g.push({...s?{projection:s}:{},mark:{type:"line",...L1(d,["clip","interpolate","tension","tooltip"]),...h},encoding:y}),p&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...L1(d,["clip","tooltip"]),...p},encoding:y}),r({...f,layer:g},{...n,config:xbt(i)})}}function _bt(e,t){return t?JA(e)?QIe(e,t):ZIe(e,t):e}function VM(e,t){return t?QIe(e,t):e}function t8(e,t,n){const r=t[e];if(iyt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Xt(e0t(r.repeat));return}return t}function ZIe(e,t){if(e=t8("field",e,t),e!==void 0){if(e===null)return null;if(A7(e)&&bp(e.sort)){const n=t8("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function OEe(e,t){if(Zt(e))return ZIe(e,t);{const n=t8("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function IEe(e,t){if(Mr(e)){const n=OEe(e,t);if(n)return n;if(eC(e))return{condition:e.condition}}else{if(tC(e)){const n=OEe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function QIe(e,t){const n={};for(const r in e)if(Vt(e,r)){const i=e[r];if(Dt(i))n[r]=i.map(o=>IEe(o,t)).filter(o=>o);else{const o=IEe(i,t);o!==void 0&&(n[r]=o)}}return n}class Ebt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Wp(t)){const{encoding:n,mark:r}=t;if(r==="line"||nh(r)&&r.type==="line")for(const i of ymt){const o=fy(i),s=n[o];if(n[i]&&(Zt(s)&&!ja(s.bin)||bh(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Xt(_0t(!!i.x2,!!i.y2)),r({...t,mark:mn(o)?{...o,type:"rule"}:"rule"},n)}}class Abt extends P7{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Syt,Dyt,Iyt,new wbt,new Ebt]}map(t,n){if(Wp(t)){const r=vv(t.encoding,vp),i=vv(t.encoding,yp),o=vv(t.encoding,rF);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=VM(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return ubt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:f=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(c=>{const d={...u,layer:c},p=`${(i.name?`${i.name}_`:"")+f}child__layer_${fs(c)}`,h=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:p});return h.name=p,h})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!Dt(r)&&t.columns&&(t=Fu(t,["columns"]),Xt(gEe("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,f=!Dt(r)&&r.row||[l?l.row:null],c=!Dt(r)&&r.column||[l?l.column:null],d=Dt(r)&&r||[l?l.repeat:null];for(const h of d)for(const g of f)for(const m of c){const y={repeat:h,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Dt(r)?`${fs(h)}`:(r.row?`row_${fs(g)}`:"")+(r.column?`column_${fs(m)}`:"")),x=this.map(i,{...n,repeater:y,repeaterPrefix:v});x.name=v,a.push(Fu(x,["data"]))}const p=Dt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:p,concat:a}}mapFacet(t,n){const{facet:r}=t;return JA(r)&&t.columns&&(t=Fu(t,["columns"]),Xt(gEe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=PEe({parentProjection:s,projection:i}),u=NEe({parentEncoding:o,encoding:VM(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:f,view:c,params:d,encoding:p,...h}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=VM(s,n.repeater);return this.mapFacet({...h,...m,facet:g,spec:{...l?{width:l}:{},...f?{height:f}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Xt(x0t([...r?[vp]:[],...i?[yp]:[]]));const s={},a={};for(const l of[vp,yp]){const u=t[l];if(u){const{align:f,center:c,spacing:d,columns:p,...h}=u;s[l]=h;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...f}=o;return{facetMapping:_bt(f,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:NEe({parentEncoding:n,encoding:o,layer:!0}),parentProjection:PEe({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function NEe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Wt(e),...Wt(t)]);for(const o of i){const s=t[o],a=e[o];if(Mr(s)){const l={...a,...s};r[o]=l}else tC(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Uf(a)||Nn(a)||Mr(a)||Dt(a))&&(r[o]=a)}}else r=t;return!r||Ro(r)?void 0:r}function PEe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Xt(u0t({parentProjection:t,projection:n})),n??t}function B7(e){return Vt(e,"filter")}function Cbt(e){return Vt(e,"stop")}function JIe(e){return Vt(e,"lookup")}function Sbt(e){return Vt(e,"data")}function kbt(e){return Vt(e,"param")}function Tbt(e){return Vt(e,"pivot")}function Dbt(e){return Vt(e,"density")}function Lbt(e){return Vt(e,"quantile")}function Rbt(e){return Vt(e,"regression")}function Fbt(e){return Vt(e,"loess")}function $bt(e){return Vt(e,"sample")}function Mbt(e){return Vt(e,"window")}function Obt(e){return Vt(e,"joinaggregate")}function Ibt(e){return Vt(e,"flatten")}function Nbt(e){return Vt(e,"calculate")}function e6e(e){return Vt(e,"bin")}function Pbt(e){return Vt(e,"impute")}function Bbt(e){return Vt(e,"timeUnit")}function zbt(e){return Vt(e,"aggregate")}function Ubt(e){return Vt(e,"stack")}function jbt(e){return Vt(e,"fold")}function Hbt(e){return Vt(e,"extent")&&!Vt(e,"density")&&!Vt(e,"regression")}function qbt(e){return e.map(t=>B7(t)?{filter:qb(t.filter,gvt)}:t)}class Gbt extends P7{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=BEe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=BEe(t,n),t.encoding){const r={};for(const[i,o]of Em(t.encoding))r[i]=t6e(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Em(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...f}=s;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=u!=="none";for(const c of Ja(n.selectionPredicates[o]??{}))c.empty=u!=="none";return{name:o,value:a,select:f,bind:l}})}:t}}function BEe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(B7(o))return{filter:n8(o,t)};if(e6e(o)&&dy(o.bin))return{...o,bin:n6e(o.bin)};if(JIe(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function t6e(e,t){var r,i;const n=Lr(e);if(Zt(n)&&dy(n.bin)&&(n.bin=n6e(n.bin)),my(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(eC(n))if(Dt(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:n8(o,t)}});else{const{selection:o,param:s,test:a,...l}=t6e(n.condition,t);n.condition=s?n.condition:{...l,test:n8(n.condition,t)}}return n}function n6e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function n8(e,t){const n=r=>qb(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):qb(e.test||e.filter,r=>r.selection?n(r.selection):r)}class r8 extends P7{map(t,n){const r=n.selections??[];if(t.params&&!Wp(t)){const i=[];for(const o of t.params)O7(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(pn(a)&&(a===t.name||i.includes(a))||Dt(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=r8.prototype[e];r8.prototype[e]=function(n,r){return t.call(this,n,Wbt(n,r))}}function Wbt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function r6e(e,t){t===void 0&&(t=YIe(e.config));const n=Kbt(e,t),{width:r,height:i}=e,o=Zbt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const Vbt=new Abt,Ybt=new Gbt,Xbt=new r8;function Kbt(e,t={}){const n={config:t};return Xbt.map(Vbt.map(Ybt.map(e,n),n),n)}function zEe(e){return pn(e)?{type:e}:e??{}}function Zbt(e,t,n){let{width:r,height:i}=t;const o=Wp(e)||SF(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Xt(fEe("width")),r=void 0),i=="container"&&(Xt(fEe("height")),i=void 0));const a={type:"pad",...s,...n?zEe(n.autosize):{},...zEe(e.autosize)};if(a.type==="fit"&&!o&&(Xt(Hmt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Xt(dEe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Xt(dEe("height")),!rc(a,{type:"pad"}))return a}function Qbt(e){return["fit","fit-x","fit-y"].includes(e)}function Jbt(e){return e?`fit-${lF(e)}`:"fit"}const e1t=["background","padding"];function UEe(e,t){const n={};for(const r of e1t)e&&e[r]!==void 0&&(n[r]=ec(e[r]));return t&&(n.params=e.params),n}class Vp{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Vp(Lr(this.explicit),Lr(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ps(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Wt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Sd(e){return{explicit:!0,value:e}}function Yu(e){return{explicit:!1,value:e}}function i6e(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:kF(t,n,r,i)}}function kF(e,t,n,r){return e.explicit&&t.explicit&&Xt(F0t(n,r,e.value,t.value)),e}function Sm(e,t,n,r,i=kF){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:rc(e.value,t.value)?e:i(e,t,n,r)}class t1t extends Vp{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function B1(e){return Vt(e,"url")}function TE(e){return Vt(e,"values")}function o6e(e){return Vt(e,"name")&&!B1(e)&&!TE(e)&&!lm(e)}function lm(e){return e&&(s6e(e)||a6e(e)||z7(e))}function s6e(e){return Vt(e,"sequence")}function a6e(e){return Vt(e,"sphere")}function z7(e){return Vt(e,"graticule")}var bs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(bs||(bs={}));function l6e({invalid:e,isPath:t}){switch(rIe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function n1t(e){const{marks:t,scales:n}=l6e(e);return t===n?bs.Main:n==="include-invalid-values"?bs.PreFilterInvalid:bs.PostFilterInvalid}class Eo{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Xt(s0t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class $u extends Eo{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${i4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function YM(e){return e.as!==void 0}function jEe(e){return`${e}_end`}class jd extends Eo{clone(){return new jd(null,Lr(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(gy(l)){if(ys(n)){const{mark:f,markDef:c,config:d}=n,p=Cm({fieldDef:o,markDef:c,config:d});(kE(f)||p)&&(u={timeUnit:Da(l),field:a})}}else u={as:on(o,{forAs:!0}),field:a,timeUnit:l};if(ys(n)){const{mark:f,markDef:c,config:d}=n,p=Cm({fieldDef:o,markDef:c,config:d});kE(f)&&Bs(s)&&p!==.5&&(u.rectBandPosition=p)}u&&(i[wi(u)]=u)}return i},{});return Ro(r)?null:new jd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=Da(r),s={...i,timeUnit:o};return new jd(t,{[wi(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Em(this.timeUnits)){const o=YM(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ja(this.timeUnits).map(t=>YM(t)?t.as:jEe(t.field)))}dependentFields(){return new Set(Ja(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${wi(this.timeUnits)}`}assemble(){const t=[];for(const n of Ja(this.timeUnits)){const{rectBandPosition:r}=n,i=Da(n.timeUnit);if(YM(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,f=[s,`${s}_end`];t.push({field:Qc(o),type:"timeunit",...a?{units:dF(a)}:{},...l?{timezone:"utc"}:{},...u,as:f}),t.push(...HEe(f,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=u6e({timeUnit:i,field:s}),l=jEe(s);t.push({type:"formula",expr:a,as:l}),t.push(...HEe([s,l],r,i))}}return t}}const TF="offsetted_rect_start",DF="offsetted_rect_end";function u6e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=B4e(r),{part:s,step:a}=H4e(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${bo(t)}, ${n?-a:a})`}function HEe([e,t],n,r){if(n!==void 0&&n!==.5){const i=bo(e),o=bo(t);return[{type:"formula",expr:qEe([u6e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${TF}`},{type:"formula",expr:qEe([i,o],n+.5),as:`${e}_${DF}`}]}return[]}function qEe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const iC="_tuple_fields";class r1t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const i1t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new r1t),o={},s={},a=new Set,l=(h,g)=>{const m=g==="visual"?h.channel:h.field;let y=fs(`${r}_${m}`);for(let v=1;a.has(y);v++)y=fs(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,f=e.config.selection[u],c=n.value!==void 0?vn(n.value):null;let{fields:d,encodings:p}=mn(n.select)?n.select:{};if(!d&&!p&&c){for(const h of c)if(mn(h))for(const g of Wt(h))vmt(g)?(p||(p=[])).push(g):u==="interval"?(Xt(Jmt),p=f.encodings):(d??(d=[])).push(g)}!d&&!p&&(p=f.encodings,"fields"in f&&(d=f.fields));for(const h of p??[]){const g=e.fieldDef(h);if(g){let m=g.field;if(g.aggregate){Xt(qmt(h,g.aggregate));continue}else if(!m){Xt(pEe(h));continue}if(g.timeUnit&&!gy(g.timeUnit)){m=e.vgField(h);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[wi(y)]=y}if(!o[m]){const y=u==="interval"&&yh(h)&&zf(e.getScaleComponent(h).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:h,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===Hf,c4e(h)?(v.geoChannel=h,v.channel=u4e(h),i.hasChannel[v.channel]=o[m]):i.hasChannel[h]=o[m]}}else Xt(pEe(h))}for(const h of d??[]){if(i.hasField[h])continue;const g={type:"E",field:h,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[h]=g,i.hasSelectionId=i.hasSelectionId||h===Hf}c&&(t.init=c.map(h=>i.items.map(g=>mn(h)?h[g.geoChannel||g.channel]!==void 0?h[g.geoChannel||g.channel]:h[g.field]:h))),Ro(s)||(i.timeUnit=new jd(null,s))},signals:(e,t,n)=>{const r=t.name+iC;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(h6e)})}},c6e="_curr",s3="anim_value",bb="anim_clock",i8="eased_anim_clock",f6e="min_extent",d6e="max_range_extent",XM="last_tick_at",KM="is_playing",o1t=1/60*1e3,s1t=(e,t)=>[{name:i8,update:bb},{name:`${e}_domain`,init:`domain('${t}')`},{name:f6e,init:`extent(${e}_domain)[0]`},{name:d6e,init:`extent(range('${t}'))[1]`},{name:s3,update:`invert('${t}', ${i8})`}],a1t={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Hd(t)&&(n=n.concat([{name:bb,init:"0",on:[{events:{type:"timer",throttle:o1t},update:`${KM} ? (${bb} + (now() - ${XM}) > ${d6e} ? 0 : ${bb} + (now() - ${XM})) : ${bb}`}]},{name:XM,init:"now()",on:[{events:[{signal:bb},{signal:KM}],update:"now()"}]},{name:KM,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+iC,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Ja(e.component.selection??{}).reduce((f,c)=>c.type==="interval"?f.concat(c.name+Vb):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${yv(e)}, `;if(t.project.hasSelectionId)u+=`${Hf}: ${s}[${Qt(Hf)}]`;else if(Hd(t))u+=`fields: ${i}, values: [${s3} ? ${s3} : ${f6e}]`;else{const f=o.items.map(c=>{const d=e.fieldDef(c.channel);return d!=null&&d.bin?`[${s}[${Qt(e.vgField(c.channel,{}))}], ${s}[${Qt(e.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Qt(c.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(Hd(t))return n.concat(s1t(t.name,e.scaleName(Um)),[{name:r+Lp,on:[{events:[{signal:i8},{signal:s3}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+Lp,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function h6e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Qc(i.field),i}function Hv(e,t=!0,n=$l){if(Dt(e)){const r=e.map(i=>Hv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(py(e))return n(t?Bv(e):rvt(e));return t?n(Fo(e)):e}function l1t(e,t){for(const n of Ja(e.component.selection??{})){const r=n.name;let i=`${r}${Lp}, ${n.resolve==="global"?"true":`{unit: ${yv(e)}}`}`;for(const o of RF)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+O1t,on:[{events:{signal:n.name+Lp},update:`modify(${Qt(n.name+qv)}, ${i})`}]})}return U7(t)}function u1t(e,t){if(e.component.selection&&Wt(e.component.selection).length){const n=Qt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Pm("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return U7(t)}function c1t(e,t){let n=!1;for(const r of Ja(e.component.selection??{})){const i=r.name,o=Qt(i+qv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${L6e}(${o}, ${Qt(a)}${l}`})}n=!0;for(const a of RF)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),U7(t)}function f1t(e,t){const n=[],r=[],i=yv(e,{escape:!1});for(const o of Ja(e.component.selection??{})){const s={name:o.name+qv};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Hf}}]),o.init){const l=o.project.items.map(h6e);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[Hf]:Hv(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:Hv(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+qv).length||n.push(s),Hd(o)&&t.length){const l=e.lookupDataSource(e.getDataName(bs.Main)),u=t.find(c=>c.name===l),f=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(d=>d!==f);const c={name:u.name+c6e,source:u.name,transform:[f]};r.push(c)}}}return n.concat(t,r)}function p6e(e,t){for(const n of Ja(e.component.selection??{}))for(const r of RF)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function d1t(e,t){for(const n of e.children)ys(n)&&(t=p6e(n,t));return t}function h1t(e,t,n,r){const i=U6e(e,t.param,t);return{signal:zf(n.get("type"))&&Dt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function U7(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const xp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!yh(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Xt(Ymt),!o||!zf(s)){Xt(Vmt);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||s8(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(L6e))i.update=`{${r.map(s=>`${Qt(Qc(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${Qt(Qc(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!s8(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function o8(e,t){return`domain(${Qt(e.scaleName(t))})`}function s8(e){return e.parent&&Dx(e.parent)&&(!e.parent.parent||s8(e.parent.parent))}const Vb="_brush",g6e="_scale_trigger",C2="geo_interval_init_tick",m6e="_init",p1t="_center",g1t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mn(n.select)?n.select:{}};i.fields=[Hf],i.encodings||(i.encodings=n.value?Wt(n.value):[ed,Jf]),n.select={type:"interval",...i}}if(t.translate&&!xp.defined(t)){const i=`!event.item || event.item.mark.name !== ${Qt(t.name+Vb)}`;for(const o of t.events){if(!o.between){Xt(`${o} is not an ordered event stream for interval selections.`);continue}const s=vn((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Lp,o=Ja(t.project.hasChannel).filter(a=>a.channel===ds||a.channel===Ma),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(m1t(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=Qt(e.projectionName()),l=e.projectionName()+p1t,{x:u,y:f}=t.project.hasChannel,c=u&&u.signals.visual,d=f&&f.signals.visual,p=u?s&&s[u.index]:`${l}[0]`,h=f?s&&s[f.index]:`${l}[1]`,g=E=>e.getSizeSignalRef(E).signal,m=`[[${c?c+"[0]":"0"}, ${d?d+"[0]":"0"}],[${c?c+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+m6e,init:`[scale(${a}, [${u?p[0]:p}, ${f?h[0]:h}]), scale(${a}, [${u?p[1]:p}, ${f?h[1]:h}])]`}),(!u||!f)&&(n.find(C=>C.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${Qt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${yv(e)}}`,x=`vlSelectionTuples(${y}, ${v})`,_=o.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...s?[{signal:C2}]:[]],update:x}]})}else{if(!xp.defined(t)){const u=r+g6e,f=o.map(c=>{const d=c.channel,{data:p,visual:h}=c.signals,g=Qt(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=zf(m)?"+":"";return`(!isArray(${p}) || (${y}invert(${g}, ${h})[0] === ${y}${p}[0] && ${y}invert(${g}, ${h})[1] === ${y}${p}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:o.map(c=>({scale:e.scaleName(c.channel)})),update:f.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${yv(e)}, fields: ${r+iC}, values`;return n.concat({name:i,...s?{init:`{${l}: ${Hv(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ys(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===C2).length||n.unshift({name:C2,value:null,on:[{events:"timer{1}",update:`${C2} === null ? {} : ${C2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${Qt(t.name+qv)})`;if(xp.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Wt(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${yv(e)}`,...u[m]},{value:0}];const{fill:f,fillOpacity:c,cursor:d,...p}=t.mark,h=Wt(p).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:p[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+Vb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:c}},update:u}},...n,{name:r+Vb,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...h}}}]}};function m1t(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=Qt(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===ds?"width":"height").signal,f=`${o}(unit)`,c=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${f}, ${f}]`},{events:p,update:`[${s}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,p=xp.defined(t),h=e.getScaleComponent(o),g=h?h.get("type"):void 0,m=r?{init:Hv(r,!0,l)}:{value:[]};return c.push({events:{signal:t.name+g6e},update:zf(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[{name:s,...m,on:c},{name:d,...r?{init:Hv(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===ds?0:1,p=t.name+m6e,h=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[{name:s,...h,on:c}]}}function Cx({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=eC(t)&&t.condition;let s=[];o&&(s=vn(o).map(u=>{const f=i(u);if(ryt(u)){const{param:c,empty:d}=u;return{test:z6e(e,{param:c,empty:d}),...f}}else return{test:lD(e,u.test),...f}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function j7(e,t="text"){const n=e.encoding[t];return Cx({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>LF(r,e.config),invalidValueRef:void 0})}function LF(e,t,n="datum"){if(e){if(Uf(e))return Zo(e.value);if(Mr(e)){const{format:r,formatType:i}=tD(e);return _7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function v6e(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(Dt(s))return{tooltip:GEe({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Cx({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const f=LF(u,i,a);if(f)return f;if(u===null)return;let c=Lo("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pn(c))return{value:c};if(mn(c))return Nn(c)?c:c.content==="encoding"?GEe(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function y6e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(f,c){const d=fy(c),p=iu(f)?f:{...f,type:e[d].type},h=p.title||S7(p,i),g=vn(h).join(", ").replaceAll(/"/g,'\\"');let m;if(Bs(c)){const y=c==="x"?"x2":"y2",v=jf(e[y]);if(ja(p.bin)&&v){const x=on(p,{expr:s}),_=on(v,{expr:s}),{format:E,formatType:C}=tD(p);m=QA(x,_,E,C,i),o.add(y)}}if((Bs(c)||c===nf||c===Qf)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:v}=tD(p);m=_7({fieldOrDatumDef:p,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=LF(p,i,s).signal),a.push({channel:c,key:g,value:m})}T7(e,(f,c)=>{Zt(f)?l(f,c):xF(f)&&l(f.condition,c)});const u={};for(const{channel:f,key:c,value:d}of a)!o.has(f)&&!u[c]&&(u[c]=d);return u}function GEe(e,t,n,{reactiveGeom:r}={}){const i=y6e(e,t,n,{reactiveGeom:r}),o=Em(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function v1t(e){const{markDef:t,config:n}=e,r=Lo("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...y1t(e),...b1t(e)}}function y1t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Lo("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:yn(zmt,t)?{}:{ariaRoleDescription:{value:t}}}function b1t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Cx({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>LF(l,e.config),invalidValueRef:void 0});const s=Lo("description",n,r);if(s!=null)return{description:Zo(s)};if(r.aria===!1)return{};const a=y6e(t,i,r);if(!Ro(a))return{description:{signal:Em(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Ga(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Lo(e,r,o,{vgChannel:s,ignoreVgConfig:!eC(u)})),l!==void 0&&(a=Zo(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},c=oIe({...f,scaleChannel:e,channelDef:u});return Cx({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:c,mainRefFn:p=>w7({...f,channel:e,channelDef:p,stack:null,defaultRef:a})})}function b6e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Lo("filled",n,i),a=hi(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Lo(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=Lo(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],f=s?"fill":"stroke",c={...l?{fill:Zo(l)}:{},...u?{stroke:Zo(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Xt(L4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...Ga("color",e,{vgChannel:f,defaultValue:s?l:u}),...Ga("fill",e,{defaultValue:r.fill?l:void 0}),...Ga("stroke",e,{defaultValue:r.stroke?u:void 0})}}function x1t(e){const{encoding:t,mark:n}=e,r=t.order;return!Vm(n)&&Uf(r)?Cx({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Zo(i.value),invalidValueRef:void 0}):{}}function z1({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:w7({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Zo(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Jl(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[vh(e)],f=t.scaleName(e),c=t.getScaleComponent(e),{offset:d,offsetType:p}=z1({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=H7({model:t,defaultPos:n,channel:e,scaleName:f,scale:c}),g=!l&&Bs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:w1t({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:f,scale:c,stack:a,offset:d,defaultRef:h,bandPosition:p==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function w1t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Mr(n)&&i&&t===i.fieldChannel){if(Zt(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return QT({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return mv(n,r,{suffix:"end"},{offset:o})}return x7(e)}function H7({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=fy(n),l=Am(n),u=Lo(n,o,s,{vgChannel:l});if(u!==void 0)return R_(n,u);switch(t){case"zeroOrMin":return WEe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return WEe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[zu(n)],mult:.5}}}}function WEe({mainChannel:e,config:t,...n}){const r=iIe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const _1t={left:"x",center:"xc",right:"x2"},E1t={top:"y",middle:"yc",bottom:"y2"};function x6e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Am(e);const i=e==="x"?"align":"baseline",o=Lo(i,t,n);let s;return Nn(o)?(Xt(w0t(i)),s=void 0):s=o,e==="x"?_1t[s||(r==="top"?"left":"center")]:E1t[s||r]}function oD(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?w6e(e,t,{defaultPos:n,defaultPos2:r}):Jl(e,t,{defaultPos:n})}function w6e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=vh(e),a=zu(e),l=A1t(t,r,s),u=l[a]?x6e(e,i,o):Am(e);return{...Jl(e,t,{defaultPos:n,vgChannel:u}),...l}}function A1t(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=fy(n),u=zu(n),f=Am(n),c=r[l],d=e.scaleName(l),p=e.getScaleComponent(l),{offset:h}=n in r||n in o?z1({channel:n,markDef:o,encoding:r,model:e}):z1({channel:l,markDef:o,encoding:r,model:e});if(!c&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=zu(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[f]:{field:e.getName(n)}}}const g=C1t({channel:n,channelDef:c,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:p,stack:s,offset:h,defaultRef:void 0});return g!==void 0?{[f]:g}:PS(n,o)||PS(n,{[n]:V6(n,o,a.style),[u]:V6(u,o,a.style)})||PS(n,a[i])||PS(n,a.mark)||{[f]:H7({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()}}function C1t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Mr(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?mv(t,o,{suffix:"start"},{offset:l}):x7({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function PS(e,t){const n=zu(e),r=Am(e);if(t[r]!==void 0)return{[r]:R_(e,t[r])};if(t[e]!==void 0)return{[r]:R_(e,t[e])};if(t[n]){const i=t[n];if(Uv(i))Xt(g0t(n));else return{[n]:R_(e,i)}}}function Dp(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=vh(t),a=zu(t),l=r[t],u=r[s],f=e.getScaleComponent(t),c=f?f.get("type"):void 0,d=i.orient,p=r[a]??r.size??Lo("size",i,n,{vgChannel:a}),h=p4e(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Zt(l)&&(qo(l.bin)||ja(l.bin)||l.timeUnit&&!u)&&!(p&&!Uv(p))&&!r[h]&&!Ra(c)?T1t({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Mr(l)&&Ra(c)||g)&&!u?k1t(l,t,e):w6e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function S1t(e,t,n,r,i,o,s){if(Uv(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=th("minBandSize",{type:s},r);return{signal:f?`max(${Df(f)}, ${u})`:u}}else i.band!==1&&(Xt(C0t(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(hy(l)&&eo(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:c}=r.scale,d=Ps(l,s==="tick"?c:s==="bar"?u:f);if(Nn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(eo(d))return{signal:`${1-d} * ${e}`}}return{value:e8(r.view,e)-2}}function k1t(e,t,n){var R,L;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=zu(t),c=vh(t),d=p4e(t),p=n.scaleName(d),h=n.getScaleComponent(Vz(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Ga("size",n,{vgChannel:f,defaultRef:Zo(r.size)}):Xt(D0t(r.type)));const y=!!m,v=dIe({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(R=u||h)==null?void 0:R.get("type"),useVlSizeChannel:g});m=m||{[f]:S1t(f,p||l,h||u,o,v,!!e,r.type)};const x=((L=u||h)==null?void 0:L.get("type"))==="band"&&Uv(v)&&!y?"top":"middle",_=x6e(t,r,o,x),E=_==="xc"||_==="yc",{offset:C,offsetType:w}=z1({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),T=x7({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:C,defaultRef:H7({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:E?w==="encoding"?0:.5:Nn(v)?{signal:`(1-${v})/2`}:Uv(v)?(1-v.band)/2:0});if(f)return{[_]:T,...m};{const B=Am(c),P=m[f],S=C?{...P,offset:C}:P;return{[_]:T,[B]:Dt(T)?[T[0],{...T[1],offset:S}]:{...T,offset:S}}}}function VEe(e,t,n,r,i,o,s){if(l4e(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Nn(n)||Nn(i)||Nn(r)||o){const u=Df(n),f=Df(i),c=Df(r),d=Df(o),h=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=c?`${c} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=f?`(${f} + ${h})`:h;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function T1t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var L;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),c=dIe({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=(L=r.component.axes[n])==null?void 0:L[0],p=(d==null?void 0:d.get("translate"))??.5,h=Bs(n)?Lo("binSpacing",o,i)??0:0,g=vh(n),m=Am(n),y=Am(g),v=th("minBandSize",o,i),{offset:x}=z1({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:_}=z1({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),E=Zvt({fieldDef:e,scaleName:l}),C=VEe(n,h,f,p,x,v,E),w=VEe(g,h,f,p,_??x,v,E),T=Nn(c)?{signal:`(1-${c.signal})/2`}:Uv(c)?(1-c.band)/2:.5,R=Cm({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(qo(e.bin)||e.timeUnit){const B=e.timeUnit&&R!==.5;return{[y]:YEe({fieldDef:e,scaleName:l,bandPosition:T,offset:w,useRectOffsetField:B}),[m]:YEe({fieldDef:e,scaleName:l,bandPosition:Nn(T)?{signal:`1-${T.signal}`}:1-T,offset:C,useRectOffsetField:B})}}else if(ja(e.bin)){const B=mv(e,l,{},{offset:w});if(Zt(t))return{[y]:B,[m]:mv(t,l,{},{offset:C})};if(dy(e.bin)&&e.bin.step)return{[y]:B,[m]:{signal:`scale("${l}", ${on(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Xt($4e(g))}function YEe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return QT({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:TF,endSuffix:DF}:{}})}const D1t=new Set(["aria","width","height"]);function rf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?b6e(e):{};return{...L1t(e.markDef,t),...XEe("fill",n),...XEe("stroke",r),...Ga("opacity",e),...Ga("fillOpacity",e),...Ga("strokeOpacity",e),...Ga("strokeWidth",e),...Ga("strokeDash",e),...x1t(e),...v6e(e),...j7(e,"href"),...v1t(e)}}function XEe(e,t){return t?{[e]:t}:{}}function L1t(e,t){return Bmt.reduce((n,r)=>(!D1t.has(r)&&Vt(e,r)&&t[r]!=="ignore"&&(n[r]=Zo(e[r])),n),{})}function q7(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!yh(o)||!(s=e.getScaleType(o)))return;const a=uF(i.aggregate),l=b7({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(Yvt(l)){const f=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(o=>hF(o,!0)).join(" && ")}}}function KEe(e,t){if(t!==void 0)return{[e]:Zo(t)}}const ZM="voronoi",_6e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(ZM)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Vm(o))return Xt(Gmt(o)),n;const s={name:e.getName(ZM),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...v6e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const c=u.name??"";c===e.component.mark[0].name?a=f:c.includes(ZM)&&(l=!0)}),l||n.splice(a+1,0,s),n}},E6e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!M7(e.bind),parse:(e,t,n)=>R6e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=_6e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const f=fs(`${r}_${l.field}`);n.filter(d=>d.name===f).length||n.unshift({name:f,...s?{init:Hv(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Qt(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+Lp),s=r+iC,a=i.items.map(u=>fs(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},sD="_toggle",A6e={defined:e=>e.type==="point"&&!Hd(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+sD,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Lp,r=t.name+sD;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${yv(e)}}, `)+`${r} ? ${n} : null`}},R1t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Hd(e),parse:(e,t)=>{t.clear&&(t.clear=pn(t.clear)?Pm(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(E6e.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===fs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Lp);r(i,"null"),A6e.defined(t)&&(i=n.findIndex(o=>o.name===t.name+sD),r(i,"false"))}return n}},C6e={defined:e=>{const t=e.resolve==="global"&&e.bind&&M7(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Hf;return t&&!n&&Xt(Xmt),t&&n},parse:(e,t,n)=>{const r=Lr(n);if(r.select=pn(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},R6e(t,r),mn(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=vn(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=GM(t.bind)?t.bind.legend:"click",o=pn(i)?Pm(i,"view"):vn(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=GM(t.bind)&&t.bind.legend,o=s=>a=>{const l=Lr(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${fs(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Lp),s=r+iC,a=i.items.filter(d=>d.hasLegend).map(d=>fs(`${r}_${fs(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const f=n.find(d=>d.name===r+sD),c=GM(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:c}):f.on[0].events=c),n}};function F1t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Ja(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&C6e.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const S6e="_translate_anchor",k6e="_translate_delta",$1t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=xp.defined(t),o=r+S6e,{x:s,y:a}=t.project.hasChannel;let l=Pm(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Vb,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?o8(e,ds):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?o8(e,Ma):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+k6e,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&ZEe(e,t,s,"width",n),a!==void 0&&ZEe(e,t,a,"height",n),n}};function ZEe(e,t,n,r,i){const o=t.name,s=o+S6e,a=o+k6e,l=n.channel,u=xp.defined(t),f=i.find(E=>E.name===n.signals[u?"data":"visual"]),c=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),p=d&&d.get("type"),h=d&&d.get("reverse"),g=u?l===ds?h?"":"-":h?"-":"":"",m=`${s}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${c}`:`span(${m})`}`,v=!u||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",x=u?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${m}, ${y}${x})`;f.on.push({events:{signal:a},update:u?_:`clampRange(${_}, 0, ${c})`})}const T6e="_zoom_anchor",D6e="_zoom_delta",M1t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=xp.defined(t),o=r+D6e,{x:s,y:a}=t.project.hasChannel,l=Qt(e.scaleName(ds)),u=Qt(e.scaleName(Ma));let f=Pm(t.zoom,"scope");return i||(f=f.map(c=>(c.markname=r+Vb,c))),n.push({name:r+T6e,on:[{events:f,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&QEe(e,t,s,"width",n),a!==void 0&&QEe(e,t,a,"height",n),n}};function QEe(e,t,n,r,i){const o=t.name,s=n.channel,a=xp.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),c=f&&f.get("type"),d=a?o8(e,s):l.name,p=o+D6e,h=`${o}${T6e}.${s}`,g=!a||!f?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",m=a?c==="pow"?`, ${f.get("exponent")??1}`:c==="symlog"?`, ${f.get("constant")??1}`:"":"",y=`${g}(${d}, ${h}, ${p}${m})`;l.on.push({events:{signal:p},update:a?y:`clampRange(${y}, 0, ${u})`})}const qv="_store",Lp="_tuple",O1t="_modify",L6e="vlSelectionResolve",RF=[a1t,g1t,i1t,A6e,E6e,xp,C6e,R1t,$1t,M1t,_6e];function I1t(e){let t=e.parent;for(;t&&!uc(t);)t=t.parent;return t}function yv(e,{escape:t}={escape:!0}){let n=t?Qt(e.name):e.name;const r=I1t(e);if(r){const{facet:i}=r;for(const o of zc)i[o]&&(n+=` + '__facet_${o}_' + (facet[${Qt(r.vgField(o))}])`)}return n}function G7(e){return Ja(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function R6e(e,t){(pn(t.select)||!t.select.on)&&delete e.events,(pn(t.select)||!t.select.clear)&&delete e.clear,(pn(t.select)||!t.select.toggle)&&delete e.toggle}function Hd(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const N1t="RawCode",P1t="Literal",B1t="Property",z1t="Identifier",U1t="ArrayExpression",j1t="BinaryExpression",H1t="CallExpression",q1t="ConditionalExpression",G1t="LogicalExpression",W1t="MemberExpression",V1t="ObjectExpression",Y1t="UnaryExpression";function nd(e){this.type=e}nd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=X1t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function X1t(e){switch(e.type){case U1t:return e.elements;case j1t:case G1t:return[e.left,e.right];case H1t:return[e.callee].concat(e.arguments);case q1t:return[e.test,e.consequent,e.alternate];case W1t:return[e.object,e.property];case V1t:return e.properties;case B1t:return[e.key,e.value];case Y1t:return[e.argument];case z1t:case P1t:case N1t:default:return[]}}var xh,Mn,kt,Ll,_o,FF=1,oC=2,Gv=3,Ym=4,$F=5,vy=6,wu=7,sC=8,K1t=9;xh={};xh[FF]="Boolean";xh[oC]="<end>";xh[Gv]="Identifier";xh[Ym]="Keyword";xh[$F]="Null";xh[vy]="Numeric";xh[wu]="Punctuator";xh[sC]="String";xh[K1t]="RegularExpression";var Z1t="ArrayExpression",Q1t="BinaryExpression",J1t="CallExpression",ext="ConditionalExpression",F6e="Identifier",txt="Literal",nxt="LogicalExpression",rxt="MemberExpression",ixt="ObjectExpression",oxt="Property",sxt="UnaryExpression",Ta="Unexpected token %0",axt="Unexpected number",lxt="Unexpected string",uxt="Unexpected identifier",cxt="Unexpected reserved word",fxt="Unexpected end of input",a8="Invalid regular expression",QM="Invalid regular expression: missing /",$6e="Octal literals are not allowed in strict mode.",dxt="Duplicate data property in object literal not allowed in strict mode",Ka="ILLEGAL",DE="Disabled.",hxt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),pxt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function MF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Jh(e){return e>=48&&e<=57}function W7(e){return"0123456789abcdefABCDEF".includes(e)}function F_(e){return"01234567".includes(e)}function gxt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function LE(e){return e===10||e===13||e===8232||e===8233}function aC(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&hxt.test(String.fromCharCode(e))}function aD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&pxt.test(String.fromCharCode(e))}const mxt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function M6e(){for(;kt<Ll;){const e=Mn.charCodeAt(kt);if(gxt(e)||LE(e))++kt;else break}}function l8(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)kt<Ll&&W7(Mn[kt])?(r=Mn[kt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ki({},Ta,Ka);return String.fromCharCode(i)}function vxt(){var e,t,n,r;for(e=Mn[kt],t=0,e==="}"&&Ki({},Ta,Ka);kt<Ll&&(e=Mn[kt++],!!W7(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ki({},Ta,Ka),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function O6e(){var e,t;for(e=Mn.charCodeAt(kt++),t=String.fromCharCode(e),e===92&&(Mn.charCodeAt(kt)!==117&&Ki({},Ta,Ka),++kt,e=l8("u"),(!e||e==="\\"||!aC(e.charCodeAt(0)))&&Ki({},Ta,Ka),t=e);kt<Ll&&(e=Mn.charCodeAt(kt),!!aD(e));)++kt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Mn.charCodeAt(kt)!==117&&Ki({},Ta,Ka),++kt,e=l8("u"),(!e||e==="\\"||!aD(e.charCodeAt(0)))&&Ki({},Ta,Ka),t+=e);return t}function yxt(){var e,t;for(e=kt++;kt<Ll;){if(t=Mn.charCodeAt(kt),t===92)return kt=e,O6e();if(aD(t))++kt;else break}return Mn.slice(e,kt)}function bxt(){var e,t,n;return e=kt,t=Mn.charCodeAt(kt)===92?O6e():yxt(),t.length===1?n=Gv:mxt.hasOwnProperty(t)?n=Ym:t==="null"?n=$F:t==="true"||t==="false"?n=FF:n=Gv,{type:n,value:t,start:e,end:kt}}function JM(){var e=kt,t=Mn.charCodeAt(kt),n,r=Mn[kt],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++kt,{type:wu,value:String.fromCharCode(t),start:e,end:kt};default:if(n=Mn.charCodeAt(kt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return kt+=2,{type:wu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:kt};case 33:case 61:return kt+=2,Mn.charCodeAt(kt)===61&&++kt,{type:wu,value:Mn.slice(e,kt),start:e,end:kt}}}if(s=Mn.substr(kt,4),s===">>>=")return kt+=4,{type:wu,value:s,start:e,end:kt};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return kt+=3,{type:wu,value:o,start:e,end:kt};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return kt+=2,{type:wu,value:i,start:e,end:kt};if(i==="//"&&Ki({},Ta,Ka),"<>=!+-*%&|^/".includes(r))return++kt,{type:wu,value:r,start:e,end:kt};Ki({},Ta,Ka)}function xxt(e){let t="";for(;kt<Ll&&W7(Mn[kt]);)t+=Mn[kt++];return t.length===0&&Ki({},Ta,Ka),aC(Mn.charCodeAt(kt))&&Ki({},Ta,Ka),{type:vy,value:parseInt("0x"+t,16),start:e,end:kt}}function wxt(e){let t="0"+Mn[kt++];for(;kt<Ll&&F_(Mn[kt]);)t+=Mn[kt++];return(aC(Mn.charCodeAt(kt))||Jh(Mn.charCodeAt(kt)))&&Ki({},Ta,Ka),{type:vy,value:parseInt(t,8),octal:!0,start:e,end:kt}}function JEe(){var e,t,n;if(n=Mn[kt],MF(Jh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=kt,e="",n!=="."){if(e=Mn[kt++],n=Mn[kt],e==="0"){if(n==="x"||n==="X")return++kt,xxt(t);if(F_(n))return wxt(t);n&&Jh(n.charCodeAt(0))&&Ki({},Ta,Ka)}for(;Jh(Mn.charCodeAt(kt));)e+=Mn[kt++];n=Mn[kt]}if(n==="."){for(e+=Mn[kt++];Jh(Mn.charCodeAt(kt));)e+=Mn[kt++];n=Mn[kt]}if(n==="e"||n==="E")if(e+=Mn[kt++],n=Mn[kt],(n==="+"||n==="-")&&(e+=Mn[kt++]),Jh(Mn.charCodeAt(kt)))for(;Jh(Mn.charCodeAt(kt));)e+=Mn[kt++];else Ki({},Ta,Ka);return aC(Mn.charCodeAt(kt))&&Ki({},Ta,Ka),{type:vy,value:parseFloat(e),start:t,end:kt}}function _xt(){var e="",t,n,r,i,o=!1;for(t=Mn[kt],MF(t==="'"||t==='"',"String literal must starts with a quote"),n=kt,++kt;kt<Ll;)if(r=Mn[kt++],r===t){t="";break}else if(r==="\\")if(r=Mn[kt++],!r||!LE(r.charCodeAt(0)))switch(r){case"u":case"x":Mn[kt]==="{"?(++kt,e+=vxt()):e+=l8(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:F_(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),kt<Ll&&F_(Mn[kt])&&(o=!0,i=i*8+"01234567".indexOf(Mn[kt++]),"0123".includes(r)&&kt<Ll&&F_(Mn[kt])&&(i=i*8+"01234567".indexOf(Mn[kt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Mn[kt]===`
`&&++kt;else{if(LE(r.charCodeAt(0)))break;e+=r}return t!==""&&Ki({},Ta,Ka),{type:sC,value:e,octal:o,start:n,end:kt}}function Ext(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ki({},a8)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ki({},a8)}try{return new RegExp(e,t)}catch{return null}}function Axt(){var e,t,n,r,i;for(e=Mn[kt],MF(e==="/","Regular expression literal must start with a slash"),t=Mn[kt++],n=!1,r=!1;kt<Ll;)if(e=Mn[kt++],t+=e,e==="\\")e=Mn[kt++],LE(e.charCodeAt(0))&&Ki({},QM),t+=e;else if(LE(e.charCodeAt(0)))Ki({},QM);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ki({},QM),i=t.substr(1,t.length-2),{value:i,literal:t}}function Cxt(){var e,t,n;for(t="",n="";kt<Ll&&(e=Mn[kt],!!aD(e.charCodeAt(0)));)++kt,e==="\\"&&kt<Ll?Ki({},Ta,Ka):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ki({},a8,n),{value:n,literal:t}}function Sxt(){var e,t,n,r;return _o=null,M6e(),e=kt,t=Axt(),n=Cxt(),r=Ext(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:kt}}function kxt(e){return e.type===Gv||e.type===Ym||e.type===FF||e.type===$F}function I6e(){if(M6e(),kt>=Ll)return{type:oC,start:kt,end:kt};const e=Mn.charCodeAt(kt);return aC(e)?bxt():e===40||e===41||e===59?JM():e===39||e===34?_xt():e===46?Jh(Mn.charCodeAt(kt+1))?JEe():JM():Jh(e)?JEe():JM()}function ku(){const e=_o;return kt=e.end,_o=I6e(),kt=e.end,e}function N6e(){const e=kt;_o=I6e(),kt=e}function Txt(e){const t=new nd(Z1t);return t.elements=e,t}function eAe(e,t,n){const r=new nd(e==="||"||e==="&&"?nxt:Q1t);return r.operator=e,r.left=t,r.right=n,r}function Dxt(e,t){const n=new nd(J1t);return n.callee=e,n.arguments=t,n}function Lxt(e,t,n){const r=new nd(ext);return r.test=e,r.consequent=t,r.alternate=n,r}function V7(e){const t=new nd(F6e);return t.name=e,t}function i_(e){const t=new nd(txt);return t.value=e.value,t.raw=Mn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function tAe(e,t,n){const r=new nd(rxt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Rxt(e){const t=new nd(ixt);return t.properties=e,t}function nAe(e,t,n){const r=new nd(oxt);return r.key=t,r.value=n,r.kind=e,r}function Fxt(e,t){const n=new nd(sxt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ki(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(MF(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=kt,n.description=i,n}function OF(e){e.type===oC&&Ki(e,fxt),e.type===vy&&Ki(e,axt),e.type===sC&&Ki(e,lxt),e.type===Gv&&Ki(e,uxt),e.type===Ym&&Ki(e,cxt),Ki(e,Ta,e.value)}function Rl(e){const t=ku();(t.type!==wu||t.value!==e)&&OF(t)}function Qo(e){return _o.type===wu&&_o.value===e}function e5(e){return _o.type===Ym&&_o.value===e}function $xt(){const e=[];for(kt=_o.start,Rl("[");!Qo("]");)Qo(",")?(ku(),e.push(null)):(e.push(Wv()),Qo("]")||Rl(","));return ku(),Txt(e)}function rAe(){kt=_o.start;const e=ku();return e.type===sC||e.type===vy?(e.octal&&Ki(e,$6e),i_(e)):V7(e.value)}function Mxt(){var e,t,n,r;if(kt=_o.start,e=_o,e.type===Gv)return n=rAe(),Rl(":"),r=Wv(),nAe("init",n,r);if(e.type===oC||e.type===wu)OF(e);else return t=rAe(),Rl(":"),r=Wv(),nAe("init",t,r)}function Oxt(){var e=[],t,n,r,i={},o=String;for(kt=_o.start,Rl("{");!Qo("}");)t=Mxt(),t.key.type===F6e?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ki({},dxt):i[r]=!0,e.push(t),Qo("}")||Rl(",");return Rl("}"),Rxt(e)}function Ixt(){Rl("(");const e=Y7();return Rl(")"),e}const Nxt={if:1};function Pxt(){var e,t,n;if(Qo("("))return Ixt();if(Qo("["))return $xt();if(Qo("{"))return Oxt();if(e=_o.type,kt=_o.start,e===Gv||Nxt[_o.value])n=V7(ku().value);else if(e===sC||e===vy)_o.octal&&Ki(_o,$6e),n=i_(ku());else{if(e===Ym)throw new Error(DE);e===FF?(t=ku(),t.value=t.value==="true",n=i_(t)):e===$F?(t=ku(),t.value=null,n=i_(t)):Qo("/")||Qo("/=")?(n=i_(Sxt()),N6e()):OF(ku())}return n}function Bxt(){const e=[];if(Rl("("),!Qo(")"))for(;kt<Ll&&(e.push(Wv()),!Qo(")"));)Rl(",");return Rl(")"),e}function zxt(){kt=_o.start;const e=ku();return kxt(e)||OF(e),V7(e.value)}function Uxt(){return Rl("."),zxt()}function jxt(){Rl("[");const e=Y7();return Rl("]"),e}function Hxt(){var e,t,n;for(e=Pxt();;)if(Qo("."))n=Uxt(),e=tAe(".",e,n);else if(Qo("("))t=Bxt(),e=Dxt(e,t);else if(Qo("["))n=jxt(),e=tAe("[",e,n);else break;return e}function iAe(){const e=Hxt();if(_o.type===wu&&(Qo("++")||Qo("--")))throw new Error(DE);return e}function a3(){var e,t;if(_o.type!==wu&&_o.type!==Ym)t=iAe();else{if(Qo("++")||Qo("--"))throw new Error(DE);if(Qo("+")||Qo("-")||Qo("~")||Qo("!"))e=ku(),t=a3(),t=Fxt(e.value,t);else{if(e5("delete")||e5("void")||e5("typeof"))throw new Error(DE);t=iAe()}}return t}function oAe(e){let t=0;if(e.type!==wu&&e.type!==Ym)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function qxt(){var e,t,n,r,i,o,s,a,l,u;if(e=_o,l=a3(),r=_o,i=oAe(r),i===0)return l;for(r.prec=i,ku(),t=[e,_o],s=a3(),o=[l,r,s];(i=oAe(_o))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=eAe(a,l,s),o.push(n);r=ku(),r.prec=i,o.push(r),t.push(_o),n=a3(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=eAe(o[u-1].value,o[u-2],n),u-=2;return n}function Wv(){var e,t,n;return e=qxt(),Qo("?")&&(ku(),t=Wv(),Rl(":"),n=Wv(),e=Lxt(e,t,n)),e}function Y7(){const e=Wv();if(Qo(","))throw new Error(DE);return e}function Gxt(e){Mn=e,kt=0,Ll=Mn.length,_o=null,N6e();const t=Y7();if(_o.type!==oC)throw new Error("Unexpect token after expression.");return t}function u8(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...u8(e.object)),t.push(...u8(e.property))),t)}function P6e(e){return e.object.type==="MemberExpression"?P6e(e.object):e.object.name==="datum"}function B6e(e){const t=Gxt(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&P6e(r)&&n.add(u8(r).slice(1).join("."))}),n}class Sx extends Eo{clone(){return new Sx(null,this.model,Lr(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=lD(this.model,this.filter,this),this._dependentFields=B6e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Wxt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=fs(o.name),a=o.select,l=pn(a)?a:a.type,u=mn(a)?Lr(a):{type:l},f=r[l];for(const p in f)p==="fields"||p==="encodings"||(p==="mark"&&(u.mark={...f.mark,...u.mark}),(u[p]===void 0||u[p]===!0)&&(u[p]=Lr(f[p]??u[p])));const c=n[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:pn(u.on)?Pm(u.on,"scope"):vn(Lr(u.on))};if(Hd(c)&&(i++,i>1)){delete n[s];continue}const d=Lr(o);for(const p of RF)p.defined(c)&&p.parse&&p.parse(e,c,d)}return i>1&&Xt(t0t),n}function z6e(e,t,n,r="datum"){const i=pn(t)?t:t.param,o=fs(i),s=Qt(o+qv);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,p=a.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Qt(a.resolve)})`,f=`${l}${s}, ${r}${u}`,c=`length(data(${s}))`;return t.empty===!1?`${c} && ${f}`:`!${c} || ${f}`}function U6e(e,t,n){const r=fs(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Xt(n0t(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Xt(r0t(a,i,n,o))):o=a[0].field}return`${s.name}[${Qt(Qc(o))}]`}function Vxt(e,t){for(const[n,r]of Em(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new $u(new Sx(t,e,{param:n}),i,bs.Lookup,e.component.data.outputNodeRefCounts)}}function lD(e,t,n){return L_(t,r=>pn(r)?r:dvt(r)?z6e(e,r,n):G4e(r))}function Yxt(e,t){if(e)return Dt(e)&&!$g(e)?e.map(n=>S7(n,t)).join(", "):e}function t5(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function o_(e,t,n,r={header:!1}){var c,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const p in f){const h=p,g=vyt[h],m=f[h];if(g&&g!==t&&g!=="both")delete f[h];else if(rC(m)){const{condition:y,...v}=m,x=vn(y),_=SEe[h];if(_){const{vgProp:E,part:C}=_,w=[...x.map(T=>{const{test:R,...L}=T;return{test:lD(null,R),...L}}),v];t5(f,C,E,w),delete f[h]}else if(_===null){const E={signal:x.map(C=>{const{test:w,...T}=C;return`${lD(null,w)} ? ${cEe(T)} : `}).join("")+cEe(v)};f[h]=E}}else if(Nn(m)){const y=SEe[h];if(y){const{vgProp:v,part:x}=y;t5(f,x,v,m),delete f[h]}}hi(["labelAlign","labelBaseline"],h)&&f[h]===null&&delete f[h]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:p}=f.encode;f.encode={...p?{grid:p}:{}},Ro(f.encode)&&delete f.encode}return{scale:s,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ps(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let h=a;(d=(c=f.encode)==null?void 0:c.labels)!=null&&d.update&&Nn(f.encode.labels.update.text)&&(h=Iv(a,"datum.label",f.encode.labels.update.text.signal)),t5(f,"labels","text",{signal:h})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const h of _Ie)e.hasAxisPart(h)||delete f.encode[h];Ro(f.encode)&&delete f.encode}const p=Yxt(l,n);return{scale:s,orient:o,grid:!1,...p?{title:p}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Ps(u,0)}}}}function j6e(e){const{axes:t}=e.component,n=[];for(const r of Gp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function Xxt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>o_(i,"grid",t)),...r.map(i=>o_(i,"grid",t)),...n.map(i=>o_(i,"main",t)),...r.map(i=>o_(i,"main",t))].filter(i=>i)}function sAe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Wt(s),...Wt(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${o}" ? ${Df(s[f])} : ${Df(a[f])}`};return u}return t[i]})])}function Kxt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:X4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=Nn(n)?"axisOrient":`axis${WA(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:sAe(a,r,e,n),vgAxisConfig:sAe(l,r,e,n),axisConfigStyle:Zxt([...l,...a],r)}}function Zxt(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=vn(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function c8(e,t,n,r={}){var o;const i=E4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const aAe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Qxt(n,e),gridScale:({model:e,channel:t})=>Jxt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||q6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||H6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??twt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??nwt(t.type,n,Zt(t)&&!!t.timeUnit,Zt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??iwt({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:owt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=G6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return C4e(i?[AEe(i)]:[],Zt(s)?[AEe(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>swt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??awt(n,t)};function Qxt(e,t){return!Ra(e)&&Zt(t)&&!qo(t==null?void 0:t.bin)&&!ja(t==null?void 0:t.bin)}function Jxt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function ewt(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Nn(o)?o:SE(o);{const{configValue:s}=c8("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?SE(s):n===ds&&hi([p7,h7],e.type)&&!(Zt(e)&&e.timeUnit)?270:void 0}}function f8(e){return`(((${e.signal} % 360) + 360) % 360)`}function H6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nn(e)){const i=f8(e),o=Nn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nn(e)){const i=f8(e),o=Nn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function q6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Nn(e)){const s=f8(e),a=Nn(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nn(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function twt(e,t){if(t==="x"&&hi(["quantitative","temporal"],e))return!0}function nwt(e,t,n,r){if(n&&!mn(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function rwt(e){return e==="x"?"bottom":"left"}function iwt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ra(t)&&t!=="log"){if(Zt(e)){if(qo(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&hi(["month","hours","day","quarter"],(i=Da(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function owt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Zt(t)){const{timeUnit:n}=t;if(n){const r=j4e(n);if(r)return{signal:r}}}}function G6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return S4e(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function swt(e,t){const n=e.values;if(Dt(n))return wIe(t,n);if(Nn(n))return n}function awt(e,t){return e==="rect"&&eD(t)?1:0}class U1 extends Eo{clone(){return new U1(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=B6e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(my(r)&&fIe(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,f)=>`${G4e({field:o,timeUnit:s,equal:u})} ? ${f} : `).join("")+a.length;t=new U1(t,{calculate:l,as:j1(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${wi(this.transform)}`}}function j1(e,t,n){return on(e,{prefix:t,suffix:"sort_index",...n})}function IF(e,t){return hi(["top","bottom"],t)?"column":hi(["left","right"],t)||e==="row"?"row":"column"}function H1(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ps((t||{})[e],i[e],n.header[e])}function NF(e,t,n,r){const i={};for(const o of e){const s=H1(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const X7=["row","column"],K7=["header","footer"];function lwt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=NF(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=IF(t,a),u=SE(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...V6e(u,l),...W6e(l,u,o),...Y6e(r,i,t,Byt,zIe)}}}function W6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=q6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function V6e(e,t){const n=H6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function uwt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of K7)if(n[i])for(const o of n[i]){const s=fwt(e,t,i,n,o);s!=null&&r.push(s)}return r}function cwt(e,t){const{sort:n}=e;return bp(n)?{field:on(n,{expr:"datum"}),order:n.order??"ascending"}:Dt(n)?{field:j1(e,t,{expr:"datum"}),order:"ascending"}:{field:on(e,{expr:"datum"}),order:n??"ascending"}}function d8(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=NF(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=_7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=IF(t,a);return{text:{signal:l?Iv(Iv(l,"datum.label",u),"datum.value",on(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...V6e(o,f),...W6e(f,o,s),...Y6e(n,e,t,zyt,UIe)}}function fwt(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:c}=NF(["labelOrient"],s.header,a,t);(t==="row"&&!hi(["top","bottom"],c)||t==="column"&&!hi(["left","right"],c))&&(o=d8(s,t,a))}const l=uc(e)&&!JA(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(o||f){const c=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:cwt(s,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[c]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const dwt={column:{start:0,end:1},row:{start:1,end:0}};function hwt(e,t){return dwt[t][e]}function pwt(e,t){const n={};for(const r of zc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=NF(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=IF(r,s),l=hwt(o,a);l!==void 0&&(n[a]=l)}}return Ro(n)?void 0:n}function Y6e(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=H1(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function Z7(e){return[...BS(e,"width"),...BS(e,"height"),...BS(e,"childWidth"),...BS(e,"childHeight")]}function BS(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Ra(s)&&hy(a)){const l=e.scaleName(n);return uc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[lAe(l,a)]:[lAe(l,a),{name:i,update:X6e(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=J6(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function lAe(e,t){const n=`${e}_step`;return Nn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function X6e(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Ps(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${Df(s)}, ${Df(o)}) * ${e}_step`}function K6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Z6e(e,t){return Wt(e).reduce((n,r)=>({...n,...Cx({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Zo(i.value),invalidValueRef:void 0})}),{})}function Q6e(e,t){if(uc(t))return e==="theta"?"independent":"shared";if(Dx(t))return"shared";if(iU(t))return Bs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Q7(e,t){const n=e.scale[t],r=Bs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Xt(M0t(t)),"independent"):e[r][t]||"shared"}const gwt={...Hyt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},J6e=Wt(gwt);class mwt extends Vp{}const uAe={symbols:vwt,gradient:ywt,labels:bwt,entries:xwt};function vwt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,f=s.filled&&u!=="trail";let c={...jmt({},n,Pvt),...b6e(n,{filled:f})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,p=i.get("symbolFillColor")??l.legend.symbolFillColor,h=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?e8e(a.opacity)??s.opacity:void 0;if(c.fill){if(r==="fill"||f&&r===Pu)delete c.fill;else if(Vt(c.fill,"field"))p?delete c.fill:(c.fill=Zo(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=Zo(g??1));else if(Dt(c.fill)){const m=h8(a.fill??a.color)??s.fill??(f&&s.color);m&&(c.fill=Zo(m))}}if(c.stroke){if(r==="stroke"||!f&&r===Pu)delete c.stroke;else if(Vt(c.stroke,"field")||h)delete c.stroke;else if(Dt(c.stroke)){const m=Ps(h8(a.stroke||a.color),s.stroke,f?s.color:void 0);m&&(c.stroke={value:m})}}if(r!==qp){const m=Zt(t)&&n8e(n,i,t);m?c.opacity=[{test:m,...Zo(g??1)},Zo(l.legend.unselectedOpacity)]:g&&(c.opacity=Zo(g))}return c={...c,...e},Ro(c)?void 0:c}function ywt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?e8e(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Zo(u)),a={...a,...e},Ro(a)?void 0:a}function bwt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=Zt(t)?n8e(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=o;let c;jv(f)?c=Lf({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:s}):u===void 0&&f===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?c=Lf({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&Zt(t)&&t.timeUnit===void 0&&(c=Lf({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...c?{text:c}:{},...e};return Ro(d)?void 0:d}function xwt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function e8e(e){return t8e(e,(t,n)=>Math.max(t,n.value))}function h8(e){return t8e(e,(t,n)=>Ps(t,n.value))}function t8e(e,t){if(oyt(e))return vn(e.condition).reduce(t,e.value);if(Uf(e))return e.value}function n8e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Qt(n.field);return r.map(o=>`(!length(data(${Qt(fs(o)+qv)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const cAe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return lIe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return uIe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??kwt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Twt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??_wt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Wb(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Gb(n)&&Nd(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>wwt(t,e)};function wwt(e,t){const n=e.values;if(Dt(n))return wIe(t,n);if(Nn(n))return n}function _wt(e,t,n,r){if(t!=="shape"){const i=h8(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Ewt(e){const{legend:t}=e;return Ps(t.type,Awt(e))}function Awt({channel:e,timeUnit:t,scaleType:n}){if(Gb(e)){if(hi(["quarter","month","day"],t))return"symbol";if(Nd(n))return"gradient"}return"symbol"}function Cwt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Swt(n,t)}function Swt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function kwt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Nd(i))return n==="horizontal"?r==="top"||r==="bottom"?fAe(t,"width",s,o):s:fAe(t,"height",l,a)}function fAe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Twt(e){if(hi(["quantile","threshold","log","symlog"],e))return"greedy"}function r8e(e){const t=ys(e)?Dwt(e):$wt(e);return e.component.legends=t,t}function Dwt(e){const{encoding:t}=e,n={};for(const r of[Pu,...HIe]){const i=la(t[r]);!i||!e.getScaleComponent(r)||r===Bu&&Zt(i)&&i.type===Ax||(n[r]=Fwt(e,r))}return n}function Lwt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Rwt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Fwt(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new mwt({},Lwt(e,t));F1t(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=la(i[t]),c=Zt(f)?(_=Da(f.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||o.legend.orient||"right",p=Ewt({legend:n,channel:t,timeUnit:c,scaleType:u}),h=Cwt({legend:n,legendType:p,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:s,config:o,scaleType:u,orient:d,legendType:p,direction:h};for(const E of J6e){if(p==="gradient"&&E.startsWith("symbol")||p==="symbol"&&E.startsWith("gradient"))continue;const C=E in cAe?cAe[E](g):n[E];if(C!==void 0){const w=Rwt(C,E,n,e.fieldDef(t));(w||o.legend[E]===void 0)&&a.set(E,C,w)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},x={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:p};for(const E of["labels","legend","title","symbols","gradient","entries"]){const C=Z6e(m[E]??{},e),w=E in uAe?uAe[E](C,x):C;w!==void 0&&!Ro(w)&&(v[E]={...y!=null&&y.length&&Zt(f)?{name:`${fs(f.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:w})}return Ro(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function $wt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){r8e(r);for(const i of Wt(r.component.legends))n.legend[i]=Q7(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=i8e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Wt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function i8e(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of J6e){const f=Sm(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(c,d)=>{switch(u){case"symbolType":return Mwt(c,d);case"title":return k4e(c,d);case"type":return i=!0,Yu("symbol")}return kF(c,d,u,"legend")});e.setWithExplicit(u,f)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&XT(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&XT(e.explicit,["encode","gradient"])),e}function Mwt(e,t){return t.value==="circle"?t:e}function Owt(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function o8e(e){const t=e.component.legends,n={};for(const i of Wt(t)){const o=e.getScaleComponent(i),s=Fo(o.get("domains"));if(n[s])for(const a of n[s])i8e(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Ja(n).flat().map(i=>Iwt(i,e.config)).filter(i=>i!==void 0)}function Iwt(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const f of HIe)o[f]&&delete u[f]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&Nn(o.encode.labels.update.text)&&(u=Iv(r,"datum.label",o.encode.labels.update.text.signal)),Owt(o,"labels","text",{signal:u})}return o}}function Nwt(e){return Dx(e)||iU(e)?Pwt(e):s8e(e)}function Pwt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),s8e(e))}function s8e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Nn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return hi(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Bwt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class a8e extends Vp{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function l8e(e){e.component.projection=ys(e)?zwt(e):Hwt(e)}function zwt(e){if(e.hasProjection){const t=Ha(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Uwt(e):void 0,o=new a8e(e.projectionName(!0),{...Ha(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function Uwt(e){const t=[],{encoding:n}=e;for(const r of[[ed,Jf],[Jc,td]])(la(n[r[0]])||la(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Bu)&&e.typedFieldDef(Bu).type===Ax&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(bs.Main)),t}function jwt(e,t){const n=zz(Bwt,i=>!!(!yn(e.explicit,i)&&!yn(t.explicit,i)||yn(e.explicit,i)&&yn(t.explicit,i)&&rc(e.get(i),t.get(i))));if(rc(e.size,t.size)){if(n)return e;if(rc(e.explicit,{}))return t;if(rc(t.explicit,{}))return e}return null}function Hwt(e){if(e.children.length===0)return;let t;for(const r of e.children)l8e(r);const n=zz(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=jwt(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new a8e(r,t.specifiedProjection,t.size,Lr(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function qwt(e,t,n,r){if(nC(t,n)){const i=ys(e)?e.axis(n)??e.legend(n)??{}:{},o=on(t,{expr:"datum"}),s=on(t,{expr:"datum",binSuffix:"end"});return{formulaAs:on(t,{binSuffix:"range",forAs:!0}),formula:QA(o,s,i.format,i.formatType,r)}}return{}}function u8e(e,t){return`${b4e(e)}_${t}`}function Gwt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function J7(e,t,n){const r=wF(n,void 0)??{},i=u8e(r,t);return e.getName(`${i}_bins`)}function Wwt(e){return"as"in e}function dAe(e,t,n){let r,i;Wwt(e)?r=pn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[on(e,{forAs:!0}),on(e,{binSuffix:"end",forAs:!0})];const o={...wF(t,void 0)},s=u8e(o,e.field),{signal:a,extentSignal:l}=Gwt(n,s);if(cF(o.extent)){const f=o.extent;i=U6e(n,f.param,f),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class qd extends Eo{clone(){return new qd(null,Lr(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(iu(o)&&qo(o.bin)){const{key:a,binComponent:l}=dAe(o,o.bin,n);i[a]={...l,...i[a],...qwt(n,o,s,n.config)}}return i},{});return Ro(r)?null:new qd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=dAe(n,n.bin,r);return new qd(t,{[i]:o})}merge(t,n){for(const r of Wt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Id([...this.bins[r].as,...t.bins[r].as],wi)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ja(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ja(this.bins).map(t=>t.field))}hash(){return`Bin ${wi(this.bins)}`}assemble(){return Ja(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Qc(t.field),as:r,signal:t.signal,...cF(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Qc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:on({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Vwt(e,t,n,r){var o;const i=ys(r)?r.encoding[vh(t)]:void 0;if(iu(n)&&ys(r)&&hIe(n,i,r.markDef,r.config)){e.add(on(n,{})),e.add(on(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=Cm({fieldDef:n,markDef:a,config:l});kE(s)&&u!==.5&&Bs(t)&&(e.add(on(n,{suffix:TF})),e.add(on(n,{suffix:DF}))),n.bin&&nC(n,t)&&e.add(on(n,{binSuffix:"range"}))}else if(c4e(t)){const s=u4e(t);e.add(r.getName(s))}else e.add(on(n));return my(n)&&Cvt((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function Ywt(e,t){for(const n of Wt(t)){const r=t[n];for(const i of Wt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Of extends Eo{clone(){return new Of(null,new Set(this.dimensions),Lr(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([on(s,{forAs:!0})]);else{if(Tp(l)||Wm(l)){const f=Tp(l)?"argmin":"argmax",c=l[f];i[c]??(i[c]={}),i[c][f]=new Set([on({op:f,field:c},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([on(s,{forAs:!0})]);yh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([on({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([on({field:u,aggregate:"max"},{forAs:!0})]))}else Vwt(o,a,s,n)}),o.size+Wt(i).length===0)?null:new Of(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||on(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||on(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+Wt(o).length===0?null:new Of(t,i,o)}merge(t){return t4e(this.dimensions,t.dimensions)?(Ywt(this.measures,t.measures),!0):(K0t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Wt(this.measures)])}producedFields(){const t=new Set;for(const n of Wt(this.measures))for(const r of Wt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${wi({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of Wt(this.measures))for(const s of Wt(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Qc(o));return{type:"aggregate",groupby:[...this.dimensions].map(Qc),ops:t,fields:n,as:r}}}class kx extends Eo{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of zc){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[on(s),...qo(a)?[on(s,{binSuffix:"end"})]:[]],...bp(l)?{sortField:l}:Dt(l)?{sortIndexField:j1(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of zc)this[n]&&(t+=` ${n.charAt(0)}:${wi(this[n])}`);return t}get fields(){var n;const t=[];for(const r of zc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of zc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Gp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Ra(i)&&hy(o)){const s=PF(this.childModel,n),a=rU(s);a?t[n]=a:Xt(e7(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:f=yF,field:c}=l;o.push(c),s.push(f),a.push(on(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of X7){for(const f of K7){const c=(r[u]&&r[u][f])??[];for(const d of c)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const f=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[yp,vp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function hAe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Xwt(e,t){const n=Hz(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=hAe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=hAe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Xt(o0t(t)),null}function Kwt(e){const t={};return o3(e.filter,n=>{if(q4e(n)){let r=null;s7(n)?r=ec(n.equal):l7(n)?r=ec(n.lte):a7(n)?r=ec(n.lt):u7(n)?r=ec(n.gt):c7(n)?r=ec(n.gte):f7(n)?r=n.range[0]:d7(n)&&(r=(n.oneOf??n.in)[0]),r&&(py(r)?t[n.field]="date":eo(r)?t[n.field]="number":pn(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Zwt(e){const t={};function n(r){P1(r)?t[r.field]="date":r.type==="quantitative"&&$mt(r.aggregate)?t[r.field]="number":F1(r.field)>1?r.field in t||(t[r.field]="flatten"):my(r)&&bp(r.sort)&&F1(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ys(e)||uc(e))&&e.forEachFieldDef((r,i)=>{if(iu(r))n(r);else{const o=fy(i),s=e.fieldDef(o);n({...r,type:s.type})}}),ys(e)){const{mark:r,markDef:i,encoding:o}=e;if(Vm(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];Zt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Qwt(e){const t={};if(ys(e)&&e.component.selection)for(const n of Wt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&F1(i.field)>1&&(t[i.field]="flatten")}return t}class El extends Eo{clone(){return new El(null,Lr(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${wi(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!lm(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Wt(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Xt(mEe(a,r[a],l.value)))}for(const a of Wt(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Xt(mEe(a,n[a],l)))}const o=new Vp(n,r);i.copyAll(o);const s={};for(const a of Wt(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return Wt(s).length===0||i.parseNothing?null:new El(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Wt(this._parse)){const r=this._parse[n];F1(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Wt(this._parse))}dependentFields(){return new Set(Wt(this._parse))}assembleTransforms(t=!1){return Wt(this._parse).filter(n=>t?F1(n)>1:!0).map(n=>{const r=Xwt(n,this._parse[n]);return r?{type:"formula",expr:r,as:_x(n)}:null}).filter(n=>n!==null)}}class km extends Eo{clone(){return new km(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Hf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Hf}}}class lC extends Eo{clone(){return new lC(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${wi(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class uC extends Eo{clone(){return new uC(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${wi(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Vv extends Eo{constructor(t){super(null),t??(t={name:"source"});let n;if(lm(t)||(n=t.format?{...Fu(t.format,["parse"])}:{}),TE(t))this._data={values:t.values};else if(B1(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];hi(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else a6e(t)?this._data={values:[{type:"Sphere"}]}:(o6e(t)||lm(t))&&(this._data={});this._generator=lm(t),t.name&&(this._name=t.name),n&&!Ro(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var pAe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Jwt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},s_;function eU(e){return e instanceof Vv||e instanceof lC||e instanceof uC}class tU{constructor(){s_.set(this,void 0),pAe(this,s_,!1,"f")}setModified(){pAe(this,s_,!0,"f")}get modifiedFlag(){return Jwt(this,s_,"f")}}s_=new WeakMap;class yy extends tU{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class nU extends tU{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class e2t extends nU{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Wt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class t2t extends nU{constructor(t){super(),this.requiresSelectionId=t&&G7(t)}run(t){t instanceof km&&(this.requiresSelectionId&&(eU(t.parent)||t.parent instanceof Of||t.parent instanceof El)||(this.setModified(),t.remove()))}}class n2t extends tU{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof jd&&(r=t.producedFields(),Uz(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class r2t extends nU{constructor(){super()}run(t){t instanceof $u&&!t.isRequired()&&(this.setModified(),t.remove())}}class i2t extends yy{run(t){if(!eU(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof El)if(t instanceof El)this.setModified(),t.merge(n);else{if(jz(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class o2t extends yy{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof El);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of Wt(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!Ro(i)){this.setModified();const s=new El(t,i);for(const a of n){if(a instanceof El)for(const l of Wt(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof El&&Wt(a.parse).length===0&&a.remove()}}}}}class s2t extends yy{run(t){t instanceof $u||t.numChildren()>0||t instanceof kx||t instanceof Vv||(this.setModified(),t.remove())}}class a2t extends yy{run(t){const n=t.children.filter(i=>i instanceof jd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class l2t extends yy{run(t){const n=t.children.filter(i=>i instanceof Of),r={};for(const i of n){const o=wi(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of Wt(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class u2t extends yy{constructor(t){super(),this.model=t}run(t){const n=!(eU(t)||t instanceof Sx||t instanceof El||t instanceof km),r=[],i=[];for(const o of t.children)o instanceof qd&&(n&&!jz(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof qd?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class c2t extends yy{run(t){const n=[...t.children];if(!R1(n,s=>s instanceof $u)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof $u){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof $u)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class by extends Eo{clone(){return new by(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Id(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??on(t)}hash(){return`JoinAggregateTransform ${wi(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class q1 extends Eo{clone(){return new q1(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,f,c)=>{const d=yh(c)&&n.getScaleComponent(c);if(d){const p=d.get("type"),{aggregate:h}=f,g=b7({scaleChannel:c,markDef:o,config:i,scaleType:p,isCountAggregate:uF(h)});g!=="show"&&g!=="always-valid"&&(u[f.field]=f)}return u},{});return Wt(l).length?new q1(t,l):null}dependentFields(){return new Set(Wt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${wi(this.filter)}`}assemble(){const t=Wt(this.filter).reduce((n,r)=>{const i=this.filter[r],o=on(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${p8(o)}))`):i.type==="quantitative"&&n.push(p8(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function p8(e){return`isValid(${e}) && isFinite(+${e})`}function f2t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=on(r);return i&&t.push(i),t},[])}function d2t(e){return Dt(e)&&e.every(t=>pn(t))&&e.length>1}class wp extends Eo{clone(){return new wp(null,Lr(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const c of n.sort)a.push(c.field),l.push(Ps(c.order,"ascending"));const u={field:a,order:l};let f;return d2t(o)?f=o:pn(o)?f=[o,`${o}_end`]:f=[`${n.stack}_start`,`${n.stack}_end`],new wp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:f})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(p=>{const h=i[p];return jf(h)}).filter(p=>!!p),f=f2t(n),c=n.encoding.order;let d;if(Dt(c)||Zt(c))d=A4e(c);else{const p=pIe(c)?c.sort:s==="y"?"descending":"ascending";d=f.reduce((h,g)=>(h.field.includes(g)||(h.field.push(g),h.order.push(p)),h),{field:[],order:[]})}return new wp(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:f,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${wi(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[on(i,{binSuffix:"mid"})]:[on(i,{}),on(i,{binSuffix:"end"})]:[on(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const f of r){const{bandPosition:c=.5,bin:d}=f;if(d){const p=on(f,{expr:"datum"}),h=on(f,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${p8(p)} ? ${c}*${p}+${1-c}*${h} : ${p}`,as:on(f,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:on(f,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class Tx extends Eo{clone(){return new Tx(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Id(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??on(t)}hash(){return`WindowTransform ${wi(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(c.param===void 0?null:c.param),t.push(c.field===void 0?null:c.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(c=>Qz(c)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)a.push(c.field),l.push(c.order??"ascending");const u={field:a,order:l},f=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...f!==void 0?{ignorePeers:f}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function h2t(e){function t(n){if(!(n instanceof kx)){const r=n.clone();if(r instanceof $u){const i=m8+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Of||r instanceof wp||r instanceof Tx||r instanceof by)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function g8(e){if(e instanceof kx)if(e.numChildren()===1&&!(e.children[0]instanceof $u)){const t=e.children[0];(t instanceof Of||t instanceof wp||t instanceof Tx||t instanceof by)&&t.addDimensions(e.fields),t.swapWithParent(),g8(e)}else{const t=e.model.component.data.main;c8e(t);const n=h2t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(g8)}function c8e(e){if(e instanceof $u&&e.type===bs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof kx||(t.swapWithParent(),c8e(e))}}const m8="scale_",zS=5;function v8(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!v8(t.children))return!1}return!0}function hf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function gAe(e,t,n){let r=e.sources,i=!1;return i=hf(new r2t,r)||i,i=hf(new t2t(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=hf(new s2t,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=hf(new i2t,r)||i,i=hf(new u2t(t),r)||i,i=hf(new n2t,r)||i,i=hf(new o2t,r)||i,i=hf(new l2t,r)||i,i=hf(new a2t,r)||i,i=hf(new e2t,r)||i,i=hf(new c2t,r)||i),e.sources=r,i}function p2t(e,t){v8(e.sources);let n=0,r=0;for(let i=0;i<zS&&gAe(e,t,!0);i++)n++;e.sources.map(g8);for(let i=0;i<zS&&gAe(e,t,!1);i++)r++;v8(e.sources),Math.max(n,r)===zS&&Xt(`Maximum optimization runs(${zS}) reached.`)}class _a{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new _a(()=>t(n))}}function f8e(e){ys(e)?g2t(e):m2t(e)}function g2t(e){const t=e.component.scales;for(const n of Wt(t)){const r=y2t(e,n);if(t[n].setWithExplicit("domains",r),x2t(e,n),e.component.data.isFaceted){let o=e;for(;!uc(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)cp(a)&&(a.data=m8+a.data.replace(m8,""))}}}function m2t(e){for(const n of e.children)f8e(n);const t=e.component.scales;for(const n of Wt(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Sm(r,s.getWithExplicit("domains"),"domains","scale",y8);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Xt(Qmt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function v2t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=mAe(t,n);if(!i){Xt(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=mAe(t,n);if(i)return"unaggregated"}return e}function y2t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=v2t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&la(r.x2)?la(r.x)?Sm(Sg(n,i,e,"x"),Sg(n,i,e,"x2"),"domain","scale",y8):Sg(n,i,e,"x2"):t==="y"&&la(r.y2)?la(r.y)?Sm(Sg(n,i,e,"y"),Sg(n,i,e,"y2"),"domain","scale",y8):Sg(n,i,e,"y2"):Sg(n,i,e,t)}function b2t(e,t,n){return e.map(r=>({signal:`{data: ${_F(r,{timeUnit:n,type:t})}}`}))}function n5(e,t,n){var i;const r=(i=Da(n))==null?void 0:i.unit;return t==="temporal"||r?b2t(e,t,r):[e]}function Sg(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=la(i[r]),{type:f}=u,c=u.timeUnit,d=n1t({invalid:th("invalid",o,a),isPath:Vm(s)});if(Avt(t)){const g=Sg(e,void 0,n,r),m=n5(t.unionWith,f,c);return Sd([...m,...g.value])}else{if(Nn(t))return Sd([t]);if(t&&t!=="unaggregated"&&!Z4e(t))return Sd(n5(t,f,c))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Yu([[0,1]]);const g=n.requestDataName(d);return Yu([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const p=yh(r)&&Zt(u)?w2t(n,r,e):void 0;if(bh(u)){const g=n5([u.datum],f,c);return Yu(g)}const h=u;if(t==="unaggregated"){const{field:g}=u;return Yu([{data:n.requestDataName(d),field:on({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:on({field:g,aggregate:"max"})}])}else if(qo(h.bin)){if(Ra(e))return Yu(e==="bin-ordinal"?[]:[{data:CE(p)?n.requestDataName(d):n.requestDataName(bs.Raw),field:n.vgField(r,nC(h,r)?{binSuffix:"range"}:{}),sort:p===!0||!mn(p)?{field:n.vgField(r,{}),op:"min"}:p}]);{const{bin:g}=h;if(qo(g)){const m=J7(n,h.field,g);return Yu([new _a(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Yu([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(h.timeUnit&&hi(["time","utc"],e)){const g=i[vh(r)];if(hIe(h,g,o,a)){const m=n.requestDataName(d),y=Cm({fieldDef:h,fieldDef2:g,markDef:o,config:a}),v=kE(s)&&y!==.5&&Bs(r);return Yu([{data:m,field:n.vgField(r,v?{suffix:TF}:{})},{data:m,field:n.vgField(r,{suffix:v?DF:"end"})}])}}return Yu(p?[{data:CE(p)?n.requestDataName(d):n.requestDataName(bs.Raw),field:n.vgField(r),sort:p}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function r5(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":yF),...r?{field:Qc(r)}:{},...i?{order:i}:{}}}function x2t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=Z4e(r)?r:void 0,s=dy(i)&&cF(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function w2t(e,t,n){if(!Ra(n))return;const r=e.fieldDef(t),i=r.sort;if(fIe(i))return{op:"min",field:j1(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(bp(i)){const a=o&&!s.has(i.field);return r5(i,a)}else if(nyt(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:c}=u,d=o&&!s.has(c);if(Tp(f)||Wm(f))return r5({field:on(u),order:l},d);if(Qz(f)||!f)return r5({op:f,field:c,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(hi(["ascending",void 0],i))return!0}}function mAe(e,t){const{aggregate:n,type:r}=e;return n?pn(n)&&!Omt.has(n)?{valid:!1,reason:k0t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:T0t(e)}:{valid:!0}:{valid:!1,reason:S0t(e)}}function y8(e,t,n,r){return e.explicit&&t.explicit&&Xt($0t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function _2t(e){const t=Id(e.map(s=>{if(cp(s)){const{sort:a,...l}=s;return l}return s}),wi),n=Id(e.map(s=>{if(cp(s)){const a=s.sort;return a!==void 0&&!CE(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),wi);if(t.length===0)return;if(t.length===1){const s=e[0];if(cp(s)&&n.length>0){let a=n[0];if(n.length>1){Xt(yEe);const l=n.filter(u=>mn(u)&&"op"in u&&u.op!=="min");n.every(u=>mn(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(mn(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Id(n.map(s=>CE(s)||!("op"in s)||pn(s.op)&&yn(Rmt,s.op)?s:(Xt(O0t(s)),!0)),wi);let i;r.length===1?i=r[0]:r.length>1&&(Xt(yEe),i=!0);const o=Id(e.map(s=>cp(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function rU(e){if(cp(e)&&pn(e.field))return e.field;if(Imt(e)){let t;for(const n of e.fields)if(cp(n)&&pn(n.field)){if(!t)t=n.field;else if(t!==n.field)return Xt(I0t),t}return Xt(N0t),t}else if(Nmt(e)){Xt(P0t);const t=e.fields[0];return pn(t)?t:void 0}}function PF(e,t){const r=e.component.scales[t].get("domains").map(i=>(cp(i)&&(i.data=e.lookupDataSource(i.data)),i));return _2t(r)}function d8e(e){return Dx(e)||iU(e)?e.children.reduce((t,n)=>t.concat(d8e(n)),vAe(e)):vAe(e)}function vAe(e){return Wt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:f,...c}=i,d=E2t(i.range,o,n,e),p=PF(e,n),h=a?h1t(e,a,r,p):null;return t.push({name:o,type:s,...p?{domain:p}:{},...h?{domainRaw:h}:{},range:d,...f!==void 0?{reverse:f}:{},...c}),t},[])}function E2t(e,t,n,r){if(Bs(n)){if(hy(e))return{step:{signal:`${t}_step`}}}else if(mn(e)&&cp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class h8e extends Vp{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(hi([qa.LOG,qa.TIME,qa.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&hi([qa.LINEAR,qa.SQRT,qa.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(Dt(a)){const l=a[0],u=a[a.length-1];if(eo(l)&&eo(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const A2t=["range","scheme"];function C2t(e){const t=e.component.scales;for(const n of Zz){const r=t[n];if(!r)continue;const i=S2t(n,e);r.setWithExplicit("range",i)}}function yAe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=zu(t),s=e.getName(o);if(mn(r)&&r.binned&&r.step!==void 0)return new _a(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(qo(r)){const a=J7(e,i,r);return new _a(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function S2t(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const c of A2t)if(n[c]!==void 0){const d=K6(o,c),p=Q4e(e,c);if(!d)Xt(R4e(o,c,e));else if(p)Xt(p);else switch(c){case"range":{const h=n.range;if(Dt(h)){if(Bs(e))return Sd(h.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return _a.fromName(y,m)}return g}))}else if(mn(h))return Sd({data:t.requestDataName(bs.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return Sd(h)}case"scheme":return Sd(k2t(n[c]))}}const s=e===ds||e==="xOffset"?"width":"height",a=r[s];if(rh(a)){if(Bs(e))if(Ra(o)){const c=g8e(a,t,e);if(c)return Sd({step:c})}else Xt(F4e(s));else if(XA(e)){const c=e===zm?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const h=m8e(a,o);if(h)return Sd(h)}}}const{rangeMin:l,rangeMax:u}=n,f=T2t(e,t);return(l!==void 0||u!==void 0)&&K6(o,"rangeMin")&&Dt(f)&&f.length===2?Sd([l??f[0],u??f[1]]):Yu(f)}function k2t(e){return Evt(e)?{scheme:e.name,...Fu(e,["name"])}:{scheme:e}}function p8e(e,t,n,{center:r}={}){const i=zu(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===Ma&&zf(n)?r?[_a.fromName(a=>`${s(a)}/2`,o),_a.fromName(a=>`-${s(a)}/2`,o)]:[_a.fromName(s,o),0]:r?[_a.fromName(a=>`-${s(a)}/2`,o),_a.fromName(a=>`${s(a)}/2`,o)]:[0,_a.fromName(s,o)]}function T2t(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=la(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case ds:case Ma:{if(hi(["point","band"],l)){const c=v8e(e,n,r.view);if(rh(c))return{step:g8e(c,t,e)}}return p8e(e,t,l)}case zm:case Ex:return D2t(e,t,l);case Hp:{const c=F2t(i,r),d=$2t(i,n,t,r);return O1(l)?R2t(c,d,L2t(l,r,u,e)):[c,d]}case nf:return[0,Math.PI*2];case cy:return[0,360];case Qf:return[0,new _a(()=>{const c=t.getSignalName(uc(t.parent)?"child_width":"width"),d=t.getSignalName(uc(t.parent)?"child_height":"height");return`min(${c},${d})/2`})];case Um:return{step:1e3/r.scale.framesPerSecond};case qm:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gm:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Bu:return"symbol";case Pu:case gh:case mh:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case qp:case jm:case Hm:return[r.scale.minOpacity,r.scale.maxOpacity]}}function g8e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=Vz(n),s=r[o];if(GIe({step:e,offsetIsDiscrete:Mr(s)&&W4e(s.type)})==="offset"&&CIe(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,p=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${d}, ${p})`}const c=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Umt(c)})`}}else return e.step}function m8e(e,t){if(GIe({step:e,offsetIsDiscrete:Ra(t)})==="offset")return{step:e.step}}function D2t(e,t,n){const r=e===zm?"x":"y",i=t.getScaleComponent(r);if(!i)return p8e(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=v8e(r,t.size,t.config.view);if(rh(u)){const f=m8e(u,n);if(f)return f}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(Zt(u)&&u.timeUnit){const f=j4e(u.timeUnit,h=>`scale('${s}', ${h})`),c=t.config.scale.bandWithNestedOffsetPaddingInner,d=Cm({fieldDef:u,markDef:a,config:l})-.5,p=d!==0?` + ${d}`:"";if(c){const h=Nn(c)?`${c.signal}/2`+p:`${c/2+d}`,g=Nn(c)?`(1 - ${c.signal}/2)`+p:`${1-c/2+d}`;return[{signal:`${h} * (${f})`},{signal:`${g} * (${f})`}]}return[0,{signal:f}]}return JOe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function v8e(e,t,n){const r=e===ds?"width":"height",i=t[r];return i||iD(n,r)}function L2t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Dt(n)?n.length+1:(Xt(V0t(r)),3)}}function R2t(e,t,n){const r=()=>{const i=Df(t),o=Df(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return Nn(t)?new _a(r):{signal:r()}}function F2t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(fF("size",e))}const bAe=.95;function $2t(e,t,n,r){const i={x:yAe(n,"x"),y:yAe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=xAe(t,i,r.view);return eo(o)?o-1:new _a(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=xAe(t,i,r.view);return eo(o)?Math.pow(bAe*o,2):new _a(()=>`pow(${bAe} * ${o.signal}, 2)`)}}throw new Error(fF("size",e))}function xAe(e,t,n){const r=rh(e.width)?e.width.step:e8(n,"width"),i=rh(e.height)?e.height.step:e8(n,"height");return t.x||t.y?new _a(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function y8e(e,t){ys(e)?M2t(e,t):x8e(e,t)}function M2t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of Wt(n)){const l=s[a],u=n[a],f=e.getScaleComponent(a),c=la(i[a]),d=l[t],p=f.get("type"),h=f.get("padding"),g=f.get("paddingInner"),m=K6(p,t),y=Q4e(a,t);if(d!==void 0&&(m?y&&Xt(y):Xt(R4e(p,t,a))),m&&y===void 0)if(d!==void 0){const v=c.timeUnit,x=c.type;switch(t){case"domainMax":case"domainMin":py(l[t])||x==="temporal"||v?u.set(t,{signal:_F(l[t],{type:x,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=Vt(wAe,t)?wAe[t]({model:e,channel:a,fieldOrDatumDef:c,scaleType:p,scalePadding:h,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:SIe(i,a),hasSecondaryRangeChannel:!!i[vh(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const wAe={bins:({model:e,fieldOrDatumDef:t})=>Zt(t)?O2t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>I2t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>N2t(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>P2t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>B2t(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>z2t(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Zt(e)?e.sort:void 0;return U2t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>j2t(e,t,n,r,i,o.scale,s)};function b8e(e){ys(e)?C2t(e):x8e(e,"range")}function x8e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?b8e(r):y8e(r,t);for(const r of Wt(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Sm(i,a,t,"scale",i6e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function O2t(e,t){const n=t.bin;if(qo(n)){const r=J7(e,t.field,n);return new _a(()=>e.getSignalName(r))}else if(ja(n)&&dy(n)&&n.step!==void 0)return{step:n.step}}function I2t(e,t){if(hi([Pu,gh,mh],e)&&t!=="nominal")return"hcl"}function N2t(e,t,n,r,i,o){var s;if(!((s=jf(o))!=null&&s.bin||Dt(n)||i!=null||r!=null||hi([qa.TIME,qa.UTC],e)))return Bs(t)?!0:void 0}function P2t(e,t,n,r,i,o){if(Bs(e)){if(Nd(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(Zt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===qa.POINT)return n.pointPadding}}function B2t(e,t,n,r,i,o=!1){if(e===void 0){if(Bs(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return o?f:Ps(s,n==="bar"?a:n==="tick"?u:l)}else if(XA(t)&&r===qa.BAND)return i.offsetBandPaddingInner}}function z2t(e,t,n,r,i,o=!1){if(e===void 0){if(Bs(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===qa.BAND)return Ps(s,Nn(r)?{signal:`${r.signal}/2`}:r/2)}else if(XA(t)){if(n===qa.POINT)return .5;if(n===qa.BAND)return i.offsetBandPaddingOuter}}}function U2t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return zf(e)&&t==="descending"?Nn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(zf(e)&&t==="descending")return!0}function j2t(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&zf(i)){if(Dt(n)){const l=n[0],u=n[n.length-1];if(eo(l)&&l<=0&&eo(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!O1(i))return!0;if(!(Zt(t)&&t.bin)&&hi([...Gp,..._mt],e)){const{orient:l,type:u}=r;return hi(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:hi(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function H2t(e,t,n,r,i=!1){const o=q2t(t,n,r,i),{type:s}=e;return yh(t)?s!==void 0?Lvt(t,s)?Zt(n)&&!Dvt(s,n.type)?(Xt(R0t(s,o)),o):s:(Xt(L0t(t,s,o)),o):o:null}function q2t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Gb(e)||jM(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Xt(HM(e,"ordinal")),"ordinal";if(UM(e))return"band";if(Bs(e)||XA(e)){if(hi(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Kz)return"band";const o=n[zu(e)];return Uv(o)||N1(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Gb(e)?"time":jM(e)==="discrete"?(Xt(HM(e,"temporal")),"ordinal"):Zt(t)&&t.timeUnit&&Da(t.timeUnit).utc?"utc":UM(e)?"band":"time";case"quantitative":return Gb(e)?Zt(t)&&qo(t.bin)?"bin-ordinal":"linear":jM(e)==="discrete"?(Xt(HM(e,"quantitative")),"ordinal"):UM(e)?"band":"linear";case"geojson":return}throw new Error(D4e(t.type))}function G2t(e,{ignoreRange:t}={}){w8e(e),f8e(e);for(const n of Tvt)y8e(e,n);t||b8e(e)}function w8e(e){ys(e)?e.component.scales=W2t(e):e.component.scales=Y2t(e)}function W2t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of Zz){const s=la(t[o]);if(s&&n===tIe&&o===Bu&&s.type===Ax)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=SIe(t,o),u=H2t(a,o,s,r,l);i[o]=new h8e(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const V2t=i6e((e,t)=>xEe(e)-xEe(t));function Y2t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){w8e(o);for(const s of Wt(o.component.scales))if((t=i.scale)[s]??(t[s]=Q6e(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?yvt(a.value,l.value)?r[s]=Sm(a,l,"type","scale",V2t):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of Wt(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new h8e(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class i5{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ys(e){return(e==null?void 0:e.type)==="unit"}function uc(e){return(e==null?void 0:e.type)==="facet"}function iU(e){return(e==null?void 0:e.type)==="concat"}function Dx(e){return(e==null?void 0:e.type)==="layer"}class oU{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=Ha(a),this.name=t.name??i,this.title=$g(t.title)?{text:t.title}:t.title?Ha(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new i5,this.projectionNameMap=r?r.projectionNameMap:new i5,this.signalNameMap=r?r.signalNameMap:new i5,this.data=t.data,this.description=t.description,this.transforms=qbt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Yyt(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:bF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Vp,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Lr(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){G2t(this)}parseProjection(){l8e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){r8e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of Wt(r)){const s=r[o];s!==void 0&&(i[o]=Zo(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Zo(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ro(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=pwt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of zc)t[r].title&&n.push(lwt(this,r));for(const r of X7)n=n.concat(uwt(this,r));return n}assembleAxes(){return Xxt(this.component.axes,this.config)}assembleLegends(){return o8e(this)}assembleProjections(){return Nwt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...x4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return hi(["unit","layer"],this.type)?hi(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ro(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||uc(this.parent)?d8e(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return fs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(bs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(uc(this.parent)){const n=K6e(t),r=lF(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Ra(o)&&hy(s)){const a=i.get("name"),l=PF(this,r),u=rU(l);if(u){const f=on({aggregate:"distinct",field:u},{expr:"datum"});return{signal:X6e(a,i,f)}}else return Xt(e7(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(d4e(t)&&yh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Wmt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class _8e extends oU{vgField(t,n={}){const r=this.fieldDef(t);if(r)return on(r,n)}reduceFieldDef(t,n){return Eyt(this.getMapping(),(r,i,o)=>{const s=jf(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){T7(this.getMapping(),(r,i)=>{const o=jf(r);o&&t(o,i)},n)}}class BF extends Eo{clone(){return new BF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${wi(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class zF extends Eo{clone(){return new zF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${wi(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class UF extends Eo{clone(){return new UF(this.parent,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${wi(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class jF extends Eo{clone(){return new jF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${wi(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Yb extends Eo{clone(){return new Yb(null,Lr(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ed,Jf],[Jc,td]]){const o=i.map(s=>{const a=la(n.encoding[s]);return Zt(a)?a.field:bh(a)?{expr:`${a.datum}`}:Uf(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new Yb(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Bu)){const i=n.typedFieldDef(Bu);i.type===Ax&&(t=new Yb(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pn);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${wi(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class RE extends Eo{clone(){return new RE(null,this.projection,Lr(this.fields),Lr(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ed,Jf],[Jc,td]]){const i=r.map(s=>{const a=la(n.encoding[s]);return Zt(a)?a.field:bh(a)?{expr:`${a.datum}`}:Uf(a)?{expr:`${a.value}`}:void 0}),o=r[0]===Jc?"2":"";(i[0]||i[1])&&(t=new RE(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${wi(this.fields)} ${wi(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class bv extends Eo{clone(){return new bv(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new bv(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(Zt(i)&&Zt(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:f,keyvals:c}=s.impute,d=DIe(n.mark,r);return new bv(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...f?{frame:f}:{},...c!==void 0?{keyvals:c}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${wi(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:Cbt(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},f={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,f]}else return[l]}}class HF extends Eo{clone(){return new HF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${wi(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class FE extends Eo{clone(){return new FE(null,Lr(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(Sbt(s)){let l=C8e(s.data,o);l||(l=new Vv(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new $u(l,u,bs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(kbt(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(fs(l),l)}catch{throw new Error(Kmt(l))}if(a=u.materialized,!a)throw new Error(Zmt(l))}return new FE(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?vn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${wi({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:vn(this.transform.as)}:{}};else{let n=this.transform.as;pn(n)||(Xt(l0t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class qF extends Eo{clone(){return new qF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${wi(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class GF extends Eo{clone(){return new GF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Lr(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${wi(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class WF extends Eo{clone(){return new WF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Id((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${wi(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class VF extends Eo{clone(){return new VF(null,Lr(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${wi(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function E8e(e){let t=0;function n(r,i){if(r instanceof Vv&&!r.isGenerator&&!B1(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof El&&(r.parent instanceof Vv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof kx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof lC||r instanceof uC||r instanceof q1||r instanceof Sx||r instanceof U1||r instanceof RE||r instanceof Of||r instanceof FE||r instanceof Tx||r instanceof by||r instanceof jF||r instanceof UF||r instanceof BF||r instanceof HF||r instanceof qF||r instanceof GF||r instanceof km||r instanceof VF||r instanceof WF||r instanceof zF)&&i.transform.push(r.assemble()),(r instanceof qd||r instanceof jd||r instanceof bv||r instanceof wp||r instanceof Yb)&&i.transform.push(...r.assemble()),r instanceof $u&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof $u?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof $u&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function X2t(e){const t=[],n=E8e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function K2t(e,t){const n=[],r=E8e(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function Z2t(e){return e==="top"||e==="left"||Nn(e)?"header":"footer"}function Q2t(e){for(const t of zc)J2t(e,t);_Ae(e,"x"),_Ae(e,"y")}function J2t(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=H1("title",null,r,t);let u=Wb(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Dt(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=H1("labelOrient",a.header,r,t),c=a.header!==null?Ps((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=hi(["bottom","right"],f)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[A8e(e,t,c)]}}}function A8e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function _Ae(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Q7(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=Z2t(a.get("orient"));s[l]??(s[l]=[A8e(e,o,!1)]);const u=o_(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function e_t(e){sU(e),uD(e,"width"),uD(e,"height")}function t_t(e){sU(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";uD(e,t),uD(e,n)}function sU(e){for(const t of e.children)t.parseLayoutSize()}function uD(e,t){const n=K6e(t),r=lF(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??Q6e(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=Sm(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function n_t(e){const{size:t,component:n}=e;for(const r of Gp){const i=zu(r);if(t[i]){const o=t[i];n.layoutSize.set(i,rh(o)?"step":o,!0)}else{const o=r_t(e,i);n.layoutSize.set(i,o,!1)}}}function r_t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Ra(o)){const a=iD(r.view,t);return hy(s)||rh(a)?"step":a}else return J6(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return J6(r.view,t);{const o=iD(r.view,t);return rh(o)?o.step:o}}}function b8(e,t,n){return on(t,{suffix:`by_${on(e)}`,...n})}class $_ extends _8e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=fU(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!JA(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Wt(t),r={};for(const i of n){if(![vp,yp].includes(i)){Xt(fF(i,"facet"));break}const o=t[i];if(o.field===void 0){Xt(Y6(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=k7(t,n);return r.header?r.header=Ha(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Vt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=YF(this),this.child.parseData()}parseLayoutSize(){sU(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Hd(t))&&n7(t7)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Q2t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of zc)for(const r of K7){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=H1("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=IF(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof $_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof $_?{...this.channelHasField("column")?{encode:{update:{columns:{field:on(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof $_){if(this.child.channelHasField("column")){const i=on(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Gp){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ra(s)&&hy(a)){const l=PF(this.child,i),u=rU(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Xt(e7(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const f of zc){const c=this.facet[f];if(c){l.push(on(c));const{bin:d,sort:p}=c;if(qo(d)&&l.push(on(c,{binSuffix:"end"})),bp(p)){const{field:h,op:g=yF}=p,m=b8(c,p);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(h),s.push(g),a.push(m))}else if(Dt(p)){const h=j1(c,f);o.push(h),s.push("max"),a.push(h)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?bp(r.sort)?[b8(r,r.sort,{expr:"datum"})]:Dt(r.sort)?[j1(r,t,{expr:"datum"})]:[on(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(bp(i)?i.order:!Dt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return d8(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of X7)if(t[o]){const s=H1("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return d8(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=X2t(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:zc.map(l=>this.facetSortFields(l)).flat(),order:zc.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(u1t(this,[]))}]}getMapping(){return this.facet}}function i_t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(bp(o.sort)){const{field:s,op:a=yF}=o.sort;e=i=new by(e,{joinaggregate:[{op:a,field:s,as:b8(o,o.sort,{forAs:!0})}],groupby:[on(o)]})}return i}return null}function C8e(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const c=(o=a.format)==null?void 0:o.mesh;if(!((l||c)&&l!==c)){if(TE(e)&&TE(a)){if(rc(e.values,a.values))return s}else if(B1(e)&&B1(a)){if(e.url===a.url)return s}else if(o6e(e)&&e.name===s.dataName)return s}}return null}function o_t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Vv({values:[]});return t.push(r),r}const n=C8e(e.data,t);if(n)return lm(e.data)||(n.data.format=e4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Vv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function s_t(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(Nbt(i))s=e=new U1(e,i),o="derived";else if(B7(i)){const a=Kwt(i);s=e=El.makeWithAncestors(e,{},a,n)??e,e=new Sx(e,t,i.filter)}else if(e6e(i))s=e=qd.makeFromTransform(e,i,t),o="number";else if(Bbt(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new El(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=jd.makeFromTransform(e,i);else if(zbt(i))s=e=Of.makeFromTransform(e,i),o="number",G7(t)&&(e=new km(e));else if(JIe(i))s=e=FE.make(e,t,i,r++),o="derived";else if(Mbt(i))s=e=new Tx(e,i),o="number";else if(Obt(i))s=e=new by(e,i),o="number";else if(Ubt(i))s=e=wp.makeFromTransform(e,i),o="derived";else if(jbt(i))s=e=new jF(e,i),o="derived";else if(Hbt(i))s=e=new zF(e,i),o="derived";else if(Ibt(i))s=e=new UF(e,i),o="derived";else if(Tbt(i))s=e=new WF(e,i),o="derived";else if($bt(i))e=new VF(e,i);else if(Pbt(i))s=e=bv.makeFromTransform(e,i),o="derived";else if(Dbt(i))s=e=new BF(e,i),o="derived";else if(Lbt(i))s=e=new qF(e,i),o="derived";else if(Rbt(i))s=e=new GF(e,i),o="derived";else if(Fbt(i))s=e=new HF(e,i),o="derived";else{Xt(a0t(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function YF(e){var m;let t=o_t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(lm(i)||B1(i)||TE(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new t1t;lm(i)?(s6e(i)?t=new uC(t,i.sequence):z7(i)&&(t=new lC(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=El.makeExplicit(t,e,s)??t,t=new km(t);const a=e.parent&&Dx(e.parent);(ys(e)||uc(e))&&a&&(t=qd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=s_t(t,e,s));const l=Qwt(e),u=Zwt(e);t=El.makeWithAncestors(t,{},{...l,...u},s)??t,ys(e)&&(t=Yb.parseAll(t,e),t=RE.parseAll(t,e)),(ys(e)||uc(e))&&(a||(t=qd.makeFromEncoding(t,e)??t),t=jd.makeFromEncoding(t,e)??t,t=U1.parseAllForSortIndex(t,e));const f=t=US(bs.Raw,e,t);if(ys(e)){const y=Of.makeFromEncoding(t,e);y&&(t=y,G7(e)&&(t=new km(t))),t=bv.makeFromEncoding(t,e)??t,t=wp.makeFromEncoding(t,e)??t}let c,d;if(ys(e)){const{markDef:y,mark:v,config:x}=e,_=Lo("invalid",y,x),{marks:E,scales:C}=d=l6e({invalid:_,isPath:Vm(v)});E!==C&&C==="include-invalid-values"&&(c=t=US(bs.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=q1.make(t,e,d)??t)}const p=t=US(bs.Main,e,t);let h;if(ys(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=q1.make(t,e,d)??t,h=t=US(bs.PostFilterInvalid,e,t))}ys(e)&&Vxt(e,p);let g=null;if(uc(e)){const y=e.getName("facet");t=i_t(t,e.facet)??t,g=new kx(t,e,y,p.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:p,facetRoot:g,ancestorParse:s,preFilterInvalid:c,postFilterInvalid:h}}function US(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new $u(n,o,e,i);return r[o]=s,s}class a_t extends oU{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Xt(i0t),this.children=this.getChildren(t).map((u,f)=>fU(u,this,this.getName(`concat_${f}`),void 0,i))}parseData(){this.component.data=YF(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Hd(t))&&n7(t7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return CF(t)?t.vconcat:N7(t)?t.hconcat:t.concat}parseLayoutSize(){t_t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Z7(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function l_t(e){return e===!1||e===null}const u_t={disable:1,gridScale:1,scale:1,...EIe,labelExpr:1,encode:1},S8e=Wt(u_t);class aU extends Vp{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new aU(Lr(this.explicit),Lr(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!l_t(this.get(t))}hasOrientSignalRef(){return Nn(this.explicit.orient)}}function c_t(e,t,n){const{encoding:r,config:i}=e,o=la(r[t])??la(r[vh(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(jv(l))return{text:Lf({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(I1(o)==="quantitative"){if(N1(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Lf({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Lf({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(I1(o)==="temporal"&&i.timeFormatType&&Zt(o)&&!o.timeUnit)return{text:Lf({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function f_t(e){return Gp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[y_t(n,e)]),t),{})}const d_t={bottom:"top",top:"bottom",left:"right",right:"left"};function h_t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of Wt(i.component.axes))n.axis[o]=Q7(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=p_t(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Gp){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Nn(a)){if(r[a]>0&&!l){const u=d_t[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function p_t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=g_t(i,o)}}}else return t.map(n=>n.clone());return e}function g_t(e,t){for(const n of S8e){const r=Sm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return k4e(i,o);case"gridScale":return{explicit:i.explicit,value:Ps(i.value,o.value)}}return kF(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function m_t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nn(n.labelAngle)?n.labelAngle:SE(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===G6e(r,i))return!0}return e===n[t]}const v_t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function y_t(e,t){var y,v;let n=t.axis(e);const r=new aU,i=la(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||rwt(e),l=t.getScaleComponent(e).get("type"),u=Kxt(e,l,a,t.config),f=n!==void 0?!n:c8("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const c=ewt(i,n,e,s.style,u),d=uIe(n.formatType,i,l),p=lIe(i,i.type,n.format,n.formatType,s,!0),h={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:c,format:p,formatType:d,mark:o,config:s};for(const x of S8e){const _=x in aAe?aAe[x](h):kEe(x)?n[x]:void 0,E=_!==void 0,C=m_t(_,x,n,t,e);if(E&&C)r.set(x,_,C);else{const{configValue:w=void 0,configFrom:T=void 0}=kEe(x)&&x!=="values"?c8(x,s.style,n.style,u):{},R=w!==void 0;E&&!R?r.set(x,_,C):(T!=="vgAxisConfig"||v_t.has(x)&&R||rC(w)||Nn(w))&&r.set(x,w,!1)}}const g=n.encoding??{},m=_Ie.reduce((x,_)=>{if(!r.hasAxisPart(_))return x;const E=Z6e(g[_]??{},t),C=_==="labels"?c_t(t,e,E):E;return C!==void 0&&!Ro(C)&&(x[_]={update:C}),x},{});return Ro(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function b_t({encoding:e,size:t}){for(const n of Gp){const r=zu(n);rh(t[r])&&Qg(e[n])&&(delete t[r],Xt(F4e(r)))}return t}const x_t={vgMark:"arc",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Jl("x",e,{defaultPos:"mid"}),...Jl("y",e,{defaultPos:"mid"}),...Dp(e,"radius"),...Dp(e,"theta")})},w_t={vgMark:"area",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...oD("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...oD("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...q7(e)})},__t={vgMark:"rect",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dp(e,"x"),...Dp(e,"y")})},E_t={vgMark:"shape",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Zt(n)&&n.type===Ax?{field:on(n,{expr:"datum"})}:{}}]}},A_t={vgMark:"image",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Dp(e,"x"),...Dp(e,"y"),...j7(e,"url")})},C_t={vgMark:"line",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Jl("x",e,{defaultPos:"mid"}),...Jl("y",e,{defaultPos:"mid"}),...Ga("size",e,{vgChannel:"strokeWidth"}),...q7(e)})},S_t={vgMark:"trail",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Jl("x",e,{defaultPos:"mid"}),...Jl("y",e,{defaultPos:"mid"}),...Ga("size",e),...q7(e)})};function lU(e,t){const{config:n}=e;return{...rf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Jl("x",e,{defaultPos:"mid"}),...Jl("y",e,{defaultPos:"mid"}),...Ga("size",e),...Ga("angle",e),...k_t(e,n,t)}}function k_t(e,t,n){return n?{shape:{value:n}}:Ga("shape",e)}const T_t={vgMark:"symbol",encodeEntry:e=>lU(e)},D_t={vgMark:"symbol",encodeEntry:e=>lU(e,"circle")},L_t={vgMark:"symbol",encodeEntry:e=>lU(e,"square")},R_t={vgMark:"rect",encodeEntry:e=>({...rf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dp(e,"x"),...Dp(e,"y")})},F_t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...rf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...oD("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...oD("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ga("size",e,{vgChannel:"strokeWidth"})}}},$_t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...rf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Jl("x",e,{defaultPos:"mid"}),...Jl("y",e,{defaultPos:"mid"}),...j7(e),...Ga("size",e,{vgChannel:"fontSize"}),...Ga("angle",e),...KEe("align",M_t(e.markDef,n,t)),...KEe("baseline",O_t(e.markDef,n,t)),...Jl("radius",e,{defaultPos:null}),...Jl("theta",e,{defaultPos:null})}}};function M_t(e,t,n){if(Lo("align",e,n)===void 0)return"center"}function O_t(e,t,n){if(Lo("baseline",e,n)===void 0)return"middle"}const I_t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...rf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dp(e,i),...Jl(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Zo(Lo("thickness",n,t))}}},jS={arc:x_t,area:w_t,bar:__t,circle:D_t,geoshape:E_t,image:A_t,line:C_t,point:T_t,rect:R_t,rule:F_t,square:L_t,text:$_t,tick:I_t,trail:S_t};function N_t(e){if(hi([mF,pF,Mvt],e.mark)){const t=DIe(e.mark,e.encoding);if(t.length>0)return P_t(e,t)}else if(e.mark===gF){const t=W6.some(n=>Lo(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return B_t(e)}return uU(e)}const EAe="faceted_path_";function P_t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:EAe+e.requestDataName(bs.Main),data:e.requestDataName(bs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:uU(e,{fromPrefix:EAe})}]}const AAe="stack_group_";function B_t(e){var u;const[t]=uU(e,{fromPrefix:AAe}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,c)=>{const d=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${f}(${d.map(p=>`scale('${n}',${p})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...L1(t.encode.update,["y","yc","y2","height",...W6]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Fu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...L1(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Fu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of W6){const c=th(f,e.markDef,e.config);t.encode.update[f]?(o[f]=t.encode.update[f],delete t.encode.update[f]):c&&(o[f]=Zo(c)),c&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const c=e.fieldDef(f),d=on(c);d&&a.push(d),(c!=null&&c.bin||c!=null&&c.timeUnit)&&a.push(on(c,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,c)=>{if(t.encode.update[c])return{...f,[c]:t.encode.update[c]};{const d=th(c,e.markDef,e.config);return d!==void 0?{...f,[c]:Zo(d)}:f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(bs.Main),name:AAe+e.requestDataName(bs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function z_t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!Dt(s)&&Uf(s)&&q6(s.value)||!s&&q6(Lo("order",i,o)))){if((Dt(s)||Zt(s))&&!n)return A4e(s,{expr:"datum"});if(Vm(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(Zt(l))return{field:a}}}}function uU(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Ps(r.clip,U_t(e),j_t(e)),a=_4e(r),l=i.key,u=z_t(e),f=H_t(e),c=Lo("aria",r,o),d=jS[n].postEncodingTransform?jS[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:jS[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...c===!1?{aria:c}:{},from:{data:t.fromPrefix+e.requestDataName(bs.Main)},encode:{update:jS[n].encodeEntry(e)},...d?{transform:d}:{}}]}function U_t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function j_t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function H_t(e){if(!e.component.selection)return null;const t=Wt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Wt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class k8e extends _8e{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,DEe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var f,c,d;return(f=u.from)!=null&&f.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+c6e)),(d=(c=u.from)==null?void 0:c.facet)!=null&&d.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const s=nh(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=vbt(s,o,{graticule:t.data&&z7(t.data)}));const l=this.encoding=wyt(t.encoding||{},a,s.filled,o);this.markDef=KIe(s,l,o),this.size=b_t({encoding:l,size:DEe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=XIe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>O7(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===tIe,r=t&&hmt.some(i=>Mr(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Zz.reduce((r,i)=>{const o=la(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ha(t);return Dt(n)&&(i.domain=n.map(ec)),Dt(r)&&(i.range=r.map(ec)),i}initAxes(t){return Gp.reduce((n,r)=>{const i=t[r];if(Mr(i)||r===ds&&Mr(t.x2)||r===Ma&&Mr(t.y2)){const o=Mr(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=Wt(t),r={};for(const i of n){const o=t[i];r[i]=rC(o)?w4e(o):ec(o)}return r}initLegends(t){return Amt.reduce((n,r)=>{const i=la(t[r]);if(i&&Smt(r)){const o=i.legend;n[r]=o&&Ha(o)}return n},{})}parseData(){this.component.data=YF(this)}parseLayoutSize(){n_t(this)}parseSelections(){this.component.selection=Wxt(this,this.selection)}parseMarkGroup(){this.component.mark=N_t(this)}parseAxesAndHeaders(){this.component.axes=f_t(this)}assembleSelectionTopLevelSignals(t){return c1t(this,t)}assembleSignals(){return[...j6e(this),...l1t(this,[])]}assembleSelectionData(t){return f1t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Z7(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Dx(this.parent))&&(t=p6e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return vv(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return jf(n)}typedFieldDef(t){const n=this.fieldDef(t);return iu(n)?n:null}}class cU extends oU{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(SF(a))return new cU(a,this,this.getName(`layer_${l}`),s,o);if(Wp(a))return new k8e(a,this,this.getName(`layer_${l}`),s,o);throw new Error(Jz(a))})}parseData(){this.component.data=YF(this);for(const t of this.children)t.parseData()}parseLayoutSize(){e_t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Hd(t))&&n7(t7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){h_t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),j6e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Z7(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of vn(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return d1t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),o8e(this))}}function fU(e,t,n,r,i){if(bF(e))return new $_(e,t,n,i);if(SF(e))return new cU(e,t,n,r,i);if(Wp(e))return new k8e(e,t,n,r,i);if(Gyt(e))return new a_t(e,t,n,i);throw new Error(Jz(e))}function q_t(e,t={}){t.logger&&Y0t(t.logger),t.fieldTitle&&bIe(t.fieldTitle);try{const n=YIe(cx(t.config,e.config)),r=r6e(e,n),i=fU(r,null,"",void 0,n);return i.parse(),p2t(i.component.data,i),{spec:W_t(i,G_t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&X0t(),t.fieldTitle&&dyt()}}function G_t(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pn(t)&&(t={type:t}),i&&o&&Qbt(t.type)){if(i==="step"&&o==="step")Xt(hEe()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Xt(hEe(lF(s)));const a=s==="width"?"height":"width";t.type=Jbt(a)}}return{...Wt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...UEe(n,!1),...UEe(e,!0)}}function W_t(e,t,n={},r){const i=e.config?obt(e.config):void 0,o=K2t(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d,...p}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...p,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...qIe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const V_t=amt.version,Y_t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:F1,accessPathWithDatum:Hz,accessWithDatumToUnescapedPath:bo,compile:q_t,contains:hi,deepEqual:rc,deleteNestedProperty:XT,duplicate:Lr,entries:Em,every:zz,fieldIntersection:jz,flatAccessWithDatum:n4e,getFirstDefined:Ps,hasIntersection:Uz,hasProperty:Vt,hash:wi,internalField:o4e,isBoolean:CE,isEmpty:Ro,isEqual:umt,isInternalField:s4e,isNullOrFalse:q6,isNumeric:nF,keys:Wt,logicalExpr:L_,mergeDeep:e4e,never:JOe,normalize:r6e,normalizeAngle:SE,omit:Fu,pick:L1,prefixGenerator:G6,removePathFromField:_x,replaceAll:Iv,replacePathInField:Qc,resetIdCounter:fmt,setEqual:t4e,some:R1,stringify:Fo,titleCase:WA,unique:Id,uniqueId:i4e,vals:Ja,varName:fs,version:V_t},Symbol.toStringTag,{value:"Module"}));function T8e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var X_t="2.15.0",K_t={version:X_t};const ob="#fff",CAe="#888",Z_t={background:"#333",view:{stroke:CAe},title:{color:ob,subtitleColor:ob},style:{"guide-label":{fill:ob},"guide-title":{fill:ob}},axis:{domainColor:ob,gridColor:CAe,tickColor:ob}},O0="#4572a7",Q_t={background:"#fff",arc:{fill:O0},area:{fill:O0},line:{stroke:O0,strokeWidth:2},path:{stroke:O0},rect:{fill:O0},shape:{stroke:O0},symbol:{fill:O0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},I0="#30a2da",o5="#cbcbcb",J_t="#999",eEt="#333",SAe="#f0f0f0",kAe="#333",tEt={arc:{fill:I0},area:{fill:I0},axis:{domainColor:o5,grid:!0,gridColor:o5,gridWidth:1,labelColor:J_t,labelFontSize:10,titleColor:eEt,tickColor:o5,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:SAe,group:{fill:SAe},legend:{labelColor:kAe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:kAe,titleFontSize:14,titlePadding:10},line:{stroke:I0,strokeWidth:2},path:{stroke:I0,strokeWidth:.5},rect:{fill:I0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:I0},bar:{binSpacing:2,fill:I0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},N0="#000",nEt={group:{fill:"#e5e5e5"},arc:{fill:N0},area:{fill:N0},line:{stroke:N0},path:{stroke:N0},rect:{fill:N0},shape:{stroke:N0},symbol:{fill:N0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},rEt=22,iEt="normal",TAe="Benton Gothic, sans-serif",DAe=11.5,oEt="normal",P0="#82c6df",s5="Benton Gothic Bold, sans-serif",LAe="normal",RAe=13,S2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},sEt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:s5,fontSize:rEt,fontWeight:iEt},arc:{fill:P0},area:{fill:P0},line:{stroke:P0,strokeWidth:2},path:{stroke:P0},rect:{fill:P0},shape:{stroke:P0},symbol:{fill:P0,size:30},axis:{labelFont:TAe,labelFontSize:DAe,labelFontWeight:oEt,titleFont:s5,titleFontSize:RAe,titleFontWeight:LAe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:TAe,labelFontSize:DAe,symbolType:"square",titleFont:s5,titleFontSize:RAe,titleFontWeight:LAe},range:{category:S2["category-6"],diverging:S2["fireandice-6"],heatmap:S2["fire-7"],ordinal:S2["fire-7"],ramp:S2["fire-7"]}},B0="#ab5787",HS="#979797",aEt={background:"#f9f9f9",arc:{fill:B0},area:{fill:B0},line:{stroke:B0},path:{stroke:B0},rect:{fill:B0},shape:{stroke:B0},symbol:{fill:B0,size:30},axis:{domainColor:HS,domainWidth:.5,gridWidth:.2,labelColor:HS,tickColor:HS,tickWidth:.2,titleColor:HS},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},z0="#3e5c69",lEt={background:"#fff",arc:{fill:z0},area:{fill:z0},line:{stroke:z0},path:{stroke:z0},rect:{fill:z0},shape:{stroke:z0},symbol:{fill:z0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Cc="#1696d2",FAe="#000000",uEt="#FFFFFF",qS="Lato",a5="Lato",cEt="Lato",fEt="#DEDDDD",dEt=18,k2={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},hEt={background:uEt,title:{anchor:"start",fontSize:dEt,font:qS},axisX:{domain:!0,domainColor:FAe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:a5,labelAngle:0,tickColor:FAe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:fEt,gridWidth:1,labelFontSize:12,labelFont:a5,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:a5,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:k2["six-groups-cat-1"],diverging:k2["diverging-colors"],heatmap:k2["diverging-colors"],ordinal:k2["six-groups-seq"],ramp:k2["shades-blue"]},area:{fill:Cc},rect:{fill:Cc},line:{color:Cc,stroke:Cc,strokeWidth:5},trail:{color:Cc,stroke:Cc,strokeWidth:0,size:1},path:{stroke:Cc,strokeWidth:.5},point:{filled:!0},text:{font:cEt,color:Cc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Cc,stroke:null}},arc:{fill:Cc},shape:{stroke:Cc},symbol:{fill:Cc,size:30}},U0="#3366CC",$Ae="#ccc",GS="Arial, sans-serif",pEt={arc:{fill:U0},area:{fill:U0},path:{stroke:U0},rect:{fill:U0},shape:{stroke:U0},symbol:{stroke:U0},circle:{fill:U0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:GS,fontSize:12},"guide-title":{font:GS,fontSize:12},"group-title":{font:GS,fontSize:12}},title:{font:GS,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:$Ae,tickColor:$Ae,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},dU=e=>e*(1/3+1),MAe=dU(9),OAe=dU(10),IAe=dU(12),T2="Segoe UI",NAe="wf_standard-font, helvetica, arial, sans-serif",PAe="#252423",D2="#605E5C",BAe="transparent",gEt="#C8C6C4",yf="#118DFF",mEt="#12239E",vEt="#E66C37",yEt="#6B007B",bEt="#E044A7",xEt="#744EC2",wEt="#D9B300",_Et="#D64550",D8e=yf,L8e="#DEEFFF",zAe=[L8e,D8e],EEt=[L8e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",D8e],AEt={view:{stroke:BAe},background:BAe,font:T2,header:{titleFont:NAe,titleFontSize:IAe,titleColor:PAe,labelFont:T2,labelFontSize:OAe,labelColor:D2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:D2,labelFontSize:MAe,titleFont:NAe,titleColor:PAe,titleFontSize:IAe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:gEt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:yf},line:{stroke:yf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:T2,fontSize:MAe,fill:D2},arc:{fill:yf},area:{fill:yf,line:!0,opacity:.6},path:{stroke:yf},rect:{fill:yf},point:{fill:yf,filled:!0,size:75},shape:{stroke:yf},symbol:{fill:yf,strokeWidth:1.5,size:50},legend:{titleFont:T2,titleFontWeight:"bold",titleColor:D2,labelFont:T2,labelFontSize:OAe,labelColor:D2,symbolType:"circle",symbolSize:75},range:{category:[yf,mEt,vEt,yEt,bEt,xEt,wEt,_Et],diverging:zAe,heatmap:zAe,ordinal:EEt}},l5='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',CEt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',u5=400,WS={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},SEt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],kEt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function XF({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=WS.gridBg[e],i=WS.textPrimary[e],o=WS.textSecondary[e],s=n==="dark"?SEt:kEt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:l5,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:CEt,labelFontWeight:u5,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:WS.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:l5,fill:o,fontWeight:u5},"guide-title":{font:l5,fill:o,fontWeight:u5}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const TEt=XF({theme:"white",background:"#ffffff"}),DEt=XF({theme:"g10",background:"#f4f4f4"}),LEt=XF({theme:"g90",background:"#262626"}),REt=XF({theme:"g100",background:"#161616"}),FEt=K_t.version,$Et=Object.freeze(Object.defineProperty({__proto__:null,carbong10:DEt,carbong100:REt,carbong90:LEt,carbonwhite:TEt,dark:Z_t,excel:Q_t,fivethirtyeight:tEt,ggplot2:nEt,googlecharts:pEt,latimes:sEt,powerbi:AEt,quartz:aEt,urbaninstitute:hEt,version:FEt,vox:lEt},Symbol.toStringTag,{value:"Module"}));function MEt(e,t,n,r){if(Dt(e))return`[${e.map(i=>t(pn(i)?i:UAe(i,n))).join(", ")}]`;if(mn(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&(mn(f)&&(f=UAe(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function OEt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function UAe(e,t){return JSON.stringify(e,OEt(t))}var IEt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const R8e="vg-tooltip-element",NEt={offsetX:10,offsetY:10,id:R8e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:PEt,maxDepth:2,formatTooltip:MEt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function PEt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function BEt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return IEt.toString().replace(R8e,e)}function F8e(e,t,{offsetX:n,offsetY:r}){const i=$8e({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(M8e(i[s],t))return i[s];return i["top-left"]}function zEt(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=UEt(l,u,n),c=$8e(f,r,s,a),d=Array.isArray(o)?o:[o];for(const p of d)if(M8e(c[p],r)&&!jEt(t,c[p],r))return c[p];return F8e(t,r,i)}function UEt(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function $8e(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=o-t.height/2,c=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:c},left:{x:s,y:f},right:{x:l,y:f},"top-left":{x:s,y:u},"top-right":{x:l,y:u},"bottom-left":{x:s,y:c},"bottom-right":{x:l,y:c}}}function M8e(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function jEt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class HEt{constructor(t){this.options={...NEt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=BEt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?zEt(t,n,r,this.el.getBoundingClientRect(),this.options):F8e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var c5={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var qEt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GEt=Object.prototype.hasOwnProperty;function x8(e,t){return GEt.call(e,t)}function w8(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)x8(e,i)&&r.push(i);return r}function ic(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function _8(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function J0(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function O8e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function E8(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(E8(e[t]))return!0}else if(typeof e=="object"){for(var r=w8(e),i=r.length,o=0;o<i;o++)if(E8(e[r[o]]))return!0}}return!1}function jAe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var I8e=function(e){qEt(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,jAe(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=jAe(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Ds=I8e,WEt=ic,Mb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=cD(n,this.path);r&&(r=ic(r));var i=xv(n,{op:"remove",path:this.from}).removed;return xv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=cD(n,this.from);return xv(n,{op:"add",path:this.path,value:ic(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$E(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},VEt={add:function(e,t,n){return _8(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Mb.move,copy:Mb.copy,test:Mb.test,_get:Mb._get};function cD(e,t){if(t=="")return e;var n={op:"_get",path:t};return xv(e,n),n.value}function xv(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):fD(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=cD(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=$E(e,t.value),s.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Ds("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=ic(e));var a=t.path||"",l=a.split("/"),u=e,f=1,c=l.length,d=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=fD;;){if(p=l[f],p&&p.indexOf("~")!=-1&&(p=O8e(p)),i&&(p=="__proto__"||p=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[p]===void 0?d=l.slice(0,f).join("/"):f==c-1&&(d=t.path),d!==void 0&&h(t,0,e,d)),f++,Array.isArray(u)){if(p==="-")p=u.length;else{if(n&&!_8(p))throw new Ds("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);_8(p)&&(p=~~p)}if(f>=c){if(n&&t.op==="add"&&p>u.length)throw new Ds("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=VEt[t.op].call(t,u,p,e);if(s.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(f>=c){var s=Mb[t.op].call(t,u,p,e);if(s.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[p],n&&f<c&&(!u||typeof u!="object"))throw new Ds("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function KF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ds("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ic(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=xv(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function YEt(e,t,n){var r=xv(e,t);if(r.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function fD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ds("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Mb[e.op]){if(typeof e.path!="string")throw new Ds("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ds('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ds("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ds("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&E8(e.value))throw new Ds("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Ds("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ds("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=N8e([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ds("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ds("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function N8e(e,t,n){try{if(!Array.isArray(e))throw new Ds("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)KF(ic(t),ic(e),n||!0);else{n=n||fD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ds)return i;throw i}}function $E(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!$E(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!$E(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var XEt=Object.freeze({__proto__:null,JsonPatchError:Ds,_areEquals:$E,applyOperation:xv,applyPatch:KF,applyReducer:YEt,deepClone:WEt,getValueByPointer:cD,validate:N8e,validator:fD});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var hU=new WeakMap,KEt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ZEt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function QEt(e){return hU.get(e)}function JEt(e,t){return e.observers.get(t)}function eAt(e,t){e.observers.delete(t.callback)}function tAt(e,t){t.unobserve()}function nAt(e,t){var n=[],r,i=QEt(e);if(!i)i=new KEt(e),hU.set(e,i);else{var o=JEt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=ic(e),t){r.callback=t,r.next=null;var s=function(){A8(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){A8(r),clearTimeout(r.next),eAt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ZEt(t,r)),r}function A8(e,t){t===void 0&&(t=!1);var n=hU.get(e.object);pU(n.value,e.object,e.patches,"",t),e.patches.length&&KF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function pU(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=w8(t),s=w8(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],f=e[u];if(x8(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var c=t[u];typeof f=="object"&&f!=null&&typeof c=="object"&&c!=null&&Array.isArray(f)===Array.isArray(c)?pU(f,c,n,r+"/"+J0(u),i):f!==c&&(i&&n.push({op:"test",path:r+"/"+J0(u),value:ic(f)}),n.push({op:"replace",path:r+"/"+J0(u),value:ic(c)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+J0(u),value:ic(f)}),n.push({op:"remove",path:r+"/"+J0(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!x8(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+J0(u),value:ic(t[u])})}}}function rAt(e,t,n){n===void 0&&(n=!1);var r=[];return pU(e,t,r,"",n),r}var iAt=Object.freeze({__proto__:null,compare:rAt,generate:A8,observe:nAt,unobserve:tAt});Object.assign({},XEt,iAt,{JsonPatchError:I8e,deepClone:ic,escapePathComponent:J0,unescapePathComponent:O8e});function oAt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var f5,HAe;function sAt(){if(HAe)return f5;HAe=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return f5=e,f5}var d5,qAe;function gU(){if(qAe)return d5;qAe=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return d5=r=>r?typeof r!="object"?e:r:t,d5}var VS={exports:{}},h5,GAe;function mU(){if(GAe)return h5;GAe=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return h5={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},h5}var p5,WAe;function ZF(){return WAe||(WAe=1,p5=typeof process=="object"&&c5&&c5.NODE_DEBUG&&/\bsemver\b/i.test(c5.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),p5}var VAe;function vU(){return VAe||(VAe=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=mU(),o=ZF();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const c="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[c,r]],p=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},h=(g,m,y)=>{const v=p(m),x=f++;o(g,x,m),u[g]=x,l[x]=m,s[x]=new RegExp(m,y?"g":void 0),a[x]=new RegExp(v,y?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),h("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${c}+`),h("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),h("FULL",`^${l[u.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),h("LOOSE",`^${l[u.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),h("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",l[u.COERCE],!0),h("COERCERTLFULL",l[u.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(VS,VS.exports)),VS.exports}var g5,YAe;function aAt(){if(YAe)return g5;YAe=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return g5={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},g5}var m5,XAe;function yU(){if(XAe)return m5;XAe=1;const e=ZF(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=mU(),{safeRe:r,t:i}=vU(),o=gU(),{compareIdentifiers:s}=aAt();class a{constructor(u,f){if(f=o(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const c=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const p=+d;if(p>=0&&p<n)return p}return d}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const c=this.prerelease[f],d=u.prerelease[f];if(e("prerelease compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return s(c,d)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const c=this.build[f],d=u.build[f];if(e("build compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return s(c,d)}while(++f)}inc(u,f,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,c),this.inc("pre",f,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,c),this.inc("pre",f,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(c)?1:0;if(!f&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(f===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(f){let p=[f,d];c===!1&&(p=[f]),s(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return m5=a,m5}var v5,KAe;function Lx(){if(KAe)return v5;KAe=1;const e=yU();return v5=(n,r,i)=>new e(n,i).compare(new e(r,i)),v5}var y5,ZAe;function lAt(){if(ZAe)return y5;ZAe=1;const e=Lx();return y5=(n,r,i)=>e(n,r,i)===0,y5}var b5,QAe;function uAt(){if(QAe)return b5;QAe=1;const e=Lx();return b5=(n,r,i)=>e(n,r,i)!==0,b5}var x5,JAe;function cAt(){if(JAe)return x5;JAe=1;const e=Lx();return x5=(n,r,i)=>e(n,r,i)>0,x5}var w5,eCe;function fAt(){if(eCe)return w5;eCe=1;const e=Lx();return w5=(n,r,i)=>e(n,r,i)>=0,w5}var _5,tCe;function dAt(){if(tCe)return _5;tCe=1;const e=Lx();return _5=(n,r,i)=>e(n,r,i)<0,_5}var E5,nCe;function hAt(){if(nCe)return E5;nCe=1;const e=Lx();return E5=(n,r,i)=>e(n,r,i)<=0,E5}var A5,rCe;function pAt(){if(rCe)return A5;rCe=1;const e=lAt(),t=uAt(),n=cAt(),r=fAt(),i=dAt(),o=hAt();return A5=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return o(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},A5}var C5,iCe;function gAt(){if(iCe)return C5;iCe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,c){if(c=n(c),f instanceof t){if(f.loose===!!c.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,c),this.options=c,this.loose=!!c.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const c=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=f.match(c);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,c){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,c).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,c).test(f.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,c)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,c)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}C5=t;const n=gU(),{safeRe:r,t:i}=vU(),o=pAt(),s=ZF(),a=yU(),l=P8e();return C5}var S5,oCe;function P8e(){if(oCe)return S5;oCe=1;const e=/\s+/g;class t{constructor(D,O){if(O=i(O),D instanceof t)return D.loose===!!O.loose&&D.includePrerelease===!!O.includePrerelease?D:new t(D.raw,O);if(D instanceof o)return this.raw=D.value,this.set=[[D]],this.formatted=void 0,this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=D.trim().replace(e," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(j=>!g(j[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&m(j[0])){this.set=[j];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let D=0;D<this.set.length;D++){D>0&&(this.formatted+="||");const O=this.set[D];for(let N=0;N<O.length;N++)N>0&&(this.formatted+=" "),this.formatted+=O[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(D){const N=((this.options.includePrerelease&&p)|(this.options.loose&&h))+":"+D,j=r.get(N);if(j)return j;const q=this.options.loose,W=q?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];D=D.replace(W,P(this.options.includePrerelease)),s("hyphen replace",D),D=D.replace(l[u.COMPARATORTRIM],f),s("comparator trim",D),D=D.replace(l[u.TILDETRIM],c),s("tilde trim",D),D=D.replace(l[u.CARETTRIM],d),s("caret trim",D);let Q=D.split(" ").map(ne=>v(ne,this.options)).join(" ").split(/\s+/).map(ne=>B(ne,this.options));q&&(Q=Q.filter(ne=>(s("loose invalid filter",ne,this.options),!!ne.match(l[u.COMPARATORLOOSE])))),s("range list",Q);const ee=new Map,H=Q.map(ne=>new o(ne,this.options));for(const ne of H){if(g(ne))return[ne];ee.set(ne.value,ne)}ee.size>1&&ee.has("")&&ee.delete("");const se=[...ee.values()];return r.set(N,se),se}intersects(D,O){if(!(D instanceof t))throw new TypeError("a Range is required");return this.set.some(N=>y(N,O)&&D.set.some(j=>y(j,O)&&N.every(q=>j.every(W=>q.intersects(W,O)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new a(D,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(S(this.set[O],D,this.options))return!0;return!1}}S5=t;const n=sAt(),r=new n,i=gU(),o=gAt(),s=ZF(),a=yU(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:c,caretTrimReplace:d}=vU(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:h}=mU(),g=k=>k.value==="<0.0.0-0",m=k=>k.value==="",y=(k,D)=>{let O=!0;const N=k.slice();let j=N.pop();for(;O&&N.length;)O=N.every(q=>j.intersects(q,D)),j=N.pop();return O},v=(k,D)=>(s("comp",k,D),k=C(k,D),s("caret",k),k=_(k,D),s("tildes",k),k=T(k,D),s("xrange",k),k=L(k,D),s("stars",k),k),x=k=>!k||k.toLowerCase()==="x"||k==="*",_=(k,D)=>k.trim().split(/\s+/).map(O=>E(O,D)).join(" "),E=(k,D)=>{const O=D.loose?l[u.TILDELOOSE]:l[u.TILDE];return k.replace(O,(N,j,q,W,Q)=>{s("tilde",k,N,j,q,W,Q);let ee;return x(j)?ee="":x(q)?ee=`>=${j}.0.0 <${+j+1}.0.0-0`:x(W)?ee=`>=${j}.${q}.0 <${j}.${+q+1}.0-0`:Q?(s("replaceTilde pr",Q),ee=`>=${j}.${q}.${W}-${Q} <${j}.${+q+1}.0-0`):ee=`>=${j}.${q}.${W} <${j}.${+q+1}.0-0`,s("tilde return",ee),ee})},C=(k,D)=>k.trim().split(/\s+/).map(O=>w(O,D)).join(" "),w=(k,D)=>{s("caret",k,D);const O=D.loose?l[u.CARETLOOSE]:l[u.CARET],N=D.includePrerelease?"-0":"";return k.replace(O,(j,q,W,Q,ee)=>{s("caret",k,j,q,W,Q,ee);let H;return x(q)?H="":x(W)?H=`>=${q}.0.0${N} <${+q+1}.0.0-0`:x(Q)?q==="0"?H=`>=${q}.${W}.0${N} <${q}.${+W+1}.0-0`:H=`>=${q}.${W}.0${N} <${+q+1}.0.0-0`:ee?(s("replaceCaret pr",ee),q==="0"?W==="0"?H=`>=${q}.${W}.${Q}-${ee} <${q}.${W}.${+Q+1}-0`:H=`>=${q}.${W}.${Q}-${ee} <${q}.${+W+1}.0-0`:H=`>=${q}.${W}.${Q}-${ee} <${+q+1}.0.0-0`):(s("no pr"),q==="0"?W==="0"?H=`>=${q}.${W}.${Q}${N} <${q}.${W}.${+Q+1}-0`:H=`>=${q}.${W}.${Q}${N} <${q}.${+W+1}.0-0`:H=`>=${q}.${W}.${Q} <${+q+1}.0.0-0`),s("caret return",H),H})},T=(k,D)=>(s("replaceXRanges",k,D),k.split(/\s+/).map(O=>R(O,D)).join(" ")),R=(k,D)=>{k=k.trim();const O=D.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return k.replace(O,(N,j,q,W,Q,ee)=>{s("xRange",k,N,j,q,W,Q,ee);const H=x(q),se=H||x(W),ne=se||x(Q),ge=ne;return j==="="&&ge&&(j=""),ee=D.includePrerelease?"-0":"",H?j===">"||j==="<"?N="<0.0.0-0":N="*":j&&ge?(se&&(W=0),Q=0,j===">"?(j=">=",se?(q=+q+1,W=0,Q=0):(W=+W+1,Q=0)):j==="<="&&(j="<",se?q=+q+1:W=+W+1),j==="<"&&(ee="-0"),N=`${j+q}.${W}.${Q}${ee}`):se?N=`>=${q}.0.0${ee} <${+q+1}.0.0-0`:ne&&(N=`>=${q}.${W}.0${ee} <${q}.${+W+1}.0-0`),s("xRange return",N),N})},L=(k,D)=>(s("replaceStars",k,D),k.trim().replace(l[u.STAR],"")),B=(k,D)=>(s("replaceGTE0",k,D),k.trim().replace(l[D.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=k=>(D,O,N,j,q,W,Q,ee,H,se,ne,ge)=>(x(N)?O="":x(j)?O=`>=${N}.0.0${k?"-0":""}`:x(q)?O=`>=${N}.${j}.0${k?"-0":""}`:W?O=`>=${O}`:O=`>=${O}${k?"-0":""}`,x(H)?ee="":x(se)?ee=`<${+H+1}.0.0-0`:x(ne)?ee=`<${H}.${+se+1}.0-0`:ge?ee=`<=${H}.${se}.${ne}-${ge}`:k?ee=`<${H}.${se}.${+ne+1}-0`:ee=`<=${ee}`,`${O} ${ee}`.trim()),S=(k,D,O)=>{for(let N=0;N<k.length;N++)if(!k[N].test(D))return!1;if(D.prerelease.length&&!O.includePrerelease){for(let N=0;N<k.length;N++)if(s(k[N].semver),k[N].semver!==o.ANY&&k[N].semver.prerelease.length>0){const j=k[N].semver;if(j.major===D.major&&j.minor===D.minor&&j.patch===D.patch)return!0}return!1}return!0};return S5}var k5,sCe;function mAt(){if(sCe)return k5;sCe=1;const e=P8e();return k5=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},k5}var vAt=mAt(),B8e=oAt(vAt);function yAt(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(u){u.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){s<=0||(r.postMessage(n,o),setTimeout(l,i),s-=1)}setTimeout(l,i)}var bAt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function z8e(e,...t){for(const n of t)xAt(e,n);return e}function xAt(e,t){for(const n of Object.keys(t))fx(e,n,t[n],!0)}const Ed=Xgt;let ME=Y_t;const YS=typeof window<"u"?window:void 0;var QTe;ME===void 0&&((QTe=YS==null?void 0:YS.vl)!=null&&QTe.compile)&&(ME=YS.vl);const wAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},_At={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},a_={vega:"Vega","vega-lite":"Vega-Lite"},dD={vega:Ed.version,"vega-lite":ME?ME.version:"not available"},EAt={vega:e=>e,"vega-lite":(e,t)=>ME.compile(e,{config:t}).spec},AAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,CAt="chart-wrapper";function SAt(e){return typeof e=="function"}function aCe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${a_[r]} JSON Source`}function kAt(e,t){if(e.$schema){const n=T8e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${a_[n.library]}, but mode argument sets ${a_[t]??t}.`);const r=n.library;return B8e(dD[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${a_[r]} ${n.version}, but the current version of ${a_[r]} is v${dD[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function U8e(e){return!!(e&&"load"in e)}function lCe(e){return U8e(e)?e:Ed.loader(e)}function TAt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pn(t.defaultStyle)&&(t.defaultStyle=!1),t}async function DAt(e,t,n={}){let r,i;pn(t)?(i=lCe(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=TAt(r),s=o.loader;(!i||s)&&(i=lCe(n.loader??s));const a=await uCe(o,i),l=await uCe(n,i),u={...z8e(l,a),config:cx(l.config??{},a.config??{})};return await RAt(e,r,u,i)}async function uCe(e,t){const n=pn(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pn(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function LAt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function RAt(e,t,n={},r){const i=n.theme?cx($Et[n.theme],n.config??{}):n.config,o=Im(n.actions)?n.actions:z8e({},wAt,n.actions??{}),s={..._At,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Ed.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:C,rootContainer:w}=LAt(f);if(!C.getElementById(E)){const T=document.createElement("style");T.id=E,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?bAt.toString():n.defaultStyle,w.appendChild(T)}}const c=kAt(t,n.mode);let d=EAt[c](t,i);if(c==="vega-lite"&&d.$schema){const E=T8e(d.$schema);B8e(dD.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${dD.vega}.`)}f.classList.add("vega-embed"),o&&f.classList.add("has-actions"),f.innerHTML="";let p=f;if(o){const E=document.createElement("div");E.classList.add(CAt),f.appendChild(E),p=E}const h=n.patch;if(h&&(d=h instanceof Function?h(d):KF(d,h,!0,!1).newDocument),n.formatLocale&&Ed.formatLocale(n.formatLocale),n.timeFormatLocale&&Ed.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const C=n.expressionFunctions[E];"fn"in C?Ed.expressionFunction(E,C.fn,C.visitor):C instanceof Function&&Ed.expressionFunction(E,C)}const{ast:g}=n,m=Ed.parse(d,c==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Ed.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Ed.expressionInterpreter??n.expr??omt}:{}});if(y.addSignalListener("autosize",(E,C)=>{const{type:w}=C;w=="fit-x"?(p.classList.add("fit-x"),p.classList.remove("fit-y")):w=="fit-y"?(p.classList.remove("fit-x"),p.classList.add("fit-y")):w=="fit"?p.classList.add("fit-x","fit-y"):p.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:C}=n,w=E&&!U8e(E)?E==null?void 0:E.baseURL:void 0,T=SAt(C)?C:new HEt({baseURL:w,...C===!0?{}:C}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=c==="vega"),v){const{hoverSet:E,updateSet:C}=typeof v=="boolean"?{}:v;y.hover(E,C)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(p,n.bind).runAsync();let x;if(o!==!1){let E=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const w=document.createElement("details");w.title=s.CLICK_TO_VIEW_ACTIONS,f.append(w),E=w;const T=document.createElement("summary");T.innerHTML=AAt,w.append(T),x=R=>{w.contains(R.target)||w.removeAttribute("open")},document.addEventListener("click",x)}const C=document.createElement("div");if(E.append(C),C.classList.add("vega-actions"),o===!0||o.export!==!1){for(const w of["svg","png"])if(o===!0||o.export===!0||o.export[w]){const T=s[`${w.toUpperCase()}_ACTION`],R=document.createElement("a"),L=mn(n.scaleFactor)?n.scaleFactor[w]:n.scaleFactor;R.text=T,R.href="#",R.target="_blank",R.download=`${u}.${w}`,R.addEventListener("mousedown",async function(B){B.preventDefault();const P=await y.toImageURL(w,L);this.href=P}),C.append(R)}}if(o===!0||o.source!==!1){const w=document.createElement("a");w.text=s.SOURCE_ACTION,w.href="#",w.addEventListener("click",function(T){aCe(H$(t),n.sourceHeader??"",n.sourceFooter??"",c),T.preventDefault()}),C.append(w)}if(c==="vega-lite"&&(o===!0||o.compiled!==!1)){const w=document.createElement("a");w.text=s.COMPILED_ACTION,w.href="#",w.addEventListener("click",function(T){aCe(H$(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),C.append(w)}if(o===!0||o.editor!==!1){const w=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=s.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(R){yAt(window,w,{config:i,mode:h?"vega":c,renderer:a,spec:H$(h?d:t)}),R.preventDefault()}),C.append(T)}}function _(){x&&document.removeEventListener("click",x),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}const Xm={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};Xm.defaultMerge;function FAt(e,t){return t}function $At(e,t){return e.filter(n=>n!==void 0)}var cCe;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(cCe||(cCe={}));function fCe(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:IAt(e)?1:e instanceof Set?3:e instanceof Map?4:5}function MAt(e){const t=new Set;for(const n of e)for(const r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(r);return t}function OAt(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function j8e(e){var r;let t=0,n=(r=e[0])==null?void 0:r[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var i;do{if(n===void 0)return{done:!0,value:void 0};const o=n.next();if(o.done===!0){t+=1,n=(i=e[t])==null?void 0:i[Symbol.iterator]();continue}return{done:!1,value:o.value}}while(!0)}}}}}const dCe=["[object Object]","[object Module]"];function IAt(e){if(!dCe.includes(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!dCe.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function NAt(e,t,n){const r={};for(const i of MAt(e)){const o=[];for(const l of e)OAt(l,i)&&o.push(l[i]);if(o.length===0)continue;const s=t.metaDataUpdater(n,{key:i,parents:e}),a=H8e(o,t,s);a!==Xm.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):r[i]=a)}return r}function PAt(e){return e.flat()}function BAt(e){return new Set(j8e(e))}function zAt(e){return new Map(j8e(e))}function UAt(e){return e.at(-1)}const XS={mergeRecords:NAt,mergeArrays:PAt,mergeSets:BAt,mergeMaps:zAt,mergeOthers:UAt};function jAt(...e){return HAt({})(...e)}function HAt(e,t){const n=qAt(e,r);function r(...i){return H8e(i,n,t)}return r}function qAt(e,t){return{defaultMergeFunctions:XS,mergeFunctions:{...XS,...Object.fromEntries(Object.entries(e).filter(([n,r])=>Object.hasOwn(XS,n)).map(([n,r])=>r===!1?[n,XS.mergeOthers]:[n,r]))},metaDataUpdater:e.metaDataUpdater??FAt,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,filterValues:e.filterValues===!1?void 0:e.filterValues??$At,actions:Xm}}function H8e(e,t,n){var o;const r=((o=t.filterValues)==null?void 0:o.call(t,e,n))??e;if(r.length===0)return;if(r.length===1)return T5(r,t,n);const i=fCe(r[0]);if(i!==0&&i!==5){for(let s=1;s<r.length;s++)if(fCe(r[s])!==i)return T5(r,t,n)}switch(i){case 1:return GAt(r,t,n);case 2:return WAt(r,t,n);case 3:return VAt(r,t,n);case 4:return YAt(r,t,n);default:return T5(r,t,n)}}function GAt(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);return r===Xm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):r}function WAt(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);return r===Xm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):r}function VAt(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);return r===Xm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):r}function YAt(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);return r===Xm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):r}function T5(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===Xm.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const XAt={width:"container",height:"container",autosize:"fit",resize:!0},KAt=(e,t,n)=>{const r=jAt(XAt,t);DAt(e.renderRoot.querySelector("#vis"),r).then(i=>{n&&(Object.keys(n).forEach(o=>{i.view.insert(o,n[o])}),i.view.run()),i.view.addEventListener("pointermove",(o,s)=>{s&&e._dispatchItemPointerMoveEvent({event:o,item:s})}),i.view.addEventListener("click",(o,s)=>{s&&e._dispatchItemClickEvent({event:o,item:s})})})};class q8e extends Pi{constructor(){super(),this.spec=void 0,this.dataValues=void 0,this.noShadow=!1,this.unstyled=!1}_dispatchItemPointerMoveEvent(t){this.dispatchEvent(new CustomEvent("pointermove:item",{detail:t}))}_dispatchItemClickEvent(t){this.dispatchEvent(new CustomEvent("click:item",{detail:t}))}async updated(t){(t.has("spec")||t.has("dataValues"))&&KAt(this,this.spec,this.dataValues)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return yt`
      <style>
        ${kYe}
        ${!this.unstyled&&YL}
        ${!this.unstyled&&TYe}
      </style>
      <div id="vis"></div>
    `}}Cn(q8e,"properties",{dataValues:{attribute:!1,type:Object},spec:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-chart",q8e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZAt=aA(class extends $L{constructor(){super(...arguments),this.key=Li}render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&($N(e),this.key=t),n}}),QAt=e=>{e.hoverInteraction=e.eoxMap.selectInteractions.SelectLayerHoverInteraction,e.clickInteraction=e.eoxMap.selectInteractions.SelectLayerClickInteraction;const t=()=>{e.requestUpdate()};e.hoverInteraction.selectStyleLayer.on("change",t),e.clickInteraction.selectStyleLayer.on("change",t)},JAt=(e,t,n)=>{if(e.clickId===t)return;const r=n?[]:[t];e.hoverInteraction.highlightById(r)},eCt=(e,t)=>{e.stopPropagation();const n=Number(e.target.getAttribute("index")),r=t.drawLayer.getSource().getFeatures()[n];t.drawLayer.getSource().removeFeature(r),t.drawnFeatures.splice(n,1),t.requestUpdate()},tCt=(e,t)=>{const{clickId:n,drawLayer:r,olMap:i,clickInteraction:o}=t,s=o.getId(e);if(n===s){const l=r.getSource().getExtent();i.getView().fit(l,$xe),o.highlightById([])}else{const l=t.eoxMap.projection||"EPSG:3857",u=t.eoxDrawTools.projection,f=e.clone().getGeometry().transform(u,l).getExtent();o.highlightById([s]),i.getView().fit(f,$xe)}t.requestUpdate()},nCt="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class G8e extends Pi{constructor(){super();Cn(this,"hoverInteraction");Cn(this,"clickInteraction");Cn(this,"hoverId");Cn(this,"clickId");this.eoxDrawTools=null,this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.featureName="Feature",this.modify=null,this.unstyled=!1}_handleDelete(n){eCt(n,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(n){tCt(n,this)}_handleHoverFeature(n,r=!1){JAt(this,n,r)}firstUpdated(){QAt(this)}createRenderRoot(){return this}render(){var n,r;return this.hoverId=(n=this.hoverInteraction)==null?void 0:n.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],yt`
      <style>
        ${!this.unstyled&&nCt}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((i,o)=>{const s=o+1,a=Object.values(this.eoxMap.selectInteractions)[0].getId(i),l=this.hoverId===a,u=this.clickId===a;return ZAt(s,yt`
              <li
                class="${l||u?"selected":Li}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(i)}"
                >
                  <span class="title"
                    >${this.featureName} ${s}</span
                  >
                  <button
                    index=${o}
                    data-cy="deleteFeatureBtn"
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}Cn(G8e,"properties",{eoxDrawTools:{attribute:!1,state:!0},eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},featureName:{attribute:!1,state:!0,type:String},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",G8e);const rCt=e=>{const{multipleFeatures:t,drawnFeatures:n,currentlyDrawing:r}=e,i=!t&&(n==null?void 0:n.length)>0||r,o=!(n!=null&&n.length)&&!r;return{drawDisabled:i,discardDisabled:o}},cC="button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}",iCt='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}';function oCt(e){navigator.clipboard.writeText(e).then(function(){},function(t){console.error("Could not copy text: ",t)})}const sCt=(e,t)=>new zN().writeFeaturesObject(e,t);class bU extends sDe{constructor(){super()}getType(){return"text"}readFeature(t,n){return this.readFeatureFromText(KS(t),this.adaptOptions(n))}readFeatureFromText(t,n){return Xh()}readFeatures(t,n){return this.readFeaturesFromText(KS(t),this.adaptOptions(n))}readFeaturesFromText(t,n){return Xh()}readGeometry(t,n){return this.readGeometryFromText(KS(t),this.adaptOptions(n))}readGeometryFromText(t,n){return Xh()}readProjection(t){return this.readProjectionFromText(KS(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,n){return this.writeFeatureText(t,this.adaptOptions(n))}writeFeatureText(t,n){return Xh()}writeFeatures(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))}writeFeaturesText(t,n){return Xh()}writeGeometry(t,n){return this.writeGeometryText(t,this.adaptOptions(n))}writeGeometryText(t,n){return Xh()}}function KS(e){return typeof e=="string"?e:""}const aCt={POINT:Cf,LINESTRING:Yd,POLYGON:uA,MULTIPOINT:ML,MULTILINESTRING:rx,MULTIPOLYGON:lA},W8e="EMPTY",V8e="Z",Y8e="M",lCt="ZM",io={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},uCt={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class cCt{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,n){return n=n!==void 0?n:!1,t>="0"&&t<="9"||t=="."&&!n}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),n=this.index_;let r=t,i;if(t=="(")i=io.LEFT_PAREN;else if(t==",")i=io.COMMA;else if(t==")")i=io.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")i=io.NUMBER,r=this.readNumber_();else if(this.isAlpha_(t))i=io.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")i=io.EOF;else throw new Error("Unexpected character: "+t)}return{position:n,value:r,type:i}}readNumber_(){let t;const n=this.index_;let r=!1,i=!1;do t=="."?r=!0:(t=="e"||t=="E")&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!i&&(t=="e"||t=="E")||i&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let t;const n=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(n,this.index_--).toUpperCase()}}class fCt{constructor(t){this.lexer_=t,this.token_={position:0,type:io.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const n=this.isTokenType(t);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const n=this.token_;if(this.isTokenType(io.TEXT)){const r=n.value;r===V8e?t="XYZ":r===Y8e?t="XYM":r===lCt&&(t="XYZM"),t!=="XY"&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(io.LEFT_PAREN)){const t=[];do t.push(this.parseGeometry_());while(this.match(io.COMMA));if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(io.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(io.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(io.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(io.LEFT_PAREN)){let t;if(this.token_.type==io.LEFT_PAREN?t=this.parsePointTextList_():t=this.parsePointList_(),this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(io.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(io.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(io.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(io.NUMBER))t.push(i.value);else break}if(t.length==n)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(io.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(io.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(io.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(io.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(io.TEXT)&&this.token_.value==W8e;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(io.TEXT)){const n=t.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new dm([]);const s=this.parseGeometryCollectionText_();return new dm(s)}const i=aCt[n];if(!i)throw new Error("Invalid geometry type: "+n);let o;if(r)n=="POINT"?o=[NaN,NaN]:o=[];else switch(n){case"POINT":{o=this.parsePointText_();break}case"LINESTRING":{o=this.parseLineStringText_();break}case"POLYGON":{o=this.parsePolygonText_();break}case"MULTIPOINT":{o=this.parseMultiPointText_();break}case"MULTILINESTRING":{o=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{o=this.parseMultiPolygonText_();break}}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())}}class X8e extends bU{constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const n=new cCt(t);return new fCt(n).parse()}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n),i=new dc;return i.setGeometry(r),i}readFeaturesFromText(t,n){let r=[];const i=this.readGeometryFromText(t,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const o=[];for(let s=0,a=r.length;s<a;++s){const l=new dc;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(t,n){const r=this.parse_(t);return La(r,!1,n)}writeFeatureText(t,n){const r=t.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(t,n){if(t.length==1)return this.writeFeatureText(t[0],n);const r=[];for(let o=0,s=t.length;o<s;++o)r.push(t[o].getGeometry());const i=new dm(r);return this.writeGeometryText(i,n)}writeGeometryText(t,n){return Q8e(La(t,!0,n))}}function K8e(e){const t=e.getCoordinates();return t.length===0?"":t.join(" ")}function dCt(e){const t=[],n=e.getPoints();for(let r=0,i=n.length;r<i;++r)t.push("("+K8e(n[r])+")");return t.join(",")}function hCt(e){const t=[],n=e.getGeometries();for(let r=0,i=n.length;r<i;++r)t.push(Q8e(n[r]));return t.join(",")}function xU(e){const t=e.getCoordinates(),n=[];for(let r=0,i=t.length;r<i;++r)n.push(t[r].join(" "));return n.join(",")}function pCt(e){const t=[],n=e.getLineStrings();for(let r=0,i=n.length;r<i;++r)t.push("("+xU(n[r])+")");return t.join(",")}function Z8e(e){const t=[],n=e.getLinearRings();for(let r=0,i=n.length;r<i;++r)t.push("("+xU(n[r])+")");return t.join(",")}function gCt(e){const t=[],n=e.getPolygons();for(let r=0,i=n.length;r<i;++r)t.push("("+Z8e(n[r])+")");return t.join(",")}function mCt(e){const t=e.getLayout();let n="";return(t==="XYZ"||t==="XYZM")&&(n+=V8e),(t==="XYM"||t==="XYZM")&&(n+=Y8e),n}const vCt={Point:K8e,LineString:xU,Polygon:Z8e,MultiPoint:dCt,MultiLineString:pCt,MultiPolygon:gCt,GeometryCollection:hCt};function Q8e(e){const t=e.getType(),n=vCt[t],r=n(e);let i=uCt[t];if(typeof e.getFlatCoordinates=="function"){const o=mCt(e);o.length>0&&(i+=" "+o)}return r.length===0?i+" "+W8e:i+"("+r+")"}const yCt=(e,t)=>new X8e().writeFeatures(e,t);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function xr(e,t,n){return e?t(e):n==null?void 0:n(e)}var QE,JE;class J8e extends Pi{constructor(){super();zn(this,QE,!0);zn(this,JE,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1,this.select=!1}updateButtonStates(){const{drawDisabled:n,discardDisabled:r}=rCt(this);ko(this,QE,n),ko(this,JE,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const n=this.currentlyDrawing?"drawing":"draw";return yt`
      <style>
        ${!this.unstyled&&cC}
        ${!this.unstyled&&iCt}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="${this.select?"pointer":"polygon"} icon"
            ?disabled="${fn(this,QE)||Li}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${n}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${fn(this,JE)||Li}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${xr(this.importFeatures,()=>yt`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${xr(this.showEditor,()=>yt`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>oCt(this.geoJSON)}
            >
              ${this.unstyled?"copy":Li}
            </button>
          </div>
        `)}
    `}}QE=new WeakMap,JE=new WeakMap,Cn(J8e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},select:{type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",J8e);const bCt=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.pointer:before {
    content:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Ecursor-default-click%3C/title%3E%3Cpath d='M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10' /%3E%3C/svg%3E");
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,xCt=e=>{(()=>{if(e.emitDrawnFeatures(),!e.multipleFeatures)e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.currentlyDrawing=!1;else if(e.continuous)if(!e.layerId)e.drawLayer.getSource().clear(),e.drawnFeatures=[];else{const r=e.drawLayer.getSource().getFeatures().at(-1);if(e.drawLayer.getSource().clear(),!r)return;e.drawLayer.getSource().addFeature(r),e.drawnFeatures=[r]}})(),e.requestUpdate()},wCt=e=>{const t=()=>{e.drawLayer.set("isDrawingEnabled",!0),e.draw.setActive(!0),e.selectionEvents.addSelectionEvent()},n=()=>{e.currentlyDrawing=!0,e.requestUpdate()};t(),n()},hCe=(e,t)=>{var o,s,a,l,u;const r=X_(e.for),i=r.map;return e.drawLayer=r.addOrUpdateLayer({zIndex:100,type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:t},source:{type:"Vector"},style:(o=e.featureStyles)==null?void 0:o.layer,interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:e.type,modify:e.allowModify,stopClick:!0,style:(s=e.featureStyles)==null?void 0:s.layer}},{type:"select",options:{id:"SelectLayerHoverInteraction",condition:"pointermove",style:((a=e.featureStyles)==null?void 0:a.hover)||{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5},tooltip:!1}},{type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",panIn:!0,style:((l=e.featureStyles)==null?void 0:l.click)||{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),e.draw=r.interactions.drawInteraction,e.modify=r.interactions.drawInteractionmodify,C8(e,r,e.layerId),(u=e.modify)==null||u.on("modifyend",()=>e.onModifyEnd()),r.addEventListener("addfeatures",()=>xCt(e)),{EoxMap:r,OlMap:i}},_Ct=e=>{const t=()=>{e.drawnFeatures=[],e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.drawLayer.getSource().clear(),e.geoJSON=null},n=()=>{e.emitDrawnFeatures(),e.currentlyDrawing=!1,e.requestUpdate()};t(),n()},ECt=(e,t)=>{setTimeout(()=>{const r=e.drawLayer.getSource().getFeatures(),i=e.eoxMap.projection||"EPSG:3857",o=e.projection;e.drawnFeatures=o?r.map(a=>{a=a.clone();const l=a.getGeometry().transform(i,o);return a.setGeometry(l),a}):r;let s;switch(e.format){case"geojson":s=sCt(e.drawnFeatures);break;case"wkt":s=yCt(e.drawnFeatures);break;case"feature":s=e.drawnFeatures;break;default:s=e.drawnFeatures;break}e.updateGeoJSON(),e.requestUpdate(),t(s)},0)},ACt=e=>{const t=i=>{(i==null?void 0:i.detail.id)!=="SelectLayerClickInteraction"||!i.detail.feature||(e.drawLayer.getSource().addFeature(i.detail.feature),e.eoxMap.dispatchEvent(new CustomEvent("addfeatures",{detail:i.detail})))};return{addSelectionEvent:()=>{e.layerId&&(e.eoxMap.selectInteractions.SelectLayerHoverInteraction.setActive(!0),e.eoxMap.addEventListener("select",t))},removeSelectionEvent:()=>{var o;const i=(o=e.eoxMap.selectInteractions)==null?void 0:o.SelectLayerHoverInteraction;i&&(i.selectedFids=[],i.setActive(!1)),e.eoxMap.removeEventListener("select",t)}}},C8=(e,t,n)=>{var l,u;if(!n||!t)return;const r=t.getLayerById(n),i=r?JSON.parse(JSON.stringify(r.get("_jsonDefinition"))):null;if(!i){console.error(`Layer with id ${n} not found`);return}const o={type:"select",active:!1,options:{id:"SelectLayerHoverInteraction",condition:"pointermove",active:!1,style:((l=e.featureStyles)==null?void 0:l.hover)||{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"#3399CC","stroke-width":2.5}}},s={type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",multi:e.multipleFeatures,modify:e.allowModify,active:!1,style:((u=e.featureStyles)==null?void 0:u.click)||{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"rgba(0, 0, 0,0.0)"}}};i.interactions=[o,s],t.addOrUpdateLayer(i),eNe(t.layers,n,[i]);const a=e.draw;e.draw=t.selectInteractions.SelectLayerClickInteraction,a.setActive(!1),t.selectInteractions.SelectLayerClickInteraction.setActive(!1),t.selectInteractions.SelectLayerHoverInteraction.setActive(!1)};function eNe(e,t,n){const r=e.findIndex(i=>i.properties.id===t);if(r!==-1)return e.splice(r,1,...n),e;for(const i of e)if(i.type==="Group"){const o=eNe(i.layers,t,n);o!=null&&o.length&&(i.layers=o)}return e}const CCt=(e,t,n,r)=>{if(t){if(n){r&&n!==r&&pCe(e,t),C8(e,t,n);return}if(!n&&r){pCe(e,t);return}}};function pCe(e,t){t&&(e.discardDrawing(),e.selectionEvents.removeSelectionEvent(),e.draw=t.interactions.drawInteraction,t.selectInteractions.SelectLayerClickInteraction.remove(),t.selectInteractions.SelectLayerHoverInteraction.remove())}const QF=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';function SCt(e,t){function n(o){o.preventDefault(),o.stopPropagation()}function r(o){o.srcElement.style.opacity="0.4"}function i(o){o.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(o=>{t.addEventListener(o,n,!1),["dragenter","dragover"].includes(o)?t.addEventListener(o,r,!1):t.addEventListener(o,i,!1)}),t.addEventListener("drop",o=>tNe(o,e),!1)}function kCt(e){e.preventDefault(),e.stopPropagation()}function tNe(e,t){kCt(e);const n=e.dataTransfer?e.dataTransfer.files:e.target.files;Array.from(n).forEach(r=>TCt(r,t))}function TCt(e,t){const n=new FileReader;n.readAsText(e),n.onloadend=function(){typeof n.result=="string"&&t.handleFeatureChange(n.result)}}var n1,r1,eA,i1,tA;class DCt extends Pi{constructor(){super();zn(this,n1);zn(this,r1);zn(this,eA);zn(this,i1);zn(this,tA);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.layerId="",this.drawnFeatures=[],this.featureName="Feature",this.featureStyles=null,this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.projection="EPSG:4326",this.type="Polygon",this.selectionEvents=null,this.format="feature",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},continuous:{type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},featureName:{attribute:"feature-name",type:String},layerId:{attribute:"layer-id",type:String},featureStyles:{attribute:!1},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},projection:{type:String},noShadow:{type:Boolean},format:{type:String},type:{type:String},unstyled:{type:Boolean}}}set continuous(n){ko(this,tA,n),n&&(this.multipleFeatures=!0)}get continuous(){return fn(this,tA)}set layerId(n){CCt(this,this.eoxMap,n,fn(this,i1)),ko(this,i1,n)}get layerId(){return fn(this,i1)}startDrawing(){wCt(this)}discardDrawing(){_Ct(this)}handleFeatureChange(n,r=!1,i=!0){this.eoxMap.parseTextToFeature(n||JSON.stringify(Mxe),this.drawLayer,this.eoxMap,r,{dataProjection:this.eoxMap.projection,featureProjection:this.projection},i)}handleFilesChange(n){tNe(n,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){ko(this,eA,JSON.stringify(this.eoxMap.parseFeature(this.drawnFeatures)||Mxe,void 0,2))}emitDrawnFeatures(){ECt(this,r=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:r}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:n,OlMap:r}=hCe(this,this.multipleFeatures);this.eoxMap=n,ko(this,r1,r),this.selectionEvents=ACt(this),this.importFeatures&&SCt(this,this.eoxMap),this.updateGeoJSON(),this.requestUpdate()}updated(n){if(n.has("for")){const{EoxMap:r,OlMap:i}=hCe(this,this.multipleFeatures);this.eoxMap=r,ko(this,r1,i)}}get eoxMap(){return fn(this,n1)}set eoxMap(n){const r=fn(this,n1);ko(this,n1,n),this.requestUpdate("eoxMap",r)}disconnectedCallback(){var n;(n=this.eoxMap)==null||n.map.removeLayer(this.drawLayer),super.disconnectedCallback()}render(){var n;return yt`
      <style>
        :host { display: block; }
        ${!this.unstyled&&QF}
        ${!this.unstyled&&bCt}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.startDrawing(),discard:()=>this.discardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        ?select=${!!this.layerId}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${fn(this,eA)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((n=this.drawnFeatures)!=null&&n.length)?yt`<eox-drawtools-list
            .eoxDrawTools=${this}
            .eoxMap=${this.eoxMap}
            .olMap=${fn(this,r1)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .featureName=${this.featureName}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:Li}
    `}}n1=new WeakMap,r1=new WeakMap,eA=new WeakMap,i1=new WeakMap,tA=new WeakMap;customElements.define("eox-drawtools",DCt);var LCt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nNe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rNe={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(e){(function(t,n){e.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:LCt,function(t,n){var r=[],i=Object.getPrototypeOf,o=r.slice,s=r.flat?function(M){return r.flat.call(M)}:function(M){return r.concat.apply([],M)},a=r.push,l=r.indexOf,u={},f=u.toString,c=u.hasOwnProperty,d=c.toString,p=d.call(Object),h={},g=function(M){return typeof M=="function"&&typeof M.nodeType!="number"&&typeof M.item!="function"},m=function(M){return M!=null&&M===M.window},y=t.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function x(M,z,Y){Y=Y||y;var K,ce,ae=Y.createElement("script");if(ae.text=M,z)for(K in v)ce=z[K]||z.getAttribute&&z.getAttribute(K),ce&&ae.setAttribute(K,ce);Y.head.appendChild(ae).parentNode.removeChild(ae)}function _(M){return M==null?M+"":typeof M=="object"||typeof M=="function"?u[f.call(M)]||"object":typeof M}var E="3.7.1",C=/HTML$/i,w=function(M,z){return new w.fn.init(M,z)};w.fn=w.prototype={jquery:E,constructor:w,length:0,toArray:function(){return o.call(this)},get:function(M){return M==null?o.call(this):M<0?this[M+this.length]:this[M]},pushStack:function(M){var z=w.merge(this.constructor(),M);return z.prevObject=this,z},each:function(M){return w.each(this,M)},map:function(M){return this.pushStack(w.map(this,function(z,Y){return M.call(z,Y,z)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(M,z){return(z+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(M,z){return z%2}))},eq:function(M){var z=this.length,Y=+M+(M<0?z:0);return this.pushStack(Y>=0&&Y<z?[this[Y]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},w.extend=w.fn.extend=function(){var M,z,Y,K,ce,ae,pe=arguments[0]||{},He=1,Ie=arguments.length,et=!1;for(typeof pe=="boolean"&&(et=pe,pe=arguments[He]||{},He++),typeof pe!="object"&&!g(pe)&&(pe={}),He===Ie&&(pe=this,He--);He<Ie;He++)if((M=arguments[He])!=null)for(z in M)K=M[z],!(z==="__proto__"||pe===K)&&(et&&K&&(w.isPlainObject(K)||(ce=Array.isArray(K)))?(Y=pe[z],ce&&!Array.isArray(Y)?ae=[]:!ce&&!w.isPlainObject(Y)?ae={}:ae=Y,ce=!1,pe[z]=w.extend(et,ae,K)):K!==void 0&&(pe[z]=K));return pe},w.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(M){throw new Error(M)},noop:function(){},isPlainObject:function(M){var z,Y;return!M||f.call(M)!=="[object Object]"?!1:(z=i(M),z?(Y=c.call(z,"constructor")&&z.constructor,typeof Y=="function"&&d.call(Y)===p):!0)},isEmptyObject:function(M){var z;for(z in M)return!1;return!0},globalEval:function(M,z,Y){x(M,{nonce:z&&z.nonce},Y)},each:function(M,z){var Y,K=0;if(T(M))for(Y=M.length;K<Y&&z.call(M[K],K,M[K])!==!1;K++);else for(K in M)if(z.call(M[K],K,M[K])===!1)break;return M},text:function(M){var z,Y="",K=0,ce=M.nodeType;if(!ce)for(;z=M[K++];)Y+=w.text(z);return ce===1||ce===11?M.textContent:ce===9?M.documentElement.textContent:ce===3||ce===4?M.nodeValue:Y},makeArray:function(M,z){var Y=z||[];return M!=null&&(T(Object(M))?w.merge(Y,typeof M=="string"?[M]:M):a.call(Y,M)),Y},inArray:function(M,z,Y){return z==null?-1:l.call(z,M,Y)},isXMLDoc:function(M){var z=M&&M.namespaceURI,Y=M&&(M.ownerDocument||M).documentElement;return!C.test(z||Y&&Y.nodeName||"HTML")},merge:function(M,z){for(var Y=+z.length,K=0,ce=M.length;K<Y;K++)M[ce++]=z[K];return M.length=ce,M},grep:function(M,z,Y){for(var K,ce=[],ae=0,pe=M.length,He=!Y;ae<pe;ae++)K=!z(M[ae],ae),K!==He&&ce.push(M[ae]);return ce},map:function(M,z,Y){var K,ce,ae=0,pe=[];if(T(M))for(K=M.length;ae<K;ae++)ce=z(M[ae],ae,Y),ce!=null&&pe.push(ce);else for(ae in M)ce=z(M[ae],ae,Y),ce!=null&&pe.push(ce);return s(pe)},guid:1,support:h}),typeof Symbol=="function"&&(w.fn[Symbol.iterator]=r[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(M,z){u["[object "+z+"]"]=z.toLowerCase()});function T(M){var z=!!M&&"length"in M&&M.length,Y=_(M);return g(M)||m(M)?!1:Y==="array"||z===0||typeof z=="number"&&z>0&&z-1 in M}function R(M,z){return M.nodeName&&M.nodeName.toLowerCase()===z.toLowerCase()}var L=r.pop,B=r.sort,P=r.splice,S="[\\x20\\t\\r\\n\\f]",k=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g");w.contains=function(M,z){var Y=z&&z.parentNode;return M===Y||!!(Y&&Y.nodeType===1&&(M.contains?M.contains(Y):M.compareDocumentPosition&&M.compareDocumentPosition(Y)&16))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(M,z){return z?M==="\0"?"":M.slice(0,-1)+"\\"+M.charCodeAt(M.length-1).toString(16)+" ":"\\"+M}w.escapeSelector=function(M){return(M+"").replace(D,O)};var N=y,j=a;(function(){var M,z,Y,K,ce,ae=j,pe,He,Ie,et,vt,oe=w.expando,de=0,ze=0,gt=of(),qt=of(),Ft=of(),Sn=of(),er=function(De,Ke){return De===Ke&&(ce=!0),0},yr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ii="(?:\\\\[\\da-fA-F]{1,6}"+S+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Pn="\\["+S+"*("+ii+")(?:"+S+"*([*^$|!~]?=)"+S+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ii+"))|)"+S+"*\\]",fo=":("+ii+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Pn+")*)|.*)\\)|)",Dn=new RegExp(S+"+","g"),Ar=new RegExp("^"+S+"*,"+S+"*"),Ye=new RegExp("^"+S+"*([>+~]|"+S+")"+S+"*"),Rt=new RegExp(S+"|>"),rn=new RegExp(fo),vr=new RegExp("^"+ii+"$"),Fr={ID:new RegExp("^#("+ii+")"),CLASS:new RegExp("^\\.("+ii+")"),TAG:new RegExp("^("+ii+"|[*])"),ATTR:new RegExp("^"+Pn),PSEUDO:new RegExp("^"+fo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),bool:new RegExp("^(?:"+yr+")$","i"),needsContext:new RegExp("^"+S+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)","i")},Hn=/^(?:input|select|textarea|button)$/i,bi=/^h\d$/i,gs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ch=/[+~]/,lu=new RegExp("\\\\[\\da-fA-F]{1,6}"+S+"?|\\\\([^\\r\\n\\f])","g"),Il=function(De,Ke){var st="0x"+De.slice(1)-65536;return Ke||(st<0?String.fromCharCode(st+65536):String.fromCharCode(st>>10|55296,st&1023|56320))},t0=function(){cu()},id=Th(function(De){return De.disabled===!0&&R(De,"fieldset")},{dir:"parentNode",next:"legend"});function n0(){try{return pe.activeElement}catch{}}try{ae.apply(r=o.call(N.childNodes),N.childNodes),r[N.childNodes.length].nodeType}catch{ae={apply:function(De,Ke){j.apply(De,o.call(Ke))},call:function(De){j.apply(De,o.call(arguments,1))}}}function Ei(De,Ke,st,ct){var At,en,cn,kn,hn,$r,rr,ar=Ke&&Ke.ownerDocument,jr=Ke?Ke.nodeType:9;if(st=st||[],typeof De!="string"||!De||jr!==1&&jr!==9&&jr!==11)return st;if(!ct&&(cu(Ke),Ke=Ke||pe,Ie)){if(jr!==11&&(hn=gs.exec(De)))if(At=hn[1]){if(jr===9)if(cn=Ke.getElementById(At)){if(cn.id===At)return ae.call(st,cn),st}else return st;else if(ar&&(cn=ar.getElementById(At))&&Ei.contains(Ke,cn)&&cn.id===At)return ae.call(st,cn),st}else{if(hn[2])return ae.apply(st,Ke.getElementsByTagName(De)),st;if((At=hn[3])&&Ke.getElementsByClassName)return ae.apply(st,Ke.getElementsByClassName(At)),st}if(!Sn[De+" "]&&(!et||!et.test(De))){if(rr=De,ar=Ke,jr===1&&(Rt.test(De)||Ye.test(De))){for(ar=Ch.test(De)&&od(Ke.parentNode)||Ke,(ar!=Ke||!h.scope)&&((kn=Ke.getAttribute("id"))?kn=w.escapeSelector(kn):Ke.setAttribute("id",kn=oe)),$r=xc(De),en=$r.length;en--;)$r[en]=(kn?"#"+kn:":scope")+" "+kh($r[en]);rr=$r.join(",")}try{return ae.apply(st,ar.querySelectorAll(rr)),st}catch{Sn(De,!0)}finally{kn===oe&&Ke.removeAttribute("id")}}}return Gu(De.replace(k,"$1"),Ke,st,ct)}function of(){var De=[];function Ke(st,ct){return De.push(st+" ")>z.cacheLength&&delete Ke[De.shift()],Ke[st+" "]=ct}return Ke}function Js(De){return De[oe]=!0,De}function bc(De){var Ke=pe.createElement("fieldset");try{return!!De(Ke)}catch{return!1}finally{Ke.parentNode&&Ke.parentNode.removeChild(Ke),Ke=null}}function Sh(De){return function(Ke){return R(Ke,"input")&&Ke.type===De}}function ul(De){return function(Ke){return(R(Ke,"input")||R(Ke,"button"))&&Ke.type===De}}function Xp(De){return function(Ke){return"form"in Ke?Ke.parentNode&&Ke.disabled===!1?"label"in Ke?"label"in Ke.parentNode?Ke.parentNode.disabled===De:Ke.disabled===De:Ke.isDisabled===De||Ke.isDisabled!==!De&&id(Ke)===De:Ke.disabled===De:"label"in Ke?Ke.disabled===De:!1}}function uu(De){return Js(function(Ke){return Ke=+Ke,Js(function(st,ct){for(var At,en=De([],st.length,Ke),cn=en.length;cn--;)st[At=en[cn]]&&(st[At]=!(ct[At]=st[At]))})})}function od(De){return De&&typeof De.getElementsByTagName<"u"&&De}function cu(De){var Ke,st=De?De.ownerDocument||De:N;return st==pe||st.nodeType!==9||!st.documentElement||(pe=st,He=pe.documentElement,Ie=!w.isXMLDoc(pe),vt=He.matches||He.webkitMatchesSelector||He.msMatchesSelector,He.msMatchesSelector&&N!=pe&&(Ke=pe.defaultView)&&Ke.top!==Ke&&Ke.addEventListener("unload",t0),h.getById=bc(function(ct){return He.appendChild(ct).id=w.expando,!pe.getElementsByName||!pe.getElementsByName(w.expando).length}),h.disconnectedMatch=bc(function(ct){return vt.call(ct,"*")}),h.scope=bc(function(){return pe.querySelectorAll(":scope")}),h.cssHas=bc(function(){try{return pe.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),h.getById?(z.filter.ID=function(ct){var At=ct.replace(lu,Il);return function(en){return en.getAttribute("id")===At}},z.find.ID=function(ct,At){if(typeof At.getElementById<"u"&&Ie){var en=At.getElementById(ct);return en?[en]:[]}}):(z.filter.ID=function(ct){var At=ct.replace(lu,Il);return function(en){var cn=typeof en.getAttributeNode<"u"&&en.getAttributeNode("id");return cn&&cn.value===At}},z.find.ID=function(ct,At){if(typeof At.getElementById<"u"&&Ie){var en,cn,kn,hn=At.getElementById(ct);if(hn){if(en=hn.getAttributeNode("id"),en&&en.value===ct)return[hn];for(kn=At.getElementsByName(ct),cn=0;hn=kn[cn++];)if(en=hn.getAttributeNode("id"),en&&en.value===ct)return[hn]}return[]}}),z.find.TAG=function(ct,At){return typeof At.getElementsByTagName<"u"?At.getElementsByTagName(ct):At.querySelectorAll(ct)},z.find.CLASS=function(ct,At){if(typeof At.getElementsByClassName<"u"&&Ie)return At.getElementsByClassName(ct)},et=[],bc(function(ct){var At;He.appendChild(ct).innerHTML="<a id='"+oe+"' href='' disabled='disabled'></a><select id='"+oe+"-\r\\' disabled='disabled'><option selected=''></option></select>",ct.querySelectorAll("[selected]").length||et.push("\\["+S+"*(?:value|"+yr+")"),ct.querySelectorAll("[id~="+oe+"-]").length||et.push("~="),ct.querySelectorAll("a#"+oe+"+*").length||et.push(".#.+[+~]"),ct.querySelectorAll(":checked").length||et.push(":checked"),At=pe.createElement("input"),At.setAttribute("type","hidden"),ct.appendChild(At).setAttribute("name","D"),He.appendChild(ct).disabled=!0,ct.querySelectorAll(":disabled").length!==2&&et.push(":enabled",":disabled"),At=pe.createElement("input"),At.setAttribute("name",""),ct.appendChild(At),ct.querySelectorAll("[name='']").length||et.push("\\["+S+"*name"+S+"*="+S+`*(?:''|"")`)}),h.cssHas||et.push(":has"),et=et.length&&new RegExp(et.join("|")),er=function(ct,At){if(ct===At)return ce=!0,0;var en=!ct.compareDocumentPosition-!At.compareDocumentPosition;return en||(en=(ct.ownerDocument||ct)==(At.ownerDocument||At)?ct.compareDocumentPosition(At):1,en&1||!h.sortDetached&&At.compareDocumentPosition(ct)===en?ct===pe||ct.ownerDocument==N&&Ei.contains(N,ct)?-1:At===pe||At.ownerDocument==N&&Ei.contains(N,At)?1:K?l.call(K,ct)-l.call(K,At):0:en&4?-1:1)}),pe}Ei.matches=function(De,Ke){return Ei(De,null,null,Ke)},Ei.matchesSelector=function(De,Ke){if(cu(De),Ie&&!Sn[Ke+" "]&&(!et||!et.test(Ke)))try{var st=vt.call(De,Ke);if(st||h.disconnectedMatch||De.document&&De.document.nodeType!==11)return st}catch{Sn(Ke,!0)}return Ei(Ke,pe,null,[De]).length>0},Ei.contains=function(De,Ke){return(De.ownerDocument||De)!=pe&&cu(De),w.contains(De,Ke)},Ei.attr=function(De,Ke){(De.ownerDocument||De)!=pe&&cu(De);var st=z.attrHandle[Ke.toLowerCase()],ct=st&&c.call(z.attrHandle,Ke.toLowerCase())?st(De,Ke,!Ie):void 0;return ct!==void 0?ct:De.getAttribute(Ke)},Ei.error=function(De){throw new Error("Syntax error, unrecognized expression: "+De)},w.uniqueSort=function(De){var Ke,st=[],ct=0,At=0;if(ce=!h.sortStable,K=!h.sortStable&&o.call(De,0),B.call(De,er),ce){for(;Ke=De[At++];)Ke===De[At]&&(ct=st.push(At));for(;ct--;)P.call(De,st[ct],1)}return K=null,De},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(o.apply(this)))},z=w.expr={cacheLength:50,createPseudo:Js,match:Fr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(De){return De[1]=De[1].replace(lu,Il),De[3]=(De[3]||De[4]||De[5]||"").replace(lu,Il),De[2]==="~="&&(De[3]=" "+De[3]+" "),De.slice(0,4)},CHILD:function(De){return De[1]=De[1].toLowerCase(),De[1].slice(0,3)==="nth"?(De[3]||Ei.error(De[0]),De[4]=+(De[4]?De[5]+(De[6]||1):2*(De[3]==="even"||De[3]==="odd")),De[5]=+(De[7]+De[8]||De[3]==="odd")):De[3]&&Ei.error(De[0]),De},PSEUDO:function(De){var Ke,st=!De[6]&&De[2];return Fr.CHILD.test(De[0])?null:(De[3]?De[2]=De[4]||De[5]||"":st&&rn.test(st)&&(Ke=xc(st,!0))&&(Ke=st.indexOf(")",st.length-Ke)-st.length)&&(De[0]=De[0].slice(0,Ke),De[2]=st.slice(0,Ke)),De.slice(0,3))}},filter:{TAG:function(De){var Ke=De.replace(lu,Il).toLowerCase();return De==="*"?function(){return!0}:function(st){return R(st,Ke)}},CLASS:function(De){var Ke=gt[De+" "];return Ke||(Ke=new RegExp("(^|"+S+")"+De+"("+S+"|$)"))&&gt(De,function(st){return Ke.test(typeof st.className=="string"&&st.className||typeof st.getAttribute<"u"&&st.getAttribute("class")||"")})},ATTR:function(De,Ke,st){return function(ct){var At=Ei.attr(ct,De);return At==null?Ke==="!=":Ke?(At+="",Ke==="="?At===st:Ke==="!="?At!==st:Ke==="^="?st&&At.indexOf(st)===0:Ke==="*="?st&&At.indexOf(st)>-1:Ke==="$="?st&&At.slice(-st.length)===st:Ke==="~="?(" "+At.replace(Dn," ")+" ").indexOf(st)>-1:Ke==="|="?At===st||At.slice(0,st.length+1)===st+"-":!1):!0}},CHILD:function(De,Ke,st,ct,At){var en=De.slice(0,3)!=="nth",cn=De.slice(-4)!=="last",kn=Ke==="of-type";return ct===1&&At===0?function(hn){return!!hn.parentNode}:function(hn,$r,rr){var ar,jr,Gn,zi,ss,as=en!==cn?"nextSibling":"previousSibling",ma=hn.parentNode,va=kn&&hn.nodeName.toLowerCase(),Wu=!rr&&!kn,As=!1;if(ma){if(en){for(;as;){for(Gn=hn;Gn=Gn[as];)if(kn?R(Gn,va):Gn.nodeType===1)return!1;ss=as=De==="only"&&!ss&&"nextSibling"}return!0}if(ss=[cn?ma.firstChild:ma.lastChild],cn&&Wu){for(jr=ma[oe]||(ma[oe]={}),ar=jr[De]||[],zi=ar[0]===de&&ar[1],As=zi&&ar[2],Gn=zi&&ma.childNodes[zi];Gn=++zi&&Gn&&Gn[as]||(As=zi=0)||ss.pop();)if(Gn.nodeType===1&&++As&&Gn===hn){jr[De]=[de,zi,As];break}}else if(Wu&&(jr=hn[oe]||(hn[oe]={}),ar=jr[De]||[],zi=ar[0]===de&&ar[1],As=zi),As===!1)for(;(Gn=++zi&&Gn&&Gn[as]||(As=zi=0)||ss.pop())&&!((kn?R(Gn,va):Gn.nodeType===1)&&++As&&(Wu&&(jr=Gn[oe]||(Gn[oe]={}),jr[De]=[de,As]),Gn===hn)););return As-=At,As===ct||As%ct===0&&As/ct>=0}}},PSEUDO:function(De,Ke){var st,ct=z.pseudos[De]||z.setFilters[De.toLowerCase()]||Ei.error("unsupported pseudo: "+De);return ct[oe]?ct(Ke):ct.length>1?(st=[De,De,"",Ke],z.setFilters.hasOwnProperty(De.toLowerCase())?Js(function(At,en){for(var cn,kn=ct(At,Ke),hn=kn.length;hn--;)cn=l.call(At,kn[hn]),At[cn]=!(en[cn]=kn[hn])}):function(At){return ct(At,0,st)}):ct}},pseudos:{not:Js(function(De){var Ke=[],st=[],ct=ld(De.replace(k,"$1"));return ct[oe]?Js(function(At,en,cn,kn){for(var hn,$r=ct(At,null,kn,[]),rr=At.length;rr--;)(hn=$r[rr])&&(At[rr]=!(en[rr]=hn))}):function(At,en,cn){return Ke[0]=At,ct(Ke,null,cn,st),Ke[0]=null,!st.pop()}}),has:Js(function(De){return function(Ke){return Ei(De,Ke).length>0}}),contains:Js(function(De){return De=De.replace(lu,Il),function(Ke){return(Ke.textContent||w.text(Ke)).indexOf(De)>-1}}),lang:Js(function(De){return vr.test(De||"")||Ei.error("unsupported lang: "+De),De=De.replace(lu,Il).toLowerCase(),function(Ke){var st;do if(st=Ie?Ke.lang:Ke.getAttribute("xml:lang")||Ke.getAttribute("lang"))return st=st.toLowerCase(),st===De||st.indexOf(De+"-")===0;while((Ke=Ke.parentNode)&&Ke.nodeType===1);return!1}}),target:function(De){var Ke=t.location&&t.location.hash;return Ke&&Ke.slice(1)===De.id},root:function(De){return De===He},focus:function(De){return De===n0()&&pe.hasFocus()&&!!(De.type||De.href||~De.tabIndex)},enabled:Xp(!1),disabled:Xp(!0),checked:function(De){return R(De,"input")&&!!De.checked||R(De,"option")&&!!De.selected},selected:function(De){return De.parentNode&&De.parentNode.selectedIndex,De.selected===!0},empty:function(De){for(De=De.firstChild;De;De=De.nextSibling)if(De.nodeType<6)return!1;return!0},parent:function(De){return!z.pseudos.empty(De)},header:function(De){return bi.test(De.nodeName)},input:function(De){return Hn.test(De.nodeName)},button:function(De){return R(De,"input")&&De.type==="button"||R(De,"button")},text:function(De){var Ke;return R(De,"input")&&De.type==="text"&&((Ke=De.getAttribute("type"))==null||Ke.toLowerCase()==="text")},first:uu(function(){return[0]}),last:uu(function(De,Ke){return[Ke-1]}),eq:uu(function(De,Ke,st){return[st<0?st+Ke:st]}),even:uu(function(De,Ke){for(var st=0;st<Ke;st+=2)De.push(st);return De}),odd:uu(function(De,Ke){for(var st=1;st<Ke;st+=2)De.push(st);return De}),lt:uu(function(De,Ke,st){var ct;for(st<0?ct=st+Ke:st>Ke?ct=Ke:ct=st;--ct>=0;)De.push(ct);return De}),gt:uu(function(De,Ke,st){for(var ct=st<0?st+Ke:st;++ct<Ke;)De.push(ct);return De})}},z.pseudos.nth=z.pseudos.eq;for(M in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[M]=Sh(M);for(M in{submit:!0,reset:!0})z.pseudos[M]=ul(M);function Kp(){}Kp.prototype=z.filters=z.pseudos,z.setFilters=new Kp;function xc(De,Ke){var st,ct,At,en,cn,kn,hn,$r=qt[De+" "];if($r)return Ke?0:$r.slice(0);for(cn=De,kn=[],hn=z.preFilter;cn;){(!st||(ct=Ar.exec(cn)))&&(ct&&(cn=cn.slice(ct[0].length)||cn),kn.push(At=[])),st=!1,(ct=Ye.exec(cn))&&(st=ct.shift(),At.push({value:st,type:ct[0].replace(k," ")}),cn=cn.slice(st.length));for(en in z.filter)(ct=Fr[en].exec(cn))&&(!hn[en]||(ct=hn[en](ct)))&&(st=ct.shift(),At.push({value:st,type:en,matches:ct}),cn=cn.slice(st.length));if(!st)break}return Ke?cn.length:cn?Ei.error(De):qt(De,kn).slice(0)}function kh(De){for(var Ke=0,st=De.length,ct="";Ke<st;Ke++)ct+=De[Ke].value;return ct}function Th(De,Ke,st){var ct=Ke.dir,At=Ke.next,en=At||ct,cn=st&&en==="parentNode",kn=ze++;return Ke.first?function(hn,$r,rr){for(;hn=hn[ct];)if(hn.nodeType===1||cn)return De(hn,$r,rr);return!1}:function(hn,$r,rr){var ar,jr,Gn=[de,kn];if(rr){for(;hn=hn[ct];)if((hn.nodeType===1||cn)&&De(hn,$r,rr))return!0}else for(;hn=hn[ct];)if(hn.nodeType===1||cn)if(jr=hn[oe]||(hn[oe]={}),At&&R(hn,At))hn=hn[ct]||hn;else{if((ar=jr[en])&&ar[0]===de&&ar[1]===kn)return Gn[2]=ar[2];if(jr[en]=Gn,Gn[2]=De(hn,$r,rr))return!0}return!1}}function Zp(De){return De.length>1?function(Ke,st,ct){for(var At=De.length;At--;)if(!De[At](Ke,st,ct))return!1;return!0}:De[0]}function sf(De,Ke,st){for(var ct=0,At=Ke.length;ct<At;ct++)Ei(De,Ke[ct],st);return st}function fu(De,Ke,st,ct,At){for(var en,cn=[],kn=0,hn=De.length,$r=Ke!=null;kn<hn;kn++)(en=De[kn])&&(!st||st(en,ct,At))&&(cn.push(en),$r&&Ke.push(kn));return cn}function sd(De,Ke,st,ct,At,en){return ct&&!ct[oe]&&(ct=sd(ct)),At&&!At[oe]&&(At=sd(At,en)),Js(function(cn,kn,hn,$r){var rr,ar,jr,Gn,zi=[],ss=[],as=kn.length,ma=cn||sf(Ke||"*",hn.nodeType?[hn]:hn,[]),va=De&&(cn||!Ke)?fu(ma,zi,De,hn,$r):ma;if(st?(Gn=At||(cn?De:as||ct)?[]:kn,st(va,Gn,hn,$r)):Gn=va,ct)for(rr=fu(Gn,ss),ct(rr,[],hn,$r),ar=rr.length;ar--;)(jr=rr[ar])&&(Gn[ss[ar]]=!(va[ss[ar]]=jr));if(cn){if(At||De){if(At){for(rr=[],ar=Gn.length;ar--;)(jr=Gn[ar])&&rr.push(va[ar]=jr);At(null,Gn=[],rr,$r)}for(ar=Gn.length;ar--;)(jr=Gn[ar])&&(rr=At?l.call(cn,jr):zi[ar])>-1&&(cn[rr]=!(kn[rr]=jr))}}else Gn=fu(Gn===kn?Gn.splice(as,Gn.length):Gn),At?At(null,kn,Gn,$r):ae.apply(kn,Gn)})}function ad(De){for(var Ke,st,ct,At=De.length,en=z.relative[De[0].type],cn=en||z.relative[" "],kn=en?1:0,hn=Th(function(ar){return ar===Ke},cn,!0),$r=Th(function(ar){return l.call(Ke,ar)>-1},cn,!0),rr=[function(ar,jr,Gn){var zi=!en&&(Gn||jr!=Y)||((Ke=jr).nodeType?hn(ar,jr,Gn):$r(ar,jr,Gn));return Ke=null,zi}];kn<At;kn++)if(st=z.relative[De[kn].type])rr=[Th(Zp(rr),st)];else{if(st=z.filter[De[kn].type].apply(null,De[kn].matches),st[oe]){for(ct=++kn;ct<At&&!z.relative[De[ct].type];ct++);return sd(kn>1&&Zp(rr),kn>1&&kh(De.slice(0,kn-1).concat({value:De[kn-2].type===" "?"*":""})).replace(k,"$1"),st,kn<ct&&ad(De.slice(kn,ct)),ct<At&&ad(De=De.slice(ct)),ct<At&&kh(De))}rr.push(st)}return Zp(rr)}function r0(De,Ke){var st=Ke.length>0,ct=De.length>0,At=function(en,cn,kn,hn,$r){var rr,ar,jr,Gn=0,zi="0",ss=en&&[],as=[],ma=Y,va=en||ct&&z.find.TAG("*",$r),Wu=de+=ma==null?1:Math.random()||.1,As=va.length;for($r&&(Y=cn==pe||cn||$r);zi!==As&&(rr=va[zi])!=null;zi++){if(ct&&rr){for(ar=0,!cn&&rr.ownerDocument!=pe&&(cu(rr),kn=!Ie);jr=De[ar++];)if(jr(rr,cn||pe,kn)){ae.call(hn,rr);break}$r&&(de=Wu)}st&&((rr=!jr&&rr)&&Gn--,en&&ss.push(rr))}if(Gn+=zi,st&&zi!==Gn){for(ar=0;jr=Ke[ar++];)jr(ss,as,cn,kn);if(en){if(Gn>0)for(;zi--;)ss[zi]||as[zi]||(as[zi]=L.call(hn));as=fu(as)}ae.apply(hn,as),$r&&!en&&as.length>0&&Gn+Ke.length>1&&w.uniqueSort(hn)}return $r&&(de=Wu,Y=ma),ss};return st?Js(At):At}function ld(De,Ke){var st,ct=[],At=[],en=Ft[De+" "];if(!en){for(Ke||(Ke=xc(De)),st=Ke.length;st--;)en=ad(Ke[st]),en[oe]?ct.push(en):At.push(en);en=Ft(De,r0(At,ct)),en.selector=De}return en}function Gu(De,Ke,st,ct){var At,en,cn,kn,hn,$r=typeof De=="function"&&De,rr=!ct&&xc(De=$r.selector||De);if(st=st||[],rr.length===1){if(en=rr[0]=rr[0].slice(0),en.length>2&&(cn=en[0]).type==="ID"&&Ke.nodeType===9&&Ie&&z.relative[en[1].type]){if(Ke=(z.find.ID(cn.matches[0].replace(lu,Il),Ke)||[])[0],Ke)$r&&(Ke=Ke.parentNode);else return st;De=De.slice(en.shift().value.length)}for(At=Fr.needsContext.test(De)?0:en.length;At--&&(cn=en[At],!z.relative[kn=cn.type]);)if((hn=z.find[kn])&&(ct=hn(cn.matches[0].replace(lu,Il),Ch.test(en[0].type)&&od(Ke.parentNode)||Ke))){if(en.splice(At,1),De=ct.length&&kh(en),!De)return ae.apply(st,ct),st;break}}return($r||ld(De,rr))(ct,Ke,!Ie,st,!Ke||Ch.test(De)&&od(Ke.parentNode)||Ke),st}h.sortStable=oe.split("").sort(er).join("")===oe,cu(),h.sortDetached=bc(function(De){return De.compareDocumentPosition(pe.createElement("fieldset"))&1}),w.find=Ei,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,Ei.compile=ld,Ei.select=Gu,Ei.setDocument=cu,Ei.tokenize=xc,Ei.escape=w.escapeSelector,Ei.getText=w.text,Ei.isXML=w.isXMLDoc,Ei.selectors=w.expr,Ei.support=w.support,Ei.uniqueSort=w.uniqueSort})();var q=function(M,z,Y){for(var K=[],ce=Y!==void 0;(M=M[z])&&M.nodeType!==9;)if(M.nodeType===1){if(ce&&w(M).is(Y))break;K.push(M)}return K},W=function(M,z){for(var Y=[];M;M=M.nextSibling)M.nodeType===1&&M!==z&&Y.push(M);return Y},Q=w.expr.match.needsContext,ee=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(M,z,Y){return g(z)?w.grep(M,function(K,ce){return!!z.call(K,ce,K)!==Y}):z.nodeType?w.grep(M,function(K){return K===z!==Y}):typeof z!="string"?w.grep(M,function(K){return l.call(z,K)>-1!==Y}):w.filter(z,M,Y)}w.filter=function(M,z,Y){var K=z[0];return Y&&(M=":not("+M+")"),z.length===1&&K.nodeType===1?w.find.matchesSelector(K,M)?[K]:[]:w.find.matches(M,w.grep(z,function(ce){return ce.nodeType===1}))},w.fn.extend({find:function(M){var z,Y,K=this.length,ce=this;if(typeof M!="string")return this.pushStack(w(M).filter(function(){for(z=0;z<K;z++)if(w.contains(ce[z],this))return!0}));for(Y=this.pushStack([]),z=0;z<K;z++)w.find(M,ce[z],Y);return K>1?w.uniqueSort(Y):Y},filter:function(M){return this.pushStack(H(this,M||[],!1))},not:function(M){return this.pushStack(H(this,M||[],!0))},is:function(M){return!!H(this,typeof M=="string"&&Q.test(M)?w(M):M||[],!1).length}});var se,ne=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ge=w.fn.init=function(M,z,Y){var K,ce;if(!M)return this;if(Y=Y||se,typeof M=="string")if(M[0]==="<"&&M[M.length-1]===">"&&M.length>=3?K=[null,M,null]:K=ne.exec(M),K&&(K[1]||!z))if(K[1]){if(z=z instanceof w?z[0]:z,w.merge(this,w.parseHTML(K[1],z&&z.nodeType?z.ownerDocument||z:y,!0)),ee.test(K[1])&&w.isPlainObject(z))for(K in z)g(this[K])?this[K](z[K]):this.attr(K,z[K]);return this}else return ce=y.getElementById(K[2]),ce&&(this[0]=ce,this.length=1),this;else return!z||z.jquery?(z||Y).find(M):this.constructor(z).find(M);else{if(M.nodeType)return this[0]=M,this.length=1,this;if(g(M))return Y.ready!==void 0?Y.ready(M):M(w)}return w.makeArray(M,this)};ge.prototype=w.fn,se=w(y);var we=/^(?:parents|prev(?:Until|All))/,$e={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(M){var z=w(M,this),Y=z.length;return this.filter(function(){for(var K=0;K<Y;K++)if(w.contains(this,z[K]))return!0})},closest:function(M,z){var Y,K=0,ce=this.length,ae=[],pe=typeof M!="string"&&w(M);if(!Q.test(M)){for(;K<ce;K++)for(Y=this[K];Y&&Y!==z;Y=Y.parentNode)if(Y.nodeType<11&&(pe?pe.index(Y)>-1:Y.nodeType===1&&w.find.matchesSelector(Y,M))){ae.push(Y);break}}return this.pushStack(ae.length>1?w.uniqueSort(ae):ae)},index:function(M){return M?typeof M=="string"?l.call(w(M),this[0]):l.call(this,M.jquery?M[0]:M):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(M,z){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(M,z))))},addBack:function(M){return this.add(M==null?this.prevObject:this.prevObject.filter(M))}});function ve(M,z){for(;(M=M[z])&&M.nodeType!==1;);return M}w.each({parent:function(M){var z=M.parentNode;return z&&z.nodeType!==11?z:null},parents:function(M){return q(M,"parentNode")},parentsUntil:function(M,z,Y){return q(M,"parentNode",Y)},next:function(M){return ve(M,"nextSibling")},prev:function(M){return ve(M,"previousSibling")},nextAll:function(M){return q(M,"nextSibling")},prevAll:function(M){return q(M,"previousSibling")},nextUntil:function(M,z,Y){return q(M,"nextSibling",Y)},prevUntil:function(M,z,Y){return q(M,"previousSibling",Y)},siblings:function(M){return W((M.parentNode||{}).firstChild,M)},children:function(M){return W(M.firstChild)},contents:function(M){return M.contentDocument!=null&&i(M.contentDocument)?M.contentDocument:(R(M,"template")&&(M=M.content||M),w.merge([],M.childNodes))}},function(M,z){w.fn[M]=function(Y,K){var ce=w.map(this,z,Y);return M.slice(-5)!=="Until"&&(K=Y),K&&typeof K=="string"&&(ce=w.filter(K,ce)),this.length>1&&($e[M]||w.uniqueSort(ce),we.test(M)&&ce.reverse()),this.pushStack(ce)}});var Ee=/[^\x20\t\r\n\f]+/g;function Ve(M){var z={};return w.each(M.match(Ee)||[],function(Y,K){z[K]=!0}),z}w.Callbacks=function(M){M=typeof M=="string"?Ve(M):w.extend({},M);var z,Y,K,ce,ae=[],pe=[],He=-1,Ie=function(){for(ce=ce||M.once,K=z=!0;pe.length;He=-1)for(Y=pe.shift();++He<ae.length;)ae[He].apply(Y[0],Y[1])===!1&&M.stopOnFalse&&(He=ae.length,Y=!1);M.memory||(Y=!1),z=!1,ce&&(Y?ae=[]:ae="")},et={add:function(){return ae&&(Y&&!z&&(He=ae.length-1,pe.push(Y)),function vt(oe){w.each(oe,function(de,ze){g(ze)?(!M.unique||!et.has(ze))&&ae.push(ze):ze&&ze.length&&_(ze)!=="string"&&vt(ze)})}(arguments),Y&&!z&&Ie()),this},remove:function(){return w.each(arguments,function(vt,oe){for(var de;(de=w.inArray(oe,ae,de))>-1;)ae.splice(de,1),de<=He&&He--}),this},has:function(vt){return vt?w.inArray(vt,ae)>-1:ae.length>0},empty:function(){return ae&&(ae=[]),this},disable:function(){return ce=pe=[],ae=Y="",this},disabled:function(){return!ae},lock:function(){return ce=pe=[],!Y&&!z&&(ae=Y=""),this},locked:function(){return!!ce},fireWith:function(vt,oe){return ce||(oe=oe||[],oe=[vt,oe.slice?oe.slice():oe],pe.push(oe),z||Ie()),this},fire:function(){return et.fireWith(this,arguments),this},fired:function(){return!!K}};return et};function Ue(M){return M}function ft(M){throw M}function ht(M,z,Y,K){var ce;try{M&&g(ce=M.promise)?ce.call(M).done(z).fail(Y):M&&g(ce=M.then)?ce.call(M,z,Y):z.apply(void 0,[M].slice(K))}catch(ae){Y.apply(void 0,[ae])}}w.extend({Deferred:function(M){var z=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],Y="pending",K={state:function(){return Y},always:function(){return ce.done(arguments).fail(arguments),this},catch:function(ae){return K.then(null,ae)},pipe:function(){var ae=arguments;return w.Deferred(function(pe){w.each(z,function(He,Ie){var et=g(ae[Ie[4]])&&ae[Ie[4]];ce[Ie[1]](function(){var vt=et&&et.apply(this,arguments);vt&&g(vt.promise)?vt.promise().progress(pe.notify).done(pe.resolve).fail(pe.reject):pe[Ie[0]+"With"](this,et?[vt]:arguments)})}),ae=null}).promise()},then:function(ae,pe,He){var Ie=0;function et(vt,oe,de,ze){return function(){var gt=this,qt=arguments,Ft=function(){var er,yr;if(!(vt<Ie)){if(er=de.apply(gt,qt),er===oe.promise())throw new TypeError("Thenable self-resolution");yr=er&&(typeof er=="object"||typeof er=="function")&&er.then,g(yr)?ze?yr.call(er,et(Ie,oe,Ue,ze),et(Ie,oe,ft,ze)):(Ie++,yr.call(er,et(Ie,oe,Ue,ze),et(Ie,oe,ft,ze),et(Ie,oe,Ue,oe.notifyWith))):(de!==Ue&&(gt=void 0,qt=[er]),(ze||oe.resolveWith)(gt,qt))}},Sn=ze?Ft:function(){try{Ft()}catch(er){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(er,Sn.error),vt+1>=Ie&&(de!==ft&&(gt=void 0,qt=[er]),oe.rejectWith(gt,qt))}};vt?Sn():(w.Deferred.getErrorHook?Sn.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(Sn.error=w.Deferred.getStackHook()),t.setTimeout(Sn))}}return w.Deferred(function(vt){z[0][3].add(et(0,vt,g(He)?He:Ue,vt.notifyWith)),z[1][3].add(et(0,vt,g(ae)?ae:Ue)),z[2][3].add(et(0,vt,g(pe)?pe:ft))}).promise()},promise:function(ae){return ae!=null?w.extend(ae,K):K}},ce={};return w.each(z,function(ae,pe){var He=pe[2],Ie=pe[5];K[pe[1]]=He.add,Ie&&He.add(function(){Y=Ie},z[3-ae][2].disable,z[3-ae][3].disable,z[0][2].lock,z[0][3].lock),He.add(pe[3].fire),ce[pe[0]]=function(){return ce[pe[0]+"With"](this===ce?void 0:this,arguments),this},ce[pe[0]+"With"]=He.fireWith}),K.promise(ce),M&&M.call(ce,ce),ce},when:function(M){var z=arguments.length,Y=z,K=Array(Y),ce=o.call(arguments),ae=w.Deferred(),pe=function(He){return function(Ie){K[He]=this,ce[He]=arguments.length>1?o.call(arguments):Ie,--z||ae.resolveWith(K,ce)}};if(z<=1&&(ht(M,ae.done(pe(Y)).resolve,ae.reject,!z),ae.state()==="pending"||g(ce[Y]&&ce[Y].then)))return ae.then();for(;Y--;)ht(ce[Y],pe(Y),ae.reject);return ae.promise()}});var zt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(M,z){t.console&&t.console.warn&&M&&zt.test(M.name)&&t.console.warn("jQuery.Deferred exception: "+M.message,M.stack,z)},w.readyException=function(M){t.setTimeout(function(){throw M})};var $t=w.Deferred();w.fn.ready=function(M){return $t.then(M).catch(function(z){w.readyException(z)}),this},w.extend({isReady:!1,readyWait:1,ready:function(M){(M===!0?--w.readyWait:w.isReady)||(w.isReady=!0,!(M!==!0&&--w.readyWait>0)&&$t.resolveWith(y,[w]))}}),w.ready.then=$t.then;function Tn(){y.removeEventListener("DOMContentLoaded",Tn),t.removeEventListener("load",Tn),w.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?t.setTimeout(w.ready):(y.addEventListener("DOMContentLoaded",Tn),t.addEventListener("load",Tn));var it=function(M,z,Y,K,ce,ae,pe){var He=0,Ie=M.length,et=Y==null;if(_(Y)==="object"){ce=!0;for(He in Y)it(M,z,He,Y[He],!0,ae,pe)}else if(K!==void 0&&(ce=!0,g(K)||(pe=!0),et&&(pe?(z.call(M,K),z=null):(et=z,z=function(vt,oe,de){return et.call(w(vt),de)})),z))for(;He<Ie;He++)z(M[He],Y,pe?K:K.call(M[He],He,z(M[He],Y)));return ce?M:et?z.call(M):Ie?z(M[0],Y):ae},Te=/^-ms-/,ye=/-([a-z])/g;function Se(M,z){return z.toUpperCase()}function Re(M){return M.replace(Te,"ms-").replace(ye,Se)}var U=function(M){return M.nodeType===1||M.nodeType===9||!+M.nodeType};function Z(){this.expando=w.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(M){var z=M[this.expando];return z||(z={},U(M)&&(M.nodeType?M[this.expando]=z:Object.defineProperty(M,this.expando,{value:z,configurable:!0}))),z},set:function(M,z,Y){var K,ce=this.cache(M);if(typeof z=="string")ce[Re(z)]=Y;else for(K in z)ce[Re(K)]=z[K];return ce},get:function(M,z){return z===void 0?this.cache(M):M[this.expando]&&M[this.expando][Re(z)]},access:function(M,z,Y){return z===void 0||z&&typeof z=="string"&&Y===void 0?this.get(M,z):(this.set(M,z,Y),Y!==void 0?Y:z)},remove:function(M,z){var Y,K=M[this.expando];if(K!==void 0){if(z!==void 0)for(Array.isArray(z)?z=z.map(Re):(z=Re(z),z=z in K?[z]:z.match(Ee)||[]),Y=z.length;Y--;)delete K[z[Y]];(z===void 0||w.isEmptyObject(K))&&(M.nodeType?M[this.expando]=void 0:delete M[this.expando])}},hasData:function(M){var z=M[this.expando];return z!==void 0&&!w.isEmptyObject(z)}};var re=new Z,ie=new Z,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/[A-Z]/g;function je(M){return M==="true"?!0:M==="false"?!1:M==="null"?null:M===+M+""?+M:be.test(M)?JSON.parse(M):M}function V(M,z,Y){var K;if(Y===void 0&&M.nodeType===1)if(K="data-"+z.replace(Ce,"-$&").toLowerCase(),Y=M.getAttribute(K),typeof Y=="string"){try{Y=je(Y)}catch{}ie.set(M,z,Y)}else Y=void 0;return Y}w.extend({hasData:function(M){return ie.hasData(M)||re.hasData(M)},data:function(M,z,Y){return ie.access(M,z,Y)},removeData:function(M,z){ie.remove(M,z)},_data:function(M,z,Y){return re.access(M,z,Y)},_removeData:function(M,z){re.remove(M,z)}}),w.fn.extend({data:function(M,z){var Y,K,ce,ae=this[0],pe=ae&&ae.attributes;if(M===void 0){if(this.length&&(ce=ie.get(ae),ae.nodeType===1&&!re.get(ae,"hasDataAttrs"))){for(Y=pe.length;Y--;)pe[Y]&&(K=pe[Y].name,K.indexOf("data-")===0&&(K=Re(K.slice(5)),V(ae,K,ce[K])));re.set(ae,"hasDataAttrs",!0)}return ce}return typeof M=="object"?this.each(function(){ie.set(this,M)}):it(this,function(He){var Ie;if(ae&&He===void 0)return Ie=ie.get(ae,M),Ie!==void 0||(Ie=V(ae,M),Ie!==void 0)?Ie:void 0;this.each(function(){ie.set(this,M,He)})},null,z,arguments.length>1,null,!0)},removeData:function(M){return this.each(function(){ie.remove(this,M)})}}),w.extend({queue:function(M,z,Y){var K;if(M)return z=(z||"fx")+"queue",K=re.get(M,z),Y&&(!K||Array.isArray(Y)?K=re.access(M,z,w.makeArray(Y)):K.push(Y)),K||[]},dequeue:function(M,z){z=z||"fx";var Y=w.queue(M,z),K=Y.length,ce=Y.shift(),ae=w._queueHooks(M,z),pe=function(){w.dequeue(M,z)};ce==="inprogress"&&(ce=Y.shift(),K--),ce&&(z==="fx"&&Y.unshift("inprogress"),delete ae.stop,ce.call(M,pe,ae)),!K&&ae&&ae.empty.fire()},_queueHooks:function(M,z){var Y=z+"queueHooks";return re.get(M,Y)||re.access(M,Y,{empty:w.Callbacks("once memory").add(function(){re.remove(M,[z+"queue",Y])})})}}),w.fn.extend({queue:function(M,z){var Y=2;return typeof M!="string"&&(z=M,M="fx",Y--),arguments.length<Y?w.queue(this[0],M):z===void 0?this:this.each(function(){var K=w.queue(this,M,z);w._queueHooks(this,M),M==="fx"&&K[0]!=="inprogress"&&w.dequeue(this,M)})},dequeue:function(M){return this.each(function(){w.dequeue(this,M)})},clearQueue:function(M){return this.queue(M||"fx",[])},promise:function(M,z){var Y,K=1,ce=w.Deferred(),ae=this,pe=this.length,He=function(){--K||ce.resolveWith(ae,[ae])};for(typeof M!="string"&&(z=M,M=void 0),M=M||"fx";pe--;)Y=re.get(ae[pe],M+"queueHooks"),Y&&Y.empty&&(K++,Y.empty.add(He));return He(),ce.promise(z)}});var fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=new RegExp("^(?:([+-])=|)("+fe+")([a-z%]*)$","i"),me=["Top","Right","Bottom","Left"],Oe=y.documentElement,Me=function(M){return w.contains(M.ownerDocument,M)},Be={composed:!0};Oe.getRootNode&&(Me=function(M){return w.contains(M.ownerDocument,M)||M.getRootNode(Be)===M.ownerDocument});var We=function(M,z){return M=z||M,M.style.display==="none"||M.style.display===""&&Me(M)&&w.css(M,"display")==="none"};function Qe(M,z,Y,K){var ce,ae,pe=20,He=K?function(){return K.cur()}:function(){return w.css(M,z,"")},Ie=He(),et=Y&&Y[3]||(w.cssNumber[z]?"":"px"),vt=M.nodeType&&(w.cssNumber[z]||et!=="px"&&+Ie)&&he.exec(w.css(M,z));if(vt&&vt[3]!==et){for(Ie=Ie/2,et=et||vt[3],vt=+Ie||1;pe--;)w.style(M,z,vt+et),(1-ae)*(1-(ae=He()/Ie||.5))<=0&&(pe=0),vt=vt/ae;vt=vt*2,w.style(M,z,vt+et),Y=Y||[]}return Y&&(vt=+vt||+Ie||0,ce=Y[1]?vt+(Y[1]+1)*Y[2]:+Y[2],K&&(K.unit=et,K.start=vt,K.end=ce)),ce}var ut={};function Tt(M){var z,Y=M.ownerDocument,K=M.nodeName,ce=ut[K];return ce||(z=Y.body.appendChild(Y.createElement(K)),ce=w.css(z,"display"),z.parentNode.removeChild(z),ce==="none"&&(ce="block"),ut[K]=ce,ce)}function Ut(M,z){for(var Y,K,ce=[],ae=0,pe=M.length;ae<pe;ae++)K=M[ae],K.style&&(Y=K.style.display,z?(Y==="none"&&(ce[ae]=re.get(K,"display")||null,ce[ae]||(K.style.display="")),K.style.display===""&&We(K)&&(ce[ae]=Tt(K))):Y!=="none"&&(ce[ae]="none",re.set(K,"display",Y)));for(ae=0;ae<pe;ae++)ce[ae]!=null&&(M[ae].style.display=ce[ae]);return M}w.fn.extend({show:function(){return Ut(this,!0)},hide:function(){return Ut(this)},toggle:function(M){return typeof M=="boolean"?M?this.show():this.hide():this.each(function(){We(this)?w(this).show():w(this).hide()})}});var Kt=/^(?:checkbox|radio)$/i,Pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,bn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var M=y.createDocumentFragment(),z=M.appendChild(y.createElement("div")),Y=y.createElement("input");Y.setAttribute("type","radio"),Y.setAttribute("checked","checked"),Y.setAttribute("name","t"),z.appendChild(Y),h.checkClone=z.cloneNode(!0).cloneNode(!0).lastChild.checked,z.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!z.cloneNode(!0).lastChild.defaultValue,z.innerHTML="<option></option>",h.option=!!z.lastChild})();var _n={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_n.tbody=_n.tfoot=_n.colgroup=_n.caption=_n.thead,_n.th=_n.td,h.option||(_n.optgroup=_n.option=[1,"<select multiple='multiple'>","</select>"]);function un(M,z){var Y;return typeof M.getElementsByTagName<"u"?Y=M.getElementsByTagName(z||"*"):typeof M.querySelectorAll<"u"?Y=M.querySelectorAll(z||"*"):Y=[],z===void 0||z&&R(M,z)?w.merge([M],Y):Y}function Wn(M,z){for(var Y=0,K=M.length;Y<K;Y++)re.set(M[Y],"globalEval",!z||re.get(z[Y],"globalEval"))}var qn=/<|&#?\w+;/;function wr(M,z,Y,K,ce){for(var ae,pe,He,Ie,et,vt,oe=z.createDocumentFragment(),de=[],ze=0,gt=M.length;ze<gt;ze++)if(ae=M[ze],ae||ae===0)if(_(ae)==="object")w.merge(de,ae.nodeType?[ae]:ae);else if(!qn.test(ae))de.push(z.createTextNode(ae));else{for(pe=pe||oe.appendChild(z.createElement("div")),He=(Pt.exec(ae)||["",""])[1].toLowerCase(),Ie=_n[He]||_n._default,pe.innerHTML=Ie[1]+w.htmlPrefilter(ae)+Ie[2],vt=Ie[0];vt--;)pe=pe.lastChild;w.merge(de,pe.childNodes),pe=oe.firstChild,pe.textContent=""}for(oe.textContent="",ze=0;ae=de[ze++];){if(K&&w.inArray(ae,K)>-1){ce&&ce.push(ae);continue}if(et=Me(ae),pe=un(oe.appendChild(ae),"script"),et&&Wn(pe),Y)for(vt=0;ae=pe[vt++];)bn.test(ae.type||"")&&Y.push(ae)}return oe}var Ao=/^([^.]*)(?:\.(.+)|)/;function Gi(){return!0}function _i(){return!1}function $s(M,z,Y,K,ce,ae){var pe,He;if(typeof z=="object"){typeof Y!="string"&&(K=K||Y,Y=void 0);for(He in z)$s(M,He,Y,K,z[He],ae);return M}if(K==null&&ce==null?(ce=Y,K=Y=void 0):ce==null&&(typeof Y=="string"?(ce=K,K=void 0):(ce=K,K=Y,Y=void 0)),ce===!1)ce=_i;else if(!ce)return M;return ae===1&&(pe=ce,ce=function(Ie){return w().off(Ie),pe.apply(this,arguments)},ce.guid=pe.guid||(pe.guid=w.guid++)),M.each(function(){w.event.add(this,z,ce,K,Y)})}w.event={global:{},add:function(M,z,Y,K,ce){var ae,pe,He,Ie,et,vt,oe,de,ze,gt,qt,Ft=re.get(M);if(U(M))for(Y.handler&&(ae=Y,Y=ae.handler,ce=ae.selector),ce&&w.find.matchesSelector(Oe,ce),Y.guid||(Y.guid=w.guid++),(Ie=Ft.events)||(Ie=Ft.events=Object.create(null)),(pe=Ft.handle)||(pe=Ft.handle=function(Sn){return typeof w<"u"&&w.event.triggered!==Sn.type?w.event.dispatch.apply(M,arguments):void 0}),z=(z||"").match(Ee)||[""],et=z.length;et--;)He=Ao.exec(z[et])||[],ze=qt=He[1],gt=(He[2]||"").split(".").sort(),ze&&(oe=w.event.special[ze]||{},ze=(ce?oe.delegateType:oe.bindType)||ze,oe=w.event.special[ze]||{},vt=w.extend({type:ze,origType:qt,data:K,handler:Y,guid:Y.guid,selector:ce,needsContext:ce&&w.expr.match.needsContext.test(ce),namespace:gt.join(".")},ae),(de=Ie[ze])||(de=Ie[ze]=[],de.delegateCount=0,(!oe.setup||oe.setup.call(M,K,gt,pe)===!1)&&M.addEventListener&&M.addEventListener(ze,pe)),oe.add&&(oe.add.call(M,vt),vt.handler.guid||(vt.handler.guid=Y.guid)),ce?de.splice(de.delegateCount++,0,vt):de.push(vt),w.event.global[ze]=!0)},remove:function(M,z,Y,K,ce){var ae,pe,He,Ie,et,vt,oe,de,ze,gt,qt,Ft=re.hasData(M)&&re.get(M);if(!(!Ft||!(Ie=Ft.events))){for(z=(z||"").match(Ee)||[""],et=z.length;et--;){if(He=Ao.exec(z[et])||[],ze=qt=He[1],gt=(He[2]||"").split(".").sort(),!ze){for(ze in Ie)w.event.remove(M,ze+z[et],Y,K,!0);continue}for(oe=w.event.special[ze]||{},ze=(K?oe.delegateType:oe.bindType)||ze,de=Ie[ze]||[],He=He[2]&&new RegExp("(^|\\.)"+gt.join("\\.(?:.*\\.|)")+"(\\.|$)"),pe=ae=de.length;ae--;)vt=de[ae],(ce||qt===vt.origType)&&(!Y||Y.guid===vt.guid)&&(!He||He.test(vt.namespace))&&(!K||K===vt.selector||K==="**"&&vt.selector)&&(de.splice(ae,1),vt.selector&&de.delegateCount--,oe.remove&&oe.remove.call(M,vt));pe&&!de.length&&((!oe.teardown||oe.teardown.call(M,gt,Ft.handle)===!1)&&w.removeEvent(M,ze,Ft.handle),delete Ie[ze])}w.isEmptyObject(Ie)&&re.remove(M,"handle events")}},dispatch:function(M){var z,Y,K,ce,ae,pe,He=new Array(arguments.length),Ie=w.event.fix(M),et=(re.get(this,"events")||Object.create(null))[Ie.type]||[],vt=w.event.special[Ie.type]||{};for(He[0]=Ie,z=1;z<arguments.length;z++)He[z]=arguments[z];if(Ie.delegateTarget=this,!(vt.preDispatch&&vt.preDispatch.call(this,Ie)===!1)){for(pe=w.event.handlers.call(this,Ie,et),z=0;(ce=pe[z++])&&!Ie.isPropagationStopped();)for(Ie.currentTarget=ce.elem,Y=0;(ae=ce.handlers[Y++])&&!Ie.isImmediatePropagationStopped();)(!Ie.rnamespace||ae.namespace===!1||Ie.rnamespace.test(ae.namespace))&&(Ie.handleObj=ae,Ie.data=ae.data,K=((w.event.special[ae.origType]||{}).handle||ae.handler).apply(ce.elem,He),K!==void 0&&(Ie.result=K)===!1&&(Ie.preventDefault(),Ie.stopPropagation()));return vt.postDispatch&&vt.postDispatch.call(this,Ie),Ie.result}},handlers:function(M,z){var Y,K,ce,ae,pe,He=[],Ie=z.delegateCount,et=M.target;if(Ie&&et.nodeType&&!(M.type==="click"&&M.button>=1)){for(;et!==this;et=et.parentNode||this)if(et.nodeType===1&&!(M.type==="click"&&et.disabled===!0)){for(ae=[],pe={},Y=0;Y<Ie;Y++)K=z[Y],ce=K.selector+" ",pe[ce]===void 0&&(pe[ce]=K.needsContext?w(ce,this).index(et)>-1:w.find(ce,this,null,[et]).length),pe[ce]&&ae.push(K);ae.length&&He.push({elem:et,handlers:ae})}}return et=this,Ie<z.length&&He.push({elem:et,handlers:z.slice(Ie)}),He},addProp:function(M,z){Object.defineProperty(w.Event.prototype,M,{enumerable:!0,configurable:!0,get:g(z)?function(){if(this.originalEvent)return z(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[M]},set:function(Y){Object.defineProperty(this,M,{enumerable:!0,configurable:!0,writable:!0,value:Y})}})},fix:function(M){return M[w.expando]?M:new w.Event(M)},special:{load:{noBubble:!0},click:{setup:function(M){var z=this||M;return Kt.test(z.type)&&z.click&&R(z,"input")&&tr(z,"click",!0),!1},trigger:function(M){var z=this||M;return Kt.test(z.type)&&z.click&&R(z,"input")&&tr(z,"click"),!0},_default:function(M){var z=M.target;return Kt.test(z.type)&&z.click&&R(z,"input")&&re.get(z,"click")||R(z,"a")}},beforeunload:{postDispatch:function(M){M.result!==void 0&&M.originalEvent&&(M.originalEvent.returnValue=M.result)}}}};function tr(M,z,Y){if(!Y){re.get(M,z)===void 0&&w.event.add(M,z,Gi);return}re.set(M,z,!1),w.event.add(M,z,{namespace:!1,handler:function(K){var ce,ae=re.get(this,z);if(K.isTrigger&1&&this[z]){if(ae)(w.event.special[z]||{}).delegateType&&K.stopPropagation();else if(ae=o.call(arguments),re.set(this,z,ae),this[z](),ce=re.get(this,z),re.set(this,z,!1),ae!==ce)return K.stopImmediatePropagation(),K.preventDefault(),ce}else ae&&(re.set(this,z,w.event.trigger(ae[0],ae.slice(1),this)),K.stopPropagation(),K.isImmediatePropagationStopped=Gi)}})}w.removeEvent=function(M,z,Y){M.removeEventListener&&M.removeEventListener(z,Y)},w.Event=function(M,z){if(!(this instanceof w.Event))return new w.Event(M,z);M&&M.type?(this.originalEvent=M,this.type=M.type,this.isDefaultPrevented=M.defaultPrevented||M.defaultPrevented===void 0&&M.returnValue===!1?Gi:_i,this.target=M.target&&M.target.nodeType===3?M.target.parentNode:M.target,this.currentTarget=M.currentTarget,this.relatedTarget=M.relatedTarget):this.type=M,z&&w.extend(this,z),this.timeStamp=M&&M.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_i,isPropagationStopped:_i,isImmediatePropagationStopped:_i,isSimulated:!1,preventDefault:function(){var M=this.originalEvent;this.isDefaultPrevented=Gi,M&&!this.isSimulated&&M.preventDefault()},stopPropagation:function(){var M=this.originalEvent;this.isPropagationStopped=Gi,M&&!this.isSimulated&&M.stopPropagation()},stopImmediatePropagation:function(){var M=this.originalEvent;this.isImmediatePropagationStopped=Gi,M&&!this.isSimulated&&M.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(M,z){function Y(K){if(y.documentMode){var ce=re.get(this,"handle"),ae=w.event.fix(K);ae.type=K.type==="focusin"?"focus":"blur",ae.isSimulated=!0,ce(K),ae.target===ae.currentTarget&&ce(ae)}else w.event.simulate(z,K.target,w.event.fix(K))}w.event.special[M]={setup:function(){var K;if(tr(this,M,!0),y.documentMode)K=re.get(this,z),K||this.addEventListener(z,Y),re.set(this,z,(K||0)+1);else return!1},trigger:function(){return tr(this,M),!0},teardown:function(){var K;if(y.documentMode)K=re.get(this,z)-1,K?re.set(this,z,K):(this.removeEventListener(z,Y),re.remove(this,z));else return!1},_default:function(K){return re.get(K.target,M)},delegateType:z},w.event.special[z]={setup:function(){var K=this.ownerDocument||this.document||this,ce=y.documentMode?this:K,ae=re.get(ce,z);ae||(y.documentMode?this.addEventListener(z,Y):K.addEventListener(M,Y,!0)),re.set(ce,z,(ae||0)+1)},teardown:function(){var K=this.ownerDocument||this.document||this,ce=y.documentMode?this:K,ae=re.get(ce,z)-1;ae?re.set(ce,z,ae):(y.documentMode?this.removeEventListener(z,Y):K.removeEventListener(M,Y,!0),re.remove(ce,z))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(M,z){w.event.special[M]={delegateType:z,bindType:z,handle:function(Y){var K,ce=this,ae=Y.relatedTarget,pe=Y.handleObj;return(!ae||ae!==ce&&!w.contains(ce,ae))&&(Y.type=pe.origType,K=pe.handler.apply(this,arguments),Y.type=z),K}}}),w.fn.extend({on:function(M,z,Y,K){return $s(this,M,z,Y,K)},one:function(M,z,Y,K){return $s(this,M,z,Y,K,1)},off:function(M,z,Y){var K,ce;if(M&&M.preventDefault&&M.handleObj)return K=M.handleObj,w(M.delegateTarget).off(K.namespace?K.origType+"."+K.namespace:K.origType,K.selector,K.handler),this;if(typeof M=="object"){for(ce in M)this.off(ce,z,M[ce]);return this}return(z===!1||typeof z=="function")&&(Y=z,z=void 0),Y===!1&&(Y=_i),this.each(function(){w.event.remove(this,M,Y,z)})}});var yi=/<script|<style|<link/i,pi=/checked\s*(?:[^=]|=\s*.checked.)/i,_r=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function uo(M,z){return R(M,"table")&&R(z.nodeType!==11?z:z.firstChild,"tr")&&w(M).children("tbody")[0]||M}function Or(M){return M.type=(M.getAttribute("type")!==null)+"/"+M.type,M}function go(M){return(M.type||"").slice(0,5)==="true/"?M.type=M.type.slice(5):M.removeAttribute("type"),M}function Zr(M,z){var Y,K,ce,ae,pe,He,Ie;if(z.nodeType===1){if(re.hasData(M)&&(ae=re.get(M),Ie=ae.events,Ie)){re.remove(z,"handle events");for(ce in Ie)for(Y=0,K=Ie[ce].length;Y<K;Y++)w.event.add(z,ce,Ie[ce][Y])}ie.hasData(M)&&(pe=ie.access(M),He=w.extend({},pe),ie.set(z,He))}}function Fi(M,z){var Y=z.nodeName.toLowerCase();Y==="input"&&Kt.test(M.type)?z.checked=M.checked:(Y==="input"||Y==="textarea")&&(z.defaultValue=M.defaultValue)}function or(M,z,Y,K){z=s(z);var ce,ae,pe,He,Ie,et,vt=0,oe=M.length,de=oe-1,ze=z[0],gt=g(ze);if(gt||oe>1&&typeof ze=="string"&&!h.checkClone&&pi.test(ze))return M.each(function(qt){var Ft=M.eq(qt);gt&&(z[0]=ze.call(this,qt,Ft.html())),or(Ft,z,Y,K)});if(oe&&(ce=wr(z,M[0].ownerDocument,!1,M,K),ae=ce.firstChild,ce.childNodes.length===1&&(ce=ae),ae||K)){for(pe=w.map(un(ce,"script"),Or),He=pe.length;vt<oe;vt++)Ie=ce,vt!==de&&(Ie=w.clone(Ie,!0,!0),He&&w.merge(pe,un(Ie,"script"))),Y.call(M[vt],Ie,vt);if(He)for(et=pe[pe.length-1].ownerDocument,w.map(pe,go),vt=0;vt<He;vt++)Ie=pe[vt],bn.test(Ie.type||"")&&!re.access(Ie,"globalEval")&&w.contains(et,Ie)&&(Ie.src&&(Ie.type||"").toLowerCase()!=="module"?w._evalUrl&&!Ie.noModule&&w._evalUrl(Ie.src,{nonce:Ie.nonce||Ie.getAttribute("nonce")},et):x(Ie.textContent.replace(_r,""),Ie,et))}return M}function Fe(M,z,Y){for(var K,ce=z?w.filter(z,M):M,ae=0;(K=ce[ae])!=null;ae++)!Y&&K.nodeType===1&&w.cleanData(un(K)),K.parentNode&&(Y&&Me(K)&&Wn(un(K,"script")),K.parentNode.removeChild(K));return M}w.extend({htmlPrefilter:function(M){return M},clone:function(M,z,Y){var K,ce,ae,pe,He=M.cloneNode(!0),Ie=Me(M);if(!h.noCloneChecked&&(M.nodeType===1||M.nodeType===11)&&!w.isXMLDoc(M))for(pe=un(He),ae=un(M),K=0,ce=ae.length;K<ce;K++)Fi(ae[K],pe[K]);if(z)if(Y)for(ae=ae||un(M),pe=pe||un(He),K=0,ce=ae.length;K<ce;K++)Zr(ae[K],pe[K]);else Zr(M,He);return pe=un(He,"script"),pe.length>0&&Wn(pe,!Ie&&un(M,"script")),He},cleanData:function(M){for(var z,Y,K,ce=w.event.special,ae=0;(Y=M[ae])!==void 0;ae++)if(U(Y)){if(z=Y[re.expando]){if(z.events)for(K in z.events)ce[K]?w.event.remove(Y,K):w.removeEvent(Y,K,z.handle);Y[re.expando]=void 0}Y[ie.expando]&&(Y[ie.expando]=void 0)}}}),w.fn.extend({detach:function(M){return Fe(this,M,!0)},remove:function(M){return Fe(this,M)},text:function(M){return it(this,function(z){return z===void 0?w.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=z)})},null,M,arguments.length)},append:function(){return or(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var z=uo(this,M);z.appendChild(M)}})},prepend:function(){return or(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var z=uo(this,M);z.insertBefore(M,z.firstChild)}})},before:function(){return or(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this)})},after:function(){return or(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling)})},empty:function(){for(var M,z=0;(M=this[z])!=null;z++)M.nodeType===1&&(w.cleanData(un(M,!1)),M.textContent="");return this},clone:function(M,z){return M=M??!1,z=z??M,this.map(function(){return w.clone(this,M,z)})},html:function(M){return it(this,function(z){var Y=this[0]||{},K=0,ce=this.length;if(z===void 0&&Y.nodeType===1)return Y.innerHTML;if(typeof z=="string"&&!yi.test(z)&&!_n[(Pt.exec(z)||["",""])[1].toLowerCase()]){z=w.htmlPrefilter(z);try{for(;K<ce;K++)Y=this[K]||{},Y.nodeType===1&&(w.cleanData(un(Y,!1)),Y.innerHTML=z);Y=0}catch{}}Y&&this.empty().append(z)},null,M,arguments.length)},replaceWith:function(){var M=[];return or(this,arguments,function(z){var Y=this.parentNode;w.inArray(this,M)<0&&(w.cleanData(un(this)),Y&&Y.replaceChild(z,this))},M)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(M,z){w.fn[M]=function(Y){for(var K,ce=[],ae=w(Y),pe=ae.length-1,He=0;He<=pe;He++)K=He===pe?this:this.clone(!0),w(ae[He])[z](K),a.apply(ce,K.get());return this.pushStack(ce)}});var Xe=new RegExp("^("+fe+")(?!px)[a-z%]+$","i"),Et=/^--/,pt=function(M){var z=M.ownerDocument.defaultView;return(!z||!z.opener)&&(z=t),z.getComputedStyle(M)},Yt=function(M,z,Y){var K,ce,ae={};for(ce in z)ae[ce]=M.style[ce],M.style[ce]=z[ce];K=Y.call(M);for(ce in z)M.style[ce]=ae[ce];return K},An=new RegExp(me.join("|"),"i");(function(){function M(){if(et){Ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",et.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Oe.appendChild(Ie).appendChild(et);var vt=t.getComputedStyle(et);Y=vt.top!=="1%",He=z(vt.marginLeft)===12,et.style.right="60%",ae=z(vt.right)===36,K=z(vt.width)===36,et.style.position="absolute",ce=z(et.offsetWidth/3)===12,Oe.removeChild(Ie),et=null}}function z(vt){return Math.round(parseFloat(vt))}var Y,K,ce,ae,pe,He,Ie=y.createElement("div"),et=y.createElement("div");et.style&&(et.style.backgroundClip="content-box",et.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle=et.style.backgroundClip==="content-box",w.extend(h,{boxSizingReliable:function(){return M(),K},pixelBoxStyles:function(){return M(),ae},pixelPosition:function(){return M(),Y},reliableMarginLeft:function(){return M(),He},scrollboxSize:function(){return M(),ce},reliableTrDimensions:function(){var vt,oe,de,ze;return pe==null&&(vt=y.createElement("table"),oe=y.createElement("tr"),de=y.createElement("div"),vt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",oe.style.cssText="box-sizing:content-box;border:1px solid",oe.style.height="1px",de.style.height="9px",de.style.display="block",Oe.appendChild(vt).appendChild(oe).appendChild(de),ze=t.getComputedStyle(oe),pe=parseInt(ze.height,10)+parseInt(ze.borderTopWidth,10)+parseInt(ze.borderBottomWidth,10)===oe.offsetHeight,Oe.removeChild(vt)),pe}}))})();function Rn(M,z,Y){var K,ce,ae,pe,He=Et.test(z),Ie=M.style;return Y=Y||pt(M),Y&&(pe=Y.getPropertyValue(z)||Y[z],He&&pe&&(pe=pe.replace(k,"$1")||void 0),pe===""&&!Me(M)&&(pe=w.style(M,z)),!h.pixelBoxStyles()&&Xe.test(pe)&&An.test(z)&&(K=Ie.width,ce=Ie.minWidth,ae=Ie.maxWidth,Ie.minWidth=Ie.maxWidth=Ie.width=pe,pe=Y.width,Ie.width=K,Ie.minWidth=ce,Ie.maxWidth=ae)),pe!==void 0?pe+"":pe}function Ht(M,z){return{get:function(){if(M()){delete this.get;return}return(this.get=z).apply(this,arguments)}}}var mt=["Webkit","Moz","ms"],jn=y.createElement("div").style,Vn={};function an(M){for(var z=M[0].toUpperCase()+M.slice(1),Y=mt.length;Y--;)if(M=mt[Y]+z,M in jn)return M}function gn(M){var z=w.cssProps[M]||Vn[M];return z||(M in jn?M:Vn[M]=an(M)||M)}var Qr=/^(none|table(?!-c[ea]).+)/,Wr={position:"absolute",visibility:"hidden",display:"block"},Ln={letterSpacing:"0",fontWeight:"400"};function dt(M,z,Y){var K=he.exec(z);return K?Math.max(0,K[2]-(Y||0))+(K[3]||"px"):z}function Nt(M,z,Y,K,ce,ae){var pe=z==="width"?1:0,He=0,Ie=0,et=0;if(Y===(K?"border":"content"))return 0;for(;pe<4;pe+=2)Y==="margin"&&(et+=w.css(M,Y+me[pe],!0,ce)),K?(Y==="content"&&(Ie-=w.css(M,"padding"+me[pe],!0,ce)),Y!=="margin"&&(Ie-=w.css(M,"border"+me[pe]+"Width",!0,ce))):(Ie+=w.css(M,"padding"+me[pe],!0,ce),Y!=="padding"?Ie+=w.css(M,"border"+me[pe]+"Width",!0,ce):He+=w.css(M,"border"+me[pe]+"Width",!0,ce));return!K&&ae>=0&&(Ie+=Math.max(0,Math.ceil(M["offset"+z[0].toUpperCase()+z.slice(1)]-ae-Ie-He-.5))||0),Ie+et}function Rr(M,z,Y){var K=pt(M),ce=!h.boxSizingReliable()||Y,ae=ce&&w.css(M,"boxSizing",!1,K)==="border-box",pe=ae,He=Rn(M,z,K),Ie="offset"+z[0].toUpperCase()+z.slice(1);if(Xe.test(He)){if(!Y)return He;He="auto"}return(!h.boxSizingReliable()&&ae||!h.reliableTrDimensions()&&R(M,"tr")||He==="auto"||!parseFloat(He)&&w.css(M,"display",!1,K)==="inline")&&M.getClientRects().length&&(ae=w.css(M,"boxSizing",!1,K)==="border-box",pe=Ie in M,pe&&(He=M[Ie])),He=parseFloat(He)||0,He+Nt(M,z,Y||(ae?"border":"content"),pe,K,He)+"px"}w.extend({cssHooks:{opacity:{get:function(M,z){if(z){var Y=Rn(M,"opacity");return Y===""?"1":Y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(M,z,Y,K){if(!(!M||M.nodeType===3||M.nodeType===8||!M.style)){var ce,ae,pe,He=Re(z),Ie=Et.test(z),et=M.style;if(Ie||(z=gn(He)),pe=w.cssHooks[z]||w.cssHooks[He],Y!==void 0){if(ae=typeof Y,ae==="string"&&(ce=he.exec(Y))&&ce[1]&&(Y=Qe(M,z,ce),ae="number"),Y==null||Y!==Y)return;ae==="number"&&!Ie&&(Y+=ce&&ce[3]||(w.cssNumber[He]?"":"px")),!h.clearCloneStyle&&Y===""&&z.indexOf("background")===0&&(et[z]="inherit"),(!pe||!("set"in pe)||(Y=pe.set(M,Y,K))!==void 0)&&(Ie?et.setProperty(z,Y):et[z]=Y)}else return pe&&"get"in pe&&(ce=pe.get(M,!1,K))!==void 0?ce:et[z]}},css:function(M,z,Y,K){var ce,ae,pe,He=Re(z),Ie=Et.test(z);return Ie||(z=gn(He)),pe=w.cssHooks[z]||w.cssHooks[He],pe&&"get"in pe&&(ce=pe.get(M,!0,Y)),ce===void 0&&(ce=Rn(M,z,K)),ce==="normal"&&z in Ln&&(ce=Ln[z]),Y===""||Y?(ae=parseFloat(ce),Y===!0||isFinite(ae)?ae||0:ce):ce}}),w.each(["height","width"],function(M,z){w.cssHooks[z]={get:function(Y,K,ce){if(K)return Qr.test(w.css(Y,"display"))&&(!Y.getClientRects().length||!Y.getBoundingClientRect().width)?Yt(Y,Wr,function(){return Rr(Y,z,ce)}):Rr(Y,z,ce)},set:function(Y,K,ce){var ae,pe=pt(Y),He=!h.scrollboxSize()&&pe.position==="absolute",Ie=He||ce,et=Ie&&w.css(Y,"boxSizing",!1,pe)==="border-box",vt=ce?Nt(Y,z,ce,et,pe):0;return et&&He&&(vt-=Math.ceil(Y["offset"+z[0].toUpperCase()+z.slice(1)]-parseFloat(pe[z])-Nt(Y,z,"border",!1,pe)-.5)),vt&&(ae=he.exec(K))&&(ae[3]||"px")!=="px"&&(Y.style[z]=K,K=w.css(Y,z)),dt(Y,K,vt)}}}),w.cssHooks.marginLeft=Ht(h.reliableMarginLeft,function(M,z){if(z)return(parseFloat(Rn(M,"marginLeft"))||M.getBoundingClientRect().left-Yt(M,{marginLeft:0},function(){return M.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(M,z){w.cssHooks[M+z]={expand:function(Y){for(var K=0,ce={},ae=typeof Y=="string"?Y.split(" "):[Y];K<4;K++)ce[M+me[K]+z]=ae[K]||ae[K-2]||ae[0];return ce}},M!=="margin"&&(w.cssHooks[M+z].set=dt)}),w.fn.extend({css:function(M,z){return it(this,function(Y,K,ce){var ae,pe,He={},Ie=0;if(Array.isArray(K)){for(ae=pt(Y),pe=K.length;Ie<pe;Ie++)He[K[Ie]]=w.css(Y,K[Ie],!1,ae);return He}return ce!==void 0?w.style(Y,K,ce):w.css(Y,K)},M,z,arguments.length>1)}});function fr(M,z,Y,K,ce){return new fr.prototype.init(M,z,Y,K,ce)}w.Tween=fr,fr.prototype={constructor:fr,init:function(M,z,Y,K,ce,ae){this.elem=M,this.prop=Y,this.easing=ce||w.easing._default,this.options=z,this.start=this.now=this.cur(),this.end=K,this.unit=ae||(w.cssNumber[Y]?"":"px")},cur:function(){var M=fr.propHooks[this.prop];return M&&M.get?M.get(this):fr.propHooks._default.get(this)},run:function(M){var z,Y=fr.propHooks[this.prop];return this.options.duration?this.pos=z=w.easing[this.easing](M,this.options.duration*M,0,1,this.options.duration):this.pos=z=M,this.now=(this.end-this.start)*z+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Y&&Y.set?Y.set(this):fr.propHooks._default.set(this),this}},fr.prototype.init.prototype=fr.prototype,fr.propHooks={_default:{get:function(M){var z;return M.elem.nodeType!==1||M.elem[M.prop]!=null&&M.elem.style[M.prop]==null?M.elem[M.prop]:(z=w.css(M.elem,M.prop,""),!z||z==="auto"?0:z)},set:function(M){w.fx.step[M.prop]?w.fx.step[M.prop](M):M.elem.nodeType===1&&(w.cssHooks[M.prop]||M.elem.style[gn(M.prop)]!=null)?w.style(M.elem,M.prop,M.now+M.unit):M.elem[M.prop]=M.now}}},fr.propHooks.scrollTop=fr.propHooks.scrollLeft={set:function(M){M.elem.nodeType&&M.elem.parentNode&&(M.elem[M.prop]=M.now)}},w.easing={linear:function(M){return M},swing:function(M){return .5-Math.cos(M*Math.PI)/2},_default:"swing"},w.fx=fr.prototype.init,w.fx.step={};var Er,Ir,ri=/^(?:toggle|show|hide)$/,xn=/queueHooks$/;function Bi(){Ir&&(y.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Bi):t.setTimeout(Bi,w.fx.interval),w.fx.tick())}function Io(){return t.setTimeout(function(){Er=void 0}),Er=Date.now()}function no(M,z){var Y,K=0,ce={height:M};for(z=z?1:0;K<4;K+=2-z)Y=me[K],ce["margin"+Y]=ce["padding"+Y]=M;return z&&(ce.opacity=ce.width=M),ce}function Us(M,z,Y){for(var K,ce=(mo.tweeners[z]||[]).concat(mo.tweeners["*"]),ae=0,pe=ce.length;ae<pe;ae++)if(K=ce[ae].call(Y,z,M))return K}function No(M,z,Y){var K,ce,ae,pe,He,Ie,et,vt,oe="width"in z||"height"in z,de=this,ze={},gt=M.style,qt=M.nodeType&&We(M),Ft=re.get(M,"fxshow");Y.queue||(pe=w._queueHooks(M,"fx"),pe.unqueued==null&&(pe.unqueued=0,He=pe.empty.fire,pe.empty.fire=function(){pe.unqueued||He()}),pe.unqueued++,de.always(function(){de.always(function(){pe.unqueued--,w.queue(M,"fx").length||pe.empty.fire()})}));for(K in z)if(ce=z[K],ri.test(ce)){if(delete z[K],ae=ae||ce==="toggle",ce===(qt?"hide":"show"))if(ce==="show"&&Ft&&Ft[K]!==void 0)qt=!0;else continue;ze[K]=Ft&&Ft[K]||w.style(M,K)}if(Ie=!w.isEmptyObject(z),!(!Ie&&w.isEmptyObject(ze))){oe&&M.nodeType===1&&(Y.overflow=[gt.overflow,gt.overflowX,gt.overflowY],et=Ft&&Ft.display,et==null&&(et=re.get(M,"display")),vt=w.css(M,"display"),vt==="none"&&(et?vt=et:(Ut([M],!0),et=M.style.display||et,vt=w.css(M,"display"),Ut([M]))),(vt==="inline"||vt==="inline-block"&&et!=null)&&w.css(M,"float")==="none"&&(Ie||(de.done(function(){gt.display=et}),et==null&&(vt=gt.display,et=vt==="none"?"":vt)),gt.display="inline-block")),Y.overflow&&(gt.overflow="hidden",de.always(function(){gt.overflow=Y.overflow[0],gt.overflowX=Y.overflow[1],gt.overflowY=Y.overflow[2]})),Ie=!1;for(K in ze)Ie||(Ft?"hidden"in Ft&&(qt=Ft.hidden):Ft=re.access(M,"fxshow",{display:et}),ae&&(Ft.hidden=!qt),qt&&Ut([M],!0),de.done(function(){qt||Ut([M]),re.remove(M,"fxshow");for(K in ze)w.style(M,K,ze[K])})),Ie=Us(qt?Ft[K]:0,K,de),K in Ft||(Ft[K]=Ie.start,qt&&(Ie.end=Ie.start,Ie.start=0))}}function Po(M,z){var Y,K,ce,ae,pe;for(Y in M)if(K=Re(Y),ce=z[K],ae=M[Y],Array.isArray(ae)&&(ce=ae[1],ae=M[Y]=ae[0]),Y!==K&&(M[K]=ae,delete M[Y]),pe=w.cssHooks[K],pe&&"expand"in pe){ae=pe.expand(ae),delete M[K];for(Y in ae)Y in M||(M[Y]=ae[Y],z[Y]=ce)}else z[K]=ce}function mo(M,z,Y){var K,ce,ae=0,pe=mo.prefilters.length,He=w.Deferred().always(function(){delete Ie.elem}),Ie=function(){if(ce)return!1;for(var oe=Er||Io(),de=Math.max(0,et.startTime+et.duration-oe),ze=de/et.duration||0,gt=1-ze,qt=0,Ft=et.tweens.length;qt<Ft;qt++)et.tweens[qt].run(gt);return He.notifyWith(M,[et,gt,de]),gt<1&&Ft?de:(Ft||He.notifyWith(M,[et,1,0]),He.resolveWith(M,[et]),!1)},et=He.promise({elem:M,props:w.extend({},z),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},Y),originalProperties:z,originalOptions:Y,startTime:Er||Io(),duration:Y.duration,tweens:[],createTween:function(oe,de){var ze=w.Tween(M,et.opts,oe,de,et.opts.specialEasing[oe]||et.opts.easing);return et.tweens.push(ze),ze},stop:function(oe){var de=0,ze=oe?et.tweens.length:0;if(ce)return this;for(ce=!0;de<ze;de++)et.tweens[de].run(1);return oe?(He.notifyWith(M,[et,1,0]),He.resolveWith(M,[et,oe])):He.rejectWith(M,[et,oe]),this}}),vt=et.props;for(Po(vt,et.opts.specialEasing);ae<pe;ae++)if(K=mo.prefilters[ae].call(et,M,vt,et.opts),K)return g(K.stop)&&(w._queueHooks(et.elem,et.opts.queue).stop=K.stop.bind(K)),K;return w.map(vt,Us,et),g(et.opts.start)&&et.opts.start.call(M,et),et.progress(et.opts.progress).done(et.opts.done,et.opts.complete).fail(et.opts.fail).always(et.opts.always),w.fx.timer(w.extend(Ie,{elem:M,anim:et,queue:et.opts.queue})),et}w.Animation=w.extend(mo,{tweeners:{"*":[function(M,z){var Y=this.createTween(M,z);return Qe(Y.elem,M,he.exec(z),Y),Y}]},tweener:function(M,z){g(M)?(z=M,M=["*"]):M=M.match(Ee);for(var Y,K=0,ce=M.length;K<ce;K++)Y=M[K],mo.tweeners[Y]=mo.tweeners[Y]||[],mo.tweeners[Y].unshift(z)},prefilters:[No],prefilter:function(M,z){z?mo.prefilters.unshift(M):mo.prefilters.push(M)}}),w.speed=function(M,z,Y){var K=M&&typeof M=="object"?w.extend({},M):{complete:Y||!Y&&z||g(M)&&M,duration:M,easing:Y&&z||z&&!g(z)&&z};return w.fx.off?K.duration=0:typeof K.duration!="number"&&(K.duration in w.fx.speeds?K.duration=w.fx.speeds[K.duration]:K.duration=w.fx.speeds._default),(K.queue==null||K.queue===!0)&&(K.queue="fx"),K.old=K.complete,K.complete=function(){g(K.old)&&K.old.call(this),K.queue&&w.dequeue(this,K.queue)},K},w.fn.extend({fadeTo:function(M,z,Y,K){return this.filter(We).css("opacity",0).show().end().animate({opacity:z},M,Y,K)},animate:function(M,z,Y,K){var ce=w.isEmptyObject(M),ae=w.speed(z,Y,K),pe=function(){var He=mo(this,w.extend({},M),ae);(ce||re.get(this,"finish"))&&He.stop(!0)};return pe.finish=pe,ce||ae.queue===!1?this.each(pe):this.queue(ae.queue,pe)},stop:function(M,z,Y){var K=function(ce){var ae=ce.stop;delete ce.stop,ae(Y)};return typeof M!="string"&&(Y=z,z=M,M=void 0),z&&this.queue(M||"fx",[]),this.each(function(){var ce=!0,ae=M!=null&&M+"queueHooks",pe=w.timers,He=re.get(this);if(ae)He[ae]&&He[ae].stop&&K(He[ae]);else for(ae in He)He[ae]&&He[ae].stop&&xn.test(ae)&&K(He[ae]);for(ae=pe.length;ae--;)pe[ae].elem===this&&(M==null||pe[ae].queue===M)&&(pe[ae].anim.stop(Y),ce=!1,pe.splice(ae,1));(ce||!Y)&&w.dequeue(this,M)})},finish:function(M){return M!==!1&&(M=M||"fx"),this.each(function(){var z,Y=re.get(this),K=Y[M+"queue"],ce=Y[M+"queueHooks"],ae=w.timers,pe=K?K.length:0;for(Y.finish=!0,w.queue(this,M,[]),ce&&ce.stop&&ce.stop.call(this,!0),z=ae.length;z--;)ae[z].elem===this&&ae[z].queue===M&&(ae[z].anim.stop(!0),ae.splice(z,1));for(z=0;z<pe;z++)K[z]&&K[z].finish&&K[z].finish.call(this);delete Y.finish})}}),w.each(["toggle","show","hide"],function(M,z){var Y=w.fn[z];w.fn[z]=function(K,ce,ae){return K==null||typeof K=="boolean"?Y.apply(this,arguments):this.animate(no(z,!0),K,ce,ae)}}),w.each({slideDown:no("show"),slideUp:no("hide"),slideToggle:no("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(M,z){w.fn[M]=function(Y,K,ce){return this.animate(z,Y,K,ce)}}),w.timers=[],w.fx.tick=function(){var M,z=0,Y=w.timers;for(Er=Date.now();z<Y.length;z++)M=Y[z],!M()&&Y[z]===M&&Y.splice(z--,1);Y.length||w.fx.stop(),Er=void 0},w.fx.timer=function(M){w.timers.push(M),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Ir||(Ir=!0,Bi())},w.fx.stop=function(){Ir=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(M,z){return M=w.fx&&w.fx.speeds[M]||M,z=z||"fx",this.queue(z,function(Y,K){var ce=t.setTimeout(Y,M);K.stop=function(){t.clearTimeout(ce)}})},function(){var M=y.createElement("input"),z=y.createElement("select"),Y=z.appendChild(y.createElement("option"));M.type="checkbox",h.checkOn=M.value!=="",h.optSelected=Y.selected,M=y.createElement("input"),M.value="t",M.type="radio",h.radioValue=M.value==="t"}();var es,ts=w.expr.attrHandle;w.fn.extend({attr:function(M,z){return it(this,w.attr,M,z,arguments.length>1)},removeAttr:function(M){return this.each(function(){w.removeAttr(this,M)})}}),w.extend({attr:function(M,z,Y){var K,ce,ae=M.nodeType;if(!(ae===3||ae===8||ae===2)){if(typeof M.getAttribute>"u")return w.prop(M,z,Y);if((ae!==1||!w.isXMLDoc(M))&&(ce=w.attrHooks[z.toLowerCase()]||(w.expr.match.bool.test(z)?es:void 0)),Y!==void 0){if(Y===null){w.removeAttr(M,z);return}return ce&&"set"in ce&&(K=ce.set(M,Y,z))!==void 0?K:(M.setAttribute(z,Y+""),Y)}return ce&&"get"in ce&&(K=ce.get(M,z))!==null?K:(K=w.find.attr(M,z),K??void 0)}},attrHooks:{type:{set:function(M,z){if(!h.radioValue&&z==="radio"&&R(M,"input")){var Y=M.value;return M.setAttribute("type",z),Y&&(M.value=Y),z}}}},removeAttr:function(M,z){var Y,K=0,ce=z&&z.match(Ee);if(ce&&M.nodeType===1)for(;Y=ce[K++];)M.removeAttribute(Y)}}),es={set:function(M,z,Y){return z===!1?w.removeAttr(M,Y):M.setAttribute(Y,Y),Y}},w.each(w.expr.match.bool.source.match(/\w+/g),function(M,z){var Y=ts[z]||w.find.attr;ts[z]=function(K,ce,ae){var pe,He,Ie=ce.toLowerCase();return ae||(He=ts[Ie],ts[Ie]=pe,pe=Y(K,ce,ae)!=null?Ie:null,ts[Ie]=He),pe}});var ws=/^(?:input|select|textarea|button)$/i,ns=/^(?:a|area)$/i;w.fn.extend({prop:function(M,z){return it(this,w.prop,M,z,arguments.length>1)},removeProp:function(M){return this.each(function(){delete this[w.propFix[M]||M]})}}),w.extend({prop:function(M,z,Y){var K,ce,ae=M.nodeType;if(!(ae===3||ae===8||ae===2))return(ae!==1||!w.isXMLDoc(M))&&(z=w.propFix[z]||z,ce=w.propHooks[z]),Y!==void 0?ce&&"set"in ce&&(K=ce.set(M,Y,z))!==void 0?K:M[z]=Y:ce&&"get"in ce&&(K=ce.get(M,z))!==null?K:M[z]},propHooks:{tabIndex:{get:function(M){var z=w.find.attr(M,"tabindex");return z?parseInt(z,10):ws.test(M.nodeName)||ns.test(M.nodeName)&&M.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(w.propHooks.selected={get:function(M){var z=M.parentNode;return z&&z.parentNode&&z.parentNode.selectedIndex,null},set:function(M){var z=M.parentNode;z&&(z.selectedIndex,z.parentNode&&z.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function _s(M){var z=M.match(Ee)||[];return z.join(" ")}function Bo(M){return M.getAttribute&&M.getAttribute("class")||""}function rs(M){return Array.isArray(M)?M:typeof M=="string"?M.match(Ee)||[]:[]}w.fn.extend({addClass:function(M){var z,Y,K,ce,ae,pe;return g(M)?this.each(function(He){w(this).addClass(M.call(this,He,Bo(this)))}):(z=rs(M),z.length?this.each(function(){if(K=Bo(this),Y=this.nodeType===1&&" "+_s(K)+" ",Y){for(ae=0;ae<z.length;ae++)ce=z[ae],Y.indexOf(" "+ce+" ")<0&&(Y+=ce+" ");pe=_s(Y),K!==pe&&this.setAttribute("class",pe)}}):this)},removeClass:function(M){var z,Y,K,ce,ae,pe;return g(M)?this.each(function(He){w(this).removeClass(M.call(this,He,Bo(this)))}):arguments.length?(z=rs(M),z.length?this.each(function(){if(K=Bo(this),Y=this.nodeType===1&&" "+_s(K)+" ",Y){for(ae=0;ae<z.length;ae++)for(ce=z[ae];Y.indexOf(" "+ce+" ")>-1;)Y=Y.replace(" "+ce+" "," ");pe=_s(Y),K!==pe&&this.setAttribute("class",pe)}}):this):this.attr("class","")},toggleClass:function(M,z){var Y,K,ce,ae,pe=typeof M,He=pe==="string"||Array.isArray(M);return g(M)?this.each(function(Ie){w(this).toggleClass(M.call(this,Ie,Bo(this),z),z)}):typeof z=="boolean"&&He?z?this.addClass(M):this.removeClass(M):(Y=rs(M),this.each(function(){if(He)for(ae=w(this),ce=0;ce<Y.length;ce++)K=Y[ce],ae.hasClass(K)?ae.removeClass(K):ae.addClass(K);else(M===void 0||pe==="boolean")&&(K=Bo(this),K&&re.set(this,"__className__",K),this.setAttribute&&this.setAttribute("class",K||M===!1?"":re.get(this,"__className__")||""))}))},hasClass:function(M){var z,Y,K=0;for(z=" "+M+" ";Y=this[K++];)if(Y.nodeType===1&&(" "+_s(Bo(Y))+" ").indexOf(z)>-1)return!0;return!1}});var Es=/\r/g;w.fn.extend({val:function(M){var z,Y,K,ce=this[0];return arguments.length?(K=g(M),this.each(function(ae){var pe;this.nodeType===1&&(K?pe=M.call(this,ae,w(this).val()):pe=M,pe==null?pe="":typeof pe=="number"?pe+="":Array.isArray(pe)&&(pe=w.map(pe,function(He){return He==null?"":He+""})),z=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],(!z||!("set"in z)||z.set(this,pe,"value")===void 0)&&(this.value=pe))})):ce?(z=w.valHooks[ce.type]||w.valHooks[ce.nodeName.toLowerCase()],z&&"get"in z&&(Y=z.get(ce,"value"))!==void 0?Y:(Y=ce.value,typeof Y=="string"?Y.replace(Es,""):Y??"")):void 0}}),w.extend({valHooks:{option:{get:function(M){var z=w.find.attr(M,"value");return z??_s(w.text(M))}},select:{get:function(M){var z,Y,K,ce=M.options,ae=M.selectedIndex,pe=M.type==="select-one",He=pe?null:[],Ie=pe?ae+1:ce.length;for(ae<0?K=Ie:K=pe?ae:0;K<Ie;K++)if(Y=ce[K],(Y.selected||K===ae)&&!Y.disabled&&(!Y.parentNode.disabled||!R(Y.parentNode,"optgroup"))){if(z=w(Y).val(),pe)return z;He.push(z)}return He},set:function(M,z){for(var Y,K,ce=M.options,ae=w.makeArray(z),pe=ce.length;pe--;)K=ce[pe],(K.selected=w.inArray(w.valHooks.option.get(K),ae)>-1)&&(Y=!0);return Y||(M.selectedIndex=-1),ae}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(M,z){if(Array.isArray(z))return M.checked=w.inArray(w(M).val(),z)>-1}},h.checkOn||(w.valHooks[this].get=function(M){return M.getAttribute("value")===null?"on":M.value})});var Vr=t.location,Co={guid:Date.now()},hs=/\?/;w.parseXML=function(M){var z,Y;if(!M||typeof M!="string")return null;try{z=new t.DOMParser().parseFromString(M,"text/xml")}catch{}return Y=z&&z.getElementsByTagName("parsererror")[0],(!z||Y)&&w.error("Invalid XML: "+(Y?w.map(Y.childNodes,function(K){return K.textContent}).join(`
`):M)),z};var da=/^(?:focusinfocus|focusoutblur)$/,is=function(M){M.stopPropagation()};w.extend(w.event,{trigger:function(M,z,Y,K){var ce,ae,pe,He,Ie,et,vt,oe,de=[Y||y],ze=c.call(M,"type")?M.type:M,gt=c.call(M,"namespace")?M.namespace.split("."):[];if(ae=oe=pe=Y=Y||y,!(Y.nodeType===3||Y.nodeType===8)&&!da.test(ze+w.event.triggered)&&(ze.indexOf(".")>-1&&(gt=ze.split("."),ze=gt.shift(),gt.sort()),Ie=ze.indexOf(":")<0&&"on"+ze,M=M[w.expando]?M:new w.Event(ze,typeof M=="object"&&M),M.isTrigger=K?2:3,M.namespace=gt.join("."),M.rnamespace=M.namespace?new RegExp("(^|\\.)"+gt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,M.result=void 0,M.target||(M.target=Y),z=z==null?[M]:w.makeArray(z,[M]),vt=w.event.special[ze]||{},!(!K&&vt.trigger&&vt.trigger.apply(Y,z)===!1))){if(!K&&!vt.noBubble&&!m(Y)){for(He=vt.delegateType||ze,da.test(He+ze)||(ae=ae.parentNode);ae;ae=ae.parentNode)de.push(ae),pe=ae;pe===(Y.ownerDocument||y)&&de.push(pe.defaultView||pe.parentWindow||t)}for(ce=0;(ae=de[ce++])&&!M.isPropagationStopped();)oe=ae,M.type=ce>1?He:vt.bindType||ze,et=(re.get(ae,"events")||Object.create(null))[M.type]&&re.get(ae,"handle"),et&&et.apply(ae,z),et=Ie&&ae[Ie],et&&et.apply&&U(ae)&&(M.result=et.apply(ae,z),M.result===!1&&M.preventDefault());return M.type=ze,!K&&!M.isDefaultPrevented()&&(!vt._default||vt._default.apply(de.pop(),z)===!1)&&U(Y)&&Ie&&g(Y[ze])&&!m(Y)&&(pe=Y[Ie],pe&&(Y[Ie]=null),w.event.triggered=ze,M.isPropagationStopped()&&oe.addEventListener(ze,is),Y[ze](),M.isPropagationStopped()&&oe.removeEventListener(ze,is),w.event.triggered=void 0,pe&&(Y[Ie]=pe)),M.result}},simulate:function(M,z,Y){var K=w.extend(new w.Event,Y,{type:M,isSimulated:!0});w.event.trigger(K,null,z)}}),w.fn.extend({trigger:function(M,z){return this.each(function(){w.event.trigger(M,z,this)})},triggerHandler:function(M,z){var Y=this[0];if(Y)return w.event.trigger(M,z,Y,!0)}});var ha=/\[\]$/,js=/\r?\n/g,Go=/^(?:submit|button|image|reset|file)$/i,Wi=/^(?:input|select|textarea|keygen)/i;function zo(M,z,Y,K){var ce;if(Array.isArray(z))w.each(z,function(ae,pe){Y||ha.test(M)?K(M,pe):zo(M+"["+(typeof pe=="object"&&pe!=null?ae:"")+"]",pe,Y,K)});else if(!Y&&_(z)==="object")for(ce in z)zo(M+"["+ce+"]",z[ce],Y,K);else K(M,z)}w.param=function(M,z){var Y,K=[],ce=function(ae,pe){var He=g(pe)?pe():pe;K[K.length]=encodeURIComponent(ae)+"="+encodeURIComponent(He??"")};if(M==null)return"";if(Array.isArray(M)||M.jquery&&!w.isPlainObject(M))w.each(M,function(){ce(this.name,this.value)});else for(Y in M)zo(Y,M[Y],z,ce);return K.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var M=w.prop(this,"elements");return M?w.makeArray(M):this}).filter(function(){var M=this.type;return this.name&&!w(this).is(":disabled")&&Wi.test(this.nodeName)&&!Go.test(M)&&(this.checked||!Kt.test(M))}).map(function(M,z){var Y=w(this).val();return Y==null?null:Array.isArray(Y)?w.map(Y,function(K){return{name:z.name,value:K.replace(js,`\r
`)}}):{name:z.name,value:Y.replace(js,`\r
`)}}).get()}});var ps=/%20/g,os=/#.*$/,Hs=/([?&])_=[^&]*/,Ia=/^(.*?):[ \t]*([^\r\n]*)$/mg,vo=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,pa=/^\/\//,ga={},Uo={},Le="*/".concat("*"),Pe=y.createElement("a");Pe.href=Vr.href;function ke(M){return function(z,Y){typeof z!="string"&&(Y=z,z="*");var K,ce=0,ae=z.toLowerCase().match(Ee)||[];if(g(Y))for(;K=ae[ce++];)K[0]==="+"?(K=K.slice(1)||"*",(M[K]=M[K]||[]).unshift(Y)):(M[K]=M[K]||[]).push(Y)}}function rt(M,z,Y,K){var ce={},ae=M===Uo;function pe(He){var Ie;return ce[He]=!0,w.each(M[He]||[],function(et,vt){var oe=vt(z,Y,K);if(typeof oe=="string"&&!ae&&!ce[oe])return z.dataTypes.unshift(oe),pe(oe),!1;if(ae)return!(Ie=oe)}),Ie}return pe(z.dataTypes[0])||!ce["*"]&&pe("*")}function Mt(M,z){var Y,K,ce=w.ajaxSettings.flatOptions||{};for(Y in z)z[Y]!==void 0&&((ce[Y]?M:K||(K={}))[Y]=z[Y]);return K&&w.extend(!0,M,K),M}function dn(M,z,Y){for(var K,ce,ae,pe,He=M.contents,Ie=M.dataTypes;Ie[0]==="*";)Ie.shift(),K===void 0&&(K=M.mimeType||z.getResponseHeader("Content-Type"));if(K){for(ce in He)if(He[ce]&&He[ce].test(K)){Ie.unshift(ce);break}}if(Ie[0]in Y)ae=Ie[0];else{for(ce in Y){if(!Ie[0]||M.converters[ce+" "+Ie[0]]){ae=ce;break}pe||(pe=ce)}ae=ae||pe}if(ae)return ae!==Ie[0]&&Ie.unshift(ae),Y[ae]}function sr(M,z,Y,K){var ce,ae,pe,He,Ie,et={},vt=M.dataTypes.slice();if(vt[1])for(pe in M.converters)et[pe.toLowerCase()]=M.converters[pe];for(ae=vt.shift();ae;)if(M.responseFields[ae]&&(Y[M.responseFields[ae]]=z),!Ie&&K&&M.dataFilter&&(z=M.dataFilter(z,M.dataType)),Ie=ae,ae=vt.shift(),ae){if(ae==="*")ae=Ie;else if(Ie!=="*"&&Ie!==ae){if(pe=et[Ie+" "+ae]||et["* "+ae],!pe){for(ce in et)if(He=ce.split(" "),He[1]===ae&&(pe=et[Ie+" "+He[0]]||et["* "+He[0]],pe)){pe===!0?pe=et[ce]:et[ce]!==!0&&(ae=He[0],vt.unshift(He[1]));break}}if(pe!==!0)if(pe&&M.throws)z=pe(z);else try{z=pe(z)}catch(oe){return{state:"parsererror",error:pe?oe:"No conversion from "+Ie+" to "+ae}}}}return{state:"success",data:z}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vr.href,type:"GET",isLocal:vo.test(Vr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Le,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(M,z){return z?Mt(Mt(M,w.ajaxSettings),z):Mt(w.ajaxSettings,M)},ajaxPrefilter:ke(ga),ajaxTransport:ke(Uo),ajax:function(M,z){typeof M=="object"&&(z=M,M=void 0),z=z||{};var Y,K,ce,ae,pe,He,Ie,et,vt,oe,de=w.ajaxSetup({},z),ze=de.context||de,gt=de.context&&(ze.nodeType||ze.jquery)?w(ze):w.event,qt=w.Deferred(),Ft=w.Callbacks("once memory"),Sn=de.statusCode||{},er={},yr={},ii="canceled",Pn={readyState:0,getResponseHeader:function(Dn){var Ar;if(Ie){if(!ae)for(ae={};Ar=Ia.exec(ce);)ae[Ar[1].toLowerCase()+" "]=(ae[Ar[1].toLowerCase()+" "]||[]).concat(Ar[2]);Ar=ae[Dn.toLowerCase()+" "]}return Ar==null?null:Ar.join(", ")},getAllResponseHeaders:function(){return Ie?ce:null},setRequestHeader:function(Dn,Ar){return Ie==null&&(Dn=yr[Dn.toLowerCase()]=yr[Dn.toLowerCase()]||Dn,er[Dn]=Ar),this},overrideMimeType:function(Dn){return Ie==null&&(de.mimeType=Dn),this},statusCode:function(Dn){var Ar;if(Dn)if(Ie)Pn.always(Dn[Pn.status]);else for(Ar in Dn)Sn[Ar]=[Sn[Ar],Dn[Ar]];return this},abort:function(Dn){var Ar=Dn||ii;return Y&&Y.abort(Ar),fo(0,Ar),this}};if(qt.promise(Pn),de.url=((M||de.url||Vr.href)+"").replace(pa,Vr.protocol+"//"),de.type=z.method||z.type||de.method||de.type,de.dataTypes=(de.dataType||"*").toLowerCase().match(Ee)||[""],de.crossDomain==null){He=y.createElement("a");try{He.href=de.url,He.href=He.href,de.crossDomain=Pe.protocol+"//"+Pe.host!=He.protocol+"//"+He.host}catch{de.crossDomain=!0}}if(de.data&&de.processData&&typeof de.data!="string"&&(de.data=w.param(de.data,de.traditional)),rt(ga,de,z,Pn),Ie)return Pn;et=w.event&&de.global,et&&w.active++===0&&w.event.trigger("ajaxStart"),de.type=de.type.toUpperCase(),de.hasContent=!co.test(de.type),K=de.url.replace(os,""),de.hasContent?de.data&&de.processData&&(de.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(de.data=de.data.replace(ps,"+")):(oe=de.url.slice(K.length),de.data&&(de.processData||typeof de.data=="string")&&(K+=(hs.test(K)?"&":"?")+de.data,delete de.data),de.cache===!1&&(K=K.replace(Hs,"$1"),oe=(hs.test(K)?"&":"?")+"_="+Co.guid+++oe),de.url=K+oe),de.ifModified&&(w.lastModified[K]&&Pn.setRequestHeader("If-Modified-Since",w.lastModified[K]),w.etag[K]&&Pn.setRequestHeader("If-None-Match",w.etag[K])),(de.data&&de.hasContent&&de.contentType!==!1||z.contentType)&&Pn.setRequestHeader("Content-Type",de.contentType),Pn.setRequestHeader("Accept",de.dataTypes[0]&&de.accepts[de.dataTypes[0]]?de.accepts[de.dataTypes[0]]+(de.dataTypes[0]!=="*"?", "+Le+"; q=0.01":""):de.accepts["*"]);for(vt in de.headers)Pn.setRequestHeader(vt,de.headers[vt]);if(de.beforeSend&&(de.beforeSend.call(ze,Pn,de)===!1||Ie))return Pn.abort();if(ii="abort",Ft.add(de.complete),Pn.done(de.success),Pn.fail(de.error),Y=rt(Uo,de,z,Pn),!Y)fo(-1,"No Transport");else{if(Pn.readyState=1,et&&gt.trigger("ajaxSend",[Pn,de]),Ie)return Pn;de.async&&de.timeout>0&&(pe=t.setTimeout(function(){Pn.abort("timeout")},de.timeout));try{Ie=!1,Y.send(er,fo)}catch(Dn){if(Ie)throw Dn;fo(-1,Dn)}}function fo(Dn,Ar,Ye,Rt){var rn,vr,Fr,Hn,bi,gs=Ar;Ie||(Ie=!0,pe&&t.clearTimeout(pe),Y=void 0,ce=Rt||"",Pn.readyState=Dn>0?4:0,rn=Dn>=200&&Dn<300||Dn===304,Ye&&(Hn=dn(de,Pn,Ye)),!rn&&w.inArray("script",de.dataTypes)>-1&&w.inArray("json",de.dataTypes)<0&&(de.converters["text script"]=function(){}),Hn=sr(de,Hn,Pn,rn),rn?(de.ifModified&&(bi=Pn.getResponseHeader("Last-Modified"),bi&&(w.lastModified[K]=bi),bi=Pn.getResponseHeader("etag"),bi&&(w.etag[K]=bi)),Dn===204||de.type==="HEAD"?gs="nocontent":Dn===304?gs="notmodified":(gs=Hn.state,vr=Hn.data,Fr=Hn.error,rn=!Fr)):(Fr=gs,(Dn||!gs)&&(gs="error",Dn<0&&(Dn=0))),Pn.status=Dn,Pn.statusText=(Ar||gs)+"",rn?qt.resolveWith(ze,[vr,gs,Pn]):qt.rejectWith(ze,[Pn,gs,Fr]),Pn.statusCode(Sn),Sn=void 0,et&&gt.trigger(rn?"ajaxSuccess":"ajaxError",[Pn,de,rn?vr:Fr]),Ft.fireWith(ze,[Pn,gs]),et&&(gt.trigger("ajaxComplete",[Pn,de]),--w.active||w.event.trigger("ajaxStop")))}return Pn},getJSON:function(M,z,Y){return w.get(M,z,Y,"json")},getScript:function(M,z){return w.get(M,void 0,z,"script")}}),w.each(["get","post"],function(M,z){w[z]=function(Y,K,ce,ae){return g(K)&&(ae=ae||ce,ce=K,K=void 0),w.ajax(w.extend({url:Y,type:z,dataType:ae,data:K,success:ce},w.isPlainObject(Y)&&Y))}}),w.ajaxPrefilter(function(M){var z;for(z in M.headers)z.toLowerCase()==="content-type"&&(M.contentType=M.headers[z]||"")}),w._evalUrl=function(M,z,Y){return w.ajax({url:M,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(K){w.globalEval(K,z,Y)}})},w.fn.extend({wrapAll:function(M){var z;return this[0]&&(g(M)&&(M=M.call(this[0])),z=w(M,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&z.insertBefore(this[0]),z.map(function(){for(var Y=this;Y.firstElementChild;)Y=Y.firstElementChild;return Y}).append(this)),this},wrapInner:function(M){return g(M)?this.each(function(z){w(this).wrapInner(M.call(this,z))}):this.each(function(){var z=w(this),Y=z.contents();Y.length?Y.wrapAll(M):z.append(M)})},wrap:function(M){var z=g(M);return this.each(function(Y){w(this).wrapAll(z?M.call(this,Y):M)})},unwrap:function(M){return this.parent(M).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(M){return!w.expr.pseudos.visible(M)},w.expr.pseudos.visible=function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var dr={0:200,1223:204},hr=w.ajaxSettings.xhr();h.cors=!!hr&&"withCredentials"in hr,h.ajax=hr=!!hr,w.ajaxTransport(function(M){var z,Y;if(h.cors||hr&&!M.crossDomain)return{send:function(K,ce){var ae,pe=M.xhr();if(pe.open(M.type,M.url,M.async,M.username,M.password),M.xhrFields)for(ae in M.xhrFields)pe[ae]=M.xhrFields[ae];M.mimeType&&pe.overrideMimeType&&pe.overrideMimeType(M.mimeType),!M.crossDomain&&!K["X-Requested-With"]&&(K["X-Requested-With"]="XMLHttpRequest");for(ae in K)pe.setRequestHeader(ae,K[ae]);z=function(He){return function(){z&&(z=Y=pe.onload=pe.onerror=pe.onabort=pe.ontimeout=pe.onreadystatechange=null,He==="abort"?pe.abort():He==="error"?typeof pe.status!="number"?ce(0,"error"):ce(pe.status,pe.statusText):ce(dr[pe.status]||pe.status,pe.statusText,(pe.responseType||"text")!=="text"||typeof pe.responseText!="string"?{binary:pe.response}:{text:pe.responseText},pe.getAllResponseHeaders()))}},pe.onload=z(),Y=pe.onerror=pe.ontimeout=z("error"),pe.onabort!==void 0?pe.onabort=Y:pe.onreadystatechange=function(){pe.readyState===4&&t.setTimeout(function(){z&&Y()})},z=z("abort");try{pe.send(M.hasContent&&M.data||null)}catch(He){if(z)throw He}},abort:function(){z&&z()}}}),w.ajaxPrefilter(function(M){M.crossDomain&&(M.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(M){return w.globalEval(M),M}}}),w.ajaxPrefilter("script",function(M){M.cache===void 0&&(M.cache=!1),M.crossDomain&&(M.type="GET")}),w.ajaxTransport("script",function(M){if(M.crossDomain||M.scriptAttrs){var z,Y;return{send:function(K,ce){z=w("<script>").attr(M.scriptAttrs||{}).prop({charset:M.scriptCharset,src:M.url}).on("load error",Y=function(ae){z.remove(),Y=null,ae&&ce(ae.type==="error"?404:200,ae.type)}),y.head.appendChild(z[0])},abort:function(){Y&&Y()}}}});var pr=[],Yr=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var M=pr.pop()||w.expando+"_"+Co.guid++;return this[M]=!0,M}}),w.ajaxPrefilter("json jsonp",function(M,z,Y){var K,ce,ae,pe=M.jsonp!==!1&&(Yr.test(M.url)?"url":typeof M.data=="string"&&(M.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Yr.test(M.data)&&"data");if(pe||M.dataTypes[0]==="jsonp")return K=M.jsonpCallback=g(M.jsonpCallback)?M.jsonpCallback():M.jsonpCallback,pe?M[pe]=M[pe].replace(Yr,"$1"+K):M.jsonp!==!1&&(M.url+=(hs.test(M.url)?"&":"?")+M.jsonp+"="+K),M.converters["script json"]=function(){return ae||w.error(K+" was not called"),ae[0]},M.dataTypes[0]="json",ce=t[K],t[K]=function(){ae=arguments},Y.always(function(){ce===void 0?w(t).removeProp(K):t[K]=ce,M[K]&&(M.jsonpCallback=z.jsonpCallback,pr.push(K)),ae&&g(ce)&&ce(ae[0]),ae=ce=void 0}),"script"}),h.createHTMLDocument=function(){var M=y.implementation.createHTMLDocument("").body;return M.innerHTML="<form></form><form></form>",M.childNodes.length===2}(),w.parseHTML=function(M,z,Y){if(typeof M!="string")return[];typeof z=="boolean"&&(Y=z,z=!1);var K,ce,ae;return z||(h.createHTMLDocument?(z=y.implementation.createHTMLDocument(""),K=z.createElement("base"),K.href=y.location.href,z.head.appendChild(K)):z=y),ce=ee.exec(M),ae=!Y&&[],ce?[z.createElement(ce[1])]:(ce=wr([M],z,ae),ae&&ae.length&&w(ae).remove(),w.merge([],ce.childNodes))},w.fn.load=function(M,z,Y){var K,ce,ae,pe=this,He=M.indexOf(" ");return He>-1&&(K=_s(M.slice(He)),M=M.slice(0,He)),g(z)?(Y=z,z=void 0):z&&typeof z=="object"&&(ce="POST"),pe.length>0&&w.ajax({url:M,type:ce||"GET",dataType:"html",data:z}).done(function(Ie){ae=arguments,pe.html(K?w("<div>").append(w.parseHTML(Ie)).find(K):Ie)}).always(Y&&function(Ie,et){pe.each(function(){Y.apply(this,ae||[Ie.responseText,et,Ie])})}),this},w.expr.pseudos.animated=function(M){return w.grep(w.timers,function(z){return M===z.elem}).length},w.offset={setOffset:function(M,z,Y){var K,ce,ae,pe,He,Ie,et,vt=w.css(M,"position"),oe=w(M),de={};vt==="static"&&(M.style.position="relative"),He=oe.offset(),ae=w.css(M,"top"),Ie=w.css(M,"left"),et=(vt==="absolute"||vt==="fixed")&&(ae+Ie).indexOf("auto")>-1,et?(K=oe.position(),pe=K.top,ce=K.left):(pe=parseFloat(ae)||0,ce=parseFloat(Ie)||0),g(z)&&(z=z.call(M,Y,w.extend({},He))),z.top!=null&&(de.top=z.top-He.top+pe),z.left!=null&&(de.left=z.left-He.left+ce),"using"in z?z.using.call(M,de):oe.css(de)}},w.fn.extend({offset:function(M){if(arguments.length)return M===void 0?this:this.each(function(ce){w.offset.setOffset(this,M,ce)});var z,Y,K=this[0];if(K)return K.getClientRects().length?(z=K.getBoundingClientRect(),Y=K.ownerDocument.defaultView,{top:z.top+Y.pageYOffset,left:z.left+Y.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var M,z,Y,K=this[0],ce={top:0,left:0};if(w.css(K,"position")==="fixed")z=K.getBoundingClientRect();else{for(z=this.offset(),Y=K.ownerDocument,M=K.offsetParent||Y.documentElement;M&&(M===Y.body||M===Y.documentElement)&&w.css(M,"position")==="static";)M=M.parentNode;M&&M!==K&&M.nodeType===1&&(ce=w(M).offset(),ce.top+=w.css(M,"borderTopWidth",!0),ce.left+=w.css(M,"borderLeftWidth",!0))}return{top:z.top-ce.top-w.css(K,"marginTop",!0),left:z.left-ce.left-w.css(K,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var M=this.offsetParent;M&&w.css(M,"position")==="static";)M=M.offsetParent;return M||Oe})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(M,z){var Y=z==="pageYOffset";w.fn[M]=function(K){return it(this,function(ce,ae,pe){var He;if(m(ce)?He=ce:ce.nodeType===9&&(He=ce.defaultView),pe===void 0)return He?He[z]:ce[ae];He?He.scrollTo(Y?He.pageXOffset:pe,Y?pe:He.pageYOffset):ce[ae]=pe},M,K,arguments.length)}}),w.each(["top","left"],function(M,z){w.cssHooks[z]=Ht(h.pixelPosition,function(Y,K){if(K)return K=Rn(Y,z),Xe.test(K)?w(Y).position()[z]+"px":K})}),w.each({Height:"height",Width:"width"},function(M,z){w.each({padding:"inner"+M,content:z,"":"outer"+M},function(Y,K){w.fn[K]=function(ce,ae){var pe=arguments.length&&(Y||typeof ce!="boolean"),He=Y||(ce===!0||ae===!0?"margin":"border");return it(this,function(Ie,et,vt){var oe;return m(Ie)?K.indexOf("outer")===0?Ie["inner"+M]:Ie.document.documentElement["client"+M]:Ie.nodeType===9?(oe=Ie.documentElement,Math.max(Ie.body["scroll"+M],oe["scroll"+M],Ie.body["offset"+M],oe["offset"+M],oe["client"+M])):vt===void 0?w.css(Ie,et,He):w.style(Ie,et,vt,He)},z,pe?ce:void 0,pe)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(M,z){w.fn[z]=function(Y){return this.on(z,Y)}}),w.fn.extend({bind:function(M,z,Y){return this.on(M,null,z,Y)},unbind:function(M,z){return this.off(M,null,z)},delegate:function(M,z,Y,K){return this.on(z,M,Y,K)},undelegate:function(M,z,Y){return arguments.length===1?this.off(M,"**"):this.off(z,M||"**",Y)},hover:function(M,z){return this.on("mouseenter",M).on("mouseleave",z||M)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(M,z){w.fn[z]=function(Y,K){return arguments.length>0?this.on(z,null,Y,K):this.trigger(z)}});var zr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(M,z){var Y,K,ce;if(typeof z=="string"&&(Y=M[z],z=M,M=Y),!!g(M))return K=o.call(arguments,2),ce=function(){return M.apply(z||this,K.concat(o.call(arguments)))},ce.guid=M.guid=M.guid||w.guid++,ce},w.holdReady=function(M){M?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=R,w.isFunction=g,w.isWindow=m,w.camelCase=Re,w.type=_,w.now=Date.now,w.isNumeric=function(M){var z=w.type(M);return(z==="number"||z==="string")&&!isNaN(M-parseFloat(M))},w.trim=function(M){return M==null?"":(M+"").replace(zr,"$1")};var Ur=t.jQuery,gi=t.$;return w.noConflict=function(M){return t.$===w&&(t.$=gi),M&&t.jQuery===w&&(t.jQuery=Ur),w},typeof n>"u"&&(t.jQuery=t.$=w),w})})(rNe);var RCt=rNe.exports;const Mi=nNe(RCt);var iNe={exports:{}};(function(e){(function(t){var n=x(),r=_(),i=E(),o=C(),s={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:l,toPng:f,toJpeg:c,toBlob:d,toPixelData:u,impl:{fontFaces:i,images:o,util:n,inliner:r,options:{}}};e.exports=a;function l(w,T){return T=T||{},p(T),Promise.resolve(w).then(function(L){return g(L,T.filter,!0)}).then(m).then(y).then(R).then(function(L){return v(L,T.width||n.width(w),T.height||n.height(w))});function R(L){return T.bgcolor&&(L.style.backgroundColor=T.bgcolor),T.width&&(L.style.width=T.width+"px"),T.height&&(L.style.height=T.height+"px"),T.style&&Object.keys(T.style).forEach(function(B){L.style[B]=T.style[B]}),L}}function u(w,T){return h(w,T||{}).then(function(R){return R.getContext("2d").getImageData(0,0,n.width(w),n.height(w)).data})}function f(w,T){return h(w,T||{}).then(function(R){return R.toDataURL()})}function c(w,T){return T=T||{},h(w,T).then(function(R){return R.toDataURL("image/jpeg",T.quality||1)})}function d(w,T){return h(w,T||{}).then(n.canvasToBlob)}function p(w){typeof w.imagePlaceholder>"u"?a.impl.options.imagePlaceholder=s.imagePlaceholder:a.impl.options.imagePlaceholder=w.imagePlaceholder,typeof w.cacheBust>"u"?a.impl.options.cacheBust=s.cacheBust:a.impl.options.cacheBust=w.cacheBust}function h(w,T){return l(w,T).then(n.makeImage).then(n.delay(100)).then(function(L){var B=R(w);return B.getContext("2d").drawImage(L,0,0),B});function R(L){var B=document.createElement("canvas");if(B.width=T.width||n.width(L),B.height=T.height||n.height(L),T.bgcolor){var P=B.getContext("2d");P.fillStyle=T.bgcolor,P.fillRect(0,0,B.width,B.height)}return B}}function g(w,T,R){if(!R&&T&&!T(w))return Promise.resolve();return Promise.resolve(w).then(L).then(function(S){return B(w,S,T)}).then(function(S){return P(w,S)});function L(S){return S instanceof HTMLCanvasElement?n.makeImage(S.toDataURL()):S.cloneNode(!1)}function B(S,k,D){var O=S.childNodes;if(O.length===0)return Promise.resolve(k);return N(k,n.asArray(O),D).then(function(){return k});function N(j,q,W){var Q=Promise.resolve();return q.forEach(function(ee){Q=Q.then(function(){return g(ee,W)}).then(function(H){H&&j.appendChild(H)})}),Q}}function P(S,k){if(!(k instanceof Element))return k;return Promise.resolve().then(D).then(O).then(N).then(j).then(function(){return k});function D(){q(window.getComputedStyle(S),k.style);function q(W,Q){W.cssText?Q.cssText=W.cssText:ee(W,Q);function ee(H,se){n.asArray(H).forEach(function(ne){se.setProperty(ne,H.getPropertyValue(ne),H.getPropertyPriority(ne))})}}}function O(){[":before",":after"].forEach(function(W){q(W)});function q(W){var Q=window.getComputedStyle(S,W),ee=Q.getPropertyValue("content");if(ee===""||ee==="none")return;var H=n.uid();k.className=k.className+" "+H;var se=document.createElement("style");se.appendChild(ne(H,W,Q)),k.appendChild(se);function ne(ge,we,$e){var ve="."+ge+":"+we,Ee=$e.cssText?Ve($e):Ue($e);return document.createTextNode(ve+"{"+Ee+"}");function Ve(ft){var ht=ft.getPropertyValue("content");return ft.cssText+" content: "+ht+";"}function Ue(ft){return n.asArray(ft).map(ht).join("; ")+";";function ht(zt){return zt+": "+ft.getPropertyValue(zt)+(ft.getPropertyPriority(zt)?" !important":"")}}}}}function N(){S instanceof HTMLTextAreaElement&&(k.innerHTML=S.value),S instanceof HTMLInputElement&&k.setAttribute("value",S.value)}function j(){k instanceof SVGElement&&(k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k instanceof SVGRectElement&&["width","height"].forEach(function(q){var W=k.getAttribute(q);W&&k.style.setProperty(q,W)}))}}}function m(w){return i.resolveAll().then(function(T){var R=document.createElement("style");return w.appendChild(R),R.appendChild(document.createTextNode(T)),w})}function y(w){return o.inlineAll(w).then(function(){return w})}function v(w,T,R){return Promise.resolve(w).then(function(L){return L.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(L)}).then(n.escapeXhtml).then(function(L){return'<foreignObject x="0" y="0" width="100%" height="100%">'+L+"</foreignObject>"}).then(function(L){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+T+'" height="'+R+'">'+L+"</svg>"}).then(function(L){return"data:image/svg+xml;charset=utf-8,"+L})}function x(){return{escape:j,parseExtension:T,mimeType:R,dataAsUrl:N,isDataUrl:L,canvasToBlob:P,resolveUrl:S,getAndEncode:O,uid:k(),delay:q,asArray:W,escapeXhtml:Q,makeImage:D,width:ee,height:H};function w(){var ne="application/font-woff",ge="image/jpeg";return{woff:ne,woff2:ne,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ge,jpeg:ge,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function T(ne){var ge=/\.([^\.\/]*?)$/g.exec(ne);return ge?ge[1]:""}function R(ne){var ge=T(ne).toLowerCase();return w()[ge]||""}function L(ne){return ne.search(/^(data:)/)!==-1}function B(ne){return new Promise(function(ge){for(var we=window.atob(ne.toDataURL().split(",")[1]),$e=we.length,ve=new Uint8Array($e),Ee=0;Ee<$e;Ee++)ve[Ee]=we.charCodeAt(Ee);ge(new Blob([ve],{type:"image/png"}))})}function P(ne){return ne.toBlob?new Promise(function(ge){ne.toBlob(ge)}):B(ne)}function S(ne,ge){var we=document.implementation.createHTMLDocument(),$e=we.createElement("base");we.head.appendChild($e);var ve=we.createElement("a");return we.body.appendChild(ve),$e.href=ge,ve.href=ne,ve.href}function k(){var ne=0;return function(){return"u"+ge()+ne++;function ge(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function D(ne){return new Promise(function(ge,we){var $e=new Image;$e.onload=function(){ge($e)},$e.onerror=we,$e.src=ne})}function O(ne){var ge=3e4;return a.impl.options.cacheBust&&(ne+=(/\?/.test(ne)?"&":"?")+new Date().getTime()),new Promise(function(we){var $e=new XMLHttpRequest;$e.onreadystatechange=Ve,$e.ontimeout=Ue,$e.responseType="blob",$e.timeout=ge,$e.open("GET",ne,!0),$e.send();var ve;if(a.impl.options.imagePlaceholder){var Ee=a.impl.options.imagePlaceholder.split(/,/);Ee&&Ee[1]&&(ve=Ee[1])}function Ve(){if($e.readyState===4){if($e.status!==200){ve?we(ve):ft("cannot fetch resource: "+ne+", status: "+$e.status);return}var ht=new FileReader;ht.onloadend=function(){var zt=ht.result.split(/,/)[1];we(zt)},ht.readAsDataURL($e.response)}}function Ue(){ve?we(ve):ft("timeout of "+ge+"ms occured while fetching resource: "+ne)}function ft(ht){console.error(ht),we("")}})}function N(ne,ge){return"data:"+ge+";base64,"+ne}function j(ne){return ne.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function q(ne){return function(ge){return new Promise(function(we){setTimeout(function(){we(ge)},ne)})}}function W(ne){for(var ge=[],we=ne.length,$e=0;$e<we;$e++)ge.push(ne[$e]);return ge}function Q(ne){return ne.replace(/#/g,"%23").replace(/\n/g,"%0A")}function ee(ne){var ge=se(ne,"border-left-width"),we=se(ne,"border-right-width");return ne.scrollWidth+ge+we}function H(ne){var ge=se(ne,"border-top-width"),we=se(ne,"border-bottom-width");return ne.scrollHeight+ge+we}function se(ne,ge){var we=window.getComputedStyle(ne).getPropertyValue(ge);return parseFloat(we.replace("px",""))}}function _(){var w=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:B,shouldProcess:T,impl:{readUrls:R,inline:L}};function T(P){return P.search(w)!==-1}function R(P){for(var S=[],k;(k=w.exec(P))!==null;)S.push(k[1]);return S.filter(function(D){return!n.isDataUrl(D)})}function L(P,S,k,D){return Promise.resolve(S).then(function(N){return k?n.resolveUrl(N,k):N}).then(D||n.getAndEncode).then(function(N){return n.dataAsUrl(N,n.mimeType(S))}).then(function(N){return P.replace(O(S),"$1"+N+"$3")});function O(N){return new RegExp(`(url\\(['"]?)(`+n.escape(N)+`)(['"]?\\))`,"g")}}function B(P,S,k){if(D())return Promise.resolve(P);return Promise.resolve(P).then(R).then(function(O){var N=Promise.resolve(P);return O.forEach(function(j){N=N.then(function(q){return L(q,j,S,k)})}),N});function D(){return!T(P)}}}function E(){return{resolveAll:w,impl:{readAll:T}};function w(){return T().then(function(R){return Promise.all(R.map(function(L){return L.resolve()}))}).then(function(R){return R.join(`
`)})}function T(){return Promise.resolve(n.asArray(document.styleSheets)).then(L).then(R).then(function(P){return P.map(B)});function R(P){return P.filter(function(S){return S.type===CSSRule.FONT_FACE_RULE}).filter(function(S){return r.shouldProcess(S.style.getPropertyValue("src"))})}function L(P){var S=[];return P.forEach(function(k){try{n.asArray(k.cssRules||[]).forEach(S.push.bind(S))}catch(D){console.log("Error while reading CSS rules from "+k.href,D.toString())}}),S}function B(P){return{resolve:function(){var S=(P.parentStyleSheet||{}).href;return r.inlineAll(P.cssText,S)},src:function(){return P.style.getPropertyValue("src")}}}}}function C(){return{inlineAll:T,impl:{newImage:w}};function w(R){return{inline:L};function L(B){return n.isDataUrl(R.src)?Promise.resolve():Promise.resolve(R.src).then(B||n.getAndEncode).then(function(P){return n.dataAsUrl(P,n.mimeType(R.src))}).then(function(P){return new Promise(function(S,k){R.onload=S,R.onerror=k,R.src=P})})}}function T(R){if(!(R instanceof Element))return Promise.resolve(R);return L(R).then(function(){return R instanceof HTMLImageElement?w(R).inline():Promise.all(n.asArray(R.childNodes).map(function(B){return T(B)}))});function L(B){var P=B.style.getPropertyValue("background");return P?r.inlineAll(P).then(function(S){B.style.setProperty("background",S,B.style.getPropertyPriority("background"))}).then(function(){return B}):Promise.resolve(B)}}}})()})(iNe);var FCt=iNe.exports;const $Ct=nNe(FCt);class wU{constructor(){this.regionDraggingCallback=[],this.regionDragStartCallback=[],this.regionDragEndCallback=[],this.screenshotGeneratedCallback=[],this.toolsCanvasCreatedCallback=[],this.closedCallback=[],this.successCreatedCallback=[],this.errorCreatedCallback=[],this.screenshotDownloadCallback=[]}getMouseRelativeXy({clientX:t,clientY:n}){let{left:r,top:i}=this.canvas.getBoundingClientRect(),o=t-r,s=n-i;return{x:o,y:s}}triggerEvent(t,n){t.forEach(r=>{r(n)})}on(t,n){switch(t){case"regionDragging":this.regionDraggingCallback.push(n);break;case"regionDragStart":this.regionDragStartCallback.push(n);break;case"regionDragEnd":this.regionDragEndCallback.push(n);break;case"screenshotGenerated":this.screenshotGeneratedCallback.push(n);break;case"toolsCanvasCreated":this.toolsCanvasCreatedCallback.push(n);break;case"closed":this.closedCallback.push(n);break;case"successCreated":this.successCreatedCallback.push(n);break;case"errorCreated":this.errorCreatedCallback.push(n);break;case"screenshotDownload":this.screenshotDownloadCallback.push(n);break}}off(t,n){switch(t){case"regionDragging":this.regionDraggingCallback=this.regionDraggingCallback.filter(r=>r!==n);break;case"regionDragStart":this.regionDragStartCallback=this.regionDragStartCallback.filter(r=>r!==n);break;case"regionDragEnd":this.regionDragEndCallback=this.regionDragEndCallback.filter(r=>r!==n);break;case"screenshotGenerated":this.screenshotGeneratedCallback=this.screenshotGeneratedCallback.filter(r=>r!==n);break;case"toolsCanvasCreated":this.toolsCanvasCreatedCallback=this.toolsCanvasCreatedCallback.filter(r=>r!==n);break;case"closed":this.closedCallback=this.closedCallback.filter(r=>r!==n);break;case"successCreated":this.successCreatedCallback=this.successCreatedCallback.filter(r=>r!==n);break;case"errorCreated":this.errorCreatedCallback=this.errorCreatedCallback.filter(r=>r!==n);break;case"screenshotDownload":this.screenshotDownloadCallback=this.screenshotDownloadCallback.filter(r=>r!==n);break}}}class MCt extends wU{constructor(t={}){var n,r,i;super(t),this.canvas=null,this.ctx=null,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.regionColor=t.regionColor,this.screenshot=t.screenshot,this.initialRegion=t.initialRegion;let o={show:!0,color:"#ffffff",fontSize:14};this.regionSizeIndicator=t.regionSizeIndicator??o,(n=this.regionSizeIndicator).show??(n.show=o.show),(r=this.regionSizeIndicator).color??(r.color=o.color),(i=this.regionSizeIndicator).fontSize??(i.fontSize=o.fontSize),this.maskColor=t.maskColor??"rgba(0, 0, 0, 0.5)"}init(){this.canvas=document.createElement("canvas"),this.canvas.width=innerWidth,this.canvas.height=innerHeight,this.canvas.style.cssText="cursor:crosshair;position:fixed;top:0;left:0;z-index:9999",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(this.screenshot,0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.maskColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.triggerEvent(this.successCreatedCallback);let t=this;if(this.initialRegion){let{left:n,top:r,width:i,height:o}=this.initialRegion,s=Math.max(n,0),a=Math.max(r,0),l=Math.min(i+n,innerWidth),u=Math.min(o+r,innerHeight),f={startX:s,startY:a,endX:l,endY:u};t.triggerEvent(t.regionDragStartCallback,f),t.setRegionSize(s,a,l,u),t.triggerEvent(t.regionDragEndCallback,f),this.allowDragRegion()}else{let n=function(c){o=!0;let{x:d,y:p}=t.getMouseRelativeXy(c);a===void 0&&l===void 0?(a=d,l=p,u=d,f=p):(u=d,f=p),u=Math.min(u,t.canvas.width),f=Math.min(f,t.canvas.height),u=Math.max(u,0),f=Math.max(f,0),s&&t.triggerEvent(t.regionDragStartCallback,{startX:a,startY:l,endX:u,endY:f}),s=!1,t.setRegionSize(a,l,u,f)},r=function(){if(i){if(document.removeEventListener("mousemove",n),!o)return;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),t.canvas.onmousedown=null,t.canvas.style.cursor="default",t.allowDragRegion(),t.triggerEvent(t.regionDragEndCallback,{startX:t.startX,startY:t.startY,endX:t.endX,endY:t.endY})}},i=!1,o=!1,s=!0,a,l,u,f;t.canvas.onmousedown=function(){i=!0,document.addEventListener("mousemove",n)},document.addEventListener("mouseup",r)}}allowDragRegion(){let t=this;const n=2;let r=null,i=!0,o=()=>{let l={startX:t.startX,startY:t.startY,endX:t.endX,endY:t.endY};i&&t.triggerEvent(t.regionDragStartCallback,l),t.triggerEvent(t.regionDraggingCallback,l),i=!1};this.allowDragRegionMousemove=function(l){let{x:u,y:f}=t.getMouseRelativeXy(l),c=Math.min(t.startX,t.endX),d=Math.max(t.startX,t.endX),p=Math.min(t.startY,t.endY),h=Math.max(t.startY,t.endY);if(u>=c+n&&u<=d-n&&f>=p+n&&f<=h-n){t.canvas.style.cursor="move";let g=d-c,m=h-p,y,v;r=function(x){o(),t.canvas.style.cursor="move";let{x:_,y:E}=t.getMouseRelativeXy(x);y??(y=_-c),v??(v=E-p),_=Math.min(_,innerWidth-g+y),_=Math.max(_,y),E=Math.min(E,innerHeight-m+v),E=Math.max(E,v),t.setRegionSize(_-y,E-v,_+g-y,E+m-v)}}else{let g=function({x:m,y}){let v=innerWidth,x=innerHeight;return m=Math.max(m,0),m=Math.min(m,v),y=Math.max(y,0),y=Math.min(y,x),{x:m,y}};u>=c-n&&u<=c+n&&f>=p-n&&f<=p+n?(t.canvas.style.cursor="nw-resize",r=function(m){o(),t.canvas.style.cursor="nw-resize";let y=t.getMouseRelativeXy(m),{x:v,y:x}=g(y);t.setRegionSize(v,x,d,h)}):u>=d-n&&u<=d+n&&f>=p-n&&f<=p+n?(t.canvas.style.cursor="ne-resize",r=function(m){o(),t.canvas.style.cursor="ne-resize";let y=t.getMouseRelativeXy(m),{x:v,y:x}=g(y);t.setRegionSize(c,x,v,h)}):u>=c-n&&u<=c+n&&f>=h-n&&f<=h+n?(t.canvas.style.cursor="ne-resize",r=function(m){o(),t.canvas.style.cursor="ne-resize";let y=t.getMouseRelativeXy(m),{x:v,y:x}=g(y);t.setRegionSize(v,p,d,x)}):u>=d-n&&u<=d+n&&f>=h-n&&f<=h+n?(t.canvas.style.cursor="nw-resize",r=function(m){o(),t.canvas.style.cursor="nw-resize";let y=t.getMouseRelativeXy(m),{x:v,y:x}=g(y);t.setRegionSize(c,p,v,x)}):u>=c-n&&u<=c+n?(t.canvas.style.cursor="w-resize",r=function(m){o(),t.canvas.style.cursor="w-resize";let y=t.getMouseRelativeXy(m),{x:v}=g(y);t.setRegionSize(v,p,d,h)}):u>=d-n&&u<=d+n?(t.canvas.style.cursor="w-resize",r=function(m){o(),t.canvas.style.cursor="w-resize";let y=t.getMouseRelativeXy(m),{x:v}=g(y);t.setRegionSize(c,p,v,h)}):f>=p-n&&f<=p+n?(t.canvas.style.cursor="n-resize",r=function(m){o(),t.canvas.style.cursor="n-resize";let y=t.getMouseRelativeXy(m),{y:v}=g(y);t.setRegionSize(c,v,d,h)}):f>=h-n&&f<=h+n?(t.canvas.style.cursor="n-resize",r=function(m){o(),t.canvas.style.cursor="n-resize";let y=t.getMouseRelativeXy(m),{y:v}=g(y);t.setRegionSize(c,p,d,v)}):(t.canvas.onmousedown=null,r=null,t.canvas.style.cursor="default")}};let s=null;this.dragRegionMousedown=function(){s=r,s&&document.addEventListener("mousemove",r)},this.canvas.addEventListener("mousedown",this.dragRegionMousedown);function a(){s&&(i=!0,t.triggerEvent(t.regionDragEndCallback,{startX:t.startX,startY:t.startY,endX:t.endX,endY:t.endY}),document.removeEventListener("mousemove",s),s=null)}document.addEventListener("mouseup",a),this.canvas.addEventListener("mousemove",this.allowDragRegionMousemove)}notAllowDragRegion(){this.canvas.removeEventListener("mousemove",this.allowDragRegionMousemove),this.canvas.removeEventListener("mousedown",this.dragRegionMousedown)}setRegionSize(t,n,r,i){const o=this.regionSizeIndicator.fontSize;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.screenshot,0,0,this.canvas.width,this.canvas.height),this.startX=Math.min(t,r),this.endX=Math.max(t,r),this.startY=Math.min(n,i),this.endY=Math.max(n,i),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(this.startX,this.endY),this.ctx.lineTo(this.endX,this.endY),this.ctx.lineTo(this.endX,this.startY),this.ctx.closePath(),this.ctx.fillStyle=this.maskColor,this.ctx.fill(),this.ctx.strokeStyle="#0000",this.ctx.stroke(),this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(this.startX,this.endY),this.ctx.lineTo(this.endX,this.endY),this.ctx.lineTo(this.endX,this.startY),this.ctx.closePath(),this.ctx.strokeStyle=this.regionColor,this.ctx.stroke(),this.ctx.font=o+"px Arial",this.ctx.textBaseline="bottom",this.ctx.textAlign="left";let s=`${Math.max(1,Math.round(this.endX-this.startX))} x ${Math.max(1,Math.round(this.endY-this.startY))}`,a=this.ctx.measureText(s).fontBoundingBoxAscent,l=this.startY-2-5-a;this.ctx.fillStyle=this.regionSizeIndicator.color,l>=0&&this.regionSizeIndicator.show&&this.ctx.fillText(s,this.startX+2,this.startY-2-5),l<0&&this.regionSizeIndicator.show&&this.ctx.fillText(s,this.startX+5,this.startY+2+o+5);let u=6/2;this.ctx.fillStyle=this.regionColor;let f={x:this.startX-u,y:(this.endY+this.startY)/2-u},c={x:this.endX-u,y:(this.endY+this.startY)/2-u},d={x:(this.endX+this.startX)/2-u,y:this.startY-u},p={x:(this.endX+this.startX)/2-u,y:this.endY-u};this.ctx.fillRect(f.x,f.y,6,6),this.ctx.fillRect(c.x,c.y,6,6),this.ctx.fillRect(p.x,p.y,6,6),this.ctx.fillRect(d.x,d.y,6,6),this.ctx.fillRect(f.x,d.y,6,6),this.ctx.fillRect(f.x,p.y,6,6),this.ctx.fillRect(c.x,d.y,6,6),this.ctx.fillRect(c.x,p.y,6,6),this.ctx.closePath(),this.triggerEvent(this.regionDraggingCallback,{startX:this.startX,startY:this.startY,endX:this.endX,endY:this.endY})}}class OCt extends wU{constructor(t){var n,r,i,o,s,a,l,u,f,c,d;super(t),this.region=t.region,this.screenshot=t.screenshot,this.customDrawing=t.customDrawing??[],this.downloadName=t.downloadName??"screenshot",this.globalColorOptions=t.globalColorOptions??["#ff3a3a","#f8b60f","#0083ff","#40ff00","#363636","#e9e9e9"],this.rectangleOptions={lineWidth:((n=t.rectangleOptions)==null?void 0:n.size)??[4,6,8],lineColor:((r=t.rectangleOptions)==null?void 0:r.color)??this.globalColorOptions},this.circleOptions={lineWidth:((i=t.circleOptions)==null?void 0:i.size)??[4,6,8],lineColor:((o=t.circleOptions)==null?void 0:o.color)??this.globalColorOptions},this.paintOptions={lineWidth:((s=t.paintOptions)==null?void 0:s.size)??[4,6,8],lineColor:((a=t.paintOptions)==null?void 0:a.color)??this.globalColorOptions},this.mosaicOptions={lineWidth:((l=t.mosaicOptions)==null?void 0:l.size)??[6,8,10]},this.textOptions={textSize:((u=t.textOptions)==null?void 0:u.size)??[16,18,20],textColor:((f=t.textOptions)==null?void 0:f.color)??this.globalColorOptions},this.arrowOptions={lineWidth:((c=t.arrowOptions)==null?void 0:c.size)??[4,6,8],lineColor:((d=t.arrowOptions)==null?void 0:d.color)??this.globalColorOptions},this.createHandle(),this.drawHistory=new Proxy([],{set(p,h,g){return g?Mi(".region-screenshot_revocation").removeClass("region-screenshot_disabled"):Mi(".region-screenshot_revocation").addClass("region-screenshot_disabled"),p[h]=g,!0}})}createCanvas(){if(this.canvas)return;let{startX:t,startY:n,endX:r,endY:i}=this.region;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas);let o=r-t,s=i-n;this.canvas.width=o,this.canvas.height=s,this.canvas.style.cssText=`position:fixed;top:${n}px;left:${t}px;z-index:9999`,this.triggerEvent(this.toolsCanvasCreatedCallback)}getOriginImg(){let{startX:t,startY:n,endX:r,endY:i}=this.region,o=document.createElement("canvas");return o.width=Math.max(r-t,1),o.height=Math.max(i-n,1),o.getContext("2d").drawImage(this.screenshot,-t,-n,innerWidth,innerHeight),o}getMosaicImg(){let{startX:t,startY:n,endX:r,endY:i}=this.region,o=document.createElement("canvas");o.width=r-t,o.height=i-n;let s=o.getContext("2d");s.drawImage(this.screenshot,-t,-n,innerWidth,innerHeight);let a=s.getImageData(0,0,o.width,o.height);const l=10,u=a.data;for(let f=0;f<o.height;f+=l)for(let c=0;c<o.width;c+=l){let d=0,p=0,h=0,g=0,m=0;for(let E=f;E<f+l&&E<o.height;E++)for(let C=c;C<c+l&&C<o.width;C++){let w=(E*o.width+C)*4;d+=u[w],p+=u[w+1],h+=u[w+2],g+=u[w+3],m++}let y=d/m,v=p/m,x=h/m,_=g/m;for(let E=f;E<f+l&&E<o.height;E++)for(let C=c;C<c+l&&C<o.width;C++){let w=(E*o.width+C)*4;u[w]=y,u[w+1]=v,u[w+2]=x,u[w+3]=_}}return s.putImageData(a,0,0),o}createHandle(){this.handle=document.createElement("div"),this.handle.style.setProperty("--active-color","#409eff");let t=this.rectangleOptions,n=this.circleOptions,r=this.paintOptions,i=this.mosaicOptions,o=this.textOptions,s=this.arrowOptions;this.handle.innerHTML=`
    <ul class="region-screenshot_tools_drawing">
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_rectangle">
          <div class="region-screenshot_tools_btn"></div>
          <ul class="region-screenshot_tools_options">
            <li class="region-screenshot_tools_size_instruction_list">
            
            </li>
            <li class="region-screenshot_tools_color_instruction_list">
             
            </li>
          </ul>
      </li>
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_circle">
        <div class="region-screenshot_tools_btn"></div>
        <ul class="region-screenshot_tools_options">
          <li class="region-screenshot_tools_size_instruction_list">
          
          </li>
          <li class="region-screenshot_tools_color_instruction_list">
          
          </li>
        </ul>
      </li>
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_paint">
        <div class="region-screenshot_tools_btn"></div>
        <ul class="region-screenshot_tools_options">
          <li class="region-screenshot_tools_size_instruction_list">
          
          </li>
          <li class="region-screenshot_tools_color_instruction_list">
          
          </li>
        </ul>
      </li>
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_mosaic">
        <div class="region-screenshot_tools_btn"></div>
        <ul class="region-screenshot_tools_options">
          <li class="region-screenshot_tools_size_instruction_list">
          
          </li>
        </ul>
      </li>
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_text">
        <div class="region-screenshot_tools_btn"></div>
        <ul class="region-screenshot_tools_options">
          <li class="region-screenshot_tools_size_instruction_list">
          
          </li>
          <li class="region-screenshot_tools_color_instruction_list">
          
          </li>
        </ul>
      </li>
      <li class="region-screenshot_draw_item region-screenshot_tools_item region-screenshot_arrow">
        <div class="region-screenshot_tools_btn"></div>
        <ul class="region-screenshot_tools_options">
          <li class="region-screenshot_tools_size_instruction_list">
          
          </li>
          <li class="region-screenshot_tools_color_instruction_list">
          
          </li>
        </ul>
      </li>
      
     </ul>
     <div class="region-screenshot_tools_split"></div>
     <ul>
      <li class="region-screenshot_other_item region-screenshot_tools_item region-screenshot_revocation region-screenshot_disabled">
        <div class="region-screenshot_tools_btn"></div>
      </li>
      <li class="region-screenshot_other_item region-screenshot_tools_item region-screenshot_close">
        <div class="region-screenshot_tools_btn"></div>
      </li>
    <li class="region-screenshot_other_item region-screenshot_tools_item region-screenshot_download">
      <div class="region-screenshot_tools_btn"></div>
    </li>
    <li class="region-screenshot_other_item region-screenshot_tools_item region-screenshot_finish">
      <div class="region-screenshot_tools_btn"></div>
    </li>
     </ul>
    `,this.handle.className="region-screenshot_tools",document.body.appendChild(this.handle),this.customDrawing.forEach(l=>{let u=Mi(".region-screenshot_tools_drawing"),f=document.createElement("li");f.classList.add("region-screenshot_draw_item"),f.classList.add("region-screenshot_tools_item"),f.classList.add("region-screenshot_custom_tools"),f.classList.add(l.className),f.innerHTML=`
          <div class="region-screenshot_tools_btn"></div>
      `,l.optionsHtml&&(f.innerHTML+=` <div class="region-screenshot_tools_options">
        ${l.optionsHtml}
      </div>`),u[0].appendChild(f),f.onDrawingClose=l.onDrawingClose,f.onDrawingOpen=l.onDrawingOpen,typeof l.onOptionsCreated=="function"&&l.onOptionsCreated(Mi(f).find(".region-screenshot_tools_options")[0])}),t.lineWidth.forEach(l=>{let u=Mi(".region-screenshot_rectangle .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div line-width="${l}" class="region-screenshot_tools_size">
          <div style="width:${l}px;height:${l}px;"></div>
        </div>`)}),t.lineColor.forEach(l=>{let u=Mi(".region-screenshot_rectangle .region-screenshot_tools_color_instruction_list");u.html(u.html()+`<div line-color="${l}" style="background-color:${l};" class="region-screenshot_tools_color"></div>`)}),n.lineWidth.forEach(l=>{let u=Mi(".region-screenshot_circle .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div line-width="${l}" class="region-screenshot_tools_size">
          <div style="width:${l}px;height:${l}px;"></div>
        </div>`)}),n.lineColor.forEach(l=>{let u=Mi(".region-screenshot_circle .region-screenshot_tools_color_instruction_list");u.html(u.html()+`<div line-color="${l}" style="background-color:${l};" class="region-screenshot_tools_color"></div>`)}),r.lineWidth.forEach(l=>{let u=Mi(".region-screenshot_paint .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div line-width="${l}" class="region-screenshot_tools_size">
          <div style="width:${l}px;height:${l}px;"></div>
        </div>`)}),r.lineColor.forEach(l=>{let u=Mi(".region-screenshot_paint .region-screenshot_tools_color_instruction_list");u.html(u.html()+`<div line-color="${l}" style="background-color:${l};" class="region-screenshot_tools_color"></div>`)}),s.lineWidth.forEach(l=>{let u=Mi(".region-screenshot_arrow .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div line-width="${l}" class="region-screenshot_tools_size">
          <div style="width:${l}px;height:${l}px;"></div>
        </div>`)}),s.lineColor.forEach(l=>{let u=Mi(".region-screenshot_arrow .region-screenshot_tools_color_instruction_list");u.html(u.html()+`<div line-color="${l}" style="background-color:${l};" class="region-screenshot_tools_color"></div>`)}),i.lineWidth.forEach(l=>{let u=Mi(".region-screenshot_mosaic .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div line-width="${l}" class="region-screenshot_tools_size">
          <div style="width:${l}px;height:${l}px;"></div>
        </div>`)}),o.textSize.forEach(l=>{let u=Mi(".region-screenshot_text .region-screenshot_tools_size_instruction_list");u.html(u.html()+`<div text-size="${l}"  style="font-size:${l}px" class="region-screenshot_tools_size">
          T
        </div>`)}),o.textColor.forEach(l=>{let u=Mi(".region-screenshot_text .region-screenshot_tools_color_instruction_list");u.html(u.html()+`<div text-color="${l}" style="background-color:${l};" class="region-screenshot_tools_color"></div>`)});let a=this;Mi(".region-screenshot_draw_item .region-screenshot_tools_btn").click(function(){let l=Mi(this).parent(),u=Mi(this).next();if(l.hasClass("region-screenshot_active"))l.removeClass("region-screenshot_active");else if(l.attr("is-init")===void 0){l.addClass("region-screenshot_active");let f=l.find(".region-screenshot_tools_options")[0];if(f){let p=f.getBoundingClientRect().left,h=f.getBoundingClientRect().top,g=p+f.offsetWidth,m=h+f.offsetHeight;if(g>innerWidth){let v=innerWidth-g-1;f.style.transform=`translate(${v}px, 0)`,f.style.setProperty("--tools_inner_translate_x",`${v*-1}px`)}let y=l[0].getBoundingClientRect().top;(m>innerHeight||y<a.region.canvas.offsetTop+a.region.startY)&&Mi(f).addClass("region-screenshot_top"),f.getBoundingClientRect().top<0&&Mi(f).removeClass("region-screenshot_top")}l.attr("is-init",""),l.siblings().removeClass("region-screenshot_active");let c=u.find(".region-screenshot_tools_size_instruction_list > div");c.length&&c[0].click();let d=u.find(".region-screenshot_tools_color");d.length&&d[0].click()}else u.find(".region-screenshot_tools_size_instruction_list > div.region-screenshot_active").click(),u.find(".region-screenshot_tools_color.region-screenshot_active").click(),l.addClass("region-screenshot_active");l.siblings().removeClass("region-screenshot_active"),a.closeCurrentDraw&&a.closeCurrentDraw(!0),l.hasClass("region-screenshot_active")&&(l.hasClass("region-screenshot_rectangle")?a.closeCurrentDraw=a.drawRectangle():l.hasClass("region-screenshot_circle")?a.closeCurrentDraw=a.drawCircle():l.hasClass("region-screenshot_paint")?a.closeCurrentDraw=a.drawPaint():l.hasClass("region-screenshot_mosaic")?a.closeCurrentDraw=a.drawMosaic():l.hasClass("region-screenshot_text")?a.closeCurrentDraw=a.drawText():l.hasClass("region-screenshot_arrow")?a.closeCurrentDraw=a.drawArrow():l.hasClass("region-screenshot_custom_tools")&&(a.closeCurrentDraw=a.drawCustom(this)))}),Mi(".region-screenshot_tools_size").click(function(){Mi(this).addClass("region-screenshot_active"),Mi(this).siblings().removeClass("region-screenshot_active"),a.checkedLineWidth=Number(Mi(this).attr("line-width")),a.checkedTextSize=Number(Mi(this).attr("text-size"))}),Mi(".region-screenshot_tools_color").click(function(){Mi(this).addClass("region-screenshot_active"),Mi(this).siblings().removeClass("region-screenshot_active"),a.checkedLineColor=Mi(this).attr("line-color"),a.checkedTextColor=Mi(this).attr("text-color")}),Mi(".region-screenshot_other_item .region-screenshot_tools_btn").click(function(){let l=Mi(this).parent();l.hasClass("region-screenshot_revocation")?a.revocation():l.hasClass("region-screenshot_close")?a.triggerEvent(a.closedCallback):l.hasClass("region-screenshot_finish")?a.screenshotGenerate().then(u=>{a.triggerEvent(a.screenshotGeneratedCallback,u)}):l.hasClass("region-screenshot_download")&&a.screenshotDownload().then(u=>{a.close(),a.triggerEvent(a.screenshotDownloadCallback,u)})}),this.handle.style.display="none"}updateHandlePosition(){let{startX:t,startY:n,endX:r,endY:i}=this.region;const o=10;let s=this.handle.style,a=this.handle.offsetWidth,l=this.handle.offsetHeight,u=0;r>a?u=r-a:u=t,s.left=u+"px",n-o-l<0&&i+o+l>window.innerHeight?(s.top=i-o-l+"px",s.left=u-o+"px"):i+o+l>window.innerHeight?s.top=n-o-l+"px":s.top=i+o+"px"}updateHandleDisplay(t){this.handle.style.display=t}revocation(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawHistory.pop(),this.drawHistory.length&&this.ctx.drawImage(this.drawHistory.at(-1),0,0)}async screenshotGenerate(){this.drawTextActivity&&await this.drawTextActivity();let t=this.getOriginImg(),n=t.getContext("2d");return this.canvas&&n.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height),t.toDataURL("image/png")}async screenshotDownload(){let t=await this.screenshotGenerate(),n=document.createElement("a");return n.href=t,n.download=this.downloadName+".png",n.click(),t}drawRectangle(){this.createCanvas();let t=this,n,r,i,o,s=!1,a=!1;this.canvas.style.cursor="crosshair";let l=null;function u(c){s=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0);let{x:d,y:p}=t.getMouseRelativeXy(c);n===void 0&&r===void 0?(n=d,r=p,i=d,o=p):(i=d,o=p),i=Math.min(i,t.canvas.width),o=Math.min(o,t.canvas.height),i=Math.max(i,0),o=Math.max(o,0);let h=t.checkedLineWidth,g=t.checkedLineColor;l=()=>{t.ctx.beginPath(),t.ctx.rect(n,r,i-n,o-r),t.ctx.strokeStyle=g,t.ctx.lineWidth=h,t.ctx.stroke(),t.ctx.closePath()},l()}function f(c){if(a||c===!0){if(document.removeEventListener("mousemove",u),!s&&c!==!0)return;l&&c!==!0&&t.saveHistory(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f),t.canvas.onmousedown=null,t.canvas.style.cursor="default",c!==!0&&t.drawRectangle()}}return this.canvas.onmousedown=function(){a=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0),document.addEventListener("mousemove",u)},document.addEventListener("mouseup",f),f}drawCircle(){this.createCanvas();let t=this,n,r,i,o,s=!1,a=!1;this.canvas.style.cursor="crosshair";let l=null;function u(c){s=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0);let{x:d,y:p}=t.getMouseRelativeXy(c);n===void 0&&r===void 0?(n=d,r=p,i=d,o=p):(i=d,o=p),i=Math.min(i,t.canvas.width),o=Math.min(o,t.canvas.height),i=Math.max(i,0),o=Math.max(o,0);let h=t.checkedLineWidth,g=t.checkedLineColor;l=()=>{t.ctx.beginPath();let m=i-n,y=o-r,v=n+m/2,x=r+y/2;t.ctx.ellipse(v,x,Math.abs(m/2),Math.abs(y/2),0,0,Math.PI*2),t.ctx.strokeStyle=g,t.ctx.lineWidth=h,t.ctx.stroke(),t.ctx.closePath()},l()}function f(c){if(a||c===!0){if(document.removeEventListener("mousemove",u),!s&&c!==!0)return;l&&c!==!0&&t.saveHistory(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f),t.canvas.onmousedown=null,t.canvas.style.cursor="default",c!==!0&&t.drawCircle()}}return this.canvas.onmousedown=function(){a=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0),document.addEventListener("mousemove",u)},document.addEventListener("mouseup",f),f}drawPaint(){this.createCanvas();let t=this,n=!1,r=!1;this.canvas.style.cursor="crosshair";let i=null,o=[];function s(l){n=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0);let{x:u,y:f}=t.getMouseRelativeXy(l);u=Math.min(u,t.canvas.width),f=Math.min(f,t.canvas.height),u=Math.max(u,0),f=Math.max(f,0);let c=t.checkedLineWidth,d=t.checkedLineColor;i=()=>{o.push([u,f]),t.ctx.beginPath(),t.ctx.moveTo(...o[0]);for(let p=1;p<o.length;p++)t.ctx.lineTo(...o[p]);t.ctx.strokeStyle=d,t.ctx.lineWidth=c,t.ctx.stroke(),t.ctx.closePath()},i()}function a(l){if(r||l===!0){if(document.removeEventListener("mousemove",s),!n&&l!==!0)return;i&&l!==!0&&t.saveHistory(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),t.canvas.onmousedown=null,t.canvas.style.cursor="default",l!==!0&&t.drawPaint()}}return this.canvas.onmousedown=function(){r=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0),document.addEventListener("mousemove",s)},document.addEventListener("mouseup",a),a}drawMosaic(){this.createCanvas();let t=this,n=!1,r=!1;this.canvas.style.cursor="crosshair";let i=null,o=[],s=document.createElement("canvas");s.width=t.canvas.width,s.height=t.canvas.height;let a=s.getContext("2d"),l=document.createElement("canvas");l.width=t.canvas.width,l.height=t.canvas.height;let u=l.getContext("2d"),f=this.getOriginImg(),c=this.getMosaicImg();function d(h){n=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),a.clearRect(0,0,t.canvas.width,t.canvas.height),u.clearRect(0,0,t.canvas.width,t.canvas.height),u.drawImage(c,0,0),a.drawImage(f,0,0);let{x:g,y:m}=t.getMouseRelativeXy(h);g=Math.min(g,t.canvas.width),m=Math.min(m,t.canvas.height),g=Math.max(g,0),m=Math.max(m,0);let y=t.checkedLineWidth,v=t.checkedLineColor;o.push([g,m]),a.beginPath(),a.moveTo(...o[0]);for(let x=1;x<o.length;x++)a.lineTo(...o[x]);a.strokeStyle=v,a.lineWidth=y,a.save(),a.globalCompositeOperation="destination-out",a.stroke(),a.closePath(),a.restore(),u.drawImage(s,0,0),u.beginPath(),u.moveTo(...o[0]);for(let x=1;x<o.length;x++)u.lineTo(...o[x]);u.strokeStyle=v,u.lineWidth=y,u.save(),u.globalCompositeOperation="destination-in",u.stroke(),u.closePath(),u.restore(),i=()=>{t.ctx.drawImage(l,0,0)},i(),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0)}function p(h){if(r||h===!0){if(document.removeEventListener("mousemove",d),!n&&h!==!0)return;i&&h!==!0&&t.saveHistory(),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p),t.canvas.onmousedown=null,t.canvas.style.cursor="default",h!==!0&&t.drawMosaic()}}return this.canvas.onmousedown=function(){r=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0),document.addEventListener("mousemove",d)},document.addEventListener("mouseup",p),p}drawText(){this.createCanvas();let t=this;this.canvas.style.cursor="text";let n=null,r=0,i=0;const o=[3,3],s=1;let a=!1;this.drawTextActivity=()=>new Promise(f=>{if(!n)return f();if(!n.children[0].innerText)return n.remove(),n=null,f();$Ct.toPng(n.children[0],{quality:1}).then(c=>{let d=new Image;d.src=c,d.onload=()=>{let p=r,h=i,g=n.scrollLeft-s,m=n.scrollTop-s,y=n.offsetWidth,v=n.offsetHeight;t.ctx.drawImage(d,g,m,y,v,p,h,y,v),t.saveHistory(),n.remove(),n=null,f()}})});function l(f){if(n){if(a)return;a=!0,n.children[0].style.borderColor="#0000",t.drawTextActivity().then(()=>{a=!1})}else{let{x:c,y:d}=t.getMouseRelativeXy(f);n=document.createElement("div");let p=30;r=Math.min(c-o[1],t.canvas.offsetWidth-(p+o[1]*2+s*2)),r=Math.max(s,r),i=Math.min(d-(o[0]*2+t.checkedTextSize)/2,t.canvas.offsetHeight-(t.checkedTextSize+o[0]*2+s*2)),i=Math.max(s,i),n.style.cssText=`
            position:fixed;
            left:${r+t.canvas.offsetLeft}px;
            top:${i+t.canvas.offsetTop}px;
            z-index:10000;
            overflow:hidden;
            font-weight:bolder;
            border: ${s}px solid ${t.checkedTextColor};
            `,n.innerHTML=`
          <div 
          style="
          min-width:${p}px;
          max-width:${t.canvas.offsetWidth-r-o[1]*2-s*2}px;
          max-height:${t.canvas.offsetHeight-i-o[0]*2-s*2}px;
          min-height: ${t.checkedTextSize}px;
          background: #0000;
          
          outline:none;
          padding:${o[0]}px ${o[1]}px;
          font-size:${t.checkedTextSize}px;
          color:${t.checkedTextColor};
          font-family: 'Arial';
          
         "></div>
        `,document.body.appendChild(n),n.children[0].setAttribute("contenteditable","true"),n.children[0].focus()}}function u(f){f.target!==t.canvas&&n&&f.target!==n.children[0]&&!Mi(f.target).parent().hasClass("region-screenshot_finish")&&l()}return this.canvas.addEventListener("click",l),document.addEventListener("click",u),()=>{this.canvas.removeEventListener("click",l),document.removeEventListener("click",u),this.canvas.style.cursor="default"}}drawArrow(){this.createCanvas();let t=this,n,r,i,o,s=!1,a=!1;this.canvas.style.cursor="crosshair";let l=null;function u(c){s=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0);let{x:d,y:p}=t.getMouseRelativeXy(c);n===void 0&&r===void 0?(n=d,r=p,i=d,o=p):(i=d,o=p),i=Math.min(i,t.canvas.width),o=Math.min(o,t.canvas.height),i=Math.max(i,0),o=Math.max(o,0);let h=t.checkedLineWidth,g=t.checkedLineColor,m=10*Math.PI/180,y=20*Math.PI/180,v=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2),2),x=Math.min(h,v/3)/2/Math.sin(m),_=x*1.2,E=i-n,C=o-r,w=Math.atan2(C,E);l=()=>{t.ctx.beginPath(),t.ctx.beginPath(),t.ctx.moveTo(n,r),t.ctx.lineTo(i-x*Math.cos(w-m),o-x*Math.sin(w-m)),t.ctx.lineTo(i-_*Math.cos(w-y),o-_*Math.sin(w-y)),t.ctx.lineTo(i,o),t.ctx.lineTo(i-_*Math.cos(w+y),o-_*Math.sin(w+y)),t.ctx.lineTo(i-x*Math.cos(w+m),o-x*Math.sin(w+m)),t.ctx.lineTo(n,r),t.ctx.closePath(),t.ctx.fillStyle=g,t.ctx.fill()},l()}function f(c){if(a||c===!0){if(document.removeEventListener("mousemove",u),!s&&c!==!0)return;l&&c!==!0&&t.saveHistory(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f),t.canvas.onmousedown=null,t.canvas.style.cursor="default",c!==!0&&t.drawArrow()}}return this.canvas.onmousedown=function(){a=!0,t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawHistory.length&&t.ctx.drawImage(t.drawHistory.at(-1),0,0),document.addEventListener("mousemove",u)},document.addEventListener("mouseup",f),f}drawCustom(t){let n=Mi(t).parent()[0];return this.createCanvas(),typeof n.onDrawingOpen=="function"&&n.onDrawingOpen(this.canvas,n,()=>{this.saveHistory()}),()=>{typeof n.onDrawingClose=="function"&&n.onDrawingClose(this.canvas,n)}}saveHistory(){let t=this.canvas.toDataURL("image/png"),n=new Image;n.src=t,n.onload=()=>{this.drawHistory.push(n)}}close(){this.canvas&&this.canvas.remove(),this.handle.remove()}}class ICt extends wU{constructor(t={}){super(),t.regionColor??(t.regionColor="#409eff"),this.region=new MCt({...t}),this.tools=new OCt({region:this.region,...t});let n=getComputedStyle(document.body);this.bodyOriginStyle={overflow:n.overflow,userSelect:n.userSelect},this.initializeFinished=!1,document.body.style.userSelect="none",document.body.style.overflow="hidden",this.screenshot().then(r=>{let i=r.toDataURL("image/png"),o=new Image;o.src=i,o.onload=()=>{this.webRTCStream&&(this.region.screenshot=o,this.region.on("regionDragStart",s=>{this.tools.updateHandleDisplay("none")}),this.region.on("regionDragEnd",s=>{this.tools.updateHandleDisplay("flex"),this.tools.updateHandlePosition(s)}),this.tools.screenshot=o,this.region.init(),this.tools.on("toolsCanvasCreated",()=>{this.region.notAllowDragRegion()}),this.tools.on("closed",()=>{this.close()}),this.tools.on("screenshotDownload",()=>{this.close()}),this.tools.on("screenshotGenerated",()=>{this.close()}),this.initializeFinished=!0)},o.onerror=s=>{this.triggerEvent(this.errorCreatedCallback,s)}}).catch(r=>{this.triggerEvent(this.errorCreatedCallback,r)})}screenshot(){return new Promise((t,n)=>{let r=document.createElement("div");r.style.cssText=`position: fixed;top: 0;left: 0;width: ${innerWidth}px;height: ${innerHeight}px;z-index: 9999;cursor: none;`,navigator.mediaDevices.getDisplayMedia({video:{},preferCurrentTab:1,audio:!1}).then(i=>{document.body.appendChild(r);let o=document.createElement("video");o.setAttribute("autoplay","autoplay"),o.srcObject=i,this.webRTCStream=i;let s=null;o.onplay=function(){s=setTimeout(function(){r.remove();let l=document.createElement("canvas");l.width=innerWidth,l.height=innerHeight,l.getContext("2d").drawImage(o,0,0,innerWidth,innerHeight),t(l)},500)};let a=this;i.getTracks()[0].onended=function(){r.remove(),a.initializeFinished?a.triggerEvent(a.closedCallback):(clearTimeout(s),a.triggerEvent(a.errorCreatedCallback)),a.close()}}).catch(i=>{this.close(),n(i)})})}close(){this.region&&this.region.canvas&&this.region.canvas.remove(),this.tools&&(this.tools.handle&&this.tools.handle.remove(),this.tools.canvas&&this.tools.canvas.remove()),this.webRTCStream&&(this.webRTCStream.getTracks().forEach(t=>t.stop()),this.webRTCStream=null),document.body.style.overflow=this.bodyOriginStyle.overflow,document.body.style.userSelect=this.bodyOriginStyle.userSelect}on(t,n){super.on(t,n),this.region.on(t,n),this.tools.on(t,n)}}(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.region-screenshot_canvas{cursor:crosshair;position:fixed;z-index:9999}.region-screenshot_tools{position:fixed;z-index:10000;background-color:#fff;list-style:none;padding:10px;box-shadow:0 0 4px #9b9b9b}.region-screenshot_tools *{padding:0;margin:0}.region-screenshot_tools>ul{display:flex}.region-screenshot_tools_item{height:100%;display:flex;align-items:center;margin-right:10px;position:relative}.region-screenshot_tools_item:last-child{margin-right:0}.region-screenshot_tools_btn{width:20px;height:20px;cursor:pointer;background-size:100% 100%}.region-screenshot_tools_item.region-screenshot_disabled .region-screenshot_tools_btn{filter:brightness(2);cursor:no-drop}.region-screenshot_tools_options{display:none;list-style:none;position:absolute;background:#fff;top:40px;left:-10px;padding:10px;box-shadow:0 0 4px #9b9b9b;border-radius:3px;--tools_inner_translate_x: 0px;--tools_inner_translate_y: 0px}.region-screenshot_tools_options.region-screenshot_top{bottom:40px;top:unset}.region-screenshot_tools_options:after{content:"";display:block;-webkit-clip-path:polygon(50% 0%,0% 100%,100% 100%);clip-path:polygon(50% 0%,0% 100%,100% 100%);width:10px;height:7px;background-color:#fff;position:absolute;left:15px;top:-6px;transform:translate(var(--tools_inner_translate_x),var(--tools_inner_translate_y))}.region-screenshot_tools_options.region-screenshot_top:after{bottom:-6px;top:unset;transform:translate(var(--tools_inner_translate_x),var(--tools_inner_translate_y)) rotate(180deg)}.region-screenshot_tools_options li{display:flex;align-items:center;margin-right:10px}.region-screenshot_tools_options li:last-child{margin-right:0}.region-screenshot_tools_item.region-screenshot_active .region-screenshot_tools_options{display:flex}.region-screenshot_tools_item.region-screenshot_active .region-screenshot_tools_btn img{filter:drop-shadow(var(--active-color) 20px 0)}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size{color:#bdbdbd}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size.region-screenshot_active{color:var(--active-color)}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size{min-width:10px;min-height:10px;margin-right:10px;cursor:pointer;display:flex}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size>div{background-color:#bdbdbd;border-radius:50%;margin:auto}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size.region-screenshot_active>div{background-color:var(--active-color)}.region-screenshot_tools_size_instruction_list>.region-screenshot_tools_size:last-child{margin-right:0}.region-screenshot_tools_color_instruction_list>div{margin-right:10px;width:15px;height:15px;cursor:pointer;box-sizing:border-box;position:relative}.region-screenshot_tools_color_instruction_list>div:last-child{margin-right:0}.region-screenshot_tools_color_instruction_list>div.region-screenshot_active:before{content:"";display:block;width:7px;height:7px;background-color:#fff;position:absolute;left:50%;top:50%;margin-left:-3.5px;margin-top:-3.5px}.region-screenshot_tools_split{width:1px;background:#878787;margin:0 10px}.region-screenshot_rectangle .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAARJJREFUWIXtljFOAzEQAMcrCtKB4AupqFNBCe/wPeHafCC0PMHSlYgXQJlUqVPxBZCguqt2KWKE5LOg8Ikg4W3s80qeOa8trTMzDhlyUHoVAI5yi03TXKjqHXAFHBcyBmAtIm0IYZcmXXoJI3wLzArBafQiskglRicQ/3zmnHtW1aWIvBeCT4CVmc3j3jffCrA/dlR12XXdQyEcAO89wD1wmeZyl/Cz5q9TwAFU9SVOR2U9+CuoAlWgClSBKlAFqkBOYIjj2WQQkfM47dNcriNaA9cicuu9d8BbCdzMToFV/Nz8KCAirapuzWzOvo2aKnoRaUe8dCGEsBORBfDEVzlKYgAecx0xZNry344/+Qr+l8AHQ4RWoekXbowAAAAASUVORK5CYII=)}.region-screenshot_rectangle.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAQpJREFUWIXt1zFKA0EUh/HfWyySTtErpLJOpU1EzxHwBGlzAW29QbAWT6CkipV1Kq+goFVSZSx2QdgsWkwghfOqYR/s9828WfhvpJTss6q90osADroeXtw7TRt3OEcvk7HGIiqT+diy3Yz2JWzgr+hngtu1isqwLbF1As3O+3iLZJrCVyb4EDcYNO+++lVAfewimc6vPWbCwWgGHnDW7nVdwh6kyscu4CC8N6utse79KygCRaAIFIEiUASKQJfAGmLjeGeU5KRZrdqtrkS0wGUKt6OZwGcWOxxFHcng5U+BqEyaUDpQx6isip/Mu4rKpN3fGsF8bBmVIZ4148isNZ66EnEtWP4N/7vAN0/fQ9xs7Al1AAAAAElFTkSuQmCC)}.region-screenshot_circle .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAy5JREFUWIXFl0+PFEUYxn9v9fgJxAOgB92VyI2sGjhAiEE5IP8SNkR3prt3PgcclrjfYzNTM8REYlgREhNjopts0ASJJ4MgmghoXD4BSdfrod/e7Z0ZenvcmexzqenuSj2/qumu9ylRVfZSbk/dgUbdjiIicRy/C1xU1RPOuf2qetCePVXVZ8AasOq9v6c1l1Z26icikiTJZVVdBmZr8v4GXPXe39gJpBIgjuNZEbkOvD8w+C0ReRxCeOKcE+BgCGHGOXdOVd8uwd9V1YVut/vH2ABpmn6gql8Ar9qtm6q65L3/pWpG7Xb7SAjhmqqet1vPgflut/t9bQAz/wZ4BdgAPul2u99VGQ+q1Wqdcs59DuwDXgCnR0EMAdiy3yWf+a9RFJ1ZWVn5cxzzQkmSvAncBg4Dz7MsO9rv9x+X+2z7DCXXdTP/dzfmAPbff0y+ivsajUZfROSlAEmSXGbrhft0N+ZlCBFZAFDVY3Ecz48EMLLP7PLmuP95lTqdzrci8pVdLpdXYROg2Wy+V3xCqro0KfOSijEPpWk6NwQQRdFFABF5uNOn9n/U6XTuk+8hZFl2YQgghHDc2luTNi/pDoCInBgCEJFiX384RYBHZa9tAMB+e/j3tNxV9am1IwECQAhBmJKsbmx6DQL8Y50OTAsghFDM/NkogGJ56pbcseWcK8YeCbBm7blpAQBnAERksyiVAVatnW2320cm7RzH8Vyx0YUQil1xC8B7fw/bKEII1yYNICLFmA96vd79IQCLTlft9/k0TT+clPni4uJp4KyNfaUc07blAct/66p6jLyEHq2KU3VkmeAn8mCy7r0/XgbYVo411wJ5jHoNuG0D7Mb8jplvRFHUHAypQ+cCm/E8eYw6DPzYarVOjWsex/FH5DN/B3ihqpdG5YuXhtIkSU4CN4weq+dLVtWqjOfshTtrtzZU9ZL3fm1U/8pY3mw232o0Gn17Jwo9Ar5W1d+dc38BhBDeEJEZ8j1kptR3PYqiZlWyqnUwsRi1DByq7LylB6p6pdfrfbmrg8kgSJqmc1mWXbB6fgB43R4/Id9ef1DVVe/9zzVB6wNMS3t+Ov4Pf4B/Yk4ydUUAAAAASUVORK5CYII=)}.region-screenshot_circle.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAyJJREFUWIXF181vVFUYx/HPc4t/gbgAdIFUIjtSJbCAtEOFBfKW0BiFDVP4L2ABkT8DabvAmEgML0JilMJIQtAEiSvDi2AioLH8BYTex8XcKVOmDFPaht/q3HNPnt/3vD8nMtObVPFG3bGs14ZBDJ3ykbA3w5ZIK5JV1b9HeIxr0rmro24mPQ1tvGoKghga8xlOoL+XoJnuKBxtHHTmVSBdAWpf6Vf4Ghvag0e4EOG+0kMhhFVlaU2EXfigLcSNctr+xmEP5g0wdEotwrd4u+nsbHBsctTv3XpUG7c+0/Fgd1X1JBiZrGv0DFCZ/4C3MFXw+eW6yW7GL2rrhOEsfYPlydOC7XNBdABUw35Ds+d/CDuuHPTXfMxbGjxpddHnItbhyTI2/lh3v73NrG0YRDXnbyf/LcQcGoc9KKd9iiksf8bpIF4KUK32DdDHFwsxb4fA/upz0+C4kTkBKrIvQTo73znvpit1PyXnQelE+yjMAAyO+1i1hYJji2XeUpbNmBHW1iYMdAAo7a1Kd1+11V5HjUNuZbrTpLGnE6CwGTJdWGzzlqJwqfLY0gEQOXOu310qAKV7VWlVB0CyAiL8s2QAhUeVVydAUELG7H26mMqyGbvlNQsA/1Y/Vy4VQESz55kezwXwqInZ25X7muqvQOYEuNb0t2sJAXZomsxcSs8B0rmq1F8bt36xnYfHDKgOuiKqU7Ed4Oqom62DItPxxQYozcS8PVl3qwMgSYWjEOyujflkscyHT9mOnRDpSHuaNisfqPK/69iEqXLaxm7pVC+qcoJfNROT6426ze0As67jJMtp+/EE7xR9Lg6etHqB5pewHFMRDryYpHa8CxqHPQhGkqdYV/T5ZeuE4fmaD43bVvX8w+Rphn1z5RcvTUq3jhlMzlT0kvNZOtY49HwBzaXhMQPVgttZVU1l2Hf1YHOb9wwA28a8/4zTmmuipXvC99Kfwd8V3HvCGmkX1rQaJtcjHOiWWfX0MBkcN6J0IsLaro2f63akI1dGfbegh8mLILUJA9KeTFsyrRTeBelhhMfJz32cu1z3W4+gvQMsld746/h/qVcufEyjrBYAAAAASUVORK5CYII=)}.region-screenshot_paint .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA21JREFUWIXNl01oHGUYx3/PzDSdhB4siC0iNdjVgx78QDwkag8KxYsXTSzZ7E7W1gpi8yEaTaiu09omVZst6sHUppPdicTGg156qEUQRGqpHooEemgQxS8q2BioWTa783jQLdPN7mYbk43vafjv8zy/H++8+y4rqspaLmNN6f8HAateoGg0eqtlWc+r6h/ZbPbI1NTUfN0EotHoRtM0v1DVZgDbtpuBZ6FOr8A0zQ+A5lDUWnxYdYF4PL4beKIk/rQuAp2dnXcCqXAmIt+ZpvnGqgt0d3evF5EPgaZQfMUwjHbP87KrLjA7O/uWiNwTzlT1Oc/zLoQzWY2b0HGcx1T1JCBXQSJT6XT6qdLaFd+Bjo6OTarqheHATKFQeKZcfSUBqZBXXa7rGpZlTQCbQvECEJ2YmJgr17PoIjo4cvwTDHkA5YRYDA3sSfxeq8DMzMzLwKMl8UAmkzlbqWfxDhh6DOUHoE/zXDyYGt9RCzwej98PvF4Sn/J9f6RaX8VDOJQaf0ghDboFNbYPvuB8XmlIe3v7Btu2vwXuCMWXTNO82/O836oJVDyEA31dXyK5VuCySLC32hDbtt8vgQeq2rkUvKoAwGDv7l9BzytsrVQTi8XiQLQkftP3/dNLwZcUOHD4+IMgLQrny33uuq4hIj3hTES+bmxsfK0WOFT4Od6fSt9lStAvhkSBy6bQU1ojItLW1tYEbLNt+12gS0T+VNWO0dHRhWUJuG/7NzVY+fdMeBKlAJywFvSl/v6nfyltdBynRVU9Ve3IZDKJWCz2marmfN//vlb4NQKH3vG3rLPyZ1TZjHA0yBcO7X1xV8VhQRDEgduBM47jHIhEIvuSyWRwPfBrBPKF/D6BzUjw+GDvzpPVmhKJhA20FWcEQbB1enp6PTC/bAFBHgY9uxQcIAiC7cBGICsivZlMZvR6wcUV+hZoHvSvWppyudw5YFxVW9Pp9LLhED6EIl+h7BhOjUVe6dt5sVyx637c0LDhym2Tk5MXgMR/AV/FFq/i4dRYJMA4BzIvBK+aVnCqf8+unwDcw0dvtGTdIyLsB25emPvxhmQymV9RAYDhkbF7AzGOAff9G83xzy41AQhcUqRnsK/ro5WALxIoZkNH0i2oblPRW1SlAfRnkG/yc5xOJruy5QatpEBd15r/N1xzgb8BNHA+t65ZrO8AAAAASUVORK5CYII=)}.region-screenshot_paint.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA0hJREFUWIXNl0toVFcYx3/fneuo0ywq1AdS0uCjC11UiwhN1CQaEF104xMj6Z0YI4hiYtvUBHU6Wk1sNSNVpNVkJsEHahd2Y0FFJyJqRV2IGxdKae0LC5XGR8Lkzv26sBMmk7mTUTNJz+re/znf+f0499yXqCrD2Yxhpf8fBMyhAi1o5R3HYIPC37E89l9bRteQCcw9wRjToAMoEMD7lAJgHQzRJTBjHAEKEucCRb19uYbPj1ANLEmJv08c5HQFyiJMcyCUEt9F+CLnAosPMDIOxwV8SfEzhOVRi+6cC3S/wVfAjORMlPVRi3t9sxw8CUvCLBLhLCCJTOF0h58VqWMHfQXKWhgvQiQZDjzweVmbbrybgLjkGZsEMeIejgHjk+IegfIfyulMV9PvNtzdHD6DIbNRTolJY/1G/1/ZChTn8xlQ1idU6i9VcsOtpv8KGNqC8jNQqzb3d4faVmYDLw0zC/g8JT7XUUlzpjrXTdgYapur0A6ajxoLGzZ/dNEVfog8HcVtEd5NZAqPRHgvavFnJgHXTVhfa11BYkXAYxFna6ZJ8PFNCtxBWD0QPKMAQENN9R+gdxQmu42ZH6YCpTw5E+HLDosLA8EHFNi1LzwHpFDhTrp+CWI4wqaU+McnMbZnAweXl9HOUPt0jzh1Ykg58NjTH4KAlIzFRxfF+DiAYgH/OHFW3aqm55UEgnuPjvOa9kEPLEWJA6fMHv20rq7y99TC0nYKdTQRlFVRC39JhPOGErtcxU/ZwvsI7Pn6aP4I076uygSEw44d37P1kyrXyRyHCoGpCNdLw+y6/JAdGsB5GXgfATtu7xCYgDgfNtSsOZupqLSNUQLLeucQJn8wjZHw4jPrlQQEmQd6YyA4gCgLFcYA3UBN1M+3LwtOtKS7QG3Q59kUmcpNhDYDil4HDsmbUOQqysqmUOuULbVr7qcbHAx+5/XmPZt0/mPrHuB/HXAvNvEobgq1TnEwboJ0Cc42j+mcq9tY9StAcN/ht0wZsUCEncDEns5f3gwEAvagCgA0NbfOdMRoAd7/L+rkxSr5AAQeKbKpodY6ORjwfgKJrHF/eyGqxSr6tqp4QX8DuWV3ciEQsLrTTTSYAkPahv3fcNgF/gUHfRK9X5iTWQAAAABJRU5ErkJggg==)}.region-screenshot_mosaic .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAU9JREFUWIXtlzFOw0AQRd8QBJHi0wANRDkG7rzyEaiRoEoocwevU/kWUCQuwmlIpCjCuxTEkr2FQbDRpvA0K8/X+n99z4zGYq0lZJwFZT8FAeduIk3TcVVVLyJyDYw88WyBtbX2Mc/zZROQZg2kaTo2xrwCA0/EblQiMsmybFUnWg4YY2bAwFo7F5FnrfXWB6tSagRMgQdgDtzWmFsDNwA+yQG01tvdbvcEYK29amJuDYzqC799uVKq6MJFpMyybF4UxUYpBXDRJeAvcd8F/jRngrdhL6AX0AvonAOHIdPZ51pr+Y+A4A70AnoBvYDOOSAi5bH/G1pLqVJqw/dWFPlcyQDiOI6Gw+EHsNdaX9Z59xOsD+c0juPIM/ns8PjexFoOJElyJyJvHG8t/zTGTBaLRVknWg7keb4UkYmIlMDeI/EeWLnk4DgQIoK3YXABXw1vesmSLj/iAAAAAElFTkSuQmCC)}.region-screenshot_mosaic.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAU9JREFUWIXtlrFOwlAUhr8LCCHladRFCUPr4BM4klBHJ2cTncCRkbUhbrwBAxYdoAM+jeDQSI8LNe0dioZrrkP/8Zzb/l9Oz7k9SkSwqYpV9/8AUNMD3ph2Ijwq4QRwDPlsgFUF7mY+i2xCZXvAG9OWhBegashY11aEzvyaZRrIVUASBkBVhGHjiIdpl40J18snnHhLH+FWKYbAWZrTe+AUwKQ5wLTLhg/uAQSOszm9B5zvB34oL2BSeEARPfcYhjes3QAU1IsAfi2Bq0L/PdeM9TEsAUqAEqDwHvACJvvmPPRRhwBYr0AJUAKUAMX7gCLa9z8/VLml1A1YA069RsvkSgbgjmjR5F0gnvs00rj+CVYA8Za+O6Jl0lyaDAAUvGVzuQpcBJwn8MrfreWfKDphjygN5Cow81mI0AEigdiU6+5dS90ctArYkPUxtA7wBTIzaWOd+fwuAAAAAElFTkSuQmCC)}.region-screenshot_text .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAANNJREFUWIXt1rEKwjAQBuD/knQoZHfVF3Dq6FN0cdClT5ZFxK1v4QP4AjoVfIJAaXNuDqXYGIRSuZuOg9x9wwWOmBlzhpp1ugAAmGGhLMszgD0icHmeAwC89zGzAjNf6ro+fAQAKGKGExG01u88YpkVERXD4hhgp5TaTnUzxqwAnAAgy7Jj13XPqTchhNuwRqnfsKqqdd/3dwDQWm+cc4+UPrMvoQAEIAABCEAAAhDAcgFt2/JY/m2MHaVRYa1tvPdXZmZrbZPaJ/ko/VUsdwf+BvACFsE7mJMe4HQAAAAASUVORK5CYII=)}.region-screenshot_text.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAOZJREFUWIXtljFqAlEQhr95bmERC7WwjVWwsbLTxitskyIpcpF0OYhFCHZ7BDsP4AW0WhCxWAik0LeTQkixLL64CIsyfzUMzP9/xQyMqCp1ytWabgBAVGzEcfwFPBOAU2nwPf5AVWkt3xH1oaxcVedJkrycBQBGoXAAbXY4tp/+avnZhUaciIyKzTKAiXNuGHI7dAc94BPAdwevUbrfhmbyPF8Ve1L1DKczHlHWJxf6izc2VXxqX0IDMAADMAADMAADMIDbBXAeLasvVdlT+i9lnvTBsRRFM09a1afyU3ot3e4O3A3AL04FPO/v7IR3AAAAAElFTkSuQmCC)}.region-screenshot_arrow .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAUBJREFUWIXtlkFKw0AUQN+fuKrgATyBpyhUtMcI2eUE3qG48wghgxdQ3Ej34gFceAChKxGEuMkfNylITWgmmSFd9EMghD95Lz/5ky/OOaYMMyn9KHAIAicxb57n+ayqqntVXVlrX9pyJFYXpGl66px7EpG5iHwBy6IoXnfzolQgz/MZ8CAicwDn3I+qfrflBv8GmrI/Aovm0kZVL621b9EFfOFBBYbAgwkMhQcRGAOHli7IsmypqjcAzrnbsiyfuxb/bTUAEfkAFtba974P8E9AVc+BKwBjjO1auNtqwKau62sfOAx8BWPLPkogJNxbIDTcSyAGvLdALHgvgZjwvQKqGhUOe37HIrICzppz701mtMAWzsBNJoTANj6NMXdpmnYmNGPXOpbARXN0RpIkhS8cDmAqjjaU9o3JK3AUmFzgF9Gc75AgVGnuAAAAAElFTkSuQmCC)}.region-screenshot_arrow.region-screenshot_active .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAURJREFUWIXtljtOw0AQQN84TuNIHIATcAok8wmdjwBBnIE7WHS0LkAIlAsE0ZAAJeIAFBwAKRVCUEBEvBSsKIJNdu1dOUVGcmPN+j3PakYjSimajKBR+lJgEQRCnx9PMqK3Nn2E9LbHfVGO+OqCnXM6n1OuRLEOvAY53dEBD7N5Xq4gyYgmXww0HOBDAt6Lcp0L6LJfArF+NW7BxnCfR+8CtnCnAlXgzgSqwp0I1IFDQRtuntDNhUMAJRzd9bguOzzTaih4DlvEw12eTH/gzyDKYRXY+rHjouxgkhFN2gyE31Ybh7BtA4eKV1C37LUEXMKtBVzDrQR8wI0FfMGNBHzC5woo/MJh/kKSAitaxnrImMS/FRANp+KQMQnTlexlCsfxaXmCBKQ3e4x8CazppzRUzpktHBZgK/a2lJpG4xVYCjQu8A0X1ZG/HE+CigAAAABJRU5ErkJggg==)}.region-screenshot_revocation .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAe9JREFUWIXtl79v00AYhp9zqkRWWcPCwE5b0YGZoRUDGwseqHKSjdQNsfRPaYeIkh92WDKXBdJIbJUQUocGMVZdkGAFkYDPH0PtyqTBEo1jM/RdfLo7+X3uu/NrW4kIZcoq1f0a4H8AWMoa9DyvHobhgYicBUHwuFAArfVN4BBYVUotwhv4yxZ4nldXSg2AVeCTiDwqDMDzvLox5lBE1mLzjSAIPhcCULT5HwBlmAOoJIq11u+Bezne+ztwqpQaiMi+7/snsyaltyDK0RxgGVgRkefAsdZ613Gc6vSkiwpMbcEJsOn7/perumutlzl/iraAbaAGDMfj8cN+v//zEsAiIBK5rrtujDkAbimldrvd7rOZAAlEGIbDmH4EbOQIcQQsWZZ1t9PpjGBGDrRara/AJucVWAGGcSrOpXa7fayUegFUoih6mvTPTMJ4xWmI1/MCABhjXsXNB5kAUxAfgB95ANRqtVHcvJ30Zb4NY4jcsmEymSjLsgAuDl7R3wN34utZKQCVSmUrbr4tHMB13XUR2QZMFEX7hQKkgqgK7PV6vY/JWOYhnEeO49ywbXsNeBKvvAoMbNveSc+7lIRZajQa75RS96/AY4A927Z3ms3mr/TAwioAfANOReSNiLxMlz2tf6rAIlT6f8E1QOkAvwF4y/HzpBvWEgAAAABJRU5ErkJggg==)}.region-screenshot_close .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAp5JREFUWIXtV81OE2EUPXfEtB02PAAQHTe+gezMbNy6kCCUzhcmVNGY9BXKvINgiij9IWAGTNPExGUTH8CN6a7TRacrfACYAF4XdszH5Jt2Rgyw4GyanLkz53yn997JEDPjOqFdq/qtgRttwLbte0KIx5cVEEI8sm37Ydx1Uk2BEOI+gB8AJolo2zCMtXK5/CuNsOM4Wrfb3SSiNQCnzDzXaDS+R+uUCWiaNgNgEgCYueh53pbjOIn/LsdxNM/ztobiAHCXiB4otVRktVr9RkTbErWa1EQoDmBVolu+7zcTGwCAer3+kojeRUy8H2WCiKjX672NiH+Zmpp63m63z5T3jNqERERCiA1mfi1xO4ZhFKM9QURkWdYmgFchx8yHuq7nK5XKaZzGyEiZmev1+hs5CWa2e73etpyEShzAwThxYEwCskBcEuvr6xwVJyK33+8vx8We2gAQ21wfhr9/OWbeDYJgxXXd8yTPTWwAUCcRub7f7/dFkpOHSLWKVT0h4aNhGIU04qkNSEZIQWc7nY6K/38GYro9RD6bze6apjmR6pmXaUIi2gH+jGbIpW3CRAkQEXmet4GLE/Dp+Pj4hWEYRWauSbWFXC63lzSJsQnE7IALcz5MpwrACmuSbMGxBmLG7sD3/Xy02xcWFu5kMpkqERUk+nMul1v6p1WsEmfmQ5U4ALiuex4EwQqAPYl+dnJy0iyVSplYHVUCQ/EtZi7K4oPBYGncnJumOTE9Pb1PRPMS3fJ9f151rzIBy7KeRMSbuq4rTx5Fu90+03U9z8zy+//p7OzssqpeaYCZfwIIX7etIAgWxzWTjEqlchoEwSKAlkQfqWpjm7BQKMxpmjbj+34z7XoNYZrmxPDkR7Va7WsqA1eFm/tdcGvgqvAbDu2HJArxOWkAAAAASUVORK5CYII=)}.region-screenshot_download .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAT1JREFUWIXtl01OwzAQRt9gXyGVuEPZwL6IFhaAOIKzyMESyZfohiwiuAFd5ASoKmeIzMZIIaTNrxohZTaxlPF8LzOjsSPOOaa0i0nVZ4AxAIwxmTEm67tfDwUQkdWQ/f+/BDPADDADDLXWgygMwy0QAE/W2kOD7wLYAntr7fMp3y4ZCIAbIPUCp8RT4Bo46tcZQGv9KCIfwBLIjDGXVZ8oigIRefU+uVLqpSmudLmQRFEUFEWROueugNw5txaRTw+4KL9TSt0lSbIfFQB+pXgJ7PyT0noHbJr6pDdADUTZOolDTQ+0Od+9wMYLdhKvxv8DICKrNme8tfagtV77xsyVUg9tvrwaf9AgiuP4yzl3D9y2abg6G3wj6lLvOpt8FE8OcLQEYRie5ZepLgPvZ9B9+1n0GkRj2uQ9MAN8A0iYdcIARBgzAAAAAElFTkSuQmCC)}.region-screenshot_finish .region-screenshot_tools_btn{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAgxJREFUWIXtlsFu0zAYx/8fI1nNqW/Ak3AZQ6IdPQClHJDtceo78AA8AlIkKhS13UaEiihC4jRptLATt73HJECLe2g+LvHmlmZNy9Je+l0c2Yl+P//tOCFmxjrr1lrpG4GNAIDbq4RJKe8R0T4RvQvDcLhSAaVUlYh6ALaZeRfAXWBFSyCl3APQA7Cddp3ZscIFtNYVIvrgwH/6vi/tOBV5EmqtK8zcA1Cy8PF4/KDb7Z7bewpLIIV/dOCnSZLsuHCgoE2olKpics1PkyR52Ol0fk3fe+MJzNhwP7LggJOA1rrOzIqZ37Tb7a/LwLXWj4noPQAPAJj5u+/7lVar9TvrGTeBtwBqRNSXUj5dFK6UesLMl3AAw3nwCQFmHqSXHhEdaq3reeGp8JEDHxhj5sInBIQQzwEcWwlmPpJSvsgDJ6JDBz70PG8viqI/eeQvBYIguBBC1ByJLSIKr5PQWtdnwKt5Zm7rn4Oo2WzeieP4M4CdtGtMRPthGHam4cx84MKNMZW8M88UsBLGmD4z358loZR6BuAAV2/RwBhTXRSeKWAl4jj+BGDXSgB4CcDcFPxaASsxnUTabqXtsRCiFgTBxTLwuQIA0Gg0RKlU6uMqCQAAM38bjUa5d3tWzT2KoyiKy+XyIyL64nSfENHSsbuV+3OcJvEKAIwxr6Moiv8XvpBAUbX2v+KNwEbgL4W1/0SNuoZZAAAAAElFTkSuQmCC)}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const oNe=`
`,NCt='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url('+new URL("material-symbols-outlined-BZinq3R6.woff2",import.meta.url).href+') format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url('+new URL("material-symbols-rounded-DVluyMkh.woff2",import.meta.url).href+') format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url('+new URL("material-symbols-sharp-DQLBrjHA.woff2",import.meta.url).href+') format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url('+new URL("material-symbols-subset-BaAQ-FMD.woff2",import.meta.url).href+') format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}.round{border-radius:var(---round)}.small-round,.medium-round,.large-round{border-radius:var(---round)!important}.top-round,.bottom-round,.left-round,.right-round,.medium-round,.round{---round: 2rem}.small-round{---round: .5rem}.large-round{---round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:0!important}.top-round{border-start-start-radius:var(---round)!important;border-start-end-radius:var(---round)!important}.bottom-round{border-end-end-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.left-round{border-start-start-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.right-round{border-start-end-radius:var(---round)!important;border-end-end-radius:var(---round)!important}.circle{border-radius:50%}:is(button,.button,.chip).circle{border-radius:2.5rem}:is(.circle,.square):not(i,img,video,svg),:is(.circle,.square).chip.medium{block-size:2.5rem;inline-size:2.5rem;padding:0}:is(.circle,.square)>span{display:none}:is(.circle,.square).small:not(i,img,video,svg),:is(.circle,.square).chip{block-size:2rem;inline-size:2rem}:is(.circle,.square).large:not(i,img,video,svg){block-size:3rem;inline-size:3rem}:is(.circle,.square).extra:not(i,img,video,svg){block-size:3.5rem;inline-size:3.5rem}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}:is(nav,.row,dialog.max,header.fixed,footer.fixed,menu>a,menu.max,table,.tabs):not(.round){border-radius:0}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(---margin)!important}[class*=margin]{---margin: 1rem}.no-margin{---margin: 0}.auto-margin{---margin: auto}.tiny-margin{---margin: .25rem}.small-margin{---margin: .5rem}.large-margin{---margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(---margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(---margin)!important}.top-margin,.vertical-margin{margin-block-start:var(---margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(---margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(---padding)!important}[class*=padding]{---padding: 1rem}.no-padding{---padding: 0}.tiny-padding{---padding: .25rem}.small-padding{---padding: .5rem}.large-padding{---padding: 1.5rem}.left-padding,.horizontal-padding{padding-inline-start:var(---padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(---padding)!important}.top-padding,.vertical-padding{padding-block-start:var(---padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(---padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{---duration: .6s}.fast-ripple{---duration: .2s}.slow-ripple{---duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(---duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){.m:not(.s),.l:not(.s),.m.l:not(.s){display:none}}@media only screen and (min-width: 601px) and (max-width: 992px){.s:not(.m),.l:not(.m),.s.l:not(.m){display:none}}@media only screen and (min-width: 993px){.m:not(.l),.s:not(.l),.m.s:not(.l){display:none}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translateY(-100%);font-family:var(--font)}.badge.top{transform:translate(-50%,-100%)}.badge.bottom{transform:translate(-50%)}.badge.left{transform:translate(-100%,-50%)}.badge.right{transform:translateY(-50%)}.badge.top.left{transform:translate(-100%,-100%)}.badge.bottom.left{transform:translate(-100%)}.badge.top.right{transform:translateY(-100%)}.badge.bottom.right{transform:translate(0)}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}.button,button{box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:2.5rem;min-inline-size:2.5rem;font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 1.5rem;background-color:var(--primary);margin:0 .5rem;border-radius:1.25rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal}:is(button,.button).small{block-size:2rem;min-inline-size:2rem;border-radius:1rem}:is(button,.button).large{block-size:3rem;min-inline-size:3rem;border-radius:1.5rem}:is(.button,button):is(.extra,.extend){block-size:3.5rem;min-inline-size:3.5rem;font-size:1rem;border-radius:1.75rem}:is(button,.button).border{border-color:var(--outline);color:var(--primary)}:is(button,.button):not(.border,.chip):hover{box-shadow:var(--elevate1)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;padding:0 1.5rem}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:1.5rem}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:2.5rem}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button).vertical{border-radius:2rem}article{box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:1rem;border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}.chip{box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:2rem;min-inline-size:2rem;font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 1rem;margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal;letter-spacing:normal}.chip.fill:hover{box-shadow:var(--elevate1)}.chip.medium{block-size:2.5rem;min-inline-size:2.5rem;border-radius:.5rem}.chip.large{block-size:3rem;min-inline-size:3rem;border-radius:.5rem}.chip.fill{background-color:var(--secondary-container)!important;border:none}.chip.round.small{border-radius:1rem}.chip.round{border-radius:1.25rem}.chip.round.large{border-radius:1.5rem}main.responsive{flex:1;padding:.5rem;overflow-x:hidden}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}*:has(>main.responsive){display:flex;flex-direction:column;min-block-size:100vh}*:has(>nav.bottom:not(.s,.m,.l)){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.top:not(.s,.m,.l)){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.drawer.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.drawer.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 20rem)}nav.top:not(.s,.m,.l)~header.fixed{inset-block-start:5rem}nav.bottom:not(.s,.m,.l)~footer.fixed{inset-block-end:5rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){*:has(>nav.s.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.s.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.s.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.s.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.s.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.s.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.s.top~header.fixed{inset-block-start:5rem}nav.s.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 601px) and (max-width: 992px){*:has(>nav.m.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.m.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.m.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.m.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.m.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.m.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.m.top~header.fixed{inset-block-start:5rem}nav.m.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 993px){*:has(>nav.l.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.l.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.l.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.l.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.l.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.l.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.l.top~header.fixed{inset-block-start:5rem}nav.l.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (max-width: 600px){main.responsive{padding-inline:calc(var(--left) + .5rem) calc(var(--right) + .5rem)}}dialog{display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:1.5rem;z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog.top{opacity:1;padding:1rem;inset:0 auto auto 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(-100%);border-radius:0 0 1rem 1rem}[dir=rtl] dialog.right,dialog.left{opacity:1;padding:1rem;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:0 1rem 1rem 0;background-color:var(--surface);transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{opacity:1;padding:1rem;inset:0 0 auto auto;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:1rem 0 0 1rem;background-color:var(--surface);transform:translate(100%)}dialog.bottom{opacity:1;padding:1rem;inset:auto auto 0 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface)}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{---size: 3rem;---start: 1.2rem;block-size:var(---size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{---size: 2.5rem;---start: 1rem}.field.large{---size: 3.5rem;---start: 1.4rem}.field.extra{---size: 4rem;---start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):-webkit-autofill{-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){---size: 4.5rem}.field.textarea:not(.min){---size: 5.5rem}.field.textarea.large:not(.min){---size: 6.5rem}.field.textarea.extra:not(.min){---size: 7.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(---start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(---start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(---start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(---start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:4rem;line-height:4rem;font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.small>label{block-size:3.5rem;line-height:3.5rem}.field.label.large>label{block-size:4.5rem;line-height:4.5rem}.field.label.extra>label{block-size:5rem;line-height:5rem}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{---gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(---gap) + (var(---gap) / 12)));gap:var(---gap)}.grid.no-space{---gap: 0rem}.grid.medium-space{---gap: 1.5rem}.grid.large-space{---gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{---size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(---size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(---size);min-inline-size:var(---size);block-size:var(---size);min-block-size:var(---size);box-sizing:content-box;line-height:normal}i.tiny{---size: 1rem}.chip>i,i.small{---size: 1.25rem}i.medium{---size: 1.5rem}i.large{---size: 1.75rem}i.extra{---size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(---size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}header,footer{display:flex;justify-content:center;flex-direction:column;min-block-size:4rem;padding:0 1rem;background-color:var(--surface-container)}main~footer{min-block-size:5rem}:is(header,footer).fixed.responsive{z-index:12}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}:is(dialog,menu,nav,article)>:is(header,footer){background-color:inherit;padding:0}:is(dialog,article,[class*=padding])>:is(header,footer).fixed{---translateY: 1rem;transform:translateY(var(---translateY))}:is(dialog,article,[class*=padding])>header.fixed{transform:translateY(calc(-1 * var(---translateY)))}.no-padding>:is(header,footer).fixed{transform:none}.small-padding>:is(header,footer).fixed{---translateY: .5rem}:is(.large-padding,dialog:not(.left,.right,.top,.bottom))>:is(header,footer).fixed{---translateY: 1.5rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:3rem;inline-size:3rem}:is(img,svg,video).round{border-radius:.5rem}:is(img,svg,video).tiny{block-size:2rem;inline-size:2rem}:is(img,svg,video).small{block-size:2.5rem;inline-size:2.5rem}:is(img,svg,video).large{block-size:3.5rem;inline-size:3.5rem}:is(img,svg,video).extra{block-size:4rem;inline-size:4rem}:is(img,svg,video).responsive{inline-size:100%;block-size:100%;margin:0 auto}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip.medium)>.responsive{inline-size:2.5rem}:is(button.small,.button.small,.chip:not(.medium))>.responsive{inline-size:2rem}:is(button,.button,.chip).large>.responsive{inline-size:3rem}:is(button,.button,.chip).extra>.responsive{inline-size:3.5rem}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{border-radius:2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra),.tabs :is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>:is(i,img,svg),:is(button,.button,.chip)>.responsive{margin:0 -.5rem}:is(button,.button)>.responsive{margin-inline-start:-1.5rem}:is(button,.button)>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1.5rem}.chip>.responsive{margin-inline-start:-1rem}.chip>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1rem}:is(.circle,.square)>.responsive{margin:0}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,menu:not([data-ui]):active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){---child: 1;---type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(---child) - var(---type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(---child) - var(---type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu>li:nth-last-child(2){---child: 2}menu>li:nth-last-child(3){---child: 3}menu>li:nth-last-child(4){---child: 4}menu>li:nth-last-child(5){---child: 5}menu>li:nth-last-child(6){---child: 6}menu>li:nth-last-child(7){---child: 7}menu>li:nth-last-child(8){---child: 8}menu>li:nth-last-child(9){---child: 9}menu>li:nth-last-child(10){---child: 10}menu>li:nth-last-child(11){---child: 11}menu>li:nth-last-of-type(2){---type: 1}menu>li:nth-last-of-type(3){---type: 2}menu>li:nth-last-of-type(4){---type: 3}menu>li:nth-last-of-type(5){---type: 4}menu>li:nth-last-of-type(6){---type: 5}menu>li:nth-last-of-type(7){---type: 6}menu>li:nth-last-of-type(8){---type: 7}menu>li:nth-last-of-type(9){---type: 8}menu>li:nth-last-of-type(10){---type: 9}menu>li:nth-last-of-type(11){---type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).no-space{gap:0}:is(nav,.row).no-space:not(.vertical)>.border+.border{border-inline-start:0}:is(nav,.row).no-space.vertical>.border+.border{border-top:0}:is(nav,.row).medium-space{gap:1.5rem}:is(nav,.row).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}:is(nav,.row)>.border.no-margin+.border.no-margin{border-inline-start:0}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:.5rem 1rem;inset:var(--top) var(--right) var(--bottom) var(--left);margin:0}nav:is(.left,.right){inline-size:5rem;justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){block-size:5rem;justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{inset-block-end:auto}nav.left{inset-inline-end:auto}nav.right{inset-inline-start:auto}nav.bottom{inset-block-start:auto}nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0;padding:.5rem 1rem}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer>header{transform:translateY(-.75rem);min-block-size:4.5rem;align-self:stretch}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{---transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{---transform: translate(0, -4rem)}.page.active.bottom{---transform: translate(0, 4rem)}.page.active.left{---transform: translate(-4rem, 0)}.page.active.right{---transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(---transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center;---size: 1.5rem}:is(.checkbox,.radio,.switch).small{---size: 1rem}:is(.checkbox,.radio,.switch).large{---size: 2rem}:is(.checkbox,.radio,.switch).extra{---size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(---size);block-size:var(---size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{---size: inherit;content:"";inline-size:var(---size);block-size:var(---size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(---size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(---size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(---size);min-block-size:var(---size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{---start: 0%;---end: 0%;---value1: "";---value2: "";display:flex;align-items:center!important;inline-size:auto;block-size:1.25rem;margin:1.125rem;flex:none;direction:ltr}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.small{inline-size:4rem}.slider.medium{inline-size:8rem}.slider.large{inline-size:12rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:1rem;background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled~span{background:#9e9e9e}.slider>span{position:absolute;block-size:1rem;border-radius:1rem 0 0 1rem;background:var(--primary);z-index:0;inset:calc(50% - .5rem) var(---end) auto var(---start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:1rem;border-radius:1rem;background:var(--primary-container);clip-path:polygon(calc(var(---start) - .5rem) 0,0 0,0 100%,calc(var(---start) - .5rem) 100%,calc(var(---start) - .5rem) 0,calc(100% - var(---end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(---end) + .5rem) 100%,calc(100% - var(---end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--active)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(---end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(---start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(---value1)}.slider>.tooltip+.tooltip:before{content:var(---value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{display:none}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(---end) 0 var(---start);clip-path:none;background:currentcolor;border-radius:0}.slider.max.vertical>span{inset:var(---end) 0 var(---start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant)}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{---space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:3;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{---space: 0}.tooltip.medium-space{---space: -1rem}.tooltip.large-space{---space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(---space)!important}.tooltip.left,.tooltip.right{margin-inline:var(---space)!important}.tooltip.bottom{margin-block-end:var(---space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{---space: -1.25rem}.slider.vertical>.tooltip{---space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){---space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}[class*=blur],[class*=blur].light{---blur: 1rem;-webkit-backdrop-filter:blur(var(---blur));backdrop-filter:blur(var(---blur));color:var(--on-surface);background-color:#ffffff80}.dark [class*=blur],[class*=blur].dark{background-color:#00000080}.small-blur{---blur: .5rem}.large-blur{---blur: 1.5rem}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)}.right-shadow{background-image:linear-gradient(to left,black,transparent)}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 209, 228, 255;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 0, 65, 112;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: rgb(var(--eox-theme-dark-on-primary-container));--secondary: rgb(var(--eox-theme-dark-secondary));--on-secondary: rgb(var(--eox-theme-dark-on-secondary));--secondary-container: rgb(var(--eox-theme-dark-secondary-container));--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: rgb(var(--eox-theme-dark-tertiary-container));--on-tertiary-container: rgb(var(--eox-theme-dark-on-tertiary-container));--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: rgb(var(--eox-theme-dark-error-container));--on-error-container: rgb(var(--eox-theme-dark-on-error-container));--background: rgb(var(--eox-theme-dark-background));--on-background: rgb(var(--eox-theme-dark-on-background));--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: rgb(var(--eox-theme-dark-surface-variant));--on-surface-variant: rgb(var(--eox-theme-dark-on-surface-variant));--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: rgb(var(--eox-theme-dark-shadow));--scrim: rgb(var(--eox-theme-dark-scrim));--inverse-surface: rgb(var(--eox-theme-dark-inverse-surface));--inverse-on-surface: rgb(var(--eox-theme-dark-inverse-on-surface));--inverse-primary: rgb(var(--eox-theme-dark-inverse-primary));--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: rgb( var(--eox-theme-dark-surface-container-lowest) );--surface-container-low: rgb(var(--eox-theme-dark-surface-container-low));--surface-container: rgb(var(--eox-theme-dark-surface-container));--surface-container-high: rgb(var(--eox-theme-dark-surface-container-high));--surface-container-highest: rgb( var(--eox-theme-dark-surface-container-highest) )}',sNe=`
  ${NCt}
`;class aNe extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.modal=null,this.position="top-right"}attributeChangedCallback(t,n,r){r!==n&&t==="position"&&r!==this.position&&(this.position=r,this.render())}connectedCallback(){this.render(),this.shadowRoot.querySelector("button").addEventListener("click",()=>this.onButtonClick())}disconnectedCallback(){this.shadowRoot.querySelector("button").removeEventListener("click",()=>this.onButtonClick())}onButtonClick(){this.modal?(this.modal.remove(),this.modal=null):(this.modal=document.createElement("eox-feedback"),this.getAttribute("unstyled")!==null&&this.modal.setAttribute("unstyled",this.getAttribute("unstyled")),document.body.appendChild(this.modal),this.modal.addEventListener("close",()=>this.modal=null))}render(){this.shadowRoot.innerHTML=`
      <style>
        ${oNe}
        ${this.getAttribute("unstyled")===null&&sNe}
        :host {
          position: fixed !important;
          margin: 0px 20px !important;
          ${this.position.includes("top")?"top: 0px;":""}
          ${this.position.includes("right")?"right: 0px;":""}
          ${this.position.includes("bottom")?"bottom: 0px;":""}
          ${this.position.includes("left")?"left: 0px;":""}
        }
      </style>
      <button
        class="${this.position.includes("top")?"bottom":""}${this.position.includes("bottom")?"top":""}-round small-round"
      >
        <i>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>send-circle-outline</title><path d="M8,7.71L18,12L8,16.29V12.95L15.14,12L8,11.05V7.71M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" /></svg>
        </i>
        <span>Feedback</span>
      </button>
    `}}Cn(aNe,"observedAttributes",["position","unstyled"]);customElements.define("eox-feedback-button",aNe);class lNe extends HTMLElement{constructor(){var t;super(),this.attachShadow({mode:"open"}),this.includeScreenshot=null,this.areaSelection=null,this.regionScreenshot=null,this.screenShotFile=null,this.endpoint=this.getAttribute("endpoint")||((t=document.querySelector("eox-feedback-button"))==null?void 0:t.getAttribute("endpoint"))}connectedCallback(){this.render(),this.shadowRoot.querySelector("input[type=checkbox]").addEventListener("click",t=>this.onToggleScreenshot(t)),this.shadowRoot.querySelector("button#submit").addEventListener("click",()=>this.onSubmit()),this.shadowRoot.querySelector("button#cancel").addEventListener("click",()=>this.onCancel()),this.shadowRoot.querySelector("textarea").addEventListener("input",t=>this.onTextInput(t)),document.addEventListener("keyup",t=>this.onKeyboardInput(t))}disconnectedCallback(){this.shadowRoot.querySelector("input[type=checkbox]").removeEventListener("click",t=>this.onToggleScreenshot(t)),this.shadowRoot.querySelector("button#submit").removeEventListener("click",()=>this.onSubmit()),this.shadowRoot.querySelector("button#cancel").removeEventListener("click",()=>this.onCancel()),this.shadowRoot.querySelector("textarea").removeEventListener("input",t=>this.onTextInput(t)),document.removeEventListener("keyup",t=>this.onKeyboardInput(t))}onKeyboardInput(t){t.keyCode===27&&this.onCancel(),t.key==="Enter"&&(t.metaKey||t.ctrlKey)&&this.shadowRoot.querySelector("textarea").value.length>0&&this.onSubmit()}onOverlayDraw(t){this.areaSelection=t.detail}onTextInput(t){const n=this.shadowRoot.querySelector("button#submit");t.target.value.length>0?n.classList.remove("disabled"):n.classList.add("disabled")}async onToggleScreenshot(t){this.includeScreenshot=t.target.checked,this.shadowRoot.querySelector("#screenshot-info").classList.toggle("hidden");const n=this.shadowRoot.querySelector("#screenshot > img");if(!t.target.checked){this.regionScreenshot.close(),n&&n.remove();return}const r=this.shadowRoot.querySelector("textarea"),i=this.shadowRoot.querySelector("button#submit");i.classList.add("disabled"),this.regionScreenshot=new ICt,["closed","errorCreated","screenshotDownload"].forEach(o=>{this.regionScreenshot.on(o,()=>{const s=this.shadowRoot.querySelector("input[type=checkbox]");s instanceof HTMLInputElement&&(s.checked=!1,this.includeScreenshot=!1,r.value.length>0&&i.classList.remove("disabled"))})}),this.regionScreenshot.on("screenshotGenerated",o=>{const s=document.createElement("img");s.src=o,s.classList.add("border"),this.shadowRoot.querySelector("#screenshot").appendChild(s);function a(l,u){for(var f=l.split(","),c=f[0].match(/:(.*?);/)[1],d=atob(f[f.length-1]),p=d.length,h=new Uint8Array(p);p--;)h[p]=d.charCodeAt(p);return new File([h],u,{type:c})}this.screenShotFile=a(o,"screenshot.png"),i.classList.remove("disabled")})}async onSubmit(){const t=this.shadowRoot.querySelector("article > div"),n=this.shadowRoot.querySelector("#form"),r=this.shadowRoot.querySelector("progress");t.classList.add("disabled"),r.classList.remove("hidden");const i=new FormData;if(this.includeScreenshot&&i.append("file",this.screenShotFile),i.append("message",this.shadowRoot.querySelector("textarea").value),i.append("userAgent",window.navigator.userAgent),i.append("location",window.location.href),!this.endpoint)throw new Error("No endpoint attribute defined!");const o=document.createElement("div");try{await fetch(this.endpoint,{method:"POST",body:i}),o.innerHTML=`
        <p class="green-text middle-align center-align">Thank you for submitting your feedback!</p>
        `}catch{o.innerHTML=`
        <p class="red-text middle-align center-align">Oh no - something went wrong! Apologies, we'll try to find out what happened.</p>
        `}this.dispatchEvent(new CustomEvent("submit",{detail:i})),n.classList.add("hidden"),t.appendChild(o),t.classList.remove("disabled"),r.classList.add("hidden"),setTimeout(()=>{this.onCancel()},4e3)}onCancel(){this.regionScreenshot&&this.regionScreenshot.close(),this.remove(),this.dispatchEvent(new Event("close"))}render(){var n,r,i,o;const t=document.querySelector("eox-feedback-button");this.shadowRoot.innerHTML=`
      <style>
        ${oNe}
        ${this.getAttribute("unstyled")===null&&sNe}
        :host {
          display: block;
          position: fixed !important;
          width: 320px;
          ${t?`
            margin: 50px 27px !important;
            ${(n=t.position)!=null&&n.includes("top")?"top: 0px;":""}
            ${(r=t.position)!=null&&r.includes("right")?"right: 0px;":""}
            ${(i=t.position)!=null&&i.includes("bottom")?"bottom: 0px;":""}
            ${(o=t.position)!=null&&o.includes("left")?"left: 0px;":""}
          `:""}
          z-index: 10000;
        }
        .hidden {
          display: none !important;
        }
        .disabled {
          opacity: .5;
          pointer-events: none;
        }
        .field > :is(input, textarea, select) {
          font-size: 0.875rem !important;
        }
        #screenshot > img {
          max-width: 100%;
          max-height: 100px;
        }
        .region-screenshot_tools {
          z-index: 10001;
        }
      </style>
      <article class="no-margin small-round">
        <div ${this.endpoint?"":'class="disabled"'}>
          <div id="form">
            <nav>
              <label class="switch">
                <input type="checkbox">
                <span></span>
              </label>
              <div class="max">
                <div>Include a screenshot</div>
                <small id="screenshot-info" class="italic hidden">Drag to highlight part of the page</small>
              </div>
            </nav>
            <div id="screenshot" class="middle-align center-align"></div>
            <div class="field textarea border">
              <textarea placeholder="${this.endpoint?"Type your feedback here! Also include some contact info if you'd like us to reach out to you.":"Missing endpoint attribute!"}"></textarea>
            </div>
            <nav>
              <progress class="circle small hidden"></progress>
              <div class="max"></div>
              <button id="cancel" class="border">Cancel</button>
              <button id="submit" class="disabled">Submit</button>
            </nav>
          </div>
        </div>
      </article>
    `}}Cn(lNe,"observedAttributes",["endpoint","unstyled"]);customElements.define("eox-feedback",lNe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let hD=class extends $L{constructor(t){if(super(t),this.it=Li,t.type!==Tg.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Li||t==null)return this._t=void 0,this.it=t;if(t===Sb)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const n=[t];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}};hD.directiveName="unsafeHTML",hD.resultType=1;const Uc=aA(hD);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class S8 extends hD{}S8.directiveName="unsafeSVG",S8.resultType=2;const PCt=aA(S8);var D5,gCe;function BCt(){if(gCe)return D5;gCe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof jo=="object"&&jo&&jo.Object===Object&&jo,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,p=Math.max,h=Math.min,g=function(){return f.Date.now()};function m(E,C,w){var T,R,L,B,P,S,k=0,D=!1,O=!1,N=!0;if(typeof E!="function")throw new TypeError(e);C=_(C)||0,y(w)&&(D=!!w.leading,O="maxWait"in w,L=O?p(_(w.maxWait)||0,C):L,N="trailing"in w?!!w.trailing:N);function j(we){var $e=T,ve=R;return T=R=void 0,k=we,B=E.apply(ve,$e),B}function q(we){return k=we,P=setTimeout(ee,C),D?j(we):B}function W(we){var $e=we-S,ve=we-k,Ee=C-$e;return O?h(Ee,L-ve):Ee}function Q(we){var $e=we-S,ve=we-k;return S===void 0||$e>=C||$e<0||O&&ve>=L}function ee(){var we=g();if(Q(we))return H(we);P=setTimeout(ee,W(we))}function H(we){return P=void 0,N&&T?j(we):(T=R=void 0,B)}function se(){P!==void 0&&clearTimeout(P),k=0,T=S=R=P=void 0}function ne(){return P===void 0?B:H(g())}function ge(){var we=g(),$e=Q(we);if(T=arguments,R=this,S=we,$e){if(P===void 0)return q(S);if(O)return P=setTimeout(ee,C),j(S)}return P===void 0&&(P=setTimeout(ee,C)),B}return ge.cancel=se,ge.flush=ne,ge}function y(E){var C=typeof E;return!!E&&(C=="object"||C=="function")}function v(E){return!!E&&typeof E=="object"}function x(E){return typeof E=="symbol"||v(E)&&d.call(E)==n}function _(E){if(typeof E=="number")return E;if(x(E))return t;if(y(E)){var C=typeof E.valueOf=="function"?E.valueOf():E;E=y(C)?C+"":C}if(typeof E!="string")return E===0?E:+E;E=E.replace(r,"");var w=o.test(E);return w||s.test(E)?a(E.slice(2),w?2:8):i.test(E)?t:+E}return D5=m,D5}var zCt=BCt();const xy=Fa(zCt),uNe=MN`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow:
      0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08),
      0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow:
      0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05),
      0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`,UCt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    preserveAspectRatio="xMidYMid"
    width="50"
    height="50"
    style="shape-rendering: auto; display: block; background: transparent;"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g>
      <circle
        stroke-dasharray="164.93361431346415 56.97787143782138"
        r="35"
        stroke-width="12"
        stroke="#1a467c"
        fill="none"
        cy="50"
        cx="50"
      >
        <animateTransform
          keyTimes="0;1"
          values="0 50 50;360 50 50"
          dur="1.2222222222222223s"
          repeatCount="indefinite"
          type="rotate"
          attributeName="transform"
        ></animateTransform>
      </circle>
      <g></g>
    </g>
  </svg>
`;var o1;class jCt extends Pi{constructor(){super();zn(this,o1);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this._isLoading=!1,this.endpoint=void 0,this.for="eox-map",this.queryParameter="q",this.button=!1,this.label=void 0,this.direction="right",this.resultsDirection="down",this.interval=800,this.small=!1,this.unstyled=!1,this.loaderSvg=UCt,this.fetchDebounced=xy(async()=>{if(!(this._query.length<2)){this._isLoading=!0;try{const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,i=await(await fetch(encodeURI(n))).json();this._data=i.results,this._isLoading=!1}catch{console.log("Error setting up or requesting from geosearch endpoint")}}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},_isLoading:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean},loaderSvg:{type:String,attribute:"loader-svg"}}}async onInput(n){if(this._query=n.target.value,this._query.length==0){this._isListVisible=!1;return}else this._query.length>=2&&(this._isLoading=!0),this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(n){return n==="up"?"top":n==="left"?"left":n==="down"?"bottom":n==="right"?"right":"row"}handleSelect(n){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const r=this.eoxMap.map.getView().getProjection().getCode();let i=nI("EPSG:4326",r,[n.bounds.southwest.lng,n.bounds.southwest.lat]),o=nI("EPSG:4326",r,[n.bounds.northeast.lng,n.bounds.northeast.lat]);const s=[i[0],i[1],o[0],o[1]];this.eoxMap.zoomExtent=s,this.dispatchEvent(new CustomEvent("geosearchSelect",n))}updateMap(){const n=X_(this.for);if(n){const r=n;this.eoxMap=r}}firstUpdated(){this.updateMap()}updated(n){n.has("for")&&this.updateMap()}get eoxMap(){return fn(this,o1)}set eoxMap(n){const r=fn(this,o1);ko(this,o1,n),this.requestUpdate("eoxMap",r)}render(){return yt`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&QF}
          ${!this.unstyled&&cC}
          ${!this.unstyled&&uNe}
          .fill {
          width: 100%;
          height: 100%;
          min-height: 100px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._isLoading?yt`<div class="fill">${PCt(this.loaderSvg)}</div>`:this._query.length<2?yt`<span class="hint"
                    >Enter at least two characters to search</span
                  >`:this._data.map(n=>yt`
                      <eox-geosearch-item
                        .item="${n}"
                        .onClick="${r=>{this.handleSelect(r)}}"
                        .unstyled=${this.unstyled}
                      />
                    `)}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}o1=new WeakMap;class HCt extends Pi{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super(),this.item=void 0,this.onClick=void 0,this.unstyled=!1}render(){return yt`
      <style>
        ${!this.unstyled&&QF}
        ${!this.unstyled&&uNe}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",jCt);customElements.define("eox-geosearch-item",HCt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*cc(e,t){if(e!==void 0){let n=0;for(const r of e)yield t(r,n++)}}const qCt=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
form#itemfilter:not(.inline) {
  overflow-y: auto;
}
details {
  width: 100%;
}
`,fC=`
:host, :root {
  --item-color: color-mix(
    in srgb,
    var(--primary-color) 10%,
    transparent
  );
  --item-hover-color: color-mix(
    in srgb,
    var(--secondary-color) 30%,
    transparent
  );
  --item-select-color: var(--primary-color);
  --inline-bg-color: color-mix(
    in srgb,
    var(--secondary-color) 10%,
    transparent
  );
  --border-color: color-mix(
    in srgb,
    #000000 20%,
    transparent
  );
  --background-color: var(--eox-background-color, transparent);
  --padding: 0.5rem;
  --text-transform: capitalize;
  --form-flex-direction: column;
  --filter-display: block;
  background-color: var(--background-color);
}
* {
  font-family: Roboto, sans-serif;
}
form#itemfilter {
  flex-direction: var(--form-flex-direction);
}
eox-itemfilter-container {
  min-width: 200px;
  display: var(--filter-display);
}
eox-itemfilter-results {
  flex-grow: 1;
}
ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem var(--padding);
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: 13px;
  align-items: center;
  text-transform: var(--text-transform);
}
.subtitle {
  font-size: 11px;
  opacity: .7;
  margin-top: 6px;
}
.image {
  width: 24px;
  height: 24px;
  object-fit: cover;
  overflow: hidden;
  margin-right: 8px;
}
.title-container {
  display: flex;
  flex-direction: column;
}
h6.main-heading {
  font-size: 1rem;
  margin-block-start: 1.33em;
  margin-block-end: 1.33em;
  margin-top: var(--padding);
  padding: 0 var(--padding);
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  margin-left: auto;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--padding);
}
[data-type=filter] .title,
details summary {
  text-transform: var(--text-transform);
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
  padding: 0;
  border: none;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul:not(#filters) > li {
  padding: 5px 0;
}
ul#results li {
  padding: 5px var(--padding);
  display: flex;
  justify-content: space-between;
}
ul#results .result-action {
  display: flex;
  align-items: center;
  height: fit-content;
  line-height: 1;
  opacity: .5;
  transition: opacity .3s ease-in-out;
}
ul#results .result-action:hover {
  opacity: 1;
}
ul#results .highlighted .result-action > * {
  filter: invert(1);
}
eox-layout {
  padding: .5rem var(--padding);
  gap: var(--card-gap, 16px);
  --column-width: var(--card-width, 300px);
  --row-height: var(--card-height, 200px);
}
eox-layout-item {
  position: relative;
  border-radius: var(--card-border-radius, 8px);
  cursor: pointer;
}
eox-layout-item .image {
  width: 100%;
  height: 100%;
  transition: filter .3s ease-in-out;
  margin: 0;
}
eox-layout-item:hover .image {
  filter: brightness(.5);
}
eox-layout-item .title-container {
  position: absolute;
  bottom: 0;
  color: white;
  padding: 20px;
  box-sizing: border-box;
  width: 100%;
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 0.85),
    transparent
  );
  padding-top: 25px;
}
eox-layout-item .title {
  font-weight: bold;
}
eox-layout-item .result-action {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #ffffffbb;
  padding: 8px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
}
ul#results eox-layout-item.highlighted .result-action > * {
  filter: none;
}
section {
  position: relative;
  background-color: var(--background-color);
}
button#filter-reset {
  position: absolute;
  top: 0;
  right: var(--padding);
  padding: 2px 10px;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--secondary-color);
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: var(--primary-color);
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range,
tc-range-slider {
  align-items: center;
  display: block;
}
tc-range-slider {
  width: calc(100% - 16px);
  margin-left: 8px;
  margin-right: 8px;
  --width: 100%;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before,
.range-after {
  margin: 1rem 0px;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: -5px;
  height: 14px;
  width: 14px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 14px;
  width: 14px;
}
.inline-content {
  border: 1.5px solid var(--secondary-color);
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: var(--inline-bg-color);
  margin-top: 4px;
  padding: 8px;
}
.inline-container {
  position: relative;
  align-items: center;
}
.inline-container-wrapper {
  width: 100%;
  position: relative;
}
.inline-container {
  position: relative;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  height: 24px;
  padding: 8px;
  flex: 1;
  justify-content: space-between;
  cursor: text;
  transition: all 0.2s ease-in-out;
  display: flex;
}
.inline-container:hover {
  border: 1px solid var(--primary-color);
}
[popover] {
  position: fixed;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  border: none;
}
.input-container {
  display: flex;
  flex: 1;
  align-items: center;
}
.input-container input,
.input-container input:focus {
  height: 100%;
  border: none;
  outline: none;
  border: 0;
  min-width: 25%;
}
.button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 1px;
  top: 5px;
  height: calc(100% - 10px);
  width: 34px;
  background: white;
}
button.icon {
  color: #004170;
  height: 24px;
  font-size: large;
  width: unset;
}
.inline-container::-webkit-scrollbar {
  height: 2px;
}
.inline-container::-webkit-scrollbar-thumb {
  background: lightgrey;
  border-radius: 2px;
}
.hidden {
  height: 0;
  padding: 0;
  border: none;
}
.hidden:hover {
  border: none;
}
.chip-title {
  pointer-events: none;
  text-transform: var(--text-transform);
}
.chip {
  display: flex;
  align-items: center;
  background: var(--item-color);
  border-radius: 30px;
  margin-right: 4px;
  padding: 5px 10px;
  font-size: small;
  cursor: default;
  white-space: nowrap;
}
.chip.highlighted {
  background: var(--primary-color);
  color: white;
}
.chip-close {
  cursor: pointer;
  font-weight: 600;
  position: absolute;
  right: -25px;
  background: white;
  top: 0;
  height: 100%;
  display: flex;
  align-items: center;
  height: 24px;
  width: 24px;
}
.chip-close:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
  height: 24px;
  width: 24px;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
.chip-container {
  position: relative;
  max-width: 75%;
}
.autocomplete-container,
.text-container {
  position: relative;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  justify-content: space-between;
  cursor: text;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  background: white;
}
.autocomplete-container-wrapper,
.text-container-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex: 1;
  overflow-x: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.autocomplete-container-wrapper::-webkit-scrollbar {
  display: none;
}
.chip-wrapper {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.chip-wrapper::-webkit-scrollbar {
  display: none;
  width: 0;
  background: transparent;
}
.autocomplete-input,
.text-input {
  flex: 1;
  border: 1px solid var(--border-color);
  outline: none;
  box-sizing: border-box;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  min-width: 150px;
}
input[type="text"].text-input,
input[type="text"].autocomplete-input {
  padding: 9px 6px !important;
  border-radius: 4px;
}
.text-input:hover,
.autocomplete-input:hover {
  border: 1px solid var(--primary-color);
}
.text-input:invalid {
  border: 1px solid red;
}
.selected-items {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
}
.select li:hover,
.multiselect li:hover,
eox-itemfilter-results li:hover {
  background: var(--item-hover-color);
}
eox-itemfilter-results li.highlighted {
  color: var(--background-color);
  background: var(--item-select-color);
}
.selected-item span {
  margin-right: 8px;
}
.selected-item button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.multiselect-container,
.select-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.multiselect-container label,
.select-container label {
  display: flex;
  align-items: center;
  cursor: pointer;
}
.multiselect-container input,
.select-container input {
  margin-right: 8px;
}
.select-overflow {
  max-height: 185px;
  overflow-y: auto;
}
.chip-title strong {
  font-weight: 500;
}
.chip-wrapper {
  max-width: 100%;
  overflow-x: scroll;
}
.chip-container {
  display: flex;
  flex: 0;
}
.input-container.dirty-filter-input {
  margin-left: 25px;
}
.error-validation {
  position: relative;
  color: red;
  font-size: x-small;
  top: -8px;
}
input {
  background-color: var(--background-color);
}
`;var nL,cNe;class GCt extends Pi{constructor(){super();zn(this,nL);this.filterObject={},this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},unstyled:{type:Boolean}}}render(){return yt`
      <style>
        ${!this.unstyled&&fC}
      </style>

      ${xr(this.filterObject.featured,()=>yt`<slot name="filter"></slot>`,()=>yt`<details
            @toggle="${In(this,nL,cNe)}"
            class="details-filter"
            ?open=${this.filterObject.expanded||Li}
          >
            <summary>
              <span
                class="title"
                style="${!this.filterObject.title&&"text-transform: var(--text-transform)"}"
              >
                ${this.filterObject.title||this.filterObject.key||"Filter"}
                <slot name="reset-button"></slot>
              </span>
            </summary>
            <div>
              <slot name="filter"></slot>
            </div>
          </details>`)}
    `}}nL=new WeakSet,cNe=function(n){this.dispatchEvent(new CustomEvent("details-toggled",{detail:n,bubbles:!0,composed:!0}))};customElements.define("eox-itemfilter-expandcontainer",GCt);function Rp(e){return Array.isArray?Array.isArray(e):hNe(e)==="[object Array]"}function WCt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function VCt(e){return e==null?"":WCt(e)}function Pd(e){return typeof e=="string"}function fNe(e){return typeof e=="number"}function YCt(e){return e===!0||e===!1||XCt(e)&&hNe(e)=="[object Boolean]"}function dNe(e){return typeof e=="object"}function XCt(e){return dNe(e)&&e!==null}function Ju(e){return e!=null}function L5(e){return!e.trim().length}function hNe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const KCt="Incorrect 'index' type",ZCt=e=>`Invalid value for key ${e}`,QCt=e=>`Pattern length exceeds max of ${e}.`,JCt=e=>`Missing ${e} property in key`,eSt=e=>`Property 'weight' in key '${e}' must be a positive integer`,mCe=Object.prototype.hasOwnProperty;class tSt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=pNe(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function pNe(e){let t=null,n=null,r=null,i=1,o=null;if(Pd(e)||Rp(e))r=e,t=vCe(e),n=k8(e);else{if(!mCe.call(e,"name"))throw new Error(JCt("name"));const s=e.name;if(r=s,mCe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(eSt(s));t=vCe(s),n=k8(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function vCe(e){return Rp(e)?e:e.split(".")}function k8(e){return Rp(e)?e.join("."):e}function nSt(e,t){let n=[],r=!1;const i=(o,s,a)=>{if(Ju(o))if(!s[a])n.push(o);else{let l=s[a];const u=o[l];if(!Ju(u))return;if(a===s.length-1&&(Pd(u)||fNe(u)||YCt(u)))n.push(VCt(u));else if(Rp(u)){r=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],s,a+1)}else s.length&&i(u,s,a+1)}};return i(e,Pd(t)?t.split("."):t,0),r?n:n[0]}const rSt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},iSt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},oSt={location:0,threshold:.6,distance:100},sSt={useExtendedSearch:!1,getFn:nSt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Tr={...iSt,...rSt,...oSt,...sSt};const aSt=/[^ ]+/g;function lSt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const o=i.match(aSt).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class _U{constructor({getFn:t=Tr.getFn,fieldNormWeight:n=Tr.fieldNormWeight}={}){this.norm=lSt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Pd(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Pd(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Ju(t)||L5(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Ju(s)){if(Rp(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Ju(f))if(Pd(f)&&!L5(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else Rp(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}r.$[o]=a}else if(Pd(s)&&!L5(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function gNe(e,t,{getFn:n=Tr.getFn,fieldNormWeight:r=Tr.fieldNormWeight}={}){const i=new _U({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(pNe)),i.setSources(t),i.create(),i}function uSt(e,{getFn:t=Tr.getFn,fieldNormWeight:n=Tr.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new _U({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function ZS(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Tr.distance,ignoreLocation:o=Tr.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function cSt(e=[],t=Tr.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let a=e[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const sv=32;function fSt(e,t,n,{location:r=Tr.location,distance:i=Tr.distance,threshold:o=Tr.threshold,findAllMatches:s=Tr.findAllMatches,minMatchCharLength:a=Tr.minMatchCharLength,includeMatches:l=Tr.includeMatches,ignoreLocation:u=Tr.ignoreLocation}={}){if(t.length>sv)throw new Error(QCt(sv));const f=t.length,c=e.length,d=Math.max(0,Math.min(r,c));let p=o,h=d;const g=a>1||l,m=g?Array(c):[];let y;for(;(y=e.indexOf(t,h))>-1;){let w=ZS(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:u});if(p=Math.min(w,p),h=y+f,g){let T=0;for(;T<f;)m[y+T]=1,T+=1}}h=-1;let v=[],x=1,_=f+c;const E=1<<f-1;for(let w=0;w<f;w+=1){let T=0,R=_;for(;T<R;)ZS(t,{errors:w,currentLocation:d+R,expectedLocation:d,distance:i,ignoreLocation:u})<=p?T=R:_=R,R=Math.floor((_-T)/2+T);_=R;let L=Math.max(1,d-R+1),B=s?c:Math.min(d+R,c)+f,P=Array(B+2);P[B+1]=(1<<w)-1;for(let k=B;k>=L;k-=1){let D=k-1,O=n[e.charAt(D)];if(g&&(m[D]=+!!O),P[k]=(P[k+1]<<1|1)&O,w&&(P[k]|=(v[k+1]|v[k])<<1|1|v[k+1]),P[k]&E&&(x=ZS(t,{errors:w,currentLocation:D,expectedLocation:d,distance:i,ignoreLocation:u}),x<=p)){if(p=x,h=D,h<=d)break;L=Math.max(1,2*d-h)}}if(ZS(t,{errors:w+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>p)break;v=P}const C={isMatch:h>=0,score:Math.max(.001,x)};if(g){const w=cSt(m,a);w.length?l&&(C.indices=w):C.isMatch=!1}return C}function dSt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const pD=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class mNe{constructor(t,{location:n=Tr.location,threshold:r=Tr.threshold,distance:i=Tr.distance,includeMatches:o=Tr.includeMatches,findAllMatches:s=Tr.findAllMatches,minMatchCharLength:a=Tr.minMatchCharLength,isCaseSensitive:l=Tr.isCaseSensitive,ignoreDiacritics:u=Tr.ignoreDiacritics,ignoreLocation:f=Tr.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:f},t=l?t:t.toLowerCase(),t=u?pD(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const c=(p,h)=>{this.chunks.push({pattern:p,alphabet:dSt(p),startIndex:h})},d=this.pattern.length;if(d>sv){let p=0;const h=d%sv,g=d-h;for(;p<g;)c(this.pattern.substr(p,sv),p),p+=sv;if(h){const m=d-sv;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?pD(t):t,this.pattern===t){let g={isMatch:!0,score:0};return i&&(g.indices=[[0,t.length-1]]),g}const{location:o,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:u,ignoreLocation:f}=this.options;let c=[],d=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:m,startIndex:y})=>{const{isMatch:v,score:x,indices:_}=fSt(t,g,m,{location:o+y,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:u,includeMatches:i,ignoreLocation:f});v&&(p=!0),d+=x,v&&_&&(c=[...c,..._])});let h={isMatch:p,score:p?d/this.chunks.length:1};return p&&i&&(h.indices=c),h}}class Km{constructor(t){this.pattern=t}static isMultiMatch(t){return yCe(t,this.multiRegex)}static isSingleMatch(t){return yCe(t,this.singleRegex)}search(){}}function yCe(e,t){const n=e.match(t);return n?n[1]:null}class hSt extends Km{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class pSt extends Km{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class gSt extends Km{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class mSt extends Km{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class vSt extends Km{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ySt extends Km{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class vNe extends Km{constructor(t,{location:n=Tr.location,threshold:r=Tr.threshold,distance:i=Tr.distance,includeMatches:o=Tr.includeMatches,findAllMatches:s=Tr.findAllMatches,minMatchCharLength:a=Tr.minMatchCharLength,isCaseSensitive:l=Tr.isCaseSensitive,ignoreDiacritics:u=Tr.ignoreDiacritics,ignoreLocation:f=Tr.ignoreLocation}={}){super(t),this._bitapSearch=new mNe(t,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class yNe extends Km{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const T8=[hSt,yNe,gSt,mSt,ySt,vSt,pSt,vNe],bCe=T8.length,bSt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xSt="|";function wSt(e,t={}){return e.split(xSt).map(n=>{let r=n.trim().split(bSt).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let l=!1,u=-1;for(;!l&&++u<bCe;){const f=T8[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,t)),l=!0)}if(!l)for(u=-1;++u<bCe;){const f=T8[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,t));break}}}return i})}const _St=new Set([vNe.type,yNe.type]);class ESt{constructor(t,{isCaseSensitive:n=Tr.isCaseSensitive,ignoreDiacritics:r=Tr.ignoreDiacritics,includeMatches:i=Tr.includeMatches,minMatchCharLength:o=Tr.minMatchCharLength,ignoreLocation:s=Tr.ignoreLocation,findAllMatches:a=Tr.findAllMatches,location:l=Tr.location,threshold:u=Tr.threshold,distance:f=Tr.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:a,ignoreLocation:s,location:l,threshold:u,distance:f},t=n?t:t.toLowerCase(),t=r?pD(t):t,this.pattern=t,this.query=wSt(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;t=i?t:t.toLowerCase(),t=o?pD(t):t;let s=0,a=[],l=0;for(let u=0,f=n.length;u<f;u+=1){const c=n[u];a.length=0,s=0;for(let d=0,p=c.length;d<p;d+=1){const h=c[d],{isMatch:g,indices:m,score:y}=h.search(t);if(g){if(s+=1,l+=y,r){const v=h.constructor.type;_St.has(v)?a=[...a,...m]:a.push(m)}}else{l=0,s=0,a.length=0;break}}if(s){let d={isMatch:!0,score:l/s};return r&&(d.indices=a),d}}return{isMatch:!1,score:1}}}const D8=[];function ASt(...e){D8.push(...e)}function L8(e,t){for(let n=0,r=D8.length;n<r;n+=1){let i=D8[n];if(i.condition(e,t))return new i(e,t)}return new mNe(e,t)}const gD={AND:"$and",OR:"$or"},R8={PATH:"$path",PATTERN:"$val"},F8=e=>!!(e[gD.AND]||e[gD.OR]),CSt=e=>!!e[R8.PATH],SSt=e=>!Rp(e)&&dNe(e)&&!F8(e),xCe=e=>({[gD.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function bNe(e,t,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=CSt(i);if(!s&&o.length>1&&!F8(i))return r(xCe(i));if(SSt(i)){const l=s?i[R8.PATH]:o[0],u=s?i[R8.PATTERN]:i[l];if(!Pd(u))throw new Error(ZCt(l));const f={keyId:k8(l),pattern:u};return n&&(f.searcher=L8(u,t)),f}let a={children:[],operator:o[0]};return o.forEach(l=>{const u=i[l];Rp(u)&&u.forEach(f=>{a.children.push(r(f))})}),a};return F8(e)||(e=xCe(e)),r(e)}function kSt(e,{ignoreFieldNorm:t=Tr.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:o))}),n.score=r})}function TSt(e,t){const n=e.matches;t.matches=[],Ju(n)&&n.forEach(r=>{if(!Ju(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function DSt(e,t){t.score=e.score}function LSt(e,t,{includeMatches:n=Tr.includeMatches,includeScore:r=Tr.includeScore}={}){const i=[];return n&&i.push(TSt),r&&i.push(DSt),e.map(o=>{const{idx:s}=o,a={item:t[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}class Zm{constructor(t,n={},r){this.options={...Tr,...n},this.options.useExtendedSearch,this._keyStore=new tSt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof _U))throw new Error(KCt);this._myIndex=n||gNe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ju(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let l=Pd(t)?Pd(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return kSt(l,{ignoreFieldNorm:a}),o&&l.sort(s),fNe(n)&&n>-1&&(l=l.slice(0,n)),LSt(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=L8(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!Ju(o))return;const{isMatch:l,score:u,indices:f}=n.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:u,value:o,norm:a,indices:f}]})}),i}_searchLogical(t){const n=bNe(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,p=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const p=a.children[c],h=r(p,l,u);if(h.length)f.push(...h);else if(a.operator===gD.AND)return[]}return f},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(Ju(a)){let u=r(n,a,l);u.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),u.forEach(({matches:f})=>{o[l].matches.push(...f)}))}}),s}_searchObjectList(t){const n=L8(t,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!Ju(s))return;let l=[];r.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:s[f],searcher:n}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:t,value:n,searcher:r}){if(!Ju(n))return[];let i=[];if(Rp(n))n.forEach(({v:o,i:s,n:a})=>{if(!Ju(o))return;const{isMatch:l,score:u,indices:f}=r.searchIn(o);l&&i.push({score:u,key:t,value:o,idx:s,norm:a,indices:f})});else{const{v:o,n:s}=n,{isMatch:a,score:l,indices:u}=r.searchIn(o);a&&i.push({score:l,key:t,value:o,norm:s,indices:u})}return i}}Zm.version="7.1.0";Zm.createIndex=gNe;Zm.parseIndex=uSt;Zm.config=Tr;Zm.parseQuery=bNe;ASt(ESt);function xNe(e,t){const n=new Zm(t.filterProperties,{keys:["title"]});if(!(e.target instanceof HTMLInputElement))return;const r=e.target.value,o=n.search(r).map(s=>s.item.key||s.item.keys.join("|"));Object.keys(t.filters).forEach(s=>{t.querySelector(`[data-details="${s}"]`).parentElement.style.display=o.includes(s)||!r?"":"none"})}function RSt(e,t){if(!(e.target instanceof HTMLElement))return;const n=e.target.getAttribute("data-close").replace("|","-");t.querySelector(`#filter-${n}`).reset(),t.dispatchEvent(new CustomEvent("filter")),t.requestUpdate()}const $8=Math.min,Xb=Math.max,mD=Math.round,QS=Math.floor,Gd=e=>({x:e,y:e});function wNe(e){return e.split("-")[0]}function FSt(e){return e.split("-")[1]}function $St(e){return e==="x"?"y":"x"}function MSt(e){return e==="y"?"height":"width"}function _Ne(e){return["top","bottom"].includes(wNe(e))?"y":"x"}function OSt(e){return $St(_Ne(e))}function ENe(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function wCe(e,t,n){let{reference:r,floating:i}=e;const o=_Ne(t),s=OSt(t),a=MSt(s),l=wNe(t),u=o==="y",f=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:f,y:r.y-i.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:c};break;case"left":p={x:r.x-i.width,y:c};break;default:p={x:r.x,y:r.y}}switch(FSt(t)){case"start":p[s]-=d*(n&&u?-1:1);break;case"end":p[s]+=d*(n&&u?-1:1);break}return p}const ISt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:c}=wCe(u,r,l),d=r,p={},h=0;for(let g=0;g<a.length;g++){const{name:m,fn:y}=a[g],{x:v,y:x,data:_,reset:E}=await y({x:f,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});f=v??f,c=x??c,p={...p,[m]:{...p[m],..._}},E&&h<=50&&(h++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(u=E.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:f,y:c}=wCe(u,d,l)),g=-1)}return{x:f,y:c,placement:d,strategy:i,middlewareData:p}};function JF(){return typeof window<"u"}function Rx(e){return ANe(e)?(e.nodeName||"").toLowerCase():"#document"}function fc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wh(e){var t;return(t=(ANe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ANe(e){return JF()?e instanceof Node||e instanceof fc(e).Node:!1}function qf(e){return JF()?e instanceof Element||e instanceof fc(e).Element:!1}function ih(e){return JF()?e instanceof HTMLElement||e instanceof fc(e).HTMLElement:!1}function _Ce(e){return!JF()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fc(e).ShadowRoot}function dC(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Gf(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function NSt(e){return["table","td","th"].includes(Rx(e))}function e$(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function EU(e){const t=AU(),n=qf(e)?Gf(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function PSt(e){let t=Tm(e);for(;ih(t)&&!G1(t);){if(EU(t))return t;if(e$(t))return null;t=Tm(t)}return null}function AU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function G1(e){return["html","body","#document"].includes(Rx(e))}function Gf(e){return fc(e).getComputedStyle(e)}function t$(e){return qf(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Tm(e){if(Rx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_Ce(e)&&e.host||wh(e);return _Ce(t)?t.host:t}function CNe(e){const t=Tm(e);return G1(t)?e.ownerDocument?e.ownerDocument.body:e.body:ih(t)&&dC(t)?t:CNe(t)}function OE(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=CNe(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=fc(i);if(o){const a=M8(s);return t.concat(s,s.visualViewport||[],dC(i)?i:[],a&&n?OE(a):[])}return t.concat(i,OE(i,[],n))}function M8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function SNe(e){const t=Gf(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ih(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=mD(n)!==o||mD(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function CU(e){return qf(e)?e:e.contextElement}function Kb(e){const t=CU(e);if(!ih(t))return Gd(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=SNe(t);let s=(o?mD(n.width):n.width)/r,a=(o?mD(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const BSt=Gd(0);function kNe(e){const t=fc(e);return!AU()||!t.visualViewport?BSt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zSt(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==fc(e)?!1:t}function Yv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=CU(e);let s=Gd(1);t&&(r?qf(r)&&(s=Kb(r)):s=Kb(e));const a=zSt(o,n,r)?kNe(o):Gd(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,f=i.width/s.x,c=i.height/s.y;if(o){const d=fc(o),p=r&&qf(r)?fc(r):r;let h=d,g=M8(h);for(;g&&r&&p!==h;){const m=Kb(g),y=g.getBoundingClientRect(),v=Gf(g),x=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,_=y.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,u*=m.y,f*=m.x,c*=m.y,l+=x,u+=_,h=fc(g),g=M8(h)}}return ENe({width:f,height:c,x:l,y:u})}function SU(e,t){const n=t$(e).scrollLeft;return t?t.left+n:Yv(wh(e)).left+n}function TNe(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:SU(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function USt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=wh(r),a=t?e$(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Gd(1);const f=Gd(0),c=ih(r);if((c||!c&&!o)&&((Rx(r)!=="body"||dC(s))&&(l=t$(r)),ih(r))){const p=Yv(r);u=Kb(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}const d=s&&!c&&!o?TNe(s,l,!0):Gd(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+d.x,y:n.y*u.y-l.scrollTop*u.y+f.y+d.y}}function jSt(e){return Array.from(e.getClientRects())}function HSt(e){const t=wh(e),n=t$(e),r=e.ownerDocument.body,i=Xb(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Xb(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+SU(e);const a=-n.scrollTop;return Gf(r).direction==="rtl"&&(s+=Xb(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function qSt(e,t){const n=fc(e),r=wh(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=AU();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function GSt(e,t){const n=Yv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=ih(e)?Kb(e):Gd(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function ECe(e,t,n){let r;if(t==="viewport")r=qSt(e,n);else if(t==="document")r=HSt(wh(e));else if(qf(t))r=GSt(t,n);else{const i=kNe(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ENe(r)}function DNe(e,t){const n=Tm(e);return n===t||!qf(n)||G1(n)?!1:Gf(n).position==="fixed"||DNe(n,t)}function WSt(e,t){const n=t.get(e);if(n)return n;let r=OE(e,[],!1).filter(a=>qf(a)&&Rx(a)!=="body"),i=null;const o=Gf(e).position==="fixed";let s=o?Tm(e):e;for(;qf(s)&&!G1(s);){const a=Gf(s),l=EU(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dC(s)&&!l&&DNe(e,s))?r=r.filter(f=>f!==s):i=a,s=Tm(s)}return t.set(e,r),r}function VSt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?e$(t)?[]:WSt(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,f)=>{const c=ECe(t,f,i);return u.top=Xb(c.top,u.top),u.right=$8(c.right,u.right),u.bottom=$8(c.bottom,u.bottom),u.left=Xb(c.left,u.left),u},ECe(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YSt(e){const{width:t,height:n}=SNe(e);return{width:t,height:n}}function XSt(e,t,n){const r=ih(t),i=wh(t),o=n==="fixed",s=Yv(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Gd(0);function u(){l.x=SU(i)}if(r||!r&&!o)if((Rx(t)!=="body"||dC(i))&&(a=t$(t)),r){const p=Yv(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();o&&!r&&i&&u();const f=i&&!r&&!o?TNe(i,a):Gd(0),c=s.left+a.scrollLeft-l.x-f.x,d=s.top+a.scrollTop-l.y-f.y;return{x:c,y:d,width:s.width,height:s.height}}function R5(e){return Gf(e).position==="static"}function ACe(e,t){if(!ih(e)||Gf(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return wh(e)===n&&(n=n.ownerDocument.body),n}function LNe(e,t){const n=fc(e);if(e$(e))return n;if(!ih(e)){let i=Tm(e);for(;i&&!G1(i);){if(qf(i)&&!R5(i))return i;i=Tm(i)}return n}let r=ACe(e,t);for(;r&&NSt(r)&&R5(r);)r=ACe(r,t);return r&&G1(r)&&R5(r)&&!EU(r)?n:r||PSt(e)||n}const KSt=async function(e){const t=this.getOffsetParent||LNe,n=this.getDimensions,r=await n(e.floating);return{reference:XSt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ZSt(e){return Gf(e).direction==="rtl"}const QSt={convertOffsetParentRelativeRectToViewportRelativeRect:USt,getDocumentElement:wh,getClippingRect:VSt,getOffsetParent:LNe,getElementRects:KSt,getClientRects:jSt,getDimensions:YSt,getScale:Kb,isElement:qf,isRTL:ZSt};function RNe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function JSt(e,t){let n=null,r;const i=wh(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:f,top:c,width:d,height:p}=u;if(a||t(),!d||!p)return;const h=QS(c),g=QS(i.clientWidth-(f+d)),m=QS(i.clientHeight-(c+p)),y=QS(f),x={rootMargin:-h+"px "+-g+"px "+-m+"px "+-y+"px",threshold:Xb(0,$8(1,l))||1};let _=!0;function E(C){const w=C[0].intersectionRatio;if(w!==l){if(!_)return s();w?s(!1,w):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w===1&&!RNe(u,e.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(E,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,x)}n.observe(e)}return s(!0),o}function ekt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=CU(e),f=i||o?[...u?OE(u):[],...OE(t)]:[];f.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const c=u&&a?JSt(u,n):null;let d=-1,p=null;s&&(p=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let h,g=l?Yv(e):null;l&&m();function m(){const y=Yv(e);g&&!RNe(g,y)&&n(),g=y,h=requestAnimationFrame(m)}return n(),()=>{var y;f.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),c==null||c(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const tkt=(e,t,n)=>{const r=new Map,i={platform:QSt,...n},o={...i.platform,_c:r};return ISt(e,t,{...i,platform:o})};function nkt(e){const t=e.renderRoot.querySelector(".inline-container-wrapper"),n=e.renderRoot.querySelector("[popover]");return ekt(t,n,()=>{n.matches(":popover-open")&&tkt(t,n,{strategy:"fixed"}).then(({x:i,y:o})=>{Object.assign(n.style,{left:`${i}px`,top:`${o}px`,width:`${t.getBoundingClientRect().width}px`})})},{animationFrame:!0})}function FNe(e){e.renderRoot.querySelector("#eox-itemfilter-input-search").value="",xNe({target:{value:""}},e)}function rkt(e,t){t.inlineMode&&e.stopPropagation()}function ikt(e){e.inlineMode&&(e.showDropdown=!0)}function okt(e,t){t.inlineMode&&(e.stopPropagation(),t.showDropdown=!0)}function skt(e,t){t.inlineMode&&e.key==="Escape"&&t.showDropdown&&(FNe(t),t.showDropdown=!1)}function akt(e,t){t.inlineMode&&e.target instanceof HTMLElement&&e.target.tagName!=="DROPDOWN-FORM"&&e.target.tagName!=="EOX-ITEMFILTER"&&t.showDropdown&&(FNe(t),t.showDropdown=!1)}function lkt(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,l=0,u=0,f=null,c=null,d=e[0],p=e[1],h=t.length;for(n;n<h;n++){r=0;var g=t[n].length-1,m=t[n];if(f=m[0],f[0]!==m[g][0]&&f[1]!==m[g][1])throw new Error("First and last coordinates in a ring must be the same");for(s=f[0]-d,a=f[1]-p,r;r<g;r++){if(c=m[r+1],u=c[1]-p,a<0&&u<0||a>0&&u>0){f=c,a=u,s=f[0]-d;continue}if(l=c[0]-e[0],u>0&&a<=0){if(o=s*u-l*a,o>0)i=i+1;else if(o===0)return 0}else if(a>0&&u<=0){if(o=s*u-l*a,o<0)i=i+1;else if(o===0)return 0}else if(u===0&&a<0){if(o=s*u-l*a,o===0)return 0}else if(a===0&&u<0){if(o=s*u-l*a,o===0)return 0}else if(a===0&&u===0){if(l<=0&&s>=0)return 0;if(s<=0&&l>=0)return 0}f=c,a=u,s=l}}return i%2!==0}function Dm(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function ukt(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!CCe(e[0])||!CCe(e[1]))throw new Error("coordinates must contain numbers");return Dm({type:"Point",coordinates:e},t,n)}function ckt(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return Dm({type:"Polygon",coordinates:e},t,n)}function fkt(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Dm({type:"LineString",coordinates:e},t,n)}function O8(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function dkt(e,t,n={}){return Dm({type:"MultiLineString",coordinates:e},t,n)}function CCe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function $Ne(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hkt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function W1(e){return e.type==="Feature"?e.geometry:e}function qc(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=$Ne(e),i=W1(t),o=i.type,s=t.bbox;let a=i.coordinates;if(s&&pkt(r,s)===!1)return!1;o==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const f=lkt(r,a[u]);if(f===0)return!n.ignoreBoundary;f&&(l=!0)}return l}function pkt(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}class MNe{constructor(t=[],n=gkt){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const o=t-1>>1,s=n[o];if(r(i,s)>=0)break;n[t]=s,t=o}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,o=n[t];for(;t<i;){let s=(t<<1)+1,a=n[s];const l=s+1;if(l<this.length&&r(n[l],a)<0&&(s=l,a=n[l]),r(a,o)>=0)break;n[t]=a,t=s}n[t]=o}}function gkt(e,t){return e<t?-1:e>t?1:0}function ONe(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function mkt(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let SCe=class{constructor(t,n,r,i){this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function vkt(e,t){if(e.type==="FeatureCollection"){const n=e.features;for(let r=0;r<n.length;r++)kCe(n[r],t)}else kCe(e,t)}let JS=0,ek=0,tk=0;function kCe(e,t){const n=e.type==="Feature"?e.geometry:e;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let i=0;i<r.length;i++)for(let o=0;o<r[i].length;o++){let s=r[i][o][0],a=null;ek=ek+1;for(let l=0;l<r[i][o].length-1;l++){a=r[i][o][l+1];const u=new SCe(s,JS,ek,tk),f=new SCe(a,JS,ek,tk+1);u.otherEvent=f,f.otherEvent=u,ONe(u,f)>0?(f.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,f.isLeftEndpoint=!1),t.push(u),t.push(f),s=a,tk=tk+1}}JS=JS+1}class ykt{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function bkt(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,o=e.rightSweepEvent.p.y,s=t.leftSweepEvent.p.x,a=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,u=t.rightSweepEvent.p.y,f=(u-a)*(i-n)-(l-s)*(o-r),c=(l-s)*(r-a)-(u-a)*(n-s),d=(i-n)*(r-a)-(o-r)*(n-s);if(f===0)return!1;const p=c/f,h=d/f;if(p>=0&&p<=1&&h>=0&&h<=1){const g=n+p*(i-n),m=r+p*(o-r);return[g,m]}return!1}function xkt(e,t){t=t||!1;const n=[],r=new MNe([],mkt);for(;e.length;){const i=e.pop();if(i.isLeftEndpoint){const o=new ykt(i);for(let s=0;s<r.data.length;s++){const a=r.data[s];if(t&&a.leftSweepEvent.featureId===i.featureId)continue;const l=bkt(o,a);l!==!1&&n.push(l)}r.push(o)}else i.isLeftEndpoint===!1&&r.pop()}return n}function wkt(e,t){const n=new MNe([],ONe);return vkt(e,n),xkt(n,t)}var _kt=wkt;function kU(e,t,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:i=!0}=n;let o=[];e.type==="FeatureCollection"?o=o.concat(e.features):e.type==="Feature"?o.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&o.push(Dm(e)),t.type==="FeatureCollection"?o=o.concat(t.features):t.type==="Feature"?o.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&o.push(Dm(t));const s=_kt(O8(o),i);let a=[];if(r){const l={};s.forEach(u=>{const f=u.join(",");l[f]||(l[f]=!0,a.push(u))})}else a=s;return O8(a.map(l=>ukt(l)))}function INe(e,t,n){if(e!==null)for(var r,i,o,s,a,l,u,f=0,c=0,d,p=e.type,h=p==="FeatureCollection",g=p==="Feature",m=h?e.features.length:1,y=0;y<m;y++){u=h?e.features[y].geometry:g?e.geometry:e,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var v=0;v<a;v++){var x=0,_=0;if(s=d?u.geometries[v]:u,s!==null){l=s.coordinates;var E=s.type;switch(f=0,E){case null:break;case"Point":if(t(l,c,y,x,_)===!1)return!1;c++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],c,y,x,_)===!1)return!1;c++,E==="MultiPoint"&&x++}E==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(t(l[r][i],c,y,x,_)===!1)return!1;c++}E==="MultiLineString"&&x++,E==="Polygon"&&_++}E==="Polygon"&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-f;o++){if(t(l[r][i][o],c,y,x,_)===!1)return!1;c++}_++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(INe(s.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ekt(e,t){var n,r,i,o,s,a,l,u,f,c,d=0,p=e.type==="FeatureCollection",h=e.type==="Feature",g=p?e.features.length:1;for(n=0;n<g;n++){for(a=p?e.features[n].geometry:h?e.geometry:e,u=p?e.features[n].properties:h?e.properties:{},f=p?e.features[n].bbox:h?e.bbox:void 0,c=p?e.features[n].id:h?e.id:void 0,l=a?a.type==="GeometryCollection":!1,s=l?a.geometries.length:1,i=0;i<s;i++){if(o=l?a.geometries[i]:a,o===null){if(t(null,d,u,f,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,d,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],d,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function vD(e,t){Ekt(e,function(n,r,i,o,s){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Dm(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var f=n.coordinates[u],c={type:l,coordinates:f};if(t(Dm(c,i),r,u)===!1)return!1}})}function I8(e,t={}){const n=W1(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return Akt(n,t);case"MultiPolygon":return Ckt(n,t);default:throw new Error("invalid poly")}}function Akt(e,t={}){const r=W1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return NNe(r,i)}function Ckt(e,t={}){const r=W1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return r.forEach(s=>{o.push(NNe(s,i))}),O8(o)}function NNe(e,t){return e.length>1?dkt(e,t):fkt(e[0],t)}function Skt(e,t,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return vD(e,i=>{vD(t,o=>{if(r===!1)return!1;r=kkt(i.geometry,o.geometry,n)})}),r}function kkt(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return!Rkt(e.coordinates,t.coordinates);case"LineString":return!TCe(t,e);case"Polygon":return!qc(e,t)}break;case"LineString":switch(t.type){case"Point":return!TCe(e,t);case"LineString":return!Tkt(e,t,n);case"Polygon":return!DCe(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!qc(t,e);case"LineString":return!DCe(e,t,n);case"Polygon":return!Dkt(t,e,n)}}return!1}function TCe(e,t){for(let n=0;n<e.coordinates.length-1;n++)if(Lkt(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Tkt(e,t,n){return kU(e,t,{ignoreSelfIntersections:n}).features.length>0}function DCe(e,t,n){for(const i of t.coordinates)if(qc(i,e))return!0;return kU(t,I8(e),{ignoreSelfIntersections:n}).features.length>0}function Dkt(e,t,n){for(const i of e.coordinates[0])if(qc(i,t))return!0;for(const i of t.coordinates[0])if(qc(i,e))return!0;return kU(I8(e),I8(t),{ignoreSelfIntersections:n}).features.length>0}function Lkt(e,t,n){const r=n[0]-e[0],i=n[1]-e[1],o=t[0]-e[0],s=t[1]-e[1];return r*s-i*o!==0?!1:Math.abs(o)>=Math.abs(s)?o>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:s>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function Rkt(e,t){return e[0]===t[0]&&e[1]===t[1]}function Fkt(e,t,{ignoreSelfIntersections:n=!0}={}){let r=!1;return vD(e,i=>{vD(t,o=>{if(r===!0)return!0;r=!Skt(i.geometry,o.geometry,{ignoreSelfIntersections:n})})}),r}var $kt=Fkt;function yD(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return INe(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function bD(e,t,n={}){const r=$Ne(e),i=hkt(t);for(let o=0;o<i.length-1;o++){let s=!1;if(n.ignoreEndVertices&&(o===0&&(s="start"),o===i.length-2&&(s="end"),o===0&&o+1===i.length-1&&(s="both")),Mkt(i[o],i[o+1],r,s,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function Mkt(e,t,n,r,i){const o=n[0],s=n[1],a=e[0],l=e[1],u=t[0],f=t[1],c=n[0]-a,d=n[1]-l,p=u-a,h=f-l,g=c*h-d*p;if(i!==null){if(Math.abs(g)>i)return!1}else if(g!==0)return!1;if(Math.abs(p)===Math.abs(h)&&Math.abs(p)===0)return r?!1:n[0]===e[0]&&n[1]===e[1];if(r){if(r==="start")return Math.abs(p)>=Math.abs(h)?p>0?a<o&&o<=u:u<=o&&o<a:h>0?l<s&&s<=f:f<=s&&s<l;if(r==="end")return Math.abs(p)>=Math.abs(h)?p>0?a<=o&&o<u:u<o&&o<=a:h>0?l<=s&&s<f:f<s&&s<=l;if(r==="both")return Math.abs(p)>=Math.abs(h)?p>0?a<o&&o<u:u<o&&o<a:h>0?l<s&&s<f:f<s&&s<l}else return Math.abs(p)>=Math.abs(h)?p>0?a<=o&&o<=u:u<=o&&o<=a:h>0?l<=s&&s<=f:f<=s&&s<=l;return!1}function Okt(e,t){var n=W1(e),r=W1(t),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return Ikt(n,r);case"LineString":return bD(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return qc(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return Nkt(n,r);case"LineString":return Pkt(n,r);case"Polygon":case"MultiPolygon":return Bkt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return zkt(n,r);case"Polygon":case"MultiPolygon":return Ukt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return jkt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ikt(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(BNe(t.coordinates[n],e.coordinates)){r=!0;break}return r}function Nkt(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)BNe(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function Pkt(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!bD(e.coordinates[r],t))return!1;n||(n=bD(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}function Bkt(e,t){for(var n=!0,r=!1,i=0;i<e.coordinates.length;i++){if(r=qc(e.coordinates[i],t),!r){n=!1;break}r=qc(e.coordinates[i],t,{ignoreBoundary:!0})}return n&&r}function zkt(e,t){for(var n=0;n<e.coordinates.length;n++)if(!bD(e.coordinates[n],t))return!1;return!0}function Ukt(e,t){var n=yD(t),r=yD(e);if(!PNe(n,r))return!1;for(var i=!1,o=0;o<e.coordinates.length;o++){if(!qc(e.coordinates[o],t))return!1;if(i||(i=qc(e.coordinates[o],t,{ignoreBoundary:!0})),!i&&o<e.coordinates.length-1){var s=Hkt(e.coordinates[o],e.coordinates[o+1]);i=qc(s,t,{ignoreBoundary:!0})}}return i}function jkt(e,t){var n=yD(e),r=yD(t);if(!PNe(r,n))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!qc(e.coordinates[0][i],t))return!1;return!0}function PNe(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function BNe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Hkt(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var qkt=Okt;const Gkt=(e,t)=>t?$kt(e,t):!0,Wkt=(e,t)=>t?qkt(e,t):!0;function Vkt(e,t="highlight",n="title"){const r=(o,s,a)=>{const l=s.split(".");let u;for(u=0;u<l.length-1;u++)o=o[l[u]];o[l[u]]=a},i=(o,s=[])=>{let a="",l=0;return s.forEach(u=>{const f=u[1]+1;a+=[o.substring(l,u[0]),`<mark class="${t}">`,o.substring(u[0],f),"</mark>"].join(""),l=f}),a+=o.substring(l),a};return e.filter(({matches:o})=>o&&o.length).map(({item:o,matches:s})=>{const a={...o};return s.forEach(l=>{l.key===n&&r(a,l.key,i(l.value,l.indices))}),a})}var l3={exports:{}},Ykt=l3.exports,LCe;function Xkt(){return LCe||(LCe=1,function(e,t){(function(n,r){e.exports=r()})(Ykt,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",u="day",f="week",c="month",d="quarter",p="year",h="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var D=["th","st","nd","rd"],O=k%100;return"["+k+(D[(O-20)%10]||D[O]||D[0])+"]"}},x=function(k,D,O){var N=String(k);return!N||N.length>=D?k:""+Array(D+1-N.length).join(O)+k},_={s:x,z:function(k){var D=-k.utcOffset(),O=Math.abs(D),N=Math.floor(O/60),j=O%60;return(D<=0?"+":"-")+x(N,2,"0")+":"+x(j,2,"0")},m:function k(D,O){if(D.date()<O.date())return-k(O,D);var N=12*(O.year()-D.year())+(O.month()-D.month()),j=D.clone().add(N,c),q=O-j<0,W=D.clone().add(N+(q?-1:1),c);return+(-(N+(O-j)/(q?j-W:W-j))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:c,y:p,w:f,d:u,D:h,h:l,m:a,s,ms:o,Q:d}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},E="en",C={};C[E]=v;var w="$isDayjsObject",T=function(k){return k instanceof P||!(!k||!k[w])},R=function k(D,O,N){var j;if(!D)return E;if(typeof D=="string"){var q=D.toLowerCase();C[q]&&(j=q),O&&(C[q]=O,j=q);var W=D.split("-");if(!j&&W.length>1)return k(W[0])}else{var Q=D.name;C[Q]=D,j=Q}return!N&&j&&(E=j),j||!N&&E},L=function(k,D){if(T(k))return k.clone();var O=typeof D=="object"?D:{};return O.date=k,O.args=arguments,new P(O)},B=_;B.l=R,B.i=T,B.w=function(k,D){return L(k,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var P=function(){function k(O){this.$L=R(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[w]=!0}var D=k.prototype;return D.parse=function(O){this.$d=function(N){var j=N.date,q=N.utc;if(j===null)return new Date(NaN);if(B.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var W=j.match(m);if(W){var Q=W[2]-1||0,ee=(W[7]||"0").substring(0,3);return q?new Date(Date.UTC(W[1],Q,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ee)):new Date(W[1],Q,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ee)}}return new Date(j)}(O),this.init()},D.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},D.$utils=function(){return B},D.isValid=function(){return this.$d.toString()!==g},D.isSame=function(O,N){var j=L(O);return this.startOf(N)<=j&&j<=this.endOf(N)},D.isAfter=function(O,N){return L(O)<this.startOf(N)},D.isBefore=function(O,N){return this.endOf(N)<L(O)},D.$g=function(O,N,j){return B.u(O)?this[N]:this.set(j,O)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(O,N){var j=this,q=!!B.u(N)||N,W=B.p(O),Q=function(ve,Ee){var Ve=B.w(j.$u?Date.UTC(j.$y,Ee,ve):new Date(j.$y,Ee,ve),j);return q?Ve:Ve.endOf(u)},ee=function(ve,Ee){return B.w(j.toDate()[ve].apply(j.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(Ee)),j)},H=this.$W,se=this.$M,ne=this.$D,ge="set"+(this.$u?"UTC":"");switch(W){case p:return q?Q(1,0):Q(31,11);case c:return q?Q(1,se):Q(0,se+1);case f:var we=this.$locale().weekStart||0,$e=(H<we?H+7:H)-we;return Q(q?ne-$e:ne+(6-$e),se);case u:case h:return ee(ge+"Hours",0);case l:return ee(ge+"Minutes",1);case a:return ee(ge+"Seconds",2);case s:return ee(ge+"Milliseconds",3);default:return this.clone()}},D.endOf=function(O){return this.startOf(O,!1)},D.$set=function(O,N){var j,q=B.p(O),W="set"+(this.$u?"UTC":""),Q=(j={},j[u]=W+"Date",j[h]=W+"Date",j[c]=W+"Month",j[p]=W+"FullYear",j[l]=W+"Hours",j[a]=W+"Minutes",j[s]=W+"Seconds",j[o]=W+"Milliseconds",j)[q],ee=q===u?this.$D+(N-this.$W):N;if(q===c||q===p){var H=this.clone().set(h,1);H.$d[Q](ee),H.init(),this.$d=H.set(h,Math.min(this.$D,H.daysInMonth())).$d}else Q&&this.$d[Q](ee);return this.init(),this},D.set=function(O,N){return this.clone().$set(O,N)},D.get=function(O){return this[B.p(O)]()},D.add=function(O,N){var j,q=this;O=Number(O);var W=B.p(N),Q=function(se){var ne=L(q);return B.w(ne.date(ne.date()+Math.round(se*O)),q)};if(W===c)return this.set(c,this.$M+O);if(W===p)return this.set(p,this.$y+O);if(W===u)return Q(1);if(W===f)return Q(7);var ee=(j={},j[a]=r,j[l]=i,j[s]=n,j)[W]||1,H=this.$d.getTime()+O*ee;return B.w(H,this)},D.subtract=function(O,N){return this.add(-1*O,N)},D.format=function(O){var N=this,j=this.$locale();if(!this.isValid())return j.invalidDate||g;var q=O||"YYYY-MM-DDTHH:mm:ssZ",W=B.z(this),Q=this.$H,ee=this.$m,H=this.$M,se=j.weekdays,ne=j.months,ge=j.meridiem,we=function(Ee,Ve,Ue,ft){return Ee&&(Ee[Ve]||Ee(N,q))||Ue[Ve].slice(0,ft)},$e=function(Ee){return B.s(Q%12||12,Ee,"0")},ve=ge||function(Ee,Ve,Ue){var ft=Ee<12?"AM":"PM";return Ue?ft.toLowerCase():ft};return q.replace(y,function(Ee,Ve){return Ve||function(Ue){switch(Ue){case"YY":return String(N.$y).slice(-2);case"YYYY":return B.s(N.$y,4,"0");case"M":return H+1;case"MM":return B.s(H+1,2,"0");case"MMM":return we(j.monthsShort,H,ne,3);case"MMMM":return we(ne,H);case"D":return N.$D;case"DD":return B.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return we(j.weekdaysMin,N.$W,se,2);case"ddd":return we(j.weekdaysShort,N.$W,se,3);case"dddd":return se[N.$W];case"H":return String(Q);case"HH":return B.s(Q,2,"0");case"h":return $e(1);case"hh":return $e(2);case"a":return ve(Q,ee,!0);case"A":return ve(Q,ee,!1);case"m":return String(ee);case"mm":return B.s(ee,2,"0");case"s":return String(N.$s);case"ss":return B.s(N.$s,2,"0");case"SSS":return B.s(N.$ms,3,"0");case"Z":return W}return null}(Ee)||W.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(O,N,j){var q,W=this,Q=B.p(N),ee=L(O),H=(ee.utcOffset()-this.utcOffset())*r,se=this-ee,ne=function(){return B.m(W,ee)};switch(Q){case p:q=ne()/12;break;case c:q=ne();break;case d:q=ne()/3;break;case f:q=(se-H)/6048e5;break;case u:q=(se-H)/864e5;break;case l:q=se/i;break;case a:q=se/r;break;case s:q=se/n;break;default:q=se}return j?q:B.a(q)},D.daysInMonth=function(){return this.endOf(c).$D},D.$locale=function(){return C[this.$L]},D.locale=function(O,N){if(!O)return this.$L;var j=this.clone(),q=R(O,N,!0);return q&&(j.$L=q),j},D.clone=function(){return B.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},k}(),S=P.prototype;return L.prototype=S,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",u],["$M",c],["$y",p],["$D",h]].forEach(function(k){S[k[1]]=function(D){return this.$g(D,k[0],k[1])}}),L.extend=function(k,D){return k.$i||(k(D,P,L),k.$i=!0),L},L.locale=R,L.isDayjs=T,L.unix=function(k){return L(1e3*k)},L.en=C[E],L.Ls=C,L.p={},L})}(l3)),l3.exports}var Kkt=Xkt();const If=Fa(Kkt);let zNe;const Zkt=(e,t)=>{zNe=new Zm(e,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...t})},Qkt=async(e,t,n)=>{const r=Object.entries(t).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const f="$or",c=[],d=(p,h)=>{const g={};u.type==="text"?g[p]=`${h}`:g[l]=`="${p}"`,c.push(g)};return Object.entries(u.state).filter(([,p])=>p).forEach(([p,h])=>d(p,h)),c.length>0&&a.push({[f]:c}),a},[]);let i;if(!(r.length>0)&&n.matchAllWhenEmpty!==!1)i=e;else{const a={$and:[...r]},l=zNe.search(a);i=n.enableHighlighting?Vkt(l,"highlight",n.titleProperty):l.map(u=>u.item)}const o=Object.entries(t).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(o).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const[f,c]of Object.entries(o)){const d=h=>c.format==="date"?If(h).unix():h,p=IE(f,i[l]);p?Array.isArray(p)?u[f]=o[f].min<=d(p[1])&&d(p[0])<=o[f].max:d(p)>=o[f].min&&d(p)<=o[f].max?u[f]=!0:u[f]=!1:u[f]=!0}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}const s=Object.entries(t).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(s).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const f of Object.keys(s)){const c=IE(f,i[l]),d=s[f].mode||"within";c&&(d==="within"?Wkt(c,s[f].geometry):Gkt(c,s[f].geometry))?u[f]=!0:u[f]=!1}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}return i};function Jkt(e,t){return[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...e&&{format:"GeoJSON"},...e&&{url:t}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://tiles.maps.eox.at/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}]}function n$(e){if(!e.dirty)return null;switch(e.type){case"multiselect":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"range":e.state.min=e.min,e.state.max=e.max;break;case"select":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"spatial":e.state.geometry=void 0;break;case"text":e.keys.forEach(n=>{e.state[n]=void 0});break}return delete e.stringifiedState,delete e.dirty,e}function RCe(e,t){return e*2+t}function e3t(e){return Object.keys(e).map(t=>({title:yt`${e[t].title||e[t].key}:
        <strong>${e[t].stringifiedState}</strong>`,key:t})).filter(t=>e[t.key].dirty)}function N8(e){return Object.values(e).map(t=>t.dirty).filter(t=>t).length>0}async function t3t(e,t,n){return await(await fetch(`${n.externalFilter(e,t)}`)).json()}function UNe(e,t,n){let r;if(e.detail?r=e.detail.target:r=e.target,r!=null&&r.classList.contains("details-filter")){if(!r.open||t!=null&&t.expandMultipleFilters)return;n.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(i=>{const o=i.shadowRoot.querySelector(".details-filter");o&&o!==r&&o.removeAttribute("open")})}else{if(!(r!=null&&r.open)||t!=null&&t.expandMultipleResults)return;n.querySelectorAll("details").forEach(i=>{i!==r&&i.removeAttribute("open")})}}function IE(e,t){return e!=null&&e.includes(".")?e.split(".").reduce((n,r)=>n&&n[r],t):t[e]}var Oo,jNe,P8,B8,HNe,z8,U8,qNe,j8,GNe,WNe;class n3t extends Pi{constructor(){super();zn(this,Oo);this.filterProperties={},this.unstyled=!1,this.inlineMode=!1,this.filters={},this._handleClickOutside=In(this,Oo,HNe).bind(this),this._handleKeyDown=In(this,Oo,z8).bind(this)}static get properties(){return{filterProperties:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},unstyled:{type:Boolean},filters:{state:!0,type:Object}}}set showDropdown(n){this.renderRoot.querySelector("[popover]").togglePopover(n)}get showDropdown(){var n;return(n=this.renderRoot.querySelector("[popover]"))==null?void 0:n.matches(":popover-open")}connectedCallback(){super.connectedCallback(),this.inlineMode&&In(this,Oo,P8).call(this)}disconnectedCallback(){this.inlineMode&&In(this,Oo,B8).call(this),super.disconnectedCallback()}_overlayCleanup(){}updateInline(){this.inlineMode&&this.requestUpdate()}updated(n){n.has("inlineMode")&&(this.inlineMode?In(this,Oo,P8).call(this):In(this,Oo,B8).call(this))}render(){return yt`
      <style>
        ${!this.unstyled&&fC}
      </style>
      ${this.inlineMode?yt`
            <div
              class="inline-container-wrapper"
              @click="${In(this,Oo,U8)}"
            >
              <div class="inline-container" part="container">
                <div class="chip-container">
                  <div class="chip-wrapper">
                    <eox-itemfilter-chips
                      .items=${e3t(this.filters)}
                      .controller=${{remove:n=>In(this,Oo,GNe).call(this,n)}}
                    >
                    </eox-itemfilter-chips>
                  </div>

                  ${xr(N8(this.filters),()=>yt`
                      <span
                        class="chip-close"
                        @click=${()=>this.dispatchEvent(new CustomEvent("reset"))}
                      ></span>
                    `)}
                </div>
                <div
                  class="input-container ${N8(this.filters)?"dirty-filter-input":""}"
                >
                  <input
                    autocomplete="off"
                    id="eox-itemfilter-input-search"
                    type="text"
                    @click="${In(this,Oo,U8)}"
                    @focus="${In(this,Oo,qNe)}"
                    @input="${In(this,Oo,WNe)}"
                    placeholder="Search and add filter"
                    aria-haspopup="true"
                    aria-expanded="${this.showDropdown}"
                  />
                </div>
              </div>
              <div popover="manual">
                <div
                  class="inline-content"
                  slot="content"
                  @keydown="${In(this,Oo,z8)}"
                  @click="${In(this,Oo,j8)}"
                  @focus="${In(this,Oo,j8)}"
                >
                  <slot name="section"></slot>
                </div>
              </div>
            </div>
          `:yt`<slot name="section"></slot>`}
    `}}Oo=new WeakSet,jNe=function(){setTimeout(()=>this._overlayCleanup=nkt(this))},P8=function(){document.addEventListener("click",this._handleClickOutside),document.addEventListener("focusout",this._handleClickOutside),document.addEventListener("keydown",this._handleKeyDown),In(this,Oo,jNe).call(this)},B8=function(){document.removeEventListener("click",this._handleClickOutside),document.removeEventListener("focusout",this._handleClickOutside),document.removeEventListener("keydown",this._handleKeyDown),this._overlayCleanup()},HNe=function(n){akt(n,this)},z8=function(n){skt(n,this)},U8=function(n){okt(n,this)},qNe=function(){ikt(this)},j8=function(n){rkt(n,this)},GNe=function(n){RSt(n,this)},WNe=function(n){xNe(n,this)};customElements.define("eox-itemfilter-container",n3t);function r3t(e){const t=e.renderRoot.querySelector("input[type='text']");t.value="",n$(e.filterObject),e.requestUpdate()}function i3t(e){const t=e.renderRoot.querySelector("input[type='text']");e.isValid=t.checkValidity(),e.filterObject.keys.forEach(n=>{e.filterObject.state[n]=t.value}),e.filterObject.dirty=!0,e.filterObject.stringifiedState=t.value,e.dispatchEvent(new CustomEvent("filter")),t.value===""&&e.reset()}const H8="ddd, D MMM YYYY HH:mm:ss";function o3t(e){if(e.filterObject=n$(e.filterObject),e.filterObject){const t=e.querySelector("tc-range-slider"),n=e.filterObject.min,r=e.filterObject.max;t.value1!==n&&(t.value1=n),t.value2!==r&&(t.value2=r)}e.requestUpdate()}function s3t(e,t){const[n,r]=e.detail.values;(n!==t.filterObject.state.min||r!==t.filterObject.state.max)&&([t.filterObject.state.min,t.filterObject.state.max]=[n,r],t.filterObject.dirty=!0),t.filterObject.dirty&&(t.filterObject.stringifiedState=t.filterObject.format==="date"?`${If.unix(n).format(H8)} - ${If.unix(r).format(H8)}`:`${n} - ${r}`),t.dispatchEvent(new CustomEvent("filter")),n===t.filterObject.min&&r===t.filterObject.max?t.reset():t.requestUpdate()}function a3t(e,t,n){const r=n.filterObject.format==="date",i=n.filterObject.state[e],o=r?If.unix(i).format(H8):i;return yt`<div class="range-${t}">${o}</div>`}function l3t(e){u3t(-1,e),n$(e.filterObject),e.requestUpdate()}function u3t(e,t){t.selectedItems=[],TU(t),YNe(t)}function VNe(e,t){const n=t.selectedItems.indexOf(e);n>=0?t.selectedItems=t.selectedItems.filter((r,i)=>i!==n):t.type==="multiselect"?t.selectedItems=[...t.selectedItems,e]:(t.selectedItems=[e],t.showSuggestions=!1),TU(t),YNe(t)}function c3t(e,t){e.target instanceof HTMLInputElement&&(t.query=e.target.value,t.showSuggestions=!0)}function f3t(e,t){switch(e.key){case"ArrowDown":t.highlightedIndex=Math.min(t.highlightedIndex+1,t.filteredSuggestions.length-1);break;case"ArrowUp":t.highlightedIndex=Math.max(t.highlightedIndex-1,0);break;case"Enter":t.highlightedIndex>=0&&VNe(t.filteredSuggestions[t.highlightedIndex],t);break;case"Escape":t.showSuggestions=!1;break}}function d3t(e,t){(e.has("suggestions")||e.has("query"))&&TU(t)}function h3t(e,t){var r;const n=((r=e.filterObject)==null?void 0:r.sort)||((i,o)=>i.localeCompare(o));return t.sort(n).map(i=>i)}function TU(e){var n,r,i;let t;e.query&&(t=new Zm(e.suggestions,{threshold:.4}).search(e.query).map(s=>s.item)),e.filteredSuggestions=h3t(e,t||e.suggestions),(n=e.filterObject)!=null&&n.filterKeys&&(e.filteredSuggestions=(r=e.filterObject)==null?void 0:r.filterKeys.map(o=>`${o}`),e.filterObject.state=(i=e.filterObject)==null?void 0:i.filterKeys.map(o=>`${o}`).reduce((o,s)=>(s in o||(o[s]=void 0),o),e.filterObject.state)),e.highlightedIndex=-1}function YNe(e){Object.keys(e.filterObject.state).forEach(t=>{e.filterObject.state[t]=e.selectedItems.includes(t)}),e.filterObject.stringifiedState=Object.keys(e.filterObject.state).filter(t=>e.filterObject.state[t]).join(", ")||"",e.filterObject.dirty=e.filterObject.stringifiedState.length>0,e.dispatchEvent(new CustomEvent("filter")),e.requestUpdate()}function p3t(e){n$(e.filterObject),e.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),e.requestUpdate()}function g3t(e){e.renderRoot.querySelector("#eox-map").innerHTML="",XNe(e)}function m3t(e,t){t.filterObject.state.mode=e;const n=new CustomEvent("filter",{detail:{[t.filterObject.key]:{}}});t.dispatchEvent(n)}function XNe(e){const t=e.renderRoot.querySelector("#eox-map");t.innerHTML===""&&(t.innerHTML='<eox-map part="map" style="height: 400px"></eox-map>');const n=e.geometry&&v3t(e.geometry),r=Jkt(e.geometry,n);e.eoxMap=e.renderRoot.querySelector("eox-map"),setTimeout(()=>{e.eoxMap.layers=r;const i=o=>{const s=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:o.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});e.dispatchEvent(s)};e.eoxMap.interactions.drawInteraction.on("drawend",o=>{i(o.feature),e.eoxMap.removeInteraction("drawInteraction")}),e.eoxMap.interactions.drawInteraction_modify.on("modifyend",o=>{i(o.features.getArray()[0])})},1e3)}function v3t(e){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:e}]}))}`}var rL;class y3t extends Pi{constructor(){super();zn(this,rL,()=>{i3t(this)});Cn(this,"debouncedInputHandler",xy(fn(this,rL),500,{leading:!0}));this.filterObject={},this.unstyled=!1,this.tabIndex=0,this.isValid=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number},unstyled:{type:Boolean},isValid:{state:!0,type:Boolean}}}reset(){r3t(this)}createRenderRoot(){return this}render(){return xr(this.filterObject,()=>{var n;return yt`
        <style></style>
        <div class="text-container">
          <div class="text-container-wrapper">
            <input
              type="text"
              placeholder=${this.filterObject.placeholder}
              data-cy="search"
              class="text-input"
              part="input-search"
              value="${Object.values(this.filterObject.state)[0]}"
              tabindex=${this.tabIndex}
              pattern="${((n=this.filterObject.validation)==null?void 0:n.pattern)||".*"}"
              @input="${this.debouncedInputHandler}"
              @click=${r=>r.stopPropagation()}
            />
          </div>
        </div>
        <small class="error-validation"
          >${this.filterObject.validation&&this.isValid===!1?this.filterObject.validation.message:""}</small
        >
      `})}}rL=new WeakMap;customElements.define("eox-itemfilter-text",y3t);function b3t(e,t,n){return e.filter(r=>{const i=r[n.config.aggregateResults];let o;return n.filters[n.config.aggregateResults]&&(o=Object.keys(n.filters[n.config.aggregateResults]).filter(a=>n.filters[n.config.aggregateResults].state[a])),(o!=null&&o.length?o.includes(t):!0)&&Array.isArray(i)?i.includes(t):i===t})}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const KNe=Symbol.for(""),x3t=e=>{if((e==null?void 0:e.r)===KNe)return e==null?void 0:e._$litStatic$},Dd=e=>({_$litStatic$:e,r:KNe}),FCe=new Map,w3t=e=>(t,...n)=>{const r=n.length;let i,o;const s=[],a=[];let l,u=0,f=!1;for(;u<r;){for(l=t[u];u<r&&(o=n[u],(i=x3t(o))!==void 0);)l+=i+t[++u],f=!0;u!==r&&a.push(o),s.push(l),u++}if(u===r&&s.push(t[r]),f){const c=s.join("$$lit$$");(t=FCe.get(c))===void 0&&(s.raw=s,FCe.set(c,t=s)),n=a}return e(t,...n)},xD=w3t(yt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $Ce=(e,t,n)=>{const r=new Map;for(let i=t;i<=n;i++)r.set(e[i],i);return r},ZNe=aA(class extends $L{constructor(e){if(super(e),e.type!==Tg.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const i=[],o=[];let s=0;for(const a of e)i[s]=r?r(a,s):s,o[s]=n(a,s),s++;return{values:o,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,r]){const i=nqe(e),{values:o,keys:s}=this.dt(t,n,r);if(!Array.isArray(i))return this.ut=s,o;const a=this.ut??(this.ut=[]),l=[];let u,f,c=0,d=i.length-1,p=0,h=o.length-1;for(;c<=d&&p<=h;)if(i[c]===null)c++;else if(i[d]===null)d--;else if(a[c]===s[p])l[p]=D0(i[c],o[p]),c++,p++;else if(a[d]===s[h])l[h]=D0(i[d],o[h]),d--,h--;else if(a[c]===s[h])l[h]=D0(i[c],o[h]),i2(e,l[h+1],i[c]),c++,h--;else if(a[d]===s[p])l[p]=D0(i[d],o[p]),i2(e,i[c],i[d]),d--,p++;else if(u===void 0&&(u=$Ce(s,p,h),f=$Ce(a,c,d)),u.has(a[c]))if(u.has(a[d])){const g=f.get(s[p]),m=g!==void 0?i[g]:null;if(m===null){const y=i2(e,i[c]);D0(y,o[p]),l[p]=y}else l[p]=D0(m,o[p]),i2(e,i[c],m),i[g]=null;p++}else O$(i[d]),d--;else O$(i[c]),c++;for(;p<=h;){const g=i2(e,l[h+1]);D0(g,o[p]),l[p++]=g}for(;c<=d;){const g=i[c++];g!==null&&O$(g)}return this.ut=s,$N(e,l),Sb}});function _3t(e,t){return yt`
    <details
      class="details-results"
      @toggle=${t.handleAccordion}
      ?open=${t.config.expandResults||Li}
    >
      <summary>
        <span class="title">
          ${e}
          <span class="count"
            >${t.aggregateResults(t.results,e).length}</span
          >
        </span>
      </summary>
      <div>
        ${QNe(t,e)}
      </div>
    </details>
  `}function QNe(e,t){const n=e.results,r=t?e.aggregateResults(n,t):n,i=e.config,o=s=>{var a;return((a=e.selectedResult)==null?void 0:a[i.idProperty])===s[i.idProperty]?"highlighted":Li};return xD`
    ${e.resultType==="cards"?Dd("<eox-layout fill-grid>"):Dd("<ul>")}
      ${ZNe(r,s=>s.id,s=>xD`
        ${e.resultType==="cards"?Dd("<eox-layout-item"):Dd("<li")}
            class=${o(s)}
            @click=${()=>{e.selectedResult===s?e.selectedResult=null:e.selectedResult=s,e.dispatchEvent(new CustomEvent("result",{detail:e.selectedResult}))}}
          >
            <span id="${s.id}">
              ${xr(i.subTitleProperty||i.imageProperty,()=>yt`
                  ${IE(i.imageProperty,s)?yt`
                        <img
                          class="image"
                          src="${IE(i.imageProperty,s)}"
                        />
                      `:yt`
                        <svg
                          class="image"
                          width="100%"
                          height="100%"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <rect
                            width="100%"
                            height="100%"
                            fill="var(--primary-color)"
                          />
                        </svg>
                      `}
                  <div class="title-container">
                    <span class="title"
                      >${Uc(s[i.titleProperty])}</span
                    >
                    <span class="subtitle"
                      >${Uc(s[i.subTitleProperty])}</span
                    >
                  </div>
                `,()=>yt`
                  <span class="title"
                    >${Uc(s[i.titleProperty])}</span
                  >
                `)}
            </span>
            ${xr(e.enableResultAction,()=>yt`
                <span
                  class="result-action"
                  @click=${a=>{a.stopPropagation(),e.dispatchEvent(new CustomEvent("click:result-action",{detail:s}))}}
                  >${Uc(e.resultActionIcon)}</span
                >
              `)}
          </li>
        `)}
    ${e.resultType==="cards"?Dd("</eox-layout>"):Dd("</ul>")}
  `}var Zv,q8,JNe;class E3t extends Pi{constructor(){super();zn(this,Zv);this.config=null,this.results=null,this.filters={},this.resultAggregation=[],this.selectedResult=null,this.resultType="list",this.resultActionIcon=void 0}static get properties(){return{config:{attribute:!1,type:Object},results:{state:!0,type:Array},filters:{state:!0,type:Object},resultAggregation:{attribute:!1,type:Array},selectedResult:{state:!0,type:Object},resultType:{attribute:"result-type",type:String},resultActionIcon:{attribute:!1,type:String}}}aggregateResults(n,r){return b3t(n,r,this)}createRenderRoot(){return this}handleAccordion(n){UNe(n,this.config,this)}render(){return yt`
      <section id="section-results">
        <div slot="resultstitle"></div>
        <div id="container-results" class="scroll">
          ${xr(this.results.length<1,()=>yt`<small class="no-results">No matching items</small>`,()=>Li)}
          <ul id="results" part="results">
            ${xr(this.config.aggregateResults,()=>cc(this.resultAggregation.filter(n=>this.aggregateResults(this.results,n).length),n=>yt`${xr(this.aggregateResults(this.results,n).length===1&&this.config.autoSpreadSingle,()=>yt`<div style="margin-left: -8px">
                          ${In(this,Zv,q8).call(this,n)}
                        </div>`,()=>In(this,Zv,JNe).call(this,n))}`),()=>In(this,Zv,q8).call(this))}
          </ul>
        </div>
      </section>
    `}}Zv=new WeakSet,q8=function(n){return QNe(this,n)},JNe=function(n){return _3t(n,this)};customElements.define("eox-itemfilter-results",E3t);const r$=`input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}`,DU=`input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}`;var $m,tPe,nPe,rPe;class ePe extends Pi{constructor(){super();zn(this,$m);Cn(this,"debouncedInputHandler",xy(In(this,$m,rPe),500,{leading:!0}));this.filterObject={},this.suggestions=[],this.selectedItems=[],this.query="",this.showSuggestions=!1,this.highlightedIndex=-1,this.filteredSuggestions=[],this.type="select",this.unstyled=!1,this.tabIndex=0,this.inlineMode=!1}updated(n){d3t(n,this)}reset(){l3t(this)}firstUpdated(){this.filterObject.state&&(this.selectedItems=Object.keys(this.filterObject.state).map(n=>this.filterObject.state[n]?n:null).filter(n=>!!n),this.filterObject.stringifiedState=this.selectedItems.join(", ")||"",this.requestUpdate())}render(){const n=this.type.includes("multi")?"checkbox":"radio",r=this.filteredSuggestions.length>5?"select-overflow":Li;return yt`
      <style>
        ${!this.unstyled&&fC}
        ${!this.unstyled&&r$}
        ${!this.unstyled&&DU}
      </style>
      ${xr(this.suggestions.length>10,()=>yt`<div class="autocomplete-container">
            <div class="autocomplete-container-wrapper">
              <input
                autocomplete="off"
                tabindex=${this.tabIndex}
                class="autocomplete-input"
                type="text"
                .value=${this.query}
                placeholder="${this.filterObject.placeholder||""}"
                @input=${In(this,$m,tPe)}
                @keydown=${In(this,$m,nPe)}
                @blur=${()=>this.showSuggestions=!1}
                @focus=${()=>this.showSuggestions=!0}
              />
            </div>
          </div>`)}
      <div class="select-container ${r}">
        <ul class="${this.type}">
          ${this.filteredSuggestions.map(i=>yt`
              <li
                data-identifier="${i.toString().toLowerCase()}"
                data-title="${i}"
              >
                <label>
                  <input
                    type="${n}"
                    name=${i}
                    .checked=${this.selectedItems.includes(i)}
                    @change=${()=>this.debouncedInputHandler(i)}
                    @keydown=${o=>{o.key===" "&&this.inlineMode&&this.debouncedInputHandler(i)}}
                    tabindex=${this.tabIndex+1}
                  />
                  <span class="title">${i}</span>
                </label>
              </li>
            `)}
        </ul>
      </div>
    `}}$m=new WeakSet,tPe=function(n){c3t(n,this)},nPe=function(n){f3t(n,this)},rPe=function(n){VNe(n,this)},Cn(ePe,"properties",{filterObject:{attribute:!1,type:Object},suggestions:{attribute:!1,type:Array},selectedItems:{state:!0,type:Array},query:{state:!0,type:String},showSuggestions:{state:!0,type:Boolean},highlightedIndex:{state:!0,type:Number},filteredSuggestions:{state:!0,type:Array},type:{attribute:!0,type:String},unstyled:{type:Boolean},tabIndex:{attribute:!1,type:Number},inlineMode:{attribute:"inline-mode",type:Boolean}});customElements.define("eox-itemfilter-select",ePe);(()=>{var e=Object.defineProperty,t=Math.pow,n=(Fe,Xe,Et)=>Xe in Fe?e(Fe,Xe,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Fe[Xe]=Et,r=(Fe,Xe,Et)=>(n(Fe,typeof Xe!="symbol"?Xe+"":Xe,Et),Et),i=(Fe,Xe)=>` ${Xe&&Xe.length>0?Xe.map(Et=>`<link rel="stylesheet" href="${Et}" />`).join(""):""} <style> ${Fe} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,o=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",s="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",f="data",c="min",d="max",p="step",h="round",g="type",m="theme",y="rtl",v="btt",x="disabled",_="keyboard-disabled",E="mousewheel-disabled",C="slider-width",w="slider-height",T="slider-radius",R="slider-bg",L="slider-bg-hover",B="slider-bg-fill",P="pointer-width",S="pointer-height",k="pointer-radius",D="pointer-bg",O="pointer-bg-hover",N="pointer-bg-focus",j="pointer-shadow",q="pointer-shadow-hover",W="pointer-shadow-focus",Q="pointer-border",ee="pointer-border-hover",H="pointer-border-focus",se="animate-onclick",ne="css-links",ge="vertical",we="horizontal",$e=(Fe,Xe,Et,pt,Yt)=>{let An=Xe-Fe;return An===0?Et:(pt-Et)*(Yt-Fe)/An+Et},ve=Fe=>!isNaN(parseFloat(Fe))&&isFinite(Fe),Ee=(Fe,Xe)=>ve(Fe)?Number(Fe):Xe,Ve=(Fe,Xe)=>Xe===0?0:Math.round(Fe/Xe)*Xe,Ue=(Fe,Xe=1/0)=>{if(Xe===1/0)return Fe;let Et=t(10,Xe);return Math.round(Fe*Et)/Et},ft=Fe=>Fe==null?!1:typeof Fe=="boolean"?Fe:Fe.trim().toLowerCase()==="true",ht=(Fe,Xe)=>{Fe.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Xe}}))},zt=(Fe,Xe)=>{Fe.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Xe}}))},$t=(Fe,Xe)=>{Fe.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Xe}}))},Tn=(Fe,Xe)=>{Fe.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Xe}}))},it=(Fe,Xe)=>{if(!Xe||Xe.length<=0)return;let Et=Xe.map(Yt=>ve(Yt)?Ee(Yt,Yt):Yt),pt={values:Et||[]};pt.value=Et[0],pt.value0=Et[0],pt.value1=Et[0];for(let Yt=1;Yt<Et.length;Yt++)pt[`value${Yt+1}`]=Et[Yt];Fe.dispatchEvent(new CustomEvent("change",{detail:pt}))},Te=(Fe,Xe,Et)=>{let pt=0,Yt,An,Rn,Ht,mt=!1,jn=(Nt,Rr,fr,Er,Ir,ri)=>{let xn=pt;fr!==void 0&&Nt>fr&&(Nt=fr),Rr!==void 0&&Nt<Rr&&(Nt=Rr),pt=Nt;let Bi=pt;return(Er===ge&&ri||Er===we&&Ir)&&(Bi=100-Bi),Er===ge?Xe.style.top=`${Bi}%`:Xe.style.left=`${Bi}%`,xn!==pt},Vn=Nt=>Nt===Xe||Xe.contains(Nt),an=(Nt,Rr,fr,Er)=>{Yt=Nt,An=Rr,Rn=fr,Ht=Er},gn=Nt=>{mt=Nt,Xe.classList.toggle("disabled",mt),mt?Xe.setAttribute("aria-disabled","true"):Xe.hasAttribute("aria-disabled")&&Xe.removeAttribute("aria-disabled")},Qr=(Nt,Rr)=>{Rr==null?Xe.removeAttribute(Nt):Xe.setAttribute(Nt,Rr)},Wr=Nt=>Xe.getAttribute(Nt),Ln=Nt=>{if(!mt){switch(Nt.key){case"ArrowLeft":{Nt.preventDefault(),typeof Yt=="function"&&Yt(Et);break}case"ArrowRight":{Nt.preventDefault(),typeof An=="function"&&An(Et);break}case"ArrowUp":{Nt.preventDefault(),typeof Rn=="function"&&Rn(Et);break}case"ArrowDown":{Nt.preventDefault(),typeof Ht=="function"&&Ht(Et);break}}Tn(Fe,Nt)}},dt=()=>{mt||ht(Fe,Xe)};return Xe.className=`pointer pointer-${Et}`,Xe.addEventListener("keydown",Ln),Xe.addEventListener("click",dt),{$pointer:Xe,get percent(){return pt},get disabled(){return mt},set disabled(Nt){gn(Nt)},updatePosition:jn,isClicked:Vn,setCallbacks:an,setAttr:Qr,getAttr:Wr,destroy:()=>{Xe.removeEventListener("keydown",Ln),Xe.removeEventListener("click",dt),Xe.remove()}}},ye=Fe=>{if(Fe==null)return;if(Array.isArray(Fe))return Fe;if(Fe.trim()==="")return;let Xe=Fe.split(","),Et=[],pt=!0;for(let Yt=0;Yt<Xe.length;Yt++){let An=Xe[Yt].trim();An!==""&&(Et.push(An),ve(An)||(pt=!1))}return pt?Et.map(Yt=>Number(Yt)):Et},Se=(Fe,Xe)=>Xe?Xe.findIndex(Et=>Et===Fe||Et.toString().trim()===Fe.toString().trim()):-1,Re=Fe=>({updatePosition:(Xe,Et,pt,Yt)=>{if(Et.length<=0)return;let An=Et.length===1,Rn=Et[0],Ht=Et[Et.length-1];Xe===ge?(Fe.style.removeProperty("width"),Fe.style.removeProperty("right"),Fe.style.removeProperty("left"),An?Fe.style.height=`${Rn}%`:Fe.style.height=`${Math.abs(Rn-Ht)}%`,Yt?(Fe.style.bottom="0%",An?Fe.style.top="auto":Fe.style.top=`${Math.min(100-Ht,100-Rn)}%`):(Fe.style.bottom="auto",An?Fe.style.top="0%":Fe.style.top=`${Math.min(Rn,Ht)}%`)):(Fe.style.removeProperty("height"),Fe.style.removeProperty("top"),Fe.style.removeProperty("bottom"),An?Fe.style.width=`${Rn}%`:Fe.style.width=`${Math.abs(Rn-Ht)}%`,pt?(Fe.style.right="0%",An?Fe.style.left="auto":Fe.style.left=`${Math.min(100-Ht,100-Rn)}%`):(Fe.style.right="auto",An?Fe.style.left="0%":Fe.style.left=`${Math.min(Rn,Ht)}%`))}}),U="--animate-onclick",Z="--width",re="--height",ie="--panel-bg-border-radius",be="--panel-bg",Ce="--panel-bg-hover",je="--panel-bg-fill",V="--pointer-width",fe="--pointer-height",he="--pointer-border-radius",me="--pointer-bg",Oe="--pointer-bg-hover",Me="--pointer-bg-focus",Be="--pointer-shadow",We="--pointer-shadow-hover",Qe="--pointer-shadow-focus",ut="--pointer-border",Tt="--pointer-border-hover",Ut="--pointer-border-focus",Kt=(Fe,Xe,Et)=>{let pt=new Map;for(let Yt of Fe.attributes){let An=Yt.nodeName.trim().toLowerCase();if(!Xe.test(An))continue;let Rn=An.replace(/\D/g,"").trim(),Ht=Rn===""||Rn==="0"||Rn==="1"?0:Ee(Rn,0)-1,mt=Et&&typeof Et=="function"?Et(Yt.value):Yt.value;pt.set(Ht,mt)}return pt},Pt=Fe=>{if(!Fe)return null;let Xe=Fe.getAttribute(ne);if(!Xe)return null;let Et=Xe.split(";"),pt=[];for(let Yt of Et)Yt.trim()!==""&&pt.push(Yt.trim());return pt},bn=[[Z,C,"sliderWidth",null],[re,w,"sliderHeight",null],[ie,T,"sliderRadius",null],[be,R,"sliderBg",null],[Ce,L,"sliderBgHover",null],[je,B,"sliderBgFill",null],[V,P,"pointer#Width",/^pointer([0-9]*)-width$/],[fe,S,"pointer#Height",/^pointer([0-9]*)-height$/],[he,k,"pointer#Radius",/^pointer([0-9]*)-radius$/],[me,D,"pointer#Bg",/^pointer([0-9]*)-bg$/],[Oe,O,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Me,N,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Be,j,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[We,q,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Qe,W,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[ut,Q,"pointer#Border",/^pointer([0-9]*)-border$/],[Tt,ee,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[Ut,H,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],_n=(Fe,Xe,Et)=>{let pt=null,Yt=[],An=new Map,Rn=(Ln,dt=Xe)=>{let Nt=[...dt.classList];for(let Rr of Nt)Rr.startsWith(Ln)&&Xe.classList.remove(Rr)},Ht=()=>{Rn("shape");let Ln=Xe.querySelectorAll(".pointer");for(let dt of Ln)Rn("shape",dt)},mt=Ln=>{pt=Ln,Rn("theme-"),typeof Ln=="string"&&Xe.classList.add(`theme-${Ln}`)},jn=()=>{if(Ht(),!(Yt.length<=0)){Xe.classList.add("shape",`shape-${Yt[0]}`);for(let Ln=1;Ln<Yt.length;Ln++){let dt=Yt[Ln];if(!dt)continue;let Nt=Xe.querySelector(`.pointer-${Ln}`);!Nt||Nt.classList.add("shape",`shape-${dt}`)}}},Vn=(Ln,dt)=>{Yt[Ln]=dt,jn()},an=()=>{Ht();let Ln=Kt(Fe,/^pointer([0-9]*)-shape$/);if(!(Ln.size<=0)){for(let dt of Ln){let Nt=dt[0];Yt[Nt]=dt[1]}jn()}},gn=(Ln,dt)=>`${Ln}-${dt}`,Qr=(Ln,dt,Nt)=>{let Rr=Et[Nt];if(!Rr)return;let fr=Nt===0?Xe:Rr.$pointer;if(dt==null){An.has(gn(Ln,Nt))&&An.delete(gn(Ln,Nt)),fr.style.removeProperty(Ln);return}An.set(gn(Ln,Nt),dt),fr.style.setProperty(Ln,dt)},Wr=(Ln,dt)=>An.get(gn(Ln,dt));return(()=>{for(let Ln of bn){let[dt,Nt,Rr,fr]=Ln;if(fr){let Ir=Kt(Fe,fr);for(let ri of Ir){let xn=ri[0],Bi=ri[1];Qr(dt,Bi,xn)}}else{let Ir=Fe.getAttribute(Nt);Qr(dt,Ir,0)}let Er=[];if(Rr.indexOf("#")===-1)Er.push([Rr,0]);else{Er.push([Rr.replace("#",""),0]),Er.push([Rr.replace("#","0"),0]),Er.push([Rr.replace("#","1"),0]);for(let Ir=1;Ir<Et.length;Ir++)Er.push([Rr.replace("#",(Ir+1).toString()),Ir])}for(let Ir of Er)try{let ri=Ir[0],xn=Ir[1];Object.prototype.hasOwnProperty.call(Fe,ri)||Object.defineProperty(Fe,ri,{get(){return Wr(dt,xn)},set:Bi=>{Qr(dt,Bi,xn)}})}catch(ri){console.error(ri)}}mt(Fe.getAttribute(m)),an()})(),{setStyle:Qr,getStyle:Wr,get theme(){return pt},set theme(Ln){mt(Ln)},get pointerShapes(){return Yt},setPointerShape:Vn}},un="animate-on-click",Wn="range-dragging",qn=(Fe,Xe,Et,pt)=>{let Yt=[],An=Vn=>{for(let an of Yt)an.update&&typeof an.update=="function"&&an.update(Vn)},Rn=()=>{for(let Vn of Yt)Vn.destroy&&typeof Vn.destroy=="function"&&Vn.destroy()},Ht=(Vn,an)=>{for(let gn of Yt)gn.onAttrChange&&typeof gn.onAttrChange=="function"&&gn.onAttrChange(Vn,an)},mt=Vn=>{if(Vn.gettersAndSetters){for(let an of Vn.gettersAndSetters)if(!(!an.name||!an.attributes))try{Object.prototype.hasOwnProperty.call(Fe,an.name)||Object.defineProperty(Fe,an.name,an.attributes)}catch(gn){console.error("defineSettersGetters error:",gn)}}},jn=Vn=>{var an;if(!Vn.css)return;let gn=(an=Fe.shadowRoot)==null?void 0:an.querySelector("style");!gn||(gn.innerHTML+=Vn.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let Vn of window.tcRangeSliderPlugins){let an=Vn();Yt.push(an),an.init&&typeof an.init=="function"&&(an.init(Fe,Xe,Et,pt),mt(an),jn(an))}},update:An,onAttrChange:Ht,destroy:Rn}},wr=10,Ao=20,Gi=(Fe,Xe)=>{let Et=new Map,pt=/^value([0-9]*)$/;for(let Ht of Fe.attributes){let mt=Ht.nodeName.trim().toLowerCase();if(!pt.test(mt))continue;let jn=mt.replace("value","").trim(),Vn=jn===""||jn==="0"||jn==="1"?0:Ee(jn,0)-1,an=ve(Ht.value)?Ee(Ht.value,0):Ht.value;Et.set(Vn,an)}let Yt=Math.max(...Array.from(Et.keys())),An=[];An.push([Te(Fe,Xe,0),Et.get(0)]);let Rn=Xe;for(let Ht=1;Ht<=Yt;Ht++){let mt=Xe.cloneNode(!0);Rn.after(mt),Rn=mt,An.push([Te(Fe,mt,Ht),Et.get(Ht)])}return An},_i=(Fe,Xe,Et,pt,Yt,An,Rn)=>{try{Object.defineProperty(Fe,pt,{configurable:!0,get(){if(!Xe)return;let Ht=Xe.pointers[Et];if(!Ht)return;let mt=Xe.getTextValue(Ht.percent);return ve(mt)?Ee(mt,mt):mt},set:Ht=>{Xe.pointers[Et]?Xe==null||Xe.setValue(Ht,Et):Xe==null||Xe.addPointer(Ht)}}),Object.defineProperty(Fe,Yt,{configurable:!0,get(){var Ht,mt;return(mt=(Ht=Xe==null?void 0:Xe.pointers[Et])==null?void 0:Ht.getAttr("aria-label"))!=null?mt:void 0},set:Ht=>{!Xe||Xe.setAriaLabel(Et,Ht)}}),Object.defineProperty(Fe,An,{configurable:!0,get(){var Ht,mt;return(mt=(Ht=Xe==null?void 0:Xe.styles)==null?void 0:Ht.pointerShapes[Et])!=null?mt:null},set:Ht=>{!Xe||!Xe.styles||Xe.styles.setPointerShape(Et,Ht)}}),Object.defineProperty(Fe,Rn,{configurable:!0,get(){var Ht;return(Ht=Xe==null?void 0:Xe.pointers[Et].disabled)!=null?Ht:!1},set:Ht=>{if(!Xe)return;let mt=Xe==null?void 0:Xe.pointers[Et];!mt||(mt.disabled=Ht)}})}catch(Ht){console.error(Ht)}},$s=(Fe,Xe)=>{let Et=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let pt=2;pt<wr;pt++)Et.push([`value${pt}`,`ariaLabel${pt}`,`pointer${pt}Shape`,`pointer${pt}Disabled`,pt-1]);for(let pt of Et)_i(Fe,Xe,pt[4],pt[0],pt[1],pt[2],pt[3])},tr=(Fe,Xe,Et)=>{var pt;let Yt=(pt=Et.shadowRoot)==null?void 0:pt.querySelector(".container");if(Yt)for(let An of Fe)Xe?Yt.prepend(An.$pointer):Yt.append(An.$pointer)},yi=(Fe,Xe)=>{if(!(!Xe||Fe.length<=1)){for(let Et of Fe)Et.$pointer.style.zIndex=Ao.toString();Xe.$pointer.style.zIndex=(Ao*2).toString()}},pi=0,_r=100,uo=2,Or="0.3s",go=(Fe,Xe,Et)=>{let pt=Et.map(Ye=>Ye[0]),Yt=null,An=null,Rn=null,Ht=null,mt=pi,jn=_r,Vn,an,gn=we,Qr=uo,Wr=!1,Ln=!1,dt=!1,Nt=0,Rr=1/0,fr=!1,Er,Ir,ri=!1,xn=!1,Bi=!1,Io=Or,no=[],Us=Ye=>{ri||(Ye.preventDefault&&Ye.preventDefault(),es(Ye),window.addEventListener("mousemove",es),window.addEventListener("mouseup",No),zt(Fe,Ye))},No=Ye=>{ri||(Er=void 0,Ir=void 0,window.removeEventListener("mousemove",es),window.removeEventListener("mouseup",No),Io&&Xe.classList.add(un),$t(Fe,Ye))},Po=(Ye,Rt)=>{if(pt.length<=0)return;if(pt.length===1)return pt[0].isClicked(Ye)&&Io&&Xe.classList.remove(un),pt[0];let rn=Es(Ye);if(fr){let Hn=Rt,bi=js(Hn);bi!==void 0&&(Hn=Ve(Hn,bi)),rn?(Er=Hn,Ir=0,Io&&Xe.classList.remove(un)):Er!==void 0&&(Ir=Hn-Er,Er=Hn)}if(!rs(Ye)&&!rn){for(let Hn of pt)if(!(!Hn.isClicked(Ye)||Hn.disabled))return Io&&Xe.classList.remove(un),Hn;for(let Hn of pt)if(Yt===Hn)return Hn}let vr=1/0,Fr=null;for(let Hn of pt){if(Hn.disabled)continue;let bi=Math.abs(Rt-Hn.percent);bi<vr&&(vr=bi,Fr=Hn)}return Fr},mo=()=>pt.findIndex(Ye=>Yt===Ye&&!Ye.disabled),es=Ye=>{let Rt;if(gn===ge){let{height:vr,top:Fr}=Xe.getBoundingClientRect(),Hn=Ye.type.indexOf("mouse")!==-1?Ye.clientY:Ye.touches[0].clientY;Rt=Math.min(Math.max(0,Hn-Fr),vr)*100/vr}else{let{width:vr,left:Fr}=Xe.getBoundingClientRect(),Hn=Ye.type.indexOf("mouse")!==-1?Ye.clientX:Ye.touches[0].clientX;Rt=Math.min(Math.max(0,Hn-Fr),vr)*100/vr}if((Wr||Ln)&&(Rt=100-Rt),Yt=Po(Ye.target,Rt),Yt&&yi(pt,Yt),fr&&pt.length>1&&Ir!==void 0){let vr=pt[0],Fr=pt[pt.length-1],Hn=vr.percent+Ir<0,bi=Fr.percent+Ir>100;if(Hn||bi)return;for(let gs=0;gs<pt.length;gs++)Ur(gs,pt[gs].percent+Ir);return}let rn=mo();rn!==-1&&(Ur(rn,Rt),Yt==null||Yt.$pointer.focus())},ts=Ye=>{if(ri||document.activeElement!==Fe||Yt!=null&&Yt.disabled)return;Ye.stopPropagation(),Ye.preventDefault();let Rt=Ye.deltaY<0,rn=Wr||Ln,vr=Rt?!rn:rn,Fr=mo();Fr!==-1&&(vr?Vr(Fr,pt[Fr].percent):Co(Fr,pt[Fr].percent))},ws=Ye=>{ri||xn||(gn===ge?Ln?Ur(Ye,100):Ur(Ye,0):Wr?Co(Ye,pt[Ye].percent):Vr(Ye,pt[Ye].percent))},ns=Ye=>{ri||xn||(gn===ge?Ln?Ur(Ye,0):Ur(Ye,100):Wr?Vr(Ye,pt[Ye].percent):Co(Ye,pt[Ye].percent))},_s=Ye=>{ri||xn||(gn===ge?Ln?Co(Ye,pt[Ye].percent):Vr(Ye,pt[Ye].percent):Wr?Ur(Ye,100):Ur(Ye,0))},Bo=Ye=>{ri||xn||(gn===ge?Ln?Vr(Ye,pt[Ye].percent):Co(Ye,pt[Ye].percent):Wr?Ur(Ye,0):Ur(Ye,100))},rs=Ye=>Ye.classList.contains("panel"),Es=Ye=>Ye.classList.contains("panel-fill"),Vr=(Ye,Rt)=>{if(Rt===void 0)return;let rn=js(Rt);rn==null&&(rn=1),Rt-=rn,Rt<0&&(Rt=0),Ur(Ye,Rt)},Co=(Ye,Rt)=>{if(Rt===void 0)return;let rn=js(Rt);rn==null&&(rn=1),Rt+=rn,Rt>100&&(Rt=100),Ur(Ye,Rt)},hs=()=>{!Ht||Ht.update({percents:Ia(),values:vo(),$pointers:co(),min:pa(),max:ga(),data:Uo(),step:ps(),round:Pe(),type:Le(),textMin:Wi(),textMax:zo(),rightToLeft:dn(),bottomToTop:sr(),pointersOverlap:Yr(),pointersMinDistance:ke(),pointersMaxDistance:rt(),rangeDragging:zr(),disabled:dr(),keyboardDisabled:hr(),mousewheelDisabled:pr()})},da=()=>{hs()},is=Ye=>{if(!(dt||pt.length<=1||jn===mt))if(Ye===0){let Rt=Rr*100/(jn-mt);return Math.max(0,pt[Ye+1].percent-Rt)}else{let Rt=Nt*100/(jn-mt);return Math.min(pt[Ye-1].percent+Rt,100)}},ha=Ye=>{if(!(dt||pt.length<=1||jn===mt))if(Ye===pt.length-1){let Rt=Rr*100/(jn-mt);return Math.min(pt[Ye-1].percent+Rt,100)}else{let Rt=Nt*100/(jn-mt);return Math.max(0,pt[Ye+1].percent-Rt)}},js=Ye=>{let Rt;if(typeof Vn=="function"){let rn=$e(0,100,mt,jn,Ye);Rt=Vn(rn,Ye)}else Rt=Vn;if(ve(Rt)){let rn=jn-mt;return Rt=rn===0?0:Rt*100/rn,Rt}},Go=Ye=>{if(Ye===void 0)return;let Rt=$e(0,100,mt,jn,Ye);return an!==void 0?an[Math.round(Rt)]:Ue(Rt,Qr)},Wi=()=>an!==void 0?an[mt]:mt,zo=()=>an!==void 0?an[jn]:jn,ps=()=>Vn,os=Ye=>{var Rt;return Ye<=0||dt?Wi():(Rt=Go(pt[Ye-1].percent))!=null?Rt:""},Hs=Ye=>{var Rt;return pt.length<=1||Ye>=pt.length-1||dt?zo():(Rt=Go(pt[Ye+1].percent))!=null?Rt:""},Ia=()=>pt.map(Ye=>Ye.percent),vo=()=>pt.map(Ye=>Go(Ye.percent)),co=()=>pt.map(Ye=>Ye.$pointer),pa=()=>mt,ga=()=>jn,Uo=()=>an,Le=()=>gn,Pe=()=>Qr,ke=()=>Nt,rt=()=>Rr,Mt=Ye=>no[Ye],dn=()=>Wr,sr=()=>Ln,dr=()=>ri,hr=()=>xn,pr=()=>Bi,Yr=()=>dt,zr=()=>fr,Ur=(Ye,Rt)=>{if(Rt===void 0)return;let rn=js(Rt);rn!==void 0&&(Rt=Ve(Rt,rn));let vr=pt[Ye];if(!vr)return;let Fr=vr.updatePosition(Rt,is(Ye),ha(Ye),gn,Wr,Ln);An==null||An.updatePosition(gn,pt.map(Hn=>Hn.percent),Wr,Ln),hs();for(let Hn of pt){let bi=Go(Hn.percent);bi!==void 0&&(Hn.setAttr("aria-valuenow",bi.toString()),Hn.setAttr("aria-valuetext",bi.toString()))}z(),Fr&&it(Fe,pt.map(Hn=>Go(Hn.percent)))},gi=()=>{for(let Ye=0;Ye<pt.length;Ye++)Ur(Ye,pt[Ye].percent)},M=(Ye,Rt)=>{mt=an!==void 0?0:Ee(Ye,pi),jn=an!==void 0?an.length-1:Ee(Rt,_r),Y(mt),K(jn)},z=()=>{var Ye,Rt;for(let rn=0;rn<pt.length;rn++){let vr=pt[rn];vr.setAttr("aria-valuemin",((Ye=os(rn))!=null?Ye:"").toString()),vr.setAttr("aria-valuemax",((Rt=Hs(rn))!=null?Rt:"").toString())}},Y=Ye=>{mt=Ee(Ye,pi),mt>jn&&(jn=mt+_r),gi()},K=Ye=>{jn=Ee(Ye,_r),jn<mt&&(jn=mt+_r),gi()},ce=Ye=>{dt=!0;for(let Rt=0;Rt<Ye.length;Rt++)ae(Ye[Rt],Rt);dt=!1;for(let Rt=0;Rt<Ye.length;Rt++)ae(Ye[Rt],Rt)},ae=(Ye,Rt)=>{let rn;an!==void 0?(rn=Ye==null?0:Se(Ye,an),rn===-1&&(rn=0)):(rn=Ee(Ye,mt),rn<mt&&(rn=mt),rn>jn&&(rn=jn));let vr=$e(mt,jn,0,100,rn);Ur(Rt,vr)},pe=Ye=>{if(Ye==null){Vn=void 0;return}if(typeof Ye=="function"){Vn=Ye,gi();return}if(ve(Ye)){Vn=Ee(Ye,1);let Rt=Math.abs(jn-mt);Vn>Rt&&(Vn=void 0),gi();return}Vn=void 0},He=Ye=>{dt=Ye,gi()},Ie=Ye=>{(!ve(Ye)||Ye<0)&&(Ye=0),Nt=Ye},et=Ye=>{(!ve(Ye)||Ye<0)&&(Ye=1/0),Rr=Ye},vt=Ye=>{ri=Ye,Xe.classList.toggle("disabled",ri),ri?Xe.setAttribute("aria-disabled","true"):Xe.hasAttribute("aria-disabled")&&Xe.removeAttribute("aria-disabled")},oe=Ye=>{xn=Ye},de=Ye=>{Bi=Ye,Bi?document.removeEventListener("wheel",ts):document.addEventListener("wheel",ts,{passive:!1})},ze=Ye=>{if(Ye==null){an=void 0;return}if(an=ye(Ye),an===void 0||an.length<=0){an=void 0;return}Y(0),K(an.length-1),Vn===void 0&&pe(1)},gt=Ye=>{var Rt;typeof Ye=="string"?gn=Ye.trim().toLowerCase()===ge?ge:we:gn=we;let rn=(Rt=Fe.shadowRoot)==null?void 0:Rt.querySelector(".range-slider-box");if(!rn)return;rn.className=`range-slider-box type-${gn}`,gi();let vr=gn===ge?"vertical":"horizontal";for(let Fr of pt)Fr.setAttr("aria-orientation",vr)},qt=Ye=>{Wr=Ye,pt.length>1&&tr(pt,Wr,Fe),gi(),hs()},Ft=Ye=>{Ln=Ye,pt.length>1&&tr(pt,Ln,Fe),gi(),hs()},Sn=Ye=>{Qr=Ee(Ye,uo),Qr<0&&(Qr=uo),hs()},er=Ye=>{Ye==null||Ye.toString().trim().toLowerCase()==="false"?(Io=void 0,Xe.style.removeProperty(U),Xe.classList.remove(un)):(Io=Ye.toString(),Xe.style.setProperty(U,Io),Xe.classList.add(un))},yr=(Ye,Rt)=>{let rn=pt[Ye];!rn||(rn.setAttr("aria-label",Rt),no[Ye]=Rt)},ii=Ye=>{if(Er=void 0,pt.length<=1){fr=!1,Xe.classList.remove(Wn);return}fr=Ye,Xe.classList.toggle(Wn,fr)},Pn=()=>{vt(ft(Fe.getAttribute(x))),xn=ft(Fe.getAttribute(_)),Bi=ft(Fe.getAttribute(E));let Ye=Kt(Fe,/^pointer([0-9]*)-disabled$/,Rt=>ft(Rt));for(let Rt of Ye){let rn=Rt[0];!pt[rn]||(pt[rn].disabled=Rt[1])}},fo=()=>{let Ye=Kt(Fe,/^aria-label([0-9]*)$/);for(let Rt of Ye){let rn=Rt[0];yr(rn,Rt[1])}},Dn=Ye=>{let Rt=pt.length,rn=pt[Rt-1].$pointer,vr=rn.cloneNode(!0);rn.after(vr);let Fr=Te(Fe,vr,Rt);return Fr.setCallbacks(ws,ns,_s,Bo),pt.push(Fr),ae(Ye,Rt),gi(),hs(),Rt},Ar=()=>{let Ye=pt.length,Rt=pt[Ye-1];return Rt?(Rt.destroy(),pt.pop(),pt.length<=1&&ii(!1),gi(),hs(),Ye-1):-1};return(()=>{var Ye,Rt;for(let vr of pt)vr.setCallbacks(ws,ns,_s,Bo);let rn=(Ye=Fe.shadowRoot)==null?void 0:Ye.querySelector(".panel-fill");rn&&(An=Re(rn)),gt(Fe.getAttribute(g)),qt(ft(Fe.getAttribute(y))),Ft(ft(Fe.getAttribute(v))),M(Fe.getAttribute(c),Fe.getAttribute(d)),pe(Fe.getAttribute(p)),ze(Fe.getAttribute(f)),ce(Et.map(vr=>vr[1])),He(ft(Fe.getAttribute(s))),Ie(Ee(Fe.getAttribute(a),0)),et(Ee(Fe.getAttribute(l),1/0)),ii(ft(Fe.getAttribute(u))),Sn(Ee(Fe.getAttribute(h),uo)),Pn(),fo(),Rn=_n(Fe,Xe,pt),er((Rt=Fe.getAttribute(se))!=null?Rt:Or),Xe.addEventListener("mousedown",Us),Xe.addEventListener("mouseup",No),Xe.addEventListener("touchmove",es),Xe.addEventListener("touchstart",es),Bi||document.addEventListener("wheel",ts,{passive:!1}),Ht=qn(Fe,da,{setValues:ce,setMin:Y,setMax:K,setStep:pe,setPointersOverlap:He,setPointersMinDistance:Ie,setPointersMaxDistance:et,setDisabled:vt,setType:gt,setRightToLeft:qt,setBottomToTop:Ft,setRound:Sn,setKeyboardDisabled:oe,setMousewheelDisabled:de,setRangeDragging:ii,setData:ze},{getPercents:Ia,getValues:vo,getPointerElements:co,getMin:pa,getMax:ga,getStep:ps,getData:Uo,getType:Le,getRound:Pe,getTextMin:Wi,getTextMax:zo,isRightToLeft:dn,isBottomToTop:sr,isDisabled:dr,isKeyboardDisabled:hr,isMousewheelDisabled:pr,isPointersOverlap:Yr,isRangeDraggingEnabled:zr,getPointersMinDistance:ke,getPointersMaxDistance:rt}),Ht.init()})(),{get pointers(){return pt},get styles(){return Rn},get pluginsManager(){return Ht},get min(){return Wi()},get max(){return zo()},get step(){return ps()},get pointersOverlap(){return Yr()},set pointersOverlap(Ye){He(Ye)},get pointersMinDistance(){return ke()},set pointersMinDistance(Ye){Ie(Ye)},get pointersMaxDistance(){return rt()},set pointersMaxDistance(Ye){et(Ye)},get disabled(){return dr()},set disabled(Ye){vt(Ye)},get data(){return Uo()},get type(){return Le()},set type(Ye){gt(Ye)},get rightToLeft(){return dn()},set rightToLeft(Ye){qt(Ye)},get bottomToTop(){return sr()},set bottomToTop(Ye){Ft(Ye)},get round(){return Pe()},set round(Ye){Sn(Ye)},get animateOnClick(){return Io},set animateOnClick(Ye){er(Ye)},get keyboardDisabled(){return hr()},set keyboardDisabled(Ye){oe(Ye)},get mousewheelDisabled(){return pr()},set mousewheelDisabled(Ye){de(Ye)},get rangeDragging(){return zr()},set rangeDragging(Ye){ii(Ye)},setMin:Y,setMax:K,setValue:ae,setStep:pe,setData:ze,getTextValue:Go,setAriaLabel:yr,getAriaLabel:Mt,addPointer:Dn,removePointer:Ar,destroy:()=>{Xe.removeEventListener("mousedown",Us),Xe.removeEventListener("mouseup",No),Xe.removeEventListener("touchmove",es),Xe.removeEventListener("touchstart",es),document.removeEventListener("wheel",ts);for(let Ye of pt)Ye.destroy();Ht==null||Ht.destroy()}}},Zr=(Fe,Xe,Et)=>{let pt=bn.find(([Ht,mt,jn,Vn])=>mt.replace("#","")===Xe.replace(/\d+/g,""));if(pt&&Fe.styles){let[Ht,mt,jn,Vn]=pt,an=Xe.replace(/\D/g,"").trim(),gn=an===""||an==="0"||an==="1"?0:Ee(an,0)-1;Fe.styles.setStyle(Ht,Et,gn);return}switch(Fe&&Fe.pluginsManager&&Fe.pluginsManager.onAttrChange(Xe,Et),Xe){case c:{Fe.setMin(Et);break}case d:{Fe.setMax(Et);break}case p:{Fe.setStep(Et);break}case s:{Fe.pointersOverlap=ft(Et);break}case a:{Fe.pointersMinDistance=Ee(Et,0);break}case u:{Fe.rangeDragging=ft(Et);break}case l:{Fe.pointersMaxDistance=Ee(Et,1/0);break}case x:{Fe.disabled=ft(Et);break}case _:{Fe.keyboardDisabled=ft(Et);break}case E:{Fe.mousewheelDisabled=ft(Et);break}case f:{Fe.setData(Et);break}case g:{Fe.type=Et;break}case y:{Fe.rightToLeft=ft(Et);break}case v:{Fe.bottomToTop=ft(Et);break}case h:{Fe.round=Ee(Et,uo);break}case m:{Fe.styles&&(Fe.styles.theme=Et);break}case se:{Fe.animateOnClick=Et;break}}let Yt=null;if(/^value([0-9]*)$/.test(Xe)&&(Yt="value"),/^pointer([0-9]*)-disabled$/.test(Xe)&&(Yt="pointer-disabled"),/^aria-label([0-9]*)$/.test(Xe)&&(Yt="aria-label"),/^pointer([0-9]*)-shape$/.test(Xe)&&(Yt="pointer-shape"),!Yt)return;let An=Xe.replace(/\D/g,"").trim(),Rn=An===""||An==="0"||An==="1"?0:Ee(An,0)-1;switch(Yt){case"value":{Fe.setValue(Et,Rn);break}case"pointer-disabled":{let Ht=Fe==null?void 0:Fe.pointers[Rn];if(!Ht)return;Ht.disabled=ft(Et);break}case"aria-label":{Fe.setAriaLabel(Rn,Et);break}case"pointer-shape":{Fe.styles&&Fe.styles.setPointerShape(Rn,Et);break}}},Fi=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(Fe){this.slider&&this.slider.setStep(Fe)}get step(){var Fe;return(Fe=this.slider)==null?void 0:Fe.step}set disabled(Fe){this.slider&&(this.slider.disabled=Fe)}get disabled(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.disabled)!=null?Xe:!1}set data(Fe){var Xe;(Xe=this.slider)==null||Xe.setData(Fe)}get data(){var Fe;return(Fe=this.slider)==null?void 0:Fe.data}set min(Fe){var Xe;(Xe=this.slider)==null||Xe.setMin(Fe)}get min(){var Fe;return(Fe=this.slider)==null?void 0:Fe.min}set max(Fe){var Xe;(Xe=this.slider)==null||Xe.setMax(Fe)}get max(){var Fe;return(Fe=this.slider)==null?void 0:Fe.max}set round(Fe){!this.slider||(this.slider.round=Fe)}get round(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.round)!=null?Xe:uo}set type(Fe){!this.slider||(this.slider.type=Fe??we)}get type(){var Fe;return((Fe=this.slider)==null?void 0:Fe.type)||we}set pointersOverlap(Fe){!this.slider||(this.slider.pointersOverlap=Fe)}get pointersOverlap(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.pointersOverlap)!=null?Xe:!1}set pointersMinDistance(Fe){!this.slider||(this.slider.pointersMinDistance=Fe)}get pointersMinDistance(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.pointersMinDistance)!=null?Xe:0}set pointersMaxDistance(Fe){!this.slider||(this.slider.pointersMaxDistance=Fe)}get pointersMaxDistance(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.pointersMaxDistance)!=null?Xe:1/0}set theme(Fe){!this.slider||!this.slider.styles||(this.slider.styles.theme=Fe)}get theme(){var Fe,Xe,Et;return(Et=(Xe=(Fe=this.slider)==null?void 0:Fe.styles)==null?void 0:Xe.theme)!=null?Et:null}set rtl(Fe){!this.slider||(this.slider.rightToLeft=Fe)}get rtl(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.rightToLeft)!=null?Xe:!1}set btt(Fe){!this.slider||(this.slider.bottomToTop=Fe)}get btt(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.bottomToTop)!=null?Xe:!1}set keyboardDisabled(Fe){!this.slider||(this.slider.keyboardDisabled=Fe)}get keyboardDisabled(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.keyboardDisabled)!=null?Xe:!1}set mousewheelDisabled(Fe){!this.slider||(this.slider.mousewheelDisabled=Fe)}get mousewheelDisabled(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.mousewheelDisabled)!=null?Xe:!1}set animateOnClick(Fe){!this.slider||(this.slider.animateOnClick=Fe)}get animateOnClick(){var Fe;return(Fe=this.slider)==null?void 0:Fe.animateOnClick}get rangeDragging(){var Fe,Xe;return(Xe=(Fe=this.slider)==null?void 0:Fe.rangeDragging)!=null?Xe:!1}set rangeDragging(Fe){this.slider&&(this.slider.rangeDragging=ft(Fe))}get externalCSSList(){return this._externalCSSList}addPointer(Fe){var Xe,Et;if(!this.slider)return;let pt=(Et=(Xe=this.slider)==null?void 0:Xe.addPointer(Fe))!=null?Et:0;_i(this,this.slider,pt,`value${pt+1}`,`ariaLabel${pt+1}`,`pointerShape${pt+1}`,`pointer${pt+1}Disabled`)}removePointer(){var Fe;!this.slider||(Fe=this.slider)==null||Fe.removePointer()}addCSS(Fe){if(!this.shadowRoot)return;let Xe=document.createElement("style");Xe.textContent=Fe,this.shadowRoot.appendChild(Xe)}connectedCallback(){var Fe,Xe;if(!this.shadowRoot)return;this._externalCSSList=Pt(this),this.shadowRoot.innerHTML=i(o,this._externalCSSList);let Et=(Fe=this.shadowRoot)==null?void 0:Fe.querySelector(".pointer");if(!Et)return;let pt=(Xe=this.shadowRoot)==null?void 0:Xe.getElementById("range-slider");if(!pt)return;let Yt=Gi(this,Et);this.slider=go(this,pt,Yt),$s(this,this.slider),this._observer=new MutationObserver(An=>{An.forEach(Rn=>{var Ht;if(!this.slider||Rn.type!=="attributes")return;let mt=Rn.attributeName;!mt||Zr(this.slider,mt,(Ht=this.getAttribute(mt))!=null?Ht:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},or=Fi;window.tcRangeSlider=or,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",or),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends or{})})();var Qv,oPe,G8;class iPe extends Pi{constructor(){super();zn(this,Qv);this.filterObject={},this.tabIndex=0,this.inputHandler=In(this,Qv,oPe).bind(this),this.debouncedInputHandler=xy(this.inputHandler,500,{leading:!1})}reset(){o3t(this)}createRenderRoot(){return this}render(){return xr(this.filterObject,()=>yt`
        ${In(this,Qv,G8).call(this,"min","before")}
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min||this.filterObject.min}"
          value2="${this.filterObject.state.max||this.filterObject.max}"
          step="${this.filterObject.step||1}"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        ${In(this,Qv,G8).call(this,"max","after")}
      `)}}Qv=new WeakSet,oPe=function(n){s3t(n,this)},G8=function(n,r){return a3t(n,r,this)},Cn(iPe,"properties",{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number}});customElements.define("eox-itemfilter-range",iPe);var iL,sPe;class A3t extends Pi{constructor(){super();zn(this,iL);this.filterObject={},this.tabIndex=0}static get properties(){return{filterObject:{type:Object},tabIndex:{attribute:!1,type:Number}}}reset(){p3t(this)}createRenderRoot(){return this}render(){return xr(this.filterObject,()=>{var n;return yt`
        <form style="display: inline">
          ${cc(["intersects","within"],r=>yt`
              <label>
                <input
                  tabindex=${this.tabIndex}
                  type="radio"
                  name="mode"
                  .checked="${(this.filterObject.state.mode||"")===r||Li}"
                  value="${r}"
                  @click=${()=>In(this,iL,sPe).call(this,r)}
                />
                <small>${r} filter geometry</small>
              </label>
            `)}
        </form>
        <eox-itemfilter-spatial-filter
          exportparts="map: spatial-filter-map"
          .geometry="${(n=this.filterObject.state)==null?void 0:n.geometry}"
          @filter="${r=>{this.filterObject.state.geometry=r.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
        ></eox-itemfilter-spatial>
      `})}}iL=new WeakSet,sPe=function(n){m3t(n,this)};customElements.define("eox-itemfilter-spatial",A3t);var oL,aPe;class C3t extends Pi{constructor(){super();zn(this,oL);this.geometry=null,this.eoxMap=null}static get properties(){return{geometry:{type:Object},eoxMap:{type:Object}}}firstUpdated(){In(this,oL,aPe).call(this)}reset(){g3t(this)}render(){return yt`<div id="eox-map"></div>`}}oL=new WeakSet,aPe=function(){XNe(this)};customElements.define("eox-itemfilter-spatial-filter",C3t);function S3t(e,t){t.renderRoot.querySelectorAll(".chip").forEach(n=>{n.classList.remove("highlighted")}),e.target instanceof HTMLElement&&e.target.classList.add("highlighted"),t.requestUpdate()}function k3t(e,t){const{code:n,target:r}=e;r instanceof HTMLElement&&r.id!=="eox-itemfilter-input-search"||t.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(n)||(n==="Space"&&e.preventDefault(),["Escape","Space","Enter"].includes(n)||e.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(n)&&T3t(n,e.target.value??"",t))}function T3t(e,t,n){const r=n.renderRoot.querySelector(".chip.highlighted");if((e==="Escape"||t)&&r&&r.classList.remove("highlighted"),e==="Backspace"&&!t){if(n.items.length){r&&(r.querySelector(".chip-item-close").click(),n.items.splice(Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(r),1));const i=n.renderRoot.querySelectorAll(".chip")[n.renderRoot.querySelectorAll(".chip").length-1];i.classList.contains("highlighted")||i.classList.add("highlighted"),n.requestUpdate()}n._dispatchEvent()}if((e==="ArrowLeft"||e==="ArrowRight")&&!t){if(n.renderRoot.querySelectorAll(".chip").length<1)return;let i=0;const o=n.renderRoot.querySelector(".chip.highlighted");o&&(i=Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(o),o.classList.remove("highlighted")),i=i+(e==="ArrowLeft"?-1:1),e==="ArrowLeft"&&i<0&&(i=n.renderRoot.querySelectorAll(".chip").length-1),e==="ArrowRight"&&i>n.renderRoot.querySelectorAll(".chip").length-1&&(i=0),Array.from(n.renderRoot.querySelectorAll(".chip"))[i].classList.add("highlighted")}}var Jv,W8,lPe;class D3t extends Pi{constructor(){super();zn(this,Jv);this.items={},this.controller={}}static get properties(){return{items:{attribute:!1,type:Object},controller:{attribute:!1,type:Object}}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",In(this,Jv,W8).bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",In(this,Jv,W8).bind(this))}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}render(){return yt`
      <style>
        ${fC}
      </style>
      <span class="chip-container">
        ${cc(this.items,n=>yt`
            <span class="chip" @click=${In(this,Jv,lPe).bind(this)}>
              <span class="chip-title">${n.title}</span>
                <span
                  class="chip-item-close hidden"
                  data-close=${n.key}
                  @click=${r=>{r.stopPropagation(),this.controller.remove(r),this.requestUpdate()}}
                ></span>
            </span>
            </span>
          `)}
      </span>
    `}}Jv=new WeakSet,W8=function(n){k3t(n,this)},lPe=function(n){S3t(n,this)};customElements.define("eox-itemfilter-chips",D3t);const L3t=Object.freeze({aggregateResults:void 0,autoSpreadSingle:!1,enableHighlighting:!1,externalFilter:()=>{},filterProperties:[],fuseConfig:{},inlineMode:!1,matchAllWhenEmpty:!0,showResults:!0,idProperty:"id",titleProperty:"title",subTitleProperty:void 0,imageProperty:void 0,expandMultipleFilters:!0,expandResults:!0,expandMultipleResults:!0}),MCe=["aggregateResults","autoSpreadSingle","enableHighlighting","externalFilter","filterProperties","fuseConfig","inlineMode","matchAllWhenEmpty","showResults","titleProperty","subTitleProperty","imageProperty","idProperty","expandMultipleFilters","expandResults","expandMultipleResults","items"];var F5,OCe;function R3t(){if(OCe)return F5;OCe=1;var e=200,t="__lodash_hash_undefined__",n=1/0,r="[object Function]",i="[object GeneratorFunction]",o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=typeof jo=="object"&&jo&&jo.Object===Object&&jo,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function f(V,fe){var he=V?V.length:0;return!!he&&d(V,fe,0)>-1}function c(V,fe,he,me){for(var Oe=V.length,Me=he+-1;++Me<Oe;)if(fe(V[Me],Me,V))return Me;return-1}function d(V,fe,he){if(fe!==fe)return c(V,p,he);for(var me=he-1,Oe=V.length;++me<Oe;)if(V[me]===fe)return me;return-1}function p(V){return V!==V}function h(V,fe){return V.has(fe)}function g(V,fe){return V==null?void 0:V[fe]}function m(V){var fe=!1;if(V!=null&&typeof V.toString!="function")try{fe=!!(V+"")}catch{}return fe}function y(V){var fe=-1,he=Array(V.size);return V.forEach(function(me){he[++fe]=me}),he}var v=Array.prototype,x=Function.prototype,_=Object.prototype,E=u["__core-js_shared__"],C=function(){var V=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}(),w=x.toString,T=_.hasOwnProperty,R=_.toString,L=RegExp("^"+w.call(T).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=v.splice,P=Se(u,"Map"),S=Se(u,"Set"),k=Se(Object,"create");function D(V){var fe=-1,he=V?V.length:0;for(this.clear();++fe<he;){var me=V[fe];this.set(me[0],me[1])}}function O(){this.__data__=k?k(null):{}}function N(V){return this.has(V)&&delete this.__data__[V]}function j(V){var fe=this.__data__;if(k){var he=fe[V];return he===t?void 0:he}return T.call(fe,V)?fe[V]:void 0}function q(V){var fe=this.__data__;return k?fe[V]!==void 0:T.call(fe,V)}function W(V,fe){var he=this.__data__;return he[V]=k&&fe===void 0?t:fe,this}D.prototype.clear=O,D.prototype.delete=N,D.prototype.get=j,D.prototype.has=q,D.prototype.set=W;function Q(V){var fe=-1,he=V?V.length:0;for(this.clear();++fe<he;){var me=V[fe];this.set(me[0],me[1])}}function ee(){this.__data__=[]}function H(V){var fe=this.__data__,he=$t(fe,V);if(he<0)return!1;var me=fe.length-1;return he==me?fe.pop():B.call(fe,he,1),!0}function se(V){var fe=this.__data__,he=$t(fe,V);return he<0?void 0:fe[he][1]}function ne(V){return $t(this.__data__,V)>-1}function ge(V,fe){var he=this.__data__,me=$t(he,V);return me<0?he.push([V,fe]):he[me][1]=fe,this}Q.prototype.clear=ee,Q.prototype.delete=H,Q.prototype.get=se,Q.prototype.has=ne,Q.prototype.set=ge;function we(V){var fe=-1,he=V?V.length:0;for(this.clear();++fe<he;){var me=V[fe];this.set(me[0],me[1])}}function $e(){this.__data__={hash:new D,map:new(P||Q),string:new D}}function ve(V){return ye(this,V).delete(V)}function Ee(V){return ye(this,V).get(V)}function Ve(V){return ye(this,V).has(V)}function Ue(V,fe){return ye(this,V).set(V,fe),this}we.prototype.clear=$e,we.prototype.delete=ve,we.prototype.get=Ee,we.prototype.has=Ve,we.prototype.set=Ue;function ft(V){var fe=-1,he=V?V.length:0;for(this.__data__=new we;++fe<he;)this.add(V[fe])}function ht(V){return this.__data__.set(V,t),this}function zt(V){return this.__data__.has(V)}ft.prototype.add=ft.prototype.push=ht,ft.prototype.has=zt;function $t(V,fe){for(var he=V.length;he--;)if(ie(V[he][0],fe))return he;return-1}function Tn(V){if(!Ce(V)||U(V))return!1;var fe=be(V)||m(V)?L:s;return fe.test(Z(V))}function it(V,fe,he){var me=-1,Oe=f,Me=V.length,Be=!0,We=[],Qe=We;if(Me>=e){var ut=Te(V);if(ut)return y(ut);Be=!1,Oe=h,Qe=new ft}else Qe=We;e:for(;++me<Me;){var Tt=V[me],Ut=Tt;if(Tt=Tt!==0?Tt:0,Be&&Ut===Ut){for(var Kt=Qe.length;Kt--;)if(Qe[Kt]===Ut)continue e;We.push(Tt)}else Oe(Qe,Ut,he)||(Qe!==We&&Qe.push(Ut),We.push(Tt))}return We}var Te=S&&1/y(new S([,-0]))[1]==n?function(V){return new S(V)}:je;function ye(V,fe){var he=V.__data__;return Re(fe)?he[typeof fe=="string"?"string":"hash"]:he.map}function Se(V,fe){var he=g(V,fe);return Tn(he)?he:void 0}function Re(V){var fe=typeof V;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?V!=="__proto__":V===null}function U(V){return!!C&&C in V}function Z(V){if(V!=null){try{return w.call(V)}catch{}try{return V+""}catch{}}return""}function re(V){return V&&V.length?it(V):[]}function ie(V,fe){return V===fe||V!==V&&fe!==fe}function be(V){var fe=Ce(V)?R.call(V):"";return fe==r||fe==i}function Ce(V){var fe=typeof V;return!!V&&(fe=="object"||fe=="function")}function je(){}return F5=re,F5}var F3t=R3t();const uPe=Fa(F3t);var l_={exports:{}};l_.exports;var ICe;function $3t(){return ICe||(ICe=1,function(e,t){var n=200,r="Expected a function",i="__lodash_hash_undefined__",o=1,s=2,a=9007199254740991,l="[object Arguments]",u="[object Array]",f="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Function]",h="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Object]",v="[object Promise]",x="[object RegExp]",_="[object Set]",E="[object String]",C="[object Symbol]",w="[object WeakMap]",T="[object ArrayBuffer]",R="[object DataView]",L="[object Float32Array]",B="[object Float64Array]",P="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",D="[object Uint8Array]",O="[object Uint8ClampedArray]",N="[object Uint16Array]",j="[object Uint32Array]",q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,Q=/^\./,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,se=/\\(\\)?/g,ne=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,we={};we[L]=we[B]=we[P]=we[S]=we[k]=we[D]=we[O]=we[N]=we[j]=!0,we[l]=we[u]=we[T]=we[f]=we[R]=we[c]=we[d]=we[p]=we[g]=we[m]=we[y]=we[x]=we[_]=we[E]=we[w]=!1;var $e=typeof jo=="object"&&jo&&jo.Object===Object&&jo,ve=typeof self=="object"&&self&&self.Object===Object&&self,Ee=$e||ve||Function("return this")(),Ve=t&&!t.nodeType&&t,Ue=Ve&&!0&&e&&!e.nodeType&&e,ft=Ue&&Ue.exports===Ve,ht=ft&&$e.process,zt=function(){try{return ht&&ht.binding("util")}catch{}}(),$t=zt&&zt.isTypedArray;function Tn(oe,de){for(var ze=-1,gt=oe?oe.length:0,qt=Array(gt);++ze<gt;)qt[ze]=de(oe[ze],ze,oe);return qt}function it(oe,de){for(var ze=-1,gt=de.length,qt=oe.length;++ze<gt;)oe[qt+ze]=de[ze];return oe}function Te(oe,de){for(var ze=-1,gt=oe?oe.length:0;++ze<gt;)if(de(oe[ze],ze,oe))return!0;return!1}function ye(oe){return function(de){return de==null?void 0:de[oe]}}function Se(oe,de){for(var ze=-1,gt=Array(oe);++ze<oe;)gt[ze]=de(ze);return gt}function Re(oe){return function(de){return oe(de)}}function U(oe,de){return oe==null?void 0:oe[de]}function Z(oe){var de=!1;if(oe!=null&&typeof oe.toString!="function")try{de=!!(oe+"")}catch{}return de}function re(oe){var de=-1,ze=Array(oe.size);return oe.forEach(function(gt,qt){ze[++de]=[qt,gt]}),ze}function ie(oe,de){return function(ze){return oe(de(ze))}}function be(oe){var de=-1,ze=Array(oe.size);return oe.forEach(function(gt){ze[++de]=gt}),ze}var Ce=Array.prototype,je=Function.prototype,V=Object.prototype,fe=Ee["__core-js_shared__"],he=function(){var oe=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""}(),me=je.toString,Oe=V.hasOwnProperty,Me=V.toString,Be=RegExp("^"+me.call(Oe).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ee.Symbol,Qe=Ee.Uint8Array,ut=V.propertyIsEnumerable,Tt=Ce.splice,Ut=We?We.isConcatSpreadable:void 0,Kt=ie(Object.keys,Object),Pt=ps(Ee,"DataView"),bn=ps(Ee,"Map"),_n=ps(Ee,"Promise"),un=ps(Ee,"Set"),Wn=ps(Ee,"WeakMap"),qn=ps(Object,"create"),wr=Mt(Pt),Ao=Mt(bn),Gi=Mt(_n),_i=Mt(un),$s=Mt(Wn),tr=We?We.prototype:void 0,yi=tr?tr.valueOf:void 0,pi=tr?tr.toString:void 0;function _r(oe){var de=-1,ze=oe?oe.length:0;for(this.clear();++de<ze;){var gt=oe[de];this.set(gt[0],gt[1])}}function uo(){this.__data__=qn?qn(null):{}}function Or(oe){return this.has(oe)&&delete this.__data__[oe]}function go(oe){var de=this.__data__;if(qn){var ze=de[oe];return ze===i?void 0:ze}return Oe.call(de,oe)?de[oe]:void 0}function Zr(oe){var de=this.__data__;return qn?de[oe]!==void 0:Oe.call(de,oe)}function Fi(oe,de){var ze=this.__data__;return ze[oe]=qn&&de===void 0?i:de,this}_r.prototype.clear=uo,_r.prototype.delete=Or,_r.prototype.get=go,_r.prototype.has=Zr,_r.prototype.set=Fi;function or(oe){var de=-1,ze=oe?oe.length:0;for(this.clear();++de<ze;){var gt=oe[de];this.set(gt[0],gt[1])}}function Fe(){this.__data__=[]}function Xe(oe){var de=this.__data__,ze=Ir(de,oe);if(ze<0)return!1;var gt=de.length-1;return ze==gt?de.pop():Tt.call(de,ze,1),!0}function Et(oe){var de=this.__data__,ze=Ir(de,oe);return ze<0?void 0:de[ze][1]}function pt(oe){return Ir(this.__data__,oe)>-1}function Yt(oe,de){var ze=this.__data__,gt=Ir(ze,oe);return gt<0?ze.push([oe,de]):ze[gt][1]=de,this}or.prototype.clear=Fe,or.prototype.delete=Xe,or.prototype.get=Et,or.prototype.has=pt,or.prototype.set=Yt;function An(oe){var de=-1,ze=oe?oe.length:0;for(this.clear();++de<ze;){var gt=oe[de];this.set(gt[0],gt[1])}}function Rn(){this.__data__={hash:new _r,map:new(bn||or),string:new _r}}function Ht(oe){return Wi(this,oe).delete(oe)}function mt(oe){return Wi(this,oe).get(oe)}function jn(oe){return Wi(this,oe).has(oe)}function Vn(oe,de){return Wi(this,oe).set(oe,de),this}An.prototype.clear=Rn,An.prototype.delete=Ht,An.prototype.get=mt,An.prototype.has=jn,An.prototype.set=Vn;function an(oe){var de=-1,ze=oe?oe.length:0;for(this.__data__=new An;++de<ze;)this.add(oe[de])}function gn(oe){return this.__data__.set(oe,i),this}function Qr(oe){return this.__data__.has(oe)}an.prototype.add=an.prototype.push=gn,an.prototype.has=Qr;function Wr(oe){this.__data__=new or(oe)}function Ln(){this.__data__=new or}function dt(oe){return this.__data__.delete(oe)}function Nt(oe){return this.__data__.get(oe)}function Rr(oe){return this.__data__.has(oe)}function fr(oe,de){var ze=this.__data__;if(ze instanceof or){var gt=ze.__data__;if(!bn||gt.length<n-1)return gt.push([oe,de]),this;ze=this.__data__=new An(gt)}return ze.set(oe,de),this}Wr.prototype.clear=Ln,Wr.prototype.delete=dt,Wr.prototype.get=Nt,Wr.prototype.has=Rr,Wr.prototype.set=fr;function Er(oe,de){var ze=Yr(oe)||pr(oe)?Se(oe.length,String):[],gt=ze.length,qt=!!gt;for(var Ft in oe)Oe.call(oe,Ft)&&!(qt&&(Ft=="length"||vo(Ft,gt)))&&ze.push(Ft);return ze}function Ir(oe,de){for(var ze=oe.length;ze--;)if(hr(oe[ze][0],de))return ze;return-1}var ri=da(Io);function xn(oe,de,ze,gt,qt){var Ft=-1,Sn=oe.length;for(ze||(ze=Ia),qt||(qt=[]);++Ft<Sn;){var er=oe[Ft];ze(er)?it(qt,er):qt[qt.length]=er}return qt}var Bi=is();function Io(oe,de){return oe&&Bi(oe,de,Ie)}function no(oe,de){de=co(de,oe)?[de]:hs(de);for(var ze=0,gt=de.length;oe!=null&&ze<gt;)oe=oe[rt(de[ze++])];return ze&&ze==gt?oe:void 0}function Us(oe){return Me.call(oe)}function No(oe,de){return oe!=null&&de in Object(oe)}function Po(oe,de,ze,gt,qt){return oe===de?!0:oe==null||de==null||!z(oe)&&!Y(de)?oe!==oe&&de!==de:mo(oe,de,Po,ze,gt,qt)}function mo(oe,de,ze,gt,qt,Ft){var Sn=Yr(oe),er=Yr(de),yr=u,ii=u;Sn||(yr=os(oe),yr=yr==l?y:yr),er||(ii=os(de),ii=ii==l?y:ii);var Pn=yr==y&&!Z(oe),fo=ii==y&&!Z(de),Dn=yr==ii;if(Dn&&!Pn)return Ft||(Ft=new Wr),Sn||ce(oe)?ha(oe,de,ze,gt,qt,Ft):js(oe,de,yr,ze,gt,qt,Ft);if(!(qt&s)){var Ar=Pn&&Oe.call(oe,"__wrapped__"),Ye=fo&&Oe.call(de,"__wrapped__");if(Ar||Ye){var Rt=Ar?oe.value():oe,rn=Ye?de.value():de;return Ft||(Ft=new Wr),ze(Rt,rn,gt,qt,Ft)}}return Dn?(Ft||(Ft=new Wr),Go(oe,de,ze,gt,qt,Ft)):!1}function es(oe,de,ze,gt){var qt=ze.length,Ft=qt;if(oe==null)return!Ft;for(oe=Object(oe);qt--;){var Sn=ze[qt];if(Sn[2]?Sn[1]!==oe[Sn[0]]:!(Sn[0]in oe))return!1}for(;++qt<Ft;){Sn=ze[qt];var er=Sn[0],yr=oe[er],ii=Sn[1];if(Sn[2]){if(yr===void 0&&!(er in oe))return!1}else{var Pn=new Wr,fo;if(!(fo===void 0?Po(ii,yr,gt,o|s,Pn):fo))return!1}}return!0}function ts(oe){if(!z(oe)||ga(oe))return!1;var de=gi(oe)||Z(oe)?Be:ne;return de.test(Mt(oe))}function ws(oe){return Y(oe)&&M(oe.length)&&!!we[Me.call(oe)]}function ns(oe){return typeof oe=="function"?oe:oe==null?et:typeof oe=="object"?Yr(oe)?Es(oe[0],oe[1]):rs(oe):vt(oe)}function _s(oe){if(!Uo(oe))return Kt(oe);var de=[];for(var ze in Object(oe))Oe.call(oe,ze)&&ze!="constructor"&&de.push(ze);return de}function Bo(oe,de){var ze=-1,gt=zr(oe)?Array(oe.length):[];return ri(oe,function(qt,Ft,Sn){gt[++ze]=de(qt,Ft,Sn)}),gt}function rs(oe){var de=zo(oe);return de.length==1&&de[0][2]?Pe(de[0][0],de[0][1]):function(ze){return ze===oe||es(ze,oe,de)}}function Es(oe,de){return co(oe)&&Le(de)?Pe(rt(oe),de):function(ze){var gt=pe(ze,oe);return gt===void 0&&gt===de?He(ze,oe):Po(de,gt,void 0,o|s)}}function Vr(oe){return function(de){return no(de,oe)}}function Co(oe){if(typeof oe=="string")return oe;if(K(oe))return pi?pi.call(oe):"";var de=oe+"";return de=="0"&&1/oe==-1/0?"-0":de}function hs(oe){return Yr(oe)?oe:ke(oe)}function da(oe,de){return function(ze,gt){if(ze==null)return ze;if(!zr(ze))return oe(ze,gt);for(var qt=ze.length,Ft=-1,Sn=Object(ze);++Ft<qt&&gt(Sn[Ft],Ft,Sn)!==!1;);return ze}}function is(oe){return function(de,ze,gt){for(var qt=-1,Ft=Object(de),Sn=gt(de),er=Sn.length;er--;){var yr=Sn[++qt];if(ze(Ft[yr],yr,Ft)===!1)break}return de}}function ha(oe,de,ze,gt,qt,Ft){var Sn=qt&s,er=oe.length,yr=de.length;if(er!=yr&&!(Sn&&yr>er))return!1;var ii=Ft.get(oe);if(ii&&Ft.get(de))return ii==de;var Pn=-1,fo=!0,Dn=qt&o?new an:void 0;for(Ft.set(oe,de),Ft.set(de,oe);++Pn<er;){var Ar=oe[Pn],Ye=de[Pn];if(gt)var Rt=Sn?gt(Ye,Ar,Pn,de,oe,Ft):gt(Ar,Ye,Pn,oe,de,Ft);if(Rt!==void 0){if(Rt)continue;fo=!1;break}if(Dn){if(!Te(de,function(rn,vr){if(!Dn.has(vr)&&(Ar===rn||ze(Ar,rn,gt,qt,Ft)))return Dn.add(vr)})){fo=!1;break}}else if(!(Ar===Ye||ze(Ar,Ye,gt,qt,Ft))){fo=!1;break}}return Ft.delete(oe),Ft.delete(de),fo}function js(oe,de,ze,gt,qt,Ft,Sn){switch(ze){case R:if(oe.byteLength!=de.byteLength||oe.byteOffset!=de.byteOffset)return!1;oe=oe.buffer,de=de.buffer;case T:return!(oe.byteLength!=de.byteLength||!gt(new Qe(oe),new Qe(de)));case f:case c:case m:return hr(+oe,+de);case d:return oe.name==de.name&&oe.message==de.message;case x:case E:return oe==de+"";case g:var er=re;case _:var yr=Ft&s;if(er||(er=be),oe.size!=de.size&&!yr)return!1;var ii=Sn.get(oe);if(ii)return ii==de;Ft|=o,Sn.set(oe,de);var Pn=ha(er(oe),er(de),gt,qt,Ft,Sn);return Sn.delete(oe),Pn;case C:if(yi)return yi.call(oe)==yi.call(de)}return!1}function Go(oe,de,ze,gt,qt,Ft){var Sn=qt&s,er=Ie(oe),yr=er.length,ii=Ie(de),Pn=ii.length;if(yr!=Pn&&!Sn)return!1;for(var fo=yr;fo--;){var Dn=er[fo];if(!(Sn?Dn in de:Oe.call(de,Dn)))return!1}var Ar=Ft.get(oe);if(Ar&&Ft.get(de))return Ar==de;var Ye=!0;Ft.set(oe,de),Ft.set(de,oe);for(var Rt=Sn;++fo<yr;){Dn=er[fo];var rn=oe[Dn],vr=de[Dn];if(gt)var Fr=Sn?gt(vr,rn,Dn,de,oe,Ft):gt(rn,vr,Dn,oe,de,Ft);if(!(Fr===void 0?rn===vr||ze(rn,vr,gt,qt,Ft):Fr)){Ye=!1;break}Rt||(Rt=Dn=="constructor")}if(Ye&&!Rt){var Hn=oe.constructor,bi=de.constructor;Hn!=bi&&"constructor"in oe&&"constructor"in de&&!(typeof Hn=="function"&&Hn instanceof Hn&&typeof bi=="function"&&bi instanceof bi)&&(Ye=!1)}return Ft.delete(oe),Ft.delete(de),Ye}function Wi(oe,de){var ze=oe.__data__;return pa(de)?ze[typeof de=="string"?"string":"hash"]:ze.map}function zo(oe){for(var de=Ie(oe),ze=de.length;ze--;){var gt=de[ze],qt=oe[gt];de[ze]=[gt,qt,Le(qt)]}return de}function ps(oe,de){var ze=U(oe,de);return ts(ze)?ze:void 0}var os=Us;(Pt&&os(new Pt(new ArrayBuffer(1)))!=R||bn&&os(new bn)!=g||_n&&os(_n.resolve())!=v||un&&os(new un)!=_||Wn&&os(new Wn)!=w)&&(os=function(oe){var de=Me.call(oe),ze=de==y?oe.constructor:void 0,gt=ze?Mt(ze):void 0;if(gt)switch(gt){case wr:return R;case Ao:return g;case Gi:return v;case _i:return _;case $s:return w}return de});function Hs(oe,de,ze){de=co(de,oe)?[de]:hs(de);for(var gt,qt=-1,Sn=de.length;++qt<Sn;){var Ft=rt(de[qt]);if(!(gt=oe!=null&&ze(oe,Ft)))break;oe=oe[Ft]}if(gt)return gt;var Sn=oe?oe.length:0;return!!Sn&&M(Sn)&&vo(Ft,Sn)&&(Yr(oe)||pr(oe))}function Ia(oe){return Yr(oe)||pr(oe)||!!(Ut&&oe&&oe[Ut])}function vo(oe,de){return de=de??a,!!de&&(typeof oe=="number"||ge.test(oe))&&oe>-1&&oe%1==0&&oe<de}function co(oe,de){if(Yr(oe))return!1;var ze=typeof oe;return ze=="number"||ze=="symbol"||ze=="boolean"||oe==null||K(oe)?!0:W.test(oe)||!q.test(oe)||de!=null&&oe in Object(de)}function pa(oe){var de=typeof oe;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?oe!=="__proto__":oe===null}function ga(oe){return!!he&&he in oe}function Uo(oe){var de=oe&&oe.constructor,ze=typeof de=="function"&&de.prototype||V;return oe===ze}function Le(oe){return oe===oe&&!z(oe)}function Pe(oe,de){return function(ze){return ze==null?!1:ze[oe]===de&&(de!==void 0||oe in Object(ze))}}var ke=dr(function(oe){oe=ae(oe);var de=[];return Q.test(oe)&&de.push(""),oe.replace(ee,function(ze,gt,qt,Ft){de.push(qt?Ft.replace(se,"$1"):gt||ze)}),de});function rt(oe){if(typeof oe=="string"||K(oe))return oe;var de=oe+"";return de=="0"&&1/oe==-1/0?"-0":de}function Mt(oe){if(oe!=null){try{return me.call(oe)}catch{}try{return oe+""}catch{}}return""}function dn(oe,de){return xn(sr(oe,de))}function sr(oe,de){var ze=Yr(oe)?Tn:Bo;return ze(oe,ns(de))}function dr(oe,de){if(typeof oe!="function"||de&&typeof de!="function")throw new TypeError(r);var ze=function(){var gt=arguments,qt=de?de.apply(this,gt):gt[0],Ft=ze.cache;if(Ft.has(qt))return Ft.get(qt);var Sn=oe.apply(this,gt);return ze.cache=Ft.set(qt,Sn),Sn};return ze.cache=new(dr.Cache||An),ze}dr.Cache=An;function hr(oe,de){return oe===de||oe!==oe&&de!==de}function pr(oe){return Ur(oe)&&Oe.call(oe,"callee")&&(!ut.call(oe,"callee")||Me.call(oe)==l)}var Yr=Array.isArray;function zr(oe){return oe!=null&&M(oe.length)&&!gi(oe)}function Ur(oe){return Y(oe)&&zr(oe)}function gi(oe){var de=z(oe)?Me.call(oe):"";return de==p||de==h}function M(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=a}function z(oe){var de=typeof oe;return!!oe&&(de=="object"||de=="function")}function Y(oe){return!!oe&&typeof oe=="object"}function K(oe){return typeof oe=="symbol"||Y(oe)&&Me.call(oe)==C}var ce=$t?Re($t):ws;function ae(oe){return oe==null?"":Co(oe)}function pe(oe,de,ze){var gt=oe==null?void 0:no(oe,de);return gt===void 0?ze:gt}function He(oe,de){return oe!=null&&Hs(oe,de,No)}function Ie(oe){return zr(oe)?Er(oe):_s(oe)}function et(oe){return oe}function vt(oe){return co(oe)?ye(rt(oe)):Vr(oe)}e.exports=dn}(l_,l_.exports)),l_.exports}var M3t=$3t();const cPe=Fa(M3t);function O3t(e,t,n){let r=[];e.filterProperties.length&&e.filterProperties.forEach(o=>{const s={},a=u=>o.format==="date"?If(u).unix():parseFloat(u);t.forEach(u=>{var f,c;if(o.type==="range"){const d=IE(o.key,u);if(Array.isArray(d)){const p=[a(d[0]),a(d[1])];s.min=s.min!==void 0?Math.min(s.min,p[0]):p[0],s.max=s.max!==void 0?Math.max(s.max,p[1]):p[1]}else{const p=a(d);s.min=s.min!==void 0?Math.min(s.min,p):p,s.max=s.max!==void 0?Math.max(s.max,p):p}return}Array.isArray(u[o.key])?u[o.key].forEach(d=>{s[d]=void 0}):o.type==="spatial"?(s.geometry=((f=o==null?void 0:o.state)==null?void 0:f.geometry)||void 0,s.geometry&&(o.stringifiedState=s.geometry.type),s.mode=o.mode||"intersects"):(c=o.key)!=null&&c.includes(".")?uPe(cPe(n.items,o.key)).filter(d=>d).forEach(d=>{s[d]=void 0}):s[u[o.key]]=void 0});const l=o.key||o.keys.join("|");n.filters[l]=Object.assign({type:o.type||"multiselect",dirty:o.state?Object.values(o.state).some(u=>u):void 0,key:l},o.type==="range"?{min:s.min,max:s.max,format:o.format}:{},o),n.filters[l].state=Object.assign({},s,o.state)}),e.matchAllWhenEmpty!==!1&&(n.results=n.sortResults(t),n.requestUpdate()),e.aggregateResults&&(r=Array.from(new Set(t.reduce((o,s)=>o.concat(s[e.aggregateResults]),[]))).sort((o,s)=>o.localeCompare(s)));const i=[];return Object.values(n.filters).forEach(o=>{o.type==="text"?o.keys.forEach(s=>{i.includes(s)||i.push(s)}):(o.type==="select"||o.type==="multiselect")&&(i.includes(o.key)||i.push(o.key))}),Zkt(t,Object.assign({keys:i},e.fuseConfig)),r}async function I3t(e,t,n){let r;n.externalFilter?r=await t3t(t,n.filters,e):r=await Qkt(t,n.filters,e),n.results=n.sortResults(r)}function N3t(e,t,n){const r=`filter-${e.key}`.replace("|","-");switch(e.type){case"text":return yt`<eox-itemfilter-text
        data-type="filter"
        data-cy="text-filter"
        slot="filter"
        id="${r}"
        .tabIndex=${t}
        .filterObject=${e}
        .unstyled=${n.unstyled}
        @filter=${()=>n.search()}
      ></eox-itemfilter-text>`;case"multiselect":case"select":return yt`
        <eox-itemfilter-select
          .inlineMode=${n.inlineMode||!1}
          data-type="filter"
          id="${r}"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .suggestions="${uPe(cPe(n.items,e.key)).filter(i=>i)}"
          type="${e.type}"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-select>
      `;case"range":return yt`
        <eox-itemfilter-range
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-range>
      `;case"spatial":return yt`
        <eox-itemfilter-spatial
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          @filter=${()=>n.search()}
        ></eox-itemfilter-spatial>
      `;default:return yt``}}function P3t(e,t){return[...e].sort((n,r)=>n[t.titleProperty].localeCompare(r[t.titleProperty]))}function B3t(e,t,n){return yt`
    ${xr(e.dirty,()=>yt`
        <button
          type="button"
          tabindex=${t}
          slot="reset-button"
          class="reset-icon icon"
          @click=${r=>{const i=r.target.parentElement.querySelector("[slot=filter]");i&&typeof i.reset=="function"&&i.reset(),n.search(),n.requestUpdate()}}
        >
          ${n.unstyled?"Reset":Li}
        </button>
      `)}
  `}function z3t(e){e.renderRoot.querySelectorAll("[data-type='filter']").forEach(t=>{typeof t.reset=="function"&&t.reset()}),e.search()}var nA,s1,Lc,nx,fPe,dPe;class U3t extends Pi{constructor(){super();zn(this,nx);zn(this,nA,[]);zn(this,s1,[]);zn(this,Lc,L3t);this.items=null,this.filters={},this.results=[],this.selectedResult=null,this.search=xy(this.searchHandler,100,{leading:!0}),this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.externalFilter=null,this.filterProperties=[],this.fuseConfig={},this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.showResults=!0,this.titleProperty="title",this.subTitleProperty=void 0,this.imageProperty=void 0,this.idProperty="id",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0,this.resultType="list",this.enableResultAction=!1,this.resultActionIcon='<svg style="width: 24px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>click me!</title><path fill="#004170" d="M11.5,11L17.88,16.37L17,16.55L16.36,16.67C15.73,16.8 15.37,17.5 15.65,18.07L15.92,18.65L17.28,21.59L15.86,22.25L14.5,19.32L14.24,18.74C13.97,18.15 13.22,17.97 12.72,18.38L12.21,18.78L11.5,19.35V11M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10" /></svg>',this.styleOverride="",this.unstyled=!1}static get properties(){return{items:{attribute:!1,type:Object},results:{state:!0,attribute:!1,type:Object},filters:{state:!0,attribute:!1,type:Object},selectedResult:{attribute:!1,type:Object},aggregateResults:{attribute:"aggregate-results",type:String},autoSpreadSingle:{attribute:"auto-spread-single",type:Boolean},enableHighlighting:{attribute:"enable-highlighting",type:Boolean},filterProperties:{attribute:!1,type:Array},fuseConfig:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},matchAllWhenEmpty:{attribute:"match-all-when-empty",type:Boolean},showResults:{attribute:"show-result",type:Boolean},idProperty:{attribute:"id-property",type:String},titleProperty:{attribute:"title-property",type:String},subTitleProperty:{attribute:"sub-title-property",type:String},imageProperty:{attribute:"image-property",type:String},expandMultipleFilters:{attribute:"enable-multiple-filter",type:Boolean},expandResults:{attribute:"expand-result",type:Boolean},expandMultipleResults:{attribute:"expand-multiple-results",type:Boolean},externalFilter:{attribute:!1,type:Function},resultType:{attribute:"result-type",type:String},enableResultAction:{attribute:!1,type:Boolean},resultActionIcon:{attribute:!1,type:String},styleOverride:{type:String},unstyled:{type:Boolean}}}apply(){ko(this,nA,O3t(fn(this,Lc),fn(this,s1),this)),this.search()}async searchHandler(){await I3t(fn(this,Lc),fn(this,s1),this),this.dispatchEvent(new CustomEvent("filter",{detail:{results:this.results,filters:this.filters},bubbles:!0,composed:!0})),this.inlineMode&&this.renderRoot.querySelector("eox-itemfilter-container").updateInline(),this.requestUpdate()}sortResults(n){return P3t(n,fn(this,Lc))}resetFilters(){z3t(this)}firstUpdated(n){var i;let r={};MCe.map(o=>{r={...r,[o]:this[o]}}),ko(this,Lc,r),ko(this,s1,((i=this.items)==null?void 0:i.map((o,s)=>Object.assign({id:o[this.idProperty]||`item-${s}`},o)))||[]),this.apply()}updated(n){MCe.map(r=>n.has(r)?(this.firstUpdated(void 0),!0):!1)}updateResult(n){this.selectedResult=n.detail,this.dispatchEvent(new CustomEvent("select",{detail:this.selectedResult,bubbles:!0,composed:!0})),this.requestUpdate()}emitResultAction(n){this.dispatchEvent(new CustomEvent("click:result-action",{detail:n.detail,bubbles:!0,composed:!0}))}render(){var n;return yt`
      <style>
        ${qCt}
        ${!this.unstyled&&fC}
        ${!this.unstyled&&YL}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        class=${this.inlineMode?"inline":Li}
        @submit="${r=>r.preventDefault()}"
      >
        ${xr(this.filterProperties,()=>yt`
            <eox-itemfilter-container
              .filters=${this.filters}
              .filterProperties=${this.filterProperties}
              .inlineMode=${this.inlineMode||!1}
              @reset=${()=>this.resetFilters()}
              @filter=${()=>this.search()}
            >
              <section slot="section">
                ${xr(!this.inlineMode,()=>yt`
                    <slot name="filterstitle"
                      ><h6 class="main-heading">Filters</h6></slot
                    >
                  `)}
                <ul id="filters">
                  ${cc(Object.values(this.filters),(r,i)=>yt` <li>
                        <eox-itemfilter-expandcontainer
                          .filterObject=${r}
                          @details-toggled=${o=>UNe(o,fn(this,Lc),this)}
                          data-details="${r.key}"
                        >
                          ${In(this,nx,dPe).call(this,r,RCe(i,1))}
                          ${In(this,nx,fPe).call(this,r,RCe(i,2))}
                        </eox-itemfilter-expandcontainer>
                      </li>`)}
                </ul>
                ${xr(!this.inlineMode&&fn(this,Lc).filterProperties&&!this.inlineMode&&fn(this,Lc).filterProperties&&N8(this.filters),()=>yt`
                    <button
                      type="button"
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
              </section>
            </eox-itemfilter-container>
          `)}
        ${xr(((n=fn(this,Lc))==null?void 0:n.showResults)&&this.results,()=>yt`
            <eox-itemfilter-results
              .config=${fn(this,Lc)}
              .results=${this.results}
              .filters=${this.filters}
              .resultAggregation=${fn(this,nA)}
              .selectedResult=${this.selectedResult}
              .resultType=${this.resultType}
              .enableResultAction=${this.enableResultAction}
              .resultActionIcon=${this.resultActionIcon}
              @result=${this.updateResult}
              @click:result-action=${this.emitResultAction}
            >
              <slot name="resultstitle"
                ><h6 class="main-heading">Results</h6></slot
              >
            </eox-itemfilter-results>
          `)}
      </form>
    `}}nA=new WeakMap,s1=new WeakMap,Lc=new WeakMap,nx=new WeakSet,fPe=function(n,r){return N3t(n,r,this)},dPe=function(n,r){return B3t(n,r,this)};customElements.define("eox-itemfilter",U3t);function nk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $5={exports:{}};/**
 * easymde v2.20.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var NCe;function j3t(){return NCe||(NCe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,f){if(!i[u]){if(!r[u]){var c=typeof nk=="function"&&nk;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(h){return s(r[u][1][h]||h)},p,p.exports,n,r,i,o)}return i[u].exports}for(var a=typeof nk=="function"&&nk,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){},{}],2:[function(n,r,i){var o=n("typo-js");function s(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!s.aff_loading){s.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(s.aff_data=u.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},u.send(null)}if(!s.dic_loading){s.dic_loading=!0;var f=new XMLHttpRequest;f.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),f.onload=function(){f.readyState===4&&f.status===200&&(s.dic_data=f.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},f.send(null)}var c='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(h){var g=h.peek(),m="";if(c.includes(g))return h.next(),null;for(;(g=h.peek())!=null&&!c.includes(g);)m+=g,h.next();return s.typo&&!s.typo.check(m)?"spell-error":null}},p=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(p,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}s.num_loaded=0,s.aff_loading=!1,s.dic_loading=!1,s.aff_data="",s.dic_data="",s.typo,r.exports=s},{"typo-js":16}],3:[function(n,r,i){(function(o){function s(a,l){clearTimeout(l.timeout),o.off(window,"mouseup",l.hurry),o.off(window,"keyup",l.hurry)}o.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(s(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,f){function c(){u.display.wrapper.offsetHeight?(s(0,f),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):f.timeout=setTimeout(c,f.delay)}f.timeout=setTimeout(c,f.delay),f.hurry=function(){clearTimeout(f.timeout),f.timeout=setTimeout(c,50)},o.on(window,"mouseup",f.hurry),o.on(window,"keyup",f.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(n,r,i){(function(o){o.defineOption("fullScreen",!1,function(s,a,l){l==o.Init&&(l=!1),!l!=!a&&(a?function(u){var f=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:f.style.width,height:f.style.height},f.style.width="",f.style.height="auto",f.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(s):function(u){var f=u.getWrapperElement();f.className=f.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=u.state.fullScreenRestore;f.style.width=c.width,f.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),u.refresh()}(s))})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(n,r,i){(function(o){function s(c){c.state.placeholder&&(c.state.placeholder.parentNode.removeChild(c.state.placeholder),c.state.placeholder=null)}function a(c){s(c);var d=c.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=c.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var p=c.getOption("placeholder");typeof p=="string"&&(p=document.createTextNode(p)),d.appendChild(p),c.display.lineSpace.insertBefore(d,c.display.lineSpace.firstChild)}function l(c){f(c)&&a(c)}function u(c){var d=c.getWrapperElement(),p=f(c);d.className=d.className.replace(" CodeMirror-empty","")+(p?" CodeMirror-empty":""),p?a(c):s(c)}function f(c){return c.lineCount()===1&&c.getLine(0)===""}o.defineOption("placeholder","",function(c,d,p){var h=p&&p!=o.Init;if(d&&!h)c.on("blur",l),c.on("change",u),c.on("swapDoc",u),o.on(c.getInputField(),"compositionupdate",c.state.placeholderCompose=function(){(function(m){setTimeout(function(){var y=!1;if(m.lineCount()==1){var v=m.getInputField();y=v.nodeName=="TEXTAREA"?!m.getLine(0).length:!/[^\u200b]/.test(v.querySelector(".CodeMirror-line").textContent)}y?a(m):s(m)},20)})(c)}),u(c);else if(!d&&h){c.off("blur",l),c.off("change",u),c.off("swapDoc",u),o.off(c.getInputField(),"compositionupdate",c.state.placeholderCompose),s(c);var g=c.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}d&&!c.hasFocus()&&l(c)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(n,r,i){(function(o){var s=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(f,c){var d=c.line,p=0,h=0,g=s.exec(f.getLine(d)),m=g[1];do{var y=d+(p+=1),v=f.getLine(y),x=s.exec(v);if(x){var _=x[1],E=parseInt(g[3],10)+p-h,C=parseInt(x[3],10),w=C;if(m!==_||isNaN(C)){if(m.length>_.length||m.length<_.length&&p===1)return;h+=1}else E===C&&(w=C+1),E>C&&(w=E+1),f.replaceRange(v.replace(s,_+w+x[4]+x[5]),{line:y,ch:0},{line:y,ch:v.length})}}while(x)}o.commands.newlineAndIndentContinueMarkdownList=function(f){if(f.getOption("disableInput"))return o.Pass;for(var c=f.listSelections(),d=[],p=0;p<c.length;p++){var h=c[p].head,g=f.getStateAfter(h.line),m=o.innerMode(f.getMode(),g);if(m.mode.name!=="markdown"&&m.mode.helperType!=="markdown")return void f.execCommand("newlineAndIndent");var y=(g=m.state).list!==!1,v=g.quote!==0,x=f.getLine(h.line),_=s.exec(x),E=/^\s*$/.test(x.slice(0,h.ch));if(!c[p].empty()||!y&&!v||!_||E)return void f.execCommand("newlineAndIndent");if(a.test(x)){var C=v&&/>\s*$/.test(x),w=!/>\s*$/.test(x);(C||w)&&f.replaceRange("",{line:h.line,ch:0},{line:h.line,ch:h.ch+1}),d[p]=`
`}else{var T=_[1],R=_[5],L=!(l.test(_[2])||_[2].indexOf(">")>=0),B=L?parseInt(_[3],10)+1+_[4]:_[2].replace("x"," ");d[p]=`
`+T+B+R,L&&u(f,h)}}f.replaceSelections(d)}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(n,r,i){(function(o){o.overlayMode=function(s,a,l){return{startState:function(){return{base:o.startState(s),overlay:o.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:o.copyState(s,u.base),overlay:o.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,f){return(u!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<u.start)&&(f.streamSeen=u,f.basePos=f.overlayPos=u.start),u.start==f.basePos&&(f.baseCur=s.token(u,f.base),f.basePos=u.pos),u.start==f.overlayPos&&(u.pos=u.start,f.overlayCur=a.token(u,f.overlay),f.overlayPos=u.pos),u.pos=Math.min(f.basePos,f.overlayPos),f.overlayCur==null?f.baseCur:f.baseCur!=null&&f.overlay.combineTokens||l&&f.overlay.combineTokens==null?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:s.indent&&function(u,f,c){return s.indent(u.base,f,c)},electricChars:s.electricChars,innerMode:function(u){return{state:u.base,mode:s}},blankLine:function(u){var f,c;return s.blankLine&&(f=s.blankLine(u.base)),a.blankLine&&(c=a.blankLine(u.overlay)),c==null?f:l&&f!=null?f+" "+c:c}}}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(n,r,i){(function(o){var s,a,l=o.Pos;function u(_,E){for(var C=function(R){var L=R.flags;return L??(R.ignoreCase?"i":"")+(R.global?"g":"")+(R.multiline?"m":"")}(_),w=C,T=0;T<E.length;T++)w.indexOf(E.charAt(T))==-1&&(w+=E.charAt(T));return C==w?_:new RegExp(_.source,w)}function f(_){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(_.source)}function c(_,E,C){E=u(E,"g");for(var w=C.line,T=C.ch,R=_.lastLine();w<=R;w++,T=0){E.lastIndex=T;var L=_.getLine(w),B=E.exec(L);if(B)return{from:l(w,B.index),to:l(w,B.index+B[0].length),match:B}}}function d(_,E,C){if(!f(E))return c(_,E,C);E=u(E,"gm");for(var w,T=1,R=C.line,L=_.lastLine();R<=L;){for(var B=0;B<T&&!(R>L);B++){var P=_.getLine(R++);w=w==null?P:w+`
`+P}T*=2,E.lastIndex=C.ch;var S=E.exec(w);if(S){var k=w.slice(0,S.index).split(`
`),D=S[0].split(`
`),O=C.line+k.length-1,N=k[k.length-1].length;return{from:l(O,N),to:l(O+D.length-1,D.length==1?N+D[0].length:D[D.length-1].length),match:S}}}}function p(_,E,C){for(var w,T=0;T<=_.length;){E.lastIndex=T;var R=E.exec(_);if(!R)break;var L=R.index+R[0].length;if(L>_.length-C)break;(!w||L>w.index+w[0].length)&&(w=R),T=R.index+1}return w}function h(_,E,C){E=u(E,"g");for(var w=C.line,T=C.ch,R=_.firstLine();w>=R;w--,T=-1){var L=_.getLine(w),B=p(L,E,T<0?0:L.length-T);if(B)return{from:l(w,B.index),to:l(w,B.index+B[0].length),match:B}}}function g(_,E,C){if(!f(E))return h(_,E,C);E=u(E,"gm");for(var w,T=1,R=_.getLine(C.line).length-C.ch,L=C.line,B=_.firstLine();L>=B;){for(var P=0;P<T&&L>=B;P++){var S=_.getLine(L--);w=w==null?S:S+`
`+w}T*=2;var k=p(w,E,R);if(k){var D=w.slice(0,k.index).split(`
`),O=k[0].split(`
`),N=L+D.length,j=D[D.length-1].length;return{from:l(N,j),to:l(N+O.length-1,O.length==1?j+O[0].length:O[O.length-1].length),match:k}}}}function m(_,E,C,w){if(_.length==E.length)return C;for(var T=0,R=C+Math.max(0,_.length-E.length);;){if(T==R)return T;var L=T+R>>1,B=w(_.slice(0,L)).length;if(B==C)return L;B>C?R=L:T=L+1}}function y(_,E,C,w){if(!E.length)return null;var T=w?s:a,R=T(E).split(/\r|\n\r?/);e:for(var L=C.line,B=C.ch,P=_.lastLine()+1-R.length;L<=P;L++,B=0){var S=_.getLine(L).slice(B),k=T(S);if(R.length==1){var D=k.indexOf(R[0]);if(D==-1)continue e;return C=m(S,k,D,T)+B,{from:l(L,m(S,k,D,T)+B),to:l(L,m(S,k,D+R[0].length,T)+B)}}var O=k.length-R[0].length;if(k.slice(O)==R[0]){for(var N=1;N<R.length-1;N++)if(T(_.getLine(L+N))!=R[N])continue e;var j=_.getLine(L+R.length-1),q=T(j),W=R[R.length-1];if(q.slice(0,W.length)==W)return{from:l(L,m(S,k,O,T)+B),to:l(L+R.length-1,m(j,q,W.length,T))}}}}function v(_,E,C,w){if(!E.length)return null;var T=w?s:a,R=T(E).split(/\r|\n\r?/);e:for(var L=C.line,B=C.ch,P=_.firstLine()-1+R.length;L>=P;L--,B=-1){var S=_.getLine(L);B>-1&&(S=S.slice(0,B));var k=T(S);if(R.length==1){var D=k.lastIndexOf(R[0]);if(D==-1)continue e;return{from:l(L,m(S,k,D,T)),to:l(L,m(S,k,D+R[0].length,T))}}var O=R[R.length-1];if(k.slice(0,O.length)==O){var N=1;for(C=L-R.length+1;N<R.length-1;N++)if(T(_.getLine(C+N))!=R[N])continue e;var j=_.getLine(L+1-R.length),q=T(j);if(q.slice(q.length-R[0].length)==R[0])return{from:l(L+1-R.length,m(j,q,j.length-R[0].length,T)),to:l(L,m(S,k,O.length,T))}}}}function x(_,E,C,w){var T;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=_,C=C?_.clipPos(C):l(0,0),this.pos={from:C,to:C},typeof w=="object"?T=w.caseFold:(T=w,w=null),typeof E=="string"?(T==null&&(T=!1),this.matches=function(R,L){return(R?v:y)(_,E,L,T)}):(E=u(E,"gm"),w&&w.multiline===!1?this.matches=function(R,L){return(R?h:c)(_,E,L)}:this.matches=function(R,L){return(R?g:d)(_,E,L)})}String.prototype.normalize?(s=function(_){return _.normalize("NFD").toLowerCase()},a=function(_){return _.normalize("NFD")}):(s=function(_){return _.toLowerCase()},a=function(_){return _}),x.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(_){var E=this.doc.clipPos(_?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(E=l(E.line,E.ch),_?(E.ch--,E.ch<0&&(E.line--,E.ch=(this.doc.getLine(E.line)||"").length)):(E.ch++,E.ch>(this.doc.getLine(E.line)||"").length&&(E.ch=0,E.line++)),o.cmpPos(E,this.doc.clipPos(E))!=0))return this.atOccurrence=!1;var C=this.matches(_,E);if(this.afterEmptyMatch=C&&o.cmpPos(C.from,C.to)==0,C)return this.pos=C,this.atOccurrence=!0,this.pos.match||!0;var w=l(_?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:w,to:w},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(_,E){if(this.atOccurrence){var C=o.splitLines(_);this.doc.replaceRange(C,this.pos.from,this.pos.to,E),this.pos.to=l(this.pos.from.line+C.length-1,C[C.length-1].length+(C.length==1?this.pos.from.ch:0))}}},o.defineExtension("getSearchCursor",function(_,E,C){return new x(this.doc,_,E,C)}),o.defineDocExtension("getSearchCursor",function(_,E,C){return new x(this,_,E,C)}),o.defineExtension("selectMatches",function(_,E){for(var C=[],w=this.getSearchCursor(_,this.getCursor("from"),E);w.findNext()&&!(o.cmpPos(w.to(),this.getCursor("to"))>0);)C.push({anchor:w.from(),head:w.to()});C.length&&this.setSelections(C,0)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(n,r,i){(function(o){function s(p){p.state.markedSelection&&p.operation(function(){(function(h){if(!h.somethingSelected())return c(h);if(h.listSelections().length>1)return d(h);var g=h.getCursor("start"),m=h.getCursor("end"),y=h.state.markedSelection;if(!y.length)return f(h,g,m);var v=y[0].find(),x=y[y.length-1].find();if(!v||!x||m.line-g.line<=8||u(g,x.to)>=0||u(m,v.from)<=0)return d(h);for(;u(g,v.from)>0;)y.shift().clear(),v=y[0].find();for(u(g,v.from)<0&&(v.to.line-g.line<8?(y.shift().clear(),f(h,g,v.to,0)):f(h,g,v.from,0));u(m,x.to)<0;)y.pop().clear(),x=y[y.length-1].find();u(m,x.to)>0&&(m.line-x.from.line<8?(y.pop().clear(),f(h,x.from,m)):f(h,x.to,m))})(p)})}function a(p){p.state.markedSelection&&p.state.markedSelection.length&&p.operation(function(){c(p)})}o.defineOption("styleSelectedText",!1,function(p,h,g){var m=g&&g!=o.Init;h&&!m?(p.state.markedSelection=[],p.state.markedSelectionStyle=typeof h=="string"?h:"CodeMirror-selectedtext",d(p),p.on("cursorActivity",s),p.on("change",a)):!h&&m&&(p.off("cursorActivity",s),p.off("change",a),c(p),p.state.markedSelection=p.state.markedSelectionStyle=null)});var l=o.Pos,u=o.cmpPos;function f(p,h,g,m){if(u(h,g)!=0)for(var y=p.state.markedSelection,v=p.state.markedSelectionStyle,x=h.line;;){var _=x==h.line?h:l(x,0),E=x+8,C=E>=g.line,w=C?g:l(E,0),T=p.markText(_,w,{className:v});if(m==null?y.push(T):y.splice(m++,0,T),C)break;x=E}}function c(p){for(var h=p.state.markedSelection,g=0;g<h.length;++g)h[g].clear();h.length=0}function d(p){c(p);for(var h=p.listSelections(),g=0;g<h.length;g++)f(p,h[g].from(),h[g].to())}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(n,r,i){(function(o,s){typeof i=="object"&&r!==void 0?r.exports=s():(o=o||self).CodeMirror=s()})(this,function(){var o=navigator.userAgent,s=navigator.platform,a=/gecko\/\d/i.test(o),l=/MSIE \d/.test(o),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(o),f=/Edge\/(\d+)/.exec(o),c=l||u||f,d=c&&(l?document.documentMode||6:+(f||u)[1]),p=!f&&/WebKit\//.test(o),h=p&&/Qt\/\d+\.\d+/.test(o),g=!f&&/Chrome\/(\d+)/.exec(o),m=g&&+g[1],y=/Opera\//.test(o),v=/Apple Computer/.test(navigator.vendor),x=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(o),_=/PhantomJS/.test(o),E=v&&(/Mobile\/\w+/.test(o)||navigator.maxTouchPoints>2),C=/Android/.test(o),w=E||C||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(o),T=E||/Mac/.test(s),R=/\bCrOS\b/.test(o),L=/win/i.test(s),B=y&&o.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(y=!1,p=!0);var P=T&&(h||y&&(B==null||B<12.11)),S=a||c&&d>=9;function k(b){return new RegExp("(^|\\s)"+b+"(?:$|\\s)\\s*")}var D,O=function(b,A){var $=b.className,F=k(A).exec($);if(F){var I=$.slice(F.index+F[0].length);b.className=$.slice(0,F.index)+(I?F[1]+I:"")}};function N(b){for(var A=b.childNodes.length;A>0;--A)b.removeChild(b.firstChild);return b}function j(b,A){return N(b).appendChild(A)}function q(b,A,$,F){var I=document.createElement(b);if($&&(I.className=$),F&&(I.style.cssText=F),typeof A=="string")I.appendChild(document.createTextNode(A));else if(A)for(var G=0;G<A.length;++G)I.appendChild(A[G]);return I}function W(b,A,$,F){var I=q(b,A,$,F);return I.setAttribute("role","presentation"),I}function Q(b,A){if(A.nodeType==3&&(A=A.parentNode),b.contains)return b.contains(A);do if(A.nodeType==11&&(A=A.host),A==b)return!0;while(A=A.parentNode)}function ee(b){var A;try{A=b.activeElement}catch{A=b.body||null}for(;A&&A.shadowRoot&&A.shadowRoot.activeElement;)A=A.shadowRoot.activeElement;return A}function H(b,A){var $=b.className;k(A).test($)||(b.className+=($?" ":"")+A)}function se(b,A){for(var $=b.split(" "),F=0;F<$.length;F++)$[F]&&!k($[F]).test(A)&&(A+=" "+$[F]);return A}D=document.createRange?function(b,A,$,F){var I=document.createRange();return I.setEnd(F||b,$),I.setStart(b,A),I}:function(b,A,$){var F=document.body.createTextRange();try{F.moveToElementText(b.parentNode)}catch{return F}return F.collapse(!0),F.moveEnd("character",$),F.moveStart("character",A),F};var ne=function(b){b.select()};function ge(b){return b.display.wrapper.ownerDocument}function we(b){return ge(b).defaultView}function $e(b){var A=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,A)}}function ve(b,A,$){for(var F in A||(A={}),b)!b.hasOwnProperty(F)||$===!1&&A.hasOwnProperty(F)||(A[F]=b[F]);return A}function Ee(b,A,$,F,I){A==null&&(A=b.search(/[^\s\u00a0]/))==-1&&(A=b.length);for(var G=F||0,X=I||0;;){var J=b.indexOf("	",G);if(J<0||J>=A)return X+(A-G);X+=J-G,X+=$-X%$,G=J+1}}E?ne=function(b){b.selectionStart=0,b.selectionEnd=b.value.length}:c&&(ne=function(b){try{b.select()}catch{}});var Ve=function(){this.id=null,this.f=null,this.time=0,this.handler=$e(this.onTimeout,this)};function Ue(b,A){for(var $=0;$<b.length;++$)if(b[$]==A)return $;return-1}Ve.prototype.onTimeout=function(b){b.id=0,b.time<=+new Date?b.f():setTimeout(b.handler,b.time-+new Date)},Ve.prototype.set=function(b,A){this.f=A;var $=+new Date+b;(!this.id||$<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,b),this.time=$)};var ft={toString:function(){return"CodeMirror.Pass"}},ht={scroll:!1},zt={origin:"*mouse"},$t={origin:"+move"};function Tn(b,A,$){for(var F=0,I=0;;){var G=b.indexOf("	",F);G==-1&&(G=b.length);var X=G-F;if(G==b.length||I+X>=A)return F+Math.min(X,A-I);if(I+=G-F,F=G+1,(I+=$-I%$)>=A)return F}}var it=[""];function Te(b){for(;it.length<=b;)it.push(ye(it)+" ");return it[b]}function ye(b){return b[b.length-1]}function Se(b,A){for(var $=[],F=0;F<b.length;F++)$[F]=A(b[F],F);return $}function Re(){}function U(b,A){var $;return Object.create?$=Object.create(b):(Re.prototype=b,$=new Re),A&&ve(A,$),$}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function re(b){return/\w/.test(b)||b>""&&(b.toUpperCase()!=b.toLowerCase()||Z.test(b))}function ie(b,A){return A?!!(A.source.indexOf("\\w")>-1&&re(b))||A.test(b):re(b)}function be(b){for(var A in b)if(b.hasOwnProperty(A)&&b[A])return!1;return!0}var Ce=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function je(b){return b.charCodeAt(0)>=768&&Ce.test(b)}function V(b,A,$){for(;($<0?A>0:A<b.length)&&je(b.charAt(A));)A+=$;return A}function fe(b,A,$){for(var F=A>$?-1:1;;){if(A==$)return A;var I=(A+$)/2,G=F<0?Math.ceil(I):Math.floor(I);if(G==A)return b(G)?A:$;b(G)?$=G:A=G+F}}var he=null;function me(b,A,$){var F;he=null;for(var I=0;I<b.length;++I){var G=b[I];if(G.from<A&&G.to>A)return I;G.to==A&&(G.from!=G.to&&$=="before"?F=I:he=I),G.from==A&&(G.from!=G.to&&$!="before"?F=I:he=I)}return F??he}var Oe=function(){var b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,A=/[stwN]/,$=/[LRr]/,F=/[Lb1n]/,I=/[1n]/;function G(X,J,le){this.level=X,this.from=J,this.to=le}return function(X,J){var le=J=="ltr"?"L":"R";if(X.length==0||J=="ltr"&&!b.test(X))return!1;for(var ue,_e=X.length,Ae=[],qe=0;qe<_e;++qe)Ae.push((ue=X.charCodeAt(qe))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ue):1424<=ue&&ue<=1524?"R":1536<=ue&&ue<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ue-1536):1774<=ue&&ue<=2220?"r":8192<=ue&&ue<=8203?"w":ue==8204?"b":"L");for(var Ne=0,tt=le;Ne<_e;++Ne){var nt=Ae[Ne];nt=="m"?Ae[Ne]=tt:tt=nt}for(var Je=0,lt=le;Je<_e;++Je){var xt=Ae[Je];xt=="1"&&lt=="r"?Ae[Je]="n":$.test(xt)&&(lt=xt,xt=="r"&&(Ae[Je]="R"))}for(var bt=1,Bt=Ae[0];bt<_e-1;++bt){var Ot=Ae[bt];Ot=="+"&&Bt=="1"&&Ae[bt+1]=="1"?Ae[bt]="1":Ot!=","||Bt!=Ae[bt+1]||Bt!="1"&&Bt!="n"||(Ae[bt]=Bt),Bt=Ot}for(var jt=0;jt<_e;++jt){var Yn=Ae[jt];if(Yn==",")Ae[jt]="N";else if(Yn=="%"){var ln=void 0;for(ln=jt+1;ln<_e&&Ae[ln]=="%";++ln);for(var Dr=jt&&Ae[jt-1]=="!"||ln<_e&&Ae[ln]=="1"?"1":"N",Bn=jt;Bn<ln;++Bn)Ae[Bn]=Dr;jt=ln-1}}for(var Jr=0,Ci=le;Jr<_e;++Jr){var ei=Ae[Jr];Ci=="L"&&ei=="1"?Ae[Jr]="L":$.test(ei)&&(Ci=ei)}for(var Nr=0;Nr<_e;++Nr)if(A.test(Ae[Nr])){var ti=void 0;for(ti=Nr+1;ti<_e&&A.test(Ae[ti]);++ti);for(var br=(Nr?Ae[Nr-1]:le)=="L",Si=br==((ti<_e?Ae[ti]:le)=="L")?br?"L":"R":le,gr=Nr;gr<ti;++gr)Ae[gr]=Si;Nr=ti-1}for(var Hr,Cr=[],ui=0;ui<_e;)if(F.test(Ae[ui])){var ta=ui;for(++ui;ui<_e&&F.test(Ae[ui]);++ui);Cr.push(new G(0,ta,ui))}else{var ki=ui,Gs=Cr.length,Ws=J=="rtl"?1:0;for(++ui;ui<_e&&Ae[ui]!="L";++ui);for(var yo=ki;yo<ui;)if(I.test(Ae[yo])){ki<yo&&(Cr.splice(Gs,0,new G(1,ki,yo)),Gs+=Ws);var na=yo;for(++yo;yo<ui&&I.test(Ae[yo]);++yo);Cr.splice(Gs,0,new G(2,na,yo)),Gs+=Ws,ki=yo}else++yo;ki<ui&&Cr.splice(Gs,0,new G(1,ki,ui))}return J=="ltr"&&(Cr[0].level==1&&(Hr=X.match(/^\s+/))&&(Cr[0].from=Hr[0].length,Cr.unshift(new G(0,0,Hr[0].length))),ye(Cr).level==1&&(Hr=X.match(/\s+$/))&&(ye(Cr).to-=Hr[0].length,Cr.push(new G(0,_e-Hr[0].length,_e)))),J=="rtl"?Cr.reverse():Cr}}();function Me(b,A){var $=b.order;return $==null&&($=b.order=Oe(b.text,A)),$}var Be=[],We=function(b,A,$){if(b.addEventListener)b.addEventListener(A,$,!1);else if(b.attachEvent)b.attachEvent("on"+A,$);else{var F=b._handlers||(b._handlers={});F[A]=(F[A]||Be).concat($)}};function Qe(b,A){return b._handlers&&b._handlers[A]||Be}function ut(b,A,$){if(b.removeEventListener)b.removeEventListener(A,$,!1);else if(b.detachEvent)b.detachEvent("on"+A,$);else{var F=b._handlers,I=F&&F[A];if(I){var G=Ue(I,$);G>-1&&(F[A]=I.slice(0,G).concat(I.slice(G+1)))}}}function Tt(b,A){var $=Qe(b,A);if($.length)for(var F=Array.prototype.slice.call(arguments,2),I=0;I<$.length;++I)$[I].apply(null,F)}function Ut(b,A,$){return typeof A=="string"&&(A={type:A,preventDefault:function(){this.defaultPrevented=!0}}),Tt(b,$||A.type,b,A),Wn(A)||A.codemirrorIgnore}function Kt(b){var A=b._handlers&&b._handlers.cursorActivity;if(A)for(var $=b.curOp.cursorActivityHandlers||(b.curOp.cursorActivityHandlers=[]),F=0;F<A.length;++F)Ue($,A[F])==-1&&$.push(A[F])}function Pt(b,A){return Qe(b,A).length>0}function bn(b){b.prototype.on=function(A,$){We(this,A,$)},b.prototype.off=function(A,$){ut(this,A,$)}}function _n(b){b.preventDefault?b.preventDefault():b.returnValue=!1}function un(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0}function Wn(b){return b.defaultPrevented!=null?b.defaultPrevented:b.returnValue==0}function qn(b){_n(b),un(b)}function wr(b){return b.target||b.srcElement}function Ao(b){var A=b.which;return A==null&&(1&b.button?A=1:2&b.button?A=3:4&b.button&&(A=2)),T&&b.ctrlKey&&A==1&&(A=3),A}var Gi,_i,$s=function(){if(c&&d<9)return!1;var b=q("div");return"draggable"in b||"dragDrop"in b}();function tr(b){if(Gi==null){var A=q("span","");j(b,q("span",[A,document.createTextNode("x")])),b.firstChild.offsetHeight!=0&&(Gi=A.offsetWidth<=1&&A.offsetHeight>2&&!(c&&d<8))}var $=Gi?q("span",""):q("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return $.setAttribute("cm-text",""),$}function yi(b){if(_i!=null)return _i;var A=j(b,document.createTextNode("AA")),$=D(A,0,1).getBoundingClientRect(),F=D(A,1,2).getBoundingClientRect();return N(b),!(!$||$.left==$.right)&&(_i=F.right-$.right<3)}var pi,_r=`

b`.split(/\n/).length!=3?function(b){for(var A=0,$=[],F=b.length;A<=F;){var I=b.indexOf(`
`,A);I==-1&&(I=b.length);var G=b.slice(A,b.charAt(I-1)=="\r"?I-1:I),X=G.indexOf("\r");X!=-1?($.push(G.slice(0,X)),A+=X+1):($.push(G),A=I+1)}return $}:function(b){return b.split(/\r\n?|\n/)},uo=window.getSelection?function(b){try{return b.selectionStart!=b.selectionEnd}catch{return!1}}:function(b){var A;try{A=b.ownerDocument.selection.createRange()}catch{}return!(!A||A.parentElement()!=b)&&A.compareEndPoints("StartToEnd",A)!=0},Or="oncopy"in(pi=q("div"))||(pi.setAttribute("oncopy","return;"),typeof pi.oncopy=="function"),go=null,Zr={},Fi={};function or(b,A){arguments.length>2&&(A.dependencies=Array.prototype.slice.call(arguments,2)),Zr[b]=A}function Fe(b){if(typeof b=="string"&&Fi.hasOwnProperty(b))b=Fi[b];else if(b&&typeof b.name=="string"&&Fi.hasOwnProperty(b.name)){var A=Fi[b.name];typeof A=="string"&&(A={name:A}),(b=U(A,b)).name=A.name}else{if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return Fe("application/xml");if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(b))return Fe("application/json")}return typeof b=="string"?{name:b}:b||{name:"null"}}function Xe(b,A){A=Fe(A);var $=Zr[A.name];if(!$)return Xe(b,"text/plain");var F=$(b,A);if(Et.hasOwnProperty(A.name)){var I=Et[A.name];for(var G in I)I.hasOwnProperty(G)&&(F.hasOwnProperty(G)&&(F["_"+G]=F[G]),F[G]=I[G])}if(F.name=A.name,A.helperType&&(F.helperType=A.helperType),A.modeProps)for(var X in A.modeProps)F[X]=A.modeProps[X];return F}var Et={};function pt(b,A){ve(A,Et.hasOwnProperty(b)?Et[b]:Et[b]={})}function Yt(b,A){if(A===!0)return A;if(b.copyState)return b.copyState(A);var $={};for(var F in A){var I=A[F];I instanceof Array&&(I=I.concat([])),$[F]=I}return $}function An(b,A){for(var $;b.innerMode&&($=b.innerMode(A))&&$.mode!=b;)A=$.state,b=$.mode;return $||{mode:b,state:A}}function Rn(b,A,$){return!b.startState||b.startState(A,$)}var Ht=function(b,A,$){this.pos=this.start=0,this.string=b,this.tabSize=A||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=$};function mt(b,A){if((A-=b.first)<0||A>=b.size)throw new Error("There is no line "+(A+b.first)+" in the document.");for(var $=b;!$.lines;)for(var F=0;;++F){var I=$.children[F],G=I.chunkSize();if(A<G){$=I;break}A-=G}return $.lines[A]}function jn(b,A,$){var F=[],I=A.line;return b.iter(A.line,$.line+1,function(G){var X=G.text;I==$.line&&(X=X.slice(0,$.ch)),I==A.line&&(X=X.slice(A.ch)),F.push(X),++I}),F}function Vn(b,A,$){var F=[];return b.iter(A,$,function(I){F.push(I.text)}),F}function an(b,A){var $=A-b.height;if($)for(var F=b;F;F=F.parent)F.height+=$}function gn(b){if(b.parent==null)return null;for(var A=b.parent,$=Ue(A.lines,b),F=A.parent;F;A=F,F=F.parent)for(var I=0;F.children[I]!=A;++I)$+=F.children[I].chunkSize();return $+A.first}function Qr(b,A){var $=b.first;e:do{for(var F=0;F<b.children.length;++F){var I=b.children[F],G=I.height;if(A<G){b=I;continue e}A-=G,$+=I.chunkSize()}return $}while(!b.lines);for(var X=0;X<b.lines.length;++X){var J=b.lines[X].height;if(A<J)break;A-=J}return $+X}function Wr(b,A){return A>=b.first&&A<b.first+b.size}function Ln(b,A){return String(b.lineNumberFormatter(A+b.firstLineNumber))}function dt(b,A,$){if($===void 0&&($=null),!(this instanceof dt))return new dt(b,A,$);this.line=b,this.ch=A,this.sticky=$}function Nt(b,A){return b.line-A.line||b.ch-A.ch}function Rr(b,A){return b.sticky==A.sticky&&Nt(b,A)==0}function fr(b){return dt(b.line,b.ch)}function Er(b,A){return Nt(b,A)<0?A:b}function Ir(b,A){return Nt(b,A)<0?b:A}function ri(b,A){return Math.max(b.first,Math.min(A,b.first+b.size-1))}function xn(b,A){if(A.line<b.first)return dt(b.first,0);var $=b.first+b.size-1;return A.line>$?dt($,mt(b,$).text.length):function(F,I){var G=F.ch;return G==null||G>I?dt(F.line,I):G<0?dt(F.line,0):F}(A,mt(b,A.line).text.length)}function Bi(b,A){for(var $=[],F=0;F<A.length;F++)$[F]=xn(b,A[F]);return $}Ht.prototype.eol=function(){return this.pos>=this.string.length},Ht.prototype.sol=function(){return this.pos==this.lineStart},Ht.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ht.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ht.prototype.eat=function(b){var A=this.string.charAt(this.pos);if(typeof b=="string"?A==b:A&&(b.test?b.test(A):b(A)))return++this.pos,A},Ht.prototype.eatWhile=function(b){for(var A=this.pos;this.eat(b););return this.pos>A},Ht.prototype.eatSpace=function(){for(var b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>b},Ht.prototype.skipToEnd=function(){this.pos=this.string.length},Ht.prototype.skipTo=function(b){var A=this.string.indexOf(b,this.pos);if(A>-1)return this.pos=A,!0},Ht.prototype.backUp=function(b){this.pos-=b},Ht.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ee(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.indentation=function(){return Ee(this.string,null,this.tabSize)-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},Ht.prototype.match=function(b,A,$){if(typeof b!="string"){var F=this.string.slice(this.pos).match(b);return F&&F.index>0?null:(F&&A!==!1&&(this.pos+=F[0].length),F)}var I=function(G){return $?G.toLowerCase():G};if(I(this.string.substr(this.pos,b.length))==I(b))return A!==!1&&(this.pos+=b.length),!0},Ht.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ht.prototype.hideFirstChars=function(b,A){this.lineStart+=b;try{return A()}finally{this.lineStart-=b}},Ht.prototype.lookAhead=function(b){var A=this.lineOracle;return A&&A.lookAhead(b)},Ht.prototype.baseToken=function(){var b=this.lineOracle;return b&&b.baseToken(this.pos)};var Io=function(b,A){this.state=b,this.lookAhead=A},no=function(b,A,$,F){this.state=A,this.doc=b,this.line=$,this.maxLookAhead=F||0,this.baseTokens=null,this.baseTokenPos=1};function Us(b,A,$,F){var I=[b.state.modeGen],G={};Bo(b,A.text,b.doc.mode,$,function(ue,_e){return I.push(ue,_e)},G,F);for(var X=$.state,J=function(ue){$.baseTokens=I;var _e=b.state.overlays[ue],Ae=1,qe=0;$.state=!0,Bo(b,A.text,_e.mode,$,function(Ne,tt){for(var nt=Ae;qe<Ne;){var Je=I[Ae];Je>Ne&&I.splice(Ae,1,Ne,I[Ae+1],Je),Ae+=2,qe=Math.min(Ne,Je)}if(tt)if(_e.opaque)I.splice(nt,Ae-nt,Ne,"overlay "+tt),Ae=nt+2;else for(;nt<Ae;nt+=2){var lt=I[nt+1];I[nt+1]=(lt?lt+" ":"")+"overlay "+tt}},G),$.state=X,$.baseTokens=null,$.baseTokenPos=1},le=0;le<b.state.overlays.length;++le)J(le);return{styles:I,classes:G.bgClass||G.textClass?G:null}}function No(b,A,$){if(!A.styles||A.styles[0]!=b.state.modeGen){var F=Po(b,gn(A)),I=A.text.length>b.options.maxHighlightLength&&Yt(b.doc.mode,F.state),G=Us(b,A,F);I&&(F.state=I),A.stateAfter=F.save(!I),A.styles=G.styles,G.classes?A.styleClasses=G.classes:A.styleClasses&&(A.styleClasses=null),$===b.doc.highlightFrontier&&(b.doc.modeFrontier=Math.max(b.doc.modeFrontier,++b.doc.highlightFrontier))}return A.styles}function Po(b,A,$){var F=b.doc,I=b.display;if(!F.mode.startState)return new no(F,!0,A);var G=function(le,ue,_e){for(var Ae,qe,Ne=le.doc,tt=_e?-1:ue-(le.doc.mode.innerMode?1e3:100),nt=ue;nt>tt;--nt){if(nt<=Ne.first)return Ne.first;var Je=mt(Ne,nt-1),lt=Je.stateAfter;if(lt&&(!_e||nt+(lt instanceof Io?lt.lookAhead:0)<=Ne.modeFrontier))return nt;var xt=Ee(Je.text,null,le.options.tabSize);(qe==null||Ae>xt)&&(qe=nt-1,Ae=xt)}return qe}(b,A,$),X=G>F.first&&mt(F,G-1).stateAfter,J=X?no.fromSaved(F,X,G):new no(F,Rn(F.mode),G);return F.iter(G,A,function(le){mo(b,le.text,J);var ue=J.line;le.stateAfter=ue==A-1||ue%5==0||ue>=I.viewFrom&&ue<I.viewTo?J.save():null,J.nextLine()}),$&&(F.modeFrontier=J.line),J}function mo(b,A,$,F){var I=b.doc.mode,G=new Ht(A,b.options.tabSize,$);for(G.start=G.pos=F||0,A==""&&es(I,$.state);!G.eol();)ts(I,G,$.state),G.start=G.pos}function es(b,A){if(b.blankLine)return b.blankLine(A);if(b.innerMode){var $=An(b,A);return $.mode.blankLine?$.mode.blankLine($.state):void 0}}function ts(b,A,$,F){for(var I=0;I<10;I++){F&&(F[0]=An(b,$).mode);var G=b.token(A,$);if(A.pos>A.start)return G}throw new Error("Mode "+b.name+" failed to advance stream.")}no.prototype.lookAhead=function(b){var A=this.doc.getLine(this.line+b);return A!=null&&b>this.maxLookAhead&&(this.maxLookAhead=b),A},no.prototype.baseToken=function(b){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=b;)this.baseTokenPos+=2;var A=this.baseTokens[this.baseTokenPos+1];return{type:A&&A.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-b}},no.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},no.fromSaved=function(b,A,$){return A instanceof Io?new no(b,Yt(b.mode,A.state),$,A.lookAhead):new no(b,Yt(b.mode,A),$)},no.prototype.save=function(b){var A=b!==!1?Yt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Io(A,this.maxLookAhead):A};var ws=function(b,A,$){this.start=b.start,this.end=b.pos,this.string=b.current(),this.type=A||null,this.state=$};function ns(b,A,$,F){var I,G,X=b.doc,J=X.mode,le=mt(X,(A=xn(X,A)).line),ue=Po(b,A.line,$),_e=new Ht(le.text,b.options.tabSize,ue);for(F&&(G=[]);(F||_e.pos<A.ch)&&!_e.eol();)_e.start=_e.pos,I=ts(J,_e,ue.state),F&&G.push(new ws(_e,I,Yt(X.mode,ue.state)));return F?G:new ws(_e,I,ue.state)}function _s(b,A){if(b)for(;;){var $=b.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!$)break;b=b.slice(0,$.index)+b.slice($.index+$[0].length);var F=$[1]?"bgClass":"textClass";A[F]==null?A[F]=$[2]:new RegExp("(?:^|\\s)"+$[2]+"(?:$|\\s)").test(A[F])||(A[F]+=" "+$[2])}return b}function Bo(b,A,$,F,I,G,X){var J=$.flattenSpans;J==null&&(J=b.options.flattenSpans);var le,ue=0,_e=null,Ae=new Ht(A,b.options.tabSize,F),qe=b.options.addModeClass&&[null];for(A==""&&_s(es($,F.state),G);!Ae.eol();){if(Ae.pos>b.options.maxHighlightLength?(J=!1,X&&mo(b,A,F,Ae.pos),Ae.pos=A.length,le=null):le=_s(ts($,Ae,F.state,qe),G),qe){var Ne=qe[0].name;Ne&&(le="m-"+(le?Ne+" "+le:Ne))}if(!J||_e!=le){for(;ue<Ae.start;)I(ue=Math.min(Ae.start,ue+5e3),_e);_e=le}Ae.start=Ae.pos}for(;ue<Ae.pos;){var tt=Math.min(Ae.pos,ue+5e3);I(tt,_e),ue=tt}}var rs=!1,Es=!1;function Vr(b,A,$){this.marker=b,this.from=A,this.to=$}function Co(b,A){if(b)for(var $=0;$<b.length;++$){var F=b[$];if(F.marker==A)return F}}function hs(b,A){for(var $,F=0;F<b.length;++F)b[F]!=A&&($||($=[])).push(b[F]);return $}function da(b,A){if(A.full)return null;var $=Wr(b,A.from.line)&&mt(b,A.from.line).markedSpans,F=Wr(b,A.to.line)&&mt(b,A.to.line).markedSpans;if(!$&&!F)return null;var I=A.from.ch,G=A.to.ch,X=Nt(A.from,A.to)==0,J=function(Ot,jt,Yn){var ln;if(Ot)for(var Dr=0;Dr<Ot.length;++Dr){var Bn=Ot[Dr],Jr=Bn.marker;if(Bn.from==null||(Jr.inclusiveLeft?Bn.from<=jt:Bn.from<jt)||Bn.from==jt&&Jr.type=="bookmark"&&(!Yn||!Bn.marker.insertLeft)){var Ci=Bn.to==null||(Jr.inclusiveRight?Bn.to>=jt:Bn.to>jt);(ln||(ln=[])).push(new Vr(Jr,Bn.from,Ci?null:Bn.to))}}return ln}($,I,X),le=function(Ot,jt,Yn){var ln;if(Ot)for(var Dr=0;Dr<Ot.length;++Dr){var Bn=Ot[Dr],Jr=Bn.marker;if(Bn.to==null||(Jr.inclusiveRight?Bn.to>=jt:Bn.to>jt)||Bn.from==jt&&Jr.type=="bookmark"&&(!Yn||Bn.marker.insertLeft)){var Ci=Bn.from==null||(Jr.inclusiveLeft?Bn.from<=jt:Bn.from<jt);(ln||(ln=[])).push(new Vr(Jr,Ci?null:Bn.from-jt,Bn.to==null?null:Bn.to-jt))}}return ln}(F,G,X),ue=A.text.length==1,_e=ye(A.text).length+(ue?I:0);if(J)for(var Ae=0;Ae<J.length;++Ae){var qe=J[Ae];if(qe.to==null){var Ne=Co(le,qe.marker);Ne?ue&&(qe.to=Ne.to==null?null:Ne.to+_e):qe.to=I}}if(le)for(var tt=0;tt<le.length;++tt){var nt=le[tt];nt.to!=null&&(nt.to+=_e),nt.from==null?Co(J,nt.marker)||(nt.from=_e,ue&&(J||(J=[])).push(nt)):(nt.from+=_e,ue&&(J||(J=[])).push(nt))}J&&(J=is(J)),le&&le!=J&&(le=is(le));var Je=[J];if(!ue){var lt,xt=A.text.length-2;if(xt>0&&J)for(var bt=0;bt<J.length;++bt)J[bt].to==null&&(lt||(lt=[])).push(new Vr(J[bt].marker,null,null));for(var Bt=0;Bt<xt;++Bt)Je.push(lt);Je.push(le)}return Je}function is(b){for(var A=0;A<b.length;++A){var $=b[A];$.from!=null&&$.from==$.to&&$.marker.clearWhenEmpty!==!1&&b.splice(A--,1)}return b.length?b:null}function ha(b){var A=b.markedSpans;if(A){for(var $=0;$<A.length;++$)A[$].marker.detachLine(b);b.markedSpans=null}}function js(b,A){if(A){for(var $=0;$<A.length;++$)A[$].marker.attachLine(b);b.markedSpans=A}}function Go(b){return b.inclusiveLeft?-1:0}function Wi(b){return b.inclusiveRight?1:0}function zo(b,A){var $=b.lines.length-A.lines.length;if($!=0)return $;var F=b.find(),I=A.find(),G=Nt(F.from,I.from)||Go(b)-Go(A);if(G)return-G;var X=Nt(F.to,I.to)||Wi(b)-Wi(A);return X||A.id-b.id}function ps(b,A){var $,F=Es&&b.markedSpans;if(F)for(var I=void 0,G=0;G<F.length;++G)(I=F[G]).marker.collapsed&&(A?I.from:I.to)==null&&(!$||zo($,I.marker)<0)&&($=I.marker);return $}function os(b){return ps(b,!0)}function Hs(b){return ps(b,!1)}function Ia(b,A){var $,F=Es&&b.markedSpans;if(F)for(var I=0;I<F.length;++I){var G=F[I];G.marker.collapsed&&(G.from==null||G.from<A)&&(G.to==null||G.to>A)&&(!$||zo($,G.marker)<0)&&($=G.marker)}return $}function vo(b,A,$,F,I){var G=mt(b,A),X=Es&&G.markedSpans;if(X)for(var J=0;J<X.length;++J){var le=X[J];if(le.marker.collapsed){var ue=le.marker.find(0),_e=Nt(ue.from,$)||Go(le.marker)-Go(I),Ae=Nt(ue.to,F)||Wi(le.marker)-Wi(I);if(!(_e>=0&&Ae<=0||_e<=0&&Ae>=0)&&(_e<=0&&(le.marker.inclusiveRight&&I.inclusiveLeft?Nt(ue.to,$)>=0:Nt(ue.to,$)>0)||_e>=0&&(le.marker.inclusiveRight&&I.inclusiveLeft?Nt(ue.from,F)<=0:Nt(ue.from,F)<0)))return!0}}}function co(b){for(var A;A=os(b);)b=A.find(-1,!0).line;return b}function pa(b,A){var $=mt(b,A),F=co($);return $==F?A:gn(F)}function ga(b,A){if(A>b.lastLine())return A;var $,F=mt(b,A);if(!Uo(b,F))return A;for(;$=Hs(F);)F=$.find(1,!0).line;return gn(F)+1}function Uo(b,A){var $=Es&&A.markedSpans;if($){for(var F=void 0,I=0;I<$.length;++I)if((F=$[I]).marker.collapsed&&(F.from==null||!F.marker.widgetNode&&F.from==0&&F.marker.inclusiveLeft&&Le(b,A,F)))return!0}}function Le(b,A,$){if($.to==null){var F=$.marker.find(1,!0);return Le(b,F.line,Co(F.line.markedSpans,$.marker))}if($.marker.inclusiveRight&&$.to==A.text.length)return!0;for(var I=void 0,G=0;G<A.markedSpans.length;++G)if((I=A.markedSpans[G]).marker.collapsed&&!I.marker.widgetNode&&I.from==$.to&&(I.to==null||I.to!=$.from)&&(I.marker.inclusiveLeft||$.marker.inclusiveRight)&&Le(b,A,I))return!0}function Pe(b){for(var A=0,$=(b=co(b)).parent,F=0;F<$.lines.length;++F){var I=$.lines[F];if(I==b)break;A+=I.height}for(var G=$.parent;G;G=($=G).parent)for(var X=0;X<G.children.length;++X){var J=G.children[X];if(J==$)break;A+=J.height}return A}function ke(b){if(b.height==0)return 0;for(var A,$=b.text.length,F=b;A=os(F);){var I=A.find(0,!0);F=I.from.line,$+=I.from.ch-I.to.ch}for(F=b;A=Hs(F);){var G=A.find(0,!0);$-=F.text.length-G.from.ch,$+=(F=G.to.line).text.length-G.to.ch}return $}function rt(b){var A=b.display,$=b.doc;A.maxLine=mt($,$.first),A.maxLineLength=ke(A.maxLine),A.maxLineChanged=!0,$.iter(function(F){var I=ke(F);I>A.maxLineLength&&(A.maxLineLength=I,A.maxLine=F)})}var Mt=function(b,A,$){this.text=b,js(this,A),this.height=$?$(this):1};function dn(b){b.parent=null,ha(b)}Mt.prototype.lineNo=function(){return gn(this)},bn(Mt);var sr={},dr={};function hr(b,A){if(!b||/^\s*$/.test(b))return null;var $=A.addModeClass?dr:sr;return $[b]||($[b]=b.replace(/\S+/g,"cm-$&"))}function pr(b,A){var $=W("span",null,null,p?"padding-right: .1px":null),F={pre:W("pre",[$],"CodeMirror-line"),content:$,col:0,pos:0,cm:b,trailingSpace:!1,splitSpaces:b.getOption("lineWrapping")};A.measure={};for(var I=0;I<=(A.rest?A.rest.length:0);I++){var G=I?A.rest[I-1]:A.line,X=void 0;F.pos=0,F.addToken=zr,yi(b.display.measure)&&(X=Me(G,b.doc.direction))&&(F.addToken=Ur(F.addToken,X)),F.map=[],M(G,F,No(b,G,A!=b.display.externalMeasured&&gn(G))),G.styleClasses&&(G.styleClasses.bgClass&&(F.bgClass=se(G.styleClasses.bgClass,F.bgClass||"")),G.styleClasses.textClass&&(F.textClass=se(G.styleClasses.textClass,F.textClass||""))),F.map.length==0&&F.map.push(0,0,F.content.appendChild(tr(b.display.measure))),I==0?(A.measure.map=F.map,A.measure.cache={}):((A.measure.maps||(A.measure.maps=[])).push(F.map),(A.measure.caches||(A.measure.caches=[])).push({}))}if(p){var J=F.content.lastChild;(/\bcm-tab\b/.test(J.className)||J.querySelector&&J.querySelector(".cm-tab"))&&(F.content.className="cm-tab-wrap-hack")}return Tt(b,"renderLine",b,A.line,F.pre),F.pre.className&&(F.textClass=se(F.pre.className,F.textClass||"")),F}function Yr(b){var A=q("span","","cm-invalidchar");return A.title="\\u"+b.charCodeAt(0).toString(16),A.setAttribute("aria-label",A.title),A}function zr(b,A,$,F,I,G,X){if(A){var J,le=b.splitSpaces?function(Ot,jt){if(Ot.length>1&&!/  /.test(Ot))return Ot;for(var Yn=jt,ln="",Dr=0;Dr<Ot.length;Dr++){var Bn=Ot.charAt(Dr);Bn!=" "||!Yn||Dr!=Ot.length-1&&Ot.charCodeAt(Dr+1)!=32||(Bn=""),ln+=Bn,Yn=Bn==" "}return ln}(A,b.trailingSpace):A,ue=b.cm.state.specialChars,_e=!1;if(ue.test(A)){J=document.createDocumentFragment();for(var Ae=0;;){ue.lastIndex=Ae;var qe=ue.exec(A),Ne=qe?qe.index-Ae:A.length-Ae;if(Ne){var tt=document.createTextNode(le.slice(Ae,Ae+Ne));c&&d<9?J.appendChild(q("span",[tt])):J.appendChild(tt),b.map.push(b.pos,b.pos+Ne,tt),b.col+=Ne,b.pos+=Ne}if(!qe)break;Ae+=Ne+1;var nt=void 0;if(qe[0]=="	"){var Je=b.cm.options.tabSize,lt=Je-b.col%Je;(nt=J.appendChild(q("span",Te(lt),"cm-tab"))).setAttribute("role","presentation"),nt.setAttribute("cm-text","	"),b.col+=lt}else qe[0]=="\r"||qe[0]==`
`?((nt=J.appendChild(q("span",qe[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",qe[0]),b.col+=1):((nt=b.cm.options.specialCharPlaceholder(qe[0])).setAttribute("cm-text",qe[0]),c&&d<9?J.appendChild(q("span",[nt])):J.appendChild(nt),b.col+=1);b.map.push(b.pos,b.pos+1,nt),b.pos++}}else b.col+=A.length,J=document.createTextNode(le),b.map.push(b.pos,b.pos+A.length,J),c&&d<9&&(_e=!0),b.pos+=A.length;if(b.trailingSpace=le.charCodeAt(A.length-1)==32,$||F||I||_e||G||X){var xt=$||"";F&&(xt+=F),I&&(xt+=I);var bt=q("span",[J],xt,G);if(X)for(var Bt in X)X.hasOwnProperty(Bt)&&Bt!="style"&&Bt!="class"&&bt.setAttribute(Bt,X[Bt]);return b.content.appendChild(bt)}b.content.appendChild(J)}}function Ur(b,A){return function($,F,I,G,X,J,le){I=I?I+" cm-force-border":"cm-force-border";for(var ue=$.pos,_e=ue+F.length;;){for(var Ae=void 0,qe=0;qe<A.length&&!((Ae=A[qe]).to>ue&&Ae.from<=ue);qe++);if(Ae.to>=_e)return b($,F,I,G,X,J,le);b($,F.slice(0,Ae.to-ue),I,G,null,J,le),G=null,F=F.slice(Ae.to-ue),ue=Ae.to}}}function gi(b,A,$,F){var I=!F&&$.widgetNode;I&&b.map.push(b.pos,b.pos+A,I),!F&&b.cm.display.input.needsContentAttribute&&(I||(I=b.content.appendChild(document.createElement("span"))),I.setAttribute("cm-marker",$.id)),I&&(b.cm.display.input.setUneditable(I),b.content.appendChild(I)),b.pos+=A,b.trailingSpace=!1}function M(b,A,$){var F=b.markedSpans,I=b.text,G=0;if(F)for(var X,J,le,ue,_e,Ae,qe,Ne=I.length,tt=0,nt=1,Je="",lt=0;;){if(lt==tt){le=ue=_e=J="",qe=null,Ae=null,lt=1/0;for(var xt=[],bt=void 0,Bt=0;Bt<F.length;++Bt){var Ot=F[Bt],jt=Ot.marker;if(jt.type=="bookmark"&&Ot.from==tt&&jt.widgetNode)xt.push(jt);else if(Ot.from<=tt&&(Ot.to==null||Ot.to>tt||jt.collapsed&&Ot.to==tt&&Ot.from==tt)){if(Ot.to!=null&&Ot.to!=tt&&lt>Ot.to&&(lt=Ot.to,ue=""),jt.className&&(le+=" "+jt.className),jt.css&&(J=(J?J+";":"")+jt.css),jt.startStyle&&Ot.from==tt&&(_e+=" "+jt.startStyle),jt.endStyle&&Ot.to==lt&&(bt||(bt=[])).push(jt.endStyle,Ot.to),jt.title&&((qe||(qe={})).title=jt.title),jt.attributes)for(var Yn in jt.attributes)(qe||(qe={}))[Yn]=jt.attributes[Yn];jt.collapsed&&(!Ae||zo(Ae.marker,jt)<0)&&(Ae=Ot)}else Ot.from>tt&&lt>Ot.from&&(lt=Ot.from)}if(bt)for(var ln=0;ln<bt.length;ln+=2)bt[ln+1]==lt&&(ue+=" "+bt[ln]);if(!Ae||Ae.from==tt)for(var Dr=0;Dr<xt.length;++Dr)gi(A,0,xt[Dr]);if(Ae&&(Ae.from||0)==tt){if(gi(A,(Ae.to==null?Ne+1:Ae.to)-tt,Ae.marker,Ae.from==null),Ae.to==null)return;Ae.to==tt&&(Ae=!1)}}if(tt>=Ne)break;for(var Bn=Math.min(Ne,lt);;){if(Je){var Jr=tt+Je.length;if(!Ae){var Ci=Jr>Bn?Je.slice(0,Bn-tt):Je;A.addToken(A,Ci,X?X+le:le,_e,tt+Ci.length==lt?ue:"",J,qe)}if(Jr>=Bn){Je=Je.slice(Bn-tt),tt=Bn;break}tt=Jr,_e=""}Je=I.slice(G,G=$[nt++]),X=hr($[nt++],A.cm.options)}}else for(var ei=1;ei<$.length;ei+=2)A.addToken(A,I.slice(G,G=$[ei]),hr($[ei+1],A.cm.options))}function z(b,A,$){this.line=A,this.rest=function(F){for(var I,G;I=Hs(F);)F=I.find(1,!0).line,(G||(G=[])).push(F);return G}(A),this.size=this.rest?gn(ye(this.rest))-$+1:1,this.node=this.text=null,this.hidden=Uo(b,A)}function Y(b,A,$){for(var F,I=[],G=A;G<$;G=F){var X=new z(b.doc,mt(b.doc,G),G);F=G+X.size,I.push(X)}return I}var K=null,ce=null;function ae(b,A){var $=Qe(b,A);if($.length){var F,I=Array.prototype.slice.call(arguments,2);K?F=K.delayedCallbacks:ce?F=ce:(F=ce=[],setTimeout(pe,0));for(var G=function(J){F.push(function(){return $[J].apply(null,I)})},X=0;X<$.length;++X)G(X)}}function pe(){var b=ce;ce=null;for(var A=0;A<b.length;++A)b[A]()}function He(b,A,$,F){for(var I=0;I<A.changes.length;I++){var G=A.changes[I];G=="text"?vt(b,A):G=="gutter"?de(b,A,$,F):G=="class"?oe(b,A):G=="widget"&&ze(b,A,F)}A.changes=null}function Ie(b){return b.node==b.text&&(b.node=q("div",null,null,"position: relative"),b.text.parentNode&&b.text.parentNode.replaceChild(b.node,b.text),b.node.appendChild(b.text),c&&d<8&&(b.node.style.zIndex=2)),b.node}function et(b,A){var $=b.display.externalMeasured;return $&&$.line==A.line?(b.display.externalMeasured=null,A.measure=$.measure,$.built):pr(b,A)}function vt(b,A){var $=A.text.className,F=et(b,A);A.text==A.node&&(A.node=F.pre),A.text.parentNode.replaceChild(F.pre,A.text),A.text=F.pre,F.bgClass!=A.bgClass||F.textClass!=A.textClass?(A.bgClass=F.bgClass,A.textClass=F.textClass,oe(b,A)):$&&(A.text.className=$)}function oe(b,A){(function(F,I){var G=I.bgClass?I.bgClass+" "+(I.line.bgClass||""):I.line.bgClass;if(G&&(G+=" CodeMirror-linebackground"),I.background)G?I.background.className=G:(I.background.parentNode.removeChild(I.background),I.background=null);else if(G){var X=Ie(I);I.background=X.insertBefore(q("div",null,G),X.firstChild),F.display.input.setUneditable(I.background)}})(b,A),A.line.wrapClass?Ie(A).className=A.line.wrapClass:A.node!=A.text&&(A.node.className="");var $=A.textClass?A.textClass+" "+(A.line.textClass||""):A.line.textClass;A.text.className=$||""}function de(b,A,$,F){if(A.gutter&&(A.node.removeChild(A.gutter),A.gutter=null),A.gutterBackground&&(A.node.removeChild(A.gutterBackground),A.gutterBackground=null),A.line.gutterClass){var I=Ie(A);A.gutterBackground=q("div",null,"CodeMirror-gutter-background "+A.line.gutterClass,"left: "+(b.options.fixedGutter?F.fixedPos:-F.gutterTotalWidth)+"px; width: "+F.gutterTotalWidth+"px"),b.display.input.setUneditable(A.gutterBackground),I.insertBefore(A.gutterBackground,A.text)}var G=A.line.gutterMarkers;if(b.options.lineNumbers||G){var X=Ie(A),J=A.gutter=q("div",null,"CodeMirror-gutter-wrapper","left: "+(b.options.fixedGutter?F.fixedPos:-F.gutterTotalWidth)+"px");if(J.setAttribute("aria-hidden","true"),b.display.input.setUneditable(J),X.insertBefore(J,A.text),A.line.gutterClass&&(J.className+=" "+A.line.gutterClass),!b.options.lineNumbers||G&&G["CodeMirror-linenumbers"]||(A.lineNumber=J.appendChild(q("div",Ln(b.options,$),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+F.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+b.display.lineNumInnerWidth+"px"))),G)for(var le=0;le<b.display.gutterSpecs.length;++le){var ue=b.display.gutterSpecs[le].className,_e=G.hasOwnProperty(ue)&&G[ue];_e&&J.appendChild(q("div",[_e],"CodeMirror-gutter-elt","left: "+F.gutterLeft[ue]+"px; width: "+F.gutterWidth[ue]+"px"))}}}function ze(b,A,$){A.alignable&&(A.alignable=null);for(var F=k("CodeMirror-linewidget"),I=A.node.firstChild,G=void 0;I;I=G)G=I.nextSibling,F.test(I.className)&&A.node.removeChild(I);qt(b,A,$)}function gt(b,A,$,F){var I=et(b,A);return A.text=A.node=I.pre,I.bgClass&&(A.bgClass=I.bgClass),I.textClass&&(A.textClass=I.textClass),oe(b,A),de(b,A,$,F),qt(b,A,F),A.node}function qt(b,A,$){if(Ft(b,A.line,A,$,!0),A.rest)for(var F=0;F<A.rest.length;F++)Ft(b,A.rest[F],A,$,!1)}function Ft(b,A,$,F,I){if(A.widgets)for(var G=Ie($),X=0,J=A.widgets;X<J.length;++X){var le=J[X],ue=q("div",[le.node],"CodeMirror-linewidget"+(le.className?" "+le.className:""));le.handleMouseEvents||ue.setAttribute("cm-ignore-events","true"),Sn(le,ue,$,F),b.display.input.setUneditable(ue),I&&le.above?G.insertBefore(ue,$.gutter||$.text):G.appendChild(ue),ae(le,"redraw")}}function Sn(b,A,$,F){if(b.noHScroll){($.alignable||($.alignable=[])).push(A);var I=F.wrapperWidth;A.style.left=F.fixedPos+"px",b.coverGutter||(I-=F.gutterTotalWidth,A.style.paddingLeft=F.gutterTotalWidth+"px"),A.style.width=I+"px"}b.coverGutter&&(A.style.zIndex=5,A.style.position="relative",b.noHScroll||(A.style.marginLeft=-F.gutterTotalWidth+"px"))}function er(b){if(b.height!=null)return b.height;var A=b.doc.cm;if(!A)return 0;if(!Q(document.body,b.node)){var $="position: relative;";b.coverGutter&&($+="margin-left: -"+A.display.gutters.offsetWidth+"px;"),b.noHScroll&&($+="width: "+A.display.wrapper.clientWidth+"px;"),j(A.display.measure,q("div",[b.node],null,$))}return b.height=b.node.parentNode.offsetHeight}function yr(b,A){for(var $=wr(A);$!=b.wrapper;$=$.parentNode)if(!$||$.nodeType==1&&$.getAttribute("cm-ignore-events")=="true"||$.parentNode==b.sizer&&$!=b.mover)return!0}function ii(b){return b.lineSpace.offsetTop}function Pn(b){return b.mover.offsetHeight-b.lineSpace.offsetHeight}function fo(b){if(b.cachedPaddingH)return b.cachedPaddingH;var A=j(b.measure,q("pre","x","CodeMirror-line-like")),$=window.getComputedStyle?window.getComputedStyle(A):A.currentStyle,F={left:parseInt($.paddingLeft),right:parseInt($.paddingRight)};return isNaN(F.left)||isNaN(F.right)||(b.cachedPaddingH=F),F}function Dn(b){return 50-b.display.nativeBarWidth}function Ar(b){return b.display.scroller.clientWidth-Dn(b)-b.display.barWidth}function Ye(b){return b.display.scroller.clientHeight-Dn(b)-b.display.barHeight}function Rt(b,A,$){if(b.line==A)return{map:b.measure.map,cache:b.measure.cache};if(b.rest){for(var F=0;F<b.rest.length;F++)if(b.rest[F]==A)return{map:b.measure.maps[F],cache:b.measure.caches[F]};for(var I=0;I<b.rest.length;I++)if(gn(b.rest[I])>$)return{map:b.measure.maps[I],cache:b.measure.caches[I],before:!0}}}function rn(b,A,$,F){return Hn(b,Fr(b,A),$,F)}function vr(b,A){if(A>=b.display.viewFrom&&A<b.display.viewTo)return b.display.view[De(b,A)];var $=b.display.externalMeasured;return $&&A>=$.lineN&&A<$.lineN+$.size?$:void 0}function Fr(b,A){var $=gn(A),F=vr(b,$);F&&!F.text?F=null:F&&F.changes&&(He(b,F,$,sd(b)),b.curOp.forceUpdate=!0),F||(F=function(G,X){var J=gn(X=co(X)),le=G.display.externalMeasured=new z(G.doc,X,J);le.lineN=J;var ue=le.built=pr(G,le);return le.text=ue.pre,j(G.display.lineMeasure,ue.pre),le}(b,A));var I=Rt(F,A,$);return{line:A,view:F,rect:null,map:I.map,cache:I.cache,before:I.before,hasHeights:!1}}function Hn(b,A,$,F,I){A.before&&($=-1);var G,X=$+(F||"");return A.cache.hasOwnProperty(X)?G=A.cache[X]:(A.rect||(A.rect=A.view.text.getBoundingClientRect()),A.hasHeights||(function(J,le,ue){var _e=J.options.lineWrapping,Ae=_e&&Ar(J);if(!le.measure.heights||_e&&le.measure.width!=Ae){var qe=le.measure.heights=[];if(_e){le.measure.width=Ae;for(var Ne=le.text.firstChild.getClientRects(),tt=0;tt<Ne.length-1;tt++){var nt=Ne[tt],Je=Ne[tt+1];Math.abs(nt.bottom-Je.bottom)>2&&qe.push((nt.bottom+Je.top)/2-ue.top)}}qe.push(ue.bottom-ue.top)}}(b,A.view,A.rect),A.hasHeights=!0),G=function(J,le,ue,_e){var Ae,qe=Ch(le.map,ue,_e),Ne=qe.node,tt=qe.start,nt=qe.end,Je=qe.collapse;if(Ne.nodeType==3){for(var lt=0;lt<4;lt++){for(;tt&&je(le.line.text.charAt(qe.coverStart+tt));)--tt;for(;qe.coverStart+nt<qe.coverEnd&&je(le.line.text.charAt(qe.coverStart+nt));)++nt;if((Ae=c&&d<9&&tt==0&&nt==qe.coverEnd-qe.coverStart?Ne.parentNode.getBoundingClientRect():lu(D(Ne,tt,nt).getClientRects(),_e)).left||Ae.right||tt==0)break;nt=tt,tt-=1,Je="right"}c&&d<11&&(Ae=function(Ci,ei){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(br){if(go!=null)return go;var Si=j(br,q("span","x")),gr=Si.getBoundingClientRect(),Hr=D(Si,0,1).getBoundingClientRect();return go=Math.abs(gr.left-Hr.left)>1}(Ci))return ei;var Nr=screen.logicalXDPI/screen.deviceXDPI,ti=screen.logicalYDPI/screen.deviceYDPI;return{left:ei.left*Nr,right:ei.right*Nr,top:ei.top*ti,bottom:ei.bottom*ti}}(J.display.measure,Ae))}else{var xt;tt>0&&(Je=_e="right"),Ae=J.options.lineWrapping&&(xt=Ne.getClientRects()).length>1?xt[_e=="right"?xt.length-1:0]:Ne.getBoundingClientRect()}if(c&&d<9&&!tt&&(!Ae||!Ae.left&&!Ae.right)){var bt=Ne.parentNode.getClientRects()[0];Ae=bt?{left:bt.left,right:bt.left+fu(J.display),top:bt.top,bottom:bt.bottom}:gs}for(var Bt=Ae.top-le.rect.top,Ot=Ae.bottom-le.rect.top,jt=(Bt+Ot)/2,Yn=le.view.measure.heights,ln=0;ln<Yn.length-1&&!(jt<Yn[ln]);ln++);var Dr=ln?Yn[ln-1]:0,Bn=Yn[ln],Jr={left:(Je=="right"?Ae.right:Ae.left)-le.rect.left,right:(Je=="left"?Ae.left:Ae.right)-le.rect.left,top:Dr,bottom:Bn};return Ae.left||Ae.right||(Jr.bogus=!0),J.options.singleCursorHeightPerLine||(Jr.rtop=Bt,Jr.rbottom=Ot),Jr}(b,A,$,F),G.bogus||(A.cache[X]=G)),{left:G.left,right:G.right,top:I?G.rtop:G.top,bottom:I?G.rbottom:G.bottom}}var bi,gs={left:0,right:0,top:0,bottom:0};function Ch(b,A,$){for(var F,I,G,X,J,le,ue=0;ue<b.length;ue+=3)if(J=b[ue],le=b[ue+1],A<J?(I=0,G=1,X="left"):A<le?G=(I=A-J)+1:(ue==b.length-3||A==le&&b[ue+3]>A)&&(I=(G=le-J)-1,A>=le&&(X="right")),I!=null){if(F=b[ue+2],J==le&&$==(F.insertLeft?"left":"right")&&(X=$),$=="left"&&I==0)for(;ue&&b[ue-2]==b[ue-3]&&b[ue-1].insertLeft;)F=b[2+(ue-=3)],X="left";if($=="right"&&I==le-J)for(;ue<b.length-3&&b[ue+3]==b[ue+4]&&!b[ue+5].insertLeft;)F=b[(ue+=3)+2],X="right";break}return{node:F,start:I,end:G,collapse:X,coverStart:J,coverEnd:le}}function lu(b,A){var $=gs;if(A=="left")for(var F=0;F<b.length&&($=b[F]).left==$.right;F++);else for(var I=b.length-1;I>=0&&($=b[I]).left==$.right;I--);return $}function Il(b){if(b.measure&&(b.measure.cache={},b.measure.heights=null,b.rest))for(var A=0;A<b.rest.length;A++)b.measure.caches[A]={}}function t0(b){b.display.externalMeasure=null,N(b.display.lineMeasure);for(var A=0;A<b.display.view.length;A++)Il(b.display.view[A])}function id(b){t0(b),b.display.cachedCharWidth=b.display.cachedTextHeight=b.display.cachedPaddingH=null,b.options.lineWrapping||(b.display.maxLineChanged=!0),b.display.lineNumChars=null}function n0(b){return g&&C?-(b.body.getBoundingClientRect().left-parseInt(getComputedStyle(b.body).marginLeft)):b.defaultView.pageXOffset||(b.documentElement||b.body).scrollLeft}function Ei(b){return g&&C?-(b.body.getBoundingClientRect().top-parseInt(getComputedStyle(b.body).marginTop)):b.defaultView.pageYOffset||(b.documentElement||b.body).scrollTop}function of(b){var A=co(b).widgets,$=0;if(A)for(var F=0;F<A.length;++F)A[F].above&&($+=er(A[F]));return $}function Js(b,A,$,F,I){if(!I){var G=of(A);$.top+=G,$.bottom+=G}if(F=="line")return $;F||(F="local");var X=Pe(A);if(F=="local"?X+=ii(b.display):X-=b.display.viewOffset,F=="page"||F=="window"){var J=b.display.lineSpace.getBoundingClientRect();X+=J.top+(F=="window"?0:Ei(ge(b)));var le=J.left+(F=="window"?0:n0(ge(b)));$.left+=le,$.right+=le}return $.top+=X,$.bottom+=X,$}function bc(b,A,$){if($=="div")return A;var F=A.left,I=A.top;if($=="page")F-=n0(ge(b)),I-=Ei(ge(b));else if($=="local"||!$){var G=b.display.sizer.getBoundingClientRect();F+=G.left,I+=G.top}var X=b.display.lineSpace.getBoundingClientRect();return{left:F-X.left,top:I-X.top}}function Sh(b,A,$,F,I){return F||(F=mt(b.doc,A.line)),Js(b,F,rn(b,F,A.ch,I),$)}function ul(b,A,$,F,I,G){function X(tt,nt){var Je=Hn(b,I,tt,nt?"right":"left",G);return nt?Je.left=Je.right:Je.right=Je.left,Js(b,F,Je,$)}F=F||mt(b.doc,A.line),I||(I=Fr(b,F));var J=Me(F,b.doc.direction),le=A.ch,ue=A.sticky;if(le>=F.text.length?(le=F.text.length,ue="before"):le<=0&&(le=0,ue="after"),!J)return X(ue=="before"?le-1:le,ue=="before");function _e(tt,nt,Je){return X(Je?tt-1:tt,J[nt].level==1!=Je)}var Ae=me(J,le,ue),qe=he,Ne=_e(le,Ae,ue=="before");return qe!=null&&(Ne.other=_e(le,qe,ue!="before")),Ne}function Xp(b,A){var $=0;A=xn(b.doc,A),b.options.lineWrapping||($=fu(b.display)*A.ch);var F=mt(b.doc,A.line),I=Pe(F)+ii(b.display);return{left:$,right:$,top:I,bottom:I+F.height}}function uu(b,A,$,F,I){var G=dt(b,A,$);return G.xRel=I,F&&(G.outside=F),G}function od(b,A,$){var F=b.doc;if(($+=b.display.viewOffset)<0)return uu(F.first,0,null,-1,-1);var I=Qr(F,$),G=F.first+F.size-1;if(I>G)return uu(F.first+F.size-1,mt(F,G).text.length,null,1,1);A<0&&(A=0);for(var X=mt(F,I);;){var J=kh(b,X,I,A,$),le=Ia(X,J.ch+(J.xRel>0||J.outside>0?1:0));if(!le)return J;var ue=le.find(1);if(ue.line==I)return ue;X=mt(F,I=ue.line)}}function cu(b,A,$,F){F-=of(A);var I=A.text.length,G=fe(function(X){return Hn(b,$,X-1).bottom<=F},I,0);return{begin:G,end:I=fe(function(X){return Hn(b,$,X).top>F},G,I)}}function Kp(b,A,$,F){return $||($=Fr(b,A)),cu(b,A,$,Js(b,A,Hn(b,$,F),"line").top)}function xc(b,A,$,F){return!(b.bottom<=$)&&(b.top>$||(F?b.left:b.right)>A)}function kh(b,A,$,F,I){I-=Pe(A);var G=Fr(b,A),X=of(A),J=0,le=A.text.length,ue=!0,_e=Me(A,b.doc.direction);if(_e){var Ae=(b.options.lineWrapping?Zp:Th)(b,A,$,G,_e,F,I);J=(ue=Ae.level!=1)?Ae.from:Ae.to-1,le=ue?Ae.to:Ae.from-1}var qe,Ne,tt=null,nt=null,Je=fe(function(Ot){var jt=Hn(b,G,Ot);return jt.top+=X,jt.bottom+=X,!!xc(jt,F,I,!1)&&(jt.top<=I&&jt.left<=F&&(tt=Ot,nt=jt),!0)},J,le),lt=!1;if(nt){var xt=F-nt.left<nt.right-F,bt=xt==ue;Je=tt+(bt?0:1),Ne=bt?"after":"before",qe=xt?nt.left:nt.right}else{ue||Je!=le&&Je!=J||Je++,Ne=Je==0?"after":Je==A.text.length?"before":Hn(b,G,Je-(ue?1:0)).bottom+X<=I==ue?"after":"before";var Bt=ul(b,dt($,Je,Ne),"line",A,G);qe=Bt.left,lt=I<Bt.top?-1:I>=Bt.bottom?1:0}return uu($,Je=V(A.text,Je,1),Ne,lt,F-qe)}function Th(b,A,$,F,I,G,X){var J=fe(function(Ae){var qe=I[Ae],Ne=qe.level!=1;return xc(ul(b,dt($,Ne?qe.to:qe.from,Ne?"before":"after"),"line",A,F),G,X,!0)},0,I.length-1),le=I[J];if(J>0){var ue=le.level!=1,_e=ul(b,dt($,ue?le.from:le.to,ue?"after":"before"),"line",A,F);xc(_e,G,X,!0)&&_e.top>X&&(le=I[J-1])}return le}function Zp(b,A,$,F,I,G,X){var J=cu(b,A,F,X),le=J.begin,ue=J.end;/\s/.test(A.text.charAt(ue-1))&&ue--;for(var _e=null,Ae=null,qe=0;qe<I.length;qe++){var Ne=I[qe];if(!(Ne.from>=ue||Ne.to<=le)){var tt=Hn(b,F,Ne.level!=1?Math.min(ue,Ne.to)-1:Math.max(le,Ne.from)).right,nt=tt<G?G-tt+1e9:tt-G;(!_e||Ae>nt)&&(_e=Ne,Ae=nt)}}return _e||(_e=I[I.length-1]),_e.from<le&&(_e={from:le,to:_e.to,level:_e.level}),_e.to>ue&&(_e={from:_e.from,to:ue,level:_e.level}),_e}function sf(b){if(b.cachedTextHeight!=null)return b.cachedTextHeight;if(bi==null){bi=q("pre",null,"CodeMirror-line-like");for(var A=0;A<49;++A)bi.appendChild(document.createTextNode("x")),bi.appendChild(q("br"));bi.appendChild(document.createTextNode("x"))}j(b.measure,bi);var $=bi.offsetHeight/50;return $>3&&(b.cachedTextHeight=$),N(b.measure),$||1}function fu(b){if(b.cachedCharWidth!=null)return b.cachedCharWidth;var A=q("span","xxxxxxxxxx"),$=q("pre",[A],"CodeMirror-line-like");j(b.measure,$);var F=A.getBoundingClientRect(),I=(F.right-F.left)/10;return I>2&&(b.cachedCharWidth=I),I||10}function sd(b){for(var A=b.display,$={},F={},I=A.gutters.clientLeft,G=A.gutters.firstChild,X=0;G;G=G.nextSibling,++X){var J=b.display.gutterSpecs[X].className;$[J]=G.offsetLeft+G.clientLeft+I,F[J]=G.clientWidth}return{fixedPos:ad(A),gutterTotalWidth:A.gutters.offsetWidth,gutterLeft:$,gutterWidth:F,wrapperWidth:A.wrapper.clientWidth}}function ad(b){return b.scroller.getBoundingClientRect().left-b.sizer.getBoundingClientRect().left}function r0(b){var A=sf(b.display),$=b.options.lineWrapping,F=$&&Math.max(5,b.display.scroller.clientWidth/fu(b.display)-3);return function(I){if(Uo(b.doc,I))return 0;var G=0;if(I.widgets)for(var X=0;X<I.widgets.length;X++)I.widgets[X].height&&(G+=I.widgets[X].height);return $?G+(Math.ceil(I.text.length/F)||1)*A:G+A}}function ld(b){var A=b.doc,$=r0(b);A.iter(function(F){var I=$(F);I!=F.height&&an(F,I)})}function Gu(b,A,$,F){var I=b.display;if(!$&&wr(A).getAttribute("cm-not-content")=="true")return null;var G,X,J=I.lineSpace.getBoundingClientRect();try{G=A.clientX-J.left,X=A.clientY-J.top}catch{return null}var le,ue=od(b,G,X);if(F&&ue.xRel>0&&(le=mt(b.doc,ue.line).text).length==ue.ch){var _e=Ee(le,le.length,b.options.tabSize)-le.length;ue=dt(ue.line,Math.max(0,Math.round((G-fo(b.display).left)/fu(b.display))-_e))}return ue}function De(b,A){if(A>=b.display.viewTo||(A-=b.display.viewFrom)<0)return null;for(var $=b.display.view,F=0;F<$.length;F++)if((A-=$[F].size)<0)return F}function Ke(b,A,$,F){A==null&&(A=b.doc.first),$==null&&($=b.doc.first+b.doc.size),F||(F=0);var I=b.display;if(F&&$<I.viewTo&&(I.updateLineNumbers==null||I.updateLineNumbers>A)&&(I.updateLineNumbers=A),b.curOp.viewChanged=!0,A>=I.viewTo)Es&&pa(b.doc,A)<I.viewTo&&ct(b);else if($<=I.viewFrom)Es&&ga(b.doc,$+F)>I.viewFrom?ct(b):(I.viewFrom+=F,I.viewTo+=F);else if(A<=I.viewFrom&&$>=I.viewTo)ct(b);else if(A<=I.viewFrom){var G=At(b,$,$+F,1);G?(I.view=I.view.slice(G.index),I.viewFrom=G.lineN,I.viewTo+=F):ct(b)}else if($>=I.viewTo){var X=At(b,A,A,-1);X?(I.view=I.view.slice(0,X.index),I.viewTo=X.lineN):ct(b)}else{var J=At(b,A,A,-1),le=At(b,$,$+F,1);J&&le?(I.view=I.view.slice(0,J.index).concat(Y(b,J.lineN,le.lineN)).concat(I.view.slice(le.index)),I.viewTo+=F):ct(b)}var ue=I.externalMeasured;ue&&($<ue.lineN?ue.lineN+=F:A<ue.lineN+ue.size&&(I.externalMeasured=null))}function st(b,A,$){b.curOp.viewChanged=!0;var F=b.display,I=b.display.externalMeasured;if(I&&A>=I.lineN&&A<I.lineN+I.size&&(F.externalMeasured=null),!(A<F.viewFrom||A>=F.viewTo)){var G=F.view[De(b,A)];if(G.node!=null){var X=G.changes||(G.changes=[]);Ue(X,$)==-1&&X.push($)}}}function ct(b){b.display.viewFrom=b.display.viewTo=b.doc.first,b.display.view=[],b.display.viewOffset=0}function At(b,A,$,F){var I,G=De(b,A),X=b.display.view;if(!Es||$==b.doc.first+b.doc.size)return{index:G,lineN:$};for(var J=b.display.viewFrom,le=0;le<G;le++)J+=X[le].size;if(J!=A){if(F>0){if(G==X.length-1)return null;I=J+X[G].size-A,G++}else I=J-A;A+=I,$+=I}for(;pa(b.doc,$)!=$;){if(G==(F<0?0:X.length-1))return null;$+=F*X[G-(F<0?1:0)].size,G+=F}return{index:G,lineN:$}}function en(b){for(var A=b.display.view,$=0,F=0;F<A.length;F++){var I=A[F];I.hidden||I.node&&!I.changes||++$}return $}function cn(b){b.display.input.showSelection(b.display.input.prepareSelection())}function kn(b,A){A===void 0&&(A=!0);var $=b.doc,F={},I=F.cursors=document.createDocumentFragment(),G=F.selection=document.createDocumentFragment(),X=b.options.$customCursor;X&&(A=!0);for(var J=0;J<$.sel.ranges.length;J++)if(A||J!=$.sel.primIndex){var le=$.sel.ranges[J];if(!(le.from().line>=b.display.viewTo||le.to().line<b.display.viewFrom)){var ue=le.empty();if(X){var _e=X(b,le);_e&&hn(b,_e,I)}else(ue||b.options.showCursorWhenSelecting)&&hn(b,le.head,I);ue||rr(b,le,G)}}return F}function hn(b,A,$){var F=ul(b,A,"div",null,null,!b.options.singleCursorHeightPerLine),I=$.appendChild(q("div","","CodeMirror-cursor"));if(I.style.left=F.left+"px",I.style.top=F.top+"px",I.style.height=Math.max(0,F.bottom-F.top)*b.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(b.getWrapperElement().className)){var G=Sh(b,A,"div",null,null),X=G.right-G.left;I.style.width=(X>0?X:b.defaultCharWidth())+"px"}if(F.other){var J=$.appendChild(q("div","","CodeMirror-cursor CodeMirror-secondarycursor"));J.style.display="",J.style.left=F.other.left+"px",J.style.top=F.other.top+"px",J.style.height=.85*(F.other.bottom-F.other.top)+"px"}}function $r(b,A){return b.top-A.top||b.left-A.left}function rr(b,A,$){var F=b.display,I=b.doc,G=document.createDocumentFragment(),X=fo(b.display),J=X.left,le=Math.max(F.sizerWidth,Ar(b)-F.sizer.offsetLeft)-X.right,ue=I.direction=="ltr";function _e(bt,Bt,Ot,jt){Bt<0&&(Bt=0),Bt=Math.round(Bt),jt=Math.round(jt),G.appendChild(q("div",null,"CodeMirror-selected","position: absolute; left: "+bt+`px;
                             top: `+Bt+"px; width: "+(Ot??le-bt)+`px;
                             height: `+(jt-Bt)+"px"))}function Ae(bt,Bt,Ot){var jt,Yn,ln=mt(I,bt),Dr=ln.text.length;function Bn(ei,Nr){return Sh(b,dt(bt,ei),"div",ln,Nr)}function Jr(ei,Nr,ti){var br=Kp(b,ln,null,ei),Si=Nr=="ltr"==(ti=="after")?"left":"right";return Bn(ti=="after"?br.begin:br.end-(/\s/.test(ln.text.charAt(br.end-1))?2:1),Si)[Si]}var Ci=Me(ln,I.direction);return function(ei,Nr,ti,br){if(!ei)return br(Nr,ti,"ltr",0);for(var Si=!1,gr=0;gr<ei.length;++gr){var Hr=ei[gr];(Hr.from<ti&&Hr.to>Nr||Nr==ti&&Hr.to==Nr)&&(br(Math.max(Hr.from,Nr),Math.min(Hr.to,ti),Hr.level==1?"rtl":"ltr",gr),Si=!0)}Si||br(Nr,ti,"ltr")}(Ci,Bt||0,Ot??Dr,function(ei,Nr,ti,br){var Si=ti=="ltr",gr=Bn(ei,Si?"left":"right"),Hr=Bn(Nr-1,Si?"right":"left"),Cr=Bt==null&&ei==0,ui=Ot==null&&Nr==Dr,ta=br==0,ki=!Ci||br==Ci.length-1;if(Hr.top-gr.top<=3){var Gs=(ue?ui:Cr)&&ki,Ws=(ue?Cr:ui)&&ta?J:(Si?gr:Hr).left,yo=Gs?le:(Si?Hr:gr).right;_e(Ws,gr.top,yo-Ws,gr.bottom)}else{var na,Nl,Ms,pu;Si?(na=ue&&Cr&&ta?J:gr.left,Nl=ue?le:Jr(ei,ti,"before"),Ms=ue?J:Jr(Nr,ti,"after"),pu=ue&&ui&&ki?le:Hr.right):(na=ue?Jr(ei,ti,"before"):J,Nl=!ue&&Cr&&ta?le:gr.right,Ms=!ue&&ui&&ki?J:Hr.left,pu=ue?Jr(Nr,ti,"after"):le),_e(na,gr.top,Nl-na,gr.bottom),gr.bottom<Hr.top&&_e(J,gr.bottom,null,Hr.top),_e(Ms,Hr.top,pu-Ms,Hr.bottom)}(!jt||$r(gr,jt)<0)&&(jt=gr),$r(Hr,jt)<0&&(jt=Hr),(!Yn||$r(gr,Yn)<0)&&(Yn=gr),$r(Hr,Yn)<0&&(Yn=Hr)}),{start:jt,end:Yn}}var qe=A.from(),Ne=A.to();if(qe.line==Ne.line)Ae(qe.line,qe.ch,Ne.ch);else{var tt=mt(I,qe.line),nt=mt(I,Ne.line),Je=co(tt)==co(nt),lt=Ae(qe.line,qe.ch,Je?tt.text.length+1:null).end,xt=Ae(Ne.line,Je?0:null,Ne.ch).start;Je&&(lt.top<xt.top-2?(_e(lt.right,lt.top,null,lt.bottom),_e(J,xt.top,xt.left,xt.bottom)):_e(lt.right,lt.top,xt.left-lt.right,lt.bottom)),lt.bottom<xt.top&&_e(J,lt.bottom,null,xt.top)}$.appendChild(G)}function ar(b){if(b.state.focused){var A=b.display;clearInterval(A.blinker);var $=!0;A.cursorDiv.style.visibility="",b.options.cursorBlinkRate>0?A.blinker=setInterval(function(){b.hasFocus()||ss(b),A.cursorDiv.style.visibility=($=!$)?"":"hidden"},b.options.cursorBlinkRate):b.options.cursorBlinkRate<0&&(A.cursorDiv.style.visibility="hidden")}}function jr(b){b.hasFocus()||(b.display.input.focus(),b.state.focused||zi(b))}function Gn(b){b.state.delayingBlurEvent=!0,setTimeout(function(){b.state.delayingBlurEvent&&(b.state.delayingBlurEvent=!1,b.state.focused&&ss(b))},100)}function zi(b,A){b.state.delayingBlurEvent&&!b.state.draggingText&&(b.state.delayingBlurEvent=!1),b.options.readOnly!="nocursor"&&(b.state.focused||(Tt(b,"focus",b,A),b.state.focused=!0,H(b.display.wrapper,"CodeMirror-focused"),b.curOp||b.display.selForContextMenu==b.doc.sel||(b.display.input.reset(),p&&setTimeout(function(){return b.display.input.reset(!0)},20)),b.display.input.receivedFocus()),ar(b))}function ss(b,A){b.state.delayingBlurEvent||(b.state.focused&&(Tt(b,"blur",b,A),b.state.focused=!1,O(b.display.wrapper,"CodeMirror-focused")),clearInterval(b.display.blinker),setTimeout(function(){b.state.focused||(b.display.shift=!1)},150))}function as(b){for(var A=b.display,$=A.lineDiv.offsetTop,F=Math.max(0,A.scroller.getBoundingClientRect().top),I=A.lineDiv.getBoundingClientRect().top,G=0,X=0;X<A.view.length;X++){var J=A.view[X],le=b.options.lineWrapping,ue=void 0,_e=0;if(!J.hidden){if(I+=J.line.height,c&&d<8){var Ae=J.node.offsetTop+J.node.offsetHeight;ue=Ae-$,$=Ae}else{var qe=J.node.getBoundingClientRect();ue=qe.bottom-qe.top,!le&&J.text.firstChild&&(_e=J.text.firstChild.getBoundingClientRect().right-qe.left-1)}var Ne=J.line.height-ue;if((Ne>.005||Ne<-.005)&&(I<F&&(G-=Ne),an(J.line,ue),ma(J.line),J.rest))for(var tt=0;tt<J.rest.length;tt++)ma(J.rest[tt]);if(_e>b.display.sizerWidth){var nt=Math.ceil(_e/fu(b.display));nt>b.display.maxLineLength&&(b.display.maxLineLength=nt,b.display.maxLine=J.line,b.display.maxLineChanged=!0)}}}Math.abs(G)>2&&(A.scroller.scrollTop+=G)}function ma(b){if(b.widgets)for(var A=0;A<b.widgets.length;++A){var $=b.widgets[A],F=$.node.parentNode;F&&($.height=F.offsetHeight)}}function va(b,A,$){var F=$&&$.top!=null?Math.max(0,$.top):b.scroller.scrollTop;F=Math.floor(F-ii(b));var I=$&&$.bottom!=null?$.bottom:F+b.wrapper.clientHeight,G=Qr(A,F),X=Qr(A,I);if($&&$.ensure){var J=$.ensure.from.line,le=$.ensure.to.line;J<G?(G=J,X=Qr(A,Pe(mt(A,J))+b.wrapper.clientHeight)):Math.min(le,A.lastLine())>=X&&(G=Qr(A,Pe(mt(A,le))-b.wrapper.clientHeight),X=le)}return{from:G,to:Math.max(X,G+1)}}function Wu(b,A){var $=b.display,F=sf(b.display);A.top<0&&(A.top=0);var I=b.curOp&&b.curOp.scrollTop!=null?b.curOp.scrollTop:$.scroller.scrollTop,G=Ye(b),X={};A.bottom-A.top>G&&(A.bottom=A.top+G);var J=b.doc.height+Pn($),le=A.top<F,ue=A.bottom>J-F;if(A.top<I)X.scrollTop=le?0:A.top;else if(A.bottom>I+G){var _e=Math.min(A.top,(ue?J:A.bottom)-G);_e!=I&&(X.scrollTop=_e)}var Ae=b.options.fixedGutter?0:$.gutters.offsetWidth,qe=b.curOp&&b.curOp.scrollLeft!=null?b.curOp.scrollLeft:$.scroller.scrollLeft-Ae,Ne=Ar(b)-$.gutters.offsetWidth,tt=A.right-A.left>Ne;return tt&&(A.right=A.left+Ne),A.left<10?X.scrollLeft=0:A.left<qe?X.scrollLeft=Math.max(0,A.left+Ae-(tt?0:10)):A.right>Ne+qe-3&&(X.scrollLeft=A.right+(tt?0:10)-Ne),X}function As(b,A){A!=null&&(i0(b),b.curOp.scrollTop=(b.curOp.scrollTop==null?b.doc.scrollTop:b.curOp.scrollTop)+A)}function Dh(b){i0(b);var A=b.getCursor();b.curOp.scrollToPos={from:A,to:A,margin:b.options.cursorScrollMargin}}function Qp(b,A,$){A==null&&$==null||i0(b),A!=null&&(b.curOp.scrollLeft=A),$!=null&&(b.curOp.scrollTop=$)}function i0(b){var A=b.curOp.scrollToPos;A&&(b.curOp.scrollToPos=null,Hx(b,Xp(b,A.from),Xp(b,A.to),A.margin))}function Hx(b,A,$,F){var I=Wu(b,{left:Math.min(A.left,$.left),top:Math.min(A.top,$.top)-F,right:Math.max(A.right,$.right),bottom:Math.max(A.bottom,$.bottom)+F});Qp(b,I.scrollLeft,I.scrollTop)}function Jp(b,A){Math.abs(b.doc.scrollTop-A)<2||(a||Ay(b,{top:A}),qx(b,A,!0),a&&Ay(b),ng(b,100))}function qx(b,A,$){A=Math.max(0,Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,A)),(b.display.scroller.scrollTop!=A||$)&&(b.doc.scrollTop=A,b.display.scrollbars.setScrollTop(A),b.display.scroller.scrollTop!=A&&(b.display.scroller.scrollTop=A))}function ud(b,A,$,F){A=Math.max(0,Math.min(A,b.display.scroller.scrollWidth-b.display.scroller.clientWidth)),($?A==b.doc.scrollLeft:Math.abs(b.doc.scrollLeft-A)<2)&&!F||(b.doc.scrollLeft=A,Xx(b),b.display.scroller.scrollLeft!=A&&(b.display.scroller.scrollLeft=A),b.display.scrollbars.setScrollLeft(A))}function eg(b){var A=b.display,$=A.gutters.offsetWidth,F=Math.round(b.doc.height+Pn(b.display));return{clientHeight:A.scroller.clientHeight,viewHeight:A.wrapper.clientHeight,scrollWidth:A.scroller.scrollWidth,clientWidth:A.scroller.clientWidth,viewWidth:A.wrapper.clientWidth,barLeft:b.options.fixedGutter?$:0,docHeight:F,scrollHeight:F+Dn(b)+A.barHeight,nativeBarWidth:A.nativeBarWidth,gutterWidth:$}}var cd=function(b,A,$){this.cm=$;var F=this.vert=q("div",[q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),I=this.horiz=q("div",[q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");F.tabIndex=I.tabIndex=-1,b(F),b(I),We(F,"scroll",function(){F.clientHeight&&A(F.scrollTop,"vertical")}),We(I,"scroll",function(){I.clientWidth&&A(I.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};cd.prototype.update=function(b){var A=b.scrollWidth>b.clientWidth+1,$=b.scrollHeight>b.clientHeight+1,F=b.nativeBarWidth;if($){this.vert.style.display="block",this.vert.style.bottom=A?F+"px":"0";var I=b.viewHeight-(A?F:0);this.vert.firstChild.style.height=Math.max(0,b.scrollHeight-b.clientHeight+I)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(A){this.horiz.style.display="block",this.horiz.style.right=$?F+"px":"0",this.horiz.style.left=b.barLeft+"px";var G=b.viewWidth-b.barLeft-($?F:0);this.horiz.firstChild.style.width=Math.max(0,b.scrollWidth-b.clientWidth+G)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&b.clientHeight>0&&(F==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:$?F:0,bottom:A?F:0}},cd.prototype.setScrollLeft=function(b){this.horiz.scrollLeft!=b&&(this.horiz.scrollLeft=b),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},cd.prototype.setScrollTop=function(b){this.vert.scrollTop!=b&&(this.vert.scrollTop=b),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},cd.prototype.zeroWidthHack=function(){var b=T&&!x?"12px":"18px";this.horiz.style.height=this.vert.style.width=b,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Ve,this.disableVert=new Ve},cd.prototype.enableZeroWidthBar=function(b,A,$){b.style.visibility="",A.set(1e3,function F(){var I=b.getBoundingClientRect();($=="vert"?document.elementFromPoint(I.right-1,(I.top+I.bottom)/2):document.elementFromPoint((I.right+I.left)/2,I.bottom-1))!=b?b.style.visibility="hidden":A.set(1e3,F)})},cd.prototype.clear=function(){var b=this.horiz.parentNode;b.removeChild(this.horiz),b.removeChild(this.vert)};var tg=function(){};function Lh(b,A){A||(A=eg(b));var $=b.display.barWidth,F=b.display.barHeight;Gx(b,A);for(var I=0;I<4&&$!=b.display.barWidth||F!=b.display.barHeight;I++)$!=b.display.barWidth&&b.options.lineWrapping&&as(b),Gx(b,eg(b)),$=b.display.barWidth,F=b.display.barHeight}function Gx(b,A){var $=b.display,F=$.scrollbars.update(A);$.sizer.style.paddingRight=($.barWidth=F.right)+"px",$.sizer.style.paddingBottom=($.barHeight=F.bottom)+"px",$.heightForcer.style.borderBottom=F.bottom+"px solid transparent",F.right&&F.bottom?($.scrollbarFiller.style.display="block",$.scrollbarFiller.style.height=F.bottom+"px",$.scrollbarFiller.style.width=F.right+"px"):$.scrollbarFiller.style.display="",F.bottom&&b.options.coverGutterNextToScrollbar&&b.options.fixedGutter?($.gutterFiller.style.display="block",$.gutterFiller.style.height=F.bottom+"px",$.gutterFiller.style.width=A.gutterWidth+"px"):$.gutterFiller.style.display=""}tg.prototype.update=function(){return{bottom:0,right:0}},tg.prototype.setScrollLeft=function(){},tg.prototype.setScrollTop=function(){},tg.prototype.clear=function(){};var Wx={native:cd,null:tg};function Vx(b){b.display.scrollbars&&(b.display.scrollbars.clear(),b.display.scrollbars.addClass&&O(b.display.wrapper,b.display.scrollbars.addClass)),b.display.scrollbars=new Wx[b.options.scrollbarStyle](function(A){b.display.wrapper.insertBefore(A,b.display.scrollbarFiller),We(A,"mousedown",function(){b.state.focused&&setTimeout(function(){return b.display.input.focus()},0)}),A.setAttribute("cm-not-content","true")},function(A,$){$=="horizontal"?ud(b,A):Jp(b,A)},b),b.display.scrollbars.addClass&&H(b.display.wrapper,b.display.scrollbars.addClass)}var IC=0;function fd(b){var A;b.curOp={cm:b,viewChanged:!1,startHeight:b.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++IC,markArrays:null},A=b.curOp,K?K.ops.push(A):A.ownsGroup=K={ops:[A],delayedCallbacks:[]}}function dd(b){var A=b.curOp;A&&function($,F){var I=$.ownsGroup;if(I)try{(function(G){var X=G.delayedCallbacks,J=0;do{for(;J<X.length;J++)X[J].call(null);for(var le=0;le<G.ops.length;le++){var ue=G.ops[le];if(ue.cursorActivityHandlers)for(;ue.cursorActivityCalled<ue.cursorActivityHandlers.length;)ue.cursorActivityHandlers[ue.cursorActivityCalled++].call(null,ue.cm)}}while(J<X.length)})(I)}finally{K=null,F(I)}}(A,function($){for(var F=0;F<$.ops.length;F++)$.ops[F].cm.curOp=null;(function(I){for(var G=I.ops,X=0;X<G.length;X++)NC(G[X]);for(var J=0;J<G.length;J++)PC(G[J]);for(var le=0;le<G.length;le++)BC(G[le]);for(var ue=0;ue<G.length;ue++)zC(G[ue]);for(var _e=0;_e<G.length;_e++)UC(G[_e])})($)})}function NC(b){var A=b.cm,$=A.display;(function(F){var I=F.display;!I.scrollbarsClipped&&I.scroller.offsetWidth&&(I.nativeBarWidth=I.scroller.offsetWidth-I.scroller.clientWidth,I.heightForcer.style.height=Dn(F)+"px",I.sizer.style.marginBottom=-I.nativeBarWidth+"px",I.sizer.style.borderRightWidth=Dn(F)+"px",I.scrollbarsClipped=!0)})(A),b.updateMaxLine&&rt(A),b.mustUpdate=b.viewChanged||b.forceUpdate||b.scrollTop!=null||b.scrollToPos&&(b.scrollToPos.from.line<$.viewFrom||b.scrollToPos.to.line>=$.viewTo)||$.maxLineChanged&&A.options.lineWrapping,b.update=b.mustUpdate&&new o0(A,b.mustUpdate&&{top:b.scrollTop,ensure:b.scrollToPos},b.forceUpdate)}function PC(b){b.updatedDisplay=b.mustUpdate&&Ey(b.cm,b.update)}function BC(b){var A=b.cm,$=A.display;b.updatedDisplay&&as(A),b.barMeasure=eg(A),$.maxLineChanged&&!A.options.lineWrapping&&(b.adjustWidthTo=rn(A,$.maxLine,$.maxLine.text.length).left+3,A.display.sizerWidth=b.adjustWidthTo,b.barMeasure.scrollWidth=Math.max($.scroller.clientWidth,$.sizer.offsetLeft+b.adjustWidthTo+Dn(A)+A.display.barWidth),b.maxScrollLeft=Math.max(0,$.sizer.offsetLeft+b.adjustWidthTo-Ar(A))),(b.updatedDisplay||b.selectionChanged)&&(b.preparedSelection=$.input.prepareSelection())}function zC(b){var A=b.cm;b.adjustWidthTo!=null&&(A.display.sizer.style.minWidth=b.adjustWidthTo+"px",b.maxScrollLeft<A.doc.scrollLeft&&ud(A,Math.min(A.display.scroller.scrollLeft,b.maxScrollLeft),!0),A.display.maxLineChanged=!1);var $=b.focus&&b.focus==ee(ge(A));b.preparedSelection&&A.display.input.showSelection(b.preparedSelection,$),(b.updatedDisplay||b.startHeight!=A.doc.height)&&Lh(A,b.barMeasure),b.updatedDisplay&&Sy(A,b.barMeasure),b.selectionChanged&&ar(A),A.state.focused&&b.updateInput&&A.display.input.reset(b.typing),$&&jr(b.cm)}function UC(b){var A=b.cm,$=A.display,F=A.doc;if(b.updatedDisplay&&Yx(A,b.update),$.wheelStartX==null||b.scrollTop==null&&b.scrollLeft==null&&!b.scrollToPos||($.wheelStartX=$.wheelStartY=null),b.scrollTop!=null&&qx(A,b.scrollTop,b.forceScroll),b.scrollLeft!=null&&ud(A,b.scrollLeft,!0,!0),b.scrollToPos){var I=function(ue,_e,Ae,qe){var Ne;qe==null&&(qe=0),ue.options.lineWrapping||_e!=Ae||(Ae=_e.sticky=="before"?dt(_e.line,_e.ch+1,"before"):_e,_e=_e.ch?dt(_e.line,_e.sticky=="before"?_e.ch-1:_e.ch,"after"):_e);for(var tt=0;tt<5;tt++){var nt=!1,Je=ul(ue,_e),lt=Ae&&Ae!=_e?ul(ue,Ae):Je,xt=Wu(ue,Ne={left:Math.min(Je.left,lt.left),top:Math.min(Je.top,lt.top)-qe,right:Math.max(Je.left,lt.left),bottom:Math.max(Je.bottom,lt.bottom)+qe}),bt=ue.doc.scrollTop,Bt=ue.doc.scrollLeft;if(xt.scrollTop!=null&&(Jp(ue,xt.scrollTop),Math.abs(ue.doc.scrollTop-bt)>1&&(nt=!0)),xt.scrollLeft!=null&&(ud(ue,xt.scrollLeft),Math.abs(ue.doc.scrollLeft-Bt)>1&&(nt=!0)),!nt)break}return Ne}(A,xn(F,b.scrollToPos.from),xn(F,b.scrollToPos.to),b.scrollToPos.margin);(function(ue,_e){if(!Ut(ue,"scrollCursorIntoView")){var Ae=ue.display,qe=Ae.sizer.getBoundingClientRect(),Ne=null,tt=Ae.wrapper.ownerDocument;if(_e.top+qe.top<0?Ne=!0:_e.bottom+qe.top>(tt.defaultView.innerHeight||tt.documentElement.clientHeight)&&(Ne=!1),Ne!=null&&!_){var nt=q("div","",null,`position: absolute;
                         top: `+(_e.top-Ae.viewOffset-ii(ue.display))+`px;
                         height: `+(_e.bottom-_e.top+Dn(ue)+Ae.barHeight)+`px;
                         left: `+_e.left+"px; width: "+Math.max(2,_e.right-_e.left)+"px;");ue.display.lineSpace.appendChild(nt),nt.scrollIntoView(Ne),ue.display.lineSpace.removeChild(nt)}}})(A,I)}var G=b.maybeHiddenMarkers,X=b.maybeUnhiddenMarkers;if(G)for(var J=0;J<G.length;++J)G[J].lines.length||Tt(G[J],"hide");if(X)for(var le=0;le<X.length;++le)X[le].lines.length&&Tt(X[le],"unhide");$.wrapper.offsetHeight&&(F.scrollTop=A.display.scroller.scrollTop),b.changeObjs&&Tt(A,"changes",A,b.changeObjs),b.update&&b.update.finish()}function Na(b,A){if(b.curOp)return A();fd(b);try{return A()}finally{dd(b)}}function Cs(b,A){return function(){if(b.curOp)return A.apply(b,arguments);fd(b);try{return A.apply(b,arguments)}finally{dd(b)}}}function ea(b){return function(){if(this.curOp)return b.apply(this,arguments);fd(this);try{return b.apply(this,arguments)}finally{dd(this)}}}function Ss(b){return function(){var A=this.cm;if(!A||A.curOp)return b.apply(this,arguments);fd(A);try{return b.apply(this,arguments)}finally{dd(A)}}}function ng(b,A){b.doc.highlightFrontier<b.display.viewTo&&b.state.highlight.set(A,$e(jC,b))}function jC(b){var A=b.doc;if(!(A.highlightFrontier>=b.display.viewTo)){var $=+new Date+b.options.workTime,F=Po(b,A.highlightFrontier),I=[];A.iter(F.line,Math.min(A.first+A.size,b.display.viewTo+500),function(G){if(F.line>=b.display.viewFrom){var X=G.styles,J=G.text.length>b.options.maxHighlightLength?Yt(A.mode,F.state):null,le=Us(b,G,F,!0);J&&(F.state=J),G.styles=le.styles;var ue=G.styleClasses,_e=le.classes;_e?G.styleClasses=_e:ue&&(G.styleClasses=null);for(var Ae=!X||X.length!=G.styles.length||ue!=_e&&(!ue||!_e||ue.bgClass!=_e.bgClass||ue.textClass!=_e.textClass),qe=0;!Ae&&qe<X.length;++qe)Ae=X[qe]!=G.styles[qe];Ae&&I.push(F.line),G.stateAfter=F.save(),F.nextLine()}else G.text.length<=b.options.maxHighlightLength&&mo(b,G.text,F),G.stateAfter=F.line%5==0?F.save():null,F.nextLine();if(+new Date>$)return ng(b,b.options.workDelay),!0}),A.highlightFrontier=F.line,A.modeFrontier=Math.max(A.modeFrontier,F.line),I.length&&Na(b,function(){for(var G=0;G<I.length;G++)st(b,I[G],"text")})}}var o0=function(b,A,$){var F=b.display;this.viewport=A,this.visible=va(F,b.doc,A),this.editorIsHidden=!F.wrapper.offsetWidth,this.wrapperHeight=F.wrapper.clientHeight,this.wrapperWidth=F.wrapper.clientWidth,this.oldDisplayWidth=Ar(b),this.force=$,this.dims=sd(b),this.events=[]};function HC(b){if(b.hasFocus())return null;var A=ee(ge(b));if(!A||!Q(b.display.lineDiv,A))return null;var $={activeElt:A};if(window.getSelection){var F=we(b).getSelection();F.anchorNode&&F.extend&&Q(b.display.lineDiv,F.anchorNode)&&($.anchorNode=F.anchorNode,$.anchorOffset=F.anchorOffset,$.focusNode=F.focusNode,$.focusOffset=F.focusOffset)}return $}function Ey(b,A){var $=b.display,F=b.doc;if(A.editorIsHidden)return ct(b),!1;if(!A.force&&A.visible.from>=$.viewFrom&&A.visible.to<=$.viewTo&&($.updateLineNumbers==null||$.updateLineNumbers>=$.viewTo)&&$.renderedView==$.view&&en(b)==0)return!1;Kx(b)&&(ct(b),A.dims=sd(b));var I=F.first+F.size,G=Math.max(A.visible.from-b.options.viewportMargin,F.first),X=Math.min(I,A.visible.to+b.options.viewportMargin);$.viewFrom<G&&G-$.viewFrom<20&&(G=Math.max(F.first,$.viewFrom)),$.viewTo>X&&$.viewTo-X<20&&(X=Math.min(I,$.viewTo)),Es&&(G=pa(b.doc,G),X=ga(b.doc,X));var J=G!=$.viewFrom||X!=$.viewTo||$.lastWrapHeight!=A.wrapperHeight||$.lastWrapWidth!=A.wrapperWidth;(function(_e,Ae,qe){var Ne=_e.display;Ne.view.length==0||Ae>=Ne.viewTo||qe<=Ne.viewFrom?(Ne.view=Y(_e,Ae,qe),Ne.viewFrom=Ae):(Ne.viewFrom>Ae?Ne.view=Y(_e,Ae,Ne.viewFrom).concat(Ne.view):Ne.viewFrom<Ae&&(Ne.view=Ne.view.slice(De(_e,Ae))),Ne.viewFrom=Ae,Ne.viewTo<qe?Ne.view=Ne.view.concat(Y(_e,Ne.viewTo,qe)):Ne.viewTo>qe&&(Ne.view=Ne.view.slice(0,De(_e,qe)))),Ne.viewTo=qe})(b,G,X),$.viewOffset=Pe(mt(b.doc,$.viewFrom)),b.display.mover.style.top=$.viewOffset+"px";var le=en(b);if(!J&&le==0&&!A.force&&$.renderedView==$.view&&($.updateLineNumbers==null||$.updateLineNumbers>=$.viewTo))return!1;var ue=HC(b);return le>4&&($.lineDiv.style.display="none"),function(_e,Ae,qe){var Ne=_e.display,tt=_e.options.lineNumbers,nt=Ne.lineDiv,Je=nt.firstChild;function lt(ln){var Dr=ln.nextSibling;return p&&T&&_e.display.currentWheelTarget==ln?ln.style.display="none":ln.parentNode.removeChild(ln),Dr}for(var xt=Ne.view,bt=Ne.viewFrom,Bt=0;Bt<xt.length;Bt++){var Ot=xt[Bt];if(!Ot.hidden)if(Ot.node&&Ot.node.parentNode==nt){for(;Je!=Ot.node;)Je=lt(Je);var jt=tt&&Ae!=null&&Ae<=bt&&Ot.lineNumber;Ot.changes&&(Ue(Ot.changes,"gutter")>-1&&(jt=!1),He(_e,Ot,bt,qe)),jt&&(N(Ot.lineNumber),Ot.lineNumber.appendChild(document.createTextNode(Ln(_e.options,bt)))),Je=Ot.node.nextSibling}else{var Yn=gt(_e,Ot,bt,qe);nt.insertBefore(Yn,Je)}bt+=Ot.size}for(;Je;)Je=lt(Je)}(b,$.updateLineNumbers,A.dims),le>4&&($.lineDiv.style.display=""),$.renderedView=$.view,function(_e){if(_e&&_e.activeElt&&_e.activeElt!=ee(_e.activeElt.ownerDocument)&&(_e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(_e.activeElt.nodeName)&&_e.anchorNode&&Q(document.body,_e.anchorNode)&&Q(document.body,_e.focusNode))){var Ae=_e.activeElt.ownerDocument,qe=Ae.defaultView.getSelection(),Ne=Ae.createRange();Ne.setEnd(_e.anchorNode,_e.anchorOffset),Ne.collapse(!1),qe.removeAllRanges(),qe.addRange(Ne),qe.extend(_e.focusNode,_e.focusOffset)}}(ue),N($.cursorDiv),N($.selectionDiv),$.gutters.style.height=$.sizer.style.minHeight=0,J&&($.lastWrapHeight=A.wrapperHeight,$.lastWrapWidth=A.wrapperWidth,ng(b,400)),$.updateLineNumbers=null,!0}function Yx(b,A){for(var $=A.viewport,F=!0;;F=!1){if(F&&b.options.lineWrapping&&A.oldDisplayWidth!=Ar(b))F&&(A.visible=va(b.display,b.doc,$));else if($&&$.top!=null&&($={top:Math.min(b.doc.height+Pn(b.display)-Ye(b),$.top)}),A.visible=va(b.display,b.doc,$),A.visible.from>=b.display.viewFrom&&A.visible.to<=b.display.viewTo)break;if(!Ey(b,A))break;as(b);var I=eg(b);cn(b),Lh(b,I),Sy(b,I),A.force=!1}A.signal(b,"update",b),b.display.viewFrom==b.display.reportedViewFrom&&b.display.viewTo==b.display.reportedViewTo||(A.signal(b,"viewportChange",b,b.display.viewFrom,b.display.viewTo),b.display.reportedViewFrom=b.display.viewFrom,b.display.reportedViewTo=b.display.viewTo)}function Ay(b,A){var $=new o0(b,A);if(Ey(b,$)){as(b),Yx(b,$);var F=eg(b);cn(b),Lh(b,F),Sy(b,F),$.finish()}}function Cy(b){var A=b.gutters.offsetWidth;b.sizer.style.marginLeft=A+"px",ae(b,"gutterChanged",b)}function Sy(b,A){b.display.sizer.style.minHeight=A.docHeight+"px",b.display.heightForcer.style.top=A.docHeight+"px",b.display.gutters.style.height=A.docHeight+b.display.barHeight+Dn(b)+"px"}function Xx(b){var A=b.display,$=A.view;if(A.alignWidgets||A.gutters.firstChild&&b.options.fixedGutter){for(var F=ad(A)-A.scroller.scrollLeft+b.doc.scrollLeft,I=A.gutters.offsetWidth,G=F+"px",X=0;X<$.length;X++)if(!$[X].hidden){b.options.fixedGutter&&($[X].gutter&&($[X].gutter.style.left=G),$[X].gutterBackground&&($[X].gutterBackground.style.left=G));var J=$[X].alignable;if(J)for(var le=0;le<J.length;le++)J[le].style.left=G}b.options.fixedGutter&&(A.gutters.style.left=F+I+"px")}}function Kx(b){if(!b.options.lineNumbers)return!1;var A=b.doc,$=Ln(b.options,A.first+A.size-1),F=b.display;if($.length!=F.lineNumChars){var I=F.measure.appendChild(q("div",[q("div",$)],"CodeMirror-linenumber CodeMirror-gutter-elt")),G=I.firstChild.offsetWidth,X=I.offsetWidth-G;return F.lineGutter.style.width="",F.lineNumInnerWidth=Math.max(G,F.lineGutter.offsetWidth-X)+1,F.lineNumWidth=F.lineNumInnerWidth+X,F.lineNumChars=F.lineNumInnerWidth?$.length:-1,F.lineGutter.style.width=F.lineNumWidth+"px",Cy(b.display),!0}return!1}function ky(b,A){for(var $=[],F=!1,I=0;I<b.length;I++){var G=b[I],X=null;if(typeof G!="string"&&(X=G.style,G=G.className),G=="CodeMirror-linenumbers"){if(!A)continue;F=!0}$.push({className:G,style:X})}return A&&!F&&$.push({className:"CodeMirror-linenumbers",style:null}),$}function Zx(b){var A=b.gutters,$=b.gutterSpecs;N(A),b.lineGutter=null;for(var F=0;F<$.length;++F){var I=$[F],G=I.className,X=I.style,J=A.appendChild(q("div",null,"CodeMirror-gutter "+G));X&&(J.style.cssText=X),G=="CodeMirror-linenumbers"&&(b.lineGutter=J,J.style.width=(b.lineNumWidth||1)+"px")}A.style.display=$.length?"":"none",Cy(b)}function rg(b){Zx(b.display),Ke(b),Xx(b)}function qC(b,A,$,F){var I=this;this.input=$,I.scrollbarFiller=q("div",null,"CodeMirror-scrollbar-filler"),I.scrollbarFiller.setAttribute("cm-not-content","true"),I.gutterFiller=q("div",null,"CodeMirror-gutter-filler"),I.gutterFiller.setAttribute("cm-not-content","true"),I.lineDiv=W("div",null,"CodeMirror-code"),I.selectionDiv=q("div",null,null,"position: relative; z-index: 1"),I.cursorDiv=q("div",null,"CodeMirror-cursors"),I.measure=q("div",null,"CodeMirror-measure"),I.lineMeasure=q("div",null,"CodeMirror-measure"),I.lineSpace=W("div",[I.measure,I.lineMeasure,I.selectionDiv,I.cursorDiv,I.lineDiv],null,"position: relative; outline: none");var G=W("div",[I.lineSpace],"CodeMirror-lines");I.mover=q("div",[G],null,"position: relative"),I.sizer=q("div",[I.mover],"CodeMirror-sizer"),I.sizerWidth=null,I.heightForcer=q("div",null,null,"position: absolute; height: 50px; width: 1px;"),I.gutters=q("div",null,"CodeMirror-gutters"),I.lineGutter=null,I.scroller=q("div",[I.sizer,I.heightForcer,I.gutters],"CodeMirror-scroll"),I.scroller.setAttribute("tabIndex","-1"),I.wrapper=q("div",[I.scrollbarFiller,I.gutterFiller,I.scroller],"CodeMirror"),g&&m>=105&&(I.wrapper.style.clipPath="inset(0px)"),I.wrapper.setAttribute("translate","no"),c&&d<8&&(I.gutters.style.zIndex=-1,I.scroller.style.paddingRight=0),p||a&&w||(I.scroller.draggable=!0),b&&(b.appendChild?b.appendChild(I.wrapper):b(I.wrapper)),I.viewFrom=I.viewTo=A.first,I.reportedViewFrom=I.reportedViewTo=A.first,I.view=[],I.renderedView=null,I.externalMeasured=null,I.viewOffset=0,I.lastWrapHeight=I.lastWrapWidth=0,I.updateLineNumbers=null,I.nativeBarWidth=I.barHeight=I.barWidth=0,I.scrollbarsClipped=!1,I.lineNumWidth=I.lineNumInnerWidth=I.lineNumChars=null,I.alignWidgets=!1,I.cachedCharWidth=I.cachedTextHeight=I.cachedPaddingH=null,I.maxLine=null,I.maxLineLength=0,I.maxLineChanged=!1,I.wheelDX=I.wheelDY=I.wheelStartX=I.wheelStartY=null,I.shift=!1,I.selForContextMenu=null,I.activeTouch=null,I.gutterSpecs=ky(F.gutters,F.lineNumbers),Zx(I),$.init(I)}o0.prototype.signal=function(b,A){Pt(b,A)&&this.events.push(arguments)},o0.prototype.finish=function(){for(var b=0;b<this.events.length;b++)Tt.apply(null,this.events[b])};var s0=0,wc=null;function Qx(b){var A=b.wheelDeltaX,$=b.wheelDeltaY;return A==null&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(A=b.detail),$==null&&b.detail&&b.axis==b.VERTICAL_AXIS?$=b.detail:$==null&&($=b.wheelDelta),{x:A,y:$}}function GC(b){var A=Qx(b);return A.x*=wc,A.y*=wc,A}function Jx(b,A){g&&m==102&&(b.display.chromeScrollHack==null?b.display.sizer.style.pointerEvents="none":clearTimeout(b.display.chromeScrollHack),b.display.chromeScrollHack=setTimeout(function(){b.display.chromeScrollHack=null,b.display.sizer.style.pointerEvents=""},100));var $=Qx(A),F=$.x,I=$.y,G=wc;A.deltaMode===0&&(F=A.deltaX,I=A.deltaY,G=1);var X=b.display,J=X.scroller,le=J.scrollWidth>J.clientWidth,ue=J.scrollHeight>J.clientHeight;if(F&&le||I&&ue){if(I&&T&&p){e:for(var _e=A.target,Ae=X.view;_e!=J;_e=_e.parentNode)for(var qe=0;qe<Ae.length;qe++)if(Ae[qe].node==_e){b.display.currentWheelTarget=_e;break e}}if(F&&!a&&!y&&G!=null)return I&&ue&&Jp(b,Math.max(0,J.scrollTop+I*G)),ud(b,Math.max(0,J.scrollLeft+F*G)),(!I||I&&ue)&&_n(A),void(X.wheelStartX=null);if(I&&G!=null){var Ne=I*G,tt=b.doc.scrollTop,nt=tt+X.wrapper.clientHeight;Ne<0?tt=Math.max(0,tt+Ne-50):nt=Math.min(b.doc.height,nt+Ne+50),Ay(b,{top:tt,bottom:nt})}s0<20&&A.deltaMode!==0&&(X.wheelStartX==null?(X.wheelStartX=J.scrollLeft,X.wheelStartY=J.scrollTop,X.wheelDX=F,X.wheelDY=I,setTimeout(function(){if(X.wheelStartX!=null){var Je=J.scrollLeft-X.wheelStartX,lt=J.scrollTop-X.wheelStartY,xt=lt&&X.wheelDY&&lt/X.wheelDY||Je&&X.wheelDX&&Je/X.wheelDX;X.wheelStartX=X.wheelStartY=null,xt&&(wc=(wc*s0+xt)/(s0+1),++s0)}},200)):(X.wheelDX+=F,X.wheelDY+=I))}}c?wc=-.53:a?wc=15:g?wc=-.7:v&&(wc=-1/3);var cl=function(b,A){this.ranges=b,this.primIndex=A};cl.prototype.primary=function(){return this.ranges[this.primIndex]},cl.prototype.equals=function(b){if(b==this)return!0;if(b.primIndex!=this.primIndex||b.ranges.length!=this.ranges.length)return!1;for(var A=0;A<this.ranges.length;A++){var $=this.ranges[A],F=b.ranges[A];if(!Rr($.anchor,F.anchor)||!Rr($.head,F.head))return!1}return!0},cl.prototype.deepCopy=function(){for(var b=[],A=0;A<this.ranges.length;A++)b[A]=new Ai(fr(this.ranges[A].anchor),fr(this.ranges[A].head));return new cl(b,this.primIndex)},cl.prototype.somethingSelected=function(){for(var b=0;b<this.ranges.length;b++)if(!this.ranges[b].empty())return!0;return!1},cl.prototype.contains=function(b,A){A||(A=b);for(var $=0;$<this.ranges.length;$++){var F=this.ranges[$];if(Nt(A,F.from())>=0&&Nt(b,F.to())<=0)return $}return-1};var Ai=function(b,A){this.anchor=b,this.head=A};function du(b,A,$){var F=b&&b.options.selectionsMayTouch,I=A[$];A.sort(function(qe,Ne){return Nt(qe.from(),Ne.from())}),$=Ue(A,I);for(var G=1;G<A.length;G++){var X=A[G],J=A[G-1],le=Nt(J.to(),X.from());if(F&&!X.empty()?le>0:le>=0){var ue=Ir(J.from(),X.from()),_e=Er(J.to(),X.to()),Ae=J.empty()?X.from()==X.head:J.from()==J.head;G<=$&&--$,A.splice(--G,2,new Ai(Ae?_e:ue,Ae?ue:_e))}}return new cl(A,$)}function af(b,A){return new cl([new Ai(b,A||b)],0)}function lf(b){return b.text?dt(b.from.line+b.text.length-1,ye(b.text).length+(b.text.length==1?b.from.ch:0)):b.to}function ew(b,A){if(Nt(b,A.from)<0)return b;if(Nt(b,A.to)<=0)return lf(A);var $=b.line+A.text.length-(A.to.line-A.from.line)-1,F=b.ch;return b.line==A.to.line&&(F+=lf(A).ch-A.to.ch),dt($,F)}function Ty(b,A){for(var $=[],F=0;F<b.sel.ranges.length;F++){var I=b.sel.ranges[F];$.push(new Ai(ew(I.anchor,A),ew(I.head,A)))}return du(b.cm,$,b.sel.primIndex)}function tw(b,A,$){return b.line==A.line?dt($.line,b.ch-A.ch+$.ch):dt($.line+(b.line-A.line),b.ch)}function Dy(b){b.doc.mode=Xe(b.options,b.doc.modeOption),ig(b)}function ig(b){b.doc.iter(function(A){A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null)}),b.doc.modeFrontier=b.doc.highlightFrontier=b.doc.first,ng(b,100),b.state.modeGen++,b.curOp&&Ke(b)}function nw(b,A){return A.from.ch==0&&A.to.ch==0&&ye(A.text)==""&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}function Ly(b,A,$,F){function I(xt){return $?$[xt]:null}function G(xt,bt,Bt){(function(Ot,jt,Yn,ln){Ot.text=jt,Ot.stateAfter&&(Ot.stateAfter=null),Ot.styles&&(Ot.styles=null),Ot.order!=null&&(Ot.order=null),ha(Ot),js(Ot,Yn);var Dr=ln?ln(Ot):1;Dr!=Ot.height&&an(Ot,Dr)})(xt,bt,Bt,F),ae(xt,"change",xt,A)}function X(xt,bt){for(var Bt=[],Ot=xt;Ot<bt;++Ot)Bt.push(new Mt(ue[Ot],I(Ot),F));return Bt}var J=A.from,le=A.to,ue=A.text,_e=mt(b,J.line),Ae=mt(b,le.line),qe=ye(ue),Ne=I(ue.length-1),tt=le.line-J.line;if(A.full)b.insert(0,X(0,ue.length)),b.remove(ue.length,b.size-ue.length);else if(nw(b,A)){var nt=X(0,ue.length-1);G(Ae,Ae.text,Ne),tt&&b.remove(J.line,tt),nt.length&&b.insert(J.line,nt)}else if(_e==Ae)if(ue.length==1)G(_e,_e.text.slice(0,J.ch)+qe+_e.text.slice(le.ch),Ne);else{var Je=X(1,ue.length-1);Je.push(new Mt(qe+_e.text.slice(le.ch),Ne,F)),G(_e,_e.text.slice(0,J.ch)+ue[0],I(0)),b.insert(J.line+1,Je)}else if(ue.length==1)G(_e,_e.text.slice(0,J.ch)+ue[0]+Ae.text.slice(le.ch),I(0)),b.remove(J.line+1,tt);else{G(_e,_e.text.slice(0,J.ch)+ue[0],I(0)),G(Ae,qe+Ae.text.slice(le.ch),Ne);var lt=X(1,ue.length-1);tt>1&&b.remove(J.line+1,tt-1),b.insert(J.line+1,lt)}ae(b,"change",b,A)}function uf(b,A,$){(function F(I,G,X){if(I.linked)for(var J=0;J<I.linked.length;++J){var le=I.linked[J];if(le.doc!=G){var ue=X&&le.sharedHist;$&&!ue||(A(le.doc,ue),F(le.doc,I,ue))}}})(b,null,!0)}function rw(b,A){if(A.cm)throw new Error("This document is already in use.");b.doc=A,A.cm=b,ld(b),Dy(b),iw(b),b.options.direction=A.direction,b.options.lineWrapping||rt(b),b.options.mode=A.modeOption,Ke(b)}function iw(b){(b.doc.direction=="rtl"?H:O)(b.display.lineDiv,"CodeMirror-rtl")}function a0(b){this.done=[],this.undone=[],this.undoDepth=b?b.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=b?b.maxGeneration:1}function Ry(b,A){var $={from:fr(A.from),to:lf(A),text:jn(b,A.from,A.to)};return aw(b,$,A.from.line,A.to.line+1),uf(b,function(F){return aw(F,$,A.from.line,A.to.line+1)},!0),$}function ow(b){for(;b.length&&ye(b).ranges;)b.pop()}function sw(b,A,$,F){var I=b.history;I.undone.length=0;var G,X,J=+new Date;if((I.lastOp==F||I.lastOrigin==A.origin&&A.origin&&(A.origin.charAt(0)=="+"&&I.lastModTime>J-(b.cm?b.cm.options.historyEventDelay:500)||A.origin.charAt(0)=="*"))&&(G=function(ue,_e){return _e?(ow(ue.done),ye(ue.done)):ue.done.length&&!ye(ue.done).ranges?ye(ue.done):ue.done.length>1&&!ue.done[ue.done.length-2].ranges?(ue.done.pop(),ye(ue.done)):void 0}(I,I.lastOp==F)))X=ye(G.changes),Nt(A.from,A.to)==0&&Nt(A.from,X.to)==0?X.to=lf(A):G.changes.push(Ry(b,A));else{var le=ye(I.done);for(le&&le.ranges||l0(b.sel,I.done),G={changes:[Ry(b,A)],generation:I.generation},I.done.push(G);I.done.length>I.undoDepth;)I.done.shift(),I.done[0].ranges||I.done.shift()}I.done.push($),I.generation=++I.maxGeneration,I.lastModTime=I.lastSelTime=J,I.lastOp=I.lastSelOp=F,I.lastOrigin=I.lastSelOrigin=A.origin,X||Tt(b,"historyAdded")}function WC(b,A,$,F){var I=b.history,G=F&&F.origin;$==I.lastSelOp||G&&I.lastSelOrigin==G&&(I.lastModTime==I.lastSelTime&&I.lastOrigin==G||function(X,J,le,ue){var _e=J.charAt(0);return _e=="*"||_e=="+"&&le.ranges.length==ue.ranges.length&&le.somethingSelected()==ue.somethingSelected()&&new Date-X.history.lastSelTime<=(X.cm?X.cm.options.historyEventDelay:500)}(b,G,ye(I.done),A))?I.done[I.done.length-1]=A:l0(A,I.done),I.lastSelTime=+new Date,I.lastSelOrigin=G,I.lastSelOp=$,F&&F.clearRedo!==!1&&ow(I.undone)}function l0(b,A){var $=ye(A);$&&$.ranges&&$.equals(b)||A.push(b)}function aw(b,A,$,F){var I=A["spans_"+b.id],G=0;b.iter(Math.max(b.first,$),Math.min(b.first+b.size,F),function(X){X.markedSpans&&((I||(I=A["spans_"+b.id]={}))[G]=X.markedSpans),++G})}function VC(b){if(!b)return null;for(var A,$=0;$<b.length;++$)b[$].marker.explicitlyCleared?A||(A=b.slice(0,$)):A&&A.push(b[$]);return A?A.length?A:null:b}function lw(b,A){var $=function(_e,Ae){var qe=Ae["spans_"+_e.id];if(!qe)return null;for(var Ne=[],tt=0;tt<Ae.text.length;++tt)Ne.push(VC(qe[tt]));return Ne}(b,A),F=da(b,A);if(!$)return F;if(!F)return $;for(var I=0;I<$.length;++I){var G=$[I],X=F[I];if(G&&X)e:for(var J=0;J<X.length;++J){for(var le=X[J],ue=0;ue<G.length;++ue)if(G[ue].marker==le.marker)continue e;G.push(le)}else X&&($[I]=X)}return $}function Rh(b,A,$){for(var F=[],I=0;I<b.length;++I){var G=b[I];if(G.ranges)F.push($?cl.prototype.deepCopy.call(G):G);else{var X=G.changes,J=[];F.push({changes:J});for(var le=0;le<X.length;++le){var ue=X[le],_e=void 0;if(J.push({from:ue.from,to:ue.to,text:ue.text}),A)for(var Ae in ue)(_e=Ae.match(/^spans_(\d+)$/))&&Ue(A,Number(_e[1]))>-1&&(ye(J)[Ae]=ue[Ae],delete ue[Ae])}}}return F}function Fy(b,A,$,F){if(F){var I=b.anchor;if($){var G=Nt(A,I)<0;G!=Nt($,I)<0?(I=A,A=$):G!=Nt(A,$)<0&&(A=$)}return new Ai(I,A)}return new Ai($||A,A)}function u0(b,A,$,F,I){I==null&&(I=b.cm&&(b.cm.display.shift||b.extend)),qs(b,new cl([Fy(b.sel.primary(),A,$,I)],0),F)}function uw(b,A,$){for(var F=[],I=b.cm&&(b.cm.display.shift||b.extend),G=0;G<b.sel.ranges.length;G++)F[G]=Fy(b.sel.ranges[G],A[G],null,I);qs(b,du(b.cm,F,b.sel.primIndex),$)}function $y(b,A,$,F){var I=b.sel.ranges.slice(0);I[A]=$,qs(b,du(b.cm,I,b.sel.primIndex),F)}function cw(b,A,$,F){qs(b,af(A,$),F)}function fw(b,A,$){var F=b.history.done,I=ye(F);I&&I.ranges?(F[F.length-1]=A,c0(b,A,$)):qs(b,A,$)}function qs(b,A,$){c0(b,A,$),WC(b,b.sel,b.cm?b.cm.curOp.id:NaN,$)}function c0(b,A,$){(Pt(b,"beforeSelectionChange")||b.cm&&Pt(b.cm,"beforeSelectionChange"))&&(A=function(I,G,X){var J={ranges:G.ranges,update:function(le){this.ranges=[];for(var ue=0;ue<le.length;ue++)this.ranges[ue]=new Ai(xn(I,le[ue].anchor),xn(I,le[ue].head))},origin:X&&X.origin};return Tt(I,"beforeSelectionChange",I,J),I.cm&&Tt(I.cm,"beforeSelectionChange",I.cm,J),J.ranges!=G.ranges?du(I.cm,J.ranges,J.ranges.length-1):G}(b,A,$));var F=$&&$.bias||(Nt(A.primary().head,b.sel.primary().head)<0?-1:1);dw(b,pw(b,A,F,!0)),$&&$.scroll===!1||!b.cm||b.cm.getOption("readOnly")=="nocursor"||Dh(b.cm)}function dw(b,A){A.equals(b.sel)||(b.sel=A,b.cm&&(b.cm.curOp.updateInput=1,b.cm.curOp.selectionChanged=!0,Kt(b.cm)),ae(b,"cursorActivity",b))}function hw(b){dw(b,pw(b,b.sel,null,!1))}function pw(b,A,$,F){for(var I,G=0;G<A.ranges.length;G++){var X=A.ranges[G],J=A.ranges.length==b.sel.ranges.length&&b.sel.ranges[G],le=f0(b,X.anchor,J&&J.anchor,$,F),ue=X.head==X.anchor?le:f0(b,X.head,J&&J.head,$,F);(I||le!=X.anchor||ue!=X.head)&&(I||(I=A.ranges.slice(0,G)),I[G]=new Ai(le,ue))}return I?du(b.cm,I,A.primIndex):A}function Fh(b,A,$,F,I){var G=mt(b,A.line);if(G.markedSpans)for(var X=0;X<G.markedSpans.length;++X){var J=G.markedSpans[X],le=J.marker,ue="selectLeft"in le?!le.selectLeft:le.inclusiveLeft,_e="selectRight"in le?!le.selectRight:le.inclusiveRight;if((J.from==null||(ue?J.from<=A.ch:J.from<A.ch))&&(J.to==null||(_e?J.to>=A.ch:J.to>A.ch))){if(I&&(Tt(le,"beforeCursorEnter"),le.explicitlyCleared)){if(G.markedSpans){--X;continue}break}if(!le.atomic)continue;if($){var Ae=le.find(F<0?1:-1),qe=void 0;if((F<0?_e:ue)&&(Ae=gw(b,Ae,-F,Ae&&Ae.line==A.line?G:null)),Ae&&Ae.line==A.line&&(qe=Nt(Ae,$))&&(F<0?qe<0:qe>0))return Fh(b,Ae,A,F,I)}var Ne=le.find(F<0?-1:1);return(F<0?ue:_e)&&(Ne=gw(b,Ne,F,Ne.line==A.line?G:null)),Ne?Fh(b,Ne,A,F,I):null}}return A}function f0(b,A,$,F,I){var G=F||1,X=Fh(b,A,$,G,I)||!I&&Fh(b,A,$,G,!0)||Fh(b,A,$,-G,I)||!I&&Fh(b,A,$,-G,!0);return X||(b.cantEdit=!0,dt(b.first,0))}function gw(b,A,$,F){return $<0&&A.ch==0?A.line>b.first?xn(b,dt(A.line-1)):null:$>0&&A.ch==(F||mt(b,A.line)).text.length?A.line<b.first+b.size-1?dt(A.line+1,0):null:new dt(A.line,A.ch+$)}function mw(b){b.setSelection(dt(b.firstLine(),0),dt(b.lastLine()),ht)}function vw(b,A,$){var F={canceled:!1,from:A.from,to:A.to,text:A.text,origin:A.origin,cancel:function(){return F.canceled=!0}};return $&&(F.update=function(I,G,X,J){I&&(F.from=xn(b,I)),G&&(F.to=xn(b,G)),X&&(F.text=X),J!==void 0&&(F.origin=J)}),Tt(b,"beforeChange",b,F),b.cm&&Tt(b.cm,"beforeChange",b.cm,F),F.canceled?(b.cm&&(b.cm.curOp.updateInput=2),null):{from:F.from,to:F.to,text:F.text,origin:F.origin}}function $h(b,A,$){if(b.cm){if(!b.cm.curOp)return Cs(b.cm,$h)(b,A,$);if(b.cm.state.suppressEdits)return}if(!(Pt(b,"beforeChange")||b.cm&&Pt(b.cm,"beforeChange"))||(A=vw(b,A,!0))){var F=rs&&!$&&function(G,X,J){var le=null;if(G.iter(X.line,J.line+1,function(xt){if(xt.markedSpans)for(var bt=0;bt<xt.markedSpans.length;++bt){var Bt=xt.markedSpans[bt].marker;!Bt.readOnly||le&&Ue(le,Bt)!=-1||(le||(le=[])).push(Bt)}}),!le)return null;for(var ue=[{from:X,to:J}],_e=0;_e<le.length;++_e)for(var Ae=le[_e],qe=Ae.find(0),Ne=0;Ne<ue.length;++Ne){var tt=ue[Ne];if(!(Nt(tt.to,qe.from)<0||Nt(tt.from,qe.to)>0)){var nt=[Ne,1],Je=Nt(tt.from,qe.from),lt=Nt(tt.to,qe.to);(Je<0||!Ae.inclusiveLeft&&!Je)&&nt.push({from:tt.from,to:qe.from}),(lt>0||!Ae.inclusiveRight&&!lt)&&nt.push({from:qe.to,to:tt.to}),ue.splice.apply(ue,nt),Ne+=nt.length-3}}return ue}(b,A.from,A.to);if(F)for(var I=F.length-1;I>=0;--I)yw(b,{from:F[I].from,to:F[I].to,text:I?[""]:A.text,origin:A.origin});else yw(b,A)}}function yw(b,A){if(A.text.length!=1||A.text[0]!=""||Nt(A.from,A.to)!=0){var $=Ty(b,A);sw(b,A,$,b.cm?b.cm.curOp.id:NaN),og(b,A,$,da(b,A));var F=[];uf(b,function(I,G){G||Ue(F,I.history)!=-1||(_w(I.history,A),F.push(I.history)),og(I,A,null,da(I,A))})}}function d0(b,A,$){var F=b.cm&&b.cm.state.suppressEdits;if(!F||$){for(var I,G=b.history,X=b.sel,J=A=="undo"?G.done:G.undone,le=A=="undo"?G.undone:G.done,ue=0;ue<J.length&&(I=J[ue],$?!I.ranges||I.equals(b.sel):I.ranges);ue++);if(ue!=J.length){for(G.lastOrigin=G.lastSelOrigin=null;;){if(!(I=J.pop()).ranges){if(F)return void J.push(I);break}if(l0(I,le),$&&!I.equals(b.sel))return void qs(b,I,{clearRedo:!1});X=I}var _e=[];l0(X,le),le.push({changes:_e,generation:G.generation}),G.generation=I.generation||++G.maxGeneration;for(var Ae=Pt(b,"beforeChange")||b.cm&&Pt(b.cm,"beforeChange"),qe=function(nt){var Je=I.changes[nt];if(Je.origin=A,Ae&&!vw(b,Je,!1))return J.length=0,{};_e.push(Ry(b,Je));var lt=nt?Ty(b,Je):ye(J);og(b,Je,lt,lw(b,Je)),!nt&&b.cm&&b.cm.scrollIntoView({from:Je.from,to:lf(Je)});var xt=[];uf(b,function(bt,Bt){Bt||Ue(xt,bt.history)!=-1||(_w(bt.history,Je),xt.push(bt.history)),og(bt,Je,null,lw(bt,Je))})},Ne=I.changes.length-1;Ne>=0;--Ne){var tt=qe(Ne);if(tt)return tt.v}}}}function bw(b,A){if(A!=0&&(b.first+=A,b.sel=new cl(Se(b.sel.ranges,function(I){return new Ai(dt(I.anchor.line+A,I.anchor.ch),dt(I.head.line+A,I.head.ch))}),b.sel.primIndex),b.cm)){Ke(b.cm,b.first,b.first-A,A);for(var $=b.cm.display,F=$.viewFrom;F<$.viewTo;F++)st(b.cm,F,"gutter")}}function og(b,A,$,F){if(b.cm&&!b.cm.curOp)return Cs(b.cm,og)(b,A,$,F);if(A.to.line<b.first)bw(b,A.text.length-1-(A.to.line-A.from.line));else if(!(A.from.line>b.lastLine())){if(A.from.line<b.first){var I=A.text.length-1-(b.first-A.from.line);bw(b,I),A={from:dt(b.first,0),to:dt(A.to.line+I,A.to.ch),text:[ye(A.text)],origin:A.origin}}var G=b.lastLine();A.to.line>G&&(A={from:A.from,to:dt(G,mt(b,G).text.length),text:[A.text[0]],origin:A.origin}),A.removed=jn(b,A.from,A.to),$||($=Ty(b,A)),b.cm?function(X,J,le){var ue=X.doc,_e=X.display,Ae=J.from,qe=J.to,Ne=!1,tt=Ae.line;X.options.lineWrapping||(tt=gn(co(mt(ue,Ae.line))),ue.iter(tt,qe.line+1,function(bt){if(bt==_e.maxLine)return Ne=!0,!0})),ue.sel.contains(J.from,J.to)>-1&&Kt(X),Ly(ue,J,le,r0(X)),X.options.lineWrapping||(ue.iter(tt,Ae.line+J.text.length,function(bt){var Bt=ke(bt);Bt>_e.maxLineLength&&(_e.maxLine=bt,_e.maxLineLength=Bt,_e.maxLineChanged=!0,Ne=!1)}),Ne&&(X.curOp.updateMaxLine=!0)),function(bt,Bt){if(bt.modeFrontier=Math.min(bt.modeFrontier,Bt),!(bt.highlightFrontier<Bt-10)){for(var Ot=bt.first,jt=Bt-1;jt>Ot;jt--){var Yn=mt(bt,jt).stateAfter;if(Yn&&(!(Yn instanceof Io)||jt+Yn.lookAhead<Bt)){Ot=jt+1;break}}bt.highlightFrontier=Math.min(bt.highlightFrontier,Ot)}}(ue,Ae.line),ng(X,400);var nt=J.text.length-(qe.line-Ae.line)-1;J.full?Ke(X):Ae.line!=qe.line||J.text.length!=1||nw(X.doc,J)?Ke(X,Ae.line,qe.line+1,nt):st(X,Ae.line,"text");var Je=Pt(X,"changes"),lt=Pt(X,"change");if(lt||Je){var xt={from:Ae,to:qe,text:J.text,removed:J.removed,origin:J.origin};lt&&ae(X,"change",X,xt),Je&&(X.curOp.changeObjs||(X.curOp.changeObjs=[])).push(xt)}X.display.selForContextMenu=null}(b.cm,A,F):Ly(b,A,F),c0(b,$,ht),b.cantEdit&&f0(b,dt(b.firstLine(),0))&&(b.cantEdit=!1)}}function Mh(b,A,$,F,I){var G;F||(F=$),Nt(F,$)<0&&($=(G=[F,$])[0],F=G[1]),typeof A=="string"&&(A=b.splitLines(A)),$h(b,{from:$,to:F,text:A,origin:I})}function xw(b,A,$,F){$<b.line?b.line+=F:A<b.line&&(b.line=A,b.ch=0)}function ww(b,A,$,F){for(var I=0;I<b.length;++I){var G=b[I],X=!0;if(G.ranges){G.copied||((G=b[I]=G.deepCopy()).copied=!0);for(var J=0;J<G.ranges.length;J++)xw(G.ranges[J].anchor,A,$,F),xw(G.ranges[J].head,A,$,F)}else{for(var le=0;le<G.changes.length;++le){var ue=G.changes[le];if($<ue.from.line)ue.from=dt(ue.from.line+F,ue.from.ch),ue.to=dt(ue.to.line+F,ue.to.ch);else if(A<=ue.to.line){X=!1;break}}X||(b.splice(0,I+1),I=0)}}}function _w(b,A){var $=A.from.line,F=A.to.line,I=A.text.length-(F-$)-1;ww(b.done,$,F,I),ww(b.undone,$,F,I)}function sg(b,A,$,F){var I=A,G=A;return typeof A=="number"?G=mt(b,ri(b,A)):I=gn(A),I==null?null:(F(G,I)&&b.cm&&st(b.cm,I,$),G)}function ag(b){this.lines=b,this.parent=null;for(var A=0,$=0;$<b.length;++$)b[$].parent=this,A+=b[$].height;this.height=A}function lg(b){this.children=b;for(var A=0,$=0,F=0;F<b.length;++F){var I=b[F];A+=I.chunkSize(),$+=I.height,I.parent=this}this.size=A,this.height=$,this.parent=null}Ai.prototype.from=function(){return Ir(this.anchor,this.head)},Ai.prototype.to=function(){return Er(this.anchor,this.head)},Ai.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ag.prototype={chunkSize:function(){return this.lines.length},removeInner:function(b,A){for(var $=b,F=b+A;$<F;++$){var I=this.lines[$];this.height-=I.height,dn(I),ae(I,"delete")}this.lines.splice(b,A)},collapse:function(b){b.push.apply(b,this.lines)},insertInner:function(b,A,$){this.height+=$,this.lines=this.lines.slice(0,b).concat(A).concat(this.lines.slice(b));for(var F=0;F<A.length;++F)A[F].parent=this},iterN:function(b,A,$){for(var F=b+A;b<F;++b)if($(this.lines[b]))return!0}},lg.prototype={chunkSize:function(){return this.size},removeInner:function(b,A){this.size-=A;for(var $=0;$<this.children.length;++$){var F=this.children[$],I=F.chunkSize();if(b<I){var G=Math.min(A,I-b),X=F.height;if(F.removeInner(b,G),this.height-=X-F.height,I==G&&(this.children.splice($--,1),F.parent=null),(A-=G)==0)break;b=0}else b-=I}if(this.size-A<25&&(this.children.length>1||!(this.children[0]instanceof ag))){var J=[];this.collapse(J),this.children=[new ag(J)],this.children[0].parent=this}},collapse:function(b){for(var A=0;A<this.children.length;++A)this.children[A].collapse(b)},insertInner:function(b,A,$){this.size+=A.length,this.height+=$;for(var F=0;F<this.children.length;++F){var I=this.children[F],G=I.chunkSize();if(b<=G){if(I.insertInner(b,A,$),I.lines&&I.lines.length>50){for(var X=I.lines.length%25+25,J=X;J<I.lines.length;){var le=new ag(I.lines.slice(J,J+=25));I.height-=le.height,this.children.splice(++F,0,le),le.parent=this}I.lines=I.lines.slice(0,X),this.maybeSpill()}break}b-=G}},maybeSpill:function(){if(!(this.children.length<=10)){var b=this;do{var A=new lg(b.children.splice(b.children.length-5,5));if(b.parent){b.size-=A.size,b.height-=A.height;var $=Ue(b.parent.children,b);b.parent.children.splice($+1,0,A)}else{var F=new lg(b.children);F.parent=b,b.children=[F,A],b=F}A.parent=b.parent}while(b.children.length>10);b.parent.maybeSpill()}},iterN:function(b,A,$){for(var F=0;F<this.children.length;++F){var I=this.children[F],G=I.chunkSize();if(b<G){var X=Math.min(A,G-b);if(I.iterN(b,X,$))return!0;if((A-=X)==0)break;b=0}else b-=G}}};var ug=function(b,A,$){if($)for(var F in $)$.hasOwnProperty(F)&&(this[F]=$[F]);this.doc=b,this.node=A};function Ew(b,A,$){Pe(A)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&As(b,$)}ug.prototype.clear=function(){var b=this.doc.cm,A=this.line.widgets,$=this.line,F=gn($);if(F!=null&&A){for(var I=0;I<A.length;++I)A[I]==this&&A.splice(I--,1);A.length||($.widgets=null);var G=er(this);an($,Math.max(0,$.height-G)),b&&(Na(b,function(){Ew(b,$,-G),st(b,F,"widget")}),ae(b,"lineWidgetCleared",b,this,F))}},ug.prototype.changed=function(){var b=this,A=this.height,$=this.doc.cm,F=this.line;this.height=null;var I=er(this)-A;I&&(Uo(this.doc,F)||an(F,F.height+I),$&&Na($,function(){$.curOp.forceUpdate=!0,Ew($,F,I),ae($,"lineWidgetChanged",$,b,gn(F))}))},bn(ug);var Aw=0,cf=function(b,A){this.lines=[],this.type=A,this.doc=b,this.id=++Aw};function Oh(b,A,$,F,I){if(F&&F.shared)return function(Ae,qe,Ne,tt,nt){(tt=ve(tt)).shared=!1;var Je=[Oh(Ae,qe,Ne,tt,nt)],lt=Je[0],xt=tt.widgetNode;return uf(Ae,function(bt){xt&&(tt.widgetNode=xt.cloneNode(!0)),Je.push(Oh(bt,xn(bt,qe),xn(bt,Ne),tt,nt));for(var Bt=0;Bt<bt.linked.length;++Bt)if(bt.linked[Bt].isParent)return;lt=ye(Je)}),new cg(Je,lt)}(b,A,$,F,I);if(b.cm&&!b.cm.curOp)return Cs(b.cm,Oh)(b,A,$,F,I);var G=new cf(b,I),X=Nt(A,$);if(F&&ve(F,G,!1),X>0||X==0&&G.clearWhenEmpty!==!1)return G;if(G.replacedWith&&(G.collapsed=!0,G.widgetNode=W("span",[G.replacedWith],"CodeMirror-widget"),F.handleMouseEvents||G.widgetNode.setAttribute("cm-ignore-events","true"),F.insertLeft&&(G.widgetNode.insertLeft=!0)),G.collapsed){if(vo(b,A.line,A,$,G)||A.line!=$.line&&vo(b,$.line,A,$,G))throw new Error("Inserting collapsed marker partially overlapping an existing one");Es=!0}G.addToHistory&&sw(b,{from:A,to:$,origin:"markText"},b.sel,NaN);var J,le=A.line,ue=b.cm;if(b.iter(le,$.line+1,function(Ae){ue&&G.collapsed&&!ue.options.lineWrapping&&co(Ae)==ue.display.maxLine&&(J=!0),G.collapsed&&le!=A.line&&an(Ae,0),function(qe,Ne,tt){var nt=tt&&window.WeakSet&&(tt.markedSpans||(tt.markedSpans=new WeakSet));nt&&qe.markedSpans&&nt.has(qe.markedSpans)?qe.markedSpans.push(Ne):(qe.markedSpans=qe.markedSpans?qe.markedSpans.concat([Ne]):[Ne],nt&&nt.add(qe.markedSpans)),Ne.marker.attachLine(qe)}(Ae,new Vr(G,le==A.line?A.ch:null,le==$.line?$.ch:null),b.cm&&b.cm.curOp),++le}),G.collapsed&&b.iter(A.line,$.line+1,function(Ae){Uo(b,Ae)&&an(Ae,0)}),G.clearOnEnter&&We(G,"beforeCursorEnter",function(){return G.clear()}),G.readOnly&&(rs=!0,(b.history.done.length||b.history.undone.length)&&b.clearHistory()),G.collapsed&&(G.id=++Aw,G.atomic=!0),ue){if(J&&(ue.curOp.updateMaxLine=!0),G.collapsed)Ke(ue,A.line,$.line+1);else if(G.className||G.startStyle||G.endStyle||G.css||G.attributes||G.title)for(var _e=A.line;_e<=$.line;_e++)st(ue,_e,"text");G.atomic&&hw(ue.doc),ae(ue,"markerAdded",ue,G)}return G}cf.prototype.clear=function(){if(!this.explicitlyCleared){var b=this.doc.cm,A=b&&!b.curOp;if(A&&fd(b),Pt(this,"clear")){var $=this.find();$&&ae(this,"clear",$.from,$.to)}for(var F=null,I=null,G=0;G<this.lines.length;++G){var X=this.lines[G],J=Co(X.markedSpans,this);b&&!this.collapsed?st(b,gn(X),"text"):b&&(J.to!=null&&(I=gn(X)),J.from!=null&&(F=gn(X))),X.markedSpans=hs(X.markedSpans,J),J.from==null&&this.collapsed&&!Uo(this.doc,X)&&b&&an(X,sf(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(var le=0;le<this.lines.length;++le){var ue=co(this.lines[le]),_e=ke(ue);_e>b.display.maxLineLength&&(b.display.maxLine=ue,b.display.maxLineLength=_e,b.display.maxLineChanged=!0)}F!=null&&b&&this.collapsed&&Ke(b,F,I+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&hw(b.doc)),b&&ae(b,"markerCleared",b,this,F,I),A&&dd(b),this.parent&&this.parent.clear()}},cf.prototype.find=function(b,A){var $,F;b==null&&this.type=="bookmark"&&(b=1);for(var I=0;I<this.lines.length;++I){var G=this.lines[I],X=Co(G.markedSpans,this);if(X.from!=null&&($=dt(A?G:gn(G),X.from),b==-1))return $;if(X.to!=null&&(F=dt(A?G:gn(G),X.to),b==1))return F}return $&&{from:$,to:F}},cf.prototype.changed=function(){var b=this,A=this.find(-1,!0),$=this,F=this.doc.cm;A&&F&&Na(F,function(){var I=A.line,G=gn(A.line),X=vr(F,G);if(X&&(Il(X),F.curOp.selectionChanged=F.curOp.forceUpdate=!0),F.curOp.updateMaxLine=!0,!Uo($.doc,I)&&$.height!=null){var J=$.height;$.height=null;var le=er($)-J;le&&an(I,I.height+le)}ae(F,"markerChanged",F,b)})},cf.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;A.maybeHiddenMarkers&&Ue(A.maybeHiddenMarkers,this)!=-1||(A.maybeUnhiddenMarkers||(A.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)},cf.prototype.detachLine=function(b){if(this.lines.splice(Ue(this.lines,b),1),!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;(A.maybeHiddenMarkers||(A.maybeHiddenMarkers=[])).push(this)}},bn(cf);var cg=function(b,A){this.markers=b,this.primary=A;for(var $=0;$<b.length;++$)b[$].parent=this};function Cw(b){return b.findMarks(dt(b.first,0),b.clipPos(dt(b.lastLine())),function(A){return A.parent})}function YC(b){for(var A=function(F){var I=b[F],G=[I.primary.doc];uf(I.primary.doc,function(le){return G.push(le)});for(var X=0;X<I.markers.length;X++){var J=I.markers[X];Ue(G,J.doc)==-1&&(J.parent=null,I.markers.splice(X--,1))}},$=0;$<b.length;$++)A($)}cg.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var b=0;b<this.markers.length;++b)this.markers[b].clear();ae(this,"clear")}},cg.prototype.find=function(b,A){return this.primary.find(b,A)},bn(cg);var XC=0,ya=function(b,A,$,F,I){if(!(this instanceof ya))return new ya(b,A,$,F,I);$==null&&($=0),lg.call(this,[new ag([new Mt("",null)])]),this.first=$,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=$;var G=dt($,0);this.sel=af(G),this.history=new a0(null),this.id=++XC,this.modeOption=A,this.lineSep=F,this.direction=I=="rtl"?"rtl":"ltr",this.extend=!1,typeof b=="string"&&(b=this.splitLines(b)),Ly(this,{from:G,to:G,text:b}),qs(this,af(G),ht)};ya.prototype=U(lg.prototype,{constructor:ya,iter:function(b,A,$){$?this.iterN(b-this.first,A-b,$):this.iterN(this.first,this.first+this.size,b)},insert:function(b,A){for(var $=0,F=0;F<A.length;++F)$+=A[F].height;this.insertInner(b-this.first,A,$)},remove:function(b,A){this.removeInner(b-this.first,A)},getValue:function(b){var A=Vn(this,this.first,this.first+this.size);return b===!1?A:A.join(b||this.lineSeparator())},setValue:Ss(function(b){var A=dt(this.first,0),$=this.first+this.size-1;$h(this,{from:A,to:dt($,mt(this,$).text.length),text:this.splitLines(b),origin:"setValue",full:!0},!0),this.cm&&Qp(this.cm,0,0),qs(this,af(A),ht)}),replaceRange:function(b,A,$,F){Mh(this,b,A=xn(this,A),$=$?xn(this,$):A,F)},getRange:function(b,A,$){var F=jn(this,xn(this,b),xn(this,A));return $===!1?F:$===""?F.join(""):F.join($||this.lineSeparator())},getLine:function(b){var A=this.getLineHandle(b);return A&&A.text},getLineHandle:function(b){if(Wr(this,b))return mt(this,b)},getLineNumber:function(b){return gn(b)},getLineHandleVisualStart:function(b){return typeof b=="number"&&(b=mt(this,b)),co(b)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(b){return xn(this,b)},getCursor:function(b){var A=this.sel.primary();return b==null||b=="head"?A.head:b=="anchor"?A.anchor:b=="end"||b=="to"||b===!1?A.to():A.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ss(function(b,A,$){cw(this,xn(this,typeof b=="number"?dt(b,A||0):b),null,$)}),setSelection:Ss(function(b,A,$){cw(this,xn(this,b),xn(this,A||b),$)}),extendSelection:Ss(function(b,A,$){u0(this,xn(this,b),A&&xn(this,A),$)}),extendSelections:Ss(function(b,A){uw(this,Bi(this,b),A)}),extendSelectionsBy:Ss(function(b,A){uw(this,Bi(this,Se(this.sel.ranges,b)),A)}),setSelections:Ss(function(b,A,$){if(b.length){for(var F=[],I=0;I<b.length;I++)F[I]=new Ai(xn(this,b[I].anchor),xn(this,b[I].head||b[I].anchor));A==null&&(A=Math.min(b.length-1,this.sel.primIndex)),qs(this,du(this.cm,F,A),$)}}),addSelection:Ss(function(b,A,$){var F=this.sel.ranges.slice(0);F.push(new Ai(xn(this,b),xn(this,A||b))),qs(this,du(this.cm,F,F.length-1),$)}),getSelection:function(b){for(var A,$=this.sel.ranges,F=0;F<$.length;F++){var I=jn(this,$[F].from(),$[F].to());A=A?A.concat(I):I}return b===!1?A:A.join(b||this.lineSeparator())},getSelections:function(b){for(var A=[],$=this.sel.ranges,F=0;F<$.length;F++){var I=jn(this,$[F].from(),$[F].to());b!==!1&&(I=I.join(b||this.lineSeparator())),A[F]=I}return A},replaceSelection:function(b,A,$){for(var F=[],I=0;I<this.sel.ranges.length;I++)F[I]=b;this.replaceSelections(F,A,$||"+input")},replaceSelections:Ss(function(b,A,$){for(var F=[],I=this.sel,G=0;G<I.ranges.length;G++){var X=I.ranges[G];F[G]={from:X.from(),to:X.to(),text:this.splitLines(b[G]),origin:$}}for(var J=A&&A!="end"&&function(ue,_e,Ae){for(var qe=[],Ne=dt(ue.first,0),tt=Ne,nt=0;nt<_e.length;nt++){var Je=_e[nt],lt=tw(Je.from,Ne,tt),xt=tw(lf(Je),Ne,tt);if(Ne=Je.to,tt=xt,Ae=="around"){var bt=ue.sel.ranges[nt],Bt=Nt(bt.head,bt.anchor)<0;qe[nt]=new Ai(Bt?xt:lt,Bt?lt:xt)}else qe[nt]=new Ai(lt,lt)}return new cl(qe,ue.sel.primIndex)}(this,F,A),le=F.length-1;le>=0;le--)$h(this,F[le]);J?fw(this,J):this.cm&&Dh(this.cm)}),undo:Ss(function(){d0(this,"undo")}),redo:Ss(function(){d0(this,"redo")}),undoSelection:Ss(function(){d0(this,"undo",!0)}),redoSelection:Ss(function(){d0(this,"redo",!0)}),setExtending:function(b){this.extend=b},getExtending:function(){return this.extend},historySize:function(){for(var b=this.history,A=0,$=0,F=0;F<b.done.length;F++)b.done[F].ranges||++A;for(var I=0;I<b.undone.length;I++)b.undone[I].ranges||++$;return{undo:A,redo:$}},clearHistory:function(){var b=this;this.history=new a0(this.history),uf(this,function(A){return A.history=b.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(b){return b&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(b){return this.history.generation==(b||this.cleanGeneration)},getHistory:function(){return{done:Rh(this.history.done),undone:Rh(this.history.undone)}},setHistory:function(b){var A=this.history=new a0(this.history);A.done=Rh(b.done.slice(0),null,!0),A.undone=Rh(b.undone.slice(0),null,!0)},setGutterMarker:Ss(function(b,A,$){return sg(this,b,"gutter",function(F){var I=F.gutterMarkers||(F.gutterMarkers={});return I[A]=$,!$&&be(I)&&(F.gutterMarkers=null),!0})}),clearGutter:Ss(function(b){var A=this;this.iter(function($){$.gutterMarkers&&$.gutterMarkers[b]&&sg(A,$,"gutter",function(){return $.gutterMarkers[b]=null,be($.gutterMarkers)&&($.gutterMarkers=null),!0})})}),lineInfo:function(b){var A;if(typeof b=="number"){if(!Wr(this,b)||(A=b,!(b=mt(this,b))))return null}else if((A=gn(b))==null)return null;return{line:A,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,wrapClass:b.wrapClass,widgets:b.widgets}},addLineClass:Ss(function(b,A,$){return sg(this,b,A=="gutter"?"gutter":"class",function(F){var I=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass";if(F[I]){if(k($).test(F[I]))return!1;F[I]+=" "+$}else F[I]=$;return!0})}),removeLineClass:Ss(function(b,A,$){return sg(this,b,A=="gutter"?"gutter":"class",function(F){var I=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass",G=F[I];if(!G)return!1;if($==null)F[I]=null;else{var X=G.match(k($));if(!X)return!1;var J=X.index+X[0].length;F[I]=G.slice(0,X.index)+(X.index&&J!=G.length?" ":"")+G.slice(J)||null}return!0})}),addLineWidget:Ss(function(b,A,$){return function(F,I,G,X){var J=new ug(F,G,X),le=F.cm;return le&&J.noHScroll&&(le.display.alignWidgets=!0),sg(F,I,"widget",function(ue){var _e=ue.widgets||(ue.widgets=[]);if(J.insertAt==null?_e.push(J):_e.splice(Math.min(_e.length,Math.max(0,J.insertAt)),0,J),J.line=ue,le&&!Uo(F,ue)){var Ae=Pe(ue)<F.scrollTop;an(ue,ue.height+er(J)),Ae&&As(le,J.height),le.curOp.forceUpdate=!0}return!0}),le&&ae(le,"lineWidgetAdded",le,J,typeof I=="number"?I:gn(I)),J}(this,b,A,$)}),removeLineWidget:function(b){b.clear()},markText:function(b,A,$){return Oh(this,xn(this,b),xn(this,A),$,$&&$.type||"range")},setBookmark:function(b,A){var $={replacedWith:A&&(A.nodeType==null?A.widget:A),insertLeft:A&&A.insertLeft,clearWhenEmpty:!1,shared:A&&A.shared,handleMouseEvents:A&&A.handleMouseEvents};return Oh(this,b=xn(this,b),b,$,"bookmark")},findMarksAt:function(b){var A=[],$=mt(this,(b=xn(this,b)).line).markedSpans;if($)for(var F=0;F<$.length;++F){var I=$[F];(I.from==null||I.from<=b.ch)&&(I.to==null||I.to>=b.ch)&&A.push(I.marker.parent||I.marker)}return A},findMarks:function(b,A,$){b=xn(this,b),A=xn(this,A);var F=[],I=b.line;return this.iter(b.line,A.line+1,function(G){var X=G.markedSpans;if(X)for(var J=0;J<X.length;J++){var le=X[J];le.to!=null&&I==b.line&&b.ch>=le.to||le.from==null&&I!=b.line||le.from!=null&&I==A.line&&le.from>=A.ch||$&&!$(le.marker)||F.push(le.marker.parent||le.marker)}++I}),F},getAllMarks:function(){var b=[];return this.iter(function(A){var $=A.markedSpans;if($)for(var F=0;F<$.length;++F)$[F].from!=null&&b.push($[F].marker)}),b},posFromIndex:function(b){var A,$=this.first,F=this.lineSeparator().length;return this.iter(function(I){var G=I.text.length+F;if(G>b)return A=b,!0;b-=G,++$}),xn(this,dt($,A))},indexFromPos:function(b){var A=(b=xn(this,b)).ch;if(b.line<this.first||b.ch<0)return 0;var $=this.lineSeparator().length;return this.iter(this.first,b.line,function(F){A+=F.text.length+$}),A},copy:function(b){var A=new ya(Vn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return A.scrollTop=this.scrollTop,A.scrollLeft=this.scrollLeft,A.sel=this.sel,A.extend=!1,b&&(A.history.undoDepth=this.history.undoDepth,A.setHistory(this.getHistory())),A},linkedDoc:function(b){b||(b={});var A=this.first,$=this.first+this.size;b.from!=null&&b.from>A&&(A=b.from),b.to!=null&&b.to<$&&($=b.to);var F=new ya(Vn(this,A,$),b.mode||this.modeOption,A,this.lineSep,this.direction);return b.sharedHist&&(F.history=this.history),(this.linked||(this.linked=[])).push({doc:F,sharedHist:b.sharedHist}),F.linked=[{doc:this,isParent:!0,sharedHist:b.sharedHist}],function(I,G){for(var X=0;X<G.length;X++){var J=G[X],le=J.find(),ue=I.clipPos(le.from),_e=I.clipPos(le.to);if(Nt(ue,_e)){var Ae=Oh(I,ue,_e,J.primary,J.primary.type);J.markers.push(Ae),Ae.parent=J}}}(F,Cw(this)),F},unlinkDoc:function(b){if(b instanceof So&&(b=b.doc),this.linked){for(var A=0;A<this.linked.length;++A)if(this.linked[A].doc==b){this.linked.splice(A,1),b.unlinkDoc(this),YC(Cw(this));break}}if(b.history==this.history){var $=[b.id];uf(b,function(F){return $.push(F.id)},!0),b.history=new a0(null),b.history.done=Rh(this.history.done,$),b.history.undone=Rh(this.history.undone,$)}},iterLinkedDocs:function(b){uf(this,b)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(b){return this.lineSep?b.split(this.lineSep):_r(b)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ss(function(b){var A;b!="rtl"&&(b="ltr"),b!=this.direction&&(this.direction=b,this.iter(function($){return $.order=null}),this.cm&&Na(A=this.cm,function(){iw(A),Ke(A)}))})}),ya.prototype.eachLine=ya.prototype.iter;var Sw=0;function KC(b){var A=this;if(kw(A),!Ut(A,b)&&!yr(A.display,b)){_n(b),c&&(Sw=+new Date);var $=Gu(A,b,!0),F=b.dataTransfer.files;if($&&!A.isReadOnly())if(F&&F.length&&window.FileReader&&window.File)for(var I=F.length,G=Array(I),X=0,J=function(){++X==I&&Cs(A,function(){var Ne={from:$=xn(A.doc,$),to:$,text:A.doc.splitLines(G.filter(function(tt){return tt!=null}).join(A.doc.lineSeparator())),origin:"paste"};$h(A.doc,Ne),fw(A.doc,af(xn(A.doc,$),xn(A.doc,lf(Ne))))})()},le=function(Ne,tt){if(A.options.allowDropFileTypes&&Ue(A.options.allowDropFileTypes,Ne.type)==-1)J();else{var nt=new FileReader;nt.onerror=function(){return J()},nt.onload=function(){var Je=nt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Je)||(G[tt]=Je),J()},nt.readAsText(Ne)}},ue=0;ue<F.length;ue++)le(F[ue],ue);else{if(A.state.draggingText&&A.doc.sel.contains($)>-1)return A.state.draggingText(b),void setTimeout(function(){return A.display.input.focus()},20);try{var _e=b.dataTransfer.getData("Text");if(_e){var Ae;if(A.state.draggingText&&!A.state.draggingText.copy&&(Ae=A.listSelections()),c0(A.doc,af($,$)),Ae)for(var qe=0;qe<Ae.length;++qe)Mh(A.doc,"",Ae[qe].anchor,Ae[qe].head,"drag");A.replaceSelection(_e,"around","paste"),A.display.input.focus()}}catch{}}}}function kw(b){b.display.dragCursor&&(b.display.lineSpace.removeChild(b.display.dragCursor),b.display.dragCursor=null)}function Tw(b){if(document.getElementsByClassName){for(var A=document.getElementsByClassName("CodeMirror"),$=[],F=0;F<A.length;F++){var I=A[F].CodeMirror;I&&$.push(I)}$.length&&$[0].operation(function(){for(var G=0;G<$.length;G++)b($[G])})}}var Dw=!1;function ZC(){var b;Dw||(We(window,"resize",function(){b==null&&(b=setTimeout(function(){b=null,Tw(QC)},100))}),We(window,"blur",function(){return Tw(ss)}),Dw=!0)}function QC(b){var A=b.display;A.cachedCharWidth=A.cachedTextHeight=A.cachedPaddingH=null,A.scrollbarsClipped=!1,b.setSize()}for(var ff={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},fg=0;fg<10;fg++)ff[fg+48]=ff[fg+96]=String(fg);for(var h0=65;h0<=90;h0++)ff[h0]=String.fromCharCode(h0);for(var dg=1;dg<=12;dg++)ff[dg+111]=ff[dg+63235]="F"+dg;var _c={};function JC(b){var A,$,F,I,G=b.split(/-(?!$)/);b=G[G.length-1];for(var X=0;X<G.length-1;X++){var J=G[X];if(/^(cmd|meta|m)$/i.test(J))I=!0;else if(/^a(lt)?$/i.test(J))A=!0;else if(/^(c|ctrl|control)$/i.test(J))$=!0;else{if(!/^s(hift)?$/i.test(J))throw new Error("Unrecognized modifier name: "+J);F=!0}}return A&&(b="Alt-"+b),$&&(b="Ctrl-"+b),I&&(b="Cmd-"+b),F&&(b="Shift-"+b),b}function eS(b){var A={};for(var $ in b)if(b.hasOwnProperty($)){var F=b[$];if(/^(name|fallthrough|(de|at)tach)$/.test($))continue;if(F=="..."){delete b[$];continue}for(var I=Se($.split(" "),JC),G=0;G<I.length;G++){var X=void 0,J=void 0;G==I.length-1?(J=I.join(" "),X=F):(J=I.slice(0,G+1).join(" "),X="...");var le=A[J];if(le){if(le!=X)throw new Error("Inconsistent bindings for "+J)}else A[J]=X}delete b[$]}for(var ue in A)b[ue]=A[ue];return b}function Ih(b,A,$,F){var I=(A=p0(A)).call?A.call(b,F):A[b];if(I===!1)return"nothing";if(I==="...")return"multi";if(I!=null&&$(I))return"handled";if(A.fallthrough){if(Object.prototype.toString.call(A.fallthrough)!="[object Array]")return Ih(b,A.fallthrough,$,F);for(var G=0;G<A.fallthrough.length;G++){var X=Ih(b,A.fallthrough[G],$,F);if(X)return X}}}function Lw(b){var A=typeof b=="string"?b:ff[b.keyCode];return A=="Ctrl"||A=="Alt"||A=="Shift"||A=="Mod"}function Rw(b,A,$){var F=b;return A.altKey&&F!="Alt"&&(b="Alt-"+b),(P?A.metaKey:A.ctrlKey)&&F!="Ctrl"&&(b="Ctrl-"+b),(P?A.ctrlKey:A.metaKey)&&F!="Mod"&&(b="Cmd-"+b),!$&&A.shiftKey&&F!="Shift"&&(b="Shift-"+b),b}function Fw(b,A){if(y&&b.keyCode==34&&b.char)return!1;var $=ff[b.keyCode];return $!=null&&!b.altGraphKey&&(b.keyCode==3&&b.code&&($=b.code),Rw($,b,A))}function p0(b){return typeof b=="string"?_c[b]:b}function Nh(b,A){for(var $=b.doc.sel.ranges,F=[],I=0;I<$.length;I++){for(var G=A($[I]);F.length&&Nt(G.from,ye(F).to)<=0;){var X=F.pop();if(Nt(X.from,G.from)<0){G.from=X.from;break}}F.push(G)}Na(b,function(){for(var J=F.length-1;J>=0;J--)Mh(b.doc,"",F[J].from,F[J].to,"+delete");Dh(b)})}function My(b,A,$){var F=V(b.text,A+$,$);return F<0||F>b.text.length?null:F}function Oy(b,A,$){var F=My(b,A.ch,$);return F==null?null:new dt(A.line,F,$<0?"after":"before")}function Iy(b,A,$,F,I){if(b){A.doc.direction=="rtl"&&(I=-I);var G=Me($,A.doc.direction);if(G){var X,J=I<0?ye(G):G[0],le=I<0==(J.level==1)?"after":"before";if(J.level>0||A.doc.direction=="rtl"){var ue=Fr(A,$);X=I<0?$.text.length-1:0;var _e=Hn(A,ue,X).top;X=fe(function(Ae){return Hn(A,ue,Ae).top==_e},I<0==(J.level==1)?J.from:J.to-1,X),le=="before"&&(X=My($,X,1))}else X=I<0?J.to:J.from;return new dt(F,X,le)}}return new dt(F,I<0?$.text.length:0,I<0?"before":"after")}_c.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},_c.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},_c.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},_c.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},_c.default=T?_c.macDefault:_c.pcDefault;var hg={selectAll:mw,singleSelection:function(b){return b.setSelection(b.getCursor("anchor"),b.getCursor("head"),ht)},killLine:function(b){return Nh(b,function(A){if(A.empty()){var $=mt(b.doc,A.head.line).text.length;return A.head.ch==$&&A.head.line<b.lastLine()?{from:A.head,to:dt(A.head.line+1,0)}:{from:A.head,to:dt(A.head.line,$)}}return{from:A.from(),to:A.to()}})},deleteLine:function(b){return Nh(b,function(A){return{from:dt(A.from().line,0),to:xn(b.doc,dt(A.to().line+1,0))}})},delLineLeft:function(b){return Nh(b,function(A){return{from:dt(A.from().line,0),to:A.from()}})},delWrappedLineLeft:function(b){return Nh(b,function(A){var $=b.charCoords(A.head,"div").top+5;return{from:b.coordsChar({left:0,top:$},"div"),to:A.from()}})},delWrappedLineRight:function(b){return Nh(b,function(A){var $=b.charCoords(A.head,"div").top+5,F=b.coordsChar({left:b.display.lineDiv.offsetWidth+100,top:$},"div");return{from:A.from(),to:F}})},undo:function(b){return b.undo()},redo:function(b){return b.redo()},undoSelection:function(b){return b.undoSelection()},redoSelection:function(b){return b.redoSelection()},goDocStart:function(b){return b.extendSelection(dt(b.firstLine(),0))},goDocEnd:function(b){return b.extendSelection(dt(b.lastLine()))},goLineStart:function(b){return b.extendSelectionsBy(function(A){return $w(b,A.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(b){return b.extendSelectionsBy(function(A){return Mw(b,A.head)},{origin:"+move",bias:1})},goLineEnd:function(b){return b.extendSelectionsBy(function(A){return function($,F){var I=mt($.doc,F),G=function(X){for(var J;J=Hs(X);)X=J.find(1,!0).line;return X}(I);return G!=I&&(F=gn(G)),Iy(!0,$,I,F,-1)}(b,A.head.line)},{origin:"+move",bias:-1})},goLineRight:function(b){return b.extendSelectionsBy(function(A){var $=b.cursorCoords(A.head,"div").top+5;return b.coordsChar({left:b.display.lineDiv.offsetWidth+100,top:$},"div")},$t)},goLineLeft:function(b){return b.extendSelectionsBy(function(A){var $=b.cursorCoords(A.head,"div").top+5;return b.coordsChar({left:0,top:$},"div")},$t)},goLineLeftSmart:function(b){return b.extendSelectionsBy(function(A){var $=b.cursorCoords(A.head,"div").top+5,F=b.coordsChar({left:0,top:$},"div");return F.ch<b.getLine(F.line).search(/\S/)?Mw(b,A.head):F},$t)},goLineUp:function(b){return b.moveV(-1,"line")},goLineDown:function(b){return b.moveV(1,"line")},goPageUp:function(b){return b.moveV(-1,"page")},goPageDown:function(b){return b.moveV(1,"page")},goCharLeft:function(b){return b.moveH(-1,"char")},goCharRight:function(b){return b.moveH(1,"char")},goColumnLeft:function(b){return b.moveH(-1,"column")},goColumnRight:function(b){return b.moveH(1,"column")},goWordLeft:function(b){return b.moveH(-1,"word")},goGroupRight:function(b){return b.moveH(1,"group")},goGroupLeft:function(b){return b.moveH(-1,"group")},goWordRight:function(b){return b.moveH(1,"word")},delCharBefore:function(b){return b.deleteH(-1,"codepoint")},delCharAfter:function(b){return b.deleteH(1,"char")},delWordBefore:function(b){return b.deleteH(-1,"word")},delWordAfter:function(b){return b.deleteH(1,"word")},delGroupBefore:function(b){return b.deleteH(-1,"group")},delGroupAfter:function(b){return b.deleteH(1,"group")},indentAuto:function(b){return b.indentSelection("smart")},indentMore:function(b){return b.indentSelection("add")},indentLess:function(b){return b.indentSelection("subtract")},insertTab:function(b){return b.replaceSelection("	")},insertSoftTab:function(b){for(var A=[],$=b.listSelections(),F=b.options.tabSize,I=0;I<$.length;I++){var G=$[I].from(),X=Ee(b.getLine(G.line),G.ch,F);A.push(Te(F-X%F))}b.replaceSelections(A)},defaultTab:function(b){b.somethingSelected()?b.indentSelection("add"):b.execCommand("insertTab")},transposeChars:function(b){return Na(b,function(){for(var A=b.listSelections(),$=[],F=0;F<A.length;F++)if(A[F].empty()){var I=A[F].head,G=mt(b.doc,I.line).text;if(G){if(I.ch==G.length&&(I=new dt(I.line,I.ch-1)),I.ch>0)I=new dt(I.line,I.ch+1),b.replaceRange(G.charAt(I.ch-1)+G.charAt(I.ch-2),dt(I.line,I.ch-2),I,"+transpose");else if(I.line>b.doc.first){var X=mt(b.doc,I.line-1).text;X&&(I=new dt(I.line,1),b.replaceRange(G.charAt(0)+b.doc.lineSeparator()+X.charAt(X.length-1),dt(I.line-1,X.length-1),I,"+transpose"))}}$.push(new Ai(I,I))}b.setSelections($)})},newlineAndIndent:function(b){return Na(b,function(){for(var A=b.listSelections(),$=A.length-1;$>=0;$--)b.replaceRange(b.doc.lineSeparator(),A[$].anchor,A[$].head,"+input");A=b.listSelections();for(var F=0;F<A.length;F++)b.indentLine(A[F].from().line,null,!0);Dh(b)})},openLine:function(b){return b.replaceSelection(`
`,"start")},toggleOverwrite:function(b){return b.toggleOverwrite()}};function $w(b,A){var $=mt(b.doc,A),F=co($);return F!=$&&(A=gn(F)),Iy(!0,b,F,A,1)}function Mw(b,A){var $=$w(b,A.line),F=mt(b.doc,$.line),I=Me(F,b.doc.direction);if(!I||I[0].level==0){var G=Math.max($.ch,F.text.search(/\S/)),X=A.line==$.line&&A.ch<=G&&A.ch;return dt($.line,X?0:G,$.sticky)}return $}function g0(b,A,$){if(typeof A=="string"&&!(A=hg[A]))return!1;b.display.input.ensurePolled();var F=b.display.shift,I=!1;try{b.isReadOnly()&&(b.state.suppressEdits=!0),$&&(b.display.shift=!1),I=A(b)!=ft}finally{b.display.shift=F,b.state.suppressEdits=!1}return I}var tS=new Ve;function pg(b,A,$,F){var I=b.state.keySeq;if(I){if(Lw(A))return"handled";if(/\'$/.test(A)?b.state.keySeq=null:tS.set(50,function(){b.state.keySeq==I&&(b.state.keySeq=null,b.display.input.reset())}),Ow(b,I+" "+A,$,F))return!0}return Ow(b,A,$,F)}function Ow(b,A,$,F){var I=function(G,X,J){for(var le=0;le<G.state.keyMaps.length;le++){var ue=Ih(X,G.state.keyMaps[le],J,G);if(ue)return ue}return G.options.extraKeys&&Ih(X,G.options.extraKeys,J,G)||Ih(X,G.options.keyMap,J,G)}(b,A,F);return I=="multi"&&(b.state.keySeq=A),I=="handled"&&ae(b,"keyHandled",b,A,$),I!="handled"&&I!="multi"||(_n($),ar(b)),!!I}function Iw(b,A){var $=Fw(A,!0);return!!$&&(A.shiftKey&&!b.state.keySeq?pg(b,"Shift-"+$,A,function(F){return g0(b,F,!0)})||pg(b,$,A,function(F){if(typeof F=="string"?/^go[A-Z]/.test(F):F.motion)return g0(b,F)}):pg(b,$,A,function(F){return g0(b,F)}))}var Ny=null;function Nw(b){var A=this;if(!(b.target&&b.target!=A.display.input.getField()||(A.curOp.focus=ee(ge(A)),Ut(A,b)))){c&&d<11&&b.keyCode==27&&(b.returnValue=!1);var $=b.keyCode;A.display.shift=$==16||b.shiftKey;var F=Iw(A,b);y&&(Ny=F?$:null,F||$!=88||Or||!(T?b.metaKey:b.ctrlKey)||A.replaceSelection("",null,"cut")),a&&!T&&!F&&$==46&&b.shiftKey&&!b.ctrlKey&&document.execCommand&&document.execCommand("cut"),$!=18||/\bCodeMirror-crosshair\b/.test(A.display.lineDiv.className)||function(I){var G=I.display.lineDiv;function X(J){J.keyCode!=18&&J.altKey||(O(G,"CodeMirror-crosshair"),ut(document,"keyup",X),ut(document,"mouseover",X))}H(G,"CodeMirror-crosshair"),We(document,"keyup",X),We(document,"mouseover",X)}(A)}}function Pw(b){b.keyCode==16&&(this.doc.sel.shift=!1),Ut(this,b)}function Bw(b){var A=this;if(!(b.target&&b.target!=A.display.input.getField()||yr(A.display,b)||Ut(A,b)||b.ctrlKey&&!b.altKey||T&&b.metaKey)){var $=b.keyCode,F=b.charCode;if(y&&$==Ny)return Ny=null,void _n(b);if(!y||b.which&&!(b.which<10)||!Iw(A,b)){var I=String.fromCharCode(F??$);I!="\b"&&(function(G,X,J){return pg(G,"'"+J+"'",X,function(le){return g0(G,le,!0)})}(A,b,I)||A.display.input.onKeyPress(b))}}}var gg,mg,Py=function(b,A,$){this.time=b,this.pos=A,this.button=$};function zw(b){var A=this,$=A.display;if(!(Ut(A,b)||$.activeTouch&&$.input.supportsTouch())){if($.input.ensurePolled(),$.shift=b.shiftKey,yr($,b))p||($.scroller.draggable=!1,setTimeout(function(){return $.scroller.draggable=!0},100));else if(!By(A,b)){var F=Gu(A,b),I=Ao(b),G=F?function(X,J){var le=+new Date;return mg&&mg.compare(le,X,J)?(gg=mg=null,"triple"):gg&&gg.compare(le,X,J)?(mg=new Py(le,X,J),gg=null,"double"):(gg=new Py(le,X,J),mg=null,"single")}(F,I):"single";we(A).focus(),I==1&&A.state.selectingText&&A.state.selectingText(b),F&&function(X,J,le,ue,_e){var Ae="Click";return ue=="double"?Ae="Double"+Ae:ue=="triple"&&(Ae="Triple"+Ae),pg(X,Rw(Ae=(J==1?"Left":J==2?"Middle":"Right")+Ae,_e),_e,function(qe){if(typeof qe=="string"&&(qe=hg[qe]),!qe)return!1;var Ne=!1;try{X.isReadOnly()&&(X.state.suppressEdits=!0),Ne=qe(X,le)!=ft}finally{X.state.suppressEdits=!1}return Ne})}(A,I,F,G,b)||(I==1?F?function(X,J,le,ue){c?setTimeout($e(jr,X),0):X.curOp.focus=ee(ge(X));var _e,Ae=function(Ne,tt,nt){var Je=Ne.getOption("configureMouse"),lt=Je?Je(Ne,tt,nt):{};if(lt.unit==null){var xt=R?nt.shiftKey&&nt.metaKey:nt.altKey;lt.unit=xt?"rectangle":tt=="single"?"char":tt=="double"?"word":"line"}return(lt.extend==null||Ne.doc.extend)&&(lt.extend=Ne.doc.extend||nt.shiftKey),lt.addNew==null&&(lt.addNew=T?nt.metaKey:nt.ctrlKey),lt.moveOnDrag==null&&(lt.moveOnDrag=!(T?nt.altKey:nt.ctrlKey)),lt}(X,le,ue),qe=X.doc.sel;X.options.dragDrop&&$s&&!X.isReadOnly()&&le=="single"&&(_e=qe.contains(J))>-1&&(Nt((_e=qe.ranges[_e]).from(),J)<0||J.xRel>0)&&(Nt(_e.to(),J)>0||J.xRel<0)?function(Ne,tt,nt,Je){var lt=Ne.display,xt=!1,bt=Cs(Ne,function(jt){p&&(lt.scroller.draggable=!1),Ne.state.draggingText=!1,Ne.state.delayingBlurEvent&&(Ne.hasFocus()?Ne.state.delayingBlurEvent=!1:Gn(Ne)),ut(lt.wrapper.ownerDocument,"mouseup",bt),ut(lt.wrapper.ownerDocument,"mousemove",Bt),ut(lt.scroller,"dragstart",Ot),ut(lt.scroller,"drop",bt),xt||(_n(jt),Je.addNew||u0(Ne.doc,nt,null,null,Je.extend),p&&!v||c&&d==9?setTimeout(function(){lt.wrapper.ownerDocument.body.focus({preventScroll:!0}),lt.input.focus()},20):lt.input.focus())}),Bt=function(jt){xt=xt||Math.abs(tt.clientX-jt.clientX)+Math.abs(tt.clientY-jt.clientY)>=10},Ot=function(){return xt=!0};p&&(lt.scroller.draggable=!0),Ne.state.draggingText=bt,bt.copy=!Je.moveOnDrag,We(lt.wrapper.ownerDocument,"mouseup",bt),We(lt.wrapper.ownerDocument,"mousemove",Bt),We(lt.scroller,"dragstart",Ot),We(lt.scroller,"drop",bt),Ne.state.delayingBlurEvent=!0,setTimeout(function(){return lt.input.focus()},20),lt.scroller.dragDrop&&lt.scroller.dragDrop()}(X,ue,J,Ae):function(Ne,tt,nt,Je){c&&Gn(Ne);var lt=Ne.display,xt=Ne.doc;_n(tt);var bt,Bt,Ot=xt.sel,jt=Ot.ranges;if(Je.addNew&&!Je.extend?(Bt=xt.sel.contains(nt),bt=Bt>-1?jt[Bt]:new Ai(nt,nt)):(bt=xt.sel.primary(),Bt=xt.sel.primIndex),Je.unit=="rectangle")Je.addNew||(bt=new Ai(nt,nt)),nt=Gu(Ne,tt,!0,!0),Bt=-1;else{var Yn=Uw(Ne,nt,Je.unit);bt=Je.extend?Fy(bt,Yn.anchor,Yn.head,Je.extend):Yn}Je.addNew?Bt==-1?(Bt=jt.length,qs(xt,du(Ne,jt.concat([bt]),Bt),{scroll:!1,origin:"*mouse"})):jt.length>1&&jt[Bt].empty()&&Je.unit=="char"&&!Je.extend?(qs(xt,du(Ne,jt.slice(0,Bt).concat(jt.slice(Bt+1)),0),{scroll:!1,origin:"*mouse"}),Ot=xt.sel):$y(xt,Bt,bt,zt):(Bt=0,qs(xt,new cl([bt],0),zt),Ot=xt.sel);var ln=nt;function Dr(br){if(Nt(ln,br)!=0)if(ln=br,Je.unit=="rectangle"){for(var Si=[],gr=Ne.options.tabSize,Hr=Ee(mt(xt,nt.line).text,nt.ch,gr),Cr=Ee(mt(xt,br.line).text,br.ch,gr),ui=Math.min(Hr,Cr),ta=Math.max(Hr,Cr),ki=Math.min(nt.line,br.line),Gs=Math.min(Ne.lastLine(),Math.max(nt.line,br.line));ki<=Gs;ki++){var Ws=mt(xt,ki).text,yo=Tn(Ws,ui,gr);ui==ta?Si.push(new Ai(dt(ki,yo),dt(ki,yo))):Ws.length>yo&&Si.push(new Ai(dt(ki,yo),dt(ki,Tn(Ws,ta,gr))))}Si.length||Si.push(new Ai(nt,nt)),qs(xt,du(Ne,Ot.ranges.slice(0,Bt).concat(Si),Bt),{origin:"*mouse",scroll:!1}),Ne.scrollIntoView(br)}else{var na,Nl=bt,Ms=Uw(Ne,br,Je.unit),pu=Nl.anchor;Nt(Ms.anchor,pu)>0?(na=Ms.head,pu=Ir(Nl.from(),Ms.anchor)):(na=Ms.anchor,pu=Er(Nl.to(),Ms.head));var x0=Ot.ranges.slice(0);x0[Bt]=function(Qw,hd){var Pa=hd.anchor,df=hd.head,sS=mt(Qw.doc,Pa.line);if(Nt(Pa,df)==0&&Pa.sticky==df.sticky)return hd;var zh=Me(sS);if(!zh)return hd;var qy=me(zh,Pa.ch,Pa.sticky),yg=zh[qy];if(yg.from!=Pa.ch&&yg.to!=Pa.ch)return hd;var w0,bg=qy+(yg.from==Pa.ch==(yg.level!=1)?0:1);if(bg==0||bg==zh.length)return hd;if(df.line!=Pa.line)w0=(df.line-Pa.line)*(Qw.doc.direction=="ltr"?1:-1)>0;else{var Gy=me(zh,df.ch,df.sticky),Jw=Gy-qy||(df.ch-Pa.ch)*(yg.level==1?-1:1);w0=Gy==bg-1||Gy==bg?Jw<0:Jw>0}var Wy=zh[bg+(w0?-1:0)],e2=w0==(Wy.level==1),t2=e2?Wy.from:Wy.to,n2=e2?"after":"before";return Pa.ch==t2&&Pa.sticky==n2?hd:new Ai(new dt(Pa.line,t2,n2),df)}(Ne,new Ai(xn(xt,pu),na)),qs(xt,du(Ne,x0,Bt),zt)}}var Bn=lt.wrapper.getBoundingClientRect(),Jr=0;function Ci(br){var Si=++Jr,gr=Gu(Ne,br,!0,Je.unit=="rectangle");if(gr)if(Nt(gr,ln)!=0){Ne.curOp.focus=ee(ge(Ne)),Dr(gr);var Hr=va(lt,xt);(gr.line>=Hr.to||gr.line<Hr.from)&&setTimeout(Cs(Ne,function(){Jr==Si&&Ci(br)}),150)}else{var Cr=br.clientY<Bn.top?-20:br.clientY>Bn.bottom?20:0;Cr&&setTimeout(Cs(Ne,function(){Jr==Si&&(lt.scroller.scrollTop+=Cr,Ci(br))}),50)}}function ei(br){Ne.state.selectingText=!1,Jr=1/0,br&&(_n(br),lt.input.focus()),ut(lt.wrapper.ownerDocument,"mousemove",Nr),ut(lt.wrapper.ownerDocument,"mouseup",ti),xt.history.lastSelOrigin=null}var Nr=Cs(Ne,function(br){br.buttons!==0&&Ao(br)?Ci(br):ei(br)}),ti=Cs(Ne,ei);Ne.state.selectingText=ti,We(lt.wrapper.ownerDocument,"mousemove",Nr),We(lt.wrapper.ownerDocument,"mouseup",ti)}(X,ue,J,Ae)}(A,F,G,b):wr(b)==$.scroller&&_n(b):I==2?(F&&u0(A.doc,F),setTimeout(function(){return $.input.focus()},20)):I==3&&(S?A.display.input.onContextMenu(b):Gn(A)))}}}function Uw(b,A,$){if($=="char")return new Ai(A,A);if($=="word")return b.findWordAt(A);if($=="line")return new Ai(dt(A.line,0),xn(b.doc,dt(A.line+1,0)));var F=$(b,A);return new Ai(F.from,F.to)}function jw(b,A,$,F){var I,G;if(A.touches)I=A.touches[0].clientX,G=A.touches[0].clientY;else try{I=A.clientX,G=A.clientY}catch{return!1}if(I>=Math.floor(b.display.gutters.getBoundingClientRect().right))return!1;F&&_n(A);var X=b.display,J=X.lineDiv.getBoundingClientRect();if(G>J.bottom||!Pt(b,$))return Wn(A);G-=J.top-X.viewOffset;for(var le=0;le<b.display.gutterSpecs.length;++le){var ue=X.gutters.childNodes[le];if(ue&&ue.getBoundingClientRect().right>=I)return Tt(b,$,b,Qr(b.doc,G),b.display.gutterSpecs[le].className,A),Wn(A)}}function By(b,A){return jw(b,A,"gutterClick",!0)}function Hw(b,A){yr(b.display,A)||function($,F){return Pt($,"gutterContextMenu")?jw($,F,"gutterContextMenu",!1):!1}(b,A)||Ut(b,A,"contextmenu")||S||b.display.input.onContextMenu(A)}function qw(b){b.display.wrapper.className=b.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+b.options.theme.replace(/(^|\s)\s*/g," cm-s-"),id(b)}Py.prototype.compare=function(b,A,$){return this.time+400>b&&Nt(A,this.pos)==0&&$==this.button};var Ph={toString:function(){return"CodeMirror.Init"}},Gw={},m0={};function nS(b,A,$){if(!A!=!($&&$!=Ph)){var F=b.display.dragFunctions,I=A?We:ut;I(b.display.scroller,"dragstart",F.start),I(b.display.scroller,"dragenter",F.enter),I(b.display.scroller,"dragover",F.over),I(b.display.scroller,"dragleave",F.leave),I(b.display.scroller,"drop",F.drop)}}function rS(b){b.options.lineWrapping?(H(b.display.wrapper,"CodeMirror-wrap"),b.display.sizer.style.minWidth="",b.display.sizerWidth=null):(O(b.display.wrapper,"CodeMirror-wrap"),rt(b)),ld(b),Ke(b),id(b),setTimeout(function(){return Lh(b)},100)}function So(b,A){var $=this;if(!(this instanceof So))return new So(b,A);this.options=A=A?ve(A):{},ve(Gw,A,!1);var F=A.value;typeof F=="string"?F=new ya(F,A.mode,null,A.lineSeparator,A.direction):A.mode&&(F.modeOption=A.mode),this.doc=F;var I=new So.inputStyles[A.inputStyle](this),G=this.display=new qC(b,F,I,A);for(var X in G.wrapper.CodeMirror=this,qw(this),A.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vx(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ve,keySeq:null,specialChars:null},A.autofocus&&!w&&G.input.focus(),c&&d<11&&setTimeout(function(){return $.display.input.reset(!0)},20),function(le){var ue=le.display;We(ue.scroller,"mousedown",Cs(le,zw)),We(ue.scroller,"dblclick",c&&d<11?Cs(le,function(Je){if(!Ut(le,Je)){var lt=Gu(le,Je);if(lt&&!By(le,Je)&&!yr(le.display,Je)){_n(Je);var xt=le.findWordAt(lt);u0(le.doc,xt.anchor,xt.head)}}}):function(Je){return Ut(le,Je)||_n(Je)}),We(ue.scroller,"contextmenu",function(Je){return Hw(le,Je)}),We(ue.input.getField(),"contextmenu",function(Je){ue.scroller.contains(Je.target)||Hw(le,Je)});var _e,Ae={end:0};function qe(){ue.activeTouch&&(_e=setTimeout(function(){return ue.activeTouch=null},1e3),(Ae=ue.activeTouch).end=+new Date)}function Ne(Je){if(Je.touches.length!=1)return!1;var lt=Je.touches[0];return lt.radiusX<=1&&lt.radiusY<=1}function tt(Je,lt){if(lt.left==null)return!0;var xt=lt.left-Je.left,bt=lt.top-Je.top;return xt*xt+bt*bt>400}We(ue.scroller,"touchstart",function(Je){if(!Ut(le,Je)&&!Ne(Je)&&!By(le,Je)){ue.input.ensurePolled(),clearTimeout(_e);var lt=+new Date;ue.activeTouch={start:lt,moved:!1,prev:lt-Ae.end<=300?Ae:null},Je.touches.length==1&&(ue.activeTouch.left=Je.touches[0].pageX,ue.activeTouch.top=Je.touches[0].pageY)}}),We(ue.scroller,"touchmove",function(){ue.activeTouch&&(ue.activeTouch.moved=!0)}),We(ue.scroller,"touchend",function(Je){var lt=ue.activeTouch;if(lt&&!yr(ue,Je)&&lt.left!=null&&!lt.moved&&new Date-lt.start<300){var xt,bt=le.coordsChar(ue.activeTouch,"page");xt=!lt.prev||tt(lt,lt.prev)?new Ai(bt,bt):!lt.prev.prev||tt(lt,lt.prev.prev)?le.findWordAt(bt):new Ai(dt(bt.line,0),xn(le.doc,dt(bt.line+1,0))),le.setSelection(xt.anchor,xt.head),le.focus(),_n(Je)}qe()}),We(ue.scroller,"touchcancel",qe),We(ue.scroller,"scroll",function(){ue.scroller.clientHeight&&(Jp(le,ue.scroller.scrollTop),ud(le,ue.scroller.scrollLeft,!0),Tt(le,"scroll",le))}),We(ue.scroller,"mousewheel",function(Je){return Jx(le,Je)}),We(ue.scroller,"DOMMouseScroll",function(Je){return Jx(le,Je)}),We(ue.wrapper,"scroll",function(){return ue.wrapper.scrollTop=ue.wrapper.scrollLeft=0}),ue.dragFunctions={enter:function(Je){Ut(le,Je)||qn(Je)},over:function(Je){Ut(le,Je)||(function(lt,xt){var bt=Gu(lt,xt);if(bt){var Bt=document.createDocumentFragment();hn(lt,bt,Bt),lt.display.dragCursor||(lt.display.dragCursor=q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),lt.display.lineSpace.insertBefore(lt.display.dragCursor,lt.display.cursorDiv)),j(lt.display.dragCursor,Bt)}}(le,Je),qn(Je))},start:function(Je){return function(lt,xt){if(c&&(!lt.state.draggingText||+new Date-Sw<100))qn(xt);else if(!Ut(lt,xt)&&!yr(lt.display,xt)&&(xt.dataTransfer.setData("Text",lt.getSelection()),xt.dataTransfer.effectAllowed="copyMove",xt.dataTransfer.setDragImage&&!v)){var bt=q("img",null,null,"position: fixed; left: 0; top: 0;");bt.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(bt.width=bt.height=1,lt.display.wrapper.appendChild(bt),bt._top=bt.offsetTop),xt.dataTransfer.setDragImage(bt,0,0),y&&bt.parentNode.removeChild(bt)}}(le,Je)},drop:Cs(le,KC),leave:function(Je){Ut(le,Je)||kw(le)}};var nt=ue.input.getField();We(nt,"keyup",function(Je){return Pw.call(le,Je)}),We(nt,"keydown",Cs(le,Nw)),We(nt,"keypress",Cs(le,Bw)),We(nt,"focus",function(Je){return zi(le,Je)}),We(nt,"blur",function(Je){return ss(le,Je)})}(this),ZC(),fd(this),this.curOp.forceUpdate=!0,rw(this,F),A.autofocus&&!w||this.hasFocus()?setTimeout(function(){$.hasFocus()&&!$.state.focused&&zi($)},20):ss(this),m0)m0.hasOwnProperty(X)&&m0[X](this,A[X],Ph);Kx(this),A.finishInit&&A.finishInit(this);for(var J=0;J<zy.length;++J)zy[J](this);dd(this),p&&A.lineWrapping&&getComputedStyle(G.lineDiv).textRendering=="optimizelegibility"&&(G.lineDiv.style.textRendering="auto")}So.defaults=Gw,So.optionHandlers=m0;var zy=[];function vg(b,A,$,F){var I,G=b.doc;$==null&&($="add"),$=="smart"&&(G.mode.indent?I=Po(b,A).state:$="prev");var X=b.options.tabSize,J=mt(G,A),le=Ee(J.text,null,X);J.stateAfter&&(J.stateAfter=null);var ue,_e=J.text.match(/^\s*/)[0];if(F||/\S/.test(J.text)){if($=="smart"&&((ue=G.mode.indent(I,J.text.slice(_e.length),J.text))==ft||ue>150)){if(!F)return;$="prev"}}else ue=0,$="not";$=="prev"?ue=A>G.first?Ee(mt(G,A-1).text,null,X):0:$=="add"?ue=le+b.options.indentUnit:$=="subtract"?ue=le-b.options.indentUnit:typeof $=="number"&&(ue=le+$),ue=Math.max(0,ue);var Ae="",qe=0;if(b.options.indentWithTabs)for(var Ne=Math.floor(ue/X);Ne;--Ne)qe+=X,Ae+="	";if(qe<ue&&(Ae+=Te(ue-qe)),Ae!=_e)return Mh(G,Ae,dt(A,0),dt(A,_e.length),"+input"),J.stateAfter=null,!0;for(var tt=0;tt<G.sel.ranges.length;tt++){var nt=G.sel.ranges[tt];if(nt.head.line==A&&nt.head.ch<_e.length){var Je=dt(A,_e.length);$y(G,tt,new Ai(Je,Je));break}}}So.defineInitHook=function(b){return zy.push(b)};var hu=null;function v0(b){hu=b}function Uy(b,A,$,F,I){var G=b.doc;b.display.shift=!1,F||(F=G.sel);var X=+new Date-200,J=I=="paste"||b.state.pasteIncoming>X,le=_r(A),ue=null;if(J&&F.ranges.length>1)if(hu&&hu.text.join(`
`)==A){if(F.ranges.length%hu.text.length==0){ue=[];for(var _e=0;_e<hu.text.length;_e++)ue.push(G.splitLines(hu.text[_e]))}}else le.length==F.ranges.length&&b.options.pasteLinesPerSelection&&(ue=Se(le,function(lt){return[lt]}));for(var Ae=b.curOp.updateInput,qe=F.ranges.length-1;qe>=0;qe--){var Ne=F.ranges[qe],tt=Ne.from(),nt=Ne.to();Ne.empty()&&($&&$>0?tt=dt(tt.line,tt.ch-$):b.state.overwrite&&!J?nt=dt(nt.line,Math.min(mt(G,nt.line).text.length,nt.ch+ye(le).length)):J&&hu&&hu.lineWise&&hu.text.join(`
`)==le.join(`
`)&&(tt=nt=dt(tt.line,0)));var Je={from:tt,to:nt,text:ue?ue[qe%ue.length]:le,origin:I||(J?"paste":b.state.cutIncoming>X?"cut":"+input")};$h(b.doc,Je),ae(b,"inputRead",b,Je)}A&&!J&&Vw(b,A),Dh(b),b.curOp.updateInput<2&&(b.curOp.updateInput=Ae),b.curOp.typing=!0,b.state.pasteIncoming=b.state.cutIncoming=-1}function Ww(b,A){var $=b.clipboardData&&b.clipboardData.getData("Text");if($)return b.preventDefault(),A.isReadOnly()||A.options.disableInput||!A.hasFocus()||Na(A,function(){return Uy(A,$,0,null,"paste")}),!0}function Vw(b,A){if(b.options.electricChars&&b.options.smartIndent)for(var $=b.doc.sel,F=$.ranges.length-1;F>=0;F--){var I=$.ranges[F];if(!(I.head.ch>100||F&&$.ranges[F-1].head.line==I.head.line)){var G=b.getModeAt(I.head),X=!1;if(G.electricChars){for(var J=0;J<G.electricChars.length;J++)if(A.indexOf(G.electricChars.charAt(J))>-1){X=vg(b,I.head.line,"smart");break}}else G.electricInput&&G.electricInput.test(mt(b.doc,I.head.line).text.slice(0,I.head.ch))&&(X=vg(b,I.head.line,"smart"));X&&ae(b,"electricInput",b,I.head.line)}}}function Yw(b){for(var A=[],$=[],F=0;F<b.doc.sel.ranges.length;F++){var I=b.doc.sel.ranges[F].head.line,G={anchor:dt(I,0),head:dt(I+1,0)};$.push(G),A.push(b.getRange(G.anchor,G.head))}return{text:A,ranges:$}}function jy(b,A,$,F){b.setAttribute("autocorrect",$?"on":"off"),b.setAttribute("autocapitalize",F?"on":"off"),b.setAttribute("spellcheck",!!A)}function Xw(){var b=q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),A=q("div",[b],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return p?b.style.width="1000px":b.setAttribute("wrap","off"),E&&(b.style.border="1px solid black"),A}function Hy(b,A,$,F,I){var G=A,X=$,J=mt(b,A.line),le=I&&b.direction=="rtl"?-$:$;function ue(lt){var xt,bt;if(F=="codepoint"){var Bt=J.text.charCodeAt(A.ch+($>0?0:-1));if(isNaN(Bt))xt=null;else{var Ot=$>0?Bt>=55296&&Bt<56320:Bt>=56320&&Bt<57343;xt=new dt(A.line,Math.max(0,Math.min(J.text.length,A.ch+$*(Ot?2:1))),-$)}}else xt=I?function(jt,Yn,ln,Dr){var Bn=Me(Yn,jt.doc.direction);if(!Bn)return Oy(Yn,ln,Dr);ln.ch>=Yn.text.length?(ln.ch=Yn.text.length,ln.sticky="before"):ln.ch<=0&&(ln.ch=0,ln.sticky="after");var Jr=me(Bn,ln.ch,ln.sticky),Ci=Bn[Jr];if(jt.doc.direction=="ltr"&&Ci.level%2==0&&(Dr>0?Ci.to>ln.ch:Ci.from<ln.ch))return Oy(Yn,ln,Dr);var ei,Nr=function(ki,Gs){return My(Yn,ki instanceof dt?ki.ch:ki,Gs)},ti=function(ki){return jt.options.lineWrapping?(ei=ei||Fr(jt,Yn),Kp(jt,Yn,ei,ki)):{begin:0,end:Yn.text.length}},br=ti(ln.sticky=="before"?Nr(ln,-1):ln.ch);if(jt.doc.direction=="rtl"||Ci.level==1){var Si=Ci.level==1==Dr<0,gr=Nr(ln,Si?1:-1);if(gr!=null&&(Si?gr<=Ci.to&&gr<=br.end:gr>=Ci.from&&gr>=br.begin)){var Hr=Si?"before":"after";return new dt(ln.line,gr,Hr)}}var Cr=function(ki,Gs,Ws){for(var yo=function(pu,x0){return x0?new dt(ln.line,Nr(pu,1),"before"):new dt(ln.line,pu,"after")};ki>=0&&ki<Bn.length;ki+=Gs){var na=Bn[ki],Nl=Gs>0==(na.level!=1),Ms=Nl?Ws.begin:Nr(Ws.end,-1);if(na.from<=Ms&&Ms<na.to||(Ms=Nl?na.from:Nr(na.to,-1),Ws.begin<=Ms&&Ms<Ws.end))return yo(Ms,Nl)}},ui=Cr(Jr+Dr,Dr,br);if(ui)return ui;var ta=Dr>0?br.end:Nr(br.begin,-1);return ta==null||Dr>0&&ta==Yn.text.length||!(ui=Cr(Dr>0?0:Bn.length-1,Dr,ti(ta)))?null:ui}(b.cm,J,A,$):Oy(J,A,$);if(xt==null){if(lt||(bt=A.line+le)<b.first||bt>=b.first+b.size||(A=new dt(bt,A.ch,A.sticky),!(J=mt(b,bt))))return!1;A=Iy(I,b.cm,J,A.line,le)}else A=xt;return!0}if(F=="char"||F=="codepoint")ue();else if(F=="column")ue(!0);else if(F=="word"||F=="group")for(var _e=null,Ae=F=="group",qe=b.cm&&b.cm.getHelper(A,"wordChars"),Ne=!0;!($<0)||ue(!Ne);Ne=!1){var tt=J.text.charAt(A.ch)||`
`,nt=ie(tt,qe)?"w":Ae&&tt==`
`?"n":!Ae||/\s/.test(tt)?null:"p";if(!Ae||Ne||nt||(nt="s"),_e&&_e!=nt){$<0&&($=1,ue(),A.sticky="after");break}if(nt&&(_e=nt),$>0&&!ue(!Ne))break}var Je=f0(b,A,G,X,!0);return Rr(G,Je)&&(Je.hitSide=!0),Je}function Kw(b,A,$,F){var I,G,X=b.doc,J=A.left;if(F=="page"){var le=Math.min(b.display.wrapper.clientHeight,we(b).innerHeight||X(b).documentElement.clientHeight),ue=Math.max(le-.5*sf(b.display),3);I=($>0?A.bottom:A.top)+$*ue}else F=="line"&&(I=$>0?A.bottom+3:A.top-3);for(;(G=od(b,J,I)).outside;){if($<0?I<=0:I>=X.height){G.hitSide=!0;break}I+=5*$}return G}var Ui=function(b){this.cm=b,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ve,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Zw(b,A){var $=vr(b,A.line);if(!$||$.hidden)return null;var F=mt(b.doc,A.line),I=Rt($,F,A.line),G=Me(F,b.doc.direction),X="left";G&&(X=me(G,A.ch)%2?"right":"left");var J=Ch(I.map,A.ch,X);return J.offset=J.collapse=="right"?J.end:J.start,J}function Bh(b,A){return A&&(b.bad=!0),b}function y0(b,A,$){var F;if(A==b.display.lineDiv){if(!(F=b.display.lineDiv.childNodes[$]))return Bh(b.clipPos(dt(b.display.viewTo-1)),!0);A=null,$=0}else for(F=A;;F=F.parentNode){if(!F||F==b.display.lineDiv)return null;if(F.parentNode&&F.parentNode==b.display.lineDiv)break}for(var I=0;I<b.display.view.length;I++){var G=b.display.view[I];if(G.node==F)return iS(G,A,$)}}function iS(b,A,$){var F=b.text.firstChild,I=!1;if(!A||!Q(F,A))return Bh(dt(gn(b.line),0),!0);if(A==F&&(I=!0,A=F.childNodes[$],$=0,!A)){var G=b.rest?ye(b.rest):b.line;return Bh(dt(gn(G),G.text.length),I)}var X=A.nodeType==3?A:null,J=A;for(X||A.childNodes.length!=1||A.firstChild.nodeType!=3||(X=A.firstChild,$&&($=X.nodeValue.length));J.parentNode!=F;)J=J.parentNode;var le=b.measure,ue=le.maps;function _e(Je,lt,xt){for(var bt=-1;bt<(ue?ue.length:0);bt++)for(var Bt=bt<0?le.map:ue[bt],Ot=0;Ot<Bt.length;Ot+=3){var jt=Bt[Ot+2];if(jt==Je||jt==lt){var Yn=gn(bt<0?b.line:b.rest[bt]),ln=Bt[Ot]+xt;return(xt<0||jt!=Je)&&(ln=Bt[Ot+(xt?1:0)]),dt(Yn,ln)}}}var Ae=_e(X,J,$);if(Ae)return Bh(Ae,I);for(var qe=J.nextSibling,Ne=X?X.nodeValue.length-$:0;qe;qe=qe.nextSibling){if(Ae=_e(qe,qe.firstChild,0))return Bh(dt(Ae.line,Ae.ch-Ne),I);Ne+=qe.textContent.length}for(var tt=J.previousSibling,nt=$;tt;tt=tt.previousSibling){if(Ae=_e(tt,tt.firstChild,-1))return Bh(dt(Ae.line,Ae.ch+nt),I);nt+=tt.textContent.length}}Ui.prototype.init=function(b){var A=this,$=this,F=$.cm,I=$.div=b.lineDiv;function G(J){for(var le=J.target;le;le=le.parentNode){if(le==I)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(le.className))break}return!1}function X(J){if(G(J)&&!Ut(F,J)){if(F.somethingSelected())v0({lineWise:!1,text:F.getSelections()}),J.type=="cut"&&F.replaceSelection("",null,"cut");else{if(!F.options.lineWiseCopyCut)return;var le=Yw(F);v0({lineWise:!0,text:le.text}),J.type=="cut"&&F.operation(function(){F.setSelections(le.ranges,0,ht),F.replaceSelection("",null,"cut")})}if(J.clipboardData){J.clipboardData.clearData();var ue=hu.text.join(`
`);if(J.clipboardData.setData("Text",ue),J.clipboardData.getData("Text")==ue)return void J.preventDefault()}var _e=Xw(),Ae=_e.firstChild;jy(Ae),F.display.lineSpace.insertBefore(_e,F.display.lineSpace.firstChild),Ae.value=hu.text.join(`
`);var qe=ee(I.ownerDocument);ne(Ae),setTimeout(function(){F.display.lineSpace.removeChild(_e),qe.focus(),qe==I&&$.showPrimarySelection()},50)}}I.contentEditable=!0,jy(I,F.options.spellcheck,F.options.autocorrect,F.options.autocapitalize),We(I,"paste",function(J){!G(J)||Ut(F,J)||Ww(J,F)||d<=11&&setTimeout(Cs(F,function(){return A.updateFromDOM()}),20)}),We(I,"compositionstart",function(J){A.composing={data:J.data,done:!1}}),We(I,"compositionupdate",function(J){A.composing||(A.composing={data:J.data,done:!1})}),We(I,"compositionend",function(J){A.composing&&(J.data!=A.composing.data&&A.readFromDOMSoon(),A.composing.done=!0)}),We(I,"touchstart",function(){return $.forceCompositionEnd()}),We(I,"input",function(){A.composing||A.readFromDOMSoon()}),We(I,"copy",X),We(I,"cut",X)},Ui.prototype.screenReaderLabelChanged=function(b){b?this.div.setAttribute("aria-label",b):this.div.removeAttribute("aria-label")},Ui.prototype.prepareSelection=function(){var b=kn(this.cm,!1);return b.focus=ee(this.div.ownerDocument)==this.div,b},Ui.prototype.showSelection=function(b,A){b&&this.cm.display.view.length&&((b.focus||A)&&this.showPrimarySelection(),this.showMultipleSelections(b))},Ui.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ui.prototype.showPrimarySelection=function(){var b=this.getSelection(),A=this.cm,$=A.doc.sel.primary(),F=$.from(),I=$.to();if(A.display.viewTo==A.display.viewFrom||F.line>=A.display.viewTo||I.line<A.display.viewFrom)b.removeAllRanges();else{var G=y0(A,b.anchorNode,b.anchorOffset),X=y0(A,b.focusNode,b.focusOffset);if(!G||G.bad||!X||X.bad||Nt(Ir(G,X),F)!=0||Nt(Er(G,X),I)!=0){var J=A.display.view,le=F.line>=A.display.viewFrom&&Zw(A,F)||{node:J[0].measure.map[2],offset:0},ue=I.line<A.display.viewTo&&Zw(A,I);if(!ue){var _e=J[J.length-1].measure,Ae=_e.maps?_e.maps[_e.maps.length-1]:_e.map;ue={node:Ae[Ae.length-1],offset:Ae[Ae.length-2]-Ae[Ae.length-3]}}if(le&&ue){var qe,Ne=b.rangeCount&&b.getRangeAt(0);try{qe=D(le.node,le.offset,ue.offset,ue.node)}catch{}qe&&(!a&&A.state.focused?(b.collapse(le.node,le.offset),qe.collapsed||(b.removeAllRanges(),b.addRange(qe))):(b.removeAllRanges(),b.addRange(qe)),Ne&&b.anchorNode==null?b.addRange(Ne):a&&this.startGracePeriod()),this.rememberSelection()}else b.removeAllRanges()}}},Ui.prototype.startGracePeriod=function(){var b=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){b.gracePeriod=!1,b.selectionChanged()&&b.cm.operation(function(){return b.cm.curOp.selectionChanged=!0})},20)},Ui.prototype.showMultipleSelections=function(b){j(this.cm.display.cursorDiv,b.cursors),j(this.cm.display.selectionDiv,b.selection)},Ui.prototype.rememberSelection=function(){var b=this.getSelection();this.lastAnchorNode=b.anchorNode,this.lastAnchorOffset=b.anchorOffset,this.lastFocusNode=b.focusNode,this.lastFocusOffset=b.focusOffset},Ui.prototype.selectionInEditor=function(){var b=this.getSelection();if(!b.rangeCount)return!1;var A=b.getRangeAt(0).commonAncestorContainer;return Q(this.div,A)},Ui.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&ee(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ui.prototype.blur=function(){this.div.blur()},Ui.prototype.getField=function(){return this.div},Ui.prototype.supportsTouch=function(){return!0},Ui.prototype.receivedFocus=function(){var b=this,A=this;this.selectionInEditor()?setTimeout(function(){return b.pollSelection()},20):Na(this.cm,function(){return A.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function $(){A.cm.state.focused&&(A.pollSelection(),A.polling.set(A.cm.options.pollInterval,$))})},Ui.prototype.selectionChanged=function(){var b=this.getSelection();return b.anchorNode!=this.lastAnchorNode||b.anchorOffset!=this.lastAnchorOffset||b.focusNode!=this.lastFocusNode||b.focusOffset!=this.lastFocusOffset},Ui.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var b=this.getSelection(),A=this.cm;if(C&&g&&this.cm.display.gutterSpecs.length&&function(I){for(var G=I;G;G=G.parentNode)if(/CodeMirror-gutter-wrapper/.test(G.className))return!0;return!1}(b.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var $=y0(A,b.anchorNode,b.anchorOffset),F=y0(A,b.focusNode,b.focusOffset);$&&F&&Na(A,function(){qs(A.doc,af($,F),ht),($.bad||F.bad)&&(A.curOp.selectionChanged=!0)})}}},Ui.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var b,A,$,F=this.cm,I=F.display,G=F.doc.sel.primary(),X=G.from(),J=G.to();if(X.ch==0&&X.line>F.firstLine()&&(X=dt(X.line-1,mt(F.doc,X.line-1).length)),J.ch==mt(F.doc,J.line).text.length&&J.line<F.lastLine()&&(J=dt(J.line+1,0)),X.line<I.viewFrom||J.line>I.viewTo-1)return!1;X.line==I.viewFrom||(b=De(F,X.line))==0?(A=gn(I.view[0].line),$=I.view[0].node):(A=gn(I.view[b].line),$=I.view[b-1].node.nextSibling);var le,ue,_e=De(F,J.line);if(_e==I.view.length-1?(le=I.viewTo-1,ue=I.lineDiv.lastChild):(le=gn(I.view[_e+1].line)-1,ue=I.view[_e+1].node.previousSibling),!$)return!1;for(var Ae=F.doc.splitLines(function(Yn,ln,Dr,Bn,Jr){var Ci="",ei=!1,Nr=Yn.doc.lineSeparator(),ti=!1;function br(Cr){return function(ui){return ui.id==Cr}}function Si(){ei&&(Ci+=Nr,ti&&(Ci+=Nr),ei=ti=!1)}function gr(Cr){Cr&&(Si(),Ci+=Cr)}function Hr(Cr){if(Cr.nodeType==1){var ui=Cr.getAttribute("cm-text");if(ui)return void gr(ui);var ta,ki=Cr.getAttribute("cm-marker");if(ki){var Gs=Yn.findMarks(dt(Bn,0),dt(Jr+1,0),br(+ki));return void(Gs.length&&(ta=Gs[0].find(0))&&gr(jn(Yn.doc,ta.from,ta.to).join(Nr)))}if(Cr.getAttribute("contenteditable")=="false")return;var Ws=/^(pre|div|p|li|table|br)$/i.test(Cr.nodeName);if(!/^br$/i.test(Cr.nodeName)&&Cr.textContent.length==0)return;Ws&&Si();for(var yo=0;yo<Cr.childNodes.length;yo++)Hr(Cr.childNodes[yo]);/^(pre|p)$/i.test(Cr.nodeName)&&(ti=!0),Ws&&(ei=!0)}else Cr.nodeType==3&&gr(Cr.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Hr(ln),ln!=Dr;)ln=ln.nextSibling,ti=!1;return Ci}(F,$,ue,A,le)),qe=jn(F.doc,dt(A,0),dt(le,mt(F.doc,le).text.length));Ae.length>1&&qe.length>1;)if(ye(Ae)==ye(qe))Ae.pop(),qe.pop(),le--;else{if(Ae[0]!=qe[0])break;Ae.shift(),qe.shift(),A++}for(var Ne=0,tt=0,nt=Ae[0],Je=qe[0],lt=Math.min(nt.length,Je.length);Ne<lt&&nt.charCodeAt(Ne)==Je.charCodeAt(Ne);)++Ne;for(var xt=ye(Ae),bt=ye(qe),Bt=Math.min(xt.length-(Ae.length==1?Ne:0),bt.length-(qe.length==1?Ne:0));tt<Bt&&xt.charCodeAt(xt.length-tt-1)==bt.charCodeAt(bt.length-tt-1);)++tt;if(Ae.length==1&&qe.length==1&&A==X.line)for(;Ne&&Ne>X.ch&&xt.charCodeAt(xt.length-tt-1)==bt.charCodeAt(bt.length-tt-1);)Ne--,tt++;Ae[Ae.length-1]=xt.slice(0,xt.length-tt).replace(/^\u200b+/,""),Ae[0]=Ae[0].slice(Ne).replace(/\u200b+$/,"");var Ot=dt(A,Ne),jt=dt(le,qe.length?ye(qe).length-tt:0);return Ae.length>1||Ae[0]||Nt(Ot,jt)?(Mh(F.doc,Ae,Ot,jt,"+input"),!0):void 0},Ui.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ui.prototype.reset=function(){this.forceCompositionEnd()},Ui.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ui.prototype.readFromDOMSoon=function(){var b=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(b.readDOMTimeout=null,b.composing){if(!b.composing.done)return;b.composing=null}b.updateFromDOM()},80))},Ui.prototype.updateFromDOM=function(){var b=this;!this.cm.isReadOnly()&&this.pollContent()||Na(this.cm,function(){return Ke(b.cm)})},Ui.prototype.setUneditable=function(b){b.contentEditable="false"},Ui.prototype.onKeyPress=function(b){b.charCode==0||this.composing||(b.preventDefault(),this.cm.isReadOnly()||Cs(this.cm,Uy)(this.cm,String.fromCharCode(b.charCode==null?b.keyCode:b.charCode),0))},Ui.prototype.readOnlyChanged=function(b){this.div.contentEditable=String(b!="nocursor")},Ui.prototype.onContextMenu=function(){},Ui.prototype.resetPosition=function(){},Ui.prototype.needsContentAttribute=!0;var Wo=function(b){this.cm=b,this.prevInput="",this.pollingFast=!1,this.polling=new Ve,this.hasSelection=!1,this.composing=null,this.resetting=!1};Wo.prototype.init=function(b){var A=this,$=this,F=this.cm;this.createField(b);var I=this.textarea;function G(X){if(!Ut(F,X)){if(F.somethingSelected())v0({lineWise:!1,text:F.getSelections()});else{if(!F.options.lineWiseCopyCut)return;var J=Yw(F);v0({lineWise:!0,text:J.text}),X.type=="cut"?F.setSelections(J.ranges,null,ht):($.prevInput="",I.value=J.text.join(`
`),ne(I))}X.type=="cut"&&(F.state.cutIncoming=+new Date)}}b.wrapper.insertBefore(this.wrapper,b.wrapper.firstChild),E&&(I.style.width="0px"),We(I,"input",function(){c&&d>=9&&A.hasSelection&&(A.hasSelection=null),$.poll()}),We(I,"paste",function(X){Ut(F,X)||Ww(X,F)||(F.state.pasteIncoming=+new Date,$.fastPoll())}),We(I,"cut",G),We(I,"copy",G),We(b.scroller,"paste",function(X){if(!yr(b,X)&&!Ut(F,X)){if(!I.dispatchEvent)return F.state.pasteIncoming=+new Date,void $.focus();var J=new Event("paste");J.clipboardData=X.clipboardData,I.dispatchEvent(J)}}),We(b.lineSpace,"selectstart",function(X){yr(b,X)||_n(X)}),We(I,"compositionstart",function(){var X=F.getCursor("from");$.composing&&$.composing.range.clear(),$.composing={start:X,range:F.markText(X,F.getCursor("to"),{className:"CodeMirror-composing"})}}),We(I,"compositionend",function(){$.composing&&($.poll(),$.composing.range.clear(),$.composing=null)})},Wo.prototype.createField=function(b){this.wrapper=Xw(),this.textarea=this.wrapper.firstChild;var A=this.cm.options;jy(this.textarea,A.spellcheck,A.autocorrect,A.autocapitalize)},Wo.prototype.screenReaderLabelChanged=function(b){b?this.textarea.setAttribute("aria-label",b):this.textarea.removeAttribute("aria-label")},Wo.prototype.prepareSelection=function(){var b=this.cm,A=b.display,$=b.doc,F=kn(b);if(b.options.moveInputWithCursor){var I=ul(b,$.sel.primary().head,"div"),G=A.wrapper.getBoundingClientRect(),X=A.lineDiv.getBoundingClientRect();F.teTop=Math.max(0,Math.min(A.wrapper.clientHeight-10,I.top+X.top-G.top)),F.teLeft=Math.max(0,Math.min(A.wrapper.clientWidth-10,I.left+X.left-G.left))}return F},Wo.prototype.showSelection=function(b){var A=this.cm.display;j(A.cursorDiv,b.cursors),j(A.selectionDiv,b.selection),b.teTop!=null&&(this.wrapper.style.top=b.teTop+"px",this.wrapper.style.left=b.teLeft+"px")},Wo.prototype.reset=function(b){if(!(this.contextMenuPending||this.composing&&b)){var A=this.cm;if(this.resetting=!0,A.somethingSelected()){this.prevInput="";var $=A.getSelection();this.textarea.value=$,A.state.focused&&ne(this.textarea),c&&d>=9&&(this.hasSelection=$)}else b||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null));this.resetting=!1}},Wo.prototype.getField=function(){return this.textarea},Wo.prototype.supportsTouch=function(){return!1},Wo.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!w||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Wo.prototype.blur=function(){this.textarea.blur()},Wo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Wo.prototype.receivedFocus=function(){this.slowPoll()},Wo.prototype.slowPoll=function(){var b=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){b.poll(),b.cm.state.focused&&b.slowPoll()})},Wo.prototype.fastPoll=function(){var b=!1,A=this;A.pollingFast=!0,A.polling.set(20,function $(){A.poll()||b?(A.pollingFast=!1,A.slowPoll()):(b=!0,A.polling.set(60,$))})},Wo.prototype.poll=function(){var b=this,A=this.cm,$=this.textarea,F=this.prevInput;if(this.contextMenuPending||this.resetting||!A.state.focused||uo($)&&!F&&!this.composing||A.isReadOnly()||A.options.disableInput||A.state.keySeq)return!1;var I=$.value;if(I==F&&!A.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===I||T&&/[\uf700-\uf7ff]/.test(I))return A.display.input.reset(),!1;if(A.doc.sel==A.display.selForContextMenu){var G=I.charCodeAt(0);if(G!=8203||F||(F=""),G==8666)return this.reset(),this.cm.execCommand("undo")}for(var X=0,J=Math.min(F.length,I.length);X<J&&F.charCodeAt(X)==I.charCodeAt(X);)++X;return Na(A,function(){Uy(A,I.slice(X),F.length-X,null,b.composing?"*compose":null),I.length>1e3||I.indexOf(`
`)>-1?$.value=b.prevInput="":b.prevInput=I,b.composing&&(b.composing.range.clear(),b.composing.range=A.markText(b.composing.start,A.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Wo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Wo.prototype.onKeyPress=function(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()},Wo.prototype.onContextMenu=function(b){var A=this,$=A.cm,F=$.display,I=A.textarea;A.contextMenuPending&&A.contextMenuPending();var G=Gu($,b),X=F.scroller.scrollTop;if(G&&!y){$.options.resetSelectionOnContextMenu&&$.doc.sel.contains(G)==-1&&Cs($,qs)($.doc,af(G),ht);var J,le=I.style.cssText,ue=A.wrapper.style.cssText,_e=A.wrapper.offsetParent.getBoundingClientRect();if(A.wrapper.style.cssText="position: static",I.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(b.clientY-_e.top-5)+"px; left: "+(b.clientX-_e.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,p&&(J=I.ownerDocument.defaultView.scrollY),F.input.focus(),p&&I.ownerDocument.defaultView.scrollTo(null,J),F.input.reset(),$.somethingSelected()||(I.value=A.prevInput=" "),A.contextMenuPending=Ne,F.selForContextMenu=$.doc.sel,clearTimeout(F.detectingSelectAll),c&&d>=9&&qe(),S){qn(b);var Ae=function(){ut(window,"mouseup",Ae),setTimeout(Ne,20)};We(window,"mouseup",Ae)}else setTimeout(Ne,50)}function qe(){if(I.selectionStart!=null){var tt=$.somethingSelected(),nt=""+(tt?I.value:"");I.value="",I.value=nt,A.prevInput=tt?"":"",I.selectionStart=1,I.selectionEnd=nt.length,F.selForContextMenu=$.doc.sel}}function Ne(){if(A.contextMenuPending==Ne&&(A.contextMenuPending=!1,A.wrapper.style.cssText=ue,I.style.cssText=le,c&&d<9&&F.scrollbars.setScrollTop(F.scroller.scrollTop=X),I.selectionStart!=null)){(!c||c&&d<9)&&qe();var tt=0,nt=function(){F.selForContextMenu==$.doc.sel&&I.selectionStart==0&&I.selectionEnd>0&&A.prevInput==""?Cs($,mw)($):tt++<10?F.detectingSelectAll=setTimeout(nt,500):(F.selForContextMenu=null,F.input.reset())};F.detectingSelectAll=setTimeout(nt,200)}}},Wo.prototype.readOnlyChanged=function(b){b||this.reset(),this.textarea.disabled=b=="nocursor",this.textarea.readOnly=!!b},Wo.prototype.setUneditable=function(){},Wo.prototype.needsContentAttribute=!1,function(b){var A=b.optionHandlers;function $(F,I,G,X){b.defaults[F]=I,G&&(A[F]=X?function(J,le,ue){ue!=Ph&&G(J,le,ue)}:G)}b.defineOption=$,b.Init=Ph,$("value","",function(F,I){return F.setValue(I)},!0),$("mode",null,function(F,I){F.doc.modeOption=I,Dy(F)},!0),$("indentUnit",2,Dy,!0),$("indentWithTabs",!1),$("smartIndent",!0),$("tabSize",4,function(F){ig(F),id(F),Ke(F)},!0),$("lineSeparator",null,function(F,I){if(F.doc.lineSep=I,I){var G=[],X=F.doc.first;F.doc.iter(function(le){for(var ue=0;;){var _e=le.text.indexOf(I,ue);if(_e==-1)break;ue=_e+I.length,G.push(dt(X,_e))}X++});for(var J=G.length-1;J>=0;J--)Mh(F.doc,I,G[J],dt(G[J].line,G[J].ch+I.length))}}),$("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(F,I,G){F.state.specialChars=new RegExp(I.source+(I.test("	")?"":"|	"),"g"),G!=Ph&&F.refresh()}),$("specialCharPlaceholder",Yr,function(F){return F.refresh()},!0),$("electricChars",!0),$("inputStyle",w?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),$("spellcheck",!1,function(F,I){return F.getInputField().spellcheck=I},!0),$("autocorrect",!1,function(F,I){return F.getInputField().autocorrect=I},!0),$("autocapitalize",!1,function(F,I){return F.getInputField().autocapitalize=I},!0),$("rtlMoveVisually",!L),$("wholeLineUpdateBefore",!0),$("theme","default",function(F){qw(F),rg(F)},!0),$("keyMap","default",function(F,I,G){var X=p0(I),J=G!=Ph&&p0(G);J&&J.detach&&J.detach(F,X),X.attach&&X.attach(F,J||null)}),$("extraKeys",null),$("configureMouse",null),$("lineWrapping",!1,rS,!0),$("gutters",[],function(F,I){F.display.gutterSpecs=ky(I,F.options.lineNumbers),rg(F)},!0),$("fixedGutter",!0,function(F,I){F.display.gutters.style.left=I?ad(F.display)+"px":"0",F.refresh()},!0),$("coverGutterNextToScrollbar",!1,function(F){return Lh(F)},!0),$("scrollbarStyle","native",function(F){Vx(F),Lh(F),F.display.scrollbars.setScrollTop(F.doc.scrollTop),F.display.scrollbars.setScrollLeft(F.doc.scrollLeft)},!0),$("lineNumbers",!1,function(F,I){F.display.gutterSpecs=ky(F.options.gutters,I),rg(F)},!0),$("firstLineNumber",1,rg,!0),$("lineNumberFormatter",function(F){return F},rg,!0),$("showCursorWhenSelecting",!1,cn,!0),$("resetSelectionOnContextMenu",!0),$("lineWiseCopyCut",!0),$("pasteLinesPerSelection",!0),$("selectionsMayTouch",!1),$("readOnly",!1,function(F,I){I=="nocursor"&&(ss(F),F.display.input.blur()),F.display.input.readOnlyChanged(I)}),$("screenReaderLabel",null,function(F,I){I=I===""?null:I,F.display.input.screenReaderLabelChanged(I)}),$("disableInput",!1,function(F,I){I||F.display.input.reset()},!0),$("dragDrop",!0,nS),$("allowDropFileTypes",null),$("cursorBlinkRate",530),$("cursorScrollMargin",0),$("cursorHeight",1,cn,!0),$("singleCursorHeightPerLine",!0,cn,!0),$("workTime",100),$("workDelay",100),$("flattenSpans",!0,ig,!0),$("addModeClass",!1,ig,!0),$("pollInterval",100),$("undoDepth",200,function(F,I){return F.doc.history.undoDepth=I}),$("historyEventDelay",1250),$("viewportMargin",10,function(F){return F.refresh()},!0),$("maxHighlightLength",1e4,ig,!0),$("moveInputWithCursor",!0,function(F,I){I||F.display.input.resetPosition()}),$("tabindex",null,function(F,I){return F.display.input.getField().tabIndex=I||""}),$("autofocus",null),$("direction","ltr",function(F,I){return F.doc.setDirection(I)},!0),$("phrases",null)}(So),function(b){var A=b.optionHandlers,$=b.helpers={};b.prototype={constructor:b,focus:function(){we(this).focus(),this.display.input.focus()},setOption:function(F,I){var G=this.options,X=G[F];G[F]==I&&F!="mode"||(G[F]=I,A.hasOwnProperty(F)&&Cs(this,A[F])(this,I,X),Tt(this,"optionChange",this,F))},getOption:function(F){return this.options[F]},getDoc:function(){return this.doc},addKeyMap:function(F,I){this.state.keyMaps[I?"push":"unshift"](p0(F))},removeKeyMap:function(F){for(var I=this.state.keyMaps,G=0;G<I.length;++G)if(I[G]==F||I[G].name==F)return I.splice(G,1),!0},addOverlay:ea(function(F,I){var G=F.token?F:b.getMode(this.options,F);if(G.startState)throw new Error("Overlays may not be stateful.");(function(X,J,le){for(var ue=0,_e=le(J);ue<X.length&&le(X[ue])<=_e;)ue++;X.splice(ue,0,J)})(this.state.overlays,{mode:G,modeSpec:F,opaque:I&&I.opaque,priority:I&&I.priority||0},function(X){return X.priority}),this.state.modeGen++,Ke(this)}),removeOverlay:ea(function(F){for(var I=this.state.overlays,G=0;G<I.length;++G){var X=I[G].modeSpec;if(X==F||typeof F=="string"&&X.name==F)return I.splice(G,1),this.state.modeGen++,void Ke(this)}}),indentLine:ea(function(F,I,G){typeof I!="string"&&typeof I!="number"&&(I=I==null?this.options.smartIndent?"smart":"prev":I?"add":"subtract"),Wr(this.doc,F)&&vg(this,F,I,G)}),indentSelection:ea(function(F){for(var I=this.doc.sel.ranges,G=-1,X=0;X<I.length;X++){var J=I[X];if(J.empty())J.head.line>G&&(vg(this,J.head.line,F,!0),G=J.head.line,X==this.doc.sel.primIndex&&Dh(this));else{var le=J.from(),ue=J.to(),_e=Math.max(G,le.line);G=Math.min(this.lastLine(),ue.line-(ue.ch?0:1))+1;for(var Ae=_e;Ae<G;++Ae)vg(this,Ae,F);var qe=this.doc.sel.ranges;le.ch==0&&I.length==qe.length&&qe[X].from().ch>0&&$y(this.doc,X,new Ai(le,qe[X].to()),ht)}}}),getTokenAt:function(F,I){return ns(this,F,I)},getLineTokens:function(F,I){return ns(this,dt(F),I,!0)},getTokenTypeAt:function(F){F=xn(this.doc,F);var I,G=No(this,mt(this.doc,F.line)),X=0,J=(G.length-1)/2,le=F.ch;if(le==0)I=G[2];else for(;;){var ue=X+J>>1;if((ue?G[2*ue-1]:0)>=le)J=ue;else{if(!(G[2*ue+1]<le)){I=G[2*ue+2];break}X=ue+1}}var _e=I?I.indexOf("overlay "):-1;return _e<0?I:_e==0?null:I.slice(0,_e-1)},getModeAt:function(F){var I=this.doc.mode;return I.innerMode?b.innerMode(I,this.getTokenAt(F).state).mode:I},getHelper:function(F,I){return this.getHelpers(F,I)[0]},getHelpers:function(F,I){var G=[];if(!$.hasOwnProperty(I))return G;var X=$[I],J=this.getModeAt(F);if(typeof J[I]=="string")X[J[I]]&&G.push(X[J[I]]);else if(J[I])for(var le=0;le<J[I].length;le++){var ue=X[J[I][le]];ue&&G.push(ue)}else J.helperType&&X[J.helperType]?G.push(X[J.helperType]):X[J.name]&&G.push(X[J.name]);for(var _e=0;_e<X._global.length;_e++){var Ae=X._global[_e];Ae.pred(J,this)&&Ue(G,Ae.val)==-1&&G.push(Ae.val)}return G},getStateAfter:function(F,I){var G=this.doc;return Po(this,(F=ri(G,F??G.first+G.size-1))+1,I).state},cursorCoords:function(F,I){var G=this.doc.sel.primary();return ul(this,F==null?G.head:typeof F=="object"?xn(this.doc,F):F?G.from():G.to(),I||"page")},charCoords:function(F,I){return Sh(this,xn(this.doc,F),I||"page")},coordsChar:function(F,I){return od(this,(F=bc(this,F,I||"page")).left,F.top)},lineAtHeight:function(F,I){return F=bc(this,{top:F,left:0},I||"page").top,Qr(this.doc,F+this.display.viewOffset)},heightAtLine:function(F,I,G){var X,J=!1;if(typeof F=="number"){var le=this.doc.first+this.doc.size-1;F<this.doc.first?F=this.doc.first:F>le&&(F=le,J=!0),X=mt(this.doc,F)}else X=F;return Js(this,X,{top:0,left:0},I||"page",G||J).top+(J?this.doc.height-Pe(X):0)},defaultTextHeight:function(){return sf(this.display)},defaultCharWidth:function(){return fu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(F,I,G,X,J){var le,ue,_e,Ae=this.display,qe=(F=ul(this,xn(this.doc,F))).bottom,Ne=F.left;if(I.style.position="absolute",I.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(I),Ae.sizer.appendChild(I),X=="over")qe=F.top;else if(X=="above"||X=="near"){var tt=Math.max(Ae.wrapper.clientHeight,this.doc.height),nt=Math.max(Ae.sizer.clientWidth,Ae.lineSpace.clientWidth);(X=="above"||F.bottom+I.offsetHeight>tt)&&F.top>I.offsetHeight?qe=F.top-I.offsetHeight:F.bottom+I.offsetHeight<=tt&&(qe=F.bottom),Ne+I.offsetWidth>nt&&(Ne=nt-I.offsetWidth)}I.style.top=qe+"px",I.style.left=I.style.right="",J=="right"?(Ne=Ae.sizer.clientWidth-I.offsetWidth,I.style.right="0px"):(J=="left"?Ne=0:J=="middle"&&(Ne=(Ae.sizer.clientWidth-I.offsetWidth)/2),I.style.left=Ne+"px"),G&&(le=this,ue={left:Ne,top:qe,right:Ne+I.offsetWidth,bottom:qe+I.offsetHeight},(_e=Wu(le,ue)).scrollTop!=null&&Jp(le,_e.scrollTop),_e.scrollLeft!=null&&ud(le,_e.scrollLeft))},triggerOnKeyDown:ea(Nw),triggerOnKeyPress:ea(Bw),triggerOnKeyUp:Pw,triggerOnMouseDown:ea(zw),execCommand:function(F){if(hg.hasOwnProperty(F))return hg[F].call(null,this)},triggerElectric:ea(function(F){Vw(this,F)}),findPosH:function(F,I,G,X){var J=1;I<0&&(J=-1,I=-I);for(var le=xn(this.doc,F),ue=0;ue<I&&!(le=Hy(this.doc,le,J,G,X)).hitSide;++ue);return le},moveH:ea(function(F,I){var G=this;this.extendSelectionsBy(function(X){return G.display.shift||G.doc.extend||X.empty()?Hy(G.doc,X.head,F,I,G.options.rtlMoveVisually):F<0?X.from():X.to()},$t)}),deleteH:ea(function(F,I){var G=this.doc.sel,X=this.doc;G.somethingSelected()?X.replaceSelection("",null,"+delete"):Nh(this,function(J){var le=Hy(X,J.head,F,I,!1);return F<0?{from:le,to:J.head}:{from:J.head,to:le}})}),findPosV:function(F,I,G,X){var J=1,le=X;I<0&&(J=-1,I=-I);for(var ue=xn(this.doc,F),_e=0;_e<I;++_e){var Ae=ul(this,ue,"div");if(le==null?le=Ae.left:Ae.left=le,(ue=Kw(this,Ae,J,G)).hitSide)break}return ue},moveV:ea(function(F,I){var G=this,X=this.doc,J=[],le=!this.display.shift&&!X.extend&&X.sel.somethingSelected();if(X.extendSelectionsBy(function(_e){if(le)return F<0?_e.from():_e.to();var Ae=ul(G,_e.head,"div");_e.goalColumn!=null&&(Ae.left=_e.goalColumn),J.push(Ae.left);var qe=Kw(G,Ae,F,I);return I=="page"&&_e==X.sel.primary()&&As(G,Sh(G,qe,"div").top-Ae.top),qe},$t),J.length)for(var ue=0;ue<X.sel.ranges.length;ue++)X.sel.ranges[ue].goalColumn=J[ue]}),findWordAt:function(F){var I=mt(this.doc,F.line).text,G=F.ch,X=F.ch;if(I){var J=this.getHelper(F,"wordChars");F.sticky!="before"&&X!=I.length||!G?++X:--G;for(var le=I.charAt(G),ue=ie(le,J)?function(_e){return ie(_e,J)}:/\s/.test(le)?function(_e){return/\s/.test(_e)}:function(_e){return!/\s/.test(_e)&&!ie(_e)};G>0&&ue(I.charAt(G-1));)--G;for(;X<I.length&&ue(I.charAt(X));)++X}return new Ai(dt(F.line,G),dt(F.line,X))},toggleOverwrite:function(F){F!=null&&F==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?H(this.display.cursorDiv,"CodeMirror-overwrite"):O(this.display.cursorDiv,"CodeMirror-overwrite"),Tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(ge(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ea(function(F,I){Qp(this,F,I)}),getScrollInfo:function(){var F=this.display.scroller;return{left:F.scrollLeft,top:F.scrollTop,height:F.scrollHeight-Dn(this)-this.display.barHeight,width:F.scrollWidth-Dn(this)-this.display.barWidth,clientHeight:Ye(this),clientWidth:Ar(this)}},scrollIntoView:ea(function(F,I){F==null?(F={from:this.doc.sel.primary().head,to:null},I==null&&(I=this.options.cursorScrollMargin)):typeof F=="number"?F={from:dt(F,0),to:null}:F.from==null&&(F={from:F,to:null}),F.to||(F.to=F.from),F.margin=I||0,F.from.line!=null?function(G,X){i0(G),G.curOp.scrollToPos=X}(this,F):Hx(this,F.from,F.to,F.margin)}),setSize:ea(function(F,I){var G=this,X=function(le){return typeof le=="number"||/^\d+$/.test(String(le))?le+"px":le};F!=null&&(this.display.wrapper.style.width=X(F)),I!=null&&(this.display.wrapper.style.height=X(I)),this.options.lineWrapping&&t0(this);var J=this.display.viewFrom;this.doc.iter(J,this.display.viewTo,function(le){if(le.widgets){for(var ue=0;ue<le.widgets.length;ue++)if(le.widgets[ue].noHScroll){st(G,J,"widget");break}}++J}),this.curOp.forceUpdate=!0,Tt(this,"refresh",this)}),operation:function(F){return Na(this,F)},startOperation:function(){return fd(this)},endOperation:function(){return dd(this)},refresh:ea(function(){var F=this.display.cachedTextHeight;Ke(this),this.curOp.forceUpdate=!0,id(this),Qp(this,this.doc.scrollLeft,this.doc.scrollTop),Cy(this.display),(F==null||Math.abs(F-sf(this.display))>.5||this.options.lineWrapping)&&ld(this),Tt(this,"refresh",this)}),swapDoc:ea(function(F){var I=this.doc;return I.cm=null,this.state.selectingText&&this.state.selectingText(),rw(this,F),id(this),this.display.input.reset(),Qp(this,F.scrollLeft,F.scrollTop),this.curOp.forceScroll=!0,ae(this,"swapDoc",this,I),I}),phrase:function(F){var I=this.options.phrases;return I&&Object.prototype.hasOwnProperty.call(I,F)?I[F]:F},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},bn(b),b.registerHelper=function(F,I,G){$.hasOwnProperty(F)||($[F]=b[F]={_global:[]}),$[F][I]=G},b.registerGlobalHelper=function(F,I,G,X){b.registerHelper(F,I,X),$[F]._global.push({pred:G,val:X})}}(So);var oS="iter insert remove copy getEditor constructor".split(" ");for(var b0 in ya.prototype)ya.prototype.hasOwnProperty(b0)&&Ue(oS,b0)<0&&(So.prototype[b0]=function(b){return function(){return b.apply(this.doc,arguments)}}(ya.prototype[b0]));return bn(ya),So.inputStyles={textarea:Wo,contenteditable:Ui},So.defineMode=function(b){So.defaults.mode||b=="null"||(So.defaults.mode=b),or.apply(this,arguments)},So.defineMIME=function(b,A){Fi[b]=A},So.defineMode("null",function(){return{token:function(b){return b.skipToEnd()}}}),So.defineMIME("text/plain","null"),So.defineExtension=function(b,A){So.prototype[b]=A},So.defineDocExtension=function(b,A){ya.prototype[b]=A},So.fromTextArea=function(b,A){if((A=A?ve(A):{}).value=b.value,!A.tabindex&&b.tabIndex&&(A.tabindex=b.tabIndex),!A.placeholder&&b.placeholder&&(A.placeholder=b.placeholder),A.autofocus==null){var $=ee(b.ownerDocument);A.autofocus=$==b||b.getAttribute("autofocus")!=null&&$==document.body}function F(){b.value=J.getValue()}var I;if(b.form&&(We(b.form,"submit",F),!A.leaveSubmitMethodAlone)){var G=b.form;I=G.submit;try{var X=G.submit=function(){F(),G.submit=I,G.submit(),G.submit=X}}catch{}}A.finishInit=function(le){le.save=F,le.getTextArea=function(){return b},le.toTextArea=function(){le.toTextArea=isNaN,F(),b.parentNode.removeChild(le.getWrapperElement()),b.style.display="",b.form&&(ut(b.form,"submit",F),A.leaveSubmitMethodAlone||typeof b.form.submit!="function"||(b.form.submit=I))}},b.style.display="none";var J=So(function(le){return b.parentNode.insertBefore(le,b.nextSibling)},A);return J},function(b){b.off=ut,b.on=We,b.wheelEventPixels=GC,b.Doc=ya,b.splitLines=_r,b.countColumn=Ee,b.findColumn=Tn,b.isWordChar=re,b.Pass=ft,b.signal=Tt,b.Line=Mt,b.changeEnd=lf,b.scrollbarModel=Wx,b.Pos=dt,b.cmpPos=Nt,b.modes=Zr,b.mimeModes=Fi,b.resolveMode=Fe,b.getMode=Xe,b.modeExtensions=Et,b.extendMode=pt,b.copyState=Yt,b.startState=Rn,b.innerMode=An,b.commands=hg,b.keyMap=_c,b.keyName=Fw,b.isModifierKey=Lw,b.lookupKey=Ih,b.normalizeKeyMap=eS,b.StringStream=Ht,b.SharedTextMarker=cg,b.TextMarker=cf,b.LineWidget=ug,b.e_preventDefault=_n,b.e_stopPropagation=un,b.e_stop=qn,b.addClass=H,b.contains=Q,b.rmClass=O,b.keyNames=ff}(So),So.version="5.65.15",So})},{}],11:[function(n,r,i){var o;o=function(s){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;s.defineMode("gfm",function(l,u){var f=0,c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(h){return{code:h.code,codeBlock:h.codeBlock,ateSpace:h.ateSpace}},token:function(h,g){if(g.combineTokens=null,g.codeBlock)return h.match(/^```+/)?(g.codeBlock=!1,null):(h.skipToEnd(),null);if(h.sol()&&(g.code=!1),h.sol()&&h.match(/^```+/))return h.skipToEnd(),g.codeBlock=!0,null;if(h.peek()==="`"){h.next();var m=h.pos;h.eatWhile("`");var y=1+h.pos-m;return g.code?y===f&&(g.code=!1):(f=y,g.code=!0),null}return g.code?(h.next(),null):h.eatSpace()?(g.ateSpace=!0,null):(h.sol()||g.ateSpace)&&(g.ateSpace=!1,u.gitHubSpice!==!1)&&(h.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||h.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||h.match(a)&&h.string.slice(h.start-2,h.start)!="]("&&(h.start==0||/\W/.test(h.string.charAt(h.start-1)))?(g.combineTokens=!0,"link"):(h.next(),null)},blankLine:function(h){return h.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var p in u)d[p]=u[p];return d.name="markdown",s.overlayMode(s.getMode(l,d),c)},"markdown"),s.defineMIME("text/x-gfm","gfm")},typeof i=="object"&&typeof r=="object"?o(n("../../lib/codemirror"),n("../markdown/markdown"),n("../../addon/mode/overlay")):o(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(n,r,i){var o;o=function(s){s.defineMode("markdown",function(a,l){var u=s.getMode(a,"text/html"),f=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in c)c.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(c[d]=l.tokenTypeOverrides[d]);var p=/^([*\-_])(?:\s*\1){2,}\s*$/,h=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,m=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ {0,3}(?:\={1,}|-{2,})\s*$/,v=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,_=/^\s*\[[^\]]+?\]:.*$/,E=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function C(ee,H,se){return H.f=H.inline=se,se(ee,H)}function w(ee,H,se){return H.f=H.block=se,se(ee,H)}function T(ee){if(ee.linkTitle=!1,ee.linkHref=!1,ee.linkText=!1,ee.em=!1,ee.strong=!1,ee.strikethrough=!1,ee.quote=0,ee.indentedCode=!1,ee.f==L){var H=f;if(!H){var se=s.innerMode(u,ee.htmlState);H=se.mode.name=="xml"&&se.state.tagStart===null&&!se.state.context&&se.state.tokenize.isInText}H&&(ee.f=k,ee.block=R,ee.htmlState=null)}return ee.trailingSpace=0,ee.trailingSpaceNewLine=!1,ee.prevLine=ee.thisLine,ee.thisLine={stream:null},null}function R(ee,H){var se,ne=ee.column()===H.indentation,ge=!(se=H.prevLine.stream)||!/\S/.test(se.string),we=H.indentedCode,$e=H.prevLine.hr,ve=H.list!==!1,Ee=(H.listStack[H.listStack.length-1]||0)+3;H.indentedCode=!1;var Ve=H.indentation;if(H.indentationDiff===null&&(H.indentationDiff=H.indentation,ve)){for(H.list=null;Ve<H.listStack[H.listStack.length-1];)H.listStack.pop(),H.listStack.length?H.indentation=H.listStack[H.listStack.length-1]:H.list=!1;H.list!==!1&&(H.indentationDiff=Ve-H.listStack[H.listStack.length-1])}var Ue=!(ge||$e||H.prevLine.header||ve&&we||H.prevLine.fencedCodeEnd),ft=(H.list===!1||$e||ge)&&H.indentation<=Ee&&ee.match(p),ht=null;if(H.indentationDiff>=4&&(we||H.prevLine.fencedCodeEnd||H.prevLine.header||ge))return ee.skipToEnd(),H.indentedCode=!0,c.code;if(ee.eatSpace())return null;if(ne&&H.indentation<=Ee&&(ht=ee.match(m))&&ht[1].length<=6)return H.quote=0,H.header=ht[1].length,H.thisLine.header=!0,l.highlightFormatting&&(H.formatting="header"),H.f=H.inline,P(H);if(H.indentation<=Ee&&ee.eat(">"))return H.quote=ne?1:H.quote+1,l.highlightFormatting&&(H.formatting="quote"),ee.eatSpace(),P(H);if(!ft&&!H.setext&&ne&&H.indentation<=Ee&&(ht=ee.match(h))){var zt=ht[1]?"ol":"ul";return H.indentation=Ve+ee.current().length,H.list=!0,H.quote=0,H.listStack.push(H.indentation),H.em=!1,H.strong=!1,H.code=!1,H.strikethrough=!1,l.taskLists&&ee.match(g,!1)&&(H.taskList=!0),H.f=H.inline,l.highlightFormatting&&(H.formatting=["list","list-"+zt]),P(H)}return ne&&H.indentation<=Ee&&(ht=ee.match(x,!0))?(H.quote=0,H.fencedEndRE=new RegExp(ht[1]+"+ *$"),H.localMode=l.fencedCodeBlockHighlighting&&function($t){if(s.findModeByName){var Tn=s.findModeByName($t);Tn&&($t=Tn.mime||Tn.mimes[0])}var it=s.getMode(a,$t);return it.name=="null"?null:it}(ht[2]||l.fencedCodeBlockDefaultMode),H.localMode&&(H.localState=s.startState(H.localMode)),H.f=H.block=B,l.highlightFormatting&&(H.formatting="code-block"),H.code=-1,P(H)):H.setext||!(Ue&&ve||H.quote||H.list!==!1||H.code||ft||_.test(ee.string))&&(ht=ee.lookAhead(1))&&(ht=ht.match(y))?(H.setext?(H.header=H.setext,H.setext=0,ee.skipToEnd(),l.highlightFormatting&&(H.formatting="header")):(H.header=ht[0].charAt(0)=="="?1:2,H.setext=H.header),H.thisLine.header=!0,H.f=H.inline,P(H)):ft?(ee.skipToEnd(),H.hr=!0,H.thisLine.hr=!0,c.hr):ee.peek()==="["?C(ee,H,j):C(ee,H,H.inline)}function L(ee,H){var se=u.token(ee,H.htmlState);if(!f){var ne=s.innerMode(u,H.htmlState);(ne.mode.name=="xml"&&ne.state.tagStart===null&&!ne.state.context&&ne.state.tokenize.isInText||H.md_inside&&ee.current().indexOf(">")>-1)&&(H.f=k,H.block=R,H.htmlState=null)}return se}function B(ee,H){var se,ne=H.listStack[H.listStack.length-1]||0,ge=H.indentation<ne,we=ne+3;return H.fencedEndRE&&H.indentation<=we&&(ge||ee.match(H.fencedEndRE))?(l.highlightFormatting&&(H.formatting="code-block"),ge||(se=P(H)),H.localMode=H.localState=null,H.block=R,H.f=k,H.fencedEndRE=null,H.code=0,H.thisLine.fencedCodeEnd=!0,ge?w(ee,H,H.block):se):H.localMode?H.localMode.token(ee,H.localState):(ee.skipToEnd(),c.code)}function P(ee){var H=[];if(ee.formatting){H.push(c.formatting),typeof ee.formatting=="string"&&(ee.formatting=[ee.formatting]);for(var se=0;se<ee.formatting.length;se++)H.push(c.formatting+"-"+ee.formatting[se]),ee.formatting[se]==="header"&&H.push(c.formatting+"-"+ee.formatting[se]+"-"+ee.header),ee.formatting[se]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?H.push(c.formatting+"-"+ee.formatting[se]+"-"+ee.quote):H.push("error"))}if(ee.taskOpen)return H.push("meta"),H.length?H.join(" "):null;if(ee.taskClosed)return H.push("property"),H.length?H.join(" "):null;if(ee.linkHref?H.push(c.linkHref,"url"):(ee.strong&&H.push(c.strong),ee.em&&H.push(c.em),ee.strikethrough&&H.push(c.strikethrough),ee.emoji&&H.push(c.emoji),ee.linkText&&H.push(c.linkText),ee.code&&H.push(c.code),ee.image&&H.push(c.image),ee.imageAltText&&H.push(c.imageAltText,"link"),ee.imageMarker&&H.push(c.imageMarker)),ee.header&&H.push(c.header,c.header+"-"+ee.header),ee.quote&&(H.push(c.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?H.push(c.quote+"-"+ee.quote):H.push(c.quote+"-"+l.maxBlockquoteDepth)),ee.list!==!1){var ne=(ee.listStack.length-1)%3;ne?ne===1?H.push(c.list2):H.push(c.list3):H.push(c.list1)}return ee.trailingSpaceNewLine?H.push("trailing-space-new-line"):ee.trailingSpace&&H.push("trailing-space-"+(ee.trailingSpace%2?"a":"b")),H.length?H.join(" "):null}function S(ee,H){if(ee.match(v,!0))return P(H)}function k(ee,H){var se=H.text(ee,H);if(se!==void 0)return se;if(H.list)return H.list=null,P(H);if(H.taskList)return ee.match(g,!0)[1]===" "?H.taskOpen=!0:H.taskClosed=!0,l.highlightFormatting&&(H.formatting="task"),H.taskList=!1,P(H);if(H.taskOpen=!1,H.taskClosed=!1,H.header&&ee.match(/^#+$/,!0))return l.highlightFormatting&&(H.formatting="header"),P(H);var ne=ee.next();if(H.linkTitle){H.linkTitle=!1;var ge=ne;ne==="("&&(ge=")");var we="^\\s*(?:[^"+(ge=(ge+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+ge;if(ee.match(new RegExp(we),!0))return c.linkHref}if(ne==="`"){var $e=H.formatting;l.highlightFormatting&&(H.formatting="code"),ee.eatWhile("`");var ve=ee.current().length;if(H.code!=0||H.quote&&ve!=1){if(ve==H.code){var Ee=P(H);return H.code=0,Ee}return H.formatting=$e,P(H)}return H.code=ve,P(H)}if(H.code)return P(H);if(ne==="\\"&&(ee.next(),l.highlightFormatting)){var Ve=P(H),Ue=c.formatting+"-escape";return Ve?Ve+" "+Ue:Ue}if(ne==="!"&&ee.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return H.imageMarker=!0,H.image=!0,l.highlightFormatting&&(H.formatting="image"),P(H);if(ne==="["&&H.imageMarker&&ee.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return H.imageMarker=!1,H.imageAltText=!0,l.highlightFormatting&&(H.formatting="image"),P(H);if(ne==="]"&&H.imageAltText){l.highlightFormatting&&(H.formatting="image");var Ve=P(H);return H.imageAltText=!1,H.image=!1,H.inline=H.f=O,Ve}if(ne==="["&&!H.image)return H.linkText&&ee.match(/^.*?\]/)||(H.linkText=!0,l.highlightFormatting&&(H.formatting="link")),P(H);if(ne==="]"&&H.linkText){l.highlightFormatting&&(H.formatting="link");var Ve=P(H);return H.linkText=!1,H.inline=H.f=ee.match(/\(.*?\)| ?\[.*?\]/,!1)?O:k,Ve}if(ne==="<"&&ee.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return H.f=H.inline=D,l.highlightFormatting&&(H.formatting="link"),(Ve=P(H))?Ve+=" ":Ve="",Ve+c.linkInline;if(ne==="<"&&ee.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return H.f=H.inline=D,l.highlightFormatting&&(H.formatting="link"),(Ve=P(H))?Ve+=" ":Ve="",Ve+c.linkEmail;if(l.xml&&ne==="<"&&ee.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var ft=ee.string.indexOf(">",ee.pos);if(ft!=-1){var ht=ee.string.substring(ee.start,ft);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ht)&&(H.md_inside=!0)}return ee.backUp(1),H.htmlState=s.startState(u),w(ee,H,L)}if(l.xml&&ne==="<"&&ee.match(/^\/\w*?>/))return H.md_inside=!1,"tag";if(ne==="*"||ne==="_"){for(var zt=1,$t=ee.pos==1?" ":ee.string.charAt(ee.pos-2);zt<3&&ee.eat(ne);)zt++;var Tn=ee.peek()||" ",it=!/\s/.test(Tn)&&(!E.test(Tn)||/\s/.test($t)||E.test($t)),Te=!/\s/.test($t)&&(!E.test($t)||/\s/.test(Tn)||E.test(Tn)),ye=null,Se=null;if(zt%2&&(H.em||!it||ne!=="*"&&Te&&!E.test($t)?H.em!=ne||!Te||ne!=="*"&&it&&!E.test(Tn)||(ye=!1):ye=!0),zt>1&&(H.strong||!it||ne!=="*"&&Te&&!E.test($t)?H.strong!=ne||!Te||ne!=="*"&&it&&!E.test(Tn)||(Se=!1):Se=!0),Se!=null||ye!=null)return l.highlightFormatting&&(H.formatting=ye==null?"strong":Se==null?"em":"strong em"),ye===!0&&(H.em=ne),Se===!0&&(H.strong=ne),Ee=P(H),ye===!1&&(H.em=!1),Se===!1&&(H.strong=!1),Ee}else if(ne===" "&&(ee.eat("*")||ee.eat("_"))){if(ee.peek()===" ")return P(H);ee.backUp(1)}if(l.strikethrough){if(ne==="~"&&ee.eatWhile(ne)){if(H.strikethrough)return l.highlightFormatting&&(H.formatting="strikethrough"),Ee=P(H),H.strikethrough=!1,Ee;if(ee.match(/^[^\s]/,!1))return H.strikethrough=!0,l.highlightFormatting&&(H.formatting="strikethrough"),P(H)}else if(ne===" "&&ee.match("~~",!0)){if(ee.peek()===" ")return P(H);ee.backUp(2)}}if(l.emoji&&ne===":"&&ee.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){H.emoji=!0,l.highlightFormatting&&(H.formatting="emoji");var Re=P(H);return H.emoji=!1,Re}return ne===" "&&(ee.match(/^ +$/,!1)?H.trailingSpace++:H.trailingSpace&&(H.trailingSpaceNewLine=!0)),P(H)}function D(ee,H){if(ee.next()===">"){H.f=H.inline=k,l.highlightFormatting&&(H.formatting="link");var se=P(H);return se?se+=" ":se="",se+c.linkInline}return ee.match(/^[^>]+/,!0),c.linkInline}function O(ee,H){if(ee.eatSpace())return null;var se,ne=ee.next();return ne==="("||ne==="["?(H.f=H.inline=(se=ne==="("?")":"]",function(ge,we){if(ge.next()===se){we.f=we.inline=k,l.highlightFormatting&&(we.formatting="link-string");var $e=P(we);return we.linkHref=!1,$e}return ge.match(N[se]),we.linkHref=!0,P(we)}),l.highlightFormatting&&(H.formatting="link-string"),H.linkHref=!0,P(H)):"error"}var N={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function j(ee,H){return ee.match(/^([^\]\\]|\\.)*\]:/,!1)?(H.f=q,ee.next(),l.highlightFormatting&&(H.formatting="link"),H.linkText=!0,P(H)):C(ee,H,k)}function q(ee,H){if(ee.match("]:",!0)){H.f=H.inline=W,l.highlightFormatting&&(H.formatting="link");var se=P(H);return H.linkText=!1,se}return ee.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function W(ee,H){return ee.eatSpace()?null:(ee.match(/^[^\s]+/,!0),ee.peek()===void 0?H.linkTitle=!0:ee.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),H.f=H.inline=k,c.linkHref+" url")}var Q={startState:function(){return{f:R,prevLine:{stream:null},thisLine:{stream:null},block:R,htmlState:null,indentation:0,inline:k,text:S,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ee){return{f:ee.f,prevLine:ee.prevLine,thisLine:ee.thisLine,block:ee.block,htmlState:ee.htmlState&&s.copyState(u,ee.htmlState),indentation:ee.indentation,localMode:ee.localMode,localState:ee.localMode?s.copyState(ee.localMode,ee.localState):null,inline:ee.inline,text:ee.text,formatting:!1,linkText:ee.linkText,linkTitle:ee.linkTitle,linkHref:ee.linkHref,code:ee.code,em:ee.em,strong:ee.strong,strikethrough:ee.strikethrough,emoji:ee.emoji,header:ee.header,setext:ee.setext,hr:ee.hr,taskList:ee.taskList,list:ee.list,listStack:ee.listStack.slice(0),quote:ee.quote,indentedCode:ee.indentedCode,trailingSpace:ee.trailingSpace,trailingSpaceNewLine:ee.trailingSpaceNewLine,md_inside:ee.md_inside,fencedEndRE:ee.fencedEndRE}},token:function(ee,H){if(H.formatting=!1,ee!=H.thisLine.stream){if(H.header=0,H.hr=!1,ee.match(/^\s*$/,!0))return T(H),null;if(H.prevLine=H.thisLine,H.thisLine={stream:ee},H.taskList=!1,H.trailingSpace=0,H.trailingSpaceNewLine=!1,!H.localState&&(H.f=H.block,H.f!=L)){var se=ee.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(H.indentation=se,H.indentationDiff=null,se>0)return null}}return H.f(ee,H)},innerMode:function(ee){return ee.block==L?{state:ee.htmlState,mode:u}:ee.localState?{state:ee.localState,mode:ee.localMode}:{state:ee,mode:Q}},indent:function(ee,H,se){return ee.block==L&&u.indent?u.indent(ee.htmlState,H,se):ee.localState&&ee.localMode.indent?ee.localMode.indent(ee.localState,H,se):s.Pass},blankLine:T,getType:P,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Q},"xml"),s.defineMIME("text/markdown","markdown"),s.defineMIME("text/x-markdown","markdown")},typeof i=="object"&&typeof r=="object"?o(n("../../lib/codemirror"),n("../xml/xml"),n("../meta")):o(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(n,r,i){(function(o){o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var s=0;s<o.modeInfo.length;s++){var a=o.modeInfo[s];a.mimes&&(a.mime=a.mimes[0])}o.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.mime==l)return f;if(f.mimes){for(var c=0;c<f.mimes.length;c++)if(f.mimes[c]==l)return f}}return/\+xml$/.test(l)?o.findModeByMIME("application/xml"):/\+json$/.test(l)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.ext){for(var c=0;c<f.ext.length;c++)if(f.ext[c]==l)return f}}},o.findModeByFileName=function(l){for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.file&&f.file.test(l))return f}var c=l.lastIndexOf("."),d=c>-1&&l.substring(c+1,l.length);if(d)return o.findModeByExtension(d)},o.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<o.modeInfo.length;u++){var f=o.modeInfo[u];if(f.name.toLowerCase()==l)return f;if(f.alias){for(var c=0;c<f.alias.length;c++)if(f.alias[c].toLowerCase()==l)return f}}}})(typeof i=="object"&&typeof r=="object"?n("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(n,r,i){(function(o){var s={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};o.defineMode("xml",function(l,u){var f,c,d=l.indentUnit,p={},h=u.htmlMode?s:a;for(var g in h)p[g]=h[g];for(var g in u)p[g]=u[g];function m(N,j){function q(Q){return j.tokenize=Q,Q(N,j)}var W=N.next();return W=="<"?N.eat("!")?N.eat("[")?N.match("CDATA[")?q(v("atom","]]>")):null:N.match("--")?q(v("comment","-->")):N.match("DOCTYPE",!0,!0)?(N.eatWhile(/[\w\._\-]/),q(x(1))):null:N.eat("?")?(N.eatWhile(/[\w\._\-]/),j.tokenize=v("meta","?>"),"meta"):(f=N.eat("/")?"closeTag":"openTag",j.tokenize=y,"tag bracket"):W=="&"?(N.eat("#")?N.eat("x")?N.eatWhile(/[a-fA-F\d]/)&&N.eat(";"):N.eatWhile(/[\d]/)&&N.eat(";"):N.eatWhile(/[\w\.\-:]/)&&N.eat(";"))?"atom":"error":(N.eatWhile(/[^&<]/),null)}function y(N,j){var q,W,Q=N.next();if(Q==">"||Q=="/"&&N.eat(">"))return j.tokenize=m,f=Q==">"?"endTag":"selfcloseTag","tag bracket";if(Q=="=")return f="equals",null;if(Q=="<"){j.tokenize=m,j.state=T,j.tagName=j.tagStart=null;var ee=j.tokenize(N,j);return ee?ee+" tag error":"tag error"}return/[\'\"]/.test(Q)?(j.tokenize=(q=Q,W=function(H,se){for(;!H.eol();)if(H.next()==q){se.tokenize=y;break}return"string"},W.isInAttribute=!0,W),j.stringStartCol=N.column(),j.tokenize(N,j)):(N.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function v(N,j){return function(q,W){for(;!q.eol();){if(q.match(j)){W.tokenize=m;break}q.next()}return N}}function x(N){return function(j,q){for(var W;(W=j.next())!=null;){if(W=="<")return q.tokenize=x(N+1),q.tokenize(j,q);if(W==">"){if(N==1){q.tokenize=m;break}return q.tokenize=x(N-1),q.tokenize(j,q)}}return"meta"}}function _(N){return N&&N.toLowerCase()}function E(N,j,q){this.prev=N.context,this.tagName=j||"",this.indent=N.indented,this.startOfLine=q,(p.doNotIndent.hasOwnProperty(j)||N.context&&N.context.noIndent)&&(this.noIndent=!0)}function C(N){N.context&&(N.context=N.context.prev)}function w(N,j){for(var q;;){if(!N.context||(q=N.context.tagName,!p.contextGrabbers.hasOwnProperty(_(q))||!p.contextGrabbers[_(q)].hasOwnProperty(_(j))))return;C(N)}}function T(N,j,q){return N=="openTag"?(q.tagStart=j.column(),R):N=="closeTag"?L:T}function R(N,j,q){return N=="word"?(q.tagName=j.current(),c="tag",S):p.allowMissingTagName&&N=="endTag"?(c="tag bracket",S(N,0,q)):(c="error",R)}function L(N,j,q){if(N=="word"){var W=j.current();return q.context&&q.context.tagName!=W&&p.implicitlyClosed.hasOwnProperty(_(q.context.tagName))&&C(q),q.context&&q.context.tagName==W||p.matchClosing===!1?(c="tag",B):(c="tag error",P)}return p.allowMissingTagName&&N=="endTag"?(c="tag bracket",B(N,0,q)):(c="error",P)}function B(N,j,q){return N!="endTag"?(c="error",B):(C(q),T)}function P(N,j,q){return c="error",B(N,0,q)}function S(N,j,q){if(N=="word")return c="attribute",k;if(N=="endTag"||N=="selfcloseTag"){var W=q.tagName,Q=q.tagStart;return q.tagName=q.tagStart=null,N=="selfcloseTag"||p.autoSelfClosers.hasOwnProperty(_(W))?w(q,W):(w(q,W),q.context=new E(q,W,Q==q.indented)),T}return c="error",S}function k(N,j,q){return N=="equals"?D:(p.allowMissing||(c="error"),S(N,0,q))}function D(N,j,q){return N=="string"?O:N=="word"&&p.allowUnquoted?(c="string",S):(c="error",S(N,0,q))}function O(N,j,q){return N=="string"?O:S(N,0,q)}return m.isInText=!0,{startState:function(N){var j={tokenize:m,state:T,indented:N||0,tagName:null,tagStart:null,context:null};return N!=null&&(j.baseIndent=N),j},token:function(N,j){if(!j.tagName&&N.sol()&&(j.indented=N.indentation()),N.eatSpace())return null;f=null;var q=j.tokenize(N,j);return(q||f)&&q!="comment"&&(c=null,j.state=j.state(f||q,N,j),c&&(q=c=="error"?q+" error":c)),q},indent:function(N,j,q){var W=N.context;if(N.tokenize.isInAttribute)return N.tagStart==N.indented?N.stringStartCol+1:N.indented+d;if(W&&W.noIndent)return o.Pass;if(N.tokenize!=y&&N.tokenize!=m)return q?q.match(/^(\s*)/)[0].length:0;if(N.tagName)return p.multilineTagIndentPastTag!==!1?N.tagStart+N.tagName.length+2:N.tagStart+d*(p.multilineTagIndentFactor||1);if(p.alignCDATA&&/<!\[CDATA\[/.test(j))return 0;var Q=j&&/^<(\/)?([\w_:\.-]*)/.exec(j);if(Q&&Q[1])for(;W;){if(W.tagName==Q[2]){W=W.prev;break}if(!p.implicitlyClosed.hasOwnProperty(_(W.tagName)))break;W=W.prev}else if(Q)for(;W;){var ee=p.contextGrabbers[_(W.tagName)];if(!ee||!ee.hasOwnProperty(_(Q[2])))break;W=W.prev}for(;W&&W.prev&&!W.startOfLine;)W=W.prev;return W?W.indent+d:N.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:p.htmlMode?"html":"xml",helperType:p.htmlMode?"html":"xml",skipAttribute:function(N){N.state==D&&(N.state=S)},xmlCurrentTag:function(N){return N.tagName?{name:N.tagName,close:N.type=="closeTag"}:null},xmlCurrentContext:function(N){for(var j=[],q=N.context;q;q=q.prev)j.push(q.tagName);return j.reverse()}}}),o.defineMIME("text/xml","xml"),o.defineMIME("application/xml","xml"),o.mimeModes.hasOwnProperty("text/html")||o.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(n,r,i){(function(o,s){s(typeof i=="object"&&r!==void 0?i:(o=typeof globalThis<"u"?globalThis:o||self).marked={})})(this,function(o){function s(it,Te){for(var ye=0;ye<Te.length;ye++){var Se=Te[ye];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(it,Se.key,Se)}}function a(it,Te){(Te==null||Te>it.length)&&(Te=it.length);for(var ye=0,Se=new Array(Te);ye<Te;ye++)Se[ye]=it[ye];return Se}function l(it,Te){var ye=typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(ye)return(ye=ye.call(it)).next.bind(ye);if(Array.isArray(it)||(ye=function(Re,U){if(Re){if(typeof Re=="string")return a(Re,U);var Z=Object.prototype.toString.call(Re).slice(8,-1);return Z==="Object"&&Re.constructor&&(Z=Re.constructor.name),Z==="Map"||Z==="Set"?Array.from(Re):Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z)?a(Re,U):void 0}}(it))||Te){ye&&(it=ye);var Se=0;return function(){return Se>=it.length?{done:!0}:{done:!1,value:it[Se++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}o.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var f=/[&<>"']/,c=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(it){return h[it]};function m(it,Te){if(Te){if(f.test(it))return it.replace(c,g)}else if(d.test(it))return it.replace(p,g);return it}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(it){return it.replace(y,function(Te,ye){return(ye=ye.toLowerCase())==="colon"?":":ye.charAt(0)==="#"?ye.charAt(1)==="x"?String.fromCharCode(parseInt(ye.substring(2),16)):String.fromCharCode(+ye.substring(1)):""})}var x=/(^|[^\[])\^/g;function _(it,Te){it=typeof it=="string"?it:it.source,Te=Te||"";var ye={replace:function(Se,Re){return Re=(Re=Re.source||Re).replace(x,"$1"),it=it.replace(Se,Re),ye},getRegex:function(){return new RegExp(it,Te)}};return ye}var E=/[^\w:]/g,C=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w(it,Te,ye){if(it){var Se;try{Se=decodeURIComponent(v(ye)).replace(E,"").toLowerCase()}catch{return null}if(Se.indexOf("javascript:")===0||Se.indexOf("vbscript:")===0||Se.indexOf("data:")===0)return null}Te&&!C.test(ye)&&(ye=function(Re,U){T[" "+Re]||(R.test(Re)?T[" "+Re]=Re+"/":T[" "+Re]=D(Re,"/",!0));var Z=(Re=T[" "+Re]).indexOf(":")===-1;return U.substring(0,2)==="//"?Z?U:Re.replace(L,"$1")+U:U.charAt(0)==="/"?Z?U:Re.replace(B,"$1")+U:Re+U}(Te,ye));try{ye=encodeURI(ye).replace(/%25/g,"%")}catch{return null}return ye}var T={},R=/^[^:]+:\/*[^/]*$/,L=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/,P={exec:function(){}};function S(it){for(var Te,ye,Se=1;Se<arguments.length;Se++)for(ye in Te=arguments[Se])Object.prototype.hasOwnProperty.call(Te,ye)&&(it[ye]=Te[ye]);return it}function k(it,Te){var ye=it.replace(/\|/g,function(Re,U,Z){for(var re=!1,ie=U;--ie>=0&&Z[ie]==="\\";)re=!re;return re?"|":" |"}).split(/ \|/),Se=0;if(ye[0].trim()||ye.shift(),ye.length>0&&!ye[ye.length-1].trim()&&ye.pop(),ye.length>Te)ye.splice(Te);else for(;ye.length<Te;)ye.push("");for(;Se<ye.length;Se++)ye[Se]=ye[Se].trim().replace(/\\\|/g,"|");return ye}function D(it,Te,ye){var Se=it.length;if(Se===0)return"";for(var Re=0;Re<Se;){var U=it.charAt(Se-Re-1);if(U!==Te||ye){if(U===Te||!ye)break;Re++}else Re++}return it.slice(0,Se-Re)}function O(it){it&&it.sanitize&&!it.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function N(it,Te){if(Te<1)return"";for(var ye="";Te>1;)1&Te&&(ye+=it),Te>>=1,it+=it;return ye+it}function j(it,Te,ye,Se){var Re=Te.href,U=Te.title?m(Te.title):null,Z=it[1].replace(/\\([\[\]])/g,"$1");if(it[0].charAt(0)!=="!"){Se.state.inLink=!0;var re={type:"link",raw:ye,href:Re,title:U,text:Z,tokens:Se.inlineTokens(Z)};return Se.state.inLink=!1,re}return{type:"image",raw:ye,href:Re,title:U,text:m(Z)}}var q=function(){function it(ye){this.options=ye||o.defaults}var Te=it.prototype;return Te.space=function(ye){var Se=this.rules.block.newline.exec(ye);if(Se&&Se[0].length>0)return{type:"space",raw:Se[0]}},Te.code=function(ye){var Se=this.rules.block.code.exec(ye);if(Se){var Re=Se[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Se[0],codeBlockStyle:"indented",text:this.options.pedantic?Re:D(Re,`
`)}}},Te.fences=function(ye){var Se=this.rules.block.fences.exec(ye);if(Se){var Re=Se[0],U=function(Z,re){var ie=Z.match(/^(\s+)(?:```)/);if(ie===null)return re;var be=ie[1];return re.split(`
`).map(function(Ce){var je=Ce.match(/^\s+/);return je===null?Ce:je[0].length>=be.length?Ce.slice(be.length):Ce}).join(`
`)}(Re,Se[3]||"");return{type:"code",raw:Re,lang:Se[2]?Se[2].trim():Se[2],text:U}}},Te.heading=function(ye){var Se=this.rules.block.heading.exec(ye);if(Se){var Re=Se[2].trim();if(/#$/.test(Re)){var U=D(Re,"#");this.options.pedantic?Re=U.trim():U&&!/ $/.test(U)||(Re=U.trim())}return{type:"heading",raw:Se[0],depth:Se[1].length,text:Re,tokens:this.lexer.inline(Re)}}},Te.hr=function(ye){var Se=this.rules.block.hr.exec(ye);if(Se)return{type:"hr",raw:Se[0]}},Te.blockquote=function(ye){var Se=this.rules.block.blockquote.exec(ye);if(Se){var Re=Se[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:Se[0],tokens:this.lexer.blockTokens(Re,[]),text:Re}}},Te.list=function(ye){var Se=this.rules.block.list.exec(ye);if(Se){var Re,U,Z,re,ie,be,Ce,je,V,fe,he,me,Oe=Se[1].trim(),Me=Oe.length>1,Be={type:"list",raw:"",ordered:Me,start:Me?+Oe.slice(0,-1):"",loose:!1,items:[]};Oe=Me?"\\d{1,9}\\"+Oe.slice(-1):"\\"+Oe,this.options.pedantic&&(Oe=Me?Oe:"[*+-]");for(var We=new RegExp("^( {0,3}"+Oe+")((?:[	 ][^\\n]*)?(?:\\n|$))");ye&&(me=!1,Se=We.exec(ye))&&!this.rules.block.hr.test(ye);){if(Re=Se[0],ye=ye.substring(Re.length),je=Se[2].split(`
`,1)[0],V=ye.split(`
`,1)[0],this.options.pedantic?(re=2,he=je.trimLeft()):(re=(re=Se[2].search(/[^ ]/))>4?1:re,he=je.slice(re),re+=Se[1].length),be=!1,!je&&/^ *$/.test(V)&&(Re+=V+`
`,ye=ye.substring(V.length+1),me=!0),!me)for(var Qe=new RegExp("^ {0,"+Math.min(3,re-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ut=new RegExp("^ {0,"+Math.min(3,re-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Tt=new RegExp("^ {0,"+Math.min(3,re-1)+"}(?:```|~~~)"),Ut=new RegExp("^ {0,"+Math.min(3,re-1)+"}#");ye&&(je=fe=ye.split(`
`,1)[0],this.options.pedantic&&(je=je.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Tt.test(je))&&!Ut.test(je)&&!Qe.test(je)&&!ut.test(ye);){if(je.search(/[^ ]/)>=re||!je.trim())he+=`
`+je.slice(re);else{if(be)break;he+=`
`+je}be||je.trim()||(be=!0),Re+=fe+`
`,ye=ye.substring(fe.length+1)}Be.loose||(Ce?Be.loose=!0:/\n *\n *$/.test(Re)&&(Ce=!0)),this.options.gfm&&(U=/^\[[ xX]\] /.exec(he))&&(Z=U[0]!=="[ ] ",he=he.replace(/^\[[ xX]\] +/,"")),Be.items.push({type:"list_item",raw:Re,task:!!U,checked:Z,loose:!1,text:he}),Be.raw+=Re}Be.items[Be.items.length-1].raw=Re.trimRight(),Be.items[Be.items.length-1].text=he.trimRight(),Be.raw=Be.raw.trimRight();var Kt=Be.items.length;for(ie=0;ie<Kt;ie++){this.lexer.state.top=!1,Be.items[ie].tokens=this.lexer.blockTokens(Be.items[ie].text,[]);var Pt=Be.items[ie].tokens.filter(function(_n){return _n.type==="space"}),bn=Pt.every(function(_n){for(var un,Wn=0,qn=l(_n.raw.split(""));!(un=qn()).done;)if(un.value===`
`&&(Wn+=1),Wn>1)return!0;return!1});!Be.loose&&Pt.length&&bn&&(Be.loose=!0,Be.items[ie].loose=!0)}return Be}},Te.html=function(ye){var Se=this.rules.block.html.exec(ye);if(Se){var Re={type:"html",raw:Se[0],pre:!this.options.sanitizer&&(Se[1]==="pre"||Se[1]==="script"||Se[1]==="style"),text:Se[0]};if(this.options.sanitize){var U=this.options.sanitizer?this.options.sanitizer(Se[0]):m(Se[0]);Re.type="paragraph",Re.text=U,Re.tokens=this.lexer.inline(U)}return Re}},Te.def=function(ye){var Se=this.rules.block.def.exec(ye);if(Se)return Se[3]&&(Se[3]=Se[3].substring(1,Se[3].length-1)),{type:"def",tag:Se[1].toLowerCase().replace(/\s+/g," "),raw:Se[0],href:Se[2],title:Se[3]}},Te.table=function(ye){var Se=this.rules.block.table.exec(ye);if(Se){var Re={type:"table",header:k(Se[1]).map(function(Ce){return{text:Ce}}),align:Se[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:Se[3]&&Se[3].trim()?Se[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(Re.header.length===Re.align.length){Re.raw=Se[0];var U,Z,re,ie,be=Re.align.length;for(U=0;U<be;U++)/^ *-+: *$/.test(Re.align[U])?Re.align[U]="right":/^ *:-+: *$/.test(Re.align[U])?Re.align[U]="center":/^ *:-+ *$/.test(Re.align[U])?Re.align[U]="left":Re.align[U]=null;for(be=Re.rows.length,U=0;U<be;U++)Re.rows[U]=k(Re.rows[U],Re.header.length).map(function(Ce){return{text:Ce}});for(be=Re.header.length,Z=0;Z<be;Z++)Re.header[Z].tokens=this.lexer.inline(Re.header[Z].text);for(be=Re.rows.length,Z=0;Z<be;Z++)for(ie=Re.rows[Z],re=0;re<ie.length;re++)ie[re].tokens=this.lexer.inline(ie[re].text);return Re}}},Te.lheading=function(ye){var Se=this.rules.block.lheading.exec(ye);if(Se)return{type:"heading",raw:Se[0],depth:Se[2].charAt(0)==="="?1:2,text:Se[1],tokens:this.lexer.inline(Se[1])}},Te.paragraph=function(ye){var Se=this.rules.block.paragraph.exec(ye);if(Se){var Re=Se[1].charAt(Se[1].length-1)===`
`?Se[1].slice(0,-1):Se[1];return{type:"paragraph",raw:Se[0],text:Re,tokens:this.lexer.inline(Re)}}},Te.text=function(ye){var Se=this.rules.block.text.exec(ye);if(Se)return{type:"text",raw:Se[0],text:Se[0],tokens:this.lexer.inline(Se[0])}},Te.escape=function(ye){var Se=this.rules.inline.escape.exec(ye);if(Se)return{type:"escape",raw:Se[0],text:m(Se[1])}},Te.tag=function(ye){var Se=this.rules.inline.tag.exec(ye);if(Se)return!this.lexer.state.inLink&&/^<a /i.test(Se[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(Se[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(Se[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Se[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:Se[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Se[0]):m(Se[0]):Se[0]}},Te.link=function(ye){var Se=this.rules.inline.link.exec(ye);if(Se){var Re=Se[2].trim();if(!this.options.pedantic&&/^</.test(Re)){if(!/>$/.test(Re))return;var U=D(Re.slice(0,-1),"\\");if((Re.length-U.length)%2==0)return}else{var Z=function(je,V){if(je.indexOf(V[1])===-1)return-1;for(var fe=je.length,he=0,me=0;me<fe;me++)if(je[me]==="\\")me++;else if(je[me]===V[0])he++;else if(je[me]===V[1]&&--he<0)return me;return-1}(Se[2],"()");if(Z>-1){var re=(Se[0].indexOf("!")===0?5:4)+Se[1].length+Z;Se[2]=Se[2].substring(0,Z),Se[0]=Se[0].substring(0,re).trim(),Se[3]=""}}var ie=Se[2],be="";if(this.options.pedantic){var Ce=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ie);Ce&&(ie=Ce[1],be=Ce[3])}else be=Se[3]?Se[3].slice(1,-1):"";return ie=ie.trim(),/^</.test(ie)&&(ie=this.options.pedantic&&!/>$/.test(Re)?ie.slice(1):ie.slice(1,-1)),j(Se,{href:ie&&ie.replace(this.rules.inline._escapes,"$1"),title:be&&be.replace(this.rules.inline._escapes,"$1")},Se[0],this.lexer)}},Te.reflink=function(ye,Se){var Re;if((Re=this.rules.inline.reflink.exec(ye))||(Re=this.rules.inline.nolink.exec(ye))){var U=(Re[2]||Re[1]).replace(/\s+/g," ");if(!(U=Se[U.toLowerCase()])||!U.href){var Z=Re[0].charAt(0);return{type:"text",raw:Z,text:Z}}return j(Re,U,Re[0],this.lexer)}},Te.emStrong=function(ye,Se,Re){Re===void 0&&(Re="");var U=this.rules.inline.emStrong.lDelim.exec(ye);if(U&&(!U[3]||!Re.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Z=U[1]||U[2]||"";if(!Z||Z&&(Re===""||this.rules.inline.punctuation.exec(Re))){var re,ie,be=U[0].length-1,Ce=be,je=0,V=U[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(V.lastIndex=0,Se=Se.slice(-1*ye.length+be);(U=V.exec(Se))!=null;)if(re=U[1]||U[2]||U[3]||U[4]||U[5]||U[6])if(ie=re.length,U[3]||U[4])Ce+=ie;else if(!((U[5]||U[6])&&be%3)||(be+ie)%3){if(!((Ce-=ie)>0)){if(ie=Math.min(ie,ie+Ce+je),Math.min(be,ie)%2){var fe=ye.slice(1,be+U.index+ie);return{type:"em",raw:ye.slice(0,be+U.index+ie+1),text:fe,tokens:this.lexer.inlineTokens(fe)}}var he=ye.slice(2,be+U.index+ie-1);return{type:"strong",raw:ye.slice(0,be+U.index+ie+1),text:he,tokens:this.lexer.inlineTokens(he)}}}else je+=ie}}},Te.codespan=function(ye){var Se=this.rules.inline.code.exec(ye);if(Se){var Re=Se[2].replace(/\n/g," "),U=/[^ ]/.test(Re),Z=/^ /.test(Re)&&/ $/.test(Re);return U&&Z&&(Re=Re.substring(1,Re.length-1)),Re=m(Re,!0),{type:"codespan",raw:Se[0],text:Re}}},Te.br=function(ye){var Se=this.rules.inline.br.exec(ye);if(Se)return{type:"br",raw:Se[0]}},Te.del=function(ye){var Se=this.rules.inline.del.exec(ye);if(Se)return{type:"del",raw:Se[0],text:Se[2],tokens:this.lexer.inlineTokens(Se[2])}},Te.autolink=function(ye,Se){var Re,U,Z=this.rules.inline.autolink.exec(ye);if(Z)return U=Z[2]==="@"?"mailto:"+(Re=m(this.options.mangle?Se(Z[1]):Z[1])):Re=m(Z[1]),{type:"link",raw:Z[0],text:Re,href:U,tokens:[{type:"text",raw:Re,text:Re}]}},Te.url=function(ye,Se){var Re;if(Re=this.rules.inline.url.exec(ye)){var U,Z;if(Re[2]==="@")Z="mailto:"+(U=m(this.options.mangle?Se(Re[0]):Re[0]));else{var re;do re=Re[0],Re[0]=this.rules.inline._backpedal.exec(Re[0])[0];while(re!==Re[0]);U=m(Re[0]),Z=Re[1]==="www."?"http://"+U:U}return{type:"link",raw:Re[0],text:U,href:Z,tokens:[{type:"text",raw:U,text:U}]}}},Te.inlineText=function(ye,Se){var Re,U=this.rules.inline.text.exec(ye);if(U)return Re=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(U[0]):m(U[0]):U[0]:m(this.options.smartypants?Se(U[0]):U[0]),{type:"text",raw:U[0],text:Re}},it}(),W={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:P,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};W.def=_(W.def).replace("label",W._label).replace("title",W._title).getRegex(),W.bullet=/(?:[*+-]|\d{1,9}[.)])/,W.listItemStart=_(/^( *)(bull) */).replace("bull",W.bullet).getRegex(),W.list=_(W.list).replace(/bull/g,W.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+W.def.source+")").getRegex(),W._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",W._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,W.html=_(W.html,"i").replace("comment",W._comment).replace("tag",W._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),W.paragraph=_(W._paragraph).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex(),W.blockquote=_(W.blockquote).replace("paragraph",W.paragraph).getRegex(),W.normal=S({},W),W.gfm=S({},W.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),W.gfm.table=_(W.gfm.table).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex(),W.gfm.paragraph=_(W._paragraph).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",W.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex(),W.pedantic=S({},W.normal,{html:_(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",W._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:P,paragraph:_(W.normal._paragraph).replace("hr",W.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",W.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:P,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:P,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ee(it){return it.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function H(it){var Te,ye,Se="",Re=it.length;for(Te=0;Te<Re;Te++)ye=it.charCodeAt(Te),Math.random()>.5&&(ye="x"+ye.toString(16)),Se+="&#"+ye+";";return Se}Q._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Q.punctuation=_(Q.punctuation).replace(/punctuation/g,Q._punctuation).getRegex(),Q.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Q.escapedEmSt=/\\\*|\\_/g,Q._comment=_(W._comment).replace("(?:-->|$)","-->").getRegex(),Q.emStrong.lDelim=_(Q.emStrong.lDelim).replace(/punct/g,Q._punctuation).getRegex(),Q.emStrong.rDelimAst=_(Q.emStrong.rDelimAst,"g").replace(/punct/g,Q._punctuation).getRegex(),Q.emStrong.rDelimUnd=_(Q.emStrong.rDelimUnd,"g").replace(/punct/g,Q._punctuation).getRegex(),Q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Q.autolink=_(Q.autolink).replace("scheme",Q._scheme).replace("email",Q._email).getRegex(),Q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Q.tag=_(Q.tag).replace("comment",Q._comment).replace("attribute",Q._attribute).getRegex(),Q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Q._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Q.link=_(Q.link).replace("label",Q._label).replace("href",Q._href).replace("title",Q._title).getRegex(),Q.reflink=_(Q.reflink).replace("label",Q._label).replace("ref",W._label).getRegex(),Q.nolink=_(Q.nolink).replace("ref",W._label).getRegex(),Q.reflinkSearch=_(Q.reflinkSearch,"g").replace("reflink",Q.reflink).replace("nolink",Q.nolink).getRegex(),Q.normal=S({},Q),Q.pedantic=S({},Q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_(/^!?\[(label)\]\((.*?)\)/).replace("label",Q._label).getRegex(),reflink:_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Q._label).getRegex()}),Q.gfm=S({},Q.normal,{escape:_(Q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Q.gfm.url=_(Q.gfm.url,"i").replace("email",Q.gfm._extended_email).getRegex(),Q.breaks=S({},Q.gfm,{br:_(Q.br).replace("{2,}","*").getRegex(),text:_(Q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var se=function(){function it(U){this.tokens=[],this.tokens.links=Object.create(null),this.options=U||o.defaults,this.options.tokenizer=this.options.tokenizer||new q,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var Z={block:W.normal,inline:Q.normal};this.options.pedantic?(Z.block=W.pedantic,Z.inline=Q.pedantic):this.options.gfm&&(Z.block=W.gfm,this.options.breaks?Z.inline=Q.breaks:Z.inline=Q.gfm),this.tokenizer.rules=Z}it.lex=function(U,Z){return new it(Z).lex(U)},it.lexInline=function(U,Z){return new it(Z).inlineTokens(U)};var Te,ye,Se,Re=it.prototype;return Re.lex=function(U){var Z;for(U=U.replace(/\r\n|\r/g,`
`),this.blockTokens(U,this.tokens);Z=this.inlineQueue.shift();)this.inlineTokens(Z.src,Z.tokens);return this.tokens},Re.blockTokens=function(U,Z){var re,ie,be,Ce,je=this;for(Z===void 0&&(Z=[]),U=this.options.pedantic?U.replace(/\t/g,"    ").replace(/^ +$/gm,""):U.replace(/^( *)(\t+)/gm,function(fe,he,me){return he+"    ".repeat(me.length)});U;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(fe){return!!(re=fe.call({lexer:je},U,Z))&&(U=U.substring(re.raw.length),Z.push(re),!0)}))){if(re=this.tokenizer.space(U))U=U.substring(re.raw.length),re.raw.length===1&&Z.length>0?Z[Z.length-1].raw+=`
`:Z.push(re);else if(re=this.tokenizer.code(U))U=U.substring(re.raw.length),!(ie=Z[Z.length-1])||ie.type!=="paragraph"&&ie.type!=="text"?Z.push(re):(ie.raw+=`
`+re.raw,ie.text+=`
`+re.text,this.inlineQueue[this.inlineQueue.length-1].src=ie.text);else if(re=this.tokenizer.fences(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.heading(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.hr(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.blockquote(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.list(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.html(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.def(U))U=U.substring(re.raw.length),!(ie=Z[Z.length-1])||ie.type!=="paragraph"&&ie.type!=="text"?this.tokens.links[re.tag]||(this.tokens.links[re.tag]={href:re.href,title:re.title}):(ie.raw+=`
`+re.raw,ie.text+=`
`+re.raw,this.inlineQueue[this.inlineQueue.length-1].src=ie.text);else if(re=this.tokenizer.table(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.lheading(U))U=U.substring(re.raw.length),Z.push(re);else if(be=U,this.options.extensions&&this.options.extensions.startBlock&&function(){var fe=1/0,he=U.slice(1),me=void 0;je.options.extensions.startBlock.forEach(function(Oe){typeof(me=Oe.call({lexer:this},he))=="number"&&me>=0&&(fe=Math.min(fe,me))}),fe<1/0&&fe>=0&&(be=U.substring(0,fe+1))}(),this.state.top&&(re=this.tokenizer.paragraph(be)))ie=Z[Z.length-1],Ce&&ie.type==="paragraph"?(ie.raw+=`
`+re.raw,ie.text+=`
`+re.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):Z.push(re),Ce=be.length!==U.length,U=U.substring(re.raw.length);else if(re=this.tokenizer.text(U))U=U.substring(re.raw.length),(ie=Z[Z.length-1])&&ie.type==="text"?(ie.raw+=`
`+re.raw,ie.text+=`
`+re.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):Z.push(re);else if(U){var V="Infinite loop on byte: "+U.charCodeAt(0);if(this.options.silent){console.error(V);break}throw new Error(V)}}return this.state.top=!0,Z},Re.inline=function(U,Z){return Z===void 0&&(Z=[]),this.inlineQueue.push({src:U,tokens:Z}),Z},Re.inlineTokens=function(U,Z){var re,ie,be,Ce=this;Z===void 0&&(Z=[]);var je,V,fe,he=U;if(this.tokens.links){var me=Object.keys(this.tokens.links);if(me.length>0)for(;(je=this.tokenizer.rules.inline.reflinkSearch.exec(he))!=null;)me.includes(je[0].slice(je[0].lastIndexOf("[")+1,-1))&&(he=he.slice(0,je.index)+"["+N("a",je[0].length-2)+"]"+he.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(je=this.tokenizer.rules.inline.blockSkip.exec(he))!=null;)he=he.slice(0,je.index)+"["+N("a",je[0].length-2)+"]"+he.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(je=this.tokenizer.rules.inline.escapedEmSt.exec(he))!=null;)he=he.slice(0,je.index)+"++"+he.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;U;)if(V||(fe=""),V=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Me){return!!(re=Me.call({lexer:Ce},U,Z))&&(U=U.substring(re.raw.length),Z.push(re),!0)})))if(re=this.tokenizer.escape(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.tag(U))U=U.substring(re.raw.length),(ie=Z[Z.length-1])&&re.type==="text"&&ie.type==="text"?(ie.raw+=re.raw,ie.text+=re.text):Z.push(re);else if(re=this.tokenizer.link(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.reflink(U,this.tokens.links))U=U.substring(re.raw.length),(ie=Z[Z.length-1])&&re.type==="text"&&ie.type==="text"?(ie.raw+=re.raw,ie.text+=re.text):Z.push(re);else if(re=this.tokenizer.emStrong(U,he,fe))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.codespan(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.br(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.del(U))U=U.substring(re.raw.length),Z.push(re);else if(re=this.tokenizer.autolink(U,H))U=U.substring(re.raw.length),Z.push(re);else if(this.state.inLink||!(re=this.tokenizer.url(U,H))){if(be=U,this.options.extensions&&this.options.extensions.startInline&&function(){var Me=1/0,Be=U.slice(1),We=void 0;Ce.options.extensions.startInline.forEach(function(Qe){typeof(We=Qe.call({lexer:this},Be))=="number"&&We>=0&&(Me=Math.min(Me,We))}),Me<1/0&&Me>=0&&(be=U.substring(0,Me+1))}(),re=this.tokenizer.inlineText(be,ee))U=U.substring(re.raw.length),re.raw.slice(-1)!=="_"&&(fe=re.raw.slice(-1)),V=!0,(ie=Z[Z.length-1])&&ie.type==="text"?(ie.raw+=re.raw,ie.text+=re.text):Z.push(re);else if(U){var Oe="Infinite loop on byte: "+U.charCodeAt(0);if(this.options.silent){console.error(Oe);break}throw new Error(Oe)}}else U=U.substring(re.raw.length),Z.push(re);return Z},Te=it,Se=[{key:"rules",get:function(){return{block:W,inline:Q}}}],(ye=null)&&s(Te.prototype,ye),Se&&s(Te,Se),Object.defineProperty(Te,"prototype",{writable:!1}),it}(),ne=function(){function it(ye){this.options=ye||o.defaults}var Te=it.prototype;return Te.code=function(ye,Se,Re){var U=(Se||"").match(/\S*/)[0];if(this.options.highlight){var Z=this.options.highlight(ye,U);Z!=null&&Z!==ye&&(Re=!0,ye=Z)}return ye=ye.replace(/\n$/,"")+`
`,U?'<pre><code class="'+this.options.langPrefix+m(U,!0)+'">'+(Re?ye:m(ye,!0))+`</code></pre>
`:"<pre><code>"+(Re?ye:m(ye,!0))+`</code></pre>
`},Te.blockquote=function(ye){return`<blockquote>
`+ye+`</blockquote>
`},Te.html=function(ye){return ye},Te.heading=function(ye,Se,Re,U){return this.options.headerIds?"<h"+Se+' id="'+(this.options.headerPrefix+U.slug(Re))+'">'+ye+"</h"+Se+`>
`:"<h"+Se+">"+ye+"</h"+Se+`>
`},Te.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Te.list=function(ye,Se,Re){var U=Se?"ol":"ul";return"<"+U+(Se&&Re!==1?' start="'+Re+'"':"")+`>
`+ye+"</"+U+`>
`},Te.listitem=function(ye){return"<li>"+ye+`</li>
`},Te.checkbox=function(ye){return"<input "+(ye?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Te.paragraph=function(ye){return"<p>"+ye+`</p>
`},Te.table=function(ye,Se){return Se&&(Se="<tbody>"+Se+"</tbody>"),`<table>
<thead>
`+ye+`</thead>
`+Se+`</table>
`},Te.tablerow=function(ye){return`<tr>
`+ye+`</tr>
`},Te.tablecell=function(ye,Se){var Re=Se.header?"th":"td";return(Se.align?"<"+Re+' align="'+Se.align+'">':"<"+Re+">")+ye+"</"+Re+`>
`},Te.strong=function(ye){return"<strong>"+ye+"</strong>"},Te.em=function(ye){return"<em>"+ye+"</em>"},Te.codespan=function(ye){return"<code>"+ye+"</code>"},Te.br=function(){return this.options.xhtml?"<br/>":"<br>"},Te.del=function(ye){return"<del>"+ye+"</del>"},Te.link=function(ye,Se,Re){if((ye=w(this.options.sanitize,this.options.baseUrl,ye))===null)return Re;var U='<a href="'+m(ye)+'"';return Se&&(U+=' title="'+Se+'"'),U+=">"+Re+"</a>"},Te.image=function(ye,Se,Re){if((ye=w(this.options.sanitize,this.options.baseUrl,ye))===null)return Re;var U='<img src="'+ye+'" alt="'+Re+'"';return Se&&(U+=' title="'+Se+'"'),U+=this.options.xhtml?"/>":">"},Te.text=function(ye){return ye},it}(),ge=function(){function it(){}var Te=it.prototype;return Te.strong=function(ye){return ye},Te.em=function(ye){return ye},Te.codespan=function(ye){return ye},Te.del=function(ye){return ye},Te.html=function(ye){return ye},Te.text=function(ye){return ye},Te.link=function(ye,Se,Re){return""+Re},Te.image=function(ye,Se,Re){return""+Re},Te.br=function(){return""},it}(),we=function(){function it(){this.seen={}}var Te=it.prototype;return Te.serialize=function(ye){return ye.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Te.getNextSafeSlug=function(ye,Se){var Re=ye,U=0;if(this.seen.hasOwnProperty(Re)){U=this.seen[ye];do Re=ye+"-"+ ++U;while(this.seen.hasOwnProperty(Re))}return Se||(this.seen[ye]=U,this.seen[Re]=0),Re},Te.slug=function(ye,Se){Se===void 0&&(Se={});var Re=this.serialize(ye);return this.getNextSafeSlug(Re,Se.dryrun)},it}(),$e=function(){function it(ye){this.options=ye||o.defaults,this.options.renderer=this.options.renderer||new ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ge,this.slugger=new we}it.parse=function(ye,Se){return new it(Se).parse(ye)},it.parseInline=function(ye,Se){return new it(Se).parseInline(ye)};var Te=it.prototype;return Te.parse=function(ye,Se){Se===void 0&&(Se=!0);var Re,U,Z,re,ie,be,Ce,je,V,fe,he,me,Oe,Me,Be,We,Qe,ut,Tt,Ut="",Kt=ye.length;for(Re=0;Re<Kt;Re++)if(fe=ye[Re],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[fe.type])||(Tt=this.options.extensions.renderers[fe.type].call({parser:this},fe))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(fe.type))switch(fe.type){case"space":continue;case"hr":Ut+=this.renderer.hr();continue;case"heading":Ut+=this.renderer.heading(this.parseInline(fe.tokens),fe.depth,v(this.parseInline(fe.tokens,this.textRenderer)),this.slugger);continue;case"code":Ut+=this.renderer.code(fe.text,fe.lang,fe.escaped);continue;case"table":for(je="",Ce="",re=fe.header.length,U=0;U<re;U++)Ce+=this.renderer.tablecell(this.parseInline(fe.header[U].tokens),{header:!0,align:fe.align[U]});for(je+=this.renderer.tablerow(Ce),V="",re=fe.rows.length,U=0;U<re;U++){for(Ce="",ie=(be=fe.rows[U]).length,Z=0;Z<ie;Z++)Ce+=this.renderer.tablecell(this.parseInline(be[Z].tokens),{header:!1,align:fe.align[Z]});V+=this.renderer.tablerow(Ce)}Ut+=this.renderer.table(je,V);continue;case"blockquote":V=this.parse(fe.tokens),Ut+=this.renderer.blockquote(V);continue;case"list":for(he=fe.ordered,me=fe.start,Oe=fe.loose,re=fe.items.length,V="",U=0;U<re;U++)We=(Be=fe.items[U]).checked,Qe=Be.task,Me="",Be.task&&(ut=this.renderer.checkbox(We),Oe?Be.tokens.length>0&&Be.tokens[0].type==="paragraph"?(Be.tokens[0].text=ut+" "+Be.tokens[0].text,Be.tokens[0].tokens&&Be.tokens[0].tokens.length>0&&Be.tokens[0].tokens[0].type==="text"&&(Be.tokens[0].tokens[0].text=ut+" "+Be.tokens[0].tokens[0].text)):Be.tokens.unshift({type:"text",text:ut}):Me+=ut),Me+=this.parse(Be.tokens,Oe),V+=this.renderer.listitem(Me,Qe,We);Ut+=this.renderer.list(V,he,me);continue;case"html":Ut+=this.renderer.html(fe.text);continue;case"paragraph":Ut+=this.renderer.paragraph(this.parseInline(fe.tokens));continue;case"text":for(V=fe.tokens?this.parseInline(fe.tokens):fe.text;Re+1<Kt&&ye[Re+1].type==="text";)V+=`
`+((fe=ye[++Re]).tokens?this.parseInline(fe.tokens):fe.text);Ut+=Se?this.renderer.paragraph(V):V;continue;default:var Pt='Token with "'+fe.type+'" type was not found.';if(this.options.silent)return void console.error(Pt);throw new Error(Pt)}else Ut+=Tt||"";return Ut},Te.parseInline=function(ye,Se){Se=Se||this.renderer;var Re,U,Z,re="",ie=ye.length;for(Re=0;Re<ie;Re++)if(U=ye[Re],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[U.type])||(Z=this.options.extensions.renderers[U.type].call({parser:this},U))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(U.type))switch(U.type){case"escape":case"text":re+=Se.text(U.text);break;case"html":re+=Se.html(U.text);break;case"link":re+=Se.link(U.href,U.title,this.parseInline(U.tokens,Se));break;case"image":re+=Se.image(U.href,U.title,U.text);break;case"strong":re+=Se.strong(this.parseInline(U.tokens,Se));break;case"em":re+=Se.em(this.parseInline(U.tokens,Se));break;case"codespan":re+=Se.codespan(U.text);break;case"br":re+=Se.br();break;case"del":re+=Se.del(this.parseInline(U.tokens,Se));break;default:var be='Token with "'+U.type+'" type was not found.';if(this.options.silent)return void console.error(be);throw new Error(be)}else re+=Z||"";return re},it}();function ve(it,Te,ye){if(it==null)throw new Error("marked(): input parameter is undefined or null");if(typeof it!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");if(typeof Te=="function"&&(ye=Te,Te=null),O(Te=S({},ve.defaults,Te||{})),ye){var Se,Re=Te.highlight;try{Se=se.lex(it,Te)}catch(be){return ye(be)}var U=function(be){var Ce;if(!be)try{Te.walkTokens&&ve.walkTokens(Se,Te.walkTokens),Ce=$e.parse(Se,Te)}catch(je){be=je}return Te.highlight=Re,be?ye(be):ye(null,Ce)};if(!Re||Re.length<3||(delete Te.highlight,!Se.length))return U();var Z=0;return ve.walkTokens(Se,function(be){be.type==="code"&&(Z++,setTimeout(function(){Re(be.text,be.lang,function(Ce,je){if(Ce)return U(Ce);je!=null&&je!==be.text&&(be.text=je,be.escaped=!0),--Z===0&&U()})},0))}),void(Z===0&&U())}function re(be){if(be.message+=`
Please report this to https://github.com/markedjs/marked.`,Te.silent)return"<p>An error occurred:</p><pre>"+m(be.message+"",!0)+"</pre>";throw be}try{var ie=se.lex(it,Te);if(Te.walkTokens){if(Te.async)return Promise.all(ve.walkTokens(ie,Te.walkTokens)).then(function(){return $e.parse(ie,Te)}).catch(re);ve.walkTokens(ie,Te.walkTokens)}return $e.parse(ie,Te)}catch(be){re(be)}}ve.options=ve.setOptions=function(it){var Te;return S(ve.defaults,it),Te=ve.defaults,o.defaults=Te,ve},ve.getDefaults=u,ve.defaults=o.defaults,ve.use=function(){for(var it=arguments.length,Te=new Array(it),ye=0;ye<it;ye++)Te[ye]=arguments[ye];var Se,Re=S.apply(void 0,[{}].concat(Te)),U=ve.defaults.extensions||{renderers:{},childTokens:{}};Te.forEach(function(Z){if(Z.extensions&&(Se=!0,Z.extensions.forEach(function(ie){if(!ie.name)throw new Error("extension name required");if(ie.renderer){var be=U.renderers?U.renderers[ie.name]:null;U.renderers[ie.name]=be?function(){for(var Ce=arguments.length,je=new Array(Ce),V=0;V<Ce;V++)je[V]=arguments[V];var fe=ie.renderer.apply(this,je);return fe===!1&&(fe=be.apply(this,je)),fe}:ie.renderer}if(ie.tokenizer){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");U[ie.level]?U[ie.level].unshift(ie.tokenizer):U[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?U.startBlock?U.startBlock.push(ie.start):U.startBlock=[ie.start]:ie.level==="inline"&&(U.startInline?U.startInline.push(ie.start):U.startInline=[ie.start]))}ie.childTokens&&(U.childTokens[ie.name]=ie.childTokens)})),Z.renderer&&function(){var ie=ve.defaults.renderer||new ne,be=function(je){var V=ie[je];ie[je]=function(){for(var fe=arguments.length,he=new Array(fe),me=0;me<fe;me++)he[me]=arguments[me];var Oe=Z.renderer[je].apply(ie,he);return Oe===!1&&(Oe=V.apply(ie,he)),Oe}};for(var Ce in Z.renderer)be(Ce);Re.renderer=ie}(),Z.tokenizer&&function(){var ie=ve.defaults.tokenizer||new q,be=function(je){var V=ie[je];ie[je]=function(){for(var fe=arguments.length,he=new Array(fe),me=0;me<fe;me++)he[me]=arguments[me];var Oe=Z.tokenizer[je].apply(ie,he);return Oe===!1&&(Oe=V.apply(ie,he)),Oe}};for(var Ce in Z.tokenizer)be(Ce);Re.tokenizer=ie}(),Z.walkTokens){var re=ve.defaults.walkTokens;Re.walkTokens=function(ie){var be=[];return be.push(Z.walkTokens.call(this,ie)),re&&(be=be.concat(re.call(this,ie))),be}}Se&&(Re.extensions=U),ve.setOptions(Re)})},ve.walkTokens=function(it,Te){for(var ye,Se=[],Re=function(){var Z=ye.value;switch(Se=Se.concat(Te.call(ve,Z)),Z.type){case"table":for(var re,ie=l(Z.header);!(re=ie()).done;){var be=re.value;Se=Se.concat(ve.walkTokens(be.tokens,Te))}for(var Ce,je=l(Z.rows);!(Ce=je()).done;)for(var V,fe=l(Ce.value);!(V=fe()).done;){var he=V.value;Se=Se.concat(ve.walkTokens(he.tokens,Te))}break;case"list":Se=Se.concat(ve.walkTokens(Z.items,Te));break;default:ve.defaults.extensions&&ve.defaults.extensions.childTokens&&ve.defaults.extensions.childTokens[Z.type]?ve.defaults.extensions.childTokens[Z.type].forEach(function(me){Se=Se.concat(ve.walkTokens(Z[me],Te))}):Z.tokens&&(Se=Se.concat(ve.walkTokens(Z.tokens,Te)))}},U=l(it);!(ye=U()).done;)Re();return Se},ve.parseInline=function(it,Te){if(it==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof it!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");O(Te=S({},ve.defaults,Te||{}));try{var ye=se.lexInline(it,Te);return Te.walkTokens&&ve.walkTokens(ye,Te.walkTokens),$e.parseInline(ye,Te)}catch(Se){if(Se.message+=`
Please report this to https://github.com/markedjs/marked.`,Te.silent)return"<p>An error occurred:</p><pre>"+m(Se.message+"",!0)+"</pre>";throw Se}},ve.Parser=$e,ve.parser=$e.parse,ve.Renderer=ne,ve.TextRenderer=ge,ve.Lexer=se,ve.lexer=se.lex,ve.Tokenizer=q,ve.Slugger=we,ve.parse=ve;var Ee=ve.options,Ve=ve.setOptions,Ue=ve.use,ft=ve.walkTokens,ht=ve.parseInline,zt=ve,$t=$e.parse,Tn=se.lex;o.Lexer=se,o.Parser=$e,o.Renderer=ne,o.Slugger=we,o.TextRenderer=ge,o.Tokenizer=q,o.getDefaults=u,o.lexer=Tn,o.marked=ve,o.options=Ee,o.parse=zt,o.parseInline=ht,o.parser=$t,o.setOptions=Ve,o.use=Ue,o.walkTokens=ft,Object.defineProperty(o,"__esModule",{value:!0})})},{}],16:[function(n,r,i){(function(o){(function(){var s;(function(){(s=function(a,l,u,f){f=f||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=f.flags||{},this.memoized={},this.loaded=!1;var c,d,p,h,g,m=this;function y(E,C){var w=m._readFile(E,null,f.asyncLoad);f.asyncLoad?w.then(function(T){C(T)}):C(w)}function v(E){l=E,u&&_()}function x(E){u=E,l&&_()}function _(){for(m.rules=m._parseAFF(l),m.compoundRuleCodes={},d=0,h=m.compoundRules.length;d<h;d++){var E=m.compoundRules[d];for(p=0,g=E.length;p<g;p++)m.compoundRuleCodes[E[p]]=[]}for(d in"ONLYINCOMPOUND"in m.flags&&(m.compoundRuleCodes[m.flags.ONLYINCOMPOUND]=[]),m.dictionaryTable=m._parseDIC(u),m.compoundRuleCodes)m.compoundRuleCodes[d].length===0&&delete m.compoundRuleCodes[d];for(d=0,h=m.compoundRules.length;d<h;d++){var C=m.compoundRules[d],w="";for(p=0,g=C.length;p<g;p++){var T=C[p];T in m.compoundRuleCodes?w+="("+m.compoundRuleCodes[T].join("|")+")":w+=T}m.compoundRules[d]=new RegExp(w,"i")}m.loaded=!0,f.asyncLoad&&f.loadedCallback&&f.loadedCallback(m)}return a&&(m.dictionary=a,l&&u?_():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(c=f.dictionaryPath?f.dictionaryPath:"typo/dictionaries",l||y(chrome.extension.getURL(c+"/"+a+"/"+a+".aff"),v),u||y(chrome.extension.getURL(c+"/"+a+"/"+a+".dic"),x)):(c=f.dictionaryPath?f.dictionaryPath:o!==void 0?o+"/dictionaries":"./dictionaries",l||y(c+"/"+a+"/"+a+".aff",v),u||y(c+"/"+a+"/"+a+".dic",x))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var f,c=new XMLHttpRequest;return c.open("GET",a,u),u&&(f=new Promise(function(p,h){c.onload=function(){c.status===200?p(c.responseText):h(c.statusText)},c.onerror=function(){h(c.statusText)}})),c.overrideMimeType&&c.overrideMimeType("text/plain; charset="+l),c.send(null),u?f:c.responseText}if(n!==void 0){var d=n("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(p){return console.log(p),""}}},_parseAFF:function(a){var l,u,f,c,d,p,h,g={},m=a.split(/\r?\n/);for(c=0,p=m.length;c<p;c++)if(l=(l=this._removeAffixComments(m[c])).trim()){var y=l.split(/\s+/),v=y[0];if(v=="PFX"||v=="SFX"){var x=y[1],_=y[2],E=[];for(d=c+1,h=c+1+(u=parseInt(y[3],10));d<h;d++){var C=(f=m[d].split(/\s+/))[2],w=f[3].split("/"),T=w[0];T==="0"&&(T="");var R=this.parseRuleCodes(w[1]),L=f[4],B={};B.add=T,R.length>0&&(B.continuationClasses=R),L!=="."&&(B.match=v==="SFX"?new RegExp(L+"$"):new RegExp("^"+L)),C!="0"&&(B.remove=v==="SFX"?new RegExp(C+"$"):C),E.push(B)}g[x]={type:v,combineable:_=="Y",entries:E},c+=u}else if(v==="COMPOUNDRULE"){for(d=c+1,h=c+1+(u=parseInt(y[1],10));d<h;d++)f=(l=m[d]).split(/\s+/),this.compoundRules.push(f[1]);c+=u}else v==="REP"?(f=l.split(/\s+/)).length===3&&this.replacementTable.push([f[1],f[2]]):this.flags[v]=y[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function f(D,O){u.hasOwnProperty(D)||(u[D]=null),O.length>0&&(u[D]===null&&(u[D]=[]),u[D].push(O))}for(var c=1,d=l.length;c<d;c++){var p=l[c];if(p){var h=p.split("/",2),g=h[0];if(h.length>1){var m=this.parseRuleCodes(h[1]);"NEEDAFFIX"in this.flags&&m.indexOf(this.flags.NEEDAFFIX)!=-1||f(g,m);for(var y=0,v=m.length;y<v;y++){var x=m[y],_=this.rules[x];if(_)for(var E=this._applyRule(g,_),C=0,w=E.length;C<w;C++){var T=E[C];if(f(T,[]),_.combineable)for(var R=y+1;R<v;R++){var L=m[R],B=this.rules[L];if(B&&B.combineable&&_.type!=B.type)for(var P=this._applyRule(T,B),S=0,k=P.length;S<k;S++)f(P[S],[])}}x in this.compoundRuleCodes&&this.compoundRuleCodes[x].push(g)}}else f(g.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,f=a.length;u<f;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,f=[],c=0,d=u.length;c<d;c++){var p=u[c];if(!p.match||a.match(p.match)){var h=a;if(p.remove&&(h=h.replace(p.remove,"")),l.type==="SFX"?h+=p.add:h=p.add+h,f.push(h),"continuationClasses"in p)for(var g=0,m=p.continuationClasses.length;g<m;g++){var y=this.rules[p.continuationClasses[g]];y&&(f=f.concat(this._applyRule(h,y)))}}}return f},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var f=l[0].toLowerCase()+l.substring(1);if(f!==l){if(this.hasFlag(f,"KEEPCASE"))return!1;if(this.checkExact(f))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,f=this.dictionaryTable[a];if(f===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(f===null)return!0;if(typeof f=="object"){for(l=0,u=f.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",f[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var f=0,c=this.replacementTable.length;f<c;f++){var d=this.replacementTable[f];if(a.indexOf(d[0])!==-1){var p=a.replace(d[0],d[1]);if(this.check(p))return[p]}}var h=this;function g(m,y){var v,x,_,E,C={},w=h.alphabet.length;if(typeof m=="string"){var T=m;(m={})[T]=!0}for(var T in m)for(v=0,_=T.length+1;v<_;v++){var R=[T.substring(0,v),T.substring(v)];if(R[1]&&(E=R[0]+R[1].substring(1),y&&!h.check(E)||(E in C?C[E]+=1:C[E]=1)),R[1].length>1&&R[1][1]!==R[1][0]&&(E=R[0]+R[1][1]+R[1][0]+R[1].substring(2),y&&!h.check(E)||(E in C?C[E]+=1:C[E]=1)),R[1]){var L=R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase";for(x=0;x<w;x++){var B=h.alphabet[x];L==="uppercase"&&(B=B.toUpperCase()),B!=R[1].substring(0,1)&&(E=R[0]+B+R[1].substring(1),y&&!h.check(E)||(E in C?C[E]+=1:C[E]=1))}}if(R[1])for(x=0;x<w;x++)L=R[0].substring(-1).toUpperCase()===R[0].substring(-1)&&R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase",B=h.alphabet[x],L==="uppercase"&&(B=B.toUpperCase()),E=R[0]+B+R[1],y&&!h.check(E)||(E in C?C[E]+=1:C[E]=1)}return C}return h.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(m){var y,v=g(m),x=g(v,!0);for(var _ in v)h.check(_)&&(_ in x?x[_]+=v[_]:x[_]=v[_]);var E=[];for(y in x)x.hasOwnProperty(y)&&E.push([y,x[y]]);E.sort(function(R,L){var B=R[1],P=L[1];return B<P?-1:B>P?1:L[0].localeCompare(R[0])}).reverse();var C=[],w="lowercase";m.toUpperCase()===m?w="uppercase":m.substr(0,1).toUpperCase()+m.substr(1).toLowerCase()===m&&(w="capitalized");var T=l;for(y=0;y<Math.min(T,E.length);y++)w==="uppercase"?E[y][0]=E[y][0].toUpperCase():w==="capitalized"&&(E[y][0]=E[y][0].substr(0,1).toUpperCase()+E[y][0].substr(1)),h.hasFlag(E[y][0],"NOSUGGEST")||C.indexOf(E[y][0])!=-1?T++:C.push(E[y][0]);return C}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=s)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(n,r,i){var o=n("codemirror");o.commands.tabAndIndentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentMore");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}},o.commands.shiftTabAndUnindentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentLess");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}}},{codemirror:10}],18:[function(n,r,i){var o=n("codemirror");n("codemirror/addon/edit/continuelist.js"),n("./codemirror/tablist"),n("codemirror/addon/display/fullscreen.js"),n("codemirror/mode/markdown/markdown.js"),n("codemirror/addon/mode/overlay.js"),n("codemirror/addon/display/placeholder.js"),n("codemirror/addon/display/autorefresh.js"),n("codemirror/addon/selection/mark-selection.js"),n("codemirror/addon/search/searchcursor.js"),n("codemirror/mode/gfm/gfm.js"),n("codemirror/mode/xml/xml.js");var s=n("codemirror-spell-checker"),a=n("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),f={toggleBold:_,toggleItalic:E,drawLink:W,toggleHeadingSmaller:R,toggleHeadingBigger:L,drawImage:Q,toggleBlockquote:T,toggleOrderedList:j,toggleUnorderedList:N,toggleCodeBlock:w,togglePreview:Ee,toggleStrikethrough:C,toggleHeading1:B,toggleHeading2:P,toggleHeading3:S,toggleHeading4:k,toggleHeading5:D,toggleHeading6:O,cleanBlock:q,drawTable:ne,drawHorizontalRule:ge,undo:we,redo:$e,toggleSideBySide:ve,toggleFullScreen:x},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var V,fe=!1;return V=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(V)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(V.substr(0,4)))&&(fe=!0),fe};function p(V){return V=l?V.replace("Ctrl","Cmd"):V.replace("Cmd","Ctrl")}function h(V,fe,he,me){var Oe=g(V,!1,fe,he,"button",me);Oe.classList.add("easymde-dropdown"),Oe.onclick=function(){Oe.focus()};var Me=document.createElement("div");Me.className="easymde-dropdown-content";for(var Be=0;Be<V.children.length;Be++){var We,Qe=V.children[Be];(We=g(typeof Qe=="string"&&Qe in Se?Se[Qe]:Qe,!0,fe,he,"button",me)).addEventListener("click",function(ut){ut.stopPropagation()},!1),Me.appendChild(We)}return Oe.appendChild(Me),Oe}function g(V,fe,he,me,Oe,Me){V=V||{};var Be=document.createElement(Oe);if(V.attributes)for(var We in V.attributes)Object.prototype.hasOwnProperty.call(V.attributes,We)&&Be.setAttribute(We,V.attributes[We]);var Qe=Me.options.toolbarButtonClassPrefix?Me.options.toolbarButtonClassPrefix+"-":"";Be.className=Qe+V.name,Be.setAttribute("type",Oe),he=he==null||he,V.text&&(Be.innerText=V.text),V.name&&V.name in me&&(f[V.name]=V.action),V.title&&he&&(Be.title=function(un,Wn,qn){var wr,Ao=un;return Wn&&qn[wr=function(Gi){for(var _i in f)if(f[_i]===Gi)return _i;return null}(Wn)]&&(Ao+=" ("+p(qn[wr])+")"),Ao}(V.title,V.action,me),l&&(Be.title=Be.title.replace("Ctrl",""),Be.title=Be.title.replace("Alt",""))),V.title&&Be.setAttribute("aria-label",V.title),V.noDisable&&Be.classList.add("no-disable"),V.noMobile&&Be.classList.add("no-mobile");var ut=[];V.className!==void 0&&(ut=V.className.split(" "));for(var Tt=[],Ut=0;Ut<ut.length;Ut++){var Kt=ut[Ut];Kt.match(/^fa([srlb]|(-[\w-]*)|$)/)?Tt.push(Kt):Be.classList.add(Kt)}if(Be.tabIndex=-1,Tt.length>0){for(var Pt=document.createElement("i"),bn=0;bn<Tt.length;bn++){var _n=Tt[bn];Pt.classList.add(_n)}Be.appendChild(Pt)}return V.icon!==void 0&&(Be.innerHTML=V.icon),V.action&&fe&&(typeof V.action=="function"?Be.onclick=function(un){un.preventDefault(),V.action(Me)}:typeof V.action=="string"&&(Be.onclick=function(un){un.preventDefault(),window.open(V.action,"_blank")})),Be}function m(){var V=document.createElement("i");return V.className="separator",V.innerHTML="|",V}function y(V,fe){fe=fe||V.getCursor("start");var he=V.getTokenAt(fe);if(!he.type)return{};for(var me,Oe,Me=he.type.split(" "),Be={},We=0;We<Me.length;We++)(me=Me[We])==="strong"?Be.bold=!0:me==="variable-2"?(Oe=V.getLine(fe.line),/^\s*\d+\.\s/.test(Oe)?Be["ordered-list"]=!0:Be["unordered-list"]=!0):me==="atom"?Be.quote=!0:me==="em"?Be.italic=!0:me==="quote"?Be.quote=!0:me==="strikethrough"?Be.strikethrough=!0:me==="comment"?Be.code=!0:me!=="link"||Be.image?me==="image"?Be.image=!0:me.match(/^header(-[1-6])?$/)&&(Be[me.replace("header","heading")]=!0):Be.link=!0;return Be}var v="";function x(V){var fe=V.codemirror;fe.setOption("fullScreen",!fe.getOption("fullScreen")),fe.getOption("fullScreen")?(v=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=v;var he=fe.getWrapperElement(),me=he.nextSibling;if(me.classList.contains("editor-preview-active-side"))if(V.options.sideBySideFullscreen===!1){var Oe=he.parentNode;fe.getOption("fullScreen")?Oe.classList.remove("sided--no-fullscreen"):Oe.classList.add("sided--no-fullscreen")}else ve(V);V.options.onToggleFullScreen&&V.options.onToggleFullScreen(fe.getOption("fullScreen")||!1),V.options.maxHeight!==void 0&&(fe.getOption("fullScreen")?(fe.getScrollerElement().style.removeProperty("height"),me.style.removeProperty("height")):(fe.getScrollerElement().style.height=V.options.maxHeight,V.setPreviewMaxHeight())),V.toolbar_div.classList.toggle("fullscreen"),V.toolbarElements&&V.toolbarElements.fullscreen&&V.toolbarElements.fullscreen.classList.toggle("active")}function _(V){zt(V,"bold",V.options.blockStyles.bold)}function E(V){zt(V,"italic",V.options.blockStyles.italic)}function C(V){zt(V,"strikethrough","~~")}function w(V){var fe=V.options.blockStyles.code;function he(_r){if(typeof _r!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof _r+": "+_r;return _r.styles&&_r.styles[2]&&_r.styles[2].indexOf("formatting-code-block")!==-1}function me(_r){return _r.state.base.base||_r.state.base}function Oe(_r,uo,Or,go,Zr){Or=Or||_r.getLineHandle(uo),go=go||_r.getTokenAt({line:uo,ch:1}),Zr=Zr||!!Or.text&&_r.getTokenAt({line:uo,ch:Or.text.length-1});var Fi=go.type?go.type.split(" "):[];return Zr&&me(Zr).indentedCode?"indented":Fi.indexOf("comment")!==-1&&(me(go).fencedChars||me(Zr).fencedChars||he(Or)?"fenced":"single")}var Me,Be,We,Qe=V.codemirror,ut=Qe.getCursor("start"),Tt=Qe.getCursor("end"),Ut=Qe.getTokenAt({line:ut.line,ch:ut.ch||1}),Kt=Qe.getLineHandle(ut.line),Pt=Oe(Qe,ut.line,Kt,Ut);if(Pt==="single"){var bn=Kt.text.slice(0,ut.ch).replace("`",""),_n=Kt.text.slice(ut.ch).replace("`","");Qe.replaceRange(bn+_n,{line:ut.line,ch:0},{line:ut.line,ch:99999999999999}),ut.ch--,ut!==Tt&&Tt.ch--,Qe.setSelection(ut,Tt),Qe.focus()}else if(Pt==="fenced")if(ut.line!==Tt.line||ut.ch!==Tt.ch){for(Me=ut.line;Me>=0&&!he(Kt=Qe.getLineHandle(Me));Me--);var un,Wn,qn,wr,Ao=me(Qe.getTokenAt({line:Me,ch:1})).fencedChars;he(Qe.getLineHandle(ut.line))?(un="",Wn=ut.line):he(Qe.getLineHandle(ut.line-1))?(un="",Wn=ut.line-1):(un=Ao+`
`,Wn=ut.line),he(Qe.getLineHandle(Tt.line))?(qn="",wr=Tt.line,Tt.ch===0&&(wr+=1)):Tt.ch!==0&&he(Qe.getLineHandle(Tt.line+1))?(qn="",wr=Tt.line+1):(qn=Ao+`
`,wr=Tt.line+1),Tt.ch===0&&(wr-=1),Qe.operation(function(){Qe.replaceRange(qn,{line:wr,ch:0},{line:wr+(qn?0:1),ch:0}),Qe.replaceRange(un,{line:Wn,ch:0},{line:Wn+(un?0:1),ch:0})}),Qe.setSelection({line:Wn+(un?1:0),ch:0},{line:wr+(un?1:-1),ch:0}),Qe.focus()}else{var Gi=ut.line;if(he(Qe.getLineHandle(ut.line))&&(Oe(Qe,ut.line+1)==="fenced"?(Me=ut.line,Gi=ut.line+1):(Be=ut.line,Gi=ut.line-1)),Me===void 0)for(Me=Gi;Me>=0&&!he(Kt=Qe.getLineHandle(Me));Me--);if(Be===void 0)for(We=Qe.lineCount(),Be=Gi;Be<We&&!he(Kt=Qe.getLineHandle(Be));Be++);Qe.operation(function(){Qe.replaceRange("",{line:Me,ch:0},{line:Me+1,ch:0}),Qe.replaceRange("",{line:Be-1,ch:0},{line:Be,ch:0})}),Qe.focus()}else if(Pt==="indented"){if(ut.line!==Tt.line||ut.ch!==Tt.ch)Me=ut.line,Be=Tt.line,Tt.ch===0&&Be--;else{for(Me=ut.line;Me>=0;Me--)if(!(Kt=Qe.getLineHandle(Me)).text.match(/^\s*$/)&&Oe(Qe,Me,Kt)!=="indented"){Me+=1;break}for(We=Qe.lineCount(),Be=ut.line;Be<We;Be++)if(!(Kt=Qe.getLineHandle(Be)).text.match(/^\s*$/)&&Oe(Qe,Be,Kt)!=="indented"){Be-=1;break}}var _i=Qe.getLineHandle(Be+1),$s=_i&&Qe.getTokenAt({line:Be+1,ch:_i.text.length-1});$s&&me($s).indentedCode&&Qe.replaceRange(`
`,{line:Be+1,ch:0});for(var tr=Me;tr<=Be;tr++)Qe.indentLine(tr,"subtract");Qe.focus()}else{var yi=ut.line===Tt.line&&ut.ch===Tt.ch&&ut.ch===0,pi=ut.line!==Tt.line;yi||pi?function(_r,uo,Or,go){var Zr=uo.line+1,Fi=Or.line+1,or=uo.line!==Or.line,Fe=go+`
`,Xe=`
`+go;or&&Fi++,or&&Or.ch===0&&(Xe=go+`
`,Fi--),Ve(_r,!1,[Fe,Xe]),_r.setSelection({line:Zr,ch:0},{line:Fi,ch:0})}(Qe,ut,Tt,fe):Ve(Qe,!1,["`","`"])}}function T(V){ft(V.codemirror,"quote")}function R(V){Ue(V.codemirror,"smaller")}function L(V){Ue(V.codemirror,"bigger")}function B(V){Ue(V.codemirror,void 0,1)}function P(V){Ue(V.codemirror,void 0,2)}function S(V){Ue(V.codemirror,void 0,3)}function k(V){Ue(V.codemirror,void 0,4)}function D(V){Ue(V.codemirror,void 0,5)}function O(V){Ue(V.codemirror,void 0,6)}function N(V){var fe=V.codemirror,he="*";["-","+","*"].includes(V.options.unorderedListStyle)&&(he=V.options.unorderedListStyle),ft(fe,"unordered-list",he)}function j(V){ft(V.codemirror,"ordered-list")}function q(V){(function(fe){if(!fe.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var he,me=fe.getCursor("start"),Oe=fe.getCursor("end"),Me=me.line;Me<=Oe.line;Me++)he=(he=fe.getLine(Me)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),fe.replaceRange(he,{line:Me,ch:0},{line:Me,ch:99999999999999})})(V.codemirror)}function W(V){var fe=V.options,he="https://";if(fe.promptURLs){var me=prompt(fe.promptTexts.link,he);if(!me)return!1;he=ee(me)}ht(V,"link",fe.insertTexts.link,he)}function Q(V){var fe=V.options,he="https://";if(fe.promptURLs){var me=prompt(fe.promptTexts.image,he);if(!me)return!1;he=ee(me)}ht(V,"image",fe.insertTexts.image,he)}function ee(V){return encodeURI(V).replace(/([\\()])/g,"\\$1")}function H(V){V.openBrowseFileWindow()}function se(V,fe){var he=V.codemirror,me=y(he),Oe=V.options,Me=fe.substr(fe.lastIndexOf("/")+1),Be=Me.substring(Me.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Be))Ve(he,me.image,Oe.insertTexts.uploadedImage,fe);else{var We=Oe.insertTexts.link;We[0]="["+Me,Ve(he,me.link,We,fe)}V.updateStatusBar("upload-image",V.options.imageTexts.sbOnUploaded.replace("#image_name#",Me)),setTimeout(function(){V.updateStatusBar("upload-image",V.options.imageTexts.sbInit)},1e3)}function ne(V){var fe=V.codemirror,he=y(fe),me=V.options;Ve(fe,he.table,me.insertTexts.table)}function ge(V){var fe=V.codemirror,he=y(fe),me=V.options;Ve(fe,he.image,me.insertTexts.horizontalRule)}function we(V){var fe=V.codemirror;fe.undo(),fe.focus()}function $e(V){var fe=V.codemirror;fe.redo(),fe.focus()}function ve(V){var fe=V.codemirror,he=fe.getWrapperElement(),me=he.nextSibling,Oe=V.toolbarElements&&V.toolbarElements["side-by-side"],Me=!1,Be=he.parentNode;me.classList.contains("editor-preview-active-side")?(V.options.sideBySideFullscreen===!1&&Be.classList.remove("sided--no-fullscreen"),me.classList.remove("editor-preview-active-side"),Oe&&Oe.classList.remove("active"),he.classList.remove("CodeMirror-sided")):(setTimeout(function(){fe.getOption("fullScreen")||(V.options.sideBySideFullscreen===!1?Be.classList.add("sided--no-fullscreen"):x(V)),me.classList.add("editor-preview-active-side")},1),Oe&&Oe.classList.add("active"),he.classList.add("CodeMirror-sided"),Me=!0);var We=he.lastChild;if(We.classList.contains("editor-preview-active")){We.classList.remove("editor-preview-active");var Qe=V.toolbarElements.preview,ut=V.toolbar_div;Qe.classList.remove("active"),ut.classList.remove("disabled-for-preview")}if(fe.sideBySideRenderingFunction||(fe.sideBySideRenderingFunction=function(){var Ut=V.options.previewRender(V.value(),me);Ut!=null&&(me.innerHTML=Ut)}),Me){var Tt=V.options.previewRender(V.value(),me);Tt!=null&&(me.innerHTML=Tt),fe.on("update",fe.sideBySideRenderingFunction)}else fe.off("update",fe.sideBySideRenderingFunction);fe.refresh()}function Ee(V){var fe=V.codemirror,he=fe.getWrapperElement(),me=V.toolbar_div,Oe=!!V.options.toolbar&&V.toolbarElements.preview,Me=he.lastChild;if(fe.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&ve(V),!Me||!Me.classList.contains("editor-preview-full")){if((Me=document.createElement("div")).className="editor-preview-full",V.options.previewClass)if(Array.isArray(V.options.previewClass))for(var Be=0;Be<V.options.previewClass.length;Be++)Me.classList.add(V.options.previewClass[Be]);else typeof V.options.previewClass=="string"&&Me.classList.add(V.options.previewClass);he.appendChild(Me)}Me.classList.contains("editor-preview-active")?(Me.classList.remove("editor-preview-active"),Oe&&(Oe.classList.remove("active"),me.classList.remove("disabled-for-preview"))):(setTimeout(function(){Me.classList.add("editor-preview-active")},1),Oe&&(Oe.classList.add("active"),me.classList.add("disabled-for-preview")));var We=V.options.previewRender(V.value(),Me);We!==null&&(Me.innerHTML=We)}function Ve(V,fe,he,me){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var Oe,Me=he[0],Be=he[1],We={},Qe={};Object.assign(We,V.getCursor("start")),Object.assign(Qe,V.getCursor("end")),me&&(Me=Me.replace("#url#",me),Be=Be.replace("#url#",me)),fe?(Me=(Oe=V.getLine(We.line)).slice(0,We.ch),Be=Oe.slice(We.ch),V.replaceRange(Me+Be,{line:We.line,ch:0})):(Oe=V.getSelection(),V.replaceSelection(Me+Oe+Be),We.ch+=Me.length,We!==Qe&&(Qe.ch+=Me.length)),V.setSelection(We,Qe),V.focus()}}function Ue(V,fe,he){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var me=V.getCursor("start"),Oe=V.getCursor("end"),Me=me.line;Me<=Oe.line;Me++)(function(Be){var We=V.getLine(Be),Qe=We.search(/[^#]/);We=fe!==void 0?Qe<=0?fe=="bigger"?"###### "+We:"# "+We:Qe==6&&fe=="smaller"?We.substr(7):Qe==1&&fe=="bigger"?We.substr(2):fe=="bigger"?We.substr(1):"#"+We:Qe<=0?"#".repeat(he)+" "+We:Qe==he?We.substr(Qe+1):"#".repeat(he)+" "+We.substr(Qe+1),V.replaceRange(We,{line:Be,ch:0},{line:Be,ch:99999999999999})})(Me);V.focus()}}function ft(V,fe,he){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var me=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,Oe=/^\s*/,Me=y(V),Be=V.getCursor("start"),We=V.getCursor("end"),Qe={quote:/^(\s*)>\s+/,"unordered-list":me,"ordered-list":me},ut=function(Kt,Pt,bn){var _n=me.exec(Pt),un=function(Wn,qn){return{quote:">","unordered-list":he,"ordered-list":"%%i."}[Wn].replace("%%i",qn)}(Kt,Tt);return _n!==null?(function(Wn,qn){var wr=new RegExp({quote:">","unordered-list":"\\"+he,"ordered-list":"\\d+."}[Wn]);return qn&&wr.test(qn)}(Kt,_n[2])&&(un=""),Pt=_n[1]+un+_n[3]+Pt.replace(Oe,"").replace(Qe[Kt],"$1")):bn==0&&(Pt=un+" "+Pt),Pt},Tt=1,Ut=Be.line;Ut<=We.line;Ut++)(function(Kt){var Pt=V.getLine(Kt);Me[fe]?Pt=Pt.replace(Qe[fe],"$1"):(fe=="unordered-list"&&(Pt=ut("ordered-list",Pt,!0)),Pt=ut(fe,Pt,!1),Tt+=1),V.replaceRange(Pt,{line:Kt,ch:0},{line:Kt,ch:99999999999999})})(Ut);V.focus()}}function ht(V,fe,he,me){if(V.codemirror&&!V.isPreviewActive()){var Oe=V.codemirror,Me=y(Oe)[fe];if(Me){var Be=Oe.getCursor("start"),We=Oe.getCursor("end"),Qe=Oe.getLine(Be.line),ut=Qe.slice(0,Be.ch),Tt=Qe.slice(Be.ch);fe=="link"?ut=ut.replace(/(.*)[^!]\[/,"$1"):fe=="image"&&(ut=ut.replace(/(.*)!\[$/,"$1")),Tt=Tt.replace(/]\(.*?\)/,""),Oe.replaceRange(ut+Tt,{line:Be.line,ch:0},{line:Be.line,ch:99999999999999}),Be.ch-=he[0].length,Be!==We&&(We.ch-=he[0].length),Oe.setSelection(Be,We),Oe.focus()}else Ve(Oe,Me,he,me)}}function zt(V,fe,he,me){if(V.codemirror&&!V.isPreviewActive()){me=me===void 0?he:me;var Oe,Me=V.codemirror,Be=y(Me),We=he,Qe=me,ut=Me.getCursor("start"),Tt=Me.getCursor("end");Be[fe]?(We=(Oe=Me.getLine(ut.line)).slice(0,ut.ch),Qe=Oe.slice(ut.ch),fe=="bold"?(We=We.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Qe=Qe.replace(/(\*\*|__)/,"")):fe=="italic"?(We=We.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Qe=Qe.replace(/(\*|_)/,"")):fe=="strikethrough"&&(We=We.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Qe=Qe.replace(/(\*\*|~~)/,"")),Me.replaceRange(We+Qe,{line:ut.line,ch:0},{line:ut.line,ch:99999999999999}),fe=="bold"||fe=="strikethrough"?(ut.ch-=2,ut!==Tt&&(Tt.ch-=2)):fe=="italic"&&(ut.ch-=1,ut!==Tt&&(Tt.ch-=1))):(Oe=Me.getSelection(),fe=="bold"?Oe=(Oe=Oe.split("**").join("")).split("__").join(""):fe=="italic"?Oe=(Oe=Oe.split("*").join("")).split("_").join(""):fe=="strikethrough"&&(Oe=Oe.split("~~").join("")),Me.replaceSelection(We+Oe+Qe),ut.ch+=he.length,Tt.ch=ut.ch+Oe.length),Me.setSelection(ut,Tt),Me.focus()}}function $t(V,fe){if(Math.abs(V)<1024)return""+V+fe[0];var he=0;do V/=1024,++he;while(Math.abs(V)>=1024&&he<fe.length);return""+V.toFixed(1)+fe[he]}function Tn(V,fe){for(var he in fe)Object.prototype.hasOwnProperty.call(fe,he)&&(fe[he]instanceof Array?V[he]=fe[he].concat(V[he]instanceof Array?V[he]:[]):fe[he]!==null&&typeof fe[he]=="object"&&fe[he].constructor===Object?V[he]=Tn(V[he]||{},fe[he]):V[he]=fe[he]);return V}function it(V){for(var fe=1;fe<arguments.length;fe++)V=Tn(V,arguments[fe]);return V}function Te(V){var fe=V.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),he=0;if(fe===null)return he;for(var me=0;me<fe.length;me++)fe[me].charCodeAt(0)>=19968?he+=fe[me].length:he+=1;return he}var ye={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},Se={bold:{name:"bold",action:_,className:ye.bold,title:"Bold",default:!0},italic:{name:"italic",action:E,className:ye.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:C,className:ye.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:R,className:ye.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:R,className:ye["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:L,className:ye["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:B,className:ye["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:P,className:ye["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:S,className:ye["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:w,className:ye.code,title:"Code"},quote:{name:"quote",action:T,className:ye.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:N,className:ye["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:j,className:ye["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:q,className:ye["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:W,className:ye.link,title:"Create Link",default:!0},image:{name:"image",action:Q,className:ye.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:H,className:ye["upload-image"],title:"Import an image"},table:{name:"table",action:ne,className:ye.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:ge,className:ye["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:Ee,className:ye.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:ve,className:ye["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:x,className:ye.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:ye.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:we,className:ye.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:$e,className:ye.redo,noDisable:!0,title:"Redo"}},Re={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},U={link:"URL for the link:",image:"URL of the image:"},Z={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},re={bold:"**",code:"```",italic:"*"},ie={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},be={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function Ce(V){(V=V||{}).parent=this;var fe=!0;if(V.autoDownloadFontAwesome===!1&&(fe=!1),V.autoDownloadFontAwesome!==!0)for(var he=document.styleSheets,me=0;me<he.length;me++)he[me].href&&he[me].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(fe=!1);if(fe){var Oe=document.createElement("link");Oe.rel="stylesheet",Oe.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(Oe)}if(V.element)this.element=V.element;else if(V.element===null)return void console.log("EasyMDE: Error. No element was found.");if(V.toolbar===void 0)for(var Me in V.toolbar=[],Se)Object.prototype.hasOwnProperty.call(Se,Me)&&(Me.indexOf("separator-")!=-1&&V.toolbar.push("|"),(Se[Me].default===!0||V.showIcons&&V.showIcons.constructor===Array&&V.showIcons.indexOf(Me)!=-1)&&V.toolbar.push(Me));if(Object.prototype.hasOwnProperty.call(V,"previewClass")||(V.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(V,"status")||(V.status=["autosave","lines","words","cursor"],V.uploadImage&&V.status.unshift("upload-image")),V.previewRender||(V.previewRender=function(We){return this.parent.markdown(We)}),V.parsingConfig=it({highlightFormatting:!0},V.parsingConfig||{}),V.insertTexts=it({},Re,V.insertTexts||{}),V.promptTexts=it({},U,V.promptTexts||{}),V.blockStyles=it({},re,V.blockStyles||{}),V.autosave!=null&&(V.autosave.timeFormat=it({},Z,V.autosave.timeFormat||{})),V.iconClassMap=it({},ye,V.iconClassMap||{}),V.shortcuts=it({},c,V.shortcuts||{}),V.maxHeight=V.maxHeight||void 0,V.direction=V.direction||"ltr",V.maxHeight!==void 0?V.minHeight=V.maxHeight:V.minHeight=V.minHeight||"300px",V.errorCallback=V.errorCallback||function(We){alert(We)},V.uploadImage=V.uploadImage||!1,V.imageMaxSize=V.imageMaxSize||2097152,V.imageAccept=V.imageAccept||"image/png, image/jpeg, image/gif, image/avif",V.imageTexts=it({},ie,V.imageTexts||{}),V.errorMessages=it({},be,V.errorMessages||{}),V.imagePathAbsolute=V.imagePathAbsolute||!1,V.imageCSRFName=V.imageCSRFName||"csrfmiddlewaretoken",V.imageCSRFHeader=V.imageCSRFHeader||!1,V.imageInputName=V.imageInputName||"image",V.autosave!=null&&V.autosave.unique_id!=null&&V.autosave.unique_id!=""&&(V.autosave.uniqueId=V.autosave.unique_id),V.overlayMode&&V.overlayMode.combine===void 0&&(V.overlayMode.combine=!0),this.options=V,this.render(),!V.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(V.initialValue),V.uploadImage){var Be=this;this.codemirror.on("dragenter",function(We,Qe){Be.updateStatusBar("upload-image",Be.options.imageTexts.sbOnDragEnter),Qe.stopPropagation(),Qe.preventDefault()}),this.codemirror.on("dragend",function(We,Qe){Be.updateStatusBar("upload-image",Be.options.imageTexts.sbInit),Qe.stopPropagation(),Qe.preventDefault()}),this.codemirror.on("dragleave",function(We,Qe){Be.updateStatusBar("upload-image",Be.options.imageTexts.sbInit),Qe.stopPropagation(),Qe.preventDefault()}),this.codemirror.on("dragover",function(We,Qe){Be.updateStatusBar("upload-image",Be.options.imageTexts.sbOnDragEnter),Qe.stopPropagation(),Qe.preventDefault()}),this.codemirror.on("drop",function(We,Qe){Qe.stopPropagation(),Qe.preventDefault(),V.imageUploadFunction?Be.uploadImagesUsingCustomFunction(V.imageUploadFunction,Qe.dataTransfer.files):Be.uploadImages(Qe.dataTransfer.files)}),this.codemirror.on("paste",function(We,Qe){V.imageUploadFunction?Be.uploadImagesUsingCustomFunction(V.imageUploadFunction,Qe.clipboardData.files):Be.uploadImages(Qe.clipboardData.files)})}}function je(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}Ce.prototype.uploadImages=function(V,fe,he){if(V.length!==0){for(var me=[],Oe=0;Oe<V.length;Oe++)me.push(V[Oe].name),this.uploadImage(V[Oe],fe,he);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",me.join(", ")))}},Ce.prototype.uploadImagesUsingCustomFunction=function(V,fe){if(fe.length!==0){for(var he=[],me=0;me<fe.length;me++)he.push(fe[me].name),this.uploadImageUsingCustomFunction(V,fe[me]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",he.join(", ")))}},Ce.prototype.updateStatusBar=function(V,fe){if(this.gui.statusbar){var he=this.gui.statusbar.getElementsByClassName(V);he.length===1?this.gui.statusbar.getElementsByClassName(V)[0].textContent=fe:he.length===0?console.log("EasyMDE: status bar item "+V+" was not found."):console.log("EasyMDE: Several status bar items named "+V+" was found.")}},Ce.prototype.markdown=function(V){if(a){var fe;if(fe=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?fe.breaks=!1:fe.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var he=this.options.renderingConfig.hljs||window.hljs;he&&(fe.highlight=function(Oe,Me){return Me&&he.getLanguage(Me)?he.highlight(Me,Oe).value:he.highlightAuto(Oe).value})}a.use(fe);var me=a.parse(V);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(me=this.options.renderingConfig.sanitizerFunction.call(this,me)),me=function(Oe){for(var Me=new DOMParser().parseFromString(Oe,"text/html"),Be=Me.getElementsByTagName("li"),We=0;We<Be.length;We++)for(var Qe=Be[We],ut=0;ut<Qe.children.length;ut++){var Tt=Qe.children[ut];Tt instanceof HTMLInputElement&&Tt.type==="checkbox"&&(Qe.style.marginLeft="-1.5em",Qe.style.listStyleType="none")}return Me.documentElement.innerHTML}(me=function(Oe){for(var Me;(Me=u.exec(Oe))!==null;){var Be=Me[0];if(Be.indexOf("target=")===-1){var We=Be.replace(/>$/,' target="_blank">');Oe=Oe.replace(Be,We)}}return Oe}(me))}},Ce.prototype.render=function(V){if(V||(V=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==V){this.element=V;var fe,he,me=this.options,Oe=this,Me={};for(var Be in me.shortcuts)me.shortcuts[Be]!==null&&f[Be]!==null&&function(Pt){Me[p(me.shortcuts[Pt])]=function(){var bn=f[Pt];typeof bn=="function"?bn(Oe):typeof bn=="string"&&window.open(bn,"_blank")}}(Be);if(Me.Enter="newlineAndIndentContinueMarkdownList",Me.Tab="tabAndIndentMarkdownList",Me["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Me.Esc=function(Pt){Pt.getOption("fullScreen")&&x(Oe)},this.documentOnKeyDown=function(Pt){(Pt=Pt||window.event).keyCode==27&&Oe.codemirror.getOption("fullScreen")&&x(Oe)},document.addEventListener("keydown",this.documentOnKeyDown,!1),me.overlayMode?(o.defineMode("overlay-mode",function(Pt){return o.overlayMode(o.getMode(Pt,me.spellChecker!==!1?"spell-checker":"gfm"),me.overlayMode.mode,me.overlayMode.combine)}),fe="overlay-mode",(he=me.parsingConfig).gitHubSpice=!1):((fe=me.parsingConfig).name="gfm",fe.gitHubSpice=!1),me.spellChecker!==!1&&(fe="spell-checker",(he=me.parsingConfig).name="gfm",he.gitHubSpice=!1,typeof me.spellChecker=="function"?me.spellChecker({codeMirrorInstance:o}):s({codeMirrorInstance:o})),this.codemirror=o.fromTextArea(V,{mode:fe,backdrop:he,theme:me.theme!=null?me.theme:"easymde",tabSize:me.tabSize!=null?me.tabSize:2,indentUnit:me.tabSize!=null?me.tabSize:2,indentWithTabs:me.indentWithTabs!==!1,lineNumbers:me.lineNumbers===!0,autofocus:me.autofocus===!0,extraKeys:Me,direction:me.direction,lineWrapping:me.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:me.placeholder||V.getAttribute("placeholder")||"",styleSelectedText:me.styleSelectedText!=null?me.styleSelectedText:!d(),scrollbarStyle:me.scrollbarStyle!=null?me.scrollbarStyle:"native",configureMouse:function(Pt,bn,_n){return{addNew:!1}},inputStyle:me.inputStyle!=null?me.inputStyle:d()?"contenteditable":"textarea",spellcheck:me.nativeSpellcheck==null||me.nativeSpellcheck,autoRefresh:me.autoRefresh!=null&&me.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=me.minHeight,me.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=me.maxHeight),me.forceSync===!0){var We=this.codemirror;We.on("change",function(){We.save()})}this.gui={};var Qe=document.createElement("div");Qe.classList.add("EasyMDEContainer"),Qe.setAttribute("role","application");var ut=this.codemirror.getWrapperElement();ut.parentNode.insertBefore(Qe,ut),Qe.appendChild(ut),me.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),me.status!==!1&&(this.gui.statusbar=this.createStatusbar()),me.autosave!=null&&me.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(Oe._autosave_timeout),Oe._autosave_timeout=setTimeout(function(){Oe.autosave()},Oe.options.autosave.submit_delay||Oe.options.autosave.delay||1e3)}));var Tt=this;this.codemirror.on("update",function(){me.previewImagesInEditor&&Qe.querySelectorAll(".cm-image-marker").forEach(function(Pt){var bn=Pt.parentElement;if(bn.innerText.match(/^!\[.*?\]\(.*\)/g)&&!bn.hasAttribute("data-img-src")){var _n=bn.innerText.match(/!\[.*?\]\((.*?)\)/);if(window.EMDEimagesCache||(window.EMDEimagesCache={}),_n&&_n.length>=2){var un=_n[1];if(me.imagesPreviewHandler){var Wn=me.imagesPreviewHandler(_n[1]);typeof Wn=="string"&&(un=Wn)}if(window.EMDEimagesCache[un])Kt(bn,window.EMDEimagesCache[un]);else{window.EMDEimagesCache[un]={};var qn=document.createElement("img");qn.onload=function(){window.EMDEimagesCache[un]={naturalWidth:qn.naturalWidth,naturalHeight:qn.naturalHeight,url:un},Kt(bn,window.EMDEimagesCache[un])},qn.src=un}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(me.autofocus===!0||V.autofocus)&&this.codemirror.focus();var Ut=this.codemirror;setTimeout((function(){Ut.refresh()}).bind(Ut),0)}function Kt(Pt,bn){var _n,un,Wn=new URL(bn.url,document.baseURI).href;Pt.setAttribute("data-img-src",Wn),Pt.setAttribute("style","--bg-image:url("+Wn+");--width:"+bn.naturalWidth+"px;--height:"+(_n=bn.naturalWidth,un=bn.naturalHeight,_n<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?un+"px":un/_n*100+"%")),Tt.codemirror.setSize()}},Ce.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},Ce.prototype.autosave=function(){if(je()){var V=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(V.element.form!=null&&V.element.form!=null&&V.element.form.addEventListener("submit",function(){clearTimeout(V.autosaveTimeoutId),V.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+V.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var fe=V.value();fe!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,fe):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var he=document.getElementById("autosaved");if(he!=null&&he!=null&&he!=""){var me=new Date,Oe=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(me),Me=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;he.innerHTML=Me+Oe}}else console.log("EasyMDE: localStorage not available, cannot autosave")},Ce.prototype.clearAutosavedValue=function(){if(je()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},Ce.prototype.openBrowseFileWindow=function(V,fe){var he=this,me=this.gui.toolbar.getElementsByClassName("imageInput")[0];me.click(),me.addEventListener("change",function Oe(Me){he.options.imageUploadFunction?he.uploadImagesUsingCustomFunction(he.options.imageUploadFunction,Me.target.files):he.uploadImages(Me.target.files,V,fe),me.removeEventListener("change",Oe)})},Ce.prototype.uploadImage=function(V,fe,he){var me=this;function Oe(Qe){me.updateStatusBar("upload-image",Qe),setTimeout(function(){me.updateStatusBar("upload-image",me.options.imageTexts.sbInit)},1e4),he&&typeof he=="function"&&he(Qe),me.options.errorCallback(Qe)}function Me(Qe){var ut=me.options.imageTexts.sizeUnits.split(",");return Qe.replace("#image_name#",V.name).replace("#image_size#",$t(V.size,ut)).replace("#image_max_size#",$t(me.options.imageMaxSize,ut))}if(fe=fe||function(Qe){se(me,Qe)},V.size>this.options.imageMaxSize)Oe(Me(this.options.errorMessages.fileTooLarge));else{var Be=new FormData;Be.append("image",V),me.options.imageCSRFToken&&!me.options.imageCSRFHeader&&Be.append(me.options.imageCSRFName,me.options.imageCSRFToken);var We=new XMLHttpRequest;We.upload.onprogress=function(Qe){if(Qe.lengthComputable){var ut=""+Math.round(100*Qe.loaded/Qe.total);me.updateStatusBar("upload-image",me.options.imageTexts.sbProgress.replace("#file_name#",V.name).replace("#progress#",ut))}},We.open("POST",this.options.imageUploadEndpoint),me.options.imageCSRFToken&&me.options.imageCSRFHeader&&We.setRequestHeader(me.options.imageCSRFName,me.options.imageCSRFToken),We.onload=function(){try{var Qe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void Oe(Me(me.options.errorMessages.importError))}this.status===200&&Qe&&!Qe.error&&Qe.data&&Qe.data.filePath?fe((me.options.imagePathAbsolute?"":window.location.origin+"/")+Qe.data.filePath):Qe.error&&Qe.error in me.options.errorMessages?Oe(Me(me.options.errorMessages[Qe.error])):Qe.error?Oe(Me(Qe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),Oe(Me(me.options.errorMessages.importError)))},We.onerror=function(Qe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Qe.target.status+" ("+Qe.target.statusText+")"),Oe(me.options.errorMessages.importError)},We.send(Be)}},Ce.prototype.uploadImageUsingCustomFunction=function(V,fe){var he=this;V.apply(this,[fe,function(me){se(he,me)},function(me){var Oe=function(Me){var Be=he.options.imageTexts.sizeUnits.split(",");return Me.replace("#image_name#",fe.name).replace("#image_size#",$t(fe.size,Be)).replace("#image_max_size#",$t(he.options.imageMaxSize,Be))}(me);he.updateStatusBar("upload-image",Oe),setTimeout(function(){he.updateStatusBar("upload-image",he.options.imageTexts.sbInit)},1e4),he.options.errorCallback(Oe)}])},Ce.prototype.setPreviewMaxHeight=function(){var V=this.codemirror.getWrapperElement(),fe=V.nextSibling,he=parseInt(window.getComputedStyle(V).paddingTop),me=parseInt(window.getComputedStyle(V).borderTopWidth),Oe=(parseInt(this.options.maxHeight)+2*he+2*me).toString()+"px";fe.style.height=Oe},Ce.prototype.createSideBySide=function(){var V=this.codemirror,fe=V.getWrapperElement(),he=fe.nextSibling;if(!he||!he.classList.contains("editor-preview-side")){if((he=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var me=0;me<this.options.previewClass.length;me++)he.classList.add(this.options.previewClass[me]);else typeof this.options.previewClass=="string"&&he.classList.add(this.options.previewClass);fe.parentNode.insertBefore(he,fe.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return he;var Oe=!1,Me=!1;return V.on("scroll",function(Be){if(Oe)Oe=!1;else{Me=!0;var We=Be.getScrollInfo().height-Be.getScrollInfo().clientHeight,Qe=parseFloat(Be.getScrollInfo().top)/We,ut=(he.scrollHeight-he.clientHeight)*Qe;he.scrollTop=ut}}),he.onscroll=function(){if(Me)Me=!1;else{Oe=!0;var Be=he.scrollHeight-he.clientHeight,We=parseFloat(he.scrollTop)/Be,Qe=(V.getScrollInfo().height-V.getScrollInfo().clientHeight)*We;V.scrollTo(0,Qe)}},he},Ce.prototype.createToolbar=function(V){if((V=V||this.options.toolbar)&&V.length!==0){var fe;for(fe=0;fe<V.length;fe++)Se[V[fe]]!=null&&(V[fe]=Se[V[fe]]);var he=document.createElement("div");he.className="editor-toolbar",he.setAttribute("role","toolbar");var me=this,Oe={};for(me.toolbar=V,fe=0;fe<V.length;fe++)if((V[fe].name!="guide"||me.options.toolbarGuideIcon!==!1)&&!(me.options.hideIcons&&me.options.hideIcons.indexOf(V[fe].name)!=-1||(V[fe].name=="fullscreen"||V[fe].name=="side-by-side")&&d())){if(V[fe]==="|"){for(var Me=!1,Be=fe+1;Be<V.length;Be++)V[Be]==="|"||me.options.hideIcons&&me.options.hideIcons.indexOf(V[Be].name)!=-1||(Me=!0);if(!Me)continue}(function(ut){var Tt;if(Tt=ut==="|"?m():ut.children?h(ut,me.options.toolbarTips,me.options.shortcuts,me):g(ut,!0,me.options.toolbarTips,me.options.shortcuts,"button",me),Oe[ut.name||ut]=Tt,he.appendChild(Tt),ut.name==="upload-image"){var Ut=document.createElement("input");Ut.className="imageInput",Ut.type="file",Ut.multiple=!0,Ut.name=me.options.imageInputName,Ut.accept=me.options.imageAccept,Ut.style.display="none",Ut.style.opacity=0,he.appendChild(Ut)}})(V[fe])}me.toolbar_div=he,me.toolbarElements=Oe;var We=this.codemirror;We.on("cursorActivity",function(){var ut=y(We);for(var Tt in Oe)(function(Ut){var Kt=Oe[Ut];ut[Ut]?Kt.classList.add("active"):Ut!="fullscreen"&&Ut!="side-by-side"&&Kt.classList.remove("active")})(Tt)});var Qe=We.getWrapperElement();return Qe.parentNode.insertBefore(he,Qe),he}},Ce.prototype.createStatusbar=function(V){V=V||this.options.status;var fe=this.options,he=this.codemirror;if(V&&V.length!==0){var me,Oe,Me,Be,We=[];for(me=0;me<V.length;me++)if(Oe=void 0,Me=void 0,Be=void 0,typeof V[me]=="object")We.push({className:V[me].className,defaultValue:V[me].defaultValue,onUpdate:V[me].onUpdate,onActivity:V[me].onActivity});else{var Qe=V[me];Qe==="words"?(Be=function(Pt){Pt.innerHTML=Te(he.getValue())},Oe=function(Pt){Pt.innerHTML=Te(he.getValue())}):Qe==="lines"?(Be=function(Pt){Pt.innerHTML=he.lineCount()},Oe=function(Pt){Pt.innerHTML=he.lineCount()}):Qe==="cursor"?(Be=function(Pt){Pt.innerHTML="1:1"},Me=function(Pt){var bn=he.getCursor(),_n=bn.line+1,un=bn.ch+1;Pt.innerHTML=_n+":"+un}):Qe==="autosave"?Be=function(Pt){fe.autosave!=null&&fe.autosave.enabled===!0&&Pt.setAttribute("id","autosaved")}:Qe==="upload-image"&&(Be=function(Pt){Pt.innerHTML=fe.imageTexts.sbInit}),We.push({className:Qe,defaultValue:Be,onUpdate:Oe,onActivity:Me})}var ut=document.createElement("div");for(ut.className="editor-statusbar",me=0;me<We.length;me++){var Tt=We[me],Ut=document.createElement("span");Ut.className=Tt.className,typeof Tt.defaultValue=="function"&&Tt.defaultValue(Ut),typeof Tt.onUpdate=="function"&&this.codemirror.on("update",function(Pt,bn){return function(){bn.onUpdate(Pt)}}(Ut,Tt)),typeof Tt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(Pt,bn){return function(){bn.onActivity(Pt)}}(Ut,Tt)),ut.appendChild(Ut)}var Kt=this.codemirror.getWrapperElement();return Kt.parentNode.insertBefore(ut,Kt.nextSibling),ut}},Ce.prototype.value=function(V){var fe=this.codemirror;if(V===void 0)return fe.getValue();if(fe.getDoc().setValue(V),this.isPreviewActive()){var he=fe.getWrapperElement().lastChild,me=this.options.previewRender(V,he);me!==null&&(he.innerHTML=me)}return this},Ce.toggleBold=_,Ce.toggleItalic=E,Ce.toggleStrikethrough=C,Ce.toggleBlockquote=T,Ce.toggleHeadingSmaller=R,Ce.toggleHeadingBigger=L,Ce.toggleHeading1=B,Ce.toggleHeading2=P,Ce.toggleHeading3=S,Ce.toggleHeading4=k,Ce.toggleHeading5=D,Ce.toggleHeading6=O,Ce.toggleCodeBlock=w,Ce.toggleUnorderedList=N,Ce.toggleOrderedList=j,Ce.cleanBlock=q,Ce.drawLink=W,Ce.drawImage=Q,Ce.drawUploadedImage=H,Ce.drawTable=ne,Ce.drawHorizontalRule=ge,Ce.undo=we,Ce.redo=$e,Ce.togglePreview=Ee,Ce.toggleSideBySide=ve,Ce.toggleFullScreen=x,Ce.prototype.toggleBold=function(){_(this)},Ce.prototype.toggleItalic=function(){E(this)},Ce.prototype.toggleStrikethrough=function(){C(this)},Ce.prototype.toggleBlockquote=function(){T(this)},Ce.prototype.toggleHeadingSmaller=function(){R(this)},Ce.prototype.toggleHeadingBigger=function(){L(this)},Ce.prototype.toggleHeading1=function(){B(this)},Ce.prototype.toggleHeading2=function(){P(this)},Ce.prototype.toggleHeading3=function(){S(this)},Ce.prototype.toggleHeading4=function(){k(this)},Ce.prototype.toggleHeading5=function(){D(this)},Ce.prototype.toggleHeading6=function(){O(this)},Ce.prototype.toggleCodeBlock=function(){w(this)},Ce.prototype.toggleUnorderedList=function(){N(this)},Ce.prototype.toggleOrderedList=function(){j(this)},Ce.prototype.cleanBlock=function(){q(this)},Ce.prototype.drawLink=function(){W(this)},Ce.prototype.drawImage=function(){Q(this)},Ce.prototype.drawUploadedImage=function(){H(this)},Ce.prototype.drawTable=function(){ne(this)},Ce.prototype.drawHorizontalRule=function(){ge(this)},Ce.prototype.undo=function(){we(this)},Ce.prototype.redo=function(){$e(this)},Ce.prototype.togglePreview=function(){Ee(this)},Ce.prototype.toggleSideBySide=function(){ve(this)},Ce.prototype.toggleFullScreen=function(){x(this)},Ce.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},Ce.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},Ce.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},Ce.prototype.getState=function(){return y(this.codemirror)},Ce.prototype.toTextArea=function(){var V=this.codemirror,fe=V.getWrapperElement(),he=fe.parentNode;he&&(this.gui.toolbar&&he.removeChild(this.gui.toolbar),this.gui.statusbar&&he.removeChild(this.gui.statusbar),this.gui.sideBySide&&he.removeChild(this.gui.sideBySide)),he.parentNode.insertBefore(fe,he),he.remove(),V.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=Ce},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}($5)),$5.exports}var H3t=j3t();const q3t=Fa(H3t);var M5={exports:{}},PCe;function G3t(){return PCe||(PCe=1,function(e,t){(function(){var n="ace",r=function(){return this}();!r&&typeof window<"u"&&(r=window);var i=function(f,c,d){if(typeof f!="string"){i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(d=c),i.modules[f]||(i.payloads[f]=d,i.modules[f]=null)};i.modules={},i.payloads={};var o=function(f,c,d){if(typeof c=="string"){var p=l(f,c);if(p!=null)return d&&d(),p}else if(Object.prototype.toString.call(c)==="[object Array]"){for(var h=[],g=0,m=c.length;g<m;++g){var y=l(f,c[g]);if(y==null&&s.original)return;h.push(y)}return d&&d.apply(null,h)||!0}},s=function(f,c){var d=o("",f,c);return d==null&&s.original?s.original.apply(this,arguments):d},a=function(f,c){if(c.indexOf("!")!==-1){var d=c.split("!");return a(f,d[0])+"!"+a(f,d[1])}if(c.charAt(0)=="."){var p=f.split("/").slice(0,-1).join("/");for(c=p+"/"+c;c.indexOf(".")!==-1&&h!=c;){var h=c;c=c.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return c},l=function(f,c){c=a(f,c);var d=i.modules[c];if(!d){if(d=i.payloads[c],typeof d=="function"){var p={},h={id:c,uri:"",exports:p,packaged:!0},g=function(y,v){return o(c,y,v)},m=d(g,p,h);p=m||h.exports,i.modules[c]=p,delete i.payloads[c]}d=i.modules[c]=p||d}return d};function u(f){var c=r;r[f]||(r[f]={}),c=r[f],(!c.define||!c.define.packaged)&&(i.original=c.define,c.define=i,c.define.packaged=!0),(!c.require||!c.require.packaged)&&(s.original=c.require,c.require=s,c.require.packaged=!0)}u(n)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(n,r,i){function o(s,a,l){Object.defineProperty(s,a,{value:l,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||o(String.prototype,"startsWith",function(s,a){return a=a||0,this.lastIndexOf(s,a)===a}),String.prototype.endsWith||o(String.prototype,"endsWith",function(s,a){var l=this;(a===void 0||a>l.length)&&(a=l.length),a-=s.length;var u=l.indexOf(s,a);return u!==-1&&u===a}),String.prototype.repeat||o(String.prototype,"repeat",function(s){for(var a="",l=this;s>0;)s&1&&(a+=l),(s>>=1)&&(l+=l);return a}),String.prototype.includes||o(String.prototype,"includes",function(s,a){return this.indexOf(s,a)!=-1}),Object.assign||(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(s),l=1;l<arguments.length;l++){var u=arguments[l];u!=null&&Object.keys(u).forEach(function(f){a[f]=u[f]})}return a}),Object.values||(Object.values=function(s){return Object.keys(s).map(function(a){return s[a]})}),Array.prototype.find||o(Array.prototype,"find",function(s){for(var a=this.length,l=arguments[1],u=0;u<a;u++){var f=this[u];if(s.call(l,f,u,this))return f}}),Array.prototype.findIndex||o(Array.prototype,"findIndex",function(s){for(var a=this.length,l=arguments[1],u=0;u<a;u++){var f=this[u];if(s.call(l,f,u,this))return u}}),Array.prototype.includes||o(Array.prototype,"includes",function(s,a){return this.indexOf(s,a)!=-1}),Array.prototype.fill||o(Array.prototype,"fill",function(s){for(var a=this,l=a.length>>>0,u=arguments[1],f=u>>0,c=f<0?Math.max(l+f,0):Math.min(f,l),d=arguments[2],p=d===void 0?l:d>>0,h=p<0?Math.max(l+p,0):Math.min(p,l);c<h;)a[c]=s,c++;return a}),Array.of||o(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(n,r,i){n("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(n,r,i){r.deepCopy=function o(s){if(typeof s!="object"||!s)return s;var a;if(Array.isArray(s)){a=[];for(var l=0;l<s.length;l++)a[l]=o(s[l]);return a}if(Object.prototype.toString.call(s)!=="[object Object]")return s;a={};for(var l in s)a[l]=o(s[l]);return a}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(n,r,i){r.last=function(a){return a[a.length-1]},r.stringReverse=function(a){return a.split("").reverse().join("")},r.stringRepeat=function(a,l){for(var u="";l>0;)l&1&&(u+=a),(l>>=1)&&(a+=a);return u};var o=/^\s\s*/,s=/\s\s*$/;r.stringTrimLeft=function(a){return a.replace(o,"")},r.stringTrimRight=function(a){return a.replace(s,"")},r.copyObject=function(a){var l={};for(var u in a)l[u]=a[u];return l},r.copyArray=function(a){for(var l=[],u=0,f=a.length;u<f;u++)a[u]&&typeof a[u]=="object"?l[u]=this.copyObject(a[u]):l[u]=a[u];return l},r.deepCopy=n("./deep_copy").deepCopy,r.arrayToMap=function(a){for(var l={},u=0;u<a.length;u++)l[a[u]]=1;return l},r.createMap=function(a){var l=Object.create(null);for(var u in a)l[u]=a[u];return l},r.arrayRemove=function(a,l){for(var u=0;u<=a.length;u++)l===a[u]&&a.splice(u,1)},r.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},r.escapeHTML=function(a){return(""+a).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},r.getMatchOffsets=function(a,l){var u=[];return a.replace(l,function(f){u.push({offset:arguments[arguments.length-2],length:f.length})}),u},r.deferredCall=function(a){var l=null,u=function(){l=null,a()},f=function(c){return f.cancel(),l=setTimeout(u,c||0),f};return f.schedule=f,f.call=function(){return this.cancel(),a(),f},f.cancel=function(){return clearTimeout(l),l=null,f},f.isPending=function(){return l},f},r.delayedCall=function(a,l){var u=null,f=function(){u=null,a()},c=function(d){u==null&&(u=setTimeout(f,d||l))};return c.delay=function(d){u&&clearTimeout(u),u=setTimeout(f,d||l)},c.schedule=c,c.call=function(){this.cancel(),a()},c.cancel=function(){u&&clearTimeout(u),u=null},c.isPending=function(){return u},c},r.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},r.skipEmptyMatch=function(a,l,u){return u&&a.codePointAt(l)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(n,r,i){r.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},r.getOS=function(){return r.isMac?r.OS.MAC:r.isLinux?r.OS.LINUX:r.OS.WINDOWS};var o=typeof navigator=="object"?navigator:{},s=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),a=o.userAgent||"",l=o.appName||"";r.isWin=s=="win",r.isMac=s=="mac",r.isLinux=s=="linux",r.isIE=l=="Microsoft Internet Explorer"||l.indexOf("MSAppHost")>=0?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),r.isOldIE=r.isIE&&r.isIE<9,r.isGecko=r.isMozilla=a.match(/ Gecko\/\d+/),r.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",r.isWebKit=parseFloat(a.split("WebKit/")[1])||void 0,r.isChrome=parseFloat(a.split(" Chrome/")[1])||void 0,r.isSafari=parseFloat(a.split(" Safari/")[1])&&!r.isChrome||void 0,r.isEdge=parseFloat(a.split(" Edge/")[1])||void 0,r.isAIR=a.indexOf("AdobeAIR")>=0,r.isAndroid=a.indexOf("Android")>=0,r.isChromeOS=a.indexOf(" CrOS ")>=0,r.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,r.isIOS&&(r.isMac=!0),r.isMobile=r.isIOS||r.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(n,r,i){var o=n("./useragent"),s="http://www.w3.org/1999/xhtml";r.buildDom=function d(p,h,g){if(typeof p=="string"&&p){var m=document.createTextNode(p);return h&&h.appendChild(m),m}if(!Array.isArray(p))return p&&p.appendChild&&h&&h.appendChild(p),p;if(typeof p[0]!="string"||!p[0]){for(var y=[],v=0;v<p.length;v++){var x=d(p[v],h,g);x&&y.push(x)}return y}var _=document.createElement(p[0]),E=p[1],C=1;E&&typeof E=="object"&&!Array.isArray(E)&&(C=2);for(var v=C;v<p.length;v++)d(p[v],_,g);return C==2&&Object.keys(E).forEach(function(w){var T=E[w];w==="class"?_.className=Array.isArray(T)?T.join(" "):T:typeof T=="function"||w=="value"||w[0]=="$"?_[w]=T:w==="ref"?g&&(g[T]=_):w==="style"?typeof T=="string"&&(_.style.cssText=T):T!=null&&_.setAttribute(w,T)}),h&&h.appendChild(_),_},r.getDocumentHead=function(d){return d||(d=document),d.head||d.getElementsByTagName("head")[0]||d.documentElement},r.createElement=function(d,p){return document.createElementNS?document.createElementNS(p||s,d):document.createElement(d)},r.removeChildren=function(d){d.innerHTML=""},r.createTextNode=function(d,p){var h=p?p.ownerDocument:document;return h.createTextNode(d)},r.createFragment=function(d){var p=d?d.ownerDocument:document;return p.createDocumentFragment()},r.hasCssClass=function(d,p){var h=(d.className+"").split(/\s+/g);return h.indexOf(p)!==-1},r.addCssClass=function(d,p){r.hasCssClass(d,p)||(d.className+=" "+p)},r.removeCssClass=function(d,p){for(var h=d.className.split(/\s+/g);;){var g=h.indexOf(p);if(g==-1)break;h.splice(g,1)}d.className=h.join(" ")},r.toggleCssClass=function(d,p){for(var h=d.className.split(/\s+/g),g=!0;;){var m=h.indexOf(p);if(m==-1)break;g=!1,h.splice(m,1)}return g&&h.push(p),d.className=h.join(" "),g},r.setCssClass=function(d,p,h){h?r.addCssClass(d,p):r.removeCssClass(d,p)},r.hasCssString=function(d,p){var h=0,g;if(p=p||document,g=p.querySelectorAll("style")){for(;h<g.length;)if(g[h++].id===d)return!0}},r.removeElementById=function(d,p){p=p||document,p.getElementById(d)&&p.getElementById(d).remove()};var a,l=[];r.useStrictCSP=function(d){a=d,d==!1?u():l||(l=[])};function u(){var d=l;l=null,d&&d.forEach(function(p){f(p[0],p[1])})}function f(d,p,h){if(!(typeof document>"u")){if(l){if(h)u();else if(h===!1)return l.push([d,p])}if(!a){var g=h;!h||!h.getRootNode?g=document:(g=h.getRootNode(),(!g||g==h)&&(g=document));var m=g.ownerDocument||g;if(p&&r.hasCssString(p,g))return null;p&&(d+=`
/*# sourceURL=ace/css/`+p+" */");var y=r.createElement("style");y.appendChild(m.createTextNode(d)),p&&(y.id=p),g==m&&(g=r.getDocumentHead(m)),g.insertBefore(y,g.firstChild)}}}if(r.importCssString=f,r.importCssStylsheet=function(d,p){r.buildDom(["link",{rel:"stylesheet",href:d}],r.getDocumentHead(p))},r.scrollbarWidth=function(d){var p=r.createElement("ace_inner");p.style.width="100%",p.style.minWidth="0px",p.style.height="200px",p.style.display="block";var h=r.createElement("ace_outer"),g=h.style;g.position="absolute",g.left="-10000px",g.overflow="hidden",g.width="200px",g.minWidth="0px",g.height="150px",g.display="block",h.appendChild(p);var m=d&&d.documentElement||document&&document.documentElement;if(!m)return 0;m.appendChild(h);var y=p.offsetWidth;g.overflow="scroll";var v=p.offsetWidth;return y===v&&(v=h.clientWidth),m.removeChild(h),y-v},r.computedStyle=function(d,p){return window.getComputedStyle(d,"")||{}},r.setStyle=function(d,p,h){d[p]!==h&&(d[p]=h)},r.HAS_CSS_ANIMATION=!1,r.HAS_CSS_TRANSFORMS=!1,r.HI_DPI=o.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,o.isChromeOS&&(r.HI_DPI=!1),typeof document<"u"){var c=document.createElement("div");r.HI_DPI&&c.style.transform!==void 0&&(r.HAS_CSS_TRANSFORMS=!0),!o.isEdge&&typeof c.style.animationName<"u"&&(r.HAS_CSS_ANIMATION=!0),c=null}r.HAS_CSS_TRANSFORMS?r.translate=function(d,p,h){d.style.transform="translate("+Math.round(p)+"px, "+Math.round(h)+"px)"}:r.translate=function(d,p,h){d.style.top=Math.round(h)+"px",d.style.left=Math.round(p)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(n,r,i){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var o=n("./dom");r.get=function(s,a){var l=new XMLHttpRequest;l.open("GET",s,!0),l.onreadystatechange=function(){l.readyState===4&&a(l.responseText)},l.send(null)},r.loadScript=function(s,a){var l=o.getDocumentHead(),u=document.createElement("script");u.src=s,l.appendChild(u),u.onload=u.onreadystatechange=function(f,c){(c||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,c||a())}},r.qualifyURL=function(s){var a=document.createElement("a");return a.href=s,a.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(n,r,i){r.inherits=function(o,s){o.super_=s,o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})},r.mixin=function(o,s){for(var a in s)o[a]=s[a];return o},r.implement=function(o,s){r.mixin(o,s)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(n,r,i){var o={},s=function(){this.propagationStopped=!0},a=function(){this.defaultPrevented=!0};o._emit=o._dispatchEvent=function(l,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var f=this._eventRegistry[l]||[],c=this._defaultHandlers[l];if(!(!f.length&&!c)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=l),u.stopPropagation||(u.stopPropagation=s),u.preventDefault||(u.preventDefault=a),f=f.slice();for(var d=0;d<f.length&&(f[d](u,this),!u.propagationStopped);d++);if(c&&!u.defaultPrevented)return c(u,this)}},o._signal=function(l,u){var f=(this._eventRegistry||{})[l];if(f){f=f.slice();for(var c=0;c<f.length;c++)f[c](u,this)}},o.once=function(l,u){var f=this;if(this.on(l,function c(){f.off(l,c),u.apply(null,arguments)}),!u)return new Promise(function(c){u=c})},o.setDefaultHandler=function(l,u){var f=this._defaultHandlers;if(f||(f=this._defaultHandlers={_disabled_:{}}),f[l]){var c=f[l],d=f._disabled_[l];d||(f._disabled_[l]=d=[]),d.push(c);var p=d.indexOf(u);p!=-1&&d.splice(p,1)}f[l]=u},o.removeDefaultHandler=function(l,u){var f=this._defaultHandlers;if(f){var c=f._disabled_[l];if(f[l]==u)c&&this.setDefaultHandler(l,c.pop());else if(c){var d=c.indexOf(u);d!=-1&&c.splice(d,1)}}},o.on=o.addEventListener=function(l,u,f){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[l];return c||(c=this._eventRegistry[l]=[]),c.indexOf(u)==-1&&c[f?"unshift":"push"](u),u},o.off=o.removeListener=o.removeEventListener=function(l,u){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[l];if(f){var c=f.indexOf(u);c!==-1&&f.splice(c,1)}},o.removeAllListeners=function(l){l||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[l]=void 0),this._defaultHandlers&&(this._defaultHandlers[l]=void 0)},r.EventEmitter=o}),ace.define("ace/lib/report_error",["require","exports","module"],function(n,r,i){r.reportError=function(s,a){var l=new Error(s);l.data=a,typeof console=="object"&&console.error&&console.error(l),setTimeout(function(){throw l})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(n,r,i){var o={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor gutter","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions","editor.tooltip.disable-editing":"Editing is disabled"};r.defaultEnglishMessages=o}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(n,r,i){"no use strict";var o=n("./oop"),s=n("./event_emitter").EventEmitter,a=n("./report_error").reportError,l=n("./default_english_messages").defaultEnglishMessages,u={setOptions:function(h){Object.keys(h).forEach(function(g){this.setOption(g,h[g])},this)},getOptions:function(h){var g={};if(h)Array.isArray(h)||(h=Object.keys(h));else{var m=this.$options;h=Object.keys(m).filter(function(y){return!m[y].hidden})}return h.forEach(function(y){g[y]=this.getOption(y)},this),g},setOption:function(h,g){if(this["$"+h]!==g){var m=this.$options[h];if(!m)return f('misspelled option "'+h+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(h,g);m.handlesSet||(this["$"+h]=g),m&&m.set&&m.set.call(this,g)}},getOption:function(h){var g=this.$options[h];return g?g.forwardTo?this[g.forwardTo]&&this[g.forwardTo].getOption(h):g&&g.get?g.get.call(this):this["$"+h]:f('misspelled option "'+h+'"')}};function f(h){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var c,d,p=function(){function h(){this.$defaultOptions={},c=l,d="dollarSigns"}return h.prototype.defineOptions=function(g,m,y){return g.$options||(this.$defaultOptions[m]=g.$options={}),Object.keys(y).forEach(function(v){var x=y[v];typeof x=="string"&&(x={forwardTo:x}),x.name||(x.name=v),g.$options[x.name]=x,"initialValue"in x&&(g["$"+x.name]=x.initialValue)}),o.implement(g,u),this},h.prototype.resetOptions=function(g){Object.keys(g.$options).forEach(function(m){var y=g.$options[m];"value"in y&&g.setOption(m,y.value)})},h.prototype.setDefaultValue=function(g,m,y){if(!g){for(g in this.$defaultOptions)if(this.$defaultOptions[g][m])break;if(!this.$defaultOptions[g][m])return!1}var v=this.$defaultOptions[g]||(this.$defaultOptions[g]={});v[m]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,m,y):v[m].value=y)},h.prototype.setDefaultValues=function(g,m){Object.keys(m).forEach(function(y){this.setDefaultValue(g,y,m[y])},this)},h.prototype.setMessages=function(g,m){c=g,m&&m.placeholders&&(d=m.placeholders)},h.prototype.nls=function(g,m,y){c[g]||(f("No message found for the key '"+g+"' in messages with id "+c.$id+", trying to find a translation for the default string '"+m+"'."),c[m]||f("No message found for the default string '"+m+"' in the provided messages. Falling back to the default English message."));var v=c[g]||c[m]||m;return y&&(d==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(x,_){return _=="$"?"$":y[_]})),d==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(x,_){return y[_]}))),v},h}();p.prototype.warn=f,p.prototype.reportError=a,o.implement(p.prototype,s),r.AppConfig=p}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(n,r,i){i.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(n,r,i){r.isDark=!1,r.cssClass="ace-tm",r.cssText=n("./textmate-css"),r.$id="ace/theme/textmate";var o=n("../lib/dom");o.importCssString(r.cssText,r.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(n,r,i){"no use strict";var o=n("./lib/lang"),s=n("./lib/net"),a=n("./lib/dom"),l=n("./lib/app_config").AppConfig;i.exports=r=new l;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};r.get=function(p){if(!u.hasOwnProperty(p))throw new Error("Unknown config key: "+p);return u[p]},r.set=function(p,h){if(u.hasOwnProperty(p))u[p]=h;else if(this.setDefaultValue("",p,h)==!1)throw new Error("Unknown config key: "+p);p=="useStrictCSP"&&a.useStrictCSP(h)},r.all=function(){return o.copyObject(u)},r.$modes={},r.moduleUrl=function(p,h){if(u.$moduleUrls[p])return u.$moduleUrls[p];var g=p.split("/");h=h||g[g.length-2]||"";var m=h=="snippets"?"/":"-",y=g[g.length-1];if(h=="worker"&&m=="-"){var v=new RegExp("^"+h+"[\\-_]|[\\-_]"+h+"$","g");y=y.replace(v,"")}(!y||y==h)&&g.length>1&&(y=g[g.length-2]);var x=u[h+"Path"];return x==null?x=u.basePath:m=="/"&&(h=m=""),x&&x.slice(-1)!="/"&&(x+="/"),x+h+m+y+this.get("suffix")},r.setModuleUrl=function(p,h){return u.$moduleUrls[p]=h};var f=function(p,h){if(p==="ace/theme/textmate"||p==="./theme/textmate")return h(null,n("./theme/textmate"));if(c)return c(p,h);console.error("loader is not configured")},c;r.setLoader=function(p){c=p},r.dynamicModules=Object.create(null),r.$loading={},r.$loaded={},r.loadModule=function(p,h){var g;if(Array.isArray(p))var m=p[0],y=p[1];else if(typeof p=="string")var y=p;var v=function(x){if(x&&!r.$loading[y])return h&&h(x);if(r.$loading[y]||(r.$loading[y]=[]),r.$loading[y].push(h),!(r.$loading[y].length>1)){var _=function(){f(y,function(E,C){C&&(r.$loaded[y]=C),r._emit("load.module",{name:y,module:C});var w=r.$loading[y];r.$loading[y]=null,w.forEach(function(T){T&&T(C)})})};if(!r.get("packaged"))return _();s.loadScript(r.moduleUrl(y,m),_),d()}};if(r.dynamicModules[y])r.dynamicModules[y]().then(function(x){x.default?v(x.default):v(x)});else{try{g=this.$require(y)}catch{}v(g||r.$loaded[y])}},r.$require=function(p){if(typeof i.require=="function"){var h="require";return i[h](p)}},r.setModuleLoader=function(p,h){r.dynamicModules[p]=h};var d=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),d=function(){})};r.version="1.41.0"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(n,r,i){n("./lib/fixoldbrowsers");var o=n("./config");o.setLoader(function(u,f){n([u],function(c){f(null,c)})});var s=function(){return this||typeof window<"u"&&window}();i.exports=function(u){o.init=a,o.$require=n,u.require=n},a(!0);function a(u){if(!(!s||!s.document)){o.set("packaged",u||n.packaged||i.packaged||s.define&&(void 0).packaged);var f={},c="",d=document.currentScript||document._currentScript,p=d&&d.ownerDocument||document;d&&d.src&&(c=d.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var h=p.getElementsByTagName("script"),g=0;g<h.length;g++){var m=h[g],y=m.src||m.getAttribute("src");if(y){for(var v=m.attributes,x=0,_=v.length;x<_;x++){var E=v[x];E.name.indexOf("data-ace-")===0&&(f[l(E.name.replace(/^data-ace-/,""))]=E.value)}var C=y.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);C&&(c=C[1])}}c&&(f.base=f.base||c,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base;for(var w in f)typeof f[w]<"u"&&o.set(w,f[w])}}function l(u){return u.replace(/-(.)/g,function(f,c){return c.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(n,r,i){var o=function(){function s(a,l,u,f){this.start={row:a,column:l},this.end={row:u,column:f}}return s.prototype.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},s.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},s.prototype.contains=function(a,l){return this.compare(a,l)==0},s.prototype.compareRange=function(a){var l,u=a.end,f=a.start;return l=this.compare(u.row,u.column),l==1?(l=this.compare(f.row,f.column),l==1?2:l==0?1:0):l==-1?-2:(l=this.compare(f.row,f.column),l==-1?-1:l==1?42:0)},s.prototype.comparePoint=function(a){return this.compare(a.row,a.column)},s.prototype.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},s.prototype.intersects=function(a){var l=this.compareRange(a);return l==-1||l==0||l==1},s.prototype.isEnd=function(a,l){return this.end.row==a&&this.end.column==l},s.prototype.isStart=function(a,l){return this.start.row==a&&this.start.column==l},s.prototype.setStart=function(a,l){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=l)},s.prototype.setEnd=function(a,l){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=l)},s.prototype.inside=function(a,l){return this.compare(a,l)==0?!(this.isEnd(a,l)||this.isStart(a,l)):!1},s.prototype.insideStart=function(a,l){return this.compare(a,l)==0?!this.isEnd(a,l):!1},s.prototype.insideEnd=function(a,l){return this.compare(a,l)==0?!this.isStart(a,l):!1},s.prototype.compare=function(a,l){return!this.isMultiLine()&&a===this.start.row?l<this.start.column?-1:l>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?l>=this.start.column?0:-1:this.end.row===a?l<=this.end.column?0:1:0},s.prototype.compareStart=function(a,l){return this.start.row==a&&this.start.column==l?-1:this.compare(a,l)},s.prototype.compareEnd=function(a,l){return this.end.row==a&&this.end.column==l?1:this.compare(a,l)},s.prototype.compareInside=function(a,l){return this.end.row==a&&this.end.column==l?1:this.start.row==a&&this.start.column==l?-1:this.compare(a,l)},s.prototype.clipRows=function(a,l){if(this.end.row>l)var u={row:l+1,column:0};else if(this.end.row<a)var u={row:a,column:0};if(this.start.row>l)var f={row:l+1,column:0};else if(this.start.row<a)var f={row:a,column:0};return s.fromPoints(f||this.start,u||this.end)},s.prototype.extend=function(a,l){var u=this.compare(a,l);if(u==0)return this;if(u==-1)var f={row:a,column:l};else var c={row:a,column:l};return s.fromPoints(f||this.start,c||this.end)},s.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},s.prototype.isMultiLine=function(){return this.start.row!==this.end.row},s.prototype.clone=function(){return s.fromPoints(this.start,this.end)},s.prototype.collapseRows=function(){return this.end.column==0?new s(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new s(this.start.row,0,this.end.row,0)},s.prototype.toScreenRange=function(a){var l=a.documentToScreenPosition(this.start),u=a.documentToScreenPosition(this.end);return new s(l.row,l.column,u.row,u.column)},s.prototype.moveBy=function(a,l){this.start.row+=a,this.start.column+=l,this.end.row+=a,this.end.column+=l},s}();o.fromPoints=function(s,a){return new o(s.row,s.column,a.row,a.column)},o.comparePoints=function(s,a){return s.row-a.row||s.column-a.column},r.Range=o}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(n,r,i){for(var o=n("./oop"),s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},a={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},l=0;l<10;l++)a["Digit"+l]=48+l,a["Numpad"+l]=96+l,s.PRINTABLE_KEYS[48+l]=""+l,s.FUNCTION_KEYS[96+l]="Numpad"+l;for(var l=65;l<91;l++){var u=String.fromCharCode(l+32);a["Key"+u.toUpperCase()]=l,s.PRINTABLE_KEYS[l]=u}for(var l=1;l<13;l++)a["F"+l]=111+l,s.FUNCTION_KEYS[111+l]="F"+l;var f={Shift:16,Control:17,Alt:18,Meta:224};for(var c in f)a[c]=a[c+"Left"]=a[c+"Right"]=f[c];r.$codeToKeyCode=a,s.PRINTABLE_KEYS[173]="-";for(var d in s.FUNCTION_KEYS){var p=s.FUNCTION_KEYS[d].toLowerCase();s[p]=parseInt(d,10)}for(var d in s.PRINTABLE_KEYS){var p=s.PRINTABLE_KEYS[d].toLowerCase();s[p]=parseInt(d,10)}o.mixin(s,s.MODIFIER_KEYS),o.mixin(s,s.PRINTABLE_KEYS),o.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var h=["cmd","ctrl","alt","shift"],g=Math.pow(2,h.length);g--;)s.KEY_MODS[g]=h.filter(function(m){return g&s.KEY_MODS[m]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",o.mixin(r,s),r.default=r,r.keyCodeToString=function(h){var g=s[h];return typeof g!="string"&&(g=String.fromCharCode(h)),g.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,r,i){var o=n("./keys"),s=n("./useragent"),a=null,l=0,u;function f(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function c(){return u==null&&f(),u}function d(x,_,E){this.elem=x,this.type=_,this.callback=E}d.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var p=r.addListener=function(x,_,E,C){x.addEventListener(_,E,c()),C&&C.$toDestroy.push(new d(x,_,E))},h=r.removeListener=function(x,_,E){x.removeEventListener(_,E,c())};r.stopEvent=function(x){return r.stopPropagation(x),r.preventDefault(x),!1},r.stopPropagation=function(x){x.stopPropagation&&x.stopPropagation()},r.preventDefault=function(x){x.preventDefault&&x.preventDefault()},r.getButton=function(x){return x.type=="dblclick"?0:x.type=="contextmenu"||s.isMac&&x.ctrlKey&&!x.altKey&&!x.shiftKey?2:x.button},r.capture=function(x,_,E){var C=x&&x.ownerDocument||document;function w(T){_&&_(T),E&&E(T),h(C,"mousemove",_),h(C,"mouseup",w),h(C,"dragstart",w)}return p(C,"mousemove",_),p(C,"mouseup",w),p(C,"dragstart",w),w},r.addMouseWheelListener=function(x,_,E){p(x,"wheel",function(C){var w=.15,T=C.deltaX||0,R=C.deltaY||0;switch(C.deltaMode){case C.DOM_DELTA_PIXEL:C.wheelX=T*w,C.wheelY=R*w;break;case C.DOM_DELTA_LINE:var L=15;C.wheelX=T*L,C.wheelY=R*L;break;case C.DOM_DELTA_PAGE:var B=150;C.wheelX=T*B,C.wheelY=R*B;break}_(C)},E)},r.addMultiMouseDownListener=function(x,_,E,C,w){var T=0,R,L,B,P={2:"dblclick",3:"tripleclick",4:"quadclick"};function S(k){if(r.getButton(k)!==0?T=0:k.detail>1?(T++,T>4&&(T=1)):T=1,s.isIE){var D=Math.abs(k.clientX-R)>5||Math.abs(k.clientY-L)>5;(!B||D)&&(T=1),B&&clearTimeout(B),B=setTimeout(function(){B=null},_[T-1]||600),T==1&&(R=k.clientX,L=k.clientY)}if(k._clicks=T,E[C]("mousedown",k),T>4)T=0;else if(T>1)return E[C](P[T],k)}Array.isArray(x)||(x=[x]),x.forEach(function(k){p(k,"mousedown",S,w)})};function g(x){return 0|(x.ctrlKey?1:0)|(x.altKey?2:0)|(x.shiftKey?4:0)|(x.metaKey?8:0)}r.getModifierString=function(x){return o.KEY_MODS[g(x)]};function m(x,_,E){var C=g(_);if(!E&&_.code&&(E=o.$codeToKeyCode[_.code]||E),!s.isMac&&a){if(_.getModifierState&&(_.getModifierState("OS")||_.getModifierState("Win"))&&(C|=8),a.altGr)if((3&C)!=3)a.altGr=0;else return;if(E===18||E===17){var w=_.location;if(E===17&&w===1)a[E]==1&&(l=_.timeStamp);else if(E===18&&C===3&&w===2){var T=_.timeStamp-l;T<50&&(a.altGr=!0)}}}if(E in o.MODIFIER_KEYS&&(E=-1),!(!C&&E===13&&_.location===3&&(x(_,C,-E),_.defaultPrevented))){if(s.isChromeOS&&C&8){if(x(_,C,E),_.defaultPrevented)return;C&=-9}return!C&&!(E in o.FUNCTION_KEYS)&&!(E in o.PRINTABLE_KEYS)?!1:x(_,C,E)}}r.addCommandKeyListener=function(x,_,E){var C=null;p(x,"keydown",function(w){a[w.keyCode]=(a[w.keyCode]||0)+1;var T=m(_,w,w.keyCode);return C=w.defaultPrevented,T},E),p(x,"keypress",function(w){C&&(w.ctrlKey||w.altKey||w.shiftKey||w.metaKey)&&(r.stopEvent(w),C=null)},E),p(x,"keyup",function(w){a[w.keyCode]=null},E),a||(y(),p(window,"focus",y))};function y(){a=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!s.isOldIE){var v=1;r.nextTick=function(x,_){_=_||window;var E="zero-timeout-message-"+v++,C=function(w){w.data==E&&(r.stopPropagation(w),h(_,"message",C),x())};p(_,"message",C),_.postMessage(E,"*")}}r.$idleBlocked=!1,r.onIdle=function(x,_){return setTimeout(function E(){r.$idleBlocked?setTimeout(E,100):x()},_)},r.$idleBlockId=null,r.blockIdle=function(x){r.$idleBlockId&&clearTimeout(r.$idleBlockId),r.$idleBlocked=!0,r.$idleBlockId=setTimeout(function(){r.$idleBlocked=!1},x||100)},r.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),r.nextFrame?r.nextFrame=r.nextFrame.bind(window):r.nextFrame=function(x){setTimeout(x,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(n,r,i){var o;i.exports={lineMode:!1,pasteCancelled:function(){return o&&o>Date.now()-50?!0:o=!1},cancel:function(){o=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(n,r,i){var o=n("../lib/event"),s=n("../config").nls,a=n("../lib/useragent"),l=n("../lib/dom"),u=n("../lib/lang"),f=n("../clipboard"),c=a.isChrome<18,d=a.isIE,p=a.isChrome>63,h=400,g=n("../lib/keys"),m=g.KEY_MODS,y=a.isIOS,v=y?/\s/:/\n/,x=a.isMobile,_;_=function(E,C){var w=l.createElement("textarea");w.className="ace_text-input",w.setAttribute("wrap","off"),w.setAttribute("autocorrect","off"),w.setAttribute("autocapitalize","off"),w.setAttribute("spellcheck","false"),w.style.opacity="0",E.insertBefore(w,E.firstChild),this.setHost=function(ie){C=ie};var T=!1,R=!1,L=!1,B=!1,P="";x||(w.style.fontSize="1px");var S=!1,k=!1,D="",O=0,N=0,j=0,q=Number.MAX_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER,Q=0;try{var ee=document.activeElement===w}catch{}this.setNumberOfExtraLines=function(ie){if(q=Number.MAX_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER,ie<0){Q=0;return}Q=ie},this.setAriaLabel=function(){var ie="";if(C.$textInputAriaLabel&&(ie+="".concat(C.$textInputAriaLabel,", ")),C.session){var be=C.session.selection.cursor.row;ie+=s("text-input.aria-label","Cursor at row $0",[be+1])}w.setAttribute("aria-label",ie)},this.setAriaOptions=function(ie){ie.activeDescendant?(w.setAttribute("aria-haspopup","true"),w.setAttribute("aria-autocomplete",ie.inline?"both":"list"),w.setAttribute("aria-activedescendant",ie.activeDescendant)):(w.setAttribute("aria-haspopup","false"),w.setAttribute("aria-autocomplete","both"),w.removeAttribute("aria-activedescendant")),ie.role&&w.setAttribute("role",ie.role),ie.setLabel&&(w.setAttribute("aria-roledescription",s("text-input.aria-roledescription","editor")),this.setAriaLabel())},this.setAriaOptions({role:"textbox"}),o.addListener(w,"blur",function(ie){k||(C.onBlur(ie),ee=!1)},C),o.addListener(w,"focus",function(ie){if(!k){if(ee=!0,a.isEdge)try{if(!document.hasFocus())return}catch{}C.onFocus(ie),a.isEdge?setTimeout(se):se()}},C),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:C.renderer.enableKeyboardAccessibility}),P||p||this.$focusScroll=="browser")return w.focus({preventScroll:!0});var ie=w.style.top;w.style.position="fixed",w.style.top="0px";try{var be=w.getBoundingClientRect().top!=0}catch{return}var Ce=[];if(be)for(var je=w.parentElement;je&&je.nodeType==1;)Ce.push(je),je.setAttribute("ace_nocontext","true"),!je.parentElement&&je.getRootNode?je=je.getRootNode().host:je=je.parentElement;w.focus({preventScroll:!0}),be&&Ce.forEach(function(V){V.removeAttribute("ace_nocontext")}),setTimeout(function(){w.style.position="",w.style.top=="0px"&&(w.style.top=ie)},0)},this.blur=function(){w.blur()},this.isFocused=function(){return ee},C.on("beforeEndOperation",function(){var ie=C.curOp,be=ie&&ie.command&&ie.command.name;if(be!="insertstring"){var Ce=be&&(ie.docChanged||ie.selectionChanged);L&&Ce&&(D=w.value="",it()),se()}}),C.on("changeSelection",this.setAriaLabel);var H=function(ie,be){for(var Ce=be,je=1;je<=ie-q&&je<2*Q+1;je++)Ce+=C.session.getLine(ie-je).length+1;return Ce},se=y?function(ie){if(!(!ee||T&&!ie||B)){ie||(ie="");var be=`
 ab`+ie+`cde fg
`;be!=w.value&&(w.value=D=be);var Ce=4,je=4+(ie.length||(C.selection.isEmpty()?0:1));(O!=Ce||N!=je)&&w.setSelectionRange(Ce,je),O=Ce,N=je}}:function(){if(!(L||B)&&!(!ee&&!$e)){L=!0;var ie=0,be=0,Ce="";if(C.session){var je=C.selection,V=je.getRange(),fe=je.cursor.row;fe===W+1?(q=W+1,W=q+2*Q):fe===q-1?(W=q-1,q=W-2*Q):(fe<q-1||fe>W+1)&&(q=fe>Q?fe-Q:0,W=fe>Q?fe+Q:2*Q);for(var he=[],me=q;me<=W;me++)he.push(C.session.getLine(me));if(Ce=he.join(`
`),ie=H(V.start.row,V.start.column),be=H(V.end.row,V.end.column),V.start.row<q){var Oe=C.session.getLine(q-1);ie=V.start.row<q-1?0:ie,be+=Oe.length+1,Ce=Oe+`
`+Ce}else if(V.end.row>W){var Me=C.session.getLine(W+1);be=V.end.row>W+1?Me.length:V.end.column,be+=Ce.length+1,Ce=Ce+`
`+Me}else x&&fe>0&&(Ce=`
`+Ce,be+=1,ie+=1);Ce.length>h&&(ie<h&&be<h?Ce=Ce.slice(0,h):(Ce=`
`,ie==be?ie=be=0:(ie=0,be=1)));var Be=Ce+`

`;Be!=D&&(w.value=D=Be,O=N=Be.length)}if($e&&(O=w.selectionStart,N=w.selectionEnd),N!=be||O!=ie||w.selectionEnd!=N)try{w.setSelectionRange(ie,be),O=ie,N=be}catch{}L=!1}};this.resetSelection=se,ee&&C.onFocus();var ne=function(ie){return ie.selectionStart===0&&ie.selectionEnd>=D.length&&ie.value===D&&D&&ie.selectionEnd!==N},ge=function(ie){L||(T?T=!1:ne(w)?(C.selectAll(),se()):x&&w.selectionStart!=O&&se())},we=null;this.setInputHandler=function(ie){we=ie},this.getInputHandler=function(){return we};var $e=!1,ve=function(ie,be){if($e&&($e=!1),R)return se(),ie&&C.onPaste(ie),R=!1,"";for(var Ce=w.selectionStart,je=w.selectionEnd,V=O,fe=D.length-N,he=ie,me=ie.length-Ce,Oe=ie.length-je,Me=0;V>0&&D[Me]==ie[Me];)Me++,V--;for(he=he.slice(Me),Me=1;fe>0&&D.length-Me>O-1&&D[D.length-Me]==ie[ie.length-Me];)Me++,fe--;me-=Me-1,Oe-=Me-1;var Be=he.length-Me+1;if(Be<0&&(V=-Be,Be=0),he=he.slice(0,Be),!be&&!he&&!me&&!V&&!fe&&!Oe)return"";B=!0;var We=!1;return a.isAndroid&&he==". "&&(he="  ",We=!0),he&&!V&&!fe&&!me&&!Oe||S?C.onTextInput(he):C.onTextInput(he,{extendLeft:V,extendRight:fe,restoreStart:me,restoreEnd:Oe}),B=!1,D=ie,O=Ce,N=je,j=Oe,We?`
`:he},Ee=function(ie){if(L)return Tn();if(ie&&ie.inputType){if(ie.inputType=="historyUndo")return C.execCommand("undo");if(ie.inputType=="historyRedo")return C.execCommand("redo")}var be=w.value,Ce=ve(be,!0);(be.length>h+100||v.test(Ce)||x&&O<1&&O==N)&&se()},Ve=function(ie,be,Ce){var je=ie.clipboardData||window.clipboardData;if(!(!je||c)){var V=d||Ce?"Text":"text/plain";try{return be?je.setData(V,be)!==!1:je.getData(V)}catch(fe){if(!Ce)return Ve(fe,be,!0)}}},Ue=function(ie,be){var Ce=C.getCopyText();if(!Ce)return o.preventDefault(ie);Ve(ie,Ce)?(y&&(se(Ce),T=Ce,setTimeout(function(){T=!1},10)),be?C.onCut():C.onCopy(),o.preventDefault(ie)):(T=!0,w.value=Ce,w.select(),setTimeout(function(){T=!1,se(),be?C.onCut():C.onCopy()}))},ft=function(ie){Ue(ie,!0)},ht=function(ie){Ue(ie,!1)},zt=function(ie){var be=Ve(ie);f.pasteCancelled()||(typeof be=="string"?(be&&C.onPaste(be,ie),a.isIE&&setTimeout(se),o.preventDefault(ie)):(w.value="",R=!0))};o.addCommandKeyListener(w,function(ie,be,Ce){if(!L)return C.onCommandKey(ie,be,Ce)},C),o.addListener(w,"select",ge,C),o.addListener(w,"input",Ee,C),o.addListener(w,"cut",ft,C),o.addListener(w,"copy",ht,C),o.addListener(w,"paste",zt,C),(!("oncut"in w)||!("oncopy"in w)||!("onpaste"in w))&&o.addListener(E,"keydown",function(ie){if(!(a.isMac&&!ie.metaKey||!ie.ctrlKey))switch(ie.keyCode){case 67:ht(ie);break;case 86:zt(ie);break;case 88:ft(ie);break}},C);var $t=function(ie){if(!(L||!C.onCompositionStart||C.$readOnly)&&(L={},!S)){ie.data&&(L.useTextareaForIME=!1),setTimeout(Tn,0),C._signal("compositionStart"),C.on("mousedown",Te);var be=C.getSelectionRange();be.end.row=be.start.row,be.end.column=be.start.column,L.markerRange=be,L.selectionStart=O,C.onCompositionStart(L),L.useTextareaForIME?(D=w.value="",O=0,N=0):(w.msGetInputContext&&(L.context=w.msGetInputContext()),w.getInputContext&&(L.context=w.getInputContext()))}},Tn=function(){if(!(!L||!C.onCompositionUpdate||C.$readOnly)){if(S)return Te();if(L.useTextareaForIME)C.onCompositionUpdate(w.value);else{var ie=w.value;ve(ie),L.markerRange&&(L.context&&(L.markerRange.start.column=L.selectionStart=L.context.compositionStartOffset),L.markerRange.end.column=L.markerRange.start.column+N-L.selectionStart+j)}}},it=function(ie){!C.onCompositionEnd||C.$readOnly||(L=!1,C.onCompositionEnd(),C.off("mousedown",Te),ie&&Ee())};function Te(){k=!0,w.blur(),w.focus(),k=!1}var ye=u.delayedCall(Tn,50).schedule.bind(null,null);function Se(ie){ie.keyCode==27&&w.value.length<w.selectionStart&&(L||(D=w.value),O=N=-1,se()),ye()}o.addListener(w,"compositionstart",$t,C),o.addListener(w,"compositionupdate",Tn,C),o.addListener(w,"keyup",Se,C),o.addListener(w,"keydown",ye,C),o.addListener(w,"compositionend",it,C),this.getElement=function(){return w},this.setCommandMode=function(ie){S=ie,w.readOnly=!1},this.setReadOnly=function(ie){S||(w.readOnly=ie)},this.setCopyWithEmptySelection=function(ie){},this.onContextMenu=function(ie){$e=!0,se(),C._emit("nativecontextmenu",{target:C,domEvent:ie}),this.moveToMouse(ie,!0)},this.moveToMouse=function(ie,be){P||(P=w.style.cssText),w.style.cssText=(be?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(O+N)*C.renderer.characterWidth*.5+"px;";var Ce=C.container.getBoundingClientRect(),je=l.computedStyle(C.container),V=Ce.top+(parseInt(je.borderTopWidth)||0),fe=Ce.left+(parseInt(je.borderLeftWidth)||0),he=Ce.bottom-V-w.clientHeight-2,me=function(Oe){l.translate(w,Oe.clientX-fe-2,Math.min(Oe.clientY-V-2,he))};me(ie),ie.type=="mousedown"&&(C.renderer.$isMousePressed=!0,clearTimeout(Re),a.isWin&&o.capture(C.container,me,U))},this.onContextMenuClose=U;var Re;function U(){clearTimeout(Re),Re=setTimeout(function(){P&&(w.style.cssText=P,P=""),C.renderer.$isMousePressed=!1,C.renderer.$keepTextAreaAtCursor&&C.renderer.$moveTextAreaToCursor()},0)}var Z=function(ie){C.textInput.onContextMenu(ie),U()};o.addListener(w,"mouseup",Z,C),o.addListener(w,"mousedown",function(ie){ie.preventDefault(),U()},C),o.addListener(C.renderer.scroller,"contextmenu",Z,C),o.addListener(w,"contextmenu",Z,C),y&&re(E,C,w);function re(ie,be,Ce){var je=null,V=!1;Ce.addEventListener("keydown",function(he){je&&clearTimeout(je),V=!0},!0),Ce.addEventListener("keyup",function(he){je=setTimeout(function(){V=!1},100)},!0);var fe=function(he){if(document.activeElement===Ce&&!(V||L||be.$mouseHandler.isMousePressed)&&!T){var me=Ce.selectionStart,Oe=Ce.selectionEnd,Me=null,Be=0;if(me==0?Me=g.up:me==1?Me=g.home:Oe>N&&D[Oe]==`
`?Me=g.end:me<O&&D[me-1]==" "?(Me=g.left,Be=m.option):me<O||me==O&&N!=O&&me==Oe?Me=g.left:Oe>N&&D.slice(0,Oe).split(`
`).length>2?Me=g.down:Oe>N&&D[Oe-1]==" "?(Me=g.right,Be=m.option):(Oe>N||Oe==N&&N!=O&&me==Oe)&&(Me=g.right),me!==Oe&&(Be|=m.shift),Me){var We=be.onCommandKey({},Be,Me);if(!We&&be.commands){Me=g.keyCodeToString(Me);var Qe=be.commands.findKeyCommand(Be,Me);Qe&&be.execCommand(Qe)}O=me,N=Oe,se("")}}};document.addEventListener("selectionchange",fe),be.on("destroy",function(){document.removeEventListener("selectionchange",fe)})}this.destroy=function(){w.parentElement&&w.parentElement.removeChild(w)}},r.TextInput=_,r.$setUserAgentForTests=function(E,C){x=E,y=C}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(n,r,i){var o=n("../lib/useragent"),s=0,a=550,l=function(){function c(d){d.$clickSelection=null;var p=d.editor;p.setDefaultHandler("mousedown",this.onMouseDown.bind(d)),p.setDefaultHandler("dblclick",this.onDoubleClick.bind(d)),p.setDefaultHandler("tripleclick",this.onTripleClick.bind(d)),p.setDefaultHandler("quadclick",this.onQuadClick.bind(d)),p.setDefaultHandler("mousewheel",this.onMouseWheel.bind(d));var h=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];h.forEach(function(g){d[g]=this[g]},this),d.selectByLines=this.extendSelectionBy.bind(d,"getLineRange"),d.selectByWords=this.extendSelectionBy.bind(d,"getWordRange")}return c.prototype.onMouseDown=function(d){var p=d.inSelection(),h=d.getDocumentPosition();this.mousedownEvent=d;var g=this.editor,m=d.getButton();if(m!==0){var y=g.getSelectionRange(),v=y.isEmpty();(v||m==1)&&g.selection.moveToPosition(h),m==2&&(g.textInput.onContextMenu(d.domEvent),o.isMozilla||d.preventDefault());return}if(this.mousedownEvent.time=Date.now(),p&&!g.isFocused()&&(g.focus(),this.$focusTimeout&&!this.$clickSelection&&!g.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(d);return}return this.captureMouse(d),this.startSelect(h,d.domEvent._clicks>1),d.preventDefault()},c.prototype.startSelect=function(d,p){d=d||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var h=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?h.selection.selectToPosition(d):p||h.selection.moveToPosition(d),p||this.select(),h.setStyle("ace_selecting"),this.setState("select"))},c.prototype.select=function(){var d,p=this.editor,h=p.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var g=this.$clickSelection.comparePoint(h);if(g==-1)d=this.$clickSelection.end;else if(g==1)d=this.$clickSelection.start;else{var m=f(this.$clickSelection,h);h=m.cursor,d=m.anchor}p.selection.setSelectionAnchor(d.row,d.column)}p.selection.selectToPosition(h),p.renderer.scrollCursorIntoView()},c.prototype.extendSelectionBy=function(d){var p,h=this.editor,g=h.renderer.screenToTextCoordinates(this.x,this.y),m=h.selection[d](g.row,g.column);if(this.$clickSelection){var y=this.$clickSelection.comparePoint(m.start),v=this.$clickSelection.comparePoint(m.end);if(y==-1&&v<=0)p=this.$clickSelection.end,(m.end.row!=g.row||m.end.column!=g.column)&&(g=m.start);else if(v==1&&y>=0)p=this.$clickSelection.start,(m.start.row!=g.row||m.start.column!=g.column)&&(g=m.end);else if(y==-1&&v==1)g=m.end,p=m.start;else{var x=f(this.$clickSelection,g);g=x.cursor,p=x.anchor}h.selection.setSelectionAnchor(p.row,p.column)}h.selection.selectToPosition(g),h.renderer.scrollCursorIntoView()},c.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},c.prototype.focusWait=function(){var d=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),p=Date.now();(d>s||p-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},c.prototype.onDoubleClick=function(d){var p=d.getDocumentPosition(),h=this.editor,g=h.session,m=g.getBracketRange(p);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=h.selection.getWordRange(p.row,p.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},c.prototype.onTripleClick=function(d){var p=d.getDocumentPosition(),h=this.editor;this.setState("selectByLines");var g=h.getSelectionRange();g.isMultiLine()&&g.contains(p.row,p.column)?(this.$clickSelection=h.selection.getLineRange(g.start.row),this.$clickSelection.end=h.selection.getLineRange(g.end.row).end):this.$clickSelection=h.selection.getLineRange(p.row),this.select()},c.prototype.onQuadClick=function(d){var p=this.editor;p.selectAll(),this.$clickSelection=p.getSelectionRange(),this.setState("selectAll")},c.prototype.onMouseWheel=function(d){if(!d.getAccelKey()){d.getShiftKey()&&d.wheelY&&!d.wheelX&&(d.wheelX=d.wheelY,d.wheelY=0);var p=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var h=this.$lastScroll,g=d.domEvent.timeStamp,m=g-h.t,y=m?d.wheelX/m:h.vx,v=m?d.wheelY/m:h.vy;m<a&&(y=(y+h.vx)/2,v=(v+h.vy)/2);var x=Math.abs(y/v),_=!1;if(x>=1&&p.renderer.isScrollableBy(d.wheelX*d.speed,0)&&(_=!0),x<=1&&p.renderer.isScrollableBy(0,d.wheelY*d.speed)&&(_=!0),_)h.allowed=g;else if(g-h.allowed<a){var E=Math.abs(y)<=1.5*Math.abs(h.vx)&&Math.abs(v)<=1.5*Math.abs(h.vy);E?(_=!0,h.allowed=g):h.allowed=0}if(h.t=g,h.vx=y,h.vy=v,_)return p.renderer.scrollBy(d.wheelX*d.speed,d.wheelY*d.speed),d.stop()}},c}();l.prototype.selectEnd=l.prototype.selectByLinesEnd,l.prototype.selectAllEnd=l.prototype.selectByLinesEnd,l.prototype.selectByWordsEnd=l.prototype.selectByLinesEnd,r.DefaultHandlers=l;function u(c,d,p,h){return Math.sqrt(Math.pow(p-c,2)+Math.pow(h-d,2))}function f(c,d){if(c.start.row==c.end.row)var p=2*d.column-c.start.column-c.end.column;else if(c.start.row==c.end.row-1&&!c.start.column&&!c.end.column)var p=d.column-4;else var p=2*d.row-c.start.row-c.end.row;return p<0?{cursor:c.start,anchor:c.end}:{cursor:c.end,anchor:c.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(n,r,i){r.preventParentScroll=function(s){s.stopPropagation();var a=s.currentTarget,l=a.scrollHeight>a.clientHeight;l||s.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(n,r,i){var o=this&&this.__extends||function(){var g=function(m,y){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])},g(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");g(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),s=this&&this.__values||function(g){var m=typeof Symbol=="function"&&Symbol.iterator,y=m&&g[m],v=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},a=n("./lib/dom");n("./lib/event");var l=n("./range").Range,u=n("./lib/scroll").preventParentScroll,f="ace_tooltip",c=function(){function g(m){this.isOpen=!1,this.$element=null,this.$parentNode=m}return g.prototype.$init=function(){return this.$element=a.createElement("div"),this.$element.className=f,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},g.prototype.getElement=function(){return this.$element||this.$init()},g.prototype.setText=function(m){this.getElement().textContent=m},g.prototype.setHtml=function(m){this.getElement().innerHTML=m},g.prototype.setPosition=function(m,y){this.getElement().style.left=m+"px",this.getElement().style.top=y+"px"},g.prototype.setClassName=function(m){a.addCssClass(this.getElement(),m)},g.prototype.setTheme=function(m){this.$element.className=f+" "+(m.isDark?"ace_dark ":"")+(m.cssClass||"")},g.prototype.show=function(m,y,v){m!=null&&this.setText(m),y!=null&&v!=null&&this.setPosition(y,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},g.prototype.hide=function(m){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=f,this.isOpen=!1)},g.prototype.getHeight=function(){return this.getElement().offsetHeight},g.prototype.getWidth=function(){return this.getElement().offsetWidth},g.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},g}(),d=function(){function g(){this.popups=[]}return g.prototype.addPopup=function(m){this.popups.push(m),this.updatePopups()},g.prototype.removePopup=function(m){var y=this.popups.indexOf(m);y!==-1&&(this.popups.splice(y,1),this.updatePopups())},g.prototype.updatePopups=function(){var m,y,v,x;this.popups.sort(function(P,S){return S.priority-P.priority});var _=[];try{for(var E=s(this.popups),C=E.next();!C.done;C=E.next()){var w=C.value,T=!0;try{for(var R=(v=void 0,s(_)),L=R.next();!L.done;L=R.next()){var B=L.value;if(this.doPopupsOverlap(B,w)){T=!1;break}}}catch(P){v={error:P}}finally{try{L&&!L.done&&(x=R.return)&&x.call(R)}finally{if(v)throw v.error}}T?_.push(w):w.hide()}}catch(P){m={error:P}}finally{try{C&&!C.done&&(y=E.return)&&y.call(E)}finally{if(m)throw m.error}}},g.prototype.doPopupsOverlap=function(m,y){var v=m.getElement().getBoundingClientRect(),x=y.getElement().getBoundingClientRect();return v.left<x.right&&v.right>x.left&&v.top<x.bottom&&v.bottom>x.top},g}(),p=new d;r.popupManager=p,r.Tooltip=c;var h=function(g){o(m,g);function m(y){y===void 0&&(y=document.body);var v=g.call(this,y)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var x=v.getElement();return x.style.whiteSpace="pre-wrap",x.style.pointerEvents="auto",x.addEventListener("mouseout",v.onMouseOut),x.tabIndex=-1,x.addEventListener("blur",(function(){x.contains(document.activeElement)||this.hide()}).bind(v)),x.addEventListener("wheel",u),v}return m.prototype.addToEditor=function(y){y.on("mousemove",this.onMouseMove),y.on("mousedown",this.hide),y.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},m.prototype.removeFromEditor=function(y){y.off("mousemove",this.onMouseMove),y.off("mousedown",this.hide),y.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},m.prototype.onMouseMove=function(y,v){this.lastEvent=y,this.lastT=Date.now();var x=v.$mouseHandler.isMousePressed;if(this.isOpen){var _=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(_.row,_.column)||x||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||x||(this.lastEvent=y,this.timeout=setTimeout(this.waitForHover,this.idleTime))},m.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var y=Date.now()-this.lastT;if(this.idleTime-y>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-y);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},m.prototype.isOutsideOfText=function(y){var v=y.editor,x=y.getDocumentPosition(),_=v.session.getLine(x.row);if(x.column==_.length){var E=v.renderer.pixelToScreenCoordinates(y.clientX,y.clientY),C=v.session.documentToScreenPosition(x.row,x.column);if(C.column!=E.column||C.row!=E.row)return!0}return!1},m.prototype.setDataProvider=function(y){this.$gatherData=y},m.prototype.showForRange=function(y,v,x,_){var E=10;if(!(_&&_!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var C=y.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(C.theme)),this.isOpen=!0,this.addMarker(v,y.session),this.range=l.fromPoints(v.start,v.end);var w=C.textToScreenCoordinates(v.start.row,v.start.column),T=C.scroller.getBoundingClientRect();w.pageX<T.left&&(w.pageX=T.left);var R=this.getElement();R.innerHTML="",R.appendChild(x),R.style.maxHeight="",R.style.display="block";var L=R.clientHeight,B=R.clientWidth,P=window.innerHeight-w.pageY-C.lineHeight,S=!0;w.pageY-L<0&&w.pageY<P&&(S=!1),R.style.maxHeight=(S?w.pageY:P)-E+"px",R.style.top=S?"":w.pageY+C.lineHeight+"px",R.style.bottom=S?window.innerHeight-w.pageY+"px":"",R.style.left=Math.min(w.pageX,window.innerWidth-B-E)+"px"}},m.prototype.addMarker=function(y,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(y,"ace_highlight-marker","text")},m.prototype.hide=function(y){!y&&document.activeElement==this.getElement()||y&&y.target&&(y.type!="keydown"||y.ctrlKey||y.metaKey)&&this.$element.contains(y.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},m.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},m.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},m.prototype.onMouseOut=function(y){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||y.relatedTarget.classList.contains("ace_content")||this.hide())},m}(c);r.HoverTooltip=h}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(n,r,i){var o=this&&this.__extends||function(){var g=function(m,y){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(v[_]=x[_])},g(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");g(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),s=this&&this.__values||function(g){var m=typeof Symbol=="function"&&Symbol.iterator,y=m&&g[m],v=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},a=n("../lib/dom"),l=n("../lib/event"),u=n("../tooltip").Tooltip,f=n("../config").nls,c=5,d=3;r.GUTTER_TOOLTIP_LEFT_OFFSET=c,r.GUTTER_TOOLTIP_TOP_OFFSET=d;function p(g){var m=g.editor,y=m.renderer.$gutterLayer,v=new h(m,!0);g.editor.setDefaultHandler("guttermousedown",function(T){if(!(!m.isFocused()||T.getButton()!=0)){var R=y.getRegion(T);if(R!="foldWidgets"){var L=T.getDocumentPosition().row,B=m.session.selection;if(T.getShiftKey())B.selectTo(L,0);else{if(T.domEvent.detail==2)return m.selectAll(),T.preventDefault();g.$clickSelection=m.selection.getLineRange(L)}return g.setState("selectByLines"),g.captureMouse(T),T.preventDefault()}}});var x,_;function E(){var T=_.getDocumentPosition().row,R=m.session.getLength();if(T==R){var L=m.renderer.pixelToScreenCoordinates(0,_.y).row,B=_.$pos;if(L>m.session.documentToScreenRow(B.row,B.column))return C()}if(v.showTooltip(T),!!v.isOpen)if(m.on("mousewheel",C),m.on("changeSession",C),window.addEventListener("keydown",C,!0),g.$tooltipFollowsMouse)w(_);else{var P=_.getGutterRow(),S=y.$lines.get(P);if(S){var k=S.element.querySelector(".ace_gutter_annotation"),D=k.getBoundingClientRect(),O=v.getElement().style;O.left=D.right-c+"px",O.top=D.bottom-d+"px"}else w(_)}}function C(T){T&&T.type==="keydown"&&(T.ctrlKey||T.metaKey)||T&&T.type==="mouseout"&&(!T.relatedTarget||v.getElement().contains(T.relatedTarget))||(x&&(x=clearTimeout(x)),v.isOpen&&(v.hideTooltip(),m.off("mousewheel",C),m.off("changeSession",C),window.removeEventListener("keydown",C,!0)))}function w(T){v.setPosition(T.x,T.y)}g.editor.setDefaultHandler("guttermousemove",function(T){var R=T.domEvent.target||T.domEvent.srcElement;if(a.hasCssClass(R,"ace_fold-widget")||a.hasCssClass(R,"ace_custom-widget"))return C();v.isOpen&&g.$tooltipFollowsMouse&&w(T),_=T,!x&&(x=setTimeout(function(){x=null,_&&!g.isMousePressed&&E()},50))}),l.addListener(m.renderer.$gutter,"mouseout",function(T){_=null,v.isOpen&&(x=setTimeout(function(){x=null,C(T)},50))},m)}r.GutterHandler=p;var h=function(g){o(m,g);function m(y,v){v===void 0&&(v=!1);var x=g.call(this,y.container)||this;x.editor=y,x.visibleTooltipRow;var _=x.getElement();return _.setAttribute("role","tooltip"),_.style.pointerEvents="auto",v&&(x.onMouseOut=x.onMouseOut.bind(x),_.addEventListener("mouseout",x.onMouseOut)),x}return m.prototype.onMouseOut=function(y){this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||this.hideTooltip())},m.prototype.setPosition=function(y,v){var x=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,E=this.getWidth(),C=this.getHeight();y+=15,v+=15,y+E>x&&(y-=y+E-x),v+C>_&&(v-=20+C),u.prototype.setPosition.call(this,y,v)},Object.defineProperty(m,"annotationLabels",{get:function(){return{error:{singular:f("gutter-tooltip.aria-label.error.singular","error"),plural:f("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:f("gutter-tooltip.aria-label.security.singular","security finding"),plural:f("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:f("gutter-tooltip.aria-label.warning.singular","warning"),plural:f("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:f("gutter-tooltip.aria-label.info.singular","information message"),plural:f("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:f("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:f("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),m.prototype.showTooltip=function(y){var v,x=this.editor.renderer.$gutterLayer,_=x.$annotations[y],E;_?E={displayText:Array.from(_.displayText),type:Array.from(_.type)}:E={displayText:[],type:[]};var C=x.session.getFoldLine(y);if(C&&x.$showFoldedAnnotations){for(var w={error:[],security:[],warning:[],info:[],hint:[]},T={error:1,security:2,warning:3,info:4,hint:5},R,L=y+1;L<=C.end.row;L++)if(x.$annotations[L])for(var B=0;B<x.$annotations[L].text.length;B++){var P=x.$annotations[L].type[B];w[P].push(x.$annotations[L].text[B]),(!R||T[P]<T[R])&&(R=P)}if(["error","security","warning"].includes(R)){var S="".concat(m.annotationsToSummaryString(w)," in folded code.");E.displayText.push(S),E.type.push(R+"_fold")}}if(E.displayText.length===0)return this.hideTooltip();for(var k={error:[],security:[],warning:[],info:[],hint:[]},D=x.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",L=0;L<E.displayText.length;L++){var O=a.createElement("span"),N=a.createElement("span");(v=N.classList).add.apply(v,["ace_".concat(E.type[L]),D]),N.setAttribute("aria-label","".concat(m.annotationLabels[E.type[L].replace("_fold","")].singular)),N.setAttribute("role","img"),N.appendChild(a.createTextNode(" ")),O.appendChild(N),O.appendChild(a.createTextNode(E.displayText[L])),O.appendChild(a.createElement("br")),k[E.type[L].replace("_fold","")].push(O)}var j=this.getElement();a.removeChildren(j),k.error.forEach(function(q){return j.appendChild(q)}),k.security.forEach(function(q){return j.appendChild(q)}),k.warning.forEach(function(q){return j.appendChild(q)}),k.info.forEach(function(q){return j.appendChild(q)}),k.hint.forEach(function(q){return j.appendChild(q)}),j.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.visibleTooltipRow=y,this.editor._signal("showGutterTooltip",this)},m.prototype.hideTooltip=function(){this.isOpen&&(this.$element.removeAttribute("aria-live"),this.hide(),this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this))},m.annotationsToSummaryString=function(y){var v,x,_=[],E=["error","security","warning","info","hint"];try{for(var C=s(E),w=C.next();!w.done;w=C.next()){var T=w.value;if(y[T].length){var R=y[T].length===1?m.annotationLabels[T].singular:m.annotationLabels[T].plural;_.push("".concat(y[T].length," ").concat(R))}}}catch(L){v={error:L}}finally{try{w&&!w.done&&(x=C.return)&&x.call(C)}finally{if(v)throw v.error}}return _.join(", ")},m}(u);r.GutterTooltip=h}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,r,i){var o=n("../lib/event"),s=n("../lib/useragent"),a=function(){function l(u,f){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=f,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return l.prototype.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},l.prototype.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},l.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},l.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},l.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,f=this.editor.session.documentToScreenRow(u,0),c=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return f-c},l.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,f=u.getSelectionRange();if(f.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=f.contains(c.row,c.column)}return this.$inSelection},l.prototype.getButton=function(){return o.getButton(this.domEvent)},l.prototype.getShiftKey=function(){return this.domEvent.shiftKey},l.prototype.getAccelKey=function(){return s.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},l}();r.MouseEvent=a}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(n,r,i){var o=n("../lib/dom"),s=n("../lib/event"),a=n("../lib/useragent"),l=200,u=200,f=5;function c(p){var h=p.editor,g=o.createElement("div");g.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",g.textContent="";var m=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];m.forEach(function(H){p[H]=this[H]},this),h.on("mousedown",this.onMouseDown.bind(p));var y=h.container,v,x,_,E,C,w,T=0,R,L,B,P,S;this.onDragStart=function(H){if(this.cancelDrag||!y.draggable){var se=this;return setTimeout(function(){se.startSelect(),se.captureMouse(H)},0),H.preventDefault()}C=h.getSelectionRange();var ne=H.dataTransfer;ne.effectAllowed=h.getReadOnly()?"copy":"copyMove",h.container.appendChild(g),ne.setDragImage&&ne.setDragImage(g,0,0),setTimeout(function(){h.container.removeChild(g)}),ne.clearData(),ne.setData("Text",h.session.getTextRange()),L=!0,this.setState("drag")},this.onDragEnd=function(H){if(y.draggable=!1,L=!1,this.setState(null),!h.getReadOnly()){var se=H.dataTransfer.dropEffect;!R&&se=="move"&&h.session.remove(h.getSelectionRange()),h.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(H){if(!(h.getReadOnly()||!Q(H.dataTransfer)))return x=H.clientX,_=H.clientY,v||N(),T++,H.dataTransfer.dropEffect=R=ee(H),s.preventDefault(H)},this.onDragOver=function(H){if(!(h.getReadOnly()||!Q(H.dataTransfer)))return x=H.clientX,_=H.clientY,v||(N(),T++),q!==null&&(q=null),H.dataTransfer.dropEffect=R=ee(H),s.preventDefault(H)},this.onDragLeave=function(H){if(T--,T<=0&&v)return j(),R=null,s.preventDefault(H)},this.onDrop=function(H){if(w){var se=H.dataTransfer;if(L)switch(R){case"move":C.contains(w.row,w.column)?C={start:w,end:w}:C=h.moveText(C,w);break;case"copy":C=h.moveText(C,w,!0);break}else{var ne=se.getData("Text");C={start:w,end:h.session.insert(w,ne)},h.focus(),R=null}return j(),s.preventDefault(H)}},s.addListener(y,"dragstart",this.onDragStart.bind(p),h),s.addListener(y,"dragend",this.onDragEnd.bind(p),h),s.addListener(y,"dragenter",this.onDragEnter.bind(p),h),s.addListener(y,"dragover",this.onDragOver.bind(p),h),s.addListener(y,"dragleave",this.onDragLeave.bind(p),h),s.addListener(y,"drop",this.onDrop.bind(p),h);function k(H,se){var ne=Date.now(),ge=!se||H.row!=se.row,we=!se||H.column!=se.column;if(!P||ge||we)h.moveCursorToPosition(H),P=ne,S={x,y:_};else{var $e=d(S.x,S.y,x,_);$e>f?P=null:ne-P>=u&&(h.renderer.scrollCursorIntoView(),P=null)}}function D(H,se){var ne=Date.now(),ge=h.renderer.layerConfig.lineHeight,we=h.renderer.layerConfig.characterWidth,$e=h.renderer.scroller.getBoundingClientRect(),ve={x:{left:x-$e.left,right:$e.right-x},y:{top:_-$e.top,bottom:$e.bottom-_}},Ee=Math.min(ve.x.left,ve.x.right),Ve=Math.min(ve.y.top,ve.y.bottom),Ue={row:H.row,column:H.column};Ee/we<=2&&(Ue.column+=ve.x.left<ve.x.right?-3:2),Ve/ge<=1&&(Ue.row+=ve.y.top<ve.y.bottom?-1:1);var ft=H.row!=Ue.row,ht=H.column!=Ue.column,zt=!se||H.row!=se.row;ft||ht&&!zt?B?ne-B>=l&&h.renderer.scrollCursorIntoView(Ue):B=ne:B=null}function O(){var H=w;w=h.renderer.screenToTextCoordinates(x,_),k(w,H),D(w,H)}function N(){C=h.selection.toOrientedRange(),v=h.session.addMarker(C,"ace_selection",h.getSelectionStyle()),h.clearSelection(),h.isFocused()&&h.renderer.$cursorLayer.setBlinking(!1),clearInterval(E),O(),E=setInterval(O,20),T=0,s.addListener(document,"mousemove",W)}function j(){clearInterval(E),h.session.removeMarker(v),v=null,h.selection.fromOrientedRange(C),h.isFocused()&&!L&&h.$resetCursorStyle(),C=null,w=null,T=0,B=null,P=null,s.removeListener(document,"mousemove",W)}var q=null;function W(){q==null&&(q=setTimeout(function(){q!=null&&v&&j()},20))}function Q(H){var se=H.types;return!se||Array.prototype.some.call(se,function(ne){return ne=="text/plain"||ne=="Text"})}function ee(H){var se=["copy","copymove","all","uninitialized"],ne=["move","copymove","linkmove","all","uninitialized"],ge=a.isMac?H.altKey:H.ctrlKey,we="uninitialized";try{we=H.dataTransfer.effectAllowed.toLowerCase()}catch{}var $e="none";return ge&&se.indexOf(we)>=0?$e="copy":ne.indexOf(we)>=0?$e="move":se.indexOf(we)>=0&&($e="copy"),$e}}(function(){this.dragWait=function(){var p=Date.now()-this.mousedownEvent.time;p>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var p=this.editor.container;p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(p){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var p=this.editor,h=p.container;h.draggable=!0,p.renderer.$cursorLayer.setBlinking(!1),p.setStyle("ace_dragging");var g=a.isWin?"default":"move";p.renderer.setCursorStyle(g),this.setState("dragReady")},this.onMouseDrag=function(p){var h=this.editor.container;if(a.isIE&&this.state=="dragReady"){var g=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>3&&h.dragDrop()}if(this.state==="dragWait"){var g=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>0&&(h.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(p){if(this.$dragEnabled){this.mousedownEvent=p;var h=this.editor,g=p.inSelection(),m=p.getButton(),y=p.domEvent.detail||1;if(y===1&&m===0&&g){if(p.editor.inMultiSelectMode&&(p.getAccelKey()||p.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=p.domEvent.target||p.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),h.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var x=h.container;x.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(p,this.onMouseDrag.bind(this)),p.defaultPrevented=!0}}}}).call(c.prototype);function d(p,h,g,m){return Math.sqrt(Math.pow(g-p,2)+Math.pow(m-h,2))}r.DragdropHandler=c}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(n,r,i){var o=n("./mouse_event").MouseEvent,s=n("../lib/event"),a=n("../lib/dom");r.addTouchListeners=function(l,u){var f="scroll",c,d,p,h,g,m,y=0,v,x=0,_=0,E=0,C,w;function T(){var k=window.navigator&&window.navigator.clipboard,D=!1,O=function(){var q=u.getCopyText(),W=u.session.getUndoManager().hasUndo();w.replaceChild(a.buildDom(D?["span",!q&&N("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],q&&N("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],q&&N("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],k&&N("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],W&&N("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],N("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],N("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),w.firstChild)},N=function(q){return u.commands.canExecute(q,u)},j=function(q){var W=q.target.getAttribute("action");if(W=="more"||!D)return D=!D,O();W=="paste"?k.readText().then(function(Q){u.execCommand(W,Q)}):W&&((W=="cut"||W=="copy")&&(k?k.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(W)),w.firstChild.style.display="none",D=!1,W!="openCommandPalette"&&u.focus()};w=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(q){f="menu",q.stopPropagation(),q.preventDefault(),u.textInput.focus()},ontouchend:function(q){q.stopPropagation(),q.preventDefault(),j(q)},onclick:j},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function R(){if(!u.getOption("enableMobileMenu")){w&&L();return}w||T();var k=u.selection.cursor,D=u.renderer.textToScreenCoordinates(k.row,k.column),O=u.renderer.textToScreenCoordinates(0,0).pageX,N=u.renderer.scrollLeft,j=u.container.getBoundingClientRect();w.style.top=D.pageY-j.top-3+"px",D.pageX-j.left<j.width-70?(w.style.left="",w.style.right="10px"):(w.style.right="",w.style.left=O+N-j.left+"px"),w.style.display="",w.firstChild.style.display="none",u.on("input",L)}function L(k){w&&(w.style.display="none"),u.off("input",L)}function B(){g=null,clearTimeout(g);var k=u.selection.getRange(),D=k.contains(v.row,v.column);(k.isEmpty()||!D)&&(u.selection.moveToPosition(v),u.selection.selectWord()),f="wait",R()}function P(){g=null,clearTimeout(g),u.selection.moveToPosition(v);var k=x>=2?u.selection.getLineRange(v.row):u.session.getBracketRange(v);k&&!k.isEmpty()?u.selection.setRange(k):u.selection.selectWord(),f="wait"}s.addListener(l,"contextmenu",function(k){if(C){var D=u.textInput.getElement();D.focus()}},u),s.addListener(l,"touchstart",function(k){var D=k.touches;if(g||D.length>1){clearTimeout(g),g=null,p=-1,f="zoom";return}C=u.$mouseHandler.isMousePressed=!0;var O=u.renderer.layerConfig.lineHeight,N=u.renderer.layerConfig.lineHeight,j=k.timeStamp;h=j;var q=D[0],W=q.clientX,Q=q.clientY;Math.abs(c-W)+Math.abs(d-Q)>O&&(p=-1),c=k.clientX=W,d=k.clientY=Q,_=E=0;var ee=new o(k,u);if(v=ee.getDocumentPosition(),j-p<500&&D.length==1&&!y)x++,k.preventDefault(),k.button=0,P();else{x=0;var H=u.selection.cursor,se=u.selection.isEmpty()?H:u.selection.anchor,ne=u.renderer.$cursorLayer.getPixelPosition(H,!0),ge=u.renderer.$cursorLayer.getPixelPosition(se,!0),we=u.renderer.scroller.getBoundingClientRect(),$e=u.renderer.layerConfig.offset,ve=u.renderer.scrollLeft,Ee=function(ft,ht){return ft=ft/N,ht=ht/O-.75,ft*ft+ht*ht};if(k.clientX<we.left){f="zoom";return}var Ve=Ee(k.clientX-we.left-ne.left+ve,k.clientY-we.top-ne.top+$e),Ue=Ee(k.clientX-we.left-ge.left+ve,k.clientY-we.top-ge.top+$e);Ve<3.5&&Ue<3.5&&(f=Ve>Ue?"cursor":"anchor"),Ue<3.5?f="anchor":Ve<3.5?f="cursor":f="scroll",g=setTimeout(B,450)}p=j},u),s.addListener(l,"touchend",function(k){C=u.$mouseHandler.isMousePressed=!1,m&&clearInterval(m),f=="zoom"?(f="",y=0):g?(u.selection.moveToPosition(v),y=0,R()):f=="scroll"?(S(),L()):R(),clearTimeout(g),g=null},u),s.addListener(l,"touchmove",function(k){g&&(clearTimeout(g),g=null);var D=k.touches;if(!(D.length>1||f=="zoom")){var O=D[0],N=c-O.clientX,j=d-O.clientY;if(f=="wait")if(N*N+j*j>4)f="cursor";else return k.preventDefault();c=O.clientX,d=O.clientY,k.clientX=O.clientX,k.clientY=O.clientY;var q=k.timeStamp,W=q-h;if(h=q,f=="scroll"){var Q=new o(k,u);Q.speed=1,Q.wheelX=N,Q.wheelY=j,10*Math.abs(N)<Math.abs(j)&&(N=0),10*Math.abs(j)<Math.abs(N)&&(j=0),W!=0&&(_=N/W,E=j/W),u._emit("mousewheel",Q),Q.propagationStopped||(_=E=0)}else{var ee=new o(k,u),H=ee.getDocumentPosition();f=="cursor"?u.selection.moveCursorToPosition(H):f=="anchor"&&u.selection.setSelectionAnchor(H.row,H.column),u.renderer.scrollCursorIntoView(H),k.preventDefault()}}},u);function S(){y+=60,m=setInterval(function(){y--<=0&&(clearInterval(m),m=null),Math.abs(_)<.01&&(_=0),Math.abs(E)<.01&&(E=0),y<20&&(_=.9*_),y<20&&(E=.9*E);var k=u.session.getScrollTop();u.renderer.scrollBy(10*_,10*E),k==u.session.getScrollTop()&&(y=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(n,r,i){var o=n("../lib/event"),s=n("../lib/useragent"),a=n("./default_handlers").DefaultHandlers,l=n("./default_gutter_handler").GutterHandler,u=n("./mouse_event").MouseEvent,f=n("./dragdrop_handler").DragdropHandler,c=n("./touch_handler").addTouchListeners,d=n("../config"),p=function(){function h(g){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var m=this;this.editor=g,new a(this),new l(this),new f(this);var y=function(_){var E=!document.hasFocus||!document.hasFocus()||!g.isFocused()&&document.activeElement==(g.textInput&&g.textInput.getElement());E&&window.focus(),g.focus(),setTimeout(function(){g.isFocused()||g.focus()})},v=g.renderer.getMouseEventTarget();o.addListener(v,"click",this.onMouseEvent.bind(this,"click"),g),o.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),g),o.addMultiMouseDownListener([v,g.renderer.scrollBarV&&g.renderer.scrollBarV.inner,g.renderer.scrollBarH&&g.renderer.scrollBarH.inner,g.textInput&&g.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",g),o.addMouseWheelListener(g.container,this.onMouseWheel.bind(this,"mousewheel"),g),c(g.container,g);var x=g.renderer.$gutter;o.addListener(x,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),g),o.addListener(x,"click",this.onMouseEvent.bind(this,"gutterclick"),g),o.addListener(x,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),g),o.addListener(x,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),g),o.addListener(v,"mousedown",y,g),o.addListener(x,"mousedown",y,g),s.isIE&&g.renderer.scrollBarV&&(o.addListener(g.renderer.scrollBarV.element,"mousedown",y,g),o.addListener(g.renderer.scrollBarH.element,"mousedown",y,g)),g.on("mousemove",function(_){if(!(m.state||m.$dragDelay||!m.$dragEnabled)){var E=g.renderer.screenToTextCoordinates(_.x,_.y),C=g.session.selection.getRange(),w=g.renderer;!C.isEmpty()&&C.insideStart(E.row,E.column)?w.setCursorStyle("default"):w.setCursorStyle("")}},g)}return h.prototype.onMouseEvent=function(g,m){this.editor.session&&this.editor._emit(g,new u(m,this.editor))},h.prototype.onMouseMove=function(g,m){var y=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!y||!y.length||this.editor._emit(g,new u(m,this.editor))},h.prototype.onMouseWheel=function(g,m){var y=new u(m,this.editor);y.speed=this.$scrollSpeed*2,y.wheelX=m.wheelX,y.wheelY=m.wheelY,this.editor._emit(g,y)},h.prototype.setState=function(g){this.state=g},h.prototype.captureMouse=function(g,m){this.x=g.x,this.y=g.y,this.isMousePressed=!0;var y=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var x=this,_=function(R){if(R){if(s.isWebKit&&!R.which&&x.releaseMouse)return x.releaseMouse();x.x=R.clientX,x.y=R.clientY,m&&m(R),x.mouseEvent=new u(R,x.editor),x.$mouseMoved=!0}},E=function(R){y.off("beforeEndOperation",w),clearInterval(T),y.session&&C(),x[x.state+"End"]&&x[x.state+"End"](R),x.state="",x.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),x.$onCaptureMouseMove=x.releaseMouse=null,R&&x.onMouseEvent("mouseup",R),y.endOperation()},C=function(){x[x.state]&&x[x.state](),x.$mouseMoved=!1};if(s.isOldIE&&g.domEvent.type=="dblclick")return setTimeout(function(){E(g)});var w=function(R){x.releaseMouse&&y.curOp.command.name&&y.curOp.selectionChanged&&(x[x.state+"End"]&&x[x.state+"End"](),x.state="",x.releaseMouse())};y.on("beforeEndOperation",w),y.startOperation({command:{name:"mouse"}}),x.$onCaptureMouseMove=_,x.releaseMouse=o.capture(this.editor.container,_,E);var T=setInterval(C,20)},h.prototype.cancelContextMenu=function(){var g=(function(m){m&&m.domEvent&&m.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",g),m&&m.domEvent&&o.stopEvent(m.domEvent))}).bind(this);setTimeout(g,10),this.editor.on("nativecontextmenu",g)},h.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},h}();p.prototype.releaseMouse=null,d.defineOptions(p.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),r.MouseHandler=p}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(n,r,i){var o=n("../lib/dom"),s=function(){function a(l){l.on("click",function(u){var f=u.getDocumentPosition(),c=l.session,d=c.getFoldAt(f.row,f.column,1);d&&(u.getAccelKey()?c.removeFold(d):c.expandFold(d),u.stop());var p=u.domEvent&&u.domEvent.target;p&&o.hasCssClass(p,"ace_inline_button")&&o.hasCssClass(p,"ace_toggle_wrap")&&(c.setOption("wrap",!c.getUseWrapMode()),l.renderer.scrollCursorIntoView())}),l.on("gutterclick",function(u){var f=l.renderer.$gutterLayer.getRegion(u);if(f=="foldWidgets"){var c=u.getDocumentPosition().row,d=l.session;d.foldWidgets&&d.foldWidgets[c]&&l.session.onFoldWidgetClick(c,u),l.isFocused()||l.focus(),u.stop()}}),l.on("gutterdblclick",function(u){var f=l.renderer.$gutterLayer.getRegion(u);if(f=="foldWidgets"){var c=u.getDocumentPosition().row,d=l.session,p=d.getParentFoldRangeData(c,!0),h=p.range||p.firstRange;if(h){c=h.start.row;var g=d.getFoldAt(c,d.getLine(c).length,1);g?d.removeFold(g):(d.addFold("...",h),l.renderer.scrollCursorIntoView({row:h.start.row,column:0}))}u.stop()}})}return a}();r.FoldHandler=s}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(n,r,i){var o=n("../lib/keys"),s=n("../lib/event"),a=function(){function l(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return l.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},l.prototype.setKeyboardHandler=function(u){var f=this.$handlers;if(f[f.length-1]!=u){for(;f[f.length-1]&&f[f.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(f[f.length-1]);this.addKeyboardHandler(u,1)}},l.prototype.addKeyboardHandler=function(u,f){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var c=this.$handlers.indexOf(u);c!=-1&&this.$handlers.splice(c,1),f==null?this.$handlers.push(u):this.$handlers.splice(f,0,u),c==-1&&u.attach&&u.attach(this.$editor)}},l.prototype.removeKeyboardHandler=function(u){var f=this.$handlers.indexOf(u);return f==-1?!1:(this.$handlers.splice(f,1),u.detach&&u.detach(this.$editor),!0)},l.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},l.prototype.getStatusText=function(){var u=this.$data,f=u.editor;return this.$handlers.map(function(c){return c.getStatusText&&c.getStatusText(f,u)||""}).filter(Boolean).join(" ")},l.prototype.$callKeyboardHandlers=function(u,f,c,d){for(var p,h=!1,g=this.$editor.commands,m=this.$handlers.length;m--&&(p=this.$handlers[m].handleKeyboard(this.$data,u,f,c,d),!(!(!p||!p.command)&&(p.command=="null"?h=!0:h=g.exec(p.command,this.$editor,p.args,d),h&&d&&u!=-1&&p.passEvent!=!0&&p.command.passEvent!=!0&&s.stopEvent(d),h))););return!h&&u==-1&&(p={command:"insertstring"},h=g.exec("insertstring",this.$editor,f)),h&&this.$editor._signal&&this.$editor._signal("keyboardActivity",p),h},l.prototype.onCommandKey=function(u,f,c){var d=o.keyCodeToString(c);return this.$callKeyboardHandlers(f,d,c,u)},l.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},l}();r.KeyBinding=a}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(n,r,i){var o=0,s=0,a=!1,l=!1,u=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d=0,p=1,h=0,g=1,m=2,y=3,v=4,x=5,_=6,E=7,C=8,w=9,T=10,R=11,L=12,B=13,P=14,S=15,k=16,D=17,O=18,N=[O,O,O,O,O,O,O,O,O,_,x,_,C,x,O,O,O,O,O,O,O,O,O,O,O,O,O,O,x,x,x,_,C,v,v,R,R,R,v,v,v,v,v,T,w,T,w,w,m,m,m,m,m,m,m,m,m,m,w,v,v,v,v,v,v,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,v,v,v,v,v,v,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,v,v,v,v,O,O,O,O,O,O,x,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,v,R,R,R,R,v,v,v,v,h,v,v,O,v,v,R,R,m,m,v,h,v,v,v,m,h,v,v,v,v,v],j=[C,C,C,C,C,C,C,C,C,C,C,O,O,O,h,g,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,C,x,B,P,S,k,D,w,R,R,R,R,R,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,w,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,C];function q(H,se,ne,ge){var we=o?c:f,$e=null,ve=null,Ee=null,Ve=0,Ue=null,ft=null,ht=-1,zt=null,$t=null,Tn=[];if(!ge)for(zt=0,ge=[];zt<ne;zt++)ge[zt]=ee(H[zt]);for(s=o,a=!1,l=!1,u=!1,$t=0;$t<ne;$t++){if($e=Ve,Tn[$t]=ve=Q(H,ge,Tn,$t),Ve=we[$e][ve],Ue=Ve&240,Ve&=15,se[$t]=Ee=we[Ve][5],Ue>0)if(Ue==16){for(zt=ht;zt<$t;zt++)se[zt]=1;ht=-1}else ht=-1;if(ft=we[Ve][6],ft)ht==-1&&(ht=$t);else if(ht>-1){for(zt=ht;zt<$t;zt++)se[zt]=Ee;ht=-1}ge[$t]==x&&(se[$t]=0),s|=Ee}if(u){for(zt=0;zt<ne;zt++)if(ge[zt]==_){se[zt]=o;for(var it=zt-1;it>=0&&ge[it]==C;it--)se[it]=o}}}function W(H,se,ne){if(!(s<H)){if(H==1&&o==p&&!l){ne.reverse();return}for(var ge=ne.length,we=0,$e,ve,Ee,Ve;we<ge;){if(se[we]>=H){for($e=we+1;$e<ge&&se[$e]>=H;)$e++;for(ve=we,Ee=$e-1;ve<Ee;ve++,Ee--)Ve=ne[ve],ne[ve]=ne[Ee],ne[Ee]=Ve;we=$e}we++}}}function Q(H,se,ne,ge){var we=se[ge],$e,ve,Ee,Ve;switch(we){case h:case g:a=!1;case v:case y:return we;case m:return a?y:m;case E:return a=!0,g;case C:return v;case w:return ge<1||ge+1>=se.length||($e=ne[ge-1])!=m&&$e!=y||(ve=se[ge+1])!=m&&ve!=y?v:(a&&(ve=y),ve==$e?ve:v);case T:return $e=ge>0?ne[ge-1]:x,$e==m&&ge+1<se.length&&se[ge+1]==m?m:v;case R:if(ge>0&&ne[ge-1]==m)return m;if(a)return v;for(Ve=ge+1,Ee=se.length;Ve<Ee&&se[Ve]==R;)Ve++;return Ve<Ee&&se[Ve]==m?m:v;case L:for(Ee=se.length,Ve=ge+1;Ve<Ee&&se[Ve]==L;)Ve++;if(Ve<Ee){var Ue=H[ge],ft=Ue>=1425&&Ue<=2303||Ue==64286;if($e=se[Ve],ft&&($e==g||$e==E))return g}return ge<1||($e=se[ge-1])==x?v:ne[ge-1];case x:return a=!1,l=!0,o;case _:return u=!0,v;case B:case P:case k:case D:case S:a=!1;case O:return v}}function ee(H){var se=H.charCodeAt(0),ne=se>>8;return ne==0?se>191?h:N[se]:ne==5?/[\u0591-\u05f4]/.test(H)?g:h:ne==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(H)?L:/[\u0660-\u0669\u066b-\u066c]/.test(H)?y:se==1642?R:/[\u06f0-\u06f9]/.test(H)?m:E:ne==32&&se<=8287?j[se&255]:ne==254&&se>=65136?E:v}r.L=h,r.R=g,r.EN=m,r.ON_R=3,r.AN=4,r.R_H=5,r.B=6,r.RLE=7,r.DOT="",r.doBidiReorder=function(H,se,ne){if(H.length<2)return{};var ge=H.split(""),we=new Array(ge.length),$e=new Array(ge.length),ve=[];o=ne?p:d,q(ge,ve,ge.length,se);for(var Ee=0;Ee<we.length;we[Ee]=Ee,Ee++);W(2,ve,we),W(1,ve,we);for(var Ee=0;Ee<we.length-1;Ee++)se[Ee]===y?ve[Ee]=r.AN:ve[Ee]===g&&(se[Ee]>E&&se[Ee]<B||se[Ee]===v||se[Ee]===O)?ve[Ee]=r.ON_R:Ee>0&&ge[Ee-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(ge[Ee])&&(ve[Ee-1]=ve[Ee]=r.R_H,Ee++);ge[ge.length-1]===r.DOT&&(ve[ge.length-1]=r.B),ge[0]===""&&(ve[0]=r.RLE);for(var Ee=0;Ee<we.length;Ee++)$e[Ee]=ve[we[Ee]];return{logicalFromVisual:we,bidiLevels:$e}},r.hasBidiCharacters=function(H,se){for(var ne=!1,ge=0;ge<H.length;ge++)se[ge]=ee(H.charAt(ge)),!ne&&(se[ge]==g||se[ge]==E||se[ge]==y)&&(ne=!0);return ne},r.getVisualFromLogicalIdx=function(H,se){for(var ne=0;ne<se.logicalFromVisual.length;ne++)if(se.logicalFromVisual[ne]==H)return ne;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(n,r,i){var o=n("./lib/bidiutil"),s=n("./lib/lang"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,l=function(){function u(f){this.session=f,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=a.test(f.getValue())}return u.prototype.isBidiRow=function(f,c,d){return this.seenBidi?(f!==this.currentRow&&(this.currentRow=f,this.updateRowLine(c,d),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(f){this.seenBidi?this.currentRow=null:f.action=="insert"&&a.test(f.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var f=0,c=this.session.$screenRowCache;if(c.length){var d=this.session.$getRowCacheIndex(c,this.currentRow);d>=0&&(f=this.session.$docRowCache[d])}return f},u.prototype.getSplitIndex=function(){var f=0,c=this.session.$screenRowCache;if(c.length)for(var d,p=this.session.$getRowCacheIndex(c,this.currentRow);this.currentRow-f>0&&(d=this.session.$getRowCacheIndex(c,this.currentRow-f-1),d===p);)p=d,f++;else f=this.currentRow;return f},u.prototype.updateRowLine=function(f,c){f===void 0&&(f=this.getDocumentRow());var d=f===this.session.getLength()-1,p=d?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(f),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var h=this.session.$wrapData[f];h&&(c===void 0&&(c=this.getSplitIndex()),c>0&&h.length?(this.wrapIndent=h.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=c<h.length?this.line.substring(h[c-1],h[c]):this.line.substring(h[h.length-1])):this.line=this.line.substring(0,h[c]),c==h.length&&(this.line+=this.showInvisibles?p:o.DOT))}else this.line+=this.showInvisibles?p:o.DOT;var g=this.session,m=0,y;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,x){return v==="	"||g.isFullWidth(v.charCodeAt(0))?(y=v==="	"?g.getScreenTabSize(x+m):2,m+=y-1,s.stringRepeat(o.DOT,y)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var f=[];o.hasBidiCharacters(this.line,f)||this.isRtlDir?this.bidiMap=o.doBidiReorder(this.line,f,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(f){if(this.characterWidth!==f.$characterSize.width){this.fontMetrics=f;var c=this.characterWidth=f.$characterSize.width,d=f.$measureCharWidth("");this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=c,this.charWidths[o.R]=this.charWidths[o.AN]=d,this.charWidths[o.R_H]=d*.45,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(f){this.showInvisibles=f,this.currentRow=null},u.prototype.setEolChar=function(f){this.EOL=f},u.prototype.setContentWidth=function(f){this.contentWidth=f},u.prototype.isRtlLine=function(f){return this.$isRtl?!0:f!=null?this.session.getLine(f).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(f,c){for(var d=f.getCursorPosition(),p=f.selection.getSelectionAnchor().row;p<=d.row;p++)!c&&f.session.getLine(p).charAt(0)===f.session.$bidiHandler.RLE?f.session.doc.removeInLine(p,0,1):c&&f.session.getLine(p).charAt(0)!==f.session.$bidiHandler.RLE&&f.session.doc.insert({column:0,row:p},f.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(f){f-=this.wrapIndent;var c=this.line.charAt(0)===this.RLE?1:0,d=f>c?this.session.getOverwrite()?f:f-1:c,p=o.getVisualFromLogicalIdx(d,this.bidiMap),h=this.bidiMap.bidiLevels,g=0;!this.session.getOverwrite()&&f<=c&&h[p]%2!==0&&p++;for(var m=0;m<p;m++)g+=this.charWidths[h[m]];return!this.session.getOverwrite()&&f>c&&h[p]%2===0&&(g+=this.charWidths[h[p]]),this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(g+=this.rtlLineOffset),g},u.prototype.getSelections=function(f,c){var d=this.bidiMap,p=d.bidiLevels,h,g=[],m=0,y=Math.min(f,c)-this.wrapIndent,v=Math.max(f,c)-this.wrapIndent,x=!1,_=!1,E=0;this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var C,w=0;w<p.length;w++)C=d.logicalFromVisual[w],h=p[w],x=C>=y&&C<v,x&&!_?E=m:!x&&_&&g.push({left:E,width:m-E}),m+=this.charWidths[h],_=x;if(x&&w===p.length&&g.push({left:E,width:m-E}),this.isRtlDir)for(var T=0;T<g.length;T++)g[T].left+=this.rtlLineOffset;return g},u.prototype.offsetToCol=function(d){this.isRtlDir&&(d-=this.rtlLineOffset);var c=0,d=Math.max(d,0),p=0,h=0,g=this.bidiMap.bidiLevels,m=this.charWidths[g[h]];for(this.wrapIndent&&(d-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);d>p+m/2;){if(p+=m,h===g.length-1){m=0;break}m=this.charWidths[g[++h]]}return h>0&&g[h-1]%2!==0&&g[h]%2===0?(d<p&&h--,c=this.bidiMap.logicalFromVisual[h]):h>0&&g[h-1]%2===0&&g[h]%2!==0?c=1+(d>p?this.bidiMap.logicalFromVisual[h]:this.bidiMap.logicalFromVisual[h-1]):this.isRtlDir&&h===g.length-1&&m===0&&g[h-1]%2===0||!this.isRtlDir&&h===0&&g[h]%2!==0?c=1+this.bidiMap.logicalFromVisual[h]:(h>0&&g[h-1]%2!==0&&m!==0&&h--,c=this.bidiMap.logicalFromVisual[h]),c===0&&this.isRtlDir&&c++,c+this.wrapIndent},u}();r.BidiHandler=l}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(n,r,i){var o=n("./lib/oop"),s=n("./lib/lang"),a=n("./lib/event_emitter").EventEmitter,l=n("./range").Range,u=function(){function f(c){this.session=c,this.doc=c.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var d=this;this.cursor.on("change",function(p){d.$cursorChanged=!0,d.$silent||d._emit("changeCursor"),!d.$isEmpty&&!d.$silent&&d._emit("changeSelection"),!d.$keepDesiredColumnOnChange&&p.old.column!=p.value.column&&(d.$desiredColumn=null)}),this.anchor.on("change",function(){d.$anchorChanged=!0,!d.$isEmpty&&!d.$silent&&d._emit("changeSelection")})}return f.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},f.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},f.prototype.getCursor=function(){return this.lead.getPosition()},f.prototype.setAnchor=function(c,d){this.$isEmpty=!1,this.anchor.setPosition(c,d)},f.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},f.prototype.getSelectionLead=function(){return this.lead.getPosition()},f.prototype.isBackwards=function(){var c=this.anchor,d=this.lead;return c.row>d.row||c.row==d.row&&c.column>d.column},f.prototype.getRange=function(){var c=this.anchor,d=this.lead;return this.$isEmpty?l.fromPoints(d,d):this.isBackwards()?l.fromPoints(d,c):l.fromPoints(c,d)},f.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},f.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},f.prototype.setRange=function(c,d){var p=d?c.end:c.start,h=d?c.start:c.end;this.$setSelection(p.row,p.column,h.row,h.column)},f.prototype.$setSelection=function(c,d,p,h){if(!this.$silent){var g=this.$isEmpty,m=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(c,d),this.cursor.setPosition(p,h),this.$isEmpty=!l.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||g!=this.$isEmpty||m)&&this._emit("changeSelection")}},f.prototype.$moveSelection=function(c){var d=this.lead;this.$isEmpty&&this.setSelectionAnchor(d.row,d.column),c.call(this)},f.prototype.selectTo=function(c,d){this.$moveSelection(function(){this.moveCursorTo(c,d)})},f.prototype.selectToPosition=function(c){this.$moveSelection(function(){this.moveCursorToPosition(c)})},f.prototype.moveTo=function(c,d){this.clearSelection(),this.moveCursorTo(c,d)},f.prototype.moveToPosition=function(c){this.clearSelection(),this.moveCursorToPosition(c)},f.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},f.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},f.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},f.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},f.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},f.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},f.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},f.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},f.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},f.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},f.prototype.getWordRange=function(c,d){if(typeof d>"u"){var p=c||this.lead;c=p.row,d=p.column}return this.session.getWordRange(c,d)},f.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},f.prototype.selectAWord=function(){var c=this.getCursor(),d=this.session.getAWordRange(c.row,c.column);this.setSelectionRange(d)},f.prototype.getLineRange=function(c,d){var p=typeof c=="number"?c:this.lead.row,h,g=this.session.getFoldLine(p);return g?(p=g.start.row,h=g.end.row):h=p,d===!0?new l(p,0,h,this.session.getLine(h).length):new l(p,0,h+1,0)},f.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},f.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},f.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},f.prototype.wouldMoveIntoSoftTab=function(c,d,p){var h=c.column,g=c.column+d;return p<0&&(h=c.column-d,g=c.column),this.session.isTabStop(c)&&this.doc.getLine(c.row).slice(h,g).split(" ").length-1==d},f.prototype.moveCursorLeft=function(){var c=this.lead.getPosition(),d;if(d=this.session.getFoldAt(c.row,c.column,-1))this.moveCursorTo(d.start.row,d.start.column);else if(c.column===0)c.row>0&&this.moveCursorTo(c.row-1,this.doc.getLine(c.row-1).length);else{var p=this.session.getTabSize();this.wouldMoveIntoSoftTab(c,p,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-p):this.moveCursorBy(0,-1)}},f.prototype.moveCursorRight=function(){var c=this.lead.getPosition(),d;if(d=this.session.getFoldAt(c.row,c.column,1))this.moveCursorTo(d.end.row,d.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var p=this.session.getTabSize(),c=this.lead;this.wouldMoveIntoSoftTab(c,p,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,p):this.moveCursorBy(0,1)}},f.prototype.moveCursorLineStart=function(){var c=this.lead.row,d=this.lead.column,p=this.session.documentToScreenRow(c,d),h=this.session.screenToDocumentPosition(p,0),g=this.session.getDisplayLine(c,null,h.row,h.column),m=g.match(/^\s*/);m[0].length!=d&&!this.session.$useEmacsStyleLineStart&&(h.column+=m[0].length),this.moveCursorToPosition(h)},f.prototype.moveCursorLineEnd=function(){var c=this.lead,d=this.session.getDocumentLastRowColumnPosition(c.row,c.column);if(this.lead.column==d.column){var p=this.session.getLine(d.row);if(d.column==p.length){var h=p.search(/\s+$/);h>0&&(d.column=h)}}this.moveCursorTo(d.row,d.column)},f.prototype.moveCursorFileEnd=function(){var c=this.doc.getLength()-1,d=this.doc.getLine(c).length;this.moveCursorTo(c,d)},f.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},f.prototype.moveCursorLongWordRight=function(){var c=this.lead.row,d=this.lead.column,p=this.doc.getLine(c),h=p.substring(d);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var g=this.session.getFoldAt(c,d,1);if(g){this.moveCursorTo(g.end.row,g.end.column);return}if(this.session.nonTokenRe.exec(h)&&(d+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,h=p.substring(d)),d>=p.length){this.moveCursorTo(c,p.length),this.moveCursorRight(),c<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(h)&&(d+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(c,d)},f.prototype.moveCursorLongWordLeft=function(){var c=this.lead.row,d=this.lead.column,p;if(p=this.session.getFoldAt(c,d,-1)){this.moveCursorTo(p.start.row,p.start.column);return}var h=this.session.getFoldStringAt(c,d,-1);h==null&&(h=this.doc.getLine(c).substring(0,d));var g=s.stringReverse(h);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(g)&&(d-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),d<=0){this.moveCursorTo(c,0),this.moveCursorLeft(),c>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(g)&&(d-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(c,d)},f.prototype.$shortWordEndIndex=function(c){var d=0,p,h=/\s/,g=this.session.tokenRe;if(g.lastIndex=0,this.session.tokenRe.exec(c))d=this.session.tokenRe.lastIndex;else{for(;(p=c[d])&&h.test(p);)d++;if(d<1){for(g.lastIndex=0;(p=c[d])&&!g.test(p);)if(g.lastIndex=0,d++,h.test(p))if(d>2){d--;break}else{for(;(p=c[d])&&h.test(p);)d++;if(d>2)break}}}return g.lastIndex=0,d},f.prototype.moveCursorShortWordRight=function(){var c=this.lead.row,d=this.lead.column,p=this.doc.getLine(c),h=p.substring(d),g=this.session.getFoldAt(c,d,1);if(g)return this.moveCursorTo(g.end.row,g.end.column);if(d==p.length){var m=this.doc.getLength();do c++,h=this.doc.getLine(c);while(c<m&&/^\s*$/.test(h));/^\s+/.test(h)||(h=""),d=0}var y=this.$shortWordEndIndex(h);this.moveCursorTo(c,d+y)},f.prototype.moveCursorShortWordLeft=function(){var c=this.lead.row,d=this.lead.column,p;if(p=this.session.getFoldAt(c,d,-1))return this.moveCursorTo(p.start.row,p.start.column);var h=this.session.getLine(c).substring(0,d);if(d===0){do c--,h=this.doc.getLine(c);while(c>0&&/^\s*$/.test(h));d=h.length,/\s+$/.test(h)||(h="")}var g=s.stringReverse(h),m=this.$shortWordEndIndex(g);return this.moveCursorTo(c,d-m)},f.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},f.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},f.prototype.moveCursorBy=function(c,d){var p=this.session.documentToScreenPosition(this.lead.row,this.lead.column),h;if(d===0&&(c!==0&&(this.session.$bidiHandler.isBidiRow(p.row,this.lead.row)?(h=this.session.$bidiHandler.getPosLeft(p.column),p.column=Math.round(h/this.session.$bidiHandler.charWidths[0])):h=p.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?p.column=this.$desiredColumn:this.$desiredColumn=p.column),c!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var g=this.session.lineWidgets[this.lead.row];c<0?c-=g.rowsAbove||0:c>0&&(c+=g.rowCount-(g.rowsAbove||0))}var m=this.session.screenToDocumentPosition(p.row+c,p.column,h);c!==0&&d===0&&m.row===this.lead.row&&(m.column,this.lead.column),this.moveCursorTo(m.row,m.column+d,d===0)},f.prototype.moveCursorToPosition=function(c){this.moveCursorTo(c.row,c.column)},f.prototype.moveCursorTo=function(c,d,p){var h=this.session.getFoldAt(c,d,1);h&&(c=h.start.row,d=h.start.column),this.$keepDesiredColumnOnChange=!0;var g=this.session.getLine(c);/[\uDC00-\uDFFF]/.test(g.charAt(d))&&g.charAt(d-1)&&(this.lead.row==c&&this.lead.column==d+1?d=d-1:d=d+1),this.lead.setPosition(c,d),this.$keepDesiredColumnOnChange=!1,p||(this.$desiredColumn=null)},f.prototype.moveCursorToScreen=function(c,d,p){var h=this.session.screenToDocumentPosition(c,d);this.moveCursorTo(h.row,h.column,p)},f.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},f.prototype.fromOrientedRange=function(c){this.setSelectionRange(c,c.cursor==c.start),this.$desiredColumn=c.desiredColumn||this.$desiredColumn},f.prototype.toOrientedRange=function(c){var d=this.getRange();return c?(c.start.column=d.start.column,c.start.row=d.start.row,c.end.column=d.end.column,c.end.row=d.end.row):c=d,c.cursor=this.isBackwards()?c.start:c.end,c.desiredColumn=this.$desiredColumn,c},f.prototype.getRangeOfMovements=function(c){var d=this.getCursor();try{c(this);var p=this.getCursor();return l.fromPoints(d,p)}catch{return l.fromPoints(d,d)}finally{this.moveCursorToPosition(d)}},f.prototype.toJSON=function(){if(this.rangeCount)var c=this.ranges.map(function(d){var p=d.clone();return p.isBackwards=d.cursor==d.start,p});else{var c=this.getRange();c.isBackwards=this.isBackwards()}return c},f.prototype.fromJSON=function(c){if(c.start==null)if(this.rangeList&&c.length>1){this.toSingleRange(c[0]);for(var d=c.length;d--;){var p=l.fromPoints(c[d].start,c[d].end);c[d].isBackwards&&(p.cursor=p.start),this.addRange(p,!0)}return}else c=c[0];this.rangeList&&this.toSingleRange(c),this.setSelectionRange(c,c.isBackwards)},f.prototype.isEqual=function(c){if((c.length||this.rangeCount)&&c.length!=this.rangeCount)return!1;if(!c.length||!this.ranges)return this.getRange().isEqual(c);for(var d=this.ranges.length;d--;)if(!this.ranges[d].isEqual(c[d]))return!1;return!0},f}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,o.implement(u.prototype,a),r.Selection=u}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(n,r,i){var o=n("./lib/report_error").reportError,s=2e3,a=function(){function l(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var f in this.states){for(var c=this.states[f],d=[],p=0,h=this.matchMappings[f]={defaultToken:"text"},g="g",m=[],y=0;y<c.length;y++){var v=c[y];if(v.defaultToken&&(h.defaultToken=v.defaultToken),v.caseInsensitive&&g.indexOf("i")===-1&&(g+="i"),v.unicode&&g.indexOf("u")===-1&&(g+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var x=v.regex,_=new RegExp("(?:("+x+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||_==1?v.token=v.token[0]:_-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:_-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(_>1?v.onMatch=this.$applyToken:v.onMatch=v.token),_>1&&(/\\\d/.test(v.regex)?x=v.regex.replace(/\\([0-9]+)/g,function(E,C){return"\\"+(parseInt(C,10)+p+1)}):(_=1,x=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&m.push(v)),h[p]=y,p+=_,d.push(x),v.onMatch||(v.onMatch=null)}}d.length||(h[0]=0,d.push("$")),m.forEach(function(E){E.splitRegex=this.createSplitterRegexp(E.regex,g)},this),this.regExps[f]=new RegExp("("+d.join(")|(")+")|($)",g)}}return l.prototype.$setMaxTokenCount=function(u){s=u|0},l.prototype.$applyToken=function(u){var f=this.splitRegex.exec(u).slice(1),c=this.token.apply(this,f);if(typeof c=="string")return[{type:c,value:u}];for(var d=[],p=0,h=c.length;p<h;p++)f[p]&&(d[d.length]={type:c[p],value:f[p]});return d},l.prototype.$arrayTokens=function(u){if(!u)return[];var f=this.splitRegex.exec(u);if(!f)return"text";for(var c=[],d=this.tokenArray,p=0,h=d.length;p<h;p++)f[p+1]&&(c[c.length]={type:d[p],value:f[p+1]});return c},l.prototype.removeCapturingGroups=function(u){var f=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(c,d){return d?"(?:":c});return f},l.prototype.createSplitterRegexp=function(u,f){if(u.indexOf("(?=")!=-1){var c=0,d=!1,p={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(h,g,m,y,v,x){return d?d=v!="]":v?d=!0:y?(c==p.stack&&(p.end=x+1,p.stack=-1),c--):m&&(c++,m.length!=1&&(p.stack=c,p.start=x)),h}),p.end!=null&&/^\)*$/.test(u.substr(p.end))&&(u=u.substring(0,p.start)+u.substr(p.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(f||"").replace("g",""))},l.prototype.getLineTokens=function(u,f){if(f&&typeof f!="string"){var c=f.slice(0);f=c[0],f==="#tmp"&&(c.shift(),f=c.shift())}else var c=[];var d=f||"start",p=this.states[d];p||(d="start",p=this.states[d]);var h=this.matchMappings[d],g=this.regExps[d];g.lastIndex=0;for(var m,y=[],v=0,x=0,_={type:null,value:""};m=g.exec(u);){var E=h.defaultToken,C=null,w=m[0],T=g.lastIndex;if(T-w.length>v){var R=u.substring(v,T-w.length);_.type==E?_.value+=R:(_.type&&y.push(_),_={type:E,value:R})}for(var L=0;L<m.length-2;L++)if(m[L+1]!==void 0){C=p[h[L]],C.onMatch?E=C.onMatch(w,d,c,u):E=C.token,C.next&&(typeof C.next=="string"?d=C.next:d=C.next(d,c),p=this.states[d],p||(this.reportError("state doesn't exist",d),d="start",p=this.states[d]),h=this.matchMappings[d],v=T,g=this.regExps[d],g.lastIndex=T),C.consumeLineEnd&&(v=T);break}if(w){if(typeof E=="string")(!C||C.merge!==!1)&&_.type===E?_.value+=w:(_.type&&y.push(_),_={type:E,value:w});else if(E){_.type&&y.push(_),_={type:null,value:""};for(var L=0;L<E.length;L++)y.push(E[L])}}if(v==u.length)break;if(v=T,x++>s){for(x>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:f,line:u});v<u.length;)_.type&&y.push(_),_={value:u.substring(v,v+=500),type:"overflow"};d="start",c=[];break}}return _.type&&y.push(_),c.length>1&&c[0]!==d&&c.unshift("#tmp",d),{tokens:y,state:c.length?c:d}},l}();a.prototype.reportError=o,r.Tokenizer=a}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(n,r,i){var o=n("../lib/deep_copy").deepCopy,s;s=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(u,f){if(!f){for(var c in u)this.$rules[c]=u[c];return}for(var c in u){for(var d=u[c],p=0;p<d.length;p++){var h=d[p];(h.next||h.onMatch)&&(typeof h.next=="string"&&h.next.indexOf(f)!==0&&(h.next=f+h.next),h.nextState&&h.nextState.indexOf(f)!==0&&(h.nextState=f+h.nextState))}this.$rules[f+c]=d}},this.getRules=function(){return this.$rules},this.embedRules=function(u,f,c,d,p){var h=typeof u=="function"?new u().getRules():u;if(d)for(var g=0;g<d.length;g++)d[g]=f+d[g];else{d=[];for(var m in h)d.push(f+m)}if(this.addRules(h,f),c)for(var y=Array.prototype[p?"push":"unshift"],g=0;g<d.length;g++)y.apply(this.$rules[d[g]],o(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(f)},this.getEmbeds=function(){return this.$embeds};var a=function(u,f){return(u!="start"||f.length)&&f.unshift(this.nextState,u),this.nextState},l=function(u,f){return f.shift(),f.shift()||"start"};this.normalizeRules=function(){var u=0,f=this.$rules;function c(d){var p=f[d];p.processed=!0;for(var h=0;h<p.length;h++){var g=p[h],m=null;Array.isArray(g)&&(m=g,g={}),!g.regex&&g.start&&(g.regex=g.start,g.next||(g.next=[]),g.next.push({defaultToken:g.token},{token:g.token+".end",regex:g.end||g.start,next:"pop"}),g.token=g.token+".start",g.push=!0);var y=g.next||g.push;if(y&&Array.isArray(y)){var v=g.stateName;v||(v=g.token,typeof v!="string"&&(v=v[0]||""),f[v]&&(v+=u++)),f[v]=y,g.next=v,c(v)}else y=="pop"&&(g.next=l);if(g.push&&(g.nextState=g.next||g.push,g.next=a,delete g.push),g.rules)for(var x in g.rules)f[x]?f[x].push&&f[x].push.apply(f[x],g.rules[x]):f[x]=g.rules[x];var _=typeof g=="string"?g:g.include;if(_&&(_==="$self"&&(_="start"),Array.isArray(_)?m=_.map(function(C){return f[C]}):m=f[_]),m){var E=[h,1].concat(m);g.noEscape&&(E=E.filter(function(C){return!C.next})),p.splice.apply(p,E),h--}g.keywordMap&&(g.token=this.createKeywordMapper(g.keywordMap,g.defaultToken||"text",g.caseInsensitive),delete g.defaultToken)}}Object.keys(f).forEach(c,this)},this.createKeywordMapper=function(u,f,c,d){var p=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(h){for(var g=u[h],m=g.split(d||"|"),y=m.length;y--;){var v=m[y];this.$keywordList.push(v),c&&(v=v.toLowerCase()),p[v]=h}},this),u=null,c?function(h){return p[h.toLowerCase()]||f}:function(h){return p[h]||f}},this.getKeywords=function(){return this.$keywords}}).call(s.prototype),r.TextHighlightRules=s}),ace.define("ace/mode/behaviour",["require","exports","module"],function(n,r,i){var o;o=function(){this.$behaviours={}},(function(){this.add=function(s,a,l){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[s]:this.$behaviours[s]={}}this.$behaviours[s][a]=l},this.addBehaviours=function(s){for(var a in s)for(var l in s[a])this.add(a,l,s[a][l])},this.remove=function(s){this.$behaviours&&this.$behaviours[s]&&delete this.$behaviours[s]},this.inherit=function(s,a){if(typeof s=="function")var l=new s().getBehaviours(a);else var l=s.getBehaviours(a);this.addBehaviours(l)},this.getBehaviours=function(s){if(s){for(var a={},l=0;l<s.length;l++)this.$behaviours[s[l]]&&(a[s[l]]=this.$behaviours[s[l]]);return a}else return this.$behaviours}}).call(o.prototype),r.Behaviour=o}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(n,r,i){var o=n("./range").Range,s=function(){function a(l,u,f){this.$session=l,this.$row=u,this.$rowTokens=l.getTokens(u);var c=l.getTokenAt(u,f);this.$tokenIndex=c?c.index:-1}return a.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},a.prototype.stepForward=function(){this.$tokenIndex+=1;for(var l;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,l||(l=this.$session.getLength()),this.$row>=l)return this.$row=l-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentTokenRow=function(){return this.$row},a.prototype.getCurrentTokenColumn=function(){var l=this.$rowTokens,u=this.$tokenIndex,f=l[u].start;if(f!==void 0)return f;for(f=0;u>0;)u-=1,f+=l[u].value.length;return f},a.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},a.prototype.getCurrentTokenRange=function(){var l=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new o(this.$row,u,this.$row,u+l.value.length)},a}();r.TokenIterator=s}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(n,r,i){var o=n("../../lib/oop"),s=n("../behaviour").Behaviour,a=n("../../token_iterator").TokenIterator,l=n("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],f=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],c,d={},p={'"':'"',"'":"'"},h=function(y){var v=-1;if(y.multiSelect&&(v=y.selection.index,d.rangeCount!=y.multiSelect.rangeCount&&(d={rangeCount:y.multiSelect.rangeCount})),d[v])return c=d[v];c=d[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},g=function(y,v,x,_){var E=y.end.row-y.start.row;return{text:x+v+_,selection:[0,y.start.column+1,E,y.end.column+(E?0:1)]}},m;m=function(y){y=y||{},this.add("braces","insertion",function(v,x,_,E,C){var w=_.getCursorPosition(),T=E.doc.getLine(w.row);if(C=="{"){h(_);var R=_.getSelectionRange(),L=E.doc.getTextRange(R),B=E.getTokenAt(w.row,w.column);if(L!==""&&L!=="{"&&_.getWrapBehavioursEnabled())return g(R,L,"{","}");if(B&&/(?:string)\.quasi|\.xml/.test(B.type)){var P=[/tag\-(?:open|name)/,/attribute\-name/];return P.some(function(q){return q.test(B.type)})||/(string)\.quasi/.test(B.type)&&B.value[w.column-B.start-1]!=="$"?void 0:(m.recordAutoInsert(_,E,"}"),{text:"{}",selection:[1,1]})}else if(m.isSaneInsertion(_,E))return/[\]\}\)]/.test(T[w.column])||_.inMultiSelectMode||y.braces?(m.recordAutoInsert(_,E,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(_,E,"{"),{text:"{",selection:[1,1]})}else if(C=="}"){h(_);var S=T.substring(w.column,w.column+1);if(S=="}"){var k=E.$findOpeningBracket("}",{column:w.column+1,row:w.row});if(k!==null&&m.isAutoInsertedClosing(w,T,C))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(C==`
`||C==`\r
`){h(_);var D="";m.isMaybeInsertedClosing(w,T)&&(D=l.stringRepeat("}",c.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var S=T.substring(w.column,w.column+1);if(S==="}"){var O=E.findMatchingBracket({row:w.row,column:w.column+1},"}");if(!O)return null;var N=this.$getIndent(E.getLine(O.row))}else if(D)var N=this.$getIndent(T);else{m.clearMaybeInsertedClosing();return}var j=N+E.getTabString();return{text:`
`+j+`
`+N+D,selection:[1,j.length,1,j.length]}}else m.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,x,_,E,C){var w=E.doc.getTextRange(C);if(!C.isMultiLine()&&w=="{"){h(_);var T=E.doc.getLine(C.start.row),R=T.substring(C.end.column,C.end.column+1);if(R=="}")return C.end.column++,C;c.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,x,_,E,C){if(C=="("){h(_);var w=_.getSelectionRange(),T=E.doc.getTextRange(w);if(T!==""&&_.getWrapBehavioursEnabled())return g(w,T,"(",")");if(m.isSaneInsertion(_,E))return m.recordAutoInsert(_,E,")"),{text:"()",selection:[1,1]}}else if(C==")"){h(_);var R=_.getCursorPosition(),L=E.doc.getLine(R.row),B=L.substring(R.column,R.column+1);if(B==")"){var P=E.$findOpeningBracket(")",{column:R.column+1,row:R.row});if(P!==null&&m.isAutoInsertedClosing(R,L,C))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,x,_,E,C){var w=E.doc.getTextRange(C);if(!C.isMultiLine()&&w=="("){h(_);var T=E.doc.getLine(C.start.row),R=T.substring(C.start.column+1,C.start.column+2);if(R==")")return C.end.column++,C}}),this.add("brackets","insertion",function(v,x,_,E,C){if(C=="["){h(_);var w=_.getSelectionRange(),T=E.doc.getTextRange(w);if(T!==""&&_.getWrapBehavioursEnabled())return g(w,T,"[","]");if(m.isSaneInsertion(_,E))return m.recordAutoInsert(_,E,"]"),{text:"[]",selection:[1,1]}}else if(C=="]"){h(_);var R=_.getCursorPosition(),L=E.doc.getLine(R.row),B=L.substring(R.column,R.column+1);if(B=="]"){var P=E.$findOpeningBracket("]",{column:R.column+1,row:R.row});if(P!==null&&m.isAutoInsertedClosing(R,L,C))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,x,_,E,C){var w=E.doc.getTextRange(C);if(!C.isMultiLine()&&w=="["){h(_);var T=E.doc.getLine(C.start.row),R=T.substring(C.start.column+1,C.start.column+2);if(R=="]")return C.end.column++,C}}),this.add("string_dquotes","insertion",function(v,x,_,E,C){var w=E.$mode.$quotes||p;if(C.length==1&&w[C]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(C)!=-1)return;h(_);var T=C,R=_.getSelectionRange(),L=E.doc.getTextRange(R);if(L!==""&&(L.length!=1||!w[L])&&_.getWrapBehavioursEnabled())return g(R,L,T,T);if(!L){var B=_.getCursorPosition(),P=E.doc.getLine(B.row),S=P.substring(B.column-1,B.column),k=P.substring(B.column,B.column+1),D=E.getTokenAt(B.row,B.column),O=E.getTokenAt(B.row,B.column+1);if(S=="\\"&&D&&/escape/.test(D.type))return null;var N=D&&/string|escape/.test(D.type),j=!O||/string|escape/.test(O.type),q;if(k==T)q=N!==j,q&&/string\.end/.test(O.type)&&(q=!1);else{if(N&&!j||N&&j)return null;var W=E.$mode.tokenRe;W.lastIndex=0;var Q=W.test(S);W.lastIndex=0;var ee=W.test(k),H=E.$mode.$pairQuotesAfter,se=H&&H[T]&&H[T].test(S);if(!se&&Q||ee||k&&!/[\s;,.})\]\\]/.test(k))return null;var ne=P[B.column-2];if(S==T&&(ne==T||W.test(ne)))return null;q=!0}return{text:q?T+T:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,x,_,E,C){var w=E.$mode.$quotes||p,T=E.doc.getTextRange(C);if(!C.isMultiLine()&&w.hasOwnProperty(T)){h(_);var R=E.doc.getLine(C.start.row),L=R.substring(C.start.column+1,C.start.column+2);if(L==T)return C.end.column++,C}}),y.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,x,_,E,C){if(v==="doc-start"&&(C===`
`||C===`\r
`)&&_.selection.isEmpty()){var w=_.getCursorPosition();if(w.column===0)return;for(var T=E.doc.getLine(w.row),R=E.doc.getLine(w.row+1),L=E.getTokens(w.row),B=0,P=0;P<L.length;P++){B+=L[P].value.length;var S=L[P];if(B>=w.column){if(B===w.column){if(!/\.doc/.test(S.type))return;if(/\*\//.test(S.value)){var k=L[P+1];if(!k||!/\.doc/.test(k.type))return}}var D=w.column-(B-S.value.length),O=S.value.indexOf("*/"),N=S.value.indexOf("/**",O>-1?O+2:0);if(N!==-1&&D>N&&D<N+3||O!==-1&&N!==-1&&D>=O&&D<=N||!/\.doc/.test(S.type))return;break}}var j=this.$getIndent(T);if(/\s*\*/.test(R))return/^\s*\*/.test(T)?{text:C+j+"* ",selection:[1,2+j.length,1,2+j.length]}:{text:C+j+" * ",selection:[1,3+j.length,1,3+j.length]};if(/\/\*\*/.test(T.substring(0,w.column)))return{text:C+j+" * "+C+" "+j+"*/",selection:[1,4+j.length,1,4+j.length]}}})},m.isSaneInsertion=function(y,v){var x=y.getCursorPosition(),_=new a(v,x.row,x.column);if(!this.$matchTokenType(_.getCurrentToken()||"text",u)){if(/[)}\]]/.test(y.session.getLine(x.row)[x.column]))return!0;var E=new a(v,x.row,x.column+1);if(!this.$matchTokenType(E.getCurrentToken()||"text",u))return!1}return _.stepForward(),_.getCurrentTokenRow()!==x.row||this.$matchTokenType(_.getCurrentToken()||"text",f)},m.$matchTokenType=function(y,v){return v.indexOf(y.type||y)>-1},m.recordAutoInsert=function(y,v,x){var _=y.getCursorPosition(),E=v.doc.getLine(_.row);this.isAutoInsertedClosing(_,E,c.autoInsertedLineEnd[0])||(c.autoInsertedBrackets=0),c.autoInsertedRow=_.row,c.autoInsertedLineEnd=x+E.substr(_.column),c.autoInsertedBrackets++},m.recordMaybeInsert=function(y,v,x){var _=y.getCursorPosition(),E=v.doc.getLine(_.row);this.isMaybeInsertedClosing(_,E)||(c.maybeInsertedBrackets=0),c.maybeInsertedRow=_.row,c.maybeInsertedLineStart=E.substr(0,_.column)+x,c.maybeInsertedLineEnd=E.substr(_.column),c.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(y,v,x){return c.autoInsertedBrackets>0&&y.row===c.autoInsertedRow&&x===c.autoInsertedLineEnd[0]&&v.substr(y.column)===c.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(y,v){return c.maybeInsertedBrackets>0&&y.row===c.maybeInsertedRow&&v.substr(y.column)===c.maybeInsertedLineEnd&&v.substr(0,y.column)==c.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){c.autoInsertedLineEnd=c.autoInsertedLineEnd.substr(1),c.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){c&&(c.maybeInsertedBrackets=0,c.maybeInsertedRow=-1)},o.inherits(m,s),r.CstyleBehaviour=m}),ace.define("ace/unicode",["require","exports","module"],function(n,r,i){for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],s=0,a=[],l=0;l<o.length;l+=2)a.push(s+=o[l]),o[l+1]&&a.push(45,s+=o[l+1]);r.wordChars=String.fromCharCode.apply(null,a)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(n,r,i){var o=n("../config"),s=n("../tokenizer").Tokenizer,a=n("./text_highlight_rules").TextHighlightRules,l=n("./behaviour/cstyle").CstyleBehaviour,u=n("../unicode"),f=n("../lib/lang"),c=n("../token_iterator").TokenIterator,d=n("../range").Range,p;p=function(){this.HighlightRules=a},(function(){this.$defaultBehaviour=new l,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new s(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(h,g,m,y){var v=g.doc,x=!0,_=!0,E=1/0,C=g.getTabSize(),w=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var L=this.lineCommentStart.map(f.escapeRegExp).join("|"),T=this.lineCommentStart[0];else var L=f.escapeRegExp(this.lineCommentStart),T=this.lineCommentStart;L=new RegExp("^(\\s*)(?:"+L+") ?"),w=g.getUseSoftTabs();var S=function(ee,H){var se=ee.match(L);if(se){var ne=se[1].length,ge=se[0].length;!O(ee,ne,ge)&&se[0][ge-1]==" "&&ge--,v.removeInLine(H,ne,ge)}},D=T+" ",P=function(ee,H){(!x||/\S/.test(ee))&&(O(ee,E,E)?v.insertInLine({row:H,column:E},D):v.insertInLine({row:H,column:E},T))},k=function(ee,H){return L.test(ee)},O=function(ee,H,se){for(var ne=0;H--&&ee.charAt(H)==" ";)ne++;if(ne%C!=0)return!1;for(var ne=0;ee.charAt(se++)==" ";)ne++;return C>2?ne%C!=C-1:ne%C==0}}else{if(!this.blockComment)return!1;var T=this.blockComment.start,R=this.blockComment.end,L=new RegExp("^(\\s*)(?:"+f.escapeRegExp(T)+")"),B=new RegExp("(?:"+f.escapeRegExp(R)+")\\s*$"),P=function(q,W){k(q,W)||(!x||/\S/.test(q))&&(v.insertInLine({row:W,column:q.length},R),v.insertInLine({row:W,column:E},T))},S=function(q,W){var Q;(Q=q.match(B))&&v.removeInLine(W,q.length-Q[0].length,q.length),(Q=q.match(L))&&v.removeInLine(W,Q[1].length,Q[0].length)},k=function(q,W){if(L.test(q))return!0;for(var Q=g.getTokens(W),ee=0;ee<Q.length;ee++)if(Q[ee].type==="comment")return!0}}function N(q){for(var W=m;W<=y;W++)q(v.getLine(W),W)}var j=1/0;N(function(q,W){var Q=q.search(/\S/);Q!==-1?(Q<E&&(E=Q),_&&!k(q,W)&&(_=!1)):j>q.length&&(j=q.length)}),E==1/0&&(E=j,x=!1,_=!1),w&&E%C!=0&&(E=Math.floor(E/C)*C),N(_?S:P)},this.toggleBlockComment=function(h,g,m,y){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var x=new c(g,y.row,y.column),_=x.getCurrentToken();g.selection;var E=g.selection.toOrientedRange(),C,w;if(_&&/comment/.test(_.type)){for(var T,R;_&&/comment/.test(_.type);){var L=_.value.indexOf(v.start);if(L!=-1){var B=x.getCurrentTokenRow(),P=x.getCurrentTokenColumn()+L;T=new d(B,P,B,P+v.start.length);break}_=x.stepBackward()}for(var x=new c(g,y.row,y.column),_=x.getCurrentToken();_&&/comment/.test(_.type);){var L=_.value.indexOf(v.end);if(L!=-1){var B=x.getCurrentTokenRow(),P=x.getCurrentTokenColumn()+L;R=new d(B,P,B,P+v.end.length);break}_=x.stepForward()}R&&g.remove(R),T&&(g.remove(T),C=T.start.row,w=-v.start.length)}else w=v.start.length,C=m.start.row,g.insert(m.end,v.end),g.insert(m.start,v.start);E.start.row==C&&(E.start.column+=w),E.end.row==C&&(E.end.column+=w),g.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(h,g,m){return this.$getIndent(g)},this.checkOutdent=function(h,g,m){return!1},this.autoOutdent=function(h,g,m){},this.$getIndent=function(h){return h.match(/^\s*/)[0]},this.createWorker=function(h){return null},this.createModeDelegates=function(h){this.$embeds=[],this.$modes={};for(var g in h)if(h[g]){var m=h[g],y=m.prototype.$id,v=o.$modes[y];v||(o.$modes[y]=v=new m),o.$modes[g]||(o.$modes[g]=v),this.$embeds.push(g),this.$modes[g]=v}for(var x=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],_=function(C){(function(w){var T=x[C],R=w[T];w[x[C]]=function(){return this.$delegator(T,arguments,R)}})(E)},E=this,g=0;g<x.length;g++)_(g)},this.$delegator=function(h,g,m){var y=g[0]||"start";if(typeof y!="string"){if(Array.isArray(y[2])){var v=y[2][y[2].length-1],x=this.$modes[v];if(x)return x[h].apply(x,[y[1]].concat([].slice.call(g,1)))}y=y[0]||"start"}for(var _=0;_<this.$embeds.length;_++)if(this.$modes[this.$embeds[_]]){var E=y.split(this.$embeds[_]);if(!E[0]&&E[1]){g[0]=E[1];var x=this.$modes[this.$embeds[_]];return x[h].apply(x,g)}}var C=m.apply(this,g);return m?C:void 0},this.transformAction=function(h,g,m,y,v){if(this.$behaviour){var x=this.$behaviour.getBehaviours();for(var _ in x)if(x[_][g]){var E=x[_][g].apply(this,arguments);if(E)return E}}},this.getKeywords=function(h){if(!this.completionKeywords){var g=this.$tokenizer.rules,m=[];for(var y in g)for(var v=g[y],x=0,_=v.length;x<_;x++)if(typeof v[x].token=="string")/keyword|support|storage/.test(v[x].token)&&m.push(v[x].regex);else if(typeof v[x].token=="object"){for(var E=0,C=v[x].token.length;E<C;E++)if(/keyword|support|storage/.test(v[x].token[E])){var y=v[x].regex.match(/\(.+?\)/g)[E];m.push(y.substr(1,y.length-2))}}this.completionKeywords=m}return h?m.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(h,g,m,y){var v=this.$keywordList||this.$createKeywordList();return v.map(function(x){return{name:x,value:x,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(p.prototype),r.Mode=p}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(n,r,i){var o=n("./lib/dom"),s=function(){function a(l){this.session=l,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return a.prototype.getRowLength=function(l){var u;return this.lineWidgets?u=this.lineWidgets[l]&&this.lineWidgets[l].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[l]?1+u:this.$wrapData[l].length+1+u},a.prototype.$getWidgetScreenLength=function(){var l=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(l+=u.rowCount)}),l},a.prototype.$onChangeEditor=function(l){this.attach(l.editor)},a.prototype.attach=function(l){l&&l.widgetManager&&l.widgetManager!=this&&l.widgetManager.detach(),this.editor!=l&&(this.detach(),this.editor=l,l&&(l.widgetManager=this,l.renderer.on("beforeRender",this.measureWidgets),l.renderer.on("afterRender",this.renderWidgets)))},a.prototype.detach=function(l){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var f=this.session.lineWidgets;f&&f.forEach(function(c){c&&c.el&&c.el.parentNode&&(c._inDocument=!1,c.el.parentNode.removeChild(c.el))})}},a.prototype.updateOnFold=function(l,u){var f=u.lineWidgets;if(!(!f||!l.action)){for(var c=l.data,d=c.start.row,p=c.end.row,h=l.action=="add",g=d+1;g<p;g++)f[g]&&(f[g].hidden=h);f[p]&&(h?f[d]?f[p].hidden=h:f[d]=f[p]:(f[d]==f[p]&&(f[d]=void 0),f[p].hidden=h))}},a.prototype.updateOnChange=function(l){var u=this.session.lineWidgets;if(u){var f=l.start.row,c=l.end.row-f;if(c!==0)if(l.action=="remove"){var d=u.splice(f+1,c);!u[f]&&d[d.length-1]&&(u[f]=d.pop()),d.forEach(function(h){h&&this.removeLineWidget(h)},this),this.$updateRows()}else{var p=new Array(c);u[f]&&u[f].column!=null&&l.start.column>u[f].column&&f++,p.unshift(f,0),u.splice.apply(u,p),this.$updateRows()}}},a.prototype.$updateRows=function(){var l=this.session.lineWidgets;if(l){var u=!0;l.forEach(function(f,c){if(f)for(u=!1,f.row=c;f.$oldWidget;)f.$oldWidget.row=c,f=f.$oldWidget}),u&&(this.session.lineWidgets=null)}},a.prototype.$registerLineWidget=function(l){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[l.row];return u&&(l.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[l.row]=l,l},a.prototype.addLineWidget=function(l){if(this.$registerLineWidget(l),l.session=this.session,!this.editor)return l;var u=this.editor.renderer;l.html&&!l.el&&(l.el=o.createElement("div"),l.el.innerHTML=l.html),l.text&&!l.el&&(l.el=o.createElement("div"),l.el.textContent=l.text),l.el&&(o.addCssClass(l.el,"ace_lineWidgetContainer"),l.className&&o.addCssClass(l.el,l.className),l.el.style.position="absolute",l.el.style.zIndex="5",u.container.appendChild(l.el),l._inDocument=!0,l.coverGutter||(l.el.style.zIndex="3"),l.pixelHeight==null&&(l.pixelHeight=l.el.offsetHeight)),l.rowCount==null&&(l.rowCount=l.pixelHeight/u.layerConfig.lineHeight);var f=this.session.getFoldAt(l.row,0);if(l.$fold=f,f){var c=this.session.lineWidgets;l.row==f.end.row&&!c[f.start.row]?c[f.start.row]=l:l.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(l),l},a.prototype.removeLineWidget=function(l){if(l._inDocument=!1,l.session=null,l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el),l.editor&&l.editor.destroy)try{l.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[l.row];if(u==l)this.session.lineWidgets[l.row]=l.$oldWidget,l.$oldWidget&&this.onWidgetChanged(l.$oldWidget);else for(;u;){if(u.$oldWidget==l){u.$oldWidget=l.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows()},a.prototype.getWidgetsAtRow=function(l){for(var u=this.session.lineWidgets,f=u&&u[l],c=[];f;)c.push(f),f=f.$oldWidget;return c},a.prototype.onWidgetChanged=function(l){this.session._changedWidgets.push(l),this.editor&&this.editor.renderer.updateFull()},a.prototype.measureWidgets=function(l,u){var f=this.session._changedWidgets,c=u.layerConfig;if(!(!f||!f.length)){for(var d=1/0,p=0;p<f.length;p++){var h=f[p];if(!(!h||!h.el)&&h.session==this.session){if(!h._inDocument){if(this.session.lineWidgets[h.row]!=h)continue;h._inDocument=!0,u.container.appendChild(h.el)}h.h=h.el.offsetHeight,h.fixedWidth||(h.w=h.el.offsetWidth,h.screenWidth=Math.ceil(h.w/c.characterWidth));var g=h.h/c.lineHeight;h.coverLine&&(g-=this.session.getRowLineCount(h.row),g<0&&(g=0)),h.rowCount!=g&&(h.rowCount=g,h.row<d&&(d=h.row))}}d!=1/0&&(this.session._emit("changeFold",{data:{start:{row:d}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},a.prototype.renderWidgets=function(l,u){var f=u.layerConfig,c=this.session.lineWidgets;if(c){for(var d=Math.min(this.firstRow,f.firstRow),p=Math.max(this.lastRow,f.lastRow,c.length);d>0&&!c[d];)d--;this.firstRow=f.firstRow,this.lastRow=f.lastRow,u.$cursorLayer.config=f;for(var h=d;h<=p;h++){var g=c[h];if(!(!g||!g.el)){if(g.hidden){g.el.style.top=-100-(g.pixelHeight||0)+"px";continue}g._inDocument||(g._inDocument=!0,u.container.appendChild(g.el));var m=u.$cursorLayer.getPixelPosition({row:h,column:0},!0).top;g.coverLine||(m+=f.lineHeight*this.session.getRowLineCount(g.row)),g.el.style.top=m-f.offset+"px";var y=g.coverGutter?0:u.gutterWidth;g.fixedWidth||(y-=u.scrollLeft),g.el.style.left=y+"px",g.fullWidth&&g.screenWidth&&(g.el.style.minWidth=f.width+2*f.padding+"px"),g.fixedWidth?g.el.style.right=u.scrollBar.getWidth()+"px":g.el.style.right=""}}}},a}();r.LineWidgets=s}),ace.define("ace/apply_delta",["require","exports","module"],function(n,r,i){r.applyDelta=function(o,s,a){var l=s.start.row,u=s.start.column,f=o[l]||"";switch(s.action){case"insert":var c=s.lines;if(c.length===1)o[l]=f.substring(0,u)+s.lines[0]+f.substring(u);else{var d=[l,1].concat(s.lines);o.splice.apply(o,d),o[l]=f.substring(0,u)+o[l],o[l+s.lines.length-1]+=f.substring(u)}break;case"remove":var p=s.end.column,h=s.end.row;l===h?o[l]=f.substring(0,u)+f.substring(p):o.splice(l,h-l+1,f.substring(0,u)+o[h].substring(p));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,r,i){var o=n("./lib/oop"),s=n("./lib/event_emitter").EventEmitter,a=function(){function f(c,d,p){this.$onChange=this.onChange.bind(this),this.attach(c),typeof d!="number"?this.setPosition(d.row,d.column):this.setPosition(d,p)}return f.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},f.prototype.getDocument=function(){return this.document},f.prototype.onChange=function(c){if(!(c.start.row==c.end.row&&c.start.row!=this.row)&&!(c.start.row>this.row)){var d=u(c,{row:this.row,column:this.column},this.$insertRight);this.setPosition(d.row,d.column,!0)}},f.prototype.setPosition=function(c,d,p){var h;if(p?h={row:c,column:d}:h=this.$clipPositionToDocument(c,d),!(this.row==h.row&&this.column==h.column)){var g={row:this.row,column:this.column};this.row=h.row,this.column=h.column,this._signal("change",{old:g,value:h})}},f.prototype.detach=function(){this.document.off("change",this.$onChange)},f.prototype.attach=function(c){this.document=c||this.document,this.document.on("change",this.$onChange)},f.prototype.$clipPositionToDocument=function(c,d){var p={};return c>=this.document.getLength()?(p.row=Math.max(0,this.document.getLength()-1),p.column=this.document.getLine(p.row).length):c<0?(p.row=0,p.column=0):(p.row=c,p.column=Math.min(this.document.getLine(p.row).length,Math.max(0,d))),d<0&&(p.column=0),p},f}();a.prototype.$insertRight=!1,o.implement(a.prototype,s);function l(f,c,d){var p=d?f.column<=c.column:f.column<c.column;return f.row<c.row||f.row==c.row&&p}function u(f,c,d){var p=f.action=="insert",h=(p?1:-1)*(f.end.row-f.start.row),g=(p?1:-1)*(f.end.column-f.start.column),m=f.start,y=p?m:f.end;return l(c,m,d)?{row:c.row,column:c.column}:l(y,c,!d)?{row:c.row+h,column:c.column+(c.row==y.row?g:0)}:{row:m.row,column:m.column}}r.Anchor=a}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(n,r,i){var o=n("./lib/oop"),s=n("./apply_delta").applyDelta,a=n("./lib/event_emitter").EventEmitter,l=n("./range").Range,u=n("./anchor").Anchor,f=function(){function c(d){this.$lines=[""],d.length===0?this.$lines=[""]:Array.isArray(d)?this.insertMergedLines({row:0,column:0},d):this.insert({row:0,column:0},d)}return c.prototype.setValue=function(d){var p=this.getLength()-1;this.remove(new l(0,0,p,this.getLine(p).length)),this.insert({row:0,column:0},d||"")},c.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},c.prototype.createAnchor=function(d,p){return new u(this,d,p)},c.prototype.$detectNewLine=function(d){var p=d.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=p?p[1]:`
`,this._signal("changeNewLineMode")},c.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},c.prototype.setNewLineMode=function(d){this.$newLineMode!==d&&(this.$newLineMode=d,this._signal("changeNewLineMode"))},c.prototype.getNewLineMode=function(){return this.$newLineMode},c.prototype.isNewLine=function(d){return d==`\r
`||d=="\r"||d==`
`},c.prototype.getLine=function(d){return this.$lines[d]||""},c.prototype.getLines=function(d,p){return this.$lines.slice(d,p+1)},c.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},c.prototype.getLength=function(){return this.$lines.length},c.prototype.getTextRange=function(d){return this.getLinesForRange(d).join(this.getNewLineCharacter())},c.prototype.getLinesForRange=function(d){var p;if(d.start.row===d.end.row)p=[this.getLine(d.start.row).substring(d.start.column,d.end.column)];else{p=this.getLines(d.start.row,d.end.row),p[0]=(p[0]||"").substring(d.start.column);var h=p.length-1;d.end.row-d.start.row==h&&(p[h]=p[h].substring(0,d.end.column))}return p},c.prototype.insertLines=function(d,p){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(d,p)},c.prototype.removeLines=function(d,p){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(d,p)},c.prototype.insertNewLine=function(d){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(d,["",""])},c.prototype.insert=function(d,p){return this.getLength()<=1&&this.$detectNewLine(p),this.insertMergedLines(d,this.$split(p))},c.prototype.insertInLine=function(d,p){var h=this.clippedPos(d.row,d.column),g=this.pos(d.row,d.column+p.length);return this.applyDelta({start:h,end:g,action:"insert",lines:[p]},!0),this.clonePos(g)},c.prototype.clippedPos=function(d,p){var h=this.getLength();d===void 0?d=h:d<0?d=0:d>=h&&(d=h-1,p=void 0);var g=this.getLine(d);return p==null&&(p=g.length),p=Math.min(Math.max(p,0),g.length),{row:d,column:p}},c.prototype.clonePos=function(d){return{row:d.row,column:d.column}},c.prototype.pos=function(d,p){return{row:d,column:p}},c.prototype.$clipPosition=function(d){var p=this.getLength();return d.row>=p?(d.row=Math.max(0,p-1),d.column=this.getLine(p-1).length):(d.row=Math.max(0,d.row),d.column=Math.min(Math.max(d.column,0),this.getLine(d.row).length)),d},c.prototype.insertFullLines=function(d,p){d=Math.min(Math.max(d,0),this.getLength());var h=0;d<this.getLength()?(p=p.concat([""]),h=0):(p=[""].concat(p),d--,h=this.$lines[d].length),this.insertMergedLines({row:d,column:h},p)},c.prototype.insertMergedLines=function(d,p){var h=this.clippedPos(d.row,d.column),g={row:h.row+p.length-1,column:(p.length==1?h.column:0)+p[p.length-1].length};return this.applyDelta({start:h,end:g,action:"insert",lines:p}),this.clonePos(g)},c.prototype.remove=function(d){var p=this.clippedPos(d.start.row,d.start.column),h=this.clippedPos(d.end.row,d.end.column);return this.applyDelta({start:p,end:h,action:"remove",lines:this.getLinesForRange({start:p,end:h})}),this.clonePos(p)},c.prototype.removeInLine=function(d,p,h){var g=this.clippedPos(d,p),m=this.clippedPos(d,h);return this.applyDelta({start:g,end:m,action:"remove",lines:this.getLinesForRange({start:g,end:m})},!0),this.clonePos(g)},c.prototype.removeFullLines=function(d,p){d=Math.min(Math.max(0,d),this.getLength()-1),p=Math.min(Math.max(0,p),this.getLength()-1);var h=p==this.getLength()-1&&d>0,g=p<this.getLength()-1,m=h?d-1:d,y=h?this.getLine(m).length:0,v=g?p+1:p,x=g?0:this.getLine(v).length,_=new l(m,y,v,x),E=this.$lines.slice(d,p+1);return this.applyDelta({start:_.start,end:_.end,action:"remove",lines:this.getLinesForRange(_)}),E},c.prototype.removeNewLine=function(d){d<this.getLength()-1&&d>=0&&this.applyDelta({start:this.pos(d,this.getLine(d).length),end:this.pos(d+1,0),action:"remove",lines:["",""]})},c.prototype.replace=function(d,p){if(d instanceof l||(d=l.fromPoints(d.start,d.end)),p.length===0&&d.isEmpty())return d.start;if(p==this.getTextRange(d))return d.end;this.remove(d);var h;return p?h=this.insert(d.start,p):h=d.start,h},c.prototype.applyDeltas=function(d){for(var p=0;p<d.length;p++)this.applyDelta(d[p])},c.prototype.revertDeltas=function(d){for(var p=d.length-1;p>=0;p--)this.revertDelta(d[p])},c.prototype.applyDelta=function(d,p){var h=d.action=="insert";(h?d.lines.length<=1&&!d.lines[0]:!l.comparePoints(d.start,d.end))||(h&&d.lines.length>2e4?this.$splitAndapplyLargeDelta(d,2e4):(s(this.$lines,d,p),this._signal("change",d)))},c.prototype.$safeApplyDelta=function(d){var p=this.$lines.length;(d.action=="remove"&&d.start.row<p&&d.end.row<p||d.action=="insert"&&d.start.row<=p)&&this.applyDelta(d)},c.prototype.$splitAndapplyLargeDelta=function(d,p){for(var h=d.lines,g=h.length-p+1,m=d.start.row,y=d.start.column,v=0,x=0;v<g;v=x){x+=p-1;var _=h.slice(v,x);_.push(""),this.applyDelta({start:this.pos(m+v,y),end:this.pos(m+x,y=0),action:d.action,lines:_},!0)}d.lines=h.slice(v),d.start.row=m+v,d.start.column=y,this.applyDelta(d,!0)},c.prototype.revertDelta=function(d){this.$safeApplyDelta({start:this.clonePos(d.start),end:this.clonePos(d.end),action:d.action=="insert"?"remove":"insert",lines:d.lines.slice()})},c.prototype.indexToPosition=function(d,p){for(var h=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,m=p||0,y=h.length;m<y;m++)if(d-=h[m].length+g,d<0)return{row:m,column:d+h[m].length+g};return{row:y-1,column:d+h[y-1].length+g}},c.prototype.positionToIndex=function(d,p){for(var h=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,m=0,y=Math.min(d.row,h.length),v=p||0;v<y;++v)m+=h[v].length+g;return m+d.column},c.prototype.$split=function(d){return d.split(/\r\n|\r|\n/)},c}();f.prototype.$autoNewLine="",f.prototype.$newLineMode="auto",o.implement(f.prototype,a),r.Document=f}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,r,i){var o=n("./lib/oop"),s=n("./lib/event_emitter").EventEmitter,a=function(){function l(u,f){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var c=this;this.$worker=function(){if(c.running){for(var d=new Date,p=c.currentLine,h=-1,g=c.doc,m=p;c.lines[p];)p++;var y=g.getLength(),v=0;for(c.running=!1;p<y;){c.$tokenizeRow(p),h=p;do p++;while(c.lines[p]);if(v++,v%5===0&&new Date-d>20){c.running=setTimeout(c.$worker,20);break}}c.currentLine=p,h==-1&&(h=p),m<=h&&c.fireUpdateEvent(m,h)}}}return l.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},l.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},l.prototype.fireUpdateEvent=function(u,f){var c={first:u,last:f};this._signal("update",{data:c})},l.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},l.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},l.prototype.$updateOnChange=function(u){var f=u.start.row,c=u.end.row-f;if(c===0)this.lines[f]=null;else if(u.action=="remove")this.lines.splice(f,c+1,null),this.states.splice(f,c+1,null);else{var d=Array(c+1);d.unshift(f,1),this.lines.splice.apply(this.lines,d),this.states.splice.apply(this.states,d)}this.currentLine=Math.min(f,this.currentLine,this.doc.getLength()),this.stop()},l.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},l.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},l.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},l.prototype.$tokenizeRow=function(u){var f=this.doc.getLine(u),c=this.states[u-1],d=this.tokenizer.getLineTokens(f,c,u);return this.states[u]+""!=d.state+""?(this.states[u]=d.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=d.tokens},l.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},l}();o.implement(a.prototype,s),r.BackgroundTokenizer=a}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(n,r,i){var o=n("./lib/lang"),s=n("./range").Range,a=function(){function l(u,f,c){c===void 0&&(c="text"),this.setRegexp(u),this.clazz=f,this.type=c,this.docLen=0}return l.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},l.prototype.update=function(u,f,c,d){if(this.regExp){for(var p=d.firstRow,h=d.lastRow,g={},m=c.$editor&&c.$editor.$search,y=m&&m.$isMultilineSearch(c.$editor.getLastSearchOptions()),v=p;v<=h;v++){var x=this.cache[v];if(x==null||c.getValue().length!=this.docLen){if(y){x=[];var _=m.$multiLineForward(c,this.regExp,v,h);if(_){var E=_.endRow<=h?_.endRow-1:h;E>v&&(v=E),x.push(new s(_.startRow,_.startCol,_.endRow,_.endCol))}x.length>this.MAX_RANGES&&(x=x.slice(0,this.MAX_RANGES))}else x=o.getMatchOffsets(c.getLine(v),this.regExp),x.length>this.MAX_RANGES&&(x=x.slice(0,this.MAX_RANGES)),x=x.map(function(R){return new s(v,R.offset,v,R.offset+R.length)});this.cache[v]=x.length?x:""}if(x.length!==0)for(var C=x.length;C--;){var w=x[C].toScreenRange(c),T=w.toString();g[T]||(g[T]=!0,f.drawSingleLineMarker(u,w,this.clazz,d))}}this.docLen=c.getValue().length}},l}();a.prototype.MAX_RANGES=500,r.SearchHighlight=a}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(n,r,i){var o=function(){function E(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return E.prototype.addSession=function(C){this.$session=C},E.prototype.add=function(C,w,T){if(!this.$fromUndo&&C!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),w===!1||!this.lastDeltas){this.lastDeltas=[];var R=this.$undoStack.length;R>this.$undoDepth-1&&this.$undoStack.splice(0,R-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),C.id=this.$rev=++this.$maxRev}(C.action=="remove"||C.action=="insert")&&(this.$lastDelta=C),this.lastDeltas.push(C)}},E.prototype.addSelection=function(C,w){this.selections.push({value:C,rev:w||this.$rev})},E.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},E.prototype.markIgnored=function(C,w){w==null&&(w=this.$rev+1);for(var T=this.$undoStack,R=T.length;R--;){var L=T[R][0];if(L.id<=C)break;L.id<w&&(L.ignore=!0)}this.lastDeltas=null},E.prototype.getSelection=function(C,w){for(var T=this.selections,R=T.length;R--;){var L=T[R];if(L.rev<C)return w&&(L=T[R+1]),L}},E.prototype.getRevision=function(){return this.$rev},E.prototype.getDeltas=function(C,w){w==null&&(w=this.$rev+1);for(var T=this.$undoStack,R=null,L=0,B=T.length;B--;){var P=T[B][0];if(P.id<w&&!R&&(R=B+1),P.id<=C){L=B+1;break}}return T.slice(L,R)},E.prototype.getChangedRanges=function(C,w){w==null&&(w=this.$rev+1)},E.prototype.getChangedLines=function(C,w){w==null&&(w=this.$rev+1)},E.prototype.undo=function(C,w){this.lastDeltas=null;var T=this.$undoStack;if(s(T,T.length)){C||(C=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var R=T.pop(),L=null;return R&&(L=C.undoChanges(R,w),this.$redoStack.push(R),this.$syncRev()),this.$fromUndo=!1,L}},E.prototype.redo=function(C,w){if(this.lastDeltas=null,C||(C=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var T=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);_(this.$redoStack,T),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(B){B[0].id=++this.$maxRev},this)}var R=this.$redoStack.pop(),L=null;return R&&(L=C.redoChanges(R,w),this.$undoStack.push(R),this.$syncRev()),this.$fromUndo=!1,L},E.prototype.$syncRev=function(){var C=this.$undoStack,w=C[C.length-1],T=w&&w[0].id||0;this.$redoStackBaseRev=T,this.$rev=T},E.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},E.prototype.canUndo=function(){return this.$undoStack.length>0},E.prototype.canRedo=function(){return this.$redoStack.length>0},E.prototype.bookmark=function(C){C==null&&(C=this.$rev),this.mark=C},E.prototype.isAtBookmark=function(){return this.$rev===this.mark},E.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},E.prototype.fromJSON=function(C){this.reset(),this.$undoStack=C.$undoStack,this.$redoStack=C.$redoStack},E.prototype.$prettyPrint=function(C){return C?c(C):c(this.$undoStack)+`
---
`+c(this.$redoStack)},E}();o.prototype.hasUndo=o.prototype.canUndo,o.prototype.hasRedo=o.prototype.canRedo,o.prototype.isClean=o.prototype.isAtBookmark,o.prototype.markClean=o.prototype.bookmark;function s(E,C){for(var w=C;w--;){var T=E[w];if(T&&!T[0].ignore){for(;w<C-1;){var R=h(E[w],E[w+1]);E[w]=R[0],E[w+1]=R[1],w++}return!0}}}var a=n("./range").Range,l=a.comparePoints;a.comparePoints;function u(E){return{row:E.row,column:E.column}}function f(E){return{start:u(E.start),end:u(E.end),action:E.action,lines:E.lines.slice()}}function c(E){if(E=E||this,Array.isArray(E))return E.map(c).join(`
`);var C="";return E.action?(C=E.action=="insert"?"+":"-",C+="["+E.lines+"]"):E.value&&(Array.isArray(E.value)?C=E.value.map(d).join(`
`):C=d(E.value)),E.start&&(C+=d(E)),(E.id||E.rev)&&(C+="	("+(E.id||E.rev)+")"),C}function d(E){return E.start.row+":"+E.start.column+"=>"+E.end.row+":"+E.end.column}function p(E,C){var w=E.action=="insert",T=C.action=="insert";if(w&&T)if(l(C.start,E.end)>=0)m(C,E,-1);else if(l(C.start,E.start)<=0)m(E,C,1);else return null;else if(w&&!T)if(l(C.start,E.end)>=0)m(C,E,-1);else if(l(C.end,E.start)<=0)m(E,C,-1);else return null;else if(!w&&T)if(l(C.start,E.start)>=0)m(C,E,1);else if(l(C.start,E.start)<=0)m(E,C,1);else return null;else if(!w&&!T)if(l(C.start,E.start)>=0)m(C,E,1);else if(l(C.end,E.start)<=0)m(E,C,-1);else return null;return[C,E]}function h(E,C){for(var w=E.length;w--;)for(var T=0;T<C.length;T++)if(!p(E[w],C[T])){for(;w<E.length;){for(;T--;)p(C[T],E[w]);T=C.length,w++}return[E,C]}return E.selectionBefore=C.selectionBefore=E.selectionAfter=C.selectionAfter=null,[C,E]}function g(E,C){var w=E.action=="insert",T=C.action=="insert";if(w&&T)l(E.start,C.start)<0?m(C,E,1):m(E,C,1);else if(w&&!T)l(E.start,C.end)>=0?m(E,C,-1):(l(E.start,C.start)<=0||m(E,a.fromPoints(C.start,E.start),-1),m(C,E,1));else if(!w&&T)l(C.start,E.end)>=0?m(C,E,-1):(l(C.start,E.start)<=0||m(C,a.fromPoints(E.start,C.start),-1),m(E,C,1));else if(!w&&!T)if(l(C.start,E.end)>=0)m(C,E,-1);else if(l(C.end,E.start)<=0)m(E,C,-1);else{var R,L;return l(E.start,C.start)<0&&(R=E,E=v(E,C.start)),l(E.end,C.end)>0&&(L=v(E,C.end)),y(C.end,E.start,E.end,-1),L&&!R&&(E.lines=L.lines,E.start=L.start,E.end=L.end,L=E),[C,R,L].filter(Boolean)}return[C,E]}function m(E,C,w){y(E.start,C.start,C.end,w),y(E.end,C.start,C.end,w)}function y(E,C,w,T){E.row==(T==1?C:w).row&&(E.column+=T*(w.column-C.column)),E.row+=T*(w.row-C.row)}function v(E,C){var w=E.lines,T=E.end;E.end=u(C);var R=E.end.row-E.start.row,L=w.splice(R,w.length),B=R?C.column:C.column-E.start.column;w.push(L[0].substring(0,B)),L[0]=L[0].substr(B);var P={start:u(C),end:T,lines:L,action:E.action};return P}function x(E,C){C=f(C);for(var w=E.length;w--;){for(var T=E[w],R=0;R<T.length;R++){var L=T[R],B=g(L,C);C=B[0],B.length!=2&&(B[2]?(T.splice(R+1,1,B[1],B[2]),R++):B[1]||(T.splice(R,1),R--))}T.length||E.splice(w,1)}return E}function _(E,C){for(var w=0;w<C.length;w++)for(var T=C[w],R=0;R<T.length;R++)x(E,T[R])}r.UndoManager=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(n,r,i){var o=n("../range").Range,s=function(){function a(l,u){this.foldData=l,Array.isArray(u)?this.folds=u:u=this.folds=[u];var f=u[u.length-1];this.range=new o(u[0].start.row,u[0].start.column,f.end.row,f.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(c){c.setFoldLine(this)},this)}return a.prototype.shiftRow=function(l){this.start.row+=l,this.end.row+=l,this.folds.forEach(function(u){u.start.row+=l,u.end.row+=l})},a.prototype.addFold=function(l){if(l.sameRow){if(l.start.row<this.startRow||l.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(l),this.folds.sort(function(u,f){return-u.range.compareEnd(f.start.row,f.start.column)}),this.range.compareEnd(l.start.row,l.start.column)>0?(this.end.row=l.end.row,this.end.column=l.end.column):this.range.compareStart(l.end.row,l.end.column)<0&&(this.start.row=l.start.row,this.start.column=l.start.column)}else if(l.start.row==this.end.row)this.folds.push(l),this.end.row=l.end.row,this.end.column=l.end.column;else if(l.end.row==this.start.row)this.folds.unshift(l),this.start.row=l.start.row,this.start.column=l.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");l.foldLine=this},a.prototype.containsRow=function(l){return l>=this.start.row&&l<=this.end.row},a.prototype.walk=function(l,u,f){var c=0,d=this.folds,p,h,g,m=!0;u==null&&(u=this.end.row,f=this.end.column);for(var y=0;y<d.length;y++){if(p=d[y],h=p.range.compareStart(u,f),h==-1){l(null,u,f,c,m);return}if(g=l(null,p.start.row,p.start.column,c,m),g=!g&&l(p.placeholder,p.start.row,p.start.column,c),g||h===0)return;m=!p.sameRow,c=p.end.column}l(null,u,f,c,m)},a.prototype.getNextFoldTo=function(l,u){for(var f,c,d=0;d<this.folds.length;d++){if(f=this.folds[d],c=f.range.compareEnd(l,u),c==-1)return{fold:f,kind:"after"};if(c===0)return{fold:f,kind:"inside"}}return null},a.prototype.addRemoveChars=function(l,u,f){var c=this.getNextFoldTo(l,u),d,p;if(c){if(d=c.fold,c.kind=="inside"&&d.start.column!=u&&d.start.row!=l)window.console&&window.console.log(l,u,d);else if(d.start.row==l){p=this.folds;var h=p.indexOf(d);for(h===0&&(this.start.column+=f),h;h<p.length;h++){if(d=p[h],d.start.column+=f,!d.sameRow)return;d.end.column+=f}this.end.column+=f}}},a.prototype.split=function(l,u){var f=this.getNextFoldTo(l,u);if(!f||f.kind=="inside")return null;var c=f.fold,d=this.folds,p=this.foldData,h=d.indexOf(c),g=d[h-1];this.end.row=g.end.row,this.end.column=g.end.column,d=d.splice(h,d.length-h);var m=new a(p,d);return p.splice(p.indexOf(this)+1,0,m),m},a.prototype.merge=function(l){for(var u=l.folds,f=0;f<u.length;f++)this.addFold(u[f]);var c=this.foldData;c.splice(c.indexOf(l),1)},a.prototype.toString=function(){var l=[this.range.toString()+": ["];return this.folds.forEach(function(u){l.push("  "+u.toString())}),l.push("]"),l.join(`
`)},a.prototype.idxToPosition=function(l){for(var u=0,f=0;f<this.folds.length;f++){var c=this.folds[f];if(l-=c.start.column-u,l<0)return{row:c.start.row,column:c.start.column+l};if(l-=c.placeholder.length,l<0)return c.start;u=c.end.column}return{row:this.end.row,column:this.end.column+l}},a}();r.FoldLine=s}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(n,r,i){var o=n("./range").Range,s=o.comparePoints,a=function(){function l(){this.ranges=[],this.$bias=1}return l.prototype.pointIndex=function(u,f,c){for(var d=this.ranges,p=c||0;p<d.length;p++){var h=d[p],g=s(u,h.end);if(!(g>0)){var m=s(u,h.start);return g===0?f&&m!==0?-p-2:p:m>0||m===0&&!f?p:-p-1}}return-p-1},l.prototype.add=function(u){var f=!u.isEmpty(),c=this.pointIndex(u.start,f);c<0&&(c=-c-1);var d=this.pointIndex(u.end,f,c);return d<0?d=-d-1:d++,this.ranges.splice(c,d-c,u)},l.prototype.addList=function(u){for(var f=[],c=u.length;c--;)f.push.apply(f,this.add(u[c]));return f},l.prototype.substractPoint=function(u){var f=this.pointIndex(u);if(f>=0)return this.ranges.splice(f,1)},l.prototype.merge=function(){var u=[],f=this.ranges;f=f.sort(function(g,m){return s(g.start,m.start)});for(var c=f[0],d,p=1;p<f.length;p++){d=c,c=f[p];var h=s(d.end,c.start);h<0||h==0&&!d.isEmpty()&&!c.isEmpty()||(s(d.end,c.end)<0&&(d.end.row=c.end.row,d.end.column=c.end.column),f.splice(p,1),u.push(c),c=d,p--)}return this.ranges=f,u},l.prototype.contains=function(u,f){return this.pointIndex({row:u,column:f})>=0},l.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},l.prototype.rangeAtPoint=function(u){var f=this.pointIndex(u);if(f>=0)return this.ranges[f]},l.prototype.clipRows=function(u,f){var c=this.ranges;if(c[0].start.row>f||c[c.length-1].start.row<u)return[];var d=this.pointIndex({row:u,column:0});d<0&&(d=-d-1);var p=this.pointIndex({row:f,column:0},d);p<0&&(p=-p-1);for(var h=[],g=d;g<p;g++)h.push(c[g]);return h},l.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},l.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},l.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},l.prototype.$onChange=function(u){for(var f=u.start,c=u.end,d=f.row,p=c.row,h=this.ranges,g=0,m=h.length;g<m;g++){var y=h[g];if(y.end.row>=d)break}if(u.action=="insert")for(var v=p-d,x=-f.column+c.column;g<m;g++){var y=h[g];if(y.start.row>d)break;if(y.start.row==d&&y.start.column>=f.column&&(y.start.column==f.column&&this.$bias<=0||(y.start.column+=x,y.start.row+=v)),y.end.row==d&&y.end.column>=f.column){if(y.end.column==f.column&&this.$bias<0)continue;y.end.column==f.column&&x>0&&g<m-1&&y.end.column>y.start.column&&y.end.column==h[g+1].start.column&&(y.end.column-=x),y.end.column+=x,y.end.row+=v}}else for(var v=d-p,x=f.column-c.column;g<m;g++){var y=h[g];if(y.start.row>p)break;y.end.row<p&&(d<y.end.row||d==y.end.row&&f.column<y.end.column)?(y.end.row=d,y.end.column=f.column):y.end.row==p?y.end.column<=c.column?(v||y.end.column>f.column)&&(y.end.column=f.column,y.end.row=f.row):(y.end.column+=x,y.end.row+=v):y.end.row>p&&(y.end.row+=v),y.start.row<p&&(d<y.start.row||d==y.start.row&&f.column<y.start.column)?(y.start.row=d,y.start.column=f.column):y.start.row==p?y.start.column<=c.column?(v||y.start.column>f.column)&&(y.start.column=f.column,y.start.row=f.row):(y.start.column+=x,y.start.row+=v):y.start.row>p&&(y.start.row+=v)}if(v!=0&&g<m)for(;g<m;g++){var y=h[g];y.start.row+=v,y.end.row+=v}},l}();a.prototype.comparePoints=s,r.RangeList=a}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(n,r,i){var o=this&&this.__extends||function(){var d=function(p,h){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},d(p,h)};return function(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");d(p,h);function g(){this.constructor=p}p.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}(),s=n("../range_list").RangeList,a=function(d){o(p,d);function p(h,g){var m=d.call(this)||this;return m.foldLine=null,m.placeholder=g,m.range=h,m.start=h.start,m.end=h.end,m.sameRow=h.start.row==h.end.row,m.subFolds=m.ranges=[],m}return p.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},p.prototype.setFoldLine=function(h){this.foldLine=h,this.subFolds.forEach(function(g){g.setFoldLine(h)})},p.prototype.clone=function(){var h=this.range.clone(),g=new p(h,this.placeholder);return this.subFolds.forEach(function(m){g.subFolds.push(m.clone())}),g.collapseChildren=this.collapseChildren,g},p.prototype.addSubFold=function(h){if(!this.range.isEqual(h)){u(h,this.start);for(var x=h.start.row,_=h.start.column,g=0,m=-1;g<this.subFolds.length&&(m=this.subFolds[g].range.compare(x,_),m==1);g++);var y=this.subFolds[g],v=0;if(m==0){if(y.range.containsRange(h))return y.addSubFold(h);v=1}for(var x=h.range.end.row,_=h.range.end.column,E=g,m=-1;E<this.subFolds.length&&(m=this.subFolds[E].range.compare(x,_),m==1);E++);m==0&&E++;for(var C=this.subFolds.splice(g,E-g,h),w=m==0?C.length-1:C.length,T=v;T<w;T++)h.addSubFold(C[T]);return h.setFoldLine(this.foldLine),h}},p.prototype.restoreRange=function(h){return c(h,this.start)},p}(s);function l(d,p){d.row-=p.row,d.row==0&&(d.column-=p.column)}function u(d,p){l(d.start,p),l(d.end,p)}function f(d,p){d.row==0&&(d.column+=p.column),d.row+=p.row}function c(d,p){f(d.start,p),f(d.end,p)}r.Fold=a}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(n,r,i){var o=n("../range").Range,s=n("./fold_line").FoldLine,a=n("./fold").Fold,l=n("../token_iterator").TokenIterator,u=n("../mouse/mouse_event").MouseEvent;function f(){this.getFoldAt=function(c,d,p){var h=this.getFoldLine(c);if(!h)return null;for(var g=h.folds,m=0;m<g.length;m++){var y=g[m].range;if(y.contains(c,d)){if(p==1&&y.isEnd(c,d)&&!y.isEmpty())continue;if(p==-1&&y.isStart(c,d)&&!y.isEmpty())continue;return g[m]}}},this.getFoldsInRange=function(c){var d=c.start,p=c.end,h=this.$foldData,g=[];d.column+=1,p.column-=1;for(var m=0;m<h.length;m++){var y=h[m].range.compareRange(c);if(y!=2){if(y==-2)break;for(var v=h[m].folds,x=0;x<v.length;x++){var _=v[x];if(y=_.range.compareRange(c),y==-2)break;if(y==2)continue;if(y==42)break;g.push(_)}}}return d.column-=1,p.column+=1,g},this.getFoldsInRangeList=function(c){if(Array.isArray(c)){var d=[];c.forEach(function(p){d=d.concat(this.getFoldsInRange(p))},this)}else var d=this.getFoldsInRange(c);return d},this.getAllFolds=function(){for(var c=[],d=this.$foldData,p=0;p<d.length;p++)for(var h=0;h<d[p].folds.length;h++)c.push(d[p].folds[h]);return c},this.getFoldStringAt=function(c,d,p,h){if(h=h||this.getFoldLine(c),!h)return null;for(var g={end:{column:0}},m,y,v=0;v<h.folds.length;v++){y=h.folds[v];var x=y.range.compareEnd(c,d);if(x==-1){m=this.getLine(y.start.row).substring(g.end.column,y.start.column);break}else if(x===0)return null;g=y}return m||(m=this.getLine(y.start.row).substring(g.end.column)),p==-1?m.substring(0,d-g.end.column):p==1?m.substring(d-g.end.column):m},this.getFoldLine=function(c,d){var p=this.$foldData,h=0;for(d&&(h=p.indexOf(d)),h==-1&&(h=0),h;h<p.length;h++){var g=p[h];if(g.start.row<=c&&g.end.row>=c)return g;if(g.end.row>c)return null}return null},this.getNextFoldLine=function(c,d){var p=this.$foldData,h=0;for(d&&(h=p.indexOf(d)),h==-1&&(h=0),h;h<p.length;h++){var g=p[h];if(g.end.row>=c)return g}return null},this.getFoldedRowCount=function(c,d){for(var p=this.$foldData,h=d-c+1,g=0;g<p.length;g++){var m=p[g],y=m.end.row,v=m.start.row;if(y>=d){v<d&&(v>=c?h-=d-v:h=0);break}else y>=c&&(v>=c?h-=y-v:h-=y-c+1)}return h},this.$addFoldLine=function(c){return this.$foldData.push(c),this.$foldData.sort(function(d,p){return d.start.row-p.start.row}),c},this.addFold=function(c,d){var p=this.$foldData,h=!1,g;c instanceof a?g=c:(g=new a(d,c),g.collapseChildren=d.collapseChildren),this.$clipRangeToDocument(g.range);var m=g.start.row,y=g.start.column,v=g.end.row,x=g.end.column,_=this.getFoldAt(m,y,1),E=this.getFoldAt(v,x,-1);if(_&&E==_)return _.addSubFold(g);_&&!_.range.isStart(m,y)&&this.removeFold(_),E&&!E.range.isEnd(v,x)&&this.removeFold(E);var C=this.getFoldsInRange(g.range);C.length>0&&(this.removeFolds(C),g.collapseChildren||C.forEach(function(L){g.addSubFold(L)}));for(var w=0;w<p.length;w++){var T=p[w];if(v==T.start.row){T.addFold(g),h=!0;break}else if(m==T.end.row){if(T.addFold(g),h=!0,!g.sameRow){var R=p[w+1];if(R&&R.start.row==v){T.merge(R);break}}break}else if(v<=T.start.row)break}return h||(T=this.$addFoldLine(new s(this.$foldData,g))),this.$useWrapMode?this.$updateWrapData(T.start.row,T.start.row):this.$updateRowLengthCache(T.start.row,T.start.row),this.$modified=!0,this._signal("changeFold",{data:g,action:"add"}),g},this.addFolds=function(c){c.forEach(function(d){this.addFold(d)},this)},this.removeFold=function(c){var d=c.foldLine,p=d.start.row,h=d.end.row,g=this.$foldData,m=d.folds;if(m.length==1)g.splice(g.indexOf(d),1);else if(d.range.isEnd(c.end.row,c.end.column))m.pop(),d.end.row=m[m.length-1].end.row,d.end.column=m[m.length-1].end.column;else if(d.range.isStart(c.start.row,c.start.column))m.shift(),d.start.row=m[0].start.row,d.start.column=m[0].start.column;else if(c.sameRow)m.splice(m.indexOf(c),1);else{var y=d.split(c.start.row,c.start.column);m=y.folds,m.shift(),y.start.row=m[0].start.row,y.start.column=m[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(p,h):this.$updateRowLengthCache(p,h)),this.$modified=!0,this._signal("changeFold",{data:c,action:"remove"})},this.removeFolds=function(c){for(var d=[],p=0;p<c.length;p++)d.push(c[p]);d.forEach(function(h){this.removeFold(h)},this),this.$modified=!0},this.expandFold=function(c){this.removeFold(c),c.subFolds.forEach(function(d){c.restoreRange(d),this.addFold(d)},this),c.collapseChildren>0&&this.foldAll(c.start.row+1,c.end.row,c.collapseChildren-1),c.subFolds=[]},this.expandFolds=function(c){c.forEach(function(d){this.expandFold(d)},this)},this.unfold=function(c,d){var p,h;if(c==null)p=new o(0,0,this.getLength(),0),d==null&&(d=!0);else if(typeof c=="number")p=new o(c,0,c,this.getLine(c).length);else if("row"in c)p=o.fromPoints(c,c);else{if(Array.isArray(c))return h=[],c.forEach(function(m){h=h.concat(this.unfold(m))},this),h;p=c}h=this.getFoldsInRangeList(p);for(var g=h;h.length==1&&o.comparePoints(h[0].start,p.start)<0&&o.comparePoints(h[0].end,p.end)>0;)this.expandFolds(h),h=this.getFoldsInRangeList(p);if(d!=!1?this.removeFolds(h):this.expandFolds(h),g.length)return g},this.isRowFolded=function(c,d){return!!this.getFoldLine(c,d)},this.getRowFoldEnd=function(c,d){var p=this.getFoldLine(c,d);return p?p.end.row:c},this.getRowFoldStart=function(c,d){var p=this.getFoldLine(c,d);return p?p.start.row:c},this.getFoldDisplayLine=function(c,d,p,h,g){h==null&&(h=c.start.row),g==null&&(g=0),d==null&&(d=c.end.row),p==null&&(p=this.getLine(d).length);var m=this.doc,y="";return c.walk(function(v,x,_,E){if(!(x<h)){if(x==h){if(_<g)return;E=Math.max(g,E)}v!=null?y+=v:y+=m.getLine(x).substring(E,_)}},d,p),y},this.getDisplayLine=function(c,d,p,h){var g=this.getFoldLine(c);if(g)return this.getFoldDisplayLine(g,c,d,p,h);var m;return m=this.doc.getLine(c),m.substring(h||0,d||m.length)},this.$cloneFoldData=function(){var c=[];return c=this.$foldData.map(function(d){var p=d.folds.map(function(h){return h.clone()});return new s(c,p)}),c},this.toggleFold=function(c){var d=this.selection,p=d.getRange(),h,g;if(p.isEmpty()){var m=p.start;if(h=this.getFoldAt(m.row,m.column),h){this.expandFold(h);return}else if(c){var y=this.getFoldLine(m.row);y&&this.expandFolds(y.folds);return}else(g=this.findMatchingBracket(m))?p.comparePoint(g)==1?p.end=g:(p.start=g,p.start.column++,p.end.column--):(g=this.findMatchingBracket({row:m.row,column:m.column+1}))?(p.comparePoint(g)==1?p.end=g:p.start=g,p.start.column++):p=this.getCommentFoldRange(m.row,m.column)||p}else{var v=this.getFoldsInRange(p);if(c&&v.length){this.expandFolds(v);return}else v.length==1&&(h=v[0])}if(h||(h=this.getFoldAt(p.start.row,p.start.column)),h&&h.range.toString()==p.toString()){this.expandFold(h);return}var x="...";if(!p.isMultiLine()){if(x=this.getTextRange(p),x.length<4)return;x=x.trim().substring(0,2)+".."}this.addFold(x,p)},this.getCommentFoldRange=function(c,d,p){var h=new l(this,c,d),g=h.getCurrentToken(),m=g&&g.type;if(g&&/^comment|string/.test(m)){m=m.match(/comment|string/)[0],m=="comment"&&(m+="|doc-start|\\.doc");var y=new RegExp(m),v=new o;if(p!=1){do g=h.stepBackward();while(g&&y.test(g.type));g=h.stepForward()}v.start.row=h.getCurrentTokenRow(),v.start.column=h.getCurrentTokenColumn()+g.value.length,h=new l(this,c,d);var x=this.getState(h.$row);if(p!=-1){var _=-1;do if(g=h.stepForward(),_==-1){var E=this.getState(h.$row);x.toString()!==E.toString()&&(_=h.$row)}else if(h.$row>_)break;while(g&&y.test(g.type));g=h.stepBackward()}else g=h.getCurrentToken();return v.end.row=h.getCurrentTokenRow(),v.end.column=h.getCurrentTokenColumn(),v.start.row==v.end.row&&v.start.column>v.end.column?void 0:v}},this.foldAll=function(c,d,p,h){p==null&&(p=1e5);var g=this.foldWidgets;if(g){d=d||this.getLength(),c=c||0;for(var m=c;m<d;m++)if(g[m]==null&&(g[m]=this.getFoldWidget(m)),g[m]=="start"&&!(h&&!h(m))){var y=this.getFoldWidgetRange(m);y&&y.isMultiLine()&&y.end.row<=d&&y.start.row>=c&&(m=y.end.row,y.collapseChildren=p,this.addFold("...",y))}}},this.foldToLevel=function(c){for(this.foldAll();c-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var c=this;this.foldAll(null,null,null,function(d){for(var p=c.getTokens(d),h=0;h<p.length;h++){var g=p[h];if(!(g.type=="text"&&/^\s+$/.test(g.value)))return!!/comment/.test(g.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(c){if(!this.$foldStyles[c])throw new Error("invalid fold style: "+c+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=c){this.$foldStyle=c,c=="manual"&&this.unfold();var d=this.$foldMode;this.$setFolding(null),this.$setFolding(d)}},this.$setFolding=function(c){if(this.$foldMode!=c){if(this.$foldMode=c,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!c||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=c.getFoldWidget.bind(c,this,this.$foldStyle),this.getFoldWidgetRange=c.getFoldWidgetRange.bind(c,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(c,d){var p=this.foldWidgets;if(!p||d&&p[c])return{};for(var h=c-1,g;h>=0;){var m=p[h];if(m==null&&(m=p[h]=this.getFoldWidget(h)),m=="start"){var y=this.getFoldWidgetRange(h);if(g||(g=y),y&&y.end.row>=c)break}h--}return{range:h!==-1&&y,firstRange:g}},this.onFoldWidgetClick=function(c,d){d instanceof u&&(d=d.domEvent);var p={children:d.shiftKey,all:d.ctrlKey||d.metaKey,siblings:d.altKey},h=this.$toggleFoldWidget(c,p);if(!h){var g=d.target||d.srcElement;g&&/ace_fold-widget/.test(g.className)&&(g.className+=" ace_invalid")}},this.$toggleFoldWidget=function(c,d){if(this.getFoldWidget){var p=this.getFoldWidget(c),h=this.getLine(c),g=p==="end"?-1:1,m=this.getFoldAt(c,g===-1?0:h.length,g);if(m)return d.children||d.all?this.removeFold(m):this.expandFold(m),m;var y=this.getFoldWidgetRange(c,!0);if(y&&!y.isMultiLine()&&(m=this.getFoldAt(y.start.row,y.start.column,1),m&&y.isEqual(m.range)))return this.removeFold(m),m;if(d.siblings){var v=this.getParentFoldRangeData(c);if(v.range)var x=v.range.start.row+1,_=v.range.end.row;this.foldAll(x,_,d.all?1e4:0)}else d.children?(_=y?y.end.row:this.getLength(),this.foldAll(c+1,_,d.all?1e4:0)):y&&(d.all&&(y.collapseChildren=1e4),this.addFold("...",y));return y}},this.toggleFoldWidget=function(c){var d=this.selection.getCursor().row;d=this.getRowFoldStart(d);var p=this.$toggleFoldWidget(d,{});if(!p){var h=this.getParentFoldRangeData(d,!0);if(p=h.range||h.firstRange,p){d=p.start.row;var g=this.getFoldAt(d,this.getLine(d).length,1);g?this.removeFold(g):this.addFold("...",p)}}},this.updateFoldWidgets=function(c){var d=c.start.row,p=c.end.row-d;if(p===0)this.foldWidgets[d]=null;else if(c.action=="remove")this.foldWidgets.splice(d,p+1,null);else{var h=Array(p+1);h.unshift(d,1),this.foldWidgets.splice.apply(this.foldWidgets,h)}},this.tokenizerUpdateFoldWidgets=function(c){var d=c.data;d.first!=d.last&&this.foldWidgets.length>d.first&&this.foldWidgets.splice(d.first,this.foldWidgets.length)}}r.Folding=f}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(n,r,i){var o=n("../token_iterator").TokenIterator,s=n("../range").Range;function a(){this.findMatchingBracket=function(l,u){if(l.column==0)return null;var f=u||this.getLine(l.row).charAt(l.column-1);if(f=="")return null;var c=f.match(/([\(\[\{])|([\)\]\}])/);return c?c[1]?this.$findClosingBracket(c[1],l):this.$findOpeningBracket(c[2],l):null},this.getBracketRange=function(l){var u=this.getLine(l.row),f=!0,c,d=u.charAt(l.column-1),p=d&&d.match(/([\(\[\{])|([\)\]\}])/);if(p||(d=u.charAt(l.column),l={row:l.row,column:l.column+1},p=d&&d.match(/([\(\[\{])|([\)\]\}])/),f=!1),!p)return null;if(p[1]){var h=this.$findClosingBracket(p[1],l);if(!h)return null;c=s.fromPoints(l,h),f||(c.end.column++,c.start.column--),c.cursor=c.end}else{var h=this.$findOpeningBracket(p[2],l);if(!h)return null;c=s.fromPoints(h,l),f||(c.start.column++,c.end.column--),c.cursor=c.start}return c},this.getMatchingBracketRanges=function(l,u){var f=this.getLine(l.row),c=/([\(\[\{])|([\)\]\}])/,d=!u&&f.charAt(l.column-1),p=d&&d.match(c);if(p||(d=(u===void 0||u)&&f.charAt(l.column),l={row:l.row,column:l.column+1},p=d&&d.match(c)),!p)return null;var h=new s(l.row,l.column-1,l.row,l.column),g=p[1]?this.$findClosingBracket(p[1],l):this.$findOpeningBracket(p[2],l);if(!g)return[h];var m=new s(g.row,g.column,g.row,g.column+1);return[h,m]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(l,u,f){var c=this.$brackets[l],d=1,p=new o(this,u.row,u.column),h=p.getCurrentToken();if(h||(h=p.stepForward()),!!h){f||(f=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var g=u.column-p.getCurrentTokenColumn()-2,m=h.value;;){for(;g>=0;){var y=m.charAt(g);if(y==c){if(d-=1,d==0)return{row:p.getCurrentTokenRow(),column:g+p.getCurrentTokenColumn()}}else y==l&&(d+=1);g-=1}do h=p.stepBackward();while(h&&!f.test(h.type));if(h==null)break;m=h.value,g=m.length-1}return null}},this.$findClosingBracket=function(l,u,f){var c=this.$brackets[l],d=1,p=new o(this,u.row,u.column),h=p.getCurrentToken();if(h||(h=p.stepForward()),!!h){f||(f=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var g=u.column-p.getCurrentTokenColumn();;){for(var m=h.value,y=m.length;g<y;){var v=m.charAt(g);if(v==c){if(d-=1,d==0)return{row:p.getCurrentTokenRow(),column:g+p.getCurrentTokenColumn()}}else v==l&&(d+=1);g+=1}do h=p.stepForward();while(h&&!f.test(h.type));if(h==null)break;g=0}return null}},this.getMatchingTags=function(l){var u=new o(this,l.row,l.column),f=this.$findTagName(u);if(f){var c=u.stepBackward();return c.value==="<"?this.$findClosingTag(u,f):this.$findOpeningTag(u,f)}},this.$findTagName=function(l){var u=l.getCurrentToken(),f=!1,c=!1;if(u&&u.type.indexOf("tag-name")===-1)do c?u=l.stepBackward():u=l.stepForward(),u&&(u.value==="/>"?c=!0:u.type.indexOf("tag-name")!==-1&&(f=!0));while(u&&!f);return u},this.$findClosingTag=function(l,u){var f,c=u.value,d=u.value,p=0,h=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);u=l.stepForward();var g=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length),m=!1;do{if(f=u,f.type.indexOf("tag-close")!==-1&&!m){var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);m=!0}if(u=l.stepForward(),u){if(u.value===">"&&!m){var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);m=!0}if(u.type.indexOf("tag-name")!==-1){if(c=u.value,d===c){if(f.value==="<")p++;else if(f.value==="</"&&(p--,p<0)){l.stepBackward();var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2);u=l.stepForward();var x=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=l.stepForward()),u&&u.value===">")var _=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);else return}}}else if(d===c&&u.value==="/>"&&(p--,p<0))var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2),x=v,_=x,y=new s(g.end.row,g.end.column,g.end.row,g.end.column+1)}}while(u&&p>=0);if(h&&y&&v&&_&&g&&x)return{openTag:new s(h.start.row,h.start.column,y.end.row,y.end.column),closeTag:new s(v.start.row,v.start.column,_.end.row,_.end.column),openTagName:g,closeTagName:x}},this.$findOpeningTag=function(l,u){var f=l.getCurrentToken(),c=u.value,d=0,p=l.getCurrentTokenRow(),h=l.getCurrentTokenColumn(),g=h+2,m=new s(p,h,p,g);l.stepForward();var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=l.stepForward()),!(!u||u.value!==">")){var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);l.stepBackward(),l.stepBackward();do if(u=f,p=l.getCurrentTokenRow(),h=l.getCurrentTokenColumn(),g=h+u.value.length,f=l.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(c===u.value)if(f.value==="<"){if(d++,d>0){var x=new s(p,h,p,g),_=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);do u=l.stepForward();while(u&&u.value!==">");var E=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1)}}else f.value==="</"&&d--}else if(u.value==="/>"){for(var C=0,w=f;w;){if(w.type.indexOf("tag-name")!==-1&&w.value===c){d--;break}else if(w.value==="<")break;w=l.stepBackward(),C++}for(var T=0;T<C;T++)l.stepForward()}}while(f&&d<=0);if(_&&E&&m&&v&&x&&y)return{openTag:new s(_.start.row,_.start.column,E.end.row,E.end.column),closeTag:new s(m.start.row,m.start.column,v.end.row,v.end.column),openTagName:x,closeTagName:y}}}}r.BracketMatch=a}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(n,r,i){var o=n("./lib/oop"),s=n("./lib/lang"),a=n("./bidihandler").BidiHandler,l=n("./config"),u=n("./lib/event_emitter").EventEmitter,f=n("./selection").Selection,c=n("./mode/text").Mode,d=n("./range").Range,p=n("./line_widgets").LineWidgets,h=n("./document").Document,g=n("./background_tokenizer").BackgroundTokenizer,m=n("./search_highlight").SearchHighlight,y=n("./undomanager").UndoManager,v=function(){function P(S,k){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++P.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.$gutterCustomWidgets={},this.bgTokenizer=new g(new c().getTokenizer(),this);var D=this;this.bgTokenizer.on("update",function(O){D._signal("tokenizerUpdate",O)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof S!="object"||!S.getLine)&&(S=new h(S)),this.setDocument(S),this.selection=new f(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new a(this),l.resetOptions(this),this.setMode(k),l._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return P.prototype.$initOperationListeners=function(){var S=this;this.curOp=null,this.on("change",function(){S.curOp||(S.startOperation(),S.curOp.selectionBefore=S.$lastSel),S.curOp.docChanged=!0},!0),this.on("changeSelection",function(){S.curOp||(S.startOperation(),S.curOp.selectionBefore=S.$lastSel),S.curOp.selectionChanged=!0},!0),this.$operationResetTimer=s.delayedCall(this.endOperation.bind(this,!0))},P.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(S={}),this.$operationResetTimer.schedule(),this.curOp={command:S.command||{},args:S.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",S)},P.prototype.endOperation=function(S){if(this.curOp){if(S&&S.returnValue===!1){this.curOp=null,this._signal("endOperation",S);return}if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var k=this.selection.toJSON();this.curOp.selectionAfter=k,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(k),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",S)}},P.prototype.setDocument=function(S){this.doc&&this.doc.off("change",this.$onChange),this.doc=S,S.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},P.prototype.getDocument=function(){return this.doc},Object.defineProperty(P.prototype,"widgetManager",{get:function(){var S=new p(this);return this.widgetManager=S,this.$editor&&S.attach(this.$editor),S},set:function(S){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:S})},enumerable:!1,configurable:!0}),P.prototype.$resetRowCache=function(S){if(!S){this.$docRowCache=[],this.$screenRowCache=[];return}var k=this.$docRowCache.length,D=this.$getRowCacheIndex(this.$docRowCache,S)+1;k>D&&(this.$docRowCache.splice(D,k),this.$screenRowCache.splice(D,k))},P.prototype.$getRowCacheIndex=function(S,k){for(var D=0,O=S.length-1;D<=O;){var N=D+O>>1,j=S[N];if(k>j)D=N+1;else if(k<j)O=N-1;else return N}return D-1},P.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},P.prototype.onChangeFold=function(S){var k=S.data;this.$resetRowCache(k.start.row)},P.prototype.onChange=function(S){this.$modified=!0,this.$bidiHandler.onChange(S),this.$resetRowCache(S.start.row);var k=this.$updateInternalDataOnChange(S);!this.$fromUndo&&this.$undoManager&&(k&&k.length&&(this.$undoManager.add({action:"removeFolds",folds:k},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(S,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(S),this._signal("change",S)},P.prototype.onSelectionChange=function(){this._signal("changeSelection")},P.prototype.setValue=function(S){this.doc.setValue(S),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},P.fromJSON=function(S){typeof S=="string"&&(S=JSON.parse(S));var k=new y;k.$undoStack=S.history.undo,k.$redoStack=S.history.redo,k.mark=S.history.mark,k.$rev=S.history.rev;var D=new P(S.value);return S.folds.forEach(function(O){D.addFold("...",d.fromPoints(O.start,O.end))}),D.setAnnotations(S.annotations),D.setBreakpoints(S.breakpoints),D.setMode(S.mode),D.setScrollLeft(S.scrollLeft),D.setScrollTop(S.scrollTop),D.setUndoManager(k),D.selection.fromJSON(S.selection),D},P.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(S){return S.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},P.prototype.toString=function(){return this.doc.getValue()},P.prototype.getSelection=function(){return this.selection},P.prototype.getState=function(S){return this.bgTokenizer.getState(S)},P.prototype.getTokens=function(S){return this.bgTokenizer.getTokens(S)},P.prototype.getTokenAt=function(S,k){var D=this.bgTokenizer.getTokens(S),O,N=0;if(k==null){var j=D.length-1;N=this.getLine(S).length}else for(var j=0;j<D.length&&(N+=D[j].value.length,!(N>=k));j++);return O=D[j],O?(O.index=j,O.start=N-O.value.length,O):null},P.prototype.setUndoManager=function(S){if(this.$undoManager=S,this.$informUndoManager&&this.$informUndoManager.cancel(),S){var k=this;S.addSession(this),this.$syncInformUndoManager=function(){k.$informUndoManager.cancel(),k.mergeUndoDeltas=!1},this.$informUndoManager=s.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},P.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},P.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},P.prototype.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"	"},P.prototype.setUseSoftTabs=function(S){this.setOption("useSoftTabs",S)},P.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},P.prototype.setTabSize=function(S){this.setOption("tabSize",S)},P.prototype.getTabSize=function(){return this.$tabSize},P.prototype.isTabStop=function(S){return this.$useSoftTabs&&S.column%this.$tabSize===0},P.prototype.setNavigateWithinSoftTabs=function(S){this.setOption("navigateWithinSoftTabs",S)},P.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},P.prototype.setOverwrite=function(S){this.setOption("overwrite",S)},P.prototype.getOverwrite=function(){return this.$overwrite},P.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},P.prototype.addGutterDecoration=function(S,k){this.$decorations[S]||(this.$decorations[S]=""),this.$decorations[S]+=" "+k,this._signal("changeBreakpoint",{})},P.prototype.removeGutterCustomWidget=function(S){this.$editor&&this.$editor.renderer.$gutterLayer.$removeCustomWidget(S)},P.prototype.addGutterCustomWidget=function(S,k){this.$editor&&this.$editor.renderer.$gutterLayer.$addCustomWidget(S,k)},P.prototype.removeGutterDecoration=function(S,k){this.$decorations[S]=(this.$decorations[S]||"").replace(" "+k,""),this._signal("changeBreakpoint",{})},P.prototype.getBreakpoints=function(){return this.$breakpoints},P.prototype.setBreakpoints=function(S){this.$breakpoints=[];for(var k=0;k<S.length;k++)this.$breakpoints[S[k]]="ace_breakpoint";this._signal("changeBreakpoint",{})},P.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},P.prototype.setBreakpoint=function(S,k){k===void 0&&(k="ace_breakpoint"),k?this.$breakpoints[S]=k:delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},P.prototype.clearBreakpoint=function(S){delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},P.prototype.addMarker=function(S,k,D,O){var N=this.$markerId++,j={range:S,type:D||"line",renderer:typeof D=="function"?D:null,clazz:k,inFront:!!O,id:N};return O?(this.$frontMarkers[N]=j,this._signal("changeFrontMarker")):(this.$backMarkers[N]=j,this._signal("changeBackMarker")),N},P.prototype.addDynamicMarker=function(S,k){if(S.update){var D=this.$markerId++;return S.id=D,S.inFront=!!k,k?(this.$frontMarkers[D]=S,this._signal("changeFrontMarker")):(this.$backMarkers[D]=S,this._signal("changeBackMarker")),S}},P.prototype.removeMarker=function(S){var k=this.$frontMarkers[S]||this.$backMarkers[S];if(k){var D=k.inFront?this.$frontMarkers:this.$backMarkers;delete D[S],this._signal(k.inFront?"changeFrontMarker":"changeBackMarker")}},P.prototype.getMarkers=function(S){return S?this.$frontMarkers:this.$backMarkers},P.prototype.highlight=function(S){if(!this.$searchHighlight){var k=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(k)}this.$searchHighlight.setRegexp(S)},P.prototype.highlightLines=function(S,k,D,O){typeof k!="number"&&(D=k,k=S),D||(D="ace_step");var N=new d(S,0,k,1/0);return N.id=this.addMarker(N,D,"fullLine",O),N},P.prototype.setAnnotations=function(S){this.$annotations=S,this._signal("changeAnnotation",{})},P.prototype.getAnnotations=function(){return this.$annotations||[]},P.prototype.clearAnnotations=function(){this.setAnnotations([])},P.prototype.$detectNewLine=function(S){var k=S.match(/^.*?(\r?\n)/m);k?this.$autoNewLine=k[1]:this.$autoNewLine=`
`},P.prototype.getWordRange=function(S,k){var D=this.getLine(S),O=!1;if(k>0&&(O=!!D.charAt(k-1).match(this.tokenRe)),O||(O=!!D.charAt(k).match(this.tokenRe)),O)var N=this.tokenRe;else if(/^\s+$/.test(D.slice(k-1,k+1)))var N=/\s/;else var N=this.nonTokenRe;var j=k;if(j>0){do j--;while(j>=0&&D.charAt(j).match(N));j++}for(var q=k;q<D.length&&D.charAt(q).match(N);)q++;return new d(S,j,S,q)},P.prototype.getAWordRange=function(S,k){for(var D=this.getWordRange(S,k),O=this.getLine(D.end.row);O.charAt(D.end.column).match(/[ \t]/);)D.end.column+=1;return D},P.prototype.setNewLineMode=function(S){this.doc.setNewLineMode(S)},P.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},P.prototype.setUseWorker=function(S){this.setOption("useWorker",S)},P.prototype.getUseWorker=function(){return this.$useWorker},P.prototype.onReloadTokenizer=function(S){var k=S.data;this.bgTokenizer.start(k.first),this._signal("tokenizerUpdate",S)},P.prototype.setMode=function(S,k){if(S&&typeof S=="object"){if(S.getTokenizer)return this.$onChangeMode(S);var D=S,O=D.path}else O=S||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[O]&&!D){this.$onChangeMode(this.$modes[O]),k&&k();return}this.$modeId=O,l.loadModule(["mode",O],(function(N){if(!this.destroyed){if(this.$modeId!==O)return k&&k();this.$modes[O]&&!D?this.$onChangeMode(this.$modes[O]):N&&N.Mode&&(N=new N.Mode(D),D||(this.$modes[O]=N,N.$id=O),this.$onChangeMode(N)),k&&k()}}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},P.prototype.$onChangeMode=function(S,k){if(k||(this.$modeId=S.$id),this.$mode!==S){var D=this.$mode;this.$mode=S,this.$stopWorker(),this.$useWorker&&this.$startWorker();var O=S.getTokenizer();if(O.on!==void 0){var N=this.onReloadTokenizer.bind(this);O.on("update",N)}this.bgTokenizer.setTokenizer(O),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=S.tokenRe,this.nonTokenRe=S.nonTokenRe,k||(S.attachToSession&&S.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(S.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:D,mode:S}))}},P.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},P.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(S){l.warn("Could not load worker",S),this.$worker=null}},P.prototype.getMode=function(){return this.$mode},P.prototype.setScrollTop=function(S){this.$scrollTop===S||isNaN(S)||(this.$scrollTop=S,this._signal("changeScrollTop",S))},P.prototype.getScrollTop=function(){return this.$scrollTop},P.prototype.setScrollLeft=function(S){this.$scrollLeft===S||isNaN(S)||(this.$scrollLeft=S,this._signal("changeScrollLeft",S))},P.prototype.getScrollLeft=function(){return this.$scrollLeft},P.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},P.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var S=0;return this.lineWidgets.forEach(function(k){k&&k.screenWidth>S&&(S=k.screenWidth)}),this.lineWidgetWidth=S},P.prototype.$computeWidth=function(S){if(this.$modified||S){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var k=this.doc.getAllLines(),D=this.$rowLengthCache,O=0,N=0,j=this.$foldData[N],q=j?j.start.row:1/0,W=k.length,Q=0;Q<W;Q++){if(Q>q){if(Q=j.end.row+1,Q>=W)break;j=this.$foldData[N++],q=j?j.start.row:1/0}D[Q]==null&&(D[Q]=this.$getStringScreenWidth(k[Q])[0]),D[Q]>O&&(O=D[Q])}this.screenWidth=O}},P.prototype.getLine=function(S){return this.doc.getLine(S)},P.prototype.getLines=function(S,k){return this.doc.getLines(S,k)},P.prototype.getLength=function(){return this.doc.getLength()},P.prototype.getTextRange=function(S){return this.doc.getTextRange(S||this.selection.getRange())},P.prototype.insert=function(S,k){return this.doc.insert(S,k)},P.prototype.remove=function(S){return this.doc.remove(S)},P.prototype.removeFullLines=function(S,k){return this.doc.removeFullLines(S,k)},P.prototype.undoChanges=function(S,k){if(S.length){this.$fromUndo=!0;for(var D=S.length-1;D!=-1;D--){var O=S[D];O.action=="insert"||O.action=="remove"?this.doc.revertDelta(O):O.folds&&this.addFolds(O.folds)}!k&&this.$undoSelect&&(S.selectionBefore?this.selection.fromJSON(S.selectionBefore):this.selection.setRange(this.$getUndoSelection(S,!0))),this.$fromUndo=!1}},P.prototype.redoChanges=function(S,k){if(S.length){this.$fromUndo=!0;for(var D=0;D<S.length;D++){var O=S[D];(O.action=="insert"||O.action=="remove")&&this.doc.$safeApplyDelta(O)}!k&&this.$undoSelect&&(S.selectionAfter?this.selection.fromJSON(S.selectionAfter):this.selection.setRange(this.$getUndoSelection(S,!1))),this.$fromUndo=!1}},P.prototype.setUndoSelect=function(S){this.$undoSelect=S},P.prototype.$getUndoSelection=function(S,k){function D(W){return k?W.action!=="insert":W.action==="insert"}for(var O,N,j=0;j<S.length;j++){var q=S[j];if(q.start){if(!O){D(q)?O=d.fromPoints(q.start,q.end):O=d.fromPoints(q.start,q.start);continue}D(q)?(N=q.start,O.compare(N.row,N.column)==-1&&O.setStart(N),N=q.end,O.compare(N.row,N.column)==1&&O.setEnd(N)):(N=q.start,O.compare(N.row,N.column)==-1&&(O=d.fromPoints(q.start,q.start)))}}return O},P.prototype.replace=function(S,k){return this.doc.replace(S,k)},P.prototype.moveText=function(S,k,D){var O=this.getTextRange(S),N=this.getFoldsInRange(S),j=d.fromPoints(k,k);if(!D){this.remove(S);var q=S.start.row-S.end.row,W=q?-S.end.column:S.start.column-S.end.column;W&&(j.start.row==S.end.row&&j.start.column>S.end.column&&(j.start.column+=W),j.end.row==S.end.row&&j.end.column>S.end.column&&(j.end.column+=W)),q&&j.start.row>=S.end.row&&(j.start.row+=q,j.end.row+=q)}if(j.end=this.insert(j.start,O),N.length){var Q=S.start,ee=j.start,q=ee.row-Q.row,W=ee.column-Q.column;this.addFolds(N.map(function(ne){return ne=ne.clone(),ne.start.row==Q.row&&(ne.start.column+=W),ne.end.row==Q.row&&(ne.end.column+=W),ne.start.row+=q,ne.end.row+=q,ne}))}return j},P.prototype.indentRows=function(S,k,D){D=D.replace(/\t/g,this.getTabString());for(var O=S;O<=k;O++)this.doc.insertInLine({row:O,column:0},D)},P.prototype.outdentRows=function(S){for(var k=S.collapseRows(),D=new d(0,0,0,0),O=this.getTabSize(),N=k.start.row;N<=k.end.row;++N){var j=this.getLine(N);D.start.row=N,D.end.row=N;for(var q=0;q<O&&j.charAt(q)==" ";++q);q<O&&j.charAt(q)=="	"?(D.start.column=q,D.end.column=q+1):(D.start.column=0,D.end.column=q),this.remove(D)}},P.prototype.$moveLines=function(S,k,D){if(S=this.getRowFoldStart(S),k=this.getRowFoldEnd(k),D<0){var O=this.getRowFoldStart(S+D);if(O<0)return 0;var N=O-S}else if(D>0){var O=this.getRowFoldEnd(k+D);if(O>this.doc.getLength()-1)return 0;var N=O-k}else{S=this.$clipRowToDocument(S),k=this.$clipRowToDocument(k);var N=k-S+1}var j=new d(S,0,k,Number.MAX_VALUE),q=this.getFoldsInRange(j).map(function(Q){return Q=Q.clone(),Q.start.row+=N,Q.end.row+=N,Q}),W=D==0?this.doc.getLines(S,k):this.doc.removeFullLines(S,k);return this.doc.insertFullLines(S+N,W),q.length&&this.addFolds(q),N},P.prototype.moveLinesUp=function(S,k){return this.$moveLines(S,k,-1)},P.prototype.moveLinesDown=function(S,k){return this.$moveLines(S,k,1)},P.prototype.duplicateLines=function(S,k){return this.$moveLines(S,k,0)},P.prototype.$clipRowToDocument=function(S){return Math.max(0,Math.min(S,this.doc.getLength()-1))},P.prototype.$clipColumnToRow=function(S,k){return k<0?0:Math.min(this.doc.getLine(S).length,k)},P.prototype.$clipPositionToDocument=function(S,k){if(k=Math.max(0,k),S<0)S=0,k=0;else{var D=this.doc.getLength();S>=D?(S=D-1,k=this.doc.getLine(D-1).length):k=Math.min(this.doc.getLine(S).length,k)}return{row:S,column:k}},P.prototype.$clipRangeToDocument=function(S){S.start.row<0?(S.start.row=0,S.start.column=0):S.start.column=this.$clipColumnToRow(S.start.row,S.start.column);var k=this.doc.getLength()-1;return S.end.row>k?(S.end.row=k,S.end.column=this.doc.getLine(k).length):S.end.column=this.$clipColumnToRow(S.end.row,S.end.column),S},P.prototype.setUseWrapMode=function(S){if(S!=this.$useWrapMode){if(this.$useWrapMode=S,this.$modified=!0,this.$resetRowCache(0),S){var k=this.getLength();this.$wrapData=Array(k),this.$updateWrapData(0,k-1)}this._signal("changeWrapMode")}},P.prototype.getUseWrapMode=function(){return this.$useWrapMode},P.prototype.setWrapLimitRange=function(S,k){(this.$wrapLimitRange.min!==S||this.$wrapLimitRange.max!==k)&&(this.$wrapLimitRange={min:S,max:k},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},P.prototype.adjustWrapLimit=function(S,k){var D=this.$wrapLimitRange;D.max<0&&(D={min:k,max:k});var O=this.$constrainWrapLimit(S,D.min,D.max);return O!=this.$wrapLimit&&O>1?(this.$wrapLimit=O,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},P.prototype.$constrainWrapLimit=function(S,k,D){return k&&(S=Math.max(k,S)),D&&(S=Math.min(D,S)),S},P.prototype.getWrapLimit=function(){return this.$wrapLimit},P.prototype.setWrapLimit=function(S){this.setWrapLimitRange(S,S)},P.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},P.prototype.$updateInternalDataOnChange=function(S){var k=this.$useWrapMode,D=S.action,O=S.start,N=S.end,j=O.row,q=N.row,W=q-j,Q=null;if(this.$updating=!0,W!=0)if(D==="remove"){this[k?"$wrapData":"$rowLengthCache"].splice(j,W);var ee=this.$foldData;Q=this.getFoldsInRange(S),this.removeFolds(Q);var H=this.getFoldLine(N.row),se=0;if(H){H.addRemoveChars(N.row,N.column,O.column-N.column),H.shiftRow(-W);var ne=this.getFoldLine(j);ne&&ne!==H&&(ne.merge(H),H=ne),se=ee.indexOf(H)+1}for(se;se<ee.length;se++){var H=ee[se];H.start.row>=N.row&&H.shiftRow(-W)}q=j}else{var ge=Array(W);ge.unshift(j,0);var we=k?this.$wrapData:this.$rowLengthCache;we.splice.apply(we,ge);var ee=this.$foldData,H=this.getFoldLine(j),se=0;if(H){var $e=H.range.compareInside(O.row,O.column);$e==0?(H=H.split(O.row,O.column),H&&(H.shiftRow(W),H.addRemoveChars(q,0,N.column-O.column))):$e==-1&&(H.addRemoveChars(j,0,N.column-O.column),H.shiftRow(W)),se=ee.indexOf(H)+1}for(se;se<ee.length;se++){var H=ee[se];H.start.row>=j&&H.shiftRow(W)}}else{W=Math.abs(S.start.column-S.end.column),D==="remove"&&(Q=this.getFoldsInRange(S),this.removeFolds(Q),W=-W);var H=this.getFoldLine(j);H&&H.addRemoveChars(j,O.column,W)}return k&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,k?this.$updateWrapData(j,q):this.$updateRowLengthCache(j,q),Q},P.prototype.$updateRowLengthCache=function(S,k){this.$rowLengthCache[S]=null,this.$rowLengthCache[k]=null},P.prototype.$updateWrapData=function(S,k){var D=this.doc.getAllLines(),O=this.getTabSize(),N=this.$wrapData,j=this.$wrapLimit,q,W,Q=S;for(k=Math.min(k,D.length-1);Q<=k;)W=this.getFoldLine(Q,W),W?(q=[],W.walk((function(ee,H,se,ne){var ge;if(ee!=null){ge=this.$getDisplayTokens(ee,q.length),ge[0]=E;for(var we=1;we<ge.length;we++)ge[we]=C}else ge=this.$getDisplayTokens(D[H].substring(ne,se),q.length);q=q.concat(ge)}).bind(this),W.end.row,D[W.end.row].length+1),N[W.start.row]=this.$computeWrapSplits(q,j,O),Q=W.end.row+1):(q=this.$getDisplayTokens(D[Q]),N[Q]=this.$computeWrapSplits(q,j,O),Q++)},P.prototype.$computeWrapSplits=function(S,k,D){if(S.length==0)return[];var O=[],N=S.length,j=0,q=0,W=this.$wrapAsCode,Q=this.$indentedSoftWrap,ee=k<=Math.max(2*D,8)||Q===!1?0:Math.floor(k/2);function H(){var $e=0;if(ee===0)return $e;if(Q)for(var ve=0;ve<S.length;ve++){var Ee=S[ve];if(Ee==T)$e+=1;else if(Ee==R)$e+=D;else{if(Ee==L)continue;break}}return W&&Q!==!1&&($e+=D),Math.min($e,ee)}function se($e){for(var ve=$e-j,Ee=j;Ee<$e;Ee++){var Ve=S[Ee];(Ve===12||Ve===2)&&(ve-=1)}O.length||(ne=H(),O.indent=ne),q+=ve,O.push(q),j=$e}for(var ne=0;N-j>k-ne;){var ge=j+k-ne;if(S[ge-1]>=T&&S[ge]>=T){se(ge);continue}if(S[ge]==E||S[ge]==C){for(ge;ge!=j-1&&S[ge]!=E;ge--);if(ge>j){se(ge);continue}for(ge=j+k,ge;ge<S.length&&S[ge]==C;ge++);if(ge==S.length)break;se(ge);continue}for(var we=Math.max(ge-(k-(k>>2)),j-1);ge>we&&S[ge]<E;)ge--;if(W){for(;ge>we&&S[ge]<E;)ge--;for(;ge>we&&S[ge]==w;)ge--}else for(;ge>we&&S[ge]<T;)ge--;if(ge>we){se(++ge);continue}ge=j+k,S[ge]==_&&ge--,se(ge-ne)}return O},P.prototype.$getDisplayTokens=function(S,k){var D=[],O;k=k||0;for(var N=0;N<S.length;N++){var j=S.charCodeAt(N);if(j==9){O=this.getScreenTabSize(D.length+k),D.push(R);for(var q=1;q<O;q++)D.push(L)}else j==32?D.push(T):j>39&&j<48||j>57&&j<64?D.push(w):j>=4352&&B(j)?D.push(x,_):D.push(x)}return D},P.prototype.$getStringScreenWidth=function(S,k,D){if(k==0)return[0,0];k==null&&(k=1/0),D=D||0;var O,N;for(N=0;N<S.length&&(O=S.charCodeAt(N),O==9?D+=this.getScreenTabSize(D):O>=4352&&B(O)?D+=2:D+=1,!(D>k));N++);return[D,N]},P.prototype.getRowLength=function(S){var k=1;return this.lineWidgets&&(k+=this.lineWidgets[S]&&this.lineWidgets[S].rowCount||0),!this.$useWrapMode||!this.$wrapData[S]?k:this.$wrapData[S].length+k},P.prototype.getRowLineCount=function(S){return!this.$useWrapMode||!this.$wrapData[S]?1:this.$wrapData[S].length+1},P.prototype.getRowWrapIndent=function(S){if(this.$useWrapMode){var k=this.screenToDocumentPosition(S,Number.MAX_VALUE),D=this.$wrapData[k.row];return D.length&&D[0]<k.column?D.indent:0}else return 0},P.prototype.getScreenLastRowColumn=function(S){var k=this.screenToDocumentPosition(S,Number.MAX_VALUE);return this.documentToScreenColumn(k.row,k.column)},P.prototype.getDocumentLastRowColumn=function(S,k){var D=this.documentToScreenRow(S,k);return this.getScreenLastRowColumn(D)},P.prototype.getDocumentLastRowColumnPosition=function(S,k){var D=this.documentToScreenRow(S,k);return this.screenToDocumentPosition(D,Number.MAX_VALUE/10)},P.prototype.getRowSplitData=function(S){if(this.$useWrapMode)return this.$wrapData[S]},P.prototype.getScreenTabSize=function(S){return this.$tabSize-(S%this.$tabSize|0)},P.prototype.screenToDocumentRow=function(S,k){return this.screenToDocumentPosition(S,k).row},P.prototype.screenToDocumentColumn=function(S,k){return this.screenToDocumentPosition(S,k).column},P.prototype.screenToDocumentPosition=function(S,k,D){if(S<0)return{row:0,column:0};var O,N=0,j=0,q,W=0,Q=0,ee=this.$screenRowCache,H=this.$getRowCacheIndex(ee,S),se=ee.length;if(se&&H>=0)var W=ee[H],N=this.$docRowCache[H],ne=S>ee[se-1];else var ne=!se;for(var ge=this.getLength()-1,we=this.getNextFoldLine(N),$e=we?we.start.row:1/0;W<=S&&(Q=this.getRowLength(N),!(W+Q>S||N>=ge));)W+=Q,N++,N>$e&&(N=we.end.row+1,we=this.getNextFoldLine(N,we),$e=we?we.start.row:1/0),ne&&(this.$docRowCache.push(N),this.$screenRowCache.push(W));if(we&&we.start.row<=N)O=this.getFoldDisplayLine(we),N=we.start.row;else{if(W+Q<=S||N>ge)return{row:ge,column:this.getLine(ge).length};O=this.getLine(N),we=null}var ve=0,Ee=Math.floor(S-W);if(this.$useWrapMode){var Ve=this.$wrapData[N];Ve&&(q=Ve[Ee],Ee>0&&Ve.length&&(ve=Ve.indent,j=Ve[Ee-1]||Ve[Ve.length-1],O=O.substring(j)))}return D!==void 0&&this.$bidiHandler.isBidiRow(W+Ee,N,Ee)&&(k=this.$bidiHandler.offsetToCol(D)),j+=this.$getStringScreenWidth(O,k-ve)[1],this.$useWrapMode&&j>=q&&(j=q-1),we?we.idxToPosition(j):{row:N,column:j}},P.prototype.documentToScreenPosition=function(S,k){if(typeof k>"u")var D=this.$clipPositionToDocument(S.row,S.column);else D=this.$clipPositionToDocument(S,k);S=D.row,k=D.column;var O=0,N=null,j=null;j=this.getFoldAt(S,k,1),j&&(S=j.start.row,k=j.start.column);var q,W=0,Q=this.$docRowCache,ee=this.$getRowCacheIndex(Q,S),H=Q.length;if(H&&ee>=0)var W=Q[ee],O=this.$screenRowCache[ee],se=S>Q[H-1];else var se=!H;for(var ne=this.getNextFoldLine(W),ge=ne?ne.start.row:1/0;W<S;){if(W>=ge){if(q=ne.end.row+1,q>S)break;ne=this.getNextFoldLine(q,ne),ge=ne?ne.start.row:1/0}else q=W+1;O+=this.getRowLength(W),W=q,se&&(this.$docRowCache.push(W),this.$screenRowCache.push(O))}var we="";ne&&W>=ge?(we=this.getFoldDisplayLine(ne,S,k),N=ne.start.row):(we=this.getLine(S).substring(0,k),N=S);var $e=0;if(this.$useWrapMode){var ve=this.$wrapData[N];if(ve){for(var Ee=0;we.length>=ve[Ee];)O++,Ee++;we=we.substring(ve[Ee-1]||0,we.length),$e=Ee>0?ve.indent:0}}return this.lineWidgets&&this.lineWidgets[W]&&this.lineWidgets[W].rowsAbove&&(O+=this.lineWidgets[W].rowsAbove),{row:O,column:$e+this.$getStringScreenWidth(we)[0]}},P.prototype.documentToScreenColumn=function(S,k){return this.documentToScreenPosition(S,k).column},P.prototype.documentToScreenRow=function(S,k){return this.documentToScreenPosition(S,k).row},P.prototype.getScreenLength=function(){var S=0,k=null;if(this.$useWrapMode)for(var N=this.$wrapData.length,j=0,O=0,k=this.$foldData[O++],q=k?k.start.row:1/0;j<N;){var W=this.$wrapData[j];S+=W?W.length+1:1,j++,j>q&&(j=k.end.row+1,k=this.$foldData[O++],q=k?k.start.row:1/0)}else{S=this.getLength();for(var D=this.$foldData,O=0;O<D.length;O++)k=D[O],S-=k.end.row-k.start.row}return this.lineWidgets&&(S+=this.$getWidgetScreenLength()),S},P.prototype.$setFontMetrics=function(S){this.$enableVarChar&&(this.$getStringScreenWidth=function(k,D,O){if(D===0)return[0,0];D||(D=1/0),O=O||0;var N,j;for(j=0;j<k.length&&(N=k.charAt(j),N==="	"?O+=this.getScreenTabSize(O):O+=S.getCharacterWidth(N),!(O>D));j++);return[O,j]})},P.prototype.getPrecedingCharacter=function(){var S=this.selection.getCursor();if(S.column===0)return S.row===0?"":this.doc.getNewLineCharacter();var k=this.getLine(S.row);return k[S.column-1]},P.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},P}();v.$uid=0,v.prototype.$modes=l.$modes,v.prototype.getValue=v.prototype.toString,v.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},v.prototype.$overwrite=!1,v.prototype.$mode=null,v.prototype.$modeId=null,v.prototype.$scrollTop=0,v.prototype.$scrollLeft=0,v.prototype.$wrapLimit=80,v.prototype.$useWrapMode=!1,v.prototype.$wrapLimitRange={min:null,max:null},v.prototype.lineWidgets=null,v.prototype.isFullWidth=B,o.implement(v.prototype,u);var x=1,_=2,E=3,C=4,w=9,T=10,R=11,L=12;function B(P){return P<4352?!1:P>=4352&&P<=4447||P>=4515&&P<=4519||P>=4602&&P<=4607||P>=9001&&P<=9002||P>=11904&&P<=11929||P>=11931&&P<=12019||P>=12032&&P<=12245||P>=12272&&P<=12283||P>=12288&&P<=12350||P>=12353&&P<=12438||P>=12441&&P<=12543||P>=12549&&P<=12589||P>=12593&&P<=12686||P>=12688&&P<=12730||P>=12736&&P<=12771||P>=12784&&P<=12830||P>=12832&&P<=12871||P>=12880&&P<=13054||P>=13056&&P<=19903||P>=19968&&P<=42124||P>=42128&&P<=42182||P>=43360&&P<=43388||P>=44032&&P<=55203||P>=55216&&P<=55238||P>=55243&&P<=55291||P>=63744&&P<=64255||P>=65040&&P<=65049||P>=65072&&P<=65106||P>=65108&&P<=65126||P>=65128&&P<=65131||P>=65281&&P<=65376||P>=65504&&P<=65510}n("./edit_session/folding").Folding.call(v.prototype),n("./edit_session/bracket_match").BracketMatch.call(v.prototype),l.defineOptions(v.prototype,"session",{wrap:{set:function(P){if(!P||P=="off"?P=!1:P=="free"?P=!0:P=="printMargin"?P=-1:typeof P=="string"&&(P=parseInt(P,10)||!1),this.$wrap!=P)if(this.$wrap=P,!P)this.setUseWrapMode(!1);else{var S=typeof P=="number"?P:null;this.setWrapLimitRange(S,S),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(P){P=P=="auto"?this.$mode.type!="text":P!="text",P!=this.$wrapAsCode&&(this.$wrapAsCode=P,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(P){this.$useWorker=P,this.$stopWorker(),P&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(P){P=parseInt(P),P>0&&this.$tabSize!==P&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=P,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(P){this.setFoldStyle(P)},handlesSet:!0},overwrite:{set:function(P){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(P){this.doc.setNewLineMode(P)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(P){this.setMode(P)},get:function(){return this.$modeId},handlesSet:!0}}),r.EditSession=v}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(n,r,i){var o=n("./lib/lang"),s=n("./lib/oop"),a=n("./range").Range,l=function(){function d(){this.$options={}}return d.prototype.set=function(p){return s.mixin(this.$options,p),this},d.prototype.getOptions=function(){return o.copyObject(this.$options)},d.prototype.setOptions=function(p){this.$options=p},d.prototype.find=function(p){var h=this.$options,g=this.$matchIterator(p,h);if(!g)return!1;var m=null;return g.forEach(function(y,v,x,_){return m=new a(y,v,x,_),v==_&&h.start&&h.start.start&&h.skipCurrent!=!1&&m.isEqual(h.start)?(m=null,!1):!0}),m},d.prototype.findAll=function(p){var h=this.$options;if(!h.needle)return[];this.$assembleRegExp(h);var g=h.range,m=g?p.getLines(g.start.row,g.end.row):p.doc.getAllLines(),y=[],v=h.re;if(h.$isMultiLine){var x=v.length,_=m.length-x,E;e:for(var C=v.offset||0;C<=_;C++){for(var w=0;w<x;w++)if(m[C+w].search(v[w])==-1)continue e;var T=m[C],R=m[C+x-1],L=T.length-T.match(v[0])[0].length,B=R.match(v[x-1])[0].length;E&&E.end.row===C&&E.end.column>L||(y.push(E=new a(C,L,C+x-1,B)),x>2&&(C=C+x-2))}}else for(var P,S=0;S<m.length;S++)if(this.$isMultilineSearch(h)){var k=m.length-1;if(P=this.$multiLineForward(p,v,S,k),P){var D=P.endRow<=k?P.endRow-1:k;D>S&&(S=D),y.push(new a(P.startRow,P.startCol,P.endRow,P.endCol))}}else{P=o.getMatchOffsets(m[S],v);for(var w=0;w<P.length;w++){var O=P[w];y.push(new a(S,O.offset,S,O.offset+O.length))}}if(g){for(var N=g.start.column,j=g.end.column,S=0,w=y.length-1;S<w&&y[S].start.column<N&&y[S].start.row==0;)S++;for(var q=g.end.row-g.start.row;S<w&&y[w].end.column>j&&y[w].end.row==q;)w--;for(y=y.slice(S,w+1),S=0,w=y.length;S<w;S++)y[S].start.row+=g.start.row,y[S].end.row+=g.start.row}return y},d.prototype.parseReplaceString=function(p){for(var h={DollarSign:36,Ampersand:38,Digit0:48,Digit1:49,Digit9:57,Backslash:92,n:110,t:116},g="",m=0,y=p.length;m<y;m++){var v=p.charCodeAt(m);if(v===h.Backslash){if(m++,m>=y){g+="\\";break}var x=p.charCodeAt(m);switch(x){case h.Backslash:g+="\\";break;case h.n:g+=`
`;break;case h.t:g+="	";break}continue}if(v===h.DollarSign){if(m++,m>=y){g+="$";break}var _=p.charCodeAt(m);if(_===h.DollarSign){g+="$$";continue}if(_===h.Digit0||_===h.Ampersand){g+="$&";continue}if(h.Digit1<=_&&_<=h.Digit9){g+="$"+p[m];continue}}g+=p[m]}return g||p},d.prototype.replace=function(p,h){var g=this.$options,m=this.$assembleRegExp(g);if(g.$isMultiLine)return h;if(m){var y=this.$isMultilineSearch(g);y&&(p=p.replace(/\r\n|\r|\n/g,`
`));var v=m.exec(p);if(!v||!y&&v[0].length!=p.length)return null;if(h=g.regExp?this.parseReplaceString(h):h.replace(/\$/g,"$$$$"),h=p.replace(m,h),g.preserveCase){h=h.split("");for(var x=Math.min(p.length,p.length);x--;){var _=p[x];_&&_.toLowerCase()!=_?h[x]=h[x].toUpperCase():h[x]=h[x].toLowerCase()}h=h.join("")}return h}},d.prototype.$assembleRegExp=function(p,h){if(p.needle instanceof RegExp)return p.re=p.needle;var g=p.needle;if(!p.needle)return p.re=!1;p.regExp||(g=o.escapeRegExp(g));var m=p.caseSensitive?"gm":"gmi";try{new RegExp(g,"u"),p.$supportsUnicodeFlag=!0,m+="u"}catch{p.$supportsUnicodeFlag=!1}if(p.wholeWord&&(g=u(g,p)),p.$isMultiLine=!h&&/[\n\r]/.test(g),p.$isMultiLine)return p.re=this.$assembleMultilineRegExp(g,m);try{var y=new RegExp(g,m)}catch{y=!1}return p.re=y},d.prototype.$assembleMultilineRegExp=function(p,h){for(var g=p.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),m=[],y=0;y<g.length;y++)try{m.push(new RegExp(g[y],h))}catch{return!1}return m},d.prototype.$isMultilineSearch=function(p){return p.re&&/\\r\\n|\\r|\\n/.test(p.re.source)&&p.regExp&&!p.$isMultiLine},d.prototype.$multiLineForward=function(p,h,g,m){for(var y,v=c(p,g),x=g;x<=m;){for(var _=0;_<v&&!(x>m);_++){var E=p.getLine(x++);y=y==null?E:y+`
`+E}var C=h.exec(y);if(h.lastIndex=0,C){var w=y.slice(0,C.index).split(`
`),T=C[0].split(`
`),R=g+w.length-1,L=w[w.length-1].length,B=R+T.length-1,P=T.length==1?L+T[0].length:T[T.length-1].length;return{startRow:R,startCol:L,endRow:B,endCol:P}}}return null},d.prototype.$multiLineBackward=function(p,h,g,m,y){for(var v,x=c(p,m),_=p.getLine(m).length-g,E=m;E>=y;){for(var C=0;C<x&&E>=y;C++){var w=p.getLine(E--);v=v==null?w:w+`
`+v}var T=f(v,h,_);if(T){var R=v.slice(0,T.index).split(`
`),L=T[0].split(`
`),B=E+R.length,P=R[R.length-1].length,S=B+L.length-1,k=L.length==1?P+L[0].length:L[L.length-1].length;return{startRow:B,startCol:P,endRow:S,endCol:k}}}return null},d.prototype.$matchIterator=function(p,h){var g=this.$assembleRegExp(h);if(!g)return!1;var m=this.$isMultilineSearch(h),y=this.$multiLineForward,v=this.$multiLineBackward,x=h.backwards==!0,_=h.skipCurrent!=!1,E=g.unicode,C=h.range,w=h.start;w||(w=C?C[x?"end":"start"]:p.selection.getRange()),w.start&&(w=w[_!=x?"end":"start"]);var T=C?C.start.row:0,R=C?C.end.row:p.getLength()-1;if(x)var L=function(S){var k=w.row;if(!P(k,w.column,S)){for(k--;k>=T;k--)if(P(k,Number.MAX_VALUE,S))return;if(h.wrap!=!1){for(k=R,T=w.row;k>=T;k--)if(P(k,Number.MAX_VALUE,S))return}}};else var L=function(k){var D=w.row;if(!P(D,w.column,k)){for(D=D+1;D<=R;D++)if(P(D,0,k))return;if(h.wrap!=!1){for(D=T,R=w.row;D<=R;D++)if(P(D,0,k))return}}};if(h.$isMultiLine)var B=g.length,P=function(S,k,D){var O=x?S-B+1:S;if(!(O<0||O+B>p.getLength())){var N=p.getLine(O),j=N.search(g[0]);if(!(!x&&j<k||j===-1)){for(var q=1;q<B;q++)if(N=p.getLine(O+q),N.search(g[q])==-1)return;var W=N.match(g[B-1])[0].length;if(!(x&&W>k)&&D(O,j,O+B-1,W))return!0}}};else if(x)var P=function(k,D,O){if(m){var N=v(p,g,D,k,T);if(!N)return!1;if(O(N.startRow,N.startCol,N.endRow,N.endCol))return!0}else{var j=p.getLine(k),q=[],W,Q=0;for(g.lastIndex=0;W=g.exec(j);){var ee=W[0].length;if(Q=W.index,!ee){if(Q>=j.length)break;g.lastIndex=Q+=o.skipEmptyMatch(j,Q,E)}if(W.index+ee>D)break;q.push(W.index,ee)}for(var H=q.length-1;H>=0;H-=2){var se=q[H-1],ee=q[H];if(O(k,se,k,se+ee))return!0}}};else var P=function(k,D,O){if(g.lastIndex=D,m){var N=y(p,g,k,R);if(N){var j=N.endRow<=R?N.endRow-1:R;j>k&&(k=j)}if(!N)return!1;if(O(N.startRow,N.startCol,N.endRow,N.endCol))return!0}else for(var q=p.getLine(k),W,Q;Q=g.exec(q);){var ee=Q[0].length;if(W=Q.index,O(k,W,k,W+ee))return!0;if(!ee&&(g.lastIndex=W+=o.skipEmptyMatch(q,W,E),W>=q.length))return!1}};return{forEach:L}},d}();function u(d,p){var h=o.supportsLookbehind();function g(x,_){_===void 0&&(_=!0);var E=h&&p.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return E.test(x)||p.regExp?h&&p.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var m=Array.from(d),y=m[0],v=m[m.length-1];return g(y)+d+g(v,!1)}function f(d,p,h){for(var g=null,m=0;m<=d.length;){p.lastIndex=m;var y=p.exec(d);if(!y)break;var v=y.index+y[0].length;if(v>d.length-h)break;(!g||v>g.index+g[0].length)&&(g=y),m=y.index+1}return g}function c(d,p){var h=5e3,g={row:p,column:0},m=d.doc.positionToIndex(g),y=m+h,v=d.doc.indexToPosition(y),x=v.row;return x+1}r.Search=l}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,r,i){var o=this&&this.__extends||function(){var d=function(p,h){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},d(p,h)};return function(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");d(p,h);function g(){this.constructor=p}p.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}(),s=n("../lib/keys"),a=n("../lib/useragent"),l=s.KEY_MODS,u=function(){function d(p,h){this.$init(p,h,!1)}return d.prototype.$init=function(p,h,g){this.platform=h||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(p),this.$singleCommand=g},d.prototype.addCommand=function(p){this.commands[p.name]&&this.removeCommand(p),this.commands[p.name]=p,p.bindKey&&this._buildKeyHash(p)},d.prototype.removeCommand=function(p,h){var g=p&&(typeof p=="string"?p:p.name);p=this.commands[g],h||delete this.commands[g];var m=this.commandKeyBinding;for(var y in m){var v=m[y];if(v==p)delete m[y];else if(Array.isArray(v)){var x=v.indexOf(p);x!=-1&&(v.splice(x,1),v.length==1&&(m[y]=v[0]))}}},d.prototype.bindKey=function(p,h,g){if(typeof p=="object"&&p&&(g==null&&(g=p.position),p=p[this.platform]),!!p){if(typeof h=="function")return this.addCommand({exec:h,bindKey:p,name:h.name||p});p.split("|").forEach(function(m){var y="";if(m.indexOf(" ")!=-1){var v=m.split(/\s+/);m=v.pop(),v.forEach(function(E){var C=this.parseKeys(E),w=l[C.hashId]+C.key;y+=(y?" ":"")+w,this._addCommandToBinding(y,"chainKeys")},this),y+=" "}var x=this.parseKeys(m),_=l[x.hashId]+x.key;this._addCommandToBinding(y+_,h,g)},this)}},d.prototype._addCommandToBinding=function(p,h,g){var m=this.commandKeyBinding,y;if(!h)delete m[p];else if(!m[p]||this.$singleCommand)m[p]=h;else{Array.isArray(m[p])?(y=m[p].indexOf(h))!=-1&&m[p].splice(y,1):m[p]=[m[p]],typeof g!="number"&&(g=f(h));var v=m[p];for(y=0;y<v.length;y++){var x=v[y],_=f(x);if(_>g)break}v.splice(y,0,h)}},d.prototype.addCommands=function(p){p&&Object.keys(p).forEach(function(h){var g=p[h];if(g){if(typeof g=="string")return this.bindKey(g,h);typeof g=="function"&&(g={exec:g}),typeof g=="object"&&(g.name||(g.name=h),this.addCommand(g))}},this)},d.prototype.removeCommands=function(p){Object.keys(p).forEach(function(h){this.removeCommand(p[h])},this)},d.prototype.bindKeys=function(p){Object.keys(p).forEach(function(h){this.bindKey(h,p[h])},this)},d.prototype._buildKeyHash=function(p){this.bindKey(p.bindKey,p)},d.prototype.parseKeys=function(p){var h=p.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(_){return _}),g=h.pop(),m=s[g];if(s.FUNCTION_KEYS[m])g=s.FUNCTION_KEYS[m].toLowerCase();else if(h.length){if(h.length==1&&h[0]=="shift")return{key:g.toUpperCase(),hashId:-1}}else return{key:g,hashId:-1};for(var y=0,v=h.length;v--;){var x=s.KEY_MODS[h[v]];if(x==null)return typeof console<"u"&&console.error("invalid modifier "+h[v]+" in "+p),!1;y|=x}return{key:g,hashId:y}},d.prototype.findKeyCommand=function(p,h){var g=l[p]+h;return this.commandKeyBinding[g]},d.prototype.handleKeyboard=function(p,h,g,m){if(!(m<0)){var y=l[h]+g,v=this.commandKeyBinding[y];return p.$keyChain&&(p.$keyChain+=" "+y,v=this.commandKeyBinding[p.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(p.$keyChain=p.$keyChain||y,{command:"null"}):(p.$keyChain&&((!h||h==4)&&g.length==1?p.$keyChain=p.$keyChain.slice(0,-y.length-1):(h==-1||m>0)&&(p.$keyChain="")),{command:v})}},d.prototype.getStatusText=function(p,h){return h.$keyChain||""},d}();function f(d){return typeof d=="object"&&d.bindKey&&d.bindKey.position||(d.isDefault?-100:0)}var c=function(d){o(p,d);function p(h,g){var m=d.call(this,h,g)||this;return m.$singleCommand=!0,m}return p}(u);c.call=function(d,p,h){u.prototype.$init.call(d,p,h,!0)},u.call=function(d,p,h){u.prototype.$init.call(d,p,h,!1)},r.HashHandler=c,r.MultiHashHandler=u}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(n,r,i){var o=this&&this.__extends||function(){var f=function(c,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(p[g]=h[g])},f(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(c,d);function p(){this.constructor=c}c.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}(),s=n("../lib/oop"),a=n("../keyboard/hash_handler").MultiHashHandler,l=n("../lib/event_emitter").EventEmitter,u=function(f){o(c,f);function c(d,p){var h=f.call(this,p,d)||this;return h.byName=h.commands,h.setDefaultHandler("exec",function(g){return g.args?g.command.exec(g.editor,g.args,g.event,!1):g.command.exec(g.editor,{},g.event,!0)}),h}return c.prototype.exec=function(d,p,h){if(Array.isArray(d)){for(var g=d.length;g--;)if(this.exec(d[g],p,h))return!0;return!1}typeof d=="string"&&(d=this.commands[d]);var m={editor:p,command:d,args:h};return this.canExecute(d,p)?(m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1):(this._signal("commandUnavailable",m),!1)},c.prototype.canExecute=function(d,p){return typeof d=="string"&&(d=this.commands[d]),!(!d||p&&p.$readOnly&&!d.readOnly||this.$checkCommandState!=!1&&d.isAvailable&&!d.isAvailable(p))},c.prototype.toggleRecording=function(d){if(!this.$inReplay)return d&&d._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(p){this.macro.push([p.command,p.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},c.prototype.replay=function(d){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(d);try{this.$inReplay=!0,this.macro.forEach(function(p){typeof p=="string"?this.exec(p,d):this.exec(p[0],d,p[1])},this)}finally{this.$inReplay=!1}}},c.prototype.trimMacro=function(d){return d.map(function(p){return typeof p[0]!="string"&&(p[0]=p[0].name),p[1]||(p=p[0]),p})},c}(a);s.implement(u.prototype,l),r.CommandManager=u}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(n,r,i){var o=n("../lib/lang"),s=n("../config"),a=n("../range").Range;function l(f,c){return{win:f,mac:c}}r.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:l("Ctrl-,","Command-,"),exec:function(f){s.loadModule("ace/ext/settings_menu",function(c){c.init(f),f.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:l("Alt-E","F4"),exec:function(f){s.loadModule("ace/ext/error_marker",function(c){c.showErrorMarker(f,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:l("Alt-Shift-E","Shift-F4"),exec:function(f){s.loadModule("ace/ext/error_marker",function(c){c.showErrorMarker(f,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:l("Ctrl-A","Command-A"),exec:function(f){f.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:l(null,"Ctrl-L"),exec:function(f){f.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:l("Ctrl-L","Command-L"),exec:function(f,c){typeof c=="number"&&!isNaN(c)&&f.gotoLine(c),f.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:l("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(f){f.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:l("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(f){f.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:l("F2","F2"),exec:function(f){f.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:l("Alt-F2","Alt-F2"),exec:function(f){f.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:l("Alt-0","Command-Option-0"),exec:function(f){f.session.foldAll(),f.session.unfold(f.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:l("Alt-Shift-0","Command-Option-Shift-0"),exec:function(f){f.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:l("Ctrl-K","Command-G"),exec:function(f){f.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:l("Ctrl-Shift-K","Command-Shift-G"),exec:function(f){f.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:l("Alt-K","Ctrl-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:l("Alt-Shift-K","Ctrl-Shift-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:l("Ctrl-F","Command-F"),exec:function(f){s.loadModule("ace/ext/searchbox",function(c){c.Search(f)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(f){f.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:l("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(f){f.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:l("Ctrl-Home","Command-Home|Command-Up"),exec:function(f){f.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:l("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(f){f.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:l("Up","Up|Ctrl-P"),exec:function(f,c){f.navigateUp(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:l("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(f){f.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:l("Ctrl-End","Command-End|Command-Down"),exec:function(f){f.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:l("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(f){f.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:l("Down","Down|Ctrl-N"),exec:function(f,c){f.navigateDown(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:l("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(f){f.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:l("Ctrl-Left","Option-Left"),exec:function(f){f.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:l("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:l("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(f){f.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:l("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(f){f.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:l("Left","Left|Ctrl-B"),exec:function(f,c){f.navigateLeft(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:l("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(f){f.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:l("Ctrl-Right","Option-Right"),exec:function(f){f.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:l("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:l("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(f){f.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:l("Shift-Right","Shift-Right"),exec:function(f){f.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:l("Right","Right|Ctrl-F"),exec:function(f,c){f.navigateRight(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(f){f.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:l(null,"Option-PageDown"),exec:function(f){f.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:l("PageDown","PageDown|Ctrl-V"),exec:function(f){f.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(f){f.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:l(null,"Option-PageUp"),exec:function(f){f.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(f){f.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:l("Ctrl-Up",null),exec:function(f){f.renderer.scrollBy(0,-2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:l("Ctrl-Down",null),exec:function(f){f.renderer.scrollBy(0,2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:l("Ctrl-Alt-E","Command-Option-E"),exec:function(f){f.commands.toggleRecording(f)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:l("Ctrl-Shift-E","Command-Shift-E"),exec:function(f){f.commands.replay(f)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:l("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(f){f.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:l("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(f){f.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:l("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(f){f.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:l(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(f){},readOnly:!0},{name:"cut",description:"Cut",exec:function(f){var c=f.$copyWithEmptySelection&&f.selection.isEmpty(),d=c?f.selection.getLineRange():f.selection.getRange();f._emit("cut",d),d.isEmpty()||f.session.remove(d),f.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(f,c){f.$handlePaste(c)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:l("Ctrl-D","Command-D"),exec:function(f){f.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:l("Ctrl-Shift-D","Command-Shift-D"),exec:function(f){f.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:l("Ctrl-Alt-S","Command-Alt-S"),exec:function(f){f.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:l("Ctrl-/","Command-/"),exec:function(f){f.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:l("Ctrl-Shift-/","Command-Shift-/"),exec:function(f){f.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:l("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(f){f.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:l("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(f){f.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:l("Ctrl-H","Command-Option-F"),exec:function(f){s.loadModule("ace/ext/searchbox",function(c){c.Search(f,!0)})}},{name:"undo",description:"Undo",bindKey:l("Ctrl-Z","Command-Z"),exec:function(f){f.undo()}},{name:"redo",description:"Redo",bindKey:l("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(f){f.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:l("Alt-Shift-Up","Command-Option-Up"),exec:function(f){f.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:l("Alt-Up","Option-Up"),exec:function(f){f.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:l("Alt-Shift-Down","Command-Option-Down"),exec:function(f){f.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:l("Alt-Down","Option-Down"),exec:function(f){f.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:l("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(f){f.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:l("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(f){f.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:l("Shift-Delete",null),exec:function(f){if(f.selection.isEmpty())f.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:l("Alt-Backspace","Command-Backspace"),exec:function(f){f.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:l("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(f){f.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:l("Ctrl-Shift-Backspace",null),exec:function(f){var c=f.selection.getRange();c.start.column=0,f.session.remove(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:l("Ctrl-Shift-Delete",null),exec:function(f){var c=f.selection.getRange();c.end.column=Number.MAX_VALUE,f.session.remove(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:l("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(f){f.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:l("Ctrl-Delete","Alt-Delete"),exec:function(f){f.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:l("Shift-Tab","Shift-Tab"),exec:function(f){f.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:l("Tab","Tab"),exec:function(f){f.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:l("Ctrl-[","Ctrl-["),exec:function(f){f.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:l("Ctrl-]","Ctrl-]"),exec:function(f){f.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(f,c){f.insert(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(f,c){f.insert(o.stringRepeat(c.text||"",c.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:l(null,"Ctrl-O"),exec:function(f){f.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:l("Alt-Shift-X","Ctrl-T"),exec:function(f){f.transposeLetters()},multiSelectAction:function(f){f.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:l("Ctrl-U","Ctrl-U"),exec:function(f){f.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:l("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(f){f.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:l(null,null),exec:function(f){f.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:l("Ctrl-Shift-L","Command-Shift-L"),exec:function(f){var c=f.selection.getRange();c.start.column=c.end.column=0,c.end.row++,f.selection.setRange(c,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:l("Ctrl+F3","F3"),exec:function(f){f.openLink()}},{name:"joinlines",description:"Join lines",bindKey:l(null,null),exec:function(f){for(var c=f.selection.isBackwards(),d=c?f.selection.getSelectionLead():f.selection.getSelectionAnchor(),p=c?f.selection.getSelectionAnchor():f.selection.getSelectionLead(),h=f.session.doc.getLine(d.row).length,g=f.session.doc.getTextRange(f.selection.getRange()),m=g.replace(/\n\s*/," ").length,y=f.session.doc.getLine(d.row),v=d.row+1;v<=p.row+1;v++){var x=o.stringTrimLeft(o.stringTrimRight(f.session.doc.getLine(v)));x.length!==0&&(x=" "+x),y+=x}p.row+1<f.session.doc.getLength()-1&&(y+=f.session.doc.getNewLineCharacter()),f.clearSelection(),f.session.doc.replace(new a(d.row,0,p.row+2,0),y),m>0?(f.selection.moveCursorTo(d.row,d.column),f.selection.selectTo(d.row,d.column+m)):(h=f.session.doc.getLine(d.row).length>h?h+1:h,f.selection.moveCursorTo(d.row,h))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:l(null,null),exec:function(f){var c=f.session.doc.getLength()-1,d=f.session.doc.getLine(c).length,p=f.selection.rangeList.ranges,h=[];p.length<1&&(p=[f.selection.getRange()]);for(var g=0;g<p.length;g++)g==p.length-1&&(p[g].end.row===c&&p[g].end.column===d||h.push(new a(p[g].end.row,p[g].end.column,c,d))),g===0?p[g].start.row===0&&p[g].start.column===0||h.push(new a(0,0,p[g].start.row,p[g].start.column)):h.push(new a(p[g-1].end.row,p[g-1].end.column,p[g].start.row,p[g].start.column));f.exitMultiSelectMode(),f.clearSelection();for(var g=0;g<h.length;g++)f.selection.addRange(h[g],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(f){f.selection.clearSelection(),f.navigateLineEnd(),f.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(f){f.selection.clearSelection();var c=f.getCursorPosition();f.selection.moveTo(c.row-1,Number.MAX_VALUE),f.insert(`
`),c.row===0&&f.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(f){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),f.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:l("F1","F1"),exec:function(f){f.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:l(null,null),exec:function(f){f.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)r.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(f){f.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(n,r,i){var o=n("../lib/keys"),s=n("../mouse/default_gutter_handler").GutterTooltip,a=function(){function u(f){this.editor=f,this.gutterLayer=f.renderer.$gutterLayer,this.element=f.renderer.$gutter,this.lines=f.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new s(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(f){if(this.annotationTooltip.isOpen){f.preventDefault(),f.keyCode===o.escape&&this.annotationTooltip.hideTooltip();return}if(f.target===this.element){if(f.keyCode!=o.enter)return;f.preventDefault();var c=this.editor.getCursorPosition().row;this.editor.isRowVisible(c)||this.editor.scrollToLine(c,!0,!0),setTimeout((function(){var d=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),p=this.$findNearestFoldLaneWidget(d),h=this.$findNearestAnnotation(d);if(!(p===null&&h===null)){var g=this.$findClosestNumber(p,h,d);if(g===p)if(this.activeLane="fold",this.activeRowIndex=p,this.$isCustomWidgetVisible(p)){this.$focusCustomWidget(this.activeRowIndex);return}else{this.$focusFoldWidget(this.activeRowIndex);return}else{this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(f),setTimeout((function(){this.editor._signal("gutterkeydown",new l(f,this))}).bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(f){if(f.keyCode===o.tab){f.preventDefault();return}if(f.keyCode===o.escape){f.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(f.keyCode===o.up){switch(f.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(f.keyCode===o.down){switch(f.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(f.keyCode===o.left){f.preventDefault(),this.$switchLane("annotation");return}if(f.keyCode===o.right){f.preventDefault(),this.$switchLane("fold");return}if(f.keyCode===o.enter||f.keyCode===o.space){switch(f.preventDefault(),this.activeLane){case"fold":var c=this.$rowIndexToRow(this.activeRowIndex),d=this.editor.session.$gutterCustomWidgets[c];if(d)d.callbacks&&d.callbacks.onClick&&d.callbacks.onClick(f,c);else if(this.gutterLayer.session.foldWidgets[c]==="start"){this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),f),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==c&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(c),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var p=this.lines.cells[this.activeRowIndex].element.childNodes[2],h=p.getBoundingClientRect(),g=this.annotationTooltip.getElement().style;g.left=h.right+"px",g.top=h.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(f){var c=this.editor.isRowFullyVisible(this.$rowIndexToRow(f)),d=this.$getFoldWidget(f).style.display!=="none";return c&&d},u.prototype.$isCustomWidgetVisible=function(f){var c=this.editor.isRowFullyVisible(this.$rowIndexToRow(f)),d=!!this.$getCustomWidget(f);return c&&d},u.prototype.$isAnnotationVisible=function(f){var c=this.editor.isRowFullyVisible(this.$rowIndexToRow(f)),d=this.$getAnnotation(f).style.display!=="none";return c&&d},u.prototype.$getFoldWidget=function(f){var c=this.lines.get(f),d=c.element;return d.childNodes[1]},u.prototype.$getCustomWidget=function(f){var c=this.lines.get(f),d=c.element;return d.childNodes[3]},u.prototype.$getAnnotation=function(f){var c=this.lines.get(f),d=c.element;return d.childNodes[2]},u.prototype.$findNearestFoldLaneWidget=function(f){if(this.$isCustomWidgetVisible(f)||this.$isFoldWidgetVisible(f))return f;for(var c=0;f-c>0||f+c<this.lines.getLength()-1;){if(c++,f-c>=0&&this.$isCustomWidgetVisible(f-c))return f-c;if(f+c<=this.lines.getLength()-1&&this.$isCustomWidgetVisible(f+c))return f+c;if(f-c>=0&&this.$isFoldWidgetVisible(f-c))return f-c;if(f+c<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(f+c))return f+c}return null},u.prototype.$findNearestAnnotation=function(f){if(this.$isAnnotationVisible(f))return f;for(var c=0;f-c>0||f+c<this.lines.getLength()-1;){if(c++,f-c>=0&&this.$isAnnotationVisible(f-c))return f-c;if(f+c<=this.lines.getLength()-1&&this.$isAnnotationVisible(f+c))return f+c}return null},u.prototype.$focusFoldWidget=function(f){if(f!=null){var c=this.$getFoldWidget(f);c.classList.add(this.editor.renderer.keyboardFocusClassName),c.focus()}},u.prototype.$focusCustomWidget=function(f){if(f!=null){var c=this.$getCustomWidget(f);c&&(c.classList.add(this.editor.renderer.keyboardFocusClassName),c.focus())}},u.prototype.$focusAnnotation=function(f){if(f!=null){var c=this.$getAnnotation(f);c.classList.add(this.editor.renderer.keyboardFocusClassName),c.focus()}},u.prototype.$blurFoldWidget=function(f){var c=this.$getFoldWidget(f);c.classList.remove(this.editor.renderer.keyboardFocusClassName),c.blur()},u.prototype.$blurCustomWidget=function(f){var c=this.$getCustomWidget(f);c&&(c.classList.remove(this.editor.renderer.keyboardFocusClassName),c.blur())},u.prototype.$blurAnnotation=function(f){var c=this.$getAnnotation(f);c.classList.remove(this.editor.renderer.keyboardFocusClassName),c.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var f=this.activeRowIndex;f>0;)if(f--,this.$isFoldWidgetVisible(f)||this.$isCustomWidgetVisible(f)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=f,this.$isFoldWidgetVisible(f)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var f=this.activeRowIndex;f<this.lines.getLength()-1;)if(f++,this.$isFoldWidgetVisible(f)||this.$isCustomWidgetVisible(f)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=f,this.$isFoldWidgetVisible(f)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var f=this.activeRowIndex;f>0;)if(f--,this.$isAnnotationVisible(f)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=f,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var f=this.activeRowIndex;f<this.lines.getLength()-1;)if(f++,this.$isAnnotationVisible(f)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=f,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$findClosestNumber=function(f,c,d){return f===null?c:c===null||Math.abs(d-f)<=Math.abs(d-c)?f:c},u.prototype.$switchLane=function(f){switch(f){case"annotation":if(this.activeLane==="annotation")break;var c=this.$findNearestAnnotation(this.activeRowIndex);if(c==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=c,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var d=this.$findNearestFoldLaneWidget(this.activeRowIndex);if(d===null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=d,this.$isCustomWidgetVisible(d)?this.$focusCustomWidget(this.activeRowIndex):this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(f){var c=this.lines.get(f);return c?c.row:null},u.prototype.$rowToRowIndex=function(f){for(var c=0;c<this.lines.getLength();c++){var d=this.lines.get(c);if(d.row==f)return c}return null},u}();r.GutterKeyboardHandler=a;var l=function(){function u(f,c){this.gutterKeyboardHandler=c,this.domEvent=f}return u.prototype.getKey=function(){return o.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();r.GutterKeyboardEvent=l}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys","ace/lib/event","ace/tooltip"],function(n,r,i){var o=this&&this.__values||function(k){var D=typeof Symbol=="function"&&Symbol.iterator,O=D&&k[D],N=0;if(O)return O.call(k);if(k&&typeof k.length=="number")return{next:function(){return k&&N>=k.length&&(k=void 0),{value:k&&k[N++],done:!k}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},s=n("./lib/oop"),a=n("./lib/dom"),l=n("./lib/lang"),u=n("./lib/useragent"),f=n("./keyboard/textinput").TextInput,c=n("./mouse/mouse_handler").MouseHandler,d=n("./mouse/fold_handler").FoldHandler,p=n("./keyboard/keybinding").KeyBinding,h=n("./edit_session").EditSession,g=n("./search").Search,m=n("./range").Range,y=n("./lib/event_emitter").EventEmitter,v=n("./commands/command_manager").CommandManager,x=n("./commands/default_commands").commands,_=n("./config"),E=n("./token_iterator").TokenIterator,C=n("./keyboard/gutter_handler").GutterKeyboardHandler,w=n("./config").nls,T=n("./clipboard"),R=n("./lib/keys"),L=n("./lib/event"),B=n("./tooltip").HoverTooltip,P=function(){function k(D,O,N){this.id="editor"+ ++k.$uid,this.session,this.$toDestroy=[];var j=D.getContainerElement();this.container=j,this.renderer=D,this.commands=new v(u.isMac?"mac":"win",x),typeof document=="object"&&(this.textInput=new f(D.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new d(this)),this.keyBinding=new p(this),this.$search=new g().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(q,W){W._$emitInputEvent.schedule(31)}),this.setSession(O||N&&N.session||new h("")),_.resetOptions(this),N&&this.setOptions(N),_._signal("editor",this)}return k.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},k.prototype.startOperation=function(D){this.session.startOperation(D)},k.prototype.endOperation=function(D){this.session.endOperation(D)},k.prototype.onStartOperation=function(D){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,D||(this.previousCommand=null)},k.prototype.onEndOperation=function(D){if(this.curOp&&this.session){if(D&&D.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var O=this.curOp.command,N=O&&O.scrollIntoView;if(N){switch(N){case"center-animate":N="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var j=this.selection.getRange(),q=this.renderer.layerConfig;(j.start.row>=q.lastRow||j.end.row<=q.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}N=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},k.prototype.$historyTracker=function(D){if(this.$mergeUndoDeltas){var O=this.prevOp,N=this.$mergeableCommands,j=O.command&&D.command.name==O.command.name;if(D.command.name=="insertstring"){var q=D.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),j=j&&this.mergeNextCommand&&(!/\s/.test(q)||/\s/.test(O.args)),this.mergeNextCommand=!0}else j=j&&N.indexOf(D.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(j=!1),j?this.session.mergeUndoDeltas=!0:N.indexOf(D.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},k.prototype.setKeyboardHandler=function(D,O){if(D&&typeof D=="string"&&D!="ace"){this.$keybindingId=D;var N=this;_.loadModule(["keybinding",D],function(j){N.$keybindingId==D&&N.keyBinding.setKeyboardHandler(j&&j.handler),O&&O()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(D),O&&O()},k.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},k.prototype.setSession=function(D){if(this.session!=D){this.curOp&&this.endOperation(),this.curOp={};var O=this.session;if(O){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var N=this.session.getSelection();N.off("changeCursor",this.$onCursorChange),N.off("changeSelection",this.$onSelectionChange)}this.session=D,D?(this.$onDocumentChange=this.onDocumentChange.bind(this),D.on("change",this.$onDocumentChange),this.renderer.setSession(D),this.$onChangeMode=this.onChangeMode.bind(this),D.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),D.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),D.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),D.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),D.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),D.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=D.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(D)),this._signal("changeSession",{session:D,oldSession:O}),this.curOp=null,O&&O._signal("changeEditor",{oldEditor:this}),O&&(O.$editor=null),D&&D._signal("changeEditor",{editor:this}),D&&(D.$editor=this),D&&!D.destroyed&&D.bgTokenizer.scheduleStart()}},k.prototype.getSession=function(){return this.session},k.prototype.setValue=function(D,O){return this.session.doc.setValue(D),O?O==1?this.navigateFileEnd():O==-1&&this.navigateFileStart():this.selectAll(),D},k.prototype.getValue=function(){return this.session.getValue()},k.prototype.getSelection=function(){return this.selection},k.prototype.resize=function(D){this.renderer.onResize(D)},k.prototype.setTheme=function(D,O){this.renderer.setTheme(D,O)},k.prototype.getTheme=function(){return this.renderer.getTheme()},k.prototype.setStyle=function(D,O){this.renderer.setStyle(D,O)},k.prototype.unsetStyle=function(D){this.renderer.unsetStyle(D)},k.prototype.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},k.prototype.setFontSize=function(D){this.setOption("fontSize",D)},k.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var D=this;this.$highlightPending=!0,setTimeout(function(){D.$highlightPending=!1;var O=D.session;if(!(!O||O.destroyed)){O.$bracketHighlight&&(O.$bracketHighlight.markerIds.forEach(function(ne){O.removeMarker(ne)}),O.$bracketHighlight=null);var N=D.getCursorPosition(),j=D.getKeyboardHandler(),q=j&&j.$getDirectionForHighlight&&j.$getDirectionForHighlight(D),W=O.getMatchingBracketRanges(N,q);if(!W){var Q=new E(O,N.row,N.column),ee=Q.getCurrentToken();if(ee&&/\b(?:tag-open|tag-name)/.test(ee.type)){var H=O.getMatchingTags(N);H&&(W=[H.openTagName.isEmpty()?H.openTag:H.openTagName,H.closeTagName.isEmpty()?H.closeTag:H.closeTagName])}}if(!W&&O.$mode.getMatching&&(W=O.$mode.getMatching(D.session)),!W){D.getHighlightIndentGuides()&&D.renderer.$textLayer.$highlightIndentGuide();return}var se="ace_bracket";Array.isArray(W)?W.length==1&&(se="ace_error_bracket"):W=[W],W.length==2&&(m.comparePoints(W[0].end,W[1].start)==0?W=[m.fromPoints(W[0].start,W[1].end)]:m.comparePoints(W[0].start,W[1].end)==0&&(W=[m.fromPoints(W[1].start,W[0].end)])),O.$bracketHighlight={ranges:W,markerIds:W.map(function(ne){return O.addMarker(ne,se,"text")})},D.getHighlightIndentGuides()&&D.renderer.$textLayer.$highlightIndentGuide()}},50)}},k.prototype.focus=function(){this.textInput.focus()},k.prototype.isFocused=function(){return this.textInput.isFocused()},k.prototype.blur=function(){this.textInput.blur()},k.prototype.onFocus=function(D){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",D))},k.prototype.onBlur=function(D){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",D))},k.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},k.prototype.onDocumentChange=function(D){var O=this.session.$useWrapMode,N=D.start.row==D.end.row?D.end.row:1/0;this.renderer.updateLines(D.start.row,N,O),this._signal("change",D),this.$cursorChange()},k.prototype.onTokenizerUpdate=function(D){var O=D.data;this.renderer.updateLines(O.first,O.last)},k.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},k.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},k.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},k.prototype.$updateHighlightActiveLine=function(){var D=this.getSession(),O;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(O=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(O=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(O=!1)),D.$highlightLineMarker&&!O)D.removeMarker(D.$highlightLineMarker.id),D.$highlightLineMarker=null;else if(!D.$highlightLineMarker&&O){var N=new m(O.row,O.column,O.row,1/0);N.id=D.addMarker(N,"ace_active-line","screenLine"),D.$highlightLineMarker=N}else O&&(D.$highlightLineMarker.start.row=O.row,D.$highlightLineMarker.end.row=O.row,D.$highlightLineMarker.start.column=O.column,D._signal("changeBackMarker"))},k.prototype.onSelectionChange=function(D){var O=this.session;if(O.$selectionMarker&&O.removeMarker(O.$selectionMarker),O.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var N=this.selection.getRange(),j=this.getSelectionStyle();O.$selectionMarker=O.addMarker(N,"ace_selection",j)}var q=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(q),this._signal("changeSelection")},k.prototype.$getSelectionHighLightRegexp=function(){var D=this.session,O=this.getSelectionRange();if(!(O.isEmpty()||O.isMultiLine())){var N=O.start.column,j=O.end.column,q=D.getLine(O.start.row),W=q.substring(N,j);if(!(W.length>5e3||!/[\w\d]/.test(W))){var Q=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:W}),ee=q.substring(N-1,j+1);if(Q.test(ee))return Q}}},k.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},k.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},k.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},k.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},k.prototype.onChangeMode=function(D){this.renderer.updateText(),this._emit("changeMode",D)},k.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},k.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},k.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},k.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},k.prototype.getCopyText=function(){var D=this.getSelectedText(),O=this.session.doc.getNewLineCharacter(),N=!1;if(!D&&this.$copyWithEmptySelection){N=!0;for(var j=this.selection.getAllRanges(),q=0;q<j.length;q++){var W=j[q];q&&j[q-1].start.row==W.start.row||(D+=this.session.getLine(W.start.row)+O)}}var Q={text:D};return this._signal("copy",Q),T.lineMode=N?Q.text:!1,Q.text},k.prototype.onCopy=function(){this.commands.exec("copy",this)},k.prototype.onCut=function(){this.commands.exec("cut",this)},k.prototype.onPaste=function(D,O){var N={text:D,event:O};this.commands.exec("paste",this,N)},k.prototype.$handlePaste=function(D){typeof D=="string"&&(D={text:D}),this._signal("paste",D);var O=D.text,N=O===T.lineMode,j=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)N?j.insert({row:this.selection.lead.row,column:0},O):this.insert(O);else if(N)this.selection.rangeList.ranges.forEach(function(se){j.insert({row:se.start.row,column:0},O)});else{var q=O.split(/\r\n|\r|\n/),W=this.selection.rangeList.ranges,Q=q.length==2&&(!q[0]||!q[1]);if(q.length!=W.length||Q)return this.commands.exec("insertstring",this,O);for(var ee=W.length;ee--;){var H=W[ee];H.isEmpty()||j.remove(H),j.insert(H.start,q[ee])}}},k.prototype.execCommand=function(D,O){return this.commands.exec(D,this,O)},k.prototype.insert=function(D,O){var N=this.session,j=N.getMode(),q=this.getCursorPosition();if(this.getBehavioursEnabled()&&!O){var W=j.transformAction(N.getState(q.row),"insertion",this,N,D);W&&(D!==W.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),D=W.text)}if(D=="	"&&(D=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&D.indexOf(`
`)==-1){var Q=m.fromPoints(q,q);Q.end.column+=D.length,this.session.remove(Q)}}else{var Q=this.getSelectionRange();q=this.session.remove(Q),this.clearSelection()}if(D==`
`||D==`\r
`){var ne=N.getLine(q.row);if(q.column>ne.search(/\S|$/)){var ee=ne.substr(q.column).search(/\S|$/);N.doc.removeInLine(q.row,q.column,q.column+ee)}}this.clearSelection();var H=q.column,se=N.getState(q.row),ne=N.getLine(q.row),ge=j.checkOutdent(se,ne,D);if(N.insert(q,D),W&&W.selection&&(W.selection.length==2?this.selection.setSelectionRange(new m(q.row,H+W.selection[0],q.row,H+W.selection[1])):this.selection.setSelectionRange(new m(q.row+W.selection[0],W.selection[1],q.row+W.selection[2],W.selection[3]))),this.$enableAutoIndent){if(N.getDocument().isNewLine(D)){var we=j.getNextLineIndent(se,ne.slice(0,q.column),N.getTabString());N.insert({row:q.row+1,column:0},we)}ge&&j.autoOutdent(se,N,q.row)}},k.prototype.autoIndent=function(){for(var D=this.session,O=D.getMode(),N=this.selection.isEmpty()?[new m(0,0,D.doc.getLength()-1,0)]:this.selection.getAllRanges(),j="",q="",W="",Q=D.getTabString(),ee=0;ee<N.length;ee++)for(var H=N[ee].start.row,se=N[ee].end.row,ne=H;ne<=se;ne++){ne>0&&(j=D.getState(ne-1),q=D.getLine(ne-1),W=O.getNextLineIndent(j,q,Q));var ge=D.getLine(ne),we=O.$getIndent(ge);if(W!==we){if(we.length>0){var $e=new m(ne,0,ne,we.length);D.remove($e)}W.length>0&&D.insert({row:ne,column:0},W)}O.autoOutdent(j,D,ne)}},k.prototype.onTextInput=function(D,O){if(!O)return this.keyBinding.onTextInput(D);this.startOperation({command:{name:"insertstring"}});var N=this.applyComposition.bind(this,D,O);this.selection.rangeCount?this.forEachSelection(N):N(),this.endOperation()},k.prototype.applyComposition=function(D,O){if(O.extendLeft||O.extendRight){var N=this.selection.getRange();N.start.column-=O.extendLeft,N.end.column+=O.extendRight,N.start.column<0&&(N.start.row--,N.start.column+=this.session.getLine(N.start.row).length+1),this.selection.setRange(N),!D&&!N.isEmpty()&&this.remove()}if((D||!this.selection.isEmpty())&&this.insert(D,!0),O.restoreStart||O.restoreEnd){var N=this.selection.getRange();N.start.column-=O.restoreStart,N.end.column-=O.restoreEnd,this.selection.setRange(N)}},k.prototype.onCommandKey=function(D,O,N){return this.keyBinding.onCommandKey(D,O,N)},k.prototype.setOverwrite=function(D){this.session.setOverwrite(D)},k.prototype.getOverwrite=function(){return this.session.getOverwrite()},k.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},k.prototype.setScrollSpeed=function(D){this.setOption("scrollSpeed",D)},k.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},k.prototype.setDragDelay=function(D){this.setOption("dragDelay",D)},k.prototype.getDragDelay=function(){return this.getOption("dragDelay")},k.prototype.setSelectionStyle=function(D){this.setOption("selectionStyle",D)},k.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},k.prototype.setHighlightActiveLine=function(D){this.setOption("highlightActiveLine",D)},k.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},k.prototype.setHighlightGutterLine=function(D){this.setOption("highlightGutterLine",D)},k.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},k.prototype.setHighlightSelectedWord=function(D){this.setOption("highlightSelectedWord",D)},k.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},k.prototype.setAnimatedScroll=function(D){this.renderer.setAnimatedScroll(D)},k.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},k.prototype.setShowInvisibles=function(D){this.renderer.setShowInvisibles(D)},k.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},k.prototype.setDisplayIndentGuides=function(D){this.renderer.setDisplayIndentGuides(D)},k.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},k.prototype.setHighlightIndentGuides=function(D){this.renderer.setHighlightIndentGuides(D)},k.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},k.prototype.setShowPrintMargin=function(D){this.renderer.setShowPrintMargin(D)},k.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},k.prototype.setPrintMarginColumn=function(D){this.renderer.setPrintMarginColumn(D)},k.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},k.prototype.setReadOnly=function(D){this.setOption("readOnly",D)},k.prototype.getReadOnly=function(){return this.getOption("readOnly")},k.prototype.setBehavioursEnabled=function(D){this.setOption("behavioursEnabled",D)},k.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},k.prototype.setWrapBehavioursEnabled=function(D){this.setOption("wrapBehavioursEnabled",D)},k.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},k.prototype.setShowFoldWidgets=function(D){this.setOption("showFoldWidgets",D)},k.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},k.prototype.setFadeFoldWidgets=function(D){this.setOption("fadeFoldWidgets",D)},k.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},k.prototype.remove=function(D){this.selection.isEmpty()&&(D=="left"?this.selection.selectLeft():this.selection.selectRight());var O=this.getSelectionRange();if(this.getBehavioursEnabled()){var N=this.session,j=N.getState(O.start.row),q=N.getMode().transformAction(j,"deletion",this,N,O);if(O.end.column===0){var W=N.getTextRange(O);if(W[W.length-1]==`
`){var Q=N.getLine(O.end.row);/^\s+$/.test(Q)&&(O.end.column=Q.length)}}q&&(O=q)}this.session.remove(O),this.clearSelection()},k.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},k.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var D=this.getSelectionRange();D.start.column==D.end.column&&D.start.row==D.end.row&&(D.end.column=0,D.end.row++),this.session.remove(D),this.clearSelection()},k.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var D=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(D)},k.prototype.setGhostText=function(D,O){this.renderer.setGhostText(D,O)},k.prototype.removeGhostText=function(){this.renderer.removeGhostText()},k.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var D=this.getCursorPosition(),O=D.column;if(O!==0){var N=this.session.getLine(D.row),j,q;O<N.length?(j=N.charAt(O)+N.charAt(O-1),q=new m(D.row,O-1,D.row,O+1)):(j=N.charAt(O-1)+N.charAt(O-2),q=new m(D.row,O-2,D.row,O)),this.session.replace(q,j),this.session.selection.moveToPosition(q.end)}}},k.prototype.toLowerCase=function(){var D=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var O=this.getSelectionRange(),N=this.session.getTextRange(O);this.session.replace(O,N.toLowerCase()),this.selection.setSelectionRange(D)},k.prototype.toUpperCase=function(){var D=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var O=this.getSelectionRange(),N=this.session.getTextRange(O);this.session.replace(O,N.toUpperCase()),this.selection.setSelectionRange(D)},k.prototype.indent=function(){var D=this.session,O=this.getSelectionRange();if(O.start.row<O.end.row){var N=this.$getSelectedRows();D.indentRows(N.first,N.last,"	");return}else if(O.start.column<O.end.column){var j=D.getTextRange(O);if(!/^\s+$/.test(j)){var N=this.$getSelectedRows();D.indentRows(N.first,N.last,"	");return}}var q=D.getLine(O.start.row),W=O.start,Q=D.getTabSize(),ee=D.documentToScreenColumn(W.row,W.column);if(this.session.getUseSoftTabs())var H=Q-ee%Q,se=l.stringRepeat(" ",H);else{for(var H=ee%Q;q[O.start.column-1]==" "&&H;)O.start.column--,H--;this.selection.setSelectionRange(O),se="	"}return this.insert(se)},k.prototype.blockIndent=function(){var D=this.$getSelectedRows();this.session.indentRows(D.first,D.last,"	")},k.prototype.blockOutdent=function(){var D=this.session.getSelection();this.session.outdentRows(D.getRange())},k.prototype.sortLines=function(){for(var D=this.$getSelectedRows(),O=this.session,N=[],j=D.first;j<=D.last;j++)N.push(O.getLine(j));N.sort(function(Q,ee){return Q.toLowerCase()<ee.toLowerCase()?-1:Q.toLowerCase()>ee.toLowerCase()?1:0});for(var q=new m(0,0,0,0),j=D.first;j<=D.last;j++){var W=O.getLine(j);q.start.row=j,q.end.row=j,q.end.column=W.length,O.replace(q,N[j-D.first])}},k.prototype.toggleCommentLines=function(){var D=this.session.getState(this.getCursorPosition().row),O=this.$getSelectedRows();this.session.getMode().toggleCommentLines(D,this.session,O.first,O.last)},k.prototype.toggleBlockComment=function(){var D=this.getCursorPosition(),O=this.session.getState(D.row),N=this.getSelectionRange();this.session.getMode().toggleBlockComment(O,this.session,N,D)},k.prototype.getNumberAt=function(D,O){var N=/[\-]?[0-9]+(?:\.[0-9]+)?/g;N.lastIndex=0;for(var j=this.session.getLine(D);N.lastIndex<O;){var q=N.exec(j);if(q.index<=O&&q.index+q[0].length>=O){var W={value:q[0],start:q.index,end:q.index+q[0].length};return W}}return null},k.prototype.modifyNumber=function(D){var O=this.selection.getCursor().row,N=this.selection.getCursor().column,j=new m(O,N-1,O,N),q=this.session.getTextRange(j);if(!isNaN(parseFloat(q))&&isFinite(q)){var W=this.getNumberAt(O,N);if(W){var Q=W.value.indexOf(".")>=0?W.start+W.value.indexOf(".")+1:W.end,ee=W.start+W.value.length-Q,H=parseFloat(W.value);H*=Math.pow(10,ee),Q!==W.end&&N<Q?D*=Math.pow(10,W.end-N-1):D*=Math.pow(10,W.end-N),H+=D,H/=Math.pow(10,ee);var se=H.toFixed(ee),ne=new m(O,W.start,O,W.end);this.session.replace(ne,se),this.moveCursorTo(O,Math.max(W.start+1,N+se.length-W.value.length))}}else this.toggleWord()},k.prototype.toggleWord=function(){var D=this.selection.getCursor().row,O=this.selection.getCursor().column;this.selection.selectWord();var N=this.getSelectedText(),j=this.selection.getWordRange().start.column,q=N.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),W=O-j-1;W<0&&(W=0);var Q=0,ee=0,H=this;N.match(/[A-Za-z0-9_]+/)&&q.forEach(function(Ue,ft){ee=Q+Ue.length,W>=Q&&W<=ee&&(N=Ue,H.selection.clearSelection(),H.moveCursorTo(D,Q+j),H.selection.selectTo(D,ee+j)),Q=ee});for(var se=this.$toggleWordPairs,ne,ge=0;ge<se.length;ge++)for(var we=se[ge],$e=0;$e<=1;$e++){var ve=+!$e,Ee=N.match(new RegExp("^\\s?_?("+l.escapeRegExp(we[$e])+")\\s?$","i"));if(Ee){var Ve=N.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(Ee[1])+")($|\\s)","g"));Ve&&(ne=N.replace(new RegExp(l.escapeRegExp(we[$e]),"i"),function(Ue){var ft=we[ve];return Ue.toUpperCase()==Ue?ft=ft.toUpperCase():Ue.charAt(0).toUpperCase()==Ue.charAt(0)&&(ft=ft.substr(0,0)+we[ve].charAt(0).toUpperCase()+ft.substr(1)),ft}),this.insert(ne),ne="")}}},k.prototype.findLinkAt=function(D,O){var N,j,q=this.session.getLine(D),W=q.split(/((?:https?|ftp):\/\/[\S]+)/),Q=O;Q<0&&(Q=0);var ee=0,H=0,se;try{for(var ne=o(W),ge=ne.next();!ge.done;ge=ne.next()){var we=ge.value;if(H=ee+we.length,Q>=ee&&Q<=H&&we.match(/((?:https?|ftp):\/\/[\S]+)/)){se=we.replace(/[\s:.,'";}\]]+$/,"");break}ee=H}}catch($e){N={error:$e}}finally{try{ge&&!ge.done&&(j=ne.return)&&j.call(ne)}finally{if(N)throw N.error}}return se},k.prototype.openLink=function(){var D=this.selection.getCursor(),O=this.findLinkAt(D.row,D.column);return O&&window.open(O,"_blank"),O!=null},k.prototype.removeLines=function(){var D=this.$getSelectedRows();this.session.removeFullLines(D.first,D.last),this.clearSelection()},k.prototype.duplicateSelection=function(){var D=this.selection,O=this.session,N=D.getRange(),j=D.isBackwards();if(N.isEmpty()){var q=N.start.row;O.duplicateLines(q,q)}else{var W=j?N.start:N.end,Q=O.insert(W,O.getTextRange(N));N.start=W,N.end=Q,D.setSelectionRange(N,j)}},k.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},k.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},k.prototype.moveText=function(D,O,N){return this.session.moveText(D,O,N)},k.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},k.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},k.prototype.$moveLines=function(D,O){var N,j,q=this.selection;if(!q.inMultiSelectMode||this.inVirtualSelectionMode){var W=q.toOrientedRange();N=this.$getSelectedRows(W),j=this.session.$moveLines(N.first,N.last,O?0:D),O&&D==-1&&(j=0),W.moveBy(j,0),q.fromOrientedRange(W)}else{var Q=q.rangeList.ranges;q.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var ee=0,H=0,se=Q.length,ne=0;ne<se;ne++){var ge=ne;Q[ne].moveBy(ee,0),N=this.$getSelectedRows(Q[ne]);for(var we=N.first,$e=N.last;++ne<se;){H&&Q[ne].moveBy(H,0);var ve=this.$getSelectedRows(Q[ne]);if(O&&ve.first!=$e)break;if(!O&&ve.first>$e+1)break;$e=ve.last}for(ne--,ee=this.session.$moveLines(we,$e,O?0:D),O&&D==-1&&(ge=ne+1);ge<=ne;)Q[ge].moveBy(ee,0),ge++;O||(ee=0),H+=ee}q.fromOrientedRange(q.ranges[0]),q.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},k.prototype.$getSelectedRows=function(D){return D=(D||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(D.start.row),last:this.session.getRowFoldEnd(D.end.row)}},k.prototype.onCompositionStart=function(D){this.renderer.showComposition(D)},k.prototype.onCompositionUpdate=function(D){this.renderer.setCompositionText(D)},k.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},k.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},k.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},k.prototype.isRowVisible=function(D){return D>=this.getFirstVisibleRow()&&D<=this.getLastVisibleRow()},k.prototype.isRowFullyVisible=function(D){return D>=this.renderer.getFirstFullyVisibleRow()&&D<=this.renderer.getLastFullyVisibleRow()},k.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},k.prototype.$moveByPage=function(D,O){var N=this.renderer,j=this.renderer.layerConfig,q=D*Math.floor(j.height/j.lineHeight);O===!0?this.selection.$moveSelection(function(){this.moveCursorBy(q,0)}):O===!1&&(this.selection.moveCursorBy(q,0),this.selection.clearSelection());var W=N.scrollTop;N.scrollBy(0,q*j.lineHeight),O!=null&&N.scrollCursorIntoView(null,.5),N.animateScrolling(W)},k.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},k.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},k.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},k.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},k.prototype.scrollPageDown=function(){this.$moveByPage(1)},k.prototype.scrollPageUp=function(){this.$moveByPage(-1)},k.prototype.scrollToRow=function(D){this.renderer.scrollToRow(D)},k.prototype.scrollToLine=function(D,O,N,j){this.renderer.scrollToLine(D,O,N,j)},k.prototype.centerSelection=function(){var D=this.getSelectionRange(),O={row:Math.floor(D.start.row+(D.end.row-D.start.row)/2),column:Math.floor(D.start.column+(D.end.column-D.start.column)/2)};this.renderer.alignCursor(O,.5)},k.prototype.getCursorPosition=function(){return this.selection.getCursor()},k.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},k.prototype.getSelectionRange=function(){return this.selection.getRange()},k.prototype.selectAll=function(){this.selection.selectAll()},k.prototype.clearSelection=function(){this.selection.clearSelection()},k.prototype.moveCursorTo=function(D,O){this.selection.moveCursorTo(D,O)},k.prototype.moveCursorToPosition=function(D){this.selection.moveCursorToPosition(D)},k.prototype.jumpToMatching=function(D,O){var N=this.getCursorPosition(),j=new E(this.session,N.row,N.column),q=j.getCurrentToken(),W=0;q&&q.type.indexOf("tag-name")!==-1&&(q=j.stepBackward());var Q=q||j.stepForward();if(Q){var ee,H=!1,se={},ne=N.column-Q.start,ge,we={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(Q.value.match(/[{}()\[\]]/g)){for(;ne<Q.value.length&&!H;ne++)if(we[Q.value[ne]])switch(ge=we[Q.value[ne]]+"."+Q.type.replace("rparen","lparen"),isNaN(se[ge])&&(se[ge]=0),Q.value[ne]){case"(":case"[":case"{":se[ge]++;break;case")":case"]":case"}":se[ge]--,se[ge]===-1&&(ee="bracket",H=!0);break}}else Q.type.indexOf("tag-name")!==-1&&(isNaN(se[Q.value])&&(se[Q.value]=0),q.value==="<"&&W>1?se[Q.value]++:q.value==="</"&&se[Q.value]--,se[Q.value]===-1&&(ee="tag",H=!0));H||(q=Q,W++,Q=j.stepForward(),ne=0)}while(Q&&!H);if(ee){var $e,ve;if(ee==="bracket")$e=this.session.getBracketRange(N),$e||($e=new m(j.getCurrentTokenRow(),j.getCurrentTokenColumn()+ne-1,j.getCurrentTokenRow(),j.getCurrentTokenColumn()+ne-1),ve=$e.start,(O||ve.row===N.row&&Math.abs(ve.column-N.column)<2)&&($e=this.session.getBracketRange(ve)));else if(ee==="tag"){if(!Q||Q.type.indexOf("tag-name")===-1)return;if($e=new m(j.getCurrentTokenRow(),j.getCurrentTokenColumn()-2,j.getCurrentTokenRow(),j.getCurrentTokenColumn()-2),$e.compare(N.row,N.column)===0){var Ee=this.session.getMatchingTags(N);Ee&&(Ee.openTag.contains(N.row,N.column)?($e=Ee.closeTag,ve=$e.start):($e=Ee.openTag,Ee.closeTag.start.row===N.row&&Ee.closeTag.start.column===N.column?ve=$e.end:ve=$e.start))}ve=ve||$e.start}ve=$e&&$e.cursor||ve,ve&&(D?$e&&O?this.selection.setRange($e):$e&&$e.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(ve.row,ve.column):this.selection.moveTo(ve.row,ve.column))}}},k.prototype.gotoLine=function(D,O,N){this.selection.clearSelection(),this.session.unfold({row:D-1,column:O||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(D-1,O||0),this.isRowFullyVisible(D-1)||this.scrollToLine(D-1,!0,N)},k.prototype.navigateTo=function(D,O){this.selection.moveTo(D,O)},k.prototype.navigateUp=function(D){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var O=this.selection.anchor.getPosition();return this.moveCursorToPosition(O)}this.selection.clearSelection(),this.selection.moveCursorBy(-D||-1,0)},k.prototype.navigateDown=function(D){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var O=this.selection.anchor.getPosition();return this.moveCursorToPosition(O)}this.selection.clearSelection(),this.selection.moveCursorBy(D||1,0)},k.prototype.navigateLeft=function(D){if(this.selection.isEmpty())for(D=D||1;D--;)this.selection.moveCursorLeft();else{var O=this.getSelectionRange().start;this.moveCursorToPosition(O)}this.clearSelection()},k.prototype.navigateRight=function(D){if(this.selection.isEmpty())for(D=D||1;D--;)this.selection.moveCursorRight();else{var O=this.getSelectionRange().end;this.moveCursorToPosition(O)}this.clearSelection()},k.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},k.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},k.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},k.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},k.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},k.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},k.prototype.replace=function(D,O){O&&this.$search.set(O);var N=this.$search.find(this.session),j=0;return N&&(this.$tryReplace(N,D)&&(j=1),this.selection.setSelectionRange(N),this.renderer.scrollSelectionIntoView(N.start,N.end)),j},k.prototype.replaceAll=function(D,O){O&&this.$search.set(O);var N=this.$search.findAll(this.session),j=0;if(!N.length)return j;var q=this.getSelectionRange();this.selection.moveTo(0,0);for(var W=N.length-1;W>=0;--W)this.$tryReplace(N[W],D)&&j++;return this.selection.setSelectionRange(q),j},k.prototype.$tryReplace=function(D,O){var N=this.session.getTextRange(D);return O=this.$search.replace(N,O),O!==null?(D.end=this.session.replace(D,O),D):null},k.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},k.prototype.find=function(D,O,N){O||(O={}),typeof D=="string"||D instanceof RegExp?O.needle=D:typeof D=="object"&&s.mixin(O,D);var j=this.selection.getRange();O.needle==null&&(D=this.session.getTextRange(j)||this.$search.$options.needle,D||(j=this.session.getWordRange(j.start.row,j.start.column),D=this.session.getTextRange(j)),this.$search.set({needle:D})),this.$search.set(O),O.start||this.$search.set({start:j});var q=this.$search.find(this.session);if(O.preventScroll)return q;if(q)return this.revealRange(q,N),q;O.backwards?j.start=j.end:j.end=j.start,this.selection.setRange(j)},k.prototype.findNext=function(D,O){this.find({skipCurrent:!0,backwards:!1},D,O)},k.prototype.findPrevious=function(D,O){this.find(D,{skipCurrent:!0,backwards:!0},O)},k.prototype.revealRange=function(D,O){this.session.unfold(D),this.selection.setSelectionRange(D);var N=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(D.start,D.end,.5),O!==!1&&this.renderer.animateScrolling(N)},k.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},k.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},k.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(D){D.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},k.prototype.setAutoScrollEditorIntoView=function(D){if(D){var O,N=this,j=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var q=this.$scrollAnchor;q.style.cssText="position:absolute",this.container.insertBefore(q,this.container.firstChild);var W=this.on("changeSelection",function(){j=!0}),Q=this.renderer.on("beforeRender",function(){j&&(O=N.renderer.container.getBoundingClientRect())}),ee=this.renderer.on("afterRender",function(){if(j&&O&&(N.isFocused()||N.searchBox&&N.searchBox.isFocused())){var H=N.renderer,se=H.$cursorLayer.$pixelPos,ne=H.layerConfig,ge=se.top-ne.offset;se.top>=0&&ge+O.top<0?j=!0:se.top<ne.height&&se.top+O.top+ne.lineHeight>window.innerHeight?j=!1:j=null,j!=null&&(q.style.top=ge+"px",q.style.left=se.left+"px",q.style.height=ne.lineHeight+"px",q.scrollIntoView(j)),j=O=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",W),this.renderer.off("afterRender",ee),this.renderer.off("beforeRender",Q))}}},k.prototype.$resetCursorStyle=function(){var D=this.$cursorStyle||"ace",O=this.renderer.$cursorLayer;O&&(O.setSmoothBlinking(/smooth/.test(D)),O.isBlinking=!this.$readOnly&&D!="wide",a.setCssClass(O.element,"ace_slim-cursors",/slim/.test(D)))},k.prototype.prompt=function(D,O,N){var j=this;_.loadModule("ace/ext/prompt",function(q){q.prompt(j,D,O,N)})},k}();P.$uid=0,P.prototype.curOp=null,P.prototype.prevOp={},P.prototype.$mergeableCommands=["backspace","del","insertstring"],P.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],s.implement(P.prototype,y),_.defineOptions(P.prototype,"editor",{selectionStyle:{set:function(k){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:k})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(k){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(k){var D=this;this.textInput.setReadOnly(k),this.$resetCursorStyle(),this.$readOnlyCallback||(this.$readOnlyCallback=function(N){var j=!1;if(N&&N.type=="keydown"){if(j=N&&N.key&&N.key.length==1&&!N.ctrlKey&&!N.metaKey,!j)return}else N&&N.type!=="exec"&&(j=!0);if(j){D.hoverTooltip||(D.hoverTooltip=new B);var q=a.createElement("div");q.textContent=w("editor.tooltip.disable-editing","Editing is disabled"),D.hoverTooltip.isOpen||D.hoverTooltip.showForRange(D,D.getSelectionRange(),q)}else D.hoverTooltip&&D.hoverTooltip.isOpen&&D.hoverTooltip.hide()});var O=this.textInput.getElement();k?(L.addListener(O,"keydown",this.$readOnlyCallback,this),this.commands.on("exec",this.$readOnlyCallback),this.commands.on("commandUnavailable",this.$readOnlyCallback)):(L.removeListener(O,"keydown",this.$readOnlyCallback),this.commands.off("exec",this.$readOnlyCallback),this.commands.off("commandUnavailable",this.$readOnlyCallback),this.hoverTooltip&&(this.hoverTooltip.destroy(),this.hoverTooltip=null))},initialValue:!1},copyWithEmptySelection:{set:function(k){this.textInput.setCopyWithEmptySelection(k)},initialValue:!1},cursorStyle:{set:function(k){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(k){this.setAutoScrollEditorIntoView(k)}},keyboardHandler:{set:function(k){this.setKeyboardHandler(k)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(k){this.session.setValue(k)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(k){this.setSession(k)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(k){this.renderer.$gutterLayer.setShowLineNumbers(k),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),k&&this.$relativeLineNumbers?S.attach(this):S.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(k){this.$showLineNumbers&&k?S.attach(this):S.detach(this)}},placeholder:{set:function(k){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var D=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(D&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!D&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var O=a.createElement("div");O.className="ace_placeholder",O.textContent=this.$placeholder||"",this.renderer.placeholderNode=O,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!D&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(k){var D={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(j){j.blur(),j.renderer.scroller.focus()},readOnly:!0},O=function(j){if(j.target==this.renderer.scroller&&j.keyCode===R.enter){j.preventDefault();var q=this.getCursorPosition().row;this.isRowVisible(q)||this.scrollToLine(q,!0,!0),this.focus()}},N;k?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",w("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",w("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",O.bind(this)),this.commands.addCommand(D),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",w("editor.gutter.aria-roledescription","editor gutter")),this.renderer.$gutter.setAttribute("aria-label",w("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),N||(N=new C(this)),N.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",O.bind(this)),this.commands.removeCommand(D),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),N&&N.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(k){this.$textInputAriaLabel=k},initialValue:""},enableMobileMenu:{set:function(k){this.$enableMobileMenu=k},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var S={getText:function(k,D){return(Math.abs(k.selection.lead.row-D)||D+1+(D<9?"":""))+""},getWidth:function(k,D,O){return Math.max(D.toString().length,(O.lastRow+1).toString().length,2)*O.characterWidth},update:function(k,D){D.renderer.$loop.schedule(D.renderer.CHANGE_GUTTER)},attach:function(k){k.renderer.$gutterLayer.$renderer=this,k.on("changeSelection",this.update),this.update(null,k)},detach:function(k){k.renderer.$gutterLayer.$renderer==this&&(k.renderer.$gutterLayer.$renderer=null),k.off("changeSelection",this.update),this.update(null,k)}};r.Editor=P}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(n,r,i){var o=n("../lib/dom"),s=function(){function a(l,u){this.element=l,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return a.prototype.moveContainer=function(l){o.translate(this.element,0,-(l.firstRowScreen*l.lineHeight%this.canvasHeight)-l.offset*this.$offsetCoefficient)},a.prototype.pageChanged=function(l,u){return Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},a.prototype.computeLineTop=function(l,u,f){var c=u.firstRowScreen*u.lineHeight,d=Math.floor(c/this.canvasHeight),p=f.documentToScreenRow(l,0)*u.lineHeight;return p-d*this.canvasHeight},a.prototype.computeLineHeight=function(l,u,f){return u.lineHeight*f.getRowLineCount(l)},a.prototype.getLength=function(){return this.cells.length},a.prototype.get=function(l){return this.cells[l]},a.prototype.shift=function(){this.$cacheCell(this.cells.shift())},a.prototype.pop=function(){this.$cacheCell(this.cells.pop())},a.prototype.push=function(l){if(Array.isArray(l)){this.cells.push.apply(this.cells,l);for(var u=o.createFragment(this.element),f=0;f<l.length;f++)u.appendChild(l[f].element);this.element.appendChild(u)}else this.cells.push(l),this.element.appendChild(l.element)},a.prototype.unshift=function(l){if(Array.isArray(l)){this.cells.unshift.apply(this.cells,l);for(var u=o.createFragment(this.element),f=0;f<l.length;f++)u.appendChild(l[f].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(l),this.element.insertAdjacentElement("afterbegin",l.element)},a.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},a.prototype.$cacheCell=function(l){l&&(l.element.remove(),this.cellCache.push(l))},a.prototype.createCell=function(l,u,f,c){var d=this.cellCache.pop();if(!d){var p=o.createElement("div");c&&c(p),this.element.appendChild(p),d={element:p,text:"",row:l}}return d.row=l,d},a}();r.Lines=s}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(n,r,i){var o=n("../lib/dom"),s=n("../lib/oop"),a=n("../lib/lang"),l=n("../lib/event_emitter").EventEmitter,u=n("./lines").Lines,f=n("../config").nls,c=function(){function p(h){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return p.prototype.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),this.session=h,h&&h.on("change",this.$updateAnnotations)},p.prototype.addGutterDecoration=function(h,g){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,g)},p.prototype.removeGutterDecoration=function(h,g){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,g)},p.prototype.setAnnotations=function(h){this.$annotations=[];for(var g=0;g<h.length;g++){var m=h[g],y=m.row,v=this.$annotations[y];v||(v=this.$annotations[y]={text:[],type:[],displayText:[]});var x=m.text,_=m.text,E=m.type;x=x?a.escapeHTML(x):m.html||"",_=_||m.html||"",v.text.indexOf(x)===-1&&(v.text.push(x),v.type.push(E),v.displayText.push(_));var C=m.className;C?v.className=C:E==="error"?v.className=" ace_error":E==="security"&&!/\bace_error\b/.test(v.className)?v.className=" ace_security":E==="warning"&&!/\bace_(error|security)\b/.test(v.className)?v.className=" ace_warning":E==="info"&&!v.className?v.className=" ace_info":E==="hint"&&!v.className&&(v.className=" ace_hint")}},p.prototype.$updateAnnotations=function(h){if(this.$annotations.length){var g=h.start.row,m=h.end.row-g;if(m!==0)if(h.action=="remove")this.$annotations.splice(g,m+1,null);else{var y=new Array(m+1);y.unshift(g,1),this.$annotations.splice.apply(this.$annotations,y)}}},p.prototype.update=function(h){this.config=h;var g=this.session,m=h.firstRow,y=Math.min(h.lastRow+h.gutterOffset,g.getLength()-1);this.oldLastRow=y,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow();for(var v=g.getNextFoldLine(m),x=v?v.start.row:1/0,_=null,E=-1,C=m;;){if(C>x&&(C=v.end.row+1,v=g.getNextFoldLine(C,v),x=v?v.start.row:1/0),C>y){for(;this.$lines.getLength()>E+1;)this.$lines.pop();break}_=this.$lines.get(++E),_?_.row=C:(_=this.$lines.createCell(C,h,this.session,d),this.$lines.push(_)),this.$renderCell(_,h,v,C),C++}this._signal("afterRender"),this.$updateGutterWidth(h)},p.prototype.$updateGutterWidth=function(h){var g=this.session,m=g.gutterRenderer||this.$renderer,y=g.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||g.$useWrapMode)&&(v=g.getLength()+y-1);var x=m?m.getWidth(g,v,h):v.toString().length*h.characterWidth,_=this.$padding||this.$computePadding();x+=_.left+_.right,x!==this.gutterWidth&&!isNaN(x)&&(this.gutterWidth=x,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",x))},p.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var h=this.session.selection.getCursor();this.$cursorRow!==h.row&&(this.$cursorRow=h.row)}},p.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!(this.$cursorCell&&this.$cursorCell.row==h)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var g=this.$lines.cells;this.$cursorCell=null;for(var m=0;m<g.length;m++){var y=g[m];if(y.row>=this.$cursorRow){if(y.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(m>0&&v&&v.start.row==g[m-1].row)y=g[m-1];else break}y.element.className="ace_gutter-active-line "+y.element.className,this.$cursorCell=y;break}}}}},p.prototype.scrollLines=function(h){var g=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(g,h))return this.update(h);this.$lines.moveContainer(h);var m=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),y=this.oldLastRow;if(this.oldLastRow=m,!g||y<h.firstRow)return this.update(h);if(m<g.firstRow)return this.update(h);if(g.firstRow<h.firstRow)for(var v=this.session.getFoldedRowCount(g.firstRow,h.firstRow-1);v>0;v--)this.$lines.shift();if(y>m)for(var v=this.session.getFoldedRowCount(m+1,y);v>0;v--)this.$lines.pop();h.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,g.firstRow-1)),m>y&&this.$lines.push(this.$renderLines(h,y+1,m)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},p.prototype.$renderLines=function(h,g,m){for(var y=[],v=g,x=this.session.getNextFoldLine(v),_=x?x.start.row:1/0;v>_&&(v=x.end.row+1,x=this.session.getNextFoldLine(v,x),_=x?x.start.row:1/0),!(v>m);){var E=this.$lines.createCell(v,h,this.session,d);this.$renderCell(E,h,x,v),y.push(E),v++}return y},p.prototype.$renderCell=function(h,g,m,y){var v=h.element,x=this.session,_=v.childNodes[0],E=v.childNodes[1],C=v.childNodes[2],w=v.childNodes[3],T=C.firstChild,R=x.$firstLineNumber,L=x.$breakpoints,B=x.$decorations,P=x.gutterRenderer||this.$renderer,S=this.$showFoldWidgets&&x.foldWidgets,k=m?m.start.row:Number.MAX_VALUE,D=g.lineHeight+"px",O=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",N=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",j=(P?P.getText(x,y):y+R).toString();if(this.$highlightGutterLine&&(y==this.$cursorRow||m&&y<this.$cursorRow&&y>=k&&this.$cursorRow<=m.end.row)&&(O+="ace_gutter-active-line ",this.$cursorCell!=h&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h)),L[y]&&(O+=L[y]),B[y]&&(O+=B[y]),this.$annotations[y]&&y!==k&&(O+=this.$annotations[y].className),S){var q=S[y];q==null&&(q=S[y]=x.getFoldWidget(y))}if(q){var W="ace_fold-widget ace_"+q,Q=q=="start"&&y==k&&y<m.end.row;if(Q){W+=" ace_closed";for(var ee="",H=!1,se=y+1;se<=m.end.row;se++)if(this.$annotations[se]){if(this.$annotations[se].className===" ace_error"){H=!0,ee=" ace_error_fold";break}this.$annotations[se].className===" ace_security"?(H=!0,ee=" ace_security_fold"):this.$annotations[se].className===" ace_warning"&&ee!==" ace_security_fold"&&(H=!0,ee=" ace_warning_fold")}O+=ee}else W+=" ace_open";E.className!=W&&(E.className=W),o.setStyle(E.style,"height",D),o.setStyle(E.style,"display","inline-block"),E.setAttribute("role","button"),E.setAttribute("tabindex","-1");var ne=x.getFoldWidgetRange(y);ne?E.setAttribute("aria-label",f("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[ne.start.row+1,ne.end.row+1])):m?E.setAttribute("aria-label",f("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[m.start.row+1,m.end.row+1])):E.setAttribute("aria-label",f("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[y+1])),Q?(E.setAttribute("aria-expanded","false"),E.setAttribute("title",f("gutter.code-folding.closed.title","Unfold code"))):(E.setAttribute("aria-expanded","true"),E.setAttribute("title",f("gutter.code-folding.open.title","Fold code")))}else E&&(o.setStyle(E.style,"display","none"),E.setAttribute("tabindex","0"),E.removeAttribute("role"),E.removeAttribute("aria-label"));var ge=this.session.$gutterCustomWidgets[y];if(ge?this.$addCustomWidget(y,ge,h):w&&this.$removeCustomWidget(y,h),H&&this.$showFoldedAnnotations){C.className="ace_gutter_annotation",T.className=N,T.className+=ee,o.setStyle(T.style,"height",D),o.setStyle(C.style,"display","block"),o.setStyle(C.style,"height",D);var we;switch(ee){case" ace_error_fold":we=f("gutter.annotation.aria-label.error","Error, read annotations row $0",[j]);break;case" ace_security_fold":we=f("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[j]);break;case" ace_warning_fold":we=f("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[j]);break}C.setAttribute("aria-label",we),C.setAttribute("tabindex","-1"),C.setAttribute("role","button")}else if(this.$annotations[y]){C.className="ace_gutter_annotation",T.className=N,this.$useSvgGutterIcons?T.className+=this.$annotations[y].className:v.classList.add(this.$annotations[y].className.replace(" ","")),o.setStyle(T.style,"height",D),o.setStyle(C.style,"display","block"),o.setStyle(C.style,"height",D);var we;switch(this.$annotations[y].className){case" ace_error":we=f("gutter.annotation.aria-label.error","Error, read annotations row $0",[j]);break;case" ace_security":we=f("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[j]);break;case" ace_warning":we=f("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[j]);break;case" ace_info":we=f("gutter.annotation.aria-label.info","Info, read annotations row $0",[j]);break;case" ace_hint":we=f("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[j]);break}C.setAttribute("aria-label",we),C.setAttribute("tabindex","-1"),C.setAttribute("role","button")}else o.setStyle(C.style,"display","none"),C.removeAttribute("aria-label"),C.removeAttribute("role"),C.setAttribute("tabindex","0");return j!==_.data&&(_.data=j),v.className!=O&&(v.className=O),o.setStyle(h.element.style,"height",this.$lines.computeLineHeight(y,g,x)+"px"),o.setStyle(h.element.style,"top",this.$lines.computeLineTop(y,g,x)+"px"),h.text=j,C.style.display==="none"&&E.style.display==="none"&&!ge?h.element.setAttribute("aria-hidden",!0):h.element.setAttribute("aria-hidden",!1),h},p.prototype.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},p.prototype.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},p.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},p.prototype.setShowFoldWidgets=function(h){h?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},p.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},p.prototype.$hideFoldWidget=function(h,g){var m=g||this.$getGutterCell(h);if(m&&m.element){var y=m.element.childNodes[1];y&&o.setStyle(y.style,"display","none")}},p.prototype.$showFoldWidget=function(h,g){var m=g||this.$getGutterCell(h);if(m&&m.element){var y=m.element.childNodes[1];y&&this.session.foldWidgets&&this.session.foldWidgets[m.row]&&o.setStyle(y.style,"display","inline-block")}},p.prototype.$getGutterCell=function(h){var g=this.$lines.cells,m=this.session.documentToScreenRow(h,0);return g[h-this.config.firstRowScreen-(h-m)]},p.prototype.$addCustomWidget=function(h,g,m){var y=g.className,v=g.label,x=g.title,_=g.callbacks;this.session.$gutterCustomWidgets[h]={className:y,label:v,title:x,callbacks:_},this.$hideFoldWidget(h,m);var E=m||this.$getGutterCell(h);if(E&&E.element){var C=E.element.querySelector(".ace_custom-widget");C&&C.remove(),C=o.createElement("span"),C.className="ace_custom-widget ".concat(y),C.setAttribute("tabindex","-1"),C.setAttribute("role","button"),C.setAttribute("aria-label",v),C.setAttribute("title",x),o.setStyle(C.style,"display","inline-block"),o.setStyle(C.style,"height","inherit"),_&&_.onClick&&C.addEventListener("click",function(w){_.onClick(w,h),w.stopPropagation()}),E.element.appendChild(C)}},p.prototype.$removeCustomWidget=function(h,g){delete this.session.$gutterCustomWidgets[h],this.$showFoldWidget(h,g);var m=g||this.$getGutterCell(h);if(m&&m.element){var y=m.element.querySelector(".ace_custom-widget");y&&m.element.removeChild(y)}},p.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var h=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding},p.prototype.getRegion=function(h){var g=this.$padding||this.$computePadding(),m=this.element.getBoundingClientRect();if(h.x<g.left+m.left)return"markers";if(this.$showFoldWidgets&&h.x>m.right-g.right)return"foldWidgets"},p}();c.prototype.$fixedWidth=!1,c.prototype.$highlightGutterLine=!0,c.prototype.$renderer="",c.prototype.$showLineNumbers=!0,c.prototype.$showFoldWidgets=!0,s.implement(c.prototype,l);function d(p){var h=document.createTextNode("");p.appendChild(h);var g=o.createElement("span");p.appendChild(g);var m=o.createElement("span");p.appendChild(m);var y=o.createElement("span");return m.appendChild(y),p}r.Gutter=c}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(n,r,i){var o=n("../range").Range,s=n("../lib/dom"),a=function(){function u(f){this.element=s.createElement("div"),this.element.className="ace_layer ace_marker-layer",f.appendChild(this.element)}return u.prototype.setPadding=function(f){this.$padding=f},u.prototype.setSession=function(f){this.session=f},u.prototype.setMarkers=function(f){this.markers=f},u.prototype.elt=function(f,c){var d=this.i!=-1&&this.element.childNodes[this.i];d?this.i++:(d=document.createElement("div"),this.element.appendChild(d),this.i=-1),d.style.cssText=c,d.className=f},u.prototype.update=function(f){if(f){this.config=f,this.i=0;var c;for(var d in this.markers){var p=this.markers[d];if(!p.range){p.update(c,this,this.session,f);continue}var h=p.range.clipRows(f.firstRow,f.lastRow);if(!h.isEmpty())if(h=h.toScreenRange(this.session),p.renderer){var g=this.$getTop(h.start.row,f),m=this.$padding+h.start.column*f.characterWidth;p.renderer(c,h,m,g,f)}else p.type=="fullLine"?this.drawFullLineMarker(c,h,p.clazz,f):p.type=="screenLine"?this.drawScreenLineMarker(c,h,p.clazz,f):h.isMultiLine()?p.type=="text"?this.drawTextMarker(c,h,p.clazz,f):this.drawMultiLineMarker(c,h,p.clazz,f):this.drawSingleLineMarker(c,h,p.clazz+" ace_start ace_br15",f)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(f,c){return(f-c.firstRowScreen)*c.lineHeight},u.prototype.drawTextMarker=function(f,c,d,p,h){for(var g=this.session,m=c.start.row,y=c.end.row,v=m,x=0,_=0,E=g.getScreenLastRowColumn(v),C=new o(v,c.start.column,v,_);v<=y;v++)C.start.row=C.end.row=v,C.start.column=v==m?c.start.column:g.getRowWrapIndent(v),C.end.column=E,x=_,_=E,E=v+1<y?g.getScreenLastRowColumn(v+1):v==y?0:c.end.column,this.drawSingleLineMarker(f,C,d+(v==m?" ace_start":"")+" ace_br"+l(v==m||v==m+1&&c.start.column,x<_,_>E,v==y),p,v==y?0:1,h)},u.prototype.drawMultiLineMarker=function(f,c,d,p,h){var g=this.$padding,m=p.lineHeight,y=this.$getTop(c.start.row,p),v=g+c.start.column*p.characterWidth;if(h=h||"",this.session.$bidiHandler.isBidiRow(c.start.row)){var x=c.clone();x.end.row=x.start.row,x.end.column=this.session.getLine(x.start.row).length,this.drawBidiSingleLineMarker(f,x,d+" ace_br1 ace_start",p,null,h)}else this.elt(d+" ace_br1 ace_start","height:"+m+"px;right:"+g+"px;top:"+y+"px;left:"+v+"px;"+(h||""));if(this.session.$bidiHandler.isBidiRow(c.end.row)){var x=c.clone();x.start.row=x.end.row,x.start.column=0,this.drawBidiSingleLineMarker(f,x,d+" ace_br12",p,null,h)}else{y=this.$getTop(c.end.row,p);var _=c.end.column*p.characterWidth;this.elt(d+" ace_br12","height:"+m+"px;width:"+_+"px;top:"+y+"px;left:"+g+"px;"+(h||""))}if(m=(c.end.row-c.start.row-1)*p.lineHeight,!(m<=0)){y=this.$getTop(c.start.row+1,p);var E=(c.start.column?1:0)|(c.end.column?0:8);this.elt(d+(E?" ace_br"+E:""),"height:"+m+"px;right:"+g+"px;top:"+y+"px;left:"+g+"px;"+(h||""))}},u.prototype.drawSingleLineMarker=function(f,c,d,p,h,g){if(this.session.$bidiHandler.isBidiRow(c.start.row))return this.drawBidiSingleLineMarker(f,c,d,p,h,g);var m=p.lineHeight,y=(c.end.column+(h||0)-c.start.column)*p.characterWidth,v=this.$getTop(c.start.row,p),x=this.$padding+c.start.column*p.characterWidth;this.elt(d,"height:"+m+"px;width:"+y+"px;top:"+v+"px;left:"+x+"px;"+(g||""))},u.prototype.drawBidiSingleLineMarker=function(f,c,d,p,h,g){var m=p.lineHeight,y=this.$getTop(c.start.row,p),v=this.$padding,x=this.session.$bidiHandler.getSelections(c.start.column,c.end.column);x.forEach(function(_){this.elt(d,"height:"+m+"px;width:"+(_.width+(h||0))+"px;top:"+y+"px;left:"+(v+_.left)+"px;"+(g||""))},this)},u.prototype.drawFullLineMarker=function(f,c,d,p,h){var g=this.$getTop(c.start.row,p),m=p.lineHeight;c.start.row!=c.end.row&&(m+=this.$getTop(c.end.row,p)-g),this.elt(d,"height:"+m+"px;top:"+g+"px;left:0;right:0;"+(h||""))},u.prototype.drawScreenLineMarker=function(f,c,d,p,h){var g=this.$getTop(c.start.row,p),m=p.lineHeight;this.elt(d,"height:"+m+"px;top:"+g+"px;left:0;right:0;"+(h||""))},u}();a.prototype.$padding=0;function l(u,f,c,d){return(u?1:0)|(f?2:0)|(c?4:0)|(d?8:0)}r.Marker=a}),ace.define("ace/layer/text_util",["require","exports","module"],function(n,r,i){var o=new Set(["text","rparen","lparen"]);r.isTextToken=function(s){return o.has(s)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(n,r,i){var o=n("../lib/oop"),s=n("../lib/dom"),a=n("../lib/lang"),l=n("./lines").Lines,u=n("../lib/event_emitter").EventEmitter,f=n("../config").nls,c=n("./text_util").isTextToken,d=function(){function p(h){this.dom=s,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",h.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new l(this.element)}return p.prototype.$updateEolChar=function(){var h=this.session.doc,g=h.getNewLineCharacter()==`
`&&h.getNewLineMode()!="windows",m=g?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},p.prototype.setPadding=function(h){this.$padding=h,this.element.style.margin="0 "+h+"px"},p.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},p.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},p.prototype.$setFontMetrics=function(h){this.$fontMetrics=h,this.$fontMetrics.on("changeCharacterSize",(function(g){this._signal("changeCharacterSize",g)}).bind(this)),this.$pollSizeChanges()},p.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},p.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},p.prototype.setSession=function(h){this.session=h,h&&this.$computeTabString()},p.prototype.setShowInvisibles=function(h){return this.showInvisibles==h?!1:(this.showInvisibles=h,typeof h=="string"?(this.showSpaces=/tab/i.test(h),this.showTabs=/space/i.test(h),this.showEOL=/eol/i.test(h)):this.showSpaces=this.showTabs=this.showEOL=h,this.$computeTabString(),!0)},p.prototype.setDisplayIndentGuides=function(h){return this.displayIndentGuides==h?!1:(this.displayIndentGuides=h,this.$computeTabString(),!0)},p.prototype.setHighlightIndentGuides=function(h){return this.$highlightIndentGuides===h?!1:(this.$highlightIndentGuides=h,h)},p.prototype.$computeTabString=function(){var h=this.session.getTabSize();this.tabSize=h;for(var g=this.$tabStrings=[0],m=1;m<h+1;m++)if(this.showTabs){var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_tab",y.textContent=a.stringRepeat(this.TAB_CHAR,m),g.push(y)}else g.push(this.dom.createTextNode(a.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",x=this.showSpaces?" ace_invisible ace_invisible_space":"",_=this.showSpaces?a.stringRepeat(this.SPACE_CHAR,this.tabSize):a.stringRepeat(" ",this.tabSize),E=this.showTabs?" ace_invisible ace_invisible_tab":"",C=this.showTabs?a.stringRepeat(this.TAB_CHAR,this.tabSize):_,y=this.dom.createElement("span");y.className=v+x,y.textContent=_,this.$tabStrings[" "]=y;var y=this.dom.createElement("span");y.className=v+E,y.textContent=C,this.$tabStrings["	"]=y}},p.prototype.updateLines=function(h,g,m){if(this.config.lastRow!=h.lastRow||this.config.firstRow!=h.firstRow)return this.update(h);this.config=h;for(var y=Math.max(g,h.firstRow),v=Math.min(m,h.lastRow),x=this.element.childNodes,_=0,C=h.firstRow;C<y;C++){var w=this.session.getFoldLine(C);if(w)if(w.containsRow(y)){y=w.start.row;break}else C=w.end.row;_++}for(var E=!1,C=y,w=this.session.getNextFoldLine(C),T=w?w.start.row:1/0;C>T&&(C=w.end.row+1,w=this.session.getNextFoldLine(C,w),T=w?w.start.row:1/0),!(C>v);){var R=x[_++];if(R){this.dom.removeChildren(R),this.$renderLine(R,C,C==T?w:!1),E&&(R.style.top=this.$lines.computeLineTop(C,h,this.session)+"px");var L=h.lineHeight*this.session.getRowLength(C)+"px";R.style.height!=L&&(E=!0,R.style.height=L)}C++}if(E)for(;_<this.$lines.cells.length;){var B=this.$lines.cells[_++];B.element.style.top=this.$lines.computeLineTop(B.row,h,this.session)+"px"}},p.prototype.scrollLines=function(h){var g=this.config;if(this.config=h,this.$lines.pageChanged(g,h))return this.update(h);this.$lines.moveContainer(h);var m=h.lastRow,y=g?g.lastRow:-1;if(!g||y<h.firstRow)return this.update(h);if(m<g.firstRow)return this.update(h);if(!g||g.lastRow<h.firstRow)return this.update(h);if(h.lastRow<g.firstRow)return this.update(h);if(g.firstRow<h.firstRow)for(var v=this.session.getFoldedRowCount(g.firstRow,h.firstRow-1);v>0;v--)this.$lines.shift();if(g.lastRow>h.lastRow)for(var v=this.session.getFoldedRowCount(h.lastRow+1,g.lastRow);v>0;v--)this.$lines.pop();h.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLinesFragment(h,h.firstRow,g.firstRow-1)),h.lastRow>g.lastRow&&this.$lines.push(this.$renderLinesFragment(h,g.lastRow+1,h.lastRow)),this.$highlightIndentGuide()},p.prototype.$renderLinesFragment=function(h,g,m){for(var y=[],v=g,x=this.session.getNextFoldLine(v),_=x?x.start.row:1/0;v>_&&(v=x.end.row+1,x=this.session.getNextFoldLine(v,x),_=x?x.start.row:1/0),!(v>m);){var E=this.$lines.createCell(v,h,this.session),C=E.element;this.dom.removeChildren(C),s.setStyle(C.style,"height",this.$lines.computeLineHeight(v,h,this.session)+"px"),s.setStyle(C.style,"top",this.$lines.computeLineTop(v,h,this.session)+"px"),this.$renderLine(C,v,v==_?x:!1),this.$useLineGroups()?C.className="ace_line_group":C.className="ace_line",y.push(E),v++}return y},p.prototype.update=function(h){this.$lines.moveContainer(h),this.config=h;for(var g=h.firstRow,m=h.lastRow,y=this.$lines;y.getLength();)y.pop();y.push(this.$renderLinesFragment(h,g,m))},p.prototype.$renderToken=function(h,g,m,y){for(var v=this,x=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,_=this.dom.createFragment(this.element),E,C=0;E=x.exec(y);){var w=E[1],T=E[2],R=E[3],L=E[4],B=E[5];if(!(!v.showSpaces&&T)){var P=C!=E.index?y.slice(C,E.index):"";if(C=E.index+E[0].length,P&&_.appendChild(this.dom.createTextNode(P,this.element)),w){var S=v.session.getScreenTabSize(g+E.index);_.appendChild(v.$tabStrings[S].cloneNode(!0)),g+=S-1}else if(T)if(v.showSpaces){var k=this.dom.createElement("span");k.className="ace_invisible ace_invisible_space",k.textContent=a.stringRepeat(v.SPACE_CHAR,T.length),_.appendChild(k)}else _.appendChild(this.dom.createTextNode(T,this.element));else if(R){var k=this.dom.createElement("span");k.className="ace_invisible ace_invisible_space ace_invalid",k.textContent=a.stringRepeat(v.SPACE_CHAR,R.length),_.appendChild(k)}else if(L){g+=1;var k=this.dom.createElement("span");k.style.width=v.config.characterWidth*2+"px",k.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",k.textContent=v.showSpaces?v.SPACE_CHAR:L,_.appendChild(k)}else if(B){g+=1;var k=this.dom.createElement("span");k.style.width=v.config.characterWidth*2+"px",k.className="ace_cjk",k.textContent=B,_.appendChild(k)}}}if(_.appendChild(this.dom.createTextNode(C?y.slice(C):y,this.element)),c(m.type))h.appendChild(_);else{var D="ace_"+m.type.replace(/\./g," ace_"),k=this.dom.createElement("span");m.type=="fold"&&(k.style.width=m.value.length*this.config.characterWidth+"px",k.setAttribute("title",f("inline-fold.closed.title","Unfold code"))),k.className=D,k.appendChild(_),h.appendChild(k)}return g+y.length},p.prototype.renderIndentGuide=function(h,g,m){var y=g.search(this.$indentGuideRe);if(y<=0||y>=m)return g;if(g[0]==" "){y-=y%this.tabSize;for(var v=y/this.tabSize,x=0;x<v;x++)h.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(y)}else if(g[0]=="	"){for(var x=0;x<y;x++)h.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(y)}return this.$highlightIndentGuide(),g},p.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var h=this.session.doc.$lines;if(h){var g=this.session.selection.getCursor(),m=/^\s*/.exec(this.session.doc.getLine(g.row))[0].length,y=Math.floor(m/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:y,start:g.row};var v=this.session.$bracketHighlight;if(v){for(var x=this.session.$bracketHighlight.ranges,_=0;_<x.length;_++)if(g.row!==x[_].start.row){this.$highlightIndentGuideMarker.end=x[_].start.row+1,g.row>x[_].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&h[g.row]!==""&&g.column===h[g.row].length){this.$highlightIndentGuideMarker.dir=1;for(var _=g.row+1;_<h.length;_++){var E=h[_],C=/^\s*/.exec(E)[0].length;if(E!==""&&(this.$highlightIndentGuideMarker.end=_,C<=m))break}}this.$renderHighlightIndentGuide()}}},p.prototype.$clearActiveIndentGuide=function(){for(var h=this.element.querySelectorAll(".ace_indent-guide-active"),g=0;g<h.length;g++)h[g].classList.remove("ace_indent-guide-active")},p.prototype.$setIndentGuideActive=function(h,g){var m=this.session.doc.getLine(h.row);if(m!==""){var y=h.element;if(h.element.classList&&h.element.classList.contains("ace_line_group"))if(h.element.childNodes.length>0)y=h.element.childNodes[0];else return;var v=y.childNodes;if(v){var x=v[g-1];x&&x.classList&&x.classList.contains("ace_indent-guide")&&x.classList.add("ace_indent-guide-active")}}},p.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var h=this.$lines.cells;this.$clearActiveIndentGuide();var g=this.$highlightIndentGuideMarker.indentLevel;if(g!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var m=0;m<h.length;m++){var y=h[m];if(this.$highlightIndentGuideMarker.end&&y.row>=this.$highlightIndentGuideMarker.start+1){if(y.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,g)}}else for(var m=h.length-1;m>=0;m--){var y=h[m];if(this.$highlightIndentGuideMarker.end&&y.row<this.$highlightIndentGuideMarker.start){if(y.row<this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,g)}}}},p.prototype.$createLineElement=function(h){var g=this.dom.createElement("div");return g.className="ace_line",g.style.height=this.config.lineHeight+"px",g},p.prototype.$renderWrappedLine=function(h,g,m){var y=0,v=0,x=m[0],_=0,E=this.$createLineElement();h.appendChild(E);for(var C=0;C<g.length;C++){var w=g[C],T=w.value;if(C==0&&this.displayIndentGuides){if(y=T.length,T=this.renderIndentGuide(E,T,x),!T)continue;y-=T.length}if(y+T.length<x)_=this.$renderToken(E,_,w,T),y+=T.length;else{for(;y+T.length>=x;)_=this.$renderToken(E,_,w,T.substring(0,x-y)),T=T.substring(x-y),y=x,E=this.$createLineElement(),h.appendChild(E),E.appendChild(this.dom.createTextNode(a.stringRepeat("",m.indent),this.element)),v++,_=0,x=m[v]||Number.MAX_VALUE;T.length!=0&&(y+=T.length,_=this.$renderToken(E,_,w,T))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(E,_,null,"",!0)},p.prototype.$renderSimpleLine=function(h,g){for(var m=0,y=0;y<g.length;y++){var v=g[y],x=v.value;if(!(y==0&&this.displayIndentGuides&&(x=this.renderIndentGuide(h,x),!x))){if(m+x.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(h,m,v,x);m=this.$renderToken(h,m,v,x)}}},p.prototype.$renderOverflowMessage=function(h,g,m,y,v){m&&this.$renderToken(h,g,m,y.slice(0,this.MAX_LINE_LENGTH-g));var x=this.dom.createElement("span");x.className="ace_inline_button ace_keyword ace_toggle_wrap",x.textContent=v?"<hide>":"<click to see more...>",h.appendChild(x)},p.prototype.$renderLine=function(h,g,m){if(!m&&m!=!1&&(m=this.session.getFoldLine(g)),m)var y=this.$getFoldLineTokens(g,m);else var y=this.session.getTokens(g);var v=h;if(y.length){var x=this.session.getRowSplitData(g);if(x&&x.length){this.$renderWrappedLine(h,y,x);var v=h.lastChild}else{var v=h;this.$useLineGroups()&&(v=this.$createLineElement(),h.appendChild(v)),this.$renderSimpleLine(v,y)}}else this.$useLineGroups()&&(v=this.$createLineElement(),h.appendChild(v));if(this.showEOL&&v){m&&(g=m.end.row);var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_eol",_.textContent=g==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(_)}},p.prototype.$getFoldLineTokens=function(h,g){var m=this.session,y=[];function v(_,E,C){for(var w=0,T=0;T+_[w].value.length<E;)if(T+=_[w].value.length,w++,w==_.length)return;if(T!=E){var R=_[w].value.substring(E-T);R.length>C-E&&(R=R.substring(0,C-E)),y.push({type:_[w].type,value:R}),T=E+R.length,w+=1}for(;T<C&&w<_.length;){var R=_[w].value;R.length+T>C?y.push({type:_[w].type,value:R.substring(0,C-T)}):y.push(_[w]),T+=R.length,w+=1}}var x=m.getTokens(h);return g.walk(function(_,E,C,w,T){_!=null?y.push({type:"fold",value:_}):(T&&(x=m.getTokens(E)),x.length&&v(x,w,C))},g.end.row,this.session.getLine(g.end.row).length),y},p.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},p}();d.prototype.EOF_CHAR="",d.prototype.EOL_CHAR_LF="",d.prototype.EOL_CHAR_CRLF="",d.prototype.EOL_CHAR=d.prototype.EOL_CHAR_LF,d.prototype.TAB_CHAR="",d.prototype.SPACE_CHAR="",d.prototype.$padding=0,d.prototype.MAX_LINE_LENGTH=1e4,d.prototype.showInvisibles=!1,d.prototype.showSpaces=!1,d.prototype.showTabs=!1,d.prototype.showEOL=!1,d.prototype.displayIndentGuides=!0,d.prototype.$highlightIndentGuides=!0,d.prototype.$tabStrings=[],d.prototype.destroy={},d.prototype.onChangeTabSize=d.prototype.$computeTabString,o.implement(d.prototype,u),r.Text=d}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(n,r,i){var o=n("../lib/dom"),s=function(){function a(l){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",l.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return a.prototype.$updateOpacity=function(l){for(var u=this.cursors,f=u.length;f--;)o.setStyle(u[f].style,"opacity",l?"":"0")},a.prototype.$startCssAnimation=function(){for(var l=this.cursors,u=l.length;u--;)l[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&o.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},a.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,o.removeCssClass(this.element,"ace_animate-blinking")},a.prototype.setPadding=function(l){this.$padding=l},a.prototype.setSession=function(l){this.session=l},a.prototype.setBlinking=function(l){l!=this.isBlinking&&(this.isBlinking=l,this.restartTimer())},a.prototype.setBlinkInterval=function(l){l!=this.blinkInterval&&(this.blinkInterval=l,this.restartTimer())},a.prototype.setSmoothBlinking=function(l){l!=this.smoothBlinking&&(this.smoothBlinking=l,o.setCssClass(this.element,"ace_smooth-blinking",l),this.$updateCursors(!0),this.restartTimer())},a.prototype.addCursor=function(){var l=o.createElement("div");return l.className="ace_cursor",this.element.appendChild(l),this.cursors.push(l),l},a.prototype.removeCursor=function(){if(this.cursors.length>1){var l=this.cursors.pop();return l.parentNode.removeChild(l),l}},a.prototype.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.restartTimer=function(){var l=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,o.removeCssClass(this.element,"ace_smooth-blinking")),l(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&o.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),o.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=(function(){this.timeoutId=setTimeout(function(){l(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){l(!0),u()},this.blinkInterval),u()}},a.prototype.getPixelPosition=function(l,u){if(!this.config||!this.session)return{left:0,top:0};l||(l=this.session.selection.getCursor());var f=this.session.documentToScreenPosition(l),c=this.$padding+(this.session.$bidiHandler.isBidiRow(f.row,l.row)?this.session.$bidiHandler.getPosLeft(f.column):f.column*this.config.characterWidth),d=(f.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:c,top:d}},a.prototype.isCursorInView=function(l,u){return l.top>=0&&l.top<u.maxHeight},a.prototype.update=function(l){this.config=l;var u=this.session.$selectionMarkers,f=0,c=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var f=0,d=u.length;f<d;f++){var p=this.getPixelPosition(u[f].cursor,!0);if(!((p.top>l.height+l.offset||p.top<0)&&f>1)){var h=this.cursors[c++]||this.addCursor(),g=h.style;this.drawCursor?this.drawCursor(h,p,l,u[f],this.session):this.isCursorInView(p,l)?(o.setStyle(g,"display","block"),o.translate(h,p.left,p.top),o.setStyle(g,"width",Math.round(l.characterWidth)+"px"),o.setStyle(g,"height",l.lineHeight+"px")):o.setStyle(g,"display","none")}}for(;this.cursors.length>c;)this.removeCursor();var m=this.session.getOverwrite();this.$setOverwrite(m),this.$pixelPos=p,this.restartTimer()},a.prototype.$setOverwrite=function(l){l!=this.overwrite&&(this.overwrite=l,l?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},a.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},a}();s.prototype.$padding=0,s.prototype.drawCursor=null,r.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,r,i){var o=this&&this.__extends||function(){var h=function(g,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(y[x]=v[x])},h(g,m)};return function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}(),s=n("./lib/oop"),a=n("./lib/dom"),l=n("./lib/event"),u=n("./lib/event_emitter").EventEmitter,f=32768,c=function(){function h(g,m){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+m,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),g.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)}return h.prototype.setVisible=function(g){this.element.style.display=g?"":"none",this.isVisible=g,this.coeff=1},h}();s.implement(c.prototype,u);var d=function(h){o(g,h);function g(m,y){var v=h.call(this,m,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,y.$scrollbarWidth=v.width=a.scrollbarWidth(m.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return g.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},g.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},g.prototype.setHeight=function(m){this.element.style.height=m+"px"},g.prototype.setScrollHeight=function(m){this.scrollHeight=m,m>f?(this.coeff=f/m,m=f):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},g.prototype.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)},g}(c);d.prototype.setInnerHeight=d.prototype.setScrollHeight;var p=function(h){o(g,h);function g(m,y){var v=h.call(this,m,"-h")||this;return v.scrollLeft=0,v.height=y.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return g.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},g.prototype.getHeight=function(){return this.isVisible?this.height:0},g.prototype.setWidth=function(m){this.element.style.width=m+"px"},g.prototype.setInnerWidth=function(m){this.inner.style.width=m+"px"},g.prototype.setScrollWidth=function(m){this.inner.style.width=m+"px"},g.prototype.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)},g}(c);r.ScrollBar=d,r.ScrollBarV=d,r.ScrollBarH=p,r.VScrollBar=d,r.HScrollBar=p}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,r,i){var o=this&&this.__extends||function(){var p=function(h,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(m[v]=y[v])},p(h,g)};return function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(h,g);function m(){this.constructor=h}h.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),s=n("./lib/oop"),a=n("./lib/dom"),l=n("./lib/event"),u=n("./lib/event_emitter").EventEmitter;a.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var f=function(){function p(h,g){this.element=a.createElement("div"),this.element.className="ace_sb"+g,this.inner=a.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return p.prototype.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1},p}();s.implement(f.prototype,u);var c=function(p){o(h,p);function h(g,m){var y=p.call(this,g,"-v")||this;return y.scrollTop=0,y.scrollHeight=0,y.parent=g,y.width=y.VScrollWidth,y.renderer=m,y.inner.style.width=y.element.style.width=(y.width||15)+"px",y.$minWidth=0,y}return h.prototype.onMouseDown=function(g,m){if(g==="mousedown"&&!(l.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var y=this,v=m.clientY,x=function(L){v=L.clientY},_=function(){clearInterval(T)},E=m.clientY,C=this.thumbTop,w=function(){if(v!==void 0){var L=y.scrollTopFromThumbTop(C+v-E);L!==y.scrollTop&&y._emit("scroll",{data:L})}};l.capture(this.inner,x,_);var T=setInterval(w,20);return l.preventDefault(m)}var R=m.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(R)}),l.preventDefault(m)}},h.prototype.getHeight=function(){return this.height},h.prototype.scrollTopFromThumbTop=function(g){var m=g*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return m=m>>0,m<0?m=0:m>this.pageHeight-this.viewHeight&&(m=this.pageHeight-this.viewHeight),m},h.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},h.prototype.setHeight=function(g){this.height=Math.max(0,g),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},h.prototype.setScrollHeight=function(g,m){this.pageHeight===g&&!m||(this.pageHeight=g,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},h.prototype.setScrollTop=function(g){this.scrollTop=g,g<0&&(g=0),this.thumbTop=g*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},h}(f);c.prototype.setInnerHeight=c.prototype.setScrollHeight;var d=function(p){o(h,p);function h(g,m){var y=p.call(this,g,"-h")||this;return y.scrollLeft=0,y.scrollWidth=0,y.height=y.HScrollHeight,y.inner.style.height=y.element.style.height=(y.height||12)+"px",y.renderer=m,y}return h.prototype.onMouseDown=function(g,m){if(g==="mousedown"&&!(l.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var y=this,v=m.clientX,x=function(L){v=L.clientX},_=function(){clearInterval(T)},E=m.clientX,C=this.thumbLeft,w=function(){if(v!==void 0){var L=y.scrollLeftFromThumbLeft(C+v-E);L!==y.scrollLeft&&y._emit("scroll",{data:L})}};l.capture(this.inner,x,_);var T=setInterval(w,20);return l.preventDefault(m)}var R=m.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(R)}),l.preventDefault(m)}},h.prototype.getHeight=function(){return this.isVisible?this.height:0},h.prototype.scrollLeftFromThumbLeft=function(g){var m=g*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return m=m>>0,m<0?m=0:m>this.pageWidth-this.viewWidth&&(m=this.pageWidth-this.viewWidth),m},h.prototype.setWidth=function(g){this.width=Math.max(0,g),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},h.prototype.setScrollWidth=function(g,m){this.pageWidth===g&&!m||(this.pageWidth=g,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},h.prototype.setScrollLeft=function(g){this.scrollLeft=g,g<0&&(g=0),this.thumbLeft=g*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},h}(f);d.prototype.setInnerWidth=d.prototype.setScrollWidth,r.ScrollBar=c,r.ScrollBarV=c,r.ScrollBarH=d,r.VScrollBar=c,r.HScrollBar=d}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(n,r,i){var o=n("./lib/event"),s=function(){function a(l,u){this.onRender=l,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var f=this;this._flush=function(c){f.pending=!1;var d=f.changes;if(d&&(o.blockIdle(100),f.changes=0,f.onRender(d)),f.changes){if(f.$recursionLimit--<0)return;f.schedule()}else f.$recursionLimit=2}}return a.prototype.schedule=function(l){this.changes=this.changes|l,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},a.prototype.clear=function(l){var u=this.changes;return this.changes=0,u},a}();r.RenderLoop=s}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(n,r,i){var o=n("../lib/oop"),s=n("../lib/dom"),a=n("../lib/lang"),l=n("../lib/event"),u=n("../lib/useragent"),f=n("../lib/event_emitter").EventEmitter,c=512,d=typeof ResizeObserver=="function",p=200,h=function(){function g(m){this.el=s.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=s.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=s.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),m.appendChild(this.el),this.$measureNode.textContent=a.stringRepeat("X",c),this.$characterSize={width:0,height:0},d?this.$addObserver():this.checkForSizeChanges()}return g.prototype.$setMeasureNodeStyles=function(m,y){m.width=m.height="auto",m.left=m.top="0px",m.visibility="hidden",m.position="absolute",m.whiteSpace="pre",u.isIE<8?m["font-family"]="inherit":m.font="inherit",m.overflow=y?"hidden":"visible"},g.prototype.checkForSizeChanges=function(m){if(m===void 0&&(m=this.$measureSizes()),m&&(this.$characterSize.width!==m.width||this.$characterSize.height!==m.height)){this.$measureNode.style.fontWeight="bold";var y=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=m,this.charSizes=Object.create(null),this.allowBoldFonts=y&&y.width===m.width&&y.height===m.height,this._emit("changeCharacterSize",{data:m})}},g.prototype.$addObserver=function(){var m=this;this.$observer=new window.ResizeObserver(function(y){m.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},g.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var m=this;return this.$pollSizeChangesTimer=l.onIdle(function y(){m.checkForSizeChanges(),l.onIdle(y,500)},500)},g.prototype.setPolling=function(m){m?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},g.prototype.$measureSizes=function(m){var y={height:(m||this.$measureNode).clientHeight,width:(m||this.$measureNode).clientWidth/c};return y.width===0||y.height===0?null:y},g.prototype.$measureCharWidth=function(m){this.$main.textContent=a.stringRepeat(m,c);var y=this.$main.getBoundingClientRect();return y.width/c},g.prototype.getCharacterWidth=function(m){var y=this.charSizes[m];return y===void 0&&(y=this.charSizes[m]=this.$measureCharWidth(m)/this.$characterSize.width),y},g.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},g.prototype.$getZoom=function(m){return!m||!m.parentElement?1:(Number(window.getComputedStyle(m).zoom)||1)*this.$getZoom(m.parentElement)},g.prototype.$initTransformMeasureNodes=function(){var m=function(y,v){return["div",{style:"position: absolute;top:"+y+"px;left:"+v+"px;"}]};this.els=s.buildDom([m(0,0),m(p,0),m(0,p),m(p,p)],this.el)},g.prototype.transformCoordinates=function(m,y){if(m){var v=this.$getZoom(this.el);m=C(1/v,m)}function x(W,Q,ee){var H=W[1]*Q[0]-W[0]*Q[1];return[(-Q[1]*ee[0]+Q[0]*ee[1])/H,(+W[1]*ee[0]-W[0]*ee[1])/H]}function _(W,Q){return[W[0]-Q[0],W[1]-Q[1]]}function E(W,Q){return[W[0]+Q[0],W[1]+Q[1]]}function C(W,Q){return[W*Q[0],W*Q[1]]}this.els||this.$initTransformMeasureNodes();function w(W){var Q=W.getBoundingClientRect();return[Q.left,Q.top]}var T=w(this.els[0]),R=w(this.els[1]),L=w(this.els[2]),B=w(this.els[3]),P=x(_(B,R),_(B,L),_(E(R,L),E(B,T))),S=C(1+P[0],_(R,T)),k=C(1+P[1],_(L,T));if(y){var D=y,O=P[0]*D[0]/p+P[1]*D[1]/p+1,N=E(C(D[0],S),C(D[1],k));return E(C(1/O/p,N),T)}var j=_(m,T),q=x(_(S,C(P[0],j)),_(k,C(P[1],j)),j);return C(p,q)},g}();h.prototype.$characterSize={width:0,height:0},o.implement(h.prototype,f),r.FontMetrics=h}),ace.define("ace/css/editor-css",["require","exports","module"],function(n,r,i){i.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}
.ace_invisible {
    font-variant-ligatures: none;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(33em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget, .ace_custom-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_custom-widget {
    background: none;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(n,r,i){var o=n("../lib/dom"),s=n("../lib/oop"),a=n("../lib/event_emitter").EventEmitter,l=function(){function u(f,c){this.parentEl=f,this.canvas=o.createElement("canvas"),this.renderer=c,this.pixelRatio=1,this.maxHeight=c.layerConfig.maxHeight,this.lineHeight=c.layerConfig.lineHeight,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},this.setDimensions(),f.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(f){var c=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;this.setDimensions(f);var d=this.canvas.getContext("2d");function p(R,L){return R.priority<L.priority?-1:R.priority>L.priority?1:0}var h=this.renderer.session.$annotations;if(d.clearRect(0,0,this.canvas.width,this.canvas.height),h){var g={info:1,warning:2,error:3};h.forEach(function(R){R.priority=g[R.type]||null}),h=h.sort(p);for(var m=0;m<h.length;m++){var y=h[m].row,v=this.compensateFoldRows(y),x=Math.round((y-v)*this.lineHeight*this.heightRatio),_=Math.round((y-v)*this.lineHeight*this.heightRatio),E=Math.round(((y-v)*this.lineHeight+this.lineHeight)*this.heightRatio),C=E-_;if(C<this.minDecorationHeight){var w=(_+E)/2|0;w<this.halfMinDecorationHeight?w=this.halfMinDecorationHeight:w+this.halfMinDecorationHeight>this.canvasHeight&&(w=this.canvasHeight-this.halfMinDecorationHeight),_=Math.round(w-this.halfMinDecorationHeight),E=Math.round(w+this.halfMinDecorationHeight)}d.fillStyle=c[h[m].type]||null,d.fillRect(0,x,this.canvasWidth,E-_)}}var T=this.renderer.session.selection.getCursor();if(T){var v=this.compensateFoldRows(T.row),x=Math.round((T.row-v)*this.lineHeight*this.heightRatio);d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(0,x,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(f){var c=this.renderer.session.$foldData,d=0;if(c&&c.length>0)for(var p=0;p<c.length;p++)f>c[p].start.row&&f<c[p].end.row?d+=f-c[p].start.row:f>=c[p].end.row&&(d+=c[p].end.row-c[p].start.row);return d},u.prototype.compensateLineWidgets=function(f){var c=this.renderer.session.widgetManager;if(c){var d=0;return c.lineWidgets.forEach(function(p,h){f>h&&(d+=p.rowCount||0)}),d-1}return 0},u.prototype.setDimensions=function(f){f?(this.maxHeight=f.maxHeight,this.lineHeight=f.lineHeight,this.canvasHeight=f.height,this.maxHeight<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight):(this.canvasHeight=this.parentEl.parent.scrollHeight||this.canvasHeight,this.canvasWidth=this.parentEl.width||this.canvasWidth,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight)},u}();s.implement(l.prototype,a),r.Decorator=l}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(n,r,i){var o=n("./lib/oop"),s=n("./lib/dom"),a=n("./lib/lang"),l=n("./config"),u=n("./layer/gutter").Gutter,f=n("./layer/marker").Marker,c=n("./layer/text").Text,d=n("./layer/cursor").Cursor,p=n("./scrollbar").HScrollBar,h=n("./scrollbar").VScrollBar,g=n("./scrollbar_custom").HScrollBar,m=n("./scrollbar_custom").VScrollBar,y=n("./renderloop").RenderLoop,v=n("./layer/font_metrics").FontMetrics,x=n("./lib/event_emitter").EventEmitter,_=n("./css/editor-css"),E=n("./layer/decorators").Decorator,C=n("./lib/useragent"),w=n("./layer/text_util").isTextToken;s.importCssString(_,"ace_editor.css",!1);var T=function(){function R(L,B){var P=this;this.container=L||s.createElement("div"),s.addCssClass(this.container,"ace_editor"),s.HI_DPI&&s.addCssClass(this.container,"ace_hidpi"),this.setTheme(B),l.get("useStrictCSP")==null&&l.set("useStrictCSP",!1),this.$gutter=s.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=s.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=s.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new f(this.content);var S=this.$textLayer=new c(this.content);this.canvas=S.element,this.$markerFront=new f(this.content),this.$cursorLayer=new d(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.on("scroll",function(k){P.$scrollAnimation||P.session.setScrollTop(k.data-P.scrollMargin.top)}),this.scrollBarH.on("scroll",function(k){P.$scrollAnimation||P.session.setScrollLeft(k.data-P.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(k){P.updateCharacterSize(),P.onResize(!0,P.gutterWidth,P.$size.width,P.$size.height),P._signal("changeCharacterSize",k)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!C.isIOS,this.$loop=new y(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),l.resetOptions(this),l._signal("renderer",this)}return R.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),s.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},R.prototype.setSession=function(L){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=L,L&&this.scrollMargin.top&&L.getScrollTop()<=0&&L.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(L),this.$markerBack.setSession(L),this.$markerFront.setSession(L),this.$gutterLayer.setSession(L),this.$textLayer.setSession(L),L&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},R.prototype.updateLines=function(L,B,P){if(B===void 0&&(B=1/0),this.$changedLines?(this.$changedLines.firstRow>L&&(this.$changedLines.firstRow=L),this.$changedLines.lastRow<B&&(this.$changedLines.lastRow=B)):this.$changedLines={firstRow:L,lastRow:B},this.$changedLines.lastRow<this.layerConfig.firstRow)if(P)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},R.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},R.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},R.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},R.prototype.updateFull=function(L){L?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},R.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},R.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},R.prototype.onResize=function(L,B,P,S){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=L?1:0;var k=this.container;S||(S=k.clientHeight||k.scrollHeight),!S&&this.$maxLines&&this.lineHeight>1&&(!k.style.height||k.style.height=="0px")&&(k.style.height="1px",S=k.clientHeight||k.scrollHeight),P||(P=k.clientWidth||k.scrollWidth);var D=this.$updateCachedSize(L,B,P,S);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!P&&!S)return this.resizing=0;L&&(this.$gutterLayer.$padding=null),L?this.$renderChanges(D|this.$changes,!0):this.$loop.schedule(D|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},R.prototype.$updateCachedSize=function(L,B,P,S){S-=this.$extraHeight||0;var k=0,D=this.$size,O={width:D.width,height:D.height,scrollerHeight:D.scrollerHeight,scrollerWidth:D.scrollerWidth};if(S&&(L||D.height!=S)&&(D.height=S,k|=this.CHANGE_SIZE,D.scrollerHeight=D.height,this.$horizScroll&&(D.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(D.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",k=k|this.CHANGE_SCROLL),P&&(L||D.width!=P)){k|=this.CHANGE_SIZE,D.width=P,B==null&&(B=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=B,s.setStyle(this.scrollBarH.element.style,"left",B+"px"),s.setStyle(this.scroller.style,"left",B+this.margin.left+"px"),D.scrollerWidth=Math.max(0,P-B-this.scrollBarV.getWidth()-this.margin.h),s.setStyle(this.$gutter.style,"left",this.margin.left+"px");var N=this.scrollBarV.getWidth()+"px";s.setStyle(this.scrollBarH.element.style,"right",N),s.setStyle(this.scroller.style,"right",N),s.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(D.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||L)&&(k|=this.CHANGE_FULL)}return D.$dirty=!P||!S,k&&this._signal("resize",O),k},R.prototype.onGutterResize=function(L){var B=this.$showGutter?L:0;B!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,B,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},R.prototype.adjustWrapLimit=function(){var L=this.$size.scrollerWidth-this.$padding*2,B=Math.floor(L/this.characterWidth);return this.session.adjustWrapLimit(B,this.$showPrintMargin&&this.$printMarginColumn)},R.prototype.setAnimatedScroll=function(L){this.setOption("animatedScroll",L)},R.prototype.getAnimatedScroll=function(){return this.$animatedScroll},R.prototype.setShowInvisibles=function(L){this.setOption("showInvisibles",L),this.session.$bidiHandler.setShowInvisibles(L)},R.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},R.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},R.prototype.setDisplayIndentGuides=function(L){this.setOption("displayIndentGuides",L)},R.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},R.prototype.setHighlightIndentGuides=function(L){this.setOption("highlightIndentGuides",L)},R.prototype.setShowPrintMargin=function(L){this.setOption("showPrintMargin",L)},R.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},R.prototype.setPrintMarginColumn=function(L){this.setOption("printMarginColumn",L)},R.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},R.prototype.getShowGutter=function(){return this.getOption("showGutter")},R.prototype.setShowGutter=function(L){return this.setOption("showGutter",L)},R.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},R.prototype.setFadeFoldWidgets=function(L){this.setOption("fadeFoldWidgets",L)},R.prototype.setHighlightGutterLine=function(L){this.setOption("highlightGutterLine",L)},R.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},R.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var L=s.createElement("div");L.className="ace_layer ace_print-margin-layer",this.$printMarginEl=s.createElement("div"),this.$printMarginEl.className="ace_print-margin",L.appendChild(this.$printMarginEl),this.content.insertBefore(L,this.content.firstChild)}var B=this.$printMarginEl.style;B.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",B.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},R.prototype.getContainerElement=function(){return this.container},R.prototype.getMouseEventTarget=function(){return this.scroller},R.prototype.getTextAreaContainer=function(){return this.container},R.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var L=this.textarea.style,B=this.$composition;if(!this.$keepTextAreaAtCursor&&!B){s.translate(this.textarea,-100,0);return}var P=this.$cursorLayer.$pixelPos;if(P){B&&B.markerRange&&(P=this.$cursorLayer.getPixelPosition(B.markerRange.start,!0));var S=this.layerConfig,k=P.top,D=P.left;k-=S.offset;var O=B&&B.useTextareaForIME||C.isMobile?this.lineHeight:1;if(k<0||k>S.height-O){s.translate(this.textarea,0,0);return}var N=1,j=this.$size.height-O;if(!B)k+=this.lineHeight;else if(B.useTextareaForIME){var q=this.textarea.value;N=this.characterWidth*this.session.$getStringScreenWidth(q)[0]}else k+=this.lineHeight+2;D-=this.scrollLeft,D>this.$size.scrollerWidth-N&&(D=this.$size.scrollerWidth-N),D+=this.gutterWidth+this.margin.left,s.setStyle(L,"height",O+"px"),s.setStyle(L,"width",N+"px"),s.translate(this.textarea,Math.min(D,this.$size.scrollerWidth-N),Math.min(k,j))}}},R.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},R.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},R.prototype.getLastFullyVisibleRow=function(){var L=this.layerConfig,B=L.lastRow,P=this.session.documentToScreenRow(B,0)*L.lineHeight;return P-this.session.getScrollTop()>L.height-L.lineHeight?B-1:B},R.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},R.prototype.setPadding=function(L){this.$padding=L,this.$textLayer.setPadding(L),this.$cursorLayer.setPadding(L),this.$markerFront.setPadding(L),this.$markerBack.setPadding(L),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},R.prototype.setScrollMargin=function(L,B,P,S){var k=this.scrollMargin;k.top=L|0,k.bottom=B|0,k.right=S|0,k.left=P|0,k.v=k.top+k.bottom,k.h=k.left+k.right,k.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-k.top),this.updateFull()},R.prototype.setMargin=function(L,B,P,S){var k=this.margin;k.top=L|0,k.bottom=B|0,k.right=S|0,k.left=P|0,k.v=k.top+k.bottom,k.h=k.left+k.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},R.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},R.prototype.setHScrollBarAlwaysVisible=function(L){this.setOption("hScrollBarAlwaysVisible",L)},R.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},R.prototype.setVScrollBarAlwaysVisible=function(L){this.setOption("vScrollBarAlwaysVisible",L)},R.prototype.$updateScrollBarV=function(){var L=this.layerConfig.maxHeight,B=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(L-=(B-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>L-B&&(L=this.scrollTop+B,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(L+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},R.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},R.prototype.freeze=function(){this.$frozen=!0},R.prototype.unfreeze=function(){this.$frozen=!1},R.prototype.$renderChanges=function(L,B){if(this.$changes&&(L|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!L&&!B){this.$changes|=L;return}if(this.$size.$dirty)return this.$changes|=L,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",L),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var P=this.layerConfig;if(L&this.CHANGE_FULL||L&this.CHANGE_SIZE||L&this.CHANGE_TEXT||L&this.CHANGE_LINES||L&this.CHANGE_SCROLL||L&this.CHANGE_H_SCROLL){if(L|=this.$computeLayerConfig()|this.$loop.clear(),P.firstRow!=this.layerConfig.firstRow&&P.firstRowScreen==this.layerConfig.firstRowScreen){var S=this.scrollTop+(P.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;S>0&&(this.scrollTop=S,L=L|this.CHANGE_SCROLL,L|=this.$computeLayerConfig()|this.$loop.clear())}P=this.layerConfig,this.$updateScrollBarV(),L&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),s.translate(this.content,-this.scrollLeft,-P.offset);var k=P.width+2*this.$padding+"px",D=P.minHeight+"px";s.setStyle(this.content.style,"width",k),s.setStyle(this.content.style,"height",D)}if(L&this.CHANGE_H_SCROLL&&(s.translate(this.content,-this.scrollLeft,-P.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),L&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(P),this.$showGutter&&this.$gutterLayer.update(P),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P),this.$markerBack.update(P),this.$markerFront.update(P),this.$cursorLayer.update(P),this.$moveTextAreaToCursor(),this._signal("afterRender",L);return}if(L&this.CHANGE_SCROLL){this.$changedLines=null,L&this.CHANGE_TEXT||L&this.CHANGE_LINES?this.$textLayer.update(P):this.$textLayer.scrollLines(P),this.$showGutter&&(L&this.CHANGE_GUTTER||L&this.CHANGE_LINES?this.$gutterLayer.update(P):this.$gutterLayer.scrollLines(P)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P),this.$markerBack.update(P),this.$markerFront.update(P),this.$cursorLayer.update(P),this.$moveTextAreaToCursor(),this._signal("afterRender",L);return}L&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(P),this.$showGutter&&this.$gutterLayer.update(P),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P)):L&this.CHANGE_LINES?((this.$updateLines()||L&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(P),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P)):L&this.CHANGE_TEXT||L&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(P),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P)):L&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(P),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(P)),L&this.CHANGE_CURSOR&&(this.$cursorLayer.update(P),this.$moveTextAreaToCursor()),L&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(P),L&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(P),this._signal("afterRender",L)},R.prototype.$autosize=function(){var L=this.session.getScreenLength()*this.lineHeight,B=this.$maxLines*this.lineHeight,P=Math.min(B,Math.max((this.$minLines||1)*this.lineHeight,L))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(P+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&P>this.$maxPixelHeight&&(P=this.$maxPixelHeight);var S=P<=2*this.lineHeight,k=!S&&L>B;if(P!=this.desiredHeight||this.$size.height!=this.desiredHeight||k!=this.$vScroll){k!=this.$vScroll&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var D=this.container.clientWidth;this.container.style.height=P+"px",this.$updateCachedSize(!0,this.$gutterWidth,D,P),this.desiredHeight=P,this._signal("autosize")}},R.prototype.$computeLayerConfig=function(){var L=this.session,B=this.$size,P=B.height<=2*this.lineHeight,S=this.session.getScreenLength(),k=S*this.lineHeight,D=this.$getLongestLine(),O=!P&&(this.$hScrollBarAlwaysVisible||B.scrollerWidth-D-2*this.$padding<0),N=this.$horizScroll!==O;N&&(this.$horizScroll=O,this.scrollBarH.setVisible(O));var j=this.$vScroll;this.$maxLines&&this.lineHeight>1&&(this.$autosize(),P=B.height<=2*this.lineHeight);var q=B.scrollerHeight+this.lineHeight,W=!this.$maxLines&&this.$scrollPastEnd?(B.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;k+=W;var Q=this.scrollMargin;this.session.setScrollTop(Math.max(-Q.top,Math.min(this.scrollTop,k-B.scrollerHeight+Q.bottom))),this.session.setScrollLeft(Math.max(-Q.left,Math.min(this.scrollLeft,D+2*this.$padding-B.scrollerWidth+Q.right)));var ee=!P&&(this.$vScrollBarAlwaysVisible||B.scrollerHeight-k+W<0||this.scrollTop>Q.top),H=j!==ee;H&&(this.$vScroll=ee,this.scrollBarV.setVisible(ee));var se=this.scrollTop%this.lineHeight,ne=Math.ceil(q/this.lineHeight)-1,ge=Math.max(0,Math.round((this.scrollTop-se)/this.lineHeight)),we=ge+ne,$e,ve,Ee=this.lineHeight;ge=L.screenToDocumentRow(ge,0);var Ve=L.getFoldLine(ge);Ve&&(ge=Ve.start.row),$e=L.documentToScreenRow(ge,0),ve=L.getRowLength(ge)*Ee,we=Math.min(L.screenToDocumentRow(we,0),L.getLength()-1),q=B.scrollerHeight+L.getRowLength(we)*Ee+ve,se=this.scrollTop-$e*Ee;var Ue=0;return(this.layerConfig.width!=D||N)&&(Ue=this.CHANGE_H_SCROLL),(N||H)&&(Ue|=this.$updateCachedSize(!0,this.gutterWidth,B.width,B.height),this._signal("scrollbarVisibilityChanged"),H&&(D=this.$getLongestLine())),this.layerConfig={width:D,padding:this.$padding,firstRow:ge,firstRowScreen:$e,lastRow:we,lineHeight:Ee,characterWidth:this.characterWidth,minHeight:q,maxHeight:k,offset:se,gutterOffset:Ee?Math.max(0,Math.ceil((se+B.height-B.scrollerHeight)/Ee)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(D-this.$padding),Ue},R.prototype.$updateLines=function(){if(this.$changedLines){var L=this.$changedLines.firstRow,B=this.$changedLines.lastRow;this.$changedLines=null;var P=this.layerConfig;if(!(L>P.lastRow+1)&&!(B<P.firstRow)){if(B===1/0){this.$showGutter&&this.$gutterLayer.update(P),this.$textLayer.update(P);return}return this.$textLayer.updateLines(P,L,B),!0}}},R.prototype.$getLongestLine=function(){var L=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(L+=1),this.$textLayer&&L>this.$textLayer.MAX_LINE_LENGTH&&(L=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(L*this.characterWidth))},R.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},R.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},R.prototype.addGutterDecoration=function(L,B){this.$gutterLayer.addGutterDecoration(L,B)},R.prototype.removeGutterDecoration=function(L,B){this.$gutterLayer.removeGutterDecoration(L,B)},R.prototype.updateBreakpoints=function(L){this._rows=L,this.$loop.schedule(this.CHANGE_GUTTER)},R.prototype.setAnnotations=function(L){this.$gutterLayer.setAnnotations(L),this.$loop.schedule(this.CHANGE_GUTTER)},R.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},R.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},R.prototype.showCursor=function(){this.$cursorLayer.showCursor()},R.prototype.scrollSelectionIntoView=function(L,B,P){this.scrollCursorIntoView(L,P),this.scrollCursorIntoView(B,P)},R.prototype.scrollCursorIntoView=function(L,B,P){if(this.$size.scrollerHeight!==0){var S=this.$cursorLayer.getPixelPosition(L),k=S.left,D=S.top,O=P&&P.top||0,N=P&&P.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var j=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;j+O>D?(B&&j+O>D+this.lineHeight&&(D-=B*this.$size.scrollerHeight),D===0&&(D=-this.scrollMargin.top),this.session.setScrollTop(D)):j+this.$size.scrollerHeight-N<D+this.lineHeight&&(B&&j+this.$size.scrollerHeight-N<D-this.lineHeight&&(D+=B*this.$size.scrollerHeight),this.session.setScrollTop(D+this.lineHeight+N-this.$size.scrollerHeight));var q=this.scrollLeft,W=2*this.layerConfig.characterWidth;k-W<q?(k-=W,k<this.$padding+W&&(k=-this.scrollMargin.left),this.session.setScrollLeft(k)):(k+=W,q+this.$size.scrollerWidth<k+this.characterWidth?this.session.setScrollLeft(Math.round(k+this.characterWidth-this.$size.scrollerWidth)):q<=this.$padding&&k-q<this.characterWidth&&this.session.setScrollLeft(0))}},R.prototype.getScrollTop=function(){return this.session.getScrollTop()},R.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},R.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},R.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},R.prototype.scrollToRow=function(L){this.session.setScrollTop(L*this.lineHeight)},R.prototype.alignCursor=function(L,B){typeof L=="number"&&(L={row:L,column:0});var P=this.$cursorLayer.getPixelPosition(L),S=this.$size.scrollerHeight-this.lineHeight,k=P.top-S*(B||0);return this.session.setScrollTop(k),k},R.prototype.$calcSteps=function(L,B){var P=0,S=this.STEPS,k=[],D=function(O,N,j){return j*(Math.pow(O-1,3)+1)+N};for(P=0;P<S;++P)k.push(D(P/this.STEPS,L,B-L));return k},R.prototype.scrollToLine=function(L,B,P,S){var k=this.$cursorLayer.getPixelPosition({row:L,column:0}),D=k.top;B&&(D-=this.$size.scrollerHeight/2);var O=this.scrollTop;this.session.setScrollTop(D),P!==!1&&this.animateScrolling(O,S)},R.prototype.animateScrolling=function(L,B){var P=this.scrollTop;if(!this.$animatedScroll)return;var S=this;if(L==P)return;if(this.$scrollAnimation){var k=this.$scrollAnimation.steps;if(k.length&&(L=k[0],L==P))return}var D=S.$calcSteps(L,P);this.$scrollAnimation={from:L,to:P,steps:D},clearInterval(this.$timer),S.session.setScrollTop(D.shift()),S.session.$scrollTop=P;function O(){S.$timer=clearInterval(S.$timer),S.$scrollAnimation=null,S.$stopAnimation=!1,B&&B()}this.$timer=setInterval(function(){if(S.$stopAnimation){O();return}if(!S.session)return clearInterval(S.$timer);D.length?(S.session.setScrollTop(D.shift()),S.session.$scrollTop=P):P!=null?(S.session.$scrollTop=-1,S.session.setScrollTop(P),P=null):O()},10)},R.prototype.scrollToY=function(L){this.scrollTop!==L&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=L)},R.prototype.scrollToX=function(L){this.scrollLeft!==L&&(this.scrollLeft=L),this.$loop.schedule(this.CHANGE_H_SCROLL)},R.prototype.scrollTo=function(L,B){this.session.setScrollTop(B),this.session.setScrollLeft(L)},R.prototype.scrollBy=function(L,B){B&&this.session.setScrollTop(this.session.getScrollTop()+B),L&&this.session.setScrollLeft(this.session.getScrollLeft()+L)},R.prototype.isScrollableBy=function(L,B){if(B<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||B>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||L<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||L>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},R.prototype.pixelToScreenCoordinates=function(L,B){var P;if(this.$hasCssTransforms){P={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([L,B]);L=S[1]-this.gutterWidth-this.margin.left,B=S[0]}else P=this.scroller.getBoundingClientRect();var k=L+this.scrollLeft-P.left-this.$padding,D=k/this.characterWidth,O=Math.floor((B+this.scrollTop-P.top)/this.lineHeight),N=this.$blockCursor?Math.floor(D):Math.round(D);return{row:O,column:N,side:D-N>0?1:-1,offsetX:k}},R.prototype.screenToTextCoordinates=function(L,B){var P;if(this.$hasCssTransforms){P={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([L,B]);L=S[1]-this.gutterWidth-this.margin.left,B=S[0]}else P=this.scroller.getBoundingClientRect();var k=L+this.scrollLeft-P.left-this.$padding,D=k/this.characterWidth,O=this.$blockCursor?Math.floor(D):Math.round(D),N=Math.floor((B+this.scrollTop-P.top)/this.lineHeight);return this.session.screenToDocumentPosition(N,Math.max(O,0),k)},R.prototype.textToScreenCoordinates=function(L,B){var P=this.scroller.getBoundingClientRect(),S=this.session.documentToScreenPosition(L,B),k=this.$padding+(this.session.$bidiHandler.isBidiRow(S.row,L)?this.session.$bidiHandler.getPosLeft(S.column):Math.round(S.column*this.characterWidth)),D=S.row*this.lineHeight;return{pageX:P.left+k-this.scrollLeft,pageY:P.top+D-this.scrollTop}},R.prototype.visualizeFocus=function(){s.addCssClass(this.container,"ace_focus")},R.prototype.visualizeBlur=function(){s.removeCssClass(this.container,"ace_focus")},R.prototype.showComposition=function(L){this.$composition=L,L.cssText||(L.cssText=this.textarea.style.cssText),L.useTextareaForIME==null&&(L.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(s.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):L.markerId=this.session.addMarker(L.markerRange,"ace_composition_marker","text")},R.prototype.setCompositionText=function(L){var B=this.session.selection.cursor;this.addToken(L,"composition_placeholder",B.row,B.column),this.$moveTextAreaToCursor()},R.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),s.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var L=this.session.selection.cursor;this.removeExtraToken(L.row,L.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},R.prototype.setGhostText=function(L,B){var P=this.session.selection.cursor,S=B||{row:P.row,column:P.column};this.removeGhostText();var k=this.$calculateWrappedTextChunks(L,S);this.addToken(k[0].text,"ghost_text",S.row,S.column),this.$ghostText={text:L,position:{row:S.row,column:S.column}};var D=s.createElement("div");if(k.length>1){var O=this.hideTokensAfterPosition(S.row,S.column),N;k.slice(1).forEach(function(H){var se=s.createElement("div"),ne=s.createElement("span");ne.className="ace_ghost_text",H.wrapped&&(se.className="ghost_text_line_wrapped"),H.text.length===0&&(H.text=" "),ne.appendChild(s.createTextNode(H.text)),se.appendChild(ne),D.appendChild(se),N=se}),O.forEach(function(H){var se=s.createElement("span");w(H.type)||(se.className="ace_"+H.type.replace(/\./g," ace_")),se.appendChild(s.createTextNode(H.value)),N.appendChild(se)}),this.$ghostTextWidget={el:D,row:S.row,column:S.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var j=this.$cursorLayer.getPixelPosition(S,!0),q=this.container,W=q.getBoundingClientRect().height,Q=k.length*this.lineHeight,ee=Q<W-j.top;if(ee)return;Q<W?this.scrollBy(0,(k.length-1)*this.lineHeight):this.scrollToRow(S.row)}},R.prototype.$calculateWrappedTextChunks=function(L,B){var P=this.$size.scrollerWidth-this.$padding*2,S=Math.floor(P/this.characterWidth)-2;S=S<=0?60:S;for(var k=L.split(/\r?\n/),D=[],O=0;O<k.length;O++){var N=this.session.$getDisplayTokens(k[O],B.column),j=this.session.$computeWrapSplits(N,S,this.session.$tabSize);if(j.length>0){var q=0;j.push(k[O].length);for(var W=0;W<j.length;W++){var Q=k[O].slice(q,j[W]);D.push({text:Q,wrapped:!0}),q=j[W]}}else D.push({text:k[O],wrapped:!1})}return D},R.prototype.removeGhostText=function(){if(this.$ghostText){var L=this.$ghostText.position;this.removeExtraToken(L.row,L.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},R.prototype.addToken=function(L,B,P,S){var k=this.session;k.bgTokenizer.lines[P]=null;var D={type:B,value:L},O=k.getTokens(P);if(S==null||!O.length)O.push(D);else for(var N=0,j=0;j<O.length;j++){var q=O[j];if(N+=q.value.length,S<=N){var W=q.value.length-(N-S),Q=q.value.slice(0,W),ee=q.value.slice(W);O.splice(j,1,{type:q.type,value:Q},D,{type:q.type,value:ee});break}}this.updateLines(P,P)},R.prototype.hideTokensAfterPosition=function(L,B){for(var P=this.session.getTokens(L),S=0,k=!1,D=[],O=0;O<P.length;O++){var N=P[O];if(S+=N.value.length,N.type!=="ghost_text"){if(k){D.push({type:N.type,value:N.value}),N.type="hidden_token";continue}S===B&&(k=!0)}}return this.updateLines(L,L),D},R.prototype.removeExtraToken=function(L,B){this.session.bgTokenizer.lines[L]=null,this.updateLines(L,L)},R.prototype.setTheme=function(L,B){var P=this;if(this.$themeId=L,P._dispatchEvent("themeChange",{theme:L}),!L||typeof L=="string"){var S=L||this.$options.theme.initialValue;l.loadModule(["theme",S],k)}else k(L);function k(D){if(P.$themeId!=L)return B&&B();if(!D||!D.cssClass)throw new Error("couldn't load module "+L+" or it didn't call define");D.$id&&(P.$themeId=D.$id),s.importCssString(D.cssText,D.cssClass,P.container),P.theme&&s.removeCssClass(P.container,P.theme.cssClass);var O="padding"in D?D.padding:"padding"in(P.theme||{})?4:P.$padding;P.$padding&&O!=P.$padding&&P.setPadding(O),P.$theme=D.cssClass,P.theme=D,s.addCssClass(P.container,D.cssClass),s.setCssClass(P.container,"ace_dark",D.isDark),P.$size&&(P.$size.width=0,P.$updateSizeAsync()),P._dispatchEvent("themeLoaded",{theme:D}),B&&B(),C.isSafari&&P.scroller&&(P.scroller.style.background="red",P.scroller.style.background="")}},R.prototype.getTheme=function(){return this.$themeId},R.prototype.setStyle=function(L,B){s.setCssClass(this.container,L,B!==!1)},R.prototype.unsetStyle=function(L){s.removeCssClass(this.container,L)},R.prototype.setCursorStyle=function(L){s.setStyle(this.scroller.style,"cursor",L)},R.prototype.setMouseCursor=function(L){s.setStyle(this.scroller.style,"cursor",L)},R.prototype.attachToShadowRoot=function(){s.importCssString(_,"ace_editor.css",this.container)},R.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},R.prototype.$updateCustomScrollbar=function(L){var B=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,L===!0?(this.scrollBarV=new m(this.container,this),this.scrollBarH=new g(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(P){B.$scrollAnimation||B.session.setScrollTop(P.data-B.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(P){B.$scrollAnimation||B.session.setScrollLeft(P.data-B.scrollMargin.left)}),this.$scrollDecorator=new E(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new h(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.addEventListener("scroll",function(P){B.$scrollAnimation||B.session.setScrollTop(P.data-B.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(P){B.$scrollAnimation||B.session.setScrollLeft(P.data-B.scrollMargin.left)}))},R.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var L=this;this.$resizeTimer=a.delayedCall(function(){L.destroyed||L.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(B){var P=B[0].contentRect.width,S=B[0].contentRect.height;Math.abs(L.$size.width-P)>1||Math.abs(L.$size.height-S)>1?L.$resizeTimer.delay():L.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},R}();T.prototype.CHANGE_CURSOR=1,T.prototype.CHANGE_MARKER=2,T.prototype.CHANGE_GUTTER=4,T.prototype.CHANGE_SCROLL=8,T.prototype.CHANGE_LINES=16,T.prototype.CHANGE_TEXT=32,T.prototype.CHANGE_SIZE=64,T.prototype.CHANGE_MARKER_BACK=128,T.prototype.CHANGE_MARKER_FRONT=256,T.prototype.CHANGE_FULL=512,T.prototype.CHANGE_H_SCROLL=1024,T.prototype.$changes=0,T.prototype.$padding=null,T.prototype.$frozen=!1,T.prototype.STEPS=8,o.implement(T.prototype,x),l.defineOptions(T.prototype,"renderer",{useResizeObserver:{set:function(R){!R&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):R&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(R){this.$textLayer.setShowInvisibles(R)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(R){typeof R=="number"&&(this.$printMarginColumn=R),this.$showPrintMargin=!!R,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(R){this.$gutter.style.display=R?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(R){this.$gutterLayer.$useSvgGutterIcons=R},initialValue:!1},showFoldedAnnotations:{set:function(R){this.$gutterLayer.$showFoldedAnnotations=R},initialValue:!1},fadeFoldWidgets:{set:function(R){s.setCssClass(this.$gutter,"ace_fade-fold-widgets",R)},initialValue:!1},showFoldWidgets:{set:function(R){this.$gutterLayer.setShowFoldWidgets(R),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(R){this.$textLayer.setDisplayIndentGuides(R)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(R){this.$textLayer.setHighlightIndentGuides(R)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(R){this.$gutterLayer.setHighlightGutterLine(R),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(R){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(R){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(R){typeof R=="number"&&(R=R+"px"),this.container.style.fontSize=R,this.updateFontSize()},initialValue:12},fontFamily:{set:function(R){this.container.style.fontFamily=R,this.updateFontSize()}},maxLines:{set:function(R){this.updateFull()}},minLines:{set:function(R){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(R){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(R){R=+R||0,this.$scrollPastEnd!=R&&(this.$scrollPastEnd=R,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(R){this.$gutterLayer.$fixedWidth=!!R,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(R){this.$updateCustomScrollbar(R)},initialValue:!1},theme:{set:function(R){this.setTheme(R)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!C.isMobile&&!C.isIE}}),r.VirtualRenderer=T}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(n,r,i){var o=n("../lib/oop"),s=n("../lib/net"),a=n("../lib/event_emitter").EventEmitter,l=n("../config");function u(p){var h="importScripts('"+s.qualifyURL(p)+"');";try{return new Blob([h],{type:"application/javascript"})}catch{var g=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new g;return m.append(h),m.getBlob("application/javascript")}}function f(p){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(l.get("loadWorkerFromBlob")){var h=u(p),g=window.URL||window.webkitURL,m=g.createObjectURL(h);return new Worker(m)}return new Worker(p)}var c=function(p){p.postMessage||(p=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=p,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.$createWorkerFromOldConfig=function(p,h,g,m,y){if(n.nameToUrl&&!n.toUrl&&(n.toUrl=n.nameToUrl),l.get("packaged")||!n.toUrl)m=m||l.moduleUrl(h,"worker");else{var v=this.$normalizePath;m=m||v(n.toUrl("ace/worker/worker.js",null,"_"));var x={};p.forEach(function(_){x[_]=v(n.toUrl(_,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=f(m),y&&this.send("importScripts",y),this.$worker.postMessage({init:!0,tlns:x,module:h,classname:g}),this.$worker},this.onMessage=function(p){var h=p.data;switch(h.type){case"event":this._signal(h.name,{data:h.data});break;case"call":var g=this.callbacks[h.id];g&&(g(h.data),delete this.callbacks[h.id]);break;case"error":this.reportError(h.data);break;case"log":window.console&&console.log&&console.log.apply(console,h.data);break}},this.reportError=function(p){window.console&&console.error&&console.error(p)},this.$normalizePath=function(p){return s.qualifyURL(p)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(p){p.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(p,h){this.$worker.postMessage({command:p,args:h})},this.call=function(p,h,g){if(g){var m=this.callbackId++;this.callbacks[m]=g,h.push(m)}this.send(p,h)},this.emit=function(p,h){try{h.data&&h.data.err&&(h.data.err={message:h.data.err.message,stack:h.data.err.stack,code:h.data.err.code}),this.$worker&&this.$worker.postMessage({event:p,data:{data:h.data}})}catch(g){console.error(g.stack)}},this.attachToDocument=function(p){this.$doc&&this.terminate(),this.$doc=p,this.call("setValue",[p.getValue()]),p.on("change",this.changeListener,!0)},this.changeListener=function(p){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),p.action=="insert"?this.deltaQueue.push(p.start,p.lines):this.deltaQueue.push(p.start,p.end)},this.$sendDeltaQueue=function(){var p=this.deltaQueue;p&&(this.deltaQueue=null,p.length>50&&p.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:p}))}}).call(c.prototype);var d=function(p,h,g){var m=null,y=!1,v=Object.create(a),x=[],_=new c({messageBuffer:x,terminate:function(){},postMessage:function(C){x.push(C),m&&(y?setTimeout(E):E())}});_.setEmitSync=function(C){y=C};var E=function(){var C=x.shift();C.command?m[C.command].apply(m,C.args):C.event&&v._signal(C.event,C.data)};return v.postMessage=function(C){_.onMessage({data:C})},v.callback=function(C,w){this.postMessage({type:"call",id:w,data:C})},v.emit=function(C,w){this.postMessage({type:"event",name:C,data:w})},l.loadModule(["worker",h],function(C){for(m=new C[g](v);x.length;)E()}),_};r.UIWorkerClient=d,r.WorkerClient=c,r.createWorker=f}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(n,r,i){var o=n("./range").Range,s=n("./lib/event_emitter").EventEmitter,a=n("./lib/oop"),l=function(){function u(f,c,d,p,h,g){var m=this;this.length=c,this.session=f,this.doc=f.getDocument(),this.mainClass=h,this.othersClass=g,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=p,this.$onCursorChange=function(){setTimeout(function(){m.onCursorChange()})},this.$pos=d;var y=f.getUndoManager().$undoStack||f.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=y.length,this.setup(),f.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var f=this,c=this.doc,d=this.session;this.selectionBefore=d.selection.toJSON(),d.selection.inMultiSelectMode&&d.selection.toSingleRange(),this.pos=c.createAnchor(this.$pos.row,this.$pos.column);var p=this.pos;p.$insertRight=!0,p.detach(),p.markerId=d.addMarker(new o(p.row,p.column,p.row,p.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(h){var g=c.createAnchor(h.row,h.column);g.$insertRight=!0,g.detach(),f.others.push(g)}),d.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var f=this.session,c=this;this.othersActive=!0,this.others.forEach(function(d){d.markerId=f.addMarker(new o(d.row,d.column,d.row,d.column+c.length),c.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var f=0;f<this.others.length;f++)this.session.removeMarker(this.others[f].markerId)}},u.prototype.onUpdate=function(f){if(this.$updating)return this.updateAnchors(f);var c=f;if(c.start.row===c.end.row&&c.start.row===this.pos.row){this.$updating=!0;var d=f.action==="insert"?c.end.column-c.start.column:c.start.column-c.end.column,p=c.start.column>=this.pos.column&&c.start.column<=this.pos.column+this.length+1,h=c.start.column-this.pos.column;if(this.updateAnchors(f),p&&(this.length+=d),p&&!this.session.$fromUndo){if(f.action==="insert")for(var g=this.others.length-1;g>=0;g--){var m=this.others[g],y={row:m.row,column:m.column+h};this.doc.insertMergedLines(y,f.lines)}else if(f.action==="remove")for(var g=this.others.length-1;g>=0;g--){var m=this.others[g],y={row:m.row,column:m.column+h};this.doc.remove(new o(y.row,y.column,y.row,y.column-d))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(f){this.pos.onChange(f);for(var c=this.others.length;c--;)this.others[c].onChange(f);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var f=this,c=this.session,d=function(h,g){c.removeMarker(h.markerId),h.markerId=c.addMarker(new o(h.row,h.column,h.row,h.column+f.length),g,null,!1)};d(this.pos,this.mainClass);for(var p=this.others.length;p--;)d(this.others[p],this.othersClass)}},u.prototype.onCursorChange=function(f){if(!(this.$updating||!this.session)){var c=this.session.selection.getCursor();c.row===this.pos.row&&c.column>=this.pos.column&&c.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",f)):(this.hideOtherMarkers(),this._emit("cursorLeave",f))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var f=this.session.getUndoManager(),c=(f.$undoStack||f.$undostack).length-this.$undoStackDepth,d=0;d<c;d++)f.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();a.implement(l.prototype,s),r.PlaceHolder=l}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,r,i){var o=n("../lib/event"),s=n("../lib/useragent");function a(u,f){return u.row==f.row&&u.column==f.column}function l(u){var f=u.domEvent,c=f.altKey,d=f.shiftKey,p=f.ctrlKey,h=u.getAccelKey(),g=u.getButton();if(p&&s.isMac&&(g=f.button),u.editor.inMultiSelectMode&&g==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!p&&!c&&!h){g===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(g===0){var m=u.editor,y=m.selection,v=m.inMultiSelectMode,x=u.getDocumentPosition(),_=y.getCursor(),E=u.inSelection()||y.isEmpty()&&a(x,_),C=u.x,w=u.y,T=function(Q){C=Q.clientX,w=Q.clientY},R=m.session,L=m.renderer.pixelToScreenCoordinates(C,w),B=L,P;if(m.$mouseHandler.$enableJumpToDef)p&&c||h&&c?P=d?"block":"add":c&&m.$blockSelectEnabled&&(P="block");else if(h&&!c){if(P="add",!v&&d)return}else c&&m.$blockSelectEnabled&&(P="block");if(P&&s.isMac&&f.ctrlKey&&m.$mouseHandler.cancelContextMenu(),P=="add"){if(!v&&E)return;if(!v){var S=y.toOrientedRange();m.addSelectionMarker(S)}var k=y.rangeList.rangeAtPoint(x);m.inVirtualSelectionMode=!0,d&&(k=null,S=y.ranges[0]||S,m.removeSelectionMarker(S)),m.once("mouseup",function(){var Q=y.toOrientedRange();k&&Q.isEmpty()&&a(k.cursor,Q.cursor)?y.substractPoint(Q.cursor):(d?y.substractPoint(S.cursor):S&&(m.removeSelectionMarker(S),y.addRange(S)),y.addRange(Q)),m.inVirtualSelectionMode=!1})}else if(P=="block"){u.stop(),m.inVirtualSelectionMode=!0;var D,O=[],N=function(){var Q=m.renderer.pixelToScreenCoordinates(C,w),ee=R.screenToDocumentPosition(Q.row,Q.column,Q.offsetX);a(B,Q)&&a(ee,y.lead)||(B=Q,m.selection.moveToPosition(ee),m.renderer.scrollCursorIntoView(),m.removeSelectionMarkers(O),O=y.rectangularRangeBlock(B,L),m.$mouseHandler.$clickSelection&&O.length==1&&O[0].isEmpty()&&(O[0]=m.$mouseHandler.$clickSelection.clone()),O.forEach(m.addSelectionMarker,m),m.updateSelectionMarkers())};v&&!h?y.toSingleRange():!v&&h&&(D=y.toOrientedRange(),m.addSelectionMarker(D)),d?L=R.documentToScreenPosition(y.lead):y.moveToPosition(x),B={row:-1,column:-1};var j=function(Q){N(),clearInterval(W),m.removeSelectionMarkers(O),O.length||(O=[y.toOrientedRange()]),D&&(m.removeSelectionMarker(D),y.toSingleRange(D));for(var ee=0;ee<O.length;ee++)y.addRange(O[ee]);m.inVirtualSelectionMode=!1,m.$mouseHandler.$clickSelection=null},q=N;o.capture(m.container,T,j);var W=setInterval(function(){q()},20);return u.preventDefault()}}}r.onMouseDown=l}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(n,r,i){r.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(s){s.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(s){s.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(s){s.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(s){s.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(s){s.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(s){s.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(s){s.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(s){s.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(s){s.multiSelect.rangeCount>1?s.multiSelect.joinSelections():s.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(s){s.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(s){s.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(s){s.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],r.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(s){s.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(s){return s&&s.inMultiSelectMode}}];var o=n("../keyboard/hash_handler").HashHandler;r.keyboardHandler=new o(r.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(n,r,i){var o=n("./range_list").RangeList,s=n("./range").Range,a=n("./selection").Selection,l=n("./mouse/multi_select_handler").onMouseDown,u=n("./lib/event"),f=n("./lib/lang"),c=n("./commands/multi_select_commands");r.commands=c.defaultCommands.concat(c.multiSelectCommands);var d=n("./search").Search,p=new d;function h(_,E,C){return p.$options.wrap=!0,p.$options.needle=E,p.$options.backwards=C==-1,p.find(_)}var g=n("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(g.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(_,E){if(_){if(!this.inMultiSelectMode&&this.rangeCount===0){var C=this.toOrientedRange();if(this.rangeList.add(C),this.rangeList.add(_),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),E||this.fromOrientedRange(_);this.rangeList.removeAll(),this.rangeList.add(C),this.$onAddRange(C)}_.cursor||(_.cursor=_.end);var w=this.rangeList.add(_);return this.$onAddRange(_),w.length&&this.$onRemoveRange(w),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),E||this.fromOrientedRange(_)}},this.toSingleRange=function(_){_=_||this.ranges[0];var E=this.rangeList.removeAll();E.length&&this.$onRemoveRange(E),_&&this.fromOrientedRange(_)},this.substractPoint=function(_){var E=this.rangeList.substractPoint(_);if(E)return this.$onRemoveRange(E),E[0]},this.mergeOverlappingRanges=function(){var _=this.rangeList.merge();_.length&&this.$onRemoveRange(_)},this.$onAddRange=function(_){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(_),this._signal("addRange",{range:_})},this.$onRemoveRange=function(_){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var E=this.rangeList.ranges.pop();_.push(E),this.rangeCount=0}for(var C=_.length;C--;){var w=this.ranges.indexOf(_[C]);this.ranges.splice(w,1)}this._signal("removeRange",{ranges:_}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),E=E||this.ranges[0],E&&!E.isEqual(this.getRange())&&this.fromOrientedRange(E)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new o,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var _=this.ranges.length?this.ranges:[this.getRange()],E=[],C=0;C<_.length;C++){var w=_[C],T=w.start.row,R=w.end.row;if(T===R)E.push(w.clone());else{for(E.push(new s(T,w.start.column,T,this.session.getLine(T).length));++T<R;)E.push(this.getLineRange(T,!0));E.push(new s(R,0,R,w.end.column))}C==0&&!this.isBackwards()&&(E=E.reverse())}this.toSingleRange();for(var C=E.length;C--;)this.addRange(E[C])},this.joinSelections=function(){var _=this.rangeList.ranges,E=_[_.length-1],C=s.fromPoints(_[0].start,E.end);this.toSingleRange(),this.setSelectionRange(C,E.cursor==E.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var _=this.rangeList.ranges,E=_[_.length-1],C=s.fromPoints(_[0].start,E.end);this.toSingleRange(),this.setSelectionRange(C,E.cursor==E.start)}else{var w=this.session.documentToScreenPosition(this.cursor),T=this.session.documentToScreenPosition(this.anchor),R=this.rectangularRangeBlock(w,T);R.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(_,E,C){var w=[],T=_.column<E.column;if(T)var R=_.column,L=E.column,B=_.offsetX,P=E.offsetX;else var R=E.column,L=_.column,B=E.offsetX,P=_.offsetX;var S=_.row<E.row;if(S)var k=_.row,D=E.row;else var k=E.row,D=_.row;R<0&&(R=0),k<0&&(k=0),k==D&&(C=!0);for(var O,N=k;N<=D;N++){var j=s.fromPoints(this.session.screenToDocumentPosition(N,R,B),this.session.screenToDocumentPosition(N,L,P));if(j.isEmpty()){if(O&&y(j.end,O))break;O=j.end}j.cursor=T?j.start:j.end,w.push(j)}if(S&&w.reverse(),!C){for(var q=w.length-1;w[q].isEmpty()&&q>0;)q--;if(q>0)for(var W=0;w[W].isEmpty();)W++;for(var Q=q;Q>=W;Q--)w[Q].isEmpty()&&w.splice(Q,1)}return w}}).call(a.prototype);var m=n("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(_){_.cursor||(_.cursor=_.end);var E=this.getSelectionStyle();return _.marker=this.session.addMarker(_,"ace_selection",E),this.session.$selectionMarkers.push(_),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,_},this.removeSelectionMarker=function(_){if(_.marker){this.session.removeMarker(_.marker);var E=this.session.$selectionMarkers.indexOf(_);E!=-1&&this.session.$selectionMarkers.splice(E,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(_){for(var E=this.session.$selectionMarkers,C=_.length;C--;){var w=_[C];if(w.marker){this.session.removeMarker(w.marker);var T=E.indexOf(w);T!=-1&&E.splice(T,1)}}this.session.selectionMarkerCount=E.length},this.$onAddRange=function(_){this.addSelectionMarker(_.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(_){this.removeSelectionMarkers(_.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(_){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(_){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(_){var E=_.command,C=_.editor;if(C.multiSelect){if(E.multiSelectAction)E.multiSelectAction=="forEach"?w=C.forEachSelection(E,_.args):E.multiSelectAction=="forEachLine"?w=C.forEachSelection(E,_.args,!0):E.multiSelectAction=="single"?(C.exitMultiSelectMode(),w=E.exec(C,_.args||{})):w=E.multiSelectAction(C,_.args||{});else{var w=E.exec(C,_.args||{});C.multiSelect.addRange(C.multiSelect.toOrientedRange()),C.multiSelect.mergeOverlappingRanges()}return w}},this.forEachSelection=function(_,E,C){if(!this.inVirtualSelectionMode){var w=C&&C.keepOrder,T=C==!0||C&&C.$byLines,R=this.session,L=this.selection,B=L.rangeList,P=(w?L:B).ranges,S;if(!P.length)return _.exec?_.exec(this,E||{}):_(this,E||{});var k=L._eventRegistry;L._eventRegistry={};var D=new a(R);this.inVirtualSelectionMode=!0;for(var O=P.length;O--;){if(T)for(;O>0&&P[O].start.row==P[O-1].end.row;)O--;D.fromOrientedRange(P[O]),D.index=O,this.selection=R.selection=D;var N=_.exec?_.exec(this,E||{}):_(this,E||{});!S&&N!==void 0&&(S=N),D.toOrientedRange(P[O])}D.detach(),this.selection=R.selection=L,this.inVirtualSelectionMode=!1,L._eventRegistry=k,L.mergeOverlappingRanges(),L.ranges[0]&&L.fromOrientedRange(L.ranges[0]);var j=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),j&&j.from==j.to&&this.renderer.animateScrolling(j.from),S}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var _="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var E=this.multiSelect.rangeList.ranges,C=[],w=0;w<E.length;w++)C.push(this.session.getTextRange(E[w]));var T=this.session.getDocument().getNewLineCharacter();_=C.join(T),_.length==(C.length-1)*T.length&&(_="")}else this.selection.isEmpty()||(_=this.session.getTextRange(this.getSelectionRange()));return _},this.$checkMultiselectChange=function(_,E){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var C=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&E==this.multiSelect.anchor)return;var w=E==this.multiSelect.anchor?C.cursor==C.start?C.end:C.start:C.cursor;w.row!=E.row||this.session.$clipPositionToDocument(w.row,w.column).column!=E.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(_,E,C){if(E=E||{},E.needle=_||E.needle,E.needle==null){var w=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();E.needle=this.session.getTextRange(w)}this.$search.set(E);var T=this.$search.findAll(this.session);if(!T.length)return 0;var R=this.multiSelect;C||R.toSingleRange(T[0]);for(var L=T.length;L--;)R.addRange(T[L],!0);return w&&R.rangeList.rangeAtPoint(w.start)&&R.addRange(w,!0),T.length},this.selectMoreLines=function(_,E){var C=this.selection.toOrientedRange(),w=C.cursor==C.end,T=this.session.documentToScreenPosition(C.cursor);this.selection.$desiredColumn&&(T.column=this.selection.$desiredColumn);var R=this.session.screenToDocumentPosition(T.row+_,T.column);if(C.isEmpty())var B=R;else var L=this.session.documentToScreenPosition(w?C.end:C.start),B=this.session.screenToDocumentPosition(L.row+_,L.column);if(w){var P=s.fromPoints(R,B);P.cursor=P.start}else{var P=s.fromPoints(B,R);P.cursor=P.end}if(P.desiredColumn=T.column,!this.selection.inMultiSelectMode)this.selection.addRange(C);else if(E)var S=C.cursor;this.selection.addRange(P),S&&this.selection.substractPoint(S)},this.transposeSelections=function(_){for(var E=this.session,C=E.multiSelect,w=C.ranges,T=w.length;T--;){var R=w[T];if(R.isEmpty()){var L=E.getWordRange(R.start.row,R.start.column);R.start.row=L.start.row,R.start.column=L.start.column,R.end.row=L.end.row,R.end.column=L.end.column}}C.mergeOverlappingRanges();for(var B=[],T=w.length;T--;){var R=w[T];B.unshift(E.getTextRange(R))}_<0?B.unshift(B.pop()):B.push(B.shift());for(var T=w.length;T--;){var R=w[T],P=R.clone();E.replace(R,B[T]),R.start.row=P.start.row,R.start.column=P.start.column}C.fromOrientedRange(C.ranges[0])},this.selectMore=function(_,E,C){var w=this.session,T=w.multiSelect,R=T.toOrientedRange();if(!(R.isEmpty()&&(R=w.getWordRange(R.start.row,R.start.column),R.cursor=_==-1?R.start:R.end,this.multiSelect.addRange(R),C))){var L=w.getTextRange(R),B=h(w,L,_);B&&(B.cursor=_==-1?B.start:B.end,this.session.unfold(B),this.multiSelect.addRange(B),this.renderer.scrollCursorIntoView(null,.5)),E&&this.multiSelect.substractPoint(R.cursor)}},this.alignCursors=function(){var _=this.session,E=_.multiSelect,C=E.ranges,w=-1,T=C.filter(function(q){if(q.cursor.row==w)return!0;w=q.cursor.row});if(!C.length||T.length==C.length-1){var R=this.selection.getRange(),L=R.start.row,B=R.end.row,P=L==B;if(P){var S=this.session.getLength(),k;do k=this.session.getLine(B);while(/[=:]/.test(k)&&++B<S);do k=this.session.getLine(L);while(/[=:]/.test(k)&&--L>0);L<0&&(L=0),B>=S&&(B=S-1)}var D=this.session.removeFullLines(L,B);D=this.$reAlignText(D,P),this.session.insert({row:L,column:0},D.join(`
`)+`
`),P||(R.start.column=0,R.end.column=D[D.length-1].length),this.selection.setRange(R)}else{T.forEach(function(q){E.substractPoint(q.cursor)});var O=0,N=1/0,j=C.map(function(q){var W=q.cursor,Q=_.getLine(W.row),ee=Q.substr(W.column).search(/\S/g);return ee==-1&&(ee=0),W.column>O&&(O=W.column),ee<N&&(N=ee),ee});C.forEach(function(q,W){var Q=q.cursor,ee=O-Q.column,H=j[W]-N;ee>H?_.insert(Q,f.stringRepeat(" ",ee-H)):_.remove(new s(Q.row,Q.column,Q.row,Q.column-ee+H)),q.start.column=q.end.column=O,q.start.row=q.end.row=Q.row,q.cursor=q.end}),E.fromOrientedRange(C[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(_,E){var C=!0,w=!0,T,R,L;return _.map(function(D){var O=D.match(/(\s*)(.*?)(\s*)([=:].*)/);return O?T==null?(T=O[1].length,R=O[2].length,L=O[3].length,O):(T+R+L!=O[1].length+O[2].length+O[3].length&&(w=!1),T!=O[1].length&&(C=!1),T>O[1].length&&(T=O[1].length),R<O[2].length&&(R=O[2].length),L>O[3].length&&(L=O[3].length),O):[D]}).map(E?P:C?w?S:P:k);function B(D){return f.stringRepeat(" ",D)}function P(D){return D[2]?B(T)+D[2]+B(R-D[2].length+L)+D[4].replace(/^([=:])\s+/,"$1 "):D[0]}function S(D){return D[2]?B(T+R-D[2].length)+D[2]+B(L)+D[4].replace(/^([=:])\s+/,"$1 "):D[0]}function k(D){return D[2]?B(T)+D[2]+B(L)+D[4].replace(/^([=:])\s+/,"$1 "):D[0]}}}).call(m.prototype);function y(_,E){return _.row==E.row&&_.column==E.column}r.onSessionChange=function(_){var E=_.session;E&&!E.multiSelect&&(E.$selectionMarkers=[],E.selection.$initRangeList(),E.multiSelect=E.selection),this.multiSelect=E&&E.multiSelect;var C=_.oldSession;C&&(C.multiSelect.off("addRange",this.$onAddRange),C.multiSelect.off("removeRange",this.$onRemoveRange),C.multiSelect.off("multiSelect",this.$onMultiSelect),C.multiSelect.off("singleSelect",this.$onSingleSelect),C.multiSelect.lead.off("change",this.$checkMultiselectChange),C.multiSelect.anchor.off("change",this.$checkMultiselectChange)),E&&(E.multiSelect.on("addRange",this.$onAddRange),E.multiSelect.on("removeRange",this.$onRemoveRange),E.multiSelect.on("multiSelect",this.$onMultiSelect),E.multiSelect.on("singleSelect",this.$onSingleSelect),E.multiSelect.lead.on("change",this.$checkMultiselectChange),E.multiSelect.anchor.on("change",this.$checkMultiselectChange)),E&&this.inMultiSelectMode!=E.selection.inMultiSelectMode&&(E.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(_){_.$multiselectOnSessionChange||(_.$onAddRange=_.$onAddRange.bind(_),_.$onRemoveRange=_.$onRemoveRange.bind(_),_.$onMultiSelect=_.$onMultiSelect.bind(_),_.$onSingleSelect=_.$onSingleSelect.bind(_),_.$multiselectOnSessionChange=r.onSessionChange.bind(_),_.$checkMultiselectChange=_.$checkMultiselectChange.bind(_),_.$multiselectOnSessionChange(_),_.on("changeSession",_.$multiselectOnSessionChange),_.on("mousedown",l),_.commands.addCommands(c.defaultCommands),x(_))}function x(_){if(!_.textInput)return;var E=_.textInput.getElement(),C=!1;u.addListener(E,"keydown",function(T){var R=T.keyCode==18&&!(T.ctrlKey||T.shiftKey||T.metaKey);_.$blockSelectEnabled&&R?C||(_.renderer.setMouseCursor("crosshair"),C=!0):C&&w()},_),u.addListener(E,"keyup",w,_),u.addListener(E,"blur",w,_);function w(T){C&&(_.renderer.setMouseCursor(""),C=!1)}}r.MultiSelect=v,n("./config").defineOptions(m.prototype,"editor",{enableMultiselect:{set:function(_){v(this),_?this.on("mousedown",l):this.off("mousedown",l)},value:!0},enableBlockSelect:{set:function(_){this.$blockSelectEnabled=_},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(n,r,i){var o=n("../../range").Range,s=r.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,l,u){var f=a.getLine(u);return this.foldingStartMarker.test(f)?"start":l=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(f)?"end":""},this.getFoldWidgetRange=function(a,l,u){return null},this.indentationBlock=function(a,l,u){var f=/\S/,c=a.getLine(l),d=c.search(f);if(d!=-1){for(var p=u||c.length,h=a.getLength(),g=l,m=l;++l<h;){var y=a.getLine(l).search(f);if(y!=-1){if(y<=d){var v=a.getTokenAt(l,0);if(!v||v.type!=="string")break}m=l}}if(m>g){var x=a.getLine(m).length;return new o(g,p,m,x)}}},this.openingBracketBlock=function(a,l,u,f,c){var d={row:u,column:f+1},p=a.$findClosingBracket(l,d,c);if(p){var h=a.foldWidgets[p.row];return h==null&&(h=a.getFoldWidget(p.row)),h=="start"&&p.row>d.row&&(p.row--,p.column=a.getLine(p.row).length),o.fromPoints(d,p)}},this.closingBracketBlock=function(a,l,u,f,c){var d={row:u,column:f},p=a.$findOpeningBracket(l,d);if(p)return p.column++,d.column--,o.fromPoints(p,d)}}).call(s.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(n,r,i){var o=n("../lib/dom"),s=n("../range").Range,a=n("../config").nls;function l(f,c,d){for(var p=0,h=f.length-1;p<=h;){var g=p+h>>1,m=d(c,f[g]);if(m>0)p=g+1;else if(m<0)h=g-1;else return g}return-(p+1)}function u(f,c,d){var p=f.getAnnotations().sort(s.comparePoints);if(p.length){var h=l(p,{row:c,column:-1},s.comparePoints);h<0&&(h=-h-1),h>=p.length?h=d>0?0:p.length-1:h===0&&d<0&&(h=p.length-1);var g=p[h];if(!(!g||!d)){if(g.row===c){do g=p[h+=d];while(g&&g.row===c);if(!g)return p.slice()}var m=[];c=g.row;do m[d<0?"unshift":"push"](g),g=p[h+=d];while(g&&g.row==c);return m.length&&m}}}r.showErrorMarker=function(f,c){var d=f.session,p=f.getCursorPosition(),h=p.row,g=d.widgetManager.getWidgetsAtRow(h).filter(function(T){return T.type=="errorMarker"})[0];g?g.destroy():h-=c;var m=u(d,h,c),y;if(m){var v=m[0];p.column=(v.pos&&typeof v.column!="number"?v.pos.sc:v.column)||0,p.row=v.row,y=f.renderer.$gutterLayer.$annotations[p.row]}else{if(g)return;y={displayText:[a("error-marker.good-state","Looks good!")],className:"ace_ok"}}f.session.unfold(p.row),f.selection.moveToPosition(p);var x={row:p.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},_=x.el.appendChild(o.createElement("div")),E=x.el.appendChild(o.createElement("div"));E.className="error_widget_arrow "+y.className;var C=f.renderer.$cursorLayer.getPixelPosition(p).left;E.style.left=C+f.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",_.className="error_widget "+y.className,y.displayText.forEach(function(T,R){_.appendChild(o.createTextNode(T)),R<y.displayText.length-1&&_.appendChild(o.createElement("br"))}),_.appendChild(o.createElement("div"));var w=function(T,R,L){if(R===0&&(L==="esc"||L==="return"))return x.destroy(),{command:"null"}};x.destroy=function(){f.$mouseHandler.isMousePressed||(f.keyBinding.removeKeyboardHandler(w),d.widgetManager.removeLineWidget(x),f.off("changeSelection",x.destroy),f.off("changeSession",x.destroy),f.off("mouseup",x.destroy),f.off("change",x.destroy))},f.keyBinding.addKeyboardHandler(w),f.on("changeSelection",x.destroy),f.on("changeSession",x.destroy),f.on("mouseup",x.destroy),f.on("change",x.destroy),f.session.widgetManager.addLineWidget(x),x.el.onmousedown=f.focus.bind(f),f.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},o.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(n,r,i){n("./loader_build")(r);var o=n("./lib/dom"),s=n("./range").Range,a=n("./editor").Editor,l=n("./edit_session").EditSession,u=n("./undomanager").UndoManager,f=n("./virtual_renderer").VirtualRenderer;n("./worker/worker_client"),n("./keyboard/hash_handler"),n("./placeholder"),n("./multi_select"),n("./mode/folding/fold_mode"),n("./theme/textmate"),n("./ext/error_marker"),r.config=n("./config"),r.edit=function(d,p){if(typeof d=="string"){var h=d;if(d=document.getElementById(h),!d)throw new Error("ace.edit can't find div #"+h)}if(d&&d.env&&d.env.editor instanceof a)return d.env.editor;var g="";if(d&&/input|textarea/i.test(d.tagName)){var m=d;g=m.value,d=o.createElement("pre"),m.parentNode.replaceChild(d,m)}else d&&(g=d.textContent,d.innerHTML="");var y=r.createEditSession(g),v=new a(new f(d),y,p),x={document:y,editor:v,onResize:v.resize.bind(v,null)};return m&&(x.textarea=m),v.on("destroy",function(){x.editor.container.env=null}),v.container.env=v.env=x,v},r.createEditSession=function(d,p){var h=new l(d,p);return h.setUndoManager(new u),h},r.Range=s,r.Editor=a,r.EditSession=l,r.UndoManager=u,r.VirtualRenderer=f;var c=r.config.version;r.version=c}),function(){ace.require(["ace/ace"],function(n){n&&(n.config.init(!0),n.define=ace.define);var r=function(){return this}();!r&&typeof window<"u"&&(r=window),!r&&typeof self<"u"&&(r=self),r.ace||(r.ace=n);for(var i in n)n.hasOwnProperty(i)&&(r.ace[i]=n[i]);r.ace.default=r.ace,e&&(e.exports=r.ace)})}()}(M5)),M5.exports}var W3t=G3t();const V3t=Fa(W3t);(()=>{var e=o=>o==null?!1:typeof o=="boolean"?o:o.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var t="min-label",n="max-label",r="#1E293B",i=()=>{let o=null,s=null,a=null,l,u=!1,f=r,c="",d,p=null,h=null,g=null,m=[],y=()=>{var L;let B=(L=o==null?void 0:o.shadowRoot)==null?void 0:L.querySelector(".range-slider-box");p=document.createElement("div"),p.classList.add("labels-row"),B.prepend(p)},v=L=>{let B=document.createElement("label");return B.className=L,B.setAttribute("for","range-slider"),B},x=()=>{h=v(t),h.textContent=R(a==null?void 0:a.getTextMin(),c),g=v(n),g.textContent=R(a==null?void 0:a.getTextMax(),c),s==null||s.before(h),s==null||s.after(g);let L=a==null?void 0:a.getValues();if(L)for(let B=0;B<L.length;B++){let P=v(`value${B+1}-label generated-label`);P.textContent=R(L[B],c),m.push(P),p==null||p.append(P)}},_=()=>{for(let L of m)!L||L.remove();h==null||h.remove(),g==null||g.remove(),p==null||p.remove(),m=[]},E=L=>{u=L,u?(y(),x()):_()},C=L=>{f=L;for(let B of m)!B||(B.style.color=f??r);h&&(h.style.color=f??r),g&&(g.style.color=f??r)},w=L=>{c=L,l&&l()},T=()=>{!a||!p||p.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},R=(L,B)=>{let P=`${(L??"").toString()}${B}`;return d&&typeof d=="function"?d(L):P};return{get name(){return"Generated Labels"},init:(L,B,P,S)=>{var k,D,O;o=L,a=S,s=(k=L.shadowRoot)==null?void 0:k.getElementById("range-slider"),l=B,f=(D=o.getAttribute("generate-labels-text-color"))!=null?D:r,c=(O=o.getAttribute("generate-labels-units"))!=null?O:"",E(e(o.getAttribute("generate-labels"))),T(),C(f)},update:L=>{if(!(!u||!L.values)){T();for(let B=0;B<L.values.length;B++){let P=L.values[B],S=m[B];if(P===void 0&&S){S.remove(),m[B]=void 0;continue}if(P!==void 0&&!S){let k=v(`value${B+1}-label generated-label`);if(k.textContent=R(P,c),m[B]=k,L.values.length<=0)p==null||p.append(k);else if(B===0)p==null||p.append(k);else{let D=m[B-1];D==null||D.after(k)}continue}!S||(S.textContent=R(P,c))}h&&(h.textContent=R(L.textMin,c)),g&&(g.textContent=R(L.textMax,c)),C(f)}},onAttrChange:(L,B)=>{L==="generate-labels"&&E(e(B)),L==="generate-labels-text-color"&&C(B),L==="generate-labels-units"&&w(B)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:L=>{E(e(L))}}},{name:"textColor",attributes:{get(){return f??""},set:L=>{C(L)}}},{name:"generateLabelsTextColor",attributes:{get(){return f??""},set:L=>{C(L)}}},{name:"units",attributes:{get(){return c??""},set:L=>{w(L)}}},{name:"generateLabelsUnits",attributes:{get(){return c??""},set:L=>{w(L)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:L=>{d=L,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:_}};window.tcRangeSliderPlugins.push(i)})();function Y3t(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}class X3t extends nP{register(){super.register()}unregister(){super.unregister()}build(){const t=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,o=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const s=document.createElement("tc-range-slider"),a=Object.keys(t).find(f=>f.includes("min")),l=Object.keys(t).find(f=>f.includes("max")),u={min:t[a].minimum,max:t[l].maximum,step:t[a].step||t[l].step,value1:(o==null?void 0:o[a])||t[a].default,value2:(o==null?void 0:o[l])||t[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};Y3t(s,u),this.input=s,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",f=>{f.preventDefault(),f.stopPropagation(),this.value={[a]:f.detail.value1,[l]:f.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}function K3t(e,t={}){const n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const s=[n,r];return ckt([[s,[i,r],[i,o],[n,o],s]],t.properties,{bbox:e,id:t.id})}const wD=e=>["feature","features"].some(t=>(e==null?void 0:e.format)===t),_D=e=>["polygon","polygons"].includes(e==null?void 0:e.format),ED=e=>["point","points"].includes(e==null?void 0:e.format),M_=e=>["bounding-boxes","bounding-box"].includes(e==null?void 0:e.format),AD=e=>["lines","line"].includes(e==null?void 0:e.format),V8=e=>(e==null?void 0:e.type)==="wkt",Y8=e=>(e==null?void 0:e.type)==="geojson",Zb=e=>["bounding-boxes","polygons","features","points","lines"].includes(e==null?void 0:e.format),Z3t=e=>wD(e)||_D(e)||M_(e)||ED(e)||AD(e);function BCe(e,t){Object.keys(t).forEach(n=>{n.includes("-")?e.setAttribute(n,t[n]):e[n]=t[n]})}const Q3t=(e,t)=>{if(!e||!t)return!1;switch(t){case"string":return typeof e=="string";case"number":return!isNaN(e);case"boolean":return typeof e=="boolean";case"array":return Array.isArray(e);case"object":return typeof e=="object"&&!!Object.keys(e).length}return!1},J3t=e=>e.length<1?[]:e.map(t=>K3t(t));class To extends nP{register(){super.register()}unregister(){super.unregister()}build(){var p,h,g,m,y,v;const t=this.options,n=this.schema.description,r=this.theme,i=((h=(p=this.schema)==null?void 0:p.options)==null?void 0:h.drawtools)??{},o=((m=(g=this.schema)==null?void 0:g.options)==null?void 0:m.map)??{};t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const s=document.createElement("eox-drawtools");let a;switch(!0){case _D(this.schema):a="Polygon";break;case M_(this.schema):a="Box";break;case ED(this.schema):a="Point";break;case AD(this.schema):a="LineString";break;default:a="Box";break}let l;switch(!0){case V8(this.schema):l="wkt";break;case Y8(this.schema):l="geojson";break;default:l="feature";break}const u={type:a,format:l};if(wD(this.schema)||(delete i.layerId,delete i["layer-id"]),Zb(this.schema)&&(u["multiple-features"]=!0,u.showList=i["show-list"]??i.showList??!0),!("for"in i)||!i.for){const x=document.createElement("eox-map"),_="map-"+this.formname.replace(/[^\w\s]/gi,"");let E=!1;x.addEventListener("loadend",()=>{const C=this.path.split(".").slice(1),w=this.defaults.startVals[this.key]||C.reduce((T,R)=>T==null?void 0:T[R],this.defaults.startVals);if(!E&&w&&M_(this.schema)){E=!0;const T=J3t(w);s.handleFeatureChange(JSON.stringify({type:"FeatureCollection",features:T}),!0,!1)}}),x.layers=[{type:"Tile",source:{type:"OSM"}}],BCe(x,{id:_,style:"width: 100%; height: 300px;",projection:"EPSG:4326",...o}),this.container.appendChild(x),s.for=x}BCe(s,{...i,...u}),t.autoStartSelection!==!1&&s.updateComplete.then(()=>{s.startDrawing()}),this.input=s,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const c=(v=(y=this.schema)==null?void 0:y.options)==null?void 0:v.featureProperty,d=(x,_)=>Array.isArray(x)?!Zb(this.schema)&&x.length===1?_(x[0]):x.map(_):_(x);this.input.addEventListener("drawupdate",x=>{var _;switch(x.preventDefault(),x.stopPropagation(),!0){case!x.detail:{this.value=null;break}case V8(this.schema):{this.value=x.detail;break}case Y8(this.schema):{const E=x.detail;if(Zb(this.schema)){this.value=E;break}this.value=((_=E.features)==null?void 0:_[0])??null;break}case AD(this.schema):{this.value=d(x.detail,E=>E.getGeometry().getCoordinates());break}case wD(this.schema):{if(!Array.isArray(x.detail)){this.value=null;break}const E=C=>c?C.get(c)??C:C;this.value=d(x.detail,E);break}case M_(this.schema):{if(!Array.isArray(x.detail)){this.value=null;break}const E=C=>C.getGeometry().getExtent();this.value=d(x.detail,E);break}case _D(this.schema):{if(!Array.isArray(x.detail)){this.value=null;break}this.value=d(x.detail,E=>E);break}case ED(this.schema):{if(!Array.isArray(x.detail)){this.value=null;break}this.value=d(x.detail,E=>{var C;return(C=E.getGeometry())==null?void 0:C.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function eTt(e){return function(t,n,r){let i=[];return t.properties&&Object.keys(t.properties).forEach(o=>{const s=t.properties[o];if(!(Z3t(s)&&(s.format==="feature"||e.some(u=>u.format===s.format&&u.type===s.type))))return;const l=sTt(o,n[o],r);if(l.length){i.push(...l);return}switch(!0){case V8(s):{i.push(...aTt(o,n[o],r));break}case Y8(s):{i.push(...lTt(o,n[o],r,s));break}case wD(s):{i.push(...L2({key:o,subValue:n[o],subSchema:s,path:r,validationFn:nTt}));break}case M_(s):{i.push(...L2({key:o,subValue:n[o],subSchema:s,path:r,validationFn:tTt}));break}case _D(s):{i.push(...L2({key:o,subValue:n[o],subSchema:s,path:r,validationFn:rTt}));break}case ED(s):{i.push(...L2({key:o,subValue:n[o],subSchema:s,path:r,validationFn:iTt}));break}case AD(s):{i.push(...L2({key:o,subValue:n[o],subSchema:s,path:r,validationFn:oTt}));break}}}),i}}function L2({key:e,subValue:t,path:n,subSchema:r,validationFn:i}){if(Zb(r)){if(Array.isArray(t)){if(!t.length)return[{path:`${n}.${e}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${e}`,message:`Value is expected to be an array but got typeof ${typeof t}`,property:"format"}];return t==null?void 0:t.flatMap((o,s)=>i(`${e}.${s}`,o,n,r))}else return i(e,t,n,r)}function tTt(e,t,n){const r=[];return t.length!==4?[{path:`${n}.${e}`,message:`Value is expected to have 4 items but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${o}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function nTt(e,t,n,r){var o;let i;return Zb(r)?i=(o=r==null?void 0:r.items)==null?void 0:o.type:i=r.type,i?Q3t(t,i)?[]:[{path:`${n}.${e}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function rTt(e,t,n){return typeof t!="object"||!Object.keys(t).length?[{path:`${n}.${e}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function iTt(e,t,n){const r=[];return t.length!==2?[{path:`${n}.${e}`,message:`Value is expected to have 2 items but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${o}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function oTt(e,t,n){const r=[];return t.length<2?[{path:`${n}.${e}`,message:`Value is expected to have at least 2 points but got ${t.length}`,property:"format"}]:(t.forEach((i,o)=>{i.forEach((s,a)=>{typeof s!="number"&&r.push({path:`${n}.${e}.${o}.${a}`,message:`coordinates is expected to be of type number but got ${s}`,property:"format"})})}),r)}function sTt(e,t,n){return t?[]:[{path:`${n}.${e}`,message:`invalid value ${JSON.stringify(t)}`,property:"type"}]}function aTt(e,t,n){return typeof t!="string"?[{path:`${n}.${e}`,message:"Value is expected to be a valid wkt string",property:"type"}]:t==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${e}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function lTt(e,t,n,r){var i;if(typeof t!="object"||!Object.keys(t).length)return[{path:`${n}.${e}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(Zb(r)){if(t.type!=="FeatureCollection")return[{path:`${n}.${e}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=t==null?void 0:t.features)!=null&&i.length))return[{path:`${n}.${e}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(t!=null&&t.geometry.type))return[{path:`${n}.${e}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const uTt=[{type:"object",format:"minmax",func:X3t},{type:"array",format:"bounding-boxes",func:To},{type:"wkt",format:"bounding-boxes",func:To},{type:"geojson",format:"bounding-boxes",func:To},{type:"array",format:"bounding-box",func:To},{type:"wkt",format:"bounding-box",func:To},{type:"geojson",format:"bounding-box",func:To},{type:"array",format:"polygons",func:To},{type:"wkt",format:"polygons",func:To},{type:"geojson",format:"polygons",func:To},{type:"object",format:"polygon",func:To},{type:"wkt",format:"polygon",func:To},{type:"geojson",format:"polygon",func:To},{type:"array",format:"points",func:To},{type:"wkt",format:"points",func:To},{type:"geojson",format:"points",func:To},{type:"array",format:"point",func:To},{type:"wkt",format:"point",func:To},{type:"geojson",format:"point",func:To},{format:"feature",func:To},{type:"array",format:"features",func:To},{type:"wkt",format:"features",func:To},{type:"geojson",format:"features",func:To},{type:"array",format:"line",func:To},{type:"wkt",format:"line",func:To},{type:"geojson",format:"line",func:To},{type:"array",format:"lines",func:To},{type:"wkt",format:"lines",func:To},{type:"geojson",format:"lines",func:To}],cTt=(e,t)=>{const n=[...uTt,...t];lv.defaults.custom_validators.push(eTt(n)),n.map(({type:r,format:i,func:o})=>{lv.defaults.startVals=e,lv.defaults.editors[i]=o,lv.defaults.resolvers.unshift(s=>{if(s.type===r&&s.format===i||s.format==="feature")return i})})};window.SimpleMDE=q3t;window.ace=V3t;window.ace.config.set("useWorker",!1);window.ace.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds/src-min-noconflict/");const zCe=e=>{cTt(e.value||{},e.customEditorInterfaces||[]);const t=e.renderRoot.querySelector("form");for(;t.firstChild;)t.removeChild(t.firstChild);lv.defaults.callbacks={button:{onSubmit:function(){e.dispatchEvent(new CustomEvent("submit",{detail:e.value,bubbles:!0,composed:!0}))}}},lv.defaults.resolvers.unshift(i=>{var o;return((o=i.options)==null?void 0:o.resolver)&&i.options.resolver});let r=new lv(t,{schema:e.schema||RWe,...e.value?{startval:e.value}:{},theme:"html",iconlib:"fontawesome5",ajax:!0,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0,...e.options});return r.on("ready",()=>{e.renderRoot.querySelector("form").dataset.themeCustom="eox";const i=Array.from(e.renderRoot.querySelectorAll(".tabs.je-tabholder--top > .je-tab--top > span")),o=l=>{Object.entries(l).filter(([u,f])=>{var c;return(c=f.options)==null?void 0:c.hidden}).map(([u,f])=>f.title||u).forEach(u=>{const f=i.find(c=>c.textContent===u);f&&(f.parentElement.dataset.hidden="")}),Object.values(l).forEach(u=>{u.properties&&o(u.properties)})};if(o(r.expandSchema(r.schema).properties),e.renderRoot.querySelectorAll("[data-schematype=string] input").forEach(l=>{l.addEventListener("input",()=>{l.dispatchEvent(new CustomEvent("change",{detail:l.value}))})}),fTt(r)){const l=document.createElement("style");l.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,e.renderRoot.insertBefore(l,e.renderRoot.firstChild)}const a=Object.values(r.editors).find(l=>l==null?void 0:l.ace_container);a&&!e.noShadow&&(a.ace_editor_instance.setOptions({showPrintMargin:!1,useSoftTabs:!0,wrap:!0}),a.ace_editor_instance.renderer.attachToShadowRoot(),a.ace_editor_instance.resize())}),r};async function UCe(e){if(e&&typeof e!="object")try{const t=await fetch(e);if(t.ok)return await t.json();console.error("Failed to fetch schema from URL: ",t.status)}catch(t){console.error("Error fetching schema: ",t)}return e}function fTt(e){if(Object.values(e.editors).some(n=>n instanceof LWe))return!0;function t(n){if(!n)return!1;if(n.format==="markdown")return!0;if(n.properties)return Object.values(n.properties).some(t);if(n.items)return t(n.items);for(const r of["anyOf","oneOf","allOf"])if(n[r]&&Array.isArray(n[r])&&n[r].some(t))return!0;return!1}return t(e.schema)}const dTt=e=>{setTimeout(()=>{e.renderRoot.querySelectorAll("a").forEach(t=>{t.getAttribute("href")!==null&&t.getAttribute("href").startsWith("http")&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"))})})},hTt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,pTt=`
  :host, :root {
    display: block;
    overflow: hidden;
    min-height: 250px;
  }
  :host, :root, form, .CodeMirror {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-modal {
    z-index: 30;
    border-radius: 4px;
    border: none;
    box-shadow: 0 5px 10px #0005;
    padding: 8px;
  }
  form[data-theme="html"][data-theme-custom="eox"] table.je-table {
    width: 100%;
  }
  form[data-theme="html"][data-theme-custom="eox"] table.je-table td {
    display: grid;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder.tabs {
    width: 130px;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder.tabs+div {
    margin-left: 130px;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top {
    margin-left: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder--clear > .je-indented-panel {
    border-top-left-radius: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top > .je-tab--top {
    border-radius: 3px 3px 0 0;
    padding-left: 10px;
    padding-right: 10px;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top > .je-tab--top[data-hidden] {
    display: none;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-indented-panel {
    min-height: 20px;
    padding: var(--eox-panel-spacing, 10px);
    margin: var(--eox-panel-spacing, 10px);
    margin-left: 0;
    margin-right: 0;
    padding-top: 0;
    padding-bottom: 0;
    background-color: var(--eox-background-color, transparent);
    border: var(--eox-panel-border, 1px solid #ced4da);
    border-radius: 3px;
    -webkit-box-shadow: none;
    box-shadow: none;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-child-editor-holder {
    margin-bottom: 0;
  }
  .je-object__container {
    position: relative;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-header .je-object__title {
    display: flex;
    align-items: center;
  }
  .je-object__controls {
    margin: 0px 0px 0px 10px;
  }
  .je-header {
    margin-top: var(--eox-panel-spacing, 10px);
  }
  .row:not(.row .row):not(.row:last-child) {
    margin-bottom: 8px;
  }
  form[data-theme="html"][data-theme-custom="eox"] label.je-form-input-label:not([data-schematype="boolean"]),
  form[data-theme="html"][data-theme-custom="eox"] p.je-form-input-label:not([data-schematype="boolean"]) {
    display: inline-flex;
    align-items: center;
    max-width: 100%;
    margin-bottom: 5px;
    margin-top: var(--eox-panel-spacing, 10px);
    font-weight: 400;
  }
  form[data-theme="html"][data-theme-custom="eox"] p.je-form-input-label:not([data-schematype="boolean"]) {
    display: inline-block;
  }
  form[data-theme="html"][data-theme-custom="eox"] label {
    display: flex;
  }
  [data-schematype="boolean"] {
    padding-top: var(--eox-panel-spacing, 10px);
    padding-bottom: var(--eox-panel-spacing, 10px);
  }
  .form-control:not([data-schematype="boolean"] .form-control):not(.row:last-child .form-control) {
    margin-bottom: 15px;
  }
  .form-control input:not([data-schematype="boolean"] input),
  .form-control select {
    display: block;
    width: 100%;
    padding: 6px 12px;
    font-size: 14px;
    line-height: 1.42857143;
    color: #555;
    background-color: var(--eox-background-color, transparent);
    background-image: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
  }
  input[type="checkbox"] {
    border: none !important;
    padding: 0 !important;
    display: flex !important;
    width: auto !important;
  }
  .form-control input[disabled] {
    opacity: .5;
  }
  [data-schematype=boolean] label {
    display: flex;
    font-size: 1rem !important;
    align-items: center;
    gap: 4px;
  }
  [data-schematype=boolean] label input {
    border: none;
    padding: 0;
  }
  /* description */
  [data-schematype] p {
    margin-top: 0;
    margin-bottom: 0.5rem;
    font-style: italic;
  }
  .errmsg {
    font-size: x-small;
  }

  /* MD Editor */
  [data-theme-custom="eox"] .editor-toolbar button {
    background: none;
    box-shadow: none;
    color: #555;
  }
  [data-theme-custom="eox"] .editor-toolbar button:hover:not([disabled]):not(.icon),
  [data-theme-custom="eox"] .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
    color: #2c3e50;
  }
  [data-theme-custom="eox"] .editor-toolbar button i {
    font-size: 17px;
  }
  [data-theme-custom="eox"] .editor-statusbar {
    padding-bottom: 0;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }

  /* Ace Editor */
  .ace_editor,
  .ace_editor * {
    font-family: "Monaco", "Menlo", "Ubuntu Mono", "Droid Sans Mono", "Consolas", monospace !important;
  }

  /* Buttons overrides */
  button {
    vertical-align: middle;
  }
  button i {
    display: none;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    background: none;
    box-shadow: none;
    padding: 0;
    text-indent: 0px;
    margin: 0 4px 8px 0;
    height: unset;
  }
  button.json-editor-btntype-properties {
    margin: 0;
  }
  button[class*="json-editor-btntype-"]:hover {
    background: none !important;
    box-shadow: none !important;
  }
  .json-editor-btntype-toggle[title=Expand],
  .json-editor-btntype-toggle[title=Collapse] {
    margin: 0 4px 4px -8px;
  }
  .json-editor-btntype-toggle[title=Expand]::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-toggle[title=Collapse]::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-down%3C/title%3E%3Cpath d='M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-properties::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplaylist-edit%3C/title%3E%3Cpath fill='%23204270' d='M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
    .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
  }
  .json-editor-btntype-add:hover,
    .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }

  /* Hide stuff on the root level */
  form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-indented-panel {
    margin: 0;
    padding: 0;
    border: none;
  }
`;var u_={exports:{}};u_.exports;var jCe;function gTt(){return jCe||(jCe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Function]",h="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",x="[object Promise]",_="[object Proxy]",E="[object RegExp]",C="[object Set]",w="[object String]",T="[object Symbol]",R="[object Undefined]",L="[object WeakMap]",B="[object ArrayBuffer]",P="[object DataView]",S="[object Float32Array]",k="[object Float64Array]",D="[object Int8Array]",O="[object Int16Array]",N="[object Int32Array]",j="[object Uint8Array]",q="[object Uint8ClampedArray]",W="[object Uint16Array]",Q="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ne={};ne[S]=ne[k]=ne[D]=ne[O]=ne[N]=ne[j]=ne[q]=ne[W]=ne[Q]=!0,ne[a]=ne[l]=ne[B]=ne[f]=ne[P]=ne[c]=ne[d]=ne[p]=ne[g]=ne[m]=ne[v]=ne[E]=ne[C]=ne[w]=ne[L]=!1;var ge=typeof jo=="object"&&jo&&jo.Object===Object&&jo,we=typeof self=="object"&&self&&self.Object===Object&&self,$e=ge||we||Function("return this")(),ve=t&&!t.nodeType&&t,Ee=ve&&!0&&e&&!e.nodeType&&e,Ve=Ee&&Ee.exports===ve,Ue=Ve&&ge.process,ft=function(){try{return Ue&&Ue.binding&&Ue.binding("util")}catch{}}(),ht=ft&&ft.isTypedArray;function zt(Le,Pe){for(var ke=-1,rt=Le==null?0:Le.length,Mt=0,dn=[];++ke<rt;){var sr=Le[ke];Pe(sr,ke,Le)&&(dn[Mt++]=sr)}return dn}function $t(Le,Pe){for(var ke=-1,rt=Pe.length,Mt=Le.length;++ke<rt;)Le[Mt+ke]=Pe[ke];return Le}function Tn(Le,Pe){for(var ke=-1,rt=Le==null?0:Le.length;++ke<rt;)if(Pe(Le[ke],ke,Le))return!0;return!1}function it(Le,Pe){for(var ke=-1,rt=Array(Le);++ke<Le;)rt[ke]=Pe(ke);return rt}function Te(Le){return function(Pe){return Le(Pe)}}function ye(Le,Pe){return Le.has(Pe)}function Se(Le,Pe){return Le==null?void 0:Le[Pe]}function Re(Le){var Pe=-1,ke=Array(Le.size);return Le.forEach(function(rt,Mt){ke[++Pe]=[Mt,rt]}),ke}function U(Le,Pe){return function(ke){return Le(Pe(ke))}}function Z(Le){var Pe=-1,ke=Array(Le.size);return Le.forEach(function(rt){ke[++Pe]=rt}),ke}var re=Array.prototype,ie=Function.prototype,be=Object.prototype,Ce=$e["__core-js_shared__"],je=ie.toString,V=be.hasOwnProperty,fe=function(){var Le=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return Le?"Symbol(src)_1."+Le:""}(),he=be.toString,me=RegExp("^"+je.call(V).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=Ve?$e.Buffer:void 0,Me=$e.Symbol,Be=$e.Uint8Array,We=be.propertyIsEnumerable,Qe=re.splice,ut=Me?Me.toStringTag:void 0,Tt=Object.getOwnPropertySymbols,Ut=Oe?Oe.isBuffer:void 0,Kt=U(Object.keys,Object),Pt=ns($e,"DataView"),bn=ns($e,"Map"),_n=ns($e,"Promise"),un=ns($e,"Set"),Wn=ns($e,"WeakMap"),qn=ns(Object,"create"),wr=is(Pt),Ao=is(bn),Gi=is(_n),_i=is(un),$s=is(Wn),tr=Me?Me.prototype:void 0,yi=tr?tr.valueOf:void 0;function pi(Le){var Pe=-1,ke=Le==null?0:Le.length;for(this.clear();++Pe<ke;){var rt=Le[Pe];this.set(rt[0],rt[1])}}function _r(){this.__data__=qn?qn(null):{},this.size=0}function uo(Le){var Pe=this.has(Le)&&delete this.__data__[Le];return this.size-=Pe?1:0,Pe}function Or(Le){var Pe=this.__data__;if(qn){var ke=Pe[Le];return ke===r?void 0:ke}return V.call(Pe,Le)?Pe[Le]:void 0}function go(Le){var Pe=this.__data__;return qn?Pe[Le]!==void 0:V.call(Pe,Le)}function Zr(Le,Pe){var ke=this.__data__;return this.size+=this.has(Le)?0:1,ke[Le]=qn&&Pe===void 0?r:Pe,this}pi.prototype.clear=_r,pi.prototype.delete=uo,pi.prototype.get=Or,pi.prototype.has=go,pi.prototype.set=Zr;function Fi(Le){var Pe=-1,ke=Le==null?0:Le.length;for(this.clear();++Pe<ke;){var rt=Le[Pe];this.set(rt[0],rt[1])}}function or(){this.__data__=[],this.size=0}function Fe(Le){var Pe=this.__data__,ke=Er(Pe,Le);if(ke<0)return!1;var rt=Pe.length-1;return ke==rt?Pe.pop():Qe.call(Pe,ke,1),--this.size,!0}function Xe(Le){var Pe=this.__data__,ke=Er(Pe,Le);return ke<0?void 0:Pe[ke][1]}function Et(Le){return Er(this.__data__,Le)>-1}function pt(Le,Pe){var ke=this.__data__,rt=Er(ke,Le);return rt<0?(++this.size,ke.push([Le,Pe])):ke[rt][1]=Pe,this}Fi.prototype.clear=or,Fi.prototype.delete=Fe,Fi.prototype.get=Xe,Fi.prototype.has=Et,Fi.prototype.set=pt;function Yt(Le){var Pe=-1,ke=Le==null?0:Le.length;for(this.clear();++Pe<ke;){var rt=Le[Pe];this.set(rt[0],rt[1])}}function An(){this.size=0,this.__data__={hash:new pi,map:new(bn||Fi),string:new pi}}function Rn(Le){var Pe=ws(this,Le).delete(Le);return this.size-=Pe?1:0,Pe}function Ht(Le){return ws(this,Le).get(Le)}function mt(Le){return ws(this,Le).has(Le)}function jn(Le,Pe){var ke=ws(this,Le),rt=ke.size;return ke.set(Le,Pe),this.size+=ke.size==rt?0:1,this}Yt.prototype.clear=An,Yt.prototype.delete=Rn,Yt.prototype.get=Ht,Yt.prototype.has=mt,Yt.prototype.set=jn;function Vn(Le){var Pe=-1,ke=Le==null?0:Le.length;for(this.__data__=new Yt;++Pe<ke;)this.add(Le[Pe])}function an(Le){return this.__data__.set(Le,r),this}function gn(Le){return this.__data__.has(Le)}Vn.prototype.add=Vn.prototype.push=an,Vn.prototype.has=gn;function Qr(Le){var Pe=this.__data__=new Fi(Le);this.size=Pe.size}function Wr(){this.__data__=new Fi,this.size=0}function Ln(Le){var Pe=this.__data__,ke=Pe.delete(Le);return this.size=Pe.size,ke}function dt(Le){return this.__data__.get(Le)}function Nt(Le){return this.__data__.has(Le)}function Rr(Le,Pe){var ke=this.__data__;if(ke instanceof Fi){var rt=ke.__data__;if(!bn||rt.length<n-1)return rt.push([Le,Pe]),this.size=++ke.size,this;ke=this.__data__=new Yt(rt)}return ke.set(Le,Pe),this.size=ke.size,this}Qr.prototype.clear=Wr,Qr.prototype.delete=Ln,Qr.prototype.get=dt,Qr.prototype.has=Nt,Qr.prototype.set=Rr;function fr(Le,Pe){var ke=Go(Le),rt=!ke&&js(Le),Mt=!ke&&!rt&&zo(Le),dn=!ke&&!rt&&!Mt&&co(Le),sr=ke||rt||Mt||dn,dr=sr?it(Le.length,String):[],hr=dr.length;for(var pr in Le)V.call(Le,pr)&&!(sr&&(pr=="length"||Mt&&(pr=="offset"||pr=="parent")||dn&&(pr=="buffer"||pr=="byteLength"||pr=="byteOffset")||Es(pr,hr)))&&dr.push(pr);return dr}function Er(Le,Pe){for(var ke=Le.length;ke--;)if(ha(Le[ke][0],Pe))return ke;return-1}function Ir(Le,Pe,ke){var rt=Pe(Le);return Go(Le)?rt:$t(rt,ke(Le))}function ri(Le){return Le==null?Le===void 0?R:y:ut&&ut in Object(Le)?_s(Le):da(Le)}function xn(Le){return vo(Le)&&ri(Le)==a}function Bi(Le,Pe,ke,rt,Mt){return Le===Pe?!0:Le==null||Pe==null||!vo(Le)&&!vo(Pe)?Le!==Le&&Pe!==Pe:Io(Le,Pe,ke,rt,Bi,Mt)}function Io(Le,Pe,ke,rt,Mt,dn){var sr=Go(Le),dr=Go(Pe),hr=sr?l:rs(Le),pr=dr?l:rs(Pe);hr=hr==a?v:hr,pr=pr==a?v:pr;var Yr=hr==v,zr=pr==v,Ur=hr==pr;if(Ur&&zo(Le)){if(!zo(Pe))return!1;sr=!0,Yr=!1}if(Ur&&!Yr)return dn||(dn=new Qr),sr||co(Le)?Po(Le,Pe,ke,rt,Mt,dn):mo(Le,Pe,hr,ke,rt,Mt,dn);if(!(ke&i)){var gi=Yr&&V.call(Le,"__wrapped__"),M=zr&&V.call(Pe,"__wrapped__");if(gi||M){var z=gi?Le.value():Le,Y=M?Pe.value():Pe;return dn||(dn=new Qr),Mt(z,Y,ke,rt,dn)}}return Ur?(dn||(dn=new Qr),es(Le,Pe,ke,rt,Mt,dn)):!1}function no(Le){if(!Ia(Le)||Co(Le))return!1;var Pe=os(Le)?me:H;return Pe.test(is(Le))}function Us(Le){return vo(Le)&&Hs(Le.length)&&!!ne[ri(Le)]}function No(Le){if(!hs(Le))return Kt(Le);var Pe=[];for(var ke in Object(Le))V.call(Le,ke)&&ke!="constructor"&&Pe.push(ke);return Pe}function Po(Le,Pe,ke,rt,Mt,dn){var sr=ke&i,dr=Le.length,hr=Pe.length;if(dr!=hr&&!(sr&&hr>dr))return!1;var pr=dn.get(Le);if(pr&&dn.get(Pe))return pr==Pe;var Yr=-1,zr=!0,Ur=ke&o?new Vn:void 0;for(dn.set(Le,Pe),dn.set(Pe,Le);++Yr<dr;){var gi=Le[Yr],M=Pe[Yr];if(rt)var z=sr?rt(M,gi,Yr,Pe,Le,dn):rt(gi,M,Yr,Le,Pe,dn);if(z!==void 0){if(z)continue;zr=!1;break}if(Ur){if(!Tn(Pe,function(Y,K){if(!ye(Ur,K)&&(gi===Y||Mt(gi,Y,ke,rt,dn)))return Ur.push(K)})){zr=!1;break}}else if(!(gi===M||Mt(gi,M,ke,rt,dn))){zr=!1;break}}return dn.delete(Le),dn.delete(Pe),zr}function mo(Le,Pe,ke,rt,Mt,dn,sr){switch(ke){case P:if(Le.byteLength!=Pe.byteLength||Le.byteOffset!=Pe.byteOffset)return!1;Le=Le.buffer,Pe=Pe.buffer;case B:return!(Le.byteLength!=Pe.byteLength||!dn(new Be(Le),new Be(Pe)));case f:case c:case m:return ha(+Le,+Pe);case d:return Le.name==Pe.name&&Le.message==Pe.message;case E:case w:return Le==Pe+"";case g:var dr=Re;case C:var hr=rt&i;if(dr||(dr=Z),Le.size!=Pe.size&&!hr)return!1;var pr=sr.get(Le);if(pr)return pr==Pe;rt|=o,sr.set(Le,Pe);var Yr=Po(dr(Le),dr(Pe),rt,Mt,dn,sr);return sr.delete(Le),Yr;case T:if(yi)return yi.call(Le)==yi.call(Pe)}return!1}function es(Le,Pe,ke,rt,Mt,dn){var sr=ke&i,dr=ts(Le),hr=dr.length,pr=ts(Pe),Yr=pr.length;if(hr!=Yr&&!sr)return!1;for(var zr=hr;zr--;){var Ur=dr[zr];if(!(sr?Ur in Pe:V.call(Pe,Ur)))return!1}var gi=dn.get(Le);if(gi&&dn.get(Pe))return gi==Pe;var M=!0;dn.set(Le,Pe),dn.set(Pe,Le);for(var z=sr;++zr<hr;){Ur=dr[zr];var Y=Le[Ur],K=Pe[Ur];if(rt)var ce=sr?rt(K,Y,Ur,Pe,Le,dn):rt(Y,K,Ur,Le,Pe,dn);if(!(ce===void 0?Y===K||Mt(Y,K,ke,rt,dn):ce)){M=!1;break}z||(z=Ur=="constructor")}if(M&&!z){var ae=Le.constructor,pe=Pe.constructor;ae!=pe&&"constructor"in Le&&"constructor"in Pe&&!(typeof ae=="function"&&ae instanceof ae&&typeof pe=="function"&&pe instanceof pe)&&(M=!1)}return dn.delete(Le),dn.delete(Pe),M}function ts(Le){return Ir(Le,pa,Bo)}function ws(Le,Pe){var ke=Le.__data__;return Vr(Pe)?ke[typeof Pe=="string"?"string":"hash"]:ke.map}function ns(Le,Pe){var ke=Se(Le,Pe);return no(ke)?ke:void 0}function _s(Le){var Pe=V.call(Le,ut),ke=Le[ut];try{Le[ut]=void 0;var rt=!0}catch{}var Mt=he.call(Le);return rt&&(Pe?Le[ut]=ke:delete Le[ut]),Mt}var Bo=Tt?function(Le){return Le==null?[]:(Le=Object(Le),zt(Tt(Le),function(Pe){return We.call(Le,Pe)}))}:ga,rs=ri;(Pt&&rs(new Pt(new ArrayBuffer(1)))!=P||bn&&rs(new bn)!=g||_n&&rs(_n.resolve())!=x||un&&rs(new un)!=C||Wn&&rs(new Wn)!=L)&&(rs=function(Le){var Pe=ri(Le),ke=Pe==v?Le.constructor:void 0,rt=ke?is(ke):"";if(rt)switch(rt){case wr:return P;case Ao:return g;case Gi:return x;case _i:return C;case $s:return L}return Pe});function Es(Le,Pe){return Pe=Pe??s,!!Pe&&(typeof Le=="number"||se.test(Le))&&Le>-1&&Le%1==0&&Le<Pe}function Vr(Le){var Pe=typeof Le;return Pe=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?Le!=="__proto__":Le===null}function Co(Le){return!!fe&&fe in Le}function hs(Le){var Pe=Le&&Le.constructor,ke=typeof Pe=="function"&&Pe.prototype||be;return Le===ke}function da(Le){return he.call(Le)}function is(Le){if(Le!=null){try{return je.call(Le)}catch{}try{return Le+""}catch{}}return""}function ha(Le,Pe){return Le===Pe||Le!==Le&&Pe!==Pe}var js=xn(function(){return arguments}())?xn:function(Le){return vo(Le)&&V.call(Le,"callee")&&!We.call(Le,"callee")},Go=Array.isArray;function Wi(Le){return Le!=null&&Hs(Le.length)&&!os(Le)}var zo=Ut||Uo;function ps(Le,Pe){return Bi(Le,Pe)}function os(Le){if(!Ia(Le))return!1;var Pe=ri(Le);return Pe==p||Pe==h||Pe==u||Pe==_}function Hs(Le){return typeof Le=="number"&&Le>-1&&Le%1==0&&Le<=s}function Ia(Le){var Pe=typeof Le;return Le!=null&&(Pe=="object"||Pe=="function")}function vo(Le){return Le!=null&&typeof Le=="object"}var co=ht?Te(ht):Us;function pa(Le){return Wi(Le)?fr(Le):No(Le)}function ga(){return[]}function Uo(){return!1}e.exports=ps}(u_,u_.exports)),u_.exports}var mTt=gTt();const HCe=Fa(mTt);/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */var O5,qCe;function GCe(){if(qCe)return O5;qCe=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:s,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;o||(o=function(U){return U}),s||(s=function(U){return U}),l||(l=function(U,Z,re){return U.apply(Z,re)}),u||(u=function(U,Z){return new U(...Z)});const f=T(Array.prototype.forEach),c=T(Array.prototype.lastIndexOf),d=T(Array.prototype.pop),p=T(Array.prototype.push),h=T(Array.prototype.splice),g=T(String.prototype.toLowerCase),m=T(String.prototype.toString),y=T(String.prototype.match),v=T(String.prototype.replace),x=T(String.prototype.indexOf),_=T(String.prototype.trim),E=T(Object.prototype.hasOwnProperty),C=T(RegExp.prototype.test),w=R(TypeError);function T(Re){return function(U){U instanceof RegExp&&(U.lastIndex=0);for(var Z=arguments.length,re=new Array(Z>1?Z-1:0),ie=1;ie<Z;ie++)re[ie-1]=arguments[ie];return l(Re,U,re)}}function R(Re){return function(){for(var U=arguments.length,Z=new Array(U),re=0;re<U;re++)Z[re]=arguments[re];return u(Re,Z)}}function L(Re,U){let Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g;t&&t(Re,null);let re=U.length;for(;re--;){let ie=U[re];if(typeof ie=="string"){const be=Z(ie);be!==ie&&(n(U)||(U[re]=be),ie=be)}Re[ie]=!0}return Re}function B(Re){for(let U=0;U<Re.length;U++)E(Re,U)||(Re[U]=null);return Re}function P(Re){const U=a(null);for(const[Z,re]of e(Re))E(Re,Z)&&(Array.isArray(re)?U[Z]=B(re):re&&typeof re=="object"&&re.constructor===Object?U[Z]=P(re):U[Z]=re);return U}function S(Re,U){for(;Re!==null;){const re=i(Re,U);if(re){if(re.get)return T(re.get);if(typeof re.value=="function")return T(re.value)}Re=r(Re)}function Z(){return null}return Z}const k=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),W=o(["#text"]),Q=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ee=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),se=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ne=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ge=s(/<%[\w\W]*|[\w\W]*%>/gm),we=s(/\$\{[\w\W]*/gm),$e=s(/^data-[\-\w.\u00B7-\uFFFF]+$/),ve=s(/^aria-[\-\w]+$/),Ee=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ve=s(/^(?:\w+script|data):/i),Ue=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ft=s(/^html$/i),ht=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var zt=Object.freeze({__proto__:null,ARIA_ATTR:ve,ATTR_WHITESPACE:Ue,CUSTOM_ELEMENT:ht,DATA_ATTR:$e,DOCTYPE_NAME:ft,ERB_EXPR:ge,IS_ALLOWED_URI:Ee,IS_SCRIPT_OR_DATA:Ve,MUSTACHE_EXPR:ne,TMPLIT_EXPR:we});const $t={element:1,text:3,progressingInstruction:7,comment:8,document:9},Tn=function(){return typeof window>"u"?null:window},it=function(U,Z){if(typeof U!="object"||typeof U.createPolicy!="function")return null;let re=null;const ie="data-tt-policy-suffix";Z&&Z.hasAttribute(ie)&&(re=Z.getAttribute(ie));const be="dompurify"+(re?"#"+re:"");try{return U.createPolicy(be,{createHTML(Ce){return Ce},createScriptURL(Ce){return Ce}})}catch{return console.warn("TrustedTypes policy "+be+" could not be created."),null}},Te=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ye(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tn();const U=Pe=>ye(Pe);if(U.version="3.2.5",U.removed=[],!Re||!Re.document||Re.document.nodeType!==$t.document||!Re.Element)return U.isSupported=!1,U;let{document:Z}=Re;const re=Z,ie=re.currentScript,{DocumentFragment:be,HTMLTemplateElement:Ce,Node:je,Element:V,NodeFilter:fe,NamedNodeMap:he=Re.NamedNodeMap||Re.MozNamedAttrMap,HTMLFormElement:me,DOMParser:Oe,trustedTypes:Me}=Re,Be=V.prototype,We=S(Be,"cloneNode"),Qe=S(Be,"remove"),ut=S(Be,"nextSibling"),Tt=S(Be,"childNodes"),Ut=S(Be,"parentNode");if(typeof Ce=="function"){const Pe=Z.createElement("template");Pe.content&&Pe.content.ownerDocument&&(Z=Pe.content.ownerDocument)}let Kt,Pt="";const{implementation:bn,createNodeIterator:_n,createDocumentFragment:un,getElementsByTagName:Wn}=Z,{importNode:qn}=re;let wr=Te();U.isSupported=typeof e=="function"&&typeof Ut=="function"&&bn&&bn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ao,ERB_EXPR:Gi,TMPLIT_EXPR:_i,DATA_ATTR:$s,ARIA_ATTR:tr,IS_SCRIPT_OR_DATA:yi,ATTR_WHITESPACE:pi,CUSTOM_ELEMENT:_r}=zt;let{IS_ALLOWED_URI:uo}=zt,Or=null;const go=L({},[...k,...D,...O,...j,...W]);let Zr=null;const Fi=L({},[...Q,...ee,...H,...se]);let or=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Fe=null,Xe=null,Et=!0,pt=!0,Yt=!1,An=!0,Rn=!1,Ht=!0,mt=!1,jn=!1,Vn=!1,an=!1,gn=!1,Qr=!1,Wr=!0,Ln=!1;const dt="user-content-";let Nt=!0,Rr=!1,fr={},Er=null;const Ir=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ri=null;const xn=L({},["audio","video","img","source","image","track"]);let Bi=null;const Io=L({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),no="http://www.w3.org/1998/Math/MathML",Us="http://www.w3.org/2000/svg",No="http://www.w3.org/1999/xhtml";let Po=No,mo=!1,es=null;const ts=L({},[no,Us,No],m);let ws=L({},["mi","mo","mn","ms","mtext"]),ns=L({},["annotation-xml"]);const _s=L({},["title","style","font","a","script"]);let Bo=null;const rs=["application/xhtml+xml","text/html"],Es="text/html";let Vr=null,Co=null;const hs=Z.createElement("form"),da=function(ke){return ke instanceof RegExp||ke instanceof Function},is=function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Co&&Co===ke)){if((!ke||typeof ke!="object")&&(ke={}),ke=P(ke),Bo=rs.indexOf(ke.PARSER_MEDIA_TYPE)===-1?Es:ke.PARSER_MEDIA_TYPE,Vr=Bo==="application/xhtml+xml"?m:g,Or=E(ke,"ALLOWED_TAGS")?L({},ke.ALLOWED_TAGS,Vr):go,Zr=E(ke,"ALLOWED_ATTR")?L({},ke.ALLOWED_ATTR,Vr):Fi,es=E(ke,"ALLOWED_NAMESPACES")?L({},ke.ALLOWED_NAMESPACES,m):ts,Bi=E(ke,"ADD_URI_SAFE_ATTR")?L(P(Io),ke.ADD_URI_SAFE_ATTR,Vr):Io,ri=E(ke,"ADD_DATA_URI_TAGS")?L(P(xn),ke.ADD_DATA_URI_TAGS,Vr):xn,Er=E(ke,"FORBID_CONTENTS")?L({},ke.FORBID_CONTENTS,Vr):Ir,Fe=E(ke,"FORBID_TAGS")?L({},ke.FORBID_TAGS,Vr):{},Xe=E(ke,"FORBID_ATTR")?L({},ke.FORBID_ATTR,Vr):{},fr=E(ke,"USE_PROFILES")?ke.USE_PROFILES:!1,Et=ke.ALLOW_ARIA_ATTR!==!1,pt=ke.ALLOW_DATA_ATTR!==!1,Yt=ke.ALLOW_UNKNOWN_PROTOCOLS||!1,An=ke.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Rn=ke.SAFE_FOR_TEMPLATES||!1,Ht=ke.SAFE_FOR_XML!==!1,mt=ke.WHOLE_DOCUMENT||!1,an=ke.RETURN_DOM||!1,gn=ke.RETURN_DOM_FRAGMENT||!1,Qr=ke.RETURN_TRUSTED_TYPE||!1,Vn=ke.FORCE_BODY||!1,Wr=ke.SANITIZE_DOM!==!1,Ln=ke.SANITIZE_NAMED_PROPS||!1,Nt=ke.KEEP_CONTENT!==!1,Rr=ke.IN_PLACE||!1,uo=ke.ALLOWED_URI_REGEXP||Ee,Po=ke.NAMESPACE||No,ws=ke.MATHML_TEXT_INTEGRATION_POINTS||ws,ns=ke.HTML_INTEGRATION_POINTS||ns,or=ke.CUSTOM_ELEMENT_HANDLING||{},ke.CUSTOM_ELEMENT_HANDLING&&da(ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(or.tagNameCheck=ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&da(ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(or.attributeNameCheck=ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&typeof ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(or.allowCustomizedBuiltInElements=ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Rn&&(pt=!1),gn&&(an=!0),fr&&(Or=L({},W),Zr=[],fr.html===!0&&(L(Or,k),L(Zr,Q)),fr.svg===!0&&(L(Or,D),L(Zr,ee),L(Zr,se)),fr.svgFilters===!0&&(L(Or,O),L(Zr,ee),L(Zr,se)),fr.mathMl===!0&&(L(Or,j),L(Zr,H),L(Zr,se))),ke.ADD_TAGS&&(Or===go&&(Or=P(Or)),L(Or,ke.ADD_TAGS,Vr)),ke.ADD_ATTR&&(Zr===Fi&&(Zr=P(Zr)),L(Zr,ke.ADD_ATTR,Vr)),ke.ADD_URI_SAFE_ATTR&&L(Bi,ke.ADD_URI_SAFE_ATTR,Vr),ke.FORBID_CONTENTS&&(Er===Ir&&(Er=P(Er)),L(Er,ke.FORBID_CONTENTS,Vr)),Nt&&(Or["#text"]=!0),mt&&L(Or,["html","head","body"]),Or.table&&(L(Or,["tbody"]),delete Fe.tbody),ke.TRUSTED_TYPES_POLICY){if(typeof ke.TRUSTED_TYPES_POLICY.createHTML!="function")throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ke.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Kt=ke.TRUSTED_TYPES_POLICY,Pt=Kt.createHTML("")}else Kt===void 0&&(Kt=it(Me,ie)),Kt!==null&&typeof Pt=="string"&&(Pt=Kt.createHTML(""));o&&o(ke),Co=ke}},ha=L({},[...D,...O,...N]),js=L({},[...j,...q]),Go=function(ke){let rt=Ut(ke);(!rt||!rt.tagName)&&(rt={namespaceURI:Po,tagName:"template"});const Mt=g(ke.tagName),dn=g(rt.tagName);return es[ke.namespaceURI]?ke.namespaceURI===Us?rt.namespaceURI===No?Mt==="svg":rt.namespaceURI===no?Mt==="svg"&&(dn==="annotation-xml"||ws[dn]):!!ha[Mt]:ke.namespaceURI===no?rt.namespaceURI===No?Mt==="math":rt.namespaceURI===Us?Mt==="math"&&ns[dn]:!!js[Mt]:ke.namespaceURI===No?rt.namespaceURI===Us&&!ns[dn]||rt.namespaceURI===no&&!ws[dn]?!1:!js[Mt]&&(_s[Mt]||!ha[Mt]):!!(Bo==="application/xhtml+xml"&&es[ke.namespaceURI]):!1},Wi=function(ke){p(U.removed,{element:ke});try{Ut(ke).removeChild(ke)}catch{Qe(ke)}},zo=function(ke,rt){try{p(U.removed,{attribute:rt.getAttributeNode(ke),from:rt})}catch{p(U.removed,{attribute:null,from:rt})}if(rt.removeAttribute(ke),ke==="is")if(an||gn)try{Wi(rt)}catch{}else try{rt.setAttribute(ke,"")}catch{}},ps=function(ke){let rt=null,Mt=null;if(Vn)ke="<remove></remove>"+ke;else{const dr=y(ke,/^[\r\n\t ]+/);Mt=dr&&dr[0]}Bo==="application/xhtml+xml"&&Po===No&&(ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ke+"</body></html>");const dn=Kt?Kt.createHTML(ke):ke;if(Po===No)try{rt=new Oe().parseFromString(dn,Bo)}catch{}if(!rt||!rt.documentElement){rt=bn.createDocument(Po,"template",null);try{rt.documentElement.innerHTML=mo?Pt:dn}catch{}}const sr=rt.body||rt.documentElement;return ke&&Mt&&sr.insertBefore(Z.createTextNode(Mt),sr.childNodes[0]||null),Po===No?Wn.call(rt,mt?"html":"body")[0]:mt?rt.documentElement:sr},os=function(ke){return _n.call(ke.ownerDocument||ke,ke,fe.SHOW_ELEMENT|fe.SHOW_COMMENT|fe.SHOW_TEXT|fe.SHOW_PROCESSING_INSTRUCTION|fe.SHOW_CDATA_SECTION,null)},Hs=function(ke){return ke instanceof me&&(typeof ke.nodeName!="string"||typeof ke.textContent!="string"||typeof ke.removeChild!="function"||!(ke.attributes instanceof he)||typeof ke.removeAttribute!="function"||typeof ke.setAttribute!="function"||typeof ke.namespaceURI!="string"||typeof ke.insertBefore!="function"||typeof ke.hasChildNodes!="function")},Ia=function(ke){return typeof je=="function"&&ke instanceof je};function vo(Pe,ke,rt){f(Pe,Mt=>{Mt.call(U,ke,rt,Co)})}const co=function(ke){let rt=null;if(vo(wr.beforeSanitizeElements,ke,null),Hs(ke))return Wi(ke),!0;const Mt=Vr(ke.nodeName);if(vo(wr.uponSanitizeElement,ke,{tagName:Mt,allowedTags:Or}),ke.hasChildNodes()&&!Ia(ke.firstElementChild)&&C(/<[/\w!]/g,ke.innerHTML)&&C(/<[/\w!]/g,ke.textContent)||ke.nodeType===$t.progressingInstruction||Ht&&ke.nodeType===$t.comment&&C(/<[/\w]/g,ke.data))return Wi(ke),!0;if(!Or[Mt]||Fe[Mt]){if(!Fe[Mt]&&ga(Mt)&&(or.tagNameCheck instanceof RegExp&&C(or.tagNameCheck,Mt)||or.tagNameCheck instanceof Function&&or.tagNameCheck(Mt)))return!1;if(Nt&&!Er[Mt]){const dn=Ut(ke)||ke.parentNode,sr=Tt(ke)||ke.childNodes;if(sr&&dn){const dr=sr.length;for(let hr=dr-1;hr>=0;--hr){const pr=We(sr[hr],!0);pr.__removalCount=(ke.__removalCount||0)+1,dn.insertBefore(pr,ut(ke))}}}return Wi(ke),!0}return ke instanceof V&&!Go(ke)||(Mt==="noscript"||Mt==="noembed"||Mt==="noframes")&&C(/<\/no(script|embed|frames)/i,ke.innerHTML)?(Wi(ke),!0):(Rn&&ke.nodeType===$t.text&&(rt=ke.textContent,f([Ao,Gi,_i],dn=>{rt=v(rt,dn," ")}),ke.textContent!==rt&&(p(U.removed,{element:ke.cloneNode()}),ke.textContent=rt)),vo(wr.afterSanitizeElements,ke,null),!1)},pa=function(ke,rt,Mt){if(Wr&&(rt==="id"||rt==="name")&&(Mt in Z||Mt in hs))return!1;if(!(pt&&!Xe[rt]&&C($s,rt))){if(!(Et&&C(tr,rt))){if(!Zr[rt]||Xe[rt]){if(!(ga(ke)&&(or.tagNameCheck instanceof RegExp&&C(or.tagNameCheck,ke)||or.tagNameCheck instanceof Function&&or.tagNameCheck(ke))&&(or.attributeNameCheck instanceof RegExp&&C(or.attributeNameCheck,rt)||or.attributeNameCheck instanceof Function&&or.attributeNameCheck(rt))||rt==="is"&&or.allowCustomizedBuiltInElements&&(or.tagNameCheck instanceof RegExp&&C(or.tagNameCheck,Mt)||or.tagNameCheck instanceof Function&&or.tagNameCheck(Mt))))return!1}else if(!Bi[rt]){if(!C(uo,v(Mt,pi,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&ke!=="script"&&x(Mt,"data:")===0&&ri[ke])){if(!(Yt&&!C(yi,v(Mt,pi,"")))){if(Mt)return!1}}}}}}return!0},ga=function(ke){return ke!=="annotation-xml"&&y(ke,_r)},Uo=function(ke){vo(wr.beforeSanitizeAttributes,ke,null);const{attributes:rt}=ke;if(!rt||Hs(ke))return;const Mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zr,forceKeepAttr:void 0};let dn=rt.length;for(;dn--;){const sr=rt[dn],{name:dr,namespaceURI:hr,value:pr}=sr,Yr=Vr(dr);let zr=dr==="value"?pr:_(pr);if(Mt.attrName=Yr,Mt.attrValue=zr,Mt.keepAttr=!0,Mt.forceKeepAttr=void 0,vo(wr.uponSanitizeAttribute,ke,Mt),zr=Mt.attrValue,Ln&&(Yr==="id"||Yr==="name")&&(zo(dr,ke),zr=dt+zr),Ht&&C(/((--!?|])>)|<\/(style|title)/i,zr)){zo(dr,ke);continue}if(Mt.forceKeepAttr||(zo(dr,ke),!Mt.keepAttr))continue;if(!An&&C(/\/>/i,zr)){zo(dr,ke);continue}Rn&&f([Ao,Gi,_i],gi=>{zr=v(zr,gi," ")});const Ur=Vr(ke.nodeName);if(pa(Ur,Yr,zr)){if(Kt&&typeof Me=="object"&&typeof Me.getAttributeType=="function"&&!hr)switch(Me.getAttributeType(Ur,Yr)){case"TrustedHTML":{zr=Kt.createHTML(zr);break}case"TrustedScriptURL":{zr=Kt.createScriptURL(zr);break}}try{hr?ke.setAttributeNS(hr,dr,zr):ke.setAttribute(dr,zr),Hs(ke)?Wi(ke):d(U.removed)}catch{}}}vo(wr.afterSanitizeAttributes,ke,null)},Le=function Pe(ke){let rt=null;const Mt=os(ke);for(vo(wr.beforeSanitizeShadowDOM,ke,null);rt=Mt.nextNode();)vo(wr.uponSanitizeShadowNode,rt,null),co(rt),Uo(rt),rt.content instanceof be&&Pe(rt.content);vo(wr.afterSanitizeShadowDOM,ke,null)};return U.sanitize=function(Pe){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt=null,Mt=null,dn=null,sr=null;if(mo=!Pe,mo&&(Pe="<!-->"),typeof Pe!="string"&&!Ia(Pe))if(typeof Pe.toString=="function"){if(Pe=Pe.toString(),typeof Pe!="string")throw w("dirty is not a string, aborting")}else throw w("toString is not a function");if(!U.isSupported)return Pe;if(jn||is(ke),U.removed=[],typeof Pe=="string"&&(Rr=!1),Rr){if(Pe.nodeName){const pr=Vr(Pe.nodeName);if(!Or[pr]||Fe[pr])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(Pe instanceof je)rt=ps("<!---->"),Mt=rt.ownerDocument.importNode(Pe,!0),Mt.nodeType===$t.element&&Mt.nodeName==="BODY"||Mt.nodeName==="HTML"?rt=Mt:rt.appendChild(Mt);else{if(!an&&!Rn&&!mt&&Pe.indexOf("<")===-1)return Kt&&Qr?Kt.createHTML(Pe):Pe;if(rt=ps(Pe),!rt)return an?null:Qr?Pt:""}rt&&Vn&&Wi(rt.firstChild);const dr=os(Rr?Pe:rt);for(;dn=dr.nextNode();)co(dn),Uo(dn),dn.content instanceof be&&Le(dn.content);if(Rr)return Pe;if(an){if(gn)for(sr=un.call(rt.ownerDocument);rt.firstChild;)sr.appendChild(rt.firstChild);else sr=rt;return(Zr.shadowroot||Zr.shadowrootmode)&&(sr=qn.call(re,sr,!0)),sr}let hr=mt?rt.outerHTML:rt.innerHTML;return mt&&Or["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&C(ft,rt.ownerDocument.doctype.name)&&(hr="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+hr),Rn&&f([Ao,Gi,_i],pr=>{hr=v(hr,pr," ")}),Kt&&Qr?Kt.createHTML(hr):hr},U.setConfig=function(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};is(Pe),jn=!0},U.clearConfig=function(){Co=null,jn=!1},U.isValidAttribute=function(Pe,ke,rt){Co||is({});const Mt=Vr(Pe),dn=Vr(ke);return pa(Mt,dn,rt)},U.addHook=function(Pe,ke){typeof ke=="function"&&p(wr[Pe],ke)},U.removeHook=function(Pe,ke){if(ke!==void 0){const rt=c(wr[Pe],ke);return rt===-1?void 0:h(wr[Pe],rt,1)[0]}return d(wr[Pe])},U.removeHooks=function(Pe){wr[Pe]=[]},U.removeAllHooks=function(){wr=Te()},U}var Se=ye();return O5=Se,O5}var I5,WCe;function vTt(){return WCe||(WCe=1,I5=window.DOMPurify||(window.DOMPurify=GCe().default||GCe())),I5}var yTt=vTt();const bTt=Fa(yTt);var jl,Np,pPe,gPe,X8;class hPe extends Pi{constructor(){super();zn(this,Np);zn(this,jl,null);this.schema=null,this.value=null,this.options={},this.noShadow=!1,this.unstyled=!1,this.customEditorInterfaces=[]}get editor(){return fn(this,jl)}get schema(){return this._schema}set schema(n){fn(this,jl)&&!HCe(this._schema,n)&&fn(this,jl).destroy(),this._schema=n}get value(){return this._value}set value(n){fn(this,jl)&&fn(this,jl).ready&&!HCe(this._value,n)&&fn(this,jl).setValue(n),this._value=n}async updated(n){this._value=await UCe(this.value),n.has("schema")?(this._schema=await UCe(this.schema),(!fn(this,jl)||fn(this,jl).destroyed)&&(ko(this,jl,await zCe(this)),In(this,Np,X8).call(this))):n.has("customEditorInterfaces")&&this.customEditorInterfaces&&(ko(this,jl,await zCe(this)),In(this,Np,X8).call(this)),dTt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var n;return yt`
      <style>
        ${hTt}
        ${!this.unstyled&&YL}
        ${!this.unstyled&&pTt}
        ${((n=this.options)==null?void 0:n.disable_properties)===!1?"":`
          form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-header,
          form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-object__controls {
            display: none;
          }
        `}
      </style>
      <form></form>
    `}}jl=new WeakMap,Np=new WeakSet,pPe=function(){this.dispatchEvent(new Event("ready"))},gPe=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},X8=function(){["ready","change"].map(r=>{fn(this,jl).on(r,()=>{r==="ready"&&In(this,Np,pPe).call(this),this._value=fn(this,jl).getValue(),In(this,Np,gPe).call(this)})})},Cn(hPe,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},customEditorInterfaces:{attribute:!1,type:Array},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",hPe);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var vi=e=>e!==void 0,mPe=(e,t,n)=>t in e?e[t]:e[t]=n;const NE={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class xTt{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,n){return i$(t,n).join("")}}function i$(e,t){return vPe(e,t,[]).join("")}function vPe(e,t,n){if(e.nodeType===NE.CDATA_SECTION||e.nodeType===NE.TEXT)t?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var r;for(r=e.firstChild;r;r=r.nextSibling)vPe(r,t,n)}return n}function wTt(e,t,n,r){for(var i=_Tt(t);i;i=ETt(i)){var o=i.namespaceURI||null,s=e[o];if(vi(s)){var a=s[i.localName];vi(a)&&a.call(r,i,n)}}}function _Tt(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==NE.ELEMENT;)t=t.nextSibling;return t}function ETt(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==NE.ELEMENT;)t=t.nextSibling;return t}function il(e,t,n){return ATt(e,t,n)}function ATt(e,t,n){var r=vi(n)?n:{},i,o;for(i=0,o=e.length;i<o;++i)r[e[i]]=t;return r}function yPe(e,t){return function(n,r){var i=e.call(vi(t)?t:this,n,r);if(vi(i)){var o=r[r.length-1];o.push(i)}}}function Oa(e,t,n,r,i){return r.push(e),wTt(t,n,r,i),r.pop()}function Un(e,t,n){return function(r,i){let o=e.call(vi(n)?n:this,r,i);if(vi(o)){var s=i[i.length-1],a=vi(t)?t:r.localName;s[a]=o}}}function yu(e,t,n){return function(r,i){var o=e.call(vi(n)?n:this,r,i);if(vi(o)){var s=i[i.length-1],a=vi(t)?t:r.localName,l=mPe(s,a,[]);l.push(o)}}}const CTt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function STt(e){return e.replace(CTt,"")}function wv(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return vi(t[1])||!1}function Ob(e){return fp(i$(e,!1))}function fp(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function N5(e){return CD(i$(e,!1))}function CD(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Zi(e){return STt(i$(e,!1))}const kTt="http://www.w3.org/1999/xlink";function LU(e){return e.getAttributeNS(kTt,"href")}function TTt(e,t){return Oa({},tDt,e,t)}function bPe(e){return[fp(e.getAttribute("minx")),fp(e.getAttribute("miny")),fp(e.getAttribute("maxx")),fp(e.getAttribute("maxy"))]}function DTt(e,t){const n=bPe(e),r=[fp(e.getAttribute("resx")),fp(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:n,res:r}}function LTt(e,t){const n=bPe(e);if(!(!vi(n[0])||!vi(n[1])||!vi(n[2])||!vi(n[3])))return n}function RTt(e,t){const n=parseFloat(e.getAttribute("min")),r=parseFloat(e.getAttribute("max"));return{min:n,max:r}}function FTt(e,t){const n=Oa({},nDt,e,t);if(!vi(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(!(!vi(r)||!vi(i)||!vi(o)||!vi(s)))return[r,i,o,s]}function $Tt(e,t){return Oa({},XTt,e,t)}function MTt(e,t){return Oa({},KTt,e,t)}function OTt(e,t){return Oa({},ZTt,e,t)}function ITt(e,t){return Oa({},QTt,e,t)}function NTt(e,t){return Oa({},JTt,e,t)}function PTt(e,t){return Oa([],eDt,e,t)}function BTt(e,t){const n=wv(e.getAttribute("queryable"));return Oa({queryable:vi(n)?n:!1},_Pe,e,t)}function zTt(e,t){var n=t[t.length-1];const r=Oa({},_Pe,e,t);if(!vi(r))return;let i=wv(e.getAttribute("queryable"));vi(i)||(i=n.queryable),r.queryable=vi(i)?i:!1;let o=CD(e.getAttribute("cascaded"));vi(o)||(o=n.cascaded),r.cascaded=o;let s=wv(e.getAttribute("opaque"));vi(s)||(s=n.opaque),r.opaque=vi(s)?s:!1;let a=wv(e.getAttribute("noSubsets"));vi(a)||(a=n.noSubsets),r.noSubsets=vi(a)?a:!1;let l=fp(e.getAttribute("fixedWidth"));vi(l)||(l=n.fixedWidth),r.fixedWidth=l;let u=fp(e.getAttribute("fixedHeight"));vi(u)||(u=n.fixedHeight),r.fixedHeight=u;const f=["Style","CRS","AuthorityURL"];for(let d=0,p=f.length;d<p;d++){const h=f[d],g=n[h];if(vi(g)){let m=mPe(r,h,[]);m=m.concat(g),r[h]=m}}const c=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,p=c.length;d<p;d++){const h=c[d],g=r[h];if(!vi(g)){const m=n[h];r[h]=m}}return r}function UTt(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:wv(e.getAttribute("multipleValues")),nearestValue:wv(e.getAttribute("nearestValue")),current:wv(e.getAttribute("current")),values:Zi(e)}}function Fp(e,t){return Oa({},lDt,e,t)}function jTt(e,t){return Oa({},rDt,e,t)}function HTt(e,t){return Oa({},oDt,e,t)}function qTt(e,t){return Oa({},sDt,e,t)}function P5(e,t){return Oa({},iDt,e,t)}function xPe(e,t){var n=Fp(e,t);if(vi(n)){const r=[CD(e.getAttribute("width")),CD(e.getAttribute("height"))];return n.size=r,n}}function GTt(e,t){var n=Fp(e,t);if(vi(n))return n.name=e.getAttribute("name"),n}function WTt(e,t){var n=Fp(e,t);if(vi(n))return n.type=e.getAttribute("type"),n}function VTt(e,t){return Oa({},aDt,e,t)}function wPe(e,t){return Oa([],uDt,e,t)}const ol=[null,"http://www.opengis.net/wms"],YTt=il(ol,{Service:Un(MTt),Capability:Un($Tt)}),XTt=il(ol,{Request:Un(jTt),Exception:Un(PTt),Layer:Un(BTt)}),KTt=il(ol,{Name:Un(Zi),Title:Un(Zi),Abstract:Un(Zi),KeywordList:Un(wPe),OnlineResource:Un(LU),ContactInformation:Un(OTt),Fees:Un(Zi),AccessConstraints:Un(Zi),LayerLimit:Un(N5),MaxWidth:Un(N5),MaxHeight:Un(N5)}),ZTt=il(ol,{ContactPersonPrimary:Un(ITt),ContactPosition:Un(Zi),ContactAddress:Un(NTt),ContactVoiceTelephone:Un(Zi),ContactFacsimileTelephone:Un(Zi),ContactElectronicMailAddress:Un(Zi)}),QTt=il(ol,{ContactPerson:Un(Zi),ContactOrganization:Un(Zi)}),JTt=il(ol,{AddressType:Un(Zi),Address:Un(Zi),City:Un(Zi),StateOrProvince:Un(Zi),PostCode:Un(Zi),Country:Un(Zi)}),eDt=il(ol,{Format:yPe(Zi)}),_Pe=il(ol,{Name:Un(Zi),Title:Un(Zi),Abstract:Un(Zi),KeywordList:Un(wPe),CRS:yu(Zi),SRS:yu(Zi),EX_GeographicBoundingBox:Un(FTt),LatLonBoundingBox:Un(LTt),BoundingBox:yu(DTt),Dimension:yu(UTt),Attribution:Un(TTt),AuthorityURL:yu(GTt),Identifier:yu(Zi),MetadataURL:yu(WTt),DataURL:yu(Fp),FeatureListURL:yu(Fp),Style:yu(VTt),MinScaleDenominator:Un(Ob),MaxScaleDenominator:Un(Ob),ScaleHint:Un(RTt),Layer:yu(zTt)}),tDt=il(ol,{Title:Un(Zi),OnlineResource:Un(LU),LogoURL:Un(xPe)}),nDt=il(ol,{westBoundLongitude:Un(Ob),eastBoundLongitude:Un(Ob),southBoundLatitude:Un(Ob),northBoundLatitude:Un(Ob)}),rDt=il(ol,{GetCapabilities:Un(P5),GetMap:Un(P5),GetFeatureInfo:Un(P5)}),iDt=il(ol,{Format:yu(Zi),DCPType:yu(HTt)}),oDt=il(ol,{HTTP:Un(qTt)}),sDt=il(ol,{Get:Un(Fp),Post:Un(Fp)}),aDt=il(ol,{Name:Un(Zi),Title:Un(Zi),Abstract:Un(Zi),LegendURL:yu(xPe),StyleSheetURL:Un(Fp),StyleURL:Un(Fp)}),lDt=il(ol,{Format:Un(Zi),OnlineResource:Un(LU)}),uDt=il(ol,{Keyword:yPe(Zi)});class cDt{constructor(t,n){!n&&typeof window<"u"&&(n=window.DOMParser),this.version=void 0,this._parser=new xTt(n),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==NE.ELEMENT)return this.readFromNode(n);return null}readFromNode(t){return this.version=t.getAttribute("version"),Oa({version:this.version},YTt,t,[])||null}}async function fDt(e){let t=new URL(e),n=t.searchParams;n.set("SERVICE","WMS"),n.set("REQUEST","GetCapabilities");let r=t.toString();const i=await fetch(r);if(i.ok){const o=await i.text();return new cDt(o).toJSON()}else throw new Error(`Error: ${i.status}`)}function RU(e){const t=/\b(?:wms|ows)\b/i,n=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return t.test(e)?"TileWMS":n.test(e)?"XYZ":!1}function dDt(e){const n=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(e),r=RU(e);return!!(e&&n&&r)}function EPe(e){return e.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function hDt(e){try{return JSON.parse(EPe(e)),!!e}catch{return!1}}function pDt(e,t){const n=new URL(e).searchParams;Object.entries(t).forEach(([s,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{n.set(l,a[l])}):n.set(s,a)});const r=e.split("?")[0],i=n.toString();return`${r}?${i}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function VCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VCe(Object(n),!0).forEach(function(r){gDt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VCe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u3(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u3=function(t){return typeof t}:u3=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u3(e)}function gDt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $p(){return $p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$p.apply(this,arguments)}function mDt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function vDt(e,t){if(e==null)return{};var n=mDt(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var yDt="1.15.6";function _p(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Yp=_p(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),hC=_p(/Edge/i),YCe=_p(/firefox/i),O_=_p(/safari/i)&&!_p(/chrome/i)&&!_p(/android/i),FU=_p(/iP(ad|od|hone)/i),APe=_p(/chrome/i)&&_p(/android/i),CPe={capture:!1,passive:!1};function Ti(e,t,n){e.addEventListener(t,n,!Yp&&CPe)}function xi(e,t,n){e.removeEventListener(t,n,!Yp&&CPe)}function SD(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function SPe(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _f(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&SD(e,t):SD(e,t))||r&&e===n)return e;if(e===n)break}while(e=SPe(e))}return null}var XCe=/\s+/g;function Vu(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(XCe," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(XCe," ")}}function Sr(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Qb(e,t){var n="";if(typeof e=="string")n=e;else do{var r=Sr(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function kPe(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Wd(){var e=document.scrollingElement;return e||document.documentElement}function Ys(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,a,l,u,f,c;if(e!==window&&e.parentNode&&e!==Wd()?(o=e.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,u=o.right,f=o.height,c=o.width):(s=0,a=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Yp))do if(i&&i.getBoundingClientRect&&(Sr(i,"transform")!=="none"||n&&Sr(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(Sr(i,"border-top-width")),a-=d.left+parseInt(Sr(i,"border-left-width")),l=s+o.height,u=a+o.width;break}while(i=i.parentNode);if(r&&e!==window){var p=Qb(i||e),h=p&&p.a,g=p&&p.d;p&&(s/=g,a/=h,c/=h,f/=g,l=s+f,u=a+c)}return{top:s,left:a,bottom:l,right:u,width:c,height:f}}}function KCe(e,t,n){for(var r=Jg(e,!0),i=Ys(e)[t];r;){var o=Ys(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===Wd())break;r=Jg(r,!1)}return!1}function V1(e,t,n,r){for(var i=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==kr.ghost&&(r||s[o]!==kr.dragged)&&_f(s[o],n.draggable,e,!1)){if(i===t)return s[o];i++}o++}return null}function $U(e,t){for(var n=e.lastElementChild;n&&(n===kr.ghost||Sr(n,"display")==="none"||t&&!SD(n,t));)n=n.previousElementSibling;return n||null}function Dc(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==kr.clone&&(!t||SD(e,t))&&n++;return n}function ZCe(e){var t=0,n=0,r=Wd();if(e)do{var i=Qb(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function bDt(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Jg(e,t){if(!e||!e.getBoundingClientRect)return Wd();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Sr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Wd();if(r||t)return n;r=!0}}while(n=n.parentNode);return Wd()}function xDt(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function B5(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var I_;function TPe(e,t){return function(){if(!I_){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),I_=setTimeout(function(){I_=void 0},t)}}}function wDt(){clearTimeout(I_),I_=void 0}function DPe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function LPe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function RPe(e,t,n){var r={};return Array.from(e.children).forEach(function(i){var o,s,a,l;if(!(!_f(i,t.draggable,e,!1)||i.animated||i===n)){var u=Ys(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,u.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Tu="Sortable"+new Date().getTime();function _Dt(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Sr(i,"display")==="none"||i===kr.ghost)){e.push({target:i,rect:Ys(i)});var o=oh({},e[e.length-1].rect);if(i.thisAnimationDuration){var s=Qb(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(bDt(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;e.forEach(function(a){var l=0,u=a.target,f=u.fromRect,c=Ys(u),d=u.prevFromRect,p=u.prevToRect,h=a.rect,g=Qb(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&B5(d,c)&&!B5(f,c)&&(h.top-c.top)/(h.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(l=ADt(h,d,p,i.options)),B5(c,f)||(u.prevFromRect=f,u.prevToRect=c,l||(l=i.options.animation),i.animate(u,h,c,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,s){if(s){Sr(r,"transition",""),Sr(r,"transform","");var a=Qb(this.el),l=a&&a.a,u=a&&a.d,f=(i.left-o.left)/(l||1),c=(i.top-o.top)/(u||1);r.animatingX=!!f,r.animatingY=!!c,Sr(r,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=EDt(r),Sr(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Sr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Sr(r,"transition",""),Sr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function EDt(e){return e.offsetWidth}function ADt(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var sb=[],z5={initializeByDefault:!0},pC={mount:function(t){for(var n in z5)z5.hasOwnProperty(n)&&!(n in t)&&(t[n]=z5[n]);sb.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),sb.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";sb.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][o]&&n[s.pluginName][o](oh({sortable:n},r)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](oh({sortable:n},r)))})},initializePlugins:function(t,n,r,i){sb.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,$p(r,u.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var r={};return sb.forEach(function(i){typeof i.eventProperties=="function"&&$p(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return sb.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function CDt(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,a=e.fromEl,l=e.oldIndex,u=e.newIndex,f=e.oldDraggableIndex,c=e.newDraggableIndex,d=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[Tu],!!t){var g,m=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Yp&&!hC?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=s||n,g.from=a||n,g.item=i||n,g.clone=o,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=f,g.newDraggableIndex=c,g.originalEvent=d,g.pullMode=p?p.lastPutMode:void 0;var v=oh(oh({},h),pC.getEventProperties(r,t));for(var x in v)g[x]=v[x];n&&n.dispatchEvent(g),m[y]&&m[y].call(t,g)}}var SDt=["evt"],gu=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=vDt(r,SDt);pC.pluginEvent.bind(kr)(t,n,oh({dragEl:sn,parentEl:ks,ghostEl:Pr,rootEl:ls,nextEl:ev,lastDownEl:c3,cloneEl:ms,cloneHidden:Bg,dragStarted:c_,putSortable:za,activeSortable:kr.active,originalEvent:i,oldIndex:Ib,oldDraggableIndex:N_,newIndex:Xu,newDraggableIndex:Mg,hideGhostForTarget:OPe,unhideGhostForTarget:IPe,cloneNowHidden:function(){Bg=!0},cloneNowShown:function(){Bg=!1},dispatchSortableEvent:function(a){zl({sortable:n,name:a,originalEvent:i})}},o))};function zl(e){CDt(oh({putSortable:za,cloneEl:ms,targetEl:sn,rootEl:ls,oldIndex:Ib,oldDraggableIndex:N_,newIndex:Xu,newDraggableIndex:Mg},e))}var sn,ks,Pr,ls,ev,c3,ms,Bg,Ib,Xu,N_,Mg,rk,za,xb=!1,kD=!1,TD=[],j0,pf,U5,j5,QCe,JCe,c_,ab,P_,B_=!1,ik=!1,f3,pl,H5=[],K8=!1,DD=[],o$=typeof document<"u",ok=FU,eSe=hC||Yp?"cssFloat":"float",kDt=o$&&!APe&&!FU&&"draggable"in document.createElement("div"),FPe=function(){if(o$){if(Yp)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),$Pe=function(t,n){var r=Sr(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=V1(t,0,n),s=V1(t,1,n),a=o&&Sr(o),l=s&&Sr(s),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ys(o).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ys(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[eSe]==="none"||s&&r[eSe]==="none"&&u+f>i)?"vertical":"horizontal"},TDt=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||o===l||i+s/2===a+u/2},DDt=function(t,n){var r;return TD.some(function(i){var o=i[Tu].options.emptyInsertThreshold;if(!(!o||$U(i))){var s=Ys(i),a=t>=s.left-o&&t<=s.right+o,l=n>=s.top-o&&n<=s.bottom+o;if(a&&l)return r=i}}),r},MPe=function(t){function n(o,s){return function(a,l,u,f){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||c))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(a,l,u,f),s)(a,l,u,f);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=t.group;(!i||u3(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},OPe=function(){!FPe&&Pr&&Sr(Pr,"display","none")},IPe=function(){!FPe&&Pr&&Sr(Pr,"display","")};o$&&!APe&&document.addEventListener("click",function(e){if(kD)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),kD=!1,!1},!0);var H0=function(t){if(sn){t=t.touches?t.touches[0]:t;var n=DDt(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Tu]._onDragOver(r)}}},LDt=function(t){sn&&sn.parentNode[Tu]._isOutsideThisEl(t.target)};function kr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=$p({},t),e[Tu]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return $Pe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:kr.supportPointer!==!1&&"PointerEvent"in window&&(!O_||FU),emptyInsertThreshold:5};pC.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);MPe(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:kDt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ti(e,"pointerdown",this._onTapStart):(Ti(e,"mousedown",this._onTapStart),Ti(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ti(e,"dragover",this),Ti(e,"dragenter",this)),TD.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),$p(this,_Dt())}kr.prototype={constructor:kr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ab=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,sn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(PDt(r),!sn&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&O_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=_f(l,i.draggable,r,!1),!(l&&l.animated)&&c3!==l)){if(Ib=Dc(l),N_=Dc(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){zl({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),gu("filter",n,{evt:t}),o&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=_f(u,c.trim(),r,!1),c)return zl({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),gu("filter",n,{evt:t}),!0}),f)){o&&t.preventDefault();return}i.handle&&!_f(u,i.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,l;if(r&&!sn&&r.parentNode===o){var u=Ys(r);if(ls=o,sn=r,ks=sn.parentNode,ev=sn.nextSibling,c3=r,rk=s.group,kr.dragged=sn,j0={target:sn,clientX:(n||t).clientX,clientY:(n||t).clientY},QCe=j0.clientX-u.left,JCe=j0.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,sn.style["will-change"]="all",l=function(){if(gu("delayEnded",i,{evt:t}),kr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!YCe&&i.nativeDraggable&&(sn.draggable=!0),i._triggerDragStart(t,n),zl({sortable:i,name:"choose",originalEvent:t}),Vu(sn,s.chosenClass,!0)},s.ignore.split(",").forEach(function(f){kPe(sn,f.trim(),q5)}),Ti(a,"dragover",H0),Ti(a,"mousemove",H0),Ti(a,"touchmove",H0),s.supportPointer?(Ti(a,"pointerup",i._onDrop),!this.nativeDraggable&&Ti(a,"pointercancel",i._onDrop)):(Ti(a,"mouseup",i._onDrop),Ti(a,"touchend",i._onDrop),Ti(a,"touchcancel",i._onDrop)),YCe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,sn.draggable=!0),gu("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(hC||Yp))){if(kr.eventCanceled){this._onDrop();return}s.supportPointer?(Ti(a,"pointerup",i._disableDelayedDrag),Ti(a,"pointercancel",i._disableDelayedDrag)):(Ti(a,"mouseup",i._disableDelayedDrag),Ti(a,"touchend",i._disableDelayedDrag),Ti(a,"touchcancel",i._disableDelayedDrag)),Ti(a,"mousemove",i._delayedDragTouchMoveHandler),Ti(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&Ti(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){sn&&q5(sn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;xi(t,"mouseup",this._disableDelayedDrag),xi(t,"touchend",this._disableDelayedDrag),xi(t,"touchcancel",this._disableDelayedDrag),xi(t,"pointerup",this._disableDelayedDrag),xi(t,"pointercancel",this._disableDelayedDrag),xi(t,"mousemove",this._delayedDragTouchMoveHandler),xi(t,"touchmove",this._delayedDragTouchMoveHandler),xi(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Ti(document,"pointermove",this._onTouchMove):n?Ti(document,"touchmove",this._onTouchMove):Ti(document,"mousemove",this._onTouchMove):(Ti(sn,"dragend",this),Ti(ls,"dragstart",this._onDragStart));try{document.selection?d3(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(xb=!1,ls&&sn){gu("dragStarted",this,{evt:n}),this.nativeDraggable&&Ti(document,"dragover",LDt);var r=this.options;!t&&Vu(sn,r.dragClass,!1),Vu(sn,r.ghostClass,!0),kr.active=this,t&&this._appendGhost(),zl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(pf){this._lastX=pf.clientX,this._lastY=pf.clientY,OPe();for(var t=document.elementFromPoint(pf.clientX,pf.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(pf.clientX,pf.clientY),t!==n);)n=t;if(sn.parentNode[Tu]._isOutsideThisEl(t),n)do{if(n[Tu]){var r=void 0;if(r=n[Tu]._onDragOver({clientX:pf.clientX,clientY:pf.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=SPe(n));IPe()}},_onTouchMove:function(t){if(j0){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=Pr&&Qb(Pr,!0),a=Pr&&s&&s.a,l=Pr&&s&&s.d,u=ok&&pl&&ZCe(pl),f=(o.clientX-j0.clientX+i.x)/(a||1)+(u?u[0]-H5[0]:0)/(a||1),c=(o.clientY-j0.clientY+i.y)/(l||1)+(u?u[1]-H5[1]:0)/(l||1);if(!kr.active&&!xb){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Pr){s?(s.e+=f-(U5||0),s.f+=c-(j5||0)):s={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Sr(Pr,"webkitTransform",d),Sr(Pr,"mozTransform",d),Sr(Pr,"msTransform",d),Sr(Pr,"transform",d),U5=f,j5=c,pf=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Pr){var t=this.options.fallbackOnBody?document.body:ls,n=Ys(sn,!0,ok,!0,t),r=this.options;if(ok){for(pl=t;Sr(pl,"position")==="static"&&Sr(pl,"transform")==="none"&&pl!==document;)pl=pl.parentNode;pl!==document.body&&pl!==document.documentElement?(pl===document&&(pl=Wd()),n.top+=pl.scrollTop,n.left+=pl.scrollLeft):pl=Wd(),H5=ZCe(pl)}Pr=sn.cloneNode(!0),Vu(Pr,r.ghostClass,!1),Vu(Pr,r.fallbackClass,!0),Vu(Pr,r.dragClass,!0),Sr(Pr,"transition",""),Sr(Pr,"transform",""),Sr(Pr,"box-sizing","border-box"),Sr(Pr,"margin",0),Sr(Pr,"top",n.top),Sr(Pr,"left",n.left),Sr(Pr,"width",n.width),Sr(Pr,"height",n.height),Sr(Pr,"opacity","0.8"),Sr(Pr,"position",ok?"absolute":"fixed"),Sr(Pr,"zIndex","100000"),Sr(Pr,"pointerEvents","none"),kr.ghost=Pr,t.appendChild(Pr),Sr(Pr,"transform-origin",QCe/parseInt(Pr.style.width)*100+"% "+JCe/parseInt(Pr.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(gu("dragStart",this,{evt:t}),kr.eventCanceled){this._onDrop();return}gu("setupClone",this),kr.eventCanceled||(ms=LPe(sn),ms.removeAttribute("id"),ms.draggable=!1,ms.style["will-change"]="",this._hideClone(),Vu(ms,this.options.chosenClass,!1),kr.clone=ms),r.cloneId=d3(function(){gu("clone",r),!kr.eventCanceled&&(r.options.removeCloneOnHide||ls.insertBefore(ms,sn),r._hideClone(),zl({sortable:r,name:"clone"}))}),!n&&Vu(sn,o.dragClass,!0),n?(kD=!0,r._loopId=setInterval(r._emulateDragOver,50)):(xi(document,"mouseup",r._onDrop),xi(document,"touchend",r._onDrop),xi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,sn)),Ti(document,"drop",r),Sr(sn,"transform","translateZ(0)")),xb=!0,r._dragStartId=d3(r._dragStarted.bind(r,n,t)),Ti(document,"selectstart",r),c_=!0,window.getSelection().removeAllRanges(),O_&&Sr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,s,a=this.options,l=a.group,u=kr.active,f=rk===l,c=a.sort,d=za||u,p,h=this,g=!1;if(K8)return;function m(j,q){gu(j,h,oh({evt:t,isOwner:f,axis:p?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:c,fromSortable:d,target:r,completed:v,onMove:function(Q,ee){return sk(ls,n,sn,i,Q,Ys(Q),t,ee)},changed:x},q))}function y(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function v(j){return m("dragOverCompleted",{insertion:j}),j&&(f?u._hideClone():u._showClone(h),h!==d&&(Vu(sn,za?za.options.ghostClass:u.options.ghostClass,!1),Vu(sn,a.ghostClass,!0)),za!==h&&h!==kr.active?za=h:h===kr.active&&za&&(za=null),d===h&&(h._ignoreWhileAnimating=r),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===sn&&!sn.animated||r===n&&!r.animated)&&(ab=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(sn.parentNode[Tu]._isOutsideThisEl(t.target),!j&&H0(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function x(){Xu=Dc(sn),Mg=Dc(sn,a.draggable),zl({sortable:h,name:"change",toEl:n,newIndex:Xu,newDraggableIndex:Mg,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=_f(r,a.draggable,n,!0),m("dragOver"),kr.eventCanceled)return g;if(sn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return v(!1);if(kD=!1,u&&!a.disabled&&(f?c||(s=ks!==ls):za===this||(this.lastPutMode=rk.checkPull(this,u,sn,t))&&l.checkPut(this,u,sn,t))){if(p=this._getDirection(t,r)==="vertical",i=Ys(sn),m("dragOverValid"),kr.eventCanceled)return g;if(s)return ks=ls,y(),this._hideClone(),m("revert"),kr.eventCanceled||(ev?ls.insertBefore(sn,ev):ls.appendChild(sn)),v(!0);var _=$U(n,a.draggable);if(!_||MDt(t,p,this)&&!_.animated){if(_===sn)return v(!1);if(_&&n===t.target&&(r=_),r&&(o=Ys(r)),sk(ls,n,sn,i,r,o,t,!!r)!==!1)return y(),_&&_.nextSibling?n.insertBefore(sn,_.nextSibling):n.appendChild(sn),ks=n,x(),v(!0)}else if(_&&$Dt(t,p,this)){var E=V1(n,0,a,!0);if(E===sn)return v(!1);if(r=E,o=Ys(r),sk(ls,n,sn,i,r,o,t,!1)!==!1)return y(),n.insertBefore(sn,E),ks=n,x(),v(!0)}else if(r.parentNode===n){o=Ys(r);var C=0,w,T=sn.parentNode!==n,R=!TDt(sn.animated&&sn.toRect||i,r.animated&&r.toRect||o,p),L=p?"top":"left",B=KCe(r,"top","top")||KCe(sn,"top","top"),P=B?B.scrollTop:void 0;ab!==r&&(w=o[L],B_=!1,ik=!R&&a.invertSwap||T),C=ODt(t,r,o,p,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,ik,ab===r);var S;if(C!==0){var k=Dc(sn);do k-=C,S=ks.children[k];while(S&&(Sr(S,"display")==="none"||S===Pr))}if(C===0||S===r)return v(!1);ab=r,P_=C;var D=r.nextElementSibling,O=!1;O=C===1;var N=sk(ls,n,sn,i,r,o,t,O);if(N!==!1)return(N===1||N===-1)&&(O=N===1),K8=!0,setTimeout(FDt,30),y(),O&&!D?n.appendChild(sn):r.parentNode.insertBefore(sn,O?D:r),B&&DPe(B,0,P-B.scrollTop),ks=sn.parentNode,w!==void 0&&!ik&&(f3=Math.abs(w-Ys(r)[L])),x(),v(!0)}if(n.contains(sn))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xi(document,"mousemove",this._onTouchMove),xi(document,"touchmove",this._onTouchMove),xi(document,"pointermove",this._onTouchMove),xi(document,"dragover",H0),xi(document,"mousemove",H0),xi(document,"touchmove",H0)},_offUpEvents:function(){var t=this.el.ownerDocument;xi(t,"mouseup",this._onDrop),xi(t,"touchend",this._onDrop),xi(t,"pointerup",this._onDrop),xi(t,"pointercancel",this._onDrop),xi(t,"touchcancel",this._onDrop),xi(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Xu=Dc(sn),Mg=Dc(sn,r.draggable),gu("drop",this,{evt:t}),ks=sn&&sn.parentNode,Xu=Dc(sn),Mg=Dc(sn,r.draggable),kr.eventCanceled){this._nulling();return}xb=!1,ik=!1,B_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Z8(this.cloneId),Z8(this._dragStartId),this.nativeDraggable&&(xi(document,"drop",this),xi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),O_&&Sr(document.body,"user-select",""),Sr(sn,"transform",""),t&&(c_&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Pr&&Pr.parentNode&&Pr.parentNode.removeChild(Pr),(ls===ks||za&&za.lastPutMode!=="clone")&&ms&&ms.parentNode&&ms.parentNode.removeChild(ms),sn&&(this.nativeDraggable&&xi(sn,"dragend",this),q5(sn),sn.style["will-change"]="",c_&&!xb&&Vu(sn,za?za.options.ghostClass:this.options.ghostClass,!1),Vu(sn,this.options.chosenClass,!1),zl({sortable:this,name:"unchoose",toEl:ks,newIndex:null,newDraggableIndex:null,originalEvent:t}),ls!==ks?(Xu>=0&&(zl({rootEl:ks,name:"add",toEl:ks,fromEl:ls,originalEvent:t}),zl({sortable:this,name:"remove",toEl:ks,originalEvent:t}),zl({rootEl:ks,name:"sort",toEl:ks,fromEl:ls,originalEvent:t}),zl({sortable:this,name:"sort",toEl:ks,originalEvent:t})),za&&za.save()):Xu!==Ib&&Xu>=0&&(zl({sortable:this,name:"update",toEl:ks,originalEvent:t}),zl({sortable:this,name:"sort",toEl:ks,originalEvent:t})),kr.active&&((Xu==null||Xu===-1)&&(Xu=Ib,Mg=N_),zl({sortable:this,name:"end",toEl:ks,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){gu("nulling",this),ls=sn=ks=Pr=ev=ms=c3=Bg=j0=pf=c_=Xu=Mg=Ib=N_=ab=P_=za=rk=kr.dragged=kr.ghost=kr.clone=kr.active=null,DD.forEach(function(t){t.checked=!0}),DD.length=U5=j5=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":sn&&(this._onDragOver(t),RDt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)n=r[i],_f(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||NDt(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];_f(a,this.options.draggable,i,!1)&&(r[o]=a)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return _f(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=pC.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&MPe(r)},destroy:function(){gu("destroy",this);var t=this.el;t[Tu]=null,xi(t,"mousedown",this._onTapStart),xi(t,"touchstart",this._onTapStart),xi(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(xi(t,"dragover",this),xi(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),TD.splice(TD.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Bg){if(gu("hideClone",this),kr.eventCanceled)return;Sr(ms,"display","none"),this.options.removeCloneOnHide&&ms.parentNode&&ms.parentNode.removeChild(ms),Bg=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Bg){if(gu("showClone",this),kr.eventCanceled)return;sn.parentNode==ls&&!this.options.group.revertClone?ls.insertBefore(ms,sn):ev?ls.insertBefore(ms,ev):ls.appendChild(ms),this.options.group.revertClone&&this.animate(sn,ms),Sr(ms,"display",""),Bg=!1}}};function RDt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function sk(e,t,n,r,i,o,s,a){var l,u=e[Tu],f=u.options.onMove,c;return window.CustomEvent&&!Yp&&!hC?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||Ys(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),f&&(c=f.call(u,l,s)),c}function q5(e){e.draggable=!1}function FDt(){K8=!1}function $Dt(e,t,n){var r=Ys(V1(n.el,0,n.options,!0)),i=RPe(n.el,n.options,Pr),o=10;return t?e.clientX<i.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-o||e.clientY<r.bottom&&e.clientX<r.left}function MDt(e,t,n){var r=Ys($U(n.el,n.options.draggable)),i=RPe(n.el,n.options,Pr),o=10;return t?e.clientX>i.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+o||e.clientX>r.right&&e.clientY>r.top}function ODt(e,t,n,r,i,o,s,a){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,f=r?n.top:n.left,c=r?n.bottom:n.right,d=!1;if(!s){if(a&&f3<u*i){if(!B_&&(P_===1?l>f+u*o/2:l<c-u*o/2)&&(B_=!0),B_)d=!0;else if(P_===1?l<f+f3:l>c-f3)return-P_}else if(l>f+u*(1-i)/2&&l<c-u*(1-i)/2)return IDt(t)}return d=d||s,d&&(l<f+u*o/2||l>c-u*o/2)?l>f+u/2?1:-1:0}function IDt(e){return Dc(sn)<Dc(e)?1:-1}function NDt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function PDt(e){DD.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&DD.push(r)}}function d3(e){return setTimeout(e,0)}function Z8(e){return clearTimeout(e)}o$&&Ti(document,"touchmove",function(e){(kr.active||xb)&&e.cancelable&&e.preventDefault()});kr.utils={on:Ti,off:xi,css:Sr,find:kPe,is:function(t,n){return!!_f(t,n,t,!1)},extend:xDt,throttle:TPe,closest:_f,toggleClass:Vu,clone:LPe,index:Dc,nextTick:d3,cancelNextTick:Z8,detectDirection:$Pe,getChild:V1,expando:Tu};kr.get=function(e){return e[Tu]};kr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(kr.utils=oh(oh({},kr.utils),r.utils)),pC.mount(r)})};kr.create=function(e,t){return new kr(e,t)};kr.version=yDt;var Vs=[],f_,Q8,J8=!1,G5,W5,LD,d_;function BDt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ti(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ti(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ti(document,"touchmove",this._handleFallbackAutoScroll):Ti(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?xi(document,"dragover",this._handleAutoScroll):(xi(document,"pointermove",this._handleFallbackAutoScroll),xi(document,"touchmove",this._handleFallbackAutoScroll),xi(document,"mousemove",this._handleFallbackAutoScroll)),tSe(),h3(),wDt()},nulling:function(){LD=Q8=f_=J8=d_=G5=W5=null,Vs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,s);if(LD=n,r||this.options.forceAutoScrollFallback||hC||Yp||O_){V5(n,this.options,a,r);var l=Jg(a,!0);J8&&(!d_||o!==G5||s!==W5)&&(d_&&tSe(),d_=setInterval(function(){var u=Jg(document.elementFromPoint(o,s),!0);u!==l&&(l=u,h3()),V5(n,i.options,u,r)},10),G5=o,W5=s)}else{if(!this.options.bubbleScroll||Jg(a,!0)===Wd()){h3();return}V5(n,this.options,Jg(a,!1),!1)}}},$p(e,{pluginName:"scroll",initializeByDefault:!0})}function h3(){Vs.forEach(function(e){clearInterval(e.pid)}),Vs=[]}function tSe(){clearInterval(d_)}var V5=TPe(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=Wd(),u=!1,f;Q8!==n&&(Q8=n,h3(),f_=t.scroll,f=t.scrollFn,f_===!0&&(f_=Jg(n,!0)));var c=0,d=f_;do{var p=d,h=Ys(p),g=h.top,m=h.bottom,y=h.left,v=h.right,x=h.width,_=h.height,E=void 0,C=void 0,w=p.scrollWidth,T=p.scrollHeight,R=Sr(p),L=p.scrollLeft,B=p.scrollTop;p===l?(E=x<w&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),C=_<T&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(E=x<w&&(R.overflowX==="auto"||R.overflowX==="scroll"),C=_<T&&(R.overflowY==="auto"||R.overflowY==="scroll"));var P=E&&(Math.abs(v-i)<=s&&L+x<w)-(Math.abs(y-i)<=s&&!!L),S=C&&(Math.abs(m-o)<=s&&B+_<T)-(Math.abs(g-o)<=s&&!!B);if(!Vs[c])for(var k=0;k<=c;k++)Vs[k]||(Vs[k]={});(Vs[c].vx!=P||Vs[c].vy!=S||Vs[c].el!==p)&&(Vs[c].el=p,Vs[c].vx=P,Vs[c].vy=S,clearInterval(Vs[c].pid),(P!=0||S!=0)&&(u=!0,Vs[c].pid=setInterval((function(){r&&this.layer===0&&kr.active._onTouchMove(LD);var D=Vs[this.layer].vy?Vs[this.layer].vy*a:0,O=Vs[this.layer].vx?Vs[this.layer].vx*a:0;typeof f=="function"&&f.call(kr.dragged.parentNode[Tu],O,D,e,LD,Vs[this.layer].el)!=="continue"||DPe(Vs[this.layer].el,O,D)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&d!==l&&(d=Jg(d,!1)));J8=u}},30),NPe=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=r||o;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(c)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function MU(){}MU.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=V1(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:NPe};$p(MU,{pluginName:"revertOnSpill"});function OU(){}OU.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:NPe};$p(OU,{pluginName:"removeOnSpill"});kr.mount(new BDt);kr.mount(OU,MU);const zDt=e=>{const t=e.item;let n=Array.prototype.slice.call(t.parentNode.childNodes);return n=n.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),n},UDt=(e,t,n,r,i,o)=>{const a=e.item.parentNode;for(const g of n)a.appendChild(g);if(e.oldIndex==e.newIndex)return;const l=r.getArray(),u=e.item.querySelector("eox-layercontrol-layer").layer.get(i),f=l.find(g=>g.get(i)===u),c=o.dataset.layer,d=l.find(g=>g.get(i)==c);let p,h;for(p=0;p<l.length;p++)if(l[p]==f){r.removeAt(p);break}for(h=0;h<l.length;h++)if(l[h]===d){p>h?r.insertAt(h,f):r.insertAt(h+1,f);break}t.requestUpdate()};function jDt(e,t,n,r){let i=[],o=null;e._sortable=kr.create(e,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:s=>i=zDt(s),onMove:s=>{o=s.related},onEnd:s=>UDt(s,r,i,t,n,o)})}function HDt(e,t,n,r){const i=e.getArray();let o=!1;i.forEach(s=>{const a=s.ol_uid;s.get(t)||(s.set(t,a),o=!0),s.get(n)||(s.set(n,`layer ${a}`),o=!0),o&&r.requestUpdate()})}function IU(e,t,n){let r=[];const i=(o,s,a)=>{r=[...r,...o.filter(u=>u.get(s)===a)];const l=o.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>i(u.getLayers().getArray(),s,a)),r};return i(e,t,n),r}function qDt(e,t,n){if(!e||!t)return!1;if(!PPe(e,n))return!0;const r=e.get("minZoom"),i=e.get("maxZoom"),o=t.getView().getZoom();return o>r&&o<i}function PPe(e,t){const n=e.get("minZoom"),r=e.get("maxZoom");return!!(t&&(n!==-1/0||r!==1/0))}function GDt(e,t){var i,o,s;return!e||!t?void 0:e.getLayers?"group":((s=(i=t.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:i.ol_uid)==null?void 0:s.includes(e.getSource?(o=e.getSource())==null?void 0:o.ol_uid:void 0))?"draw":e.declutter_!==void 0?"vector":"raster"}const WDt=(e,t,n)=>{let r=t;return n.layer.getSource().getTileUrlFunction()&&(r||(r=n.layer.getSource().getTileUrlFunction()),n.layer.getSource().setTileUrlFunction((...i)=>pDt(r(...i),e)),n.layer.getSource().setKey(new Date)),r};function VDt(e,t,n){const r="updateStyleVariables"in t,i="setStyle"in t,o=r?t.style_:n.style;let s=o==null?void 0:o.variables;if(s){const a=NU(e);if(o.variables={...s,...a},r)t.updateStyleVariables(a);else if(i){const l=YDt(o);t.setStyle(l)}}}const NU=e=>{const t={};for(const n in e)if(typeof e[n]=="object"&&e[n]!==null){const r=NU(e[n]);for(const i in r)t[i]=r==null?void 0:r[i]}else t[n]=e==null?void 0:e[n];return t};function YDt(e){let t=e;if("variables"in e){let n=JSON.stringify(e);const{variables:r}=e;for(const i in r)typeof r[i]=="number"?n=n.replaceAll(`["var","${i}"]`,r[i]):n=n.replaceAll(`["var","${i}"]`,`"${r[i]}"`);t=JSON.parse(n)}return t}const XDt=(e,t)=>{if(!e)return;const n=NU(t);let r,i;return Array.isArray(e)?i=structuredClone(e):i=[structuredClone(e)],r=i.filter(o=>{if(!("boundTo"in o))return!0;const s=o.boundTo.key,a=o.boundTo.value;return!(s in n)||n[s]==a}),r.length||(r=i),r.map(o=>{var s;return delete o.boundTo,!("domainProperties"in o)||"domain"in o?o:(s=Object.keys(o))==null?void 0:s.reduce((a,l)=>(l==="domainProperties"?a.domain=o[l].map(u=>n[u]):a[l]=o[l],a),{})})};function BPe(e,t){var r;let n={};for(const i in e){const o=e[i].type;if(o&&o!=="object")n[i]=o==="number"?Number(t[i]):t[i];else if(typeof e[i]=="object"&&((r=e[i])!=null&&r.properties)){const s=BPe(e[i].properties,t);Object.keys(s).length>0&&(n[i]=s)}}return n}function KDt(e,t){var o,s,a,l,u;if(!t)return null;let n={},r="updateStyleVariables"in e?(o=e.style_)==null?void 0:o.variables:(s=t.style)==null?void 0:s.variables;if((t.type==="style"||t.style)&&r)n=r;else if((l=(a=e.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const f=new URL(e.getSource().getTileUrlFunction()([0,0,0]));n=Object.fromEntries(f.searchParams.entries())}else return null;const i=BPe(((u=t.schema)==null?void 0:u.properties)||t.schema,n);return Object.keys(i).length?i:null}const ZDt=(e,t)=>e==null?void 0:e.filter(n=>["remove","sort"].filter(r=>t!=null&&t.get("layerControlDisable")?r!=="sort":!0).includes(n)),QDt=(e,t)=>e==null?void 0:e.filter(n=>{let r=!0;return["remove","sort"].includes(n)&&(r=!1),n==="info"&&(r=t.get("description")),n==="config"&&(r=t.get("layerConfig")),n==="datetime"&&(r=t.get("layerDatetime")),n==="legend"&&(r=t.get("layerLegend")),r}),JDt=(e,t)=>yt`
  <button slot="${e}-icon" class="icon">${t?e:Li}</button>
`,eLt=e=>yt`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:t}=e;t==null||t.set("layerControlOptional",!0),t==null||t.setVisible(!1),e.dispatchEvent(new CustomEvent("changed",{detail:t,bubbles:!0}))}}
  >
    ${e.unstyled?"x":Li}
  </button>
`,tLt=e=>yt`
  <span class="button sort-icon icon drag-handle">
    ${e?"":Li}
  </span>
`,zPe=e=>{var n;const t=["layerControlHide","layerControlOptional"];return(n=e==null?void 0:e.getArray())==null?void 0:n.filter(r=>t.every(i=>!r.get(i)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UPe=aA(class extends $L{constructor(e){if(super(e),e.type!==Tg.PROPERTY&&e.type!==Tg.ATTRIBUTE&&e.type!==Tg.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!rqe(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===Sb||t===Li)return t;const n=e.element,r=e.name;if(e.type===Tg.PROPERTY){if(t===n[r])return Sb}else if(e.type===Tg.BOOLEAN_ATTRIBUTE){if(!!t===n.hasAttribute(r))return Sb}else if(e.type===Tg.ATTRIBUTE&&n.getAttribute(r)===t+"")return Sb;return $N(e),t}});var Y5,nSe;function nLt(){if(nSe)return Y5;nSe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof jo=="object"&&jo&&jo.Object===Object&&jo,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,p=Math.max,h=Math.min,g=function(){return f.Date.now()};function m(C,w,T){var R,L,B,P,S,k,D=0,O=!1,N=!1,j=!0;if(typeof C!="function")throw new TypeError(e);w=E(w)||0,v(T)&&(O=!!T.leading,N="maxWait"in T,B=N?p(E(T.maxWait)||0,w):B,j="trailing"in T?!!T.trailing:j);function q($e){var ve=R,Ee=L;return R=L=void 0,D=$e,P=C.apply(Ee,ve),P}function W($e){return D=$e,S=setTimeout(H,w),O?q($e):P}function Q($e){var ve=$e-k,Ee=$e-D,Ve=w-ve;return N?h(Ve,B-Ee):Ve}function ee($e){var ve=$e-k,Ee=$e-D;return k===void 0||ve>=w||ve<0||N&&Ee>=B}function H(){var $e=g();if(ee($e))return se($e);S=setTimeout(H,Q($e))}function se($e){return S=void 0,j&&R?q($e):(R=L=void 0,P)}function ne(){S!==void 0&&clearTimeout(S),D=0,R=k=L=S=void 0}function ge(){return S===void 0?P:se(g())}function we(){var $e=g(),ve=ee($e);if(R=arguments,L=this,k=$e,ve){if(S===void 0)return W(k);if(N)return S=setTimeout(H,w),q(k)}return S===void 0&&(S=setTimeout(H,w)),P}return we.cancel=ne,we.flush=ge,we}function y(C,w,T){var R=!0,L=!0;if(typeof C!="function")throw new TypeError(e);return v(T)&&(R="leading"in T?!!T.leading:R,L="trailing"in T?!!T.trailing:L),m(C,w,{leading:R,maxWait:w,trailing:L})}function v(C){var w=typeof C;return!!C&&(w=="object"||w=="function")}function x(C){return!!C&&typeof C=="object"}function _(C){return typeof C=="symbol"||x(C)&&d.call(C)==n}function E(C){if(typeof C=="number")return C;if(_(C))return t;if(v(C)){var w=typeof C.valueOf=="function"?C.valueOf():C;C=v(w)?w+"":w}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var T=o.test(C);return T||s.test(C)?a(C.slice(2),T?2:8):i.test(C)?t:+C}return Y5=y,Y5}var rLt=nLt();const rSe=Fa(rLt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ak=e=>e??Li;var Rc,sL,aL;class jPe extends Pi{constructor(){super();zn(this,Rc,[]);zn(this,sL,MN`
    .separator {
      margin: 0 0 24px 0;
    }
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      --cle-padding: 0;
    }
  `);zn(this,aL,"");this.unstyled=!1,this.noShadow=!1,this.layer=null}get layerLegend(){return fn(this,Rc)?fn(this,Rc).length>1?fn(this,Rc):fn(this,Rc)[0]:null}set layerLegend(n){var r;Array.isArray(n)?ko(this,Rc,n.map((i,o)=>{var s;return{id:(((s=this.layer)==null?void 0:s.get("id"))??"")+o,...i}})):ko(this,Rc,[{id:(((r=this.layer)==null?void 0:r.get("id"))??"")+0,...n}])}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){this.layerLegend&&new ResizeObserver(()=>{var n;ko(this,Rc,(n=fn(this,Rc))==null?void 0:n.map(r=>(this.offsetWidth!==r.width&&(r.width=this.offsetWidth),{...r}))),this.requestUpdate()}).observe(this.renderRoot.querySelector(".legend-container"))}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),yt`
      <style>
        ${fn(this,sL)}
        ${!this.unstyled&&fn(this,aL)}
      </style>
      ${xr(this.layerLegend,()=>yt`
          <div class="legend-container">
            <!-- Render color-legend-->
            ${fn(this,Rc).map((n,r,i)=>yt`
                <color-legend
                  id="${n.id}"
                  width=${n.width??325}
                  scaleType="${ak(n.scaleType)}"
                  markType="${ak(n.markType)}"
                  titleText="${ak(n.title)}"
                  .range=${n.range}
                  .domain=${n.domain}
                  tickFormat="${ak(n.tickFormat)}"
                  .ticks=${n.ticks??5}
                  .tickValues=${n.tickValues}
                  .marginLeft=${0}
                  .marginRight=${0}
                >
                </color-legend>
                ${r!==i.length-1?yt`<div class="separator"></div>`:Li}
              `)}
          </div>
        `)}
    `}}Rc=new WeakMap,sL=new WeakMap,aL=new WeakMap,Cn(jPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",jPe);var np,a1,rA,iA,eN,lL,uL;class HPe extends Pi{constructor(){super();zn(this,iA);zn(this,np,{});zn(this,a1,null);zn(this,rA);zn(this,lL,MN`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);zn(this,uL,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=rSe(In(this,iA,eN),1e3)}updated(n){if(n.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=rSe(In(this,iA,eN),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){ko(this,a1,KDt(this.layer,this.layerConfig)),Object.keys(fn(this,np)).length!==0&&ko(this,a1,fn(this,np)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const n={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return yt`
      <style>
        ${fn(this,lL)}
        ${!this.unstyled&&fn(this,uL)}
      </style>
      ${xr(this.layerConfig,()=>yt`
          ${xr(this.layerConfig.legend,()=>yt`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${XDt(this.layerConfig.legend,fn(this,np))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${fn(this,a1)}
            .options=${n}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}np=new WeakMap,a1=new WeakMap,rA=new WeakMap,iA=new WeakSet,eN=function(n){ko(this,np,n.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?VDt(fn(this,np),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):ko(this,rA,WDt(fn(this,np),fn(this,rA),this)),this.dispatchEvent(new CustomEvent("layerConfig:change",{bubbles:!0,detail:{jsonformValue:n.detail,layer:this.layer}})),this.requestUpdate()},lL=new WeakMap,uL=new WeakMap,Cn(HPe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",HPe);var cL,GPe,fL,dL;class qPe extends Pi{constructor(){super();zn(this,cL);zn(this,fL,"");zn(this,dL,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),yt`
      <style>
        ${fn(this,fL)}
        ${!this.unstyled&&fn(this,dL)}
      </style>
      ${xr(this.layerDatetime,()=>yt`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .navigation=${this.layerDatetime.navigation??!1}
            .slider=${this.layerDatetime.slider??!1}
            .play=${this.layerDatetime.play??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            .displayFormat=${this.layerDatetime.displayFormat}
            @stepchange=${In(this,cL,GPe)}
          ></eox-timecontrol>
        `)}
    `}}cL=new WeakSet,GPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:n.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=n.detail.currentStep,this.requestUpdate()},fL=new WeakMap,dL=new WeakMap,Cn(qPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",qPe);var oA,hL,pL;class WPe extends Pi{constructor(){super();zn(this,oA,n=>(this.selectedTab===n||this.toolsAsList)&&"highlighted");zn(this,hL,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
  `);zn(this,pL,`
    .listed label {
      display: flex;
      justify-content: start;
      align-items: center;
      background: var(--background-color) !important;
    }
    .listed label:not(:first-of-type) {
      margin-top: 10px;
    }
    .listed label span {
      text-transform: capitalize;
      font-weight: 300;
    }
    .tabbed, .listed {
      font-size: small;
    }
    .tabbed label.highlighted {
      border: 1px solid #0041701a;
      border-radius: 2px;
      border-bottom: none;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: var(--background-color);
      border: 1px solid #0041701a;
      border-radius: 2px;
      padding: var(--padding-vertical) var(--padding);
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.tabs,r=this.actions,i=r.length+n.length>1;return yt`
      <style>
        ${fn(this,hL)}
        ${!this.unstyled&&fn(this,pL)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${xr(i,()=>yt`
            <nav>
              ${xr(!this.toolsAsList,()=>yt`
                  <div>
                    <!-- Labels for tabs -->
                    ${cc(n,(o,s)=>yt`
                        <label
                          class=${fn(this,oA).call(this,s)}
                          @click=${()=>this.selectedTab=s}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${cc(r,o=>yt`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${cc(n,(o,s)=>yt`
              ${xr(this.toolsAsList,()=>yt`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${o}-icon`}>${o}</slot>
                    <span>${o}</span>
                  </label>
                `)}
              <div class="tab ${fn(this,oA).call(this,s)}">
                <!-- Content slot for each tab -->
                <slot name=${`${o}-content`}>${o}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}oA=new WeakMap,hL=new WeakMap,pL=new WeakMap,Cn(WPe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",WPe);const PU=':root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}';var gL,mL;class VPe extends Pi{constructor(){super();Cn(this,"_removeButton",()=>eLt(this));Cn(this,"_sortButton",()=>tLt(this.unstyled));Cn(this,"_button",n=>JDt(n,this.unstyled));Cn(this,"_getDefaultTools",()=>{var n;return yt`
      <div slot="info-content">
        ${Uc(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <!-- Input for opacity -->
        <input
          type="range"
          min="0"
          max="1"
          step="0.01"
          value=${UPe((n=this.layer)==null?void 0:n.getOpacity())}
          @input=${r=>this.layer.setOpacity(parseFloat(r.target.value))}
        />
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${xr(this.layer.get("layerConfig"),()=>yt`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${xr(this.layer.get("layerDatetime"),()=>yt`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${xr(this.layer.get("layerLegend"),()=>yt`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton()}</div>
      <div slot="sort-icon">${this._sortButton()}</div>
    `});zn(this,gL,"");zn(this,mL,`
    ${cC}  
    ${DU}
    ${r$}
    ${PU}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tools-items button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tools-items button.icon {
      opacity: .7;
    }
    eox-layercontrol-tools-items.tools-list button.icon {
      cursor: auto;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tools-items button.icon:hover {
      opacity: 1;
    }
    eox-layercontrol-tools-items.tools-list button.icon:hover {
      opacity: .7;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
      margin-right: var(--padding);
    }
    eox-layercontrol-tools-items button.icon,
    eox-layercontrol-tools-items .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tools-items.tools-list button.icon,
    eox-layercontrol-tools-items.tools-list .button.icon {
      margin-left: -6px;
    }
    eox-layercontrol-tools-items button.icon::before,
    eox-layercontrol-tools-items .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    details.tools summary .datetime-icon,
    button.icon[slot=datetime-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eclock-outline%3C/title%3E%3Cpath d='M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z' /%3E%3C/svg%3E");
    }
    details.tools summary .legend-icon,
    button.icon[slot=legend-icon]::before {
      content: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Ctitle%3Emap-legend%3C%2Ftitle%3E%3Cpath%20d%3D%22M9%2C3L3.36%2C4.9C3.15%2C4.97%203%2C5.15%203%2C5.38V20.5A0.5%2C0.5%200%200%2C0%203.5%2C21L3.66%2C20.97L9%2C18.9L15%2C21L20.64%2C19.1C20.85%2C19.03%2021%2C18.85%2021%2C18.62V3.5A0.5%2C0.5%200%200%2C0%2020.5%2C3L20.34%2C3.03L15%2C5.1L9%2C3M8%2C5.45V17.15L5%2C18.31V6.46L8%2C5.45M10%2C5.47L14%2C6.87V18.53L10%2C17.13V5.47M19%2C5.7V17.54L16%2C18.55V6.86L19%2C5.7M7.46%2C6.3L5.57%2C6.97V9.12L7.46%2C8.45V6.3M7.46%2C9.05L5.57%2C9.72V11.87L7.46%2C11.2V9.05M7.46%2C11.8L5.57%2C12.47V14.62L7.46%2C13.95V11.8M7.46%2C14.55L5.57%2C15.22V17.37L7.46%2C16.7V14.55Z%22%20%2F%3E%3C%2Fsvg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
    [slot=info-content] * {
      max-width: 100%;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const n=ZDt(this.tools,this.layer),r=QDt(this.tools,this.layer),i=this[`_${n==null?void 0:n[0]}Button`]?this[`_${n==null?void 0:n[0]}Button`]():Li,o=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",s=n==null?void 0:n.length,a=r==null?void 0:r.length;return yt`
      <style>
        ${fn(this,gL)}
        ${!this.unstyled&&fn(this,mL)}
      </style>
      ${xr(s+a>0,()=>yt`
          ${xr(s===1&&a===0,()=>yt`
              <div class="single-action-container">
                <div class="single-action">${i}</div>
              </div>
            `,()=>yt`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||Li}
              >
                <summary>
                  <button class="icon ${o}">Tools</button>
                </summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${n}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${cc(r,u=>this._button(u))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools()}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}gL=new WeakMap,mL=new WeakMap,Cn(VPe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",VPe);const iLt=e=>{const t=()=>{const n=qDt(e.layer,e.map,e.showLayerZoomState);let r=!1;!n&&e.currLayerVisibilityBasedOnZoom?(e.currLayerVisibilityBasedOnZoom=!1,r=!0):n&&!e.currLayerVisibilityBasedOnZoom&&(e.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(e.requestUpdate(),e.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};PPe(e.layer,e.showLayerZoomState)&&(t(),e.map.getView().on("change:resolution",()=>t()))},oLt=(e,t)=>{const n=t.layer;n.setVisible(e.target.checked),e.target.checked&&n.get("layerControlExclusive")&&t.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(i=>{var o;i.layer!==n&&((o=i.layer)!=null&&o.get("layerControlExclusive"))&&(i.layer.setVisible(!1),i.requestUpdate())}),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:n})),t.requestUpdate()};var Md,wb,XPe,vL,yL;class YPe extends Pi{constructor(){super();zn(this,Md);Cn(this,"currLayerVisibilityBasedOnZoom",!0);zn(this,vL,"");zn(this,yL,`
    ${r$}
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: var(--padding-vertical) 0;
      display: var(--layer-visibility);
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .title {
      display: var(--layer-title-visibility);
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
      display: var(--layer-type-visibility);
    }
    [data-type] .title.color-swatch::before {
      background: var(--layer-color);
      border-radius: 3px;
      content: "" !important;
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){iLt(this)}render(){var l;const n=this.layer.getVisible(),r=n?"visible":"",i=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",o=In(this,Md,wb).call(this,"layerControlDisable")?"disabled":"",s=In(this,Md,wb).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return yt`
      <style>
        ${fn(this,vL)}
        ${!this.unstyled&&fn(this,yL)}
      </style>
      ${xr(this.layer,()=>yt`
          <!-- Render the layer -->
          <div class="layer ${r} ${i}">
            <label class="drag-handle ${o}">
              <!-- Input element for layer visibility -->
              <input
                type=${s}
                .checked=${UPe(n)}
                @click=${In(this,Md,XPe)}
              />

              <!-- Layer title -->
              <span
                class="title ${In(this,Md,wb).call(this,"color")?"color-swatch":""}"
                style="--layer-color: ${In(this,Md,wb).call(this,"color")}"
              >
                ${In(this,Md,wb).call(this,this.titleProperty)}
              </span>
              ${xr(a,()=>yt`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}Md=new WeakSet,wb=function(n){var r;return(r=this.layer)==null?void 0:r.get(n)},XPe=function(n){oLt(n,this)},vL=new WeakMap,yL=new WeakMap,Cn(YPe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer",YPe);var bL,xL;class KPe extends Pi{constructor(){super();zn(this,bL,"");zn(this,xL,`
    details summary {
      cursor: pointer;
      display: var(--layer-summary-visibility);
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: var(--layer-visibility);
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var i,o;const n=!!((i=this.group)!=null&&i.get("layerControlExpand")),r=(o=zPe(this.group.getLayers()))==null?void 0:o.length;return yt`
      <style>
        ${fn(this,bL)}
        ${!this.unstyled&&fn(this,xL)}
      </style>
      ${xr(this.group,()=>yt`
          <!-- Render the details element with the layer control -->
          <details
            open=${n||Li}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}bL=new WeakMap,xL=new WeakMap,Cn(KPe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",KPe);const sLt=e=>{const{layers:t,idProperty:n,titleProperty:r,renderRoot:i}=e,o=xy(()=>{e.requestUpdate(),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),s=()=>o();if(t&&(t.hasListener("change:length")&&(t==null||t.un("change:length",s)),t.on("change:length",s),t)){const a=i.querySelector("ul");HDt(t,n,r,e),jDt(a,t,n,e)}};var wL,_L;class ZPe extends Pi{constructor(){super();zn(this,wL,"");zn(this,_L,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: var(--list-padding);
    }
    li:not(li li) {
      padding-left: var(--padding);
    }
    li {
      list-style: none;
      border-bottom: 1px solid #0041703a;
      border: var(--layer-visibility);
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}firstUpdated(){sLt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.layers?zPe(this.layers).reverse():[];return yt`
      <style>
        ${fn(this,wL)}
        ${!this.unstyled&&fn(this,_L)}
      </style>
      <ul>
        ${xr(this.layers,()=>yt`
            ${ZNe(n,r=>r,r=>yt`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${GDt(r,this.map)}"
                >
                  ${r.getLayers?yt`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:yt`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}wL=new WeakMap,_L=new WeakMap,Cn(ZPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",ZPe);const aLt=e=>{const t=e.querySelector("select[name=optional]"),n=t?t.value:null,r=IU(e.layers.getArray(),"layerControlOptional",!0).find(i=>(i.get(e.idProperty)||i.ol_uid)===n);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),e.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(i=>i.requestUpdate()),e.requestUpdate()};var EL,JPe;class QPe extends Pi{constructor(){super();zn(this,EL);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=IU(this.layers.getArray(),"layerControlOptional",!0);return yt`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${n.map(r=>{const i=r.get(this.idProperty)||r.ol_uid,o=r.get(this.titleProperty),s=`layer ${r.get(this.idProperty)}`;return yt` <option value="${i}">${o||s}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${In(this,EL,JPe)}">add</button>
    `}}EL=new WeakSet,JPe=function(){aLt(this)},Cn(QPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",QPe);const lLt=(e,t)=>{t.jsonInput=e.target.value,t.requestUpdate()},iSe=e=>{const t=JSON.parse(`{"data":${EPe(e.jsonInput)}}`);Array.isArray(t.data)?t.data.forEach(n=>{e.eoxMap.addOrUpdateLayer(n)}):e.eoxMap.addOrUpdateLayer(t.data),e.jsonInput=null,e.requestUpdate()},uLt=(e,t)=>{t.urlInput=e.target.value,t.requestUpdate()};async function cLt(e){const t=e.urlInput;if(e.wmsCapabilities=null,e.searchLoad=!0,e.requestUpdate(),!t)return!1;if(RU(t)==="XYZ")return{Name:t};try{const n=await fDt(t);e.wmsCapabilities=n}catch{}finally{e.searchLoad=!1,e.requestUpdate()}return!1}const fLt=(e,t)=>{const{Name:n}=e,r=RU(t.urlInput)||"XYZ",i={type:"Tile",properties:{id:n,title:n},source:{type:r,url:t.urlInput,params:{LAYERS:n}}};t.jsonInput=JSON.stringify(i)},dLt=(e,t)=>{t.open=e||null,t.urlInput=null,t.jsonInput=null,t.wmsCapabilities=null,t.requestUpdate()};var tl,tBe,nBe,tN,rBe,iBe,p3,AL,CL;class eBe extends Pi{constructor(){super();zn(this,tl);Cn(this,"urlInput",null);Cn(this,"jsonInput",null);Cn(this,"open",null);Cn(this,"searchLoad",!1);Cn(this,"wmsCapabilities",null);zn(this,AL,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);zn(this,CL,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.open?"open":"close",r=this.open==="url",i=this.open==="json",o=!dDt(this.urlInput)||this.searchLoad?!0:Li;return yt`
      <style>
        ${fn(this,AL)}
        ${!this.unstyled&&fn(this,CL)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${n}">
            <li
              @click=${()=>In(this,tl,p3).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>In(this,tl,p3).call(this,"json")}
              class="${i?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>In(this,tl,p3).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${n}">
          ${r?yt`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${In(this,tl,tBe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${o} 
                  @click=${In(this,tl,nBe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?yt`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(s=>{const a=s.Name;return yt`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>In(this,tl,tN).call(this,s)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:Li}
            `:yt`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${In(this,tl,iBe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${hDt(this.jsonInput)?Li:!0}
                  @click=${In(this,tl,rBe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}tl=new WeakSet,tBe=function(n){uLt(n,this)},nBe=async function(){const n=await cLt(this);n&&In(this,tl,tN).call(this,n)},tN=function(n){fLt(n,this),iSe(this)},rBe=function(){iSe(this)},iBe=function(n){lLt(n,this)},p3=function(n){dLt(n,this)},AL=new WeakMap,CL=new WeakMap,Cn(eBe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",eBe);const hLt=(e,t)=>{if(t.requestUpdate(),e.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const n=t.renderRoot.querySelector("eox-layercontrol-optional-list");n==null||n.requestUpdate()}},oSe=e=>{const t=X_(e.for);return t&&t.map!==e.map&&(e.map=t.map),t};var Ug,Mm,sBe,aBe,lBe,SL;class oBe extends Pi{constructor(){super();zn(this,Mm);zn(this,Ug);zn(this,SL,`
    :host, :root {
      font-family: Roboto, sans-serif;
      --padding: 0.5rem;
      --padding-vertical: .2rem;
      --list-padding: 48px;
      --layer-input-visibility: flex;
      --layer-summary-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: flex;
      --layer-visibility: block;
      --layer-tools-button-visibility: flex;

      display: block;
      padding: var(--padding) 0;
      --background-color: var(--eox-background-color, transparent);
      background-color: var(--background-color, transparent);
    }
    select {
      background-color: var(--background-color);
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1}firstUpdated(){this.eoxMap=oSe(this)}updated(n){n.has("for")&&(this.eoxMap=oSe(this))}get eoxMap(){return fn(this,Ug)}set eoxMap(n){const r=fn(this,Ug);ko(this,Ug,n),this.requestUpdate("eoxMap",r)}render(){var i,o,s;const n=(i=this.map)==null?void 0:i.getLayers().getArray(),r=n&&((o=IU(n,"layerControlOptional",!0))==null?void 0:o.length)>0;return yt`
      <style>
        ${!this.unstyled&&fn(this,SL)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${xr(this.addExternalLayers&&((s=fn(this,Ug))==null?void 0:s.addOrUpdateLayer),()=>yt`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${fn(this,Ug)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${xr(this.map,()=>yt`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            @changed=${In(this,Mm,sBe)}
            @datetime:updated=${In(this,Mm,aBe)}
            @layerConfig:change=${In(this,Mm,lBe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${xr(r,()=>yt`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}Ug=new WeakMap,Mm=new WeakSet,sBe=function(n){hLt(n,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:n.detail}))},aBe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{detail:n.detail}))},lBe=function(n){this.dispatchEvent(new CustomEvent("layerConfig:change",{detail:n.detail}))},SL=new WeakMap,Cn(oBe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol",oBe);class pLt extends HTMLElement{static get observedAttributes(){return["column-width","fill-grid","gap","row-height"]}constructor(){super(),this.mediaBreakpoints=[0,600,1280],this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        --row-height: ${this.getAttribute("row-height")||"1fr"};
        --column-width: ${this.getAttribute("column-width")||"1fr"};
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        ${this.getAttribute("fill-grid")!==null?`
          grid-template-columns: repeat(auto-fill, minmax(var(--column-width, 300px), 1fr));
          grid-template-rows: repeat(auto-fill, minmax(0, var(--row-height, 300px)));
          grid-auto-columns: var(--column-width, 300px);
          grid-auto-rows: var(--row-height, 300px);
          `:`
          grid-template-columns: repeat(12, ${this.getAttribute("column-width")?"var(--column-width)":"minmax(0, var(--column-width))"});
          grid-template-rows: repeat(12, ${this.getAttribute("row-height")?"var(--row-height)":"minmax(0, var(--row-height))"});
          `}
        overflow: auto;
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}class gLt extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var n,r;const t=(i,o=0)=>i!=null&&i.toString().includes("/")?i.split("/")[o]:i;this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;
        }
          ${(r=(n=this.parentElement)==null?void 0:n.mediaBreakpoints)==null?void 0:r.map((i,o)=>`
              @media (min-width: ${i}px) {
                :host {
                          ${this.parentElement&&this.parentElement.getAttribute("fill-grid")!==null?`
                          grid-column: span ${t(this.getAttribute("w"),o)};
                          grid-row: span ${t(this.getAttribute("h"),o)};
                          `:`            
                            grid-column: ${parseInt(t(this.getAttribute("x"),o))+1} / span ${t(this.getAttribute("w"),o)};
                            grid-row: ${parseInt(t(this.getAttribute("y"),o))+1} / span ${t(this.getAttribute("h"),o)};
                        `}
                  display: ${t(this.getAttribute("w"),o)==="0"||t(this.getAttribute("h"),o)==="0"?"none":"block"}
                }
              }
              `).join(`
`)}
      </style>
      <slot></slot>
    `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}customElements.define("eox-layout",pLt);customElements.define("eox-layout-item",gLt);const mLt={Point:xLt,LineString:wLt,Polygon:CLt,MultiPoint:ELt,MultiLineString:_Lt,MultiPolygon:ALt},vLt={Point:SLt,LineString:kLt,Polygon:TLt,MultiPoint:LLt,MultiLineString:DLt,MultiPolygon:RLt};class yLt extends iGe{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,n,r){const i=t,o=sSe(i.geometry,n),s=new dc;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(o),i.attributes){s.setProperties(i.attributes,!0);const a=i.attributes[r];a!==void 0&&s.setId(a)}return s}readFeaturesFromObject(t,n){if(n=n||{},t.features){const r=t,i=[],o=r.features;for(let s=0,a=o.length;s<a;++s)i.push(this.readFeatureFromObject(o[s],n,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,n)]}readGeometryFromObject(t,n){return sSe(t,n)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const r=t.spatialReference.wkid;return Qi("EPSG:"+r)}return null}writeGeometryObject(t,n){return aSe(t,this.adaptOptions(n))}writeFeatureObject(t,n){n=this.adaptOptions(n);const r={};if(!t.hasProperties())return r.attributes={},r;const i=t.getProperties(),o=t.getGeometry();if(o){r.geometry=aSe(o,n);const s=n&&(n.dataProjection||n.featureProjection);s&&(r.geometry.spatialReference={wkid:Number(Qi(s).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return oGe(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(t,n){n=this.adaptOptions(n);const r=[];for(let i=0,o=t.length;i<o;++i)r.push(this.writeFeatureObject(t[i],n));return{features:r}}}function sSe(e,t){if(!e)return null;let n;if(typeof e.x=="number"&&typeof e.y=="number")n="Point";else if(e.points)n="MultiPoint";else if(e.paths)e.paths.length===1?n="LineString":n="MultiLineString";else if(e.rings){const i=e,o=Fx(i),s=bLt(i.rings,o);s.length===1?(n="Polygon",e=Object.assign({},e,{rings:s[0]})):(n="MultiPolygon",e=Object.assign({},e,{rings:s}))}const r=mLt[n];return La(r(e),!1,t)}function bLt(e,t){const n=[],r=[],i=[];let o,s;for(o=0,s=e.length;o<s;++o)n.length=0,sGe(n,0,e[o],t.length),aGe(n,0,n.length,t.length)?r.push([e[o]]):i.push(e[o]);for(;i.length;){const a=i.shift();let l=!1;for(o=r.length-1;o>=0;o--){const u=r[o][0];if(D3(new rI(u).getExtent(),new rI(a).getExtent())){r[o].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function xLt(e){let t;return e.m!==void 0&&e.z!==void 0?t=new Cf([e.x,e.y,e.z,e.m],"XYZM"):e.z!==void 0?t=new Cf([e.x,e.y,e.z],"XYZ"):e.m!==void 0?t=new Cf([e.x,e.y,e.m],"XYM"):t=new Cf([e.x,e.y]),t}function wLt(e){const t=Fx(e);return new Yd(e.paths[0],t)}function _Lt(e){const t=Fx(e);return new rx(e.paths,t)}function Fx(e){let t="XY";return e.hasZ===!0&&e.hasM===!0?t="XYZM":e.hasZ===!0?t="XYZ":e.hasM===!0&&(t="XYM"),t}function ELt(e){const t=Fx(e);return new ML(e.points,t)}function ALt(e){const t=Fx(e);return new lA(e.rings,t)}function CLt(e){const t=Fx(e);return new uA(e.rings,t)}function SLt(e,t){const n=e.getCoordinates();let r;const i=e.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function gC(e){const t=e.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function kLt(e,t){const n=gC(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:[e.getCoordinates()]}}function TLt(e,t){const n=gC(e);return{hasZ:n.hasZ,hasM:n.hasM,rings:e.getCoordinates(!1)}}function DLt(e,t){const n=gC(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:e.getCoordinates()}}function LLt(e,t){const n=gC(e);return{hasZ:n.hasZ,hasM:n.hasM,points:e.getCoordinates()}}function RLt(e,t){const n=gC(e),r=e.getCoordinates(!1),i=[];for(let o=0;o<r.length;o++)for(let s=r[o].length-1;s>=0;s--)i.push(r[o][s]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function aSe(e,t){const n=vLt[e.getType()];return n(La(e,!0,t),t)}const Ep="http://www.opengis.net/gml",FLt=/^\s*$/;class On extends OL{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:nr(this.readFeaturesInternal),featureMembers:lr(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,n){const r=t.localName;let i=null;if(r=="FeatureCollection")i=nn([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const o=n[0];let s=o.featureType,a=o.featureNS;const l="p",u="p0";if(!s&&t.childNodes){s=[],a={};for(let d=0,p=t.childNodes.length;d<p;++d){const h=t.childNodes[d];if(h.nodeType===1){const g=h.nodeName.split(":").pop();if(!s.includes(g)){let m="",y=0;const v=h.namespaceURI;for(const x in a){if(a[x]===v){m=x;break}++y}m||(m=l+y,a[m]=v),s.push(m+":"+g)}}}r!="featureMember"&&(o.featureType=s,o.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const f={},c=Array.isArray(s)?s:[s];for(const d in a){const p={};for(let h=0,g=c.length;h<g;++h)(c[h].includes(":")?c[h].split(":")[0]:u)===d&&(p[c[h].split(":").pop()]=r=="featureMembers"?nr(this.readFeatureElement,this):lr(this.readFeatureElement,this));f[a[d]]=p}r=="featureMember"||r=="member"?i=nn(void 0,f,t,n):i=nn([],f,t,n)}return i===null&&(i=[]),i}readGeometryOrExtent(t,n){const r=n[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),nn(null,this.GEOMETRY_PARSERS,t,n,this)}readExtentElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?UN(i,r):void 0}readGeometryElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?La(i,!1,r):void 0}readFeatureElementInternal(t,n,r){let i;const o={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let u;const f=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=L3(l,!1),FLt.test(u)&&(u=void 0)):(r&&(u=f==="boundedBy"?this.readExtentElement(l,n):this.readGeometryElement(l,n)),u?f!=="boundedBy"&&(i=f):u=this.readFeatureElementInternal(l,n,!1));const c=l.attributes.length;if(c>0&&!(u instanceof lGe)){u={_content_:u};for(let d=0;d<c;d++){const p=l.attributes[d].name;u[p]=l.attributes[d].value}}o[f]?(o[f]instanceof Array||(o[f]=[o[f]]),o[f].push(u)):o[f]=u}if(!r)return o;const s=new dc(o);i&&s.setGeometryName(i);const a=t.getAttribute("fid")||uGe(t,this.namespace,"id");return a&&s.setId(a),s}readFeatureElement(t,n){return this.readFeatureElementInternal(t,n,!0)}readPoint(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Cf(r,"XYZ")}readMultiPoint(t,n){const r=nn([],this.MULTIPOINT_PARSERS,t,n,this);if(r)return new ML(r)}readMultiLineString(t,n){const r=nn([],this.MULTILINESTRING_PARSERS,t,n,this);if(r)return new rx(r)}readMultiPolygon(t,n){const r=nn([],this.MULTIPOLYGON_PARSERS,t,n,this);if(r)return new lA(r)}pointMemberParser(t,n){tm(this.POINTMEMBER_PARSERS,t,n,this)}lineStringMemberParser(t,n){tm(this.LINESTRINGMEMBER_PARSERS,t,n,this)}polygonMemberParser(t,n){tm(this.POLYGONMEMBER_PARSERS,t,n,this)}readLineString(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Yd(r,"XYZ")}readFlatLinearRing(t,n){const r=nn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);if(r)return r}readLinearRing(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new rI(r,"XYZ")}readPolygon(t,n){const r=nn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],o=[i.length];let s,a;for(s=1,a=r.length;s<a;++s)R3(i,r[s]),o.push(i.length);return new uA(i,"XYZ",o)}}readFlatCoordinatesFromNode(t,n){return nn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}readGeometryFromNode(t,n){const r=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return r||null}readFeaturesFromNode(t,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return Qi(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}On.prototype.namespace=Ep;On.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};On.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};On.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};On.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:nr(On.prototype.pointMemberParser),pointMembers:nr(On.prototype.pointMemberParser)}};On.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:nr(On.prototype.lineStringMemberParser),lineStringMembers:nr(On.prototype.lineStringMemberParser)}};On.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:nr(On.prototype.polygonMemberParser),polygonMembers:nr(On.prototype.polygonMemberParser)}};On.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:nr(On.prototype.readFlatCoordinatesFromNode)}};On.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:nr(On.prototype.readLineString)}};On.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:nr(On.prototype.readPolygon)}};On.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:lr(On.prototype.readFlatLinearRing)}};const $Lt=Ep+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",MLt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class si extends On{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Ep].featureMember=nr(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:$Lt}readFlatCoordinates(t,n){const r=L3(t,!1).replace(/^\s*|\s*$/g,""),o=n[0].srsName;let s="enu";if(o){const u=Qi(o);u&&(s=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,f=a.length;u<f;u++){const c=a[u].split(/,+/),d=parseFloat(c[0]),p=parseFloat(c[1]),h=c.length===3?parseFloat(c[2]):0;s.startsWith("en")?l.push(d,p,h):l.push(p,d,h)}return l}readBox(t,n){const r=nn([null],this.BOX_PARSERS_,t,n,this);return aDe(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,n){const r=nn(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(t,n){const r=nn(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.multiSurface,s=i.surface,a=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),Gr("http://www.opengis.net/gml",r)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const o=r[r.length-1],s=o.featureNS,a=n.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const p=c[d];p!=null&&(l.push(d),u.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=at(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=at(li)))}}const f=Object.assign({},o);f.node=t,Do(f,o.serializers,sc(void 0,s),u,r,l)}writeCurveOrLineString(t,n,r){const o=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&o&&t.setAttribute("srsName",o),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s),this.writeCoordinates_(s,n,r)}else if(t.nodeName==="Curve"){const s=Gr(t.namespaceURI,"segments");t.appendChild(s),this.writeCurveSegments_(s,n,r)}}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.curve;s&&t.setAttribute("srsName",s);const l=n.getLineStrings();Do({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,n,r){const i=r[r.length-1],o=Object.assign({},i);o.node=t;let s;Array.isArray(n)?s=UN(n,i):s=La(n,!0,i),Do(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}createCoordinatesNode_(t){const n=Gr(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=n.getCoordinates(),l=a.length,u=new Array(l);for(let f=0;f<l;++f){const c=a[f];u[f]=this.getCoords_(c,s,o)}li(t,u.join(" "))}writeCurveSegments_(t,n,r){const i=Gr(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Do({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=Gr(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.node,s=i.exteriorWritten;return s===void 0&&(i.exteriorWritten=!0),Gr(o.namespaceURI,s!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,n,r){const i=Gr(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(t,n,r){const i=Gr(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(t,n,r){let o=(n?Qi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(r){const s=t[2]||0;o+=","+s}return o}writePoint(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;s&&t.setAttribute("srsName",s);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=n.getCoordinates(),u=this.getCoords_(l,s,o);li(a,u)}writeMultiPoint(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;s&&t.setAttribute("srsName",s);const a=n.getPoints();Do({node:t,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,sc("pointMember"),a,r,void 0,this)}writePointMember(t,n,r){const i=Gr(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s),this.writeCoordinates_(s,n,r)}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.surface;s&&t.setAttribute("srsName",s);const l=n.getPolygons();Do({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Do({node:t},this.ENVELOPE_SERIALIZERS,ix,a,r,s,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return Gr("http://www.opengis.net/gml",MLt[i.nodeName])}}si.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:lr(si.prototype.readFlatCoordinates)}};si.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:si.prototype.innerBoundaryIsParser,outerBoundaryIs:si.prototype.outerBoundaryIsParser}};si.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:nr(si.prototype.readFlatCoordinates)}};si.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:lr(On.prototype.readPoint),MultiPoint:lr(On.prototype.readMultiPoint),LineString:lr(On.prototype.readLineString),MultiLineString:lr(On.prototype.readMultiLineString),LinearRing:lr(On.prototype.readLinearRing),Polygon:lr(On.prototype.readPolygon),MultiPolygon:lr(On.prototype.readMultiPolygon),Box:lr(si.prototype.readBox)}};si.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:at(si.prototype.writeCurveOrLineString),MultiCurve:at(si.prototype.writeMultiCurveOrLineString),Point:at(si.prototype.writePoint),MultiPoint:at(si.prototype.writeMultiPoint),LineString:at(si.prototype.writeCurveOrLineString),MultiLineString:at(si.prototype.writeMultiCurveOrLineString),LinearRing:at(si.prototype.writeLinearRing),Polygon:at(si.prototype.writeSurfaceOrPolygon),MultiPolygon:at(si.prototype.writeMultiSurfaceOrPolygon),Surface:at(si.prototype.writeSurfaceOrPolygon),MultiSurface:at(si.prototype.writeMultiSurfaceOrPolygon),Envelope:at(si.prototype.writeEnvelope)}};si.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:at(si.prototype.writeLineStringOrCurveMember),curveMember:at(si.prototype.writeLineStringOrCurveMember)}};si.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:at(si.prototype.writeRing),innerBoundaryIs:at(si.prototype.writeRing)}};si.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:at(si.prototype.writePointMember)}};si.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:at(si.prototype.writeSurfaceOrPolygonMember),polygonMember:at(si.prototype.writeSurfaceOrPolygonMember)}};si.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:at(li),upperCorner:at(li)}};const OLt=Ep+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",ILt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Gt extends On{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:OLt,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,n){const r=nn([],this.MULTICURVE_PARSERS,t,n,this);if(r)return new rx(r)}readFlatCurveRing(t,n){const r=nn([],this.MULTICURVE_PARSERS,t,n,this),i=[];for(let o=0,s=r.length;o<s;++o)R3(i,r[o].getFlatCoordinates());return i}readMultiSurface(t,n){const r=nn([],this.MULTISURFACE_PARSERS,t,n,this);if(r)return new lA(r)}curveMemberParser(t,n){tm(this.CURVEMEMBER_PARSERS,t,n,this)}surfaceMemberParser(t,n){tm(this.SURFACEMEMBER_PARSERS,t,n,this)}readPatch(t,n){return nn([null],this.PATCHES_PARSERS,t,n,this)}readSegment(t,n){return nn([],this.SEGMENTS_PARSERS,t,n,this)}readPolygonPatch(t,n){return nn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)}readLineStringSegment(t,n){return nn([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}interiorParser(t,n){const r=nn(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}exteriorParser(t,n){const r=nn(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(t,n){const r=nn([null],this.SURFACE_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],o=[i.length];let s,a;for(s=1,a=r.length;s<a;++s)R3(i,r[s]),o.push(i.length);return new uA(i,"XYZ",o)}}readCurve(t,n){const r=nn([null],this.CURVE_PARSERS,t,n,this);if(r)return new Yd(r,"XYZ")}readEnvelope(t,n){const r=nn([null],this.ENVELOPE_PARSERS,t,n,this);return aDe(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,n){let r=L3(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];let s;for(;s=i.exec(r);)o.push(parseFloat(s[1])),r=r.substr(s[0].length);if(r!=="")return;const l=n[0].srsName;if((l?Qi(l).getAxisOrientation():"enu")==="neu")for(let c=0,d=o.length;c<d;c+=3){const p=o[c],h=o[c+1];o[c]=h,o[c+1]=p}const f=o.length;if(f==2&&o.push(0),f!==0)return o}readFlatPosList(t,n){const r=L3(t,!1).replace(/^\s*|\s*$/g,""),i=n[0],o=i.srsName,s=i.srsDimension,a=o?Qi(o).getAxisOrientation():"enu",l=r.split(/\s+/);let u=2;t.getAttribute("srsDimension")?u=jg(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=jg(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=jg(t.parentNode.getAttribute("srsDimension")):s&&(u=jg(s));const f=a.startsWith("en");let c,d,p;const h=[];for(let g=0,m=l.length;g<m;g+=u)c=parseFloat(l[g]),d=parseFloat(l[g+1]),p=u===3?parseFloat(l[g+2]):0,f?h.push(c,d,p):h.push(d,c,p);return h}writePos_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=i.srsName,l=a?Qi(a).getAxisOrientation():"enu",u=n.getCoordinates();let f=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(o){const c=u[2]||0;f+=" "+c}li(t,f)}getCoords_(t,n,r){let o=(n?Qi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(r){const s=t[2]||0;o+=" "+s}return o}writePosList_(t,n,r){const i=r[r.length-1],o=i.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=i.srsName,l=n.getCoordinates(),u=l.length,f=new Array(u);let c;for(let d=0;d<u;++d)c=l[d],f[d]=this.getCoords_(c,a,o);li(t,f.join(" "))}writePoint(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=Gr(t.namespaceURI,"pos");t.appendChild(s),this.writePos_(s,n,r)}writeEnvelope(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Do({node:t},this.ENVELOPE_SERIALIZERS,ix,a,r,s,this)}writeLinearRing(t,n,r){const o=r[r.length-1].srsName;o&&t.setAttribute("srsName",o);const s=Gr(t.namespaceURI,"posList");t.appendChild(s),this.writePosList_(s,n,r)}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.node,s=i.exteriorWritten;return s===void 0&&(i.exteriorWritten=!0),Gr(o.namespaceURI,s!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Do({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=Gr(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(t,n,r){const o=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&o&&t.setAttribute("srsName",o),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const s=Gr(t.namespaceURI,"posList");t.appendChild(s),this.writePosList_(s,n,r)}else if(t.nodeName==="Curve"){const s=Gr(t.namespaceURI,"segments");t.appendChild(s),this.writeCurveSegments_(s,n,r)}}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.surface;s&&t.setAttribute("srsName",s);const l=n.getPolygons();Do({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,n,r){const i=r[r.length-1],o=i.srsName,s=i.hasZ;o&&t.setAttribute("srsName",o);const a=n.getPoints();Do({node:t,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,sc("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],o=i.hasZ,s=i.srsName,a=i.curve;s&&t.setAttribute("srsName",s);const l=n.getLineStrings();Do({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,n,r){const i=Gr(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(t,n,r){const i=Gr(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(t,n,r){const i=Gr(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(t,n,r){const i=Gr(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(t,n,r){const i=r[r.length-1],o=Object.assign({},i);o.node=t;let s;Array.isArray(n)?s=UN(n,i):s=La(n,!0,i),Do(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const o=r[r.length-1],s=o.featureNS,a=n.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const p=c[d];p!=null&&(l.push(d),u.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=at(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=at(li)))}}const f=Object.assign({},o);f.node=t,Do(f,o.serializers,sc(void 0,s),u,r,l)}writeFeatureMembers_(t,n,r){const i=r[r.length-1],o=i.featureType,s=i.featureNS,a={};a[s]={},a[s][o]=at(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=t,Do(l,a,sc(o,s),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return Gr(this.namespace,ILt[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],o=i.multiSurface,s=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),Gr(this.namespace,r)}writeGeometryNode(t,n){n=this.adaptOptions(n);const r=Gr(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,t,[i]),r}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=Gr(this.namespace,"featureMembers");r.setAttributeNS(K_,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,t,[i]),r}}Gt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:lr(Gt.prototype.readFlatPos),posList:lr(Gt.prototype.readFlatPosList),coordinates:lr(si.prototype.readFlatCoordinates)}};Gt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Gt.prototype.interiorParser,exterior:Gt.prototype.exteriorParser}};Gt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:lr(On.prototype.readPoint),MultiPoint:lr(On.prototype.readMultiPoint),LineString:lr(On.prototype.readLineString),MultiLineString:lr(On.prototype.readMultiLineString),LinearRing:lr(On.prototype.readLinearRing),Polygon:lr(On.prototype.readPolygon),MultiPolygon:lr(On.prototype.readMultiPolygon),Surface:lr(Gt.prototype.readSurface),MultiSurface:lr(Gt.prototype.readMultiSurface),Curve:lr(Gt.prototype.readCurve),MultiCurve:lr(Gt.prototype.readMultiCurve),Envelope:lr(Gt.prototype.readEnvelope)}};Gt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:nr(Gt.prototype.curveMemberParser),curveMembers:nr(Gt.prototype.curveMemberParser)}};Gt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:nr(Gt.prototype.surfaceMemberParser),surfaceMembers:nr(Gt.prototype.surfaceMemberParser)}};Gt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:nr(On.prototype.readLineString),Curve:nr(Gt.prototype.readCurve)}};Gt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:nr(On.prototype.readPolygon),Surface:nr(Gt.prototype.readSurface)}};Gt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:lr(Gt.prototype.readPatch)}};Gt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:lr(Gt.prototype.readSegment)}};Gt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:nr(Gt.prototype.readFlatPosList),upperCorner:nr(Gt.prototype.readFlatPosList)}};Gt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:lr(Gt.prototype.readPolygonPatch)}};Gt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:lDe(Gt.prototype.readLineStringSegment)}};On.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:lr(On.prototype.readFlatLinearRing),Ring:lr(Gt.prototype.readFlatCurveRing)}};Gt.prototype.writeFeatures;Gt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:at(Gt.prototype.writeRing),interior:at(Gt.prototype.writeRing)}};Gt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:at(li),upperCorner:at(li)}};Gt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:at(Gt.prototype.writeSurfaceOrPolygonMember),polygonMember:at(Gt.prototype.writeSurfaceOrPolygonMember)}};Gt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:at(Gt.prototype.writePointMember)}};Gt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:at(Gt.prototype.writeLineStringOrCurveMember),curveMember:at(Gt.prototype.writeLineStringOrCurveMember)}};Gt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:at(Gt.prototype.writeCurveOrLineString),MultiCurve:at(Gt.prototype.writeMultiCurveOrLineString),Point:at(Gt.prototype.writePoint),MultiPoint:at(Gt.prototype.writeMultiPoint),LineString:at(Gt.prototype.writeCurveOrLineString),MultiLineString:at(Gt.prototype.writeMultiCurveOrLineString),LinearRing:at(Gt.prototype.writeLinearRing),Polygon:at(Gt.prototype.writeSurfaceOrPolygon),MultiPolygon:at(Gt.prototype.writeMultiSurfaceOrPolygon),Surface:at(Gt.prototype.writeSurfaceOrPolygon),MultiSurface:at(Gt.prototype.writeMultiSurfaceOrPolygon),Envelope:at(Gt.prototype.writeEnvelope)}};const BU=Gt;BU.prototype.writeFeatures;BU.prototype.writeFeaturesNode;const Jo=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],NLt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",PLt={rte:uBe,trk:cBe,wpt:fBe},BLt=En(Jo,{rte:nr(uBe),trk:nr(cBe),wpt:nr(fBe)}),zLt=En(Jo,{text:ot(Jt,"linkText"),type:ot(Jt,"linkType")}),ULt=En(Jo,{name:ot(Jt),email:pRt,link:mC}),jLt=En(Jo,{name:ot(Jt),desc:ot(Jt),author:ot(fRt),copyright:ot(dRt),link:mC,time:ot(IL),keywords:ot(Jt),bounds:hRt,extensions:s$}),HLt=En(Jo,{year:ot(Ls),license:ot(Jt)}),qLt=En(Jo,{rte:at(yRt),trk:at(bRt),wpt:at(wRt)});class GLt extends OL{constructor(t){super(),t=t||{},this.dataProjection=Qi("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let n=0,r=t.length;n<r;++n){const i=t[n];if(this.readExtensions_){const o=i.get("extensionsNode_")||null;this.readExtensions_(i,o)}i.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(F3(t)):$3(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(t){if(!Jo.includes(t.namespaceURI))return null;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Jo.includes(n.namespaceURI)&&n.localName==="metadata")return nn({},jLt,n,[]);return null}readFeatureFromNode(t,n){if(!Jo.includes(t.namespaceURI))return null;const r=PLt[t.localName];if(!r)return null;const i=r(t,[this.getReadOptions(t,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,n){if(!Jo.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const r=nn([],BLt,t,[this.getReadOptions(t,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=Gr("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",K_),r.setAttributeNS(K_,"xsi:schemaLocation",NLt),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Do({node:r},qLt,cRt,t,[n]),r}}const WLt=En(Jo,{name:ot(Jt),cmt:ot(Jt),desc:ot(Jt),src:ot(Jt),link:mC,number:ot(Ls),extensions:s$,type:ot(Jt),rtept:gRt}),VLt=En(Jo,{ele:ot(xl),time:ot(IL)}),YLt=En(Jo,{name:ot(Jt),cmt:ot(Jt),desc:ot(Jt),src:ot(Jt),link:mC,number:ot(Ls),type:ot(Jt),extensions:s$,trkseg:vRt}),XLt=En(Jo,{trkpt:mRt}),KLt=En(Jo,{ele:ot(xl),time:ot(IL)}),ZLt=En(Jo,{ele:ot(xl),time:ot(IL),magvar:ot(xl),geoidheight:ot(xl),name:ot(Jt),cmt:ot(Jt),desc:ot(Jt),src:ot(Jt),link:mC,sym:ot(Jt),type:ot(Jt),fix:ot(Jt),sat:ot(Ls),hdop:ot(xl),vdop:ot(xl),pdop:ot(xl),ageofdgpsdata:ot(xl),dgpsid:ot(Ls),extensions:s$}),QLt=["text","type"],JLt=En(Jo,{text:at(li),type:at(li)}),eRt=En(Jo,["name","cmt","desc","src","link","number","type","rtept"]),tRt=En(Jo,{name:at(li),cmt:at(li),desc:at(li),src:at(li),link:at(jU),number:at(M3),type:at(li),rtept:uDe(at(HU))}),nRt=En(Jo,["ele","time"]),rRt=En(Jo,["name","cmt","desc","src","link","number","type","trkseg"]),iRt=En(Jo,{name:at(li),cmt:at(li),desc:at(li),src:at(li),link:at(jU),number:at(M3),type:at(li),trkseg:uDe(at(xRt))}),oRt=sc("trkpt"),sRt=En(Jo,{trkpt:at(HU)}),aRt=En(Jo,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),lRt=En(Jo,{ele:at(L0),time:at(cGe),magvar:at(L0),geoidheight:at(L0),name:at(li),cmt:at(li),desc:at(li),src:at(li),link:at(jU),sym:at(li),type:at(li),fix:at(li),sat:at(M3),hdop:at(L0),vdop:at(L0),pdop:at(L0),ageofdgpsdata:at(L0),dgpsid:at(M3)}),uRt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function cRt(e,t,n){const r=e.getGeometry();if(r){const i=uRt[r.getType()];if(i){const o=t[t.length-1].node;return Gr(o.namespaceURI,i)}}}function zU(e,t,n,r){return e.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(e.push(r.ele),delete r.ele,t.hasZ=!0):e.push(0),"time"in r?(e.push(r.time),delete r.time,t.hasM=!0):e.push(0),e}function UU(e,t,n){let r="XY",i=2;if(e.hasZ&&e.hasM?(r="XYZM",i=4):e.hasZ?(r="XYZ",i=3):e.hasM&&(r="XYM",i=3),i!==4){for(let o=0,s=t.length/4;o<s;o++)t[o*i]=t[o*4],t[o*i+1]=t[o*4+1],e.hasZ&&(t[o*i+2]=t[o*4+2]),e.hasM&&(t[o*i+2]=t[o*4+3]);if(t.length=t.length/4*i,n)for(let o=0,s=n.length;o<s;o++)n[o]=n[o]/4*i}return r}function fRt(e,t){const n=nn({},ULt,e,t);if(n)return n}function dRt(e,t){const n=nn({},HLt,e,t);if(n){const r=e.getAttribute("author");return r!==null&&(n.author=r),n}}function hRt(e,t){const n=t[t.length-1],r=e.getAttribute("minlat"),i=e.getAttribute("minlon"),o=e.getAttribute("maxlat"),s=e.getAttribute("maxlon");i!==null&&r!==null&&s!==null&&o!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(s),parseFloat(o)]])}function pRt(e,t){const n=t[t.length-1],r=e.getAttribute("id"),i=e.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function mC(e,t){const n=t[t.length-1],r=e.getAttribute("href");r!==null&&(n.link=r),tm(zLt,e,t)}function s$(e,t){const n=t[t.length-1];n.extensionsNode_=e}function gRt(e,t){const n=nn({},VLt,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,o=r.layoutOptions;zU(i,o,e,n)}}function mRt(e,t){const n=nn({},KLt,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,o=r.layoutOptions;zU(i,o,e,n)}}function vRt(e,t){const n=t[t.length-1];tm(XLt,e,t);const r=n.flatCoordinates;n.ends.push(r.length)}function uBe(e,t){const n=t[0],r=nn({flatCoordinates:[],layoutOptions:{}},WLt,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const o=r.layoutOptions;delete r.layoutOptions;const s=UU(o,i),a=new Yd(i,s);La(a,!1,n);const l=new dc(a);return l.setProperties(r,!0),l}function cBe(e,t){const n=t[0],r=nn({flatCoordinates:[],ends:[],layoutOptions:{}},YLt,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const o=r.ends;delete r.ends;const s=r.layoutOptions;delete r.layoutOptions;const a=UU(s,i,o),l=new rx(i,a,o);La(l,!1,n);const u=new dc(l);return u.setProperties(r,!0),u}function fBe(e,t){const n=t[0],r=nn({},ZLt,e,t);if(!r)return;const i={},o=zU([],i,e,r),s=UU(i,o),a=new Cf(o,s);La(a,!1,n);const l=new dc(a);return l.setProperties(r,!0),l}function jU(e,t,n){e.setAttribute("href",t);const i=n[n.length-1].properties,o=[i.linkText,i.linkType];Do({node:e},JLt,ix,o,n,QLt)}function HU(e,t,n){const r=n[n.length-1],o=r.node.namespaceURI,s=r.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":t[3]!==0&&(s.time=t[3]);case"XYZ":t[2]!==0&&(s.ele=t[2]);break;case"XYM":t[2]!==0&&(s.time=t[2]);break}const l=e.nodeName=="rtept"?nRt[o]:aRt[o],u=jN(s,l);Do({node:e,properties:s},lRt,ix,u,n,l)}function yRt(e,t,n){const r=n[0],i=t.getProperties(),o={node:e};o.properties=i;const s=t.getGeometry();if(s.getType()=="LineString"){const f=La(s,!0,r);o.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const a=n[n.length-1].node,l=eRt[a.namespaceURI],u=jN(i,l);Do(o,tRt,ix,u,n,l)}function bRt(e,t,n){const r=n[0],i=t.getProperties(),o={node:e};o.properties=i;const s=t.getGeometry();if(s.getType()=="MultiLineString"){const f=La(s,!0,r);i.trkseg=f.getLineStrings()}const a=n[n.length-1].node,l=rRt[a.namespaceURI],u=jN(i,l);Do(o,iRt,ix,u,n,l)}function xRt(e,t,n){const r={node:e};r.geometryLayout=t.getLayout(),r.properties={},Do(r,sRt,oRt,t.getCoordinates(),n)}function wRt(e,t,n){const r=n[0],i=n[n.length-1];i.properties=t.getProperties();const o=t.getGeometry();if(o.getType()=="Point"){const s=La(o,!0,r);i.geometryLayout=s.getLayout(),HU(e,s.getCoordinates(),n)}}const _Rt=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ERt=/^H.([A-Z]{3}).*?:(.*)/,ARt=/^HFDTE(\d{2})(\d{2})(\d{2})/,CRt=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,SRt=/\r\n|\r|\n/;class kRt extends bU{constructor(t){super(),t=t||{},this.dataProjection=Qi("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,n){const r=this.altitudeMode_,i=t.split(SRt),o={},s=[];let a=2e3,l=0,u=1,f=-1,c,d;for(c=0,d=i.length;c<d;++c){const m=i[c];let y;if(m.charAt(0)=="B"){if(y=_Rt.exec(m),y){const v=parseInt(y[1],10),x=parseInt(y[2],10),_=parseInt(y[3],10);let E=parseInt(y[4],10)+parseInt(y[5],10)/6e4;this.lad_&&(E+=parseInt(m.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),y[6]=="S"&&(E=-E);let C=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(this.lod_&&(C+=parseInt(m.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),y[9]=="W"&&(C=-C),s.push(C,E),r!="none"){let T;r=="gps"?T=parseInt(y[11],10):r=="barometric"?T=parseInt(y[12],10):T=0,s.push(T)}let w=Date.UTC(a,l,u,v,x,_);w<f&&(w=Date.UTC(a,l,u+1,v,x,_)),s.push(w/1e3),f=w}}else if(m.charAt(0)=="H")y=CRt.exec(m),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=ARt.exec(m),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=ERt.exec(m),y&&(o[y[1]]=y[2].trim())));else if(m.charAt(0)=="I"){const v=parseInt(m.slice(1,3),10);for(let x=0;x<v;x++){const _=m.slice(7+x*7,10+x*7);if(_==="LAD"||_==="LOD"){const E=parseInt(m.slice(3+x*7,5+x*7),10)-1,C=parseInt(m.slice(5+x*7,7+x*7),10);_==="LAD"?(this.lad_=!0,this.ladStart_=E,this.ladStop_=C):_==="LOD"&&(this.lod_=!0,this.lodStart_=E,this.lodStop_=C)}}}}if(s.length===0)return null;const p=r=="none"?"XYM":"XYZM",h=new Yd(s,p),g=new dc(La(h,!1,n));return g.setProperties(o,!0),g}readFeaturesFromText(t,n){const r=this.readFeatureFromText(t,n);return r?[r]:[]}}const Xs={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Xv={};Xv[Xs.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Xv[Xs.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Xv[Xs.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Xv.none={none:{supports:[],formats:[],qualities:[]}};const TRt=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,lSe=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,DRt=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function LRt(e){let t=e.getComplianceLevelSupportedFeatures();return t===void 0&&(t=Xv[Xs.VERSION1].level0),{url:e.imageInfo["@id"]===void 0?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,e.imageInfo.formats===void 0?[]:e.imageInfo.formats],qualities:[...t.qualities,e.imageInfo.qualities===void 0?[]:e.imageInfo.qualities],resolutions:e.imageInfo.scale_factors,tileSize:e.imageInfo.tile_width!==void 0?e.imageInfo.tile_height!==void 0?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:e.imageInfo.tile_height!=null?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function RRt(e){const t=e.getComplianceLevelSupportedFeatures(),n=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,r=n&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],i=n&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],o=n&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(s){return[s.width,s.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(s){return s.width})[0],e.imageInfo.tiles.map(function(s){return s.height===void 0?s.width:s.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(s){return s.scaleFactors})[0],supports:[...t.supports,...r],formats:[...t.formats,...i],qualities:[...t.qualities,...o]}}function FRt(e){const t=e.getComplianceLevelSupportedFeatures(),n=e.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...e.imageInfo.extraFormats],r=e.imageInfo.preferredFormats!==void 0&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,o){return i===void 0&&n.includes(o)?o:i},void 0):void 0;return{url:e.imageInfo.id,sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(i){return i.width})[0],e.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:e.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...e.imageInfo.extraFeatures],formats:n,qualities:e.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...e.imageInfo.extraQualities],preferredFormat:r}}const a$={};a$[Xs.VERSION1]=LRt;a$[Xs.VERSION2]=RRt;a$[Xs.VERSION3]=FRt;class $Rt{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Xs.VERSION1;case"http://iiif.io/api/image/2/context.json":return Xs.VERSION2;case"http://iiif.io/api/image/3/context.json":return Xs.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Xs.VERSION1)&&this.imageInfo.identifier)return Xs.VERSION1;break}Wc(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case Xs.VERSION1:if(TRt.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Xs.VERSION3:if(DRt.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Xs.VERSION2:if(typeof this.imageInfo.profile=="string"&&lSe.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&lSe.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const n=this.getComplianceLevelEntryFromProfile(t);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return n===void 0?Xv.none.none:Xv[t][n]}getTileSourceOptions(t){const n=t||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:a$[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(o,s){return s-o}):void 0,tileSize:i.tileSize}}}class qU{read(t){if(!t)return null;if(typeof t=="string"){const n=F3(t);return this.readFromDocument(n)}return $3(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(t){Xh()}}const MRt="http://www.w3.org/1999/xlink";function $x(e){return e.getAttributeNS(MRt,"href")}const qu=[null,"http://www.opengis.net/ows/1.1"],ORt=En(qu,{ServiceIdentification:ot(oFt),ServiceProvider:ot(aFt),OperationsMetadata:ot(rFt)});class dBe extends qU{constructor(){super()}readFromNode(t){const n=nn({},ORt,t,[]);return n||null}}const IRt=En(qu,{DeliveryPoint:ot(Jt),City:ot(Jt),AdministrativeArea:ot(Jt),PostalCode:ot(Jt),Country:ot(Jt),ElectronicMailAddress:ot(Jt)}),NRt=En(qu,{Value:so(lFt)}),PRt=En(qu,{AllowedValues:ot(KRt)}),BRt=En(qu,{Phone:ot(iFt),Address:ot(XRt)}),zRt=En(qu,{HTTP:ot(tFt)}),URt=En(qu,{Get:so(eFt),Post:void 0}),jRt=En(qu,{DCP:ot(JRt)}),HRt=En(qu,{Operation:nFt}),qRt=En(qu,{Voice:ot(Jt),Facsimile:ot(Jt)}),GRt=En(qu,{Constraint:so(ZRt)}),WRt=En(qu,{IndividualName:ot(Jt),PositionName:ot(Jt),ContactInfo:ot(QRt)}),VRt=En(qu,{Abstract:ot(Jt),AccessConstraints:ot(Jt),Fees:ot(Jt),Title:ot(Jt),ServiceTypeVersion:ot(Jt),ServiceType:ot(Jt)}),YRt=En(qu,{ProviderName:ot(Jt),ProviderSite:ot($x),ServiceContact:ot(sFt)});function XRt(e,t){return nn({},IRt,e,t)}function KRt(e,t){return nn({},NRt,e,t)}function ZRt(e,t){const n=e.getAttribute("name");if(n)return nn({name:n},PRt,e,t)}function QRt(e,t){return nn({},BRt,e,t)}function JRt(e,t){return nn({},zRt,e,t)}function eFt(e,t){const n=$x(e);if(n)return nn({href:n},GRt,e,t)}function tFt(e,t){return nn({},URt,e,t)}function nFt(e,t){const n=e.getAttribute("name"),r=nn({},jRt,e,t);if(!r)return;const i=t[t.length-1];i[n]=r}function rFt(e,t){return nn({},HRt,e,t)}function iFt(e,t){return nn({},qRt,e,t)}function oFt(e,t){return nn({},VRt,e,t)}function sFt(e,t){return nn({},WRt,e,t)}function aFt(e,t){return nn({},YRt,e,t)}function lFt(e,t){return Jt(e)}function uSe(e,t,n,r,i,o){i!==void 0?(i=i,o=o!==void 0?o:0):(i=[],o=0);let s=t;for(;s<n;){const a=e[s++];i[o++]=e[s++],i[o++]=a;for(let l=2;l<r;++l)i[o++]=e[s++]}return i.length=o,i}class uFt extends bU{constructor(t){super(),t=t||{},this.dataProjection=Qi("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n);return new dc(r)}readFeaturesFromText(t,n){return[this.readFeatureFromText(t,n)]}readGeometryFromText(t,n){const r=fGe(this.geometryLayout_),i=fFt(t,r,this.factor_);uSe(i,0,i.length,r,i);const o=dGe(i,0,i.length,r),s=new Yd(o,this.geometryLayout_);return La(s,!1,this.adaptOptions(n))}writeFeatureText(t,n){const r=t.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,n){return this.writeFeatureText(t[0],n)}writeGeometryText(t,n){t=La(t,!0,this.adaptOptions(n));const r=t.getFlatCoordinates(),i=t.getStride();return uSe(r,0,r.length,i,r),cFt(r,i,this.factor_)}}function cFt(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;for(let o=0,s=e.length;o<s;)for(r=0;r<t;++r,++o){const a=e[o],l=a-i[r];i[r]=a,e[o]=l}return dFt(e,n)}function fFt(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;const o=hFt(e,n);for(let s=0,a=o.length;s<a;)for(r=0;r<t;++r,++s)i[r]+=o[s],o[s]=i[r];return o}function dFt(e,t){t=t||1e5;for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t);return pFt(e)}function hFt(e,t){t=t||1e5;const n=gFt(e);for(let r=0,i=n.length;r<i;++r)n[r]/=t;return n}function pFt(e){for(let t=0,n=e.length;t<n;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return mFt(e)}function gFt(e){const t=vFt(e);for(let n=0,r=t.length;n<r;++n){const i=t[n];t[n]=i&1?~(i>>1):i>>1}return t}function mFt(e){let t="";for(let n=0,r=e.length;n<r;++n)t+=yFt(e[n]);return t}function vFt(e){const t=[];let n=0,r=0;for(let i=0,o=e.length;i<o;++i){const s=e.charCodeAt(i)-63;n|=(s&31)<<r,s<32?(t.push(n),n=0,r=0):r+=5}return t}function yFt(e){let t,n="";for(;e>=32;)t=(32|e&31)+63,n+=String.fromCharCode(t),e>>=5;return t=e+63,n+=String.fromCharCode(t),n}class Ni extends Gt{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,n,r)}}Ni.prototype.namespace="http://www.opengis.net/gml/3.2";Ni.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:lr(Gt.prototype.readFlatPos),posList:lr(Gt.prototype.readFlatPosList),coordinates:lr(si.prototype.readFlatCoordinates)}};Ni.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Gt.prototype.interiorParser,exterior:Gt.prototype.exteriorParser}};Ni.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:lr(On.prototype.readPoint),MultiPoint:lr(On.prototype.readMultiPoint),LineString:lr(On.prototype.readLineString),MultiLineString:lr(On.prototype.readMultiLineString),LinearRing:lr(On.prototype.readLinearRing),Polygon:lr(On.prototype.readPolygon),MultiPolygon:lr(On.prototype.readMultiPolygon),Surface:lr(Ni.prototype.readSurface),MultiSurface:lr(Gt.prototype.readMultiSurface),Curve:lr(Ni.prototype.readCurve),MultiCurve:lr(Gt.prototype.readMultiCurve),Envelope:lr(Ni.prototype.readEnvelope)}};Ni.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:nr(Gt.prototype.curveMemberParser),curveMembers:nr(Gt.prototype.curveMemberParser)}};Ni.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:nr(Gt.prototype.surfaceMemberParser),surfaceMembers:nr(Gt.prototype.surfaceMemberParser)}};Ni.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:nr(On.prototype.readLineString),Curve:nr(Gt.prototype.readCurve)}};Ni.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:nr(On.prototype.readPolygon),Surface:nr(Gt.prototype.readSurface)}};Ni.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:lr(Gt.prototype.readPatch)}};Ni.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:lr(Gt.prototype.readSegment)}};Ni.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:nr(Gt.prototype.readFlatPosList),upperCorner:nr(Gt.prototype.readFlatPosList)}};Ni.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:lr(Gt.prototype.readPolygonPatch)}};Ni.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:lDe(Gt.prototype.readLineStringSegment)}};Ni.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:nr(On.prototype.pointMemberParser),pointMembers:nr(On.prototype.pointMemberParser)}};Ni.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:nr(On.prototype.lineStringMemberParser),lineStringMembers:nr(On.prototype.lineStringMemberParser)}};Ni.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:nr(On.prototype.polygonMemberParser),polygonMembers:nr(On.prototype.polygonMemberParser)}};Ni.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:nr(On.prototype.readFlatCoordinatesFromNode)}};Ni.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:nr(On.prototype.readLineString)}};Ni.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:nr(On.prototype.readPolygon)}};Ni.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:lr(On.prototype.readFlatLinearRing),Ring:lr(Ni.prototype.readFlatCurveRing)}};Ni.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:at(Gt.prototype.writeRing),interior:at(Gt.prototype.writeRing)}};Ni.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:at(li),upperCorner:at(li)}};Ni.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:at(Gt.prototype.writeSurfaceOrPolygonMember),polygonMember:at(Gt.prototype.writeSurfaceOrPolygonMember)}};Ni.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:at(Gt.prototype.writePointMember)}};Ni.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:at(Gt.prototype.writeLineStringOrCurveMember),curveMember:at(Gt.prototype.writeLineStringOrCurveMember)}};Ni.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:at(Gt.prototype.writeCurveOrLineString),MultiCurve:at(Gt.prototype.writeMultiCurveOrLineString),Point:at(Ni.prototype.writePoint),MultiPoint:at(Gt.prototype.writeMultiPoint),LineString:at(Gt.prototype.writeCurveOrLineString),MultiLineString:at(Gt.prototype.writeMultiCurveOrLineString),LinearRing:at(Gt.prototype.writeLinearRing),Polygon:at(Gt.prototype.writeSurfaceOrPolygon),MultiPolygon:at(Gt.prototype.writeMultiSurfaceOrPolygon),Surface:at(Gt.prototype.writeSurfaceOrPolygon),MultiSurface:at(Gt.prototype.writeMultiSurfaceOrPolygon),Envelope:at(Gt.prototype.writeEnvelope)}};class hBe{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}}class bFt extends hBe{constructor(t,n){super(t),this.conditions=n,Wc(this.conditions.length>=2,"At least 2 conditions are required")}}class xFt extends bFt{constructor(t){super("And",Array.prototype.slice.call(arguments))}}class wFt extends hBe{constructor(t,n,r){if(super("BBOX"),this.geometryName=t,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function _Ft(e){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(xFt,t))}function EFt(e,t,n){return new wFt(e,t,n)}const cSe={"http://www.opengis.net/gml":{boundedBy:ot(On.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:nr(On.prototype.readFeaturesInternal)}},AFt={"http://www.opengis.net/wfs":{totalInserted:ot(Ls),totalUpdated:ot(Ls),totalDeleted:ot(Ls)},"http://www.opengis.net/wfs/2.0":{totalInserted:ot(Ls),totalUpdated:ot(Ls),totalDeleted:ot(Ls)}},CFt={"http://www.opengis.net/wfs":{TransactionSummary:ot(dSe,"transactionSummary"),InsertResults:ot(pSe,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:ot(dSe,"transactionSummary"),InsertResults:ot(pSe,"insertIds")}},SFt={"http://www.opengis.net/wfs":{PropertyName:at(li)},"http://www.opengis.net/wfs/2.0":{PropertyName:at(li)}},pBe={"http://www.opengis.net/wfs":{Insert:at(gSe),Update:at(vSe),Delete:at(mSe),Property:at(ySe),Native:at(bSe)},"http://www.opengis.net/wfs/2.0":{Insert:at(gSe),Update:at(vSe),Delete:at(mSe),Property:at(ySe),Native:at(bSe)}},gBe="feature",GU="http://www.w3.org/2000/xmlns/",WU={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},nN={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},VU={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},fSe={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},YU={"2.0.0":Ni,"1.1.0":Gt,"1.0.0":si},kFt="1.1.0";class TFt extends OL{constructor(t){super(),t=t||{},this.version_=t.version?t.version:kFt,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new YU[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:fSe[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,n){const r={node:t};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(t,n||{}));const i=[r];let o;this.version_==="2.0.0"?o=cSe:o=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=nn([],o,t,i,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(t){if(t){if(typeof t=="string"){const n=F3(t);return this.readTransactionResponseFromDocument(n)}return $3(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const n=F3(t);return this.readFeatureCollectionMetadataFromDocument(n)}return $3(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(t){const n={},r=jg(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,nn(n,cSe,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(t){return nn({},CFt,t,[])}writeGetFeature(t){const n=Gr(nN[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&n.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&n.setAttribute("count",String(t.count)),t.viewParams!==void 0&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(K_,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Wc(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let i=t.filter;t.bbox&&(Wc(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(r,{geometryName:t.geometryName,filter:i}),DSe(n,t.featureTypes,[r])}else t.featureTypes.forEach(i=>{const o=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(r,{geometryName:i.geometryName,filter:o}),DSe(n,[i.name],[r])});return n}combineBboxAndFilter(t,n,r,i){const o=EFt(t,n,r);return i?_Ft(i,o):o}writeTransaction(t,n,r,i){const o=[],s=i.version?i.version:this.version_,a=Gr(nN[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(K_,"xsi:schemaLocation",fSe[s]);const u=DFt(a,l,s,i);return t&&lk("Insert",t,o,u),n&&lk("Update",n,o,u),r&&lk("Delete",r,o,u),i.nativeElements&&lk("Native",i.nativeElements,o,u),a}readProjectionFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),Qi(r.pop().srsName)}}return null}}function DFt(e,t,n,r){const i=r.featurePrefix?r.featurePrefix:gBe;let o;return n==="1.0.0"?o=2:n==="1.1.0"?o=3:n==="2.0.0"&&(o=3.2),Object.assign({node:e},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:o,hasZ:r.hasZ,srsName:r.srsName},t)}function lk(e,t,n,r){Do(r,pBe,sc(e),t,n)}function dSe(e,t){return nn({},AFt,e,t)}const LFt={"http://www.opengis.net/ogc":{FeatureId:nr(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:nr(function(e,t){return e.getAttribute("fid")})}};function hSe(e,t){tm(LFt,e,t)}const RFt={"http://www.opengis.net/wfs":{Feature:hSe},"http://www.opengis.net/wfs/2.0":{Feature:hSe}};function pSe(e,t){return nn([],RFt,e,t)}function gSe(e,t,n){const r=n[n.length-1],i=r.featureType,o=r.featureNS,s=r.gmlVersion,a=Gr(o,i);e.appendChild(a),s===2?si.prototype.writeFeatureElement(a,t,n):s===3?Gt.prototype.writeFeatureElement(a,t,n):Ni.prototype.writeFeatureElement(a,t,n)}function mBe(e,t,n){const i=n[n.length-1].version,o=WU[i],s=Gr(o,"Filter"),a=Gr(o,"FeatureId");s.appendChild(a),a.setAttribute("fid",t),e.appendChild(s)}function XU(e,t){e=e||gBe;const n=e+":";return t.startsWith(n)?t:n+t}function mSe(e,t,n){const r=n[n.length-1];Wc(t.getId()!==void 0,"Features must have an id set");const i=r.featureType,o=r.featurePrefix,s=r.featureNS,a=XU(o,i);e.setAttribute("typeName",a),e.setAttributeNS(GU,"xmlns:"+o,s);const l=t.getId();l!==void 0&&mBe(e,l,n)}function vSe(e,t,n){const r=n[n.length-1];Wc(t.getId()!==void 0,"Features must have an id set");const i=r.version,o=r.featureType,s=r.featurePrefix,a=r.featureNS,l=XU(s,o),u=t.getGeometryName();e.setAttribute("typeName",l),e.setAttributeNS(GU,"xmlns:"+s,a);const f=t.getId();if(f!==void 0){const c=t.getKeys(),d=[];for(let p=0,h=c.length;p<h;p++){const g=t.get(c[p]);if(g!==void 0){let m=c[p];g&&typeof g.getSimplifiedGeometry=="function"&&(m=u),d.push({name:m,value:g})}}Do({version:i,gmlVersion:r.gmlVersion,node:e,hasZ:r.hasZ,srsName:r.srsName},pBe,sc("Property"),d,n),mBe(e,f,n)}}function ySe(e,t,n){const r=n[n.length-1],i=r.version,o=nN[i],a=Gr(o,i==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(e.appendChild(a),li(a,t.name),t.value!==void 0&&t.value!==null){const u=Gr(o,"Value");e.appendChild(u),t.value&&typeof t.value.getSimplifiedGeometry=="function"?l===2?si.prototype.writeGeometryElement(u,t.value,n):l===3?Gt.prototype.writeGeometryElement(u,t.value,n):Ni.prototype.writeGeometryElement(u,t.value,n):li(u,t.value)}}function bSe(e,t,n){t.vendorId&&e.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&li(e,t.value)}const l$={"http://www.opengis.net/wfs":{Query:at(xSe)},"http://www.opengis.net/wfs/2.0":{Query:at(xSe)},"http://www.opengis.net/ogc":{During:at(ESe),And:at(uk),Or:at(uk),Not:at(ASe),BBOX:at(wSe),Contains:at(kg),Intersects:at(kg),Within:at(kg),DWithin:at(_Se),PropertyIsEqualTo:at(Sc),PropertyIsNotEqualTo:at(Sc),PropertyIsLessThan:at(Sc),PropertyIsLessThanOrEqualTo:at(Sc),PropertyIsGreaterThan:at(Sc),PropertyIsGreaterThanOrEqualTo:at(Sc),PropertyIsNull:at(CSe),PropertyIsBetween:at(SSe),PropertyIsLike:at(kSe)},"http://www.opengis.net/fes/2.0":{During:at(ESe),And:at(uk),Or:at(uk),Not:at(ASe),BBOX:at(wSe),Contains:at(kg),Disjoint:at(kg),Intersects:at(kg),ResourceId:at($Ft),Within:at(kg),DWithin:at(_Se),PropertyIsEqualTo:at(Sc),PropertyIsNotEqualTo:at(Sc),PropertyIsLessThan:at(Sc),PropertyIsLessThanOrEqualTo:at(Sc),PropertyIsGreaterThan:at(Sc),PropertyIsGreaterThanOrEqualTo:at(Sc),PropertyIsNull:at(CSe),PropertyIsBetween:at(SSe),PropertyIsLike:at(kSe)}};function xSe(e,t,n){const r=n[n.length-1],i=r.version,o=r.featurePrefix,s=r.featureNS,a=r.propertyNames,l=r.srsName;let u;o?u=XU(o,t):u=t;let f;i==="2.0.0"?f="typeNames":f="typeName",e.setAttribute(f,u),l&&e.setAttribute("srsName",l),s&&e.setAttributeNS(GU,"xmlns:"+o,s);const c=Object.assign({},r);c.node=e,Do(c,SFt,sc("PropertyName"),a,n);const d=r.filter;if(d){const p=Gr(u$(i),"Filter");e.appendChild(p),FFt(p,d,n)}}function FFt(e,t,n){const r=n[n.length-1],i={node:e};Object.assign(i,{context:r}),Do(i,l$,sc(t.getTagName()),[t],n)}function wSe(e,t,n){const r=n[n.length-1],o=r.context.version;r.srsName=t.srsName;const s=YU[o];Mx(o,e,t.geometryName),s.prototype.writeGeometryElement(e,t.extent,n)}function $Ft(e,t,n){e.setAttribute("rid",t.rid)}function kg(e,t,n){const r=n[n.length-1],o=r.context.version;r.srsName=t.srsName;const s=YU[o];Mx(o,e,t.geometryName),s.prototype.writeGeometryElement(e,t.geometry,n)}function _Se(e,t,n){const o=n[n.length-1].context.version;kg(e,t,n);const s=Gr(u$(o),"Distance");li(s,t.distance.toString()),o==="2.0.0"?s.setAttribute("uom",t.unit):s.setAttribute("units",t.unit),e.appendChild(s)}function ESe(e,t,n){const o=n[n.length-1].context.version;RD(VU[o],"ValueReference",e,t.propertyName);const s=Gr(Ep,"TimePeriod");e.appendChild(s);const a=Gr(Ep,"begin");s.appendChild(a),TSe(a,t.begin);const l=Gr(Ep,"end");s.appendChild(l),TSe(l,t.end)}function uk(e,t,n){const i=n[n.length-1].context,o={node:e};Object.assign(o,{context:i});const s=t.conditions;for(let a=0,l=s.length;a<l;++a){const u=s[a];Do(o,l$,sc(u.getTagName()),[u],n)}}function ASe(e,t,n){const i=n[n.length-1].context,o={node:e};Object.assign(o,{context:i});const s=t.condition;Do(o,l$,sc(s.getTagName()),[s],n)}function Sc(e,t,n){const o=n[n.length-1].context.version;t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),Mx(o,e,t.propertyName),FD(o,e,""+t.expression)}function CSe(e,t,n){const o=n[n.length-1].context.version;Mx(o,e,t.propertyName)}function SSe(e,t,n){const o=n[n.length-1].context.version,s=u$(o);Mx(o,e,t.propertyName);const a=Gr(s,"LowerBoundary");e.appendChild(a),FD(o,a,""+t.lowerBoundary);const l=Gr(s,"UpperBoundary");e.appendChild(l),FD(o,l,""+t.upperBoundary)}function kSe(e,t,n){const o=n[n.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),Mx(o,e,t.propertyName),FD(o,e,""+t.pattern)}function RD(e,t,n,r){const i=Gr(e,t);li(i,r),n.appendChild(i)}function FD(e,t,n){RD(u$(e),"Literal",t,n)}function Mx(e,t,n){e==="2.0.0"?RD(VU[e],"ValueReference",t,n):RD(WU[e],"PropertyName",t,n)}function TSe(e,t){const n=Gr(Ep,"TimeInstant");e.appendChild(n);const r=Gr(Ep,"timePosition");n.appendChild(r),li(r,t)}function DSe(e,t,n){const r=n[n.length-1],i=Object.assign({},r);i.node=e,Do(i,l$,sc("Query"),t,n)}function u$(e){let t;return e==="2.0.0"?t=VU[e]:t=WU[e],t}const ho={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class LSe{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readPoint());return n}readPolygon(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readLineString());return n}readWkbHeader(t){const r=this.readUint8()>0,i=this.readUint32(r),o=Math.floor((i&268435455)/1e3),s=!!(i&2147483648)||o===1||o===3,a=!!(i&1073741824)||o===2||o===3,l=!!(i&536870912),u=(i&268435455)%1e3,f=["XY",s?"Z":"",a?"M":""].join(""),c=l?this.readUint32(r):null;if(t!==void 0&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==f)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=s,this.hasM_=a,this.layout_=f,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(t){switch(t){case ho.POINT:return this.readPoint();case ho.LINE_STRING:return this.readLineString();case ho.POLYGON:case ho.TRIANGLE:return this.readPolygon();case ho.MULTI_POINT:return this.readMultiPoint();case ho.MULTI_LINE_STRING:return this.readMultiLineString();case ho.MULTI_POLYGON:case ho.POLYHEDRAL_SURFACE:case ho.TIN:return this.readMultiPolygon();case ho.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,n){const r=this.readUint32(),i=[];for(let o=0;o<r;o++){const s=t.call(this,n);s&&i.push(s)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,ho.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,ho.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,ho.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case ho.POINT:return new Cf(n,this.layout_);case ho.LINE_STRING:return new Yd(n,this.layout_);case ho.POLYGON:case ho.TRIANGLE:return new uA(n,this.layout_);case ho.MULTI_POINT:return new ML(n,this.layout_);case ho.MULTI_LINE_STRING:return new rx(n,this.layout_);case ho.MULTI_POLYGON:case ho.POLYHEDRAL_SURFACE:case ho.TIN:return new lA(n,this.layout_);case ho.GEOMETRY_COLLECTION:return new dm(n);default:return null}}getSrid(){return this.srid_}}class MFt{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,n){const r=Object.assign.apply(null,n.split("").map((i,o)=>({[i]:t[o]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writePoint(t[r],n)}writePolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeLineString(t[r],n)}writeWkbHeader(t,n){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],n)}writeMultiLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],n)}writeMultiPolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],n)}writeGeometryCollection(t){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeGeometry(t[n])}findMinimumLayout(t,n="XYZM"){const r=(i,o)=>i===o?i:i==="XYZM"?o:o==="XYZM"?i:"XY";if(t instanceof Exe)return r(t.getLayout(),n);if(t instanceof dm){const i=t.getGeometriesArray();for(let o=0;o<i.length&&n!=="XY";o++)n=this.findMinimumLayout(i[o],n)}return n}writeGeometry(t,n){const r={Point:ho.POINT,LineString:ho.LINE_STRING,Polygon:ho.POLYGON,MultiPoint:ho.MULTI_POINT,MultiLineString:ho.MULTI_LINE_STRING,MultiPolygon:ho.MULTI_POLYGON,GeometryCollection:ho.GEOMETRY_COLLECTION},i=t.getType(),o=r[i];if(!o)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(o,n),t instanceof Exe?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,t.getCoordinates(),t.getLayout()):t instanceof dm&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((o,s)=>o+s[0],0),n=new ArrayBuffer(t),r=new DataView(n);let i=0;return this.writeQueue_.forEach(o=>{switch(o[0]){case 1:r.setUint8(i,o[1]);break;case 4:r.setUint32(i,o[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,o[1],this.isLittleEndian_);break}i+=o[0]}),n}}class OFt extends sDe{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,n){return new dc({geometry:this.readGeometry(t,n)})}readFeatures(t,n){let r=[];const i=this.readGeometry(t,n);return this.splitCollection&&i instanceof dm?r=i.getGeometriesArray():r=[i],r.map(o=>new dc({geometry:o}))}readGeometry(t,n){const r=RSe(t);if(!r)return null;const o=new LSe(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(t,n),this.viewCache_=null,La(o,!1,n)}readProjection(t){const n=this.viewCache_||RSe(t);if(!n)return;const r=new LSe(n);return r.readWkbHeader(),r.getSrid()&&Qi("EPSG:"+r.getSrid())||void 0}writeFeature(t,n){return this.writeGeometry(t.getGeometry(),n)}writeFeatures(t,n){return this.writeGeometry(new dm(t.map(r=>r.getGeometry())),n)}writeGeometry(t,n){n=this.adaptOptions(n);const r=new MFt({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const s=n.dataProjection&&Qi(n.dataProjection);if(s){const a=s.getCode();a.startsWith("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(La(t,!0,n),i);const o=r.getBuffer();return this.hex_?IFt(o):o}}function IFt(e){const t=new Uint8Array(e);return Array.from(t.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function NFt(e){const t=new Uint8Array(e.length/2);for(let n=0;n<e.length/2;n++)t[n]=parseInt(e.substr(n*2,2),16);return new DataView(t.buffer)}function RSe(e){return typeof e=="string"?NFt(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}const Qs=[null,"http://www.opengis.net/wms"];function Ox(e){return hGe(e[0].version,"1.3")>=0}const PFt=En(Qs,{Service:ot(a$t),Capability:ot(s$t)}),vBe={Request:ot(m$t),Exception:ot(f$t),Layer:ot(d$t)},BFt=En(Qs,{...vBe,UserDefinedSymbolization:ot(i$t)}),zFt=En(Qs,vBe);class UFt extends qU{constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const n=nn({version:this.version},PFt,t,[]);return n||null}}const yBe={Name:ot(Jt),Title:ot(Jt),Abstract:ot(Jt),KeywordList:ot(ABe),OnlineResource:ot($x),ContactInformation:ot(l$t),Fees:ot(Jt),AccessConstraints:ot(Jt)},jFt=En(Qs,yBe),HFt=En(Qs,{...yBe,LayerLimit:ot(Ls),MaxWidth:ot(Ls),MaxHeight:ot(Ls)}),qFt=En(Qs,{ContactPersonPrimary:ot(u$t),ContactPosition:ot(Jt),ContactAddress:ot(c$t),ContactVoiceTelephone:ot(Jt),ContactFacsimileTelephone:ot(Jt),ContactElectronicMailAddress:ot(Jt)}),GFt=En(Qs,{ContactPerson:ot(Jt),ContactOrganization:ot(Jt)}),WFt=En(Qs,{AddressType:ot(Jt),Address:ot(Jt),City:ot(Jt),StateOrProvince:ot(Jt),PostCode:ot(Jt),Country:ot(Jt)}),VFt=En(Qs,{Format:nr(Jt)}),bBe={Name:ot(Jt),Title:ot(Jt),Abstract:ot(Jt),KeywordList:ot(ABe),BoundingBox:so(_Be),Dimension:so(h$t),Attribution:ot(r$t),AuthorityURL:so(b$t),Identifier:so(Jt),MetadataURL:so(x$t),DataURL:so(Mp),FeatureListURL:so(Mp),Style:so(w$t),Layer:so(c$)},xBe=En(Qs,{...bBe,SRS:so(Jt),Extent:ot(p$t),ScaleHint:so(g$t),LatLonBoundingBox:ot((e,t)=>_Be(e,t,!1)),Layer:so(c$)}),wBe=En(Qs,{...bBe,CRS:so(Jt),EX_GeographicBoundingBox:ot(o$t),MinScaleDenominator:ot(xl),MaxScaleDenominator:ot(xl),Layer:so(c$)}),YFt=En(Qs,{Title:ot(Jt),OnlineResource:ot($x),LogoURL:ot(EBe)}),XFt=En(Qs,{westBoundLongitude:ot(xl),eastBoundLongitude:ot(xl),southBoundLatitude:ot(xl),northBoundLatitude:ot(xl)}),KFt=En(Qs,{GetCapabilities:ot(X5),GetMap:ot(X5),GetFeatureInfo:ot(X5)}),ZFt=En(Qs,{Format:so(Jt),DCPType:so(v$t)}),QFt=En(Qs,{HTTP:ot(y$t)}),JFt=En(Qs,{Get:ot(Mp),Post:ot(Mp)}),e$t=En(Qs,{Name:ot(Jt),Title:ot(Jt),Abstract:ot(Jt),LegendURL:so(EBe),StyleSheetURL:ot(Mp),StyleURL:ot(Mp)}),t$t=En(Qs,{Format:ot(Jt),OnlineResource:ot($x)}),n$t=En(Qs,{Keyword:nr(Jt)});function r$t(e,t){return nn({},YFt,e,t)}function i$t(e,t){return{SupportSLD:!!Sf(e.getAttribute("UserDefinedSymbolization")),UserLayer:!!Sf(e.getAttribute("UserLayer")),UserStyle:!!Sf(e.getAttribute("UserStyle")),RemoteWFS:!!Sf(e.getAttribute("RemoteWFS"))}}function _Be(e,t,n=!0){const r=[kd(e.getAttribute("minx")),kd(e.getAttribute("miny")),kd(e.getAttribute("maxx")),kd(e.getAttribute("maxy"))],i=[kd(e.getAttribute("resx")),kd(e.getAttribute("resy"))],o={extent:r,res:i};return n&&(Ox(t)?o.crs=e.getAttribute("CRS"):o.srs=e.getAttribute("SRS")),o}function o$t(e,t){const n=nn({},XFt,e,t);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(!(r===void 0||i===void 0||o===void 0||s===void 0))return[r,i,o,s]}function s$t(e,t){return nn({},Ox(t)?zFt:BFt,e,t)}function a$t(e,t){return nn({},Ox(t)?HFt:jFt,e,t)}function l$t(e,t){return nn({},qFt,e,t)}function u$t(e,t){return nn({},GFt,e,t)}function c$t(e,t){return nn({},WFt,e,t)}function f$t(e,t){return nn([],VFt,e,t)}function d$t(e,t){const n=nn({},Ox(t)?wBe:xBe,e,t);return n.Layer===void 0?Object.assign(n,c$(e,t)):n}function c$(e,t){const n=Ox(t),r=t[t.length-1],i=nn({},n?wBe:xBe,e,t);if(!i)return;let o=Sf(e.getAttribute("queryable"));o===void 0&&(o=r.queryable),i.queryable=o!==void 0?o:!1;let s=jg(e.getAttribute("cascaded"));s===void 0&&(s=r.cascaded),i.cascaded=s;let a=Sf(e.getAttribute("opaque"));a===void 0&&(a=r.opaque),i.opaque=a!==void 0?a:!1;let l=Sf(e.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),i.noSubsets=l!==void 0?l:!1;let u=kd(e.getAttribute("fixedWidth"));u||(u=r.fixedWidth),i.fixedWidth=u;let f=kd(e.getAttribute("fixedHeight"));f||(f=r.fixedHeight),i.fixedHeight=f;const c=["Style","AuthorityURL"];n?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(p){if(p in r){const h=i[p]||[];i[p]=h.concat(r[p])}});const d=["BoundingBox","Attribution"];return n?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(p){if(!(p in i)){const h=r[p];i[p]=h}}),i}function h$t(e,t){const n={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol")};return Ox(t)&&Object.assign(n,{default:e.getAttribute("default"),multipleValues:Sf(e.getAttribute("multipleValues")),nearestValue:Sf(e.getAttribute("nearestValue")),current:Sf(e.getAttribute("current")),values:Jt(e)}),n}function p$t(e,t){return{name:e.getAttribute("name"),default:e.getAttribute("default"),nearestValue:Sf(e.getAttribute("nearestValue"))}}function g$t(e,t){return{min:kd(e.getAttribute("min")),max:kd(e.getAttribute("max"))}}function Mp(e,t){return nn({},t$t,e,t)}function m$t(e,t){return nn({},KFt,e,t)}function v$t(e,t){return nn({},QFt,e,t)}function y$t(e,t){return nn({},JFt,e,t)}function X5(e,t){return nn({},ZFt,e,t)}function EBe(e,t){const n=Mp(e,t);if(n){const r=[jg(e.getAttribute("width")),jg(e.getAttribute("height"))];return n.size=r,n}}function b$t(e,t){const n=Mp(e,t);if(n)return n.name=e.getAttribute("name"),n}function x$t(e,t){const n=Mp(e,t);if(n)return n.type=e.getAttribute("type"),n}function w$t(e,t){return nn({},e$t,e,t)}function ABe(e,t){return nn([],n$t,e,t)}const _$t="_feature",E$t="_layer";class A$t extends OL{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new si,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,n){t.setAttribute("namespaceURI",this.featureNS_);const r=t.localName;let i=[];if(t.childNodes.length===0)return i;if(r=="msGMLOutput")for(let o=0,s=t.childNodes.length;o<s;o++){const a=t.childNodes[o];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=n[0],f=E$t,c=l.localName.replace(f,"");if(this.layers_&&!this.layers_.includes(c))continue;const d=c+_$t;u.featureType=d,u.featureNS=this.featureNS_;const p={};p[d]=nr(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const h=En([u.featureNS,null],p);l.setAttribute("namespaceURI",this.featureNS_);const g=nn([],h,l,n,this.gmlFormat_);g&&R3(i,g)}if(r=="FeatureCollection"){const o=nn([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);o&&(i=o)}return i}readFeaturesFromNode(t,n){const r={};return n&&Object.assign(r,this.getReadOptions(t,n)),this.readFeatures_(t,[r])}}const _h=[null,"http://www.opengis.net/wmts/1.0"],Ix=[null,"http://www.opengis.net/ows/1.1"],C$t=En(_h,{Contents:ot(O$t)});let KU=class extends qU{constructor(){super(),this.owsParser_=new dBe}readFromNode(t){let n=t.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(t);return r?(r.version=n,r=nn(r,C$t,t,[]),r||null):null}};const S$t=En(_h,{Layer:so(I$t),TileMatrixSet:so(N$t)}),k$t=En(_h,{Style:so(P$t),Format:so(Jt),TileMatrixSetLink:so(B$t),Dimension:so(z$t),ResourceURL:so(U$t)},En(Ix,{Title:ot(Jt),Abstract:ot(Jt),WGS84BoundingBox:ot(SBe),BoundingBox:so(j$t),Identifier:ot(Jt)})),T$t=En(_h,{LegendURL:so(H$t)},En(Ix,{Title:ot(Jt),Identifier:ot(Jt)})),D$t=En(_h,{TileMatrixSet:ot(Jt),TileMatrixSetLimits:ot(G$t)}),L$t=En(_h,{TileMatrixLimits:nr(W$t)}),R$t=En(_h,{TileMatrix:ot(Jt),MinTileRow:ot(Ls),MaxTileRow:ot(Ls),MinTileCol:ot(Ls),MaxTileCol:ot(Ls)}),F$t=En(_h,{Default:ot(Jt),Value:so(Jt)},En(Ix,{Identifier:ot(Jt)})),CBe=En(Ix,{LowerCorner:nr(rN),UpperCorner:nr(rN)}),$$t=En(_h,{WellKnownScaleSet:ot(Jt),TileMatrix:so(q$t)},En(Ix,{SupportedCRS:ot(Jt),Identifier:ot(Jt),BoundingBox:ot(SBe)})),M$t=En(_h,{TopLeftCorner:ot(rN),ScaleDenominator:ot(xl),TileWidth:ot(Ls),TileHeight:ot(Ls),MatrixWidth:ot(Ls),MatrixHeight:ot(Ls)},En(Ix,{Identifier:ot(Jt)}));function O$t(e,t){return nn({},S$t,e,t)}function I$t(e,t){return nn({},k$t,e,t)}function N$t(e,t){return nn({},$$t,e,t)}function P$t(e,t){const n=nn({},T$t,e,t);if(!n)return;const r=e.getAttribute("isDefault")==="true";return n.isDefault=r,n}function B$t(e,t){return nn({},D$t,e,t)}function z$t(e,t){return nn({},F$t,e,t)}function U$t(e,t){const n=e.getAttribute("format"),r=e.getAttribute("template"),i=e.getAttribute("resourceType"),o={};return n&&(o.format=n),r&&(o.template=r),i&&(o.resourceType=i),o}function SBe(e,t){const n=nn([],CBe,e,t);if(n.length==2)return HN(n)}function j$t(e,t){const n=e.getAttribute("crs"),r=nn([],CBe,e,t);if(r.length==2)return{extent:HN(r),crs:n}}function H$t(e,t){const n={};return n.format=e.getAttribute("format"),n.href=$x(e),n}function rN(e,t){const n=Jt(e).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function q$t(e,t){return nn({},M$t,e,t)}function G$t(e,t){return nn([],L$t,e,t)}function W$t(e,t){return nn({},R$t,e,t)}window.eoxMapAdvancedOlFormats={EsriJSON:yLt,GML:BU,GPX:GLt,IGC:kRt,IIIFInfo:$Rt,KML:gGe,OWS:dBe,Polyline:uFt,TopoJSON:pGe,WFS:TFt,WKB:OFt,WKT:X8e,WMSCapabilities:UFt,WMSGetFeatureInfo:A$t,WMTSCapabilities:KU};function kBe(e,t,n){const r=[];let i=e(0),o=e(1),s=t(i),a=t(o);const l=[o,i],u=[a,s],f=[1,0],c={};let d=1e5,p,h,g,m,y,v;for(;--d>0&&f.length>0;)g=f.pop(),i=l.pop(),s=u.pop(),v=g.toString(),v in c||(r.push(s[0],s[1]),c[v]=!0),m=f.pop(),o=l.pop(),a=u.pop(),y=(g+m)/2,p=e(y),h=t(p),mGe(h[0],h[1],s[0],s[1],a[0],a[1])<n?(r.push(a[0],a[1]),v=m.toString(),c[v]=!0):(f.push(m,y,y,g),u.push(a,h,h,s),l.push(o,p,p,i));return r}function V$t(e,t,n,r,i){const o=Qi("EPSG:4326");return kBe(function(s){return[e,t+(n-t)*s]},O3(o,r),i)}function Y$t(e,t,n,r,i){const o=Qi("EPSG:4326");return kBe(function(s){return[t+(n-t)*s,e]},O3(o,r),i)}function X$t(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const t=e.inversePixelTransform[0],n=e.inversePixelTransform[1],r=Math.sqrt(t*t+n*n),i=e.frameState,o=Z_(e.inversePixelTransform.slice(),i.coordinateToPixelTransform),s=vGe(i.viewState.resolution,r);let a;return new yGe(e.context,r,i.extent,o,i.viewState.rotation,s,a)}const K$t=new I3({color:"rgba(0,0,0,0.2)"}),Z$t=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class Q$t extends cDe{constructor(t){t=t||{};const n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,super(n),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:K$t,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?Axe.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?Axe.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new Fk({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Cxe({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new N3({color:"rgba(0,0,0,1)"}),stroke:new I3({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const i=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new Fk({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Cxe({font:"12px Calibri,sans-serif",textAlign:"right",fill:new N3({color:"rgba(0,0,0,1)"}),stroke:new I3({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const i=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(X0.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:Z$t,this.setSource(new NL({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new bGe,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new Fk({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,n){let r=t.slice();return this.projection_&&this.getSource().getWrapX()&&xGe(r,this.projection_),this.loadedExtent_&&(wGe(this.loadedExtent_,r,n)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(t,n,r){this.loadedExtent_=t;const i=this.getSource(),o=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=Od(o,t);if(this.renderedExtent_&&Q_(this.renderedExtent_,s)&&this.renderedResolution_===n||(this.renderedExtent_=s,this.renderedResolution_=n,PL(s)))return;const a=nm(s),l=n*n/4;(!this.projection_||!$k(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(s,a,n,l);let f=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(f+=this.meridians_.length),this.parallelsLabels_&&(f+=this.parallels_.length);let c;for(;f>this.featurePool_.length;)c=new dc,this.featurePool_.push(c);const d=i.getFeaturesCollection();d.clear();let p=0,h,g;for(h=0,g=this.meridians_.length;h<g;++h)c=this.featurePool_[p++],c.setGeometry(this.meridians_[h]),c.setStyle(this.lineStyle_),d.push(c);for(h=0,g=this.parallels_.length;h<g;++h)c=this.featurePool_[p++],c.setGeometry(this.parallels_[h]),c.setStyle(this.lineStyle_),d.push(c)}addMeridian_(t,n,r,i,o,s){const a=this.getMeridian_(t,n,r,i,s);if(u1(a.getExtent(),o)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=l:this.meridiansLabels_[s]={geom:new Cf([]),text:l}}this.meridians_[s++]=a}return s}addParallel_(t,n,r,i,o,s){const a=this.getParallel_(t,n,r,i,s);if(u1(a.getExtent(),o)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=l:this.parallelsLabels_[s]={geom:new Cf([]),text:l}}this.parallels_[s++]=a}return s}drawLabels_(t){const n=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,i=t.frameState.size,o=t.frameState.extent,s=nm(o);let a=o;if(n){const h=i[0]*r,g=i[1]*r;a=[s[0]-h/2,s[1]-g/2,s[0]+h/2,s[1]+g/2]}let l=0,u=0,f=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),d=Za(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!D3(c,o)){l=Math.floor((o[0]-c[0])/d),u=Math.ceil((o[2]-c[2])/d);const h=Math.abs(n)>Math.PI/2;f=f!==h}const p=X$t(t);for(let h=l;h<=u;++h){let g=this.meridians_.length+this.parallels_.length,m,y,v,x;if(this.meridiansLabels_)for(y=0,v=this.meridiansLabels_.length;y<v;++y){const _=this.meridians_[y];if(!n&&h===0)x=this.getMeridianPoint_(_,o,y);else{const E=_.clone();E.translate(h*d,0),E.rotate(-n,s),x=this.getMeridianPoint_(E,a,y),x.rotate(n,s)}m=this.featurePool_[g++],m.setGeometry(x),m.set("graticule_label",this.meridiansLabels_[y].text),p.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(h===l&&f||h===u&&!f))for(y=0,v=this.parallels_.length;y<v;++y){const _=this.parallels_[y];if(!n&&h===0)x=this.getParallelPoint_(_,o,y);else{const E=_.clone();E.translate(h*d,0),E.rotate(-n,s),x=this.getParallelPoint_(E,a,y),x.rotate(n,s)}m=this.featurePool_[g++],m.setGeometry(x),m.set("graticule_label",this.parallelsLabels_[y].text),p.drawFeature(m,this.latLabelStyle_(m))}}}createGraticule_(t,n,r,i){const o=this.getInterval_(r);if(o==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let s=!1;const a=this.projection_.getExtent(),l=Za(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!D3(a,t)&&(Za(t)>=l?(t[0]=a[0],t[2]=a[2]):s=!0);const u=[us(n[0],this.minX_,this.maxX_),us(n[1],this.minY_,this.maxY_)],f=this.toLonLatTransform_(u);isNaN(f[1])&&(f[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=us(f[0],this.minLon_,this.maxLon_),d=us(f[1],this.minLat_,this.maxLat_);const p=this.maxLines_;let h,g,m,y,v=t;s||(v=[us(t[0],this.minX_,this.maxX_),us(t[1],this.minY_,this.maxY_),us(t[2],this.minX_,this.maxX_),us(t[3],this.minY_,this.maxY_)]);const x=c1(v,this.toLonLatTransform_,void 0,8);let _=x[3],E=x[2],C=x[1],w=x[0];if(s||(kb(v,this.bottomLeft_)&&(w=this.minLon_,C=this.minLat_),kb(v,this.bottomRight_)&&(E=this.maxLon_,C=this.minLat_),kb(v,this.topLeft_)&&(w=this.minLon_,_=this.maxLat_),kb(v,this.topRight_)&&(E=this.maxLon_,_=this.maxLat_),_=us(_,d,this.maxLat_),E=us(E,c,this.maxLon_),C=us(C,this.minLat_,d),w=us(w,this.minLon_,c)),c=Math.floor(c/o)*o,y=us(c,this.minLon_,this.maxLon_),g=this.addMeridian_(y,C,_,i,t,0),h=0,s)for(;(y-=o)>=w&&h++<p;)g=this.addMeridian_(y,C,_,i,t,g);else for(;y!=this.minLon_&&h++<p;)y=Math.max(y-o,this.minLon_),g=this.addMeridian_(y,C,_,i,t,g);if(y=us(c,this.minLon_,this.maxLon_),h=0,s)for(;(y+=o)<=E&&h++<p;)g=this.addMeridian_(y,C,_,i,t,g);else for(;y!=this.maxLon_&&h++<p;)y=Math.min(y+o,this.maxLon_),g=this.addMeridian_(y,C,_,i,t,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/o)*o,m=us(d,this.minLat_,this.maxLat_),g=this.addParallel_(m,w,E,i,t,0),h=0;m!=this.minLat_&&h++<p;)m=Math.max(m-o,this.minLat_),g=this.addParallel_(m,w,E,i,t,g);for(m=us(d,this.minLat_,this.maxLat_),h=0;m!=this.maxLat_&&h++<p;)m=Math.min(m+o,this.maxLat_),g=this.addParallel_(m,w,E,i,t,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(t){const n=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let i=-1;const o=Math.pow(this.targetSize_*t,2),s=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const f=us(this.intervals_[l]/2,0,90),c=us(r,-90+f,90-f);if(s[0]=n-f,s[1]=c-f,a[0]=n+f,a[1]=c+f,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(a,a),Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)<=o)break;i=this.intervals_[l]}return i}getMeridian_(t,n,r,i,o){const s=V$t(t,n,r,this.projection_,i);let a=this.meridians_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):(a=new Yd(s,"XY"),this.meridians_[o]=a),a}getMeridianPoint_(t,n,r){const i=t.getFlatCoordinates();let o=1,s=i.length-1;i[o]>i[s]&&(o=s,s=1);const a=Math.max(n[1],i[o]),l=Math.min(n[3],i[s]),u=us(n[1]+Math.abs(n[1]-n[3])*this.lonLabelPosition_,a,l),c=[i[o-1]+(i[s-1]-i[o-1])*(u-i[o])/(i[s]-i[o]),u],d=this.meridiansLabels_[r].geom;return d.setCoordinates(c),d}getMeridians(){return this.meridians_}getParallel_(t,n,r,i,o){const s=Y$t(t,n,r,this.projection_,i);let a=this.parallels_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):a=new Yd(s,"XY"),a}getParallelPoint_(t,n,r){const i=t.getFlatCoordinates();let o=0,s=i.length-2;i[o]>i[s]&&(o=s,s=0);const a=Math.max(n[0],i[o]),l=Math.min(n[2],i[s]),u=us(n[0]+Math.abs(n[0]-n[2])*this.latLabelPosition_,a,l),f=i[o+1]+(i[s+1]-i[o+1])*(u-i[o])/(i[s]-i[o]),c=[u,f],d=this.parallelsLabels_[r].geom;return d.setCoordinates(c),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){const n=Qi("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const i=O3(t,n);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const s=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const f=i(a,l,u);for(let c=0,d=f.length;c<d;c+=u)f[c]<s&&(f[c]+=360);return f}}this.fromLonLatTransform_=O3(n,t);const o=c1([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(nm(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}function wy(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $D(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}function iN(e,t,n,r,i,o,s){s=s??wy();const a=1/(e-t),l=1/(n-r),u=1/(i-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(e+t)*a,s[13]=(r+n)*l,s[14]=(o+i)*u,s[15]=1,s}function FSe(e,t,n,r,i){return i=i??wy(),i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i[3]=e[3]*t,i[4]=e[4]*n,i[5]=e[5]*n,i[6]=e[6]*n,i[7]=e[7]*n,i[8]=e[8]*r,i[9]=e[9]*r,i[10]=e[10]*r,i[11]=e[11]*r,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function J$t(e,t,n,r,i){i=i??wy();let o,s,a,l,u,f,c,d,p,h,g,m;return e===i?(i[12]=e[0]*t+e[4]*n+e[8]*r+e[12],i[13]=e[1]*t+e[5]*n+e[9]*r+e[13],i[14]=e[2]*t+e[6]*n+e[10]*r+e[14],i[15]=e[3]*t+e[7]*n+e[11]*r+e[15]):(o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],f=e[5],c=e[6],d=e[7],p=e[8],h=e[9],g=e[10],m=e[11],i[0]=o,i[1]=s,i[2]=a,i[3]=l,i[4]=u,i[5]=f,i[6]=c,i[7]=d,i[8]=p,i[9]=h,i[10]=g,i[11]=m,i[12]=o*t+u*n+p*r+e[12],i[13]=s*t+f*n+h*r+e[13],i[14]=a*t+c*n+g*r+e[14],i[15]=l*t+d*n+m*r+e[15]),i}function eMt(e,t,n,r){return r=r??wy(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e,r[13]=t,r[14]=n,r[15]=1,r}const vC=34962,yC=34963,ZU=35044,MD=35048,tMt=5121,nMt=5123,rMt=5125,TBe=5126,$Se=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function iMt(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!_Ge},t);const n=$Se.length;for(let r=0;r<n;++r)try{const i=e.getContext($Se[r],t);if(i)return i}catch{}return null}const oMt={STATIC_DRAW:ZU};class Y1{constructor(t,n){this.array_=null,this.type_=t,Wc(t===vC||t===yC,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:oMt.STATIC_DRAW}ofSize(t){return this.array_=new(ck(this.type_))(t),this}fromArray(t){return this.array_=ck(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(ck(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const n=ck(this.type_);if(!(t instanceof n))throw new Error(`Expected ${n}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function ck(e){switch(e){case vC:return Float32Array;case yC:return Uint32Array;default:return Float32Array}}const fk={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},sMt=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,aMt=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class MSe{constructor(t){this.gl_=t.webGlContext;const n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||sMt),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,t.fragmentShader||aMt),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(s=>{this.uniforms_.push({value:t.uniforms[s],location:n.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,o=n.RGBA,s=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,o,r[0],r[1],s,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(t,n,r,i){const o=this.getGL(),s=t.size;if(o.bindFramebuffer(o.FRAMEBUFFER,n?n.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!n){const l=oo(o.canvas);if(!t.renderTargets[l]){const u=o.getContextAttributes();u&&u.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),o.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),r&&r(o,t),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,o.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(o.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(o.location,r[0],r[1]);return;case 3:n.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(o.location,r)})}}const Ad={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Os={UNSIGNED_BYTE:tMt,UNSIGNED_SHORT:nMt,UNSIGNED_INT:rMt,FLOAT:TBe},OD={};function OSe(e){return"shared/"+e}let ISe=0;function lMt(){const e="unique/"+ISe;return ISe+=1,e}function uMt(e){let t=OD[e];if(!t){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",t={users:0,context:iMt(n)},OD[e]=t}return t.users+=1,t.context}function cMt(e){const t=OD[e];if(!t||(t.users-=1,t.users>0))return;const n=t.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete OD[e]}class fMt extends fDe{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?OSe(t.canvasCacheKey):lMt(),this.gl_=uMt(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(fk.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(fk.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Wa(),this.offsetScaleMatrix_=Wa(),this.tmpMat4_=wy(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new MSe({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new MSe({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const n in t)this.uniforms_.push({name:n,value:t[n]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===OSe(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n}bindBuffer(t){const n=this.gl_,r=oo(t);let i=this.bufferCache_[r];if(!i){const o=n.createBuffer();i={buffer:t,webGlBuffer:o},this.bufferCache_[r]=i}n.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const n=this.gl_;this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const n=oo(t);delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(fk.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(fk.RESTORED,this.boundHandleWebGLContextRestored_),cMt(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,n,r){const i=this.gl_,o=this.getCanvas(),s=t.size,a=t.pixelRatio;(o.width!==s[0]*a||o.height!==s[1]*a)&&(o.width=s[0]*a,o.height=s[1]*a,o.style.width=s[0]+"px",o.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(t,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const t=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(t,n,r){const i=this.getGL();this.bindBuffer(t);const o=this.getAttributeLocation(n);i.enableVertexAttribArray(o),i.vertexAttribPointer(o,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,n,r,i){const o=this.gl_,s=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,n.getDepthbuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),i?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(t,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,o=4,s=n-t,a=t*o;r.drawElements(r.TRIANGLES,s,i,a)}finalizeDraw(t,n,r){for(let i=0,o=this.postProcessPasses_.length;i<o;i++)i===o-1?this.postProcessPasses_[i].apply(t,null,n,r):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const n=t.size,r=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(Ad.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ad.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Ad.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Ad.PIXEL_RATIO,i),this.setUniformFloatVec2(Ad.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(Ad.ROTATION,r)}applyHitDetectionUniform(t){const n=this.getUniformLocation(Ad.HIT_DETECTION);this.getGL().uniform1i(n,t?1:0),t&&this.setUniformFloatValue(Ad.PIXEL_RATIO,.5)}applyUniforms(t){const n=this.gl_;let r,i=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=n.createTexture()),this.bindTexture(o.texture,i,o.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&o.prevValue!==r&&(o.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,$D(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(t,n){this.gl_.useProgram(t),this.currentProgram_=t,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(t,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),i}getProgram(t,n){const r=this.gl_,i=this.compileShader(t,r.FRAGMENT_SHADER),o=this.compileShader(n,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,i),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(o,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(a)}return s}getUniformLocation(t){const n=oo(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][t]===void 0&&(this.uniformLocationsByProgram_[n][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[n][t]}getAttributeLocation(t){const n=oo(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][t]===void 0&&(this.attribLocationsByProgram_[n][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[n][t]}makeProjectionTransform(t,n){const r=t.size,i=t.viewState.rotation,o=t.viewState.resolution,s=t.viewState.center;return qN(n,0,0,2/(o*r[0]),2/(o*r[1]),-i,-s[0],-s[1]),n}setUniformFloatValue(t,n){this.gl_.uniform1f(this.getUniformLocation(t),n)}setUniformFloatVec2(t,n){this.gl_.uniform2fv(this.getUniformLocation(t),n)}setUniformFloatVec4(t,n){this.gl_.uniform4fv(this.getUniformLocation(t),n)}setUniformMatrixValue(t,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,n)}enableAttributeArray_(t,n,r,i,o){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,n,r,!1,i,o))}enableAttributes(t){const n=dMt(t);let r=0;for(let i=0;i<t.length;i++){const o=t[i];this.enableAttributeArray_(o.name,o.size,o.type||TBe,n,r),r+=o.size*DBe(o.type)}}handleWebGLContextLost(t){EGe(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,n,r,i){const o=this.gl_;r=r||o.createTexture();const s=i?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);const a=0,l=o.RGBA,u=0,f=o.RGBA,c=o.UNSIGNED_BYTE;return n instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],u,f,c,n):n?o.texImage2D(o.TEXTURE_2D,a,l,f,c,n):o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],u,f,c,null),r}}function dMt(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];t+=r.size*DBe(r.type)}return t}function DBe(e){switch(e){case Os.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Os.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Os.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Os.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class hMt extends AGe{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Zl.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===oi.LOADED,this.loaded)this.uploadTile();else{if(t instanceof GN){const n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(Zl.CHANGE,this.handleTileChange_)}}uploadTile(){Xh()}setReady(){this.ready=!0,this.dispatchEvent(Zl.CHANGE)}handleTileChange_(){this.tile.getState()===oi.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Zl.CHANGE,this.handleTileChange_)}}function LBe(e,t,n){const r=n?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r)}function pMt(e,t,n,r){LBe(e,t,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}function NSe(e,t,n,r,i,o){const s=e.getGL();let a,l;n instanceof Float32Array?(a=s.FLOAT,e.getExtension("OES_texture_float"),l=e.getExtension("OES_texture_float_linear")!==null):(a=s.UNSIGNED_BYTE,l=!0),LBe(s,t,o&&l);const u=n.byteLength/r[1];let f=1;u%8===0?f=8:u%4===0?f=4:u%2===0&&(f=2);let c;switch(i){case 1:{c=s.LUMINANCE;break}case 2:{c=s.LUMINANCE_ALPHA;break}case 3:{c=s.RGB;break}case 4:{c=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const d=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.texImage2D(s.TEXTURE_2D,0,c,r[0],r[1],0,c,a,n),s.pixelStorei(s.UNPACK_ALIGNMENT,d)}let _b=null;function gMt(){_b=hm(1,1,void 0,{willReadFrequently:!0})}class mMt extends hMt{constructor(t){super(t),this.textures=[],this.renderSize_=Ff(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const n=new Y1(vC,ZU);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(t.tile)}setHelper(t){var r;const n=(r=this.helper)==null?void 0:r.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)n.deleteTexture(this.textures[i])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,n=t.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof GN||r instanceof CGe?i=r.getImage():i=r.getData();const o=oI(i);if(o){const v=n.createTexture();this.textures.push(v),this.bandCount=4,pMt(n,v,o,r.interpolate),this.setReady();return}i=iI(i);const s=r.getSize(),a=[s[0]+2*this.gutter,s[1]+2*this.gutter],l=i instanceof Float32Array,u=a[0]*a[1],f=l?Float32Array:Uint8Array,c=f.BYTES_PER_ELEMENT,d=i.byteLength/a[1];this.bandCount=Math.floor(d/c/a[0]);const p=Math.ceil(this.bandCount/4);if(p===1){const v=n.createTexture();this.textures.push(v),NSe(t,v,i,a,this.bandCount,r.interpolate),this.setReady();return}const h=new Array(p);for(let v=0;v<p;++v){const x=n.createTexture();this.textures.push(x);const _=v<p-1?4:(this.bandCount-1)%4+1;h[v]=new f(u*_)}let g=0,m=0;const y=a[0]*this.bandCount;for(let v=0;v<a[1];++v){for(let x=0;x<y;++x){const _=i[m+x],E=Math.floor(g/this.bandCount),C=x%this.bandCount,w=Math.floor(C/4),T=h[w],R=T.length/u,L=C%4;T[E*R+L]=_,++g}m+=d/c}for(let v=0;v<p;++v){const x=this.textures[v],_=h[v],E=_.length/u;NSe(t,x,_,a,E,r.interpolate)}this.setReady()}getImagePixelData_(t,n,r){const i=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1];_b||gMt(),_b.clearRect(0,0,1,1);const a=t.width,l=t.height,u=a-2*i,f=l-2*i,c=i+Math.floor(u*(n/o)),d=i+Math.floor(f*(r/s));let p;try{_b.drawImage(t,c,d,1,1,0,0,1,1),p=_b.getImageData(0,0,1,1).data}catch{return _b=null,null}return p}getArrayPixelData_(t,n,r,i){const o=this.gutter,s=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],f=l+2*o,c=u+2*o,d=o+Math.floor(l*(r/s)),p=o+Math.floor(u*(i/a));if(t instanceof DataView){const g=t.byteLength/(f*c),m=g*(p*f+d),y=t.buffer.slice(m,m+g);return new DataView(y)}const h=this.bandCount*(p*f+d);return t.slice(h,h+this.bandCount)}getPixelData(t,n){if(!this.loaded)return null;if(this.tile instanceof WN){const r=this.tile.getData(),i=iI(r);if(i){const o=this.tile.getSize();return this.getArrayPixelData_(i,o,t,n)}return this.getImagePixelData_(oI(r),t,n)}return this.getImagePixelData_(this.tile.getImage(),t,n)}}class bC extends SGe{constructor(t,n){super(t),n=n||{},this.inversePixelTransform_=Wa(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(sI.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(X0.PRECOMPOSE)){const i=new I$(X0.PRECOMPOSE,void 0,n,t);r.dispatchEvent(i)}}dispatchPostComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(X0.POSTCOMPOSE)){const i=new I$(X0.POSTCOMPOSE,void 0,n,t);r.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let s=0,a=t.layerStatesArray.length;s<a;s++){const l=t.layerStatesArray[s].layer,u=l.getRenderer();if(!(u instanceof bC)){n=!0;continue}const f=l.getClassName();if((n||f!==i)&&(r+=1,n=!1),i=f,u===this)break}const o="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new fMt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(sI.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,n,r){const i=this.getLayer();if(i.hasListener(t)){qN(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const o=new I$(t,this.inversePixelTransform_,r,n);i.dispatchEvent(o)}}preRender(t,n){this.dispatchRenderEvent_(X0.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(X0.POSTRENDER,t,n)}}const vMt={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function PSe(e){return 1/(e+2)}function yMt(){return{tileIds:new Set,representationsByZ:{}}}function BSe(e,t){return e.tileIds.has(oo(t))}function zSe(e,t,n){const r=e.representationsByZ;n in r||(r[n]=new Set),r[n].add(t),e.tileIds.add(oo(t.tile))}function K5(e,t){const n=e.layerStatesArray[e.layerIndex];n.extent&&(t=Od(t,hDe(n.extent,e.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=Od(t,i))}return t}function oN(e,t){return`${e.getKey()},${e.getRevision()},${mb(t)}`}class bMt extends bC{constructor(t,n){super(t,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Wa(),this.tempMat4=wy(),this.tempTileRange_=new kGe(0,0,0,0),this.tempTileCoord_=aI(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new dDe(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const r=this.getLayer().getRenderSource();return!r||PL(K5(t,t.extent))?!1:r.getState()==="ready"}createTileRepresentation(t){return Xh()}enqueueTiles(t,n,r,i,o){const s=t.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(s.projection),f=l.getGutterForProjection(s.projection),c=oo(l);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],p=this.tileRepresentationCache,h=a.getMapInternal(),g=Math.max(r-o,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),h?h.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),m=s.rotation,y=m?TGe(s.center,s.resolution,m,t.size):void 0;for(let v=r;v>=g;--v){const x=u.getTileRangeForExtentAndZ(n,v,this.tempTileRange_),_=u.getResolution(v);for(let E=x.minX;E<=x.maxX;++E)for(let C=x.minY;C<=x.maxY;++C){if(m&&!u.tileCoordIntersectsViewport([v,E,C],y))continue;const w=aI(v,E,C,this.tempTileCoord_),T=oN(l,w);let R,L;if(p.containsKey(T)&&(R=p.get(T),L=R.tile),(!R||R.tile.key!==l.getKey())&&(L=l.getTile(v,E,C,t.pixelRatio,s.projection),!L)||BSe(i,L))continue;R?R.setTile(L):(R=this.createTileRepresentation({tile:L,grid:u,helper:this.helper,gutter:f}),p.set(T,R)),zSe(i,R,v);const B=L.getKey();d[B]=!0,L.getState()===oi.IDLE&&(t.tileQueue.isKeyQueued(B)||t.tileQueue.enqueue([L,c,u.getTileCoordCenter(w),_]))}}}beforeTilesRender(t,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,n,r,i,o,s,a,l,u,f,c){}renderTileMask(t,n,r,i){}drawTile_(t,n,r,i,o,s,a){if(!n.ready)return;const u=n.tile.tileCoord,f=mb(u),c=f in s?s[f]:1,d=a.getResolution(r),p=Ff(a.getTileSize(r),this.tempSize_),h=a.getOrigin(r),g=a.getTileCoordExtent(u),m=c<1?-1:PSe(r);c<1&&(t.animate=!0);const y=t.viewState,v=y.center[0],x=y.center[1],_=p[0]+2*i,E=p[1]+2*i,C=_/E,w=(v-h[0])/(p[0]*d),T=(h[1]-x)/(p[1]*d),R=y.resolution/d,L=u[1],B=u[2];DGe(this.tileTransform_),Sxe(this.tileTransform_,2/(t.size[0]*R/_),-2/(t.size[1]*R/_)),LGe(this.tileTransform_,y.rotation),Sxe(this.tileTransform_,1,1/C),VN(this.tileTransform_,(p[0]*(L-w)-i)/_,(p[1]*(B-T)-i)/E),this.renderTile(n,this.tileTransform_,t,o,d,p,h,g,m,i,c)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,t);const r=t.viewState,i=this.getLayer(),o=i.getRenderSource(),s=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),l=K5(t,t.extent),u=s.getZForResolution(r.resolution,o.zDirection),f=yMt(),c=i.getPreload();if(t.nextExtent){const x=s.getZForResolution(r.nextResolution,o.zDirection),_=K5(t,t.nextExtent);this.enqueueTiles(t,_,x,f,c)}this.enqueueTiles(t,l,u,f,0),c>0&&setTimeout(()=>{this.enqueueTiles(t,l,u-1,f,c-1)},0);const d={};let p=!1;const h=f.representationsByZ;if(u in h){const x=oo(this),_=t.time;for(const E of h[u]){const C=E.tile;if(C.getState()===oi.EMPTY)continue;const w=C.tileCoord;if(E.ready){const L=C.getAlpha(x,_);if(L===1){C.endTransition(x);continue}p=!0;const B=mb(w);d[B]=L}if(this.renderComplete=!1,this.findAltTiles_(s,w,u+1,f))continue;const R=s.getMinZoom();for(let L=u-1;L>=R&&!this.findAltTiles_(s,w,L,f);--L);}}const g=Object.keys(h).map(Number).sort(RGe);if(this.beforeTilesMaskRender(t))for(let x=0,_=g.length;x<_;++x){const E=g[x];for(const C of h[E]){const w=C.tile.tileCoord;if(mb(w)in d)continue;const R=s.getTileCoordExtent(w);this.renderTileMask(C,E,R,PSe(E))}}this.beforeTilesRender(t,p);for(let x=0,_=g.length;x<_;++x){const E=g[x];for(const C of h[E]){const w=C.tile.tileCoord;mb(w)in d||this.drawTile_(t,C,E,a,l,d,s)}}if(u in h)for(const x of h[u]){const _=x.tile.tileCoord;mb(_)in d&&this.drawTile_(t,x,u,a,l,d,s)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const y=this.helper.getCanvas(),v=this.tileRepresentationCache;for(;v.canExpireCache();)v.pop().dispose();return this.postRender(n,t),y}beforeFinalize(t){}findAltTiles_(t,n,r,i){const o=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=o.minX;u<=o.maxX;++u)for(let f=o.minY;f<=o.maxY;++f){const c=oN(l,[r,u,f]);let d=!1;if(a.containsKey(c)){const p=a.get(c);p.ready&&!BSe(i,p.tile)&&(zSe(i,p,r),d=!0)}d||(s=!1)}return s}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(n=>n.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const qr={...vMt,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},g3={TEXTURE_COORD:"a_textureCoord"},xMt=[{name:g3.TEXTURE_COORD,size:2,type:Os.FLOAT}];class wMt extends bMt{constructor(t,n){super(t,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new Y1(yC,ZU),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}super.removeHelper()}createTileRepresentation(t){return new mMt(t)}beforeTilesRender(t,n){super.beforeTilesRender(t,n),this.helper.useProgram(this.program_,t)}renderTile(t,n,r,i,o,s,a,l,u,f,c){const d=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(xMt);let p=0;for(;p<t.textures.length;){const C=`${qr.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(t.textures[p],p,C),++p}for(let C=0;C<this.paletteTextures_.length;++C){const w=this.paletteTextures_[C],T=w.getTexture(d);this.helper.bindTexture(T,p,w.name),++p}const h=r.viewState,g=s[0]+2*f,m=s[1]+2*f,v=t.tile.tileCoord,x=v[1],_=v[2];this.helper.setUniformMatrixValue(qr.TILE_TRANSFORM,$D(this.tempMat4,n)),this.helper.setUniformFloatValue(qr.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(qr.DEPTH,u);let E=i;f>0&&(E=l,Od(E,i,E)),this.helper.setUniformFloatVec4(qr.RENDER_EXTENT,E),this.helper.setUniformFloatValue(qr.RESOLUTION,h.resolution),this.helper.setUniformFloatValue(qr.ZOOM,h.zoom),this.helper.setUniformFloatValue(qr.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(qr.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(qr.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(qr.TEXTURE_ORIGIN_X,a[0]+x*s[0]*o-f*o),this.helper.setUniformFloatValue(qr.TEXTURE_ORIGIN_Y,a[1]-_*s[1]*o+f*o),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),o=Ap(r.pixelToCoordinateTransform,t.slice()),s=r.viewState,a=i.getExtent();if(a&&!kb(hDe(a,s.projection),o))return null;const l=i.getSources(HN([o]),s.resolution);let u,f,c;for(u=l.length-1;u>=0;--u)if(f=l[u],f.getState()==="ready"){if(c=f.getTileGridForProjection(s.projection),f.getWrapX())break;const p=c.getExtent();if(!p||kb(p,o))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let p=c.getZForResolution(s.resolution);p>=c.getMinZoom();--p){const h=c.getTileCoordForCoordAndZ(o,p),g=oN(f,h);if(!d.containsKey(g))continue;const m=d.get(g);if(m.tile.getState()===oi.EMPTY)return null;if(!m.loaded)continue;const v=c.getOrigin(p),x=Ff(c.getTileSize(p)),_=c.getResolution(p),E=(o[0]-v[0])/_-h[1]*x[0],C=(v[1]-o[1])/_-h[2]*x[1];return m.getPixelData(E,C)}return null}disposeInternal(){const t=this.helper;if(t){const n=t.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class _Mt{constructor(t,n){this.name=t,this.data=n,this.texture_=null}getTexture(t){if(!this.texture_){const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}function EMt(e,t){return`operator_${e}_${Object.keys(t.functions).length}`}function um(e){const t=e.toString();return t.includes(".")?t:t+".0"}function QU(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${e.length}(${e.map(um).join(", ")})`}function m3(e){const t=cA(e),n=t.length>3?t[3]:1;return QU([t[0]/255,t[1]/255,t[2]/255,n])}function AMt(e){const t=Ff(e);return QU(t)}const Z5={};let CMt=0;function X1(e){return e in Z5||(Z5[e]=CMt++),Z5[e]}function ep(e){return um(X1(e))}function f$(e){return"u_var_"+e}function JU(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const Q5="getBandValue",RBe="u_paletteTextures",FBe="featureId",$Be="geometryType",sN=-9999999;function SMt(e,t,n,r){const i=FGe(e,t,n);return ej(i,t,r)}function Vi(e){return(t,n,r)=>{const i=n.args.length,o=new Array(i);for(let s=0;s<i;++s)o[s]=ej(n.args[s],r,t);return e(o,t)}}const kMt={[Xr.Get]:(e,t)=>{const r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),"a_prop_"+r},[Xr.Id]:e=>(e.featureId=!0,"a_"+FBe),[Xr.GeometryType]:e=>(e.geometryType=!0,"a_"+$Be),[Xr.LineMetric]:()=>"currentLineMetric",[Xr.Var]:(e,t)=>{const r=t.args[0].value;return r in e.variables||(e.variables[r]={name:r,type:t.type}),f$(r)},[Xr.Has]:(e,t)=>{const r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),`(a_prop_${r} != ${um(sN)})`},[Xr.Resolution]:()=>"u_resolution",[Xr.Zoom]:()=>"u_zoom",[Xr.Time]:()=>"u_time",[Xr.Any]:Vi(e=>`(${e.join(" || ")})`),[Xr.All]:Vi(e=>`(${e.join(" && ")})`),[Xr.Not]:Vi(([e])=>`(!${e})`),[Xr.Equal]:Vi(([e,t])=>`(${e} == ${t})`),[Xr.NotEqual]:Vi(([e,t])=>`(${e} != ${t})`),[Xr.GreaterThan]:Vi(([e,t])=>`(${e} > ${t})`),[Xr.GreaterThanOrEqualTo]:Vi(([e,t])=>`(${e} >= ${t})`),[Xr.LessThan]:Vi(([e,t])=>`(${e} < ${t})`),[Xr.LessThanOrEqualTo]:Vi(([e,t])=>`(${e} <= ${t})`),[Xr.Multiply]:Vi(e=>`(${e.join(" * ")})`),[Xr.Divide]:Vi(([e,t])=>`(${e} / ${t})`),[Xr.Add]:Vi(e=>`(${e.join(" + ")})`),[Xr.Subtract]:Vi(([e,t])=>`(${e} - ${t})`),[Xr.Clamp]:Vi(([e,t,n])=>`clamp(${e}, ${t}, ${n})`),[Xr.Mod]:Vi(([e,t])=>`mod(${e}, ${t})`),[Xr.Pow]:Vi(([e,t])=>`pow(${e}, ${t})`),[Xr.Abs]:Vi(([e])=>`abs(${e})`),[Xr.Floor]:Vi(([e])=>`floor(${e})`),[Xr.Ceil]:Vi(([e])=>`ceil(${e})`),[Xr.Round]:Vi(([e])=>`floor(${e} + 0.5)`),[Xr.Sin]:Vi(([e])=>`sin(${e})`),[Xr.Cos]:Vi(([e])=>`cos(${e})`),[Xr.Atan]:Vi(([e,t])=>t!==void 0?`atan(${e}, ${t})`:`atan(${e})`),[Xr.Sqrt]:Vi(([e])=>`sqrt(${e})`),[Xr.Match]:Vi(e=>{const t=e[0],n=e[e.length-1];let r=null;for(let i=e.length-3;i>=1;i-=2){const o=e[i],s=e[i+1];r=`(${t} == ${o} ? ${s} : ${r||n})`}return r}),[Xr.Between]:Vi(([e,t,n])=>`(${e} >= ${t} && ${e} <= ${n})`),[Xr.Interpolate]:Vi(([e,t,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const o=n[i],s=r||n[i+1],a=n[i+2],l=n[i+3];let u;e===um(1)?u=`(${t} - ${o}) / (${a} - ${o})`:u=`(pow(${e}, (${t} - ${o})) - 1.0) / (pow(${e}, (${a} - ${o})) - 1.0)`,r=`mix(${s}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[Xr.Case]:Vi(e=>{const t=e[e.length-1];let n=null;for(let r=e.length-3;r>=0;r-=2){const i=e[r],o=e[r+1];n=`(${i} ? ${o} : ${n||t})`}return n}),[Xr.In]:Vi(([e,...t],n)=>{const r=EMt("in",n),i=[];for(let o=0;o<t.length;o+=1)i.push(`  if (inputValue == ${t[o]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${e})`}),[Xr.Array]:Vi(e=>`vec${e.length}(${e.join(", ")})`),[Xr.Color]:Vi(e=>{if(e.length===1)return`vec4(vec3(${e[0]} / 255.0), 1.0)`;if(e.length===2)return`vec4(vec3(${e[0]} / 255.0), ${e[1]})`;const t=e.slice(0,3).map(r=>`${r} / 255.0`);if(e.length===3)return`vec4(${t.join(", ")}, 1.0)`;const n=e[3];return`vec4(${t.join(", ")}, ${n})`}),[Xr.Band]:Vi(([e,t,n],r)=>{if(!(Q5 in r.functions)){let i="";const o=r.bandCount||1;for(let s=0;s<o;s++){const a=Math.floor(s/4);let l=s%4;s===o-1&&l===1&&(l=3);const u=`${qr.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${s+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[Q5]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${qr.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${qr.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${Q5}(${e}, ${t??"0.0"}, ${n??"0.0"})`}),[Xr.Palette]:(e,t)=>{const[n,...r]=t.args,i=r.length,o=new Uint8Array(i*4);for(let u=0;u<r.length;u++){const f=r[u].value,c=cA(f),d=u*4;o[d]=c[0],o[d+1]=c[1],o[d+2]=c[2],o[d+3]=c[3]*255}e.paletteTextures||(e.paletteTextures=[]);const s=`${RBe}[${e.paletteTextures.length}]`,a=new _Mt(s,o);e.paletteTextures.push(a);const l=ej(n,qi,e);return`texture2D(${s}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function ej(e,t,n){if(e instanceof $Ge){const r=kMt[e.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(e.operator)}`);return r(n,e,t)}if((e.type&qi)>0)return um(e.value);if((e.type&BL)>0)return e.value.toString();if((e.type&J_)>0)return ep(e.value.toString());if((e.type&Mu)>0)return m3(e.value);if((e.type&pm)>0)return QU(e.value);if((e.type&ox)>0)return AMt(e.value);throw new Error(`Unexpected expression ${e.value} (expected type ${MGe(t)})`)}function TMt(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const USe=.985,lb=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,ub=TMt();class MBe{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${um(ub["circle-radius"])} + ${um(ub["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=m3(ub["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=um(ub["stroke-width"]),this.strokeColorExpression_=m3(ub["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=ep("round"),this.strokeJoinExpression_=ep("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=m3(ub["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t,n,r,i){return this.attributes_.push({name:t,type:n,varyingName:t.replace(/^a_/,"v_"),varyingType:i??n,varyingExpression:r??t}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){return this.vertexShaderFunctions_.includes(t)?this:(this.vertexShaderFunctions_.push(t),this)}addFragmentShaderFunction(t){return this.fragmentShaderFunctions_.includes(t)?this:(this.fragmentShaderFunctions_.push(t),this)}getSymbolVertexShader(){return this.hasSymbol_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;

varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${USe} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${USe}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${ep("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${ep("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${ep("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${ep("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}
      
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx;
  float currentRadiusPx = distanceFromSegment(currentPoint, v_segmentStart, v_segmentEnd);
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${lb}
${this.uniforms_.map(t=>`uniform ${t};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}function ur(e,t,n){const r=pDe();return SMt(t,n,r,e)}function DMt(e){const t=cA(e),n=t[0]*256,r=t[1],i=t[2]*256,o=Math.round(t[3]*255);return[n+r,i+o]}const LMt=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function tj(e){return e===Mu||e===ox?2:e===pm?4:1}function aN(e){const t=tj(e);return t>1?`vec${t}`:"float"}function OBe(e,t){for(const n in t.variables){const r=t.variables[n],i=f$(r.name);let o=aN(r.type);r.type===Mu&&(o="vec4"),e.addUniform(`${o} ${i}`)}for(const n in t.properties){const r=t.properties[n],i=aN(r.type),o=`a_prop_${r.name}`;r.type===Mu?(e.addAttribute(o,i,`unpackColor(${o})`,"vec4"),e.addVertexShaderFunction(LMt)):e.addAttribute(o,i)}for(const n in t.functions)e.addVertexShaderFunction(t.functions[n]),e.addFragmentShaderFunction(t.functions[n])}function IBe(e,t){const n={};for(const r in e.variables){const i=e.variables[r],o=f$(i.name);n[o]=()=>{const s=t[i.name];return typeof s=="number"?s:typeof s=="boolean"?s?1:0:i.type===Mu?cA(s||"#eee"):typeof s=="string"?X1(s):s}}return n}function NBe(e){const t={};for(const n in e.properties){const r=e.properties[n],i=o=>{const s=o.get(r.name);return r.type===Mu?DMt([...cA(s||"#eee")]):typeof s=="string"?X1(s):typeof s=="boolean"?s?1:0:s};t[`prop_${r.name}`]={size:tj(r.type),callback:i}}return t}class ID{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,n){for(let r=0;r<t.length;r++)this.addFeature(t[r],n)}addFeature(t,n){let r=t.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,t))}clearFeatureEntryInPointBatch_(t){const n=oo(t),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(t){const n=oo(t),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(t){const n=oo(t),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(t,n){var i;const r=t.getType();switch(r){case"GeometryCollection":{const o=t.getGeometriesArray();for(const s of o)this.addGeometry_(s,n);break}case"MultiPolygon":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEndss(),n,oo(n),o.getStride());break}case"MultiLineString":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEnds(),n,oo(n),o.getStride());break}case"MultiPoint":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),null,n,oo(n),o.getStride());break}case"Polygon":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),o.getEnds(),n,oo(n),o.getStride());break}case"Point":{const o=t;this.addCoordinates_(r,o.getFlatCoordinates(),null,n,oo(n),o.getStride());break}case"LineString":case"LinearRing":{const o=t,s=o.getStride();this.addCoordinates_(r,o.getFlatCoordinates(),null,n,oo(n),s,(i=o.getLayout)==null?void 0:i.call(o));break}}}addCoordinates_(t,n,r,i,o,s,a){let l;switch(t){case"MultiPolygon":{const u=r;for(let f=0,c=u.length;f<c;f++){let d=u[f];const p=f>0?u[f-1]:null,h=p?p[p.length-1]:0,g=d[d.length-1];d=h>0?d.map(m=>m-h):d,this.addCoordinates_("Polygon",n.slice(h,g),d,i,o,s,a)}break}case"MultiLineString":{const u=r;for(let f=0,c=u.length;f<c;f++){const d=f>0?u[f-1]:0;this.addCoordinates_("LineString",n.slice(d,u[f]),null,i,o,s,a)}break}case"MultiPoint":for(let u=0,f=n.length;u<f;u+=s)this.addCoordinates_("Point",n.slice(u,u+2),null,i,o,null,null);break;case"Polygon":{const u=r;if(i instanceof OGe){const d=IGe(n,u);if(d.length>1){this.addCoordinates_("MultiPolygon",n,d,i,o,s,a);return}}this.polygonBatch.entries[o]||(this.polygonBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/s;const f=r.length,c=r.map((d,p,h)=>p>0?(d-h[p-1])/s:d/s);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=f,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[o].flatCoordss.push(RMt(n,s)),this.polygonBatch.entries[o].ringsVerticesCounts.push(c),this.polygonBatch.entries[o].verticesCount+=l,this.polygonBatch.entries[o].ringsCount+=f;for(let d=0,p=u.length;d<p;d++){const h=d>0?u[d-1]:0;this.addCoordinates_("LinearRing",n.slice(h,u[d]),null,i,o,s,a)}break}case"Point":this.pointBatch.entries[o]||(this.pointBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[o].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[o]||(this.lineStringBatch.entries[o]=this.addRefToEntry_(o,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/s,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[o].flatCoordss.push(FMt(n,s,a)),this.lineStringBatch.entries[o].verticesCount+=l;break}}addRefToEntry_(t,n){const r=this.uidToRef_.get(t),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(t,i)),n}removeRef_(t,n){if(!t)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(t),this.uidToRef_.delete(n),this.freeGlobalRef_.push(t)}changeFeature(t){if(!this.uidToRef_.get(oo(t)))return;this.removeFeature(t);const n=t.getGeometry();n&&this.addGeometry_(n,t)}removeFeature(t){let n=this.clearFeatureEntryInPointBatch_(t);n=this.clearFeatureEntryInPolygonBatch_(t)||n,n=this.clearFeatureEntryInLineStringBatch_(t)||n,n&&this.removeRef_(n.ref,oo(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}isEmpty(){return this.globalCounter_===0}filter(t){const n=new ID;n.globalCounter_=this.globalCounter_,n.uidToRef_=this.uidToRef_,n.refToFeature_=this.refToFeature_;let r=!0;for(const i of this.refToFeature_.values())t(i)&&(n.addFeature(i),r=!1);return r?new ID:n}}function RMt(e,t){return t===2?e:e.filter((n,r)=>r%t<2)}function FMt(e,t,n){return t===3&&n==="XYM"?e:t===4?e.filter((r,i)=>i%t!==2):t===3?e.map((r,i)=>i%t!==2?r:0):new Array(e.length*1.5).fill(0).map((r,i)=>i%3===2?0:e[Math.round(i/1.5)])}function PBe(){const e='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let u=e(t,0,i,x,!0);const l=[];if(!u||u.next===u.prev)return l;let c,h,y;if(o&&(u=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const u=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);u===u.next&&(u.steiner=!0),o.push(a(u))}o.sort(f);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,u,x)),t.length>80*x){c=1/0,h=1/0;let e=-1/0,n=-1/0;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<h&&(h=o),x>e&&(e=x),o>n&&(n=o)}y=Math.max(e-c,n-h),y=0!==y?32767/y:0}return r(u,l,x,c,h,y,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=w(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=w(x/r|0,t[x],t[x+1],o);return o&&g(o,o.next)&&(A(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(A(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,f,s,l,a,h){if(!t)return;!h&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,u=0;for(let t=0;t<n&&(u++,i=i.nextZ,i);t++);let f=n;for(;u>0||f>0&&i;)0!==u&&(0===f||!i||x.z<=i.z)?(r=x,x=x.nextZ,u--):(r=i,i=i.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let y=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),A(t),t=p.next,y=p.next;else if((t=p)===y){h?1===h?r(t=i(n(t),e),e,f,s,l,a,2):2===h&&u(t,e,f,s,l,a):r(n(t),e,f,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,u=e.y,f=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(u,f,s),a=Math.max(x,o,i),h=Math.max(u,f,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=h&&y(x,u,o,f,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const u=x.x,f=o.x,s=i.x,l=x.y,a=o.y,h=i.y,p=Math.min(u,f,s),g=Math.min(l,a,h),b=Math.max(u,f,s),M=Math.max(l,a,h),m=c(p,g,e,n,r),Z=c(b,M,e,n,r);let d=t.prevZ,w=t.nextZ;for(;d&&d.z>=m&&w&&w.z<=Z;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;d&&d.z>=m;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;w&&w.z<=Z;){if(w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!g(n,x)&&b(n,r,r.next,x)&&Z(n,x)&&Z(x,n)&&(e.push(n.i,r.i,x.i),A(r),A(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function u(t,e,x,o,i,u){let f=t;do{let t=f.next.next;for(;t!==f.prev;){if(f.i!==t.i&&p(f,t)){let s=d(f,t);return f=n(f,f.next),s=n(s,s.next),r(f,e,x,o,i,u,0),void r(s,e,x,o,i,u,0)}t=t.next}f=f.next}while(f!==t)}function f(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(g(t,n))return n;do{if(g(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const u=o,f=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&h(x<s?r:i,x,f,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);Z(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==u);return o}(t,e);if(!r)return e;const x=d(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function h(t,e,n,r,x,o,i,u){return(x-i)*(e-u)>=(t-i)*(o-u)&&(t-i)*(r-u)>=(n-i)*(e-u)&&(n-i)*(o-u)>=(x-i)*(r-u)}function y(t,e,n,r,x,o,i,u){return!(t===i&&e===u)&&h(t,e,n,r,x,o,i,u)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Z(t,e)&&Z(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||g(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){const x=m(v(t,e,n)),o=m(v(t,e,r)),i=m(v(n,r,t)),u=m(v(n,r,e));return x!==o&&i!==u||(!(0!==x||!M(t,n,e))||(!(0!==o||!M(t,r,e))||(!(0!==i||!M(n,t,r))||!(0!==u||!M(n,e,r)))))}function M(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function m(t){return t>0?1:t<0?-1:0}function Z(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function d(t,e){const n=E(t.i,t.x,t.y),r=E(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){const x=E(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function I(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function z(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5];return t[0]=u/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-u*f)/n,t[5]=-(x*s-o*f)/n,t}new Array(6);const F=[],P={vertexPosition:0,indexPosition:0};function B(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function N(t,e,n,r,x,o){const i=3+x,u=t[e+0],f=t[e+1],s=F;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/i;return B(n,l,u,f,0),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,1),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,2),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,3),s.length&&n.set(s,l+3),l+=i,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,P.vertexPosition=l,P.indexPosition=c,P}function R(t,e,n,r,x,o,i,u,f,s,l){const c=10+u.length,a=o.length/c,h=[t[e+0],t[e+1]],y=[t[n],t[n+1]],p=t[e+2],v=t[n+2],g=I(f,[...h]),b=I(f,[...y]);function M(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),u=[(n[0]-t[0])/i,(n[1]-t[1])/i],f=0===r||0===i?0:Math.acos((s=u[0]*x[0]+u[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return u[0]*o[0]+u[1]*o[1]>0?f:2*Math.PI-f}let m=-1,Z=-1,d=l;const w=null!==x;if(null!==r){m=M(g,b,I(f,[...[t[r],t[r+1]]])),Math.cos(m)<=.985&&(d+=Math.tan((m-Math.PI)/2))}if(w){Z=M(b,g,I(f,[...[t[x],t[x+1]]])),Math.cos(Z)<=.985&&(d+=Math.tan((Math.PI-Z)/2))}function A(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(0,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(1,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(2,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(3,l)),o.push(...u),i.push(a,a+1,a+2,a+1,a+3,a+2),{length:s+Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])),angle:d}}function S(e,n,r,x,o){const i=2+o;let u=n;const f=e.slice(u,u+o);u+=o;const s=e[u++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[u++],t<s-1&&(c[t]=l);const a=e.slice(u,u+2*l),h=t(a,c,2);for(let t=0;t<h.length;t++)x.push(h[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...f);return u+2*l}const T="GENERATE_POLYGON_BUFFERS",_="GENERATE_POINT_BUFFERS",O="GENERATE_LINE_STRING_BUFFERS",U=self;U.onmessage=t=>{const e=t.data;switch(e.type){case _:{const t=3,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x,u=4*i*(r+t),f=new Uint32Array(6*i),s=new Float32Array(u);let l;for(let t=0;t<o.length;t+=x)l=N(o,t,s,f,r,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:o.buffer},e);U.postMessage(c,[s.buffer,f.buffer,o.buffer]);break}case O:{const t=[],n=[],r=e.customAttributesSize,x=3,o=new Float32Array(e.renderInstructions);let i=0;const u=[1,0,0,1,0,0];let f,s;for(z(u,e.renderInstructionsTransform);i<o.length;){s=Array.from(o.slice(i,i+r)),i+=r,f=o[i++];const e=i,l=i+(f-1)*x,c=o[e]===o[l]&&o[e+1]===o[l+1];let a=0,h=0;for(let r=0;r<f-1;r++){let y=null;r>0?y=i+(r-1)*x:c&&(y=l-x);let p=null;r<f-2?p=i+(r+2)*x:c&&(p=e+x);const v=R(o,i+r*x,i+(r+1)*x,y,p,t,n,s,u,a,h);a=v.length,h=v.angle}i+=f*x}const l=Uint32Array.from(n),c=Float32Array.from(t),a=Object.assign({vertexBuffer:c.buffer,indexBuffer:l.buffer,renderInstructions:o.buffer},e);U.postMessage(a,[c.buffer,l.buffer,o.buffer]);break}case T:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=S(x,o,t,n,r);const i=Uint32Array.from(n),u=Float32Array.from(t),f=Object.assign({vertexBuffer:u.buffer,indexBuffer:i.buffer,renderInstructions:x.buffer},e);U.postMessage(f,[u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}const z_={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function BBe(e,t){t=t||[];const n=256,r=n-1;return t[0]=Math.floor(e/n/n/n)/r,t[1]=Math.floor(e/n/n)%n/r,t[2]=Math.floor(e/n)%n/r,t[3]=e%n/r,t}function zBe(e){let t=0;const n=256,r=n-1;return t+=Math.round(e[0]*n*n*n*r),t+=Math.round(e[1]*n*n*r),t+=Math.round(e[2]*n*r),t+=Math.round(e[3]*r),t}function nj(e,t,n,r){let i=0;for(const o in t){const s=t[o],a=s.callback.call(n,n.feature);let l=(a==null?void 0:a[0])??a;l===sN&&console.warn('The "has" operator might return false positives.'),l===void 0?l=sN:l===null&&(l=0),e[r+i++]=l,!(!s.size||s.size===1)&&(e[r+i++]=a[1],!(s.size<3)&&(e[r+i++]=a[2],!(s.size<4)&&(e[r+i++]=a[3])))}return i}function d$(e){return Object.keys(e).reduce((t,n)=>t+(e[n].size||1),0)}function $Mt(e,t,n,r){const i=(2+d$(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++)o[0]=l.flatCoordss[u][0],o[1]=l.flatCoordss[u][1],Ap(r,o),t[s++]=o[0],t[s++]=o[1],s+=nj(t,n,l,s)}return t}function MMt(e,t,n,r){const i=3*e.verticesCount+(1+d$(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){o.length=l.flatCoordss[u].length,gDe(l.flatCoordss[u],0,o.length,3,r,o,3),s+=nj(t,n,l,s),t[s++]=o.length/3;for(let c=0,d=o.length;c<d;c+=3)t[s++]=o[c],t[s++]=o[c+1],t[s++]=o[c+2]}}return t}function OMt(e,t,n,r){const i=2*e.verticesCount+(1+d$(n))*e.geometriesCount+e.ringsCount;(!t||t.length!==i)&&(t=new Float32Array(i));const o=[];let s=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){o.length=l.flatCoordss[u].length,gDe(l.flatCoordss[u],0,o.length,2,r,o),s+=nj(t,n,l,s),t[s++]=l.ringsVerticesCounts[u].length;for(let c=0,d=l.ringsVerticesCounts[u].length;c<d;c++)t[s++]=l.ringsVerticesCounts[u][c];for(let c=0,d=o.length;c<d;c+=2)t[s++]=o[c],t[s++]=o[c+1]}}return t}function ND(e){return(JSON.stringify(e).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function rj(e,t,n,r){if(`${r}radius`in e&&r!=="icon-"){let i=ur(n,e[`${r}radius`],qi);if(`${r}radius2`in e){const o=ur(n,e[`${r}radius2`],qi);i=`max(${i}, ${o})`}`${r}stroke-width`in e&&(i=`(${i} + ${ur(n,e[`${r}stroke-width`],qi)} * 0.5)`),t.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in e){const i=ur(n,e[`${r}scale`],ox);t.setSymbolSizeExpression(`${t.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in e&&t.setSymbolOffsetExpression(ur(n,e[`${r}displacement`],pm)),`${r}rotation`in e&&t.setSymbolRotationExpression(ur(n,e[`${r}rotation`],qi)),`${r}rotate-with-view`in e&&t.setSymbolRotateWithView(!!e[`${r}rotate-with-view`])}function UBe(e,t,n,r,i){let o="vec4(0.)";if(t!==null&&(o=t),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${e})`;o=`mix(${n}, ${o}, ${l})`}const s=`(1.0 - smoothstep(-0.63, 0.58, ${e}))`;let a=`${o} * vec4(1.0, 1.0, 1.0, ${s})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function ij(e,t,n,r,i){const o=new Image;o.crossOrigin=e[`${r}cross-origin`]===void 0?"anonymous":e[`${r}cross-origin`],Wc(typeof e[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),o.src=e[`${r}src`],n[`u_texture${i}_size`]=()=>o.complete?[o.width,o.height]:[0,0],t.addUniform(`vec2 u_texture${i}_size`);const s=`u_texture${i}_size`;return n[`u_texture${i}`]=o,t.addUniform(`sampler2D u_texture${i}`),s}function oj(e,t,n,r,i){let o=ur(n,e[`${t}offset`],pm);if(`${t}offset-origin`in e)switch(e[`${t}offset-origin`]){case"top-right":o=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`;break;case"bottom-left":o=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${o} * vec2(1., -1.)`;break;case"bottom-right":o=`${r} - ${i} - ${o}`;break}return o}function IMt(e,t,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,rj(e,t,r,"circle-");let i=null;"circle-opacity"in e&&(i=ur(r,e["circle-opacity"],qi));let o="coordsPx";"circle-scale"in e&&(o=`coordsPx / ${ur(r,e["circle-scale"],ox)}`);let s=null;"circle-fill-color"in e&&(s=ur(r,e["circle-fill-color"],Mu));let a=null;"circle-stroke-color"in e&&(a=ur(r,e["circle-stroke-color"],Mu));let l=ur(r,e["circle-radius"],qi),u=null;"circle-stroke-width"in e&&(u=ur(r,e["circle-stroke-width"],qi),l=`(${l} + ${u} * 0.5)`);const f=`circleDistanceField(${o}, ${l})`,c=UBe(f,s,a,u,i);t.setSymbolColorExpression(c)}function NMt(e,t,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,rj(e,t,r,"shape-");let i=null;"shape-opacity"in e&&(i=ur(r,e["shape-opacity"],qi));let o="coordsPx";"shape-scale"in e&&(o=`coordsPx / ${ur(r,e["shape-scale"],ox)}`);let s=null;"shape-fill-color"in e&&(s=ur(r,e["shape-fill-color"],Mu));let a=null;"shape-stroke-color"in e&&(a=ur(r,e["shape-stroke-color"],Mu));let l=null;"shape-stroke-width"in e&&(l=ur(r,e["shape-stroke-width"],qi));const u=ur(r,e["shape-points"],qi);let f="0.";"shape-angle"in e&&(f=ur(r,e["shape-angle"],qi));let c,d=ur(r,e["shape-radius"],qi);if(l!==null&&(d=`${d} + ${l} * 0.5`),"shape-radius2"in e){let h=ur(r,e["shape-radius2"],qi);l!==null&&(h=`${h} + ${l} * 0.5`),c=`starDistanceField(${o}, ${u}, ${d}, ${h}, ${f})`}else c=`regularDistanceField(${o}, ${u}, ${d}, ${f})`;const p=UBe(c,s,a,l,i);t.setSymbolColorExpression(p)}function PMt(e,t,n,r){let i="vec4(1.0)";"icon-color"in e&&(i=ur(r,e["icon-color"],Mu)),"icon-opacity"in e&&(i=`${i} * vec4(1.0, 1.0, 1.0, ${ur(r,e["icon-opacity"],qi)})`);const o=ND(e["icon-src"]),s=ij(e,t,n,"icon-",o);if(t.setSymbolColorExpression(`${i} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(s),"icon-width"in e&&"icon-height"in e&&t.setSymbolSizeExpression(`vec2(${ur(r,e["icon-width"],qi)}, ${ur(r,e["icon-height"],qi)})`),"icon-offset"in e&&"icon-size"in e){const a=ur(r,e["icon-size"],pm),l=t.getSymbolSizeExpression();t.setSymbolSizeExpression(a);const u=oj(e,"icon-",r,"v_quadSizePx",a);t.setTextureCoordinateExpression(`(vec4((${u}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(rj(e,t,r,"icon-"),"icon-anchor"in e){const a=ur(r,e["icon-anchor"],pm);let l="1.0";"icon-scale"in e&&(l=ur(r,e["icon-scale"],ox));let u;e["icon-anchor-x-units"]==="pixels"&&e["icon-anchor-y-units"]==="pixels"?u=`${a} * ${l}`:e["icon-anchor-x-units"]==="pixels"?u=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:e["icon-anchor-y-units"]==="pixels"?u=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:u=`${a} * v_quadSizePx`;let f=`v_quadSizePx * vec2(0.5, -0.5) + ${u} * vec2(-1., 1.)`;if("icon-anchor-origin"in e)switch(e["icon-anchor-origin"]){case"top-right":f=`v_quadSizePx * -0.5 + ${u}`;break;case"bottom-left":f=`v_quadSizePx * 0.5 - ${u}`;break;case"bottom-right":f=`v_quadSizePx * vec2(-0.5, 0.5) + ${u} * vec2(1., -1.)`;break}t.setSymbolOffsetExpression(`${t.getSymbolOffsetExpression()} + ${f}`)}}function BMt(e,t,n,r){if("stroke-color"in e&&t.setStrokeColorExpression(ur(r,e["stroke-color"],Mu)),"stroke-pattern-src"in e){const i=ND(e["stroke-pattern-src"]),o=ij(e,t,n,"stroke-pattern-",i);let s=o,a="vec2(0.)";"stroke-pattern-offset"in e&&"stroke-pattern-size"in e&&(s=ur(r,e["stroke-pattern-size"],pm),a=oj(e,"stroke-pattern-",r,o,s));let l="0.";"stroke-pattern-spacing"in e&&(l=ur(r,e["stroke-pattern-spacing"],qi)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const u=`u_texture${i}`;let f="1.";"stroke-color"in e&&(f=t.getStrokeColorExpression()),t.setStrokeColorExpression(`${f} * sampleStrokePattern(${u}, ${o}, ${a}, ${s}, ${l}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in e&&t.setStrokeWidthExpression(ur(r,e["stroke-width"],qi)),"stroke-offset"in e&&t.setStrokeOffsetExpression(ur(r,e["stroke-offset"],qi)),"stroke-line-cap"in e&&t.setStrokeCapExpression(ur(r,e["stroke-line-cap"],J_)),"stroke-line-join"in e&&t.setStrokeJoinExpression(ur(r,e["stroke-line-join"],J_)),"stroke-miter-limit"in e&&t.setStrokeMiterLimitExpression(ur(r,e["stroke-miter-limit"],qi)),"stroke-line-dash"in e){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${ep("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${ep("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let i=e["stroke-line-dash"].map(d=>ur(r,d,qi));i.length%2===1&&(i=[...i,...i]);let o="0.";"stroke-line-dash-offset"in e&&(o=ur(r,e["stroke-line-dash-offset"],qi));const a=`dashDistanceField_${ND(e["stroke-line-dash"])}`,l=i.map((d,p)=>`float dashLength${p} = ${d};`),u=i.map((d,p)=>`dashLength${p}`).join(" + ");let f="0.",c=`getSingleDashDistance(distance, radius, ${f}, dashLength0, totalDashLength, capType, lineWidth)`;for(let d=2;d<i.length;d+=2)f=`${f} + dashLength${d-2} + dashLength${d-1}`,c=`min(${c}, getSingleDashDistance(distance, radius, ${f}, dashLength${d}, totalDashLength, capType, lineWidth))`;r.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth) {
  ${l.join(`
  `)}
  float totalDashLength = ${u};
  return ${c};
}`,t.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${o}, currentRadiusPx, capType, v_width)`)}}function zMt(e,t,n,r){if("fill-color"in e&&t.setFillColorExpression(ur(r,e["fill-color"],Mu)),"fill-pattern-src"in e){const i=ND(e["fill-pattern-src"]),o=ij(e,t,n,"fill-pattern-",i);let s=o,a="vec2(0.)";"fill-pattern-offset"in e&&"fill-pattern-size"in e&&(s=ur(r,e["fill-pattern-size"],pm),a=oj(e,"fill-pattern-",r,o,s)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${i}`;let u="1.";"fill-color"in e&&(u=t.getFillColorExpression()),t.setFillColorExpression(`${u} * sampleFillPattern(${l}, ${o}, ${a}, ${s}, pxOrigin, pxPos)`)}}function jBe(e,t,n){const r=JU(),i=new MBe,o={};if("icon-src"in e?PMt(e,i,o,r):"shape-points"in e?NMt(e,i,o,r):"circle-radius"in e&&IMt(e,i,o,r),BMt(e,i,o,r),zMt(e,i,o,r),n){const l=ur(r,n,BL);i.setFragmentDiscardExpression(`!${l}`)}const s={};function a(l,u,f,c){if(!r[l])return;const d=aN(f),p=tj(f);i.addAttribute(`a_${u}`,d),s[u]={size:p,callback:c}}return a("geometryType",$Be,J_,l=>X1(mDe(l.getGeometry()))),a("featureId",FBe,J_|qi,l=>{const u=l.getId()??null;return typeof u=="string"?X1(u):u}),OBe(i,r),{builder:i,attributes:{...s,...NBe(r)},uniforms:{...o,...IBe(r,t)}}}function UMt(e){const t=Array.isArray(e)?e:[e];if("style"in t[0]){const n=[],r=t,i=[];for(const o of r){const s=Array.isArray(o.style)?o.style:[o.style];let a=o.filter;o.else&&i.length&&(a=["all",...i.map(u=>["!",u])],o.filter&&a.push(o.filter),a.length<3&&(a=a[1])),o.filter&&i.push(o.filter);const l=s.map(u=>({style:u,...a&&{filter:a}}));n.push(...l)}return n}return"builder"in t[0]?t:t.map(n=>({style:n}))}const jMt=[];let J5;function HMt(){return J5||(J5=PBe()),J5}let qMt=0;const vd={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class GMt{constructor(t,n,r,i,o){this.helper_,this.hitDetectionEnabled_=!!i;let s=t;if(!("builder"in t)){const f=t,c=jBe(f.style,n,f.filter);s={builder:c.builder,attributes:c.attributes,uniforms:c.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader()),this.featureFilter_=null,o&&(this.featureFilter_=this.computeFeatureFilter(o));const l=this.hitDetectionEnabled_?{hitColor:{callback(){return BBe(this.ref,jMt)},size:4}}:{};this.customAttributes_=Object.assign({},l,s.attributes),this.uniforms_=s.uniforms;const u=Object.entries(this.customAttributes_).map(([f,c])=>({name:`a_${f}`,size:c.size||1,type:Os.FLOAT}));this.polygonAttributesDesc_=[{name:vd.POSITION,size:2,type:Os.FLOAT},...u],this.lineStringAttributesDesc_=[{name:vd.SEGMENT_START,size:2,type:Os.FLOAT},{name:vd.MEASURE_START,size:1,type:Os.FLOAT},{name:vd.SEGMENT_END,size:2,type:Os.FLOAT},{name:vd.MEASURE_END,size:1,type:Os.FLOAT},{name:vd.JOIN_ANGLES,size:2,type:Os.FLOAT},{name:vd.DISTANCE,size:1,type:Os.FLOAT},{name:vd.PARAMETERS,size:1,type:Os.FLOAT},...u],this.pointAttributesDesc_=[{name:vd.POSITION,size:2,type:Os.FLOAT},{name:vd.INDEX,size:1,type:Os.FLOAT},...u],this.setHelper(r)}computeFeatureFilter(t){const n=pDe();let r;try{r=NGe(t,BL,n)}catch{return null}if(n.mapState||n.variables.size>0)return null;const i=PGe();return o=>{if(i.properties=o.getPropertiesInternal(),n.featureId){const s=o.getId();s!==void 0?i.featureId=s:i.featureId=null}return i.geometryType=mDe(o.getGeometry()),r(i)}}async generateBuffers(t,n){let r=t;if(this.featureFilter_&&(r=r.filter(this.featureFilter_),r.isEmpty()))return null;const i=this.generateRenderInstructions_(r,n),[o,s,a]=await Promise.all([this.generateBuffersForType_(i.polygonInstructions,"Polygon",n),this.generateBuffersForType_(i.lineStringInstructions,"LineString",n),this.generateBuffersForType_(i.pointInstructions,"Point",n)]),l=eE(Wa(),n);return{polygonBuffers:o,lineStringBuffers:s,pointBuffers:a,invertVerticesTransform:l}}generateRenderInstructions_(t,n){const r=this.hasFill_?OMt(t.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?MMt(t.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,o=this.hasSymbol_?$Mt(t.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:o}}generateBuffersForType_(t,n,r){if(t===null)return null;const i=qMt++;let o;switch(n){case"Polygon":o=z_.GENERATE_POLYGON_BUFFERS;break;case"LineString":o=z_.GENERATE_LINE_STRING_BUFFERS;break;case"Point":o=z_.GENERATE_POINT_BUFFERS;break}const s={id:i,type:o,renderInstructions:t.buffer,renderInstructionsTransform:r,customAttributesSize:d$(this.customAttributes_)},a=HMt();return a.postMessage(s,[t.buffer]),t=null,new Promise(l=>{const u=f=>{const c=f.data;if(c.id!==i||(a.removeEventListener("message",u),!this.helper_.getGL()))return;const d=new Y1(vC,MD).fromArrayBuffer(c.vertexBuffer),p=new Y1(yC,MD).fromArrayBuffer(c.indexBuffer);this.helper_.flushBufferData(d),this.helper_.flushBufferData(p),l([p,d])};a.addEventListener("message",u)})}render(t,n,r){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(t,n,r,i,o,s){const a=t.getSize();a!==0&&(this.helper_.useProgram(r,o),this.helper_.bindBuffer(n),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),s(),this.helper_.drawElements(0,a))}setHelper(t,n=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1])))}}const yd=new Uint8Array(4);class HBe{constructor(t,n){this.helper_=t;const r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){BGe(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,n){if(t<0||n<0||t>this.size_[0]||n>=this.size_[1])return yd[0]=0,yd[1]=0,yd[2]=0,yd[3]=0,yd;this.readAll();const r=Math.floor(t)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return yd[0]=this.data_[r*4],yd[1]=this.data_[r*4+1],yd[2]=this.data_[r*4+2],yd[3]=this.data_[r*4+3],yd}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t[0],t[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}function qBe(e,t){const n=e.viewState.projection,i=t.getSource().getWrapX()&&n.canWrapX(),o=n.getExtent(),s=e.extent,a=i?Za(o):null,l=i?Math.ceil((s[2]-o[2])/a)+1:1;return[i?Math.floor((s[0]-o[0])/a):0,l,a]}const cb={...Ad,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class GBe extends bC{constructor(t,n){const r={[cb.RENDER_EXTENT]:[0,0,0,0],[cb.PATTERN_ORIGIN]:[0,0],[cb.GLOBAL_ALPHA]:1};super(t,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=fA(),this.currentTransform_=Wa(),this.tmpCoords_=[0,0],this.tmpTransform_=Wa(),this.tmpMat4_=wy(),this.currentFrameStateTransform_=Wa(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new ID,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[op(n,Hg.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),op(n,Hg.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),op(n,Hg.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),op(n,Hg.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=UMt(t.style)}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(t=>new GMt(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_,"filter"in t?t.filter:null))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((t,n)=>t.setHelper(this.helper,this.buffers_[n])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new HBe(this.helper))}handleSourceFeatureAdded_(t,n){const r=n.feature;this.batch_.addFeature(r,t)}handleSourceFeatureChanged_(t){const n=t.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(t){const n=t.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){zGe(this.tmpTransform_,this.currentFrameStateTransform_),Z_(this.tmpTransform_,t),this.helper.setUniformMatrixValue(cb.PROJECTION_MATRIX,$D(this.tmpMat4_,this.tmpTransform_)),eE(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(cb.SCREEN_TO_WORLD_MATRIX,$D(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,eE(this.tmpTransform_,t),Ap(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(cb.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,o]=qBe(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,r,i,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const s=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),s}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=t.viewState,o=!t.viewHints[gm.ANIMATING]&&!t.viewHints[gm.INTERACTING],s=!Q_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=i.projection,u=i.resolution,f=n instanceof zL?n.getRenderBuffer():0,c=YN(t.extent,f*u);r.loadFeatures(c,u,l),this.ready=!1;const d=this.helper.makeProjectionTransform(t,Wa()),p=this.styleRenderers_.map((h,g)=>h.generateBuffers(this.batch_,d).then(m=>{this.buffers_[g]&&this.disposeBuffers(this.buffers_[g]),this.buffers_[g]=m}));Promise.all(p).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,n,r,i,o){let s=r;n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),VN(this.currentFrameStateTransform_,s*o,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const u=this.styleRenderers_[a],f=this.buffers_[a];f&&u.render(f,t,()=>{this.applyUniforms_(f.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}}while(++s<i)}forEachFeatureAtCoordinate(t,n,r,i,o){if(Wc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const s=Ap(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=zBe(l),f=this.batch_.getFeatureFromRef(u);if(f)return i(f,this.getLayer(),null)}disposeBuffers(t){const n=r=>{for(const i of r)i&&this.helper.deleteBuffer(i)};t.pointBuffers&&n(t.pointBuffers),t.lineStringBuffers&&n(t.lineStringBuffers),t.polygonBuffers&&n(t.polygonBuffers)}disposeInternal(){this.buffers_.forEach(t=>{t&&this.disposeBuffers(t)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(t){P3(t)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const Wh={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},WMt=["#00f","#0ff","#0f0","#ff0","#f00"];class VMt extends zL{constructor(t){t=t||{};const n=Object.assign({},t);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.filter_=t.filter??!0,this.styleVariables_=t.variables||{},this.gradient_=null,this.addChangeListener(Wh.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:WMt),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const r=t.weight?t.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(Wh.BLUR)}getGradient(){return this.get(Wh.GRADIENT)}getRadius(){return this.get(Wh.RADIUS)}handleGradientChanged_(){this.gradient_=YMt(this.getGradient())}setBlur(t){const n=this.get(Wh.BLUR);if(this.set(Wh.BLUR,t),typeof t=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setGradient(t){this.set(Wh.GRADIENT,t)}setRadius(t){const n=this.get(Wh.RADIUS);if(this.set(Wh.RADIUS,t),typeof t=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setFilter(t){this.filter_=t,this.changed(),this.clearRenderer()}setWeight(t){this.weight_=t,this.changed(),this.clearRenderer()}createRenderer(){const t=new MBe,n=JU(),r=ur(n,this.filter_,BL);let i=ur(n,this.getRadius(),qi),o=ur(n,this.getBlur(),qi);const s={};typeof this.getBlur()=="number"&&(o="a_blur",s.a_blur=()=>this.getBlur(),t.addUniform("float a_blur")),typeof this.getRadius()=="number"&&(i="a_radius",s.a_radius=()=>this.getRadius(),t.addUniform("float a_radius"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const c=typeof this.weight_=="string"?d=>d.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:d=>{const p=c(d);return p!==void 0?us(p,0,1):1}},l="a_prop_weight",t.addAttribute("a_prop_weight","float")}else{const c=["clamp",this.weight_,0,1];l=ur(n,c,qi)}t.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${o});
  float radius = ${i};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${i} + ${o}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${i} + ${o}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),OBe(t,n);const u=NBe(n),f=IBe(n,this.styleVariables_);return new GBe(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:t,attributes:{...u,...a},uniforms:{...f,...s}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}renderDeclutter(){}}function YMt(e){const r=hm(1,256),i=r.createLinearGradient(0,0,1,256),o=1/(e.length-1);for(let s=0,a=e.length;s<a;++s)i.addColorStop(s*o,e[s]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class sj extends vDe{constructor(t,n,r,i,o){const s=o!==void 0?K0.IDLE:K0.LOADED;super(t,n,r,s),this.loader_=o!==void 0?o:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=K0.ERROR):this.state=K0.LOADED,this.changed()}load(){this.state==K0.IDLE&&(this.state=K0.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class XMt extends UGe{constructor(t){super(t),this.vectorRenderer_=new jGe(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Wa(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ap(this.coordinateToVectorPixelTransform_,Ap(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,r=t.viewState,i=r.resolution,o=t.viewHints,s=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),yDe(a,this.layerImageRatio_));const l=Za(a)/i,u=$f(a)/i;if(!o[gm.ANIMATING]&&!o[gm.INTERACTING]&&!PL(a)){s.useContainer(null,null);const f=s.context,c=t.layerStatesArray[t.layerIndex],d=Object.assign({},c,{opacity:1}),p=Object.assign({},t,{extent:a,size:[l,u],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),h=this.getLayer().getDeclutter();h&&(p.declutter={[h]:new HGe(9)});const g=new sj(a,i,n,f.canvas,function(m){s.prepareFrame(p)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(p,null),s.renderDeclutter(p),s.renderDeferred(p),m())});g.addEventListener(Zl.CHANGE,()=>{if(g.getState()!==K0.LOADED)return;this.image=g;const m=g.getPixelRatio(),y=qGe(g.getResolution())*n/m;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=qN(this.coordinateToVectorPixelTransform_,l/2,u/2,1/y,-1/y,0,-r.center[0],-r.center[1])}),g.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!this.getLayer().getSource().loading&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,r,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,r,i,o):super.forEachFeatureAtCoordinate(t,n,r,i,o)}}class KMt extends zL{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new XMt(this)}}class ZMt extends bC{constructor(t,n){const r=n.uniforms||{},i=Wa();r[Ad.PROJECTION_MATRIX]=i,super(t,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Y1(vC,MD),this.indicesBuffer_=new Y1(yC,MD),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const o=n.attributes?n.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:Os.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Os.FLOAT},{name:"a_index",size:1,type:Os.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:Os.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Os.FLOAT})),this.attributes.push(...o),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=fA(),this.currentTransform_=i,this.renderTransform_=Wa(),this.invertRenderTransform_=Wa(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=PBe(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===z_.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,eE(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[op(s,Hg.ADDFEATURE,this.handleSourceFeatureAdded_,this),op(s,Hg.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),op(s,Hg.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),op(s,Hg.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature(a=>{const l=a.getGeometry();l&&l.getType()==="Point"&&(this.featureCache_[oo(a)]={feature:a,properties:a.getProperties(),flatCoordinates:l.getFlatCoordinates()},this.featureCount_++)})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new HBe(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const n=t.feature,r=n.getGeometry();r&&r.getType()==="Point"&&(this.featureCache_[oo(n)]={feature:n,properties:n.getProperties(),flatCoordinates:r.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureChanged_(t){const n=t.feature,r=oo(n),i=this.featureCache_[r],o=n.getGeometry();i?o&&o.getType()==="Point"?(i.properties=n.getProperties(),i.flatCoordinates=o.getFlatCoordinates()):(delete this.featureCache_[r],this.featureCount_--):o&&o.getType()==="Point"&&(this.featureCache_[r]={feature:n,properties:n.getProperties(),flatCoordinates:o.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureDelete_(t){const n=t.feature,r=oo(n);r in this.featureCache_&&(delete this.featureCache_[r],this.featureCount_--)}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,o]=qBe(t,this.getLayer());return this.renderWorlds(t,!1,r,i,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),this.helper.getCanvas()}prepareFrameInternal(t){const n=this.getLayer(),r=n.getSource(),i=t.viewState,o=!t.viewHints[gm.ANIMATING]&&!t.viewHints[gm.INTERACTING],s=!Q_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=i.projection,u=i.resolution,f=n instanceof zL?n.getRenderBuffer():0,c=YN(t.extent,f*u);r.loadFeatures(c,u,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const n=Wa();this.helper.makeProjectionTransform(t,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,o=i*this.featureCount_,s=this.renderInstructions_&&this.renderInstructions_.length===o?this.renderInstructions_:new Float32Array(o);this.renderInstructions_=null;let a=[];const l=[];let u=-1;t.viewState.projection;for(const c in this.featureCache_){const d=this.featureCache_[c];if(a[0]=d.flatCoordinates[0],a[1]=d.flatCoordinates[1],Ap(n,a),s[++u]=a[0],s[++u]=a[1],this.hitDetectionEnabled_){const p=BBe(u+5,l);s[++u]=p[0],s[++u]=p[1],s[++u]=p[2],s[++u]=p[3],s[++u]=Number(c)}for(let p=0;p<this.customAttributes.length;p++){const h=this.customAttributes[p].callback(d.feature,d.properties);s[++u]=h}}const f={id:++this.lastSentId,type:z_.GENERATE_POINT_BUFFERS,renderInstructions:s.buffer,customAttributesSize:i-2};f.projectionTransform=n,this.ready=!1,this.worker_.postMessage(f,[s.buffer])}forEachFeatureAtCoordinate(t,n,r,i,o){if(Wc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=Ap(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=zBe(l),f=this.renderInstructions_[u],c=Math.floor(f).toString(),p=this.getLayer().getSource().getFeatureByUid(c);if(p)return i(p,this.getLayer(),null)}renderWorlds(t,n,r,i,o){let s=r;this.helper.useProgram(this.program_,t),n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),VN(this.currentTransform_,s*o,0),Z_(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(n);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++s<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){P3(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class QMt extends XN{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.parseResult_=jBe(t.style,this.styleVariables_,t.filter),this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map(n=>({name:n,...this.parseResult_.attributes[n]}));return new ZMt(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}function jSe(e,t){const n=`
    attribute vec2 ${g3.TEXTURE_COORD};
    uniform mat4 ${qr.TILE_TRANSFORM};
    uniform float ${qr.TEXTURE_PIXEL_WIDTH};
    uniform float ${qr.TEXTURE_PIXEL_HEIGHT};
    uniform float ${qr.TEXTURE_RESOLUTION};
    uniform float ${qr.TEXTURE_ORIGIN_X};
    uniform float ${qr.TEXTURE_ORIGIN_Y};
    uniform float ${qr.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${g3.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${qr.TEXTURE_ORIGIN_X} + ${qr.TEXTURE_RESOLUTION} * ${qr.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${qr.TEXTURE_ORIGIN_Y} - ${qr.TEXTURE_RESOLUTION} * ${qr.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${qr.TILE_TRANSFORM} * vec4(${g3.TEXTURE_COORD}, ${qr.DEPTH}, 1.0);
    }
  `,r={...JU(),bandCount:t},i=[];if(e.color!==void 0){const c=ur(r,e.color,Mu);i.push(`color = ${c};`)}if(e.contrast!==void 0){const c=ur(r,e.contrast,qi);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.exposure!==void 0){const c=ur(r,e.exposure,qi);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.saturation!==void 0){const c=ur(r,e.saturation,qi);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(e.gamma!==void 0){const c=ur(r,e.gamma,qi);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(e.brightness!==void 0){const c=ur(r,e.brightness,qi);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=Object.keys(r.variables).length;if(s>1&&!e.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<s;++c){const d=r.variables[Object.keys(r.variables)[c]];if(!(d.name in e.variables))throw new Error(`Missing '${d.name}' in style variables`);const p=f$(d.name);o[p]=function(){let h=e.variables[d.name];return typeof h=="string"&&(h=X1(h)),h!==void 0?h:-9999999}}const a=Object.keys(o).map(function(c){return`uniform float ${c};`}),l=Math.ceil(t/4);a.push(`uniform sampler2D ${qr.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${RBe}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(c){return r.functions[c]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${qr.RENDER_EXTENT};
    uniform float ${qr.TRANSITION_ALPHA};
    uniform float ${qr.TEXTURE_PIXEL_WIDTH};
    uniform float ${qr.TEXTURE_PIXEL_HEIGHT};
    uniform float ${qr.RESOLUTION};
    uniform float ${qr.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${qr.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${qr.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${qr.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${qr.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${qr.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${qr.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:f,uniforms:o,paletteTextures:r.paletteTextures}}class PD extends GGe{constructor(t){t=t?Object.assign({},t):{};const n=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(sI.SOURCE,this.handleSourceUpdate_)}getSources(t,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const n=()=>{t.getState()==="ready"&&(t.removeEventListener("change",n),this.setStyle(this.style_))};t.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const t=jSe(this.style_,this.getSourceBandCount_());return new wMt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,n){const r=this.getRenderer();let i;for(let o=0,s=n.length;o<s;++o)this.renderedSource_=n[o],r.prepareFrame(t)&&(i=r.renderFrame(t));return i}render(t,n){this.rendered=!0;const r=t.viewState,i=this.getSources(t.extent,r.resolution);let o=!0;for(let a=0,l=i.length;a<l;++a){const u=i[a],f=u.getState();if(f=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}o=o&&f=="ready"}const s=this.renderSources(t,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(t.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(t,a)}return s}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const n=jSe(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}PD.prototype.dispose;class JMt extends XN{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new GBe(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style_=t,this.clearRenderer(),this.changed()}}var Xl=(e,t,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(u){i(u)}},s=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(e,t)).next())}),tc=Uint8Array,U_=Uint16Array,e5t=Int32Array,WBe=new tc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VBe=new tc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),t5t=new tc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YBe=function(e,t){for(var n=new U_(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new e5t(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},XBe=YBe(WBe,2),KBe=XBe.b,n5t=XBe.r;KBe[28]=258,n5t[258]=28;var r5t=YBe(VBe,0),i5t=r5t.b,ZBe=new U_(32768);for(ao=0;ao<32768;++ao)Vh=(ao&43690)>>1|(ao&21845)<<1,Vh=(Vh&52428)>>2|(Vh&13107)<<2,Vh=(Vh&61680)>>4|(Vh&3855)<<4,ZBe[ao]=((Vh&65280)>>8|(Vh&255)<<8)>>1;var Vh,ao,j_=function(e,t,n){for(var r=e.length,i=0,o=new U_(t);i<r;++i)e[i]&&++o[e[i]-1];var s=new U_(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var a;{a=new U_(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],f=t-e[i],c=s[e[i]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)a[ZBe[c]>>l]=u}return a},xC=new tc(288);for(ao=0;ao<144;++ao)xC[ao]=8;var ao;for(ao=144;ao<256;++ao)xC[ao]=9;var ao;for(ao=256;ao<280;++ao)xC[ao]=7;var ao;for(ao=280;ao<288;++ao)xC[ao]=8;var ao,QBe=new tc(32);for(ao=0;ao<32;++ao)QBe[ao]=5;var ao,o5t=j_(xC,9),s5t=j_(QBe,5),eO=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},gf=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},tO=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},a5t=function(e){return(e+7)/8|0},l5t=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new tc(n-t);return r.set(e.subarray(t,n)),r},u5t=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zu=function(e,t,n){var r=new Error(t||u5t[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Zu),!n)throw r;return r},aj=function(e,t,n,r){var i=e.length,o=0;if(!i||t.f&&!t.l)return n||new tc(0);var s=!n||t.i!=2,a=t.i;n||(n=new tc(i*3));var l=function(Ee){var Ve=n.length;if(Ee>Ve){var Ue=new tc(Math.max(Ve*2,Ee));Ue.set(n),n=Ue}},u=t.f||0,f=t.p||0,c=t.b||0,d=t.l,p=t.d,h=t.m,g=t.n,m=i*8;do{if(!d){u=gf(e,f,1);var y=gf(e,f+1,3);if(f+=3,y)if(y==1)d=o5t,p=s5t,h=9,g=5;else if(y==2){var E=gf(e,f,31)+257,C=gf(e,f+10,15)+4,w=E+gf(e,f+5,31)+1;f+=14;for(var T=new tc(w),R=new tc(19),L=0;L<C;++L)R[t5t[L]]=gf(e,f+L*3,7);f+=C*3;for(var B=eO(R),P=(1<<B)-1,S=j_(R,B),L=0;L<w;){var k=S[gf(e,f,P)];f+=k&15;var v=k>>4;if(v<16)T[L++]=v;else{var D=0,O=0;for(v==16?(O=3+gf(e,f,3),f+=2,D=T[L-1]):v==17?(O=3+gf(e,f,7),f+=3):v==18&&(O=11+gf(e,f,127),f+=7);O--;)T[L++]=D}}var N=T.subarray(0,E),j=T.subarray(E);h=eO(N),g=eO(j),d=j_(N,h),p=j_(j,g)}else Zu(1);else{var v=a5t(f)+4,x=e[v-4]|e[v-3]<<8,_=v+x;if(_>i){a&&Zu(0);break}s&&l(c+x),n.set(e.subarray(v,_),c),t.b=c+=x,t.p=f=_*8,t.f=u;continue}if(f>m){a&&Zu(0);break}}s&&l(c+131072);for(var q=(1<<h)-1,W=(1<<g)-1,Q=f;;Q=f){var D=d[tO(e,f)&q],ee=D>>4;if(f+=D&15,f>m){a&&Zu(0);break}if(D||Zu(2),ee<256)n[c++]=ee;else if(ee==256){Q=f,d=null;break}else{var H=ee-254;if(ee>264){var L=ee-257,se=WBe[L];H=gf(e,f,(1<<se)-1)+KBe[L],f+=se}var ne=p[tO(e,f)&W],ge=ne>>4;ne||Zu(3),f+=ne&15;var j=i5t[ge];if(ge>3){var se=VBe[ge];j+=tO(e,f)&(1<<se)-1,f+=se}if(f>m){a&&Zu(0);break}s&&l(c+131072);var we=c+H;if(c<j){var $e=o-j,ve=Math.min(j,we);for($e+c<0&&Zu(3);c<ve;++c)n[c]=r[$e+c]}for(;c<we;c+=4)n[c]=n[c-j],n[c+1]=n[c+1-j],n[c+2]=n[c+2-j],n[c+3]=n[c+3-j];c=we}}t.l=d,t.p=Q,t.b=c,t.f=u,d&&(u=1,t.m=h,t.d=p,t.n=g)}while(!u);return c==n.length?n:l5t(n,0,c)},c5t=new tc(0),f5t=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Zu(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},d5t=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},h5t=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Zu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Zu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function p5t(e,t){return aj(e,{i:2},t,t)}function g5t(e,t){var n=f5t(e);return n+8>e.length&&Zu(6,"invalid gzip data"),aj(e.subarray(n,-8),{i:2},new tc(d5t(e)),t)}function m5t(e,t){return aj(e.subarray(h5t(e),-4),{i:2},t,t)}function lN(e,t){return e[0]==31&&e[1]==139&&e[2]==8?g5t(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?p5t(e,t):m5t(e,t)}var v5t=typeof TextDecoder<"u"&&new TextDecoder,y5t=0;try{v5t.decode(c5t,{stream:!0}),y5t=1}catch{}var JBe=(e,t)=>e*Math.pow(2,t),R2=(e,t)=>Math.floor(e/Math.pow(2,t)),BD=(e,t)=>JBe(e.getUint16(t+1,!0),8)+e.getUint8(t),e9e=(e,t)=>JBe(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),b5t=(e,t,n,r,i)=>{if(e!=r.getUint8(i))return e-r.getUint8(i);const o=BD(r,i+1);if(t!=o)return t-o;const s=BD(r,i+4);return n!=s?n-s:0},x5t=(e,t,n,r)=>{const i=t9e(e,t|128,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null},HSe=(e,t,n,r)=>{const i=t9e(e,t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},t9e=(e,t,n,r)=>{let i=0,o=e.byteLength/17-1;for(;i<=o;){const s=o+i>>1,a=b5t(t,n,r,e,s*17);if(a>0)i=s+1;else if(a<0)o=s-1;else return[e9e(e,s*17+7),e.getUint32(s*17+13,!0)]}return null},w5t=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,n9e=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:BD(e,t*17+1),y:BD(e,t*17+4),offset:e9e(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:n>>7===1}},qSe=e=>{const t=[],n=new DataView(e);for(let r=0;r<n.byteLength/17;r++)t.push(n9e(n,r));return _5t(t)},_5t=e=>{e.sort(w5t);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++){const i=e[r];let o=i.z;i.is_dir&&(o=o|128),n[r*17]=o,n[r*17+1]=i.x&255,n[r*17+2]=i.x>>8&255,n[r*17+3]=i.x>>16&255,n[r*17+4]=i.y&255,n[r*17+5]=i.y>>8&255,n[r*17+6]=i.y>>16&255,n[r*17+7]=i.offset&255,n[r*17+8]=R2(i.offset,8)&255,n[r*17+9]=R2(i.offset,16)&255,n[r*17+10]=R2(i.offset,24)&255,n[r*17+11]=R2(i.offset,32)&255,n[r*17+12]=R2(i.offset,48)&255,n[r*17+13]=i.length&255,n[r*17+14]=i.length>>8&255,n[r*17+15]=i.length>>16&255,n[r*17+16]=i.length>>24&255}return t},E5t=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,r=n9e(e,n-1);if(r.is_dir){const i=r.z,o=t.z-i,s=Math.trunc(t.x/(1<<o)),a=Math.trunc(t.y/(1<<o));return{z:i,x:s,y:a}}return null};function A5t(e){return Xl(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),o=new TextDecoder("utf-8"),s=JSON.parse(o.decode(new DataView(t.data,10,r)));let a=0;s.compression==="gzip"&&(a=2);let l=0;"minzoom"in s&&(l=+s.minzoom);let u=0;"maxzoom"in s&&(u=+s.maxzoom);let f=0,c=0,d=0,p=-180,h=-85,g=180,m=85;if(s.bounds){const v=s.bounds.split(",");p=+v[0],h=+v[1],g=+v[2],m=+v[3]}if(s.center){const v=s.center.split(",");f=+v[0],c=+v[1],d=+v[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:p,minLat:h,maxLon:g,maxLat:m,centerZoom:d,centerLon:f,centerLat:c,etag:t.etag}})}function C5t(e,t,n,r,i,o,s){return Xl(this,null,function*(){let a=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=qSe(a));const l=HSe(new DataView(a),r,i,o);if(l){let c=(yield t.getBytes(l.offset,l.length,s)).data;const d=new DataView(c);return d.getUint8(0)==31&&d.getUint8(1)==139&&(c=lN(new Uint8Array(c))),{data:c}}const u=E5t(new DataView(a),{z:r,x:i,y:o});if(u){const f=x5t(new DataView(a),u.z,u.x,u.y);if(f){let c=yield n.getArrayBuffer(t,f.offset,f.length,e);e.specVersion===1&&(c=qSe(c));const d=HSe(new DataView(c),r,i,o);if(d){let h=(yield t.getBytes(d.offset,d.length,s)).data;const g=new DataView(h);return g.getUint8(0)==31&&g.getUint8(1)==139&&(h=lN(new Uint8Array(h))),{data:h}}}}})}var r9e={getHeader:A5t,getZxy:C5t};function fb(e,t){return(t>>>0)*4294967296+(e>>>0)}function S5t(e,t){const n=t.buf;let r,i;if(i=n[t.pos++],r=(i&112)>>4,i<128||(i=n[t.pos++],r|=(i&127)<<3,i<128)||(i=n[t.pos++],r|=(i&127)<<10,i<128)||(i=n[t.pos++],r|=(i&127)<<17,i<128)||(i=n[t.pos++],r|=(i&127)<<24,i<128)||(i=n[t.pos++],r|=(i&1)<<31,i<128))return fb(e,r);throw new Error("Expected varint not more than 10 bytes")}function F2(e){const t=e.buf;let n,r;return r=t[e.pos++],n=r&127,r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,S5t(n,e))}function k5t(e,t,n,r){if(r==0){n==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var T5t=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function D5t(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||n>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const r=T5t[e],i=Math.pow(2,e);let o=0,s=0,a=0;const l=[t,n];let u=i/2;for(;u>0;)o=(l[0]&u)>0?1:0,s=(l[1]&u)>0?1:0,a+=u*u*(3*o^s),k5t(u,l,o,s),u=u/2;return r+a}function i9e(e,t){return Xl(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return lN(new Uint8Array(e));{let r=new Response(e).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var Eb=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(Eb||{}),L5t=127;function R5t(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=r+n>>1,o=t-e[i].tileId;if(o>0)n=i+1;else if(o<0)r=i-1;else return e[i]}return r>=0&&(e[r].runLength===0||t-e[r].tileId<e[r].runLength)?e[r]:null}var F5t=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n){return Xl(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);const i=new Headers(this.customHeaders);i.set("Range","bytes="+e+"-"+(e+t-1));let o=yield fetch(this.url,{signal:n,headers:i});if(o.status===416&&e===0){const l=o.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);o=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(u-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const s=o.headers.get("Content-Length");if(o.status===200&&(!s||+s>t))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function mf(e,t){const n=e.getUint32(t+4,!0),r=e.getUint32(t+0,!0);return n*Math.pow(2,32)+r}function $5t(e,t){const n=new DataView(e),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:mf(n,8),rootDirectoryLength:mf(n,16),jsonMetadataOffset:mf(n,24),jsonMetadataLength:mf(n,32),leafDirectoryOffset:mf(n,40),leafDirectoryLength:mf(n,48),tileDataOffset:mf(n,56),tileDataLength:mf(n,64),numAddressedTiles:mf(n,72),numTileEntries:mf(n,80),numTileContents:mf(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function o9e(e){const t={buf:new Uint8Array(e),pos:0},n=F2(t),r=[];let i=0;for(let o=0;o<n;o++){const s=F2(t);r.push({tileId:i+s,offset:0,length:0,runLength:1}),i+=s}for(let o=0;o<n;o++)r[o].runLength=F2(t);for(let o=0;o<n;o++)r[o].length=F2(t);for(let o=0;o<n;o++){const s=F2(t);s===0&&o>0?r[o].offset=r[o-1].offset+r[o-1].length:r[o].offset=s-1}return r}function M5t(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Nb=class extends Error{};function O5t(e,t,n,r){return Xl(this,null,function*(){const i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(M5t(i.data)<3)return[yield r9e.getHeader(e)];const s=i.data.slice(0,L5t);let a=i.etag;r&&i.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),a=void 0);const l=$5t(s,a);if(n){const u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),f=e.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=o9e(yield t(u,l.internalCompression));return[l,[f,c.length,c]]}return[l,void 0]})}function I5t(e,t,n,r,i){return Xl(this,null,function*(){const o=yield e.getBytes(n,r);if(i.etag&&i.etag!==o.etag)throw new Nb(o.etag);const s=yield t(o.data,i.internalCompression),a=o9e(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var N5t=class{constructor(e=100,t=!0,n=i9e){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.prefetch=t,this.decompress=n}getHeader(e,t){return Xl(this,null,function*(){const n=e.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((i,o)=>{O5t(e,this.decompress,this.prefetch,t).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),i(s[0]),this.prune()}).catch(s=>{o(s)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,n,r){return Xl(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const o=new Promise((s,a)=>{I5t(e,this.decompress,t,n,r).then(l=>{s(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(e,t,n,r){return Xl(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const o=new Promise((s,a)=>{e.getBytes(t,n).then(l=>{if(r.etag&&r.etag!==l.etag)throw new Nb(l.etag);s(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,r)=>{n.lastUsed<e&&(e=n.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e,t){return Xl(this,null,function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,t)})}},lj=class{constructor(e,t,n){typeof e=="string"?this.source=new F5t(e):this.source=e,n?this.decompress=n:this.decompress=i9e,t?this.cache=t:this.cache=new N5t}getHeader(){return Xl(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,r){return Xl(this,null,function*(){const i=D5t(e,t,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return r9e.getZxy(o,this.source,this.cache,e,t,n,r);if(e<o.minZoom||e>o.maxZoom)return;let s=o.rootDirectoryOffset,a=o.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,s,a,o),f=R5t(u,i);if(f)if(f.runLength>0){const c=yield this.source.getBytes(o.tileDataOffset+f.offset,f.length,r);if(o.etag&&o.etag!==c.etag)throw new Nb(c.etag);return{data:yield this.decompress(c.data,o.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else s=o.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,r){return Xl(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,r)}catch(i){if(i instanceof Nb)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(e,t,n,r);throw i}})}getMetadataAttempt(){return Xl(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength);if(e.etag&&e.etag!==t.etag)throw new Nb(t.etag);const n=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return Xl(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Nb)return this.cache.invalidate(this.source,e.message),yield this.getMetadataAttempt();throw e}})}};class P5t extends bDe{constructor(t){super(Zl.ERROR),this.error=t}}function sl(e){return(t,...n)=>B5t(e,t,n)}function Nx(e,t){return sl(s9e(e,t).get)}const{apply:B5t,getOwnPropertyDescriptor:s9e,getPrototypeOf:uj,ownKeys:z5t}=Reflect,{iterator:wC,toStringTag:U5t}=Symbol,j5t=Object,{create:cj,defineProperty:H5t}=j5t,q5t=Array,G5t=q5t.prototype,a9e=G5t[wC],W5t=sl(a9e),l9e=ArrayBuffer,V5t=l9e.prototype;Nx(V5t,"byteLength");const GSe=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;GSe&&Nx(GSe.prototype,"byteLength");const u9e=uj(Uint8Array);u9e.from;const au=u9e.prototype;au[wC];sl(au.keys);sl(au.values);sl(au.entries);sl(au.set);sl(au.reverse);sl(au.fill);sl(au.copyWithin);sl(au.sort);sl(au.slice);sl(au.subarray);Nx(au,"buffer");Nx(au,"byteOffset");Nx(au,"length");Nx(au,U5t);const Y5t=Uint8Array,c9e=Uint16Array,fj=Uint32Array,X5t=Float32Array,PE=uj([][wC]()),f9e=sl(PE.next),K5t=sl(function*(){}().next),Z5t=uj(PE),Q5t=DataView.prototype,J5t=sl(Q5t.getUint16),dj=WeakMap,d9e=dj.prototype,h9e=sl(d9e.get),eOt=sl(d9e.set),p9e=new dj,tOt=cj(null,{next:{value:function(){const t=h9e(p9e,this);return f9e(t)}},[wC]:{value:function(){return this}}});function nOt(e){if(e[wC]===a9e&&PE.next===f9e)return e;const t=cj(tOt);return eOt(p9e,t,W5t(e)),t}const rOt=new dj,iOt=cj(Z5t,{next:{value:function(){const t=h9e(rOt,this);return K5t(t)},writable:!0,configurable:!0}});for(const e of z5t(PE))e!=="next"&&H5t(iOt,e,s9e(PE,e));const g9e=new l9e(4),oOt=new X5t(g9e),sOt=new fj(g9e),bd=new c9e(512),xd=new Y5t(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(bd[e]=0,bd[e|256]=32768,xd[e]=24,xd[e|256]=24):t<-14?(bd[e]=1024>>-t-14,bd[e|256]=1024>>-t-14|32768,xd[e]=-t-1,xd[e|256]=-t-1):t<=15?(bd[e]=t+15<<10,bd[e|256]=t+15<<10|32768,xd[e]=13,xd[e|256]=13):t<128?(bd[e]=31744,bd[e|256]=64512,xd[e]=24,xd[e|256]=24):(bd[e]=31744,bd[e|256]=64512,xd[e]=13,xd[e|256]=13)}const hj=new fj(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;(t&8388608)===0;)t<<=1,n-=8388608;t&=-8388609,n+=947912704,hj[e]=t|n}for(let e=1024;e<2048;++e)hj[e]=939524096+(e-1024<<13);const Px=new fj(64);for(let e=1;e<31;++e)Px[e]=e<<23;Px[31]=1199570944;Px[32]=2147483648;for(let e=33;e<63;++e)Px[e]=2147483648+(e-32<<23);Px[63]=3347054592;const m9e=new c9e(64);for(let e=1;e<64;++e)e!==32&&(m9e[e]=1024);function aOt(e){const t=e>>10;return sOt[0]=hj[m9e[t]+(e&1023)]+Px[t],oOt[0]}function v9e(e,t,...n){return aOt(J5t(e,t,...nOt(n)))}var dk={exports:{}},WSe;function lOt(){if(WSe)return dk.exports;WSe=1;function e(t,n,r){const i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+n+" in "+t);const o=typeof t=="object"?t.outer:t,s=o.slice(0,o.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const u=a[l],f=n+"\\="+u+"([^"+u+"]*)"+u;i&&console.log("[xml-utils] pattern:",f);const d=new RegExp(f).exec(s);if(i&&console.log("[xml-utils] match:",d),d)return d[1]}}return dk.exports=e,dk.exports.default=e,dk.exports}var uOt=lOt();const nO=Fa(uOt);var hk={exports:{}},pk={exports:{}},gk={exports:{}},VSe;function cOt(){if(VSe)return gk.exports;VSe=1;function e(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index:-1}return gk.exports=e,gk.exports.default=e,gk.exports}var mk={exports:{}},YSe;function fOt(){if(YSe)return mk.exports;YSe=1;function e(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index+o[0].length-1:-1}return mk.exports=e,mk.exports.default=e,mk.exports}var vk={exports:{}},XSe;function dOt(){if(XSe)return vk.exports;XSe=1;function e(t,n){const r=new RegExp(n,"g"),i=t.match(r);return i?i.length:0}return vk.exports=e,vk.exports.default=e,vk.exports}var KSe;function hOt(){if(KSe)return pk.exports;KSe=1;const e=cOt(),t=fOt(),n=dOt();function r(i,o,s){const a=s&&s.debug||!1,l=!(s&&typeof s.nested===!1),u=s&&s.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",o," and ",s);const f=e(i,`<${o}[ 
>/]`,u);if(a&&console.log("[xml-utils] start:",f),f===-1)return;const c=i.slice(f+o.length);let d=t(c,"^[^<]*[ /]>",0);const p=d!==-1&&c[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",p),p===!1)if(l){let y=0,v=1,x=0;for(;(d=t(c,"[ /]"+o+">",y))!==-1;){const _=c.substring(y,d+1);if(v+=n(_,"<"+o+`[ 
	>]`),x+=n(_,"</"+o+">"),x>=v)break;y=d}}else d=t(c,"[ /]"+o+">",0);const h=f+o.length+d+1;if(a&&console.log("[xml-utils] end:",h),h===-1)return;const g=i.slice(f,h);let m;return p?m=null:m=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:m,outer:g,start:f,end:h}}return pk.exports=r,pk.exports.default=r,pk.exports}var ZSe;function pOt(){if(ZSe)return hk.exports;ZSe=1;const e=hOt();function t(n,r,i){const o=[],s=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,u;for(;u=e(n,r,{debug:s,startIndex:l});)a?l=u.start+1+r.length:l=u.end,o.push(u);return s&&console.log("findTagsByName found",o.length,"tags"),o}return hk.exports=t,hk.exports.default=t,hk.exports}var gOt=pOt();const mOt=Fa(gOt),H_={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},_d={};for(const e in H_)H_.hasOwnProperty(e)&&(_d[H_[e]]=parseInt(e,10));const vOt=[_d.BitsPerSample,_d.ExtraSamples,_d.SampleFormat,_d.StripByteCounts,_d.StripOffsets,_d.StripRowCounts,_d.TileByteCounts,_d.TileOffsets,_d.SubIFDs],rO={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ni={};for(const e in rO)rO.hasOwnProperty(e)&&(ni[rO[e]]=parseInt(e,10));const mu={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},yOt={Unspecified:0},QXt={AddCompression:1},JXt={None:0,Deflate:1,Zstandard:2},bOt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function xOt(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=256-e[s]/t*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function wOt(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let o;for(let s=0,a=0;s<e.length;++s,a+=3)o=e[s]/t*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function _Ot(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3),o=t.length/3,s=t.length/3*2;for(let a=0,l=0;a<e.length;++a,l+=3){const u=e[a];i[l]=t[u]/65536*256,i[l+1]=t[u+o]/65536*256,i[l+2]=t[u+s]/65536*256}return i}function EOt(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,o=0;i<e.length;i+=4,o+=3){const s=e[i],a=e[i+1],l=e[i+2],u=e[i+3];r[o]=255*((255-s)/256)*((255-u)/256),r[o+1]=255*((255-a)/256)*((255-u)/256),r[o+2]=255*((255-l)/256)*((255-u)/256)}return r}function AOt(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let i=0,o=0;i<e.length;i+=3,o+=3){const s=e[i],a=e[i+1],l=e[i+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}const COt=.95047,SOt=1,kOt=1.08883;function TOt(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,o=0;i<e.length;i+=3,o+=3){const s=e[i+0],a=e[i+1]<<24>>24,l=e[i+2]<<24>>24;let u=(s+16)/116,f=a/500+u,c=u-l/200,d,p,h;f=COt*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),u=SOt*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=kOt*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=f*3.2406+u*-1.5372+c*-.4986,p=f*-.9689+u*1.8758+c*.0415,h=f*.0557+u*-.204+c*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,r[o]=Math.max(0,Math.min(1,d))*255,r[o+1]=Math.max(0,Math.min(1,p))*255,r[o+2]=Math.max(0,Math.min(1,h))*255}return r}const y9e=new Map;function Qm(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>y9e.set(n,t))}async function b9e(e){const t=y9e.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const n=await t();return new n(e)}Qm([void 0,1],()=>Om(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default));Qm(5,()=>Om(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>e.default));Qm(6,()=>{throw new Error("old style JPEG compression is not supported.")});Qm(7,()=>Om(()=>import("./jpeg-CKYXsxFN.js"),__vite__mapDeps([3,1]),import.meta.url).then(e=>e.default));Qm([8,32946],()=>Om(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(e=>e.default));Qm(32773,()=>Om(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1]),import.meta.url).then(e=>e.default));Qm(34887,()=>Om(()=>import("./lerc-CjeFe3TU.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));Qm(50001,()=>Om(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([20,1]),import.meta.url).then(e=>e.default));function h$(e,t,n,r=1){return new(Object.getPrototypeOf(e)).constructor(t*n*r)}function DOt(e,t,n,r,i){const o=t/r,s=n/i;return e.map(a=>{const l=h$(a,r,i);for(let u=0;u<i;++u){const f=Math.min(Math.round(s*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(o*c),t-1),p=a[f*t+d];l[u*r+c]=p}}return l})}function Jb(e,t,n){return(1-n)*e+n*t}function LOt(e,t,n,r,i){const o=t/r,s=n/i;return e.map(a=>{const l=h$(a,r,i);for(let u=0;u<i;++u){const f=s*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let p=0;p<r;++p){const h=o*p,g=h%1,m=Math.floor(h),y=Math.min(Math.ceil(h),t-1),v=a[c*t+m],x=a[c*t+y],_=a[d*t+m],E=a[d*t+y],C=Jb(Jb(v,x,g),Jb(_,E,g),f%1);l[u*r+p]=C}}return l})}function ROt(e,t,n,r,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return DOt(e,t,n,r,i);case"bilinear":case"linear":return LOt(e,t,n,r,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function FOt(e,t,n,r,i,o){const s=t/r,a=n/i,l=h$(e,r,i,o);for(let u=0;u<i;++u){const f=Math.min(Math.round(a*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(s*c),t-1);for(let p=0;p<o;++p){const h=e[f*t*o+d*o+p];l[u*r*o+c*o+p]=h}}}return l}function $Ot(e,t,n,r,i,o){const s=t/r,a=n/i,l=h$(e,r,i,o);for(let u=0;u<i;++u){const f=a*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let p=0;p<r;++p){const h=s*p,g=h%1,m=Math.floor(h),y=Math.min(Math.ceil(h),t-1);for(let v=0;v<o;++v){const x=e[c*t*o+m*o+v],_=e[c*t*o+y*o+v],E=e[d*t*o+m*o+v],C=e[d*t*o+y*o+v],w=Jb(Jb(x,_,g),Jb(E,C,g),f%1);l[u*r*o+p*o+v]=w}}}return l}function MOt(e,t,n,r,i,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return FOt(e,t,n,r,i,o);case"bilinear":case"linear":return $Ot(e,t,n,r,i,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function OOt(e,t,n){let r=0;for(let i=t;i<n;++i)r+=e[i];return r}function uN(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function IOt(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function NOt(e,t,n,r,i,o,s){const a=new DataView(e),l=n===2?s*o:s*o*r,u=n===2?1:r,f=uN(t,i,l),c=parseInt("1".repeat(i),2);if(t===1){let d;n===1?d=r*i:d=i;let p=o*d;(p&7)!==0&&(p=p+7&-8);for(let h=0;h<s;++h){const g=h*p;for(let m=0;m<o;++m){const y=g+m*u*i;for(let v=0;v<u;++v){const x=y+v*i,_=(h*o+m)*u+v,E=Math.floor(x/8),C=x%8;if(C+i<=8)f[_]=a.getUint8(E)>>8-i-C&c;else if(C+i<=16)f[_]=a.getUint16(E)>>16-i-C&c;else if(C+i<=24){const w=a.getUint16(E)<<8|a.getUint8(E+2);f[_]=w>>24-i-C&c}else f[_]=a.getUint32(E)>>32-i-C&c}}}}return f.buffer}class x9e{constructor(t,n,r,i,o,s){this.fileDirectory=t,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,o){return v9e(this,i,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const r=this.getSampleFormat(t),i=this.getBitsPerSample(t);return uN(r,i,n)}async getTileOrStrip(t,n,r,i,o){const s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*s+t:this.planarConfiguration===2&&(l=r*s*a+n*s+t);let f,c;this.isTiled?(f=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:f,length:c}],o))[0];let p;return u===null||!u[l]?(p=(async()=>{let h=await i.decode(this.fileDirectory,d);const g=this.getSampleFormat(),m=this.getBitsPerSample();return IOt(g,m)&&(h=NOt(h,g,this.planarConfiguration,this.getSamplesPerPixel(),m,this.getTileWidth(),this.getBlockHeight(n))),h})(),u!==null&&(u[l]=p)):p=u[l],{x:t,y:n,sample:r,data:await p}}async _readRaster(t,n,r,i,o,s,a,l,u){const f=this.getTileWidth(),c=this.getTileHeight(),d=this.getWidth(),p=this.getHeight(),h=Math.max(Math.floor(t[0]/f),0),g=Math.min(Math.ceil(t[2]/f),Math.ceil(d/f)),m=Math.max(Math.floor(t[1]/c),0),y=Math.min(Math.ceil(t[3]/c),Math.ceil(p/c)),v=t[2]-t[0];let x=this.getBytesPerPixel();const _=[],E=[];for(let T=0;T<n.length;++T)this.planarConfiguration===1?_.push(OOt(this.fileDirectory.BitsPerSample,0,n[T])/8):_.push(0),E.push(this.getReaderForSample(n[T]));const C=[],{littleEndian:w}=this;for(let T=m;T<y;++T)for(let R=h;R<g;++R){let L;this.planarConfiguration===1&&(L=this.getTileOrStrip(R,T,0,o,u));for(let B=0;B<n.length;++B){const P=B,S=n[B];this.planarConfiguration===2&&(x=this.getSampleByteSize(S),L=this.getTileOrStrip(R,T,S,o,u));const k=L.then(D=>{const O=D.data,N=new DataView(O),j=this.getBlockHeight(D.y),q=D.y*c,W=D.x*f,Q=q+j,ee=(D.x+1)*f,H=E[P],se=Math.min(j,j-(Q-t[3]),p-q),ne=Math.min(f,f-(ee-t[2]),d-W);for(let ge=Math.max(0,t[1]-q);ge<se;++ge)for(let we=Math.max(0,t[0]-W);we<ne;++we){const $e=(ge*f+we)*x,ve=H.call(N,$e+_[P],w);let Ee;i?(Ee=(ge+q-t[1])*v*n.length+(we+W-t[0])*n.length+P,r[Ee]=ve):(Ee=(ge+q-t[1])*v+we+W-t[0],r[P][Ee]=ve)}});C.push(k)}}if(await Promise.all(C),s&&t[2]-t[0]!==s||a&&t[3]-t[1]!==a){let T;return i?T=MOt(r,t[2]-t[0],t[3]-t[1],s,a,n.length,l):T=ROt(r,t[2]-t[0],t[3]-t[1],s,a,l),T.width=s,T.height=a,T}return r.width=s||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:n=[],interleave:r,pool:i=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:u}={}){const f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const c=f[2]-f[0],d=f[3]-f[1],p=c*d,h=this.getSamplesPerPixel();if(!n||!n.length)for(let v=0;v<h;++v)n.push(v);else for(let v=0;v<n.length;++v)if(n[v]>=h)return Promise.reject(new RangeError(`Invalid sample index '${n[v]}'.`));let g;if(r){const v=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,x=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=uN(v,x,p*n.length),l&&g.fill(l)}else{g=[];for(let v=0;v<n.length;++v){const x=this.getArrayForSample(n[v],p);Array.isArray(l)&&v<l.length?x.fill(l[v]):l&&!Array.isArray(l)&&x.fill(l),g.push(x)}}const m=i||await b9e(this.fileDirectory);return await this._readRaster(f,n,g,r,m,o,s,a,u)}async readRGB({window:t,interleave:n=!0,pool:r=null,width:i,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const f=this.fileDirectory.PhotometricInterpretation;if(f===mu.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==yOt.Unspecified&&a){y=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)y.push(v)}return this.readRasters({window:t,interleave:n,samples:y,pool:r,width:i,height:o,resampleMethod:s,signal:l})}let c;switch(f){case mu.WhiteIsZero:case mu.BlackIsZero:case mu.Palette:c=[0];break;case mu.CMYK:c=[0,1,2,3];break;case mu.YCbCr:case mu.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:c,pool:r,width:i,height:o,resampleMethod:s,signal:l},{fileDirectory:p}=this,h=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let m;switch(f){case mu.WhiteIsZero:m=xOt(h,g);break;case mu.BlackIsZero:m=wOt(h,g);break;case mu.Palette:m=_Ot(h,p.ColorMap);break;case mu.CMYK:m=EOt(h);break;case mu.YCbCr:m=AOt(h);break;case mu.CIELab:m=TOt(h);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const y=new Uint8Array(m.length/3),v=new Uint8Array(m.length/3),x=new Uint8Array(m.length/3);for(let _=0,E=0;_<m.length;_+=3,++E)y[E]=m[_],v[E]=m[_+1],x[E]=m[_+2];m=[y,v,x]}return m.width=h.width,m.height=h.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=mOt(r,"Item");t===null?i=i.filter(o=>nO(o,"sample")===void 0):i=i.filter(o=>Number(nO(o,"sample"))===t);for(let o=0;o<i.length;++o){const s=i[o];n[nO(s,"name")]=s.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[i,o,s]=t.getResolution();return[i*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,o,s,a,l,u,f,c]=this.fileDirectory.ModelTransformation,p=[[0,0],[0,n],[r,0],[r,n]].map(([m,y])=>[a+i*m+o*y,c+l*m+u*y]),h=p.map(m=>m[0]),g=p.map(m=>m[1]);return[Math.min(...h),Math.min(...g),Math.max(...h),Math.max(...g)]}else{const i=this.getOrigin(),o=this.getResolution(),s=i[0],a=i[1],l=s+o[0]*r,u=a+o[1]*n;return[Math.min(s,l),Math.min(a,u),Math.max(s,l),Math.max(a,u)]}}}class POt{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const r=this.getUint32(t,n),i=this.getUint32(t+4,n);let o;if(n){if(o=r+2**32*i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,n){let r=0;const i=(this._dataView.getUint8(t+(n?7:0))&128)>0;let o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(t+(n?s:7-s));i&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return i&&(r=-r),r}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return v9e(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class BOt{constructor(t,n,r,i){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),r=this.readUint32(t+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let n=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(i?s!==0&&(s=~(s-1)&255,i=!1):s=~s&255),n+=s*256**o}return r&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const zOt=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class UOt{constructor(t=zOt,n){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{Om(()=>import("./decoder-CaSv2t6h.js"),[],import.meta.url).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?b9e(t).then(r=>r.decode(t,n)):new Promise(r=>{const i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const o=this.messageId++,s=a=>{a.data.id===o&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:t,buffer:n,id:o},[n])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const QSe=`\r
\r
`;function w9e(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[n,r]of e)t[n.toLowerCase()]=r;return t}function jOt(e){const t=e.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return w9e(t)}function HOt(e){const[t,...n]=e.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:t,params:w9e(r)}}function cN(e){let t,n,r;return e&&([,t,n,r]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}function qOt(e,t){let n=null;const r=new TextDecoder("ascii"),i=[],o=`--${t}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(e,a,o.length))===o&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const a=r.decode(new Uint8Array(e,n,Math.min(o.length+1024,e.byteLength-n)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");const l=a.substr(o.length+2);if(l.length===0)break;const u=l.indexOf(QSe),f=jOt(l.substr(0,u)),{start:c,end:d,total:p}=cN(f["content-range"]),h=n+o.length+u+QSe.length,g=parseInt(d,10)+1-parseInt(c,10);i.push({headers:f,data:e.slice(h,h+g),offset:c,length:g,fileSize:p}),n=h+g+4}return i}class pj{async fetch(t,n=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class GOt extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,r]of t)this.onEviction(n,r.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const r=n.get(t);return this._getItemValue(t,r)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield t)}for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:i}):this._set(t,{value:n,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-t;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,o]=r;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,o]=r;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[r,i]of this.entriesAscending())t.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function WOt(e){return new Promise(t=>setTimeout(t,e))}function VOt(e,t){const n=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return n.map((i,o)=>[i,r[o]])}class K1 extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,K1),this.name="AbortError"}}class YOt extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const XOt=YOt;class KOt{constructor(t,n,r=null){this.offset=t,this.length=n,this.data=r}get top(){return this.offset+this.length}}class JSe{constructor(t,n,r){this.offset=t,this.length=n,this.blockIds=r}}class ZOt extends pj{constructor(t,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new GOt({maxSize:r,onEviction:(i,o)=>{this.evictedBlocks.set(i,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const r=[],i=[],o=[];this.evictedBlocks.clear();for(const{offset:d,length:p}of t){let h=d+p;const{fileSize:g}=this;g!==null&&(h=Math.min(h,g));const m=Math.floor(d/this.blockSize)*this.blockSize;for(let y=m;y<h;y+=this.blockSize){const v=Math.floor(y/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),i.push(v)),this.blockRequests.has(v)&&r.push(this.blockRequests.get(v)),o.push(v)}}await WOt(),this.fetchBlocks(n);const s=[];for(const d of i)this.blockRequests.has(d)&&s.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(s);const a=[],l=o.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const d of l){const p=this.blockRequests.get(d);if(!p)throw new Error(`Block ${d} is not in the block requests`);a.push(p)}await Promise.allSettled(a)}if(n&&n.aborted)throw new K1("Request was aborted");const u=o.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),f=u.filter(d=>!d);if(f.length)throw new XOt(f,"Request failed");const c=new Map(VOt(o,u));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,t);for(let i=0;i<n.length;++i){const o=n[i];for(const s of o.blockIds)this.blockRequests.set(s,(async()=>{try{const a=(await r)[i],l=s*this.blockSize,u=l-a.offset,f=Math.min(u+this.blockSize,a.data.byteLength),c=a.data.slice(u,f),d=new KOt(l,c.byteLength,c,s);this.blockCache.set(s,d),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((s,a)=>s-a);if(n.length===0)return[];let r=[],i=null;const o=[];for(const s of n)i===null||i+1===s?(r.push(s),i=s):(o.push(new JSe(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s);return o.push(new JSe(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,n){return t.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const o=Math.floor(r.offset/this.blockSize),s=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=o;u<=s;++u){const f=n.get(u),c=f.offset-r.offset,d=f.top-i;let p=0,h=0,g;c<0?p=-c:c>0&&(h=c),d<0?g=f.length-p:g=i-f.offset-p;const m=new Uint8Array(f.data,p,g);l.set(m,h)}return a})}}class gj{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class mj{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class QOt extends gj{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class JOt extends mj{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new QOt(r)}}class e4t extends gj{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class t4t extends mj{constructRequest(t,n){return new Promise((r,i)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[s,a]of Object.entries(t))o.setRequestHeader(s,a);o.onload=()=>{const s=o.response;r(new e4t(o,s))},o.onerror=i,o.onabort=()=>i(new K1("Request aborted")),o.send(),n&&(n.aborted&&o.abort(),n.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const iO={};class n4t extends gj{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class r4t extends mj{constructor(t){super(t),this.parsedUrl=iO.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",iO)}constructRequest(t,n){return new Promise((r,i)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},s=>{const a=new Promise(l=>{const u=[];s.on("data",f=>{u.push(f)}),s.on("end",()=>{const f=Buffer.concat(u).buffer;l(f)}),s.on("error",i)});r(new n4t(s,a))});o.on("error",i),n&&(n.aborted&&o.destroy(new K1("Request aborted")),n.addEventListener("abort",()=>o.destroy(new K1("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class vj extends pj{constructor(t,n,r,i){super(),this.client=t,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,n))))}async fetchSlices(t,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:o})=>`${i}-${i+o}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:o}=HOt(r.getHeader("content-type"));if(i==="multipart/byteranges"){const c=qOt(await r.getData(),o.boundary);return this._fileSize=c[0].fileSize||null,c}const s=await r.getData(),{start:a,end:l,total:u}=cN(r.getHeader("content-range"));this._fileSize=u||null;const f=[{data:s,offset:a,length:l-a}];if(t.length>1){const c=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,n)));return f.concat(c)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:r,length:i}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(o.ok)if(o.status===206){const s=await o.getData(),{total:a}=cN(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function yj(e,{blockSize:t,cacheSize:n}){return t===null?e:new ZOt(e,{blockSize:t,cacheSize:n})}function i4t(e,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...o}={}){const s=new JOt(e,n),a=new vj(s,t,r,i);return yj(a,o)}function o4t(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new t4t(e),s=new vj(o,t,n,r);return yj(s,i)}function s4t(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const o=new r4t(e),s=new vj(o,t,n,r);return yj(s,i)}function fN(e,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?i4t(e,n):typeof XMLHttpRequest<"u"?o4t(e,n):s4t(e,n)}class a4t extends pj{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise((r,i)=>{const o=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=a=>r(a.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(o),n&&n.addEventListener("abort",()=>s.abort())})}}function l4t(e){return new a4t(e)}function dN(e){switch(e){case ni.BYTE:case ni.ASCII:case ni.SBYTE:case ni.UNDEFINED:return 1;case ni.SHORT:case ni.SSHORT:return 2;case ni.LONG:case ni.SLONG:case ni.FLOAT:case ni.IFD:return 4;case ni.RATIONAL:case ni.SRATIONAL:case ni.DOUBLE:case ni.LONG8:case ni.SLONG8:case ni.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function u4t(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=t[3]*4;r+=4){const i=bOt[t[r]],o=t[r+1]?H_[t[r+1]]:null,s=t[r+2],a=t[r+3];let l=null;if(!o)l=a;else{if(l=e[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}n[i]=l}return n}function db(e,t,n,r){let i=null,o=null;const s=dN(t);switch(t){case ni.BYTE:case ni.ASCII:case ni.UNDEFINED:i=new Uint8Array(n),o=e.readUint8;break;case ni.SBYTE:i=new Int8Array(n),o=e.readInt8;break;case ni.SHORT:i=new Uint16Array(n),o=e.readUint16;break;case ni.SSHORT:i=new Int16Array(n),o=e.readInt16;break;case ni.LONG:case ni.IFD:i=new Uint32Array(n),o=e.readUint32;break;case ni.SLONG:i=new Int32Array(n),o=e.readInt32;break;case ni.LONG8:case ni.IFD8:i=new Array(n),o=e.readUint64;break;case ni.SLONG8:i=new Array(n),o=e.readInt64;break;case ni.RATIONAL:i=new Uint32Array(n*2),o=e.readUint32;break;case ni.SRATIONAL:i=new Int32Array(n*2),o=e.readInt32;break;case ni.FLOAT:i=new Float32Array(n),o=e.readFloat32;break;case ni.DOUBLE:i=new Float64Array(n),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===ni.RATIONAL||t===ni.SRATIONAL)for(let a=0;a<n;a+=2)i[a]=o.call(e,r+a*s),i[a+1]=o.call(e,r+(a*s+4));else for(let a=0;a<n;++a)i[a]=o.call(e,r+a*s);return t===ni.ASCII?new TextDecoder("utf-8").decode(i):i}class c4t{constructor(t,n,r){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class yk extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class _9e{async readRasters(t={}){const{window:n,width:r,height:i}=t;let{resX:o,resY:s,bbox:a}=t;const l=await this.getImage();let u=l;const f=await this.getImageCount(),c=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[h,g]=l.getOrigin(),[m,y]=l.getResolution();a=[h+n[0]*m,g+n[1]*y,h+n[2]*m,g+n[3]*y]}const p=a||c;if(r){if(o)throw new Error("Both width and resX passed");o=(p[2]-p[0])/r}if(i){if(s)throw new Error("Both width and resY passed");s=(p[3]-p[1])/i}}if(o||s){const p=[];for(let h=0;h<f;++h){const g=await this.getImage(h),{SubfileType:m,NewSubfileType:y}=g.fileDirectory;(h===0||m===2||y&1)&&p.push(g)}p.sort((h,g)=>h.getWidth()-g.getWidth());for(let h=0;h<p.length;++h){const g=p[h],m=(c[2]-c[0])/g.getWidth(),y=(c[3]-c[1])/g.getHeight();if(u=g,o&&o>m||s&&s>y)break}}let d=n;if(a){const[p,h]=l.getOrigin(),[g,m]=u.getResolution(l);d=[Math.round((a[0]-p)/g),Math.round((a[1]-h)/m),Math.round((a[2]-p)/g),Math.round((a[3]-h)/m)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...t,window:d})}}class Z1 extends _9e{constructor(t,n,r,i,o={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const r=this.bigTiff?4048:1024;return new BOt((await this.source.fetch([{offset:t,length:typeof n<"u"?n:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(t);const o=this.bigTiff?i.readUint64(t):i.readUint16(t),s=o*n+(this.bigTiff?16:6);i.covers(t,s)||(i=await this.getSlice(t,s));const a={};let l=t+(this.bigTiff?8:2);for(let c=0;c<o;l+=n,++c){const d=i.readUint16(l),p=i.readUint16(l+2),h=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let g,m;const y=dN(p),v=l+(this.bigTiff?12:8);if(y*h<=(this.bigTiff?8:4))g=db(i,p,h,v);else{const x=i.readOffset(v),_=dN(p)*h;if(i.covers(x,_))g=db(i,p,h,x);else{const E=await this.getSlice(x,_);g=db(E,p,h,x)}}h===1&&vOt.indexOf(d)===-1&&!(p===ni.RATIONAL||p===ni.SRATIONAL)?m=g[0]:m=g,a[H_[d]]=m}const u=u4t(a),f=i.readOffset(t+r+n*o);return new c4t(a,u,f)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof yk?new yk(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new yk(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new x9e(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof yk)n=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(t,r);if(n===db(i,ni.ASCII,n.length,t)){const s=db(i,ni.ASCII,r,t).split(`
`)[0],a=Number(s.split("=")[1].split(" ")[0])+s.length;a>r&&(i=await this.getSlice(t,a));const l=db(i,ni.ASCII,a,t);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,f])=>{this.ghostValues[u]=f})}return this.ghostValues}static async fromSource(t,n,r){const i=(await t.fetch([{offset:0,length:1024}],r))[0],o=new POt(i),s=o.getUint16(0,0);let a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=o.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const f=u?o.getUint64(8,a):o.getUint32(4,a);return new Z1(t,a,u,f,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class f4t extends _9e{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const o=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(t===n){const a=await o.requestIFD(r);return new x9e(a.fileDirectory,a.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function d4t(e,t={},n){return Z1.fromSource(fN(e,t),n)}async function h4t(e,t){return Z1.fromSource(l4t(e),t)}async function p4t(e,t=[],n={},r){const i=await Z1.fromSource(fN(e,n),r),o=await Promise.all(t.map(s=>Z1.fromSource(fN(s,n))));return new f4t(i,o)}const g4t=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,m4t=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class v4t{constructor(t){this.gl_=t,this.program_=hN(t,m4t,g4t),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,n,r,i,o,s,a,l,u,f,c,d,p){const h=this.gl_;l===void 0&&(l=i),u===void 0&&(u=o),s===void 0&&(s=n),a===void 0&&(a=r),f===void 0&&(f=s),c===void 0&&(c=a),d===void 0&&(d=h.canvas.width),p===void 0&&(p=h.canvas.height),h.bindTexture(h.TEXTURE_2D,t),h.useProgram(this.program_),h.bindBuffer(h.ARRAY_BUFFER,this.positionBuffer),h.enableVertexAttribArray(this.positionLocation),h.vertexAttribPointer(this.positionLocation,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,this.texcoordBuffer),h.enableVertexAttribArray(this.texcoordLocation),h.vertexAttribPointer(this.texcoordLocation,2,h.FLOAT,!1,0,0);let g=iN(0,d,0,p,-1,1);g=J$t(g,l,u,0),g=FSe(g,f,c,1),h.uniformMatrix4fv(this.matrixLocation,!1,g);let m=eMt(i/n,o/r,0);m=FSe(m,s/n,a/r,1),h.uniformMatrix4fv(this.textureMatrixLocation,!1,m),h.uniform1i(this.textureLocation,0),h.drawArrays(h.TRIANGLES,0,this.positions.length/2)}}function eke(e,t,n){const r=e.createShader(t);if(r===null)throw new Error("Shader compilation failed");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const i=e.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function hN(e,t,n){const r=e.createProgram(),i=eke(e,e.VERTEX_SHADER,n),o=eke(e,e.FRAGMENT_SHADER,t);if(r===null)throw new Error("Program creation failed");if(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw e.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const y4t=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,b4t=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,x4t=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,w4t=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function _4t(e,t,n,r){let i;return n&&n.length?i=n.shift():WGe?i=new OffscreenCanvas(e||300,t||300):i=document.createElement("canvas"),e&&(i.width=e),t&&(i.height=t),i.getContext("webgl",r)}function E4t(e){const t=e.canvas;t.width=1,t.height=1,e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}const tke=[];function A4t(e,t,n,r,i,o,s,a,l,u,f,c,d,p){const h=Math.round(r*t),g=Math.round(r*n);e.canvas.width=h,e.canvas.height=g;let m,y;if(y=e.createTexture(),e.bindTexture(e.TEXTURE_2D,y),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,h,g,0,e.RGBA,f,null),m=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,m),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,y,0),m===null)throw new Error("Could not create framebuffer");if(y===null)throw new Error("Could not create texture");if(l.length===0)return{width:h,height:g,framebuffer:m,texture:y};const v=fA();l.forEach(function(L,B,P){VGe(v,L.extent)});let x,_,E;const C=1/i;{if(x=e.createTexture(),y===null)throw new Error("Could not create texture");_=Math.round(Za(v)*C),E=Math.round($f(v)*C);const L=e.getParameter(e.MAX_TEXTURE_SIZE),B=Math.max(_,E),P=B>L?L/B:1,S=Math.round(_*P),k=Math.round(E*P);e.bindTexture(e.TEXTURE_2D,x),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,S,k,0,e.RGBA,f,null);const D=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,D),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,x,0);const O=new v4t(e);l.forEach(function(N,j,q){const W=(N.extent[0]-v[0])*C*P,Q=-(N.extent[3]-v[3])*C*P,ee=Za(N.extent)*C*P,H=$f(N.extent)*C*P;if(e.bindFramebuffer(e.FRAMEBUFFER,D),e.viewport(0,0,S,k),N.clipExtent){const se=(N.clipExtent[0]-v[0])*C*P,ne=-(N.clipExtent[3]-v[3])*C*P,ge=Za(N.clipExtent)*C*P,we=$f(N.clipExtent)*C*P;e.enable(e.SCISSOR_TEST),e.scissor(d?se:Math.round(se),d?ne:Math.round(ne),d?ge:Math.round(se+ge)-Math.round(se),d?we:Math.round(ne+we)-Math.round(ne))}O.drawImage(N.texture,N.width,N.height,u,u,N.width-2*u,N.height-2*u,d?W:Math.round(W),d?Q:Math.round(Q),d?ee:Math.round(W+ee)-Math.round(W),d?H:Math.round(Q+H)-Math.round(Q),S,k),e.disable(e.SCISSOR_TEST)}),e.deleteFramebuffer(D)}const w=lI(s),T=lI(v),R=L=>{const B=(L[0][0]-w[0])/o*r,P=-(L[0][1]-w[1])/o*r,S=(L[1][0]-w[0])/o*r,k=-(L[1][1]-w[1])/o*r,D=(L[2][0]-w[0])/o*r,O=-(L[2][1]-w[1])/o*r;return{u1:S,v1:k,u0:B,v0:P,u2:D,v2:O}};e.bindFramebuffer(e.FRAMEBUFFER,m),e.viewport(0,0,h,g);{const L=[],B=[],P=hN(e,w4t,x4t);e.useProgram(P);const S=e.getUniformLocation(P,"u_texture");e.bindTexture(e.TEXTURE_2D,x),e.uniform1i(S,0),a.getTriangles().forEach(function(W,Q,ee){const H=W.source,se=W.target,{u1:ne,v1:ge,u0:we,v0:$e,u2:ve,v2:Ee}=R(se),Ve=(H[0][0]-T[0])/i/_,Ue=-(H[0][1]-T[1])/i/E,ft=(H[1][0]-T[0])/i/_,ht=-(H[1][1]-T[1])/i/E,zt=(H[2][0]-T[0])/i/_,$t=-(H[2][1]-T[1])/i/E;L.push(ne,ge,we,$e,ve,Ee),B.push(ft,ht,Ve,Ue,zt,$t)});const k=iN(0,h,g,0,-1,1),D=e.getUniformLocation(P,"u_matrix");e.uniformMatrix4fv(D,!1,k);const O=e.getAttribLocation(P,"a_position"),N=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,N),e.bufferData(e.ARRAY_BUFFER,new Float32Array(L),e.STATIC_DRAW),e.vertexAttribPointer(O,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(O);const j=e.getAttribLocation(P,"a_texcoord"),q=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,q),e.bufferData(e.ARRAY_BUFFER,new Float32Array(B),e.STATIC_DRAW),e.vertexAttribPointer(j,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(j),e.drawArrays(e.TRIANGLES,0,L.length/2)}if(c){const L=hN(e,b4t,y4t);e.useProgram(L);const B=iN(0,h,g,0,-1,1),P=e.getUniformLocation(L,"u_matrix");e.uniformMatrix4fv(P,!1,B);const S=Array.isArray(c)?c:[0,0,0,255],k=e.getUniformLocation(L,"u_val");e.uniform4fv(k,S);const D=e.getAttribLocation(L,"a_position"),O=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,O),e.vertexAttribPointer(D,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(D);const N=a.getTriangles().reduce(function(j,q){const W=q.target,{u1:Q,v1:ee,u0:H,v0:se,u2:ne,v2:ge}=R(W);return j.concat([Q,ee,H,se,H,se,ne,ge,ne,ge,Q,ee])},[]);e.bufferData(e.ARRAY_BUFFER,new Float32Array(N),e.STATIC_DRAW),e.drawArrays(e.LINES,0,N.length/2)}return{width:h,height:g,framebuffer:m,texture:y}}class C4t extends WN{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=t.renderEdges!==void 0?t.renderEdges:!1,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const n=t.sourceProj,r=n.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=n.canWrapX()?i?Od(r,i):r:i;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=s?Od(o,s):o;if(kxe(l)===0){this.state=oi.EMPTY;return}r&&(a?a=Od(a,r):a=r);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=t.targetProj,c=YGe(n,f,l,u);if(!isFinite(c)||c<=0){this.state=oi.EMPTY;return}const d=t.errorThreshold!==void 0?t.errorThreshold:XGe;if(this.triangulation_=new KGe(n,f,l,a,c*d,u,t.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oi.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let p=this.triangulation_.calculateSourceExtent();if(a&&(n.canWrapX()?(p[1]=us(p[1],a[1],a[3]),p[3]=us(p[3],a[1],a[3])):p=Od(p,a)),!kxe(p))this.state=oi.EMPTY;else{let h=0,g=0;n.canWrapX()&&(h=Za(r),g=Math.floor((p[0]-r[0])/h)),ZGe(p.slice(),n,!0).forEach(y=>{const v=this.sourceTileGrid_.getTileRangeForExtentAndZ(y,this.sourceZ_),x=t.getTileFunction;for(let _=v.minX;_<=v.maxX;_++)for(let E=v.minY;E<=v.maxY;E++){const C=x(this.sourceZ_,_,E,this.pixelRatio_);if(C){const w=g*h;this.sourceTiles_.push({tile:C,offset:w})}}++g}),this.sourceTiles_.length===0&&(this.state=oi.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let n=!1;if(this.sourceTiles_.forEach(_=>{var Q;const E=_.tile;if(!E||E.getState()!==oi.LOADED)return;const C=E.getSize(),w=this.gutter_;let T;const R=iI(E.getData());R?T=R:(n=!0,T=QGe(oI(E.getData())));const L=[C[0]+2*w,C[1]+2*w],B=T instanceof Float32Array,P=L[0]*L[1],S=B?Float32Array:Uint8ClampedArray,k=new S(T.buffer),D=S.BYTES_PER_ELEMENT,O=D*k.length/P,N=k.byteLength/L[1],j=Math.floor(N/D/L[0]),q=this.sourceTileGrid_.getTileCoordExtent(E.tileCoord);q[0]+=_.offset,q[2]+=_.offset;const W=(Q=this.clipExtent_)==null?void 0:Q.slice();W&&(W[0]+=_.offset,W[2]+=_.offset),t.push({extent:q,clipExtent:W,data:k,dataType:S,bytesPerPixel:O,pixelSize:L,bandCount:j})}),this.sourceTiles_.length=0,t.length===0){this.state=oi.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=o*this.pixelRatio_,l=s*this.pixelRatio_,u=this.targetTileGrid_.getResolution(r),f=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=t[0].bandCount,p=new t[0].dataType(d*a*l),h=_4t(a,l,tke,{premultipliedAlpha:!1,antialias:!1});let g;const m=h.RGBA;let y;t[0].dataType==Float32Array?(y=h.FLOAT,h.getExtension("WEBGL_color_buffer_float"),h.getExtension("OES_texture_float"),h.getExtension("EXT_float_blend"),g=h.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(y=h.UNSIGNED_BYTE,g=this.interpolate);const v=4,x=Math.ceil(d/v);for(let _=x-1;_>=0;--_){const E=[];for(let S=0,k=t.length;S<k;++S){const D=t[S],O=D.pixelSize,N=O[0],j=O[1],q=new D.dataType(v*N*j),W=D.data;let Q=_*v;for(let H=0,se=q.length;H<se;H+=v)q[H]=W[Q],q[H+1]=W[Q+1],q[H+2]=W[Q+2],q[H+3]=W[Q+3],Q+=d;const ee=h.createTexture();h.bindTexture(h.TEXTURE_2D,ee),g?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST)),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texImage2D(h.TEXTURE_2D,0,m,N,j,0,m,y,q),E.push({extent:D.extent,clipExtent:D.clipExtent,texture:ee,width:N,height:j})}const{framebuffer:C,width:w,height:T}=A4t(h,o,s,this.pixelRatio_,f,u,c,this.triangulation_,E,this.gutter_,y,this.renderEdges_,g),R=w,L=T*v,B=new t[0].dataType(R*L);h.bindFramebuffer(h.FRAMEBUFFER,C),h.readPixels(0,0,w,T,h.RGBA,y,B);let P=_*v;for(let S=0,k=B.length;S<k;S+=v){const D=(R-1-(S/L|0))*L+S%L;p[P]=B[D],p[P+1]=B[D+1],p[P+2]=B[D+2],p[P+3]=B[D+3],P+=d}}if(E4t(h),tke.push(h.canvas),n){const _=hm(o,s),E=new ImageData(p,o);_.putImageData(E,0,0),this.reprojData_=_.canvas}else this.reprojData_=p;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=oi.LOADED,this.changed()}load(){if(this.state!==oi.IDLE&&this.state!==oi.ERROR)return;this.state=oi.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r!==oi.IDLE&&r!==oi.LOADING)return;t++;const i=op(n,Zl.CHANGE,()=>{const o=n.getState();(o==oi.LOADED||o==oi.ERROR||o==oi.EMPTY)&&(P3(i),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n}){n.getState()==oi.IDLE&&n.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(P3),this.sourcesListenerKeys_=null}}class _C extends KN{constructor(t){const n=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&n&&(r=dA({extent:hA(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?Ff(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?Ff(n.getTileSize(t)):[256,256]}getGutterForProjection(t){const n=this.getProjection();return(!n||$k(n,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,n,r,i,o){const s=this.tileGrid||this.getTileGridForProjection(o||i),a=Math.max.apply(null,s.getResolutions().map((p,h)=>{const g=Ff(s.getTileSize(h)),m=this.getTileSize(h);return Math.max(m[0]/g[0],m[1]/g[1])})),l=this.getTileGridForProjection(i),u=[t,n,r],f=this.getTileCoordForTileUrlFunction(u,i),c=Object.assign({sourceProj:o||i,sourceTileGrid:s,targetProj:i,targetTileGrid:l,tileCoord:u,wrappedTileCoord:f,pixelRatio:a,gutter:this.gutter_,getTileFunction:(p,h,g,m)=>this.getTile(p,h,g,m),transformMatrix:this.transformMatrix},this.tileOptions),d=new C4t(c);return d.key=this.getKey(),d}getTile(t,n,r,i,o){var x;const s=this.getProjection();if(o&&(s&&!$k(s,o)||this.transformMatrix))return this.getReprojTile_(t,n,r,o,s);const a=this.getTileSize(t),l=this.loader_,u=new AbortController,f={signal:u.signal,crossOrigin:this.crossOrigin_},c=this.getTileCoordForTileUrlFunction([t,n,r]);if(!c)return null;const d=c[0],p=c[1],h=c[2],g=(x=this.getTileGrid())==null?void 0:x.getFullTileRange(d);g&&(f.maxY=g.getHeight()-1);function m(){return tWe(function(){return l(d,p,h,f)})}const y=Object.assign({tileCoord:[t,n,r],loader:m,size:a,controller:u},this.tileOptions),v=new WN(y);return v.key=this.getKey(),v.addEventListener(Zl.CHANGE,this.handleTileChange_),v}handleTileChange_(t){const n=t.target,r=oo(n),i=n.getState();let o;i==oi.LOADING?(this.tileLoadingKeys_[r]=!0,o=N$.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==oi.ERROR?N$.TILELOADERROR:i==oi.LOADED?N$.TILELOADEND:void 0),o&&this.dispatchEvent(new JGe(o,n))}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||$k(n,t))&&!this.transformMatrix)return this.tileGrid;const r=oo(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=eWe(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,n){const r=Qi(t);if(r){const i=oo(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}}function S4t(e){return((e.fileDirectory.NewSubfileType||0)&4)===4}function k4t(e,t){if(!e)return!1;if(e===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const n=t.fileDirectory.PhotometricInterpretation,r=mu;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const nke="STATISTICS_MAXIMUM",rke="STATISTICS_MINIMUM",oO=256;let sO;function T4t(){return sO||(sO=new UOt),sO}function D4t(e){try{return e.getBoundingBox(!0)}catch{return[0,0,e.getWidth(),e.getHeight()]}}function L4t(e){try{return e.getOrigin().slice(0,2)}catch{return[0,e.getHeight()]}}function R4t(e,t){try{return e.getResolution(t)}catch{return[t.getWidth()/e.getWidth(),t.getHeight()/e.getHeight()]}}function F4t(e){const t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+t.ProjectedCSTypeGeoKey;let r=Qi(n);if(!r){const i=Txe(t.ProjLinearUnitsGeoKey);i&&(r=new Dxe({code:n,units:i}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const n="EPSG:"+t.GeographicTypeGeoKey;let r=Qi(n);if(!r){const i=Txe(t.GeogAngularUnitsGeoKey);i&&(r=new Dxe({code:n,units:i}))}return r}return null}function $4t(e){return e.getImageCount().then(function(t){const n=new Array(t);for(let r=0;r<t;++r)n[r]=e.getImage(r);return Promise.all(n)})}function M4t(e,t){let n;return e.blob?n=h4t(e.blob):e.overviews?n=p4t(e.url,e.overviews,t):n=d4t(e.url,t),n.then($4t)}function h_(e,t,n,r,i){if(Array.isArray(e)){const o=e.length;if(!Array.isArray(t)||o!=t.length){const s=new Error(r);throw i(s),s}for(let s=0;s<o;++s)h_(e[s],t[s],n,r,i);return}if(t=t,Math.abs(e-t)>n*e)throw new Error(r)}function O4t(e){return e instanceof Int8Array?-128:e instanceof Int16Array?-32768:e instanceof Int32Array?-2147483648:e instanceof Float32Array?12e-39:0}function I4t(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}class bj extends _C{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const n=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));const r=this,i=new Array(n);for(let o=0;o<n;++o)i[o]=M4t(this.sourceInfo_[o],this.sourceOptions_);Promise.all(i).then(function(o){r.configure_(o)}).catch(function(o){tE(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const i=n[r],o=F4t(i);if(o){this.projection=o;break}}}determineTransformMatrix(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const o=n[r].fileDirectory.ModelTransformation;if(o){const[s,a,l,u,f,c,d,p]=o,h=Z_(Z_([1/Math.sqrt(s*s+f*f),0,0,-1/Math.sqrt(a*a+c*c),u,p],[s,f,a,c,0,0]),[1,0,0,1,-u,-p]);this.transformMatrix=h,this.addAlpha_=!0;break}}}configure_(t){let n,r,i,o,s;const a=new Array(t.length),l=new Array(t.length),u=new Array(t.length);let f=0;const c=t.length;for(let m=0;m<c;++m){const y=[],v=[];t[m].forEach(R=>{S4t(R)?v.push(R):y.push(R)});const x=y.length;if(v.length>0&&v.length!==x)throw new Error(`Expected one mask per image found ${v.length} masks and ${x} images`);let _,E;const C=new Array(x),w=new Array(x),T=new Array(x);l[m]=new Array(x),u[m]=new Array(x);for(let R=0;R<x;++R){const L=y[R],B=L.getGDALNoData();u[m][R]=L.getGDALMetadata(0),l[m][R]=B;const P=this.sourceInfo_[m].bands;a[m]=P?P.length:L.getSamplesPerPixel();const S=x-(R+1);_||(_=D4t(L)),E||(E=L4t(L));const k=R4t(L,y[0]);T[S]=k[0];const D=[L.getTileWidth(),L.getTileHeight()];D[0]!==D[1]&&D[1]<oO&&(D[0]=oO,D[1]=oO),C[S]=D;const O=k[0]/Math.abs(k[1]);w[S]=[D[0],D[1]/O]}if(n?Od(n,_,n):n=_,!r)r=E;else{const R=`Origin mismatch for source ${m}, got [${E}] but expected [${r}]`;h_(r,E,0,R,this.viewRejector)}if(!s)s=T,this.resolutionFactors_[m]=1;else{s.length-f>T.length&&(f=s.length-T.length);const R=s[s.length-1]/T[T.length-1];this.resolutionFactors_[m]=R;const L=T.map(P=>P*=R),B=`Resolution mismatch for source ${m}, got [${L}] but expected [${s}]`;h_(s.slice(f,s.length),L,.02,B,this.viewRejector)}i?h_(i.slice(f,i.length),w,.01,`Tile size mismatch for source ${m}`,this.viewRejector):i=w,o?h_(o.slice(f,o.length),C,0,`Tile size mismatch for source ${m}`,this.viewRejector):o=C,this.sourceImagery_[m]=y.reverse(),this.sourceMasks_[m]=v.reverse()}for(let m=0,y=this.sourceImagery_.length;m<y;++m){const v=this.sourceImagery_[m];for(;v.length<s.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let m=0;m<c;++m){if(this.sourceInfo_[m].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[m].length){this.addAlpha_=!0;break}const y=l[m],v=this.sourceInfo_[m].bands;if(v){for(let x=0;x<v.length;++x)if(y[v[x]-1]!==null){this.addAlpha_=!0;break e}continue}for(let x=0;x<y.length;++x)if(y[x]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let m=0;m<c;++m)d+=a[m];this.bandCount=d;const p=new UL({extent:n,minZoom:f,origin:r,resolutions:s,tileSizes:i});this.tileGrid=p,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const h=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let g=n;if(this.transformMatrix){const m=eE(Wa(),this.transformMatrix.slice()),y=nWe(v=>Ap(m,v));g=c1(n,y)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:iWe(nm(g),this.projection),extent:rWe(g,this.projection),zoom:h})}loadTile_(t,n,r,i){const o=this.getTileSize(t),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,u=this.sourceInfo_,f=T4t();for(let c=0;c<s;++c){const d=u[c],p=this.resolutionFactors_[c],h=[Math.round(n*(o[0]*p)),Math.round(r*(o[1]*p)),Math.round((n+1)*(o[0]*p)),Math.round((r+1)*(o[1]*p))],g=this.sourceImagery_[c][t];let m;d.bands&&(m=d.bands.map(function(E){return E-1}));let y;"nodata"in d&&d.nodata!==null?y=d.nodata:m?y=m.map(function(E){return l[c][E]}):y=l[c];const v={window:h,width:o[0],height:o[1],samples:m,fillValue:y,pool:f,interleave:!1,signal:i.signal};k4t(this.convertToRGB_,g)?a[c]=g.readRGB(v):a[c]=g.readRasters(v);const x=s+c,_=this.sourceMasks_[c][t];if(!_){a[x]=Promise.resolve(null);continue}a[x]=_.readRasters({window:h,width:o[0],height:o[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,o)).catch(function(c){throw tE(c),c})}composeTile_(t,n){const r=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,s=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,f=this.addAlpha_,c=t[0]*t[1],d=c*s;let p;u?p=new Uint8Array(d):p=new Float32Array(d);let h=0;for(let g=0;g<c;++g){let m=f;for(let y=0;y<o;++y){const v=i[y];let x=v.min,_=v.max,E,C;if(u){const w=r[y][0];x===void 0&&(w&&rke in w?x=parseFloat(w[rke]):x=O4t(n[y][0])),_===void 0&&(w&&nke in w?_=parseFloat(w[nke]):_=I4t(n[y][0])),E=255/(_-x),C=-x*E}for(let w=0;w<a[y];++w){const T=n[y][w][g];let R;if(u?R=us(E*T+C,0,255):R=T,!f)p[h]=R;else{let L=v.nodata;if(L===void 0){let P;v.bands?P=v.bands[w]-1:P=w,L=l[y][P]}const B=isNaN(L);(!B&&T!==L||B&&!isNaN(T))&&(m=!1,p[h]=R)}h++}if(!m){const w=o+y,T=n[w];T&&!T[0][g]&&(m=!0)}}f&&(m||(p[h]=255),h++)}return p}}bj.prototype.getView;class Yo{constructor(t){this.name=t}toString(){return this.name}}Yo.GeoTIFF=new Yo("GeoTIFF");Yo.ImageStatic=new Yo("ImageStatic");Yo.PMTilesRaster=new Yo("PMTilesRaster");Yo.PMTilesVector=new Yo("PMTilesVector");Yo.TileJSON=new Yo("TileJSON");Yo.TileWMS=new Yo("TileWMS");Yo.WMTS=new Yo("WMTS");Yo.XYZ=new Yo("XYZ");function N4t(e){const t=e.load||sx,n=e.imageExtent,r=e.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,t(i,e.url).then(o=>{const s=Za(n)/o.width,a=$f(n)/o.height;return{image:o,extent:n,resolution:s!==a?[s,a]:a,pixelRatio:1}})}}class E9e extends ey{constructor(t){const n=t.crossOrigin!==void 0?t.crossOrigin:null,r=t.imageLoadFunction!==void 0?t.imageLoadFunction:ZN;super({attributions:t.attributions,interpolate:t.interpolate,projection:Qi(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new vDe(this.imageExtent_,void 0,1,N4t({url:t.url,imageExtent:t.imageExtent,crossOrigin:n,load:(i,o)=>(this.image.setImage(i),r(this.image,o),sx(i))})),this.image.addEventListener(Zl.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,n,r,i){return u1(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}function xj(e,t,n,r){const i=document.createElement("script"),o="olc_"+oo(t);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),n&&n()},1e4);window[o]=function(l){clearTimeout(a),s(),t(l)},document.head.appendChild(i)}class P4t extends Error{constructor(t){const n="Unexpected response status: "+t.status;super(n),this.name="ResponseError",this.response=t}}class B4t extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function A9e(e){return new Promise(function(t,n){function r(s){const a=s.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const f="Error parsing response text as JSON: "+u.message;n(new Error(f));return}t(l);return}n(new P4t(a))}function i(s){n(new B4t(s.target))}const o=new XMLHttpRequest;o.addEventListener("load",r),o.addEventListener("error",i),o.open("GET",e),o.setRequestHeader("Accept","application/json"),o.send()})}function C9e(e,t){return t.includes("://")?t:new URL(t,e).href}class S9e extends Pp{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:Qi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)xj(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const n=Qi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const u=QN(n,r);i=c1(t.bounds,u)}const o=hA(r),s=t.minzoom||0,a=t.maxzoom||22,l=dA({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=xDe(t.tiles,l),t.attribution&&!this.getAttributions()){const u=i!==void 0?i:o;this.setAttributions(function(f){return u1(u,f.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var v3={exports:{}},z4t=v3.exports,ike;function U4t(){return ike||(ike=1,function(e,t){(function(n,r){e.exports=r()})(z4t,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(c,d){return c.indexOf(d)===-1?c.length:c.indexOf(d)}function i(c){var d=c.replace(/^v/,"").replace(/\+.*$/,""),p=r(d,"-"),h=d.substring(0,p).split(".");return h.push(d.substring(p+1)),h}function o(c){return isNaN(Number(c))?c:Number(c)}function s(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function a(c,d){[c,d].forEach(s);for(var p=i(c),h=i(d),g=0;g<Math.max(p.length-1,h.length-1);g++){var m=parseInt(p[g]||0,10),y=parseInt(h[g]||0,10);if(m>y)return 1;if(y>m)return-1}var v=p[p.length-1],x=h[h.length-1];if(v&&x){var _=v.split(".").map(o),E=x.split(".").map(o);for(g=0;g<Math.max(_.length,E.length);g++){if(_[g]===void 0||typeof E[g]=="string"&&typeof _[g]=="number")return-1;if(E[g]===void 0||typeof _[g]=="string"&&typeof E[g]=="number"||_[g]>E[g])return 1;if(E[g]>_[g])return-1}}else if(v||x)return v?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function f(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(l.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(c){return typeof c=="string"&&n.test(c)},a.compare=function(c,d,p){f(p);var h=a(c,d);return u[p].indexOf(h)>-1},a})}(v3)),v3.exports}var aO,oke;function j4t(){if(oke)return aO;oke=1;var e=U4t();const t="1.1.0",n=!0,r={classification:"https://stac-extensions.github.io/classification/v2.0.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.2.0/schema.json",eo:"https://stac-extensions.github.io/eo/v2.0.0/schema.json",file:"https://stac-extensions.github.io/file/v2.1.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.2.0/schema.json",projection:"https://stac-extensions.github.io/projection/v2.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v2.0.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.1.0/schema.json",version:"https://stac-extensions.github.io/version/v1.2.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},i={itemAndCollection:{"classification:":r.classification,"cube:":r.datacube,"eo:":r.eo,"file:":r.file,"label:":r.label,"pc:":r.pointcloud,"processing:":r.processing,"proj:":r.projection,"raster:":r.raster,"sar:":r.sar,"sat:":r.sat,"sci:":r.scientific,"view:":r.view,version:r.version,deprecated:r.version,published:r.timestamps,expires:r.timestamps,unpublished:r.timestamps},catalog:{},collection:{},item:{}};i.collection=Object.assign(i.collection,i.itemAndCollection),i.item=Object.assign(i.item,i.itemAndCollection);var o={parseExtension(v){let x=v.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(x)return{id:x[1],version:x[2]};let _=v.match(/(\d+\.\d+(\.\d+)([a-z_.-][\w.-]+)?)/i);if(_)return{id:v,version:_[1]};if(v in r)return{id:v,version:"0.0.0"}}},s={version:t,extensions:{},set(v){if(typeof v.stac_version!="string"?s.version="0.6.0":s.version=v.stac_version,Array.isArray(v.stac_extensions))for(let x of v.stac_extensions){let _=o.parseExtension(x);_&&(s.extensions[_.id]=_.version)}},before(v,x=null){return s.compare("<",v,x)},compare(v,x,_=null){let E=_?s.extensions[_]:s.version;return typeof E>"u"?!1:e.compare(E,x,v)}},a={type(v){let x=typeof v;if(x==="object"){if(v===null)return"null";if(Array.isArray(v))return"array"}return x},is(v,x){return Array.isArray(x)?x.includes(a.type(v)):a.type(v)===x},isDefined(v){return typeof v<"u"},isObject(v){return typeof v=="object"&&v===Object(v)&&!Array.isArray(v)},rename(v,x,_){return typeof v[x]<"u"&&typeof v[_]>"u"?(v[_]=v[x],delete v[x],!0):!1},copy(v,x,_){return typeof v[x]<"u"&&typeof v[_]>"u"?(v[_]=v[x],!0):!1},forAll(v,x,_){if(v[x]&&typeof v[x]=="object")for(let E in v[x])_(v[x][E])},toArray(v,x){return typeof v[x]<"u"&&!Array.isArray(v[x])?(v[x]=[v[x]],!0):!1},flattenArray(v,x,_,E=!1){if(Array.isArray(v[x])){for(let C in v[x])if(typeof _[C]=="string"){let w=v[x][C];v[_[C]]=E?[w]:w}return delete v[x],!0}return!1},flattenOneElementArray(v,x,_=!1){return!_&&Array.isArray(v[x])?v[x].length===1?(v[x]=v[x][0],!0):!1:!0},removeFromArray(v,x,_){if(Array.isArray(v[x])){let E=v[x].indexOf(_);return E>-1&&v[x].splice(E,1),!0}return!1},pickFirst(v,x){return Array.isArray(v[x])&&v[x].length>0?(v[x]=v[x][0],!0):(delete v[x],!1)},ensure(v,x,_){return a.type(_)!==a.type(v[x])&&(v[x]=_),!0},upgradeExtension(v,x){let{id:_,version:E}=o.parseExtension(x),C=v.stac_extensions.findIndex(w=>{let T=o.parseExtension(w);return T&&T.id===_&&e.compare(T.version,E,"<")});return C!==-1?(v.stac_extensions[C]=x,!0):!1},addExtension(v,x){let{id:_,version:E}=o.parseExtension(x),C=v.stac_extensions.findIndex(w=>{if(w===x)return!0;let T=o.parseExtension(w);return!!(T&&T.id===_&&e.compare(T.version,E,"<"))});return C===-1?v.stac_extensions.push(x):v.stac_extensions[C]=x,v.stac_extensions.sort(),!0},removeExtension(v,x){return a.removeFromArray(v,"stac_extensions",x)},migrateExtensionShortnames(v){let x=Object.keys(r),_=Object.values(r);return a.mapValues(v,"stac_extensions",x,_)},populateExtensions(v,x){let _=[];(x=="catalog"||x=="collection")&&_.push(v),(x=="item"||x=="collection")&&a.isObject(v.assets)&&(_=_.concat(Object.values(v.assets))),x=="collection"&&a.isObject(v.item_assets)&&(_=_.concat(Object.values(v.item_assets))),x=="collection"&&a.isObject(v.summaries)&&_.push(v.summaries),x=="item"&&a.isObject(v.properties)&&_.push(v.properties),_.push(v.links);let E;for(;E=_.pop();)Object.keys(E).forEach(C=>{Array.isArray(E.bands)&&(_=_.concat(E.bands));let w=C.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(w)){let T=i[x][w[0]];a.is(T,"string")&&a.addExtension(v,T)}})},mapValues(v,x,_,E){let C=w=>{let T=_.indexOf(w);return T>=0?E[T]:w};return Array.isArray(v[x])?v[x]=v[x].map(C):typeof v[x]<"u"&&(v[x]=C(v[x])),!0},mapObject(v,x){for(let _ in v)v[_]=x(v[_],_)},moveTo(v,x,_,E=!1,C=!1){let w;return E?C?w=T=>Array.isArray(T):w=T=>Array.isArray(T)&&T.length===1:w=a.isDefined,w(v[x])?(_[x]=E&&!C?v[x][0]:v[x],delete v[x],!0):!1},runAll(v,x,_,E){for(let C in v)C.startsWith("migrate")||v[C](x,_,E)},toUTC(v,x){if(a.is(v[x],"string"))try{return v[x]=this.toISOString(v[x]),!0}catch{}return delete v[x],!1},toISOString(v){return v instanceof Date||(v=new Date(v)),v.toISOString().replace(/\.0+/,"")},formatString(v,x,_){const E=C=>a.is(C,["string","number"])?_.replaceAll("{}",C):C;Array.isArray(v[x])?v[x]=v[x].map(E):v[x]=E(v[x])}},l={multihash:null,hexToUint8(v){if(v.length===0||v.length%2!==0)throw new Error(`The string "${v}" is not valid hex.`);return new Uint8Array(v.match(/.{1,2}/g).map(x=>parseInt(x,16)))},uint8ToHex(v){return v.reduce((x,_)=>x+_.toString(16).padStart(2,"0"),"")},toMultihash(v,x,_){if(!l.multihash||!a.is(v[x],"string"))return!1;try{const E=l.multihash.encode(l.hexToUint8(v[x]),_);return v[x]=l.uint8ToHex(E),!0}catch(E){return console.warn(E),!1}}},u={migrate(v,x=!0){return s.set(v),x&&(v.stac_version=t),v.type="Catalog",a.ensure(v,"stac_extensions",[]),s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(v),a.ensure(v,"id",""),a.ensure(v,"description",""),a.ensure(v,"links",[]),a.runAll(u,v,v),s.before("0.8.0")&&a.populateExtensions(v,"catalog"),v}},f={migrate(v,x=!0){return u.migrate(v,x),v.type="Collection",s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(v),a.ensure(v,"license","other"),a.ensure(v,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),a.runAll(f,v,v),a.isObject(v.properties)&&(a.removeFromArray(v,"stac_extensions","commons"),delete v.properties),s.before("0.8.0")&&a.populateExtensions(v,"collection"),s.before("1.0.0-beta.1")&&a.mapValues(v,"stac_extensions",["assets"],["item-assets"]),v},extent(v){if(a.ensure(v,"extent",{}),s.before("0.8.0")&&(Array.isArray(v.extent.spatial)&&(v.extent.spatial={bbox:[v.extent.spatial]}),Array.isArray(v.extent.temporal)&&(v.extent.temporal={interval:[v.extent.temporal]})),a.ensure(v.extent,"spatial",{}),a.ensure(v.extent.spatial,"bbox",[]),a.ensure(v.extent,"temporal",{}),a.ensure(v.extent.temporal,"interval",[]),s.before("1.0.0-rc.3")){if(v.extent.temporal.interval.length>1){let x,_;for(let E of v.extent.temporal.interval){if(E[0]===null)x=null;else if(typeof E[0]=="string"&&x!==null)try{let C=new Date(E[0]);(typeof x>"u"||C<x)&&(x=C)}catch{}if(E[1]===null)_=null;else if(typeof E[1]=="string"&&_!==null)try{let C=new Date(E[1]);(typeof _>"u"||C>_)&&(_=C)}catch{}}v.extent.temporal.interval.unshift([x?a.toISOString(x):null,_?a.toISOString(_):null])}if(v.extent.spatial.bbox.length>1){let x=v.extent.spatial.bbox.reduce((_,E)=>Array.isArray(E)?Math.max(E.length,_):_,4);if(x>=4){let _=new Array(x).fill(null),E=x/2;for(let C of v.extent.spatial.bbox){if(!Array.isArray(C)||C.length<4)break;for(let w in C){let T=C[w];_[w]===null?_[w]=T:w<E?_[w]=Math.min(T,_[w]):_[w]=Math.max(T,_[w])}}_.findIndex(C=>C===null)===-1&&v.extent.spatial.bbox.unshift(_)}}}},collectionAssets(v){s.before("1.0.0-rc.1")&&a.removeExtension(v,"collection-assets"),h.migrateAll(v)},itemAsset(v){s.before("1.0.0-beta.2")&&a.rename(v,"item_assets","assets"),a.removeExtension(v,r["item-assets"]),h.migrateAll(v,"item_assets")},summaries(v){if(a.ensure(v,"summaries",{}),s.before("0.8.0")&&a.isObject(v.other_properties)){for(let x in v.other_properties){let _=v.other_properties[x];Array.isArray(_.extent)&&_.extent.length===2?v.summaries[x]={minimum:_.extent[0],maximum:_.extent[1]}:Array.isArray(_.values)&&(_.values.filter(E=>Array.isArray(E)).length===_.values.length?v.summaries[x]=_.values.reduce((E,C)=>E.concat(C),[]):v.summaries[x]=_.values)}delete v.other_properties}if(s.before("1.0.0-beta.1")&&a.isObject(v.properties)&&!v.links.find(x=>["child","item"].includes(x.rel)))for(let x in v.properties){let _=v.properties[x];Array.isArray(_)||(_=[_]),v.summaries[x]=_}s.before("1.0.0-rc.1")&&a.mapObject(v.summaries,x=>(a.rename(x,"min","minimum"),a.rename(x,"max","maximum"),x)),m.migrate(v.summaries,v,!0),a.moveTo(v.summaries,"sci:doi",v,!0)&&a.addExtension(v,r.scientific),a.moveTo(v.summaries,"sci:publications",v,!0,!0)&&a.addExtension(v,r.scientific),a.moveTo(v.summaries,"sci:citation",v,!0)&&a.addExtension(v,r.scientific),a.moveTo(v.summaries,"cube:dimensions",v,!0)&&a.addExtension(v,r.datacube),Object.keys(v.summaries).length===0&&delete v.summaries}},c={migrate(v,x=null,_=!0){s.set(v),_&&(v.stac_version=t),a.ensure(v,"stac_extensions",[]),s.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(v),a.ensure(v,"id",""),a.ensure(v,"type","Feature"),a.isObject(v.geometry)||(v.geometry=null),v.geometry!==null&&a.ensure(v,"bbox",[]),a.ensure(v,"properties",{}),a.ensure(v,"links",[]),a.ensure(v,"assets",{});let E=!1;return a.isObject(x)&&a.isObject(x.properties)&&(a.removeFromArray(v,"stac_extensions","commons"),v.properties=Object.assign({},x.properties,v.properties),E=!0),a.runAll(c,v,v),m.migrate(v.properties,v),h.migrateAll(v),(s.before("0.8.0")||E)&&a.populateExtensions(v,"item"),v}},d={migrate(v,x=!0){return a.ensure(v,"collections",[]),a.ensure(v,"links",[]),a.runAll(d,v,v),v.collections=v.collections.map(_=>f.migrate(_,x)),v}},p={migrate(v,x=!0){return a.ensure(v,"type","FeatureCollection"),a.ensure(v,"features",[]),a.ensure(v,"links",[]),a.runAll(p,v,v),v.features=v.features.map(_=>c.migrate(_,null,x)),v}},h={migrateAll(v,x="assets"){for(let _ in v[x])h.migrate(v[x][_],v)},migrate(v,x){return a.runAll(h,v,x),m.migrate(v,x),v},mediaTypes(v){a.is(v.type,"string")&&a.mapValues(v,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])}},g={migrateAll(v,x){if(s.before("1.0.0")){const _=a.isObject(x.properties)&&Array.isArray(x.properties.bands)?x.properties.bands:[];if(Array.isArray(v["eo:bands"]))for(let E in v["eo:bands"]){let C=v["eo:bands"][E];a.is(C,"number")&&a.isObject(_[C])&&(C=_[C]),a.isObject(C)||(C={}),v["eo:bands"][E]=C}}if(s.before("1.1.0-beta.1")&&(Array.isArray(v["raster:bands"])||Array.isArray(v["eo:bands"]))){a.ensure(v,"bands",[]);const _=v["raster:bands"]||[],E=v["eo:bands"]||[],C=Math.max(_.length,E.length);for(let w=0;w<C;w++)a.ensure(v.bands,w,{}),Object.assign(v.bands[w],_[w],E[w]),v.bands[w]=g.migrate(v.bands[w],x);delete v["raster:bands"],delete v["eo:bands"]}},migrate(v,x){return a.runAll(g,v,x),m.migrate(v,x),v},eo(v){s.before("2.0.0-beta.1","eo")&&(a.rename(v,"common_name","eo:common_name"),a.rename(v,"center_wavelength","eo:center_wavelength"),a.rename(v,"full_width_half_max","eo:full_width_half_max"),a.rename(v,"solar_illumination","eo:solar_illumination"))},raster(v){s.before("2.0.0-beta.1","raster")&&(a.rename(v,"sampling","raster:sampling"),a.rename(v,"bits_per_sample","raster:bits_per_sample"),a.rename(v,"spatial_resolution","raster:spatial_resolution"),a.rename(v,"scale","raster:scale"),a.rename(v,"offset","raster:offset"),a.rename(v,"histogram","raster:histogram"))}},m={migrate(v,x,_=!1){return a.runAll(m,v,x,_),v},_commonMetadata(v,x){s.before("1.0.0-rc.3")&&(a.toUTC(v,"created"),a.toUTC(v,"updated")),g.migrateAll(v,x)},_timestamps(v,x){a.toUTC(v,"published"),a.toUTC(v,"expires"),a.toUTC(v,"unpublished"),a.upgradeExtension(x,r.timestamps)},_versioningIndicator(v,x){a.upgradeExtension(x,r.version)},checksum(v,x){s.before("0.9.0")&&l.multihash&&(a.rename(v,"checksum:md5","checksum:multihash")&&l.toMultihash(v,"checksum:multihash","md5"),a.rename(v,"checksum:sha1","checksum:multihash")&&l.toMultihash(v,"checksum:multihash","sha1"),a.rename(v,"checksum:sha2","checksum:multihash")&&l.toMultihash(v,"checksum:multihash","sha2-256"),a.rename(v,"checksum:sha3","checksum:multihash")&&l.toMultihash(v,"checksum:multihash","sha3-256")),s.before("1.0.0-rc.1")&&a.rename(v,"checksum:multihash","file:checksum")&&a.addExtension(x,r.file),a.removeExtension(x,"checksum")},classification(v,x){s.before("1.1.0","classification")&&a.forAll(v,"classification:classes",_=>a.rename(_,"color-hint","color_hint")),s.before("2.0.0","classification")&&a.forAll(v,"classification:classes",_=>a.ensure(_,"name",_.description)),a.upgradeExtension(x,r.classification)},cube(v,x){a.upgradeExtension(x,r.datacube)},dtr(v,x){s.before("0.9.0")&&(a.rename(v,"dtr:start_datetime","start_datetime"),a.rename(v,"dtr:end_datetime","end_datetime"),a.removeExtension(x,"datetime-range"))},eo(v,x){s.before("0.9.0")&&(a.rename(v,"eo:epsg","proj:epsg")&&a.addExtension(x,r.projection),a.rename(v,"eo:platform","platform"),a.rename(v,"eo:instrument","instruments")&&a.toArray(v,"instruments"),a.rename(v,"eo:constellation","constellation"),a.rename(v,"eo:off_nadir","view:off_nadir")&&a.addExtension(x,r.view),a.rename(v,"eo:azimuth","view:azimuth")&&a.addExtension(x,r.view),a.rename(v,"eo:incidence_angle","view:incidence_angle")&&a.addExtension(x,r.view),a.rename(v,"eo:sun_azimuth","view:sun_azimuth")&&a.addExtension(x,r.view),a.rename(v,"eo:sun_elevation","view:sun_elevation")&&a.addExtension(x,r.view)),s.before("1.0.0-beta.1")&&a.rename(v,"eo:gsd","gsd"),a.upgradeExtension(x,r.eo)},file(v,x,_){a.rename(v,"file:bits_per_sample","raster:bits_per_sample")&&a.addExtension(x,r.raster),a.rename(v,"file:data_type","data_type"),a.rename(v,"file:unit","unit"),Array.isArray(v["file:nodata"])&&v["file:nodata"].length>1&&a.copy(v,"file:nodata","nodata:values"),a.rename(v,"file:nodata","nodata")&&!_&&a.pickFirst(v,"nodata"),a.upgradeExtension(x,r.file)},label(v,x){s.before("0.8.0")&&(a.rename(v,"label:property","label:properties"),a.rename(v,"label:task","label:tasks"),a.rename(v,"label:overview","label:overviews")&&a.toArray(v,"label:overviews"),a.rename(v,"label:method","label:methods"),a.toArray(v,"label:classes")),a.upgradeExtension(x,r.label)},pc(v,x){s.before("0.8.0")&&a.rename(v,"pc:schema","pc:schemas"),a.upgradeExtension(x,r.pointcloud)},processing(v,x){a.upgradeExtension(x,r.processing)},proj(v,x){a.rename(v,"proj:epsg","proj:code")&&a.formatString(v,"proj:code","EPSG:{}"),a.upgradeExtension(x,r.projection)},raster(v,x){a.upgradeExtension(x,r.raster)},sar(v,x,_){a.rename(v,"sar:incidence_angle","view:incidence_angle")&&a.addExtension(x,r.view),a.rename(v,"sar:pass_direction","sat:orbit_state")&&a.mapValues(v,"sat:orbit_state",[null],["geostationary"])&&a.addExtension(x,r.sat),s.before("0.7.0")&&(a.flattenArray(v,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],_),a.flattenArray(v,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],_),a.flattenArray(v,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],_),a.rename(v,"sar:off_nadir","view:off_nadir")&&a.addExtension(x,r.view)),s.before("0.9.0")&&(a.rename(v,"sar:platform","platform"),a.rename(v,"sar:instrument","instruments")&&a.toArray(v,"instruments"),a.rename(v,"sar:constellation","constellation"),a.rename(v,"sar:type","sar:product_type"),a.rename(v,"sar:polarization","sar:polarizations"),a.flattenOneElementArray(v,"sar:absolute_orbit",_)&&a.rename(v,"sar:absolute_orbit","sat:absolute_orbit")&&a.addExtension(x,r.sat),a.flattenOneElementArray(v,"sar:relative_orbit",_)&&a.rename(v,"sar:relative_orbit","sat:relative_orbit")&&a.addExtension(x,r.sat)),a.upgradeExtension(x,r.sar)},sat(v,x){s.before("0.9.0")&&(a.rename(v,"sat:off_nadir_angle","sat:off_nadir"),a.rename(v,"sat:azimuth_angle","sat:azimuth"),a.rename(v,"sat:sun_azimuth_angle","sat:sun_azimuth"),a.rename(v,"sat:sun_elevation_angle","sat:sun_elevation")),a.upgradeExtension(x,r.sat)},sci(v,x){a.upgradeExtension(x,r.scientific)},item(v){s.before("0.8.0")&&(a.rename(v,"item:license","license"),a.rename(v,"item:providers","providers"))},table(v,x){a.upgradeExtension(x,r.table)},view(v,x){a.upgradeExtension(x,r.view)}},y={item(v,x=null,_=!0){return c.migrate(v,x,_)},catalog(v,x=!0){return u.migrate(v,x)},collection(v,x=!0){return f.migrate(v,x)},collectionCollection(v,x=!0){return d.migrate(v,x)},itemCollection(v,x=!0){return p.migrate(v,x)},stac(v,x=!0){return v.type==="Feature"?y.item(v,null,x):v.type==="FeatureCollection"?y.itemCollection(v,x):v.type==="Collection"||!v.type&&a.isDefined(v.extent)&&a.isDefined(v.license)?y.collection(v,x):!v.type&&Array.isArray(v.collections)?y.collectionCollection(v,x):y.catalog(v,x)},enableMultihash(v){l.multihash=v}};return aO=y,aO}var H4t=j4t();const q4t=Fa(H4t);function Du(e){return typeof e=="string"&&e.length>0}function Pb(e,t,n,r=1e-8){if(typeof e!="number")return null;const i=t-r,o=n+r;return e<i||e>o?null:Math.min(Math.max(e,t),n)}function Lu(e){return typeof e=="object"&&e===Object(e)&&!Array.isArray(e)}function G4t(e){switch(e){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return e.startsWith("u")?0:null}function W4t(e){switch(e){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}function k9e(e){const t={minimum:null,maximum:null},n=l=>l.minimum!==null&&l.maximum!==null,r=e.getMetadata("statistics");if(Lu(r)&&(typeof r.minimum=="number"&&(t.minimum=r.minimum),typeof r.maximum=="number"&&(t.maximum=r.maximum),n(t)))return t;const i=e.getMetadata("raster:histogram");if(Lu(i)&&(typeof i.min=="number"&&(t.minimum=i.min),typeof i.max=="number"&&(t.maximum=i.max),n(t)))return t;const o=e.getMetadata("classification:classes");if(Array.isArray(o)&&(o.reduce((l,u)=>(l.minimum=Math.min(l.minimum,u.value),l.maximum=Math.max(l.maximum,u.value),l),t),n(t)))return t;const s=e.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((l,u)=>(l.minimum=Math.min(l.minimum,...u.values),l.maximum=Math.max(l.maximum,...u.values),l),t),n(t)))return t;const a=e.getMetadata("data_type");return a&&(t.minimum=G4t(a),t.maximum=W4t(a)),t}function T9e(e){let t=[];const n=e.getMetadata("nodata");if(typeof n<"u")t.push(n);else{const r=e.getMetadata("file:nodata");if(typeof r<"u")t=r;else{const i=e.getMetadata("classification:classes");Array.isArray(i)&&(t=i.filter(o=>!!o.nodata).map(o=>o.value))}}return t.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}function Bx(e){let t=e.length>=6,n=e[0],r=e[t?3:2],i=e[1],o=e[t?4:3],s={west:n,east:r,south:i,north:o};return t&&(s.base=e[2],s.height=e[5]),s}function lO(e){let{west:t,east:n,south:r,north:i}=Bx(e);return[[[t,i],[t,r],[n,r],[n,i],[t,i]]]}function V4t(e){if(e=Nf(e,!0),!e)return null;let t=Bx(e),n=[];if(R9e(e)){let r=(t.west+360+t.east)/2;r>180&&(r-=360),n.push(r)}else n.push((t.west+t.east)/2);return n.push((t.south+t.north)/2),typeof t.base<"u"&&n.push((t.base+t.height)/2),n}function D9e(e){if(Array.isArray(e[0]))return e.map(D9e);const[t,n]=e;return[Pb(t,-180,180),Pb(n,-90,90)]}function y3(e){return Lu(e)&&(e.bbox&&(e.bbox=Nf(e.bbox)),e.type==="FeatureCollection"?e.features.forEach(t=>y3(t)):e.type==="Feature"?e.geometry=y3(e.geometry):e.type==="GeometryCollection"?e.geometries.forEach(t=>y3(t)):e.coordinates&&(e.coordinates=D9e(e.coordinates))),e}function L9e(e){const t=Nf(e);if(t?e=[t]:Array.isArray(e)&&(e=e.map(i=>Nf(i)).filter(i=>i!==null)),!Array.isArray(e)||e.length===0)return null;let n=e.reduce((i,o)=>{if(R9e(o)){let{west:s,east:a,south:l,north:u}=Bx(o);i.push(lO([-180,l,a,u])),i.push(lO([s,l,180,u]))}else i.push(lO(o));return i},[]),r=null;if(n.length===1?r={type:"Polygon",coordinates:n[0]}:n.length>1&&(r={type:"MultiPolygon",coordinates:n}),r)return{type:"Feature",geometry:r,properties:{}}}function Nf(e,t=!1){if(!Array.isArray(e)||![4,6].includes(e.length))return null;let{west:n,east:r,south:i,north:o,base:s,height:a}=Bx(e);return n=Pb(n,-180,180),i=Pb(i,-90,90),r=Pb(r,-180,180),o=Pb(o,-90,90),t&&e.length===6?e=[n,i,s,r,o,a]:e=[n,i,r,o],e.some(l=>l===null)?null:e}function R9e(e){if(e=Nf(e),!e)return!1;let{west:t,east:n}=Bx(e);return t>n}function wj(e){if(!Array.isArray(e)||e.length===0)return null;let t={west:180,south:90,east:-180,north:-90};e.forEach(r=>{if(r=Nf(r),!r)return;let i=Bx(r),o=["west","south"];for(let s in i){let a=o.includes(s)?Math.min:Math.max;t[s]=a(t[s],i[s])}});let n=[t.west,t.south,t.east,t.north];return Nf(n)}class EC{constructor(t,n={},r=[]){if(!Lu(t))throw new Error("Given data is not an object");if(t instanceof EC){for(let i of r)this[i]=t[i];t=t.toJSON()}this._keyMap=n,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in t)typeof this[i]>"u"&&(i in n?this[i]=n[i](t[i],this):this[i]=t[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}isBand(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(t){return this[t]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return V4t(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let t={};return Object.keys(this).forEach(n=>{if(typeof this[n]=="function"||this._privateKeys.includes(n))return;let r=this[n];if(n in this._keyMap){let i=Array.isArray(r)?[]:{};for(let o in r)i[o]=r[o].toJSON();r=i}t[n]=r}),t}}var b3={exports:{}},p_={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var Y4t=p_.exports,ske;function X4t(){return ske||(ske=1,function(e,t){(function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o=typeof jo=="object"&&jo;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,a=2147483647,l=36,u=1,f=26,c=38,d=700,p=72,h=128,g="-",m=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,E=Math.floor,C=String.fromCharCode,w;function T(W){throw new RangeError(x[W])}function R(W,Q){for(var ee=W.length,H=[];ee--;)H[ee]=Q(W[ee]);return H}function L(W,Q){var ee=W.split("@"),H="";ee.length>1&&(H=ee[0]+"@",W=ee[1]),W=W.replace(v,".");var se=W.split("."),ne=R(se,Q).join(".");return H+ne}function B(W){for(var Q=[],ee=0,H=W.length,se,ne;ee<H;)se=W.charCodeAt(ee++),se>=55296&&se<=56319&&ee<H?(ne=W.charCodeAt(ee++),(ne&64512)==56320?Q.push(((se&1023)<<10)+(ne&1023)+65536):(Q.push(se),ee--)):Q.push(se);return Q}function P(W){return R(W,function(Q){var ee="";return Q>65535&&(Q-=65536,ee+=C(Q>>>10&1023|55296),Q=56320|Q&1023),ee+=C(Q),ee}).join("")}function S(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:l}function k(W,Q){return W+22+75*(W<26)-((Q!=0)<<5)}function D(W,Q,ee){var H=0;for(W=ee?E(W/d):W>>1,W+=E(W/Q);W>_*f>>1;H+=l)W=E(W/_);return E(H+(_+1)*W/(W+c))}function O(W){var Q=[],ee=W.length,H,se=0,ne=h,ge=p,we,$e,ve,Ee,Ve,Ue,ft,ht,zt;for(we=W.lastIndexOf(g),we<0&&(we=0),$e=0;$e<we;++$e)W.charCodeAt($e)>=128&&T("not-basic"),Q.push(W.charCodeAt($e));for(ve=we>0?we+1:0;ve<ee;){for(Ee=se,Ve=1,Ue=l;ve>=ee&&T("invalid-input"),ft=S(W.charCodeAt(ve++)),(ft>=l||ft>E((a-se)/Ve))&&T("overflow"),se+=ft*Ve,ht=Ue<=ge?u:Ue>=ge+f?f:Ue-ge,!(ft<ht);Ue+=l)zt=l-ht,Ve>E(a/zt)&&T("overflow"),Ve*=zt;H=Q.length+1,ge=D(se-Ee,H,Ee==0),E(se/H)>a-ne&&T("overflow"),ne+=E(se/H),se%=H,Q.splice(se++,0,ne)}return P(Q)}function N(W){var Q,ee,H,se,ne,ge,we,$e,ve,Ee,Ve,Ue=[],ft,ht,zt,$t;for(W=B(W),ft=W.length,Q=h,ee=0,ne=p,ge=0;ge<ft;++ge)Ve=W[ge],Ve<128&&Ue.push(C(Ve));for(H=se=Ue.length,se&&Ue.push(g);H<ft;){for(we=a,ge=0;ge<ft;++ge)Ve=W[ge],Ve>=Q&&Ve<we&&(we=Ve);for(ht=H+1,we-Q>E((a-ee)/ht)&&T("overflow"),ee+=(we-Q)*ht,Q=we,ge=0;ge<ft;++ge)if(Ve=W[ge],Ve<Q&&++ee>a&&T("overflow"),Ve==Q){for($e=ee,ve=l;Ee=ve<=ne?u:ve>=ne+f?f:ve-ne,!($e<Ee);ve+=l)$t=$e-Ee,zt=l-Ee,Ue.push(C(k(Ee+$t%zt,0))),$e=E($t/zt);Ue.push(C(k($e,0))),ne=D(ee,ht,H==se),ee=0,++H}++ee,++Q}return Ue.join("")}function j(W){return L(W,function(Q){return m.test(Q)?O(Q.slice(4).toLowerCase()):Q})}function q(W){return L(W,function(Q){return y.test(Q)?"xn--"+N(Q):Q})}if(s={version:"1.3.2",ucs2:{decode:B,encode:P},decode:O,encode:N,toASCII:q,toUnicode:j},r&&i)if(e.exports==r)i.exports=s;else for(w in s)s.hasOwnProperty(w)&&(r[w]=s[w]);else n.punycode=s})(Y4t)}(p_,p_.exports)),p_.exports}var x3={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var K4t=x3.exports,ake;function Z4t(){return ake||(ake=1,function(e){(function(t,n){e.exports?e.exports=n():t.IPv6=n(t)})(K4t,function(t){var n=t&&t.IPv6;function r(o){var s=o.toLowerCase(),a=s.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var f;for(f=0;f<l&&a[f]!=="";f++);if(f<u)for(a.splice(f,1,"0000");a.length<u;)a.splice(f,0,"0000");for(var c,d=0;d<u;d++){c=a[d].split("");for(var p=0;p<3&&(c[0]==="0"&&c.length>1);p++)c.splice(0,1);a[d]=c.join("")}var h=-1,g=0,m=0,y=-1,v=!1;for(d=0;d<u;d++)v?a[d]==="0"?m+=1:(v=!1,m>g&&(h=y,g=m)):a[d]==="0"&&(v=!0,y=d,m=1);m>g&&(h=y,g=m),g>1&&a.splice(h,g,""),l=a.length;var x="";for(a[0]===""&&(x=":"),d=0;d<l&&(x+=a[d],d!==l-1);d++)x+=":";return a[l-1]===""&&(x+=":"),x}function i(){return t.IPv6===this&&(t.IPv6=n),this}return{best:r,noConflict:i}})}(x3)),x3.exports}var w3={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var Q4t=w3.exports,lke;function J4t(){return lke||(lke=1,function(e){(function(t,n){e.exports?e.exports=n():t.SecondLevelDomains=n(t)})(Q4t,function(t){var n=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var s=i.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return!1;var a=r.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(s+1,o)+" ")>=0:!1},is:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return!1;var s=i.lastIndexOf(".",o-1);if(s>=0)return!1;var a=r.list[i.slice(o+1)];return a?a.indexOf(" "+i.slice(0,o)+" ")>=0:!1},get:function(i){var o=i.lastIndexOf(".");if(o<=0||o>=i.length-1)return null;var s=i.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return null;var a=r.list[i.slice(o+1)];return!a||a.indexOf(" "+i.slice(s+1,o)+" ")<0?null:i.slice(s+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=n),this}};return r})}(w3)),w3.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var eIt=b3.exports,uke;function tIt(){return uke||(uke=1,function(e){(function(t,n){e.exports?e.exports=n(X4t(),Z4t(),J4t()):t.URI=n(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(eIt,function(t,n,r,i){var o=i&&i.URI;function s(S,k){var D=arguments.length>=1,O=arguments.length>=2;if(!(this instanceof s))return D?O?new s(S,k):new s(S):new s;if(S===void 0){if(D)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?S=location.href+"":S=""}if(S===null&&D)throw new TypeError("null is not a valid argument for URI");return this.href(S),k!==void 0?this.absoluteTo(k):this}function a(S){return/^[0-9]+$/.test(S)}s.version="1.19.11";var l=s.prototype,u=Object.prototype.hasOwnProperty;function f(S){return S.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(S){return S===void 0?"Undefined":String(Object.prototype.toString.call(S)).slice(8,-1)}function d(S){return c(S)==="Array"}function p(S,k){var D={},O,N;if(c(k)==="RegExp")D=null;else if(d(k))for(O=0,N=k.length;O<N;O++)D[k[O]]=!0;else D[k]=!0;for(O=0,N=S.length;O<N;O++){var j=D&&D[S[O]]!==void 0||!D&&k.test(S[O]);j&&(S.splice(O,1),N--,O--)}return S}function h(S,k){var D,O;if(d(k)){for(D=0,O=k.length;D<O;D++)if(!h(S,k[D]))return!1;return!0}var N=c(k);for(D=0,O=S.length;D<O;D++)if(N==="RegExp"){if(typeof S[D]=="string"&&S[D].match(k))return!0}else if(S[D]===k)return!0;return!1}function g(S,k){if(!d(S)||!d(k)||S.length!==k.length)return!1;S.sort(),k.sort();for(var D=0,O=S.length;D<O;D++)if(S[D]!==k[D])return!1;return!0}function m(S){var k=/^\/+|\/+$/g;return S.replace(k,"")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(S){if(!(!S||!S.nodeName)){var k=S.nodeName.toLowerCase();if(!(k==="input"&&S.type!=="image"))return s.domAttributes[k]}};function y(S){return escape(S)}function v(S){return encodeURIComponent(S).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(S,k){var D=s.encode(S+"");return k===void 0&&(k=s.escapeQuerySpace),k?D.replace(/%20/g,"+"):D},s.decodeQuery=function(S,k){S+="",k===void 0&&(k=s.escapeQuerySpace);try{return s.decode(k?S.replace(/\+/g,"%20"):S)}catch{return S}};var x={encode:"encode",decode:"decode"},_,E=function(S,k){return function(D){try{return s[k](D+"").replace(s.characters[S][k].expression,function(O){return s.characters[S][k].map[O]})}catch{return D}}};for(_ in x)s[_+"PathSegment"]=E("pathname",x[_]),s[_+"UrnPathSegment"]=E("urnpath",x[_]);var C=function(S,k,D){return function(O){var N;D?N=function(Q){return s[k](s[D](Q))}:N=s[k];for(var j=(O+"").split(S),q=0,W=j.length;q<W;q++)j[q]=N(j[q]);return j.join(S)}};s.decodePath=C("/","decodePathSegment"),s.decodeUrnPath=C(":","decodeUrnPathSegment"),s.recodePath=C("/","encodePathSegment","decode"),s.recodeUrnPath=C(":","encodeUrnPathSegment","decode"),s.encodeReserved=E("reserved","encode"),s.parse=function(S,k){var D;return k||(k={preventInvalidHostname:s.preventInvalidHostname}),S=S.replace(s.leading_whitespace_expression,""),S=S.replace(s.ascii_tab_whitespace,""),D=S.indexOf("#"),D>-1&&(k.fragment=S.substring(D+1)||null,S=S.substring(0,D)),D=S.indexOf("?"),D>-1&&(k.query=S.substring(D+1)||null,S=S.substring(0,D)),S=S.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),S=S.replace(/^[/\\]{2,}/i,"//"),S.substring(0,2)==="//"?(k.protocol=null,S=S.substring(2),S=s.parseAuthority(S,k)):(D=S.indexOf(":"),D>-1&&(k.protocol=S.substring(0,D)||null,k.protocol&&!k.protocol.match(s.protocol_expression)?k.protocol=void 0:S.substring(D+1,D+3).replace(/\\/g,"/")==="//"?(S=S.substring(D+3),S=s.parseAuthority(S,k)):(S=S.substring(D+1),k.urn=!0))),k.path=S,k},s.parseHost=function(S,k){S||(S=""),S=S.replace(/\\/g,"/");var D=S.indexOf("/"),O,N;if(D===-1&&(D=S.length),S.charAt(0)==="[")O=S.indexOf("]"),k.hostname=S.substring(1,O)||null,k.port=S.substring(O+2,D)||null,k.port==="/"&&(k.port=null);else{var j=S.indexOf(":"),q=S.indexOf("/"),W=S.indexOf(":",j+1);W!==-1&&(q===-1||W<q)?(k.hostname=S.substring(0,D)||null,k.port=null):(N=S.substring(0,D).split(":"),k.hostname=N[0]||null,k.port=N[1]||null)}return k.hostname&&S.substring(D).charAt(0)!=="/"&&(D++,S="/"+S),k.preventInvalidHostname&&s.ensureValidHostname(k.hostname,k.protocol),k.port&&s.ensureValidPort(k.port),S.substring(D)||"/"},s.parseAuthority=function(S,k){return S=s.parseUserinfo(S,k),s.parseHost(S,k)},s.parseUserinfo=function(S,k){var D=S,O=S.indexOf("\\");O!==-1&&(S=S.replace(/\\/g,"/"));var N=S.indexOf("/"),j=S.lastIndexOf("@",N>-1?N:S.length-1),q;return j>-1&&(N===-1||j<N)?(q=S.substring(0,j).split(":"),k.username=q[0]?s.decode(q[0]):null,q.shift(),k.password=q[0]?s.decode(q.join(":")):null,S=D.substring(j+1)):(k.username=null,k.password=null),S},s.parseQuery=function(S,k){if(!S)return{};if(S=S.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!S)return{};for(var D={},O=S.split("&"),N=O.length,j,q,W,Q=0;Q<N;Q++)j=O[Q].split("="),q=s.decodeQuery(j.shift(),k),W=j.length?s.decodeQuery(j.join("="),k):null,q!=="__proto__"&&(u.call(D,q)?((typeof D[q]=="string"||D[q]===null)&&(D[q]=[D[q]]),D[q].push(W)):D[q]=W);return D},s.build=function(S){var k="",D=!1;return S.protocol&&(k+=S.protocol+":"),!S.urn&&(k||S.hostname)&&(k+="//",D=!0),k+=s.buildAuthority(S)||"",typeof S.path=="string"&&(S.path.charAt(0)!=="/"&&D&&(k+="/"),k+=S.path),typeof S.query=="string"&&S.query&&(k+="?"+S.query),typeof S.fragment=="string"&&S.fragment&&(k+="#"+S.fragment),k},s.buildHost=function(S){var k="";if(S.hostname)s.ip6_expression.test(S.hostname)?k+="["+S.hostname+"]":k+=S.hostname;else return"";return S.port&&(k+=":"+S.port),k},s.buildAuthority=function(S){return s.buildUserinfo(S)+s.buildHost(S)},s.buildUserinfo=function(S){var k="";return S.username&&(k+=s.encode(S.username)),S.password&&(k+=":"+s.encode(S.password)),k&&(k+="@"),k},s.buildQuery=function(S,k,D){var O="",N,j,q,W;for(j in S)if(j!=="__proto__"&&u.call(S,j))if(d(S[j]))for(N={},q=0,W=S[j].length;q<W;q++)S[j][q]!==void 0&&N[S[j][q]+""]===void 0&&(O+="&"+s.buildQueryParameter(j,S[j][q],D),k!==!0&&(N[S[j][q]+""]=!0));else S[j]!==void 0&&(O+="&"+s.buildQueryParameter(j,S[j],D));return O.substring(1)},s.buildQueryParameter=function(S,k,D){return s.encodeQuery(S,D)+(k!==null?"="+s.encodeQuery(k,D):"")},s.addQuery=function(S,k,D){if(typeof k=="object")for(var O in k)u.call(k,O)&&s.addQuery(S,O,k[O]);else if(typeof k=="string"){if(S[k]===void 0){S[k]=D;return}else typeof S[k]=="string"&&(S[k]=[S[k]]);d(D)||(D=[D]),S[k]=(S[k]||[]).concat(D)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},s.setQuery=function(S,k,D){if(typeof k=="object")for(var O in k)u.call(k,O)&&s.setQuery(S,O,k[O]);else if(typeof k=="string")S[k]=D===void 0?null:D;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},s.removeQuery=function(S,k,D){var O,N,j;if(d(k))for(O=0,N=k.length;O<N;O++)S[k[O]]=void 0;else if(c(k)==="RegExp")for(j in S)k.test(j)&&(S[j]=void 0);else if(typeof k=="object")for(j in k)u.call(k,j)&&s.removeQuery(S,j,k[j]);else if(typeof k=="string")D!==void 0?c(D)==="RegExp"?!d(S[k])&&D.test(S[k])?S[k]=void 0:S[k]=p(S[k],D):S[k]===String(D)&&(!d(D)||D.length===1)?S[k]=void 0:d(S[k])&&(S[k]=p(S[k],D)):S[k]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},s.hasQuery=function(S,k,D,O){switch(c(k)){case"String":break;case"RegExp":for(var N in S)if(u.call(S,N)&&k.test(N)&&(D===void 0||s.hasQuery(S,N,D)))return!0;return!1;case"Object":for(var j in k)if(u.call(k,j)&&!s.hasQuery(S,j,k[j]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(D)){case"Undefined":return k in S;case"Boolean":var q=!!(d(S[k])?S[k].length:S[k]);return D===q;case"Function":return!!D(S[k],k,S);case"Array":if(!d(S[k]))return!1;var W=O?h:g;return W(S[k],D);case"RegExp":return d(S[k])?O?h(S[k],D):!1:!!(S[k]&&S[k].match(D));case"Number":D=String(D);case"String":return d(S[k])?O?h(S[k],D):!1:S[k]===D;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var S=[],k=[],D=0,O=0;O<arguments.length;O++){var N=new s(arguments[O]);S.push(N);for(var j=N.segment(),q=0;q<j.length;q++)typeof j[q]=="string"&&k.push(j[q]),j[q]&&D++}if(!k.length||!D)return new s("");var W=new s("").segment(k);return(S[0].path()===""||S[0].path().slice(0,1)==="/")&&W.path("/"+W.path()),W.normalize()},s.commonPath=function(S,k){var D=Math.min(S.length,k.length),O;for(O=0;O<D;O++)if(S.charAt(O)!==k.charAt(O)){O--;break}return O<1?S.charAt(0)===k.charAt(0)&&S.charAt(0)==="/"?"/":"":((S.charAt(O)!=="/"||k.charAt(O)!=="/")&&(O=S.substring(0,O).lastIndexOf("/")),S.substring(0,O+1))},s.withinString=function(S,k,D){D||(D={});var O=D.start||s.findUri.start,N=D.end||s.findUri.end,j=D.trim||s.findUri.trim,q=D.parens||s.findUri.parens,W=/[a-z0-9-]=["']?$/i;for(O.lastIndex=0;;){var Q=O.exec(S);if(!Q)break;var ee=Q.index;if(D.ignoreHtml){var H=S.slice(Math.max(ee-3,0),ee);if(H&&W.test(H))continue}for(var se=ee+S.slice(ee).search(N),ne=S.slice(ee,se),ge=-1;;){var we=q.exec(ne);if(!we)break;var $e=we.index+we[0].length;ge=Math.max(ge,$e)}if(ge>-1?ne=ne.slice(0,ge)+ne.slice(ge).replace(j,""):ne=ne.replace(j,""),!(ne.length<=Q[0].length)&&!(D.ignore&&D.ignore.test(ne))){se=ee+ne.length;var ve=k(ne,ee,se,S);if(ve===void 0){O.lastIndex=se;continue}ve=String(ve),S=S.slice(0,ee)+ve+S.slice(se),O.lastIndex=ee+ve.length}}return O.lastIndex=0,S},s.ensureValidHostname=function(S,k){var D=!!S,O=!!k,N=!1;if(O&&(N=h(s.hostProtocols,k)),N&&!D)throw new TypeError("Hostname cannot be empty, if protocol is "+k);if(S&&S.match(s.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(S).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(S){if(S){var k=Number(S);if(!(a(k)&&k>0&&k<65536))throw new TypeError('Port "'+S+'" is not a valid port')}},s.noConflict=function(S){if(S){var k={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(k.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(k.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(k.SecondLevelDomains=i.SecondLevelDomains.noConflict()),k}else i.URI===this&&(i.URI=o);return this},l.build=function(S){return S===!0?this._deferred_build=!0:(S===void 0||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new s(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function w(S){return function(k,D){return k===void 0?this._parts[S]||"":(this._parts[S]=k||null,this.build(!D),this)}}function T(S,k){return function(D,O){return D===void 0?this._parts[S]||"":(D!==null&&(D=D+"",D.charAt(0)===k&&(D=D.substring(1))),this._parts[S]=D,this.build(!O),this)}}l.protocol=w("protocol"),l.username=w("username"),l.password=w("password"),l.hostname=w("hostname"),l.port=w("port"),l.query=T("query","?"),l.fragment=T("fragment","#"),l.search=function(S,k){var D=this.query(S,k);return typeof D=="string"&&D.length?"?"+D:D},l.hash=function(S,k){var D=this.fragment(S,k);return typeof D=="string"&&D.length?"#"+D:D},l.pathname=function(S,k){if(S===void 0||S===!0){var D=this._parts.path||(this._parts.hostname?"/":"");return S?(this._parts.urn?s.decodeUrnPath:s.decodePath)(D):D}else return this._parts.urn?this._parts.path=S?s.recodeUrnPath(S):"":this._parts.path=S?s.recodePath(S):"/",this.build(!k),this},l.path=l.pathname,l.href=function(S,k){var D;if(S===void 0)return this.toString();this._string="",this._parts=s._parts();var O=S instanceof s,N=typeof S=="object"&&(S.hostname||S.path||S.pathname);if(S.nodeName){var j=s.getDomAttribute(S);S=S[j]||"",N=!1}if(!O&&N&&S.pathname!==void 0&&(S=S.toString()),typeof S=="string"||S instanceof String)this._parts=s.parse(String(S),this._parts);else if(O||N){var q=O?S._parts:S;for(D in q)D!=="query"&&u.call(this._parts,D)&&(this._parts[D]=q[D]);q.query&&this.query(q.query,!1)}else throw new TypeError("invalid input");return this.build(!k),this},l.is=function(S){var k=!1,D=!1,O=!1,N=!1,j=!1,q=!1,W=!1,Q=!this._parts.urn;switch(this._parts.hostname&&(Q=!1,D=s.ip4_expression.test(this._parts.hostname),O=s.ip6_expression.test(this._parts.hostname),k=D||O,N=!k,j=N&&r&&r.has(this._parts.hostname),q=N&&s.idn_expression.test(this._parts.hostname),W=N&&s.punycode_expression.test(this._parts.hostname)),S.toLowerCase()){case"relative":return Q;case"absolute":return!Q;case"domain":case"name":return N;case"sld":return j;case"ip":return k;case"ip4":case"ipv4":case"inet4":return D;case"ip6":case"ipv6":case"inet6":return O;case"idn":return q;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return W}return null};var R=l.protocol,L=l.port,B=l.hostname;l.protocol=function(S,k){if(S&&(S=S.replace(/:(\/\/)?$/,""),!S.match(s.protocol_expression)))throw new TypeError('Protocol "'+S+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return R.call(this,S,k)},l.scheme=l.protocol,l.port=function(S,k){return this._parts.urn?S===void 0?"":this:(S!==void 0&&(S===0&&(S=null),S&&(S+="",S.charAt(0)===":"&&(S=S.substring(1)),s.ensureValidPort(S))),L.call(this,S,k))},l.hostname=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S!==void 0){var D={preventInvalidHostname:this._parts.preventInvalidHostname},O=s.parseHost(S,D);if(O!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');S=D.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(S,this._parts.protocol)}return B.call(this,S,k)},l.origin=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){var D=this.protocol(),O=this.authority();return O?(D?D+"://":"")+this.authority():""}else{var N=s(S);return this.protocol(N.protocol()).authority(N.authority()).build(!k),this}},l.host=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0)return this._parts.hostname?s.buildHost(this._parts):"";var D=s.parseHost(S,this._parts);if(D!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');return this.build(!k),this},l.authority=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0)return this._parts.hostname?s.buildAuthority(this._parts):"";var D=s.parseAuthority(S,this._parts);if(D!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');return this.build(!k),this},l.userinfo=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){var D=s.buildUserinfo(this._parts);return D&&D.substring(0,D.length-1)}else return S[S.length-1]!=="@"&&(S+="@"),s.parseUserinfo(S,this._parts),this.build(!k),this},l.resource=function(S,k){var D;return S===void 0?this.path()+this.search()+this.hash():(D=s.parse(S),this._parts.path=D.path,this._parts.query=D.query,this._parts.fragment=D.fragment,this.build(!k),this)},l.subdomain=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var D=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,D)||""}else{var O=this._parts.hostname.length-this.domain().length,N=this._parts.hostname.substring(0,O),j=new RegExp("^"+f(N));if(S&&S.charAt(S.length-1)!=="."&&(S+="."),S.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return S&&s.ensureValidHostname(S,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(j,S),this.build(!k),this}},l.domain=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(typeof S=="boolean"&&(k=S,S=void 0),S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var D=this._parts.hostname.match(/\./g);if(D&&D.length<2)return this._parts.hostname;var O=this._parts.hostname.length-this.tld(k).length-1;return O=this._parts.hostname.lastIndexOf(".",O-1)+1,this._parts.hostname.substring(O)||""}else{if(!S)throw new TypeError("cannot set domain empty");if(S.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(S,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=S;else{var N=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(N,S)}return this.build(!k),this}},l.tld=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(typeof S=="boolean"&&(k=S,S=void 0),S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var D=this._parts.hostname.lastIndexOf("."),O=this._parts.hostname.substring(D+1);return k!==!0&&r&&r.list[O.toLowerCase()]&&r.get(this._parts.hostname)||O}else{var N;if(S)if(S.match(/[^a-zA-Z0-9-]/))if(r&&r.is(S))N=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(N,S);else throw new TypeError('TLD "'+S+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");N=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(N,S)}else throw new TypeError("cannot set TLD empty");return this.build(!k),this}},l.directory=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0||S===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var D=this._parts.path.length-this.filename().length-1,O=this._parts.path.substring(0,D)||(this._parts.hostname?"/":"");return S?s.decodePath(O):O}else{var N=this._parts.path.length-this.filename().length,j=this._parts.path.substring(0,N),q=new RegExp("^"+f(j));return this.is("relative")||(S||(S="/"),S.charAt(0)!=="/"&&(S="/"+S)),S&&S.charAt(S.length-1)!=="/"&&(S+="/"),S=s.recodePath(S),this._parts.path=this._parts.path.replace(q,S),this.build(!k),this}},l.filename=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(typeof S!="string"){if(!this._parts.path||this._parts.path==="/")return"";var D=this._parts.path.lastIndexOf("/"),O=this._parts.path.substring(D+1);return S?s.decodePathSegment(O):O}else{var N=!1;S.charAt(0)==="/"&&(S=S.substring(1)),S.match(/\.?\//)&&(N=!0);var j=new RegExp(f(this.filename())+"$");return S=s.recodePath(S),this._parts.path=this._parts.path.replace(j,S),N?this.normalizePath(k):this.build(!k),this}},l.suffix=function(S,k){if(this._parts.urn)return S===void 0?"":this;if(S===void 0||S===!0){if(!this._parts.path||this._parts.path==="/")return"";var D=this.filename(),O=D.lastIndexOf("."),N,j;return O===-1?"":(N=D.substring(O+1),j=/^[a-z0-9%]+$/i.test(N)?N:"",S?s.decodePathSegment(j):j)}else{S.charAt(0)==="."&&(S=S.substring(1));var q=this.suffix(),W;if(q)S?W=new RegExp(f(q)+"$"):W=new RegExp(f("."+q)+"$");else{if(!S)return this;this._parts.path+="."+s.recodePath(S)}return W&&(S=s.recodePath(S),this._parts.path=this._parts.path.replace(W,S)),this.build(!k),this}},l.segment=function(S,k,D){var O=this._parts.urn?":":"/",N=this.path(),j=N.substring(0,1)==="/",q=N.split(O);if(S!==void 0&&typeof S!="number"&&(D=k,k=S,S=void 0),S!==void 0&&typeof S!="number")throw new Error('Bad segment "'+S+'", must be 0-based integer');if(j&&q.shift(),S<0&&(S=Math.max(q.length+S,0)),k===void 0)return S===void 0?q:q[S];if(S===null||q[S]===void 0)if(d(k)){q=[];for(var W=0,Q=k.length;W<Q;W++)!k[W].length&&(!q.length||!q[q.length-1].length)||(q.length&&!q[q.length-1].length&&q.pop(),q.push(m(k[W])))}else(k||typeof k=="string")&&(k=m(k),q[q.length-1]===""?q[q.length-1]=k:q.push(k));else k?q[S]=m(k):q.splice(S,1);return j&&q.unshift(""),this.path(q.join(O),D)},l.segmentCoded=function(S,k,D){var O,N,j;if(typeof S!="number"&&(D=k,k=S,S=void 0),k===void 0){if(O=this.segment(S,k,D),!d(O))O=O!==void 0?s.decode(O):void 0;else for(N=0,j=O.length;N<j;N++)O[N]=s.decode(O[N]);return O}if(!d(k))k=typeof k=="string"||k instanceof String?s.encode(k):k;else for(N=0,j=k.length;N<j;N++)k[N]=s.encode(k[N]);return this.segment(S,k,D)};var P=l.query;return l.query=function(S,k){if(S===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof S=="function"){var D=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),O=S.call(this,D);return this._parts.query=s.buildQuery(O||D,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!k),this}else return S!==void 0&&typeof S!="string"?(this._parts.query=s.buildQuery(S,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!k),this):P.call(this,S,k)},l.setQuery=function(S,k,D){var O=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof S=="string"||S instanceof String)O[S]=k!==void 0?k:null;else if(typeof S=="object")for(var N in S)u.call(S,N)&&(O[N]=S[N]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=s.buildQuery(O,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(D=k),this.build(!D),this},l.addQuery=function(S,k,D){var O=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(O,S,k===void 0?null:k),this._parts.query=s.buildQuery(O,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(D=k),this.build(!D),this},l.removeQuery=function(S,k,D){var O=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(O,S,k),this._parts.query=s.buildQuery(O,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(D=k),this.build(!D),this},l.hasQuery=function(S,k,D){var O=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(O,S,k,D)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(S){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!S)),this},l.normalizeHostname=function(S){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!S)),this},l.normalizePort=function(S){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!S)),this},l.normalizePath=function(S){var k=this._parts.path;if(!k)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!S),this;if(this._parts.path==="/")return this;k=s.recodePath(k);var D,O="",N,j;for(k.charAt(0)!=="/"&&(D=!0,k="/"+k),(k.slice(-3)==="/.."||k.slice(-2)==="/.")&&(k+="/"),k=k.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),D&&(O=k.substring(1).match(/^(\.\.\/)+/)||"",O&&(O=O[0]));N=k.search(/\/\.\.(\/|$)/),N!==-1;){if(N===0){k=k.substring(3);continue}j=k.substring(0,N).lastIndexOf("/"),j===-1&&(j=N),k=k.substring(0,j)+k.substring(N+3)}return D&&this.is("relative")&&(k=O+k.substring(1)),this._parts.path=k,this.build(!S),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(S){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!S)),this},l.normalizeFragment=function(S){return this._parts.fragment||(this._parts.fragment=null,this.build(!S)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var S=s.encode,k=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=S,s.decode=k}return this},l.unicode=function(){var S=s.encode,k=s.decode;s.encode=v,s.decode=unescape;try{this.normalize()}finally{s.encode=S,s.decode=k}return this},l.readable=function(){var S=this.clone();S.username("").password("").normalize();var k="";if(S._parts.protocol&&(k+=S._parts.protocol+"://"),S._parts.hostname&&(S.is("punycode")&&t?(k+=t.toUnicode(S._parts.hostname),S._parts.port&&(k+=":"+S._parts.port)):k+=S.host()),S._parts.hostname&&S._parts.path&&S._parts.path.charAt(0)!=="/"&&(k+="/"),k+=S.path(!0),S._parts.query){for(var D="",O=0,N=S._parts.query.split("&"),j=N.length;O<j;O++){var q=(N[O]||"").split("=");D+="&"+s.decodeQuery(q[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),q[1]!==void 0&&(D+="="+s.decodeQuery(q[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}k+="?"+D.substring(1)}return k+=s.decodeQuery(S.hash(),!0),k},l.absoluteTo=function(S){var k=this.clone(),D=["protocol","username","password","hostname","port"],O,N,j;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(S instanceof s||(S=new s(S)),k._parts.protocol||(k._parts.protocol=S._parts.protocol,this._parts.hostname))return k;for(N=0;j=D[N];N++)k._parts[j]=S._parts[j];return k._parts.path?(k._parts.path.substring(-2)===".."&&(k._parts.path+="/"),k.path().charAt(0)!=="/"&&(O=S.directory(),O=O||(S.path().indexOf("/")===0?"/":""),k._parts.path=(O?O+"/":"")+k._parts.path,k.normalizePath())):(k._parts.path=S._parts.path,k._parts.query||(k._parts.query=S._parts.query)),k.build(),k},l.relativeTo=function(S){var k=this.clone().normalize(),D,O,N,j,q;if(k._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(S=new s(S).normalize(),D=k._parts,O=S._parts,j=k.path(),q=S.path(),j.charAt(0)!=="/")throw new Error("URI is already relative");if(q.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(D.protocol===O.protocol&&(D.protocol=null),D.username!==O.username||D.password!==O.password||D.protocol!==null||D.username!==null||D.password!==null)return k.build();if(D.hostname===O.hostname&&D.port===O.port)D.hostname=null,D.port=null;else return k.build();if(j===q)return D.path="",k.build();if(N=s.commonPath(j,q),!N)return k.build();var W=O.path.substring(N.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return D.path=W+D.path.substring(N.length)||"./",k.build()},l.equals=function(S){var k=this.clone(),D=new s(S),O={},N={},j={},q,W,Q;if(k.normalize(),D.normalize(),k.toString()===D.toString())return!0;if(q=k.query(),W=D.query(),k.query(""),D.query(""),k.toString()!==D.toString()||q.length!==W.length)return!1;O=s.parseQuery(q,this._parts.escapeQuerySpace),N=s.parseQuery(W,this._parts.escapeQuerySpace);for(Q in O)if(u.call(O,Q)){if(d(O[Q])){if(!g(O[Q],N[Q]))return!1}else if(O[Q]!==N[Q])return!1;j[Q]=!0}for(Q in N)if(u.call(N,Q)&&!j[Q])return!1;return!0},l.preventInvalidHostname=function(S){return this._parts.preventInvalidHostname=!!S,this},l.duplicateQueryParameters=function(S){return this._parts.duplicateQueryParameters=!!S,this},l.escapeQuerySpace=function(S){return this._parts.escapeQuerySpace=!!S,this},s})}(b3)),b3.exports}var nIt=tIt();const pN=Fa(nIt),cke=["http","https"];function rIt(e,t,n=!0){return iIt(e,t,!1,n)}function iIt(e,t=null,n=!1,r=!0){let i=pN(e);if(t&&i.is("relative")){let o=pN(t),s=o.path();!s.endsWith("/")&&!s.endsWith(".json")&&o.path(s+"/"),i=i.absoluteTo(o)}return i.normalize(),n&&(i.query(""),i.fragment("")),r?i.toString():i}const gN="application/geo+json",oIt=["application/json",gN,"text/json"],fke=["image/gif","image/jpeg","image/apng","image/png","image/webp"],F9e=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],$9e=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(F9e);function _j(e,t,n=!1){return Array.isArray(t)||(t=[t]),n&&typeof e>"u"?!0:typeof e!="string"?!1:(t=t.map(r=>r.toLowerCase()),t.includes(e.toLowerCase()))}function sIt(e,t=!1){return _j(e,oIt,t)}class M9e extends EC{constructor(t,n=null,r={},i=[]){super(t,r,["_context"].concat(i)),this._context||(this._context=n)}getAbsoluteUrl(t=!0){return this._context?rIt(this.href,this._context.getAbsoluteUrl(),t):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(t=!1){if(typeof this.href!="string")return!1;if(!t&&typeof this.type>"u")return!1;let n=new pN(this.href),r=n.protocol().toLowerCase(),i=n.suffix().toLowerCase();return Du(r)&&!cke.includes(r)?!1:Du(this.type)&&fke.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Du(i)&&(i==="jpg"||fke.includes("image/"+i)))}isType(t){return Du(this.type)&&_j(this.type,t)}isGeoTIFF(){return this.isType($9e)}isCOG(){return this.isType(F9e)}isHTTP(){let n=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Du(n)&&cke.includes(n)}isPreview(){return!1}}class Ej extends M9e{constructor(t,n=null){super(t,n)}isLink(){return!0}getObjectType(){return"Link"}isPreview(){return this.rel==="preview"}static fromLinks(t,n=null){return Array.isArray(t)?t.map(r=>Lu(r)?new Ej(r,n):r):[]}}class O9e extends EC{constructor(t,n=null,r={},i=[]){if(super(t,Object.assign({links:Ej.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=n,!this._url)){let o=this.getSelfLink();o&&(this._url=o.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(t){this._url=t}getStacLinksWithRel(t,n=!0){return this.getLinksWithRels([t]).filter(r=>sIt(r.type,n))}getStacLinkWithRel(t,n=!0){const r=this.getStacLinksWithRel(t,n);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(t=>Lu(t)&&Du(t.href)):[]}getLinkWithRel(t){return this.getLinks().find(n=>n.rel===t)||null}getLinksWithRels(t){return this.getLinks().filter(n=>t.includes(n.rel))}getLinksWithOtherRels(t){return this.getLinks().filter(n=>!t.includes(n.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class Aj extends O9e{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getAll(){return[]}}class AC extends EC{constructor(t,n=null,r=null){super(t,{},["_index","_context"]),typeof this._index!="number"&&(this._index=typeof n=="string"?parseInt(n,10):n),this._context||(this._context=r)}getContext(){return this._context}getObjectType(){return"Band"}isBand(){return!0}getIndex(){return this._index}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context)return this._context.getMetadata(t)}getMinMaxValues(){return k9e(this)}getNoDataValues(){return T9e(this)}static fromBands(t,n=null){let r=[];if(Array.isArray(t))for(let i in t)r[i]=new AC(t[i],i,n);return r}}const aIt=["created","updated","published","expires","unpublished","bands"];class Rf extends M9e{constructor(t,n=null,r=null){const i={bands:AC.fromBands,alternate:Rf.fromAssets};super(t,r,i,["_key"]),this._key||(this._key=n)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(t=!0){return this.isDefinition()?null:super.getAbsoluteUrl(t)}getKey(){return this._key}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context instanceof Rf)return this._context.getMetadata(t);if(this._context&&!aIt.includes(t))return this._context.getMetadata(t)}getBands(){return this.bands||[]}findVisualBands(){const t={red:null,green:null,blue:null},n=this.getBands();for(const i in n){const o=parseInt(i,10),s=n[o];Lu(s)&&Du(s["eo:common_name"])&&s["eo:common_name"]in t&&(t[s["eo:common_name"]]=s)}return Object.values(t).every(i=>i!==null)?t:null}findBand(t,n="name"){Array.isArray(t)||(t=[t]);const r=this.getBands(),i=r.findIndex(o=>Lu(o)&&t.includes(o[n]));return i>=0?r[i]:null}getBand(t){return Lu(t)||t===null?t:this.getBands()[t]||null}getMinMaxValues(){return k9e(this)}getNoDataValues(){return T9e(this)}isDefinition(){return!Du(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}isPreview(){const t=["thumbnail","overview"];return t.includes(this.getKey())?!0:Array.isArray(this.roles)&&this.roles.some(n=>t.includes(n))}hasRole(t,n=!1){return Array.isArray(t)||(t=[t]),n&&t.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>t.includes(r))}static fromAssets(t,n=null){let r={};if(Lu(t))for(let i in t)r[i]=new Rf(t[i],i,n);return r}}class Ld extends O9e{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(t=!0){return this.getLinksWithRels(["icon"]).filter(n=>n.canBrowserDisplayImage(t))}getThumbnails(t=!0,n=null){let r=this.getAssets().filter(i=>i.isPreview());if(r.length===0&&(r=this.getLinks().filter(i=>i.isPreview())),t&&(r=r.filter(i=>i.canBrowserDisplayImage())),n&&r.length>1){let i=o=>Array.isArray(o.roles)&&o.roles.includes(n)||o.getKey()===n;r=r.filter(i).concat(r.filter(o=>!i(o)))}return r}getDefaultGeoTIFF(t=!0,n=!1){var i;return(i=this.rankGeoTIFFs(t,n)[0])==null?void 0:i.asset}rankGeoTIFFs(t=!0,n=!1,r=null,i=null){Lu(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let o=[],s=this.getAssetsByTypes($9e);t&&(s=s.filter(l=>l.isHTTP()&&(!n||l.isCOG())));let a=Object.entries(r);for(let l of s){let u=0;if(a.length>0){let f=a.filter(([c])=>l.hasRole(c,!0)).map(([,c])=>c);f.length>0&&(u+=Math.max(...f))}!n&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof i=="function"&&(u+=i(l)),o.push({asset:l,score:u})}return o.sort((l,u)=>u.score-l.score),o}findVisualAssets(){let t={red:null,green:null,blue:null},n=Object.keys(t),r=this.getAssets();for(let o of r){let s=o.findBand(n,"eo:common_name");s&&(t[s["eo:common_name"]]=o)}return Object.values(t).every(o=>o!==null)?t:null}getAsset(t){return Lu(this.assets)&&this.assets[t]||null}getAssets(){return Lu(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(t,n=!1){return this.getAssets().filter(r=>r.hasRole(t,n))}getAssetWithRole(t,n=!1){return this.getAssetsWithRoles([t],n)[0]||null}getAssetsByTypes(t){return this.getAssets().filter(n=>_j(n.type,t))}equals(t){return this===t?!0:!(t instanceof Ld)||this.getObjectType()!==t.getObjectType()?!1:!!(this.id&&this.id===t.id)}supportsExtension(t){if(!Array.isArray(this.stac_extensions))return!1;let n=new RegExp("^"+t.replaceAll("*","[^/]+")+"$");return this.stac_extensions.some(r=>n.test(r))}}class I9e extends Ld{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getObjectType(){return this.type}getSearchLink(t=null){let n=this.getStacLinksWithRel("search");return t?n[0]||null:n.find(r=>r.method===t||!t&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class lIt extends I9e{constructor(t,n=null){super(t,n)}}function g_(e){if(Du(e)&&e.length>=10)try{let n=e.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5],n[6]||0))}catch{return null}return null}function uIt(e,t){return new Date(e.valueOf()+(t-e)/2)}function N9e(e){if(!Array.isArray(e)||e.length===0)return null;let t,n;const r=(i,o,s)=>typeof i>"u"?o:i===null||o===null?null:s(i,o);return e.forEach(([i,o])=>{t=r(t,i,Math.min),n=r(n,o,Math.max)}),[t===null?null:new Date(t),n===null?null:new Date(n)]}class P9e extends I9e{constructor(t,n=null){const r={assets:Rf.fromAssets,item_assets:Rf.fromAssets};super(t,n,r)}toGeoJSON(){let t=L9e(this.getBoundingBoxes());return t&&(t.id=this.id),t}getBoundingBox(){let t=this.getRawBoundingBoxes();return t.length>0?Nf(t[0]):null}getBoundingBoxes(){let t=this.getRawBoundingBoxes();return t.length===1?[Nf(t[0])]:t.length>1?t.slice(1).map(Nf):null}getRawBoundingBoxes(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.spatial)==null?void 0:r.bbox;return Array.isArray(t)&&t.length>0?t:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.temporal)==null?void 0:r.interval;return Array.isArray(t)&&t.length>0?t.filter(i=>Array.isArray(i)&&(Du(i[0])||Du(i[1]))).map(i=>i.map(o=>g_(o))):[]}getSummary(t){return this.summaries[t]}getBands(){let t=this.getMetadata("bands");return Array.isArray(t)||(t=this.getSummary("bands")),Array.isArray(t)?AC.fromBands(t,this):[]}}class cIt extends Aj{constructor(t,n=null){const r={collections:i=>i.map(o=>new P9e(o))};super(t,n,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(n=>n.toGeoJSON()).filter(n=>n!==null)}}getBoundingBox(){return wj(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(t=>t.getBoundingBox())}getTemporalExtent(){return N9e(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(t=>t.getTemporalExtent())}}class Cj extends Ld{constructor(t,n=null){super(t,n,{assets:Rf.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Nf(this.bbox)}getBoundingBoxes(){const t=this.getBoundingBox();return t?[t]:[]}getDateTime(){let t=g_(this.properties.datetime);if(!t){let n=g_(this.properties.start_datetime),r=g_(this.properties.end_datetime);return n&&r?uIt(n,r):n||r}return t}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let t=[];return Du(this.properties.start_datetime)||Du(this.properties.end_datetime)?t=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Du(this.properties.datetime)&&(t=[[this.properties.datetime,this.properties.datetime]]),t.map(n=>n.map(r=>g_(r)))}getMetadata(t){return this.properties[t]}getBands(){const t=this.getMetadata("bands");return Array.isArray(t)?AC.fromBands(t,this):[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class B9e extends Aj{constructor(t,n=null){const r={features:i=>i.map(o=>new Cj(o))};super(t,n,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return wj(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(t=>t.getBoundingBox())}getTemporalExtent(){return N9e(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(t=>t.getTemporalExtent())}}function bk(e,t=!0,n=!1){return t&&(e=q4t.stac(e,n)),e.type==="Feature"?new Cj(e):e.type==="FeatureCollection"?new B9e(e):e.type==="Collection"||!e.type&&typeof e.extent<"u"&&typeof e.license<"u"?new P9e(e):!e.type&&Array.isArray(e.collections)?new cIt(e):new lIt(e)}const fIt="https://stac-extensions.github.io/label/v1.*/schema.json",z9e=new N3({color:"rgba(0,0,0,0)"});function U9e(e,t,n="rgba(255,255,255,0.4)",r=5){let i=z9e;n&&(i=new N3({color:n}));const o=new I3({color:e,width:t});return new Fk({image:new oWe({fill:i,stroke:o,radius:r}),fill:i,stroke:o})}const dIt=U9e("#3399CC",3),dke=U9e("#ff9933",2,null);function hIt(e,t){const n={url:e.getAbsoluteUrl()};let r=e;e.getBands().length===1&&(r=e.getBand(0));const{minimum:i,maximum:o}=r.getMinMaxValues();typeof i=="number"&&(n.min=i),typeof o=="number"&&(n.max=o);const s=r.getNoDataValues();return s.length>0&&(n.nodata=s[0]),t.length>0&&(n.bands=t),n}async function hke(e,t=void 0){let n=t;if(sWe()){const r=e.getMetadata("proj:code");if(r)try{if(r.startsWith("EPSG:")){const i=parseInt(r.replace("EPSG:",""),10);n=await aWe(i)}}catch{}}return n}function pke(e,t){const n=e.clone();return t.hasOnlyBounds()||n.setFill(z9e),n}function pIt(e){let t=e.href;if(t.includes("{s}"))if(Array.isArray(e["href:servers"])&&e["href:servers"].length>0){const n=Math.random()*e["href:servers"].length|0;t=t.replace("{s}",e["href:servers"][n])}else return null;return t}class gke extends _C{constructor(n){super({...n,state:"loading"});Cn(this,"loadImage",n=>new Promise((r,i)=>{const o=new Image;o.addEventListener("load",()=>r(o)),o.addEventListener("error",()=>i(new Error("load failed"))),o.src=n}));const r=new lj(n.url);r.getHeader().then(i=>{this.tileGrid.minZoom=i.minZoom,this.tileGrid.maxZoom=i.maxZoom,this.setLoader(async(o,s,a)=>{const l=await r.getZxy(o,s,a),u=URL.createObjectURL(new Blob([l.data])),f=await this.loadImage(u);return URL.revokeObjectURL(u),f}),this.setState("ready")})}}class gIt extends JN{constructor(n){super({...n,state:"loading",url:"pmtiles://"+n.url+"/{z}/{x}/{y}",format:new lWe});Cn(this,"tileLoadFunction",(n,r)=>{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=r.match(i),s=+o[2],a=+o[3],l=+o[4];n.setLoader((u,f,c)=>{n.setState(oi.LOADING),this.pmtiles_.getZxy(s,a,l).then(d=>{if(d){const p=n.getFormat();n.setFeatures(p.readFeatures(d.data,{extent:u,featureProjection:c})),n.setState(oi.LOADED)}else n.setFeatures([]),n.setState(oi.EMPTY)}).catch(d=>{n.setFeatures([]),n.setState(oi.ERROR)})})});this.pmtiles_=new lj(n.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}class Sj extends uI{constructor(t){const n={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>n[r]=t[r]),super(n),this.getSourceOptions_=t.getSourceOptions,this.children_=null,this.childrenOptions_=t.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=t.crossOrigin||null,this.displayFootprint_=t.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!t.displayGeoTiffByDefault,this.displayPreview_=!!t.displayPreview,this.displayOverview_=t.displayOverview!==!1,this.displayWebMapLink_=t.displayWebMapLink||!1,this.buildTileUrlTemplate_=t.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=t.useTileLayerAsFallback||!1,this.boundsStyle_=t.boundsStyle||dIt,this.collectionStyle_=t.collectionStyle||dke,this.boundsLayer_=null,this.disableMigration_=t.disableMigration||!1,this.map_=null,this.eventQueue_=[],t.httpRequestFn&&(this.fetch_=t.httpRequestFn),t.data){try{this.configure_(t.data,t.url,t.children,t.assets,t.bands)}catch(r){this.handleError_(r)}return}if(!t.url)throw new Error("Either url or data must be provided");this.fetch_(t.url).then(r=>this.configure_(r,t.url,t.children,t.assets,t.bands)).catch(r=>this.handleError_(r))}async fetch_(t,n="json"){const r=await fetch(t);if(!r.ok)throw new Error(`Unexpected response from ${t}: ${r.status}`);return n==="json"?await r.json():n==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var t;if(this.getLayers().getLength()>1)return!1;const r=(t=this.getData())===null||t===void 0?void 0:t.getBoundingBox();return!r||PL(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(t){this.dispatch_(new P5t(t))}configure_(t,n=null,r=null,i=null,o=[]){let s;t instanceof Rf||t instanceof Ld?s=t:s=bk(t,!this.disableMigration_),n&&n.includes("://")&&s instanceof Ld&&s.setAbsoluteUrl(n),this.set("stac",s),this.bands_=o,this.boundsLayer_=this.addFootprint_();const a=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(pke(this.boundsStyle_,this))};this.getLayers().on("add",a),this.getLayers().on("remove",a);const l=c=>this.handleError_(c),u=this.setChildren(r).catch(l),f=this.setAssets(i).catch(l);Promise.all([u,f]).then(()=>this.dispatch_("layersready")),this.dispatch_("sourceready")}dispatch_(t){this.eventQueue_.push(t),this.flush_()}flush_(){if(this.map_){for(const t of this.eventQueue_)this.dispatchEvent(t);this.eventQueue_=[]}}setMap_(t){this.map_!==t&&(this.map_=t,this.flush_())}async addChildren_(t,n={}){const r=t.map(i=>{const o={data:i,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},s=new Sj(Object.assign(o,n));return s.on("sourceready",()=>{s.map_&&this.setMap_(s.map_)}),this.addLayer_(s,null),s});return await Promise.all(r)}async addPreviewImage_(t){const n=await hke(t,"EPSG:4326"),r=t.getContext().getBoundingBoxes();if(r.length!==1)return;const i=r[0];let o={url:t.getAbsoluteUrl(),projection:n,imageExtent:cI(i,"EPSG:4326",n),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(o=await this.getSourceOptions_(Yo.ImageStatic,o,t));const s=new wDe({source:new E9e(o)});return this.addLayer_(s,t),s}async addLayerForLink(t){const n=pIt(t);if(!n)return;const r={attributions:t.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:n},i=async(s,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(s,a,t)),a),o=[];switch(t.rel){case"pmtiles":const a=await new lj(r.url).getHeader();let l;switch(a.tileType){case Eb.Mvt:l=new gIt(await i(Yo.PMTilesVector,r));break;case Eb.Avif:case Eb.Jpeg:case Eb.Png:case Eb.Webp:l=new gke(await i(Yo.PMTilesRaster,r));break;default:return}o.push(l);break;case"tilejson":o.push(new S9e(await i(Yo.TileJSON,r)));break;case"wms":if(!Array.isArray(t["wms:layers"]))break;for(const c in t["wms:layers"]){const d=t["wms:layers"][c]||"";let p="";Array.isArray(t["wms:styles"])&&typeof t["wms:styles"][c]=="string"&&(p=t["wms:styles"][c]);const h=Object.assign({LAYERS:d,STYLES:p},t["wms:dimensions"]);typeof t["wms:transparent"]=="boolean"&&(h.TRANSPARENT=String(t["wms:transparent"])),typeof t.type=="string"&&t.type.startsWith("image/")&&(h.FORMAT=t.type);const g=await i(Yo.TileWMS,Object.assign({},r,{params:h}));o.push(new cWe(g))}break;case"wmts":const u=await this.getWmtsCapabilities_(n);if(!u)return;const f=Array.isArray(t["wmts:layer"])?t["wmts:layer"]:[t["wmts:layer"]];for(const c of f){let d=Object.assign({},r,{layer:c});typeof t.type=="string"&&t.type.startsWith("image/")&&(d.format=t.type),d=await i(Yo.WMTS,d),o.push(new uWe(_De(u,d)))}break;case"xyz":o.push(new B3(await i(Yo.XYZ,r)));break;default:return}return o.map(s=>{let a;return s instanceof JN?a=new fWe({source:s,declutter:!0}):s instanceof gke?a=new PD({source:s}):a=new fI({source:s}),this.addLayer_(a,t),a})}async addGeoTiff_(t){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);let r={sources:[hIt(t,this.bands_)]};const i=await hke(t);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(Yo.GeoTIFF,r,t));const o=new bj(r),s=new Promise((a,l)=>{o.on("error",l),o.on("change",()=>{o.getState()==="error"?l(o.getError()):a()})});try{await s;const a=new PD({source:o});return this.addLayer_(a,t),a}catch(a){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);this.handleError_(a)}}async addTileLayerForImagery_(t){let n=this.buildTileUrlTemplate_(t);n instanceof Promise&&(n=await n);let r={crossOrigin:this.crossOrigin_,url:n};this.getSourceOptions_&&(r=await this.getSourceOptions_(Yo.XYZ,r,t));const i=new fI({source:new B3(r)});return this.addLayer_(i,t),i}addLayer_(t,n=null,r=0){n&&t.set("stac",n),t.setZIndex(r),this.getLayers().push(t)}addFootprint_(){let t=null;const n=this.getData();if(n.isItemCollection()||n.isCollectionCollection()?t=L9e(n.getBoundingBox()):t=n.toGeoJSON(),t){const r=this.createGeoJsonLayer_(t,pke(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,n,1),r}return null}async addGeoJson_(t){try{const n=await this.fetch_(t.getAbsoluteUrl()),r=this.createGeoJsonLayer_(n);return this.addLayer_(r,t),r}catch(n){this.handleError_(n)}}createGeoJsonLayer_(t,n=null,r=!0){const i=new zN,o=new NL({format:i,loader:(s,a,l)=>{t=y3(t);const u=i.readFeatures(t,{featureProjection:l});o.addFeatures(u)}});return n||(n=dke),new cDe({source:o,style:n,visible:r})}async addLabelExtension_(){const t=this.getData();if(!(t instanceof Cj))return;let n=t.getAssetsWithRoles(["labels","labels-vector"],!0),r;n.length>1&&(r=n.find(o=>o.roles.includes("labels-vector"))),r||(r=t.getAsset("vector_labels")),r||(n=t.getAssets().filter(o=>o.type===gN&&!o.roles),n.length===1&&(r=n[0]));const i=t.getLinksWithRels(["source"]);if(r&&i.length>0){const o=i.map(async a=>{try{const l=await this.fetch_(a.getAbsoluteUrl());return bk(l)}catch(l){return this.handleError_(l),null}}),s=(await Promise.all(o)).filter(a=>a instanceof Ld);await this.addChildren_(s,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(o){this.handleError_(o)}}async updateLayers_(){const t=this.getLayers();for(let i=t.getLength()-1;i>=0;i--){const o=t.item(i);o.get("stac")&&!o.get("bounds")&&t.removeAt(i)}const n=this.getData();if(Array.isArray(this.displayWebMapLink_)){const i=this.getWebMapLinks().map(async o=>await this.addLayerForLink(o));await Promise.all(i)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const r=this.getAssets();if(r){const i=r.map(async o=>{if(o){if(o.type===gN)return await this.addGeoJson_(o);if(o.isGeoTIFF())return await this.addGeoTiff_(o);if(o.canBrowserDisplayImage())return await this.addPreviewImage_(o)}});await Promise.all(i)}if(this.hasOnlyBounds()){if(n instanceof Aj)await this.addChildren_(n.getAll(),this.childrenOptions_);else if(n instanceof Ld){if(n.isItem()&&n.supportsExtension(fIt)&&n.getMetadata("label:type")==="vector"){await this.addLabelExtension_();return}const i=this.getWebMapLinks();if(i.length>0)await this.addLayerForLink(i[0]);else{const o=n.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let s;if(o&&this.displayOverview_&&(s=await this.addGeoTiff_(o)),this.displayPreview_&&(!o||!s)){const a=n.getThumbnails(!0,"overview");a.length>0&&await this.addPreviewImage_(a[0])}}}}}hasOnlyBounds(){const t=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==t)>"u"}getWebMapLinks(){const t=this.getData();if(t instanceof Rf)return[];let n=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(n=[this.displayWebMapLink_]);let r=t.getLinksWithRels(n);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){const o=r.find(s=>s.id===i);return o||null}return i}).filter(i=>!!i):r.sort((i,o)=>{const s=n.indexOf(i.rel),a=n.indexOf(o.rel);return s-a}),r}async setAssets(t){if(Array.isArray(t)){const n=this.getData();this.assets_=t.map(r=>n instanceof Ld&&typeof r=="string"?n.getAsset(r):r instanceof Rf?r:new Rf(r))}else this.assets_=null;await this.updateLayers_()}async setChildren(t,n={}){if(!t){this.children_=null,this.childrenOptions_={};return}t instanceof B9e?this.children_=t.getAll():Lu(t)&&t.type==="FeatureCollection"?this.children_=bk(t,!this.disableMigration_).getAll():Array.isArray(t)?this.children_=t.map(r=>r instanceof Ld?r:bk(r,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.childrenOptions_=n,await this.updateLayers_()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const t=this.map_.getView();if(!t)return;let n;const r=this.getData();r&&(n=r.getBoundingBox());const i=this.getChildren();if(!n&&i){const o=i.map(s=>s.getBoundingBox());n=wj(o)}if(n)return cI(n,"EPSG:4326",t.getProjection())}getAttributions(){const t=[],n=this.getData();if(n){const r=n.getMetadata("attribution");r&&r.push(r)}return t}getSource(){return null}async getWmtsCapabilities_(t){try{const n=new URL(t);n.searchParams.set("service","wmts"),n.searchParams.set("request","GetCapabilities");const r=await this.fetch_(n.toString(),"text");return new KU().read(r)}catch{return null}}}dWe(nI);window.eoxMapAdvancedOlLayers={Graticule:Q$t,Heatmap:VMt,Image,Layer:XN,VectorImage:KMt,WebGLPoints:QMt,WebGLTile:PD,WebGLVector:JMt,STAC:Sj};function mIt(e){const t=e[0],n=new Array(t);let r=1<<t-1,i,o;for(i=0;i<t;++i)o=48,e[1]&r&&(o+=1),e[2]&r&&(o+=2),n[i]=String.fromCharCode(o),r>>=1;return n.join("")}const vIt='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class yIt extends Pp{constructor(t){const n=t.hidpi!==void 0?t.hidpi:!1;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:Qi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=n,this.culture_=t.culture!==void 0?t.culture:"en-us",this.maxZoom_=t.maxZoom!==void 0?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(t.statusCode!=200||t.statusDescription!="OK"||t.authenticationResultCode!="ValidCredentials"||t.resourceSets.length!=1||t.resourceSets[0].resources.length!=1){this.setState("error");return}const n=t.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),o=hA(i),s=this.hidpi_?2:1,a=n.imageWidth==n.imageHeight?n.imageWidth/s:[n.imageWidth/s,n.imageHeight/s],l=dA({extent:o,minZoom:n.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,f=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=eP(n.imageUrlSubdomains.map(function(d){const p=[0,0,0],h=n.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(g,m,y){if(!g)return;aI(g[0],g[1],g[2],p);const v=new URL(h.replace("{quadkey}",mIt(p))),x=v.searchParams;return f&&(x.set("dpi","d1"),x.set("device","mobile")),c===!0?x.delete("n"):c===!1&&x.set("n","z"),v.toString()}})),n.imageryProviders){const d=QN(Qi("EPSG:4326"),this.getProjection());this.setAttributions(p=>{const h=[],g=p.viewState,m=this.getTileGrid(),y=m.getZForResolution(g.resolution,this.zDirection),x=m.getTileCoordForCoordAndZ(g.center,y)[0];return n.imageryProviders.map(function(_){let E=!1;const C=_.coverageAreas;for(let w=0,T=C.length;w<T;++w){const R=C[w];if(x>=R.zoomMin&&x<=R.zoomMax){const L=R.bbox,B=[L[1],L[0],L[3],L[2]],P=c1(B,d);if(u1(P,p.extent)){E=!0;break}}}E&&h.push(_.attribution)}),h.push(vIt),h})}this.setState("ready")}}class bIt extends B3{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:t.maxZoom!==void 0?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t]){this.applyTemplate_(this.templateCache_[t]);return}let n="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(n+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(t,n){const r=n.target;if(!r.status||r.status>=200&&r.status<300){let i;try{i=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const n="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)}}class xIt extends NL{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(n){const r=n.getGeometry();return Wc(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,n,r){var i;(i=this.source)==null||i.loadFeatures(t,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Zl.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Zl.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,n){const r=t===0?0:Math.min(n,t)/t,i=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=fA(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let o=0,s=r.length;o<s;o++){const a=r[o];if(!(oo(a)in i)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();hWe(u,t),YN(t,n,t);const f=this.source.getFeaturesInExtent(t).filter(function(c){const d=oo(c);return d in i?!1:(i[d]=!0,!0)});this.features.push(this.createCluster(f,t))}}}}createCluster(t,n){const r=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?pWe(r,l.getCoordinates()):t.splice(a,1)}gWe(r,1/t.length);const i=nm(n),o=this.interpolationRatio,s=new Cf([r[0]*(1-o)+i[0]*o,r[1]*(1-o)+i[1]*o]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new dc({geometry:s,features:t})}}const wIt="https://tile.googleapis.com/v1/createSession",_It="https://tile.googleapis.com/v1/2dtiles",EIt="https://tile.googleapis.com/tile/v1/viewport",AIt=22;class CIt extends Pp{constructor(t){const n=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const r={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(r.imageFormat=t.imageFormat),t.scale&&(r.scale=t.scale),n&&(r.highDpi=!0),t.layerTypes&&(r.layerTypes=t.layerTypes),t.styles&&(r.styles=t.styles),t.overlay===!0&&(r.overlay=!0),t.apiOptions&&(r.apiOptions=t.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,n){return fetch(t,n)}async createSession_(){const t=wIt+"?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(t,n);if(!r.ok){try{const c=await r.json();this.error_=new Error(c.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const i=await r.json(),o=this.getTilePixelRatio(1),s=[i.tileWidth/o,i.tileHeight/o];this.tileGrid=dA({extent:hA(this.getProjection()),maxZoom:AIt,tileSize:s});const a=i.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(c,d,p){const h=c[0],g=c[1],m=c[2];return`${_It}/${h}/${g}/${m}?session=${a}&key=${l}`};const u=parseInt(i.expiry,10)*1e3,f=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),f),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[gm.ANIMATING]||t.viewHints[gm.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[n,r]=Lxe(mWe(t.extent),t.viewState.projection),[i,o]=Lxe(vWe(t.extent),t.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${o}&south=${r}&east=${i}&west=${n}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,f=this.apiKey_,c=`${EIt}?session=${u}&key=${f}&${l}`;return this.previousViewportAttribution_=await fetch(c).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let j9e=class extends GN{constructor(t,n,r,i,o,s,a){super(n,r,i,o,s,a),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==oi.LOADED){const n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;const r=hm(n[0],n[1]);return r.drawImage(t,0,0),this.zoomifyImage_=r.canvas,r.canvas}return t}};class SIt extends Pp{constructor(t){const n=t.size,r=t.tierSizeCalculation!==void 0?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,o=n[0],s=n[1],a=[],l=t.tileSize||dI;let u=l*i;switch(r){case"default":for(;o>u||s>u;)a.push([Math.ceil(o/u),Math.ceil(s/u)]),u+=u;break;case"truncated":let C=o,w=s;for(;C>u||w>u;)a.push([Math.ceil(C/u),Math.ceil(w/u)]),C>>=1,w>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const f=[i],c=[0];for(let C=1,w=a.length;C<w;C++)f.push(i<<C),c.push(a[C-1][0]*a[C-1][1]+c[C-1]);f.reverse();const d=new UL({tileSize:l,extent:t.extent||[0,-s,o,0],resolutions:f});let p=t.url;p&&!p.includes("{TileGroup}")&&!p.includes("{tileIndex}")&&(p+="{TileGroup}/{z}-{x}-{y}.jpg");const h=EDe(p);let g=l*i;function m(C){return function(w,T,R){if(!w)return;const L=w[0],B=w[1],P=w[2],S=B+P*a[L][0],k=(S+c[L])/g|0,D={z:L,x:B,y:P,tileIndex:S,TileGroup:"TileGroup"+k};return C.replace(/\{(\w+?)\}/g,function(O,N){return D[N]})}}const y=eP(h.map(m)),v=j9e.bind(null,Ff(l*i));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:v,tileGrid:d,tileUrlFunction:y,transition:t.transition}),this.zDirection=t.zDirection;const x=d.getTileCoordForCoordAndResolution(nm(d.getExtent()),f[f.length-1]),_=y(x,1,null),E=new Image;E.addEventListener("error",()=>{g=l,this.changed()}),E.src=_}}function $2(e){return e.toLocaleString("en",{maximumFractionDigits:10})}class kIt extends Pp{constructor(t){const n=t||{};let r=n.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const i=n.version||Xs.VERSION2,o=n.sizes||[],s=n.size;Wc(s!=null&&Array.isArray(s)&&s.length==2&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`");const a=s[0],l=s[1],u=n.tileSize,f=n.tilePixelRatio||1,c=n.format||"jpg",d=n.quality||(n.version==Xs.VERSION1?"native":"default");let p=n.resolutions||[];const h=n.supports||[],g=n.extent||[0,-l,a,0],m=o!=null&&Array.isArray(o)&&o.length>0,y=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),v=h!=null&&Array.isArray(h)&&(h.includes("regionByPx")||h.includes("regionByPct"))&&(h.includes("sizeByWh")||h.includes("sizeByH")||h.includes("sizeByW")||h.includes("sizeByPct"));let x,_,E;if(p.sort(function(R,L){return L-R}),y||v)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(x=u,_=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(x=u[0],_=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(x=u[0],_=u[1]):u[0]==null&&Number.isInteger(u[1])&&(x=u[1],_=u[1])))),(x===void 0||_===void 0)&&(x=dI,_=dI),p.length==0){E=Math.max(Math.ceil(Math.log(a/x)/Math.LN2),Math.ceil(Math.log(l/_)/Math.LN2));for(let R=E;R>=0;R--)p.push(Math.pow(2,R))}else{const R=Math.max(...p);E=Math.round(Math.log(R)/Math.LN2)}else if(x=a,_=l,p=[],m){o.sort(function(L,B){return L[0]-B[0]}),E=-1;const R=[];for(let L=0;L<o.length;L++){const B=a/o[L][0];if(p.length>0&&p[p.length-1]==B){R.push(L);continue}p.push(B),E++}if(R.length>0)for(let L=0;L<R.length;L++)o.splice(R[L]-L,1)}else p.push(1),o.push([a,l]),E=0;const C=new UL({tileSize:[x,_],extent:g,origin:lI(g),resolutions:p}),w=function(R,L,B){let P,S;const k=R[0];if(k>E)return;const D=R[1],O=R[2],N=p[k];if(!(D===void 0||O===void 0||N===void 0||D<0||Math.ceil(a/N/x)<=D||O<0||Math.ceil(l/N/_)<=O)){if(v||y){const j=D*x*N,q=O*_*N;let W=x*N,Q=_*N,ee=x,H=_;if(j+W>a&&(W=a-j),q+Q>l&&(Q=l-q),j+x*N>a&&(ee=Math.floor((a-j+N-1)/N)),q+_*N>l&&(H=Math.floor((l-q+N-1)/N)),j==0&&W==a&&q==0&&Q==l)P="full";else if(!v||h.includes("regionByPx"))P=j+","+q+","+W+","+Q;else if(h.includes("regionByPct")){const se=$2(j/a*100),ne=$2(q/l*100),ge=$2(W/a*100),we=$2(Q/l*100);P="pct:"+se+","+ne+","+ge+","+we}i==Xs.VERSION3&&(!v||h.includes("sizeByWh"))?S=ee+","+H:!v||h.includes("sizeByW")?S=ee+",":h.includes("sizeByH")?S=","+H:h.includes("sizeByWh")?S=ee+","+H:h.includes("sizeByPct")&&(S="pct:"+$2(100/N))}else if(P="full",m){const j=o[k][0],q=o[k][1];i==Xs.VERSION3?j==a&&q==l?S="max":S=j+","+q:j==a?S="full":S=j+","}else S=i==Xs.VERSION3?"max":"full";return r+P+"/"+S+"/0/"+d+"."+c}},T=j9e.bind(null,Ff(u||256).map(function(R){return R*f}));super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:T,tileGrid:C,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:w,transition:n.transition}),this.zDirection=n.zDirection}}function H9e(e,t,n,r,i,o){const s=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[Rxe(Za(t)/a,Fxe),Rxe($f(t)/a,Fxe)];o.SIZE=l[0]+","+l[1],o.BBOX=t.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*r:90*r);const u=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return z3(u,o)}function TIt(e){const t=e.load?e.load:sx,n=Qi(e.projection||"EPSG:3857"),r=e.ratio??1.5,i=e.crossOrigin??null;return function(o,s,a){a=e.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,e.params),o=ADe(o,s,a,r);const u=H9e(e.url,o,s,a,n,l),f=new Image;return f.crossOrigin=i,t(f,u).then(c=>{const d=Za(o)/c.width*a;return{image:c,extent:o,resolution:d,pixelRatio:a}})}}class DIt extends ey{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:ZN,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=TIt({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),sx(o))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class LIt extends ey{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getImageInternal(t,n,r,i){n=this.findNearestResolution(n);let o=this.canvas_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==n&&o.getPixelRatio()==r&&D3(o.getExtent(),t))return o;t=t.slice(),yDe(t,this.ratio_);const s=Za(t)/n,a=$f(t)/n,l=[s*r,a*r],u=this.canvasFunction_.call(this,t,n,r,l,i);return u&&(o=new sj(t,n,r,u)),this.canvas_=o,this.renderedRevision_=this.getRevision(),o}}function RIt(e,t,n,r){const i=Za(e),o=$f(e),s=t[0],a=t[1],l=.0254/r;return a*i>s*o?i*n/(s*l):o*n/(a*l)}function FIt(e,t,n,r,i,o,s){const a=RIt(n,r,o,s),l=nm(n),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:s,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,t),z3(e,u)}function $It(e){const t=e.load||sx,n=e.useOverlay??!1,r=e.metersPerUnit||1,i=e.displayDpi||96,o=e.ratio??1,s=e.crossOrigin??null;return function(a,l,u){const f=new Image;f.crossOrigin=s,a=ADe(a,l,u,o);const c=Za(a)/l,d=$f(a)/l,p=[c*u,d*u],h=FIt(e.url,e.params,a,p,n,r,i);return t(f,h).then(g=>({image:g,extent:a,pixelRatio:u}))}}class MIt extends ey{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.displayDpi_=t.displayDpi!==void 0?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:ZN,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.metersPerUnit_=t.metersPerUnit!==void 0?t.metersPerUnit:1,this.ratio_=t.ratio!==void 0?t.ratio:1,this.useOverlay_=t.useOverlay!==void 0?t.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=$It({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),sx(o))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}const OIt=new Error("Image failed to load");function q9e(e,t,n,r,i){return new Promise((o,s)=>{const a=new Image;a.crossOrigin=i.crossOrigin??null,a.addEventListener("load",()=>o(a)),a.addEventListener("error",()=>s(OIt)),a.src=CDe(e,t,n,r,i.maxY)})}function mke(e){return function(t,n,r,i){const o=yWe(e,t,n,r);return q9e(o,t,n,r,i)}}function IIt(e){return function(t,n,r,i){const o=e(t,n,r,i);return q9e(o,t,n,r,i)}}function vke(e){let t;if(Array.isArray(e))t=mke(e);else if(typeof e=="string"){const n=EDe(e);t=mke(n)}else if(typeof e=="function")t=IIt(e);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return t}let yke=0;function bke(e){return Array.isArray(e)?e.join(`
`):typeof e=="string"?e:(++yke,"url-function-key-"+yke)}class G9e extends _C{constructor(t){t=t||{};let n=t.loader,r;t.url&&(n=vke(t.url),r=bke(t.url));const i=n?t.state:"loading",o=t.wrapX===void 0?!0:t.wrapX;super({loader:n,key:r,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:o,transition:t.transition,interpolate:t.interpolate!==!1,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const n=vke(t);this.setLoader(n),this.setKey(bke(t)),this.getState()!=="ready"&&this.setState("ready")}}const NIt={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},PIt={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function W9e(e,t){if(!t.length)return e;const n=new URL(e,"file:/");if(n.pathname.split("/").includes("collections"))return tE('The "collections" query parameter cannot be added to collection endpoints'),e;const r=t.map(s=>encodeURIComponent(s)).join(",");n.searchParams.append("collections",r);const i=e.split("?")[0],o=decodeURIComponent(n.searchParams.toString());return`${i}?${o}`}function BIt(e,t,n){let r,i;for(let o=0;o<e.length;++o){const s=e[o];if(s.rel==="item"){if(s.type===t){r=s.href;break}(NIt[s.type]||!i&&s.type.startsWith("image/"))&&(i=s.href)}}if(!r)if(i)r=i;else throw new Error('Could not find "item" link');return n&&(r=W9e(r,n)),r}function zIt(e,t,n,r){let i,o;const s={};for(let a=0;a<e.length;++a){const l=e[a];if(s[l.type]=l.href,l.rel==="item"){if(l.type===t){i=l.href;break}PIt[l.type]&&(o=l.href)}}if(!i&&n)for(let a=0;a<n.length;++a){const l=n[a];if(s[l]){i=s[l];break}}if(!i)if(o)i=o;else throw new Error('Could not find "item" link');return r&&(i=W9e(i,r)),i}function xke(e,t,n,r){let i=e.projection;if(!i&&(typeof t.crs=="string"?i=Qi(t.crs):"uri"in t.crs&&(i=Qi(t.crs.uri)),!i))throw new Error(`Unsupported CRS: ${JSON.stringify(t.crs)}`);const o=t.orderedAxes,a=!(o?o.slice(0,2).map(C=>C.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):i.getAxisOrientation()).startsWith("en"),l=t.tileMatrices,u={};for(let C=0;C<l.length;++C){const w=l[C];u[w.id]=w}const f={},c=[];if(r)for(let C=0;C<r.length;++C){const w=r[C],T=w.tileMatrix;c.push(T),f[T]=w}else for(let C=0;C<l.length;++C){const w=l[C].id;c.push(w)}const d=c.length,p=new Array(d),h=new Array(d),g=new Array(d),m=new Array(d),y=[-1/0,-1/0,1/0,1/0];for(let C=0;C<d;++C){const w=c[C],T=u[w],R=T.pointOfOrigin;a?p[C]=[R[1],R[0]]:p[C]=R,h[C]=T.cellSize,g[C]=[T.matrixWidth,T.matrixHeight],m[C]=[T.tileWidth,T.tileHeight];const L=f[w];if(L){const B=T.cellSize*T.tileWidth,P=p[C][0]+L.minTileCol*B,S=p[C][0]+(L.maxTileCol+1)*B,k=T.cellSize*T.tileHeight,D=T.cornerOfOrigin==="bottomLeft";let O,N;D?(O=p[C][1]+L.minTileRow*k,N=p[C][1]+(L.maxTileRow+1)*k):(O=p[C][1]-(L.maxTileRow+1)*k,N=p[C][1]-L.minTileRow*k),Od(y,[P,O,S,N],y)}}const v=new UL({origins:p,resolutions:h,sizes:g,tileSizes:m,extent:r?y:void 0}),x=e.context,_=e.url;function E(C,w,T){if(!C)return;const R=c[C[0]],L=u[R],B=L.cornerOfOrigin==="bottomLeft",P={tileMatrix:R,tileCol:C[1],tileRow:B?-C[2]-1:C[2]};if(r){const k=f[L.id];if(P.tileCol<k.minTileCol||P.tileCol>k.maxTileCol||P.tileRow<k.minTileRow||P.tileRow>k.maxTileRow)return}Object.assign(P,x);const S=n.replace(/\{(\w+?)\}/g,function(k,D){return P[D]});return C9e(_,S)}return{grid:v,projection:i,urlTemplate:n,urlFunction:E}}function UIt(e,t){const n=t.tileMatrixSetLimits;let r;if(t.dataType==="map")r=BIt(t.links,e.mediaType,e.collections);else if(t.dataType==="vector")r=zIt(t.links,e.mediaType,e.supportedMediaTypes,e.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(t.tileMatrixSet)return xke(e,t.tileMatrixSet,r,n);const i=t.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const o=i.href,s=C9e(e.url,o);return A9e(s).then(function(a){return xke(e,a,r,n)})}function V9e(e){return A9e(e.url).then(function(t){return UIt(e,t)})}class jIt extends Pp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};V9e(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){tE(t),this.setState("error")}}class HIt extends JN{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};V9e(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){tE(t),this.setState("error")}}function Y9e(e){return function(t){const n=t.buffers,r=t.meta,i=t.imageOps,o=t.width,s=t.height,a=n.length,l=n[0].byteLength;if(i){const d=new Array(a);for(let h=0;h<a;++h)d[h]=new ImageData(new Uint8ClampedArray(n[h]),o,s);return e(d,r).data.buffer}const u=new Uint8ClampedArray(l),f=new Array(a),c=new Array(a);for(let d=0;d<a;++d)f[d]=new Uint8ClampedArray(n[d]),c[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let h=0;h<a;++h){const g=f[h];c[h][0]=g[d],c[h][1]=g[d+1],c[h][2]=g[d+2],c[h][3]=g[d+3]}const p=e(c,r);u[d]=p[0],u[d+1]=p[1],u[d+2]=p[2],u[d+3]=p[3]}return u.buffer}}function qIt(e,t){const r=Object.keys(e.lib||{}).map(function(o){return"const "+o+" = "+e.lib[o].toString()+";"}).concat(["const __minion__ = ("+Y9e.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",t),i}function GIt(e,t){const n=Y9e(e.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||t({data:{buffer:n(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class WIt extends fDe{constructor(t){super(),this.imageOps_=!!t.imageOps;let n;t.threads===0?n=0:this.imageOps_?n=1:n=t.threads||1;const r=new Array(n);if(n)for(let i=0;i<n;++i)r[i]=qIt(t,this.onWorkerMessage_.bind(this,i));else r[0]=GIt(t,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,n,r){this.enqueue_({inputs:t,meta:n,callback:r}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const n=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:i,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},i);return}const s=t.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let l=0;l<o;++l){const u=l*a,f=[];for(let c=0,d=i.length;c<d;++c)f.push(i[c].slice(u,u+a));this.workers_[l].postMessage({buffers:f,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},f)}}onWorkerMessage_(t,n){this.disposed||(this.dataLookup_[t]=n.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,n=this.workers_.length;let r,i;if(n===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const o=t.inputs[0].data.length;r=new Uint8ClampedArray(o),i=new Array(n);const s=4*Math.ceil(o/4/n);for(let a=0;a<n;++a){const l=this.dataLookup_[a].buffer,u=a*s;r.set(new Uint8ClampedArray(l),u),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(r,t.inputs[0].width,t.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const wke={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class _ke extends bDe{constructor(t,n,r){super(t),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=r}}class X9e extends ey{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=XIt(t.sources);const n=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(Zl.CHANGE,n);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new bWe(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Wa(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:YIt(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Wa(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:oo(this),renderTargets:{}},this.setAttributions(function(r){var o;const i=[];for(let s=0,a=t.sources.length;s<a;++s){const l=t.sources[s],u=l instanceof tP?l:l.getSource();if(!u)continue;const f=(o=u.getAttributions())==null?void 0:o(r);typeof f=="string"?i.push(f):f!==void 0&&i.push(...f)}return i}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,n){this.processor_&&this.processor_.dispose(),this.processor_=new WIt({operation:t,imageOps:this.operationType_==="image",queue:1,lib:n,threads:this.threads_}),this.changed()}updateFrameState_(t,n,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const o=nm(t);i.size[0]=Math.ceil(Za(t)/n),i.size[1]=Math.ceil($f(t)/n),i.extent=[o[0]-i.size[0]*n/2,o[1]-i.size[1]*n/2,o[0]+i.size[0]*n/2,o[1]+i.size[1]*n/2],i.time=Date.now();const s=i.viewState;return s.center=o,s.projection=r,s.resolution=n,i}allSourcesReady_(){let t=!0,n;for(let r=0,i=this.layers_.length;r<i;++r)if(n=this.layers_[r].getSource(),!n||n.getState()!=="ready"){t=!1;break}return t}getImage(t,n,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),n=this.findNearestResolution(n);const o=this.updateFrameState_(t,n,i);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(n!==s||!Q_(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,n=this.layers_.length,r=new Array(n);for(let o=0;o<n;++o){t.layerIndex=o,t.renderTargets={};const s=VIt(this.layers_[o],t);if(s)r[o]=s;else return}const i={};this.dispatchEvent(new _ke(wke.BEFOREOPERATIONS,t,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,n,r,i){if(n||!r)return;const o=t.extent,s=t.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!Q_(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(Za(o)/s),u=Math.round($f(o)/s);a=hm(l,u),this.renderedImageCanvas_=new sj(o,s,1,a.canvas)}a.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new _ke(wke.AFTEROPERATIONS,t,i))}getResolutions(t){if(!this.useResolutions_)return null;let n=super.getResolutions();if(!n)for(let r=0,i=this.layers_.length;r<i&&(n=this.layers_[r].getSource().getResolutions(t),!n);++r);return n}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}X9e.prototype.dispose;let q0=null;function VIt(e,t){const n=e.getRenderer();if(!n)throw new Error("Unsupported layer type: "+e);if(!n.prepareFrame(t))return null;const r=t.size[0],i=t.size[1];if(r===0||i===0)return null;const o=n.renderFrame(t,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===r&&s.height===i)return s.getContext("2d").getImageData(0,0,r,i)}if(!q0)q0=hm(r,i,void 0,{willReadFrequently:!0});else{const a=q0.canvas;a.width!==r||a.height!==i?q0=hm(r,i,void 0,{willReadFrequently:!0}):q0.clearRect(0,0,r,i)}return q0.drawImage(s,0,0,r,i),q0.getImageData(0,0,r,i)}function YIt(e){return e.map(function(t){return t.getLayerState()})}function XIt(e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=KIt(e[r]);return n}function KIt(e){let t;return e instanceof tP?e instanceof KN?t=new fI({source:e}):e instanceof ey&&(t=new wDe({source:e})):t=e,t}const ZIt='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',QIt='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',JIt='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',e6t={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},t6t={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class n6t extends B3{constructor(t){const n=t.layer.indexOf("-"),r=n==-1?t.layer:t.layer.slice(0,n),i=t6t[r]||{minZoom:0,maxZoom:20,retina:!0},o=e6t[t.layer],s=t.apiKey?"?api_key="+t.apiKey:"",a=i.retina&&t.retina?"@2x":"",l=t.url!==void 0?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+a+"."+o.extension+s,u=[ZIt,QIt,xWe];t.layer.startsWith("stamen_")&&u.splice(1,0,JIt),super({attributions:u,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:i.maxZoom,minZoom:t.minZoom!==void 0?t.minZoom:i.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:l,tilePixelRatio:a?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}class r6t extends Pp{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=fA(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const n=[];for(const r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(t,n,r,i,o,s){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=wWe(_We(t),a.length);l=a[u]}return H9e(l,r,(this.tileGrid||this.getTileGridForProjection(o)).getResolution(t[0]),i,o,s)}getTilePixelRatio(t){return this.hidpi_?t:1}setParams(t){this.params_=Object.assign({},t),this.setKey(this.getKeyForParams_())}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=t[0])return;n!=1&&!this.hidpi_&&(n=1);const o=i.getTileCoordExtent(t,this.tmpExtent_);let s=Ff(i.getTileSize(t[0]),this.tmpSize);n!=1&&(s=EWe(s,n,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,s,o,n,r,a)}}class i6t extends G9e{constructor(t){t=t||{};const n=t.template||"z:{z} x:{x} y:{y}",r=t.source;super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:r!==void 0?r.getWrapX():void 0});const i=()=>{var s;this.projection=t.projection!==void 0?Qi(t.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof _C&&(this.transformMatrix=((s=r.transformMatrix)==null?void 0:s.slice())||null);const o=this.tileGrid;o&&this.setTileSizes(o.getResolutions().map((a,l)=>Ff(o.getTileSize(l)).map(u=>Math.max(Math.floor(u),1)))),this.setLoader((a,l,u,f)=>{const c=CDe(n,a,l,u,f.maxY),[d,p]=this.getTileSize(a),h=hm(d,p);return h.strokeStyle="grey",h.strokeRect(.5,.5,d+.5,p+.5),h.fillStyle="grey",h.strokeStyle="white",h.textAlign="center",h.textBaseline="middle",h.font="24px sans-serif",h.lineWidth=4,h.strokeText(c,d/2,p/2,d),h.fillText(c,d/2,p/2,d),Promise.resolve(h.canvas)}),this.setState("ready")};if(r===void 0||r.getState()==="ready")i();else{const o=()=>{r.getState()==="ready"&&(r.removeEventListener(Zl.CHANGE,o),i())};r.addEventListener(Zl.CHANGE,o)}}}class o6t extends SWe{constructor(t,n,r,i,o,s){super(t,n),this.src_=r,this.extent_=i,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const n=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof i!="string")return null;let o=i.charCodeAt(Math.floor(n*i.length));o>=93&&o--,o>=35&&o--,o-=32;let s=null;if(o in this.keys_){const a=this.keys_[o];this.data_&&a in this.data_?s=this.data_[a]:s=a}return s}forDataAtCoordinate(t,n,r){this.state==oi.EMPTY&&r===!0?(this.state=oi.IDLE,kWe(this,Zl.CHANGE,i=>{n(this.getData(t))}),this.loadInternal_()):r===!0?setTimeout(()=>{n(this.getData(t))},0):n(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=oi.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=oi.LOADED,this.changed()}loadInternal_(){if(this.state==oi.IDLE)if(this.state=oi.LOADING,this.jsonp_)xj(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(oi.EMPTY)}}class s6t extends KN{constructor(t){if(super({projection:Qi("EPSG:3857"),state:"loading",wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection}),this.preemptive_=t.preemptive!==void 0?t.preemptive:!0,this.tileUrlFunction_=AWe,this.template_=void 0,this.jsonp_=t.jsonp||!1,this.tileCache_=new dDe(512),t.url)if(this.jsonp_)xj(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,n,r,i){if(this.tileGrid){const o=this.tileGrid.getZForResolution(n,this.zDirection),s=this.tileGrid.getTileCoordForCoordAndZ(t,o),a=this.getTile(s[0],s[1],s[2],1,this.getProjection());a.getState()==oi.IDLE&&a.load(),a.forDataAtCoordinate(t,r,i)}else i===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const n=Qi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const f=QN(n,r);i=c1(t.bounds,f)}const o=hA(r),s=t.minzoom||0,a=t.maxzoom||22,l=dA({extent:o,maxZoom:a,minZoom:s});this.tileGrid=l,this.template_=t.template;const u=t.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=xDe(u,l),t.attribution){const f=i!==void 0?i:o;this.setAttributions(function(c){return u1(f,c.extent)?[t.attribution]:null})}this.setState("ready")}getTile(t,n,r,i,o){const s=[t,n,r],a=this.getTileCoordForTileUrlFunction(s,o),l=this.tileUrlFunction_(a,i,o),u=`${this.getKey()},${CWe(t,n,r)}`;if(this.tileCache_.containsKey(u))return this.tileCache_.get(u);this.tileCache_.expireCache();const f=new o6t(s,l!==void 0?oi.IDLE:oi.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache_.set(u,f),f}}class a6t extends Pp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,tilePixelRatio:t.tilePixelRatio,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection,wrapX:t.wrapX}),this.version_=t.version!==void 0?t.version:"1.0.0",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,fetch(t.url).then(n=>n.text()).then(n=>new window.DOMParser().parseFromString(n,"application/xml")).then(n=>{this.handleCapabilitiesResponse(n,t)})}handleCapabilitiesResponse(t,n){const i=new KU().read(t),o=_De(i,n);this.crossOrigin=o.crossOrigin,this.projection=o.projection,this.tileGrid=o.tileGrid,this.requestEncoding_=o.requestEncoding,this.matrixSet_=o.matrixSet,this.style_=o.style,this.format_=o.format,this.dimensions_=o.dimensions,this.setUrls(o.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=eP(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(t){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=n==="KVP"?z3(t,r):t.replace(/\{(\w+?)\}/g,(s,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:s);const i=this.tileGrid,o=this.dimensions_;return function(s){if(!s)return;const a={TileMatrix:i.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(a,o);let l=t;return n==="KVP"?l=z3(l,a):l=l.replace(/\{(\w+?)\}/g,(u,f)=>a[f]),l}}}const dp=new Uint8Array([102,103,98,3,102,103,98,0]),oc=4,M2=4,O2=4,CC=4,Og=new Int32Array(2),Eke=new Float32Array(Og.buffer),Ake=new Float64Array(Og.buffer),xk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var mN;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(mN||(mN={}));class Wf{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Wf(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Og[0]=this.readInt32(t),Eke[0]}readFloat64(t){return Og[xk?0:1]=this.readInt32(t),Og[xk?1:0]=this.readInt32(t+4),Ake[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Eke[0]=n,this.writeInt32(t,Og[0])}writeFloat64(t,n){Ake[0]=n,this.writeInt32(t,Og[xk?0:1]),this.writeInt32(t+4,Og[xk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+M2+O2)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<O2;n++)t+=String.fromCharCode(this.readInt8(this.position_+M2+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=M2;const i=this.bytes_.subarray(t,t+r);return n===mN.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+M2}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=O2)throw new Error("FlatBuffers: file identifier must be length "+O2);for(let n=0;n<O2;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+M2+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o.unpack())}return r}}var ro,Ua=((ro={})[ro.Byte=0]="Byte",ro[ro.UByte=1]="UByte",ro[ro.Bool=2]="Bool",ro[ro.Short=3]="Short",ro[ro.UShort=4]="UShort",ro[ro.Int=5]="Int",ro[ro.UInt=6]="UInt",ro[ro.Long=7]="Long",ro[ro.ULong=8]="ULong",ro[ro.Float=9]="Float",ro[ro.Double=10]="Double",ro[ro.String=11]="String",ro[ro.Json=12]="Json",ro[ro.DateTime=13]="DateTime",ro[ro.Binary=14]="Binary",ro);class wa{constructor(){Cn(this,"bb",null);Cn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsColumn(t,n){return(n||new wa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,n){return t.setPosition(t.position()+CC),(n||new wa).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ua.Byte}title(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb_pos+n,t):null}static startColumn(t){t.startObject(11)}static addName(t,n){t.addFieldOffset(0,n,0)}static addType(t,n){t.addFieldInt8(1,n,Ua.Byte)}static addTitle(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWidth(t,n){t.addFieldInt32(4,n,-1)}static addPrecision(t,n){t.addFieldInt32(5,n,-1)}static addScale(t,n){t.addFieldInt32(6,n,-1)}static addNullable(t,n){t.addFieldInt8(7,+n,1)}static addUnique(t,n){t.addFieldInt8(8,+n,0)}static addPrimaryKey(t,n){t.addFieldInt8(9,+n,0)}static addMetadata(t,n){t.addFieldOffset(10,n,0)}static endColumn(t){let n=t.endObject();return t.requiredField(n,4),n}static createColumn(t,n,r,i,o,s,a,l,u,f,c,d){return wa.startColumn(t),wa.addName(t,n),wa.addType(t,r),wa.addTitle(t,i),wa.addDescription(t,o),wa.addWidth(t,s),wa.addPrecision(t,a),wa.addScale(t,l),wa.addNullable(t,u),wa.addUnique(t,f),wa.addPrimaryKey(t,c),wa.addMetadata(t,d),wa.endColumn(t)}}var mi,yl=((mi={})[mi.Unknown=0]="Unknown",mi[mi.Point=1]="Point",mi[mi.LineString=2]="LineString",mi[mi.Polygon=3]="Polygon",mi[mi.MultiPoint=4]="MultiPoint",mi[mi.MultiLineString=5]="MultiLineString",mi[mi.MultiPolygon=6]="MultiPolygon",mi[mi.GeometryCollection=7]="GeometryCollection",mi[mi.CircularString=8]="CircularString",mi[mi.CompoundCurve=9]="CompoundCurve",mi[mi.CurvePolygon=10]="CurvePolygon",mi[mi.MultiCurve=11]="MultiCurve",mi[mi.MultiSurface=12]="MultiSurface",mi[mi.Curve=13]="Curve",mi[mi.Surface=14]="Surface",mi[mi.PolyhedralSurface=15]="PolyhedralSurface",mi[mi.TIN=16]="TIN",mi[mi.Triangle=17]="Triangle",mi);class Ul{constructor(){Cn(this,"bb",null);Cn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsGeometry(t,n){return(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,n){return t.setPosition(t.position()+CC),(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb.__vector(this.bb_pos+n)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readUint64(this.bb.__vector(this.bb_pos+n)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):yl.Unknown}parts(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new Ul).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,n){t.addFieldOffset(0,n,0)}static createEndsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startEndsVector(t,n){t.startVector(4,n,4)}static addXy(t,n){t.addFieldOffset(1,n,0)}static createXyVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startXyVector(t,n){t.startVector(8,n,8)}static addZ(t,n){t.addFieldOffset(2,n,0)}static createZVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startZVector(t,n){t.startVector(8,n,8)}static addM(t,n){t.addFieldOffset(3,n,0)}static createMVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startMVector(t,n){t.startVector(8,n,8)}static addT(t,n){t.addFieldOffset(4,n,0)}static createTVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startTVector(t,n){t.startVector(8,n,8)}static addTm(t,n){t.addFieldOffset(5,n,0)}static createTmVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startTmVector(t,n){t.startVector(8,n,8)}static addType(t,n){t.addFieldInt8(6,n,yl.Unknown)}static addParts(t,n){t.addFieldOffset(7,n,0)}static createPartsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startPartsVector(t,n){t.startVector(4,n,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,n,r,i,o,s,a,l,u){return Ul.startGeometry(t),Ul.addEnds(t,n),Ul.addXy(t,r),Ul.addZ(t,i),Ul.addM(t,o),Ul.addT(t,s),Ul.addTm(t,a),Ul.addType(t,l),Ul.addParts(t,u),Ul.endGeometry(t)}}class Fc{constructor(){Cn(this,"bb",null);Cn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFeature(t,n){return(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,n){return t.setPosition(t.position()+CC),(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let n=this.bb.__offset(this.bb_pos,4);return n?(t||new Ul).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}properties(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb.__vector(this.bb_pos+n)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new wa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,n){t.addFieldOffset(0,n,0)}static addProperties(t,n){t.addFieldOffset(1,n,0)}static createPropertiesVector(t,n){t.startVector(1,n.length,1);for(let r=n.length-1;r>=0;r--)t.addInt8(n[r]);return t.endVector()}static startPropertiesVector(t,n){t.startVector(1,n,1)}static addColumns(t,n){t.addFieldOffset(2,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,n){t.finish(n)}static finishSizePrefixedFeatureBuffer(t,n){t.finish(n,void 0,!0)}static createFeature(t,n,r,i){return Fc.startFeature(t),Fc.addGeometry(t,n),Fc.addProperties(t,r),Fc.addColumns(t,i),Fc.endFeature(t)}}function uO(e,t){let n=[];for(let r=0;r<e.length;r+=2){let i=[e[r],e[r+1]];t&&i.push(t[r>>1]),n.push(i)}return n}new TextEncoder;let Cke=new TextDecoder;function l6t(e,t){let n={};if(!t||t.length===0)return n;let r=e.propertiesArray();if(!r)return n;let i=new DataView(r.buffer,r.byteOffset),o=e.propertiesLength(),s=0;for(;s<o;){let a=i.getUint16(s,!0);s+=2;let l=t[a],u=l.name;switch(l.type){case Ua.Bool:n[u]=!!i.getUint8(s),s+=1;break;case Ua.Byte:n[u]=i.getInt8(s),s+=1;break;case Ua.UByte:n[u]=i.getUint8(s),s+=1;break;case Ua.Short:n[u]=i.getInt16(s,!0),s+=2;break;case Ua.UShort:n[u]=i.getUint16(s,!0),s+=2;break;case Ua.Int:n[u]=i.getInt32(s,!0),s+=4;break;case Ua.UInt:n[u]=i.getUint32(s,!0),s+=4;break;case Ua.Long:n[u]=Number(i.getBigInt64(s,!0)),s+=8;break;case Ua.ULong:n[u]=Number(i.getBigUint64(s,!0)),s+=8;break;case Ua.Float:n[u]=i.getFloat32(s,!0),s+=4;break;case Ua.Double:n[u]=i.getFloat64(s,!0),s+=8;break;case Ua.DateTime:case Ua.String:{let f=i.getUint32(s,!0);s+=4,n[u]=Cke.decode(r.subarray(s,s+f)),s+=f;break}case Ua.Json:{let f=i.getUint32(s,!0);s+=4;let c=Cke.decode(r.subarray(s,s+f));n[u]=JSON.parse(c),s+=f;break}case Ua.Binary:{let f=i.getUint32(s,!0);s+=4,n[u]=r.subarray(s,s+f),s+=f;break}default:throw Error(`Unknown type ${l.type}`)}}return n}const kj=new Uint8Array(0);function u6t(){return this._source.cancel()}function c6t(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function f6t(){var e=this,t=e._array.subarray(e._index);return e._source.read().then(function(n){return e._array=kj,e._index=0,n.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:c6t(t,n.value)}})}function d6t(e){if((e|=0)<0)throw new Error("invalid length");var t=this,n=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var r=new Uint8Array(e);return r.set(this._array.subarray(this._index)),function i(){return t._source.read().then(function(o){return o.done?(t._array=kj,t._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=e?(t._array=o.value,t._index=e-n,r.set(o.value.subarray(0,e-n),n),r):(r.set(o.value,n),n+=o.value.length,i())})}()}function h6t(e){return typeof e.slice=="function"?e:new p$(typeof e.read=="function"?e:e.getReader())}function p$(e){this._source=e,this._array=kj,this._index=0}p$.prototype.read=f6t;p$.prototype.slice=d6t;p$.prototype.cancel=u6t;class Tc{constructor(){Cn(this,"bb",null);Cn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsCrs(t,n){return(n||new Tc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,n){return t.setPosition(t.position()+CC),(n||new Tc).__init(t.readInt32(t.position())+t.position(),t)}org(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}wkt(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__string(this.bb_pos+n,t):null}codeString(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb_pos+n,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,n){t.addFieldOffset(0,n,0)}static addCode(t,n){t.addFieldInt32(1,n,0)}static addName(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWkt(t,n){t.addFieldOffset(4,n,0)}static addCodeString(t,n){t.addFieldOffset(5,n,0)}static endCrs(t){return t.endObject()}static createCrs(t,n,r,i,o,s,a){return Tc.startCrs(t),Tc.addOrg(t,n),Tc.addCode(t,r),Tc.addName(t,i),Tc.addDescription(t,o),Tc.addWkt(t,s),Tc.addCodeString(t,a),Tc.endCrs(t)}}class zD{constructor(){Cn(this,"bb",null);Cn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsHeader(t,n){return(n||new zD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,n){return t.setPosition(t.position()+CC),(n||new zD).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}envelope(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):yl.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new wa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let n=this.bb.__offset(this.bb_pos,24);return n?(t||new Tc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}title(t){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb_pos+n,t):null}metadata(t){let n=this.bb.__offset(this.bb_pos,30);return n?this.bb.__string(this.bb_pos+n,t):null}static startHeader(t){t.startObject(14)}static addName(t,n){t.addFieldOffset(0,n,0)}static addEnvelope(t,n){t.addFieldOffset(1,n,0)}static createEnvelopeVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startEnvelopeVector(t,n){t.startVector(8,n,8)}static addGeometryType(t,n){t.addFieldInt8(2,n,yl.Unknown)}static addHasZ(t,n){t.addFieldInt8(3,+n,0)}static addHasM(t,n){t.addFieldInt8(4,+n,0)}static addHasT(t,n){t.addFieldInt8(5,+n,0)}static addHasTm(t,n){t.addFieldInt8(6,+n,0)}static addColumns(t,n){t.addFieldOffset(7,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static addFeaturesCount(t,n){t.addFieldInt64(8,n,BigInt("0"))}static addIndexNodeSize(t,n){t.addFieldInt16(9,n,16)}static addCrs(t,n){t.addFieldOffset(10,n,0)}static addTitle(t,n){t.addFieldOffset(11,n,0)}static addDescription(t,n){t.addFieldOffset(12,n,0)}static addMetadata(t,n){t.addFieldOffset(13,n,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,n){t.finish(n)}static finishSizePrefixedHeaderBuffer(t,n){t.finish(n,void 0,!0)}}function g$(e){let t=zD.getRootAsHeader(e),n=t.featuresCount(),r=t.indexNodeSize(),i=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");i.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let o=t.crs(),s=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:t.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:s,title:t.title(),description:t.description(),metadata:t.metadata()}}const kL=class kL{constructor(){Cn(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};Cn(kL,"global",new kL);let UD=kL;const p6t=40,g6t=16;function m$(e,t){t=Math.min(Math.max(+t,2),65535);let n=e,r=n;do r+=n=Math.ceil(n/t);while(n!==1);return 40*r}function m6t(e,t){if(t<2)throw Error("Node size must be at least 2");if(e===0)throw Error("Number of items must be greater than 0");let n=e,r=n,i=[n];do r+=n=Math.ceil(n/t),i.push(n);while(n!==1);let o=[];for(let a of(n=r,i))o.push(n-a),n-=a;let s=[];for(let a=0;a<i.length;a++)s.push([o[a],o[a]+i[a]]);return s}async function*K9e(e,t,n,r){class i{constructor(p,h){Cn(this,"_level");Cn(this,"nodes");this._level=h,this.nodes=p}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(p){this.nodes[1]=p}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:o,minY:s,maxX:a,maxY:l}=n,u=m6t(e,t),f=u[0][0],c=[new i([0,1],u.length-1)];for(;c.length!==0;){let d=c.shift(),p=d.startNodeIdx(),h=p>=f,g=(()=>{let[,v]=u[d.level()],x=Math.min(d.endNodeIdx()+t,v);return h&&x<v?x+1:x})(),m=g-p,y=new DataView(await r(40*p,40*m));for(let v=p;v<g;v++){let x=v-p,_=40*x;if(a<y.getFloat64(_+0,!0)||l<y.getFloat64(_+8,!0)||o>y.getFloat64(_+16,!0)||s>y.getFloat64(_+24,!0))continue;let E=y.getBigUint64(_+32,!0);if(h){let R=(()=>{if(v<e-1){let B=(x+1)*40;return y.getBigUint64(B+32,!0)-E}return null})(),L=v-f;yield[Number(E),L,Number(R)];continue}let C=UD.global.extraRequestThreshold()/40,w=c[c.length-1];if(w!==void 0&&w.level()===d.level()-1&&E<w.endNodeIdx()+C){w.extendEndNodeIdx(Number(E));continue}let T=(()=>{let R=d.level()-1;return new i([Number(E),Number(E)+1],R)})();w!==void 0&&(w.level(),T.level()),c.push(T)}}}class Tj{constructor(t,n,r,i){Cn(this,"bytes");Cn(this,"header");Cn(this,"headerLength");Cn(this,"indexLength");this.bytes=t,this.header=n,this.headerLength=r,this.indexLength=i}static open(t){if(!t.subarray(0,3).every((s,a)=>dp[a]===s))throw Error("Not a FlatGeobuf file");let n=new DataView(t.buffer).getUint32(8,!0);if(n>10485760||n<8)throw Error("Invalid header size");let r=t.subarray(12,12+n),i=g$(new Wf(r)),o=m$(i.featuresCount,i.indexNodeSize);return new Tj(t,i,n,o)}async*selectBbox(t){let n=this.lengthBeforeTree(),r=async(i,o)=>{let s=n+i;return this.bytes.slice(s,s+o).buffer};for await(let i of K9e(this.header.featuresCount,this.header.indexNodeSize,t,r)){let[o,s]=i,a=this.readFeature(o);yield{id:s,feature:a}}}lengthBeforeTree(){return dp.length+oc+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}readFeature(t){let n=t+this.lengthBeforeFeatures(),r=new DataView(this.bytes.buffer).getUint32(n,!0),i=this.bytes.subarray(n+4,n+4+r),o=new Uint8Array(r+oc);o.set(i,oc);let s=new Wf(o);return s.setPosition(oc),Fc.getRootAsFeature(s)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vN=function(e,t){return vN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},vN(e,t)};function v6t(e,t){vN(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Q1(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(c){s(c)}}function l(f){try{u(r.throw(f))}catch(c){s(c)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(e,[])).next())})}function Lm(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function zx(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function BE(e){return this instanceof BE?(this.v=e,this):new BE(e)}function y6t(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(p){return new Promise(function(h,g){o.push([d,p,h,g])>1||a(d,p)})})}function a(d,p){try{l(r[d](p))}catch(h){c(o[0][3],h)}}function l(d){d.value instanceof BE?Promise.resolve(d.value.v).then(u,f):c(o[0][2],d)}function u(d){a("next",d)}function f(d){a("throw",d)}function c(d,p){d(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}var Z9e=function(e){v6t(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function e(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();function yN(e){e!=null&&typeof e.then=="function"&&e.then(qD,qD)}var cO=0,Ske=1,Kv=2,jD=3,bN=4,HD=1024,qD=function(){};function e1(e){var t=e.err,n=Promise.resolve(e.execution).then(function(r){if(t!=null)throw t;return r});return e.err=void 0,e.execution=n.then(function(){},function(){}),e.pending===void 0?n:e.pending.then(function(){return n})}function av(e,t){var n=e.state>=jD;return Promise.resolve(t).then(function(r){return!n&&e.state>=bN?e1(e).then(function(i){return{value:i,done:!0}}):{value:r,done:n}})}function Dj(e,t){var n,r;if(!(e.state>=Kv))if(e.state=Kv,e.onnext(),e.onstop(),e.err==null&&(e.err=t),e.pushes.length===0&&(typeof e.buffer>"u"||e.buffer.empty))q_(e);else try{for(var i=zx(e.pushes),o=i.next();!o.done;o=i.next()){var s=o.value;s.resolve()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function q_(e){var t,n;if(!(e.state>=jD)){e.state<Kv&&Dj(e),e.state=jD,e.buffer=void 0;try{for(var r=zx(e.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,s=e.pending===void 0?e1(e):e.pending.then(function(){return e1(e)});o.resolve(av(e,s))}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function kke(e){e.state>=bN||(e.state<jD&&q_(e),e.state=bN)}function b6t(e,t){if(yN(t),e.pushes.length>=HD)throw new Z9e("No more than "+HD+" pending calls to push are allowed on a single repeater.");if(e.state>=Kv)return Promise.resolve(void 0);var n=e.pending===void 0?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(l){e.state<Kv&&(e.err=l),kke(e)});var r;if(e.nexts.length){var i=e.nexts.shift();i.resolve(av(e,n)),e.nexts.length?r=Promise.resolve(e.nexts[0].value):typeof e.buffer<"u"&&!e.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return e.onnext=l})}else typeof e.buffer<"u"&&!e.buffer.full?(e.buffer.add(n),r=Promise.resolve(void 0)):r=new Promise(function(l){return e.pushes.push({resolve:l,value:n})});var o=!0,s={},a=r.catch(function(l){if(o)throw l});return s.then=function(l,u){return o=!1,Promise.prototype.then.call(r,l,u)},s.catch=function(l){return o=!1,Promise.prototype.catch.call(r,l)},s.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(l){e.err=l,kke(e)}),s}function x6t(e){var t=Dj.bind(null,e),n=new Promise(function(r){return e.onstop=r});return t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),t}function w6t(e){if(!(e.state>=Ske)){e.state=Ske;var t=b6t.bind(null,e),n=x6t(e);e.execution=new Promise(function(r){return r(e.executor(t,n))}),e.execution.catch(function(){return Dj(e)})}}var wk=new WeakMap,SC=function(){function e(t,n){wk.set(this,{executor:t,buffer:n,err:void 0,state:cO,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:qD,onstop:qD})}return e.prototype.next=function(t){yN(t);var n=wk.get(this);if(n===void 0)throw new Error("WeakMap error");if(n.nexts.length>=HD)throw new Z9e("No more than "+HD+" pending calls to next are allowed on a single repeater.");if(n.state<=cO&&w6t(n),n.onnext(t),typeof n.buffer<"u"&&!n.buffer.empty){var r=av(n,n.buffer.remove());if(n.pushes.length){var i=n.pushes.shift();n.buffer.add(i.value),n.onnext=i.resolve}return r}else if(n.pushes.length){var o=n.pushes.shift();return n.onnext=o.resolve,av(n,o.value)}else if(n.state>=Kv)return q_(n),av(n,e1(n));return new Promise(function(s){return n.nexts.push({resolve:s,value:t})})},e.prototype.return=function(t){yN(t);var n=wk.get(this);if(n===void 0)throw new Error("WeakMap error");return q_(n),n.execution=Promise.resolve(n.execution).then(function(){return t}),av(n,e1(n))},e.prototype.throw=function(t){var n=wk.get(this);if(n===void 0)throw new Error("WeakMap error");return n.state<=cO||n.state>=Kv||typeof n.buffer<"u"&&!n.buffer.empty?(q_(n),n.err==null&&(n.err=t),av(n,e1(n))):this.next(Promise.reject(t))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=_6t,e.merge=E6t,e.zip=A6t,e.latest=C6t,e}();function v$(e,t){var n,r,i=[],o=function(u){u!=null&&typeof u[Symbol.asyncIterator]=="function"?i.push(u[Symbol.asyncIterator]()):u!=null&&typeof u[Symbol.iterator]=="function"?i.push(u[Symbol.iterator]()):i.push(function(){return y6t(this,arguments,function(){return Lm(this,function(d){switch(d.label){case 0:return t.yieldValues?[4,BE(u)]:[3,3];case 1:return[4,d.sent()];case 2:d.sent(),d.label=3;case 3:return t.returnValues?[4,BE(u)]:[3,5];case 4:return[2,d.sent()];case 5:return[2]}})})}())};try{for(var s=zx(e),a=s.next();!a.done;a=s.next()){var l=a.value;o(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function _6t(e){var t=this,n=v$(e,{returnValues:!0});return new SC(function(r,i){return Q1(t,void 0,void 0,function(){var o,s,a,l,u,f;return Lm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2];s=!1,i.then(function(){o(),s=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),l=void 0,u=0,f=function(){var d,p,h,g,m,y;return Lm(this,function(v){switch(v.label){case 0:d=u;try{for(p=(m=void 0,zx(n)),h=p.next();!h.done;h=p.next())g=h.value,Promise.resolve(g.next()).then(function(x){x.done?(i(),a===void 0&&(a=x)):u===d&&(u++,o(x))},function(x){return i(x)})}catch(x){m={error:x}}finally{try{h&&!h.done&&(y=p.return)&&y.call(p)}finally{if(m)throw m.error}}return[4,new Promise(function(x){return o=x})];case 1:return l=v.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:v.sent(),v.label=3;case 3:return[2]}})},c.label=2;case 2:return s?[3,4]:[5,f()];case 3:return c.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return i(),[4,Promise.race(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function E6t(e){var t=this,n=v$(e,{yieldValues:!0});return new SC(function(r,i){return Q1(t,void 0,void 0,function(){var o,s,a,l=this;return Lm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2];o=[],s=!1,i.then(function(){var f,c;s=!0;try{for(var d=zx(o),p=d.next();!p.done;p=d.next()){var h=p.value;h()}}catch(g){f={error:g}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error}}}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map(function(f,c){return Q1(l,void 0,void 0,function(){var d,p;return Lm(this,function(h){switch(h.label){case 0:h.trys.push([0,,6,9]),h.label=1;case 1:return s?[3,5]:(Promise.resolve(f.next()).then(function(g){return o[c](g)},function(g){return i(g)}),[4,new Promise(function(g){o[c]=g})]);case 2:return d=h.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:h.sent(),h.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return p=f.return,p?[4,f.return()]:[3,8];case 7:p=h.sent(),h.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return u.sent(),[2,a&&a.value];case 3:return i(),[7];case 4:return[2]}})})})}function A6t(e){var t=this,n=v$(e,{returnValues:!0});return new SC(function(r,i){return Q1(t,void 0,void 0,function(){var o,s,a,l;return Lm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2,[]];s=!1,i.then(function(){o(),s=!0}),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return s?[3,5]:(Promise.all(n.map(function(f){return f.next()})).then(function(f){return o(f)},function(f){return i(f)}),[4,new Promise(function(f){return o=f})]);case 3:return a=u.sent(),a===void 0?[2]:(l=a.map(function(f){return f.value}),a.some(function(f){return f.done})?[2,l]:[4,r(l)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(f){return f.return&&f.return()}))];case 7:return u.sent(),[7];case 8:return[2]}})})})}function C6t(e){var t=this,n=v$(e,{yieldValues:!0,returnValues:!0});return new SC(function(r,i){return Q1(t,void 0,void 0,function(){var o,s,a,l,u,f=this;return Lm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2,[]];s=[],a=!1,i.then(function(){var d,p;o();try{for(var h=zx(s),g=h.next();!g.done;g=h.next()){var m=g.value;m()}}catch(y){d={error:y}}finally{try{g&&!g.done&&(p=h.return)&&p.call(h)}finally{if(d)throw d.error}}a=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map(function(d){return d.next()})).then(function(d){return o(d)},function(d){return i(d)}),[4,new Promise(function(d){return o=d})];case 2:return l=c.sent(),l===void 0?[2]:(u=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,u]:[4,r(u.slice())]);case 3:return c.sent(),[4,Promise.all(n.map(function(d,p){return Q1(f,void 0,void 0,function(){var h;return Lm(this,function(g){switch(g.label){case 0:if(l[p].done)return[2,l[p].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(m){return s[p](m)},function(m){return i(m)}),[4,new Promise(function(m){return s[p]=m})]);case 2:return h=g.sent(),h===void 0?[2,l[p].value]:h.done?[2,h.value]:(u[p]=h.value,[4,r(u.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return i(),[4,Promise.all(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}class Lj{constructor(t,n,r,i,o){Cn(this,"headerClient");Cn(this,"header");Cn(this,"headerLength");Cn(this,"indexLength");Cn(this,"nocache");this.headerClient=t,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=o}static async open(t,n){let r,i=new Tke(t,n),o=2024+(()=>{let u,f=0;for(u=0;u<3;u++)f+=g6t**u*p6t;return f})();if(!new Uint8Array(await i.getRange(0,8,o,"header")).subarray(0,3).every((u,f)=>dp[f]===u))throw Error("Not a FlatGeobuf file");if((r=new DataView(await i.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let s=await i.getRange(12,r,o,"header"),a=g$(new Wf(new Uint8Array(s))),l=m$(a.featuresCount,a.indexNodeSize);return new Lj(i,a,r,l,n)}async*selectBbox(t){let n=this.lengthBeforeTree(),r=this.headerClient,i=async(l,u)=>r.getRange(n+l,u,0,"index"),o=[],s=[];for await(let l of K9e(this.header.featuresCount,this.header.indexNodeSize,t,i)){let[u,f]=l,[,,c]=l;if(c||(c=4),s.length===0){s.push([u,c,f]);continue}let d=s[s.length-1];u-(d[0]+d[1])>UD.global.extraRequestThreshold()&&(o.push(s),s=[]),s.push([u,c,f])}this.headerClient.logUsage("header+index"),s.length>0&&o.push(s);let a=o.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*SC.merge(a)}lengthBeforeTree(){return dp.length+oc+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new Tke(this.headerClient.httpClient,t)}async*readFeatureBatch(t,n){let[r]=t[0],[i,o]=t[t.length-1],s=this.buildFeatureClient(n),a=i+o-r;for(let[l,,u]of t){let f=await this.readFeature(s,l,a);yield{id:u,feature:f},a=0}s.logUsage("feature")}async readFeature(t,n,r){let i,o=n+this.lengthBeforeFeatures();i=new DataView(await t.getRange(o,4,r,"feature length")).getUint32(0,!0);let s=new Uint8Array(await t.getRange(o+4,i,r,"feature data")),a=new Uint8Array(i+oc);a.set(s,oc);let l=new Wf(a);return l.setPosition(oc),Fc.getRootAsFeature(l)}}class Tke{constructor(t,n){Cn(this,"httpClient");Cn(this,"bytesEverUsed",0);Cn(this,"bytesEverFetched",0);Cn(this,"buffer",new ArrayBuffer(0));Cn(this,"head",0);if(typeof t=="string")this.httpClient=new Dke(t,n);else if(t instanceof Dke)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,n,r,i){this.bytesEverUsed+=n;let o=t-this.head,s=o+n;if(o>=0&&s<=this.buffer.byteLength)return this.buffer.slice(o,s);let a=Math.max(n,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,i),this.head=t,this.buffer.slice(0,n)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}let Dke=class{constructor(t,n){Cn(this,"url");Cn(this,"nocache");Cn(this,"requestsEverMade",0);Cn(this,"bytesEverRequested",0);this.url=t,this.nocache=n}async getRange(t,n,r){this.requestsEverMade+=1,this.bytesEverRequested+=n;let i={Range:`bytes=${t}-${t+n-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}};async function*S6t(e,t,n,r){if(!e.subarray(0,3).every((c,d)=>dp[d]===c))throw Error("Not a FlatGeobuf file");if(n){let c=Tj.open(e);for await(let d of c.selectBbox(n))yield t(d.id,d.feature,c.header);return}let i=new Wf(e),o=i.readUint32(dp.length);i.setPosition(dp.length+oc);let s=g$(i),a=dp.length+oc+o,{indexNodeSize:l,featuresCount:u}=s;l>0&&(a+=m$(u,l));let f=0;for(;a<i.capacity();){let c=i.readUint32(a);i.setPosition(a+oc);let d=Fc.getRootAsFeature(i);yield t(f++,d,s),a+=oc+c}}async function*k6t(e,t,n){let r,i=h6t(e),o=async p=>await i.slice(p),s=new Uint8Array(await o(8));if(!s.subarray(0,3).every((p,h)=>dp[h]===p))throw Error("Not a FlatGeobuf file");s=new Uint8Array(await o(4));let a=new Wf(s),l=a.readUint32(0);s=new Uint8Array(await o(l));let u=g$(a=new Wf(s)),{indexNodeSize:f,featuresCount:c}=u;if(f>0){let p=m$(c,f);await o(p)}let d=0;for(;r=await D6t(o,u,t,d++);)yield r}async function*T6t(e,t,n,r,i=!1){let o=await Lj.open(e,i);for await(let s of o.selectBbox(t))yield n(s.id,s.feature,o.header)}async function D6t(e,t,n,r){let i=new Uint8Array(await e(4,"feature length"));if(i.byteLength===0)return;let o=new Wf(i),s=o.readUint32(0);i=new Uint8Array(await e(s,"feature data"));let a=new Uint8Array(s+4);return a.set(i,4),(o=new Wf(a)).setPosition(oc),n(r,Fc.getRootAsFeature(o),t)}function xN(e,t){let n=t;if(n===yl.Unknown&&(n=e.type()),n===yl.GeometryCollection){let i=[];for(let o=0;o<e.partsLength();o++){let s=e.parts(o),a=s.type();i.push(xN(s,a))}return{type:yl[n],geometries:i}}if(n===yl.MultiPolygon){let i=[];for(let o=0;o<e.partsLength();o++)i.push(xN(e.parts(o),yl.Polygon));return{type:yl[n],coordinates:i.map(o=>o.coordinates)}}let r=function(i,o){let s=i.xyArray(),a=i.zArray();switch(o){case yl.Point:{let l=Array.from(s);return a&&l.push(a[0]),l}case yl.MultiPoint:case yl.LineString:return uO(s,a);case yl.MultiLineString:case yl.Polygon:return function(l,u,f){let c;if(!f||f.length===0)return[uO(l,u)];let d=0,p=Array.from(f).map(h=>l.slice(d,d=h<<1));return u&&(d=0,c=Array.from(f).map(h=>u.slice(d,d=h))),p.map((h,g)=>uO(h,c?c[g]:void 0))}(s,a,i.endsArray())}}(e,n);return{type:yl[n],coordinates:r}}function Rj(e,t,n){let r=n.columns;return{type:"Feature",id:e,geometry:xN(t.geometry(),n.geometryType),properties:l6t(t,r)}}async function*L6t(e,t,n){yield*S6t(e,Rj,t)}function R6t(e,t){return k6t(e,Rj)}function F6t(e,t,n,r=!1){return T6t(e,t,Rj,n,r)}function $6t(e,t,n,r=!1){return e instanceof Uint8Array?L6t(e,t):e instanceof ReadableStream?R6t(e):F6t(e,t,n,r)}const Lke=new zN({featureProjection:"EPSG:3857"});class M6t extends NL{constructor(t){super({url:t.url,attributions:t.attributions,wrapX:t.wrapX,format:Lke,strategy:TWe}),this.ressourceURL=t.url,super.setLoader(this.loader)}fgbBoundingBox(t,n){const r=cI(t,n.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(t,n,r,i,o){const s=this.fgbBoundingBox(t,r);try{if(s.minX!==-1/0){const a=[],l=$6t(this.ressourceURL,s);for await(const u of l){const f=Lke.readFeature(u);a.push(f)}super.clear(),super.addFeatures(a),i(a)}}catch{o()}}}window.eoxMapAdvancedOlSources={BingMaps:yIt,CartoDB:bIt,Cluster:xIt,DataTile:_C,GeoTIFF:bj,Google:CIt,IIIF:kIt,Image:ey,ImageArcGISRest:DIt,ImageCanvas:LIt,ImageMapGuide:MIt,ImageStatic:E9e,ImageTile:G9e,OGCMapTile:jIt,OGCVectorTile:HIt,Raster:X9e,Source:tP,StadiaMaps:n6t,TileArcGISRest:r6t,TileDebug:i6t,TileImage:Pp,TileJSON:S9e,UrlTile:DWe,UTFGrid:s6t,Zoomify:SIt,WMTSCapabilities:a6t,FlatGeoBuf:M6t};function O6t(e,t="property"){return e.map(([n,r])=>{var o,s;if(n==="extent"&&((s=(o=r.value)==null?void 0:o.temporal)==null?void 0:s.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replace(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const i=a=>Object.entries(a).filter(([l,u])=>{let f=!0;return u.roles&&n!=="providers"&&(f=u.roles.includes("metadata")),u.rel&&(f=u.rel==="example"),f});return(n==="assets"||n==="links"||n==="providers")&&(t==="property"?r.formatted=`<ul>${i(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:t==="featured"&&(r.formatted=i(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(n)&&(r.length=i(r.value).length),[n,r]})}function I6t(e){e.stacInfo.length&&(e.stacProperties=e.stacInfo.reduce((t,n)=>({...t,...n.properties}),{}),e.requestUpdate())}var fO,Rke;function Ux(){if(Rke)return fO;Rke=1;const e={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return fO={locales:[],collator:new Intl.Collator([],e.collatorOptions),dateFormatter:new Intl.DateTimeFormat([],e.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat([],e.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat([],e.numberFormatterOptions),translate:null,getDefaults(){return e},setLocales(n,r={},i={},o={},s={}){this.locales=n,s=Object.assign({},e.collatorOptions,s),this.collator=new Intl.Collator(n,s),r=Object.assign({},e.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(n,r),i=Object.assign({},e.dateTimeFormatterOptions,i),this.dateTimeFormatter=new Intl.DateTimeFormat(n,i),o=Object.assign({},e.numberFormatterOptions,o),this.numberFormatter=new Intl.NumberFormat(n,o)},setTranslator(n){this.translate=n},format(n,r=null){if(r)for(let i in r)n=n.replaceAll(`{${i}}`,r[i]);return n}},fO}var dO,Fke;function kC(){if(Fke)return dO;Fke=1;const e=Ux(),t={e(n){return typeof n!="string"&&(n=String(n)),n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(n,r=null){return typeof e.translate=="function"?e.translate(n,r):e.format(n,r)},toNothing(n=null){return n===null&&(n=t.t("n/a")),`<i class="null">${n}</i>`},toList(n,r=!1,i=null,o=null){let s=o===!0?"ol":"ul";return Array.isArray(n)||(n=[n]),r&&(n=n.slice(0),typeof r=="function"?n.sort(r):n.sort(),o===null&&(s="ol")),typeof i=="function"&&(n=n.map(i)),n.length===0?t.toNothing():n.length===1?n[0]:`<${s}><li>${n.join("</li><li>")}</li></${s}>`},toLink(n,r="",i="",o="_blank"){return r||(n.length>50?r=n.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...s){return s[4]?s[1]+"/[]/"+s[4]:s[1]}):r=n.replace(/^\w+:\/\//i,"")),`<a href="${t.e(n)}" rel="${t.e(i)}" target="${t.e(o)}">${t.e(r)}</a>`},toObject(n,r=null,i=null,o=[],s=null,a=[]){let l="<dl>",u=Array.isArray(o)&&o.length>=2?o:Object.keys(n);for(let f of u){if(!(f in n)||typeof s=="function"&&a.length>0&&!s(a[0],a.concat([f])))continue;let c;typeof i=="function"?c=i(f,n):c=t.formatKey(f,!0);let d=n[f];typeof r=="function"&&(d=r(d,f,n)),l+=`<dt>${c}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(n,r){return`<abbr title="${t.e(r)}">${t.e(n)}</abbr>`},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},formatKey(n,r=!1){if(n.includes("/"))return t.e(t.t(n));r===!1&&(n=n.replace(/^[\w-]+:/i,""));let i=n.split(/[:_\-\s]/g).map(o=>o.substr(0,1).toUpperCase()+o.substr(1)).join(" ");return t.e(t.t(i))},hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(n){return n.reduce((r,i)=>r+i.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(n){return n.reduce((r,i)=>Object.keys(i).reduce((o,s)=>(o.indexOf(s)==-1&&o.push(s),o),r),[])},unit(n,r=""){return typeof r=="string"&&r.length>0?(r=t.t(r),`${n}&nbsp;<span class="unit">${r}</unit>`):n}};return dO=t,dO}var hO,$ke;function N6t(){if($ke)return hO;$ke=1;const e=kC(),t=Ux(),n={fields(r){let i=["extensions","metadata","links","assets"];for(let o of i)for(let s in r[o])r[o][s]=n.field(r[o][s],r[o],r);return r},field(r,i={},o={}){if(typeof r=="string")return{label:r};if(typeof r.alias=="string"){let s=i[r.alias]||o.metadata[r.alias];if(!s)throw new Error("Alias is invalid: "+r.alias);return Object.assign(r,n.field(s,i,o))}if(e.isObject(r.items)){let s=[];for(let a in r.items)r.items[a]=n.field(r.items[a],i,o),s.push(Object.assign({key:a},r.items[a]));r.itemOrder=s.sort((a,l)=>a.id===!0?-1:l.id===!0?1:typeof a.order=="number"&&typeof l.order=="number"?a.order-l.order:t.collator.compare(e.t(a.label),e.t(l.label))).map(a=>a.key)}if(e.isObject(r.properties))for(let s in r.properties)r.properties[s]=n.field(r.properties[s],i,o);return r}};return hO=n,hO}var pO,Mke;function Fj(){if(Mke)return pO;Mke=1;const e=N6t(),t={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(n){n=e.fields(n);for(let r in this.fields)Object.assign(this.fields[r],n[r])},getDependency(n){return this.dependencies[n]||console.warn(`Dependency '${n}' not registered.`),this.dependencies[n]},addDependency(n,r){this.dependencies[n]=r},addExtension(n,r){this.fields.extensions[n]=e.field(r,this.fields.extensions)},addMetadataField(n,r){this.fields.metadata[n]=e.field(r,this.fields.metadata)},addLinkField(n,r){this.fields.links[n]=e.field(r,this.fields.links)},addAssetField(n,r){this.fields.assets[n]=e.field(r,this.fields.assets)},addMetadataFields(n){for(var r in n)t.addMetadataField(r,n[r])},getExtension(n){return this.fields.extensions[n]?this.fields.extensions[n]:{}},getSpecification(n,r=null){let i={};return r==="assets"&&this.fields.assets[n]?i=this.fields.assets[n]:r==="links"&&this.fields.links[n]?i=this.fields.links[n]:this.fields.metadata[n]&&(i=this.fields.metadata[n]),i}};return pO=t,pO}const P6t={alternate:"Alternative Access Methods",anon:"Anonymized Location",auth:"Authentication",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},B6t={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},method:"HTTP Method",headers:"HTTP Headers",body:"Request Body"},z6t={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{"alternate:name":"Identifier",href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},U6t=JSON.parse('{"id":"Identifier","keywords":"Keywords","datetime":{"label":"Time of Data","format":"Timestamp","summary":false},"title":{"label":"Title","summary":false},"description":{"label":"Description","format":"CommonMark","summary":false},"roles":"Purpose","start_datetime":{"label":"Time of Data begins","format":"Timestamp","summary":false},"end_datetime":{"label":"Time of Data ends","format":"Timestamp","summary":false},"created":{"label":"Created","format":"Timestamp","summary":"r"},"updated":{"label":"Updated","format":"Timestamp","summary":"r"},"published":{"label":"Published","format":"Timestamp","summary":"r"},"expires":{"label":"Expires","format":"Timestamp","summary":"r"},"unpublished":{"label":"Unpublished","format":"Timestamp","summary":"r"},"license":{"label":"License","format":"License","summary":false},"providers":{"label":"Providers","format":"Providers","summary":false},"platform":"Platform","instruments":{"label":"Instruments","format":"CSV"},"constellation":"Constellation","mission":"Mission","gsd":{"label":"GSD","explain":"Ground Sample Distance","unit":"m"},"bands":{"label":"Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"alias":"description","order":2},"gsd":{"alias":"gsd","sortable":true},"nodata":{"alias":"nodata"},"data_type":{"alias":"data_type","sortable":true},"statistics":{"alias":"statistics"},"eo:common_name":{"alias":"eo:common_name","sortable":true,"order":1},"eo:center_wavelength":{"alias":"eo:center_wavelength","sortable":true},"eo:full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true},"eo:solar_illumination":{"alias":"eo:solar_illumination","sortable":true},"raster:sampling":{"alias":"raster:sampling","sortable":true},"unit":{"alias":"unit","sortable":true},"raster:bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"raster:spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"raster:scale":{"alias":"raster:scale","sortable":true},"raster:offset":{"alias":"raster:offset","sortable":true},"raster:histogram":{"alias":"raster:histogram"},"classification:classes":{"alias":"classification:classes"},"classification:bitfields":{"alias":"classification:bitfields"}}},"nodata":{"label":"No-Data Values","format":"CSV","summary":false},"data_type":{"label":"Data Type of Values","format":"FileDataType"},"unit":"Unit of Values","statistics":{"label":"Statistics","properties":{"mean":"Average","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stdev":{"label":"Std. Dev.","explain":"Standard Deviation"},"count":{"label":"Count","explain":"Total number of values"},"valid_percent":{"label":"Valid","explain":"Percentage of valid values","unit":"%"}}},"version":{"label":"Data Version","summary":false},"deprecated":{"label":"Deprecated","summary":false},"experimental":{"label":"Experimental","summary":false},"language":{"label":"Current Language","ext":"language","summary":"v","properties":{"name":{"label":"Name"},"alternate":{"label":"Alternate Name"},"code":{"label":"Code"},"dir":{"label":"Direction","explain":"Reading and writing direction","mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"languages":{"label":"Available Languages","ext":"language","summary":false,"items":{"name":{"label":"Name","sortable":true,"order":0},"alternate":{"label":"Alternate Name","sortable":true,"order":1},"code":{"label":"Code","sortable":true,"order":2},"dir":{"label":"Direction","explain":"Reading and writing direction","sortable":true,"order":3,"mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"contacts":{"label":"Contacts","ext":"contacts","summary":"v","items":{"name":{"label":"Name"},"identifier":{"label":"Identifier"},"position":{"label":"Position"},"organization":{"label":"Organization"},"logo":{"label":"Logo","format":"Image"},"phones":{"label":"Phone","items":{"value":{"label":"Number","format":"Phone","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal","fax":"Fax"}}}},"emails":{"label":"Email","items":{"value":{"label":"Address","format":"Email","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal"}}}},"addresses":{"label":"Postal Addresses","format":"Address","items":{"deliveryPoint":{"label":"Street / House","order":0},"city":{"label":"City","order":1},"administrativeArea":{"label":"State / Province","order":2},"postalCode":{"label":"Postal Code","order":3},"country":{"label":"Country","order":4}}},"links":{"label":"Additional Resources","format":"Link"},"contactInstructions":"Further Instructions","roles":{"label":"Types","format":"CSV"}}},"themes":{"label":"Themes","ext":"themes","summary":false,"items":{"scheme":{"label":"Vocabulary","order":0,"format":"Url"},"concepts":{"label":"Terms","order":1,"format":"Concepts","items":{"id":{"label":"Identifier","order":0},"title":{"label":"Title","order":1},"description":{"label":"Description","order":2},"url":{"label":"URL","order":3,"format":"Url"}}}}},"crs":{"label":"CRS","format":"CRS","explain":"Coordinate Reference System"},"anon:size":{"label":"Uncertainty","unit":"","explain":"The size of one side of the anonymized bounding box"},"anon:warning":{"label":"Warning","summary":false},"classification:classes":{"summary":false,"label":"Classes","items":{"color_hint":{"label":"Color","order":0,"format":"HexColor"},"value":{"label":"Value","sortable":true,"order":1},"title":{"label":"Title","sortable":true,"order":2},"name":{"label":"Identifier","sortable":true,"order":3},"description":{"label":"Description","order":4,"format":"CommonMark"},"percentage":{"label":"Percentage of samples","sortable":true,"order":5,"unit":"%"},"count":{"label":"Number of samples","sortable":true,"order":6},"nodata":{"label":"No-data value","order":7,"default":false}}},"classification:bitfields":{"summary":false,"label":"Bit Mask","items":{"name":{"label":"Name","sortable":true,"order":0},"offset":{"label":"Offset","explain":"Offset to the first bit","order":1},"length":{"label":"Number of bits","order":2},"description":{"label":"Description","order":3,"format":"CommonMark"},"classes":{"alias":"classification:classes"},"roles":{"label":"Purpose"}}},"cube:dimensions":{"label":"Dimensions","summary":false,"listWithKeys":true,"items":{"type":{"label":"Type","order":0},"axis":{"label":"Axis","order":1},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"bbox":{"alias":"proj:bbox","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":5},"geometry_types":{"label":"Geometry Types","order":5},"reference_system":{"label":"Reference System","explain":"Coordinate / Temporal / Other Reference System","order":6}}},"cube:variables":{"label":"Variables","summary":false,"listWithKeys":true,"items":{"dimensions":{"label":"Dimensions","order":0},"type":{"label":"Type","order":1,"mapping":{"data":"Measured values","auxiliary":"Coordinate data"}},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":6}}},"eo:bands":{"label":"Spectral Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"common_name":{"alias":"eo:common_name","sortable":true,"order":1},"center_wavelength":{"alias":"eo:center_wavelength","sortable":true,"order":2},"full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true,"order":3},"solar_illumination":{"alias":"eo:solar_illumination","sortable":true,"order":7},"description":{"alias":"description"},"gsd":{"alias":"gsd","sortable":true},"cloud_cover":{"alias":"eo:cloud_cover","sortable":true}}},"eo:cloud_cover":{"label":"Cloud Cover","unit":"%"},"eo:snow_cover":{"label":"Snow/Ice Cover","unit":"%"},"eo:common_name":"Common Name","eo:center_wavelength":{"label":"Wavelength","explain":"The center wavelength of the band","unit":"m"},"eo:full_width_half_max":{"label":"FWHM","explain":"Full Width Half Max","unit":"m"},"eo:solar_illumination":{"label":"Solar Illumination","unit":"W/m/m"},"forecast:reference_datetime":{"label":"Reference Time","format":"Timestamp","summary":"r"},"forecast:horizon":{"label":"Forecast Horizon","explain":"The time between the reference time and the forecast time","format":"Duration"},"forecast:duration":{"label":"Forecast Length","format":"Duration"},"file:bits_per_sample":{"alias":"raster:bits_per_sample"},"file:byte_order":"Byte Order","file:checksum":{"label":"Checksum","format":"Checksum","summary":false},"file:data_type":{"alias":"data_type"},"file:header_size":{"label":"Header Size","format":"FileSize","summary":false},"file:nodata":{"alias":"nodata"},"file:size":{"label":"Size","format":"FileSize","summary":false},"file:unit":{"alias":"unit"},"file:values":{"label":"Map of Values","summary":false,"items":{"values":{"label":"Values","format":"CSV","order":1},"summary":{"label":"Summary","order":0}}},"file:local_path":{"label":"Local Path","summary":false},"nodata:values":{"alias":"nodata"},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{"label":"System Environment","mapping":{"OR":"Operational system, real-time data","OT":"Operational system, test data","IR":"Test system, real-time data","IT":"Test system, test data","IP":"Test system, playback data","IS":"Test system, simulated data"}},"goes:image_type":{"label":"Area","mapping":{"FULL DISK":"The Americas (full disk)","CONUS":"North America (continental US)","MESOSCALE":"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{"label":"Area in Central/South America","mapping":{"1":"Region 1","2":"Region 2"}},"goes:mode":{"label":"Capture Mode","mapping":{"3":"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)","4":"4: 1x full disk (every 5 minutes)","6":"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{"label":"Time Threshold in a Group","explain":"Lightning group maximum time difference among lightning events in a group","unit":"s"},"goes:flash_time_threshold":{"label":"Time Threshold in a Flash","explain":"Lightning flash maximum time difference among lightning events in a flash","unit":"s"},"goes:lightning_wavelength":{"label":"Central Wavelength","unit":"nm"},"goes:yaw_flip_flag":{"label":"Yaw Flip Configuration","explain":"Flag indicating that the spacecraft is operating in yaw flip configuration.","mapping":{"0":"Upright","1":"Neither","2":"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{"label":"Satellite Subpoint Latitude","unit":"N"},"goes:nominal_satellite_subpoint_lon":{"label":"Satellite Subpoint Longitude","unit":"E"},"goes:nominal_satellite_height":{"label":"Satellite Height","explain":"Nominal satellite height above GRS 80 ellipsoid","unit":"km"},"goes:percent_navigated_L1b_events":{"label":"Events navigated by Instrument","format":"Percent0to1","unit":"%"},"goes:percent_uncorrectable_L0_errors":{"label":"Data Lost","format":"Percent0to1","unit":"%"},"grid:code":{"label":"Grid","format":"GridCode"},"raster:bands":{"label":"Layers","items":{"nodata":{"alias":"nodata"},"sampling":{"alias":"raster:sampling","sortable":true},"data_type":{"alias":"data_type","sortable":true},"bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"statistics":{"alias":"statistics"},"unit":{"alias":"unit","sortable":true},"scale":{"alias":"raster:scale","sortable":true},"offset":{"alias":"raster:offset","sortable":true},"histogram":{"alias":"raster:histogram"}}},"raster:sampling":{"label":"Sampling","mapping":{"area":"Area","point":"Point (at pixel center)"}},"raster:bits_per_sample":"Bits per Sample","raster:spatial_resolution":{"label":"Resolution","explain":"Average spatial resolution","unit":"m"},"raster:scale":"Scale","raster:offset":"Offset","raster:histogram":{"label":"Histogram","custom":true},"label:properties":{"label":"Properties","null":"raster data"},"label:classes":{"label":"Classes","items":{"name":{"label":"Name","null":"raster-formatted","sortable":true,"id":true},"classes":"Classes"}},"label:description":{"label":"Description","format":"CommonMark","summary":false},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{"label":"Overviews","summary":false,"items":{"property_key":{"label":"Property Key","id":true},"counts":{"label":"Counts","custom":true},"statistics":{"label":"Statistics","custom":true}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{"label":"Pass Number","mapping":{"1":"1 (less latency / less gauges)","2":"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{"label":"Accumulation Period","unit":"h"},"noaa_mrms_qpe:region":{"label":"Region","mapping":{"CONUS":"Continental US","HAWAII":"Hawaii","GUAM":"Guam","ALASKA":"Alaska","CARIB":"Caribbean Islands"}},"openeo:status":"Processing Status","api_version":{"label":"API Version","ext":"openeo"},"backend_version":{"label":"Back-End Version","ext":"openeo"},"production":{"label":"Production-Ready","ext":"openeo"},"endpoints":{"label":"Supported Endpoints","ext":"openeo","summary":false,"items":{"path":{"label":"Path Template","order":0},"methods":{"label":"HTTP Methods","order":1,"format":"CSV"}}},"billing":{"label":"Billing","ext":"openeo","custom":true,"summary":false},"order:status":{"label":"Status","mapping":{"orderable":"Orderable (data can be ordered)","ordered":"Ordered (preparing to deliver data)","pending":"Pending (waiting for activation)","shipping":"Shipping (data is getting processed)","succeeded":"Delivered (data is available)","failed":"Failed (unable to deliver)","canceled":"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{"label":"Submitted","format":"Timestamp","summary":"r"},"order:expiration_date":{"alias":"expires"},"pc:count":{"label":"Points","explain":"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{"label":"Schemas","summary":false,"items":{"name":{"label":"Name","sortable":true,"id":true},"size":{"label":"Size","unit":"bytes","sortable":true},"type":{"label":"Type","sortable":true}}},"pc:density":"Density","pc:statistics":{"label":"Statistics","summary":"s","items":{"name":{"label":"Name","id":true},"position":"Position","average":"Average","count":"Count","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stddev":{"label":"Std. Dev.","explain":"Standard Deviation"},"variance":"Variance"}},"processing:expression":{"label":"Processing Instructions","summary":false},"processing:lineage":{"label":"Lineage","format":"CommonMark","summary":false},"processing:level":"Level","processing:facility":"Facility","processing:software":{"label":"Software","format":"Software","summary":false},"processing:version":"Processor Version","processing:datetime":{"label":"Processing Time","format":"Timestamp","summary":"r"},"product:type":"Product Type","product:timeliness":{"label":"Timeliness","format":"Duration"},"product:timeliness_category":"Timeliness Category","product:acquisition_type":{"label":"Acquisition Type","mapping":{"nominal":"Nominal","calibration":"Calibration","other":"Other"}},"proj:epsg":{"label":"EPSG Code","format":"EPSG","summary":"v"},"proj:code":{"label":"Code","format":"CrsCode","summary":"v"},"proj:wkt2":{"label":"WKT2","explain":"Well-Known Text, version 2","format":"WKT2","summary":false},"proj:projjson":{"label":"PROJJSON","explain":"JSON encoding of WKT2","format":"PROJJSON","summary":false},"proj:geometry":{"label":"Footprint","custom":true,"summary":false},"proj:bbox":{"label":"Bounding Box","custom":true,"summary":false},"proj:centroid":{"label":"Centroid","custom":true,"summary":false},"proj:shape":{"label":"Image Dimensions","format":"Shape","summary":false},"proj:transform":{"label":"Transformation Matrix","format":"Transform","summary":false},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{"label":"Center Frequency","unit":"GHz"},"sar:polarizations":{"label":"Polarizations","format":"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{"label":"Range Resolution","unit":"m"},"sar:resolution_azimuth":{"label":"Azimuth Resolution","unit":"m"},"sar:pixel_spacing_range":{"label":"Range Pixel Spacing","unit":"m"},"sar:pixel_spacing_azimuth":{"label":"Azimuth Pixel Spacing","unit":"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{"label":"ENL","explain":"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{"label":"Int. Designator","explain":"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{"label":"Abs. Orbit Number","explain":"Absolute Orbit Number"},"sat:relative_orbit":{"label":"Rel. Orbit Number","explain":"Relative Orbit Number"},"sat:anx_datetime":{"label":"ANX Time","format":"Timestamp","explain":"Ascending Node Crossing time","summary":"r"},"sci:doi":{"label":"DOI","format":"DOI"},"sci:citation":"Citation","sci:publications":{"label":"Publications","summary":false,"items":{"citation":{"label":"Publication","sortable":true,"order":0},"doi":{"label":"DOI","format":"DOI","sortable":true,"order":1}}},"ssys:targets":"Target Body","auth:refs":"Methods","auth:schemes":{"label":"Methods","listWithKeys":true,"items":{"type":{"label":"Method","order":0,"mapping":{"http":"HTTP","s3":"S3","signedUrl":"Signed URL","oauth2":"OAuth2","openIdConnect":"OpenID Connect","apiKey":"API Token"}},"description":{"alias":"description","order":1},"in":{"label":"Provide token as","mapping":{"query":"Query parameter","header":"HTTP header","cookie":"Cookie"},"order":1},"name":{"label":"Parameter","order":2},"scheme":"HTTP Scheme","flows":"Flows","openIdConnectUrl":"OpenID Connect metadata"}},"storage:refs":"Providers","storage:schemes":{"label":"Providers","listWithKeys":true,"items":{"title":{"label":"Title","order":0},"description":{"title":"Description","format":"CommonMark","order":1},"type":{"label":"Type","order":2,"mapping":{"s3":"S3 (Amazon Web Services)","custom-s3":"S3 (self-hosted)","ms-azure":"Microsoft Azure"}},"platform":{"label":"Host","order":3},"region":{"label":"Region","order":4},"requester_pays":{"label":"Payment","mapping":{"true":"Requester Pays","false":"Provider Pays"},"order":5}}},"table:columns":{"label":"Columns","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"type":{"label":"Data Type","sortable":true,"order":1},"description":{"label":"Description","format":"CommonMark","order":2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{"label":"Tables","summary":false,"listWithKeys":true,"items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"label":"Description","format":"CommonMark","order":1}}},"tiles:tile_matrix_sets":{"label":"Tile Matrix Sets","custom":true,"summary":false},"tiles:tile_matrix_set_links":{"label":"Tile Matrix Set Links","custom":true,"summary":false},"view:off_nadir":{"label":"Off-Nadir Angle","unit":""},"view:incidence_angle":{"label":"Incidence Angle","unit":""},"view:azimuth":{"label":"Viewing Azimuth","unit":""},"view:sun_azimuth":{"label":"Sun Azimuth","unit":""},"view:sun_elevation":{"label":"Sun Elevation","unit":""},"pl:black_fill":{"label":"Unfilled Image Parts","unit":"%"},"pl:clear_percent":{"label":"Clear Sky","unit":"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{"label":"Spatial Resolution","unit":"m"},"pl:publishing_stage":{"label":"Publishing Stage","mapping":{"preview":"Preview","standard":"Standard","finalized":"Finalized"}},"pl:quality_category":{"label":"Quality Category","mapping":{"standard":"Standard","test":"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{"label":"Type","mapping":{"image":"Single image","image_collection":"Image collection","table":"Table"}},"gee:cadence":"Cadence","gee:schema":{"label":"Variables","items":{"name":"Name","description":"Description","type":"Data Type"},"summary":false},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{"label":"Terms of Use","format":"CommonMark","summary":false},"gee:visualizations":{"label":"Visualizations","custom":true,"summary":false},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{"label":"WRS Type","explain":"Worldwide Reference System Type"},"landsat:wrs_path":{"label":"WRS Path","explain":"Worldwide Reference System Path"},"landsat:wrs_row":{"label":"WRS Row","explain":"Worldwide Reference System Row"},"landsat:cloud_cover_land":{"label":"Land Cloud Cover","unit":"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{"label":"Summary","summary":false},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{"label":"Product ID","summary":"s"},"sentinel:data_coverage":{"label":"Data Coverage","unit":"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{"label":"Processing Level","explain":"Geolocation precision level","mapping":{"L2":"Geolocation using only satellite telemetry","L3":"Control points used to geolocate image, no terrain correction","L4":"Control points used to geolocate image, orthorectified"},"summary":"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{"label":"Specification","mapping":{"SR":"Surface Reflectance (Optical)","ST":"Surface Temperature (Optical)","NRB":"Normalized Radar Backscatter (SAR)","POL":"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{"label":"Platform Altitude","unit":"m"},"card4l:incidence_angle_near_range":{"label":"Incidence Angle (near)","unit":""},"card4l:incidence_angle_far_range":{"label":"Incidence Angle (far)","unit":""},"card4l:noise_equivalent_intensity":{"label":"Noise Equivalent Intensity","unit":"dB"},"card4l:mean_faraday_rotation_angle":{"label":"Mean Faraday Rotation","unit":""},"card4l:speckle_filtering":{"label":"Speckle Filtering","custom":true,"summary":false,"null":"not applied"},"card4l:relative_rtc_accuracy":{"label":"Rel. RTC Accuracy","explain":"Relative accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:absolute_rtc_accuracy":{"label":"Abs. RTC Accuracy","explain":"Absolute accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:northern_geometric_accuracy":{"label":"Northern Geometric Accuracy","unit":"m"},"card4l:eastern_geometric_accuracy":{"label":"Eastern Geometric Accuracy","unit":"m"},"card4l:ellipsoidal_height":{"label":"Ellipsoidal Height","unit":"m"},"geoadmin:variant":{"label":"Product Variant","mapping":{"krel":"RGB color with relief","komb":"RGB color without relief","kgrel":"Grayscale with relief","kgrs":"Grayscale without relief"}},"href:servers":{"label":"Servers","ext":"web-map-links"},"pmtiles:layers":{"label":"Layers","ext":"web-map-links"},"wms:layers":{"label":"Layers","ext":"web-map-links"},"wms:styles":{"label":"Styles","ext":"web-map-links"},"wms:dimensions":{"label":"Dimensions","ext":"web-map-links"},"wms:transparent":{"label":"Transparency","ext":"web-map-links"},"wmts:layer":{"label":"Layers","ext":"web-map-links"},"wmts:dimensions":{"label":"Dimensions","ext":"web-map-links"}}'),j6t={extensions:P6t,links:B6t,assets:z6t,metadata:U6t};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hp=function(){return hp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},hp.apply(this,arguments)},_v="\\d+(?:[\\.,]\\d+)?",H6t="("+_v+"W)",q6t="("+_v+"Y)?("+_v+"M)?("+_v+"D)?",G6t="T("+_v+"H)?("+_v+"M)?("+_v+"S)?",W6t="^P(?:"+H6t+"|"+q6t+"(?:"+G6t+")?)$",V6t=new RegExp(W6t),Q9e=["weeks","years","months","days","hours","minutes","seconds"],J9e={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},Y6t=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),X6t=function(e){var t=e.match(V6t);if(!t)throw new Error("Invalid duration string");var n=t.slice(1).reduce(function(r,i,o){return r[Q9e[o]]=parseFloat(i)||0,r},{});return n},K6t=function(e){return e.weeks&&e.weeks>0?Object.assign({},Y6t,{weeks:e.weeks}):Q9e.reduce(function(t,n){var r;return hp(hp({},t),(r={},r[n]=e[n]||0,r))},{})},$j={locales:{},options:{},setLocales:function(e,t){this.locales=hp(hp({},this.locales),e),t&&(this.options=hp(hp({},this.options),t))},getLangConfig:function(e){var t=this.locales[e];if(!t&&this.options.fallbackLocale&&(t=this.locales[this.options.fallbackLocale]),!t)throw new Error("isoDuration: Translations for language: "+e+" are not provided");return t}},Z6t=function(e){for(var t=["years","months","days"],n="",r=0,i=t;r<i.length;r++){var o=i[r];e[o]&&(n+=""+e[o]+J9e[o])}return n},Q6t=function(e){for(var t=["hours","minutes","seconds"],n="",r=0,i=t;r<i.length;r++){var o=i[r];e[o]&&(n+=""+e[o]+J9e[o])}return n},J6t=function(e){if(e.weeks>0)return"P"+e.weeks+"W";var t="P",n=Z6t(e);n&&(t+=n);var r=Q6t(e);return r&&(t+="T"+r),!n&&!r&&(t+="0D"),t},e8t=function(e,t){var n=$j.getLangConfig(t);return e.weeks+" "+n.weeks(e.weeks)},t8t=function(e,t,n){for(var r=$j.getLangConfig(t),i="",o=["years","months","days","hours","minutes","seconds"],s=0,a=0;a<o.length;a++){var l=o[a],u=e[l];if(u&&(i!==""&&(i+=" "),i+=u+" "+r[l](u),s++,n&&n.largest&&n.largest<=s))break}return i},n8t=function(e,t,n){return e.weeks>0?e8t(e,t):t8t(e,t,n)},gO=["seconds","minutes","hours","days","months"],_k=function(e){return function(t){return{nextUnitValue:Math.floor(t/e),value:t%e}}},Oke=function(e,t){return new Date(t,e+1,0).getDate()},r8t={seconds:_k(60),minutes:_k(60),hours:_k(24),days:function(e,t){for(var n=t?new Date(t.getTime()):new Date,r=e,i=0,o=Oke(n.getMonth(),n.getFullYear());r>o;)r=r-o,i++,n.setMonth(n.getMonth()+1),o=Oke(n.getMonth(),n.getFullYear());return{nextUnitValue:i,value:r}},months:_k(12)},i8t=function(e,t){for(var n=hp({},e),r=0;r<gO.length;r++){var i=gO[r],o=n[i];if(o>0){var s=r8t[i](o,t);if(n[i]=s.value,s.nextUnitValue){var a=i==="months"?"years":gO[r+1];n[a]=n[a]+s.nextUnitValue}}}return n},Ike=function(){function e(t){this.durationObj=t}return e.prototype.parse=function(){return this.durationObj},e.prototype.toString=function(){return J6t(this.durationObj)},e.prototype.humanize=function(t,n){return n8t(this.durationObj,t,n)},e.prototype.normalize=function(t){return this.durationObj=i8t(this.durationObj,t),this},e.prototype.isEmpty=function(){var t=this;return Object.keys(this.durationObj).every(function(n){return t.durationObj[n]===0})},e}();function o8t(e){return e<=2?0:e>2&&e<11?1:0}var s8t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return["",""][o8t(e)]},seconds:function(e){return e===1?"":""},decimal:","};function Ns(e){return Math.floor(e)!==e?2:e%100>=5&&e%100<=20||e%10>=5&&e%10<=9||e%10===0?0:e%10===1?1:e>1?2:0}var a8t={years:function(e){return["","",""][Ns(e)]},months:function(e){return["","",""][Ns(e)]},weeks:function(e){return["","",""][Ns(e)]},days:function(e){return["","",""][Ns(e)]},hours:function(e){return["","",""][Ns(e)]},minutes:function(e){return["","",""][Ns(e)]},seconds:function(e){return["","",""][Ns(e)]},decimal:","},l8t={years:function(e){return"any"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"os")},weeks:function(e){return"setman"+(e===1?"a":"es")},days:function(e){return"di"+(e===1?"a":"es")},hours:function(e){return"hor"+(e===1?"a":"es")},minutes:function(e){return"minut"+(e===1?"":"s")},seconds:function(e){return"segon"+(e===1?"":"s")},decimal:","};function _u(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&e%100<10?2:3}var u8t={years:function(e){return["rok","roku","roky","let"][_u(e)]},months:function(e){return["msc","msce","msce","msc"][_u(e)]},weeks:function(e){return["tden","tdne","tdny","tdn"][_u(e)]},days:function(e){return["den","dne","dny","dn"][_u(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodin"][_u(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][_u(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][_u(e)]},decimal:","},c8t={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uge"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"e")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minut"+(e===1?"":"ter")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},f8t={years:function(e){return"Jahr"+(e===1?"":"e")},months:function(e){return"Monat"+(e===1?"":"e")},weeks:function(e){return"Woche"+(e===1?"":"n")},days:function(e){return"Tag"+(e===1?"":"e")},hours:function(e){return"Stunde"+(e===1?"":"n")},minutes:function(e){return"Minute"+(e===1?"":"n")},seconds:function(e){return"Sekunde"+(e===1?"":"n")},decimal:","},d8t={years:function(e){return"year"+(e===1?"":"s")},months:function(e){return"month"+(e===1?"":"s")},weeks:function(e){return"week"+(e===1?"":"s")},days:function(e){return"day"+(e===1?"":"s")},hours:function(e){return"hour"+(e===1?"":"s")},minutes:function(e){return"minute"+(e===1?"":"s")},seconds:function(e){return"second"+(e===1?"":"s")},decimal:"."},h8t={years:function(e){return"ao"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"es")},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"da"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},p8t={years:function(e){return"aasta"+(e===1?"":"t")},months:function(e){return"kuu"+(e===1?"":"d")},weeks:function(e){return"ndal"+(e===1?"":"at")},days:function(e){return"pev"+(e===1?"":"a")},hours:function(e){return"tund"+(e===1?"":"i")},minutes:function(e){return"minut"+(e===1?"":"it")},seconds:function(e){return"sekund"+(e===1?"":"it")},decimal:","},g8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},m8t={years:function(e){return e===1?"vuosi":"vuotta"},months:function(e){return e===1?"kuukausi":"kuukautta"},weeks:function(e){return"viikko"+(e===1?"":"a")},days:function(e){return"piv"+(e===1?"":"")},hours:function(e){return"tunti"+(e===1?"":"a")},minutes:function(e){return"minuutti"+(e===1?"":"a")},seconds:function(e){return"sekunti"+(e===1?"":"a")},decimal:","},v8t={years:function(){return"r"},months:function(e){return e===1?"mnaur":"mnair"},weeks:function(e){return e===1?"vika":"vikur"},days:function(e){return e===1?"dagur":"dagar"},hours:function(e){return e===1?"tmi":"tmar"},minutes:function(e){return e===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},y8t={years:function(e){return"an"+(e>=2?"s":"")},months:function(){return"mois"},weeks:function(e){return"semaine"+(e>=2?"s":"")},days:function(e){return"jour"+(e>=2?"s":"")},hours:function(e){return"heure"+(e>=2?"s":"")},minutes:function(e){return"minute"+(e>=2?"s":"")},seconds:function(e){return"seconde"+(e>=2?"s":"")},decimal:","},b8t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:","},x8t={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:"."},w8t={years:function(e){return e%10===2||e%10===3||e%10===4?"godine":"godina"},months:function(e){return e===1?"mjesec":e===2||e===3||e===4?"mjeseca":"mjeseci"},weeks:function(e){return e%10===1&&e!==11?"tjedan":"tjedna"},days:function(e){return e===1?"dan":"dana"},hours:function(e){return e===1?"sat":e===2||e===3||e===4?"sata":"sati"},minutes:function(e){var t=e%10;return(t===2||t===3||t===4)&&(e<10||e>14)?"minute":"minuta"},seconds:function(e){return e===10||e===11||e===12||e===13||e===14||e===16||e===17||e===18||e===19||e%10===5?"sekundi":e%10===1?"sekunda":e%10===2||e%10===3||e%10===4?"sekunde":"sekundi"},decimal:","},_8t={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},E8t={years:function(){return"r"},months:function(e){return"mnu"+(e===1?"ur":"ir")},weeks:function(e){return"vik"+(e===1?"a":"ur")},days:function(e){return"dag"+(e===1?"ur":"ar")},hours:function(e){return"klukkutm"+(e===1?"i":"ar")},minutes:function(e){return"mnt"+(e===1?"a":"ur")},seconds:function(e){return"seknd"+(e===1?"a":"ur")},decimal:"."},A8t={years:function(e){return"ann"+(e===1?"o":"i")},months:function(e){return"mes"+(e===1?"e":"i")},weeks:function(e){return"settiman"+(e===1?"a":"e")},days:function(e){return"giorn"+(e===1?"o":"i")},hours:function(e){return"or"+(e===1?"a":"e")},minutes:function(e){return"minut"+(e===1?"o":"i")},seconds:function(e){return"second"+(e===1?"o":"i")},decimal:","},C8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},S8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},k8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function hb(e){return e===1||e%10===1&&e%100>20?0:Math.floor(e)!==e||e%10>=2&&e%100>20||e%10>=2&&e%100<10?1:2}var T8t={years:function(e){return e%10===0||e%100>=10&&e%100<=20?"met":"metai"},months:function(e){return["mnuo","mnesiai","mnesi"][hb(e)]},weeks:function(e){return["savait","savaits","savaii"][hb(e)]},days:function(e){return["diena","dienos","dien"][hb(e)]},hours:function(e){return["valanda","valandos","valand"][hb(e)]},minutes:function(e){return["minut","minuts","minui"][hb(e)]},seconds:function(e){return["sekund","sekunds","sekundi"][hb(e)]},decimal:","};function G0(e){return e===1||e%10===1&&e%100!==11?0:1}var D8t={years:function(e){return["gads","gadi"][G0(e)]},months:function(e){return["mnesis","mnei"][G0(e)]},weeks:function(e){return["neda","nedas"][G0(e)]},days:function(e){return["diena","dienas"][G0(e)]},hours:function(e){return["stunda","stundas"][G0(e)]},minutes:function(e){return["minte","mintes"][G0(e)]},seconds:function(e){return["sekunde","sekundes"][G0(e)]},decimal:","},L8t={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},R8t={years:function(){return"jaar"},months:function(e){return e===1?"maand":"maanden"},weeks:function(e){return e===1?"week":"weken"},days:function(e){return e===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(e){return e===1?"minuut":"minuten"},seconds:function(e){return e===1?"seconde":"seconden"},decimal:","},F8t={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uke"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"er")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minutt"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","};function W0(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&!(e%100>10&&e%100<20)?2:3}var $8t={years:function(e){return["rok","roku","lata","lat"][W0(e)]},months:function(e){return["miesic","miesica","miesice","miesicy"][W0(e)]},weeks:function(e){return["tydzie","tygodnia","tygodnie","tygodni"][W0(e)]},days:function(e){return["dzie","dnia","dni","dni"][W0(e)]},hours:function(e){return["godzina","godziny","godziny","godzin"][W0(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][W0(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][W0(e)]},decimal:","},M8t={years:function(e){return"ano"+(e===1?"":"s")},months:function(e){return e===1?"ms":"meses"},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"dia"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},O8t={years:function(e){return e===1?"an":"ani"},months:function(e){return e===1?"lun":"luni"},weeks:function(e){return e===1?"sptmn":"sptmni"},days:function(e){return e===1?"zi":"zile"},hours:function(e){return e===1?"or":"ore"},minutes:function(e){return e===1?"minut":"minute"},seconds:function(e){return e===1?"secund":"secunde"},decimal:","},I8t={years:function(e){return["","",""][Ns(e)]},months:function(e){return["","",""][Ns(e)]},weeks:function(e){return["","",""][Ns(e)]},days:function(e){return["","",""][Ns(e)]},hours:function(e){return["","",""][Ns(e)]},minutes:function(e){return["","",""][Ns(e)]},seconds:function(e){return["","",""][Ns(e)]},decimal:","},N8t={years:function(e){return["rok","roky","roky","rokov"][_u(e)]},months:function(e){return["mesiac","mesiace","mesiace","mesiacov"][_u(e)]},weeks:function(e){return["tde","tdne","tdne","tdov"][_u(e)]},days:function(e){return["de","dni","dni","dn"][_u(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodn"][_u(e)]},minutes:function(e){return["minta","minty","minty","mint"][_u(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","seknd"][_u(e)]},decimal:","},P8t={years:function(){return"r"},months:function(e){return"mnad"+(e===1?"":"er")},weeks:function(e){return"veck"+(e===1?"a":"or")},days:function(e){return"dag"+(e===1?"":"ar")},hours:function(e){return"timm"+(e===1?"e":"ar")},minutes:function(e){return"minut"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},B8t={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},z8t={years:function(e){return["","",""][Ns(e)]},months:function(e){return["","",""][Ns(e)]},weeks:function(e){return["","",""][Ns(e)]},days:function(e){return["","",""][Ns(e)]},hours:function(e){return["","",""][Ns(e)]},minutes:function(e){return["","",""][Ns(e)]},seconds:function(e){return["","",""][Ns(e)]},decimal:","},U8t={years:function(){return""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(){return""},hours:function(e){return e===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},j8t={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},H8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},q8t={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function eze(e){return typeof e=="string"?new Ike(X6t(e)):new Ike(K6t(e))}eze.setLocales=function(e,t){$j.setLocales(e,t)};const G8t=Object.freeze(Object.defineProperty({__proto__:null,ar:s8t,bg:a8t,ca:l8t,cs:u8t,da:c8t,de:f8t,en:d8t,es:h8t,et:p8t,fa:g8t,fi:m8t,fo:v8t,fr:y8t,gr:b8t,he:x8t,hr:w8t,hu:_8t,is:E8t,isoDuration:eze,it:A8t,ja:C8t,ko:S8t,lo:k8t,lt:T8t,lv:D8t,ms:L8t,nl:R8t,no:F8t,pl:$8t,pt:M8t,ro:O8t,ru:I8t,sk:N8t,sv:P8t,tr:B8t,uk:z8t,ur:U8t,vi:j8t,zhCN:H8t,zhTW:q8t},Symbol.toStringTag,{value:"Module"})),W8t=JTe(G8t);var Ek={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Nke;function V8t(){if(Nke)return Ek;Nke=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Ek.format=s,Ek.parse=a;function s(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var d=c.parameters,p=c.type;if(!p||!o.test(p))throw new TypeError("invalid type");var h=p;if(d&&typeof d=="object")for(var g,m=Object.keys(d).sort(),y=0;y<m.length;y++){if(g=m[y],!n.test(g))throw new TypeError("invalid parameter name");h+="; "+g+"="+u(d[g])}return h}function a(c){if(!c)throw new TypeError("argument string is required");var d=typeof c=="object"?l(c):c;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var p=d.indexOf(";"),h=p!==-1?d.slice(0,p).trim():d.trim();if(!o.test(h))throw new TypeError("invalid media type");var g=new f(h.toLowerCase());if(p!==-1){var m,y,v;for(e.lastIndex=p;y=e.exec(d);){if(y.index!==p)throw new TypeError("invalid parameter format");p+=y[0].length,m=y[1].toLowerCase(),v=y[2],v.charCodeAt(0)===34&&(v=v.slice(1,-1),v.indexOf("\\")!==-1&&(v=v.replace(r,"$1"))),g.parameters[m]=v}if(p!==d.length)throw new TypeError("invalid parameter format")}return g}function l(c){var d;if(typeof c.getHeader=="function"?d=c.getHeader("content-type"):typeof c.headers=="object"&&(d=c.headers&&c.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(c){var d=String(c);if(n.test(d))return d;if(d.length>0&&!t.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(i,"\\$1")+'"'}function f(c){this.parameters=Object.create(null),this.type=c}return Ek}var m_={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var Y8t=m_.exports,Pke;function X8t(){return Pke||(Pke=1,function(e,t){(function(n,r){r(t)})(Y8t,function(n){function r(te){switch(te._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(te,xe){this.current=te,this.entering=xe===!0},o=function(){var te=this.current,xe=this.entering;if(te===null)return null;var Ge=r(te);return xe&&Ge?te._firstChild?(this.current=te._firstChild,this.entering=!0):this.entering=!1:te===this.root?this.current=null:te._next===null?(this.current=te._parent,this.entering=!1):(this.current=te._next,this.entering=!0),{entering:xe,node:te}},s=function(te){return{current:te,root:te,entering:!0,next:o,resumeAt:i}},a=function(te,xe){this._type=te,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=xe,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(te){this._literal=te}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(te){this._destination=te}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(te){this._title=te}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(te){this._info=te}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(te){this._level=te}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(te){this._listData.type=te}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(te){this._listData.tight=te}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(te){this._listData.start=te}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(te){this._listData.delimiter=te}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(te){this._onEnter=te}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(te){this._onExit=te}}),a.prototype.appendChild=function(te){te.unlink(),te._parent=this,this._lastChild?(this._lastChild._next=te,te._prev=this._lastChild,this._lastChild=te):(this._firstChild=te,this._lastChild=te)},a.prototype.prependChild=function(te){te.unlink(),te._parent=this,this._firstChild?(this._firstChild._prev=te,te._next=this._firstChild,this._firstChild=te):(this._firstChild=te,this._lastChild=te)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(te){te.unlink(),te._next=this._next,te._next&&(te._next._prev=te),te._prev=this,this._next=te,te._parent=this._parent,te._next||(te._parent._lastChild=te)},a.prototype.insertBefore=function(te){te.unlink(),te._prev=this._prev,te._prev&&(te._prev._next=te),te._next=this,this._prev=te,te._parent=this._parent,te._prev||(te._parent._firstChild=te)},a.prototype.walker=function(){var te=new s(this);return te};var u={};function f(te){var xe,Ge,Ze=u[te];if(Ze)return Ze;for(Ze=u[te]=[],xe=0;xe<128;xe++)Ge=String.fromCharCode(xe),/^[0-9a-z]$/i.test(Ge)?Ze.push(Ge):Ze.push("%"+("0"+xe.toString(16).toUpperCase()).slice(-2));for(xe=0;xe<te.length;xe++)Ze[te.charCodeAt(xe)]=te[xe];return Ze}function c(te,xe,Ge){var Ze,It,Lt,Xn,wn,mr="";for(typeof xe!="string"&&(Ge=xe,xe=c.defaultChars),typeof Ge>"u"&&(Ge=!0),wn=f(xe),Ze=0,It=te.length;Ze<It;Ze++){if(Lt=te.charCodeAt(Ze),Ge&&Lt===37&&Ze+2<It&&/^[0-9a-f]{2}$/i.test(te.slice(Ze+1,Ze+3))){mr+=te.slice(Ze,Ze+3),Ze+=2;continue}if(Lt<128){mr+=wn[Lt];continue}if(Lt>=55296&&Lt<=57343){if(Lt>=55296&&Lt<=56319&&Ze+1<It&&(Xn=te.charCodeAt(Ze+1),Xn>=56320&&Xn<=57343)){mr+=encodeURIComponent(te[Ze]+te[Ze+1]),Ze++;continue}mr+="%EF%BF%BD";continue}mr+=encodeURIComponent(te[Ze])}return mr}c.defaultChars=";/?:@&=+$,-_.!~*'()#",c.componentChars="-_.!~*'()";var d=c,p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof jo<"u"?jo:typeof self<"u"?self:{};function h(te){return te&&te.__esModule&&Object.prototype.hasOwnProperty.call(te,"default")?te.default:te}function g(te,xe){return xe={exports:{}},te(xe,xe.exports),xe.exports}function m(te){return te&&te.default||te}var y="",v="",x="",_="",E="",C="",w="",T="",R="",L="",B="",P="",S="",k="",D="",O="",N="",j="",q="",W="",Q="",ee="",H="",se="",ne="",ge="",we="&",$e="&",ve="",Ee="",Ve="",Ue="",ft="",ht="",zt="",$t="",Tn="",it="",Te="",ye="",Se="",Re="",U="",Z="",re="",ie="",be="",Ce="",je="",V="",fe="",he="",me="",Oe="",Me="",Be="",We="",Qe="",ut="",Tt="",Ut="",Kt="'",Pt="",bn="",_n="",un="",Wn="",qn="",wr="",Ao="",Gi="*",_i="",$s="",tr="",yi="",pi="",_r="",uo="",Or="",go="",Zr="",Fi="",or="",Fe="",Xe="",Et="",pt="",Yt="",An="",Rn="",Ht="",mt="",jn="",Vn="",an="",gn="",Qr="",Wr="",Ln="",dt="",Nt="",Rr="",fr="",Er="",Ir="",ri="",xn="",Bi="",Io="",no="",Us="",No="",Po="",mo="",es="",ts="",ws="",ns="",_s="",Bo="",rs="",Es="",Vr="",Co="",hs="",da="",is="",ha="",js="",Go="",Wi="",zo="",ps="",os="",Hs="=",Ia="",vo="",co="",pa="",ga="",Uo="",Le="",Pe="",ke="",rt="",Mt="",dn="",sr="",dr="",hr="",pr="",Yr="",zr="",Ur="",gi="",M="",z="",Y="",K="",ce="",ae="",pe="",He="",Ie="",et="",vt="",oe="",de="",ze="",gt="",qt="",Ft="",Sn="",er="",yr="",ii="",Pn="",fo="",Dn="",Ar="",Ye="",Rt="",rn="",vr="",Fr="",Hn="",bi="",gs="",Ch="",lu="",Il="",t0="",id="",n0="",Ei="",of="",Js="",bc="\\",Sh="",ul="",Xp="",uu="",od="",cu="",Kp="",xc="",kh="",Th="",Zp="",sf="",fu="",sd="",ad="",r0="",ld="",Gu="",De="",Ke="",st="",ct="",At="",en="",cn="",kn="",hn="",$r="",rr="",ar="",jr="",Gn="",zi="",ss="",as="",ma="",va="",Wu="",As="",Dh="",Qp="",i0="",Hx="",Jp="",qx="",ud="",eg="",cd="",tg="",Lh="",Gx="",Wx="",Vx="",IC="",fd="",dd="",NC="",PC="",BC="",zC="",UC="",Na="",Cs="",ea="",Ss="",ng="",jC="",o0="",HC="",Ey="",Yx="",Ay="",Cy=":",Sy="",Xx="",Kx="",ky="",Zx=",",rg="@",qC="",s0="",wc="",Qx="",GC="",Jx="",cl="",Ai="",du="",af="",lf="",ew="",Ty="",tw="",Dy="",ig="",nw="",Ly="",uf="",rw="",iw="",a0="",Ry="",ow="",sw="",WC="",l0="",aw="",VC="",lw="",Rh="",Fy="",u0="",uw="",$y="",cw="",fw="",qs="",c0="",dw="",hw="",pw="",Fh="",f0="",gw="",mw="",vw="",$h="",yw="",d0="",bw="",og="",Mh="",xw="",ww="",_w="",sg="",ag="",lg="",ug="",Ew="",Aw="",cf="",Oh="",cg="",Cw="",YC="",XC="",ya="",Sw="",KC="",kw="",Tw="",Dw="",ZC="",QC="",ff="",fg="",h0="",dg="",_c="",JC="",eS="",Ih="",Lw="",Rw="",Fw="",p0="",Nh="",My="",Oy="",Iy="",hg="`",$w="",Mw="",g0="",tS="",pg="",Ow="",Iw="",Ny="",Nw="",Pw="",Bw="",gg="",mg="",Py="",zw="",Uw="",jw="",By="",Hw="$",qw="",Ph="",Gw="",m0="",nS="",rS="",So="",zy="",vg="",hu="",v0="",Uy="",Ww="",Vw="",Yw="",jy="",Xw="",Hy="",Kw="",Ui="",Zw="",Bh="",y0="",iS="",Wo="",oS="",b0="",b="",A="",$="",F="",I="",G="",X="",J="",le="",ue="",_e="",Ae="",qe="",Ne="",tt="",nt="",Je="",lt="",xt="",bt="",Bt="",Ot="",jt="",Yn="",ln="",Dr="",Bn="",Jr="",Ci="",ei="",Nr="",ti="",br="",Si="",gr="",Hr="",Cr="",ui="",ta="",ki="",Gs="",Ws="",yo="",na="",Nl="",Ms="",pu="",x0="",Qw="",hd="",Pa="",df="",sS="",zh="",qy="",yg="",w0="",bg="",Gy="",Jw="",Wy="",e2="",t2="",n2="",dH="",hH="",pH="",gH="",mH="",vH="",yH="",bH="",xH="",wH="",_H="",EH="",AH="",CH="",SH="",kH="",TH="",DH="",LH="",RH="",FH="",$H="",MH="",OH="",IH="",NH="",PH="",BH="",zH="",UH="",jH="",HH="",qH="=",GH="",WH="",VH="",YH="",XH="",KH="",ZH="",QH="",JH="",eq="",tq="",nq="",rq="",iq="",oq="",sq="",aq="",lq="",uq="",cq="",fq="!",dq="",hq="",pq="",gq="",mq="",vq="",yq="",bq="",xq="",wq="",_q="",Eq="",Aq="",Cq="",Sq="",kq="",Tq="",Dq="fj",Lq="",Rq="",Fq="",$q="",Mq="",Oq="",Iq="",Nq="",Pq="",Bq="",zq="",Uq="",jq="",Hq="",qq="",Gq="",Wq="",Vq="",Yq="",Xq="",Kq="",Zq="",Qq="",Jq="",eG="",tG="",nG="",rG="",iG="",oG="",sG="",aG="",lG="",uG="",cG="",fG="",dG="",hG="",pG="",gG="",mG="",vG="",yG="",bG="",xG="",wG="",_G="",EG="",AG="",CG="",SG="",kG="",TG="",DG="",LG="",RG="",FG="",$G="",MG="",OG="",IG="",NG="",PG="",BG="",zG="",UG="",jG="",HG="",qG="",GG="",WG="",VG="",YG="",XG="",KG="",ZG="",QG="",JG="",eW="",tW="",nW="",rW="`",iW="",oW="",sW="",aW="",lW="",uW="",cW="",fW="",dW="",hW="",pW="",gW="",mW="",vW="",yW=">",bW=">",xW="",wW="",_W="",EW="",AW="",CW="",SW="",kW="",TW="",DW="",LW="",RW="",FW="",$W="",MW="",OW="",IW="",NW="",PW="",BW="",zW="",UW="",jW="",HW="^",qW="",GW="",WW="",VW="",YW="",XW="",KW="",ZW="",QW="",JW="",eV="",tV="",nV="",rV="",iV="",oV="",sV="",aV="",lV="",uV="",cV="",fV="",dV="",hV="",pV="",gV="",mV="",vV="",yV="",bV="",xV="",wV="",_V="",EV="",AV="",CV="",SV="",kV="",TV="",DV="",LV="",RV="",FV="",$V="",MV="",OV="",IV="",NV="",PV="",BV="",zV="",UV="",jV="",HV="",qV="",GV="",WV="",VV="",YV="",XV="",KV="",ZV="",QV="",JV="",eY="",tY="",nY="",rY="",iY="",oY="",sY="",aY="",lY="",uY="",cY="",fY="",dY="",hY="",pY="",gY="",mY="",vY="",yY="",bY="",xY="",wY="",_Y="",EY="",AY="",CY="",SY="",kY="",TY="",DY="",LY="",RY="",FY="",$Y="",MY="",OY="",IY="",NY="",PY="",BY="",zY="",UY="",jY="",HY="",qY="",GY="",WY="",VY="",YY="",XY="",KY="",ZY="",QY="",JY="",eX="",tX="",nX="",rX="",iX="",oX="",sX="",aX="",lX="",uX="",cX="",fX="",dX="",hX="",pX="",gX="",mX="",vX="",yX="",bX="",xX="",wX="",_X="",EX="",AX="",CX="",SX="",kX="",TX="",DX="",LX="",RX="",FX="",$X="",MX="",OX="",IX="",NX="",PX="",BX="",zX="",UX="",jX="",HX="",qX="",GX="",WX="",VX="",YX="",XX="",KX="",ZX="{",QX="[",JX="",eK="",tK="",nK="",rK="",iK="",oK="",sK="",aK="{",lK="",uK="",cK="",fK="",dK="",hK="",pK="",gK="",mK="",vK="",yK="",bK="",xK="",wK="",_K="",EK="",AK="",CK="",SK="",kK="",TK="",DK="",LK="",RK="",FK="",$K="",MK="",OK="",IK="",NK="",PK="",BK="",zK="",UK="",jK="",HK="",qK="",GK="",WK="",VK="",YK="",XK="",KK="",ZK="",QK="",JK="",eZ="",tZ="",nZ="",rZ="",iZ="",oZ="",sZ="",aZ="",lZ="",uZ="",cZ="",fZ="",dZ="",hZ="",pZ="",gZ="",mZ="",vZ="",yZ="",bZ="",xZ="",wZ="",_Z="",EZ="",AZ="",CZ="",SZ="",kZ="",TZ="",DZ="",LZ="",RZ="",FZ="",$Z="",MZ="",OZ="",IZ="",NZ="",PZ="",BZ="",zZ="",UZ="",jZ="",HZ="",qZ="",GZ="",WZ="",VZ="",YZ="",XZ="",KZ="",ZZ="",QZ="",JZ="",eQ="",tQ="",nQ="",rQ="",iQ="",oQ="",sQ="",aQ="",lQ="",uQ="",cQ="",fQ="",dQ="",hQ="",pQ="",gQ="",mQ="",vQ="",yQ="",bQ="",xQ="",wQ="",_Q="_",EQ="",AQ="",CQ="",SQ="",kQ="",TQ="(",DQ="",LQ="",RQ="",FQ="",$Q="",MQ="",OQ="",IQ="",NQ="",PQ="",BQ="",zQ="",UQ="",jQ="",HQ="",qQ="[",GQ="",WQ="",VQ="",YQ="",XQ="",KQ="",ZQ="<",QQ="<",JQ="",eJ="",tJ="",nJ="",rJ="",iJ="",oJ="",sJ="",aJ="",lJ="",uJ="",cJ="",fJ="",dJ="",hJ="",pJ="",gJ="",mJ="",vJ="",yJ="",bJ="",xJ="",wJ="",_J="",EJ="",AJ="",CJ="",SJ="",kJ="",TJ="",DJ="",LJ="",RJ="",FJ="",$J="",MJ="",OJ="*",IJ="",NJ="",PJ="",BJ="",zJ="",UJ="",jJ="",HJ="",qJ="",GJ="",WJ="",VJ="",YJ="",XJ="",KJ="",ZJ="",QJ="",JJ="",eee="",tee="",nee="",ree="",iee="",oee="",see="",aee="",lee="",uee="",cee="",fee="",dee="",hee="",pee="",gee="",mee="",vee="",yee="",bee="",xee="",wee="",_ee="",Eee="",Aee="",Cee="",See="",kee="",Tee="",Dee="",Lee="",Ree="",Fee="",$ee="",Mee="",Oee="",Iee="",Nee="",Pee="",Bee="",zee="",Uee="",jee="",Hee="",qee="",Gee=`
`,Wee="",Vee="",Yee="",Xee="",Kee="",Zee="",Qee="",Jee="",ete="",tte="",nte="",rte="",ite="",ote="",ste="",ate="",lte="",ute="",cte="",fte="",dte="",hte="",pte="",gte="",mte="",vte="",yte="",bte="",xte="",wte="",_te="",Ete="",Ate="",Cte="",Ste="",kte="",Tte="",Dte="",Lte="",Rte="",Fte="",$te="",Mte="",Ote="",Ite="",Nte="",Pte="",Bte="",zte="",Ute="",jte="",Hte="",qte="",Gte="",Wte="",Vte="",Yte="",Xte="",Kte="",Zte="",Qte="",Jte="",ene="",tne="",nne="",rne="",ine="",one="",sne="",ane="",lne="",une="",cne="",fne="",dne="",hne="",pne="",gne="",mne="",vne="",yne="",bne="",xne="",wne="",_ne="",Ene="",Ane="",Cne="",Sne="",kne="",Tne="",Dne="",Lne="",Rne="",Fne="",$ne="",Mne="",One="",Ine="",Nne="",Pne="",Bne="",zne="",Une="",jne="",Hne="",qne="",Gne="",Wne="",Vne="",Yne="",Xne="",Kne="",Zne="",Qne="",Jne="",ere="",tre="",nre="",rre="",ire="",ore="",sre="",are="",lre="",ure="",cre="",fre="",dre="",hre="",pre="",gre="",mre="",vre="",yre="",bre="",xre="",wre="",_re="",Ere="",Are="",Cre="",Sre="",kre="",Tre="",Dre="",Lre="",Rre="",Fre="",$re="",Mre="",Ore="",Ire="",Nre="",Pre="",Bre="",zre="",Ure="",jre="",Hre="",qre="",Gre="",Wre="",Vre="",Yre="",Xre="",Kre="",Zre="",Qre="",Jre="",eie="#",tie="",nie="",rie="",iie="",oie="",sie="",aie="",lie="",uie=">",cie="",fie="",die="",hie="",pie="<",gie="",mie="",vie="",yie="",bie="",xie="",wie="",_ie="",Eie="",Aie="",Cie="",Sie="",kie="",Tie="",Die="",Lie="",Rie="",Fie="",$ie="",Mie="",Oie="",Iie="",Nie="",Pie="",Bie="",zie="",Uie="",jie="",Hie="",qie="",Gie="",Wie="",Vie="",Yie="",Xie="",Kie="",Zie="",Qie="",Jie="",eoe="",toe="",noe="",roe="",ioe="",ooe="",soe="",aoe="",loe="",uoe="",coe="",foe="",doe="",hoe="",poe="",goe="",moe="",voe="",yoe="",boe="",xoe="",woe="",_oe="",Eoe="",Aoe="",Coe="",Soe="",koe="",Toe="",Doe="",Loe="",Roe="",Foe="",$oe="",Moe="",Ooe="",Ioe="",Noe="",Poe="",Boe="",zoe="",Uoe="",joe="",Hoe="",qoe="",Goe="",Woe="",Voe="",Yoe="",Xoe="",Koe="",Zoe="",Qoe="",Joe="",ese="",tse="%",nse=".",rse="",ise="",ose="",sse="",ase="",lse="",use="",cse="",fse="",dse="",hse="",pse="",gse="",mse="",vse="",yse="",bse="",xse="",wse="",_se="",Ese="+",Ase="",Cse="",Sse="",kse="",Tse="",Dse="",Lse="",Rse="",Fse="",$se="",Mse="",Ose="",Ise="",Nse="",Pse="",Bse="",zse="",Use="",jse="",Hse="",qse="",Gse="",Wse="",Vse="",Yse="",Xse="",Kse="",Zse="",Qse="",Jse="",eae="",tae="",nae="",rae="",iae="",oae="",sae="",aae="",lae="",uae="",cae="",fae="",dae="",hae="",pae="",gae="",mae="",vae="",yae="",bae="",xae="",wae="",_ae="",Eae="",Aae="",Cae="",Sae="",kae="",Tae="",Dae="",Lae="",Rae="",Fae="",$ae="?",Mae="",Oae='"',Iae='"',Nae="",Pae="",Bae="",zae="",Uae="",jae="",Hae="",qae="",Gae="",Wae="",Vae="",Yae="",Xae="",Kae="",Zae="",Qae="",Jae="",ele="",tle="",nle="",rle="",ile="",ole="",sle="",ale="",lle="",ule="",cle="",fle="",dle="",hle="",ple="",gle="",mle="",vle="",yle="}",ble="]",xle="",wle="",_le="",Ele="",Ale="",Cle="",Sle="",kle="",Tle="}",Dle="",Lle="",Rle="",Fle="",$le="",Mle="",Ole="",Ile="",Nle="",Ple="",Ble="",zle="",Ule="",jle="",Hle="",qle="",Gle="",Wle="",Vle="",Yle="",Xle="",Kle="",Zle="",Qle="",Jle="",eue="",tue="",nue="",rue="",iue="",oue="",sue="",aue="",lue="",uue="",cue="",fue="",due="",hue="",pue="",gue="",mue="",vue="",yue="",bue="",xue="",wue="",_ue="",Eue="",Aue="",Cue="",Sue="",kue="",Tue="",Due="",Lue="",Rue="",Fue="",$ue="",Mue="",Oue="",Iue="",Nue="",Pue="",Bue="",zue="",Uue="",jue="",Hue="",que="",Gue="",Wue="",Vue="",Yue="",Xue="",Kue="",Zue="",Que="",Jue=")",ece="",tce="",nce="",rce="",ice="",oce="",sce="",lce="",uce="",cce="]",fce="",dce="",hce="",pce="",gce="",mce="",vce="",yce="",bce="",xce="",wce="",_ce="",Ece="",Ace="",Cce="",Sce="",kce="",Tce="",Dce="",Lce="",Rce="",Fce="",$ce="",Mce="",Oce="",Ice="",Nce="",Pce="",Bce="",zce="",Uce="",jce="",Hce="",qce="",Gce="",Wce="",Vce="",Yce="",Xce="",Kce="",Zce="",Qce=";",Jce="",efe="",tfe="",nfe="",rfe="",ife="",ofe="",sfe="",afe="",lfe="",ufe="",cfe="",ffe="",dfe="",hfe="",pfe="",gfe="",mfe="",vfe="",yfe="",bfe="",xfe="",wfe="",_fe="",Efe="",Afe="",Cfe="",Sfe="",kfe="",Tfe="",Dfe="",Lfe="",Rfe="",Ffe="",$fe="",Mfe="",Ofe="",Ife="",Nfe="",Pfe="",Bfe="",zfe="",Ufe="",jfe="",Hfe="",qfe="",Gfe="",Wfe="",Vfe="/",Yfe="",Xfe="",Kfe="",Zfe="",Qfe="",Jfe="",ede="",tde="",nde="",rde="",ide="",ode="",sde="",ade="",lde="",ude="",cde="",fde="",dde="",hde="",pde="",gde="",mde="",vde="",yde="",bde="",xde="",wde="",_de="",Ede="",Ade="",Cde="",Sde="",kde="",Tde="",Dde="",Lde="",Rde="",Fde="",$de="",Mde="",Ode="",Ide="",Nde="",Pde="",Bde="",zde="",Ude="",jde="",Hde="",qde="",Gde="",Wde="",Vde="",Yde="",Xde="",Kde="",Zde="",Qde="",Jde="",ehe="",the="",nhe="",rhe="",ihe="",ohe="",she="",ahe="",lhe="",uhe="",che="",fhe="",dhe="",hhe="",phe="",ghe="",mhe="",vhe="",yhe="",bhe="",xhe="",whe="",_he="",Ehe="",Ahe="",Che="",She="",khe="",The="",Dhe="",Lhe="",Rhe="",Fhe="",$he="",Mhe="",Ohe="",Ihe="",Nhe="",Phe="",Bhe="",zhe="",Uhe="",jhe="",Hhe="",qhe="",Ghe="",Whe="",Vhe="",Yhe="",Xhe="",Khe="",Zhe="",Qhe="	",Jhe="",epe="",tpe="",npe="",rpe="",ipe="",ope="",spe="",ape="",lpe="",upe="",cpe="",fpe="",dpe="",hpe="",ppe="",gpe="",mpe="",vpe="",ype="",bpe="",xpe="",wpe="",_pe="",Epe="",Ape="",Cpe="",Spe="",kpe="",Tpe="",Dpe="",Lpe="",Rpe="",Fpe="",$pe="",Mpe="",Ope="",Ipe="",Npe="",Ppe="",Bpe="",zpe="",Upe="",jpe="",Hpe="",qpe="",Gpe="",Wpe="",Vpe="",Ype="",Xpe="",Kpe="",Zpe="",Qpe="",Jpe="",ege="",tge="",nge="",rge="",ige="",oge="",sge="",age="",lge="",uge="",cge="",fge="",dge="",hge="",pge="",gge="",mge="",vge="",yge="",bge="",xge="",wge="",_ge="",Ege="",Age="",Cge="",Sge="",kge="",Tge="",Dge="",Lge="",Rge="",Fge="",$ge="",Mge="",Oge="",Ige="",Nge="",Pge="",Bge="",zge="",Uge="",jge="",Hge="",qge="",Gge="",Wge="",Vge="",Yge="",Xge="",Kge="",Zge="",Qge="",Jge="",eme="",tme="",nme="_",rme="",ime="",ome="",sme="",ame="",lme="",ume="",cme="",fme="",dme="",hme="",pme="",gme="",mme="",vme="",yme="",bme="",xme="",wme="",_me="",Eme="",Ame="",Cme="",Sme="",kme="",Tme="",Dme="",Lme="",Rme="",Fme="",$me="",Mme="",Ome="",Ime="",Nme="",Pme="",Bme="",zme="",Ume="",jme="",Hme="",qme="",Gme="",Wme="",Vme="",Yme="",Xme="",Kme="",Zme="",Qme="",Jme="",e0e="",t0e="",n0e="",r0e="",i0e="",o0e="",s0e="",a0e="",l0e="",u0e="",c0e="",f0e="",d0e="",h0e="",p0e="",g0e="",m0e="",v0e="",y0e="",b0e="",x0e="",w0e="",_0e="",E0e="",A0e="",C0e="",S0e="",k0e="",T0e="",D0e="",L0e="|",R0e="",F0e="|",$0e="",M0e="",O0e="|",I0e="",N0e="",P0e="",B0e="",z0e="",U0e="",j0e="",H0e="",q0e="",G0e="",W0e="",V0e="",Y0e="",X0e="",K0e="",Z0e="",Q0e="",J0e="",eve="",tve="",nve="",rve="",ive="",ove="",sve="",ave="",lve="",uve="",cve="",fve="",dve="",hve="",pve="",gve="",mve="",vve="",yve="",bve="",xve="",wve="",_ve="",Eve="",Ave="",Cve="",Sve="",kve="",Tve="",Dve="",Lve="",Rve="",Fve="",$ve="",Mve="",Ove="",Ive="",Nve="",Pve="",Bve="",zve="",Uve="",jve="",Hve="",qve="",Gve="",Wve="",Vve="",Yve="",Xve="",Kve="",Zve="",Qve="",Jve="",eye="",tye="",nye="",rye="",iye="",oye="",sye="",aye="",lye="",uye="",cye="",fye="",dye="",hye="",pye="",gye="",mye="",vye="",yye="",bye="",xye="",wye="",_ye="",Eye="",Aye="",Cye="",Sye="",kye="",Tye="",Dye="",Lye="",Rye="",Fye="",$ye="",Mye="",Oye="",vUe={Aacute:y,aacute:v,Abreve:x,abreve:_,ac:E,acd:C,acE:w,Acirc:T,acirc:R,acute:L,Acy:B,acy:P,AElig:S,aelig:k,af:D,Afr:O,afr:N,Agrave:j,agrave:q,alefsym:W,aleph:Q,Alpha:ee,alpha:H,Amacr:se,amacr:ne,amalg:ge,amp:we,AMP:$e,andand:ve,And:Ee,and:Ve,andd:Ue,andslope:ft,andv:ht,ang:zt,ange:$t,angle:Tn,angmsdaa:it,angmsdab:Te,angmsdac:ye,angmsdad:Se,angmsdae:Re,angmsdaf:U,angmsdag:Z,angmsdah:re,angmsd:ie,angrt:be,angrtvb:Ce,angrtvbd:je,angsph:V,angst:fe,angzarr:he,Aogon:me,aogon:Oe,Aopf:Me,aopf:Be,apacir:We,ap:Qe,apE:ut,ape:Tt,apid:Ut,apos:Kt,ApplyFunction:Pt,approx:bn,approxeq:_n,Aring:un,aring:Wn,Ascr:qn,ascr:wr,Assign:Ao,ast:Gi,asymp:_i,asympeq:$s,Atilde:tr,atilde:yi,Auml:pi,auml:_r,awconint:uo,awint:Or,backcong:go,backepsilon:Zr,backprime:Fi,backsim:or,backsimeq:Fe,Backslash:Xe,Barv:Et,barvee:pt,barwed:Yt,Barwed:An,barwedge:Rn,bbrk:Ht,bbrktbrk:mt,bcong:jn,Bcy:Vn,bcy:an,bdquo:gn,becaus:Qr,because:Wr,Because:Ln,bemptyv:dt,bepsi:Nt,bernou:Rr,Bernoullis:fr,Beta:Er,beta:Ir,beth:ri,between:xn,Bfr:Bi,bfr:Io,bigcap:no,bigcirc:Us,bigcup:No,bigodot:Po,bigoplus:mo,bigotimes:es,bigsqcup:ts,bigstar:ws,bigtriangledown:ns,bigtriangleup:_s,biguplus:Bo,bigvee:rs,bigwedge:Es,bkarow:Vr,blacklozenge:Co,blacksquare:hs,blacktriangle:da,blacktriangledown:is,blacktriangleleft:ha,blacktriangleright:js,blank:Go,blk12:Wi,blk14:zo,blk34:ps,block:os,bne:Hs,bnequiv:Ia,bNot:vo,bnot:co,Bopf:pa,bopf:ga,bot:Uo,bottom:Le,bowtie:Pe,boxbox:ke,boxdl:rt,boxdL:Mt,boxDl:dn,boxDL:sr,boxdr:dr,boxdR:hr,boxDr:pr,boxDR:Yr,boxh:zr,boxH:Ur,boxhd:gi,boxHd:M,boxhD:z,boxHD:Y,boxhu:K,boxHu:ce,boxhU:ae,boxHU:pe,boxminus:He,boxplus:Ie,boxtimes:et,boxul:vt,boxuL:oe,boxUl:de,boxUL:ze,boxur:gt,boxuR:qt,boxUr:Ft,boxUR:Sn,boxv:er,boxV:yr,boxvh:ii,boxvH:Pn,boxVh:fo,boxVH:Dn,boxvl:Ar,boxvL:Ye,boxVl:Rt,boxVL:rn,boxvr:vr,boxvR:Fr,boxVr:Hn,boxVR:bi,bprime:gs,breve:Ch,Breve:lu,brvbar:Il,bscr:t0,Bscr:id,bsemi:n0,bsim:Ei,bsime:of,bsolb:Js,bsol:bc,bsolhsub:Sh,bull:ul,bullet:Xp,bump:uu,bumpE:od,bumpe:cu,Bumpeq:Kp,bumpeq:xc,Cacute:kh,cacute:Th,capand:Zp,capbrcup:sf,capcap:fu,cap:sd,Cap:ad,capcup:r0,capdot:ld,CapitalDifferentialD:Gu,caps:De,caret:Ke,caron:st,Cayleys:ct,ccaps:At,Ccaron:en,ccaron:cn,Ccedil:kn,ccedil:hn,Ccirc:$r,ccirc:rr,Cconint:ar,ccups:jr,ccupssm:Gn,Cdot:zi,cdot:ss,cedil:as,Cedilla:ma,cemptyv:va,cent:Wu,centerdot:As,CenterDot:Dh,cfr:Qp,Cfr:i0,CHcy:Hx,chcy:Jp,check:qx,checkmark:ud,Chi:eg,chi:cd,circ:tg,circeq:Lh,circlearrowleft:Gx,circlearrowright:Wx,circledast:Vx,circledcirc:IC,circleddash:fd,CircleDot:dd,circledR:NC,circledS:PC,CircleMinus:BC,CirclePlus:zC,CircleTimes:UC,cir:Na,cirE:Cs,cire:ea,cirfnint:Ss,cirmid:ng,cirscir:jC,ClockwiseContourIntegral:o0,CloseCurlyDoubleQuote:HC,CloseCurlyQuote:Ey,clubs:Yx,clubsuit:Ay,colon:Cy,Colon:Sy,Colone:Xx,colone:Kx,coloneq:ky,comma:Zx,commat:rg,comp:qC,compfn:s0,complement:wc,complexes:Qx,cong:GC,congdot:Jx,Congruent:cl,conint:Ai,Conint:du,ContourIntegral:af,copf:lf,Copf:ew,coprod:Ty,Coproduct:tw,copy:Dy,COPY:ig,copysr:nw,CounterClockwiseContourIntegral:Ly,crarr:uf,cross:rw,Cross:iw,Cscr:a0,cscr:Ry,csub:ow,csube:sw,csup:WC,csupe:l0,ctdot:aw,cudarrl:VC,cudarrr:lw,cuepr:Rh,cuesc:Fy,cularr:u0,cularrp:uw,cupbrcap:$y,cupcap:cw,CupCap:fw,cup:qs,Cup:c0,cupcup:dw,cupdot:hw,cupor:pw,cups:Fh,curarr:f0,curarrm:gw,curlyeqprec:mw,curlyeqsucc:vw,curlyvee:$h,curlywedge:yw,curren:d0,curvearrowleft:bw,curvearrowright:og,cuvee:Mh,cuwed:xw,cwconint:ww,cwint:_w,cylcty:sg,dagger:ag,Dagger:lg,daleth:ug,darr:Ew,Darr:Aw,dArr:cf,dash:Oh,Dashv:cg,dashv:Cw,dbkarow:YC,dblac:XC,Dcaron:ya,dcaron:Sw,Dcy:KC,dcy:kw,ddagger:Tw,ddarr:Dw,DD:ZC,dd:QC,DDotrahd:ff,ddotseq:fg,deg:h0,Del:dg,Delta:_c,delta:JC,demptyv:eS,dfisht:Ih,Dfr:Lw,dfr:Rw,dHar:Fw,dharl:p0,dharr:Nh,DiacriticalAcute:My,DiacriticalDot:Oy,DiacriticalDoubleAcute:Iy,DiacriticalGrave:hg,DiacriticalTilde:$w,diam:Mw,diamond:g0,Diamond:tS,diamondsuit:pg,diams:Ow,die:Iw,DifferentialD:Ny,digamma:Nw,disin:Pw,div:Bw,divide:gg,divideontimes:mg,divonx:Py,DJcy:zw,djcy:Uw,dlcorn:jw,dlcrop:By,dollar:Hw,Dopf:qw,dopf:Ph,Dot:Gw,dot:m0,DotDot:nS,doteq:rS,doteqdot:So,DotEqual:zy,dotminus:vg,dotplus:hu,dotsquare:v0,doublebarwedge:Uy,DoubleContourIntegral:Ww,DoubleDot:Vw,DoubleDownArrow:Yw,DoubleLeftArrow:jy,DoubleLeftRightArrow:Xw,DoubleLeftTee:Hy,DoubleLongLeftArrow:Kw,DoubleLongLeftRightArrow:Ui,DoubleLongRightArrow:Zw,DoubleRightArrow:Bh,DoubleRightTee:y0,DoubleUpArrow:iS,DoubleUpDownArrow:Wo,DoubleVerticalBar:oS,DownArrowBar:b0,downarrow:b,DownArrow:A,Downarrow:$,DownArrowUpArrow:F,DownBreve:I,downdownarrows:G,downharpoonleft:X,downharpoonright:J,DownLeftRightVector:le,DownLeftTeeVector:ue,DownLeftVectorBar:_e,DownLeftVector:Ae,DownRightTeeVector:qe,DownRightVectorBar:Ne,DownRightVector:tt,DownTeeArrow:nt,DownTee:Je,drbkarow:lt,drcorn:xt,drcrop:bt,Dscr:Bt,dscr:Ot,DScy:jt,dscy:Yn,dsol:ln,Dstrok:Dr,dstrok:Bn,dtdot:Jr,dtri:Ci,dtrif:ei,duarr:Nr,duhar:ti,dwangle:br,DZcy:Si,dzcy:gr,dzigrarr:Hr,Eacute:Cr,eacute:ui,easter:ta,Ecaron:ki,ecaron:Gs,Ecirc:Ws,ecirc:yo,ecir:na,ecolon:Nl,Ecy:Ms,ecy:pu,eDDot:x0,Edot:Qw,edot:hd,eDot:Pa,ee:df,efDot:sS,Efr:zh,efr:qy,eg:yg,Egrave:w0,egrave:bg,egs:Gy,egsdot:Jw,el:Wy,Element:e2,elinters:t2,ell:n2,els:dH,elsdot:hH,Emacr:pH,emacr:gH,empty:mH,emptyset:vH,EmptySmallSquare:yH,emptyv:bH,EmptyVerySmallSquare:xH,emsp13:wH,emsp14:_H,emsp:EH,ENG:AH,eng:CH,ensp:SH,Eogon:kH,eogon:TH,Eopf:DH,eopf:LH,epar:RH,eparsl:FH,eplus:$H,epsi:MH,Epsilon:OH,epsilon:IH,epsiv:NH,eqcirc:PH,eqcolon:BH,eqsim:zH,eqslantgtr:UH,eqslantless:jH,Equal:HH,equals:qH,EqualTilde:GH,equest:WH,Equilibrium:VH,equiv:YH,equivDD:XH,eqvparsl:KH,erarr:ZH,erDot:QH,escr:JH,Escr:eq,esdot:tq,Esim:nq,esim:rq,Eta:iq,eta:oq,ETH:sq,eth:aq,Euml:lq,euml:uq,euro:cq,excl:fq,exist:dq,Exists:hq,expectation:pq,exponentiale:gq,ExponentialE:mq,fallingdotseq:vq,Fcy:yq,fcy:bq,female:xq,ffilig:wq,fflig:_q,ffllig:Eq,Ffr:Aq,ffr:Cq,filig:Sq,FilledSmallSquare:kq,FilledVerySmallSquare:Tq,fjlig:Dq,flat:Lq,fllig:Rq,fltns:Fq,fnof:$q,Fopf:Mq,fopf:Oq,forall:Iq,ForAll:Nq,fork:Pq,forkv:Bq,Fouriertrf:zq,fpartint:Uq,frac12:jq,frac13:Hq,frac14:qq,frac15:Gq,frac16:Wq,frac18:Vq,frac23:Yq,frac25:Xq,frac34:Kq,frac35:Zq,frac38:Qq,frac45:Jq,frac56:eG,frac58:tG,frac78:nG,frasl:rG,frown:iG,fscr:oG,Fscr:sG,gacute:aG,Gamma:lG,gamma:uG,Gammad:cG,gammad:fG,gap:dG,Gbreve:hG,gbreve:pG,Gcedil:gG,Gcirc:mG,gcirc:vG,Gcy:yG,gcy:bG,Gdot:xG,gdot:wG,ge:_G,gE:EG,gEl:AG,gel:CG,geq:SG,geqq:kG,geqslant:TG,gescc:DG,ges:LG,gesdot:RG,gesdoto:FG,gesdotol:$G,gesl:MG,gesles:OG,Gfr:IG,gfr:NG,gg:PG,Gg:BG,ggg:zG,gimel:UG,GJcy:jG,gjcy:HG,gla:qG,gl:GG,glE:WG,glj:VG,gnap:YG,gnapprox:XG,gne:KG,gnE:ZG,gneq:QG,gneqq:JG,gnsim:eW,Gopf:tW,gopf:nW,grave:rW,GreaterEqual:iW,GreaterEqualLess:oW,GreaterFullEqual:sW,GreaterGreater:aW,GreaterLess:lW,GreaterSlantEqual:uW,GreaterTilde:cW,Gscr:fW,gscr:dW,gsim:hW,gsime:pW,gsiml:gW,gtcc:mW,gtcir:vW,gt:yW,GT:bW,Gt:xW,gtdot:wW,gtlPar:_W,gtquest:EW,gtrapprox:AW,gtrarr:CW,gtrdot:SW,gtreqless:kW,gtreqqless:TW,gtrless:DW,gtrsim:LW,gvertneqq:RW,gvnE:FW,Hacek:$W,hairsp:MW,half:OW,hamilt:IW,HARDcy:NW,hardcy:PW,harrcir:BW,harr:zW,hArr:UW,harrw:jW,Hat:HW,hbar:qW,Hcirc:GW,hcirc:WW,hearts:VW,heartsuit:YW,hellip:XW,hercon:KW,hfr:ZW,Hfr:QW,HilbertSpace:JW,hksearow:eV,hkswarow:tV,hoarr:nV,homtht:rV,hookleftarrow:iV,hookrightarrow:oV,hopf:sV,Hopf:aV,horbar:lV,HorizontalLine:uV,hscr:cV,Hscr:fV,hslash:dV,Hstrok:hV,hstrok:pV,HumpDownHump:gV,HumpEqual:mV,hybull:vV,hyphen:yV,Iacute:bV,iacute:xV,ic:wV,Icirc:_V,icirc:EV,Icy:AV,icy:CV,Idot:SV,IEcy:kV,iecy:TV,iexcl:DV,iff:LV,ifr:RV,Ifr:FV,Igrave:$V,igrave:MV,ii:OV,iiiint:IV,iiint:NV,iinfin:PV,iiota:BV,IJlig:zV,ijlig:UV,Imacr:jV,imacr:HV,image:qV,ImaginaryI:GV,imagline:WV,imagpart:VV,imath:YV,Im:XV,imof:KV,imped:ZV,Implies:QV,incare:JV,in:"",infin:eY,infintie:tY,inodot:nY,intcal:rY,int:iY,Int:oY,integers:sY,Integral:aY,intercal:lY,Intersection:uY,intlarhk:cY,intprod:fY,InvisibleComma:dY,InvisibleTimes:hY,IOcy:pY,iocy:gY,Iogon:mY,iogon:vY,Iopf:yY,iopf:bY,Iota:xY,iota:wY,iprod:_Y,iquest:EY,iscr:AY,Iscr:CY,isin:SY,isindot:kY,isinE:TY,isins:DY,isinsv:LY,isinv:RY,it:FY,Itilde:$Y,itilde:MY,Iukcy:OY,iukcy:IY,Iuml:NY,iuml:PY,Jcirc:BY,jcirc:zY,Jcy:UY,jcy:jY,Jfr:HY,jfr:qY,jmath:GY,Jopf:WY,jopf:VY,Jscr:YY,jscr:XY,Jsercy:KY,jsercy:ZY,Jukcy:QY,jukcy:JY,Kappa:eX,kappa:tX,kappav:nX,Kcedil:rX,kcedil:iX,Kcy:oX,kcy:sX,Kfr:aX,kfr:lX,kgreen:uX,KHcy:cX,khcy:fX,KJcy:dX,kjcy:hX,Kopf:pX,kopf:gX,Kscr:mX,kscr:vX,lAarr:yX,Lacute:bX,lacute:xX,laemptyv:wX,lagran:_X,Lambda:EX,lambda:AX,lang:CX,Lang:SX,langd:kX,langle:TX,lap:DX,Laplacetrf:LX,laquo:RX,larrb:FX,larrbfs:$X,larr:MX,Larr:OX,lArr:IX,larrfs:NX,larrhk:PX,larrlp:BX,larrpl:zX,larrsim:UX,larrtl:jX,latail:HX,lAtail:qX,lat:GX,late:WX,lates:VX,lbarr:YX,lBarr:XX,lbbrk:KX,lbrace:ZX,lbrack:QX,lbrke:JX,lbrksld:eK,lbrkslu:tK,Lcaron:nK,lcaron:rK,Lcedil:iK,lcedil:oK,lceil:sK,lcub:aK,Lcy:lK,lcy:uK,ldca:cK,ldquo:fK,ldquor:dK,ldrdhar:hK,ldrushar:pK,ldsh:gK,le:mK,lE:vK,LeftAngleBracket:yK,LeftArrowBar:bK,leftarrow:xK,LeftArrow:wK,Leftarrow:_K,LeftArrowRightArrow:EK,leftarrowtail:AK,LeftCeiling:CK,LeftDoubleBracket:SK,LeftDownTeeVector:kK,LeftDownVectorBar:TK,LeftDownVector:DK,LeftFloor:LK,leftharpoondown:RK,leftharpoonup:FK,leftleftarrows:$K,leftrightarrow:MK,LeftRightArrow:OK,Leftrightarrow:IK,leftrightarrows:NK,leftrightharpoons:PK,leftrightsquigarrow:BK,LeftRightVector:zK,LeftTeeArrow:UK,LeftTee:jK,LeftTeeVector:HK,leftthreetimes:qK,LeftTriangleBar:GK,LeftTriangle:WK,LeftTriangleEqual:VK,LeftUpDownVector:YK,LeftUpTeeVector:XK,LeftUpVectorBar:KK,LeftUpVector:ZK,LeftVectorBar:QK,LeftVector:JK,lEg:eZ,leg:tZ,leq:nZ,leqq:rZ,leqslant:iZ,lescc:oZ,les:sZ,lesdot:aZ,lesdoto:lZ,lesdotor:uZ,lesg:cZ,lesges:fZ,lessapprox:dZ,lessdot:hZ,lesseqgtr:pZ,lesseqqgtr:gZ,LessEqualGreater:mZ,LessFullEqual:vZ,LessGreater:yZ,lessgtr:bZ,LessLess:xZ,lesssim:wZ,LessSlantEqual:_Z,LessTilde:EZ,lfisht:AZ,lfloor:CZ,Lfr:SZ,lfr:kZ,lg:TZ,lgE:DZ,lHar:LZ,lhard:RZ,lharu:FZ,lharul:$Z,lhblk:MZ,LJcy:OZ,ljcy:IZ,llarr:NZ,ll:PZ,Ll:BZ,llcorner:zZ,Lleftarrow:UZ,llhard:jZ,lltri:HZ,Lmidot:qZ,lmidot:GZ,lmoustache:WZ,lmoust:VZ,lnap:YZ,lnapprox:XZ,lne:KZ,lnE:ZZ,lneq:QZ,lneqq:JZ,lnsim:eQ,loang:tQ,loarr:nQ,lobrk:rQ,longleftarrow:iQ,LongLeftArrow:oQ,Longleftarrow:sQ,longleftrightarrow:aQ,LongLeftRightArrow:lQ,Longleftrightarrow:uQ,longmapsto:cQ,longrightarrow:fQ,LongRightArrow:dQ,Longrightarrow:hQ,looparrowleft:pQ,looparrowright:gQ,lopar:mQ,Lopf:vQ,lopf:yQ,loplus:bQ,lotimes:xQ,lowast:wQ,lowbar:_Q,LowerLeftArrow:EQ,LowerRightArrow:AQ,loz:CQ,lozenge:SQ,lozf:kQ,lpar:TQ,lparlt:DQ,lrarr:LQ,lrcorner:RQ,lrhar:FQ,lrhard:$Q,lrm:MQ,lrtri:OQ,lsaquo:IQ,lscr:NQ,Lscr:PQ,lsh:BQ,Lsh:zQ,lsim:UQ,lsime:jQ,lsimg:HQ,lsqb:qQ,lsquo:GQ,lsquor:WQ,Lstrok:VQ,lstrok:YQ,ltcc:XQ,ltcir:KQ,lt:ZQ,LT:QQ,Lt:JQ,ltdot:eJ,lthree:tJ,ltimes:nJ,ltlarr:rJ,ltquest:iJ,ltri:oJ,ltrie:sJ,ltrif:aJ,ltrPar:lJ,lurdshar:uJ,luruhar:cJ,lvertneqq:fJ,lvnE:dJ,macr:hJ,male:pJ,malt:gJ,maltese:mJ,Map:"",map:vJ,mapsto:yJ,mapstodown:bJ,mapstoleft:xJ,mapstoup:wJ,marker:_J,mcomma:EJ,Mcy:AJ,mcy:CJ,mdash:SJ,mDDot:kJ,measuredangle:TJ,MediumSpace:DJ,Mellintrf:LJ,Mfr:RJ,mfr:FJ,mho:$J,micro:MJ,midast:OJ,midcir:IJ,mid:NJ,middot:PJ,minusb:BJ,minus:zJ,minusd:UJ,minusdu:jJ,MinusPlus:HJ,mlcp:qJ,mldr:GJ,mnplus:WJ,models:VJ,Mopf:YJ,mopf:XJ,mp:KJ,mscr:ZJ,Mscr:QJ,mstpos:JJ,Mu:eee,mu:tee,multimap:nee,mumap:ree,nabla:iee,Nacute:oee,nacute:see,nang:aee,nap:lee,napE:uee,napid:cee,napos:fee,napprox:dee,natural:hee,naturals:pee,natur:gee,nbsp:mee,nbump:vee,nbumpe:yee,ncap:bee,Ncaron:xee,ncaron:wee,Ncedil:_ee,ncedil:Eee,ncong:Aee,ncongdot:Cee,ncup:See,Ncy:kee,ncy:Tee,ndash:Dee,nearhk:Lee,nearr:Ree,neArr:Fee,nearrow:$ee,ne:Mee,nedot:Oee,NegativeMediumSpace:Iee,NegativeThickSpace:Nee,NegativeThinSpace:Pee,NegativeVeryThinSpace:Bee,nequiv:zee,nesear:Uee,nesim:jee,NestedGreaterGreater:Hee,NestedLessLess:qee,NewLine:Gee,nexist:Wee,nexists:Vee,Nfr:Yee,nfr:Xee,ngE:Kee,nge:Zee,ngeq:Qee,ngeqq:Jee,ngeqslant:ete,nges:tte,nGg:nte,ngsim:rte,nGt:ite,ngt:ote,ngtr:ste,nGtv:ate,nharr:lte,nhArr:ute,nhpar:cte,ni:fte,nis:dte,nisd:hte,niv:pte,NJcy:gte,njcy:mte,nlarr:vte,nlArr:yte,nldr:bte,nlE:xte,nle:wte,nleftarrow:_te,nLeftarrow:Ete,nleftrightarrow:Ate,nLeftrightarrow:Cte,nleq:Ste,nleqq:kte,nleqslant:Tte,nles:Dte,nless:Lte,nLl:Rte,nlsim:Fte,nLt:$te,nlt:Mte,nltri:Ote,nltrie:Ite,nLtv:Nte,nmid:Pte,NoBreak:Bte,NonBreakingSpace:zte,nopf:Ute,Nopf:jte,Not:Hte,not:qte,NotCongruent:Gte,NotCupCap:Wte,NotDoubleVerticalBar:Vte,NotElement:Yte,NotEqual:Xte,NotEqualTilde:Kte,NotExists:Zte,NotGreater:Qte,NotGreaterEqual:Jte,NotGreaterFullEqual:ene,NotGreaterGreater:tne,NotGreaterLess:nne,NotGreaterSlantEqual:rne,NotGreaterTilde:ine,NotHumpDownHump:one,NotHumpEqual:sne,notin:ane,notindot:lne,notinE:une,notinva:cne,notinvb:fne,notinvc:dne,NotLeftTriangleBar:hne,NotLeftTriangle:pne,NotLeftTriangleEqual:gne,NotLess:mne,NotLessEqual:vne,NotLessGreater:yne,NotLessLess:bne,NotLessSlantEqual:xne,NotLessTilde:wne,NotNestedGreaterGreater:_ne,NotNestedLessLess:Ene,notni:Ane,notniva:Cne,notnivb:Sne,notnivc:kne,NotPrecedes:Tne,NotPrecedesEqual:Dne,NotPrecedesSlantEqual:Lne,NotReverseElement:Rne,NotRightTriangleBar:Fne,NotRightTriangle:$ne,NotRightTriangleEqual:Mne,NotSquareSubset:One,NotSquareSubsetEqual:Ine,NotSquareSuperset:Nne,NotSquareSupersetEqual:Pne,NotSubset:Bne,NotSubsetEqual:zne,NotSucceeds:Une,NotSucceedsEqual:jne,NotSucceedsSlantEqual:Hne,NotSucceedsTilde:qne,NotSuperset:Gne,NotSupersetEqual:Wne,NotTilde:Vne,NotTildeEqual:Yne,NotTildeFullEqual:Xne,NotTildeTilde:Kne,NotVerticalBar:Zne,nparallel:Qne,npar:Jne,nparsl:ere,npart:tre,npolint:nre,npr:rre,nprcue:ire,nprec:ore,npreceq:sre,npre:are,nrarrc:lre,nrarr:ure,nrArr:cre,nrarrw:fre,nrightarrow:dre,nRightarrow:hre,nrtri:pre,nrtrie:gre,nsc:mre,nsccue:vre,nsce:yre,Nscr:bre,nscr:xre,nshortmid:wre,nshortparallel:_re,nsim:Ere,nsime:Are,nsimeq:Cre,nsmid:Sre,nspar:kre,nsqsube:Tre,nsqsupe:Dre,nsub:Lre,nsubE:Rre,nsube:Fre,nsubset:$re,nsubseteq:Mre,nsubseteqq:Ore,nsucc:Ire,nsucceq:Nre,nsup:Pre,nsupE:Bre,nsupe:zre,nsupset:Ure,nsupseteq:jre,nsupseteqq:Hre,ntgl:qre,Ntilde:Gre,ntilde:Wre,ntlg:Vre,ntriangleleft:Yre,ntrianglelefteq:Xre,ntriangleright:Kre,ntrianglerighteq:Zre,Nu:Qre,nu:Jre,num:eie,numero:tie,numsp:nie,nvap:rie,nvdash:iie,nvDash:oie,nVdash:sie,nVDash:aie,nvge:lie,nvgt:uie,nvHarr:cie,nvinfin:fie,nvlArr:die,nvle:hie,nvlt:pie,nvltrie:gie,nvrArr:mie,nvrtrie:vie,nvsim:yie,nwarhk:bie,nwarr:xie,nwArr:wie,nwarrow:_ie,nwnear:Eie,Oacute:Aie,oacute:Cie,oast:Sie,Ocirc:kie,ocirc:Tie,ocir:Die,Ocy:Lie,ocy:Rie,odash:Fie,Odblac:$ie,odblac:Mie,odiv:Oie,odot:Iie,odsold:Nie,OElig:Pie,oelig:Bie,ofcir:zie,Ofr:Uie,ofr:jie,ogon:Hie,Ograve:qie,ograve:Gie,ogt:Wie,ohbar:Vie,ohm:Yie,oint:Xie,olarr:Kie,olcir:Zie,olcross:Qie,oline:Jie,olt:eoe,Omacr:toe,omacr:noe,Omega:roe,omega:ioe,Omicron:ooe,omicron:soe,omid:aoe,ominus:loe,Oopf:uoe,oopf:coe,opar:foe,OpenCurlyDoubleQuote:doe,OpenCurlyQuote:hoe,operp:poe,oplus:goe,orarr:moe,Or:voe,or:yoe,ord:boe,order:xoe,orderof:woe,ordf:_oe,ordm:Eoe,origof:Aoe,oror:Coe,orslope:Soe,orv:koe,oS:Toe,Oscr:Doe,oscr:Loe,Oslash:Roe,oslash:Foe,osol:$oe,Otilde:Moe,otilde:Ooe,otimesas:Ioe,Otimes:Noe,otimes:Poe,Ouml:Boe,ouml:zoe,ovbar:Uoe,OverBar:joe,OverBrace:Hoe,OverBracket:qoe,OverParenthesis:Goe,para:Woe,parallel:Voe,par:Yoe,parsim:Xoe,parsl:Koe,part:Zoe,PartialD:Qoe,Pcy:Joe,pcy:ese,percnt:tse,period:nse,permil:rse,perp:ise,pertenk:ose,Pfr:sse,pfr:ase,Phi:lse,phi:use,phiv:cse,phmmat:fse,phone:dse,Pi:hse,pi:pse,pitchfork:gse,piv:mse,planck:vse,planckh:yse,plankv:bse,plusacir:xse,plusb:wse,pluscir:_se,plus:Ese,plusdo:Ase,plusdu:Cse,pluse:Sse,PlusMinus:kse,plusmn:Tse,plussim:Dse,plustwo:Lse,pm:Rse,Poincareplane:Fse,pointint:$se,popf:Mse,Popf:Ose,pound:Ise,prap:Nse,Pr:Pse,pr:Bse,prcue:zse,precapprox:Use,prec:jse,preccurlyeq:Hse,Precedes:qse,PrecedesEqual:Gse,PrecedesSlantEqual:Wse,PrecedesTilde:Vse,preceq:Yse,precnapprox:Xse,precneqq:Kse,precnsim:Zse,pre:Qse,prE:Jse,precsim:eae,prime:tae,Prime:nae,primes:rae,prnap:iae,prnE:oae,prnsim:sae,prod:aae,Product:lae,profalar:uae,profline:cae,profsurf:fae,prop:dae,Proportional:hae,Proportion:pae,propto:gae,prsim:mae,prurel:vae,Pscr:yae,pscr:bae,Psi:xae,psi:wae,puncsp:_ae,Qfr:Eae,qfr:Aae,qint:Cae,qopf:Sae,Qopf:kae,qprime:Tae,Qscr:Dae,qscr:Lae,quaternions:Rae,quatint:Fae,quest:$ae,questeq:Mae,quot:Oae,QUOT:Iae,rAarr:Nae,race:Pae,Racute:Bae,racute:zae,radic:Uae,raemptyv:jae,rang:Hae,Rang:qae,rangd:Gae,range:Wae,rangle:Vae,raquo:Yae,rarrap:Xae,rarrb:Kae,rarrbfs:Zae,rarrc:Qae,rarr:Jae,Rarr:ele,rArr:tle,rarrfs:nle,rarrhk:rle,rarrlp:ile,rarrpl:ole,rarrsim:sle,Rarrtl:ale,rarrtl:lle,rarrw:ule,ratail:cle,rAtail:fle,ratio:dle,rationals:hle,rbarr:ple,rBarr:gle,RBarr:mle,rbbrk:vle,rbrace:yle,rbrack:ble,rbrke:xle,rbrksld:wle,rbrkslu:_le,Rcaron:Ele,rcaron:Ale,Rcedil:Cle,rcedil:Sle,rceil:kle,rcub:Tle,Rcy:Dle,rcy:Lle,rdca:Rle,rdldhar:Fle,rdquo:$le,rdquor:Mle,rdsh:Ole,real:Ile,realine:Nle,realpart:Ple,reals:Ble,Re:zle,rect:Ule,reg:jle,REG:Hle,ReverseElement:qle,ReverseEquilibrium:Gle,ReverseUpEquilibrium:Wle,rfisht:Vle,rfloor:Yle,rfr:Xle,Rfr:Kle,rHar:Zle,rhard:Qle,rharu:Jle,rharul:eue,Rho:tue,rho:nue,rhov:rue,RightAngleBracket:iue,RightArrowBar:oue,rightarrow:sue,RightArrow:aue,Rightarrow:lue,RightArrowLeftArrow:uue,rightarrowtail:cue,RightCeiling:fue,RightDoubleBracket:due,RightDownTeeVector:hue,RightDownVectorBar:pue,RightDownVector:gue,RightFloor:mue,rightharpoondown:vue,rightharpoonup:yue,rightleftarrows:bue,rightleftharpoons:xue,rightrightarrows:wue,rightsquigarrow:_ue,RightTeeArrow:Eue,RightTee:Aue,RightTeeVector:Cue,rightthreetimes:Sue,RightTriangleBar:kue,RightTriangle:Tue,RightTriangleEqual:Due,RightUpDownVector:Lue,RightUpTeeVector:Rue,RightUpVectorBar:Fue,RightUpVector:$ue,RightVectorBar:Mue,RightVector:Oue,ring:Iue,risingdotseq:Nue,rlarr:Pue,rlhar:Bue,rlm:zue,rmoustache:Uue,rmoust:jue,rnmid:Hue,roang:que,roarr:Gue,robrk:Wue,ropar:Vue,ropf:Yue,Ropf:Xue,roplus:Kue,rotimes:Zue,RoundImplies:Que,rpar:Jue,rpargt:ece,rppolint:tce,rrarr:nce,Rrightarrow:rce,rsaquo:ice,rscr:oce,Rscr:sce,rsh:lce,Rsh:uce,rsqb:cce,rsquo:fce,rsquor:dce,rthree:hce,rtimes:pce,rtri:gce,rtrie:mce,rtrif:vce,rtriltri:yce,RuleDelayed:bce,ruluhar:xce,rx:wce,Sacute:_ce,sacute:Ece,sbquo:Ace,scap:Cce,Scaron:Sce,scaron:kce,Sc:Tce,sc:Dce,sccue:Lce,sce:Rce,scE:Fce,Scedil:$ce,scedil:Mce,Scirc:Oce,scirc:Ice,scnap:Nce,scnE:Pce,scnsim:Bce,scpolint:zce,scsim:Uce,Scy:jce,scy:Hce,sdotb:qce,sdot:Gce,sdote:Wce,searhk:Vce,searr:Yce,seArr:Xce,searrow:Kce,sect:Zce,semi:Qce,seswar:Jce,setminus:efe,setmn:tfe,sext:nfe,Sfr:rfe,sfr:ife,sfrown:ofe,sharp:sfe,SHCHcy:afe,shchcy:lfe,SHcy:ufe,shcy:cfe,ShortDownArrow:ffe,ShortLeftArrow:dfe,shortmid:hfe,shortparallel:pfe,ShortRightArrow:gfe,ShortUpArrow:mfe,shy:vfe,Sigma:yfe,sigma:bfe,sigmaf:xfe,sigmav:wfe,sim:_fe,simdot:Efe,sime:Afe,simeq:Cfe,simg:Sfe,simgE:kfe,siml:Tfe,simlE:Dfe,simne:Lfe,simplus:Rfe,simrarr:Ffe,slarr:$fe,SmallCircle:Mfe,smallsetminus:Ofe,smashp:Ife,smeparsl:Nfe,smid:Pfe,smile:Bfe,smt:zfe,smte:Ufe,smtes:jfe,SOFTcy:Hfe,softcy:qfe,solbar:Gfe,solb:Wfe,sol:Vfe,Sopf:Yfe,sopf:Xfe,spades:Kfe,spadesuit:Zfe,spar:Qfe,sqcap:Jfe,sqcaps:ede,sqcup:tde,sqcups:nde,Sqrt:rde,sqsub:ide,sqsube:ode,sqsubset:sde,sqsubseteq:ade,sqsup:lde,sqsupe:ude,sqsupset:cde,sqsupseteq:fde,square:dde,Square:hde,SquareIntersection:pde,SquareSubset:gde,SquareSubsetEqual:mde,SquareSuperset:vde,SquareSupersetEqual:yde,SquareUnion:bde,squarf:xde,squ:wde,squf:_de,srarr:Ede,Sscr:Ade,sscr:Cde,ssetmn:Sde,ssmile:kde,sstarf:Tde,Star:Dde,star:Lde,starf:Rde,straightepsilon:Fde,straightphi:$de,strns:Mde,sub:Ode,Sub:Ide,subdot:Nde,subE:Pde,sube:Bde,subedot:zde,submult:Ude,subnE:jde,subne:Hde,subplus:qde,subrarr:Gde,subset:Wde,Subset:Vde,subseteq:Yde,subseteqq:Xde,SubsetEqual:Kde,subsetneq:Zde,subsetneqq:Qde,subsim:Jde,subsub:ehe,subsup:the,succapprox:nhe,succ:rhe,succcurlyeq:ihe,Succeeds:ohe,SucceedsEqual:she,SucceedsSlantEqual:ahe,SucceedsTilde:lhe,succeq:uhe,succnapprox:che,succneqq:fhe,succnsim:dhe,succsim:hhe,SuchThat:phe,sum:ghe,Sum:mhe,sung:vhe,sup1:yhe,sup2:bhe,sup3:xhe,sup:whe,Sup:_he,supdot:Ehe,supdsub:Ahe,supE:Che,supe:She,supedot:khe,Superset:The,SupersetEqual:Dhe,suphsol:Lhe,suphsub:Rhe,suplarr:Fhe,supmult:$he,supnE:Mhe,supne:Ohe,supplus:Ihe,supset:Nhe,Supset:Phe,supseteq:Bhe,supseteqq:zhe,supsetneq:Uhe,supsetneqq:jhe,supsim:Hhe,supsub:qhe,supsup:Ghe,swarhk:Whe,swarr:Vhe,swArr:Yhe,swarrow:Xhe,swnwar:Khe,szlig:Zhe,Tab:Qhe,target:Jhe,Tau:epe,tau:tpe,tbrk:npe,Tcaron:rpe,tcaron:ipe,Tcedil:ope,tcedil:spe,Tcy:ape,tcy:lpe,tdot:upe,telrec:cpe,Tfr:fpe,tfr:dpe,there4:hpe,therefore:ppe,Therefore:gpe,Theta:mpe,theta:vpe,thetasym:ype,thetav:bpe,thickapprox:xpe,thicksim:wpe,ThickSpace:_pe,ThinSpace:Epe,thinsp:Ape,thkap:Cpe,thksim:Spe,THORN:kpe,thorn:Tpe,tilde:Dpe,Tilde:Lpe,TildeEqual:Rpe,TildeFullEqual:Fpe,TildeTilde:$pe,timesbar:Mpe,timesb:Ope,times:Ipe,timesd:Npe,tint:Ppe,toea:Bpe,topbot:zpe,topcir:Upe,top:jpe,Topf:Hpe,topf:qpe,topfork:Gpe,tosa:Wpe,tprime:Vpe,trade:Ype,TRADE:Xpe,triangle:Kpe,triangledown:Zpe,triangleleft:Qpe,trianglelefteq:Jpe,triangleq:ege,triangleright:tge,trianglerighteq:nge,tridot:rge,trie:ige,triminus:oge,TripleDot:sge,triplus:age,trisb:lge,tritime:uge,trpezium:cge,Tscr:fge,tscr:dge,TScy:hge,tscy:pge,TSHcy:gge,tshcy:mge,Tstrok:vge,tstrok:yge,twixt:bge,twoheadleftarrow:xge,twoheadrightarrow:wge,Uacute:_ge,uacute:Ege,uarr:Age,Uarr:Cge,uArr:Sge,Uarrocir:kge,Ubrcy:Tge,ubrcy:Dge,Ubreve:Lge,ubreve:Rge,Ucirc:Fge,ucirc:$ge,Ucy:Mge,ucy:Oge,udarr:Ige,Udblac:Nge,udblac:Pge,udhar:Bge,ufisht:zge,Ufr:Uge,ufr:jge,Ugrave:Hge,ugrave:qge,uHar:Gge,uharl:Wge,uharr:Vge,uhblk:Yge,ulcorn:Xge,ulcorner:Kge,ulcrop:Zge,ultri:Qge,Umacr:Jge,umacr:eme,uml:tme,UnderBar:nme,UnderBrace:rme,UnderBracket:ime,UnderParenthesis:ome,Union:sme,UnionPlus:ame,Uogon:lme,uogon:ume,Uopf:cme,uopf:fme,UpArrowBar:dme,uparrow:hme,UpArrow:pme,Uparrow:gme,UpArrowDownArrow:mme,updownarrow:vme,UpDownArrow:yme,Updownarrow:bme,UpEquilibrium:xme,upharpoonleft:wme,upharpoonright:_me,uplus:Eme,UpperLeftArrow:Ame,UpperRightArrow:Cme,upsi:Sme,Upsi:kme,upsih:Tme,Upsilon:Dme,upsilon:Lme,UpTeeArrow:Rme,UpTee:Fme,upuparrows:$me,urcorn:Mme,urcorner:Ome,urcrop:Ime,Uring:Nme,uring:Pme,urtri:Bme,Uscr:zme,uscr:Ume,utdot:jme,Utilde:Hme,utilde:qme,utri:Gme,utrif:Wme,uuarr:Vme,Uuml:Yme,uuml:Xme,uwangle:Kme,vangrt:Zme,varepsilon:Qme,varkappa:Jme,varnothing:e0e,varphi:t0e,varpi:n0e,varpropto:r0e,varr:i0e,vArr:o0e,varrho:s0e,varsigma:a0e,varsubsetneq:l0e,varsubsetneqq:u0e,varsupsetneq:c0e,varsupsetneqq:f0e,vartheta:d0e,vartriangleleft:h0e,vartriangleright:p0e,vBar:g0e,Vbar:m0e,vBarv:v0e,Vcy:y0e,vcy:b0e,vdash:x0e,vDash:w0e,Vdash:_0e,VDash:E0e,Vdashl:A0e,veebar:C0e,vee:S0e,Vee:k0e,veeeq:T0e,vellip:D0e,verbar:L0e,Verbar:R0e,vert:F0e,Vert:$0e,VerticalBar:M0e,VerticalLine:O0e,VerticalSeparator:I0e,VerticalTilde:N0e,VeryThinSpace:P0e,Vfr:B0e,vfr:z0e,vltri:U0e,vnsub:j0e,vnsup:H0e,Vopf:q0e,vopf:G0e,vprop:W0e,vrtri:V0e,Vscr:Y0e,vscr:X0e,vsubnE:K0e,vsubne:Z0e,vsupnE:Q0e,vsupne:J0e,Vvdash:eve,vzigzag:tve,Wcirc:nve,wcirc:rve,wedbar:ive,wedge:ove,Wedge:sve,wedgeq:ave,weierp:lve,Wfr:uve,wfr:cve,Wopf:fve,wopf:dve,wp:hve,wr:pve,wreath:gve,Wscr:mve,wscr:vve,xcap:yve,xcirc:bve,xcup:xve,xdtri:wve,Xfr:_ve,xfr:Eve,xharr:Ave,xhArr:Cve,Xi:Sve,xi:kve,xlarr:Tve,xlArr:Dve,xmap:Lve,xnis:Rve,xodot:Fve,Xopf:$ve,xopf:Mve,xoplus:Ove,xotime:Ive,xrarr:Nve,xrArr:Pve,Xscr:Bve,xscr:zve,xsqcup:Uve,xuplus:jve,xutri:Hve,xvee:qve,xwedge:Gve,Yacute:Wve,yacute:Vve,YAcy:Yve,yacy:Xve,Ycirc:Kve,ycirc:Zve,Ycy:Qve,ycy:Jve,yen:eye,Yfr:tye,yfr:nye,YIcy:rye,yicy:iye,Yopf:oye,yopf:sye,Yscr:aye,yscr:lye,YUcy:uye,yucy:cye,yuml:fye,Yuml:dye,Zacute:hye,zacute:pye,Zcaron:gye,zcaron:mye,Zcy:vye,zcy:yye,Zdot:bye,zdot:xye,zeetrf:wye,ZeroWidthSpace:_ye,Zeta:Eye,zeta:Aye,zfr:Cye,Zfr:Sye,ZHcy:kye,zhcy:Tye,zigrarr:Dye,zopf:Lye,Zopf:Rye,Zscr:Fye,zscr:$ye,zwj:Mye,zwnj:Oye},yUe=Object.freeze({__proto__:null,Aacute:y,aacute:v,Abreve:x,abreve:_,ac:E,acd:C,acE:w,Acirc:T,acirc:R,acute:L,Acy:B,acy:P,AElig:S,aelig:k,af:D,Afr:O,afr:N,Agrave:j,agrave:q,alefsym:W,aleph:Q,Alpha:ee,alpha:H,Amacr:se,amacr:ne,amalg:ge,amp:we,AMP:$e,andand:ve,And:Ee,and:Ve,andd:Ue,andslope:ft,andv:ht,ang:zt,ange:$t,angle:Tn,angmsdaa:it,angmsdab:Te,angmsdac:ye,angmsdad:Se,angmsdae:Re,angmsdaf:U,angmsdag:Z,angmsdah:re,angmsd:ie,angrt:be,angrtvb:Ce,angrtvbd:je,angsph:V,angst:fe,angzarr:he,Aogon:me,aogon:Oe,Aopf:Me,aopf:Be,apacir:We,ap:Qe,apE:ut,ape:Tt,apid:Ut,apos:Kt,ApplyFunction:Pt,approx:bn,approxeq:_n,Aring:un,aring:Wn,Ascr:qn,ascr:wr,Assign:Ao,ast:Gi,asymp:_i,asympeq:$s,Atilde:tr,atilde:yi,Auml:pi,auml:_r,awconint:uo,awint:Or,backcong:go,backepsilon:Zr,backprime:Fi,backsim:or,backsimeq:Fe,Backslash:Xe,Barv:Et,barvee:pt,barwed:Yt,Barwed:An,barwedge:Rn,bbrk:Ht,bbrktbrk:mt,bcong:jn,Bcy:Vn,bcy:an,bdquo:gn,becaus:Qr,because:Wr,Because:Ln,bemptyv:dt,bepsi:Nt,bernou:Rr,Bernoullis:fr,Beta:Er,beta:Ir,beth:ri,between:xn,Bfr:Bi,bfr:Io,bigcap:no,bigcirc:Us,bigcup:No,bigodot:Po,bigoplus:mo,bigotimes:es,bigsqcup:ts,bigstar:ws,bigtriangledown:ns,bigtriangleup:_s,biguplus:Bo,bigvee:rs,bigwedge:Es,bkarow:Vr,blacklozenge:Co,blacksquare:hs,blacktriangle:da,blacktriangledown:is,blacktriangleleft:ha,blacktriangleright:js,blank:Go,blk12:Wi,blk14:zo,blk34:ps,block:os,bne:Hs,bnequiv:Ia,bNot:vo,bnot:co,Bopf:pa,bopf:ga,bot:Uo,bottom:Le,bowtie:Pe,boxbox:ke,boxdl:rt,boxdL:Mt,boxDl:dn,boxDL:sr,boxdr:dr,boxdR:hr,boxDr:pr,boxDR:Yr,boxh:zr,boxH:Ur,boxhd:gi,boxHd:M,boxhD:z,boxHD:Y,boxhu:K,boxHu:ce,boxhU:ae,boxHU:pe,boxminus:He,boxplus:Ie,boxtimes:et,boxul:vt,boxuL:oe,boxUl:de,boxUL:ze,boxur:gt,boxuR:qt,boxUr:Ft,boxUR:Sn,boxv:er,boxV:yr,boxvh:ii,boxvH:Pn,boxVh:fo,boxVH:Dn,boxvl:Ar,boxvL:Ye,boxVl:Rt,boxVL:rn,boxvr:vr,boxvR:Fr,boxVr:Hn,boxVR:bi,bprime:gs,breve:Ch,Breve:lu,brvbar:Il,bscr:t0,Bscr:id,bsemi:n0,bsim:Ei,bsime:of,bsolb:Js,bsol:bc,bsolhsub:Sh,bull:ul,bullet:Xp,bump:uu,bumpE:od,bumpe:cu,Bumpeq:Kp,bumpeq:xc,Cacute:kh,cacute:Th,capand:Zp,capbrcup:sf,capcap:fu,cap:sd,Cap:ad,capcup:r0,capdot:ld,CapitalDifferentialD:Gu,caps:De,caret:Ke,caron:st,Cayleys:ct,ccaps:At,Ccaron:en,ccaron:cn,Ccedil:kn,ccedil:hn,Ccirc:$r,ccirc:rr,Cconint:ar,ccups:jr,ccupssm:Gn,Cdot:zi,cdot:ss,cedil:as,Cedilla:ma,cemptyv:va,cent:Wu,centerdot:As,CenterDot:Dh,cfr:Qp,Cfr:i0,CHcy:Hx,chcy:Jp,check:qx,checkmark:ud,Chi:eg,chi:cd,circ:tg,circeq:Lh,circlearrowleft:Gx,circlearrowright:Wx,circledast:Vx,circledcirc:IC,circleddash:fd,CircleDot:dd,circledR:NC,circledS:PC,CircleMinus:BC,CirclePlus:zC,CircleTimes:UC,cir:Na,cirE:Cs,cire:ea,cirfnint:Ss,cirmid:ng,cirscir:jC,ClockwiseContourIntegral:o0,CloseCurlyDoubleQuote:HC,CloseCurlyQuote:Ey,clubs:Yx,clubsuit:Ay,colon:Cy,Colon:Sy,Colone:Xx,colone:Kx,coloneq:ky,comma:Zx,commat:rg,comp:qC,compfn:s0,complement:wc,complexes:Qx,cong:GC,congdot:Jx,Congruent:cl,conint:Ai,Conint:du,ContourIntegral:af,copf:lf,Copf:ew,coprod:Ty,Coproduct:tw,copy:Dy,COPY:ig,copysr:nw,CounterClockwiseContourIntegral:Ly,crarr:uf,cross:rw,Cross:iw,Cscr:a0,cscr:Ry,csub:ow,csube:sw,csup:WC,csupe:l0,ctdot:aw,cudarrl:VC,cudarrr:lw,cuepr:Rh,cuesc:Fy,cularr:u0,cularrp:uw,cupbrcap:$y,cupcap:cw,CupCap:fw,cup:qs,Cup:c0,cupcup:dw,cupdot:hw,cupor:pw,cups:Fh,curarr:f0,curarrm:gw,curlyeqprec:mw,curlyeqsucc:vw,curlyvee:$h,curlywedge:yw,curren:d0,curvearrowleft:bw,curvearrowright:og,cuvee:Mh,cuwed:xw,cwconint:ww,cwint:_w,cylcty:sg,dagger:ag,Dagger:lg,daleth:ug,darr:Ew,Darr:Aw,dArr:cf,dash:Oh,Dashv:cg,dashv:Cw,dbkarow:YC,dblac:XC,Dcaron:ya,dcaron:Sw,Dcy:KC,dcy:kw,ddagger:Tw,ddarr:Dw,DD:ZC,dd:QC,DDotrahd:ff,ddotseq:fg,deg:h0,Del:dg,Delta:_c,delta:JC,demptyv:eS,dfisht:Ih,Dfr:Lw,dfr:Rw,dHar:Fw,dharl:p0,dharr:Nh,DiacriticalAcute:My,DiacriticalDot:Oy,DiacriticalDoubleAcute:Iy,DiacriticalGrave:hg,DiacriticalTilde:$w,diam:Mw,diamond:g0,Diamond:tS,diamondsuit:pg,diams:Ow,die:Iw,DifferentialD:Ny,digamma:Nw,disin:Pw,div:Bw,divide:gg,divideontimes:mg,divonx:Py,DJcy:zw,djcy:Uw,dlcorn:jw,dlcrop:By,dollar:Hw,Dopf:qw,dopf:Ph,Dot:Gw,dot:m0,DotDot:nS,doteq:rS,doteqdot:So,DotEqual:zy,dotminus:vg,dotplus:hu,dotsquare:v0,doublebarwedge:Uy,DoubleContourIntegral:Ww,DoubleDot:Vw,DoubleDownArrow:Yw,DoubleLeftArrow:jy,DoubleLeftRightArrow:Xw,DoubleLeftTee:Hy,DoubleLongLeftArrow:Kw,DoubleLongLeftRightArrow:Ui,DoubleLongRightArrow:Zw,DoubleRightArrow:Bh,DoubleRightTee:y0,DoubleUpArrow:iS,DoubleUpDownArrow:Wo,DoubleVerticalBar:oS,DownArrowBar:b0,downarrow:b,DownArrow:A,Downarrow:$,DownArrowUpArrow:F,DownBreve:I,downdownarrows:G,downharpoonleft:X,downharpoonright:J,DownLeftRightVector:le,DownLeftTeeVector:ue,DownLeftVectorBar:_e,DownLeftVector:Ae,DownRightTeeVector:qe,DownRightVectorBar:Ne,DownRightVector:tt,DownTeeArrow:nt,DownTee:Je,drbkarow:lt,drcorn:xt,drcrop:bt,Dscr:Bt,dscr:Ot,DScy:jt,dscy:Yn,dsol:ln,Dstrok:Dr,dstrok:Bn,dtdot:Jr,dtri:Ci,dtrif:ei,duarr:Nr,duhar:ti,dwangle:br,DZcy:Si,dzcy:gr,dzigrarr:Hr,Eacute:Cr,eacute:ui,easter:ta,Ecaron:ki,ecaron:Gs,Ecirc:Ws,ecirc:yo,ecir:na,ecolon:Nl,Ecy:Ms,ecy:pu,eDDot:x0,Edot:Qw,edot:hd,eDot:Pa,ee:df,efDot:sS,Efr:zh,efr:qy,eg:yg,Egrave:w0,egrave:bg,egs:Gy,egsdot:Jw,el:Wy,Element:e2,elinters:t2,ell:n2,els:dH,elsdot:hH,Emacr:pH,emacr:gH,empty:mH,emptyset:vH,EmptySmallSquare:yH,emptyv:bH,EmptyVerySmallSquare:xH,emsp13:wH,emsp14:_H,emsp:EH,ENG:AH,eng:CH,ensp:SH,Eogon:kH,eogon:TH,Eopf:DH,eopf:LH,epar:RH,eparsl:FH,eplus:$H,epsi:MH,Epsilon:OH,epsilon:IH,epsiv:NH,eqcirc:PH,eqcolon:BH,eqsim:zH,eqslantgtr:UH,eqslantless:jH,Equal:HH,equals:qH,EqualTilde:GH,equest:WH,Equilibrium:VH,equiv:YH,equivDD:XH,eqvparsl:KH,erarr:ZH,erDot:QH,escr:JH,Escr:eq,esdot:tq,Esim:nq,esim:rq,Eta:iq,eta:oq,ETH:sq,eth:aq,Euml:lq,euml:uq,euro:cq,excl:fq,exist:dq,Exists:hq,expectation:pq,exponentiale:gq,ExponentialE:mq,fallingdotseq:vq,Fcy:yq,fcy:bq,female:xq,ffilig:wq,fflig:_q,ffllig:Eq,Ffr:Aq,ffr:Cq,filig:Sq,FilledSmallSquare:kq,FilledVerySmallSquare:Tq,fjlig:Dq,flat:Lq,fllig:Rq,fltns:Fq,fnof:$q,Fopf:Mq,fopf:Oq,forall:Iq,ForAll:Nq,fork:Pq,forkv:Bq,Fouriertrf:zq,fpartint:Uq,frac12:jq,frac13:Hq,frac14:qq,frac15:Gq,frac16:Wq,frac18:Vq,frac23:Yq,frac25:Xq,frac34:Kq,frac35:Zq,frac38:Qq,frac45:Jq,frac56:eG,frac58:tG,frac78:nG,frasl:rG,frown:iG,fscr:oG,Fscr:sG,gacute:aG,Gamma:lG,gamma:uG,Gammad:cG,gammad:fG,gap:dG,Gbreve:hG,gbreve:pG,Gcedil:gG,Gcirc:mG,gcirc:vG,Gcy:yG,gcy:bG,Gdot:xG,gdot:wG,ge:_G,gE:EG,gEl:AG,gel:CG,geq:SG,geqq:kG,geqslant:TG,gescc:DG,ges:LG,gesdot:RG,gesdoto:FG,gesdotol:$G,gesl:MG,gesles:OG,Gfr:IG,gfr:NG,gg:PG,Gg:BG,ggg:zG,gimel:UG,GJcy:jG,gjcy:HG,gla:qG,gl:GG,glE:WG,glj:VG,gnap:YG,gnapprox:XG,gne:KG,gnE:ZG,gneq:QG,gneqq:JG,gnsim:eW,Gopf:tW,gopf:nW,grave:rW,GreaterEqual:iW,GreaterEqualLess:oW,GreaterFullEqual:sW,GreaterGreater:aW,GreaterLess:lW,GreaterSlantEqual:uW,GreaterTilde:cW,Gscr:fW,gscr:dW,gsim:hW,gsime:pW,gsiml:gW,gtcc:mW,gtcir:vW,gt:yW,GT:bW,Gt:xW,gtdot:wW,gtlPar:_W,gtquest:EW,gtrapprox:AW,gtrarr:CW,gtrdot:SW,gtreqless:kW,gtreqqless:TW,gtrless:DW,gtrsim:LW,gvertneqq:RW,gvnE:FW,Hacek:$W,hairsp:MW,half:OW,hamilt:IW,HARDcy:NW,hardcy:PW,harrcir:BW,harr:zW,hArr:UW,harrw:jW,Hat:HW,hbar:qW,Hcirc:GW,hcirc:WW,hearts:VW,heartsuit:YW,hellip:XW,hercon:KW,hfr:ZW,Hfr:QW,HilbertSpace:JW,hksearow:eV,hkswarow:tV,hoarr:nV,homtht:rV,hookleftarrow:iV,hookrightarrow:oV,hopf:sV,Hopf:aV,horbar:lV,HorizontalLine:uV,hscr:cV,Hscr:fV,hslash:dV,Hstrok:hV,hstrok:pV,HumpDownHump:gV,HumpEqual:mV,hybull:vV,hyphen:yV,Iacute:bV,iacute:xV,ic:wV,Icirc:_V,icirc:EV,Icy:AV,icy:CV,Idot:SV,IEcy:kV,iecy:TV,iexcl:DV,iff:LV,ifr:RV,Ifr:FV,Igrave:$V,igrave:MV,ii:OV,iiiint:IV,iiint:NV,iinfin:PV,iiota:BV,IJlig:zV,ijlig:UV,Imacr:jV,imacr:HV,image:qV,ImaginaryI:GV,imagline:WV,imagpart:VV,imath:YV,Im:XV,imof:KV,imped:ZV,Implies:QV,incare:JV,infin:eY,infintie:tY,inodot:nY,intcal:rY,int:iY,Int:oY,integers:sY,Integral:aY,intercal:lY,Intersection:uY,intlarhk:cY,intprod:fY,InvisibleComma:dY,InvisibleTimes:hY,IOcy:pY,iocy:gY,Iogon:mY,iogon:vY,Iopf:yY,iopf:bY,Iota:xY,iota:wY,iprod:_Y,iquest:EY,iscr:AY,Iscr:CY,isin:SY,isindot:kY,isinE:TY,isins:DY,isinsv:LY,isinv:RY,it:FY,Itilde:$Y,itilde:MY,Iukcy:OY,iukcy:IY,Iuml:NY,iuml:PY,Jcirc:BY,jcirc:zY,Jcy:UY,jcy:jY,Jfr:HY,jfr:qY,jmath:GY,Jopf:WY,jopf:VY,Jscr:YY,jscr:XY,Jsercy:KY,jsercy:ZY,Jukcy:QY,jukcy:JY,Kappa:eX,kappa:tX,kappav:nX,Kcedil:rX,kcedil:iX,Kcy:oX,kcy:sX,Kfr:aX,kfr:lX,kgreen:uX,KHcy:cX,khcy:fX,KJcy:dX,kjcy:hX,Kopf:pX,kopf:gX,Kscr:mX,kscr:vX,lAarr:yX,Lacute:bX,lacute:xX,laemptyv:wX,lagran:_X,Lambda:EX,lambda:AX,lang:CX,Lang:SX,langd:kX,langle:TX,lap:DX,Laplacetrf:LX,laquo:RX,larrb:FX,larrbfs:$X,larr:MX,Larr:OX,lArr:IX,larrfs:NX,larrhk:PX,larrlp:BX,larrpl:zX,larrsim:UX,larrtl:jX,latail:HX,lAtail:qX,lat:GX,late:WX,lates:VX,lbarr:YX,lBarr:XX,lbbrk:KX,lbrace:ZX,lbrack:QX,lbrke:JX,lbrksld:eK,lbrkslu:tK,Lcaron:nK,lcaron:rK,Lcedil:iK,lcedil:oK,lceil:sK,lcub:aK,Lcy:lK,lcy:uK,ldca:cK,ldquo:fK,ldquor:dK,ldrdhar:hK,ldrushar:pK,ldsh:gK,le:mK,lE:vK,LeftAngleBracket:yK,LeftArrowBar:bK,leftarrow:xK,LeftArrow:wK,Leftarrow:_K,LeftArrowRightArrow:EK,leftarrowtail:AK,LeftCeiling:CK,LeftDoubleBracket:SK,LeftDownTeeVector:kK,LeftDownVectorBar:TK,LeftDownVector:DK,LeftFloor:LK,leftharpoondown:RK,leftharpoonup:FK,leftleftarrows:$K,leftrightarrow:MK,LeftRightArrow:OK,Leftrightarrow:IK,leftrightarrows:NK,leftrightharpoons:PK,leftrightsquigarrow:BK,LeftRightVector:zK,LeftTeeArrow:UK,LeftTee:jK,LeftTeeVector:HK,leftthreetimes:qK,LeftTriangleBar:GK,LeftTriangle:WK,LeftTriangleEqual:VK,LeftUpDownVector:YK,LeftUpTeeVector:XK,LeftUpVectorBar:KK,LeftUpVector:ZK,LeftVectorBar:QK,LeftVector:JK,lEg:eZ,leg:tZ,leq:nZ,leqq:rZ,leqslant:iZ,lescc:oZ,les:sZ,lesdot:aZ,lesdoto:lZ,lesdotor:uZ,lesg:cZ,lesges:fZ,lessapprox:dZ,lessdot:hZ,lesseqgtr:pZ,lesseqqgtr:gZ,LessEqualGreater:mZ,LessFullEqual:vZ,LessGreater:yZ,lessgtr:bZ,LessLess:xZ,lesssim:wZ,LessSlantEqual:_Z,LessTilde:EZ,lfisht:AZ,lfloor:CZ,Lfr:SZ,lfr:kZ,lg:TZ,lgE:DZ,lHar:LZ,lhard:RZ,lharu:FZ,lharul:$Z,lhblk:MZ,LJcy:OZ,ljcy:IZ,llarr:NZ,ll:PZ,Ll:BZ,llcorner:zZ,Lleftarrow:UZ,llhard:jZ,lltri:HZ,Lmidot:qZ,lmidot:GZ,lmoustache:WZ,lmoust:VZ,lnap:YZ,lnapprox:XZ,lne:KZ,lnE:ZZ,lneq:QZ,lneqq:JZ,lnsim:eQ,loang:tQ,loarr:nQ,lobrk:rQ,longleftarrow:iQ,LongLeftArrow:oQ,Longleftarrow:sQ,longleftrightarrow:aQ,LongLeftRightArrow:lQ,Longleftrightarrow:uQ,longmapsto:cQ,longrightarrow:fQ,LongRightArrow:dQ,Longrightarrow:hQ,looparrowleft:pQ,looparrowright:gQ,lopar:mQ,Lopf:vQ,lopf:yQ,loplus:bQ,lotimes:xQ,lowast:wQ,lowbar:_Q,LowerLeftArrow:EQ,LowerRightArrow:AQ,loz:CQ,lozenge:SQ,lozf:kQ,lpar:TQ,lparlt:DQ,lrarr:LQ,lrcorner:RQ,lrhar:FQ,lrhard:$Q,lrm:MQ,lrtri:OQ,lsaquo:IQ,lscr:NQ,Lscr:PQ,lsh:BQ,Lsh:zQ,lsim:UQ,lsime:jQ,lsimg:HQ,lsqb:qQ,lsquo:GQ,lsquor:WQ,Lstrok:VQ,lstrok:YQ,ltcc:XQ,ltcir:KQ,lt:ZQ,LT:QQ,Lt:JQ,ltdot:eJ,lthree:tJ,ltimes:nJ,ltlarr:rJ,ltquest:iJ,ltri:oJ,ltrie:sJ,ltrif:aJ,ltrPar:lJ,lurdshar:uJ,luruhar:cJ,lvertneqq:fJ,lvnE:dJ,macr:hJ,male:pJ,malt:gJ,maltese:mJ,map:vJ,mapsto:yJ,mapstodown:bJ,mapstoleft:xJ,mapstoup:wJ,marker:_J,mcomma:EJ,Mcy:AJ,mcy:CJ,mdash:SJ,mDDot:kJ,measuredangle:TJ,MediumSpace:DJ,Mellintrf:LJ,Mfr:RJ,mfr:FJ,mho:$J,micro:MJ,midast:OJ,midcir:IJ,mid:NJ,middot:PJ,minusb:BJ,minus:zJ,minusd:UJ,minusdu:jJ,MinusPlus:HJ,mlcp:qJ,mldr:GJ,mnplus:WJ,models:VJ,Mopf:YJ,mopf:XJ,mp:KJ,mscr:ZJ,Mscr:QJ,mstpos:JJ,Mu:eee,mu:tee,multimap:nee,mumap:ree,nabla:iee,Nacute:oee,nacute:see,nang:aee,nap:lee,napE:uee,napid:cee,napos:fee,napprox:dee,natural:hee,naturals:pee,natur:gee,nbsp:mee,nbump:vee,nbumpe:yee,ncap:bee,Ncaron:xee,ncaron:wee,Ncedil:_ee,ncedil:Eee,ncong:Aee,ncongdot:Cee,ncup:See,Ncy:kee,ncy:Tee,ndash:Dee,nearhk:Lee,nearr:Ree,neArr:Fee,nearrow:$ee,ne:Mee,nedot:Oee,NegativeMediumSpace:Iee,NegativeThickSpace:Nee,NegativeThinSpace:Pee,NegativeVeryThinSpace:Bee,nequiv:zee,nesear:Uee,nesim:jee,NestedGreaterGreater:Hee,NestedLessLess:qee,NewLine:Gee,nexist:Wee,nexists:Vee,Nfr:Yee,nfr:Xee,ngE:Kee,nge:Zee,ngeq:Qee,ngeqq:Jee,ngeqslant:ete,nges:tte,nGg:nte,ngsim:rte,nGt:ite,ngt:ote,ngtr:ste,nGtv:ate,nharr:lte,nhArr:ute,nhpar:cte,ni:fte,nis:dte,nisd:hte,niv:pte,NJcy:gte,njcy:mte,nlarr:vte,nlArr:yte,nldr:bte,nlE:xte,nle:wte,nleftarrow:_te,nLeftarrow:Ete,nleftrightarrow:Ate,nLeftrightarrow:Cte,nleq:Ste,nleqq:kte,nleqslant:Tte,nles:Dte,nless:Lte,nLl:Rte,nlsim:Fte,nLt:$te,nlt:Mte,nltri:Ote,nltrie:Ite,nLtv:Nte,nmid:Pte,NoBreak:Bte,NonBreakingSpace:zte,nopf:Ute,Nopf:jte,Not:Hte,not:qte,NotCongruent:Gte,NotCupCap:Wte,NotDoubleVerticalBar:Vte,NotElement:Yte,NotEqual:Xte,NotEqualTilde:Kte,NotExists:Zte,NotGreater:Qte,NotGreaterEqual:Jte,NotGreaterFullEqual:ene,NotGreaterGreater:tne,NotGreaterLess:nne,NotGreaterSlantEqual:rne,NotGreaterTilde:ine,NotHumpDownHump:one,NotHumpEqual:sne,notin:ane,notindot:lne,notinE:une,notinva:cne,notinvb:fne,notinvc:dne,NotLeftTriangleBar:hne,NotLeftTriangle:pne,NotLeftTriangleEqual:gne,NotLess:mne,NotLessEqual:vne,NotLessGreater:yne,NotLessLess:bne,NotLessSlantEqual:xne,NotLessTilde:wne,NotNestedGreaterGreater:_ne,NotNestedLessLess:Ene,notni:Ane,notniva:Cne,notnivb:Sne,notnivc:kne,NotPrecedes:Tne,NotPrecedesEqual:Dne,NotPrecedesSlantEqual:Lne,NotReverseElement:Rne,NotRightTriangleBar:Fne,NotRightTriangle:$ne,NotRightTriangleEqual:Mne,NotSquareSubset:One,NotSquareSubsetEqual:Ine,NotSquareSuperset:Nne,NotSquareSupersetEqual:Pne,NotSubset:Bne,NotSubsetEqual:zne,NotSucceeds:Une,NotSucceedsEqual:jne,NotSucceedsSlantEqual:Hne,NotSucceedsTilde:qne,NotSuperset:Gne,NotSupersetEqual:Wne,NotTilde:Vne,NotTildeEqual:Yne,NotTildeFullEqual:Xne,NotTildeTilde:Kne,NotVerticalBar:Zne,nparallel:Qne,npar:Jne,nparsl:ere,npart:tre,npolint:nre,npr:rre,nprcue:ire,nprec:ore,npreceq:sre,npre:are,nrarrc:lre,nrarr:ure,nrArr:cre,nrarrw:fre,nrightarrow:dre,nRightarrow:hre,nrtri:pre,nrtrie:gre,nsc:mre,nsccue:vre,nsce:yre,Nscr:bre,nscr:xre,nshortmid:wre,nshortparallel:_re,nsim:Ere,nsime:Are,nsimeq:Cre,nsmid:Sre,nspar:kre,nsqsube:Tre,nsqsupe:Dre,nsub:Lre,nsubE:Rre,nsube:Fre,nsubset:$re,nsubseteq:Mre,nsubseteqq:Ore,nsucc:Ire,nsucceq:Nre,nsup:Pre,nsupE:Bre,nsupe:zre,nsupset:Ure,nsupseteq:jre,nsupseteqq:Hre,ntgl:qre,Ntilde:Gre,ntilde:Wre,ntlg:Vre,ntriangleleft:Yre,ntrianglelefteq:Xre,ntriangleright:Kre,ntrianglerighteq:Zre,Nu:Qre,nu:Jre,num:eie,numero:tie,numsp:nie,nvap:rie,nvdash:iie,nvDash:oie,nVdash:sie,nVDash:aie,nvge:lie,nvgt:uie,nvHarr:cie,nvinfin:fie,nvlArr:die,nvle:hie,nvlt:pie,nvltrie:gie,nvrArr:mie,nvrtrie:vie,nvsim:yie,nwarhk:bie,nwarr:xie,nwArr:wie,nwarrow:_ie,nwnear:Eie,Oacute:Aie,oacute:Cie,oast:Sie,Ocirc:kie,ocirc:Tie,ocir:Die,Ocy:Lie,ocy:Rie,odash:Fie,Odblac:$ie,odblac:Mie,odiv:Oie,odot:Iie,odsold:Nie,OElig:Pie,oelig:Bie,ofcir:zie,Ofr:Uie,ofr:jie,ogon:Hie,Ograve:qie,ograve:Gie,ogt:Wie,ohbar:Vie,ohm:Yie,oint:Xie,olarr:Kie,olcir:Zie,olcross:Qie,oline:Jie,olt:eoe,Omacr:toe,omacr:noe,Omega:roe,omega:ioe,Omicron:ooe,omicron:soe,omid:aoe,ominus:loe,Oopf:uoe,oopf:coe,opar:foe,OpenCurlyDoubleQuote:doe,OpenCurlyQuote:hoe,operp:poe,oplus:goe,orarr:moe,Or:voe,or:yoe,ord:boe,order:xoe,orderof:woe,ordf:_oe,ordm:Eoe,origof:Aoe,oror:Coe,orslope:Soe,orv:koe,oS:Toe,Oscr:Doe,oscr:Loe,Oslash:Roe,oslash:Foe,osol:$oe,Otilde:Moe,otilde:Ooe,otimesas:Ioe,Otimes:Noe,otimes:Poe,Ouml:Boe,ouml:zoe,ovbar:Uoe,OverBar:joe,OverBrace:Hoe,OverBracket:qoe,OverParenthesis:Goe,para:Woe,parallel:Voe,par:Yoe,parsim:Xoe,parsl:Koe,part:Zoe,PartialD:Qoe,Pcy:Joe,pcy:ese,percnt:tse,period:nse,permil:rse,perp:ise,pertenk:ose,Pfr:sse,pfr:ase,Phi:lse,phi:use,phiv:cse,phmmat:fse,phone:dse,Pi:hse,pi:pse,pitchfork:gse,piv:mse,planck:vse,planckh:yse,plankv:bse,plusacir:xse,plusb:wse,pluscir:_se,plus:Ese,plusdo:Ase,plusdu:Cse,pluse:Sse,PlusMinus:kse,plusmn:Tse,plussim:Dse,plustwo:Lse,pm:Rse,Poincareplane:Fse,pointint:$se,popf:Mse,Popf:Ose,pound:Ise,prap:Nse,Pr:Pse,pr:Bse,prcue:zse,precapprox:Use,prec:jse,preccurlyeq:Hse,Precedes:qse,PrecedesEqual:Gse,PrecedesSlantEqual:Wse,PrecedesTilde:Vse,preceq:Yse,precnapprox:Xse,precneqq:Kse,precnsim:Zse,pre:Qse,prE:Jse,precsim:eae,prime:tae,Prime:nae,primes:rae,prnap:iae,prnE:oae,prnsim:sae,prod:aae,Product:lae,profalar:uae,profline:cae,profsurf:fae,prop:dae,Proportional:hae,Proportion:pae,propto:gae,prsim:mae,prurel:vae,Pscr:yae,pscr:bae,Psi:xae,psi:wae,puncsp:_ae,Qfr:Eae,qfr:Aae,qint:Cae,qopf:Sae,Qopf:kae,qprime:Tae,Qscr:Dae,qscr:Lae,quaternions:Rae,quatint:Fae,quest:$ae,questeq:Mae,quot:Oae,QUOT:Iae,rAarr:Nae,race:Pae,Racute:Bae,racute:zae,radic:Uae,raemptyv:jae,rang:Hae,Rang:qae,rangd:Gae,range:Wae,rangle:Vae,raquo:Yae,rarrap:Xae,rarrb:Kae,rarrbfs:Zae,rarrc:Qae,rarr:Jae,Rarr:ele,rArr:tle,rarrfs:nle,rarrhk:rle,rarrlp:ile,rarrpl:ole,rarrsim:sle,Rarrtl:ale,rarrtl:lle,rarrw:ule,ratail:cle,rAtail:fle,ratio:dle,rationals:hle,rbarr:ple,rBarr:gle,RBarr:mle,rbbrk:vle,rbrace:yle,rbrack:ble,rbrke:xle,rbrksld:wle,rbrkslu:_le,Rcaron:Ele,rcaron:Ale,Rcedil:Cle,rcedil:Sle,rceil:kle,rcub:Tle,Rcy:Dle,rcy:Lle,rdca:Rle,rdldhar:Fle,rdquo:$le,rdquor:Mle,rdsh:Ole,real:Ile,realine:Nle,realpart:Ple,reals:Ble,Re:zle,rect:Ule,reg:jle,REG:Hle,ReverseElement:qle,ReverseEquilibrium:Gle,ReverseUpEquilibrium:Wle,rfisht:Vle,rfloor:Yle,rfr:Xle,Rfr:Kle,rHar:Zle,rhard:Qle,rharu:Jle,rharul:eue,Rho:tue,rho:nue,rhov:rue,RightAngleBracket:iue,RightArrowBar:oue,rightarrow:sue,RightArrow:aue,Rightarrow:lue,RightArrowLeftArrow:uue,rightarrowtail:cue,RightCeiling:fue,RightDoubleBracket:due,RightDownTeeVector:hue,RightDownVectorBar:pue,RightDownVector:gue,RightFloor:mue,rightharpoondown:vue,rightharpoonup:yue,rightleftarrows:bue,rightleftharpoons:xue,rightrightarrows:wue,rightsquigarrow:_ue,RightTeeArrow:Eue,RightTee:Aue,RightTeeVector:Cue,rightthreetimes:Sue,RightTriangleBar:kue,RightTriangle:Tue,RightTriangleEqual:Due,RightUpDownVector:Lue,RightUpTeeVector:Rue,RightUpVectorBar:Fue,RightUpVector:$ue,RightVectorBar:Mue,RightVector:Oue,ring:Iue,risingdotseq:Nue,rlarr:Pue,rlhar:Bue,rlm:zue,rmoustache:Uue,rmoust:jue,rnmid:Hue,roang:que,roarr:Gue,robrk:Wue,ropar:Vue,ropf:Yue,Ropf:Xue,roplus:Kue,rotimes:Zue,RoundImplies:Que,rpar:Jue,rpargt:ece,rppolint:tce,rrarr:nce,Rrightarrow:rce,rsaquo:ice,rscr:oce,Rscr:sce,rsh:lce,Rsh:uce,rsqb:cce,rsquo:fce,rsquor:dce,rthree:hce,rtimes:pce,rtri:gce,rtrie:mce,rtrif:vce,rtriltri:yce,RuleDelayed:bce,ruluhar:xce,rx:wce,Sacute:_ce,sacute:Ece,sbquo:Ace,scap:Cce,Scaron:Sce,scaron:kce,Sc:Tce,sc:Dce,sccue:Lce,sce:Rce,scE:Fce,Scedil:$ce,scedil:Mce,Scirc:Oce,scirc:Ice,scnap:Nce,scnE:Pce,scnsim:Bce,scpolint:zce,scsim:Uce,Scy:jce,scy:Hce,sdotb:qce,sdot:Gce,sdote:Wce,searhk:Vce,searr:Yce,seArr:Xce,searrow:Kce,sect:Zce,semi:Qce,seswar:Jce,setminus:efe,setmn:tfe,sext:nfe,Sfr:rfe,sfr:ife,sfrown:ofe,sharp:sfe,SHCHcy:afe,shchcy:lfe,SHcy:ufe,shcy:cfe,ShortDownArrow:ffe,ShortLeftArrow:dfe,shortmid:hfe,shortparallel:pfe,ShortRightArrow:gfe,ShortUpArrow:mfe,shy:vfe,Sigma:yfe,sigma:bfe,sigmaf:xfe,sigmav:wfe,sim:_fe,simdot:Efe,sime:Afe,simeq:Cfe,simg:Sfe,simgE:kfe,siml:Tfe,simlE:Dfe,simne:Lfe,simplus:Rfe,simrarr:Ffe,slarr:$fe,SmallCircle:Mfe,smallsetminus:Ofe,smashp:Ife,smeparsl:Nfe,smid:Pfe,smile:Bfe,smt:zfe,smte:Ufe,smtes:jfe,SOFTcy:Hfe,softcy:qfe,solbar:Gfe,solb:Wfe,sol:Vfe,Sopf:Yfe,sopf:Xfe,spades:Kfe,spadesuit:Zfe,spar:Qfe,sqcap:Jfe,sqcaps:ede,sqcup:tde,sqcups:nde,Sqrt:rde,sqsub:ide,sqsube:ode,sqsubset:sde,sqsubseteq:ade,sqsup:lde,sqsupe:ude,sqsupset:cde,sqsupseteq:fde,square:dde,Square:hde,SquareIntersection:pde,SquareSubset:gde,SquareSubsetEqual:mde,SquareSuperset:vde,SquareSupersetEqual:yde,SquareUnion:bde,squarf:xde,squ:wde,squf:_de,srarr:Ede,Sscr:Ade,sscr:Cde,ssetmn:Sde,ssmile:kde,sstarf:Tde,Star:Dde,star:Lde,starf:Rde,straightepsilon:Fde,straightphi:$de,strns:Mde,sub:Ode,Sub:Ide,subdot:Nde,subE:Pde,sube:Bde,subedot:zde,submult:Ude,subnE:jde,subne:Hde,subplus:qde,subrarr:Gde,subset:Wde,Subset:Vde,subseteq:Yde,subseteqq:Xde,SubsetEqual:Kde,subsetneq:Zde,subsetneqq:Qde,subsim:Jde,subsub:ehe,subsup:the,succapprox:nhe,succ:rhe,succcurlyeq:ihe,Succeeds:ohe,SucceedsEqual:she,SucceedsSlantEqual:ahe,SucceedsTilde:lhe,succeq:uhe,succnapprox:che,succneqq:fhe,succnsim:dhe,succsim:hhe,SuchThat:phe,sum:ghe,Sum:mhe,sung:vhe,sup1:yhe,sup2:bhe,sup3:xhe,sup:whe,Sup:_he,supdot:Ehe,supdsub:Ahe,supE:Che,supe:She,supedot:khe,Superset:The,SupersetEqual:Dhe,suphsol:Lhe,suphsub:Rhe,suplarr:Fhe,supmult:$he,supnE:Mhe,supne:Ohe,supplus:Ihe,supset:Nhe,Supset:Phe,supseteq:Bhe,supseteqq:zhe,supsetneq:Uhe,supsetneqq:jhe,supsim:Hhe,supsub:qhe,supsup:Ghe,swarhk:Whe,swarr:Vhe,swArr:Yhe,swarrow:Xhe,swnwar:Khe,szlig:Zhe,Tab:Qhe,target:Jhe,Tau:epe,tau:tpe,tbrk:npe,Tcaron:rpe,tcaron:ipe,Tcedil:ope,tcedil:spe,Tcy:ape,tcy:lpe,tdot:upe,telrec:cpe,Tfr:fpe,tfr:dpe,there4:hpe,therefore:ppe,Therefore:gpe,Theta:mpe,theta:vpe,thetasym:ype,thetav:bpe,thickapprox:xpe,thicksim:wpe,ThickSpace:_pe,ThinSpace:Epe,thinsp:Ape,thkap:Cpe,thksim:Spe,THORN:kpe,thorn:Tpe,tilde:Dpe,Tilde:Lpe,TildeEqual:Rpe,TildeFullEqual:Fpe,TildeTilde:$pe,timesbar:Mpe,timesb:Ope,times:Ipe,timesd:Npe,tint:Ppe,toea:Bpe,topbot:zpe,topcir:Upe,top:jpe,Topf:Hpe,topf:qpe,topfork:Gpe,tosa:Wpe,tprime:Vpe,trade:Ype,TRADE:Xpe,triangle:Kpe,triangledown:Zpe,triangleleft:Qpe,trianglelefteq:Jpe,triangleq:ege,triangleright:tge,trianglerighteq:nge,tridot:rge,trie:ige,triminus:oge,TripleDot:sge,triplus:age,trisb:lge,tritime:uge,trpezium:cge,Tscr:fge,tscr:dge,TScy:hge,tscy:pge,TSHcy:gge,tshcy:mge,Tstrok:vge,tstrok:yge,twixt:bge,twoheadleftarrow:xge,twoheadrightarrow:wge,Uacute:_ge,uacute:Ege,uarr:Age,Uarr:Cge,uArr:Sge,Uarrocir:kge,Ubrcy:Tge,ubrcy:Dge,Ubreve:Lge,ubreve:Rge,Ucirc:Fge,ucirc:$ge,Ucy:Mge,ucy:Oge,udarr:Ige,Udblac:Nge,udblac:Pge,udhar:Bge,ufisht:zge,Ufr:Uge,ufr:jge,Ugrave:Hge,ugrave:qge,uHar:Gge,uharl:Wge,uharr:Vge,uhblk:Yge,ulcorn:Xge,ulcorner:Kge,ulcrop:Zge,ultri:Qge,Umacr:Jge,umacr:eme,uml:tme,UnderBar:nme,UnderBrace:rme,UnderBracket:ime,UnderParenthesis:ome,Union:sme,UnionPlus:ame,Uogon:lme,uogon:ume,Uopf:cme,uopf:fme,UpArrowBar:dme,uparrow:hme,UpArrow:pme,Uparrow:gme,UpArrowDownArrow:mme,updownarrow:vme,UpDownArrow:yme,Updownarrow:bme,UpEquilibrium:xme,upharpoonleft:wme,upharpoonright:_me,uplus:Eme,UpperLeftArrow:Ame,UpperRightArrow:Cme,upsi:Sme,Upsi:kme,upsih:Tme,Upsilon:Dme,upsilon:Lme,UpTeeArrow:Rme,UpTee:Fme,upuparrows:$me,urcorn:Mme,urcorner:Ome,urcrop:Ime,Uring:Nme,uring:Pme,urtri:Bme,Uscr:zme,uscr:Ume,utdot:jme,Utilde:Hme,utilde:qme,utri:Gme,utrif:Wme,uuarr:Vme,Uuml:Yme,uuml:Xme,uwangle:Kme,vangrt:Zme,varepsilon:Qme,varkappa:Jme,varnothing:e0e,varphi:t0e,varpi:n0e,varpropto:r0e,varr:i0e,vArr:o0e,varrho:s0e,varsigma:a0e,varsubsetneq:l0e,varsubsetneqq:u0e,varsupsetneq:c0e,varsupsetneqq:f0e,vartheta:d0e,vartriangleleft:h0e,vartriangleright:p0e,vBar:g0e,Vbar:m0e,vBarv:v0e,Vcy:y0e,vcy:b0e,vdash:x0e,vDash:w0e,Vdash:_0e,VDash:E0e,Vdashl:A0e,veebar:C0e,vee:S0e,Vee:k0e,veeeq:T0e,vellip:D0e,verbar:L0e,Verbar:R0e,vert:F0e,Vert:$0e,VerticalBar:M0e,VerticalLine:O0e,VerticalSeparator:I0e,VerticalTilde:N0e,VeryThinSpace:P0e,Vfr:B0e,vfr:z0e,vltri:U0e,vnsub:j0e,vnsup:H0e,Vopf:q0e,vopf:G0e,vprop:W0e,vrtri:V0e,Vscr:Y0e,vscr:X0e,vsubnE:K0e,vsubne:Z0e,vsupnE:Q0e,vsupne:J0e,Vvdash:eve,vzigzag:tve,Wcirc:nve,wcirc:rve,wedbar:ive,wedge:ove,Wedge:sve,wedgeq:ave,weierp:lve,Wfr:uve,wfr:cve,Wopf:fve,wopf:dve,wp:hve,wr:pve,wreath:gve,Wscr:mve,wscr:vve,xcap:yve,xcirc:bve,xcup:xve,xdtri:wve,Xfr:_ve,xfr:Eve,xharr:Ave,xhArr:Cve,Xi:Sve,xi:kve,xlarr:Tve,xlArr:Dve,xmap:Lve,xnis:Rve,xodot:Fve,Xopf:$ve,xopf:Mve,xoplus:Ove,xotime:Ive,xrarr:Nve,xrArr:Pve,Xscr:Bve,xscr:zve,xsqcup:Uve,xuplus:jve,xutri:Hve,xvee:qve,xwedge:Gve,Yacute:Wve,yacute:Vve,YAcy:Yve,yacy:Xve,Ycirc:Kve,ycirc:Zve,Ycy:Qve,ycy:Jve,yen:eye,Yfr:tye,yfr:nye,YIcy:rye,yicy:iye,Yopf:oye,yopf:sye,Yscr:aye,yscr:lye,YUcy:uye,yucy:cye,yuml:fye,Yuml:dye,Zacute:hye,zacute:pye,Zcaron:gye,zcaron:mye,Zcy:vye,zcy:yye,Zdot:bye,zdot:xye,zeetrf:wye,ZeroWidthSpace:_ye,Zeta:Eye,zeta:Aye,zfr:Cye,Zfr:Sye,ZHcy:kye,zhcy:Tye,zigrarr:Dye,zopf:Lye,Zopf:Rye,Zscr:Fye,zscr:$ye,zwj:Mye,zwnj:Oye,default:vUe}),Iye="",Nye="",Pye="",Bye="",zye="",Uye="",jye="",Hye="",qye="",Gye="&",Wye="&",Vye="",Yye="",Xye="",Kye="",Zye="",Qye="",Jye="",ebe="",tbe="",nbe="",rbe="",ibe="",obe="",sbe="",abe="",lbe="",ube="",cbe="",fbe="",dbe="",hbe="",pbe="",gbe="",mbe="",vbe="",ybe="",bbe="",xbe="",wbe="",_be=">",Ebe=">",Abe="",Cbe="",Sbe="",kbe="",Tbe="",Dbe="",Lbe="",Rbe="",Fbe="",$be="",Mbe="",Obe="<",Ibe="<",Nbe="",Pbe="",Bbe="",zbe="",Ube="",jbe="",Hbe="",qbe="",Gbe="",Wbe="",Vbe="",Ybe="",Xbe="",Kbe="",Zbe="",Qbe="",Jbe="",e1e="",t1e="",n1e="",r1e="",i1e="",o1e="",s1e="",a1e='"',l1e='"',u1e="",c1e="",f1e="",d1e="",h1e="",p1e="",g1e="",m1e="",v1e="",y1e="",b1e="",x1e="",w1e="",_1e="",E1e="",A1e="",C1e="",S1e="",k1e="",T1e="",D1e="",L1e="",R1e="",F1e="",$1e="",bUe={Aacute:Iye,aacute:Nye,Acirc:Pye,acirc:Bye,acute:zye,AElig:Uye,aelig:jye,Agrave:Hye,agrave:qye,amp:Gye,AMP:Wye,Aring:Vye,aring:Yye,Atilde:Xye,atilde:Kye,Auml:Zye,auml:Qye,brvbar:Jye,Ccedil:ebe,ccedil:tbe,cedil:nbe,cent:rbe,copy:ibe,COPY:obe,curren:sbe,deg:abe,divide:lbe,Eacute:ube,eacute:cbe,Ecirc:fbe,ecirc:dbe,Egrave:hbe,egrave:pbe,ETH:gbe,eth:mbe,Euml:vbe,euml:ybe,frac12:bbe,frac14:xbe,frac34:wbe,gt:_be,GT:Ebe,Iacute:Abe,iacute:Cbe,Icirc:Sbe,icirc:kbe,iexcl:Tbe,Igrave:Dbe,igrave:Lbe,iquest:Rbe,Iuml:Fbe,iuml:$be,laquo:Mbe,lt:Obe,LT:Ibe,macr:Nbe,micro:Pbe,middot:Bbe,nbsp:zbe,not:Ube,Ntilde:jbe,ntilde:Hbe,Oacute:qbe,oacute:Gbe,Ocirc:Wbe,ocirc:Vbe,Ograve:Ybe,ograve:Xbe,ordf:Kbe,ordm:Zbe,Oslash:Qbe,oslash:Jbe,Otilde:e1e,otilde:t1e,Ouml:n1e,ouml:r1e,para:i1e,plusmn:o1e,pound:s1e,quot:a1e,QUOT:l1e,raquo:u1e,reg:c1e,REG:f1e,sect:d1e,shy:h1e,sup1:p1e,sup2:g1e,sup3:m1e,szlig:v1e,THORN:y1e,thorn:b1e,times:x1e,Uacute:w1e,uacute:_1e,Ucirc:E1e,ucirc:A1e,Ugrave:C1e,ugrave:S1e,uml:k1e,Uuml:T1e,uuml:D1e,Yacute:L1e,yacute:R1e,yen:F1e,yuml:$1e},xUe=Object.freeze({__proto__:null,Aacute:Iye,aacute:Nye,Acirc:Pye,acirc:Bye,acute:zye,AElig:Uye,aelig:jye,Agrave:Hye,agrave:qye,amp:Gye,AMP:Wye,Aring:Vye,aring:Yye,Atilde:Xye,atilde:Kye,Auml:Zye,auml:Qye,brvbar:Jye,Ccedil:ebe,ccedil:tbe,cedil:nbe,cent:rbe,copy:ibe,COPY:obe,curren:sbe,deg:abe,divide:lbe,Eacute:ube,eacute:cbe,Ecirc:fbe,ecirc:dbe,Egrave:hbe,egrave:pbe,ETH:gbe,eth:mbe,Euml:vbe,euml:ybe,frac12:bbe,frac14:xbe,frac34:wbe,gt:_be,GT:Ebe,Iacute:Abe,iacute:Cbe,Icirc:Sbe,icirc:kbe,iexcl:Tbe,Igrave:Dbe,igrave:Lbe,iquest:Rbe,Iuml:Fbe,iuml:$be,laquo:Mbe,lt:Obe,LT:Ibe,macr:Nbe,micro:Pbe,middot:Bbe,nbsp:zbe,not:Ube,Ntilde:jbe,ntilde:Hbe,Oacute:qbe,oacute:Gbe,Ocirc:Wbe,ocirc:Vbe,Ograve:Ybe,ograve:Xbe,ordf:Kbe,ordm:Zbe,Oslash:Qbe,oslash:Jbe,Otilde:e1e,otilde:t1e,Ouml:n1e,ouml:r1e,para:i1e,plusmn:o1e,pound:s1e,quot:a1e,QUOT:l1e,raquo:u1e,reg:c1e,REG:f1e,sect:d1e,shy:h1e,sup1:p1e,sup2:g1e,sup3:m1e,szlig:v1e,THORN:y1e,thorn:b1e,times:x1e,Uacute:w1e,uacute:_1e,Ucirc:E1e,ucirc:A1e,Ugrave:C1e,ugrave:S1e,uml:k1e,Uuml:T1e,uuml:D1e,Yacute:L1e,yacute:R1e,yen:F1e,yuml:$1e,default:bUe}),M1e="&",O1e="'",I1e=">",N1e="<",P1e='"',wUe={amp:M1e,apos:O1e,gt:I1e,lt:N1e,quot:P1e},_Ue=Object.freeze({__proto__:null,amp:M1e,apos:O1e,gt:I1e,lt:N1e,quot:P1e,default:wUe}),EUe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},AUe=Object.freeze({__proto__:null,default:EUe}),CUe=m(AUe),B1e=g(function(te,xe){var Ge=p&&p.__importDefault||function(Lt){return Lt&&Lt.__esModule?Lt:{default:Lt}};Object.defineProperty(xe,"__esModule",{value:!0});var Ze=Ge(CUe);function It(Lt){if(Lt>=55296&&Lt<=57343||Lt>1114111)return"";Lt in Ze.default&&(Lt=Ze.default[Lt]);var Xn="";return Lt>65535&&(Lt-=65536,Xn+=String.fromCharCode(Lt>>>10&1023|55296),Lt=56320|Lt&1023),Xn+=String.fromCharCode(Lt),Xn}xe.default=It});h(B1e);var z1e=m(yUe),SUe=m(xUe),U1e=m(_Ue),Uh=g(function(te,xe){var Ge=p&&p.__importDefault||function(ci){return ci&&ci.__esModule?ci:{default:ci}};Object.defineProperty(xe,"__esModule",{value:!0});var Ze=Ge(z1e),It=Ge(SUe),Lt=Ge(U1e),Xn=Ge(B1e);xe.decodeXML=wn(Lt.default),xe.decodeHTMLStrict=wn(Ze.default);function wn(ci){var fi=Object.keys(ci).join("|"),ji=$i(ci);fi+="|#[xX][\\da-fA-F]+|#\\d+";var Hi=new RegExp("&(?:"+fi+");","g");return function(ra){return String(ra).replace(Hi,ji)}}var mr=function(ci,fi){return ci<fi?1:-1};xe.decodeHTML=function(){for(var ci=Object.keys(It.default).sort(mr),fi=Object.keys(Ze.default).sort(mr),ji=0,Hi=0;ji<fi.length;ji++)ci[Hi]===fi[ji]?(fi[ji]+=";?",Hi++):fi[ji]+=";";var ra=new RegExp("&(?:"+fi.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),S0=$i(Ze.default);function $$(k0){return k0.substr(-1)!==";"&&(k0+=";"),S0(k0)}return function(k0){return String(k0).replace(ra,$$)}}();function $i(ci){return function(ji){return ji.charAt(1)==="#"?ji.charAt(2)==="X"||ji.charAt(2)==="x"?Xn.default(parseInt(ji.substr(3),16)):Xn.default(parseInt(ji.substr(2),10)):ci[ji.slice(1,-1)]}}});h(Uh),Uh.decodeXML,Uh.decodeHTMLStrict,Uh.decodeHTML;var _0=g(function(te,xe){var Ge=p&&p.__importDefault||function(ba){return ba&&ba.__esModule?ba:{default:ba}};Object.defineProperty(xe,"__esModule",{value:!0});var Ze=Ge(U1e),It=$i(Ze.default),Lt=ci(It);xe.encodeXML=S0(It,Lt);var Xn=Ge(z1e),wn=$i(Xn.default),mr=ci(wn);xe.encodeHTML=S0(wn,mr);function $i(ba){return Object.keys(ba).sort().reduce(function(wg,pd){return wg[ba[pd]]="&"+pd+";",wg},{})}function ci(ba){var wg=[],pd=[];return Object.keys(ba).forEach(function(T0){return T0.length===1?wg.push("\\"+T0):pd.push(T0)}),pd.unshift("["+wg.join("")+"]"),new RegExp(pd.join("|"),"g")}var fi=/[^\0-\x7F]/g,ji=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function Hi(ba){return"&#x"+ba.charCodeAt(0).toString(16).toUpperCase()+";"}function ra(ba,wg){var pd=ba.charCodeAt(0),T0=ba.charCodeAt(1),QHe=(pd-55296)*1024+T0-56320+65536;return"&#x"+QHe.toString(16).toUpperCase()+";"}function S0(ba,wg){return function(pd){return pd.replace(wg,function(T0){return ba[T0]}).replace(ji,ra).replace(fi,Hi)}}var $$=ci(It);function k0(ba){return ba.replace($$,Hi).replace(ji,ra).replace(fi,Hi)}xe.escape=k0});h(_0),_0.encodeXML,_0.encodeHTML,_0.escape;var Ba=g(function(te,xe){Object.defineProperty(xe,"__esModule",{value:!0});function Ge(wn,mr){return(!mr||mr<=0?Uh.decodeXML:Uh.decodeHTML)(wn)}xe.decode=Ge;function Ze(wn,mr){return(!mr||mr<=0?Uh.decodeXML:Uh.decodeHTMLStrict)(wn)}xe.decodeStrict=Ze;function It(wn,mr){return(!mr||mr<=0?_0.encodeXML:_0.encodeHTML)(wn)}xe.encode=It;var Lt=_0;xe.encodeXML=Lt.encodeXML,xe.encodeHTML=Lt.encodeHTML,xe.escape=Lt.escape,xe.encodeHTML4=Lt.encodeHTML,xe.encodeHTML5=Lt.encodeHTML;var Xn=Uh;xe.decodeXML=Xn.decodeXML,xe.decodeHTML=Xn.decodeHTML,xe.decodeHTMLStrict=Xn.decodeHTMLStrict,xe.decodeHTML4=Xn.decodeHTML,xe.decodeHTML5=Xn.decodeHTML,xe.decodeHTML4Strict=Xn.decodeHTMLStrict,xe.decodeHTML5Strict=Xn.decodeHTMLStrict,xe.decodeXMLStrict=Xn.decodeXML});h(Ba),Ba.decode,Ba.decodeStrict,Ba.encode,Ba.encodeXML,Ba.encodeHTML,Ba.escape,Ba.encodeHTML4,Ba.encodeHTML5,Ba.decodeXML;var j1e=Ba.decodeHTML;Ba.decodeHTMLStrict,Ba.decodeHTML4,Ba.decodeHTML5,Ba.decodeHTML4Strict,Ba.decodeHTML5Strict,Ba.decodeXMLStrict;var kUe=92,H1e="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",q1e="[A-Za-z][A-Za-z0-9-]*",TUe="[a-zA-Z_:][a-zA-Z0-9:._-]*",DUe="[^\"'=<>`\\x00-\\x20]+",LUe="'[^']*'",RUe='"[^"]*"',FUe="(?:"+DUe+"|"+LUe+"|"+RUe+")",$Ue="(?:\\s*=\\s*"+FUe+")",MUe="(?:\\s+"+TUe+$Ue+"?)",G1e="<"+q1e+MUe+"*\\s*/?>",W1e="</"+q1e+"\\s*[>]",OUe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",IUe="[<][?][\\s\\S]*?[?][>]",NUe="<![A-Z]+\\s+[^>]*>",PUe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",BUe="(?:"+G1e+"|"+W1e+"|"+OUe+"|"+IUe+"|"+NUe+"|"+PUe+")",zUe=new RegExp("^"+BUe),UUe=/[\\&]/,V1e="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",jUe=new RegExp("\\\\"+V1e+"|"+H1e,"gi"),HUe='[&<>"]',Y1e=new RegExp(HUe,"g"),qUe=function(te){return te.charCodeAt(0)===kUe?te.charAt(1):j1e(te)},X1e=function(te){return UUe.test(te)?te.replace(jUe,qUe):te},GUe=function(te){try{return d(te)}catch{return te}},WUe=function(te){switch(te){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return te}},K1e=function(te){return Y1e.test(te)?te.replace(Y1e,WUe):te};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var k$;function T$(te){return k$(te)}if(String.fromCodePoint)k$=function(te){try{return String.fromCodePoint(te)}catch(xe){if(xe instanceof RangeError)return"";throw xe}};else{var VUe=String.fromCharCode,YUe=Math.floor;k$=function(){var te=16384,xe=[],Ge,Ze,It=-1,Lt=arguments.length;if(!Lt)return"";for(var Xn="";++It<Lt;){var wn=Number(arguments[It]);if(!isFinite(wn)||wn<0||wn>1114111||YUe(wn)!==wn)return"";wn<=65535?xe.push(wn):(wn-=65536,Ge=(wn>>10)+55296,Ze=wn%1024+56320,xe.push(Ge,Ze)),(It+1===Lt||xe.length>te)&&(Xn+=VUe.apply(null,xe),xe.length=0)}return Xn}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var te=function(){try{var Ge={},Ze=Object.defineProperty,It=Ze(Ge,Ge,Ge)&&Ze}catch{}return It}(),xe=function(Ge){if(this==null)throw TypeError();var Ze=String(this),It=Ge?Number(Ge):0;if(It!=It&&(It=0),It<0||It==1/0)throw RangeError();for(var Lt="";It;)It%2==1&&(Lt+=Ze),It>1&&(Ze+=Ze),It>>=1;return Lt};te?te(String.prototype,"repeat",{value:xe,configurable:!0,writable:!0}):String.prototype.repeat=xe}();var aS=GUe,D$=X1e,Z1e=10,L$=42,lS=95,XUe=96,Q1e=91,KUe=93,J1e=60,ZUe=33,exe=92,QUe=38,txe=40,R$=41,JUe=58,E0=39,A0=34,nxe=V1e,F$="\\\\"+nxe,eje=H1e,tje=zUe,rxe=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),nje=new RegExp('^(?:"('+F$+`|[^"\\x00])*"|'(`+F$+"|[^'\\x00])*'|\\(("+F$+"|[^()\\x00])*\\))"),rje=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,ixe=new RegExp("^"+nxe),ije=new RegExp("^"+eje,"i"),oje=/`+/,sje=/^`+/,aje=/\.\.\./g,lje=/--+/g,uje=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,cje=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,fje=/^ *(?:\n *)?/,oxe=/^[ \t\n\x0b\x0c\x0d]/,sxe=/^\s/,dje=/ *$/,hje=/^ */,axe=/^ *(?:\n|$)/,pje=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,gje=/^[^\n`\[\]\\!<&*_'"]+/m,fl=function(te){var xe=new a("text");return xe._literal=te,xe},lxe=function(te){return te.slice(1,te.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},mje=function(te){var xe=te.exec(this.subject.slice(this.pos));return xe===null?null:(this.pos+=xe.index+xe[0].length,xe[0])},vje=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},yje=function(){return this.match(fje),!0},bje=function(te){var xe=this.match(sje);if(xe===null)return!1;for(var Ge=this.pos,Ze,It,Lt;(Ze=this.match(oje))!==null;)if(Ze===xe)return It=new a("code"),Lt=this.subject.slice(Ge,this.pos-xe.length).replace(/\n/gm," "),Lt.length>0&&Lt.match(/[^ ]/)!==null&&Lt[0]==" "&&Lt[Lt.length-1]==" "?It._literal=Lt.slice(1,Lt.length-1):It._literal=Lt,te.appendChild(It),!0;return this.pos=Ge,te.appendChild(fl(xe)),!0},xje=function(te){var xe=this.subject,Ge;return this.pos+=1,this.peek()===Z1e?(this.pos+=1,Ge=new a("linebreak"),te.appendChild(Ge)):ixe.test(xe.charAt(this.pos))?(te.appendChild(fl(xe.charAt(this.pos))),this.pos+=1):te.appendChild(fl("\\")),!0},wje=function(te){var xe,Ge,Ze;return(xe=this.match(uje))?(Ge=xe.slice(1,xe.length-1),Ze=new a("link"),Ze._destination=aS("mailto:"+Ge),Ze._title="",Ze.appendChild(fl(Ge)),te.appendChild(Ze),!0):(xe=this.match(cje))?(Ge=xe.slice(1,xe.length-1),Ze=new a("link"),Ze._destination=aS(Ge),Ze._title="",Ze.appendChild(fl(Ge)),te.appendChild(Ze),!0):!1},_je=function(te){var xe=this.match(tje);if(xe===null)return!1;var Ge=new a("html_inline");return Ge._literal=xe,te.appendChild(Ge),!0},Eje=function(te){var xe=0,Ge,Ze,It,Lt=this.pos,Xn,wn,mr,$i,ci,fi,ji,Hi;if(te===E0||te===A0)xe++,this.pos++;else for(;this.peek()===te;)xe++,this.pos++;return xe===0?null:(Ge=Lt===0?`
`:this.subject.charAt(Lt-1),It=this.peek(),It===-1?Ze=`
`:Ze=T$(It),ci=sxe.test(Ze),fi=rxe.test(Ze),ji=sxe.test(Ge),Hi=rxe.test(Ge),Xn=!ci&&(!fi||ji||Hi),wn=!ji&&(!Hi||ci||fi),te===lS?(mr=Xn&&(!wn||Hi),$i=wn&&(!Xn||fi)):te===E0||te===A0?(mr=Xn&&!wn,$i=wn):(mr=Xn,$i=wn),this.pos=Lt,{numdelims:xe,can_open:mr,can_close:$i})},Aje=function(te,xe){var Ge=this.scanDelims(te);if(!Ge)return!1;var Ze=Ge.numdelims,It=this.pos,Lt;this.pos+=Ze,te===E0?Lt="":te===A0?Lt="":Lt=this.subject.slice(It,this.pos);var Xn=fl(Lt);return xe.appendChild(Xn),(Ge.can_open||Ge.can_close)&&(this.options.smart||te!==E0&&te!==A0)&&(this.delimiters={cc:te,numdelims:Ze,origdelims:Ze,node:Xn,previous:this.delimiters,next:null,can_open:Ge.can_open,can_close:Ge.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},Cje=function(te){te.previous!==null&&(te.previous.next=te.next),te.next===null?this.delimiters=te.previous:te.next.previous=te.previous},Sje=function(te,xe){te.next!==xe&&(te.next=xe,xe.previous=te)},kje=function(te){for(var xe,Ge,Ze,It,Lt,Xn,wn,mr,$i,ci,fi=[[],[],[]],ji=!1,Hi=0;Hi<3;Hi++)fi[Hi][lS]=te,fi[Hi][L$]=te,fi[Hi][E0]=te,fi[Hi][A0]=te;for(Ge=this.delimiters;Ge!==null&&Ge.previous!==te;)Ge=Ge.previous;for(;Ge!==null;){var ra=Ge.cc;if(!Ge.can_close)Ge=Ge.next;else{for(xe=Ge.previous,ci=!1;xe!==null&&xe!==te&&xe!==fi[Ge.origdelims%3][ra];){if(ji=(Ge.can_open||xe.can_close)&&Ge.origdelims%3!==0&&(xe.origdelims+Ge.origdelims)%3===0,xe.cc===Ge.cc&&xe.can_open&&!ji){ci=!0;break}xe=xe.previous}if(Ze=Ge,ra===L$||ra===lS)if(!ci)Ge=Ge.next;else{wn=Ge.numdelims>=2&&xe.numdelims>=2?2:1,It=xe.node,Lt=Ge.node,xe.numdelims-=wn,Ge.numdelims-=wn,It._literal=It._literal.slice(0,It._literal.length-wn),Lt._literal=Lt._literal.slice(0,Lt._literal.length-wn);var S0=new a(wn===1?"emph":"strong");for(mr=It._next;mr&&mr!==Lt;)$i=mr._next,mr.unlink(),S0.appendChild(mr),mr=$i;It.insertAfter(S0),Sje(xe,Ge),xe.numdelims===0&&(It.unlink(),this.removeDelimiter(xe)),Ge.numdelims===0&&(Lt.unlink(),Xn=Ge.next,this.removeDelimiter(Ge),Ge=Xn)}else ra===E0?(Ge.node._literal="",ci&&(xe.node._literal=""),Ge=Ge.next):ra===A0&&(Ge.node._literal="",ci&&(xe.node.literal=""),Ge=Ge.next);ci||(fi[Ze.origdelims%3][ra]=Ze.previous,Ze.can_open||this.removeDelimiter(Ze))}}for(;this.delimiters!==null&&this.delimiters!==te;)this.removeDelimiter(this.delimiters)},Tje=function(){var te=this.match(nje);return te===null?null:D$(te.substr(1,te.length-2))},Dje=function(){var te=this.match(rje);if(te===null){if(this.peek()===J1e)return null;for(var xe=this.pos,Ge=0,Ze;(Ze=this.peek())!==-1;)if(Ze===exe&&ixe.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Ze===txe)this.pos+=1,Ge+=1;else if(Ze===R$){if(Ge<1)break;this.pos+=1,Ge-=1}else{if(oxe.exec(T$(Ze))!==null)break;this.pos+=1}return this.pos===xe&&Ze!==R$||Ge!==0?null:(te=this.subject.substr(xe,this.pos-xe),aS(D$(te)))}else return aS(D$(te.substr(1,te.length-2)))},Lje=function(){var te=this.match(pje);return te===null||te.length>1001?0:te.length},Rje=function(te){var xe=this.pos;this.pos+=1;var Ge=fl("[");return te.appendChild(Ge),this.addBracket(Ge,xe,!1),!0},Fje=function(te){var xe=this.pos;if(this.pos+=1,this.peek()===Q1e){this.pos+=1;var Ge=fl("![");te.appendChild(Ge),this.addBracket(Ge,xe+1,!0)}else te.appendChild(fl("!"));return!0},$je=function(te){var xe,Ge,Ze,It,Lt=!1,Xn,wn;if(this.pos+=1,xe=this.pos,wn=this.brackets,wn===null)return te.appendChild(fl("]")),!0;if(!wn.active)return te.appendChild(fl("]")),this.removeBracket(),!0;Ge=wn.image;var mr=this.pos;if(this.peek()===txe&&(this.pos++,this.spnl()&&(Ze=this.parseLinkDestination())!==null&&this.spnl()&&(oxe.test(this.subject.charAt(this.pos-1))&&(It=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===R$?(this.pos+=1,Lt=!0):this.pos=mr),!Lt){var $i=this.pos,ci=this.parseLinkLabel();if(ci>2?Xn=this.subject.slice($i,$i+ci):wn.bracketAfter||(Xn=this.subject.slice(wn.index,xe)),ci===0&&(this.pos=mr),Xn){var fi=this.refmap[lxe(Xn)];fi&&(Ze=fi.destination,It=fi.title,Lt=!0)}}if(Lt){var ji=new a(Ge?"image":"link");ji._destination=Ze,ji._title=It||"";var Hi,ra;for(Hi=wn.node._next;Hi;)ra=Hi._next,Hi.unlink(),ji.appendChild(Hi),Hi=ra;if(te.appendChild(ji),this.processEmphasis(wn.previousDelimiter),this.removeBracket(),wn.node.unlink(),!Ge)for(wn=this.brackets;wn!==null;)wn.image||(wn.active=!1),wn=wn.previous;return!0}else return this.removeBracket(),this.pos=xe,te.appendChild(fl("]")),!0},Mje=function(te,xe,Ge){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:te,previous:this.brackets,previousDelimiter:this.delimiters,index:xe,image:Ge,active:!0}},Oje=function(){this.brackets=this.brackets.previous},Ije=function(te){var xe;return(xe=this.match(ije))?(te.appendChild(fl(j1e(xe))),!0):!1},Nje=function(te){var xe;return(xe=this.match(gje))?(this.options.smart?te.appendChild(fl(xe.replace(aje,"").replace(lje,function(Ge){var Ze=0,It=0;return Ge.length%3===0?It=Ge.length/3:Ge.length%2===0?Ze=Ge.length/2:Ge.length%3===2?(Ze=1,It=(Ge.length-2)/3):(Ze=2,It=(Ge.length-4)/3),"".repeat(It)+"".repeat(Ze)}))):te.appendChild(fl(xe)),!0):!1},Pje=function(te){this.pos+=1;var xe=te._lastChild;if(xe&&xe.type==="text"&&xe._literal[xe._literal.length-1]===" "){var Ge=xe._literal[xe._literal.length-2]===" ";xe._literal=xe._literal.replace(dje,""),te.appendChild(new a(Ge?"linebreak":"softbreak"))}else te.appendChild(new a("softbreak"));return this.match(hje),!0},Bje=function(te,xe){this.subject=te,this.pos=0;var Ge,Ze,It,Lt,Xn=this.pos;if(Lt=this.parseLinkLabel(),Lt===0)return 0;if(Ge=this.subject.substr(0,Lt),this.peek()===JUe)this.pos++;else return this.pos=Xn,0;if(this.spnl(),Ze=this.parseLinkDestination(),Ze===null)return this.pos=Xn,0;var wn=this.pos;this.spnl(),this.pos!==wn&&(It=this.parseLinkTitle()),It===null&&(It="",this.pos=wn);var mr=!0;if(this.match(axe)===null&&(It===""?mr=!1:(It="",this.pos=wn,mr=this.match(axe)!==null)),!mr)return this.pos=Xn,0;var $i=lxe(Ge);return $i===""?(this.pos=Xn,0):(xe[$i]||(xe[$i]={destination:Ze,title:It}),this.pos-Xn)},zje=function(te){var xe=!1,Ge=this.peek();if(Ge===-1)return!1;switch(Ge){case Z1e:xe=this.parseNewline(te);break;case exe:xe=this.parseBackslash(te);break;case XUe:xe=this.parseBackticks(te);break;case L$:case lS:xe=this.handleDelim(Ge,te);break;case E0:case A0:xe=this.options.smart&&this.handleDelim(Ge,te);break;case Q1e:xe=this.parseOpenBracket(te);break;case ZUe:xe=this.parseBang(te);break;case KUe:xe=this.parseCloseBracket(te);break;case J1e:xe=this.parseAutolink(te)||this.parseHtmlTag(te);break;case QUe:xe=this.parseEntity(te);break;default:xe=this.parseString(te);break}return xe||(this.pos+=1,te.appendChild(fl(T$(Ge)))),!0},Uje=function(te){for(this.subject=te._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(te););te._string_content=null,this.processEmphasis(null)};function jje(te){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:mje,peek:vje,spnl:yje,parseBackticks:bje,parseBackslash:xje,parseAutolink:wje,parseHtmlTag:_je,scanDelims:Eje,handleDelim:Aje,parseLinkTitle:Tje,parseLinkDestination:Dje,parseLinkLabel:Lje,parseOpenBracket:Rje,parseBang:Fje,parseCloseBracket:$je,addBracket:Mje,removeBracket:Oje,parseEntity:Ije,parseString:Nje,parseNewline:Pje,parseReference:Bje,parseInline:zje,processEmphasis:kje,removeDelimiter:Cje,options:te||{},parse:Uje}}var uS=4,uxe=9,Hje=10,cxe=62,qje=60,fxe=32,dxe=91,Gje=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+G1e+"|"+W1e+")\\s*$","i")],Wje=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],Vje=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,Yje=/^[#`~*+_=<>0-9-]/,hxe=/[^ \t\f\v\r\n]/,Xje=/^[*+-]/,Kje=/^(\d{1,9})([.)])/,Zje=/^#{1,6}(?:[ \t]+|$)/,Qje=/^`{3,}(?!.*`)|^~{3,}/,Jje=/^(?:`{3,}|~{3,})(?= *$)/,eHe=/^(?:=+|-+)[ \t]*$/,tHe=/\r\n|\n|\r/,nHe=function(te){return!hxe.test(te)},r2=function(te){return te===fxe||te===uxe},Ec=function(te,xe){return xe<te.length?te.charCodeAt(xe):-1},pxe=function(te){for(;te;){if(te._lastLineBlank)return!0;var xe=te.type;if(!te._lastLineChecked&&(xe==="list"||xe==="item"))te._lastLineChecked=!0,te=te._lastChild;else{te._lastLineChecked=!0;break}}return!1},rHe=function(){if(this.partiallyConsumedTab){this.offset+=1;var te=4-this.column%4;this.tip._string_content+=" ".repeat(te)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},iHe=function(te,xe){for(;!this.blocks[this.tip.type].canContain(te);)this.finalize(this.tip,this.lineNumber-1);var Ge=xe+1,Ze=new a(te,[[this.lineNumber,Ge],[0,0]]);return Ze._string_content="",this.tip.appendChild(Ze),this.tip=Ze,Ze},oHe=function(te,xe){var Ge=te.currentLine.slice(te.nextNonspace),Ze,It,Lt,Xn,wn={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:te.indent};if(te.indent>=4)return null;if(Ze=Ge.match(Xje))wn.type="bullet",wn.bulletChar=Ze[0][0];else if((Ze=Ge.match(Kje))&&(xe.type!=="paragraph"||Ze[1]==="1"))wn.type="ordered",wn.start=parseInt(Ze[1]),wn.delimiter=Ze[2];else return null;if(It=Ec(te.currentLine,te.nextNonspace+Ze[0].length),!(It===-1||It===uxe||It===fxe)||xe.type==="paragraph"&&!te.currentLine.slice(te.nextNonspace+Ze[0].length).match(hxe))return null;te.advanceNextNonspace(),te.advanceOffset(Ze[0].length,!0),Lt=te.column,Xn=te.offset;do te.advanceOffset(1,!0),It=Ec(te.currentLine,te.offset);while(te.column-Lt<5&&r2(It));var mr=Ec(te.currentLine,te.offset)===-1,$i=te.column-Lt;return $i>=5||$i<1||mr?(wn.padding=Ze[0].length+1,te.column=Lt,te.offset=Xn,r2(Ec(te.currentLine,te.offset))&&te.advanceOffset(1,!0)):wn.padding=Ze[0].length+$i,wn},sHe=function(te,xe){return te.type===xe.type&&te.delimiter===xe.delimiter&&te.bulletChar===xe.bulletChar},aHe=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var te=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=te}this.allClosed=!0}},gxe={document:{continue:function(){return 0},finalize:function(){},canContain:function(te){return te!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(te,xe){for(var Ge=xe._firstChild;Ge;){if(pxe(Ge)&&Ge._next){xe._listData.tight=!1;break}for(var Ze=Ge._firstChild;Ze;){if(pxe(Ze)&&(Ge._next||Ze._next)){xe._listData.tight=!1;break}Ze=Ze._next}Ge=Ge._next}},canContain:function(te){return te==="item"},acceptsLines:!1},block_quote:{continue:function(te){var xe=te.currentLine;if(!te.indented&&Ec(xe,te.nextNonspace)===cxe)te.advanceNextNonspace(),te.advanceOffset(1,!1),r2(Ec(xe,te.offset))&&te.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(te){return te!=="item"},acceptsLines:!1},item:{continue:function(te,xe){if(te.blank){if(xe._firstChild==null)return 1;te.advanceNextNonspace()}else if(te.indent>=xe._listData.markerOffset+xe._listData.padding)te.advanceOffset(xe._listData.markerOffset+xe._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(te){return te!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(te,xe){var Ge=te.currentLine,Ze=te.indent;if(xe._isFenced){var It=Ze<=3&&Ge.charAt(te.nextNonspace)===xe._fenceChar&&Ge.slice(te.nextNonspace).match(Jje);if(It&&It[0].length>=xe._fenceLength)return te.lastLineLength=te.offset+Ze+It[0].length,te.finalize(xe,te.lineNumber),2;for(var Lt=xe._fenceOffset;Lt>0&&r2(Ec(Ge,te.offset));)te.advanceOffset(1,!0),Lt--}else if(Ze>=uS)te.advanceOffset(uS,!0);else if(te.blank)te.advanceNextNonspace();else return 1;return 0},finalize:function(te,xe){if(xe._isFenced){var Ge=xe._string_content,Ze=Ge.indexOf(`
`),It=Ge.slice(0,Ze),Lt=Ge.slice(Ze+1);xe.info=X1e(It.trim()),xe._literal=Lt}else xe._literal=xe._string_content.replace(/(\n *)+$/,`
`);xe._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(te,xe){return te.blank&&(xe._htmlBlockType===6||xe._htmlBlockType===7)?1:0},finalize:function(te,xe){xe._literal=xe._string_content.replace(/(\n *)+$/,""),xe._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(te){return te.blank?1:0},finalize:function(te,xe){for(var Ge,Ze=!1;Ec(xe._string_content,0)===dxe&&(Ge=te.inlineParser.parseReference(xe._string_content,te.refmap));)xe._string_content=xe._string_content.slice(Ge),Ze=!0;Ze&&nHe(xe._string_content)&&xe.unlink()},canContain:function(){return!1},acceptsLines:!0}},lHe=[function(te){return!te.indented&&Ec(te.currentLine,te.nextNonspace)===cxe?(te.advanceNextNonspace(),te.advanceOffset(1,!1),r2(Ec(te.currentLine,te.offset))&&te.advanceOffset(1,!0),te.closeUnmatchedBlocks(),te.addChild("block_quote",te.nextNonspace),1):0},function(te){var xe;if(!te.indented&&(xe=te.currentLine.slice(te.nextNonspace).match(Zje))){te.advanceNextNonspace(),te.advanceOffset(xe[0].length,!1),te.closeUnmatchedBlocks();var Ge=te.addChild("heading",te.nextNonspace);return Ge.level=xe[0].trim().length,Ge._string_content=te.currentLine.slice(te.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),te.advanceOffset(te.currentLine.length-te.offset),2}else return 0},function(te){var xe;if(!te.indented&&(xe=te.currentLine.slice(te.nextNonspace).match(Qje))){var Ge=xe[0].length;te.closeUnmatchedBlocks();var Ze=te.addChild("code_block",te.nextNonspace);return Ze._isFenced=!0,Ze._fenceLength=Ge,Ze._fenceChar=xe[0][0],Ze._fenceOffset=te.indent,te.advanceNextNonspace(),te.advanceOffset(Ge,!1),2}else return 0},function(te,xe){if(!te.indented&&Ec(te.currentLine,te.nextNonspace)===qje){var Ge=te.currentLine.slice(te.nextNonspace),Ze;for(Ze=1;Ze<=7;Ze++)if(Gje[Ze].test(Ge)&&(Ze<7||xe.type!=="paragraph")){te.closeUnmatchedBlocks();var It=te.addChild("html_block",te.offset);return It._htmlBlockType=Ze,2}}return 0},function(te,xe){var Ge;if(!te.indented&&xe.type==="paragraph"&&(Ge=te.currentLine.slice(te.nextNonspace).match(eHe))){te.closeUnmatchedBlocks();for(var Ze;Ec(xe._string_content,0)===dxe&&(Ze=te.inlineParser.parseReference(xe._string_content,te.refmap));)xe._string_content=xe._string_content.slice(Ze);if(xe._string_content.length>0){var It=new a("heading",xe.sourcepos);return It.level=Ge[0][0]==="="?1:2,It._string_content=xe._string_content,xe.insertAfter(It),xe.unlink(),te.tip=It,te.advanceOffset(te.currentLine.length-te.offset,!1),2}else return 0}else return 0},function(te){return!te.indented&&Vje.test(te.currentLine.slice(te.nextNonspace))?(te.closeUnmatchedBlocks(),te.addChild("thematic_break",te.nextNonspace),te.advanceOffset(te.currentLine.length-te.offset,!1),2):0},function(te,xe){var Ge;return(!te.indented||xe.type==="list")&&(Ge=oHe(te,xe))?(te.closeUnmatchedBlocks(),(te.tip.type!=="list"||!sHe(xe._listData,Ge))&&(xe=te.addChild("list",te.nextNonspace),xe._listData=Ge),xe=te.addChild("item",te.nextNonspace),xe._listData=Ge,1):0},function(te){return te.indented&&te.tip.type!=="paragraph"&&!te.blank?(te.advanceOffset(uS,!0),te.closeUnmatchedBlocks(),te.addChild("code_block",te.offset),2):0}],uHe=function(te,xe){for(var Ge=this.currentLine,Ze,It,Lt;te>0&&(Lt=Ge[this.offset]);)Lt==="	"?(Ze=4-this.column%4,xe?(this.partiallyConsumedTab=Ze>te,It=Ze>te?te:Ze,this.column+=It,this.offset+=this.partiallyConsumedTab?0:1,te-=It):(this.partiallyConsumedTab=!1,this.column+=Ze,this.offset+=1,te-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,te-=1)},cHe=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},fHe=function(){for(var te=this.currentLine,xe=this.offset,Ge=this.column,Ze;(Ze=te.charAt(xe))!=="";)if(Ze===" ")xe++,Ge++;else if(Ze==="	")xe++,Ge+=4-Ge%4;else break;this.blank=Ze===`
`||Ze==="\r"||Ze==="",this.nextNonspace=xe,this.nextNonspaceColumn=Ge,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=uS},dHe=function(te){var xe=!0,Ge,Ze=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,te.indexOf("\0")!==-1&&(te=te.replace(/\0/g,"")),this.currentLine=te;for(var It;(It=Ze._lastChild)&&It._open;){switch(Ze=It,this.findNextNonspace(),this.blocks[Ze.type].continue(this,Ze)){case 0:break;case 1:xe=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!xe){Ze=Ze._parent;break}}this.allClosed=Ze===this.oldtip,this.lastMatchedContainer=Ze;for(var Lt=Ze.type!=="paragraph"&&gxe[Ze.type].acceptsLines,Xn=this.blockStarts,wn=Xn.length;!Lt;){if(this.findNextNonspace(),!this.indented&&!Yje.test(te.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var mr=0;mr<wn;){var $i=Xn[mr](this,Ze);if($i===1){Ze=this.tip;break}else if($i===2){Ze=this.tip,Lt=!0;break}else mr++}if(mr===wn){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Ze.lastChild&&(Ze.lastChild._lastLineBlank=!0),Ge=Ze.type;for(var ci=this.blank&&!(Ge==="block_quote"||Ge==="code_block"&&Ze._isFenced||Ge==="item"&&!Ze._firstChild&&Ze.sourcepos[0][0]===this.lineNumber),fi=Ze;fi;)fi._lastLineBlank=ci,fi=fi._parent;this.blocks[Ge].acceptsLines?(this.addLine(),Ge==="html_block"&&Ze._htmlBlockType>=1&&Ze._htmlBlockType<=5&&Wje[Ze._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=te.length,this.finalize(Ze,this.lineNumber))):this.offset<te.length&&!this.blank&&(Ze=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=te.length},hHe=function(te,xe){var Ge=te._parent;te._open=!1,te.sourcepos[1]=[xe,this.lastLineLength],this.blocks[te.type].finalize(this,te),this.tip=Ge},pHe=function(te){var xe,Ge,Ze,It=te.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Ge=It.next();)xe=Ge.node,Ze=xe.type,!Ge.entering&&(Ze==="paragraph"||Ze==="heading")&&this.inlineParser.parse(xe)},mxe=function(){var te=new a("document",[[1,1],[0,0]]);return te},gHe=function(te){this.doc=new mxe,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var xe=te.split(tHe),Ge=xe.length;te.charCodeAt(te.length-1)===Hje&&(Ge-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Ze=0;Ze<Ge;Ze++)this.incorporateLine(xe[Ze]);for(;this.tip;)this.finalize(this.tip,Ge);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function mHe(te){return{doc:new mxe,blocks:gxe,blockStarts:lHe,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new jje(te),findNextNonspace:fHe,advanceOffset:uHe,advanceNextNonspace:cHe,addLine:rHe,addChild:iHe,incorporateLine:dHe,finalize:hHe,processInlines:pHe,closeUnmatchedBlocks:aHe,parse:gHe,options:te||{}}}function xg(){}function vHe(te){var xe=te.walker(),Ge,Ze;for(this.buffer="",this.lastOut=`
`;Ge=xe.next();)Ze=Ge.node.type,this[Ze]&&this[Ze](Ge.node,Ge.entering);return this.buffer}function yHe(te){this.buffer+=te,this.lastOut=te}function bHe(){this.lastOut!==`
`&&this.lit(`
`)}function xHe(te){this.lit(te)}function wHe(te){return te}xg.prototype.render=vHe,xg.prototype.out=xHe,xg.prototype.lit=yHe,xg.prototype.cr=bHe,xg.prototype.esc=wHe;var _He=/^javascript:|vbscript:|file:|data:/i,EHe=/^data:image\/(?:png|gif|jpeg|webp)/i,vxe=function(te){return _He.test(te)&&!EHe.test(te)};function AHe(te,xe,Ge){if(!(this.disableTags>0)){if(this.buffer+="<"+te,xe&&xe.length>0)for(var Ze=0,It;(It=xe[Ze])!==void 0;)this.buffer+=" "+It[0]+'="'+It[1]+'"',Ze++;Ge&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function Vo(te){te=te||{},te.softbreak=te.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=te}function CHe(te){this.out(te.literal)}function SHe(){this.lit(this.options.softbreak)}function kHe(){this.tag("br",[],!0),this.cr()}function THe(te,xe){var Ge=this.attrs(te);xe?(this.options.safe&&vxe(te.destination)||Ge.push(["href",this.esc(te.destination)]),te.title&&Ge.push(["title",this.esc(te.title)]),this.tag("a",Ge)):this.tag("/a")}function DHe(te,xe){xe?(this.disableTags===0&&(this.options.safe&&vxe(te.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(te.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(te.title&&this.lit('" title="'+this.esc(te.title)),this.lit('" />')))}function LHe(te,xe){this.tag(xe?"em":"/em")}function RHe(te,xe){this.tag(xe?"strong":"/strong")}function FHe(te,xe){var Ge=te.parent.parent,Ze=this.attrs(te);Ge!==null&&Ge.type==="list"&&Ge.listTight||(xe?(this.cr(),this.tag("p",Ze)):(this.tag("/p"),this.cr()))}function $He(te,xe){var Ge="h"+te.level,Ze=this.attrs(te);xe?(this.cr(),this.tag(Ge,Ze)):(this.tag("/"+Ge),this.cr())}function MHe(te){this.tag("code"),this.out(te.literal),this.tag("/code")}function OHe(te){var xe=te.info?te.info.split(/\s+/):[],Ge=this.attrs(te);xe.length>0&&xe[0].length>0&&Ge.push(["class","language-"+this.esc(xe[0])]),this.cr(),this.tag("pre"),this.tag("code",Ge),this.out(te.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function IHe(te){var xe=this.attrs(te);this.cr(),this.tag("hr",xe,!0),this.cr()}function NHe(te,xe){var Ge=this.attrs(te);xe?(this.cr(),this.tag("blockquote",Ge),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function PHe(te,xe){var Ge=te.listType==="bullet"?"ul":"ol",Ze=this.attrs(te);if(xe){var It=te.listStart;It!==null&&It!==1&&Ze.push(["start",It.toString()]),this.cr(),this.tag(Ge,Ze),this.cr()}else this.cr(),this.tag("/"+Ge),this.cr()}function BHe(te,xe){var Ge=this.attrs(te);xe?this.tag("li",Ge):(this.tag("/li"),this.cr())}function zHe(te){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(te.literal)}function UHe(te){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(te.literal),this.cr()}function jHe(te,xe){xe&&te.onEnter?this.lit(te.onEnter):!xe&&te.onExit&&this.lit(te.onExit)}function HHe(te,xe){this.cr(),xe&&te.onEnter?this.lit(te.onEnter):!xe&&te.onExit&&this.lit(te.onExit),this.cr()}function qHe(te){this.lit(this.esc(te))}function GHe(te){var xe=[];if(this.options.sourcepos){var Ge=te.sourcepos;Ge&&xe.push(["data-sourcepos",String(Ge[0][0])+":"+String(Ge[0][1])+"-"+String(Ge[1][0])+":"+String(Ge[1][1])])}return xe}Vo.prototype=Object.create(xg.prototype),Vo.prototype.text=CHe,Vo.prototype.html_inline=zHe,Vo.prototype.html_block=UHe,Vo.prototype.softbreak=SHe,Vo.prototype.linebreak=kHe,Vo.prototype.link=THe,Vo.prototype.image=DHe,Vo.prototype.emph=LHe,Vo.prototype.strong=RHe,Vo.prototype.paragraph=FHe,Vo.prototype.heading=$He,Vo.prototype.code=MHe,Vo.prototype.code_block=OHe,Vo.prototype.thematic_break=IHe,Vo.prototype.block_quote=NHe,Vo.prototype.list=PHe,Vo.prototype.item=BHe,Vo.prototype.custom_inline=jHe,Vo.prototype.custom_block=HHe,Vo.prototype.esc=K1e,Vo.prototype.out=qHe,Vo.prototype.tag=AHe,Vo.prototype.attrs=GHe;var WHe=/\<[^>]*\>/;function VHe(te){return te.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function C0(te){te=te||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=te}function YHe(te){this.buffer="";var xe,Ge,Ze=te.walker(),It,Lt,Xn,wn,mr,$i,ci=this.options;for(ci.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;It=Ze.next();)if(Xn=It.entering,Lt=It.node,$i=Lt.type,wn=Lt.isContainer,mr=$i==="thematic_break"||$i==="linebreak"||$i==="softbreak",Ge=VHe($i),Xn){switch(xe=[],$i){case"document":xe.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":Lt.listType!==null&&xe.push(["type",Lt.listType.toLowerCase()]),Lt.listStart!==null&&xe.push(["start",String(Lt.listStart)]),Lt.listTight!==null&&xe.push(["tight",Lt.listTight?"true":"false"]);var fi=Lt.listDelimiter;if(fi!==null){var ji="";fi==="."?ji="period":ji="paren",xe.push(["delimiter",ji])}break;case"code_block":Lt.info&&xe.push(["info",Lt.info]);break;case"heading":xe.push(["level",String(Lt.level)]);break;case"link":case"image":xe.push(["destination",Lt.destination]),xe.push(["title",Lt.title]);break;case"custom_inline":case"custom_block":xe.push(["on_enter",Lt.onEnter]),xe.push(["on_exit",Lt.onExit]);break}if(ci.sourcepos){var Hi=Lt.sourcepos;Hi&&xe.push(["sourcepos",String(Hi[0][0])+":"+String(Hi[0][1])+"-"+String(Hi[1][0])+":"+String(Hi[1][1])])}if(this.cr(),this.out(this.tag(Ge,xe,mr)),wn)this.indentLevel+=1;else if(!wn&&!mr){var ra=Lt.literal;ra&&this.out(this.esc(ra)),this.out(this.tag("/"+Ge))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Ge));return ci.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function XHe(te){this.disableTags>0?this.buffer+=te.replace(WHe,""):this.buffer+=te,this.lastOut=te}function KHe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var te=this.indentLevel;te>0;te--)this.buffer+=this.indent}}function ZHe(te,xe,Ge){var Ze="<"+te;if(xe&&xe.length>0)for(var It=0,Lt;(Lt=xe[It])!==void 0;)Ze+=" "+Lt[0]+'="'+this.esc(Lt[1])+'"',It++;return Ge&&(Ze+=" /"),Ze+=">",Ze}C0.prototype=Object.create(xg.prototype),C0.prototype.render=YHe,C0.prototype.out=XHe,C0.prototype.cr=KHe,C0.prototype.tag=ZHe,C0.prototype.esc=K1e,n.HtmlRenderer=Vo,n.Node=a,n.Parser=mHe,n.Renderer=xg,n.XmlRenderer=C0,Object.defineProperty(n,"__esModule",{value:!0})})}(m_,m_.exports)),m_.exports}var Ak={exports:{}},mO,Bke;function K8t(){if(Bke)return mO;Bke=1;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var g=0,m=0,y=0,v=h.length;y!==v&&h[y]===0;)y++,g++;for(var x=(v-y)*f+1>>>0,_=new Uint8Array(x);y!==v;){for(var E=h[y],C=0,w=x-1;(E!==0||C<m)&&w!==-1;w--,C++)E+=256*_[w]>>>0,_[w]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=C,y++}for(var T=x-m;T!==x&&_[T]===0;)T++;for(var R=l.repeat(g);T<x;++T)R+=t.charAt(_[T]);return R}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var g=0;if(h[g]!==" "){for(var m=0,y=0;h[g]===l;)m++,g++;for(var v=(h.length-g)*u+1>>>0,x=new Uint8Array(v);h[g];){var _=n[h.charCodeAt(g)];if(_===255)return;for(var E=0,C=v-1;(_!==0||E<y)&&C!==-1;C--,E++)_+=a*x[C]>>>0,x[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(h[g]!==" "){for(var w=v-y;w!==v&&x[w]===0;)w++;for(var T=new Uint8Array(m+(v-w)),R=m;w!==v;)T[R++]=x[w++];return T}}}function p(h){var g=d(h);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:d,decode:p}}return mO=e,mO}var Ck={},vO={},yO={},bO,zke;function tze(){return zke||(zke=1,bO=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),bO}var xO,Uke;function Mj(){if(Uke)return xO;Uke=1;var e=tze();return xO=function(){return e()&&!!Symbol.toStringTag},xO}var wO,jke;function nze(){return jke||(jke=1,wO=Object),wO}var _O,Hke;function Z8t(){return Hke||(Hke=1,_O=Error),_O}var EO,qke;function Q8t(){return qke||(qke=1,EO=EvalError),EO}var AO,Gke;function J8t(){return Gke||(Gke=1,AO=RangeError),AO}var CO,Wke;function eNt(){return Wke||(Wke=1,CO=ReferenceError),CO}var SO,Vke;function rze(){return Vke||(Vke=1,SO=SyntaxError),SO}var kO,Yke;function TC(){return Yke||(Yke=1,kO=TypeError),kO}var TO,Xke;function tNt(){return Xke||(Xke=1,TO=URIError),TO}var DO,Kke;function nNt(){return Kke||(Kke=1,DO=Math.abs),DO}var LO,Zke;function rNt(){return Zke||(Zke=1,LO=Math.floor),LO}var RO,Qke;function iNt(){return Qke||(Qke=1,RO=Math.max),RO}var FO,Jke;function oNt(){return Jke||(Jke=1,FO=Math.min),FO}var $O,e3e;function sNt(){return e3e||(e3e=1,$O=Math.pow),$O}var MO,t3e;function aNt(){return t3e||(t3e=1,MO=Math.round),MO}var OO,n3e;function lNt(){return n3e||(n3e=1,OO=Number.isNaN||function(t){return t!==t}),OO}var IO,r3e;function uNt(){if(r3e)return IO;r3e=1;var e=lNt();return IO=function(n){return e(n)||n===0?n:n<0?-1:1},IO}var NO,i3e;function cNt(){return i3e||(i3e=1,NO=Object.getOwnPropertyDescriptor),NO}var PO,o3e;function DC(){if(o3e)return PO;o3e=1;var e=cNt();if(e)try{e([],"length")}catch{e=null}return PO=e,PO}var BO,s3e;function y$(){if(s3e)return BO;s3e=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return BO=e,BO}var zO,a3e;function fNt(){if(a3e)return zO;a3e=1;var e=typeof Symbol<"u"&&Symbol,t=tze();return zO=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},zO}var UO,l3e;function ize(){return l3e||(l3e=1,UO=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),UO}var jO,u3e;function oze(){if(u3e)return jO;u3e=1;var e=nze();return jO=e.getPrototypeOf||null,jO}var HO,c3e;function dNt(){if(c3e)return HO;c3e=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,u){for(var f=[],c=0;c<l.length;c+=1)f[c]=l[c];for(var d=0;d<u.length;d+=1)f[d+l.length]=u[d];return f},o=function(l,u){for(var f=[],c=u,d=0;c<l.length;c+=1,d+=1)f[d]=l[c];return f},s=function(a,l){for(var u="",f=0;f<a.length;f+=1)u+=a[f],f+1<a.length&&(u+=l);return u};return HO=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==r)throw new TypeError(e+u);for(var f=o(arguments,1),c,d=function(){if(this instanceof c){var y=u.apply(this,i(f,arguments));return Object(y)===y?y:this}return u.apply(l,i(f,arguments))},p=n(0,u.length-f.length),h=[],g=0;g<p;g++)h[g]="$"+g;if(c=Function("binder","return function ("+s(h,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var m=function(){};m.prototype=u.prototype,c.prototype=new m,m.prototype=null}return c},HO}var qO,f3e;function LC(){if(f3e)return qO;f3e=1;var e=dNt();return qO=Function.prototype.bind||e,qO}var GO,d3e;function Oj(){return d3e||(d3e=1,GO=Function.prototype.call),GO}var WO,h3e;function sze(){return h3e||(h3e=1,WO=Function.prototype.apply),WO}var VO,p3e;function hNt(){return p3e||(p3e=1,VO=typeof Reflect<"u"&&Reflect&&Reflect.apply),VO}var YO,g3e;function pNt(){if(g3e)return YO;g3e=1;var e=LC(),t=sze(),n=Oj(),r=hNt();return YO=r||e.call(n,t),YO}var XO,m3e;function gNt(){if(m3e)return XO;m3e=1;var e=LC(),t=TC(),n=Oj(),r=pNt();return XO=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return r(e,n,o)},XO}var KO,v3e;function mNt(){if(v3e)return KO;v3e=1;var e=gNt(),t=DC(),n;try{n=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var r=!!n&&t&&t(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return KO=r&&typeof r.get=="function"?e([r.get]):typeof o=="function"?function(a){return o(a==null?a:i(a))}:!1,KO}var ZO,y3e;function vNt(){if(y3e)return ZO;y3e=1;var e=ize(),t=oze(),n=mNt();return ZO=e?function(i){return e(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:n?function(i){return n(i)}:null,ZO}var QO,b3e;function yNt(){if(b3e)return QO;b3e=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=LC();return QO=n.call(e,t),QO}var JO,x3e;function Ij(){if(x3e)return JO;x3e=1;var e,t=nze(),n=Z8t(),r=Q8t(),i=J8t(),o=eNt(),s=rze(),a=TC(),l=tNt(),u=nNt(),f=rNt(),c=iNt(),d=oNt(),p=sNt(),h=aNt(),g=uNt(),m=Function,y=function(ve){try{return m('"use strict"; return ('+ve+").constructor;")()}catch{}},v=DC(),x=y$(),_=function(){throw new a},E=v?function(){try{return arguments.callee,_}catch{try{return v(arguments,"callee").get}catch{return _}}}():_,C=fNt()(),w=vNt(),T=oze(),R=ize(),L=sze(),B=Oj(),P={},S=typeof Uint8Array>"u"||!w?e:w(Uint8Array),k={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":C&&w?w([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":P,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&w?w(w([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!C||!w?e:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!C||!w?e:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&w?w(""[Symbol.iterator]()):e,"%Symbol%":C?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":E,"%TypedArray%":S,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":B,"%Function.prototype.apply%":L,"%Object.defineProperty%":x,"%Object.getPrototypeOf%":T,"%Math.abs%":u,"%Math.floor%":f,"%Math.max%":c,"%Math.min%":d,"%Math.pow%":p,"%Math.round%":h,"%Math.sign%":g,"%Reflect.getPrototypeOf%":R};if(w)try{null.error}catch(ve){var D=w(w(ve));k["%Error.prototype%"]=D}var O=function ve(Ee){var Ve;if(Ee==="%AsyncFunction%")Ve=y("async function () {}");else if(Ee==="%GeneratorFunction%")Ve=y("function* () {}");else if(Ee==="%AsyncGeneratorFunction%")Ve=y("async function* () {}");else if(Ee==="%AsyncGenerator%"){var Ue=ve("%AsyncGeneratorFunction%");Ue&&(Ve=Ue.prototype)}else if(Ee==="%AsyncIteratorPrototype%"){var ft=ve("%AsyncGenerator%");ft&&w&&(Ve=w(ft.prototype))}return k[Ee]=Ve,Ve},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},j=LC(),q=yNt(),W=j.call(B,Array.prototype.concat),Q=j.call(L,Array.prototype.splice),ee=j.call(B,String.prototype.replace),H=j.call(B,String.prototype.slice),se=j.call(B,RegExp.prototype.exec),ne=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ge=/\\(\\)?/g,we=function(Ee){var Ve=H(Ee,0,1),Ue=H(Ee,-1);if(Ve==="%"&&Ue!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(Ue==="%"&&Ve!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var ft=[];return ee(Ee,ne,function(ht,zt,$t,Tn){ft[ft.length]=$t?ee(Tn,ge,"$1"):zt||ht}),ft},$e=function(Ee,Ve){var Ue=Ee,ft;if(q(N,Ue)&&(ft=N[Ue],Ue="%"+ft[0]+"%"),q(k,Ue)){var ht=k[Ue];if(ht===P&&(ht=O(Ue)),typeof ht>"u"&&!Ve)throw new a("intrinsic "+Ee+" exists, but is not available. Please file an issue!");return{alias:ft,name:Ue,value:ht}}throw new s("intrinsic "+Ee+" does not exist!")};return JO=function(Ee,Ve){if(typeof Ee!="string"||Ee.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ve!="boolean")throw new a('"allowMissing" argument must be a boolean');if(se(/^%?[^%]*%?$/,Ee)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ue=we(Ee),ft=Ue.length>0?Ue[0]:"",ht=$e("%"+ft+"%",Ve),zt=ht.name,$t=ht.value,Tn=!1,it=ht.alias;it&&(ft=it[0],Q(Ue,W([0,1],it)));for(var Te=1,ye=!0;Te<Ue.length;Te+=1){var Se=Ue[Te],Re=H(Se,0,1),U=H(Se,-1);if((Re==='"'||Re==="'"||Re==="`"||U==='"'||U==="'"||U==="`")&&Re!==U)throw new s("property names with quotes must have matching quotes");if((Se==="constructor"||!ye)&&(Tn=!0),ft+="."+Se,zt="%"+ft+"%",q(k,zt))$t=k[zt];else if($t!=null){if(!(Se in $t)){if(!Ve)throw new a("base intrinsic for "+Ee+" exists, but the property is not available.");return}if(v&&Te+1>=Ue.length){var Z=v($t,Se);ye=!!Z,ye&&"get"in Z&&!("originalValue"in Z.get)?$t=Z.get:$t=$t[Se]}else ye=q($t,Se),$t=$t[Se];ye&&!Tn&&(k[zt]=$t)}}return $t},JO}var e4={exports:{}},t4,w3e;function bNt(){if(w3e)return t4;w3e=1;var e=y$(),t=rze(),n=TC(),r=DC();return t4=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new n("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!r&&r(o,s);if(e)e(o,s,{configurable:f===null&&d?d.configurable:!f,enumerable:l===null&&d?d.enumerable:!l,value:a,writable:u===null&&d?d.writable:!u});else if(c||!l&&!u&&!f)o[s]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},t4}var n4,_3e;function xNt(){if(_3e)return n4;_3e=1;var e=y$(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},n4=t,n4}var r4,E3e;function wNt(){if(E3e)return r4;E3e=1;var e=Ij(),t=bNt(),n=xNt()(),r=DC(),i=TC(),o=e("%Math.floor%");return r4=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||o(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,c=!0;if("length"in a&&r){var d=r(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(c=!1)}return(f||c||!u)&&(n?t(a,"length",l,!0,!0):t(a,"length",l)),a},r4}var A3e;function aze(){return A3e||(A3e=1,function(e){var t=LC(),n=Ij(),r=wNt(),i=TC(),o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(s,o),l=y$(),u=n("%Math.max%");e.exports=function(d){if(typeof d!="function")throw new i("a function is required");var p=a(t,s,arguments);return r(p,1+u(0,d.length-(arguments.length-1)),!0)};var f=function(){return a(t,o,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f}(e4)),e4.exports}var i4,C3e;function lze(){if(C3e)return i4;C3e=1;var e=Ij(),t=aze(),n=t(e("String.prototype.indexOf"));return i4=function(i,o){var s=e(i,!!o);return typeof s=="function"&&n(i,".prototype.")>-1?t(s):s},i4}var o4,S3e;function _Nt(){if(S3e)return o4;S3e=1;var e=Mj()(),t=lze(),n=t("Object.prototype.toString"),r=function(a){return e&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},o=function(){return r(arguments)}();return r.isLegacyArguments=i,o4=o?r:i,o4}var s4,k3e;function ENt(){if(k3e)return s4;k3e=1;var e=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,r=Mj()(),i=Object.getPrototypeOf,o=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},s;return s4=function(l){if(typeof l!="function")return!1;if(n.test(t.call(l)))return!0;if(!r){var u=e.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var f=o();s=f?i(f):!1}return i(l)===s},s4}var a4,T3e;function ANt(){if(T3e)return a4;T3e=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},t(function(){throw 42},null,n)}catch(v){v!==r&&(t=null)}else t=null;var i=/^\s*class\b/,o=function(x){try{var _=e.call(x);return i.test(_)}catch{return!1}},s=function(x){try{return o(x)?!1:(e.call(x),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",f="[object GeneratorFunction]",c="[object HTMLAllCollection]",d="[object HTML document.all class]",p="[object HTMLCollection]",h=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),m=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(m=function(x){if((g||!x)&&(typeof x>"u"||typeof x=="object"))try{var _=a.call(x);return(_===c||_===d||_===p||_===l)&&x("")==null}catch{}return!1})}return a4=t?function(x){if(m(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;try{t(x,null,n)}catch(_){if(_!==r)return!1}return!o(x)&&s(x)}:function(x){if(m(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;if(h)return s(x);if(o(x))return!1;var _=a.call(x);return _!==u&&_!==f&&!/^\[object HTML/.test(_)?!1:s(x)},a4}var l4,D3e;function CNt(){if(D3e)return l4;D3e=1;var e=ANt(),t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,u,f){for(var c=0,d=l.length;c<d;c++)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},i=function(l,u,f){for(var c=0,d=l.length;c<d;c++)f==null?u(l.charAt(c),c,l):u.call(f,l.charAt(c),c,l)},o=function(l,u,f){for(var c in l)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},s=function(l,u,f){if(!e(u))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=f),t.call(l)==="[object Array]"?r(l,u,c):typeof l=="string"?i(l,u,c):o(l,u,c)};return l4=s,l4}var u4,L3e;function SNt(){return L3e||(L3e=1,u4=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),u4}var c4,R3e;function kNt(){if(R3e)return c4;R3e=1;var e=SNt(),t=typeof globalThis>"u"?jo:globalThis;return c4=function(){for(var r=[],i=0;i<e.length;i++)typeof t[e[i]]=="function"&&(r[r.length]=e[i]);return r},c4}var f4,F3e;function uze(){if(F3e)return f4;F3e=1;var e=CNt(),t=kNt(),n=aze(),r=lze(),i=DC(),o=r("Object.prototype.toString"),s=Mj()(),a=typeof globalThis>"u"?jo:globalThis,l=t(),u=r("String.prototype.slice"),f=Object.getPrototypeOf,c=r("Array.prototype.indexOf",!0)||function(m,y){for(var v=0;v<m.length;v+=1)if(m[v]===y)return v;return-1},d={__proto__:null};s&&i&&f?e(l,function(g){var m=new a[g];if(Symbol.toStringTag in m){var y=f(m),v=i(y,Symbol.toStringTag);if(!v){var x=f(y);v=i(x,Symbol.toStringTag)}d["$"+g]=n(v.get)}}):e(l,function(g){var m=new a[g],y=m.slice||m.set;y&&(d["$"+g]=n(y))});var p=function(m){var y=!1;return e(d,function(v,x){if(!y)try{"$"+v(m)===x&&(y=u(x,1))}catch{}}),y},h=function(m){var y=!1;return e(d,function(v,x){if(!y)try{v(m),y=u(x,1)}catch{}}),y};return f4=function(m){if(!m||typeof m!="object")return!1;if(!s){var y=u(o(m),8,-1);return c(l,y)>-1?y:y!=="Object"?!1:h(m)}return i?p(m):null},f4}var d4,$3e;function TNt(){if($3e)return d4;$3e=1;var e=uze();return d4=function(n){return!!e(n)},d4}var M3e;function DNt(){return M3e||(M3e=1,function(e){var t=_Nt(),n=ENt(),r=uze(),i=TNt();function o(Te){return Te.call.bind(Te)}var s=typeof BigInt<"u",a=typeof Symbol<"u",l=o(Object.prototype.toString),u=o(Number.prototype.valueOf),f=o(String.prototype.valueOf),c=o(Boolean.prototype.valueOf);if(s)var d=o(BigInt.prototype.valueOf);if(a)var p=o(Symbol.prototype.valueOf);function h(Te,ye){if(typeof Te!="object")return!1;try{return ye(Te),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=n,e.isTypedArray=i;function g(Te){return typeof Promise<"u"&&Te instanceof Promise||Te!==null&&typeof Te=="object"&&typeof Te.then=="function"&&typeof Te.catch=="function"}e.isPromise=g;function m(Te){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Te):i(Te)||H(Te)}e.isArrayBufferView=m;function y(Te){return r(Te)==="Uint8Array"}e.isUint8Array=y;function v(Te){return r(Te)==="Uint8ClampedArray"}e.isUint8ClampedArray=v;function x(Te){return r(Te)==="Uint16Array"}e.isUint16Array=x;function _(Te){return r(Te)==="Uint32Array"}e.isUint32Array=_;function E(Te){return r(Te)==="Int8Array"}e.isInt8Array=E;function C(Te){return r(Te)==="Int16Array"}e.isInt16Array=C;function w(Te){return r(Te)==="Int32Array"}e.isInt32Array=w;function T(Te){return r(Te)==="Float32Array"}e.isFloat32Array=T;function R(Te){return r(Te)==="Float64Array"}e.isFloat64Array=R;function L(Te){return r(Te)==="BigInt64Array"}e.isBigInt64Array=L;function B(Te){return r(Te)==="BigUint64Array"}e.isBigUint64Array=B;function P(Te){return l(Te)==="[object Map]"}P.working=typeof Map<"u"&&P(new Map);function S(Te){return typeof Map>"u"?!1:P.working?P(Te):Te instanceof Map}e.isMap=S;function k(Te){return l(Te)==="[object Set]"}k.working=typeof Set<"u"&&k(new Set);function D(Te){return typeof Set>"u"?!1:k.working?k(Te):Te instanceof Set}e.isSet=D;function O(Te){return l(Te)==="[object WeakMap]"}O.working=typeof WeakMap<"u"&&O(new WeakMap);function N(Te){return typeof WeakMap>"u"?!1:O.working?O(Te):Te instanceof WeakMap}e.isWeakMap=N;function j(Te){return l(Te)==="[object WeakSet]"}j.working=typeof WeakSet<"u"&&j(new WeakSet);function q(Te){return j(Te)}e.isWeakSet=q;function W(Te){return l(Te)==="[object ArrayBuffer]"}W.working=typeof ArrayBuffer<"u"&&W(new ArrayBuffer);function Q(Te){return typeof ArrayBuffer>"u"?!1:W.working?W(Te):Te instanceof ArrayBuffer}e.isArrayBuffer=Q;function ee(Te){return l(Te)==="[object DataView]"}ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ee(new DataView(new ArrayBuffer(1),0,1));function H(Te){return typeof DataView>"u"?!1:ee.working?ee(Te):Te instanceof DataView}e.isDataView=H;var se=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ne(Te){return l(Te)==="[object SharedArrayBuffer]"}function ge(Te){return typeof se>"u"?!1:(typeof ne.working>"u"&&(ne.working=ne(new se)),ne.working?ne(Te):Te instanceof se)}e.isSharedArrayBuffer=ge;function we(Te){return l(Te)==="[object AsyncFunction]"}e.isAsyncFunction=we;function $e(Te){return l(Te)==="[object Map Iterator]"}e.isMapIterator=$e;function ve(Te){return l(Te)==="[object Set Iterator]"}e.isSetIterator=ve;function Ee(Te){return l(Te)==="[object Generator]"}e.isGeneratorObject=Ee;function Ve(Te){return l(Te)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=Ve;function Ue(Te){return h(Te,u)}e.isNumberObject=Ue;function ft(Te){return h(Te,f)}e.isStringObject=ft;function ht(Te){return h(Te,c)}e.isBooleanObject=ht;function zt(Te){return s&&h(Te,d)}e.isBigIntObject=zt;function $t(Te){return a&&h(Te,p)}e.isSymbolObject=$t;function Tn(Te){return Ue(Te)||ft(Te)||ht(Te)||zt(Te)||$t(Te)}e.isBoxedPrimitive=Tn;function it(Te){return typeof Uint8Array<"u"&&(Q(Te)||ge(Te))}e.isAnyArrayBuffer=it,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Te){Object.defineProperty(e,Te,{enumerable:!1,value:function(){throw new Error(Te+" is not supported in userland")}})})}(yO)),yO}var h4,O3e;function LNt(){return O3e||(O3e=1,h4=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),h4}var Sk={exports:{}},I3e;function RNt(){return I3e||(I3e=1,typeof Object.create=="function"?Sk.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Sk.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Sk.exports}var N3e;function P3e(){return N3e||(N3e=1,function(e){var t={},n=Object.getOwnPropertyDescriptors||function(se){for(var ne=Object.keys(se),ge={},we=0;we<ne.length;we++)ge[ne[we]]=Object.getOwnPropertyDescriptor(se,ne[we]);return ge},r=/%[sdj%]/g;e.format=function(H){if(!C(H)){for(var se=[],ne=0;ne<arguments.length;ne++)se.push(a(arguments[ne]));return se.join(" ")}for(var ne=1,ge=arguments,we=ge.length,$e=String(H).replace(r,function(Ee){if(Ee==="%%")return"%";if(ne>=we)return Ee;switch(Ee){case"%s":return String(ge[ne++]);case"%d":return Number(ge[ne++]);case"%j":try{return JSON.stringify(ge[ne++])}catch{return"[Circular]"}default:return Ee}}),ve=ge[ne];ne<we;ve=ge[++ne])x(ve)||!L(ve)?$e+=" "+ve:$e+=" "+a(ve);return $e},e.deprecate=function(H,se){if(typeof process<"u"&&process.noDeprecation===!0)return H;if(typeof process>"u")return function(){return e.deprecate(H,se).apply(this,arguments)};var ne=!1;function ge(){if(!ne){if(process.throwDeprecation)throw new Error(se);process.traceDeprecation?console.trace(se):console.error(se),ne=!0}return H.apply(this,arguments)}return ge};var i={},o=/^$/;if(t.NODE_DEBUG){var s=t.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+s+"$","i")}e.debuglog=function(H){if(H=H.toUpperCase(),!i[H])if(o.test(H)){var se=process.pid;i[H]=function(){var ne=e.format.apply(e,arguments);console.error("%s %d: %s",H,se,ne)}}else i[H]=function(){};return i[H]};function a(H,se){var ne={seen:[],stylize:u};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),v(se)?ne.showHidden=se:se&&e._extend(ne,se),T(ne.showHidden)&&(ne.showHidden=!1),T(ne.depth)&&(ne.depth=2),T(ne.colors)&&(ne.colors=!1),T(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=l),c(ne,H,ne.depth)}e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(H,se){var ne=a.styles[se];return ne?"\x1B["+a.colors[ne][0]+"m"+H+"\x1B["+a.colors[ne][1]+"m":H}function u(H,se){return H}function f(H){var se={};return H.forEach(function(ne,ge){se[ne]=!0}),se}function c(H,se,ne){if(H.customInspect&&se&&S(se.inspect)&&se.inspect!==e.inspect&&!(se.constructor&&se.constructor.prototype===se)){var ge=se.inspect(ne,H);return C(ge)||(ge=c(H,ge,ne)),ge}var we=d(H,se);if(we)return we;var $e=Object.keys(se),ve=f($e);if(H.showHidden&&($e=Object.getOwnPropertyNames(se)),P(se)&&($e.indexOf("message")>=0||$e.indexOf("description")>=0))return p(se);if($e.length===0){if(S(se)){var Ee=se.name?": "+se.name:"";return H.stylize("[Function"+Ee+"]","special")}if(R(se))return H.stylize(RegExp.prototype.toString.call(se),"regexp");if(B(se))return H.stylize(Date.prototype.toString.call(se),"date");if(P(se))return p(se)}var Ve="",Ue=!1,ft=["{","}"];if(y(se)&&(Ue=!0,ft=["[","]"]),S(se)){var ht=se.name?": "+se.name:"";Ve=" [Function"+ht+"]"}if(R(se)&&(Ve=" "+RegExp.prototype.toString.call(se)),B(se)&&(Ve=" "+Date.prototype.toUTCString.call(se)),P(se)&&(Ve=" "+p(se)),$e.length===0&&(!Ue||se.length==0))return ft[0]+Ve+ft[1];if(ne<0)return R(se)?H.stylize(RegExp.prototype.toString.call(se),"regexp"):H.stylize("[Object]","special");H.seen.push(se);var zt;return Ue?zt=h(H,se,ne,ve,$e):zt=$e.map(function($t){return g(H,se,ne,ve,$t,Ue)}),H.seen.pop(),m(zt,Ve,ft)}function d(H,se){if(T(se))return H.stylize("undefined","undefined");if(C(se)){var ne="'"+JSON.stringify(se).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(ne,"string")}if(E(se))return H.stylize(""+se,"number");if(v(se))return H.stylize(""+se,"boolean");if(x(se))return H.stylize("null","null")}function p(H){return"["+Error.prototype.toString.call(H)+"]"}function h(H,se,ne,ge,we){for(var $e=[],ve=0,Ee=se.length;ve<Ee;++ve)q(se,String(ve))?$e.push(g(H,se,ne,ge,String(ve),!0)):$e.push("");return we.forEach(function(Ve){Ve.match(/^\d+$/)||$e.push(g(H,se,ne,ge,Ve,!0))}),$e}function g(H,se,ne,ge,we,$e){var ve,Ee,Ve;if(Ve=Object.getOwnPropertyDescriptor(se,we)||{value:se[we]},Ve.get?Ve.set?Ee=H.stylize("[Getter/Setter]","special"):Ee=H.stylize("[Getter]","special"):Ve.set&&(Ee=H.stylize("[Setter]","special")),q(ge,we)||(ve="["+we+"]"),Ee||(H.seen.indexOf(Ve.value)<0?(x(ne)?Ee=c(H,Ve.value,null):Ee=c(H,Ve.value,ne-1),Ee.indexOf(`
`)>-1&&($e?Ee=Ee.split(`
`).map(function(Ue){return"  "+Ue}).join(`
`).slice(2):Ee=`
`+Ee.split(`
`).map(function(Ue){return"   "+Ue}).join(`
`))):Ee=H.stylize("[Circular]","special")),T(ve)){if($e&&we.match(/^\d+$/))return Ee;ve=JSON.stringify(""+we),ve.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ve=ve.slice(1,-1),ve=H.stylize(ve,"name")):(ve=ve.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ve=H.stylize(ve,"string"))}return ve+": "+Ee}function m(H,se,ne){var ge=H.reduce(function(we,$e){return $e.indexOf(`
`)>=0,we+$e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ge>60?ne[0]+(se===""?"":se+`
 `)+" "+H.join(`,
  `)+" "+ne[1]:ne[0]+se+" "+H.join(", ")+" "+ne[1]}e.types=DNt();function y(H){return Array.isArray(H)}e.isArray=y;function v(H){return typeof H=="boolean"}e.isBoolean=v;function x(H){return H===null}e.isNull=x;function _(H){return H==null}e.isNullOrUndefined=_;function E(H){return typeof H=="number"}e.isNumber=E;function C(H){return typeof H=="string"}e.isString=C;function w(H){return typeof H=="symbol"}e.isSymbol=w;function T(H){return H===void 0}e.isUndefined=T;function R(H){return L(H)&&D(H)==="[object RegExp]"}e.isRegExp=R,e.types.isRegExp=R;function L(H){return typeof H=="object"&&H!==null}e.isObject=L;function B(H){return L(H)&&D(H)==="[object Date]"}e.isDate=B,e.types.isDate=B;function P(H){return L(H)&&(D(H)==="[object Error]"||H instanceof Error)}e.isError=P,e.types.isNativeError=P;function S(H){return typeof H=="function"}e.isFunction=S;function k(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}e.isPrimitive=k,e.isBuffer=LNt();function D(H){return Object.prototype.toString.call(H)}function O(H){return H<10?"0"+H.toString(10):H.toString(10)}var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var H=new Date,se=[O(H.getHours()),O(H.getMinutes()),O(H.getSeconds())].join(":");return[H.getDate(),N[H.getMonth()],se].join(" ")}e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=RNt(),e._extend=function(H,se){if(!se||!L(se))return H;for(var ne=Object.keys(se),ge=ne.length;ge--;)H[ne[ge]]=se[ne[ge]];return H};function q(H,se){return Object.prototype.hasOwnProperty.call(H,se)}var W=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(se){if(typeof se!="function")throw new TypeError('The "original" argument must be of type Function');if(W&&se[W]){var ne=se[W];if(typeof ne!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ne,W,{value:ne,enumerable:!1,writable:!1,configurable:!0}),ne}function ne(){for(var ge,we,$e=new Promise(function(Ve,Ue){ge=Ve,we=Ue}),ve=[],Ee=0;Ee<arguments.length;Ee++)ve.push(arguments[Ee]);ve.push(function(Ve,Ue){Ve?we(Ve):ge(Ue)});try{se.apply(this,ve)}catch(Ve){we(Ve)}return $e}return Object.setPrototypeOf(ne,Object.getPrototypeOf(se)),W&&Object.defineProperty(ne,W,{value:ne,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ne,n(se))},e.promisify.custom=W;function Q(H,se){if(!H){var ne=new Error("Promise was rejected with a falsy value");ne.reason=H,H=ne}return se(H)}function ee(H){if(typeof H!="function")throw new TypeError('The "original" argument must be of type Function');function se(){for(var ne=[],ge=0;ge<arguments.length;ge++)ne.push(arguments[ge]);var we=ne.pop();if(typeof we!="function")throw new TypeError("The last argument must be of type Function");var $e=this,ve=function(){return we.apply($e,arguments)};H.apply(this,ne).then(function(Ee){process.nextTick(ve.bind(null,null,Ee))},function(Ee){process.nextTick(Q.bind(null,Ee,ve))})}return Object.setPrototypeOf(se,Object.getPrototypeOf(H)),Object.defineProperties(se,n(H)),se}e.callbackify=ee}(vO)),vO}var B3e;function FNt(){return B3e||(B3e=1,Ck.TextEncoder=typeof TextEncoder<"u"?TextEncoder:P3e().TextEncoder,Ck.TextDecoder=typeof TextDecoder<"u"?TextDecoder:P3e().TextDecoder),Ck}var p4,z3e;function Nj(){if(z3e)return p4;z3e=1;const{TextEncoder:e,TextDecoder:t}=FNt(),n=new t,r=a=>n.decode(a),i=new e,o=a=>i.encode(a);function s(a,l){const u=new Uint8Array(l);let f=0;for(const c of a)u.set(c,f),f+=c.length;return u}return p4={decodeText:r,encodeText:o,concat:s},p4}var g4,U3e;function $Nt(){if(U3e)return g4;U3e=1;const{encodeText:e}=Nj();class t{constructor(r,i,o,s){this.name=r,this.code=i,this.codeBuf=e(this.code),this.alphabet=s,this.codec=o(s)}encode(r){return this.codec.encode(r)}decode(r){for(const i of r)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${r}'`);return this.codec.decode(r)}}return g4=t,g4}var m4,j3e;function MNt(){if(j3e)return m4;j3e=1;const e=(r,i,o)=>{const s={};for(let d=0;d<i.length;++d)s[i[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*o/8|0);let u=0,f=0,c=0;for(let d=0;d<a;++d){const p=s[r[d]];if(p===void 0)throw new SyntaxError("Invalid character "+r[d]);f=f<<o|p,u+=o,u>=8&&(u-=8,l[c++]=255&f>>u)}if(u>=o||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return l},t=(r,i,o)=>{const s=i[i.length-1]==="=",a=(1<<o)-1;let l="",u=0,f=0;for(let c=0;c<r.length;++c)for(f=f<<8|r[c],u+=8;u>o;)u-=o,l+=i[a&f>>u];if(u&&(l+=i[a&f<<o-u]),s)for(;l.length*o&7;)l+="=";return l};return m4={rfc4648:r=>i=>({encode(o){return t(o,i,r)},decode(o){return e(o,i,r)}})},m4}var v4,H3e;function ONt(){if(H3e)return v4;H3e=1;const e=K8t(),t=$Nt(),{rfc4648:n}=MNt(),{decodeText:r,encodeText:i}=Nj(),s=[["identity","\0",()=>({encode:r,decode:i}),""],["base2","0",n(1),"01"],["base8","7",n(3),"01234567"],["base10","9",e,"0123456789"],["base16","f",n(4),"0123456789abcdef"],["base16upper","F",n(4),"0123456789ABCDEF"],["base32hex","v",n(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",n(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",n(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",n(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",n(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",e,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",e,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=s.reduce((u,f)=>(u[f[0]]=new t(f[0],f[1],f[2],f[3]),u),{}),l=s.reduce((u,f)=>(u[f[1]]=a[f[0]],u),{});return v4={names:a,codes:l},v4}var q3e;function INt(){return q3e||(q3e=1,function(e,t){const n=ONt(),{encodeText:r,decodeText:i,concat:o}=Nj();function s(p,h){if(!h)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:m}=c(p);return f(g,h),o([m,h],m.length+h.length)}function a(p,h){const g=c(p),m=r(g.encode(h));return o([g.codeBuf,m],g.codeBuf.length+m.length)}function l(p){p instanceof Uint8Array&&(p=i(p));const h=p[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(h)&&(p=p.toLowerCase()),c(p[0]).decode(p.substring(1))}function u(p){if(p instanceof Uint8Array&&(p=i(p)),Object.prototype.toString.call(p)!=="[object String]")return!1;try{return c(p[0]).name}catch{return!1}}function f(p,h){c(p).decode(i(h))}function c(p){if(Object.prototype.hasOwnProperty.call(n.names,p))return n.names[p];if(Object.prototype.hasOwnProperty.call(n.codes,p))return n.codes[p];throw new Error(`Unsupported encoding: ${p}`)}function d(p){return p instanceof Uint8Array&&(p=i(p)),c(p[0])}t=e.exports=s,t.encode=a,t.decode=l,t.isEncoded=u,t.encoding=c,t.encodingFromData=d,t.names=Object.freeze(n.names),t.codes=Object.freeze(n.codes)}(Ak,Ak.exports)),Ak.exports}var y4,G3e;function NNt(){if(G3e)return y4;G3e=1,y4=r;var e=128,t=-128,n=Math.pow(2,31);function r(i,o,s){if(Number.MAX_SAFE_INTEGER&&i>Number.MAX_SAFE_INTEGER)throw r.bytes=0,new RangeError("Could not encode varint");o=o||[],s=s||0;for(var a=s;i>=n;)o[s++]=i&255|e,i/=128;for(;i&t;)o[s++]=i&255|e,i>>>=7;return o[s]=i|0,r.bytes=s-a+1,o}return y4}var b4,W3e;function PNt(){if(W3e)return b4;W3e=1,b4=n;var e=128,t=127;function n(r,s){var o=0,s=s||0,a=0,l=s,u,f=r.length;do{if(l>=f||a>49)throw n.bytes=0,new RangeError("Could not decode varint");u=r[l++],o+=a<28?(u&t)<<a:(u&t)*Math.pow(2,a),a+=7}while(u>=e);return n.bytes=l-s,o}return b4}var x4,V3e;function BNt(){if(V3e)return x4;V3e=1;var e=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),i=Math.pow(2,35),o=Math.pow(2,42),s=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return x4=function(u){return u<e?1:u<t?2:u<n?3:u<r?4:u<i?5:u<o?6:u<s?7:u<a?8:u<l?9:10},x4}var w4,Y3e;function zNt(){return Y3e||(Y3e=1,w4={encode:NNt(),decode:PNt(),encodingLength:BNt()}),w4}var _4,X3e;function UNt(){return X3e||(X3e=1,_4={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),_4}function jNt(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var g=0,m=0,y=0,v=h.length;y!==v&&h[y]===0;)y++,g++;for(var x=(v-y)*f+1>>>0,_=new Uint8Array(x);y!==v;){for(var E=h[y],C=0,w=x-1;(E!==0||C<m)&&w!==-1;w--,C++)E+=256*_[w]>>>0,_[w]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=C,y++}for(var T=x-m;T!==x&&_[T]===0;)T++;for(var R=l.repeat(g);T<x;++T)R+=e.charAt(_[T]);return R}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var g=0;if(h[g]!==" "){for(var m=0,y=0;h[g]===l;)m++,g++;for(var v=(h.length-g)*u+1>>>0,x=new Uint8Array(v);h[g];){var _=n[h.charCodeAt(g)];if(_===255)return;for(var E=0,C=v-1;(_!==0||E<y)&&C!==-1;C--,E++)_+=a*x[C]>>>0,x[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=E,g++}if(h[g]!==" "){for(var w=v-y;w!==v&&x[w]===0;)w++;for(var T=new Uint8Array(m+(v-w)),R=m;w!==v;)T[R++]=x[w++];return T}}}function p(h){var g=d(h);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:c,decodeUnsafe:d,decode:p}}var HNt=jNt,qNt=HNt;const cze=new Uint8Array(0),GNt=e=>e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),""),WNt=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map(n=>parseInt(n,16))):cze},fze=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},_y=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},VNt=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),dze=e=>new TextEncoder().encode(e),hze=e=>new TextDecoder().decode(e),YNt=Object.freeze(Object.defineProperty({__proto__:null,coerce:_y,empty:cze,equals:fze,fromHex:WNt,fromString:dze,isBinary:VNt,toHex:GNt,toString:hze},Symbol.toStringTag,{value:"Module"}));class XNt{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class KNt{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return pze(this,t)}}class ZNt{constructor(t){this.decoders=t}or(t){return pze(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pze=(e,t)=>new ZNt({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class QNt{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new XNt(t,n,r),this.decoder=new KNt(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const b$=({name:e,prefix:t,encode:n,decode:r})=>new QNt(e,t,n,r),RC=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=qNt(n,t);return b$({prefix:e,name:t,encode:r,decode:o=>_y(i(o))})},JNt=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let a=0,l=0,u=0;for(let f=0;f<o;++f){const c=i[e[f]];if(c===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|c,a+=n,a>=8&&(a-=8,s[u++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return s},ePt=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],s+=8;s>n;)s-=n,o+=t[i&a>>s];if(s&&(o+=t[i&a<<n-s]),r)for(;o.length*n&7;)o+="=";return o},al=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>b$({prefix:t,name:e,encode(i){return ePt(i,r,n)},decode(i){return JNt(i,r,n,e)}}),tPt=b$({prefix:"\0",name:"identity",encode:e=>hze(e),decode:e=>dze(e)}),nPt=Object.freeze(Object.defineProperty({__proto__:null,identity:tPt},Symbol.toStringTag,{value:"Module"})),rPt=al({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iPt=Object.freeze(Object.defineProperty({__proto__:null,base2:rPt},Symbol.toStringTag,{value:"Module"})),oPt=al({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sPt=Object.freeze(Object.defineProperty({__proto__:null,base8:oPt},Symbol.toStringTag,{value:"Module"})),aPt=RC({prefix:"9",name:"base10",alphabet:"0123456789"}),lPt=Object.freeze(Object.defineProperty({__proto__:null,base10:aPt},Symbol.toStringTag,{value:"Module"})),uPt=al({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cPt=al({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),fPt=Object.freeze(Object.defineProperty({__proto__:null,base16:uPt,base16upper:cPt},Symbol.toStringTag,{value:"Module"})),G_=al({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dPt=al({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hPt=al({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pPt=al({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gPt=al({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mPt=al({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vPt=al({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yPt=al({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bPt=al({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xPt=Object.freeze(Object.defineProperty({__proto__:null,base32:G_,base32hex:gPt,base32hexpad:vPt,base32hexpadupper:yPt,base32hexupper:mPt,base32pad:hPt,base32padupper:pPt,base32upper:dPt,base32z:bPt},Symbol.toStringTag,{value:"Module"})),wPt=RC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_Pt=RC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),EPt=Object.freeze(Object.defineProperty({__proto__:null,base36:wPt,base36upper:_Pt},Symbol.toStringTag,{value:"Module"})),tp=RC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),APt=RC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),CPt=Object.freeze(Object.defineProperty({__proto__:null,base58btc:tp,base58flickr:APt},Symbol.toStringTag,{value:"Module"})),SPt=al({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),kPt=al({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),TPt=al({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),DPt=al({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),LPt=Object.freeze(Object.defineProperty({__proto__:null,base64:SPt,base64pad:kPt,base64url:TPt,base64urlpad:DPt},Symbol.toStringTag,{value:"Module"})),gze=Array.from(""),RPt=gze.reduce((e,t,n)=>(e[n]=t,e),[]),FPt=gze.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function $Pt(e){return e.reduce((t,n)=>(t+=RPt[n],t),"")}function MPt(e){const t=[];for(const n of e){const r=FPt[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const OPt=b$({prefix:"",name:"base256emoji",encode:$Pt,decode:MPt}),IPt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:OPt},Symbol.toStringTag,{value:"Module"}));var NPt=mze,K3e=128,PPt=-128,BPt=Math.pow(2,31);function mze(e,t,n){t=t||[],n=n||0;for(var r=n;e>=BPt;)t[n++]=e&255|K3e,e/=128;for(;e&PPt;)t[n++]=e&255|K3e,e>>>=7;return t[n]=e|0,mze.bytes=n-r+1,t}var zPt=wN,UPt=128,Z3e=127;function wN(e,r){var n=0,r=r||0,i=0,o=r,s,a=e.length;do{if(o>=a)throw wN.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&Z3e)<<i:(s&Z3e)*Math.pow(2,i),i+=7}while(s>=UPt);return wN.bytes=o-r,n}var jPt=Math.pow(2,7),HPt=Math.pow(2,14),qPt=Math.pow(2,21),GPt=Math.pow(2,28),WPt=Math.pow(2,35),VPt=Math.pow(2,42),YPt=Math.pow(2,49),XPt=Math.pow(2,56),KPt=Math.pow(2,63),ZPt=function(e){return e<jPt?1:e<HPt?2:e<qPt?3:e<GPt?4:e<WPt?5:e<VPt?6:e<YPt?7:e<XPt?8:e<KPt?9:10},QPt={encode:NPt,decode:zPt,encodingLength:ZPt},GD=QPt;const WD=(e,t=0)=>[GD.decode(e,t),GD.decode.bytes],zE=(e,t,n=0)=>(GD.encode(e,t,n),t),UE=e=>GD.encodingLength(e),JPt=Object.freeze(Object.defineProperty({__proto__:null,decode:WD,encodeTo:zE,encodingLength:UE},Symbol.toStringTag,{value:"Module"})),jE=(e,t)=>{const n=t.byteLength,r=UE(e),i=r+UE(n),o=new Uint8Array(i+n);return zE(e,o,0),zE(n,o,r),o.set(t,i),new x$(e,n,t,o)},vze=e=>{const t=_y(e),[n,r]=WD(t),[i,o]=WD(t.subarray(r)),s=t.subarray(r+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new x$(n,i,s,t)},yze=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&fze(e.bytes,t.bytes);class x${constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const eBt=Object.freeze(Object.defineProperty({__proto__:null,Digest:x$,create:jE,decode:vze,equals:yze},Symbol.toStringTag,{value:"Module"})),Pj=({name:e,code:t,encode:n})=>new bze(e,t,n);class bze{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?jE(this.code,n):n.then(r=>jE(this.code,r))}else throw Error("Unknown type, must be binary type")}}const tBt=Object.freeze(Object.defineProperty({__proto__:null,Hasher:bze,from:Pj},Symbol.toStringTag,{value:"Module"})),xze=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),nBt=Pj({name:"sha2-256",code:18,encode:xze("SHA-256")}),rBt=Pj({name:"sha2-512",code:19,encode:xze("SHA-512")}),iBt=Object.freeze(Object.defineProperty({__proto__:null,sha256:nBt,sha512:rBt},Symbol.toStringTag,{value:"Module"})),wze=0,oBt="identity",_ze=_y,sBt=e=>jE(wze,_ze(e)),aBt={code:wze,name:oBt,encode:_ze,digest:sBt},lBt=Object.freeze(Object.defineProperty({__proto__:null,identity:aBt},Symbol.toStringTag,{value:"Module"})),uBt="raw",cBt=85,fBt=e=>_y(e),dBt=e=>_y(e),hBt=Object.freeze(Object.defineProperty({__proto__:null,code:cBt,decode:dBt,encode:fBt,name:uBt},Symbol.toStringTag,{value:"Module"})),pBt=new TextEncoder,gBt=new TextDecoder,mBt="json",vBt=512,yBt=e=>pBt.encode(JSON.stringify(e)),bBt=e=>JSON.parse(gBt.decode(e)),xBt=Object.freeze(Object.defineProperty({__proto__:null,code:vBt,decode:bBt,encode:yBt,name:mBt},Symbol.toStringTag,{value:"Module"}));class gl{constructor(t,n,r,i){this.code=n,this.version=t,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Tk,byteLength:Tk,code:kk,version:kk,multihash:kk,bytes:kk,_baseCache:Tk,asCID:Tk})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:n}=this;if(t!==I2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==ABt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return gl.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=jE(t,n);return gl.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&yze(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return _Bt(n,i,t||tp.encoder);default:return EBt(n,i,t||G_.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return SBt(/^0\.0/,kBt),!!(t&&(t[J3e]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof gl)return t;if(t!=null&&t.asCID===t){const{version:n,code:r,multihash:i,bytes:o}=t;return new gl(n,r,i,o||Q3e(n,r,i.bytes))}else if(t!=null&&t[J3e]===!0){const{version:n,multihash:r,code:i}=t,o=vze(r);return gl.create(n,i,o)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(n!==I2)throw new Error(`Version 0 CID must use dag-pb (code: ${I2}) block encoding`);return new gl(t,n,r,r.bytes)}case 1:{const i=Q3e(t,n,r.bytes);return new gl(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return gl.create(0,I2,t)}static createV1(t,n){return gl.create(1,t,n)}static decode(t){const[n,r]=gl.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=gl.inspectBytes(t),r=n.size-n.multihashSize,i=_y(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const o=i.subarray(n.multihashSize-n.digestSize),s=new x$(n.multihashCode,n.digestSize,o,i);return[n.version===0?gl.createV0(s):gl.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[c,d]=WD(t.subarray(n));return n+=d,c};let i=r(),o=I2;if(i===18?(i=0,n=0):i===1&&(o=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const s=n,a=r(),l=r(),u=n+l,f=u-s;return{version:i,codec:o,multihashCode:a,digestSize:l,multihashSize:f,size:u}}static parse(t,n){const[r,i]=wBt(t,n),o=gl.decode(i);return o._baseCache.set(r,t),o}}const wBt=(e,t)=>{switch(e[0]){case"Q":{const n=t||tp;return[tp.prefix,n.decode(`${tp.prefix}${e}`)]}case tp.prefix:{const n=t||tp;return[tp.prefix,n.decode(e)]}case G_.prefix:{const n=t||G_;return[G_.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},_Bt=(e,t,n)=>{const{prefix:r}=n;if(r!==tp.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=t.get(r);if(i==null){const o=n.encode(e).slice(1);return t.set(r,o),o}else return i},EBt=(e,t,n)=>{const{prefix:r}=n,i=t.get(r);if(i==null){const o=n.encode(e);return t.set(r,o),o}else return i},I2=112,ABt=18,Q3e=(e,t,n)=>{const r=UE(e),i=r+UE(t),o=new Uint8Array(i+n.byteLength);return zE(e,o,0),zE(t,o,r),o.set(n,i),o},J3e=Symbol.for("@ipld/js-cid/CID"),kk={writable:!1,configurable:!1,enumerable:!0},Tk={writable:!1,enumerable:!1,configurable:!1},CBt="0.0.0-dev",SBt=(e,t)=>{if(e.test(CBt))console.warn(t);else throw new Error(t)},kBt=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,TBt={...nPt,...iPt,...sPt,...lPt,...fPt,...xPt,...EPt,...CPt,...LPt,...IPt},DBt={...iBt,...lBt},LBt={raw:hBt,json:xBt},RBt=Object.freeze(Object.defineProperty({__proto__:null,CID:gl,bases:TBt,bytes:YNt,codecs:LBt,digest:eBt,hasher:tBt,hashes:DBt,varint:JPt},Symbol.toStringTag,{value:"Module"})),FBt=JTe(RBt);var E4,eTe;function Eze(){if(eTe)return E4;eTe=1;const{bases:e}=FBt;function t(o,s,a,l){return{name:o,prefix:s,encoder:{name:o,prefix:s,encode:a},decoder:{decode:l}}}const n=t("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),r=t("ascii","a",o=>{let s="a";for(let a=0;a<o.length;a++)s+=String.fromCharCode(o[a]);return s},o=>{o=o.substring(1);const s=new Uint8Array(o.length);for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return s});return E4={utf8:n,"utf-8":n,hex:e.base16,latin1:r,ascii:r,binary:r,...e},E4}var A4,tTe;function $Bt(){if(tTe)return A4;tTe=1;const e=Eze();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.encoder.encode(n).substring(1)}return A4=t,A4}var C4,nTe;function MBt(){if(nTe)return C4;nTe=1;const e=Eze();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.decoder.decode(`${i.prefix}${n}`)}return C4=t,C4}var S4,rTe;function OBt(){if(rTe)return S4;rTe=1;function e(t,n){n||(n=t.reduce((o,s)=>o+s.length,0));const r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.length;return r}return S4=e,S4}var k4,iTe;function IBt(){if(iTe)return k4;iTe=1;const e=INt(),t=zNt(),{names:n}=UNt(),r=$Bt(),i=MBt(),o=OBt(),s={};for(const v in n){const x=v;s[n[x]]=x}function a(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(v,"base16")}function l(v){return i(v,"base16")}function u(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(e.encode("base58btc",v)).slice(1)}function f(v){const x=v instanceof Uint8Array?r(v):v;return e.decode("z"+x)}function c(v){if(!(v instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(v.length<2)throw new Error("multihash too short. must be > 2 bytes.");const x=t.decode(v);if(!g(x))throw new Error(`multihash unknown function code: 0x${x.toString(16)}`);v=v.slice(t.decode.bytes);const _=t.decode(v);if(_<0)throw new Error(`multihash invalid length: ${_}`);if(v=v.slice(t.decode.bytes),v.length!==_)throw new Error(`multihash length inconsistent: 0x${r(v,"base16")}`);return{code:x,name:s[x],length:_,digest:v}}function d(v,x,_){if(!v||x===void 0)throw new Error("multihash encode requires at least two args: digest, code");const E=p(x);if(!(v instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(_==null&&(_=v.length),_&&v.length!==_)throw new Error("digest length should be equal to specified length.");const C=t.encode(E),w=t.encode(_);return o([C,w,v],C.length+w.length+v.length)}function p(v){let x=v;if(typeof v=="string"){if(n[v]===void 0)throw new Error(`Unrecognized hash function named: ${v}`);x=n[v]}if(typeof x!="number")throw new Error(`Hash function code should be a number. Got: ${x}`);if(s[x]===void 0&&!h(x))throw new Error(`Unrecognized function code: ${x}`);return x}function h(v){return v>0&&v<16}function g(v){return!!(h(v)||s[v])}function m(v){c(v)}function y(v){return m(v),v.subarray(0,2)}return k4={names:n,codes:Object.freeze(s),toHexString:a,fromHexString:l,toB58String:u,fromB58String:f,decode:c,encode:d,coerceCode:p,isAppCode:h,validate:m,prefix:y,isValidCode:g},k4}var T4,oTe;function Bj(){if(oTe)return T4;oTe=1;const e=kC(),t=Ux(),n={array(r,i=!1,o=""){return e.toList(r,i,s=>n.format(s,o))},object(r){return e.toObject(r,i=>n.format(i))},null(r=null){return r===null&&(r=e.t("n/a")),e.toNothing(r)},number(r,i=""){return typeof r!="number"&&(r=parseFloat(r)),e.unit(t.numberFormatter.format(r),i)},string(r,i=""){return e.unit(e.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),i)},boolean(r){return r?"":""},format(r,i=""){return typeof r=="boolean"?n.boolean(r):typeof r=="number"?n.number(r,i):typeof r=="string"?n.string(r,i):Array.isArray(r)?n.array(r,i):e.isObject(r)?n.object(r):n.null()}};return T4=n,T4}const NBt="Afar",PBt="Abkhazian",BBt="Afrikaans",zBt="Akan",UBt="Amharic",jBt="Aragonese",HBt="Arabic",qBt="Assamese",GBt="Avar",WBt="Aymara",VBt="Azerbaijani",YBt="Bashkir",XBt="Belarusian",KBt="Bulgarian",ZBt="Bihari",QBt="Bislama",JBt="Bambara",e9t="Bengali",t9t="Tibetan",n9t="Breton",r9t="Bosnian",i9t="Catalan",o9t="Chechen",s9t="Chamorro",a9t="Corsican",l9t="Cree",u9t="Czech",c9t="Old Bulgarian",f9t="Chuvash",d9t="Welsh",h9t="Danish",p9t="German",g9t="Divehi",m9t="Dzongkha",v9t="Ewe",y9t="Greek",b9t="English",x9t="Esperanto",w9t="Spanish",_9t="Estonian",E9t="Basque",A9t="Persian",C9t="Peul",S9t="Finnish",k9t="Fijian",T9t="Faroese",D9t="French",L9t="West Frisian",R9t="Irish",F9t="Scottish Gaelic",$9t="Galician",M9t="Guarani",O9t="Gujarati",I9t="Manx",N9t="Hausa",P9t="Hebrew",B9t="Hindi",z9t="Hiri Motu",U9t="Croatian",j9t="Haitian",H9t="Hungarian",q9t="Armenian",G9t="Herero",W9t="Interlingua",V9t="Indonesian",Y9t="Interlingue",X9t="Igbo",K9t="Sichuan Yi",Z9t="Inupiak",Q9t="Ido",J9t="Icelandic",ezt="Italian",tzt="Inuktitut",nzt="Japanese",rzt="Javanese",izt="Georgian",ozt="Kongo",szt="Kikuyu",azt="Kuanyama",lzt="Kazakh",uzt="Greenlandic",czt="Cambodian",fzt="Kannada",dzt="Korean",hzt="Kanuri",pzt="Kashmiri",gzt="Kurdish",mzt="Komi",vzt="Cornish",yzt="Kirghiz",bzt="Latin",xzt="Luxembourgish",wzt="Ganda",_zt="Limburgian",Ezt="Lingala",Azt="Laotian",Czt="Lithuanian",Szt="Latvian",kzt="Malagasy",Tzt="Marshallese",Dzt="Maori",Lzt="Macedonian",Rzt="Malayalam",Fzt="Mongolian",$zt="Moldovan",Mzt="Marathi",Ozt="Malay",Izt="Maltese",Nzt="Burmese",Pzt="Nauruan",Bzt="North Ndebele",zzt="Nepali",Uzt="Ndonga",jzt="Dutch",Hzt="Norwegian Nynorsk",qzt="Norwegian",Gzt="South Ndebele",Wzt="Navajo",Vzt="Chichewa",Yzt="Occitan",Xzt="Ojibwa",Kzt="Oromo",Zzt="Oriya",Qzt="Ossetian",Jzt="Punjabi",e7t="Pali",t7t="Polish",n7t="Pashto",r7t="Portuguese",i7t="Quechua",o7t="Raeto Romance",s7t="Kirundi",a7t="Romanian",l7t="Russian",u7t="Rwandi",c7t="Sanskrit",f7t="Sardinian",d7t="Sindhi",h7t="Sango",p7t="Serbo-Croatian",g7t="Sinhalese",m7t="Slovak",v7t="Slovenian",y7t="Samoan",b7t="Shona",x7t="Somalia",w7t="Albanian",_7t="Serbian",E7t="Swati",A7t="Southern Sotho",C7t="Sundanese",S7t="Swedish",k7t="Swahili",T7t="Tamil",D7t="Telugu",L7t="Tajik",R7t="Thai",F7t="Tigrinya",$7t="Turkmen",M7t="Tagalog",O7t="Tswana",I7t="Tonga",N7t="Turkish",P7t="Tsonga",B7t="Tatar",z7t="Twi",U7t="Tahitian",j7t="Uyghur",H7t="Ukrainian",q7t="Urdu",G7t="Venda",W7t="Vietnamese",V7t="Volapk",Y7t="Walloon",X7t="Wolof",K7t="Xhosa",Z7t="Yiddish",Q7t="Yoruba",J7t="Zhuang",eUt="Chinese",tUt="Zulu",nUt={aa:NBt,ab:PBt,af:BBt,ak:zBt,am:UBt,an:jBt,ar:HBt,as:qBt,av:GBt,ay:WBt,az:VBt,ba:YBt,be:XBt,bg:KBt,bh:ZBt,bi:QBt,bm:JBt,bn:e9t,bo:t9t,br:n9t,bs:r9t,ca:i9t,ce:o9t,ch:s9t,co:a9t,cr:l9t,cs:u9t,cu:c9t,cv:f9t,cy:d9t,da:h9t,de:p9t,dv:g9t,dz:m9t,ee:v9t,el:y9t,en:b9t,eo:x9t,es:w9t,et:_9t,eu:E9t,fa:A9t,ff:C9t,fi:S9t,fj:k9t,fo:T9t,fr:D9t,fy:L9t,ga:R9t,gd:F9t,gl:$9t,gn:M9t,gu:O9t,gv:I9t,ha:N9t,he:P9t,hi:B9t,ho:z9t,hr:U9t,ht:j9t,hu:H9t,hy:q9t,hz:G9t,ia:W9t,id:V9t,ie:Y9t,ig:X9t,ii:K9t,ik:Z9t,io:Q9t,is:J9t,it:ezt,iu:tzt,ja:nzt,jv:rzt,ka:izt,kg:ozt,ki:szt,kj:azt,kk:lzt,kl:uzt,km:czt,kn:fzt,ko:dzt,kr:hzt,ks:pzt,ku:gzt,kv:mzt,kw:vzt,ky:yzt,la:bzt,lb:xzt,lg:wzt,li:_zt,ln:Ezt,lo:Azt,lt:Czt,lv:Szt,mg:kzt,mh:Tzt,mi:Dzt,mk:Lzt,ml:Rzt,mn:Fzt,mo:$zt,mr:Mzt,ms:Ozt,mt:Izt,my:Nzt,na:Pzt,nd:Bzt,ne:zzt,ng:Uzt,nl:jzt,nn:Hzt,no:qzt,nr:Gzt,nv:Wzt,ny:Vzt,oc:Yzt,oj:Xzt,om:Kzt,or:Zzt,os:Qzt,pa:Jzt,pi:e7t,pl:t7t,ps:n7t,pt:r7t,qu:i7t,rm:o7t,rn:s7t,ro:a7t,ru:l7t,rw:u7t,sa:c7t,sc:f7t,sd:d7t,sg:h7t,sh:p7t,si:g7t,sk:m7t,sl:v7t,sm:y7t,sn:b7t,so:x7t,sq:w7t,sr:_7t,ss:E7t,st:A7t,su:C7t,sv:S7t,sw:k7t,ta:T7t,te:D7t,tg:L7t,th:R7t,ti:F7t,tk:$7t,tl:M7t,tn:O7t,to:I7t,tr:N7t,ts:P7t,tt:B7t,tw:z7t,ty:U7t,ug:j7t,uk:H7t,ur:q7t,ve:G7t,vi:W7t,vo:V7t,wa:Y7t,wo:X7t,xh:K7t,yi:Z7t,yo:Q7t,za:J7t,zh:eUt,zu:tUt};var D4,sTe;function Aze(){if(sTe)return D4;sTe=1;const e=kC(),t=Bj(),n=Ux(),r=Fj(),i={allowHtmlInCommonMark:!1,formatUrl(o,s,a={},l=null,u=null){let f=e.isObject(u)&&typeof u=="string"?u.title:o;return e.toLink(o,f,u.rel||"")},formatLink(o){return e.toList(o,!1,s=>e.toLink(s.href,s.title,s.rel))},formatMediaType(o,s,a={}){return e.e(e.t(i._formatMediaType(o,s,a)))},_formatMediaType(o,s,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":e.e(o);let f;try{f=u.parse(o)}catch(c){return console.warn(c),l?"":e.e(o)}switch(f.type){case"image/tiff":return f.parameters.application==="geotiff"?f.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB 2";case"application/grib":return`GRIB ${f.parameters.edition||""}`.trim();case"application/bufr":return`BUFR ${f.parameters.edition||""}`.trim();case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";case"application/x-filegdb":return l?"Geodatabase":"Esri File Geodatabase";case"application/vnd.nitf":return l?"NITF":"National Imagery Transmission Format";case"application/3dtiles+json":return"3D Tiles";default:{let[c,d]=f.type.split("/");if(d=e.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(c){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return o}}}},formatTimestamp(o){if(typeof o=="string")try{return n.dateTimeFormatter.format(new Date(o))}catch{}return t.null()},formatPercent0to1(o,s,a={}){return t.number(o*100,a.unit)},formatDate(o){if(typeof o=="string")try{return n.dateFormatter.format(new Date(o))}catch{}return t.null()},formatDuration(o){if(typeof o=="string"){const s=r.getDependency("@musement/iso-duration");if(!s)return e.e(o);const{isoDuration:a,en:l}=s;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(o).humanize("en");return u.length===0?e.e(e.t("none")):e.e(u)}return t.null()},formatLanguageCode(o){if(Array.isArray(o))return e.toList(o,!0,i.formatLanguageCode,!1);if(typeof o!="string"||o.length<2)return t.null();const s=nUt,[a,...l]=o.split("-");if(a in s){const u=s[a];return l.length>0?e.e(e.t(`${u} (${l.join(" ")})`)):e.e(e.t(u))}return e.e(e.t(o))},formatLicense(o,s,a={},l=null){if(typeof o!="string"||o.length===0)return t.null();if(o!=="other"&&o!=="proprietary"&&o!=="various"&&o.match(/^[\w\.\-]+$/i))return e.toLink(`https://spdx.org/licenses/${o}.html`,o,"license");let u=Array.isArray(l.links)?l.links.filter(f=>e.isObject(f)&&typeof f.href=="string"&&f.rel==="license"):[];return u.length>0?e.toList(u,!1,f=>e.toLink(f.href,f.title||o,"license")):t.string(o)},formatProviders(o){return e.toList(o,!1,s=>{let a=s.name,l="",u="";return typeof s.url=="string"&&s.url.length>0&&(a=e.toLink(s.url,a)),Array.isArray(s.roles)&&s.roles.length>0&&(l=s.roles.map(f=>t.format(f)).join(", "),l=` (<em>${l}</em>)`),typeof s.description=="string"&&s.description.length>0&&(u=i.formatCommonMark(s.description)),`${a}${l}${u}`})},formatCommonMark(o){if(typeof o!="string"||o.length===0)return t.null();const s=r.getDependency("commonmark");let a;if(s){let l=new s.Parser;a=new s.HtmlRenderer({safe:!i.allowHtmlInCommonMark,smart:!0}).render(l.parse(o))}else i.allowHtmlInCommonMark?a=o:a=e.e(o);return`<div class="description">${a}</div>`},formatSoftware(o){if(!e.isObject(o))return t.null();let s=[];for(let a in o){let l=o[a];typeof l=="string"&&l.length>0||typeof l=="number"?s.push(`${a} (${l})`):s.push(a)}return e.toList(s,!0,null,!1)},formatDOI(o){return o=t.format(o),e.toLink(`http://doi.org/${o}`,o)},formatCRS(o){return e.toList(o,!1,s=>{if(typeof s=="string"){let a=s.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return e.toLink(s,a)}return t.format(s)})},formatCrsCode(o){if(typeof o=="string"){const[s,a]=o.split(":",2);switch(s.toUpperCase()){case"EPSG":case"ESRI":case"IAU_2015":case"IGNF":case"MKG":case"OGC":return e.toLink(`https://spatialreference.org/ref/${s.toLowerCase()}/${a}/`,o);default:return t.string(o)}}return t.null()},formatEPSG(o){return typeof o=="number"?i.formatCrsCode(`EPSG:${o}`):typeof o=="string"?i.formatCrsCode(o):t.null()},formatExtent(o,s,a={}){return!Array.isArray(o)||o.length<2?t.null():o[0]===o[1]?t.format(o[0],a.unit):o[0]===null?`< ${t.format(o[1],a.unit)}`:o[1]===null?`> ${t.format(o[0],a.unit)}`:o.map(l=>t.format(l,a.unit)).join("  ")},formatHexColor(o){return typeof o!="string"||!o.match(/^#?[\dA-F]{3,8}$/i)?t.null():(o.startsWith("#")&&(o=o.substring(1)),`<div class="color" style="background-color: #${o}"><code class="color-code">#${o}</code></div>`)},formatPROJJSON(o){return e.isObject(o)?e.isObject(o.id)&&o.id.authority==="EPSG"&&typeof o.code=="number"&&o.code>0?"EPSG "+i.formatEPSG(o):typeof o.name=="string"?t.string(o.name):t.object(o):t.null()},formatTemporalExtent(o,s,a={}){if(!Array.isArray(o)||o.length!==2)return t.null();o=o.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=o;if(l||u){const f=a.shorten?n.dateFormatter:n.dateTimeFormatter;return l?u?f.formatRange(l,u):e.t("{0} until present",[f.format(l)]):e.t("Until {0}",[f.format(u)])}}catch{}return t.null()},formatTemporalExtents(o,s,a={}){let l=(u,f)=>u[0]===null?-1:n.collator.compare(u[0],f[0]);return e.toList(o,l,u=>i.formatTemporalExtent(u,s,a))},formatWKT2(o){if(typeof o!="string")return t.null();let s=-1,a;try{a=o.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(s--,l):(s++,`
${"  ".repeat(s)}${u}[`))}catch{a=o}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(o){if(typeof o!="number")return t.format(o);var s=o==0?0:Math.floor(Math.log(o)/Math.log(1024));return e.unit((o/Math.pow(1024,s)).toFixed(2)*1,i.fileSizeUnits[s])},formatChecksum(o){if(typeof o!="string")return t.null();const s=r.getDependency("multihashes");if(!s)return e.e(o);try{const a=s.decode(e.hexToUint8(o)),l=e.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${e.e(e.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${e.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return t.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(o){return o==="other"?e.t("non-standard"):typeof o=="string"&&o in i.fileDataTypes?e.abbrev(e.t(o),e.t(i.fileDataTypes[o])):t.null()},formatTransform(o){if(Array.isArray(o)&&o.length%3===0){let s=[];for(let a=0;a<o.length;a=a+3){let l=o.slice(a,a+3);s.push(`[${i.formatCSV(l)}]`)}return s.join("<br>")}else return i.formatCSV(o)},formatShape(o,s,a={}){return Array.isArray(o)?o.map(l=>t.format(l,a.unit)).join("  "):t.format(o,a.unit)},formatCSV(o){if(Array.isArray(o)){let s=o.find(a=>typeof a=="number")!==void 0;return o.map(t.format).join(s?"; ":", ")}else return t.format(o)},formatImage(o,s){let a="",l=null;if(e.isObject(o))l=o.href,a=o.title||"";else if(typeof o=="string")l=o;else return t.format(l);return`<img src="${e.e(l)}" title="${e.e(a)}" class="${e.e(s.replace(":","_"))}">`},formatPhone(o){return e.toLink(`tel:${o}`,o)},formatEmail(o){return e.toLink(`mailto:${o}`,o)},formatConcepts(o){return e.toList(o,!1,s=>{if(!e.isObject(s))return t.format(s);let a="";if(s.title){let l=s.title;s.url&&(l=e.toLink(s.url,s.title)),a+=`<strong>${l}</strong> (<code>${e.e(s.id)}</code>)`}else{let l=s.id;s.url&&(l=e.toLink(s.url,s.id)),a+=`<strong><code>${l}</code></strong>`}return s.description&&(a+=`<br><small>${e.e(s.description)}</small>`),a})},formatAddress(o){return e.toList(o,!1,s=>{if(!e.isObject(s))return t.format(s);let a=Array.isArray(s.deliveryPoint)?s.deliveryPoint.slice(0):[];if(s.postalCode&&s.city){let l=`${s.postalCode} ${s.city}`;s.administrativeArea&&(l+=` (${s.administrativeArea})`),typeof s.country=="string"&&s.country.length>0&&(s.country.length===2&&s.country.toUpperCase()===s.country?(l=s.country+"-"+l,a.push(l)):(a.push(l),a.push(s.country.toUpperCase())))}else s.city&&a.push(s.city),s.administrativeArea&&a.push(s.administrativeArea),s.postalCode&&a.push(s.postalCode),typeof s.country=="string"&&s.country.length>0&&a.push(s.country.toUpperCase());return t.string(a.join(`

`))})},formatGridCode(o){if(typeof o!="string")return t.format(o);let s=function(f,c,d,p){let h=c.length;if(h%2===1)f.push(`Code: ${c}`);else{let g=h/2,m=c.substring(0,g);f.push(`${d}: ${m}`);let y=c.substring(g,h);f.push(`${p}: ${y}`)}},[a,l]=o.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(e.abbrev(e.t(a),e.t("Military Grid Reference System")));let[,f,c,d,p]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${e.t("UTM Zone")}: ${f}`),u.push(`${e.t("Latitude Band")}: ${c}`),u.push(`${e.t("Square Identifier")}: ${d}`),p&&s(u,p,e.t("Easting"),e.t("Northing"));break;case"MSIN":u.push(e.t("MODIS Sinusoidal Tile Grid")),s(u,l,e.t("Horizontal"),e.t("Vertical"));break;case"WRS1":case"WRS2":let h=a.substring(3,4);u.push(e.abbrev(e.t("WRS-"+h),e.t("Worldwide Reference System "+h))),s(u,l,e.t("Path"),e.t("Row"));break;case"DOQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quadrangle"))),u.push(`${e.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);u.push(`${e.t("Quadrangle")}: ${g}`);let m=l.substr(-2),y=m[0]==="N"?e.t("North"):e.t("South"),v=m[1]==="E"?e.t("East"):e.t("West");u.push(`${e.t("Quarter")}: ${y} ${v}`);break;case"MXRA":u.push(e.t("Maxar ARD Tile Grid"));let[x,_]=l.split(/-(.*)/);x.startsWith("Z")&&(x=x.substring(1)),u.push(`${e.t("UTM Zone")}: ${x}`),u.push(`${e.t("Quadkey")}: ${_}`);break;case"EASE":let[E,C]=l.split("-");if(E==="DGGS"){u.push(e.t("EASE-DGGS"));let[R,L,...B]=C.split(".");if(u.push(`${e.t("Level")}: ${R}`),L.length===6){u.push(`${e.t("Level 0 row cell")}: ${L.substring(0,3)}`),u.push(`${e.t("Level 0 column cell")}: ${L.substring(3,6)}`);for(let P in B){let S=B[P];S.length===2&&(u.push(`${e.t("Fraction of level {i} row cell",{i:P})}: ${S[0]}`),u.push(`${e.t("Fraction of level {i} column cell",{i:P})}: ${S[1]}`))}}break}case"CDEM":let[,w,T]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(e.t("Copernicus Digital Elevation Model Grid")),u.push(`${e.t("Easting")}: ${T}`),u.push(`${e.t("Northing")}: ${w}`);default:u.push(o)}return u.join("<br>")}};return D4=i,D4}var L4,aTe;function rUt(){if(aTe)return L4;aTe=1;const e=Fj(),t=kC(),n=Ux(),r=Bj(),i=Aze();function o(m,y,v,x,_){let E={};for(let C in y){let w;try{let T=C.split(/:(.*)/);T.length===1&&T.unshift(_);let R=T[0];if(typeof x=="function"&&!x(C,[C]))continue;w=y[C];let L=e.getSpecification(C,v);L.ext&&(R=L.ext);let B=!1;v==="summaries"&&L.listWithKeys&&Array.isArray(w)&&w.length>0&&(w=w[0],B=!0);let P=null,S=[];if(t.isObject(L.items)){let D=w;L.listWithKeys&&(D=Object.values(D));let O=[];Array.isArray(D)?O=t.keysFromListOfObjects(D):t.isObject(D)&&(O=Object.keys(D)),P={},S=L.itemOrder.filter(N=>O.includes(N)),O.forEach(N=>{typeof L.items[N]>"u"?(P[N]={label:t.formatKey(N),explain:N},S.push(N)):(P[N]=Object.assign({},L.items[N]),P[N].label=h(N,L.items[N]))})}let k;if(v==="summaries")if(!B&&t.isObject(w))if(typeof w.minimum<"u"&&typeof w.maximum<"u"){const D=O=>p(O,C,m,y,L,x,[C]);w.minimum===w.maximum?k=D(w.minimum):w.minimum===null?k=`< ${D(w.maximum)}`:w.maximum===null?k=`> ${D(w.minimum)}`:k=`${D(w.minimum)}  ${D(w.maximum)}`}else k=r.object(w);else if(e.externalRenderer&&P){let D=B?Object.assign({},w):w.slice(0);for(let O in D){let N=t.isObject(D[O])?{}:[];for(let j in P)N[j]=p(D[O][j],j,m,y,P[j]);D[O]=N}}else Array.isArray(w)?k=t.toList(w,!L.custom&&!L.items,D=>p(D,C,m,y,L)):console.warn(`Invalid summary value: ${w}`);typeof k>"u"&&(k=p(w,C,m,y,L,x,[C])),t.isObject(E[R])||(E[R]={extension:R,label:g(R),properties:{}}),E[R].properties[C]={label:h(C,L),value:w,formatted:k,items:P,itemOrder:S,spec:L}}catch(T){console.error(`Field '${C}' with value '${w}' resulted in an error`,T)}}return Object.values(E).sort((C,w)=>n.collator.compare(C.extension,w.extension))}function s(m,y,v=null,x=""){return o(y,m,"assets",v,x)}function a(m,y,v=null,x=""){return o(y,m,"links",v,x)}function l(m,y,v=null,x=""){return o(y,m,"providers",v,x)}function u(m,y=null,v=""){return o(m,m.summaries,"summaries",y,v)}function f(m,y=null,v=""){return o(m,m,"collection",y,v)}function c(m,y=null,v=""){return o(m,m,"catalog",y,v)}function d(m,y=null,v=""){return o(m,m.properties,"metadata",y,v)}function p(m,y,v=null,x=null,_=null,E=null,C=[]){if(t.isObject(_)||(_=e.getSpecification(y)),typeof _.format=="string"){let w=i[`format${_.format}`];return w||console.warn(`Formatter '${_.format}' not available.`),w(m,y,_,v,x)}else{if(typeof _.formatter=="function")return _.formatter(m,y,_,v,x);if(t.isObject(_.mapping)){let w=String(m);return typeof _.mapping[w]<"u"?m=_.mapping[w]:typeof _.mapping[w.toLowerCase()]<"u"?m=_.mapping[w.toLowerCase()]:typeof _.mapping[w.toUpperCase()]<"u"&&(m=_.mapping[w.toUpperCase()]),r.format(t.t(m),_.unit)}else{if(m===null&&_.null)return r.null(_.null);if(Array.isArray(m)){let w=(T,R)=>p(T,y,v,x,_,E,C.concat([R]));return typeof E=="function"&&C.length>0&&(m=m.filter((T,R)=>E(C[0],C.concat([R])))),e.externalRenderer&&(_.custom||_.items)?m.map(w):t.toList(m,!1,w)}else if(t.isObject(m)){let w=R=>t.isObject(_.items)?_.listWithKeys?{items:_.items,itemOrder:_.itemOrder}:_.items[R]:t.isObject(_.properties)?_.properties[R]:{},T=(R,L,B)=>p(R,L,v,B,w(L),E,C.concat([L]));if(e.externalRenderer&&(_.custom||_.items||_.properties)){let R={};for(let L in m)typeof E=="function"&&C.length>0&&!E(C[0],C.concat([L]))||(R[L]=T(m[L],L,m));return R}else{let R=B=>h(B,w(B)),L=_.listWithKeys?[]:_.itemOrder;return t.toObject(m,T,R,L,E,C)}}else return r.format(m,_.unit)}}}function h(m,y=null){if(t.isObject(y)||(y=e.getSpecification(m)),t.isObject(y)&&typeof y.label=="string"){if(typeof y.explain=="string")return y.explain.match(/^https?:\/\//i)?t.toLink(y.explain,t.t(y.label),"about"):t.abbrev(t.t(y.label),t.t(y.explain));if(typeof y.label=="string")return t.t(y.label)}return t.formatKey(m)}function g(m){return h(m,e.getExtension(m))}return L4={format:p,label:h,extension:g,formatCatalog:c,formatCollection:f,formatSummaries:u,formatItemProperties:d,formatAsset:s,formatLink:a,formatProvider:l,formatGrouped:o},L4}var R4,lTe;function iUt(){if(lTe)return R4;lTe=1;const e=Fj();return e.importFields(j6t),e.addDependency("@musement/iso-duration",W8t),e.addDependency("content-type",V8t()),e.addDependency("commonmark",X8t()),e.addDependency("multihashes",IBt()),R4={...rUt(),Fields:e.exportFields(),Registry:e,Helper:kC(),DataTypes:Bj(),Formatters:Aze(),I18N:Ux()},R4}var Cze=iUt();const F4=Fa(Cze);function oUt(e){if(e.type==="Catalog")return F4.formatCatalog(e);if(e.type==="Collection")return F4.formatCollection(e);if(e.type==="Feature")return F4.formatItemProperties(e)}async function sUt(e){const n=await(await fetch(`${e.for}?ts=${Date.now()}`)).json();e.stacInfo=oUt(n),e.dispatchEvent(new CustomEvent("loaded"))}function V0(e,t,n){return O6t(Object.entries(t.stacProperties).filter(([r])=>e==null?void 0:e.includes(r)).reverse().sort(([r],[i])=>(e==null?void 0:e.indexOf(r))>(e==null?void 0:e.indexOf(i))?1:-1),n)}const aUt=`
:host {
  --color-primary-lighter: color-mix(in srgb, var(--primary-color), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
h1 {
  margin-block-start: 0.67em;
  margin-block-end: 0.67em;
  line-height: 1.5;
}
header h1 {
  font-size: 24px;
  color: var(--primary-color);
}
header h2 {
  font-size: 22px;
  color: var(--primary-color);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#body ul {
  padding: 0;
}
section#body > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#body li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#body .value li {
  margin-bottom: 0px;    
}
section#body slot:not([name=description]) ul li {
  list-style: none;
}
section#body .colon {
  margin-right: 4px;
}
section#body .label {
  font-weight: bold;
}
section#body ul li,
section#body ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#body ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--primary-color);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a,
footer h1 {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;function lUt(e=[]){return yt`
    <section id="body" part="body">
      <ul class=${e.length===1?"single-property":Li}>
        ${cc(e,([,t])=>yt`
            <slot name=${t.label.toLowerCase()}>
              <li>
                ${xr(e.length>1,()=>yt` <span class="label"> ${t.label}</span
                      ><span class="colon">:</span>`)}
                <span class="value">
                  ${xr(t.label.toLowerCase()==="description",()=>yt`
                      <eox-stacinfo-shadow .content=${t.formatted}>
                      </eox-stacinfo-shadow>
                    `,()=>yt`${Uc(t.formatted)}`)}
                </span>
              </li>
            </slot>
          `)}
      </ul>
    </section>
  `}function uUt(e=[]){return yt`
    ${e.length>0?yt`
          <header part="header">
            <slot name="header">
              ${cc(e,([,t],n)=>xD`
              <h${Dd((n+1).toString())}>${Uc(t.formatted)}</h${Dd((n+1).toString())}>
              `)}
            </slot>
          </header>
        `:Li}
  `}function cUt(e=[]){return yt`
    <section id="tags" part="tags">
      <ul>
        ${cc(e,([,t])=>yt`<slot name=${t.label.toLowerCase()}
              ><li>
                <span class="label">${Uc(t.formatted)}</span>
              </li></slot
            >`)}
      </ul>
    </section>
  `}function fUt(e=[]){return yt`
    ${xr(e.length>0,()=>yt`
        <section id="featured" part="featured">
          ${cc(e,([,t])=>yt`
              <details>
                <summary>
                  <slot
                    name="featured-${t.label.toLowerCase()}-summary"
                    class="title"
                  >
                    ${t.label}
                    ${xr(t.length,()=>yt` <span class="count">${t.length}</span> `)}
                  </slot>
                </summary>
                <div class="featured-container">
                  <slot name="featured-${t.label.toLowerCase()}">
                    ${xr(t.label.toLowerCase()==="description",()=>yt`
                        <eox-stacinfo-shadow .content=${t.formatted}>
                        </eox-stacinfo-shadow>
                      `,()=>yt`${Uc(t.formatted)}`)}
                  </slot>
                </div>
              </details>
            `)}
        </section>
      `)}
  `}function dUt(e=[]){return yt`
    ${xr(e.length>0,()=>yt`
        <footer part="footer">
          <slot name="footer">
            ${cc(e,([t,n],r)=>xD`
                  <div class="footer-container">
                    <h${Dd((r+1).toString())}>
                      ${Uc(n.label)}
                    </h${Dd((r+1).toString())}>
                    <small>${Uc(n.formatted)}</small>
                  </div>
                  ${xr(t==="sci:citation",()=>yt`
                      <button
                        class="copy icon"
                        @click=${()=>navigator.clipboard.writeText(n.formatted)}
                      >
                        copy
                      </button>
                    `)}
                `)}
          </slot>
        </footer>
      `)}
  `}class hUt extends Pi{static get properties(){return{content:{type:String}}}constructor(){super(),this.content=null}render(){return yt`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${Uc(this.content)}</div>`}}customElements.define("eox-stacinfo-shadow",hUt);class pUt extends Pi{static get properties(){return{allowHtml:{attribute:"allow-html",type:Boolean},unstyled:{attribute:"unstyled",type:Boolean},for:{attribute:"for",type:String},header:{attribute:!1,type:Array},tags:{attribute:!1,type:Array},body:{attribute:!1,type:Array},featured:{attribute:!1,type:Array},footer:{attribute:!1,type:Array},stacInfo:{attribute:!1,state:!0,type:Array},stacProperties:{attribute:!1,state:!0,type:Array}}}constructor(){super(),this.allowHtml=!1,this.unstyled=!1,this.for="",this.header=[],this.tags=[],this.body=[],this.featured=[],this.footer=[],this.stacInfo=[],this.stacProperties=[]}updated(t){t.has("for")&&sUt(this),t.has("stacInfo")&&(Cze.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0,I6t(this))}render(){return yt`
      <style>
        :host {
          display: block;
        }
        ${!this.unstyled&&YL}
        ${!this.unstyled&&aUt}
      </style>
      <slot></slot>
      ${xr(this.stacInfo.length,()=>yt`
          <!-- Header Component-->
          ${uUt(V0(this.header,this))}
          <main>
            ${V0(this.tags,this).length+V0(this.body,this).length>0?yt`
                  <!-- Tags Component-->
                  ${cUt(V0(this.tags,this))}

                  <!-- Body Component-->
                  ${lUt(V0(this.body,this))}
                `:Li}

            <!-- Featured Component-->
            ${fUt(V0(this.featured,this,"featured"))}
          </main>

          <!-- Footer Component-->
          ${dUt(V0(this.footer,this))}
        `,()=>yt`${Li}`)}
    `}}customElements.define("eox-stacinfo",pUt);const uTe={};function gUt(e){let t=uTe[e];if(t)return t;t=uTe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function J1(e,t){typeof t!="string"&&(t=J1.defaultChars);const n=gUt(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){const a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&o+3<s){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),o+=3;continue}}if((a&240)===224&&o+6<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(u&192)===128){const f=a<<12&61440|l<<6&4032|u&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),o+=6;continue}}if((a&248)===240&&o+9<s){const l=parseInt(r.slice(o+4,o+6),16),u=parseInt(r.slice(o+7,o+9),16),f=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(u&192)===128&&(f&192)===128){let c=a<<18&1835008|l<<12&258048|u<<6&4032|f&63;c<65536||c>1114111?i+="":(c-=65536,i+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),o+=9;continue}}i+=""}return i})}J1.defaultChars=";/?:@&=+$,#";J1.componentChars="";const cTe={};function mUt(e){let t=cTe[e];if(t)return t;t=cTe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function FC(e,t,n){typeof t!="string"&&(n=t,t=FC.defaultChars),typeof n>"u"&&(n=!0);const r=mUt(t);let i="";for(let o=0,s=e.length;o<s;o++){const a=e.charCodeAt(o);if(n&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3))){i+=e.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){const l=e.charCodeAt(o+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[o])}return i}FC.defaultChars=";/?:@&=+$,-_.!~*'()#";FC.componentChars="-_.!~*'()";function zj(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function VD(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const vUt=/^([a-z0-9.+-]+:)/i,yUt=/:[0-9]*$/,bUt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xUt=["<",">",'"',"`"," ","\r",`
`,"	"],wUt=["{","}","|","\\","^","`"].concat(xUt),_Ut=["'"].concat(wUt),fTe=["%","/","?",";","#"].concat(_Ut),dTe=["/","?","#"],EUt=255,hTe=/^[+a-z0-9A-Z_-]{0,63}$/,AUt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pTe={javascript:!0,"javascript:":!0},gTe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Uj(e,t){if(e&&e instanceof VD)return e;const n=new VD;return n.parse(e,t),n}VD.prototype.parse=function(e,t){let n,r,i,o=e;if(o=o.trim(),!t&&e.split("#").length===1){const u=bUt.exec(o);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=vUt.exec(o);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(t||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&pTe[s])&&(o=o.substr(2),this.slashes=!0)),!pTe[s]&&(i||s&&!gTe[s])){let u=-1;for(let h=0;h<dTe.length;h++)r=o.indexOf(dTe[h]),r!==-1&&(u===-1||r<u)&&(u=r);let f,c;u===-1?c=o.lastIndexOf("@"):c=o.lastIndexOf("@",u),c!==-1&&(f=o.slice(0,c),o=o.slice(c+1),this.auth=f),u=-1;for(let h=0;h<fTe.length;h++)r=o.indexOf(fTe[h]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=o.length),o[u-1]===":"&&u--;const d=o.slice(0,u);o=o.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){const h=this.hostname.split(/\./);for(let g=0,m=h.length;g<m;g++){const y=h[g];if(y&&!y.match(hTe)){let v="";for(let x=0,_=y.length;x<_;x++)y.charCodeAt(x)>127?v+="x":v+=y[x];if(!v.match(hTe)){const x=h.slice(0,g),_=h.slice(g+1),E=y.match(AUt);E&&(x.push(E[1]),_.unshift(E[2])),_.length&&(o=_.join(".")+o),this.hostname=x.join(".");break}}}}this.hostname.length>EUt&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),gTe[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};VD.prototype.parseHost=function(e){let t=yUt.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const CUt=Object.freeze(Object.defineProperty({__proto__:null,decode:J1,encode:FC,format:zj,parse:Uj},Symbol.toStringTag,{value:"Module"})),Sze=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kze=/[\0-\x1F\x7F-\x9F]/,SUt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,jj=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Tze=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Dze=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,kUt=Object.freeze(Object.defineProperty({__proto__:null,Any:Sze,Cc:kze,Cf:SUt,P:jj,S:Tze,Z:Dze},Symbol.toStringTag,{value:"Module"})),TUt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),DUt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var $4;const LUt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),RUt=($4=String.fromCodePoint)!==null&&$4!==void 0?$4:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function FUt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=LUt.get(e))!==null&&t!==void 0?t:e}var Ea;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ea||(Ea={}));const $Ut=32;var em;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(em||(em={}));function _N(e){return e>=Ea.ZERO&&e<=Ea.NINE}function MUt(e){return e>=Ea.UPPER_A&&e<=Ea.UPPER_F||e>=Ea.LOWER_A&&e<=Ea.LOWER_F}function OUt(e){return e>=Ea.UPPER_A&&e<=Ea.UPPER_Z||e>=Ea.LOWER_A&&e<=Ea.LOWER_Z||_N(e)}function IUt(e){return e===Ea.EQUALS||OUt(e)}var xa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(xa||(xa={}));var zg;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(zg||(zg={}));class NUt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=xa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=zg.Strict}startEntity(t){this.decodeMode=t,this.state=xa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case xa.EntityStart:return t.charCodeAt(n)===Ea.NUM?(this.state=xa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=xa.NamedEntity,this.stateNamedEntity(t,n));case xa.NumericStart:return this.stateNumericStart(t,n);case xa.NumericDecimal:return this.stateNumericDecimal(t,n);case xa.NumericHex:return this.stateNumericHex(t,n);case xa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|$Ut)===Ea.LOWER_X?(this.state=xa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=xa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(_N(i)||MUt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(_N(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ea.SEMI)this.consumed+=1;else if(this.decodeMode===zg.Strict)return 0;return this.emitCodePoint(FUt(this.result),this.consumed),this.errors&&(t!==Ea.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&em.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=PUt(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===zg.Attribute&&(o===0||IUt(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&em.VALUE_LENGTH)>>14,o!==0){if(s===Ea.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==zg.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&em.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~em.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case xa.NamedEntity:return this.result!==0&&(this.decodeMode!==zg.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xa.NumericDecimal:return this.emitNumericEntity(0,2);case xa.NumericHex:return this.emitNumericEntity(0,3);case xa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xa.EntityStart:return 0}}}function Lze(e){let t="";const n=new NUt(e,r=>t+=RUt(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(s,a),n.startEntity(o);const u=n.write(i,a+1);if(u<0){s=a+n.end();break}s=a+u,a=u===0?s+1:s}const l=t+i.slice(s);return t="",l}}function PUt(e,t,n,r){const i=(t&em.BRANCH_LENGTH)>>7,o=t&em.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=i?-1:e[n+l]-1}let s=n,a=s+i-1;for(;s<=a;){const l=s+a>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}const BUt=Lze(TUt);Lze(DUt);function Rze(e,t=zg.Legacy){return BUt(e,t)}function zUt(e){return Object.prototype.toString.call(e)}function Hj(e){return zUt(e)==="[object String]"}const UUt=Object.prototype.hasOwnProperty;function jUt(e,t){return UUt.call(e,t)}function w$(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Fze(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function qj(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function YD(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const $ze=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,HUt=/&([a-z#][a-z0-9]{1,31});/gi,qUt=new RegExp($ze.source+"|"+HUt.source,"gi"),GUt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function WUt(e,t){if(t.charCodeAt(0)===35&&GUt.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return qj(r)?YD(r):e}const n=Rze(e);return n!==e?n:e}function VUt(e){return e.indexOf("\\")<0?e:e.replace($ze,"$1")}function ex(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(qUt,function(t,n,r){return n||WUt(t,r)})}const YUt=/[&<>"]/,XUt=/[&<>"]/g,KUt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function ZUt(e){return KUt[e]}function Rm(e){return YUt.test(e)?e.replace(XUt,ZUt):e}const QUt=/[.?*+^$[\]\\(){}|-]/g;function JUt(e){return e.replace(QUt,"\\$&")}function Ho(e){switch(e){case 9:case 32:return!0}return!1}function HE(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function qE(e){return jj.test(e)||Tze.test(e)}function GE(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function _$(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const ejt={mdurl:CUt,ucmicro:kUt},tjt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Fze,assign:w$,escapeHtml:Rm,escapeRE:JUt,fromCodePoint:YD,has:jUt,isMdAsciiPunct:GE,isPunctChar:qE,isSpace:Ho,isString:Hj,isValidEntityCode:qj,isWhiteSpace:HE,lib:ejt,normalizeReference:_$,unescapeAll:ex,unescapeMd:VUt},Symbol.toStringTag,{value:"Module"}));function njt(e,t,n){let r,i,o,s;const a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(o=e.src.charCodeAt(e.pos),o===93&&(r--,r===0)){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),o===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}function rjt(e,t,n){let r,i=t;const o={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=ex(e.slice(t+1,i)),o.ok=!0,o;if(r===92&&i+1<n){i+=2;continue}i++}return o}let s=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return t===i||s!==0||(o.str=ex(e.slice(t,i)),o.pos=i,o.ok=!0),o}function ijt(e,t,n,r){let i,o=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=n)return s;let a=e.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;t++,o++,a===40&&(a=41),s.marker=a}for(;o<n;){if(i=e.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=ex(e.slice(t,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<n&&o++,o++}return s.can_continue=!0,s.str+=ex(e.slice(t,o)),s}const ojt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:rjt,parseLinkLabel:njt,parseLinkTitle:ijt},Symbol.toStringTag,{value:"Module"})),Eh={};Eh.code_inline=function(e,t,n,r,i){const o=e[t];return"<code"+i.renderAttrs(o)+">"+Rm(o.content)+"</code>"};Eh.code_block=function(e,t,n,r,i){const o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+Rm(e[t].content)+`</code></pre>
`};Eh.fence=function(e,t,n,r,i){const o=e[t],s=o.info?ex(o.info).trim():"";let a="",l="";if(s){const f=s.split(/(\s+)/g);a=f[0],l=f.slice(2).join("")}let u;if(n.highlight?u=n.highlight(o.content,a,l)||Rm(o.content):u=Rm(o.content),u.indexOf("<pre")===0)return u+`
`;if(s){const f=o.attrIndex("class"),c=o.attrs?o.attrs.slice():[];f<0?c.push(["class",n.langPrefix+a]):(c[f]=c[f].slice(),c[f][1]+=" "+n.langPrefix+a);const d={attrs:c};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${u}</code></pre>
`};Eh.image=function(e,t,n,r,i){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)};Eh.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Eh.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Eh.text=function(e,t){return Rm(e[t].content)};Eh.html_block=function(e,t){return e[t].content};Eh.html_inline=function(e,t){return e[t].content};function jx(){this.rules=w$({},Eh)}jx.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+Rm(t.attrs[n][0])+'="'+Rm(t.attrs[n][1])+'"';return i};jx.prototype.renderToken=function(t,n,r){const i=t[n];let o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&n+1<t.length)){const a=t[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};jx.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const a=e[o].type;typeof i[a]<"u"?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t)}return r};jx.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};jx.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let o=0,s=e.length;o<s;o++){const a=e[o].type;a==="inline"?r+=this.renderInline(e[o].children,t,n):typeof i[a]<"u"?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t,n)}return r};function Uu(){this.__rules__=[],this.__cache__=null}Uu.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Uu.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Uu.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Uu.prototype.before=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Uu.prototype.after=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Uu.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Uu.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Uu.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Uu.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Uu.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function rd(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}rd.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};rd.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};rd.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};rd.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};rd.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Mze(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Mze.prototype.Token=rd;const sjt=/\r\n?|\n/g,ajt=/\0/g;function ljt(e){let t;t=e.src.replace(sjt,`
`),t=t.replace(ajt,""),e.src=t}function ujt(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function cjt(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function fjt(e){return/^<a[>\s]/i.test(e)}function djt(e){return/^<\/a\s*>/i.test(e)}function hjt(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,o=0;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(fjt(a.content)&&o>0&&o--,djt(a.content)&&o++),!(o>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const l=a.content;let u=e.md.linkify.match(l);const f=[];let c=a.level,d=0;u.length>0&&u[0].index===0&&s>0&&i[s-1].type==="text_special"&&(u=u.slice(1));for(let p=0;p<u.length;p++){const h=u[p].url,g=e.md.normalizeLink(h);if(!e.md.validateLink(g))continue;let m=u[p].text;u[p].schema?u[p].schema==="mailto:"&&!/^mailto:/i.test(m)?m=e.md.normalizeLinkText("mailto:"+m).replace(/^mailto:/,""):m=e.md.normalizeLinkText(m):m=e.md.normalizeLinkText("http://"+m).replace(/^http:\/\//,"");const y=u[p].index;if(y>d){const E=new e.Token("text","",0);E.content=l.slice(d,y),E.level=c,f.push(E)}const v=new e.Token("link_open","a",1);v.attrs=[["href",g]],v.level=c++,v.markup="linkify",v.info="auto",f.push(v);const x=new e.Token("text","",0);x.content=m,x.level=c,f.push(x);const _=new e.Token("link_close","a",-1);_.level=--c,_.markup="linkify",_.info="auto",f.push(_),d=u[p].lastIndex}if(d<l.length){const p=new e.Token("text","",0);p.content=l.slice(d),p.level=c,f.push(p)}t[n].children=i=Fze(i,s,f)}}}}const Oze=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,pjt=/\((c|tm|r)\)/i,gjt=/\((c|tm|r)\)/ig,mjt={c:"",r:"",tm:""};function vjt(e,t){return mjt[t.toLowerCase()]}function yjt(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(gjt,vjt)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function bjt(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&Oze.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function xjt(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(pjt.test(e.tokens[t].content)&&yjt(e.tokens[t].children),Oze.test(e.tokens[t].content)&&bjt(e.tokens[t].children))}const wjt=/['"]/,mTe=/['"]/g,vTe="";function Dk(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function _jt(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const o=e[i],s=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,o.type!=="text")continue;let a=o.content,l=0,u=a.length;e:for(;l<u;){mTe.lastIndex=l;const f=mTe.exec(a);if(!f)break;let c=!0,d=!0;l=f.index+1;const p=f[0]==="'";let h=32;if(f.index-1>=0)h=a.charCodeAt(f.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){h=e[n].content.charCodeAt(e[n].content.length-1);break}let g=32;if(l<u)g=a.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){g=e[n].content.charCodeAt(0);break}const m=GE(h)||qE(String.fromCharCode(h)),y=GE(g)||qE(String.fromCharCode(g)),v=HE(h),x=HE(g);if(x?c=!1:y&&(v||m||(c=!1)),v?d=!1:m&&(x||y||(d=!1)),g===34&&f[0]==='"'&&h>=48&&h<=57&&(d=c=!1),c&&d&&(c=m,d=y),!c&&!d){p&&(o.content=Dk(o.content,f.index,vTe));continue}if(d)for(n=r.length-1;n>=0;n--){let _=r[n];if(r[n].level<s)break;if(_.single===p&&r[n].level===s){_=r[n];let E,C;p?(E=t.md.options.quotes[2],C=t.md.options.quotes[3]):(E=t.md.options.quotes[0],C=t.md.options.quotes[1]),o.content=Dk(o.content,f.index,C),e[_.token].content=Dk(e[_.token].content,_.pos,E),l+=C.length-1,_.token===i&&(l+=E.length-1),a=o.content,u=a.length,r.length=n;continue e}}c?r.push({token:i,pos:f.index,single:p,level:s}):d&&p&&(o.content=Dk(o.content,f.index,vTe))}}}function Ejt(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!wjt.test(e.tokens[t].content)||_jt(e.tokens[t].children,e)}function Ajt(e){let t,n;const r=e.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;const s=r[o].children,a=s.length;for(t=0;t<a;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<a;t++)s[t].type==="text"&&t+1<a&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const M4=[["normalize",ljt],["block",ujt],["inline",cjt],["linkify",hjt],["replacements",xjt],["smartquotes",Ejt],["text_join",Ajt]];function Gj(){this.ruler=new Uu;for(let e=0;e<M4.length;e++)this.ruler.push(M4[e][0],M4[e][1])}Gj.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Gj.prototype.State=Mze;function Ah(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,s=0,a=0,l=0,u=i.length,f=!1;s<u;s++){const c=i.charCodeAt(s);if(!f)if(Ho(c)){a++,c===9?l+=4-l%4:l++;continue}else f=!0;(c===10||s===u-1)&&(c!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),f=!1,a=0,l=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ah.prototype.push=function(e,t,n){const r=new rd(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ah.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Ah.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Ah.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ho(r))break}return t};Ah.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ho(this.src.charCodeAt(--t)))return t+1;return t};Ah.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Ah.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Ah.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const o=new Array(n-t);for(let s=0,a=t;a<n;a++,s++){let l=0;const u=this.bMarks[a];let f=u,c;for(a+1<n||i?c=this.eMarks[a]+1:c=this.eMarks[a];f<c&&l<r;){const d=this.src.charCodeAt(f);if(Ho(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(f-u<this.tShift[a])l++;else break;f++}l>r?o[s]=new Array(l-r+1).join(" ")+this.src.slice(f,c):o[s]=this.src.slice(f,c)}return o.join("")};Ah.prototype.Token=rd;const Cjt=65536;function O4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function yTe(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),o=!1,s=0,a="";for(;r<n;)i===124&&(o?(a+=e.substring(s,r-1),s=r):(t.push(a+e.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(s)),t}function Sjt(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;const s=e.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=e.eMarks[i])return!1;const a=e.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!Ho(a)||s===45&&Ho(a))return!1;for(;o<e.eMarks[i];){const _=e.src.charCodeAt(o);if(_!==124&&_!==45&&_!==58&&!Ho(_))return!1;o++}let l=O4(e,t+1),u=l.split("|");const f=[];for(let _=0;_<u.length;_++){const E=u[_].trim();if(!E){if(_===0||_===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?f.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=O4(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=yTe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const c=u.length;if(c===0||c!==f.length)return!1;if(r)return!0;const d=e.parentType;e.parentType="table";const p=e.md.block.ruler.getRules("blockquote"),h=e.push("table_open","table",1),g=[t,0];h.map=g;const m=e.push("thead_open","thead",1);m.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let _=0;_<u.length;_++){const E=e.push("th_open","th",1);f[_]&&(E.attrs=[["style","text-align:"+f[_]]]);const C=e.push("inline","",0);C.content=u[_].trim(),C.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let v,x=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let _=!1;for(let C=0,w=p.length;C<w;C++)if(p[C](e,i,n,!0)){_=!0;break}if(_||(l=O4(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(u=yTe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),x+=c-u.length,x>Cjt))break;if(i===t+2){const C=e.push("tbody_open","tbody",1);C.map=v=[t+2,0]}const E=e.push("tr_open","tr",1);E.map=[i,i+1];for(let C=0;C<c;C++){const w=e.push("td_open","td",1);f[C]&&(w.attrs=[["style","text-align:"+f[C]]]);const T=e.push("inline","",0);T.content=u[C]?u[C].trim():"",T.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return v&&(e.push("tbody_close","tbody",-1),v[1]=i),e.push("table_close","table",-1),g[1]=i,e.parentType=d,e.line=i,!0}function kjt(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0}function Tjt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>o)return!1;const s=e.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=e.skipChars(i,s);let l=i-a;if(l<3)return!1;const u=e.src.slice(a,i),f=e.src.slice(i,o);if(s===96&&f.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let c=t,d=!1;for(;c++,!(c>=n||(i=a=e.bMarks[c]+e.tShift[c],o=e.eMarks[c],i<o&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(i)===s&&!(e.sCount[c]-e.blkIndent>=4)&&(i=e.skipChars(i,s),!(i-a<l)&&(i=e.skipSpaces(i),!(i<o)))){d=!0;break}l=e.sCount[t],e.line=c+(d?1:0);const p=e.push("fence","code",0);return p.info=f,p.content=e.getLines(t+1,c,l,!0),p.markup=u,p.map=[t,e.line],!0}function Djt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],f=[],c=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let p=!1,h;for(h=t;h<n;h++){const x=e.sCount[h]<e.blkIndent;if(i=e.bMarks[h]+e.tShift[h],o=e.eMarks[h],i>=o)break;if(e.src.charCodeAt(i++)===62&&!x){let E=e.sCount[h]+1,C,w;e.src.charCodeAt(i)===32?(i++,E++,w=!1,C=!0):e.src.charCodeAt(i)===9?(C=!0,(e.bsCount[h]+E)%4===3?(i++,E++,w=!1):w=!0):C=!1;let T=E;for(a.push(e.bMarks[h]),e.bMarks[h]=i;i<o;){const R=e.src.charCodeAt(i);if(Ho(R))R===9?T+=4-(T+e.bsCount[h]+(w?1:0))%4:T++;else break;i++}p=i>=o,l.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(C?1:0),u.push(e.sCount[h]),e.sCount[h]=T-E,f.push(e.tShift[h]),e.tShift[h]=i-e.bMarks[h];continue}if(p)break;let _=!1;for(let E=0,C=c.length;E<C;E++)if(c[E](e,h,n,!0)){_=!0;break}if(_){e.lineMax=h,e.blkIndent!==0&&(a.push(e.bMarks[h]),l.push(e.bsCount[h]),f.push(e.tShift[h]),u.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}a.push(e.bMarks[h]),l.push(e.bsCount[h]),f.push(e.tShift[h]),u.push(e.sCount[h]),e.sCount[h]=-1}const g=e.blkIndent;e.blkIndent=0;const m=e.push("blockquote_open","blockquote",1);m.markup=">";const y=[t,0];m.map=y,e.md.block.tokenize(e,t,h);const v=e.push("blockquote_close","blockquote",-1);v.markup=">",e.lineMax=s,e.parentType=d,y[1]=e.line;for(let x=0;x<f.length;x++)e.bMarks[x+t]=a[x],e.tShift[x+t]=f[x],e.sCount[x+t]=u[x],e.bsCount[x+t]=l[x];return e.blkIndent=g,!0}function Ljt(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){const u=e.src.charCodeAt(o++);if(u!==s&&!Ho(u))return!1;u===s&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(s)),!0}function bTe(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const o=e.src.charCodeAt(r);if(!Ho(o))return-1}return r}function xTe(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=e.src.charCodeAt(i++),o>=48&&o<=57){if(i-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=e.src.charCodeAt(i),!Ho(o))?-1:i}function Rjt(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Fjt(e,t,n,r){let i,o,s,a,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let c,d,p;if((p=xTe(e,l))>=0){if(c=!0,s=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(s,p-1)),f&&d!==1)return!1}else if((p=bTe(e,l))>=0)c=!1;else return!1;if(f&&e.skipSpaces(p)>=e.eMarks[l])return!1;if(r)return!0;const h=e.src.charCodeAt(p-1),g=e.tokens.length;c?(a=e.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const m=[l,0];a.map=m,a.markup=String.fromCharCode(h);let y=!1;const v=e.md.block.ruler.getRules("list"),x=e.parentType;for(e.parentType="list";l<n;){o=p,i=e.eMarks[l];const _=e.sCount[l]+p-(e.bMarks[l]+e.tShift[l]);let E=_;for(;o<i;){const D=e.src.charCodeAt(o);if(D===9)E+=4-(E+e.bsCount[l])%4;else if(D===32)E++;else break;o++}const C=o;let w;C>=i?w=1:w=E-_,w>4&&(w=1);const T=_+w;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(h);const R=[l,0];a.map=R,c&&(a.info=e.src.slice(s,p-1));const L=e.tight,B=e.tShift[l],P=e.sCount[l],S=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=T,e.tight=!0,e.tShift[l]=C-e.bMarks[l],e.sCount[l]=E,C>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||y)&&(u=!1),y=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[l]=B,e.sCount[l]=P,e.tight=L,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(h),l=e.line,R[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let k=!1;for(let D=0,O=v.length;D<O;D++)if(v[D](e,l,n,!0)){k=!0;break}if(k)break;if(c){if(p=xTe(e,l),p<0)break;s=e.bMarks[l]+e.tShift[l]}else if(p=bTe(e,l),p<0)break;if(h!==e.src.charCodeAt(p-1))break}return c?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(h),m[1]=l,e.line=l,e.parentType=x,u&&Rjt(e,g),!0}function $jt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(v){const x=e.lineMax;if(v>=x||e.isEmpty(v))return null;let _=!1;if(e.sCount[v]-e.blkIndent>3&&(_=!0),e.sCount[v]<0&&(_=!0),!_){const w=e.md.block.ruler.getRules("reference"),T=e.parentType;e.parentType="reference";let R=!1;for(let L=0,B=w.length;L<B;L++)if(w[L](e,v,x,!0)){R=!0;break}if(e.parentType=T,R)return null}const E=e.bMarks[v]+e.tShift[v],C=e.eMarks[v];return e.src.slice(E,C+1)}let l=e.src.slice(i,o+1);o=l.length;let u=-1;for(i=1;i<o;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const x=a(s);x!==null&&(l+=x,o=l.length,s++)}else if(v===92&&(i++,i<o&&l.charCodeAt(i)===10)){const x=a(s);x!==null&&(l+=x,o=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<o;i++){const v=l.charCodeAt(i);if(v===10){const x=a(s);x!==null&&(l+=x,o=l.length,s++)}else if(!Ho(v))break}const f=e.md.helpers.parseLinkDestination(l,i,o);if(!f.ok)return!1;const c=e.md.normalizeLink(f.str);if(!e.md.validateLink(c))return!1;i=f.pos;const d=i,p=s,h=i;for(;i<o;i++){const v=l.charCodeAt(i);if(v===10){const x=a(s);x!==null&&(l+=x,o=l.length,s++)}else if(!Ho(v))break}let g=e.md.helpers.parseLinkTitle(l,i,o);for(;g.can_continue;){const v=a(s);if(v===null)break;l+=v,i=o,o=l.length,s++,g=e.md.helpers.parseLinkTitle(l,i,o,g)}let m;for(i<o&&h!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=d,s=p);i<o;){const v=l.charCodeAt(i);if(!Ho(v))break;i++}if(i<o&&l.charCodeAt(i)!==10&&m)for(m="",i=d,s=p;i<o;){const v=l.charCodeAt(i);if(!Ho(v))break;i++}if(i<o&&l.charCodeAt(i)!==10)return!1;const y=_$(l.slice(1,u));return y?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:m,href:c}),e.line=s),!0):!1}const Mjt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ojt="[a-zA-Z_:][a-zA-Z0-9:._-]*",Ijt="[^\"'=<>`\\x00-\\x20]+",Njt="'[^']*'",Pjt='"[^"]*"',Bjt="(?:"+Ijt+"|"+Njt+"|"+Pjt+")",zjt="(?:\\s+"+Ojt+"(?:\\s*=\\s*"+Bjt+")?)",Ize="<[A-Za-z][A-Za-z0-9\\-]*"+zjt+"*\\s*\\/?>",Nze="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Ujt="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",jjt="<[?][\\s\\S]*?[?]>",Hjt="<![A-Za-z][^>]*>",qjt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Gjt=new RegExp("^(?:"+Ize+"|"+Nze+"|"+Ujt+"|"+jjt+"|"+Hjt+"|"+qjt+")"),Wjt=new RegExp("^(?:"+Ize+"|"+Nze+")"),pb=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Mjt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Wjt.source+"\\s*$"),/^$/,!1]];function Vjt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let s=e.src.slice(i,o),a=0;for(;a<pb.length&&!pb[a][0].test(s);a++);if(a===pb.length)return!1;if(r)return pb[a][2];let l=t+1;if(!pb[a][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],s=e.src.slice(i,o),pb[a][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function Yjt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=e.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=e.src.charCodeAt(++i);if(a>6||i<o&&!Ho(s))return!1;if(r)return!0;o=e.skipSpacesBack(o,i);const l=e.skipCharsBack(o,35,i);l>i&&Ho(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const u=e.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(i,o).trim(),f.map=[t,e.line],f.children=[];const c=e.push("heading_close","h"+String(a),-1);return c.markup="########".slice(0,a),!0}function Xjt(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let o=0,s,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let p=e.bMarks[a]+e.tShift[a];const h=e.eMarks[a];if(p<h&&(s=e.src.charCodeAt(p),(s===45||s===61)&&(p=e.skipChars(p,s),p=e.skipSpaces(p),p>=h))){o=s===61?1:2;break}}if(e.sCount[a]<0)continue;let d=!1;for(let p=0,h=r.length;p<h;p++)if(r[p](e,a,n,!0)){d=!0;break}if(d)break}if(!o)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const u=e.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const c=e.push("heading_close","h"+String(o),-1);return c.markup=String.fromCharCode(s),e.parentType=i,!0}function Kjt(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let o=t+1;for(e.parentType="paragraph";o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3||e.sCount[o]<0)continue;let u=!1;for(let f=0,c=r.length;f<c;f++)if(r[f](e,o,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const Lk=[["table",Sjt,["paragraph","reference"]],["code",kjt],["fence",Tjt,["paragraph","reference","blockquote","list"]],["blockquote",Djt,["paragraph","reference","blockquote","list"]],["hr",Ljt,["paragraph","reference","blockquote","list"]],["list",Fjt,["paragraph","reference","blockquote"]],["reference",$jt],["html_block",Vjt,["paragraph","reference","blockquote"]],["heading",Yjt,["paragraph","reference","blockquote"]],["lheading",Xjt],["paragraph",Kjt]];function E$(){this.ruler=new Uu;for(let e=0;e<Lk.length;e++)this.ruler.push(Lk[e][0],Lk[e][1],{alt:(Lk[e][2]||[]).slice()})}E$.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,o=e.md.options.maxNesting;let s=t,a=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=o){e.line=n;break}const l=e.line;let u=!1;for(let f=0;f<i;f++)if(u=r[f](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),s=e.line,s<n&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}};E$.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};E$.prototype.State=Ah;function $C(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}$C.prototype.pushPending=function(){const e=new rd("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};$C.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new rd(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};$C.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const s=o-e,a=o<n?this.src.charCodeAt(o):32,l=GE(i)||qE(String.fromCharCode(i)),u=GE(a)||qE(String.fromCharCode(a)),f=HE(i),c=HE(a),d=!c&&(!u||f||l),p=!f&&(!l||c||u);return{can_open:d&&(t||!p||l),can_close:p&&(t||!d||u),length:s}};$C.prototype.Token=rd;function Zjt(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Qjt(e,t){let n=e.pos;for(;n<e.posMax&&!Zjt(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Jjt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function eHt(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(Jjt);if(!i)return!1;const o=i[1],s=e.md.linkify.matchAtStart(e.src.slice(n-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");const l=e.md.normalizeLink(a);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-o.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="linkify",c.info="auto"}return e.pos+=a.length-o.length,!0}function tHt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Ho(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Wj=[];for(let e=0;e<256;e++)Wj.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Wj[e.charCodeAt(0)]=1});function nHt(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Ho(i));)n++;return e.pos=n,!0}let o=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=e.src.charCodeAt(n+1);a>=56320&&a<=57343&&(o+=e.src[n+1],n++)}const s="\\"+o;if(!t){const a=e.push("text_special","",0);i<256&&Wj[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return e.pos=n+1,!0}function rHt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const o=e.posMax;for(;n<o&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(i,n),a=s.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=s),e.pos+=a,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<o&&e.src.charCodeAt(l)===96;)l++;const f=l-u;if(f===a){if(!t){const c=e.push("code_inline","code",0);c.markup=s,c.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=a,!0}function iHt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=e.push("text","",0),a.content=s,o--);for(let l=0;l<o;l+=2)a=e.push("text","",0),a.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function wTe(e,t){let n;const r=[],i=t.length;for(let o=0;o<i;o++){const s=t[o];if(s.marker!==126||s.end===-1)continue;const a=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const o=r.pop();let s=o+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,o!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[o],e.tokens[o]=n)}}function oHt(e){const t=e.tokens_meta,n=e.tokens_meta.length;wTe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&wTe(e,t[r].delimiters)}const Pze={tokenize:iHt,postProcess:oHt};function sHt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let o=0;o<i.length;o++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function _Te(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const o=t[i.end],s=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?a+a:a,l.content="";const u=e.tokens[o.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?a+a:a,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function aHt(e){const t=e.tokens_meta,n=e.tokens_meta.length;_Te(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&_Te(e,t[r].delimiters)}const Bze={tokenize:sHt,postProcess:aHt};function lHt(e,t){let n,r,i,o,s="",a="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,c=e.posMax,d=e.pos+1,p=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(p<0)return!1;let h=p+1;if(h<c&&e.src.charCodeAt(h)===40){for(u=!1,h++;h<c&&(n=e.src.charCodeAt(h),!(!Ho(n)&&n!==10));h++);if(h>=c)return!1;if(l=h,i=e.md.helpers.parseLinkDestination(e.src,h,e.posMax),i.ok){for(s=e.md.normalizeLink(i.str),e.md.validateLink(s)?h=i.pos:s="",l=h;h<c&&(n=e.src.charCodeAt(h),!(!Ho(n)&&n!==10));h++);if(i=e.md.helpers.parseLinkTitle(e.src,h,e.posMax),h<c&&l!==h&&i.ok)for(a=i.str,h=i.pos;h<c&&(n=e.src.charCodeAt(h),!(!Ho(n)&&n!==10));h++);}(h>=c||e.src.charCodeAt(h)!==41)&&(u=!0),h++}if(u){if(typeof e.env.references>"u")return!1;if(h<c&&e.src.charCodeAt(h)===91?(l=h+1,h=e.md.helpers.parseLinkLabel(e,h),h>=0?r=e.src.slice(l,h++):h=p+1):h=p+1,r||(r=e.src.slice(d,p)),o=e.env.references[_$(r)],!o)return e.pos=f,!1;s=o.href,a=o.title}if(!t){e.pos=d,e.posMax=p;const g=e.push("link_open","a",1),m=[["href",s]];g.attrs=m,a&&m.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=h,e.posMax=c,!0}function uHt(e,t){let n,r,i,o,s,a,l,u,f="";const c=e.pos,d=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const p=e.pos+2,h=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(h<0)return!1;if(o=h+1,o<d&&e.src.charCodeAt(o)===40){for(o++;o<d&&(n=e.src.charCodeAt(o),!(!Ho(n)&&n!==10));o++);if(o>=d)return!1;for(u=o,a=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),a.ok&&(f=e.md.normalizeLink(a.str),e.md.validateLink(f)?o=a.pos:f=""),u=o;o<d&&(n=e.src.charCodeAt(o),!(!Ho(n)&&n!==10));o++);if(a=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<d&&u!==o&&a.ok)for(l=a.str,o=a.pos;o<d&&(n=e.src.charCodeAt(o),!(!Ho(n)&&n!==10));o++);else l="";if(o>=d||e.src.charCodeAt(o)!==41)return e.pos=c,!1;o++}else{if(typeof e.env.references>"u")return!1;if(o<d&&e.src.charCodeAt(o)===91?(u=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?i=e.src.slice(u,o++):o=h+1):o=h+1,i||(i=e.src.slice(p,h)),s=e.env.references[_$(i)],!s)return e.pos=c,!1;f=s.href,l=s.title}if(!t){r=e.src.slice(p,h);const g=[];e.md.inline.parse(r,e.md,e.env,g);const m=e.push("image","img",0),y=[["src",f],["alt",""]];m.attrs=y,m.children=g,m.content=r,l&&y.push(["title",l])}return e.pos=o,e.posMax=d,!0}const cHt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,fHt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function dHt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const o=e.src.slice(r+1,n);if(fHt.test(o)){const s=e.md.normalizeLink(o);if(!e.md.validateLink(s))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=o.length+2,!0}if(cHt.test(o)){const s=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(s))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=o.length+2,!0}return!1}function hHt(e){return/^<a[>\s]/i.test(e)}function pHt(e){return/^<\/a\s*>/i.test(e)}function gHt(e){const t=e|32;return t>=97&&t<=122}function mHt(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!gHt(i))return!1;const o=e.src.slice(r).match(Gjt);if(!o)return!1;if(!t){const s=e.push("html_inline","",0);s.content=o[0],hHt(s.content)&&e.linkLevel++,pHt(s.content)&&e.linkLevel--}return e.pos+=o[0].length,!0}const vHt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,yHt=/^&([a-z][a-z0-9]{1,31});/i;function bHt(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const o=e.src.slice(n).match(vHt);if(o){if(!t){const s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=e.push("text_special","",0);a.content=qj(s)?YD(s):YD(65533),a.markup=o[0],a.info="entity"}return e.pos+=o[0].length,!0}}else{const o=e.src.slice(n).match(yHt);if(o){const s=Rze(o[0]);if(s!==o[0]){if(!t){const a=e.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return e.pos+=o[0].length,!0}}}return!1}function ETe(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const o=[];for(let s=0;s<n;s++){const a=e[s];if(o.push(0),(e[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[a.marker][(a.open?3:0)+a.length%3];let u=r-o[r]-1,f=u;for(;u>l;u-=o[u]+1){const c=e[u];if(c.marker===a.marker&&c.open&&c.end<0){let d=!1;if((c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(d=!0),!d){const p=u>0&&!e[u-1].open?o[u-1]+1:0;o[s]=s-u+p,o[u]=p,a.open=!1,c.end=s,c.close=!1,f=-1,i=-2;break}}}f!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function xHt(e){const t=e.tokens_meta,n=e.tokens_meta.length;ETe(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&ETe(t[r].delimiters)}function wHt(e){let t,n,r=0;const i=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<o&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const I4=[["text",Qjt],["linkify",eHt],["newline",tHt],["escape",nHt],["backticks",rHt],["strikethrough",Pze.tokenize],["emphasis",Bze.tokenize],["link",lHt],["image",uHt],["autolink",dHt],["html_inline",mHt],["entity",bHt]],N4=[["balance_pairs",xHt],["strikethrough",Pze.postProcess],["emphasis",Bze.postProcess],["fragments_join",wHt]];function MC(){this.ruler=new Uu;for(let e=0;e<I4.length;e++)this.ruler.push(I4[e][0],I4[e][1]);this.ruler2=new Uu;for(let e=0;e<N4.length;e++)this.ruler2.push(N4[e][0],N4[e][1])}MC.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,o=e.cache;if(typeof o[t]<"u"){e.pos=o[t];return}let s=!1;if(e.level<i){for(let a=0;a<r;a++)if(e.level++,s=n[a](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,o[t]=e.pos};MC.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const o=e.pos;let s=!1;if(e.level<i){for(let a=0;a<n;a++)if(s=t[a](e,!1),s){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};MC.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};MC.prototype.State=$C;function _Ht(e){const t={};e=e||{},t.src_Any=Sze.source,t.src_Cc=kze.source,t.src_Z=Dze.source,t.src_P=jj.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function EN(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function A$(e){return Object.prototype.toString.call(e)}function EHt(e){return A$(e)==="[object String]"}function AHt(e){return A$(e)==="[object Object]"}function CHt(e){return A$(e)==="[object RegExp]"}function ATe(e){return A$(e)==="[object Function]"}function SHt(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const zze={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function kHt(e){return Object.keys(e||{}).reduce(function(t,n){return t||zze.hasOwnProperty(n)},!1)}const THt={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},DHt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",LHt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function RHt(e){e.__index__=-1,e.__text_cache__=""}function FHt(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function CTe(){return function(e,t){t.normalize(e)}}function XD(e){const t=e.re=_Ht(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(DHt),n.push(t.src_xn),t.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function o(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){const l=e.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[a]=u,AHt(l)){CHt(l.validate)?u.validate=FHt(l.validate):ATe(l.validate)?u.validate=l.validate:o(a,l),ATe(l.normalize)?u.normalize=l.normalize:l.normalize?o(a,l):u.normalize=CTe();return}if(EHt(l)){i.push(a);return}o(a,l)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:CTe()};const s=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(SHt).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),RHt(e)}function $Ht(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function AN(e,t){const n=new $Ht(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function yc(e,t){if(!(this instanceof yc))return new yc(e,t);t||kHt(e)&&(t=e,e={}),this.__opts__=EN({},zze,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=EN({},THt,e),this.__compiled__={},this.__tlds__=LHt,this.__tlds_replaced__=!1,this.re={},XD(this)}yc.prototype.add=function(t,n){return this.__schemas__[t]=n,XD(this),this};yc.prototype.set=function(t){return this.__opts__=EN(this.__opts__,t),this};yc.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,o,s,a,l,u,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],l.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};yc.prototype.pretest=function(t){return this.re.pretest.test(t)};yc.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};yc.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(AN(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(AN(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};yc.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,AN(this,0)):null};yc.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),XD(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,XD(this),this)};yc.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};yc.prototype.onCompile=function(){};const t1=2147483647,Bd=36,Vj=1,WE=26,MHt=38,OHt=700,Uze=72,jze=128,Hze="-",IHt=/^xn--/,NHt=/[^\0-\x7F]/,PHt=/[\x2E\u3002\uFF0E\uFF61]/g,BHt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P4=Bd-Vj,zd=Math.floor,B4=String.fromCharCode;function Ig(e){throw new RangeError(BHt[e])}function zHt(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function qze(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(PHt,".");const i=e.split("."),o=zHt(i,t).join(".");return r+o}function Gze(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=e.charCodeAt(n++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const UHt=e=>String.fromCodePoint(...e),jHt=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Bd},STe=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Wze=function(e,t,n){let r=0;for(e=n?zd(e/OHt):e>>1,e+=zd(e/t);e>P4*WE>>1;r+=Bd)e=zd(e/P4);return zd(r+(P4+1)*e/(e+MHt))},Vze=function(e){const t=[],n=e.length;let r=0,i=jze,o=Uze,s=e.lastIndexOf(Hze);s<0&&(s=0);for(let a=0;a<s;++a)e.charCodeAt(a)>=128&&Ig("not-basic"),t.push(e.charCodeAt(a));for(let a=s>0?s+1:0;a<n;){const l=r;for(let f=1,c=Bd;;c+=Bd){a>=n&&Ig("invalid-input");const d=jHt(e.charCodeAt(a++));d>=Bd&&Ig("invalid-input"),d>zd((t1-r)/f)&&Ig("overflow"),r+=d*f;const p=c<=o?Vj:c>=o+WE?WE:c-o;if(d<p)break;const h=Bd-p;f>zd(t1/h)&&Ig("overflow"),f*=h}const u=t.length+1;o=Wze(r-l,u,l==0),zd(r/u)>t1-i&&Ig("overflow"),i+=zd(r/u),r%=u,t.splice(r++,0,i)}return String.fromCodePoint(...t)},Yze=function(e){const t=[];e=Gze(e);const n=e.length;let r=jze,i=0,o=Uze;for(const l of e)l<128&&t.push(B4(l));const s=t.length;let a=s;for(s&&t.push(Hze);a<n;){let l=t1;for(const f of e)f>=r&&f<l&&(l=f);const u=a+1;l-r>zd((t1-i)/u)&&Ig("overflow"),i+=(l-r)*u,r=l;for(const f of e)if(f<r&&++i>t1&&Ig("overflow"),f===r){let c=i;for(let d=Bd;;d+=Bd){const p=d<=o?Vj:d>=o+WE?WE:d-o;if(c<p)break;const h=c-p,g=Bd-p;t.push(B4(STe(p+h%g,0))),c=zd(h/g)}t.push(B4(STe(c,0))),o=Wze(i,u,a===s),i=0,++a}++i,++r}return t.join("")},HHt=function(e){return qze(e,function(t){return IHt.test(t)?Vze(t.slice(4).toLowerCase()):t})},qHt=function(e){return qze(e,function(t){return NHt.test(t)?"xn--"+Yze(t):t})},Xze={version:"2.3.1",ucs2:{decode:Gze,encode:UHt},decode:Vze,encode:Yze,toASCII:qHt,toUnicode:HHt},GHt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},WHt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},VHt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},YHt={default:GHt,zero:WHt,commonmark:VHt},XHt=/^(vbscript|javascript|file|data):/,KHt=/^data:image\/(gif|png|jpeg|webp);/;function ZHt(e){const t=e.trim().toLowerCase();return XHt.test(t)?KHt.test(t):!0}const Kze=["http:","https:","mailto:"];function QHt(e){const t=Uj(e,!0);if(t.hostname&&(!t.protocol||Kze.indexOf(t.protocol)>=0))try{t.hostname=Xze.toASCII(t.hostname)}catch{}return FC(zj(t))}function JHt(e){const t=Uj(e,!0);if(t.hostname&&(!t.protocol||Kze.indexOf(t.protocol)>=0))try{t.hostname=Xze.toUnicode(t.hostname)}catch{}return J1(zj(t),J1.defaultChars+"%")}function ef(e,t){if(!(this instanceof ef))return new ef(e,t);t||Hj(e)||(t=e||{},e="default"),this.inline=new MC,this.block=new E$,this.core=new Gj,this.renderer=new jx,this.linkify=new yc,this.validateLink=ZHt,this.normalizeLink=QHt,this.normalizeLinkText=JHt,this.utils=tjt,this.helpers=w$({},ojt),this.options={},this.configure(e),t&&this.set(t)}ef.prototype.set=function(e){return w$(this.options,e),this};ef.prototype.configure=function(e){const t=this;if(Hj(e)){const n=e;if(e=YHt[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};ef.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};ef.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};ef.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};ef.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};ef.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};ef.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};ef.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};function eqt(e,t,n,r){const i=Number(e[t].meta.id+1).toString();let o="";return typeof r.docId=="string"&&(o=`-${r.docId}-`),o+i}function tqt(e,t){let n=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(n+=`:${e[t].meta.subId}`),`[${n}]`}function nqt(e,t,n,r,i){const o=i.rules.footnote_anchor_name(e,t,n,r,i),s=i.rules.footnote_caption(e,t,n,r,i);let a=o;return e[t].meta.subId>0&&(a+=`:${e[t].meta.subId}`),`<sup class="footnote-ref"><a href="#fn${o}" id="fnref${a}">${s}</a></sup>`}function rqt(e,t,n){return(n.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`)+`<section class="footnotes">
<ol class="footnotes-list">
`}function iqt(){return`</ol>
</section>
`}function oqt(e,t,n,r,i){let o=i.rules.footnote_anchor_name(e,t,n,r,i);return e[t].meta.subId>0&&(o+=`:${e[t].meta.subId}`),`<li id="fn${o}" class="footnote-item">`}function sqt(){return`</li>
`}function aqt(e,t,n,r,i){let o=i.rules.footnote_anchor_name(e,t,n,r,i);return e[t].meta.subId>0&&(o+=`:${e[t].meta.subId}`),` <a href="#fnref${o}" class="footnote-backref"></a>`}function lqt(e){const t=e.helpers.parseLinkLabel,n=e.utils.isSpace;e.renderer.rules.footnote_ref=nqt,e.renderer.rules.footnote_block_open=rqt,e.renderer.rules.footnote_block_close=iqt,e.renderer.rules.footnote_open=oqt,e.renderer.rules.footnote_close=sqt,e.renderer.rules.footnote_anchor=aqt,e.renderer.rules.footnote_caption=tqt,e.renderer.rules.footnote_anchor_name=eqt;function r(a,l,u,f){const c=a.bMarks[l]+a.tShift[l],d=a.eMarks[l];if(c+4>d||a.src.charCodeAt(c)!==91||a.src.charCodeAt(c+1)!==94)return!1;let p;for(p=c+2;p<d;p++){if(a.src.charCodeAt(p)===32)return!1;if(a.src.charCodeAt(p)===93)break}if(p===c+2||p+1>=d||a.src.charCodeAt(++p)!==58)return!1;if(f)return!0;p++,a.env.footnotes||(a.env.footnotes={}),a.env.footnotes.refs||(a.env.footnotes.refs={});const h=a.src.slice(c+2,p-2);a.env.footnotes.refs[`:${h}`]=-1;const g=new a.Token("footnote_reference_open","",1);g.meta={label:h},g.level=a.level++,a.tokens.push(g);const m=a.bMarks[l],y=a.tShift[l],v=a.sCount[l],x=a.parentType,_=p,E=a.sCount[l]+p-(a.bMarks[l]+a.tShift[l]);let C=E;for(;p<d;){const T=a.src.charCodeAt(p);if(n(T))T===9?C+=4-C%4:C++;else break;p++}a.tShift[l]=p-_,a.sCount[l]=C-E,a.bMarks[l]=_,a.blkIndent+=4,a.parentType="footnote",a.sCount[l]<a.blkIndent&&(a.sCount[l]+=a.blkIndent),a.md.block.tokenize(a,l,u,!0),a.parentType=x,a.blkIndent-=4,a.tShift[l]=y,a.sCount[l]=v,a.bMarks[l]=m;const w=new a.Token("footnote_reference_close","",-1);return w.level=--a.level,a.tokens.push(w),!0}function i(a,l){const u=a.posMax,f=a.pos;if(f+2>=u||a.src.charCodeAt(f)!==94||a.src.charCodeAt(f+1)!==91)return!1;const c=f+2,d=t(a,f+1);if(d<0)return!1;if(!l){a.env.footnotes||(a.env.footnotes={}),a.env.footnotes.list||(a.env.footnotes.list=[]);const p=a.env.footnotes.list.length,h=[];a.md.inline.parse(a.src.slice(c,d),a.md,a.env,h);const g=a.push("footnote_ref","",0);g.meta={id:p},a.env.footnotes.list[p]={content:a.src.slice(c,d),tokens:h}}return a.pos=d+1,a.posMax=u,!0}function o(a,l){const u=a.posMax,f=a.pos;if(f+3>u||!a.env.footnotes||!a.env.footnotes.refs||a.src.charCodeAt(f)!==91||a.src.charCodeAt(f+1)!==94)return!1;let c;for(c=f+2;c<u;c++){if(a.src.charCodeAt(c)===32||a.src.charCodeAt(c)===10)return!1;if(a.src.charCodeAt(c)===93)break}if(c===f+2||c>=u)return!1;c++;const d=a.src.slice(f+2,c-1);if(typeof a.env.footnotes.refs[`:${d}`]>"u")return!1;if(!l){a.env.footnotes.list||(a.env.footnotes.list=[]);let p;a.env.footnotes.refs[`:${d}`]<0?(p=a.env.footnotes.list.length,a.env.footnotes.list[p]={label:d,count:0},a.env.footnotes.refs[`:${d}`]=p):p=a.env.footnotes.refs[`:${d}`];const h=a.env.footnotes.list[p].count;a.env.footnotes.list[p].count++;const g=a.push("footnote_ref","",0);g.meta={id:p,subId:h,label:d}}return a.pos=c,a.posMax=u,!0}function s(a){let l,u,f,c=!1;const d={};if(!a.env.footnotes||(a.tokens=a.tokens.filter(function(h){return h.type==="footnote_reference_open"?(c=!0,u=[],f=h.meta.label,!1):h.type==="footnote_reference_close"?(c=!1,d[":"+f]=u,!1):(c&&u.push(h),!c)}),!a.env.footnotes.list))return;const p=a.env.footnotes.list;a.tokens.push(new a.Token("footnote_block_open","",1));for(let h=0,g=p.length;h<g;h++){const m=new a.Token("footnote_open","",1);if(m.meta={id:h,label:p[h].label},a.tokens.push(m),p[h].tokens){l=[];const x=new a.Token("paragraph_open","p",1);x.block=!0,l.push(x);const _=new a.Token("inline","",0);_.children=p[h].tokens,_.content=p[h].content,l.push(_);const E=new a.Token("paragraph_close","p",-1);E.block=!0,l.push(E)}else p[h].label&&(l=d[`:${p[h].label}`]);l&&(a.tokens=a.tokens.concat(l));let y;a.tokens[a.tokens.length-1].type==="paragraph_close"?y=a.tokens.pop():y=null;const v=p[h].count>0?p[h].count:1;for(let x=0;x<v;x++){const _=new a.Token("footnote_anchor","",0);_.meta={id:h,subId:x,label:p[h].label},a.tokens.push(_)}y&&a.tokens.push(y),a.tokens.push(new a.Token("footnote_close","",-1))}a.tokens.push(new a.Token("footnote_block_close","",-1))}e.block.ruler.before("reference","footnote_def",r,{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",i),e.inline.ruler.after("footnote_inline","footnote_ref",o),e.core.ruler.after("inline","footnote_tail",s)}async function uqt(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");return await t.text()}catch(t){return console.error("There has been a problem with your fetch operation:",t),null}}const Zze=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,cqt={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},Qze={hr:!0,image:!0},fqt={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},dqt=["img","video"],z4={1:["0.0.0"]},hqt=["tour"],pqt=["iframe"];function Jze(){document.body.style.userSelect="none"}function gqt(){document.body.style.userSelect=""}function mqt(e,t,n){e.target===t&&(Jze(),n.dragging=!0,n.lastX=e.clientX,n.lastY=e.clientY)}function vqt(e,t,n){if(n.dragging){let r=e.clientX-n.lastX,i=e.clientY-n.lastY,{top:o,left:s}=t.getBoundingClientRect();t.style.top=`${o+i}px`,t.style.left=`${s+r}px`,n.lastX=e.clientX,n.lastY=e.clientY}if(n.dragging||n.resizing){let r=n.lastX-e.clientX,i=e.clientY-n.lastY,{width:o,height:s,left:a,top:l}=t.getBoundingClientRect();n.resizing&&(t.style.width=`${o+r}px`,t.style.height=`${s+i}px`,t.style.top=`${l}px`),t.style.left=`${a-r}px`,n.lastX=e.clientX,n.lastY=e.clientY}}function yqt(e){gqt(),e.dragging=!1,e.resizing=!1}function bqt(e,t){e.stopPropagation(),Jze(),t.resizing=!0,t.lastX=e.clientX,t.lastY=e.clientY}async function xqt(e,t,n){e.addEventListener("mousedown",r=>mqt(r,e,n)),window.addEventListener("mousemove",r=>vqt(r,e,n)),window.addEventListener("mouseup",()=>yqt(n)),t.addEventListener("mousedown",r=>bqt(r,n))}function wqt(e){const t=document.querySelector("eox-storytelling"),{y:n}=t.getBoundingClientRect(),r=e.querySelector(".editor-wrapper"),i=f=>Number(f.replace("px","")),o=window.getComputedStyle(r),s=i(o.bottom),a=i(o.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-n-s-a-l;r.style.height=`${u}px`}function _qt(e){const t=document.createElement("input");t.type="file",t.accept=".md",t.onchange=n=>{const r=n.target.files[0];if(!r)return;const i=new FileReader;i.onload=o=>{const s=o.target.result;e.value(s)},i.readAsText(r)},t.click()}function Eqt(e){const t=e.value(),n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${document.title}.md`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function e7e(e){const t=[];return e.forEach((n,r)=>{(n.startsWith("## ")||n.startsWith("# ")&&t.length)&&t.push(r)}),t}function kTe(e,t,n,r,i,o){const s=e.split(`
`),a=o.shadowRoot||o,l=a.querySelector("eox-storytelling-editor"),f=e7e(s)[t];if(r)if(i){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(p=>{const h=d[p];n=n.replaceAll(`{${p}}`,h)}),o.selectedCustomElement=null}else{o.selectedCustomElement={markdown:n,fields:r},o.requestUpdate();return}f>=0?s.splice(f,0,n):s.push(n),l.editor.editor.editors["root.Story"].setValue(s.join(`
`)),setTimeout(()=>{const c=a.querySelector(`div[data-section="${t+1}"]`);c&&window.scrollTo(0,c.offsetTop)},200),o.addCustomSectionIndex=-1,o.requestUpdate()}function Aqt(e,t,n){let r=null;n==null||n.codemirror.on("change",function(){const i=e.querySelector(".editor-saver");i.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{i.innerText="Saved";const o=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...o,[t||"default"]:n.value()})),r=null},2500)})}function Cqt(e){var t;(t=(e.shadowRoot||e).querySelector(".CodeMirror-scroll"))==null||t.addEventListener("wheel",function(n){const r=n.deltaY,i=e.querySelector(".CodeMirror-sizer").scrollHeight,o=e.querySelector(".CodeMirror-scroll").clientHeight;(e.querySelector(".CodeMirror-scroll").scrollTop<=0&&r<0||e.querySelector(".CodeMirror-scroll").scrollTop+o>=i&&r>0)&&n.preventDefault()},{passive:!1})}function Sqt(e){if(e.showEditor!==void 0){let t=JSON.parse(localStorage.getItem("markdown")||"{}");const n=e.id||"default",r=t[n];r&&r!==e.markdown&&(confirm("Recover your Story from the last time you edited?")?e.markdown=r:(delete t[n],localStorage.setItem("markdown",JSON.stringify(t))))}}function t7e(e){var t,n;if((n=(t=e.editor.editor)==null?void 0:t.editors)!=null&&n["root.Story"]){const r=e.editor.editor.editors["root.Story"].simplemde_instance;if(!e.disableAutosave)Aqt(e,e.storyId,r);else{const i=e.querySelector(".editor-saver");i.innerText=""}Cqt(e)}else setTimeout(()=>t7e(e),100)}function n7e(e){var n;e.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),e.editor&&e.editor.editor&&e.editor.editor.ready&&((n=e.editor.editor)!=null&&n.editors["root.Story"].simplemde_instance)?e.querySelector(".switch-input").click():setTimeout(()=>n7e(e),100)}const U4=(e,t,n,r,i)=>({name:e,action:i||function({codemirror:s}){const a=s.getCursor("start"),l=s.getCursor("end");s.replaceRange(t,a,l)},className:n,title:r}),kqt={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",U4("import",null,"fa fa-upload","Import Markdown File",_qt),U4("export",null,"fa fa-download","Export Markdown File",Eqt),"|",U4("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const e=document.querySelector("eox-storytelling"),t=e.markdown.split(`
`),n=e7e(t);e&&(e.addCustomSectionIndex=n.length,e.requestUpdate())})],spellChecker:!1}}}}},Tqt=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,Dqt=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,Lqt=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Rqt=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,Fqt={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},$qt=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,Mqt={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},Oqt=`## {title} <!--{as="img" data-fallback-src="{data-fallback-src}" src="{src}" style="width: 100%; height: 600px;"}-->
`,Iqt={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{title:"Image Source",type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"upload",accept:"image/*"},"data-fallback-src":{title:"Fallback Source",type:"string",default:"",format:"text"}}},Nqt=`# {title} <!--{ as="img" data-fallback-src="{data-fallback-src}" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,Pqt={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{title:"Image Source",type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"upload",accept:"image/*"},"data-fallback-src":{title:"Fallback Source",type:"string",default:"",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},Bqt=`# {title} <!--{ as="video" data-fallback-src="{data-fallback-src}" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,zqt={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{title:"Image Source",type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"upload",accept:"video/*"},"data-fallback-src":{title:"Fallback Source",type:"string",default:"",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},Uqt=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:Tqt,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:Dqt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:Lqt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:Rqt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:Fqt},{name:"Tour",id:"ele-map-tour",markdown:$qt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:Mqt}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:Oqt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:Iqt},{name:"Hero Image",id:"ele-hero-image",markdown:Nqt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:Pqt},{name:"Hero Video",id:"ele-hero-video",markdown:Bqt,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:zqt}]}];class jqt extends nP{register(){super.register()}unregister(){super.unregister()}build(){const t=this.options,n=this.schema.description,r=this.theme,i=this.defaults,o=this.schema;t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const s=document.createElement("div");s.style.cssText="display: flex; gap: 10px; justify-content: center; align-items: center;";const a=document.createElement("input");a.type="text",a.value=o.default,a.addEventListener("change",()=>{this.value=a.value,this.onChange(!0)});const l=document.createElement("div");l.style.cssText="width: 2px; height: 24px; background: rgba(0, 0, 0, 0.25);";const u=document.createElement("button");u.classList.add("upload-button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="white"><path d="M440-320v-326L336-542l-56-58 200-200 200 200-56 58-104-104v326h-80ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/></svg>',u.style.padding="10px",u.addEventListener("click",f=>{f.preventDefault();const c=document.createElement("input");return c.id="upload-file-input",c.type="file",c.accept=o.accept||"image/*,video/*",c.style.display="none",c.addEventListener("change",d=>{const p=d.target.files[0];if(p){const h=document.createElement("div");h.innerText="Uploading...",h.classList.add("loader-element"),h.style.cssText="display: flex; justify-content: center; align-items: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 39, 66, 0.6); z-index: 99999999;font-weight: 500; color: white;",document.body.appendChild(h);const g=(y,v,x)=>{if(x){alert(x.message),h.remove();return}let _=this.jsoneditor.getValue();_[this.key]=y,a.value=y,v&&(_["data-fallback-src"]=v),this.jsoneditor.setValue(_),h.remove()},m=new CustomEvent("upload:file",{detail:{file:p,update:g},bubbles:!0,composed:!0});this.input.dispatchEvent(m)}c.remove()}),s.appendChild(c),c.click(),!1}),s.appendChild(a),s.appendChild(l),s.appendChild(u),this.input=s,this.input.id=this.formname,this.input.setAttribute("name",this.formname),this.input.setAttribute("value",i),this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const Hqt=[{type:"string",format:"upload",func:jqt,loaderElement:document.querySelector(".loader-element")}],qqt="@eox/storytelling",Gqt="1.7.2",Rk={name:qqt,version:Gqt};function Wqt(e,t){(e.shadowRoot||e).querySelectorAll(t).forEach(n=>{n.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),Yj(e)})})}function Yj(e){const t=window.parent.location.hash,n=t?e.shadowRoot.querySelector(t):null;if(n){const r=e.shadowRoot.querySelector(".navigation");n.style.scrollMarginTop=`calc(${(r==null?void 0:r.getBoundingClientRect().top)+(r==null?void 0:r.getBoundingClientRect().height)||e.getBoundingClientRect().top}px + 1rem)`,n.style.scrollMarginBottom="1rem",n.scrollIntoView({behavior:"smooth"})}}function Vqt(e){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(e.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function Yqt(){const e=document.createElement("style");e.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(e)}function j4(e){const t=e.split("-")[0].split(".").map(Number);let n=0;const r=1e3;for(let i=0;i<t.length;i++)n+=t[i]*Math.pow(r,t.length-i-1);return n}function Xqt(e){const t=Number(Object.keys(z4).find(r=>z4[r].length===1)),n=z4[e];if(!e||!n)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${t}).`),t;if(t===e)return e;{const r=[j4(n[0]),j4(n[1])],i=j4(Rk.version);return i>=r[0]&&i<=r[1]||console.error(`You are using an older or newer version of ${Rk.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${Rk.name} package to (>=${n[0]} and <=${n[1]}) or change the markdown syntax version to ${Rk.version}`),e}}var _3={exports:{}},Kqt=_3.exports,TTe;function Zqt(){return TTe||(TTe=1,function(e,t){(function(n,r){e.exports=r()})(Kqt,function(){function n(U,Z){if(!(U instanceof Z))throw new TypeError("Cannot call a class as a function")}function r(U,Z){for(var re=0;re<Z.length;re++){var ie=Z[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(U,o(ie.key),ie)}}function i(U,Z,re){return Z&&r(U.prototype,Z),Object.defineProperty(U,"prototype",{writable:!1}),U}function o(U){var Z=function(re,ie){if(typeof re!="object"||!re)return re;var be=re[Symbol.toPrimitive];if(be!==void 0){var Ce=be.call(re,ie);if(typeof Ce!="object")return Ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)}(U,"string");return typeof Z=="symbol"?Z:Z+""}function s(U){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(U)}var a=Date.now();function l(){var U={},Z=!0,re=0,ie=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(Z=arguments[0],re++);for(var be=function(je){for(var V in je)Object.prototype.hasOwnProperty.call(je,V)&&(Z&&Object.prototype.toString.call(je[V])==="[object Object]"?U[V]=l(!0,U[V],je[V]):U[V]=je[V])};re<ie;re++){var Ce=arguments[re];be(Ce)}return U}function u(U,Z){if((P(U)||U===window||U===document)&&(U=[U]),k(U)||D(U)||(U=[U]),j(U)!=0){if(k(U)&&!D(U))for(var re=U.length,ie=0;ie<re&&Z.call(U[ie],U[ie],ie,U)!==!1;ie++);else if(D(U)){for(var be in U)if(N(U,be)&&Z.call(U[be],U[be],be,U)===!1)break}}}function f(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ie=U[a]=U[a]||[],be={all:ie,evt:null,found:null};return Z&&re&&j(ie)>0&&u(ie,function(Ce,je){if(Ce.eventName==Z&&Ce.fn.toString()==re.toString())return be.found=!0,be.evt=je,!1}),be}function c(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=Z.onElement,ie=Z.withCallback,be=Z.avoidDuplicate,Ce=be===void 0||be,je=Z.once,V=je!==void 0&&je,fe=Z.useCapture,he=fe!==void 0&&fe,me=arguments.length>2?arguments[2]:void 0,Oe=re||[];function Me(Be){L(ie)&&ie.call(me,Be,this),V&&Me.destroy()}return B(Oe)&&(Oe=document.querySelectorAll(Oe)),Me.destroy=function(){u(Oe,function(Be){var We=f(Be,U,Me);We.found&&We.all.splice(We.evt,1),Be.removeEventListener&&Be.removeEventListener(U,Me,he)})},u(Oe,function(Be){var We=f(Be,U,Me);(Be.addEventListener&&Ce&&!We.found||!Ce)&&(Be.addEventListener(U,Me,he),We.all.push({eventName:U,fn:Me}))}),Me}function d(U,Z){u(Z.split(" "),function(re){return U.classList.add(re)})}function p(U,Z){u(Z.split(" "),function(re){return U.classList.remove(re)})}function h(U,Z){return U.classList.contains(Z)}function g(U,Z){for(;U!==document.body;){if(!(U=U.parentElement))return!1;if(typeof U.matches=="function"?U.matches(Z):U.msMatchesSelector(Z))return U}}function m(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",re=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!U||Z==="")return!1;if(Z==="none")return L(re)&&re(),!1;var ie=C(),be=Z.split(" ");u(be,function(Ce){d(U,"g"+Ce)}),c(ie,{onElement:U,avoidDuplicate:!1,once:!0,withCallback:function(Ce,je){u(be,function(V){p(je,"g"+V)}),L(re)&&re()}})}function y(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Z==="")return U.style.webkitTransform="",U.style.MozTransform="",U.style.msTransform="",U.style.OTransform="",U.style.transform="",!1;U.style.webkitTransform=Z,U.style.MozTransform=Z,U.style.msTransform=Z,U.style.OTransform=Z,U.style.transform=Z}function v(U){U.style.display="block"}function x(U){U.style.display="none"}function _(U){var Z=document.createDocumentFragment(),re=document.createElement("div");for(re.innerHTML=U;re.firstChild;)Z.appendChild(re.firstChild);return Z}function E(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function C(){var U,Z=document.createElement("fakeelement"),re={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(U in re)if(Z.style[U]!==void 0)return re[U]}function w(U,Z,re,ie){if(U())Z();else{var be;re||(re=100);var Ce=setInterval(function(){U()&&(clearInterval(Ce),be&&clearTimeout(be),Z())},re)}}function T(U,Z,re){if(O(U))console.error("Inject assets error");else if(L(Z)&&(re=Z,Z=!1),B(Z)&&Z in window)L(re)&&re();else{var ie;if(U.indexOf(".css")!==-1){if((ie=document.querySelectorAll('link[href="'+U+'"]'))&&ie.length>0)return void(L(re)&&re());var be=document.getElementsByTagName("head")[0],Ce=be.querySelectorAll('link[rel="stylesheet"]'),je=document.createElement("link");return je.rel="stylesheet",je.type="text/css",je.href=U,je.media="all",Ce?be.insertBefore(je,Ce[0]):be.appendChild(je),void(L(re)&&re())}if((ie=document.querySelectorAll('script[src="'+U+'"]'))&&ie.length>0){if(L(re)){if(B(Z))return w(function(){return window[Z]!==void 0},function(){re()}),!1;re()}}else{var V=document.createElement("script");V.type="text/javascript",V.src=U,V.onload=function(){if(L(re)){if(B(Z))return w(function(){return window[Z]!==void 0},function(){re()}),!1;re()}},document.body.appendChild(V)}}}function R(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function L(U){return typeof U=="function"}function B(U){return typeof U=="string"}function P(U){return!(!U||!U.nodeType||U.nodeType!=1)}function S(U){return Array.isArray(U)}function k(U){return U&&U.length&&isFinite(U.length)}function D(U){return s(U)==="object"&&U!=null&&!L(U)&&!S(U)}function O(U){return U==null}function N(U,Z){return U!==null&&hasOwnProperty.call(U,Z)}function j(U){if(D(U)){if(U.keys)return U.keys().length;var Z=0;for(var re in U)N(U,re)&&Z++;return Z}return U.length}function q(U){return!isNaN(parseFloat(U))&&isFinite(U)}function W(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,Z=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!Z.length)return!1;if(Z.length==1)return Z[0];typeof U=="string"&&(U=parseInt(U));var re=[];u(Z,function(V){re.push(V.getAttribute("data-taborder"))});var ie=Math.max.apply(Math,re.map(function(V){return parseInt(V)})),be=U<0?1:U+1;be>ie&&(be="1");var Ce=re.filter(function(V){return V>=parseInt(be)}),je=Ce.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(je,'"]'))}function Q(U){if(U.events.hasOwnProperty("keyboard"))return!1;U.events.keyboard=c("keydown",{onElement:window,withCallback:function(Z,re){var ie=(Z=Z||window.event).keyCode;if(ie==9){var be=document.querySelector(".gbtn.focused");if(!be){var Ce=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(Ce=="input"||Ce=="textarea"||Ce=="button")return}Z.preventDefault();var je=document.querySelectorAll(".gbtn[data-taborder]");if(!je||je.length<=0)return;if(!be){var V=W();return void(V&&(V.focus(),d(V,"focused")))}var fe=W(be.getAttribute("data-taborder"));p(be,"focused"),fe&&(fe.focus(),d(fe,"focused"))}ie==39&&U.nextSlide(),ie==37&&U.prevSlide(),ie==27&&U.close()}})}var ee=i(function U(Z,re){var ie=this,be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(n(this,U),this.img=Z,this.slide=re,this.onclose=be,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(Ce){return ie.dragStart(Ce)},!1),this.img.addEventListener("mouseup",function(Ce){return ie.dragEnd(Ce)},!1),this.img.addEventListener("mousemove",function(Ce){return ie.drag(Ce)},!1),this.img.addEventListener("click",function(Ce){return ie.slide.classList.contains("dragging-nav")?(ie.zoomOut(),!1):ie.zoomedIn?void(ie.zoomedIn&&!ie.dragging&&ie.zoomOut()):ie.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var U=this.widowWidth();if(!(this.zoomedIn||U<=768)){var Z=this.img;if(Z.setAttribute("data-style",Z.getAttribute("style")),Z.style.maxWidth=Z.naturalWidth+"px",Z.style.maxHeight=Z.naturalHeight+"px",Z.naturalWidth>U){var re=U/2-Z.naturalWidth/2;this.setTranslate(this.img.parentNode,re,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(U){U.preventDefault(),this.zoomedIn?(U.type==="touchstart"?(this.initialX=U.touches[0].clientX-this.xOffset,this.initialY=U.touches[0].clientY-this.yOffset):(this.initialX=U.clientX-this.xOffset,this.initialY=U.clientY-this.yOffset),U.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(U){var Z=this;U.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){Z.dragging=!1,Z.img.isDragging=!1,Z.img.classList.remove("dragging")},100)}},{key:"drag",value:function(U){this.active&&(U.preventDefault(),U.type==="touchmove"?(this.currentX=U.touches[0].clientX-this.initialX,this.currentY=U.touches[0].clientY-this.initialY):(this.currentX=U.clientX-this.initialX,this.currentY=U.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(U){if(this.zoomedIn){var Z=U.clientX-this.img.naturalWidth/2,re=U.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,Z,re)}}},{key:"setTranslate",value:function(U,Z,re){U.style.transform="translate3d("+Z+"px, "+re+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),H=i(function U(){var Z=this,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,U);var ie=re.dragEl,be=re.toleranceX,Ce=be===void 0?40:be,je=re.toleranceY,V=je===void 0?65:je,fe=re.slide,he=fe===void 0?null:fe,me=re.instance,Oe=me===void 0?null:me;this.el=ie,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=Ce,this.toleranceY=V,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=he,this.instance=Oe,this.el.addEventListener("mousedown",function(Me){return Z.dragStart(Me)},!1),this.el.addEventListener("mouseup",function(Me){return Z.dragEnd(Me)},!1),this.el.addEventListener("mousemove",function(Me){return Z.drag(Me)},!1)},[{key:"dragStart",value:function(U){if(this.slide.classList.contains("zoomed"))this.active=!1;else{U.type==="touchstart"?(this.initialX=U.touches[0].clientX-this.xOffset,this.initialY=U.touches[0].clientY-this.yOffset):(this.initialX=U.clientX-this.xOffset,this.initialY=U.clientY-this.yOffset);var Z=U.target.nodeName.toLowerCase();U.target.classList.contains("nodrag")||g(U.target,".nodrag")||["input","select","textarea","button","a"].indexOf(Z)!==-1?this.active=!1:(U.preventDefault(),(U.target===this.el||Z!=="img"&&g(U.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=g(U.target,".ginner-container")))}}},{key:"dragEnd",value:function(U){var Z=this;U&&U.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){Z.instance.preventOutsideClick=!1,Z.toleranceReached=!1,Z.lastDirection=null,Z.dragging=!1,Z.el.isDragging=!1,Z.el.classList.remove("dragging"),Z.slide.classList.remove("dragging-nav"),Z.dragContainer.style.transform="",Z.dragContainer.style.transition=""},100)}},{key:"drag",value:function(U){if(this.active){U.preventDefault(),this.slide.classList.add("dragging-nav"),U.type==="touchmove"?(this.currentX=U.touches[0].clientX-this.initialX,this.currentY=U.touches[0].clientY-this.initialY):(this.currentX=U.clientX-this.initialX,this.currentY=U.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var Z=Math.abs(this.currentX),re=Math.abs(this.currentY);if(Z>0&&Z>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var ie=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&ie&&(this.doSlideChange=ie),this.instance.settings.dragAutoSnap&&ie)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),ie=="right"&&this.instance.prevSlide(),void(ie=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&re>0&&re>=Z&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var be=this.shouldClose();return!this.instance.settings.dragAutoSnap&&be&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&be&&this.instance.close())}}}},{key:"shouldChange",value:function(){var U=!1;if(Math.abs(this.currentX)>=this.toleranceX){var Z=this.currentX>0?"right":"left";(Z=="left"&&this.slide!==this.slide.parentNode.lastChild||Z=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(U=Z)}return U}},{key:"shouldClose",value:function(){var U=!1;return Math.abs(this.currentY)>=this.toleranceY&&(U=!0),U}},{key:"setTranslate",value:function(U,Z,re){var ie=arguments.length>3&&arguments[3]!==void 0&&arguments[3];U.style.transition=ie?"all .2s ease":"",U.style.transform="translate3d(".concat(Z,"px, ").concat(re,"px, 0)")}}]);function se(U,Z,re,ie){var be=U.querySelector(".gslide-media"),Ce=new Image,je="gSlideTitle_"+re,V="gSlideDesc_"+re;Ce.addEventListener("load",function(){L(ie)&&ie()},!1),Ce.src=Z.href,Z.sizes!=""&&Z.srcset!=""&&(Ce.sizes=Z.sizes,Ce.srcset=Z.srcset),Ce.alt="",O(Z.alt)||Z.alt===""||(Ce.alt=Z.alt),Z.title!==""&&Ce.setAttribute("aria-labelledby",je),Z.description!==""&&Ce.setAttribute("aria-describedby",V),Z.hasOwnProperty("_hasCustomWidth")&&Z._hasCustomWidth&&(Ce.style.width=Z.width),Z.hasOwnProperty("_hasCustomHeight")&&Z._hasCustomHeight&&(Ce.style.height=Z.height),be.insertBefore(Ce,be.firstChild)}function ne(U,Z,re,ie){var be=this,Ce=U.querySelector(".ginner-container"),je="gvideo"+re,V=U.querySelector(".gslide-media"),fe=this.getAllPlayers();d(Ce,"gvideo-container"),V.insertBefore(_('<div class="gvideo-wrapper"></div>'),V.firstChild);var he=U.querySelector(".gvideo-wrapper");T(this.settings.plyr.css,"Plyr");var me=Z.href,Oe=Z==null?void 0:Z.videoProvider,Me=!1;V.style.maxWidth=Z.width,T(this.settings.plyr.js,"Plyr",function(){if(!Oe&&me.match(/vimeo\.com\/([0-9]*)/)&&(Oe="vimeo"),!Oe&&(me.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||me.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||me.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||me.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(Oe="youtube"),Oe==="local"||!Oe){Oe="local";var Be='<video id="'+je+'" ';Be+='style="background:#000; max-width: '.concat(Z.width,';" '),Be+='preload="metadata" ',Be+='x-webkit-airplay="allow" ',Be+="playsinline ",Be+="controls ",Be+='class="gvideo-local">',Be+='<source src="'.concat(me,'">'),Me=_(Be+="</video>")}var We=Me||_('<div id="'.concat(je,'" data-plyr-provider="').concat(Oe,'" data-plyr-embed-id="').concat(me,'"></div>'));d(he,"".concat(Oe,"-video gvideo")),he.appendChild(We),he.setAttribute("data-id",je),he.setAttribute("data-index",re);var Qe=N(be.settings.plyr,"config")?be.settings.plyr.config:{},ut=new Plyr("#"+je,Qe);ut.on("ready",function(Tt){fe[je]=Tt.detail.plyr,L(ie)&&ie()}),w(function(){return U.querySelector("iframe")&&U.querySelector("iframe").dataset.ready=="true"},function(){be.resize(U)}),ut.on("enterfullscreen",ge),ut.on("exitfullscreen",ge)})}function ge(U){var Z=g(U.target,".gslide-media");U.type==="enterfullscreen"&&d(Z,"fullscreen"),U.type==="exitfullscreen"&&p(Z,"fullscreen")}function we(U,Z,re,ie){var be,Ce=this,je=U.querySelector(".gslide-media"),V=!(!N(Z,"href")||!Z.href)&&Z.href.split("#").pop().trim(),fe=!(!N(Z,"content")||!Z.content)&&Z.content;if(fe&&(B(fe)&&(be=_('<div class="ginlined-content">'.concat(fe,"</div>"))),P(fe))){fe.style.display=="none"&&(fe.style.display="block");var he=document.createElement("div");he.className="ginlined-content",he.appendChild(fe),be=he}if(V){var me=document.getElementById(V);if(!me)return!1;var Oe=me.cloneNode(!0);Oe.style.height=Z.height,Oe.style.maxWidth=Z.width,d(Oe,"ginlined-content"),be=Oe}if(!be)return console.error("Unable to append inline slide content",Z),!1;je.style.height=Z.height,je.style.width=Z.width,je.appendChild(be),this.events["inlineclose"+V]=c("click",{onElement:je.querySelectorAll(".gtrigger-close"),withCallback:function(Me){Me.preventDefault(),Ce.close()}}),L(ie)&&ie()}function $e(U,Z,re,ie){var be=U.querySelector(".gslide-media"),Ce=function(je){var V=je.url,fe=je.allow,he=je.callback,me=je.appendTo,Oe=document.createElement("iframe");return Oe.className="vimeo-video gvideo",Oe.src=V,Oe.style.width="100%",Oe.style.height="100%",fe&&Oe.setAttribute("allow",fe),Oe.onload=function(){Oe.onload=null,d(Oe,"node-ready"),L(he)&&he()},me&&me.appendChild(Oe),Oe}({url:Z.href,callback:ie});be.parentNode.style.maxWidth=Z.width,be.parentNode.style.height=Z.height,be.appendChild(Ce)}var ve=i(function U(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,U),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},D(Z)&&(this.defaults=l(this.defaults,Z))},[{key:"sourceType",value:function(U){var Z=U;return(U=U.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":U.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||U.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||U.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||U.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||U.match(/vimeo\.com\/([0-9]*)/)||U.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":U.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":U.indexOf("#")>-1&&Z.split("#").pop().trim()!==""?"inline":U.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(U,Z){var re=this,ie=l({descPosition:Z.descPosition},this.defaults);if(D(U)&&!P(U)){N(U,"type")||(N(U,"content")&&U.content?U.type="inline":N(U,"href")&&(U.type=this.sourceType(U.href)));var be=l(ie,U);return this.setSize(be,Z),be}var Ce="",je=U.getAttribute("data-glightbox"),V=U.nodeName.toLowerCase();if(V==="a"&&(Ce=U.href),V==="img"&&(Ce=U.src,ie.alt=U.alt),ie.href=Ce,u(ie,function(Be,We){N(Z,We)&&We!=="width"&&(ie[We]=Z[We]);var Qe=U.dataset[We];O(Qe)||(ie[We]=re.sanitizeValue(Qe))}),ie.content&&(ie.type="inline"),!ie.type&&Ce&&(ie.type=this.sourceType(Ce)),O(je)){if(!ie.title&&V=="a"){var fe=U.title;O(fe)||fe===""||(ie.title=fe)}if(!ie.title&&V=="img"){var he=U.alt;O(he)||he===""||(ie.title=he)}}else{var me=[];u(ie,function(Be,We){me.push(";\\s?"+We)}),me=me.join("\\s?:|"),je.trim()!==""&&u(ie,function(Be,We){var Qe=je,ut=new RegExp("s?"+We+"s?:s?(.*?)("+me+"s?:|$)"),Tt=Qe.match(ut);if(Tt&&Tt.length&&Tt[1]){var Ut=Tt[1].trim().replace(/;\s*$/,"");ie[We]=re.sanitizeValue(Ut)}})}if(ie.description&&ie.description.substring(0,1)==="."){var Oe;try{Oe=document.querySelector(ie.description).innerHTML}catch(Be){if(!(Be instanceof DOMException))throw Be}Oe&&(ie.description=Oe)}if(!ie.description){var Me=U.querySelector(".glightbox-desc");Me&&(ie.description=Me.innerHTML)}return this.setSize(ie,Z,U),this.slideConfig=ie,ie}},{key:"setSize",value:function(U,Z){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ie=U.type=="video"?this.checkSize(Z.videosWidth):this.checkSize(Z.width),be=this.checkSize(Z.height);return U.width=N(U,"width")&&U.width!==""?this.checkSize(U.width):ie,U.height=N(U,"height")&&U.height!==""?this.checkSize(U.height):be,re&&U.type=="image"&&(U._hasCustomWidth=!!re.dataset.width,U._hasCustomHeight=!!re.dataset.height),U}},{key:"checkSize",value:function(U){return q(U)?"".concat(U,"px"):U}},{key:"sanitizeValue",value:function(U){return U!=="true"&&U!=="false"?U:U==="true"}}]),Ee=i(function U(Z,re,ie){n(this,U),this.element=Z,this.instance=re,this.index=ie},[{key:"setContent",value:function(){var U=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,re=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(h(Z,"loaded"))return!1;var ie=this.instance.settings,be=this.slideConfig,Ce=R();L(ie.beforeSlideLoad)&&ie.beforeSlideLoad({index:this.index,slide:Z,player:!1});var je=be.type,V=be.descPosition,fe=Z.querySelector(".gslide-media"),he=Z.querySelector(".gslide-title"),me=Z.querySelector(".gslide-desc"),Oe=Z.querySelector(".gdesc-inner"),Me=re,Be="gSlideTitle_"+this.index,We="gSlideDesc_"+this.index;if(L(ie.afterSlideLoad)&&(Me=function(){L(re)&&re(),ie.afterSlideLoad({index:U.index,slide:Z,player:U.instance.getSlidePlayerInstance(U.index)})}),be.title==""&&be.description==""?Oe&&Oe.parentNode.parentNode.removeChild(Oe.parentNode):(he&&be.title!==""?(he.id=Be,he.innerHTML=be.title):he.parentNode.removeChild(he),me&&be.description!==""?(me.id=We,Ce&&ie.moreLength>0?(be.smallDescription=this.slideShortDesc(be.description,ie.moreLength,ie.moreText),me.innerHTML=be.smallDescription,this.descriptionEvents(me,be)):me.innerHTML=be.description):me.parentNode.removeChild(me),d(fe.parentNode,"desc-".concat(V)),d(Oe.parentNode,"description-".concat(V))),d(fe,"gslide-".concat(je)),d(Z,"loaded"),je!=="video"){if(je!=="external")return je==="inline"?(we.apply(this.instance,[Z,be,this.index,Me]),void(be.draggable&&new H({dragEl:Z.querySelector(".gslide-inline"),toleranceX:ie.dragToleranceX,toleranceY:ie.dragToleranceY,slide:Z,instance:this.instance}))):void(je!=="image"?L(Me)&&Me():se(Z,be,this.index,function(){var Qe=Z.querySelector("img");be.draggable&&new H({dragEl:Qe,toleranceX:ie.dragToleranceX,toleranceY:ie.dragToleranceY,slide:Z,instance:U.instance}),be.zoomable&&Qe.naturalWidth>Qe.offsetWidth&&(d(Qe,"zoomable"),new ee(Qe,Z,function(){U.instance.resize()})),L(Me)&&Me()}));$e.apply(this,[Z,be,this.index,Me])}else ne.apply(this.instance,[Z,be,this.index,Me])}},{key:"slideShortDesc",value:function(U){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ie=document.createElement("div");ie.innerHTML=U;var be=ie.innerText,Ce=re;if((U=be.trim()).length<=Z)return U;var je=U.substr(0,Z-1);return Ce?(ie=null,je+'... <a href="#" class="desc-more">'+re+"</a>"):je}},{key:"descriptionEvents",value:function(U,Z){var re=this,ie=U.querySelector(".desc-more");if(!ie)return!1;c("click",{onElement:ie,withCallback:function(be,Ce){be.preventDefault();var je=document.body,V=g(Ce,".gslide-desc");if(!V)return!1;V.innerHTML=Z.description,d(je,"gdesc-open");var fe=c("click",{onElement:[je,g(V,".gslide-description")],withCallback:function(he,me){he.target.nodeName.toLowerCase()!=="a"&&(p(je,"gdesc-open"),d(je,"gdesc-closed"),V.innerHTML=Z.smallDescription,re.descriptionEvents(V,Z),setTimeout(function(){p(je,"gdesc-closed")},400),fe.destroy())}})}})}},{key:"create",value:function(){return _(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){P(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var U=new ve(this.instance.settings.slideExtraAttributes);return this.slideConfig=U.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function Ve(U){return Math.sqrt(U.x*U.x+U.y*U.y)}function Ue(U,Z){var re=function(ie,be){var Ce=Ve(ie)*Ve(be);if(Ce===0)return 0;var je=function(V,fe){return V.x*fe.x+V.y*fe.y}(ie,be)/Ce;return je>1&&(je=1),Math.acos(je)}(U,Z);return function(ie,be){return ie.x*be.y-be.x*ie.y}(U,Z)>0&&(re*=-1),180*re/Math.PI}var ft=i(function U(Z){n(this,U),this.handlers=[],this.el=Z},[{key:"add",value:function(U){this.handlers.push(U)}},{key:"del",value:function(U){U||(this.handlers=[]);for(var Z=this.handlers.length;Z>=0;Z--)this.handlers[Z]===U&&this.handlers.splice(Z,1)}},{key:"dispatch",value:function(){for(var U=0,Z=this.handlers.length;U<Z;U++){var re=this.handlers[U];typeof re=="function"&&re.apply(this.el,arguments)}}}]);function ht(U,Z){var re=new ft(U);return re.add(Z),re}var zt=i(function U(Z,re){n(this,U),this.element=typeof Z=="string"?document.querySelector(Z):Z,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var ie=function(){};this.rotate=ht(this.element,re.rotate||ie),this.touchStart=ht(this.element,re.touchStart||ie),this.multipointStart=ht(this.element,re.multipointStart||ie),this.multipointEnd=ht(this.element,re.multipointEnd||ie),this.pinch=ht(this.element,re.pinch||ie),this.swipe=ht(this.element,re.swipe||ie),this.tap=ht(this.element,re.tap||ie),this.doubleTap=ht(this.element,re.doubleTap||ie),this.longTap=ht(this.element,re.longTap||ie),this.singleTap=ht(this.element,re.singleTap||ie),this.pressMove=ht(this.element,re.pressMove||ie),this.twoFingerPressMove=ht(this.element,re.twoFingerPressMove||ie),this.touchMove=ht(this.element,re.touchMove||ie),this.touchEnd=ht(this.element,re.touchEnd||ie),this.touchCancel=ht(this.element,re.touchCancel||ie),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(U){if(U.touches)if(U.target&&U.target.nodeName&&["a","button","input"].indexOf(U.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",U.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=U.touches[0].pageX,this.y1=U.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(U,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var Z=this.preV;if(U.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var re={x:U.touches[1].pageX-this.x1,y:U.touches[1].pageY-this.y1};Z.x=re.x,Z.y=re.y,this.pinchStartLen=Ve(Z),this.multipointStart.dispatch(U,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(U,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(U){if(U.touches){var Z=this.preV,re=U.touches.length,ie=U.touches[0].pageX,be=U.touches[0].pageY;if(this.isDoubleTap=!1,re>1){var Ce=U.touches[1].pageX,je=U.touches[1].pageY,V={x:U.touches[1].pageX-ie,y:U.touches[1].pageY-be};Z.x!==null&&(this.pinchStartLen>0&&(U.zoom=Ve(V)/this.pinchStartLen,this.pinch.dispatch(U,this.element)),U.angle=Ue(V,Z),this.rotate.dispatch(U,this.element)),Z.x=V.x,Z.y=V.y,this.x2!==null&&this.sx2!==null?(U.deltaX=(ie-this.x2+Ce-this.sx2)/2,U.deltaY=(be-this.y2+je-this.sy2)/2):(U.deltaX=0,U.deltaY=0),this.twoFingerPressMove.dispatch(U,this.element),this.sx2=Ce,this.sy2=je}else{if(this.x2!==null){U.deltaX=ie-this.x2,U.deltaY=be-this.y2;var fe=Math.abs(this.x1-this.x2),he=Math.abs(this.y1-this.y2);(fe>10||he>10)&&(this._preventTap=!0)}else U.deltaX=0,U.deltaY=0;this.pressMove.dispatch(U,this.element)}this.touchMove.dispatch(U,this.element),this._cancelLongTap(),this.x2=ie,this.y2=be,re>1&&U.preventDefault()}}},{key:"end",value:function(U){if(U.changedTouches){this._cancelLongTap();var Z=this;U.touches.length<2&&(this.multipointEnd.dispatch(U,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(U.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){Z.swipe.dispatch(U,Z.element)},0)):(this.tapTimeout=setTimeout(function(){Z._preventTap||Z.tap.dispatch(U,Z.element),Z.isDoubleTap&&(Z.doubleTap.dispatch(U,Z.element),Z.isDoubleTap=!1)},0),Z.isDoubleTap||(Z.singleTapTimeout=setTimeout(function(){Z.singleTap.dispatch(U,Z.element)},250))),this.touchEnd.dispatch(U,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(U){this.cancelAll(),this.touchCancel.dispatch(U,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(U,Z,re,ie){return Math.abs(U-Z)>=Math.abs(re-ie)?U-Z>0?"Left":"Right":re-ie>0?"Up":"Down"}},{key:"on",value:function(U,Z){this[U]&&this[U].add(Z)}},{key:"off",value:function(U,Z){this[U]&&this[U].del(Z)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function $t(U){var Z=function(){var je,V=document.createElement("fakeelement"),fe={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(je in fe)if(V.style[je]!==void 0)return fe[je]}(),re=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,ie=h(U,"gslide-media")?U:U.querySelector(".gslide-media"),be=g(ie,".ginner-container"),Ce=U.querySelector(".gslide-description");re>769&&(ie=be),d(ie,"greset"),y(ie,"translate3d(0, 0, 0)"),c(Z,{onElement:ie,once:!0,withCallback:function(je,V){p(ie,"greset")}}),ie.style.opacity="",Ce&&(Ce.style.opacity="")}function Tn(U){if(U.events.hasOwnProperty("touch"))return!1;var Z,re,ie,be=E(),Ce=be.width,je=be.height,V=!1,fe=null,he=null,me=null,Oe=!1,Me=1,Be=1,We=!1,Qe=!1,ut=null,Tt=null,Ut=null,Kt=null,Pt=0,bn=0,_n=!1,un=!1,Wn={},qn={},wr=0,Ao=0,Gi=document.getElementById("glightbox-slider"),_i=document.querySelector(".goverlay"),$s=new zt(Gi,{touchStart:function(tr){if(V=!0,(h(tr.targetTouches[0].target,"ginner-container")||g(tr.targetTouches[0].target,".gslide-desc")||tr.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(V=!1),g(tr.targetTouches[0].target,".gslide-inline")&&!h(tr.targetTouches[0].target.parentNode,"gslide-inline")&&(V=!1),V){if(qn=tr.targetTouches[0],Wn.pageX=tr.targetTouches[0].pageX,Wn.pageY=tr.targetTouches[0].pageY,wr=tr.targetTouches[0].clientX,Ao=tr.targetTouches[0].clientY,fe=U.activeSlide,he=fe.querySelector(".gslide-media"),ie=fe.querySelector(".gslide-inline"),me=null,h(he,"gslide-image")&&(me=he.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(he=fe.querySelector(".ginner-container")),p(_i,"greset"),tr.pageX>20&&tr.pageX<window.innerWidth-20)return;tr.preventDefault()}},touchMove:function(tr){if(V&&(qn=tr.targetTouches[0],!We&&!Qe)){if(ie&&ie.offsetHeight>je){var yi=Wn.pageX-qn.pageX;if(Math.abs(yi)<=13)return!1}Oe=!0;var pi,_r=tr.targetTouches[0].clientX,uo=tr.targetTouches[0].clientY,Or=wr-_r,go=Ao-uo;if(Math.abs(Or)>Math.abs(go)?(_n=!1,un=!0):(un=!1,_n=!0),Z=qn.pageX-Wn.pageX,Pt=100*Z/Ce,re=qn.pageY-Wn.pageY,bn=100*re/je,_n&&me&&(pi=1-Math.abs(re)/je,_i.style.opacity=pi,U.settings.touchFollowAxis&&(Pt=0)),un&&(pi=1-Math.abs(Z)/Ce,he.style.opacity=pi,U.settings.touchFollowAxis&&(bn=0)),!me)return y(he,"translate3d(".concat(Pt,"%, 0, 0)"));y(he,"translate3d(".concat(Pt,"%, ").concat(bn,"%, 0)"))}},touchEnd:function(){if(V){if(Oe=!1,Qe||We)return Ut=ut,void(Kt=Tt);var tr=Math.abs(parseInt(bn)),yi=Math.abs(parseInt(Pt));if(!(tr>29&&me))return tr<29&&yi<25?(d(_i,"greset"),_i.style.opacity=1,$t(he)):void 0;U.close()}},multipointEnd:function(){setTimeout(function(){We=!1},50)},multipointStart:function(){We=!0,Me=Be||1},pinch:function(tr){if(!me||Oe)return!1;We=!0,me.scaleX=me.scaleY=Me*tr.zoom;var yi=Me*tr.zoom;if(Qe=!0,yi<=1)return Qe=!1,yi=1,Kt=null,Ut=null,ut=null,Tt=null,void me.setAttribute("style","");yi>4.5&&(yi=4.5),me.style.transform="scale3d(".concat(yi,", ").concat(yi,", 1)"),Be=yi},pressMove:function(tr){if(Qe&&!We){var yi=qn.pageX-Wn.pageX,pi=qn.pageY-Wn.pageY;Ut&&(yi+=Ut),Kt&&(pi+=Kt),ut=yi,Tt=pi;var _r="translate3d(".concat(yi,"px, ").concat(pi,"px, 0)");Be&&(_r+=" scale3d(".concat(Be,", ").concat(Be,", 1)")),y(me,_r)}},swipe:function(tr){if(!Qe)if(We)We=!1;else{if(tr.direction=="Left"){if(U.index==U.elements.length-1)return $t(he);U.nextSlide()}if(tr.direction=="Right"){if(U.index==0)return $t(he);U.prevSlide()}}}});U.events.touch=$s}var it=R(),Te=R()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,ye=document.getElementsByTagName("html")[0],Se={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},Re=i(function U(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,U),this.customOptions=Z,this.settings=l(Se,Z),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var U=this,Z=this.getSelector();Z&&(this.baseEvents=c("click",{onElement:Z,withCallback:function(re,ie){re.preventDefault(),U.open(ie)}})),this.elements=this.getElements()}},{key:"open",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var re=q(Z)?Z:this.settings.startAt;if(P(U)){var ie=U.getAttribute("data-gallery");ie&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,ie)),O(re)&&(re=this.getElementIndex(U))<0&&(re=0)}q(re)||(re=0),this.build(),m(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var be=document.body,Ce=window.innerWidth-document.documentElement.clientWidth;if(Ce>0){var je=document.createElement("style");je.type="text/css",je.className="gcss-styles",je.innerText=".gscrollbar-fixer {margin-right: ".concat(Ce,"px}"),document.head.appendChild(je),d(be,"gscrollbar-fixer")}d(be,"glightbox-open"),d(ye,"glightbox-open"),it&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(re,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(p(this.prevButton,"glightbox-button-hidden"),p(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),L(this.settings.onOpen)&&this.settings.onOpen(),Te&&this.settings.touchNavigation&&Tn(this),this.settings.keyboardNavigation&&Q(this)}},{key:"openAt",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,U)}},{key:"showSlide",value:function(){var U=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,re=arguments.length>1&&arguments[1]!==void 0&&arguments[1];v(this.loader),this.index=parseInt(Z);var ie=this.slidesContainer.querySelector(".current");ie&&p(ie,"current"),this.slideAnimateOut();var be=this.slidesContainer.querySelectorAll(".gslide")[Z];if(h(be,"loaded"))this.slideAnimateIn(be,re),x(this.loader);else{v(this.loader);var Ce=this.elements[Z],je={index:this.index,slide:be,slideNode:be,slideConfig:Ce.slideConfig,slideIndex:this.index,trigger:Ce.node,player:null};this.trigger("slide_before_load",je),Ce.instance.setContent(be,function(){x(U.loader),U.resize(),U.slideAnimateIn(be,re),U.trigger("slide_after_load",je)})}this.slideDescription=be.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&h(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(Z+1),this.preloadSlide(Z-1)),this.updateNavigationClasses(),this.activeSlide=be}},{key:"preloadSlide",value:function(U){var Z=this;if(U<0||U>this.elements.length-1||O(this.elements[U]))return!1;var re=this.slidesContainer.querySelectorAll(".gslide")[U];if(h(re,"loaded"))return!1;var ie=this.elements[U],be=ie.type,Ce={index:U,slide:re,slideNode:re,slideConfig:ie.slideConfig,slideIndex:U,trigger:ie.node,player:null};this.trigger("slide_before_load",Ce),be==="video"||be==="external"?setTimeout(function(){ie.instance.setContent(re,function(){Z.trigger("slide_after_load",Ce)})},200):ie.instance.setContent(re,function(){Z.trigger("slide_after_load",Ce)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(U<0||U>this.elements.length-1))return!1;U<0?U=this.elements.length-1:U>=this.elements.length&&(U=0),this.showSlide(U)}},{key:"insertSlide",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;Z<0&&(Z=this.elements.length);var re=new Ee(U,this,Z),ie=re.getConfig(),be=l({},ie),Ce=re.create(),je=this.elements.length-1;be.index=Z,be.node=!1,be.instance=re,be.slideConfig=ie,this.elements.splice(Z,0,be);var V=null,fe=null;if(this.slidesContainer){if(Z>je)this.slidesContainer.appendChild(Ce);else{var he=this.slidesContainer.querySelectorAll(".gslide")[Z];this.slidesContainer.insertBefore(Ce,he)}(this.settings.preload&&this.index==0&&Z==0||this.index-1==Z||this.index+1==Z)&&this.preloadSlide(Z),this.index===0&&Z===0&&(this.index=1),this.updateNavigationClasses(),V=this.slidesContainer.querySelectorAll(".gslide")[Z],fe=this.getSlidePlayerInstance(Z),be.slideNode=V}this.trigger("slide_inserted",{index:Z,slide:V,slideNode:V,slideConfig:ie,slideIndex:Z,trigger:null,player:fe}),L(this.settings.slideInserted)&&this.settings.slideInserted({index:Z,slide:V,player:fe})}},{key:"removeSlide",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(U<0||U>this.elements.length-1)return!1;var Z=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[U];Z&&(this.getActiveSlideIndex()==U&&(U==this.elements.length-1?this.prevSlide():this.nextSlide()),Z.parentNode.removeChild(Z)),this.elements.splice(U,1),this.trigger("slide_removed",U),L(this.settings.slideRemoved)&&this.settings.slideRemoved(U)}},{key:"slideAnimateIn",value:function(U,Z){var re=this,ie=U.querySelector(".gslide-media"),be=U.querySelector(".gslide-description"),Ce={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:O(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:O(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},je={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(ie.offsetWidth>0&&be&&(x(be),be.style.display=""),p(U,this.effectsClasses),Z)m(U,this.settings.cssEfects[this.settings.openEffect].in,function(){re.settings.autoplayVideos&&re.slidePlayerPlay(U),re.trigger("slide_changed",{prev:Ce,current:je}),L(re.settings.afterSlideChange)&&re.settings.afterSlideChange.apply(re,[Ce,je])});else{var V=this.settings.slideEffect,fe=V!=="none"?this.settings.cssEfects[V].in:V;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(fe=this.settings.cssEfects.slideBack.in),m(U,fe,function(){re.settings.autoplayVideos&&re.slidePlayerPlay(U),re.trigger("slide_changed",{prev:Ce,current:je}),L(re.settings.afterSlideChange)&&re.settings.afterSlideChange.apply(re,[Ce,je])})}setTimeout(function(){re.resize(U)},100),d(U,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var U=this.prevActiveSlide;p(U,this.effectsClasses),d(U,"prev");var Z=this.settings.slideEffect,re=Z!=="none"?this.settings.cssEfects[Z].out:Z;this.slidePlayerPause(U),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:O(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:O(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),L(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(re=this.settings.cssEfects.slideBack.out),m(U,re,function(){var ie=U.querySelector(".ginner-container"),be=U.querySelector(".gslide-media"),Ce=U.querySelector(".gslide-description");ie.style.transform="",be.style.transform="",p(be,"greset"),be.style.opacity="",Ce&&(Ce.style.opacity=""),p(U,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(U){var Z="gvideo"+U,re=this.getAllPlayers();return!(!N(re,Z)||!re[Z])&&re[Z]}},{key:"stopSlideVideo",value:function(U){if(P(U)){var Z=U.querySelector(".gvideo-wrapper");Z&&(U=Z.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var re=this.getSlidePlayerInstance(U);re&&re.playing&&re.pause()}},{key:"slidePlayerPause",value:function(U){if(P(U)){var Z=U.querySelector(".gvideo-wrapper");Z&&(U=Z.getAttribute("data-index"))}var re=this.getSlidePlayerInstance(U);re&&re.playing&&re.pause()}},{key:"playSlideVideo",value:function(U){if(P(U)){var Z=U.querySelector(".gvideo-wrapper");Z&&(U=Z.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var re=this.getSlidePlayerInstance(U);re&&!re.playing&&re.play()}},{key:"slidePlayerPlay",value:function(U){var Z;if(!it||(Z=this.settings.plyr.config)!==null&&Z!==void 0&&Z.muted){if(P(U)){var re=U.querySelector(".gvideo-wrapper");re&&(U=re.getAttribute("data-index"))}var ie=this.getSlidePlayerInstance(U);ie&&!ie.playing&&(ie.play(),this.settings.autofocusVideos&&ie.elements.container.focus())}}},{key:"setElements",value:function(U){var Z=this;this.settings.elements=!1;var re=[];U&&U.length&&u(U,function(ie,be){var Ce=new Ee(ie,Z,be),je=Ce.getConfig(),V=l({},je);V.slideConfig=je,V.instance=Ce,V.index=be,re.push(V)}),this.elements=re,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var ie=_(Z.settings.slideHTML);Z.slidesContainer.appendChild(ie)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(U){var Z=!1;return u(this.elements,function(re,ie){if(N(re,"node")&&re.node==U)return Z=ie,!0}),Z}},{key:"getElements",value:function(){var U=this,Z=[];this.elements=this.elements?this.elements:[],!O(this.settings.elements)&&S(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(ie,be){var Ce=new Ee(ie,U,be),je=Ce.getConfig(),V=l({},je);V.node=!1,V.index=be,V.instance=Ce,V.slideConfig=je,Z.push(V)});var re=!1;return this.getSelector()&&(re=document.querySelectorAll(this.getSelector())),re&&u(re,function(ie,be){var Ce=new Ee(ie,U,be),je=Ce.getConfig(),V=l({},je);V.node=ie,V.index=be,V.instance=Ce,V.slideConfig=je,V.gallery=ie.getAttribute("data-gallery"),Z.push(V)}),Z}},{key:"getGalleryElements",value:function(U,Z){return U.filter(function(re){return re.gallery==Z})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var U=[];for(var Z in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(Z)){var re=this.settings.cssEfects[Z];U.push("g".concat(re.in)),U.push("g".concat(re.out))}return U.join(" ")}},{key:"build",value:function(){var U=this;if(this.built)return!1;var Z=document.body.childNodes,re=[];u(Z,function(he){he.parentNode==document.body&&he.nodeName.charAt(0)!=="#"&&he.hasAttribute&&!he.hasAttribute("aria-hidden")&&(re.push(he),he.setAttribute("aria-hidden","true"))});var ie=N(this.settings.svg,"next")?this.settings.svg.next:"",be=N(this.settings.svg,"prev")?this.settings.svg.prev:"",Ce=N(this.settings.svg,"close")?this.settings.svg.close:"",je=this.settings.lightboxHTML;je=_(je=(je=(je=je.replace(/{nextSVG}/g,ie)).replace(/{prevSVG}/g,be)).replace(/{closeSVG}/g,Ce)),document.body.appendChild(je);var V=document.getElementById("glightbox-body");this.modal=V;var fe=V.querySelector(".gclose");this.prevButton=V.querySelector(".gprev"),this.nextButton=V.querySelector(".gnext"),this.overlay=V.querySelector(".goverlay"),this.loader=V.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=re,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&fe&&(this.events.close=c("click",{onElement:fe,withCallback:function(he,me){he.preventDefault(),U.close()}})),fe&&!this.settings.closeButton&&fe.parentNode.removeChild(fe),this.nextButton&&(this.events.next=c("click",{onElement:this.nextButton,withCallback:function(he,me){he.preventDefault(),U.nextSlide()}})),this.prevButton&&(this.events.prev=c("click",{onElement:this.prevButton,withCallback:function(he,me){he.preventDefault(),U.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=c("click",{onElement:V,withCallback:function(he,me){U.preventOutsideClick||h(document.body,"glightbox-mobile")||g(he.target,".ginner-container")||g(he.target,".gbtn")||h(he.target,"gnext")||h(he.target,"gprev")||U.close()}})),u(this.elements,function(he,me){U.slidesContainer.appendChild(he.instance.create()),he.slideNode=U.slidesContainer.querySelectorAll(".gslide")[me]}),Te&&d(document.body,"glightbox-touch"),this.events.resize=c("resize",{onElement:window,withCallback:function(){U.resize()}}),this.built=!0}},{key:"resize",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((U=U||this.activeSlide)&&!h(U,"zoomed")){var Z=E(),re=U.querySelector(".gvideo-wrapper"),ie=U.querySelector(".gslide-image"),be=this.slideDescription,Ce=Z.width,je=Z.height;if(Ce<=768?d(document.body,"glightbox-mobile"):p(document.body,"glightbox-mobile"),re||ie){var V=!1;if(be&&(h(be,"description-bottom")||h(be,"description-top"))&&!h(be,"gabsolute")&&(V=!0),ie){if(Ce<=768)ie.querySelector("img");else if(V){var fe,he,me=be.offsetHeight,Oe=ie.querySelector("img"),Me=(fe=this.elements[this.index])===null||fe===void 0?void 0:fe.node,Be="100vh";Me&&(Be=(he=Me.getAttribute("data-height"))!==null&&he!==void 0?he:Be),Oe.setAttribute("style","max-height: calc(".concat(Be," - ").concat(me,"px)")),be.setAttribute("style","max-width: ".concat(Oe.offsetWidth,"px;"))}}if(re){var We=N(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!We){var Qe=re.clientWidth,ut=re.clientHeight,Tt=Qe/ut;We="".concat(Qe/Tt,":").concat(ut/Tt)}var Ut=We.split(":"),Kt=this.settings.videosWidth,Pt=this.settings.videosWidth,bn=(Pt=q(Kt)||Kt.indexOf("px")!==-1?parseInt(Kt):Kt.indexOf("vw")!==-1?Ce*parseInt(Kt)/100:Kt.indexOf("vh")!==-1?je*parseInt(Kt)/100:Kt.indexOf("%")!==-1?Ce*parseInt(Kt)/100:parseInt(re.clientWidth))/(parseInt(Ut[0])/parseInt(Ut[1]));if(bn=Math.floor(bn),V&&(je-=be.offsetHeight),Pt>Ce||bn>je||je<bn&&Ce>Pt){var _n=re.offsetWidth,un=re.offsetHeight,Wn=je/un,qn={width:_n*Wn,height:un*Wn};re.parentNode.setAttribute("style","max-width: ".concat(qn.width,"px")),V&&be.setAttribute("style","max-width: ".concat(qn.width,"px;"))}else re.parentNode.style.maxWidth="".concat(Kt),V&&be.setAttribute("style","max-width: ".concat(Kt,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var U=this.loop();p(this.nextButton,"disabled"),p(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||U?this.index!==this.elements.length-1||U||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var U=N(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return U=N(this.settings,"loop")?this.settings.loop:U,U}},{key:"close",value:function(){var U=this;if(!this.lightboxOpen){if(this.events){for(var Z in this.events)this.events.hasOwnProperty(Z)&&this.events[Z].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(re){re.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),m(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),m(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(U.activeSlide=null,U.prevActiveSlideIndex=null,U.prevActiveSlide=null,U.built=!1,U.events){for(var re in U.events)U.events.hasOwnProperty(re)&&U.events[re].destroy();U.events=null}var ie=document.body;p(ye,"glightbox-open"),p(ie,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),U.modal.parentNode.removeChild(U.modal),U.trigger("close"),L(U.settings.onClose)&&U.settings.onClose();var be=document.querySelector(".gcss-styles");be&&be.parentNode.removeChild(be),U.lightboxOpen=!1,U.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(U,Z){var re=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!U||!L(Z))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:U,once:re,callback:Z})}},{key:"once",value:function(U,Z){this.on(U,Z,!0)}},{key:"trigger",value:function(U){var Z=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ie=[];u(this.apiEvents,function(be,Ce){var je=be.evt,V=be.once,fe=be.callback;je==U&&(fe(re),V&&ie.push(Ce))}),ie.length&&u(ie,function(be){return Z.apiEvents.splice(be,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.1"}}]);return function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=new Re(U);return Z.init(),Z}})}(_3)),_3.exports}var Qqt=Zqt();const Jqt=Fa(Qqt);let CN=null,KD=[],H4=[],q4=[],G4=[];function eGt(e,t,n,r){const o=new DOMParser().parseFromString(e,"text/html"),s=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);o.querySelectorAll("a").forEach(d=>{var p;(p=d.getAttribute("href"))!=null&&p.startsWith("#")?d.addEventListener("click",()=>{setTimeout(()=>{Yj(r)})}):d.target="_blank"}),H4.forEach(d=>d==null?void 0:d.disconnect()),H4=[],q4.forEach(d=>d==null?void 0:d.disconnect()),q4=[],G4.forEach(d=>d==null?void 0:d.disconnect()),G4=[],a&&r.nav.forEach(d=>{const p=new IntersectionObserver(h=>{h.forEach(g=>{const m=g.isIntersecting,y=g.target.getAttribute("id");m&&s.querySelectorAll(".navigation li").forEach(v=>{v.classList.contains(`nav-${y}`)?v.classList.add("active"):v.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const h=s.querySelector(`#${d.id}`);h&&(p.observe(h),q4.push(p))},200)}),Object.keys(t).forEach(d=>{const p=t[d];if(hqt.includes(p.mode)&&p.steps){const h=`${p.as}#${p.id}`;let g=!1;const m=new IntersectionObserver(v=>{v.forEach(x=>{x.isIntersecting&&!g&&(W4(p,0,h,s),g=!0)})}),y=new IntersectionObserver(v=>{v.forEach(x=>{const _=x.isIntersecting,E=Number(x.target.getAttribute("key"));_&&W4(p,E,h,s)})});setTimeout(()=>{const v=s.querySelector(`#${d}`);if(!v)return;s.querySelectorAll(`#${d} section-step`).forEach((_,E)=>{_.setAttribute("key",`${E}`),y.observe(_)}),G4.push(y),W4(p,0,h,s),m.observe(v),H4.push(m)},500)}});function u(){s.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(p){if(!(p instanceof HTMLElement))return;p.getAttribute("data-parallax")==="true"&&(p.style.transform="translateY("+p.getBoundingClientRect().top*.1+"px)")})}window.removeEventListener("scroll",u),window.addEventListener("scroll",u),CN=Jqt({autoplayVideos:!0}),KD=[];const f=[],c=Array.from(o.body.childNodes);for(const d of c)d instanceof Element&&f.push(tGt(d,n,r));return CN.setElements(KD),f}function W4(e,t,n,r){const i=r.querySelector(n);Object.keys(e.steps[t]).forEach(o=>{i[o]=e.steps[t][o]})}function tGt(e,t,n){if(e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("*").forEach(i=>{/^[a-z]+(-[a-z0-9]+)*$/.test(i.tagName.toLowerCase())&&e.classList.contains("section-custom")&&Array.from(i.attributes).forEach(o=>i[o.name]=Xj(i,o.name)),setTimeout(()=>t(i),100)}),e.querySelectorAll){const r=e.querySelectorAll("img"),i=e.querySelectorAll("video");[...r,...i].forEach(o=>{const s=o.getAttribute("mode");if(o.parentNode.tagName!=="A"){if(s!=="hero"&&o.getAttribute("mode")!=="tour"){o.style.cursor="zoom-in";const l=KD.length;o.addEventListener("click",()=>{CN.openAt(l)}),KD.push({type:"image",href:o.src})}o.onerror=()=>{n.renderRoot.contains(o)&&o.getAttribute("data-fallback-src")?(o.src=o.getAttribute("data-fallback-src"),o.removeAttribute("data-fallback-src")):o.src="https://placehold.co/600x400?text=Media+not+found"};const a=()=>{document.body.contains(o)&&o.getAttribute("data-fallback-src")&&o.removeAttribute("data-fallback-src")};o.onload=a,o.onloadeddata=a}})}return e}function Xj(e,t=void 0){const n=t?e.getAttribute(t):e;return r7e(n)}function r7e(e){let t;try{t=JSON.parse(e)}catch{!isNaN(e)&&e.trim()!==""?t=Number(e):e==="true"?t=!0:e==="false"?t=!1:t=e}return t}function DTe(e,t,n,r){const i=n.getBoundingClientRect(),o=(i.right+i.left)/2,s=25/2,a=t?i.top-s:void 0,l=t?i.top+s:void 0,u=i.bottom-s,f=i.bottom+s,c=o-s,d=o+s,{clientX:p,clientY:h}=e;if(p>=c&&p<=d&&(h>=u||h>=a)&&(h<=f||h<=l)&&r.showEditor!=="closed"){const m=t?h>=a&&h<=l:!1,y=Number(n.getAttribute("data-section"));r.addCustomSectionIndex=m?y-1:y,r.requestUpdate()}}function nGt(e,t,n,r,i){const o=new DOMParser;let s=-1;if(n&&t.length&&e.length){s=0;const l=`
    <div class="navigation">
      <div class="container nav-container">
        <span class="hamburger-menu" aria-label="Toggle navigation">
        </span>
        <div class="nav-overlay"></div>
        <ul class="nav-list">
          ${t.map(({id:h,title:g,state:m})=>m?`<li class="nav-${h}"><a href="#${h}">${g}</a></li>`:"").join("")}
        </ul>
      </div>
    </div>
  `,u=o.parseFromString(l,"text/html").body.firstChild,f=u.querySelector(".hamburger-menu"),c=u.querySelector(".navigation .container ul"),d=u.querySelector(".nav-overlay"),p=u.querySelectorAll(".nav-list li");if(f&&c){const h=()=>{f.classList.toggle("active"),c.classList.toggle("show"),d.classList.toggle("show")};f.addEventListener("click",()=>h()),d.addEventListener("click",()=>h()),p.forEach(g=>{g.addEventListener("click",()=>h())})}e[0].classList.contains("hero")&&(s=1),e.splice(s,0,u)}let a=!1;if(e.length){const l=s+1;e[l].classList.add("section-start"),e.slice(l).forEach((u,f)=>{if(u.classList&&(u.classList.contains("section-wrap")&&(a=!0),u.classList.add("section-item"),u.setAttribute("data-section",`${f+1}`),r!==void 0)){const c=u.classList.contains("section-start");u.addEventListener("click",function(d){DTe(d,c,u,i)})}})}if(!a){let l=document.createElement("div");l.className="section-wrap container section-item",e.forEach(u=>{l.appendChild(u)}),l.addEventListener("click",function(u){DTe(u,!1,this,i)}),e=[l]}return e}var V4={exports:{}},LTe;function rGt(){return LTe||(LTe=1,function(e,t){(function(n,r){e.exports=r()})(self,()=>{return n={7629:(i,o,s)=>{const a=s(375),l=s(8571),u=s(9474),f=s(1687),c=s(8652),d=s(8160),p=s(3292),h=s(6354),g=s(8901),m=s(9708),y=s(6914),v=s(2294),x=s(6133),_=s(1152),E=s(8863),C=s(2036),w={Base:class{constructor(T){this.type=T,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new v.Ids,this._preferences=null,this._refs=new x.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof m.describe=="function","Manifest functionality disabled"),m.describe(this)}allow(...T){return d.verifyFlat(T,"allow"),this._values(T,"_valids")}alter(T){a(T&&typeof T=="object"&&!Array.isArray(T),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const R=this.clone();R.$_terms.alterations=R.$_terms.alterations||[];for(const L in T){const B=T[L];a(typeof B=="function","Alteration adjuster for",L,"must be a function"),R.$_terms.alterations.push({target:L,adjuster:B})}return R.$_temp.ruleset=!1,R}artifact(T){return a(T!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",T)}cast(T){return a(T===!1||typeof T=="string","Invalid to value"),a(T===!1||this._definition.cast[T],"Type",this.type,"does not support casting to",T),this.$_setFlag("cast",T===!1?void 0:T)}default(T,R){return this._default("default",T,R)}description(T){return a(T&&typeof T=="string","Description must be a non-empty string"),this.$_setFlag("description",T)}empty(T){const R=this.clone();return T!==void 0&&(T=R.$_compile(T,{override:!1})),R.$_setFlag("empty",T,{clone:!1})}error(T){return a(T,"Missing error"),a(T instanceof Error||typeof T=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",T)}example(T,R={}){return a(T!==void 0,"Missing example"),d.assertOptions(R,["override"]),this._inner("examples",T,{single:!0,override:R.override})}external(T,R){return typeof T=="object"&&(a(!R,"Cannot combine options with description"),R=T.description,T=T.method),a(typeof T=="function","Method must be a function"),a(R===void 0||R&&typeof R=="string","Description must be a non-empty string"),this._inner("externals",{method:T,description:R},{single:!0})}failover(T,R){return this._default("failover",T,R)}forbidden(){return this.presence("forbidden")}id(T){return T?(a(typeof T=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(T),"id cannot contain period character"),this.$_setFlag("id",T)):this.$_setFlag("id",void 0)}invalid(...T){return this._values(T,"_invalids")}label(T){return a(T&&typeof T=="string","Label name must be a non-empty string"),this.$_setFlag("label",T)}meta(T){return a(T!==void 0,"Meta cannot be undefined"),this._inner("metas",T,{single:!0})}note(...T){a(T.length,"Missing notes");for(const R of T)a(R&&typeof R=="string","Notes must be non-empty strings");return this._inner("notes",T)}only(T=!0){return a(typeof T=="boolean","Invalid mode:",T),this.$_setFlag("only",T)}optional(){return this.presence("optional")}prefs(T){a(T,"Missing preferences"),a(T.context===void 0,"Cannot override context"),a(T.externals===void 0,"Cannot override externals"),a(T.warnings===void 0,"Cannot override warnings"),a(T.debug===void 0,"Cannot override debug"),d.checkPreferences(T);const R=this.clone();return R._preferences=d.preferences(R._preferences,T),R}presence(T){return a(["optional","required","forbidden"].includes(T),"Unknown presence mode",T),this.$_setFlag("presence",T)}raw(T=!0){return this.$_setFlag("result",T?"raw":void 0)}result(T){return a(["raw","strip"].includes(T),"Unknown result mode",T),this.$_setFlag("result",T)}required(){return this.presence("required")}strict(T){const R=this.clone(),L=T!==void 0&&!T;return R._preferences=d.preferences(R._preferences,{convert:L}),R}strip(T=!0){return this.$_setFlag("result",T?"strip":void 0)}tag(...T){a(T.length,"Missing tags");for(const R of T)a(R&&typeof R=="string","Tags must be non-empty strings");return this._inner("tags",T)}unit(T){return a(T&&typeof T=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",T)}valid(...T){d.verifyFlat(T,"valid");const R=this.allow(...T);return R.$_setFlag("only",!!R._valids,{clone:!1}),R}when(T,R){const L=this.clone();L.$_terms.whens||(L.$_terms.whens=[]);const B=p.when(L,T,R);if(!["any","link"].includes(L.type)){const P=B.is?[B]:B.switch;for(const S of P)a(!S.then||S.then.type==="any"||S.then.type===L.type,"Cannot combine",L.type,"with",S.then&&S.then.type),a(!S.otherwise||S.otherwise.type==="any"||S.otherwise.type===L.type,"Cannot combine",L.type,"with",S.otherwise&&S.otherwise.type)}return L.$_terms.whens.push(B),L.$_mutateRebuild()}cache(T){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const R=this.clone();return R._cache=T||c.provider.provision(),R.$_temp.ruleset=!1,R}clone(){const T=Object.create(Object.getPrototypeOf(this));return this._assign(T)}concat(T){a(d.isSchema(T),"Invalid schema object"),a(this.type==="any"||T.type==="any"||T.type===this.type,"Cannot merge type",this.type,"with another type:",T.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!T._inRuleset(),"Cannot concatenate a schema with open ruleset");let R=this.clone();if(this.type==="any"&&T.type!=="any"){const L=T.clone();for(const B of Object.keys(R))B!=="type"&&(L[B]=R[B]);R=L}R._ids.concat(T._ids),R._refs.register(T,x.toSibling),R._preferences=R._preferences?d.preferences(R._preferences,T._preferences):T._preferences,R._valids=C.merge(R._valids,T._valids,T._invalids),R._invalids=C.merge(R._invalids,T._invalids,T._valids);for(const L of T._singleRules.keys())R._singleRules.has(L)&&(R._rules=R._rules.filter(B=>B.keep||B.name!==L),R._singleRules.delete(L));for(const L of T._rules)T._definition.rules[L.method].multi||R._singleRules.set(L.name,L),R._rules.push(L);if(R._flags.empty&&T._flags.empty){R._flags.empty=R._flags.empty.concat(T._flags.empty);const L=Object.assign({},T._flags);delete L.empty,f(R._flags,L)}else if(T._flags.empty){R._flags.empty=T._flags.empty;const L=Object.assign({},T._flags);delete L.empty,f(R._flags,L)}else f(R._flags,T._flags);for(const L in T.$_terms){const B=T.$_terms[L];B?R.$_terms[L]?R.$_terms[L]=R.$_terms[L].concat(B):R.$_terms[L]=B.slice():R.$_terms[L]||(R.$_terms[L]=B)}return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,T]),R.$_mutateRebuild()}extend(T){return a(!T.base,"Cannot extend type with another base"),g.type(this,T)}extract(T){return T=Array.isArray(T)?T:T.split("."),this._ids.reach(T)}fork(T,R){a(!this._inRuleset(),"Cannot fork inside a ruleset");let L=this;for(let B of[].concat(T))B=Array.isArray(B)?B:B.split("."),L=L._ids.fork(B,R,L);return L.$_temp.ruleset=!1,L}rule(T){const R=this._definition;d.assertOptions(T,Object.keys(R.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const L=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(L>=0&&L<this._rules.length,"Cannot apply rules to empty ruleset");const B=this.clone();for(let P=L;P<B._rules.length;++P){const S=B._rules[P],k=l(S);for(const D in T)R.modifiers[D](k,T[D]),a(k.name===S.name,"Cannot change rule name");B._rules[P]=k,B._singleRules.get(k.name)===S&&B._singleRules.set(k.name,k)}return B.$_temp.ruleset=!1,B.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const T=this.clone();return T.$_temp.ruleset=T._rules.length,T}get $(){return this.ruleset}tailor(T){T=[].concat(T),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let R=this;if(this.$_terms.alterations)for(const{target:L,adjuster:B}of this.$_terms.alterations)T.includes(L)&&(R=B(R),a(d.isSchema(R),"Alteration adjuster for",L,"failed to return a schema object"));return R=R.$_modify({each:L=>L.tailor(T),ref:!1}),R.$_temp.ruleset=!1,R.$_mutateRebuild()}tracer(){return _.location?_.location(this):this}validate(T,R){return E.entry(T,this,R)}validateAsync(T,R){return E.entryAsync(T,this,R)}$_addRule(T){typeof T=="string"&&(T={name:T}),a(T&&typeof T=="object","Invalid options"),a(T.name&&typeof T.name=="string","Invalid rule name");for(const S in T)a(S[0]!=="_","Cannot set private rule properties");const R=Object.assign({},T);R._resolve=[],R.method=R.method||R.name;const L=this._definition.rules[R.method],B=R.args;a(L,"Unknown rule",R.method);const P=this.clone();if(B){a(Object.keys(B).length===1||Object.keys(B).length===this._definition.rules[R.name].args.length,"Invalid rule definition for",this.type,R.name);for(const S in B){let k=B[S];if(L.argsByName){const D=L.argsByName.get(S);if(D.ref&&d.isResolvable(k))R._resolve.push(S),P.$_mutateRegister(k);else if(D.normalize&&(k=D.normalize(k),B[S]=k),D.assert){const O=d.validateArg(k,S,D);a(!O,O,"or reference")}}k!==void 0?B[S]=k:delete B[S]}}return L.multi||(P._ruleRemove(R.name,{clone:!1}),P._singleRules.set(R.name,R)),P.$_temp.ruleset===!1&&(P.$_temp.ruleset=null),L.priority?P._rules.unshift(R):P._rules.push(R),P}$_compile(T,R){return p.schema(this.$_root,T,R)}$_createError(T,R,L,B,P,S={}){const k=S.flags!==!1?this._flags:{},D=S.messages?y.merge(this._definition.messages,S.messages):this._definition.messages;return new h.Report(T,R,L,k,D,B,P)}$_getFlag(T){return this._flags[T]}$_getRule(T){return this._singleRules.get(T)}$_mapLabels(T){return T=Array.isArray(T)?T:T.split("."),this._ids.labels(T)}$_match(T,R,L,B){(L=Object.assign({},L)).abortEarly=!0,L._externals=!1,R.snapshot();const P=!E.validate(T,this,R,L,B).errors;return R.restore(),P}$_modify(T){return d.assertOptions(T,["each","once","ref","schema"]),v.schema(this,T)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(T,{source:R,name:L,path:B,key:P})=>{const S=this._definition[R][L]&&this._definition[R][L].register;S!==!1&&this.$_mutateRegister(T,{family:S,key:P})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(T,{family:R,key:L}={}){this._refs.register(T,R),this._ids.register(T,{key:L})}$_property(T){return this._definition.properties[T]}$_reach(T){return this._ids.reach(T)}$_rootReferences(){return this._refs.roots()}$_setFlag(T,R,L={}){a(T[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const B=this._definition.flags[T]||{};if(u(R,B.default)&&(R=void 0),u(R,this._flags[T]))return this;const P=L.clone!==!1?this.clone():this;return R!==void 0?(P._flags[T]=R,P.$_mutateRegister(R)):delete P._flags[T],T[0]!=="_"&&(P.$_temp.ruleset=!1),P}$_parent(T,...R){return this[T][d.symbols.parent].call(this,...R)}$_validate(T,R,L){return E.validate(T,this,R,L)}_assign(T){T.type=this.type,T.$_root=this.$_root,T.$_temp=Object.assign({},this.$_temp),T.$_temp.whens={},T._ids=this._ids.clone(),T._preferences=this._preferences,T._valids=this._valids&&this._valids.clone(),T._invalids=this._invalids&&this._invalids.clone(),T._rules=this._rules.slice(),T._singleRules=l(this._singleRules,{shallow:!0}),T._refs=this._refs.clone(),T._flags=Object.assign({},this._flags),T._cache=null,T.$_terms={};for(const R in this.$_terms)T.$_terms[R]=this.$_terms[R]?this.$_terms[R].slice():null;T.$_super={};for(const R in this.$_super)T.$_super[R]=this._super[R].bind(T);return T}_bare(){const T=this.clone();T._reset();const R=T._definition.terms;for(const L in R){const B=R[L];T.$_terms[L]=B.init}return T.$_mutateRebuild()}_default(T,R,L={}){return d.assertOptions(L,"literal"),a(R!==void 0,"Missing",T,"value"),a(typeof R=="function"||!L.literal,"Only function value supports literal option"),typeof R=="function"&&L.literal&&(R={[d.symbols.literal]:!0,literal:R}),this.$_setFlag(T,R)}_generate(T,R,L){if(!this.$_terms.whens)return{schema:this};const B=[],P=[];for(let D=0;D<this.$_terms.whens.length;++D){const O=this.$_terms.whens[D];if(O.concat){B.push(O.concat),P.push(`${D}.concat`);continue}const N=O.ref?O.ref.resolve(T,R,L):T,j=O.is?[O]:O.switch,q=P.length;for(let W=0;W<j.length;++W){const{is:Q,then:ee,otherwise:H}=j[W],se=`${D}${O.switch?"."+W:""}`;if(Q.$_match(N,R.nest(Q,`${se}.is`),L)){if(ee){const ne=R.localize([...R.path,`${se}.then`],R.ancestors,R.schemas),{schema:ge,id:we}=ee._generate(T,ne,L);B.push(ge),P.push(`${se}.then${we?`(${we})`:""}`);break}}else if(H){const ne=R.localize([...R.path,`${se}.otherwise`],R.ancestors,R.schemas),{schema:ge,id:we}=H._generate(T,ne,L);B.push(ge),P.push(`${se}.otherwise${we?`(${we})`:""}`);break}}if(O.break&&P.length>q)break}const S=P.join(", ");if(R.mainstay.tracer.debug(R,"rule","when",S),!S)return{schema:this};if(!R.mainstay.tracer.active&&this.$_temp.whens[S])return{schema:this.$_temp.whens[S],id:S};let k=this;this._definition.generate&&(k=this._definition.generate(this,T,R,L));for(const D of B)k=k.concat(D);return this.$_root._tracer&&this.$_root._tracer._combine(k,[this,...B]),this.$_temp.whens[S]=k,{schema:k,id:S}}_inner(T,R,L={}){a(!this._inRuleset(),`Cannot set ${T} inside a ruleset`);const B=this.clone();return B.$_terms[T]&&!L.override||(B.$_terms[T]=[]),L.single?B.$_terms[T].push(R):B.$_terms[T].push(...R),B.$_temp.ruleset=!1,B}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(T,R={}){if(!this._singleRules.has(T))return this;const L=R.clone!==!1?this.clone():this;L._singleRules.delete(T);const B=[];for(let P=0;P<L._rules.length;++P){const S=L._rules[P];S.name!==T||S.keep?B.push(S):L._inRuleset()&&P<L.$_temp.ruleset&&--L.$_temp.ruleset}return L._rules=B,L}_values(T,R){d.verifyFlat(T,R.slice(1,-1));const L=this.clone(),B=T[0]===d.symbols.override;if(B&&(T=T.slice(1)),!L[R]&&T.length?L[R]=new C:B&&(L[R]=T.length?new C:null,L.$_mutateRebuild()),!L[R])return L;B&&L[R].override();for(const P of T){a(P!==void 0,"Cannot call allow/valid/invalid with undefined"),a(P!==d.symbols.override,"Override must be the first value");const S=R==="_invalids"?"_valids":"_invalids";L[S]&&(L[S].remove(P),L[S].length||(a(R==="_valids"||!L._flags.only,"Setting invalid value",P,"leaves schema rejecting all values due to previous valid rule"),L[S]=null)),L[R].add(P,L._refs)}return L}}};w.Base.prototype[d.symbols.any]={version:d.version,compile:p.compile,root:"$_root"},w.Base.prototype.isImmutable=!0,w.Base.prototype.deny=w.Base.prototype.invalid,w.Base.prototype.disallow=w.Base.prototype.invalid,w.Base.prototype.equal=w.Base.prototype.valid,w.Base.prototype.exist=w.Base.prototype.required,w.Base.prototype.not=w.Base.prototype.invalid,w.Base.prototype.options=w.Base.prototype.prefs,w.Base.prototype.preferences=w.Base.prototype.prefs,i.exports=new w.Base},8652:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8160),f={max:1e3,supported:new Set(["undefined","boolean","number","string"])};o.provider={provision:c=>new f.Cache(c)},f.Cache=class{constructor(c={}){u.assertOptions(c,["max"]),a(c.max===void 0||c.max&&c.max>0&&isFinite(c.max),"Invalid max cache size"),this._max=c.max||f.max,this._map=new Map,this._list=new f.List}get length(){return this._map.size}set(c,d){if(c!==null&&!f.supported.has(typeof c))return;let p=this._map.get(c);if(p)return p.value=d,void this._list.first(p);p=this._list.unshift({key:c,value:d}),this._map.set(c,p),this._compact()}get(c){const d=this._map.get(c);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const c=this._list.pop();this._map.delete(c.key)}}},f.List=class{constructor(){this.tail=null,this.head=null}unshift(c){return c.next=null,c.prev=this.head,this.head&&(this.head.next=c),this.head=c,this.tail||(this.tail=c),c}first(c){c!==this.head&&(this._remove(c),this.unshift(c))}pop(){return this._remove(this.tail)}_remove(c){const{next:d,prev:p}=c;return d.prev=p,p&&(p.next=d),c===this.tail&&(this.tail=d),c.prev=null,c.next=null,c}}},8160:(i,o,s)=>{const a=s(375),l=s(7916),u=s(5934);let f,c;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};o.version=u.version,o.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},o.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},o.assertOptions=function(p,h,g="Options"){a(p&&typeof p=="object"&&!Array.isArray(p),"Options must be of type object");const m=Object.keys(p).filter(y=>!h.includes(y));a(m.length===0,`${g} contain unknown keys: ${m}`)},o.checkPreferences=function(p){c=c||s(3378);const h=c.preferences.validate(p);if(h.error)throw new l([h.error.details[0].message])},o.compare=function(p,h,g){switch(g){case"=":return p===h;case">":return p>h;case"<":return p<h;case">=":return p>=h;case"<=":return p<=h}},o.default=function(p,h){return p===void 0?h:p},o.isIsoDate=function(p){return d.isoDate.test(p)},o.isNumber=function(p){return typeof p=="number"&&!isNaN(p)},o.isResolvable=function(p){return!!p&&(p[o.symbols.ref]||p[o.symbols.template])},o.isSchema=function(p,h={}){const g=p&&p[o.symbols.any];return!!g&&(a(h.legacy||g.version===o.version,"Cannot mix different versions of joi schemas"),!0)},o.isValues=function(p){return p[o.symbols.values]},o.limit=function(p){return Number.isSafeInteger(p)&&p>=0},o.preferences=function(p,h){f=f||s(6914),p=p||{},h=h||{};const g=Object.assign({},p,h);return h.errors&&p.errors&&(g.errors=Object.assign({},p.errors,h.errors),g.errors.wrap=Object.assign({},p.errors.wrap,h.errors.wrap)),h.messages&&(g.messages=f.compile(h.messages,p.messages)),delete g[o.symbols.prefs],g},o.tryWithPath=function(p,h,g={}){try{return p()}catch(m){throw m.path!==void 0?m.path=h+"."+m.path:m.path=h,g.append&&(m.message=`${m.message} (${m.path})`),m}},o.validateArg=function(p,h,{assert:g,message:m}){if(o.isSchema(g)){const y=g.validate(p);return y.error?y.error.message:void 0}if(!g(p))return h?`${h} ${m}`:m},o.verifyFlat=function(p,h){for(const g of p)a(!Array.isArray(g),"Method no longer accepts array arguments:",h)}},3292:(i,o,s)=>{const a=s(375),l=s(8160),u=s(6133),f={};o.schema=function(c,d,p={}){l.assertOptions(p,["appendPath","override"]);try{return f.schema(c,d,p)}catch(h){throw p.appendPath&&h.path!==void 0&&(h.message=`${h.message} (${h.path})`),h}},f.schema=function(c,d,p){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const h=(g,...m)=>p.override!==!1?g.valid(c.override,...m):g.valid(...m);if(f.simple(d))return h(c,d);if(typeof d=="function")return c.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return h(c,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const g of d)if(!f.simple(g))return c.alternatives().try(...d);return h(c,...d)}return d instanceof RegExp?c.string().regex(d):d instanceof Date?h(c.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),c.object().keys(d))},o.ref=function(c,d){return u.isRef(c)?c:u.create(c,d)},o.compile=function(c,d,p={}){l.assertOptions(p,["legacy"]);const h=d&&d[l.symbols.any];if(h)return a(p.legacy||h.version===l.version,"Cannot mix different versions of joi schemas:",h.version,l.version),d;if(typeof d!="object"||!p.legacy)return o.schema(c,d,{appendPath:!0});const g=f.walk(d);return g?g.compile(g.root,d):o.schema(c,d,{appendPath:!0})},f.walk=function(c){if(typeof c!="object")return null;if(Array.isArray(c)){for(const p of c){const h=f.walk(p);if(h)return h}return null}const d=c[l.symbols.any];if(d)return{root:c[d.root],compile:d.compile};a(Object.getPrototypeOf(c)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const p in c){const h=f.walk(c[p]);if(h)return h}return null},f.simple=function(c){return c===null||["boolean","string","number"].includes(typeof c)},o.when=function(c,d,p){if(p===void 0&&(a(d&&typeof d=="object","Missing options"),p=d,d=u.create(".")),Array.isArray(p)&&(p={switch:p}),l.assertOptions(p,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(p.is===void 0,'"is" can not be used with a schema condition'),a(p.not===void 0,'"not" can not be used with a schema condition'),a(p.switch===void 0,'"switch" can not be used with a schema condition'),f.condition(c,{is:d,then:p.then,otherwise:p.otherwise,break:p.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(p.not===void 0||p.is===void 0,'Cannot combine "is" with "not"'),p.switch===void 0){let g=p;p.not!==void 0&&(g={is:p.not,then:p.otherwise,otherwise:p.then,break:p.break});let m=g.is!==void 0?c.$_compile(g.is):c.$_root.invalid(null,!1,0,"").required();return a(g.then!==void 0||g.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(g.break===void 0||g.then===void 0||g.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),p.is===void 0||u.isRef(p.is)||l.isSchema(p.is)||(m=m.required()),f.condition(c,{ref:o.ref(d),is:m,then:g.then,otherwise:g.otherwise,break:g.break})}a(Array.isArray(p.switch),'"switch" must be an array'),a(p.is===void 0,'Cannot combine "switch" with "is"'),a(p.not===void 0,'Cannot combine "switch" with "not"'),a(p.then===void 0,'Cannot combine "switch" with "then"');const h={ref:o.ref(d),switch:[],break:p.break};for(let g=0;g<p.switch.length;++g){const m=p.switch[g],y=g===p.switch.length-1;l.assertOptions(m,y?["is","then","otherwise"]:["is","then"]),a(m.is!==void 0,'Switch statement missing "is"'),a(m.then!==void 0,'Switch statement missing "then"');const v={is:c.$_compile(m.is),then:c.$_compile(m.then)};if(u.isRef(m.is)||l.isSchema(m.is)||(v.is=v.is.required()),y){a(p.otherwise===void 0||m.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const x=p.otherwise!==void 0?p.otherwise:m.otherwise;x!==void 0&&(a(h.break===void 0,"Cannot specify both otherwise and break"),v.otherwise=c.$_compile(x))}h.switch.push(v)}return h},f.condition=function(c,d){for(const p of["then","otherwise"])d[p]===void 0?delete d[p]:d[p]=c.$_compile(d[p]);return d}},6354:(i,o,s)=>{const a=s(5688),l=s(8160),u=s(3328);o.Report=class{constructor(f,c,d,p,h,g,m){if(this.code=f,this.flags=p,this.messages=h,this.path=g.path,this.prefs=m,this.state=g,this.value=c,this.message=null,this.template=null,this.local=d||{},this.local.label=o.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const y=this.path[this.path.length-1];typeof y!="object"&&(this.local.key=y)}}_setTemplate(f){if(this.template=f,!this.flags.label&&this.path.length===0){const c=this._template(this.template,"root");c&&(this.local.label=c)}}toString(){if(this.message)return this.message;const f=this.code;if(!this.prefs.errors.render)return this.code;const c=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return c===void 0?`Error code "${f}" is not defined, your custom type is missing the correct messages definition`:(this.message=c.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(f,c){return o.template(this.value,f,c||this.code,this.state,this.prefs)}},o.path=function(f){let c="";for(const d of f)typeof d!="object"&&(typeof d=="string"?(c&&(c+="."),c+=d):c+=`[${d}]`);return c},o.template=function(f,c,d,p,h){if(!c)return;if(u.isTemplate(c))return d!=="root"?c:null;let g=h.errors.language;if(l.isResolvable(g)&&(g=g.resolve(f,p,h)),g&&c[g]){if(c[g][d]!==void 0)return c[g][d];if(c[g]["*"]!==void 0)return c[g]["*"]}return c[d]?c[d]:c["*"]},o.label=function(f,c,d,p){if(!d.errors.label)return"";if(f.label)return f.label;let h=c.path;return d.errors.label==="key"&&c.path.length>1&&(h=c.path.slice(-1)),o.path(h)||o.template(null,d.messages,"root",c,d)||p&&o.template(null,p,"root",c,d)||"value"},o.process=function(f,c,d){if(!f)return null;const{override:p,message:h,details:g}=o.details(f);if(p)return p;if(d.errors.stack)return new o.ValidationError(h,g,c);const m=Error.stackTraceLimit;Error.stackTraceLimit=0;const y=new o.ValidationError(h,g,c);return Error.stackTraceLimit=m,y},o.details=function(f,c={}){let d=[];const p=[];for(const h of f){if(h instanceof Error){if(c.override!==!1)return{override:h};const m=h.toString();d.push(m),p.push({message:m,type:"override",context:{error:h}});continue}const g=h.toString();d.push(g),p.push({message:g,path:h.path.filter(m=>typeof m!="object"),type:h.code,context:h.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:p}},o.ValidationError=class extends Error{constructor(f,c,d){super(f),this._original=d,this.details=c}static isError(f){return f instanceof o.ValidationError}},o.ValidationError.prototype.isJoi=!0,o.ValidationError.prototype.name="ValidationError",o.ValidationError.prototype.annotate=a.error},8901:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8160),f=s(6914),c={};o.type=function(d,p){const h=Object.getPrototypeOf(d),g=l(h),m=d._assign(Object.create(g)),y=Object.assign({},p);delete y.base,g._definition=y;const v=h._definition||{};y.messages=f.merge(v.messages,y.messages),y.properties=Object.assign({},v.properties,y.properties),m.type=y.type,y.flags=Object.assign({},v.flags,y.flags);const x=Object.assign({},v.terms);if(y.terms)for(const w in y.terms){const T=y.terms[w];a(m.$_terms[w]===void 0,"Invalid term override for",y.type,w),m.$_terms[w]=T.init,x[w]=T}y.terms=x,y.args||(y.args=v.args),y.prepare=c.prepare(y.prepare,v.prepare),y.coerce&&(typeof y.coerce=="function"&&(y.coerce={method:y.coerce}),y.coerce.from&&!Array.isArray(y.coerce.from)&&(y.coerce={method:y.coerce.method,from:[].concat(y.coerce.from)})),y.coerce=c.coerce(y.coerce,v.coerce),y.validate=c.validate(y.validate,v.validate);const _=Object.assign({},v.rules);if(y.rules)for(const w in y.rules){const T=y.rules[w];a(typeof T=="object","Invalid rule definition for",y.type,w);let R=T.method;if(R===void 0&&(R=function(){return this.$_addRule(w)}),R&&(a(!g[w],"Rule conflict in",y.type,w),g[w]=R),a(!_[w],"Rule conflict in",y.type,w),_[w]=T,T.alias){const L=[].concat(T.alias);for(const B of L)g[B]=T.method}T.args&&(T.argsByName=new Map,T.args=T.args.map(L=>(typeof L=="string"&&(L={name:L}),a(!T.argsByName.has(L.name),"Duplicated argument name",L.name),u.isSchema(L.assert)&&(L.assert=L.assert.strict().label(L.name)),T.argsByName.set(L.name,L),L)))}y.rules=_;const E=Object.assign({},v.modifiers);if(y.modifiers)for(const w in y.modifiers){a(!g[w],"Rule conflict in",y.type,w);const T=y.modifiers[w];a(typeof T=="function","Invalid modifier definition for",y.type,w);const R=function(L){return this.rule({[w]:L})};g[w]=R,E[w]=T}if(y.modifiers=E,y.overrides){g._super=h,m.$_super={};for(const w in y.overrides)a(h[w],"Cannot override missing",w),y.overrides[w][u.symbols.parent]=h[w],m.$_super[w]=h[w].bind(m);Object.assign(g,y.overrides)}y.cast=Object.assign({},v.cast,y.cast);const C=Object.assign({},v.manifest,y.manifest);return C.build=c.build(y.manifest&&y.manifest.build,v.manifest&&v.manifest.build),y.manifest=C,y.rebuild=c.rebuild(y.rebuild,v.rebuild),m},c.build=function(d,p){return d&&p?function(h,g){return p(d(h,g),g)}:d||p},c.coerce=function(d,p){return d&&p?{from:d.from&&p.from?[...new Set([...d.from,...p.from])]:null,method(h,g){let m;if((!p.from||p.from.includes(typeof h))&&(m=p.method(h,g),m)){if(m.errors||m.value===void 0)return m;h=m.value}if(!d.from||d.from.includes(typeof h)){const y=d.method(h,g);if(y)return y}return m}}:d||p},c.prepare=function(d,p){return d&&p?function(h,g){const m=d(h,g);if(m){if(m.errors||m.value===void 0)return m;h=m.value}return p(h,g)||m}:d||p},c.rebuild=function(d,p){return d&&p?function(h){p(h),d(h)}:d||p},c.validate=function(d,p){return d&&p?function(h,g){const m=p(h,g);if(m){if(m.errors&&(!Array.isArray(m.errors)||m.errors.length))return m;h=m.value}return d(h,g)||m}:d||p}},5107:(i,o,s)=>{const a=s(375),l=s(8571),u=s(8652),f=s(8160),c=s(3292),d=s(6354),p=s(8901),h=s(9708),g=s(6133),m=s(3328),y=s(1152);let v;const x={types:{alternatives:s(4946),any:s(8068),array:s(546),boolean:s(4937),date:s(7500),function:s(390),link:s(8785),number:s(3832),object:s(8966),string:s(7417),symbol:s(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const _={_types:new Set(Object.keys(x.types))};for(const E of _._types)_[E]=function(...C){return a(!C.length||["alternatives","link","object"].includes(E),"The",E,"type does not allow arguments"),x.generate(this,x.types[E],C)};for(const E of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])_[E]=function(...C){return this.any()[E](...C)};Object.assign(_,x.methods);for(const E in x.aliases){const C=x.aliases[E];_[E]=_[C]}return _.x=_.expression,y.setup&&y.setup(_),_}};x.methods={ValidationError:d.ValidationError,version:f.version,cache:u.provider,assert(_,E,...C){x.assert(_,E,!0,C)},attempt:(_,E,...C)=>x.assert(_,E,!1,C),build(_){return a(typeof h.build=="function","Manifest functionality disabled"),h.build(this,_)},checkPreferences(_){f.checkPreferences(_)},compile(_,E){return c.compile(this,_,E)},defaults(_){a(typeof _=="function","modifier must be a function");const E=Object.assign({},this);for(const C of E._types){const w=_(E[C]());a(f.isSchema(w),"modifier must return a valid schema object"),E[C]=function(...T){return x.generate(this,w,T)}}return E},expression:(..._)=>new m(..._),extend(..._){f.verifyFlat(_,"extend"),v=v||s(3378),a(_.length,"You need to provide at least one extension"),this.assert(_,v.extensions);const E=Object.assign({},this);E._types=new Set(E._types);for(let C of _){typeof C=="function"&&(C=C(E)),this.assert(C,v.extension);const w=x.expandExtension(C,E);for(const T of w){a(E[T.type]===void 0||E._types.has(T.type),"Cannot override name",T.type);const R=T.base||this.any(),L=p.type(R,T);E._types.add(T.type),E[T.type]=function(...B){return x.generate(this,L,B)}}}return E},isError:d.ValidationError.isError,isExpression:m.isTemplate,isRef:g.isRef,isSchema:f.isSchema,in:(..._)=>g.in(..._),override:f.symbols.override,ref:(..._)=>g.create(..._),types(){const _={};for(const E of this._types)_[E]=this[E]();for(const E in x.aliases)_[E]=this[E]();return _}},x.assert=function(_,E,C,w){const T=w[0]instanceof Error||typeof w[0]=="string"?w[0]:null,R=T!==null?w[1]:w[0],L=E.validate(_,f.preferences({errors:{stack:!0}},R||{}));let B=L.error;if(!B)return L.value;if(T instanceof Error)throw T;const P=C&&typeof B.annotate=="function"?B.annotate():B.message;throw B instanceof d.ValidationError==0&&(B=l(B)),B.message=T?`${T} ${P}`:P,B},x.generate=function(_,E,C){return a(_,"Must be invoked on a Joi instance."),E.$_root=_,E._definition.args&&C.length?E._definition.args(E,...C):E},x.expandExtension=function(_,E){if(typeof _.type=="string")return[_];const C=[];for(const w of E._types)if(_.type.test(w)){const T=Object.assign({},_);T.type=w,T.base=E[w](),C.push(T)}return C},i.exports=x.root()},6914:(i,o,s)=>{const a=s(375),l=s(8571),u=s(3328);o.compile=function(f,c){if(typeof f=="string")return a(!c,"Cannot set single message string"),new u(f);if(u.isTemplate(f))return a(!c,"Cannot set single message template"),f;a(typeof f=="object"&&!Array.isArray(f),"Invalid message options"),c=c?l(c):{};for(let d in f){const p=f[d];if(d==="root"||u.isTemplate(p)){c[d]=p;continue}if(typeof p=="string"){c[d]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",d);const h=d;for(d in c[h]=c[h]||{},p){const g=p[d];d==="root"||u.isTemplate(g)?c[h][d]=g:(a(typeof g=="string","Invalid message for",d,"in",h),c[h][d]=new u(g))}}return c},o.decompile=function(f){const c={};for(let d in f){const p=f[d];if(d==="root"){c.root=p;continue}if(u.isTemplate(p)){c[d]=p.describe({compact:!0});continue}const h=d;for(d in c[h]={},p){const g=p[d];d!=="root"?c[h][d]=g.describe({compact:!0}):c[h].root=g}}return c},o.merge=function(f,c){if(!f)return o.compile(c);if(!c)return f;if(typeof c=="string")return new u(c);if(u.isTemplate(c))return c;const d=l(f);for(let p in c){const h=c[p];if(p==="root"||u.isTemplate(h)){d[p]=h;continue}if(typeof h=="string"){d[p]=new u(h);continue}a(typeof h=="object"&&!Array.isArray(h),"Invalid message for",p);const g=p;for(p in d[g]=d[g]||{},h){const m=h[p];p==="root"||u.isTemplate(m)?d[g][p]=m:(a(typeof m=="string","Invalid message for",p,"in",g),d[g][p]=new u(m))}}return d}},2294:(i,o,s)=>{const a=s(375),l=s(8160),u=s(6133),f={};o.Ids=f.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const c=new f.Ids;return c._byId=new Map(this._byId),c._byKey=new Map(this._byKey),c._schemaChain=this._schemaChain,c}concat(c){c._schemaChain&&(this._schemaChain=!0);for(const[d,p]of c._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,p);for(const[d,p]of c._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,p)}fork(c,d,p){const h=this._collect(c);h.push({schema:p});const g=h.shift();let m={id:g.id,schema:d(g.schema)};a(l.isSchema(m.schema),"adjuster function failed to return a joi schema type");for(const y of h)m={id:y.id,schema:f.fork(y.schema,m.id,m.schema)};return m.schema}labels(c,d=[]){const p=c[0],h=this._get(p);if(!h)return[...d,...c].join(".");const g=c.slice(1);return d=[...d,h.schema._flags.label||p],g.length?h.schema._ids.labels(g,d):d.join(".")}reach(c,d=[]){const p=c[0],h=this._get(p);a(h,"Schema does not contain path",[...d,...c].join("."));const g=c.slice(1);return g.length?h.schema._ids.reach(g,[...d,p]):h.schema}register(c,{key:d}={}){if(!c||!l.isSchema(c))return;(c.$_property("schemaChain")||c._ids._schemaChain)&&(this._schemaChain=!0);const p=c._flags.id;if(p){const h=this._byId.get(p);a(!h||h.schema===c,"Cannot add different schemas with the same id:",p),a(!this._byKey.has(p),"Schema id conflicts with existing key:",p),this._byId.set(p,{schema:c,id:p})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:c,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(c,d=[],p=[]){const h=c[0],g=this._get(h);a(g,"Schema does not contain path",[...d,...c].join(".")),p=[g,...p];const m=c.slice(1);return m.length?g.schema._ids._collect(m,[...d,h],p):p}_get(c){return this._byId.get(c)||this._byKey.get(c)}},f.fork=function(c,d,p){const h=o.schema(c,{each:(g,{key:m})=>{if(d===(g._flags.id||m))return p},ref:!1});return h?h.$_mutateRebuild():c},o.schema=function(c,d){let p;for(const h in c._flags){if(h[0]==="_")continue;const g=f.scan(c._flags[h],{source:"flags",name:h},d);g!==void 0&&(p=p||c.clone(),p._flags[h]=g)}for(let h=0;h<c._rules.length;++h){const g=c._rules[h],m=f.scan(g.args,{source:"rules",name:g.name},d);if(m!==void 0){p=p||c.clone();const y=Object.assign({},g);y.args=m,p._rules[h]=y,p._singleRules.get(g.name)===g&&p._singleRules.set(g.name,y)}}for(const h in c.$_terms){if(h[0]==="_")continue;const g=f.scan(c.$_terms[h],{source:"terms",name:h},d);g!==void 0&&(p=p||c.clone(),p.$_terms[h]=g)}return p},f.scan=function(c,d,p,h,g){const m=h||[];if(c===null||typeof c!="object")return;let y;if(Array.isArray(c)){for(let v=0;v<c.length;++v){const x=d.source==="terms"&&d.name==="keys"&&c[v].key,_=f.scan(c[v],d,p,[v,...m],x);_!==void 0&&(y=y||c.slice(),y[v]=_)}return y}if(p.schema!==!1&&l.isSchema(c)||p.ref!==!1&&u.isRef(c)){const v=p.each(c,{...d,path:m,key:g});return v===c?void 0:v}for(const v in c){if(v[0]==="_")continue;const x=f.scan(c[v],d,p,[v,...m],g);x!==void 0&&(y=y||Object.assign({},c),y[v]=x)}return y}},6133:(i,o,s)=>{const a=s(375),l=s(8571),u=s(9621),f=s(8160);let c;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};o.create=function(p,h={}){a(typeof p=="string","Invalid reference key:",p),f.assertOptions(h,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!h.prefix||typeof h.prefix=="object","options.prefix must be of type object");const g=Object.assign({},d.defaults,h);delete g.prefix;const m=g.separator,y=d.context(p,m,h.prefix);if(g.type=y.type,p=y.key,g.type==="value")if(y.root&&(a(!m||p[0]!==m,"Cannot specify relative path with root prefix"),g.ancestor="root",p||(p=null)),m&&m===p)p=null,g.ancestor=0;else if(g.ancestor!==void 0)a(!m||!p||p[0]!==m,"Cannot combine prefix with ancestor option");else{const[v,x]=d.ancestor(p,m);x&&(p=p.slice(x))===""&&(p=null),g.ancestor=v}return g.path=m?p===null?[]:p.split(m):[p],new d.Ref(g)},o.in=function(p,h={}){return o.create(p,{...h,in:!0})},o.isRef=function(p){return!!p&&!!p[f.symbols.ref]},d.Ref=class{constructor(p){a(typeof p=="object","Invalid reference construction"),f.assertOptions(p,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(p.separator)||typeof p.separator=="string"&&p.separator.length===1,"Invalid separator"),a(!p.adjust||typeof p.adjust=="function","options.adjust must be a function"),a(!p.map||Array.isArray(p.map),"options.map must be an array"),a(!p.map||!p.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,p),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(p,h,g,m,y={}){return a(!this.in||y.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(g.context,h,y):this.type==="local"?this._resolve(m,h,y):this.ancestor?this.ancestor==="root"?this._resolve(h.ancestors[h.ancestors.length-1],h,y):(a(this.ancestor<=h.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(h.ancestors[this.ancestor-1],h,y)):this._resolve(p,h,y)}_resolve(p,h,g){let m;if(this.type==="value"&&h.mainstay.shadow&&g.shadow!==!1&&(m=h.mainstay.shadow.get(this.absolute(h))),m===void 0&&(m=u(p,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(m=this.adjust(m)),this.map){const y=this.map.get(m);y!==void 0&&(m=y)}return h.mainstay&&h.mainstay.tracer.resolve(h,this,m),m}toString(){return this.display}absolute(p){return[...p.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const p={path:this.path};this.type!=="value"&&(p.type=this.type),this.separator!=="."&&(p.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(p.ancestor=this.ancestor),this.map&&(p.map=[...this.map]);for(const h of["adjust","iterables","render"])this[h]!==null&&this[h]!==void 0&&(p[h]=this[h]);return this.in!==!1&&(p.in=!0),{ref:p}}updateDisplay(){const p=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${p}`);if(!this.separator)return void(this.display=`ref:${p}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${p}`);if(this.ancestor==="root")return void(this.display=`ref:root:${p}`);if(this.ancestor===1)return void(this.display=`ref:${p||".."}`);const h=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${h}${p||""}`}},d.Ref.prototype[f.symbols.ref]=!0,o.build=function(p){return(p=Object.assign({},d.defaults,p)).type==="value"&&p.ancestor===void 0&&(p.ancestor=1),new d.Ref(p)},d.context=function(p,h,g={}){if(p=p.trim(),g){const m=g.global===void 0?"$":g.global;if(m!==h&&p.startsWith(m))return{key:p.slice(m.length),type:"global"};const y=g.local===void 0?"#":g.local;if(y!==h&&p.startsWith(y))return{key:p.slice(y.length),type:"local"};const v=g.root===void 0?"/":g.root;if(v!==h&&p.startsWith(v))return{key:p.slice(v.length),type:"value",root:!0}}return{key:p,type:"value"}},d.ancestor=function(p,h){if(!h)return[1,0];if(p[0]!==h)return[1,0];if(p[1]!==h)return[0,1];let g=2;for(;p[g]===h;)++g;return[g-1,g]},o.toSibling=0,o.toParent=1,o.Manager=class{constructor(){this.refs=[]}register(p,h){if(p)if(h=h===void 0?o.toParent:h,Array.isArray(p))for(const g of p)this.register(g,h);else if(f.isSchema(p))for(const g of p._refs.refs)g.ancestor-h>=0&&this.refs.push({ancestor:g.ancestor-h,root:g.root});else o.isRef(p)&&p.type==="value"&&p.ancestor-h>=0&&this.refs.push({ancestor:p.ancestor-h,root:p.root}),c=c||s(3328),c.isTemplate(p)&&this.register(p.refs(),h)}get length(){return this.refs.length}clone(){const p=new o.Manager;return p.refs=l(this.refs),p}reset(){this.refs=[]}roots(){return this.refs.filter(p=>!p.ancestor).map(p=>p.root)}}},3378:(i,o,s)=>{const a=s(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),o.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),o.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),o.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),o.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(i,o,s)=>{const a=s(8571),l=s(9621),u=s(8160),f={value:Symbol("value")};i.exports=f.State=class{constructor(c,d,p){this.path=c,this.ancestors=d,this.mainstay=p.mainstay,this.schemas=p.schemas,this.debug=null}localize(c,d=null,p=null){const h=new f.State(c,d,this);return p&&h.schemas&&(h.schemas=[f.schemas(p),...h.schemas]),h}nest(c,d){const p=new f.State(this.path,this.ancestors,this);return p.schemas=p.schemas&&[f.schemas(c),...p.schemas],p.debug=d,p}shadow(c,d){this.mainstay.shadow=this.mainstay.shadow||new f.Shadow,this.mainstay.shadow.set(this.path,c,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},f.schemas=function(c){return u.isSchema(c)?{schema:c}:c},f.Shadow=class{constructor(){this._values=null}set(c,d,p){if(!c.length||p==="strip"&&typeof c[c.length-1]=="number")return;this._values=this._values||new Map;let h=this._values;for(let g=0;g<c.length;++g){const m=c[g];let y=h.get(m);y||(y=new Map,h.set(m,y)),h=y}h[f.value]=d}get(c){const d=this.node(c);if(d)return d[f.value]}node(c){if(this._values)return l(this._values,c,{iterables:!0})}override(c,d){if(!this._values)return;const p=c.slice(0,-1),h=c[c.length-1],g=l(this._values,p,{iterables:!0});d?g.set(h,d):g&&g.delete(h)}}},3328:(i,o,s)=>{const a=s(375),l=s(8571),u=s(5277),f=s(1447),c=s(8160),d=s(6354),p=s(6133),h={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};i.exports=h.Template=class{constructor(g,m){if(a(typeof g=="string","Template source must be a string"),a(!g.includes("\0")&&!g.includes(""),"Template source cannot contain reserved control characters"),this.source=g,this.rendered=g,this._template=null,m){const{functions:y,...v}=m;this._settings=Object.keys(v).length?l(v):void 0,this._functions=y,this._functions&&(a(Object.keys(this._functions).every(x=>typeof x=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(x=>typeof x=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const g=h.encode(this.source),m=h.split(g);let y=!1;const v=[],x=m.shift();x&&v.push(x);for(const _ of m){const E=_[0]!=="{",C=E?"}":"}}",w=_.indexOf(C);if(w===-1||_[1]==="{"){v.push(`{${h.decode(_)}`);continue}let T=_.slice(E?0:1,w);const R=T[0]===":";R&&(T=T.slice(1));const L=this._ref(h.decode(T),{raw:E,wrapped:R});v.push(L),typeof L!="string"&&(y=!0);const B=_.slice(w+C.length);B&&v.push(h.decode(B))}y?this._template=v:this.rendered=v.join("")}static date(g,m){return h.dateFormat[m.dateFormat].call(g)}describe(g={}){if(!this._settings&&g.compact)return this.source;const m={template:this.source};return this._settings&&(m.options=this._settings),this._functions&&(m.functions=this._functions),m}static build(g){return new h.Template(g.template,g.options||g.functions?{...g.options,functions:g.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(g){return!!g&&!!g[c.symbols.template]}refs(){if(!this._template)return;const g=[];for(const m of this._template)typeof m!="string"&&g.push(...m.refs);return g}resolve(g,m,y,v){return this._template&&this._template.length===1?this._part(this._template[0],g,m,y,v,{}):this.render(g,m,y,v)}_part(g,...m){return g.ref?g.ref.resolve(...m):g.formula.evaluate(m)}render(g,m,y,v,x={}){if(!this.isDynamic())return this.rendered;const _=[];for(const E of this._template)if(typeof E=="string")_.push(E);else{const C=this._part(E,g,m,y,v,x),w=h.stringify(C,g,m,y,v,x);if(w!==void 0){const T=E.raw||(x.errors&&x.errors.escapeHtml)===!1?w:u(w);_.push(h.wrap(T,E.wrapped&&y.errors.wrap.label))}}return _.join("")}_ref(g,{raw:m,wrapped:y}){const v=[],x=E=>{const C=p.create(E,this._settings);return v.push(C),w=>{const T=C.resolve(...w);return T!==void 0?T:null}};try{const E=this._functions?{...h.functions,...this._functions}:h.functions;var _=new f.Parser(g,{reference:x,functions:E,constants:h.constants})}catch(E){throw E.message=`Invalid template variable "${g}" fails due to: ${E.message}`,E}if(_.single){if(_.single.type==="reference"){const E=v[0];return{ref:E,raw:m,refs:v,wrapped:y||E.type==="local"&&E.key==="label"}}return h.stringify(_.single.value)}return{formula:_,raw:m,refs:v}}toString(){return this.source}},h.Template.prototype[c.symbols.template]=!0,h.Template.prototype.isImmutable=!0,h.encode=function(g){return g.replace(/\\(\{+)/g,(m,y)=>h.opens.slice(0,y.length)).replace(/\\(\}+)/g,(m,y)=>h.closes.slice(0,y.length))},h.decode=function(g){return g.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},h.split=function(g){const m=[];let y="";for(let v=0;v<g.length;++v){const x=g[v];if(x==="{"){let _="";for(;v+1<g.length&&g[v+1]==="{";)_+="{",++v;m.push(y),y=_}else y+=x}return m.push(y),m},h.wrap=function(g,m){return m?m.length===1?`${m}${g}${m}`:`${m[0]}${g}${m[1]}`:g},h.stringify=function(g,m,y,v,x,_={}){const E=typeof g,C=v&&v.errors&&v.errors.wrap||{};let w=!1;if(p.isRef(g)&&g.render&&(w=g.in,g=g.resolve(m,y,v,x,{in:g.in,..._})),g===null)return"null";if(E==="string")return h.wrap(g,_.arrayItems&&C.string);if(E==="number"||E==="function"||E==="symbol")return g.toString();if(E!=="object")return JSON.stringify(g);if(g instanceof Date)return h.Template.date(g,v);if(g instanceof Map){const R=[];for(const[L,B]of g.entries())R.push(`${L.toString()} -> ${B.toString()}`);g=R}if(!Array.isArray(g))return g.toString();const T=[];for(const R of g)T.push(h.stringify(R,m,y,v,x,{arrayItems:!0,..._}));return h.wrap(T.join(", "),!w&&C.array)},h.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},h.functions={if:(g,m,y)=>g?m:y,length:g=>typeof g=="string"?g.length:g&&typeof g=="object"?Array.isArray(g)?g.length:Object.keys(g).length:null,msg(g){const[m,y,v,x,_]=this,E=_.messages;if(!E)return"";const C=d.template(m,E[0],g,y,v)||d.template(m,E[1],g,y,v);return C?C.render(m,y,v,x,_):""},number:g=>typeof g=="number"?g:typeof g=="string"?parseFloat(g):typeof g=="boolean"?g?1:0:g instanceof Date?g.getTime():null}},4946:(i,o,s)=>{const a=s(375),l=s(1687),u=s(8068),f=s(8160),c=s(3292),d=s(6354),p=s(6133),h={};i.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:p.toSibling}},args:(g,...m)=>m.length===1&&Array.isArray(m[0])?g.try(...m[0]):g.try(...m),validate(g,m){const{schema:y,error:v,state:x,prefs:_}=m;if(y._flags.match){const C=[],w=[];for(let R=0;R<y.$_terms.matches.length;++R){const L=y.$_terms.matches[R],B=x.nest(L.schema,`match.${R}`);B.snapshot();const P=L.schema.$_validate(g,B,_);P.errors?(w.push(P.errors),B.restore()):(C.push(P.value),B.commit())}if(C.length===0)return{errors:v("alternatives.any",{details:w.map(R=>d.details(R,{override:!1}))})};if(y._flags.match==="one")return C.length===1?{value:C[0]}:{errors:v("alternatives.one")};if(C.length!==y.$_terms.matches.length)return{errors:v("alternatives.all",{details:w.map(R=>d.details(R,{override:!1}))})};const T=R=>R.$_terms.matches.some(L=>L.schema.type==="object"||L.schema.type==="alternatives"&&T(L.schema));return T(y)?{value:C.reduce((R,L)=>l(R,L,{mergeArrays:!1}))}:{value:C[C.length-1]}}const E=[];for(let C=0;C<y.$_terms.matches.length;++C){const w=y.$_terms.matches[C];if(w.schema){const L=x.nest(w.schema,`match.${C}`);L.snapshot();const B=w.schema.$_validate(g,L,_);if(!B.errors)return L.commit(),B;L.restore(),E.push({schema:w.schema,reports:B.errors});continue}const T=w.ref?w.ref.resolve(g,x,_):g,R=w.is?[w]:w.switch;for(let L=0;L<R.length;++L){const B=R[L],{is:P,then:S,otherwise:k}=B,D=`match.${C}${w.switch?"."+L:""}`;if(P.$_match(T,x.nest(P,`${D}.is`),_)){if(S)return S.$_validate(g,x.nest(S,`${D}.then`),_)}else if(k)return k.$_validate(g,x.nest(k,`${D}.otherwise`),_)}}return h.errors(E,m)},rules:{conditional:{method(g,m){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(m.break===void 0,"Cannot use break option with alternatives conditional");const y=this.clone(),v=c.when(y,g,m),x=v.is?[v]:v.switch;for(const _ of x)if(_.then&&_.otherwise){y.$_setFlag("_endedSwitch",!0,{clone:!1});break}return y.$_terms.matches.push(v),y.$_mutateRebuild()}},match:{method(g){if(a(["any","one","all"].includes(g),"Invalid alternatives match mode",g),g!=="any")for(const m of this.$_terms.matches)a(m.schema,"Cannot combine match mode",g,"with conditional rules");return this.$_setFlag("match",g)}},try:{method(...g){a(g.length,"Missing alternative schemas"),f.verifyFlat(g,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const m=this.clone();for(const y of g)m.$_terms.matches.push({schema:m.$_compile(y)});return m.$_mutateRebuild()}}},overrides:{label(g){return this.$_parent("label",g).$_modify({each:(m,y)=>y.path[0]!=="is"&&typeof m._flags.label!="string"?m.label(g):void 0,ref:!1})}},rebuild(g){g.$_modify({each:m=>{f.isSchema(m)&&m.type==="array"&&g.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(g,m){if(m.matches)for(const y of m.matches){const{schema:v,ref:x,is:_,not:E,then:C,otherwise:w}=y;g=v?g.try(v):x?g.conditional(x,{is:_,then:C,not:E,otherwise:w,switch:y.switch}):g.conditional(_,{then:C,otherwise:w})}return g}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),h.errors=function(g,{error:m,state:y}){if(!g.length)return{errors:m("alternatives.any")};if(g.length===1)return{errors:g[0].reports};const v=new Set,x=[];for(const{reports:_,schema:E}of g){if(_.length>1)return h.unmatched(g,m);const C=_[0];if(C instanceof d.Report==0)return h.unmatched(g,m);if(C.state.path.length!==y.path.length){x.push({type:E.type,report:C});continue}if(C.code==="any.only"){for(const R of C.local.valids)v.add(R);continue}const[w,T]=C.code.split(".");T!=="base"?x.push({type:E.type,report:C}):C.code==="object.base"?v.add(C.local.type):v.add(w)}return x.length?x.length===1?{errors:x[0].report}:h.unmatched(g,m):{errors:m("alternatives.types",{types:[...v]})}},h.unmatched=function(g,m){const y=[];for(const v of g)y.push(...v.reports);return{errors:m("alternatives.match",d.details(y,{override:!1}))}}},8068:(i,o,s)=>{const a=s(375),l=s(7629),u=s(8160),f=s(6914);i.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(c,d){return a(typeof c=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:c,description:d}})},validate(c,d,{method:p}){try{return p(c,d)}catch(h){return d.error("any.custom",{error:h})}},args:["method","description"],multi:!0},messages:{method(c){return this.prefs({messages:c})}},shared:{method(c){a(u.isSchema(c)&&c._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(c),d.$_mutateRegister(c),d}},warning:{method(c,d){return a(c&&typeof c=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:c,local:d},warn:!0})},validate:(c,d,{code:p,local:h})=>d.error(p,h),args:["code","local"],multi:!0}},modifiers:{keep(c,d=!0){c.keep=d},message(c,d){c.message=f.compile(d)},warn(c,d=!0){c.warn=d}},manifest:{build(c,d){for(const p in d){const h=d[p];if(["examples","externals","metas","notes","tags"].includes(p))for(const g of h)c=c[p.slice(0,-1)](g);else if(p!=="alterations")if(p!=="whens"){if(p==="shared")for(const g of h)c=c.shared(g)}else for(const g of h){const{ref:m,is:y,not:v,then:x,otherwise:_,concat:E}=g;c=E?c.concat(E):m?c.when(m,{is:y,not:v,then:x,otherwise:_,switch:g.switch,break:g.break}):c.when(y,{then:x,otherwise:_,break:g.break})}else{const g={};for(const{target:m,adjuster:y}of h)g[m]=y;c=c.alter(g)}}return c}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(i,o,s)=>{const a=s(375),l=s(9474),u=s(9621),f=s(8068),c=s(8160),d=s(3292),p={};i.exports=f.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(h,{schema:g,state:m,prefs:y}){if(!Array.isArray(h))return;const v=g.$_getRule("sort");return v?p.sort(g,h,v.args.options,m,y):void 0}},validate(h,{schema:g,error:m}){if(!Array.isArray(h)){if(g._flags.single){const y=[h];return y[c.symbols.arraySingle]=!0,{value:y}}return{errors:m("array.base")}}if(g.$_getRule("items")||g.$_terms.externals)return{value:h.slice()}},rules:{has:{method(h){h=this.$_compile(h,{appendPath:!0});const g=this.$_addRule({name:"has",args:{schema:h}});return g.$_mutateRegister(h),g},validate(h,{state:g,prefs:m,error:y},{schema:v}){const x=[h,...g.ancestors];for(let E=0;E<h.length;++E){const C=g.localize([...g.path,E],x,v);if(v.$_match(h[E],C,m))return h}const _=v._flags.label;return _?y("array.hasKnown",{patternLabel:_}):y("array.hasUnknown",null)},multi:!0},items:{method(...h){c.verifyFlat(h,"items");const g=this.$_addRule("items");for(let m=0;m<h.length;++m){const y=c.tryWithPath(()=>this.$_compile(h[m]),m,{append:!0});g.$_terms.items.push(y)}return g.$_mutateRebuild()},validate(h,{schema:g,error:m,state:y,prefs:v,errorsArray:x}){const _=g.$_terms._requireds.slice(),E=g.$_terms.ordered.slice(),C=[...g.$_terms._inclusions,..._],w=!h[c.symbols.arraySingle];delete h[c.symbols.arraySingle];const T=x();let R=h.length;for(let L=0;L<R;++L){const B=h[L];let P=!1,S=!1;const k=w?L:new Number(L),D=[...y.path,k];if(!g._flags.sparse&&B===void 0){if(T.push(m("array.sparse",{key:k,path:D,pos:L,value:void 0},y.localize(D))),v.abortEarly)return T;E.shift();continue}const O=[h,...y.ancestors];for(const W of g.$_terms._exclusions)if(W.$_match(B,y.localize(D,O,W),v,{presence:"ignore"})){if(T.push(m("array.excludes",{pos:L,value:B},y.localize(D))),v.abortEarly)return T;P=!0,E.shift();break}if(P)continue;if(g.$_terms.ordered.length){if(E.length){const W=E.shift(),Q=W.$_validate(B,y.localize(D,O,W),v);if(Q.errors){if(T.push(...Q.errors),v.abortEarly)return T}else if(W._flags.result==="strip")p.fastSplice(h,L),--L,--R;else{if(!g._flags.sparse&&Q.value===void 0){if(T.push(m("array.sparse",{key:k,path:D,pos:L,value:void 0},y.localize(D))),v.abortEarly)return T;continue}h[L]=Q.value}continue}if(!g.$_terms.items.length){if(T.push(m("array.orderedLength",{pos:L,limit:g.$_terms.ordered.length})),v.abortEarly)return T;break}}const N=[];let j=_.length;for(let W=0;W<j;++W){const Q=y.localize(D,O,_[W]);Q.snapshot();const ee=_[W].$_validate(B,Q,v);if(N[W]=ee,!ee.errors){if(Q.commit(),h[L]=ee.value,S=!0,p.fastSplice(_,W),--W,--j,!g._flags.sparse&&ee.value===void 0&&(T.push(m("array.sparse",{key:k,path:D,pos:L,value:void 0},y.localize(D))),v.abortEarly))return T;break}Q.restore()}if(S)continue;const q=v.stripUnknown&&!!v.stripUnknown.arrays||!1;j=C.length;for(const W of C){let Q;const ee=_.indexOf(W);if(ee!==-1)Q=N[ee];else{const H=y.localize(D,O,W);if(H.snapshot(),Q=W.$_validate(B,H,v),!Q.errors){H.commit(),W._flags.result==="strip"?(p.fastSplice(h,L),--L,--R):g._flags.sparse||Q.value!==void 0?h[L]=Q.value:(T.push(m("array.sparse",{key:k,path:D,pos:L,value:void 0},y.localize(D))),P=!0),S=!0;break}H.restore()}if(j===1){if(q){p.fastSplice(h,L),--L,--R,S=!0;break}if(T.push(...Q.errors),v.abortEarly)return T;P=!0;break}}if(!P&&(g.$_terms._inclusions.length||g.$_terms._requireds.length)&&!S){if(q){p.fastSplice(h,L),--L,--R;continue}if(T.push(m("array.includes",{pos:L,value:B},y.localize(D))),v.abortEarly)return T}}return _.length&&p.fillMissedErrors(g,T,_,h,y,v),E.length&&(p.fillOrderedErrors(g,T,E,h,y,v),T.length||p.fillDefault(E,h,y,v)),T.length?T:h},priority:!0,manifest:!1},length:{method(h){return this.$_addRule({name:"length",args:{limit:h},operator:"="})},validate:(h,g,{limit:m},{name:y,operator:v,args:x})=>c.compare(h.length,m,v)?h:g.error("array."+y,{limit:x.limit,value:h}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(h){return this.$_addRule({name:"max",method:"length",args:{limit:h},operator:"<="})}},min:{method(h){return this.$_addRule({name:"min",method:"length",args:{limit:h},operator:">="})}},ordered:{method(...h){c.verifyFlat(h,"ordered");const g=this.$_addRule("items");for(let m=0;m<h.length;++m){const y=c.tryWithPath(()=>this.$_compile(h[m]),m,{append:!0});p.validateSingle(y,g),g.$_mutateRegister(y),g.$_terms.ordered.push(y)}return g.$_mutateRebuild()}},single:{method(h){const g=h===void 0||!!h;return a(!g||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",g)}},sort:{method(h={}){c.assertOptions(h,["by","order"]);const g={order:h.order||"ascending"};return h.by&&(g.by=d.ref(h.by,{ancestor:0}),a(!g.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:g}})},validate(h,{error:g,state:m,prefs:y,schema:v},{options:x}){const{value:_,errors:E}=p.sort(v,h,x,m,y);if(E)return E;for(let C=0;C<h.length;++C)if(h[C]!==_[C])return g("array.sort",{order:x.order,by:x.by?x.by.key:"value"});return h},convert:!0},sparse:{method(h){const g=h===void 0||!!h;return this._flags.sparse===g?this:(g?this.clone():this.$_addRule("items")).$_setFlag("sparse",g,{clone:!1})}},unique:{method(h,g={}){a(!h||typeof h=="function"||typeof h=="string","comparator must be a function or a string"),c.assertOptions(g,["ignoreUndefined","separator"]);const m={name:"unique",args:{options:g,comparator:h}};if(h)if(typeof h=="string"){const y=c.default(g.separator,".");m.path=y?h.split(y):[h]}else m.comparator=h;return this.$_addRule(m)},validate(h,{state:g,error:m,schema:y},{comparator:v,options:x},{comparator:_,path:E}){const C={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},w=_||l,T=x.ignoreUndefined;for(let R=0;R<h.length;++R){const L=E?u(h[R],E):h[R],B=_?C.custom:C[typeof L];if(a(B,"Failed to find unique map container for type",typeof L),B instanceof Map){const P=B.entries();let S;for(;!(S=P.next()).done;)if(w(S.value[0],L)){const k=g.localize([...g.path,R],[h,...g.ancestors]),D={pos:R,value:h[R],dupePos:S.value[1],dupeValue:h[S.value[1]]};return E&&(D.path=v),m("array.unique",D,k)}B.set(L,R)}else{if((!T||L!==void 0)&&B[L]!==void 0){const P={pos:R,value:h[R],dupePos:B[L],dupeValue:h[B[L]]};return E&&(P.path=v),m("array.unique",P,g.localize([...g.path,R],[h,...g.ancestors]))}B[L]=R}}return h},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(h,g)=>new Set(h)}},rebuild(h){h.$_terms._inclusions=[],h.$_terms._exclusions=[],h.$_terms._requireds=[];for(const g of h.$_terms.items)p.validateSingle(g,h),g._flags.presence==="required"?h.$_terms._requireds.push(g):g._flags.presence==="forbidden"?h.$_terms._exclusions.push(g):h.$_terms._inclusions.push(g);for(const g of h.$_terms.ordered)p.validateSingle(g,h)},manifest:{build:(h,g)=>(g.items&&(h=h.items(...g.items)),g.ordered&&(h=h.ordered(...g.ordered)),h)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),p.fillMissedErrors=function(h,g,m,y,v,x){const _=[];let E=0;for(const C of m){const w=C._flags.label;w?_.push(w):++E}_.length?E?g.push(h.$_createError("array.includesRequiredBoth",y,{knownMisses:_,unknownMisses:E},v,x)):g.push(h.$_createError("array.includesRequiredKnowns",y,{knownMisses:_},v,x)):g.push(h.$_createError("array.includesRequiredUnknowns",y,{unknownMisses:E},v,x))},p.fillOrderedErrors=function(h,g,m,y,v,x){const _=[];for(const E of m)E._flags.presence==="required"&&_.push(E);_.length&&p.fillMissedErrors(h,g,_,y,v,x)},p.fillDefault=function(h,g,m,y){const v=[];let x=!0;for(let _=h.length-1;_>=0;--_){const E=h[_],C=[g,...m.ancestors],w=E.$_validate(void 0,m.localize(m.path,C,E),y).value;if(x){if(w===void 0)continue;x=!1}v.unshift(w)}v.length&&g.push(...v)},p.fastSplice=function(h,g){let m=g;for(;m<h.length;)h[m++]=h[m];--h.length},p.validateSingle=function(h,g){(h.type==="array"||h._flags._arrayItems)&&(a(!g._flags.single,"Cannot specify array item with single rule enabled"),g.$_setFlag("_arrayItems",!0,{clone:!1}))},p.sort=function(h,g,m,y,v){const x=m.order==="ascending"?1:-1,_=-1*x,E=x,C=(w,T)=>{let R=p.compare(w,T,_,E);if(R!==null||(m.by&&(w=m.by.resolve(w,y,v),T=m.by.resolve(T,y,v)),R=p.compare(w,T,_,E),R!==null))return R;const L=typeof w;if(L!==typeof T)throw h.$_createError("array.sort.mismatching",g,null,y,v);if(L!=="number"&&L!=="string")throw h.$_createError("array.sort.unsupported",g,{type:L},y,v);return L==="number"?(w-T)*x:w<T?_:E};try{return{value:g.slice().sort(C)}}catch(w){return{errors:w}}},p.compare=function(h,g,m,y){return h===g?0:h===void 0?1:g===void 0?-1:h===null?y:g===null?m:null}},4937:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(2036),c={isBool:function(d){return typeof d=="boolean"}};i.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:p}){if(typeof d!="boolean"){if(typeof d=="string"){const h=p._flags.sensitive?d:d.toLowerCase();d=h==="true"||h!=="false"&&d}return typeof d!="boolean"&&(d=p.$_terms.truthy&&p.$_terms.truthy.has(d,null,null,!p._flags.sensitive)||(!p.$_terms.falsy||!p.$_terms.falsy.has(d,null,null,!p._flags.sensitive))&&d),{value:d}}},validate(d,{error:p}){if(typeof d!="boolean")return{value:d,errors:p("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const p=this.clone();p.$_terms.truthy=p.$_terms.truthy||new f;for(let h=0;h<d.length;++h){const g=d[h];a(g!==void 0,"Cannot call truthy with undefined"),p.$_terms.truthy.add(g)}return p}},falsy:{method(...d){u.verifyFlat(d,"falsy");const p=this.clone();p.$_terms.falsy=p.$_terms.falsy||new f;for(let h=0;h<d.length;++h){const g=d[h];a(g!==void 0,"Cannot call falsy with undefined"),p.$_terms.falsy.add(g)}return p}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:c.isBool,to:(d,p)=>d?1:0},string:{from:c.isBool,to:(d,p)=>d?"true":"false"}},manifest:{build:(d,p)=>(p.truthy&&(d=d.truthy(...p.truthy)),p.falsy&&(d=d.falsy(...p.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(3328),c={isDate:function(d){return d instanceof Date}};i.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:p})=>({value:c.parse(d,p._flags.format)||d})},validate(d,{schema:p,error:h,prefs:g}){if(d instanceof Date&&!isNaN(d.getTime()))return;const m=p._flags.format;return g.convert&&m&&typeof d=="string"?{value:d,errors:h("date.format",{format:m})}:{value:d,errors:h("date.base")}},rules:{compare:{method:!1,validate(d,p,{date:h},{name:g,operator:m,args:y}){const v=h==="now"?Date.now():h.getTime();return u.compare(d.getTime(),v,m)?d:p.error("date."+g,{limit:y.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:c.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:c.isDate,to:(d,p)=>d.getTime()},string:{from:c.isDate,to:(d,{prefs:p})=>f.date(d,p)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),c.parse=function(d,p){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(p==="iso")return u.isIsoDate(d)?c.date(d.toString()):null;const h=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),p){if(p==="javascript")return c.date(1*d);if(p==="unix")return c.date(1e3*d);if(typeof h=="string")return null}return c.date(d)},c.date=function(d){const p=new Date(d);return isNaN(p.getTime())?null:p}},390:(i,o,s)=>{const a=s(375),l=s(7824);i.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,f,{n:c})=>u.length===c?u:f.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(u,f)=>/^\s*class\s/.test(u.toString())?u:f.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length>=c?u:f.error("function.minArity",{n:c})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length<=c?u:f.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(i,o,s)=>{const a=s(978),l=s(375),u=s(8571),f=s(3652),c=s(8068),d=s(8160),p=s(3292),h=s(6354),g=s(6133),m=s(3328),y={renameDefaults:{alias:!1,multiple:!1,override:!1}};i.exports=c.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(v,x)=>v.keys(x),validate(v,{schema:x,error:_,state:E,prefs:C}){if(!v||typeof v!==x.$_property("typeof")||Array.isArray(v))return{value:v,errors:_("object.base",{type:x.$_property("typeof")})};if(!(x.$_terms.renames||x.$_terms.dependencies||x.$_terms.keys||x.$_terms.patterns||x.$_terms.externals))return;v=y.clone(v,C);const w=[];if(x.$_terms.renames&&!y.rename(x,v,E,C,w))return{value:v,errors:w};if(!x.$_terms.keys&&!x.$_terms.patterns&&!x.$_terms.dependencies)return{value:v,errors:w};const T=new Set(Object.keys(v));if(x.$_terms.keys){const R=[v,...E.ancestors];for(const L of x.$_terms.keys){const B=L.key,P=v[B];T.delete(B);const S=E.localize([...E.path,B],R,L),k=L.schema.$_validate(P,S,C);if(k.errors){if(C.abortEarly)return{value:v,errors:k.errors};k.value!==void 0&&(v[B]=k.value),w.push(...k.errors)}else L.schema._flags.result==="strip"||k.value===void 0&&P!==void 0?delete v[B]:k.value!==void 0&&(v[B]=k.value)}}if(T.size||x._flags._hasPatternMatch){const R=y.unknown(x,v,T,w,E,C);if(R)return R}if(x.$_terms.dependencies)for(const R of x.$_terms.dependencies){if(R.key!==null&&y.isPresent(R.options)(R.key.resolve(v,E,C,null,{shadow:!1}))===!1)continue;const L=y.dependencies[R.rel](x,R,v,E,C);if(L){const B=x.$_createError(L.code,v,L.context,E,C);if(C.abortEarly)return{value:v,errors:B};w.push(B)}}return{value:v,errors:w}},rules:{and:{method(...v){return d.verifyFlat(v,"and"),y.dependency(this,"and",null,v)}},append:{method(v){return v==null||Object.keys(v).length===0?this:this.keys(v)}},assert:{method(v,x,_){m.isTemplate(v)||(v=p.ref(v)),l(_===void 0||typeof _=="string","Message must be a string"),x=this.$_compile(x,{appendPath:!0});const E=this.$_addRule({name:"assert",args:{subject:v,schema:x,message:_}});return E.$_mutateRegister(v),E.$_mutateRegister(x),E},validate(v,{error:x,prefs:_,state:E},{subject:C,schema:w,message:T}){const R=C.resolve(v,E,_),L=g.isRef(C)?C.absolute(E):[];return w.$_match(R,E.localize(L,[v,...E.ancestors],w),_)?v:x("object.assert",{subject:C,message:T})},args:["subject","schema","message"],multi:!0},instance:{method(v,x){return l(typeof v=="function","constructor must be a function"),x=x||v.name,this.$_addRule({name:"instance",args:{constructor:v,name:x}})},validate:(v,x,{constructor:_,name:E})=>v instanceof _?v:x.error("object.instance",{type:E,value:v}),args:["constructor","name"]},keys:{method(v){l(v===void 0||typeof v=="object","Object schema must be a valid object"),l(!d.isSchema(v),"Object schema cannot be a joi schema");const x=this.clone();if(v)if(Object.keys(v).length){x.$_terms.keys=x.$_terms.keys?x.$_terms.keys.filter(_=>!v.hasOwnProperty(_.key)):new y.Keys;for(const _ in v)d.tryWithPath(()=>x.$_terms.keys.push({key:_,schema:this.$_compile(v[_])}),_)}else x.$_terms.keys=new y.Keys;else x.$_terms.keys=null;return x.$_mutateRebuild()}},length:{method(v){return this.$_addRule({name:"length",args:{limit:v},operator:"="})},validate:(v,x,{limit:_},{name:E,operator:C,args:w})=>d.compare(Object.keys(v).length,_,C)?v:x.error("object."+E,{limit:w.limit,value:v}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(v){return this.$_addRule({name:"max",method:"length",args:{limit:v},operator:"<="})}},min:{method(v){return this.$_addRule({name:"min",method:"length",args:{limit:v},operator:">="})}},nand:{method(...v){return d.verifyFlat(v,"nand"),y.dependency(this,"nand",null,v)}},or:{method(...v){return d.verifyFlat(v,"or"),y.dependency(this,"or",null,v)}},oxor:{method(...v){return y.dependency(this,"oxor",null,v)}},pattern:{method(v,x,_={}){const E=v instanceof RegExp;E||(v=this.$_compile(v,{appendPath:!0})),l(x!==void 0,"Invalid rule"),d.assertOptions(_,["fallthrough","matches"]),E&&l(!v.flags.includes("g")&&!v.flags.includes("y"),"pattern should not use global or sticky mode"),x=this.$_compile(x,{appendPath:!0});const C=this.clone();C.$_terms.patterns=C.$_terms.patterns||[];const w={[E?"regex":"schema"]:v,rule:x};return _.matches&&(w.matches=this.$_compile(_.matches),w.matches.type!=="array"&&(w.matches=w.matches.$_root.array().items(w.matches)),C.$_mutateRegister(w.matches),C.$_setFlag("_hasPatternMatch",!0,{clone:!1})),_.fallthrough&&(w.fallthrough=!0),C.$_terms.patterns.push(w),C.$_mutateRegister(x),C}},ref:{method(){return this.$_addRule("ref")},validate:(v,x)=>g.isRef(v)?v:x.error("object.refType",{value:v})},regex:{method(){return this.$_addRule("regex")},validate:(v,x)=>v instanceof RegExp?v:x.error("object.regex",{value:v})},rename:{method(v,x,_={}){l(typeof v=="string"||v instanceof RegExp,"Rename missing the from argument"),l(typeof x=="string"||x instanceof m,"Invalid rename to argument"),l(x!==v,"Cannot rename key to same name:",v),d.assertOptions(_,["alias","ignoreUndefined","override","multiple"]);const E=this.clone();E.$_terms.renames=E.$_terms.renames||[];for(const C of E.$_terms.renames)l(C.from!==v,"Cannot rename the same key multiple times");return x instanceof m&&E.$_mutateRegister(x),E.$_terms.renames.push({from:v,to:x,options:a(y.renameDefaults,_)}),E}},schema:{method(v="any"){return this.$_addRule({name:"schema",args:{type:v}})},validate:(v,x,{type:_})=>!d.isSchema(v)||_!=="any"&&v.type!==_?x.error("object.schema",{type:_}):v},unknown:{method(v){return this.$_setFlag("unknown",v!==!1)}},with:{method(v,x,_={}){return y.dependency(this,"with",v,x,_)}},without:{method(v,x,_={}){return y.dependency(this,"without",v,x,_)}},xor:{method(...v){return d.verifyFlat(v,"xor"),y.dependency(this,"xor",null,v)}}},overrides:{default(v,x){return v===void 0&&(v=d.symbols.deepDefault),this.$_parent("default",v,x)}},rebuild(v){if(v.$_terms.keys){const x=new f.Sorter;for(const _ of v.$_terms.keys)d.tryWithPath(()=>x.add(_,{after:_.schema.$_rootReferences(),group:_.key}),_.key);v.$_terms.keys=new y.Keys(...x.nodes)}},manifest:{build(v,x){if(x.keys&&(v=v.keys(x.keys)),x.dependencies)for(const{rel:_,key:E=null,peers:C,options:w}of x.dependencies)v=y.dependency(v,_,E,C,w);if(x.patterns)for(const{regex:_,schema:E,rule:C,fallthrough:w,matches:T}of x.patterns)v=v.pattern(_||E,C,{fallthrough:w,matches:T});if(x.renames)for(const{from:_,to:E,options:C}of x.renames)v=v.rename(_,E,C);return v}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),y.clone=function(v,x){if(typeof v=="object"){if(x.nonEnumerables)return u(v,{shallow:!0});const E=Object.create(Object.getPrototypeOf(v));return Object.assign(E,v),E}const _=function(...E){return v.apply(this,E)};return _.prototype=u(v.prototype),Object.defineProperty(_,"name",{value:v.name,writable:!1}),Object.defineProperty(_,"length",{value:v.length,writable:!1}),Object.assign(_,v),_},y.dependency=function(v,x,_,E,C){l(_===null||typeof _=="string",x,"key must be a strings"),C||(C=E.length>1&&typeof E[E.length-1]=="object"?E.pop():{}),d.assertOptions(C,["separator","isPresent"]),E=[].concat(E);const w=d.default(C.separator,"."),T=[];for(const L of E)l(typeof L=="string",x,"peers must be strings"),T.push(p.ref(L,{separator:w,ancestor:0,prefix:!1}));_!==null&&(_=p.ref(_,{separator:w,ancestor:0,prefix:!1}));const R=v.clone();return R.$_terms.dependencies=R.$_terms.dependencies||[],R.$_terms.dependencies.push(new y.Dependency(x,_,T,E,C)),R},y.dependencies={and(v,x,_,E,C){const w=[],T=[],R=x.peers.length,L=y.isPresent(x.options);for(const B of x.peers)L(B.resolve(_,E,C,null,{shadow:!1}))===!1?w.push(B.key):T.push(B.key);if(w.length!==R&&T.length!==R)return{code:"object.and",context:{present:T,presentWithLabels:y.keysToLabels(v,T),missing:w,missingWithLabels:y.keysToLabels(v,w)}}},nand(v,x,_,E,C){const w=[],T=y.isPresent(x.options);for(const B of x.peers)T(B.resolve(_,E,C,null,{shadow:!1}))&&w.push(B.key);if(w.length!==x.peers.length)return;const R=x.paths[0],L=x.paths.slice(1);return{code:"object.nand",context:{main:R,mainWithLabel:y.keysToLabels(v,R),peers:L,peersWithLabels:y.keysToLabels(v,L)}}},or(v,x,_,E,C){const w=y.isPresent(x.options);for(const T of x.peers)if(w(T.resolve(_,E,C,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:x.paths,peersWithLabels:y.keysToLabels(v,x.paths)}}},oxor(v,x,_,E,C){const w=[],T=y.isPresent(x.options);for(const L of x.peers)T(L.resolve(_,E,C,null,{shadow:!1}))&&w.push(L.key);if(!w.length||w.length===1)return;const R={peers:x.paths,peersWithLabels:y.keysToLabels(v,x.paths)};return R.present=w,R.presentWithLabels=y.keysToLabels(v,w),{code:"object.oxor",context:R}},with(v,x,_,E,C){const w=y.isPresent(x.options);for(const T of x.peers)if(w(T.resolve(_,E,C,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:x.key.key,mainWithLabel:y.keysToLabels(v,x.key.key),peer:T.key,peerWithLabel:y.keysToLabels(v,T.key)}}},without(v,x,_,E,C){const w=y.isPresent(x.options);for(const T of x.peers)if(w(T.resolve(_,E,C,null,{shadow:!1})))return{code:"object.without",context:{main:x.key.key,mainWithLabel:y.keysToLabels(v,x.key.key),peer:T.key,peerWithLabel:y.keysToLabels(v,T.key)}}},xor(v,x,_,E,C){const w=[],T=y.isPresent(x.options);for(const L of x.peers)T(L.resolve(_,E,C,null,{shadow:!1}))&&w.push(L.key);if(w.length===1)return;const R={peers:x.paths,peersWithLabels:y.keysToLabels(v,x.paths)};return w.length===0?{code:"object.missing",context:R}:(R.present=w,R.presentWithLabels=y.keysToLabels(v,w),{code:"object.xor",context:R})}},y.keysToLabels=function(v,x){return Array.isArray(x)?x.map(_=>v.$_mapLabels(_)):v.$_mapLabels(x)},y.isPresent=function(v){return typeof v.isPresent=="function"?v.isPresent:x=>x!==void 0},y.rename=function(v,x,_,E,C){const w={};for(const T of v.$_terms.renames){const R=[],L=typeof T.from!="string";if(L)for(const B in x){if(x[B]===void 0&&T.options.ignoreUndefined||B===T.to)continue;const P=T.from.exec(B);P&&R.push({from:B,to:T.to,match:P})}else!Object.prototype.hasOwnProperty.call(x,T.from)||x[T.from]===void 0&&T.options.ignoreUndefined||R.push(T);for(const B of R){const P=B.from;let S=B.to;if(S instanceof m&&(S=S.render(x,_,E,B.match)),P!==S){if(!T.options.multiple&&w[S]&&(C.push(v.$_createError("object.rename.multiple",x,{from:P,to:S,pattern:L},_,E)),E.abortEarly)||Object.prototype.hasOwnProperty.call(x,S)&&!T.options.override&&!w[S]&&(C.push(v.$_createError("object.rename.override",x,{from:P,to:S,pattern:L},_,E)),E.abortEarly))return!1;x[P]===void 0?delete x[S]:x[S]=x[P],w[S]=!0,T.options.alias||delete x[P]}}}return!0},y.unknown=function(v,x,_,E,C,w){if(v.$_terms.patterns){let T=!1;const R=v.$_terms.patterns.map(B=>{if(B.matches)return T=!0,[]}),L=[x,...C.ancestors];for(const B of _){const P=x[B],S=[...C.path,B];for(let k=0;k<v.$_terms.patterns.length;++k){const D=v.$_terms.patterns[k];if(D.regex){const j=D.regex.test(B);if(C.mainstay.tracer.debug(C,"rule",`pattern.${k}`,j?"pass":"error"),!j)continue}else if(!D.schema.$_match(B,C.nest(D.schema,`pattern.${k}`),w))continue;_.delete(B);const O=C.localize(S,L,{schema:D.rule,key:B}),N=D.rule.$_validate(P,O,w);if(N.errors){if(w.abortEarly)return{value:x,errors:N.errors};E.push(...N.errors)}if(D.matches&&R[k].push(B),x[B]=N.value,!D.fallthrough)break}}if(T)for(let B=0;B<R.length;++B){const P=R[B];if(!P)continue;const S=v.$_terms.patterns[B].matches,k=C.localize(C.path,L,S),D=S.$_validate(P,k,w);if(D.errors){const O=h.details(D.errors,{override:!1});O.matches=P;const N=v.$_createError("object.pattern.match",x,O,C,w);if(w.abortEarly)return{value:x,errors:N};E.push(N)}}}if(_.size&&(v.$_terms.keys||v.$_terms.patterns)){if(w.stripUnknown&&v._flags.unknown===void 0||w.skipFunctions){const T=!(!w.stripUnknown||w.stripUnknown!==!0&&!w.stripUnknown.objects);for(const R of _)T?(delete x[R],_.delete(R)):typeof x[R]=="function"&&_.delete(R)}if(!d.default(v._flags.unknown,w.allowUnknown))for(const T of _){const R=C.localize([...C.path,T],[]),L=v.$_createError("object.unknown",x[T],{child:T},R,w,{flags:!1});if(w.abortEarly)return{value:x,errors:L};E.push(L)}}},y.Dependency=class{constructor(v,x,_,E,C){this.rel=v,this.key=x,this.peers=_,this.paths=E,this.options=C}describe(){const v={rel:this.rel,peers:this.paths};return this.key!==null&&(v.key=this.key.key),this.peers[0].separator!=="."&&(v.options={...v.options,separator:this.peers[0].separator}),this.options.isPresent&&(v.options={...v.options,isPresent:this.options.isPresent}),v}},y.Keys=class extends Array{concat(v){const x=this.slice(),_=new Map;for(let E=0;E<x.length;++E)_.set(x[E].key,E);for(const E of v){const C=E.key,w=_.get(C);w!==void 0?x[w]={key:C,schema:x[w].schema.concat(E.schema)}:x.push(E)}return x}}},8785:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f=s(3292),c=s(6354),d={};i.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(p,h)=>p.ref(h),validate(p,{schema:h,state:g,prefs:m}){a(h.$_terms.link,"Uninitialized link schema");const y=d.generate(h,p,g,m),v=h.$_terms.link[0].ref;return y.$_validate(p,g.nest(y,`link:${v.display}:${y.type}`),m)},generate:(p,h,g,m)=>d.generate(p,h,g,m),rules:{ref:{method(p){a(!this.$_terms.link,"Cannot reinitialize schema"),p=f.ref(p),a(p.type==="value"||p.type==="local","Invalid reference type:",p.type),a(p.type==="local"||p.ancestor==="root"||p.ancestor>0,"Link cannot reference itself");const h=this.clone();return h.$_terms.link=[{ref:p}],h}},relative:{method(p=!0){return this.$_setFlag("relative",p)}}},overrides:{concat(p){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(p),"Invalid schema object"),a(p.type!=="link","Cannot merge type link with another link");const h=this.clone();return h.$_terms.whens||(h.$_terms.whens=[]),h.$_terms.whens.push({concat:p}),h.$_mutateRebuild()}},manifest:{build:(p,h)=>(a(h.link,"Invalid link description missing link"),p.ref(h.link))}}),d.generate=function(p,h,g,m){let y=g.mainstay.links.get(p);if(y)return y._generate(h,g,m).schema;const v=p.$_terms.link[0].ref,{perspective:x,path:_}=d.perspective(v,g);d.assert(x,"which is outside of schema boundaries",v,p,g,m);try{y=_.length?x.$_reach(_):x}catch{d.assert(!1,"to non-existing schema",v,p,g,m)}return d.assert(y.type!=="link","which is another link",v,p,g,m),p._flags.relative||g.mainstay.links.set(p,y),y._generate(h,g,m).schema},d.perspective=function(p,h){if(p.type==="local"){for(const{schema:g,key:m}of h.schemas){if((g._flags.id||m)===p.path[0])return{perspective:g,path:p.path.slice(1)};if(g.$_terms.shared){for(const y of g.$_terms.shared)if(y._flags.id===p.path[0])return{perspective:y,path:p.path.slice(1)}}}return{perspective:null,path:null}}return p.ancestor==="root"?{perspective:h.schemas[h.schemas.length-1].schema,path:p.path}:{perspective:h.schemas[p.ancestor]&&h.schemas[p.ancestor].schema,path:p.path}},d.assert=function(p,h,g,m,y,v){p||a(!1,`"${c.label(m._flags,y,v)}" contains link reference "${g.display}" ${h}`)}},3832:(i,o,s)=>{const a=s(375),l=s(8068),u=s(8160),f={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(c){const d=c.toString(),p=d.indexOf("."),h=d.indexOf("e");return(p<0?0:(h<0?d.length:h)-p-1)+(h<0?0:Math.max(0,-parseInt(d.slice(h+1))))}};i.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(c,{schema:d,error:p}){if(!c.match(f.numberRx))return;c=c.trim();const h={value:parseFloat(c)};if(h.value===0&&(h.value=0),!d._flags.unsafe)if(c.match(/e/i)){if(f.extractSignificantDigits(c)!==f.extractSignificantDigits(String(h.value)))return h.errors=p("number.unsafe"),h}else{const g=h.value.toString();if(g.match(/e/i))return h;if(g!==f.normalizeDecimal(c))return h.errors=p("number.unsafe"),h}return h}},validate(c,{schema:d,error:p,prefs:h}){if(c===1/0||c===-1/0)return{value:c,errors:p("number.infinity")};if(!u.isNumber(c))return{value:c,errors:p("number.base")};const g={value:c};if(h.convert){const m=d.$_getRule("precision");if(m){const y=Math.pow(10,m.args.limit);g.value=Math.round(g.value*y)/y}}return g.value===0&&(g.value=0),!d._flags.unsafe&&(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&(g.errors=p("number.unsafe")),g},rules:{compare:{method:!1,validate:(c,d,{limit:p},{name:h,operator:g,args:m})=>u.compare(c,p,g)?c:d.error("number."+h,{limit:m.limit,value:c}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(c){return this.$_addRule({name:"greater",method:"compare",args:{limit:c},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(c,d)=>Math.trunc(c)-c==0?c:d.error("number.integer")},less:{method(c){return this.$_addRule({name:"less",method:"compare",args:{limit:c},operator:"<"})}},max:{method(c){return this.$_addRule({name:"max",method:"compare",args:{limit:c},operator:"<="})}},min:{method(c){return this.$_addRule({name:"min",method:"compare",args:{limit:c},operator:">="})}},multiple:{method(c){const d=typeof c=="number"?f.decimalPlaces(c):null,p=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:c,baseDecimalPlace:d,pfactor:p}})},validate:(c,d,{base:p,baseDecimalPlace:h,pfactor:g},m)=>f.decimalPlaces(c)>h?d.error("number.multiple",{multiple:m.args.base,value:c}):Math.round(g*c)%Math.round(g*p)==0?c:d.error("number.multiple",{multiple:m.args.base,value:c}),args:[{name:"base",ref:!0,assert:c=>typeof c=="number"&&isFinite(c)&&c>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(c,d)=>Number.isSafeInteger(c)&&c>=0&&c<=65535?c:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(c){return a(Number.isSafeInteger(c),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:c}})},validate(c,d,{limit:p}){const h=c.toString().match(f.precisionRx);return Math.max((h[1]?h[1].length:0)-(h[2]?parseInt(h[2],10):0),0)<=p?c:d.error("number.precision",{limit:p,value:c})},convert:!0},sign:{method(c){return a(["negative","positive"].includes(c),"Invalid sign",c),this.$_addRule({name:"sign",args:{sign:c}})},validate:(c,d,{sign:p})=>p==="negative"&&c<0||p==="positive"&&c>0?c:d.error(`number.${p}`)},unsafe:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",c)}}},cast:{string:{from:c=>typeof c=="number",to:(c,d)=>c.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),f.extractSignificantDigits=function(c){return c.replace(f.exponentialPartRegex,"").replace(f.dotRegex,"").replace(f.trailingZerosRegex,"").replace(f.leadingSignAndZerosRegex,"")},f.normalizeDecimal=function(c){return(c=c.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&c.endsWith("0")&&(c=c.replace(/0+$/,"")),c==="-0"?"0":c}},8966:(i,o,s)=>{const a=s(7824);i.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(i,o,s)=>{const a=s(375),l=s(5380),u=s(1745),f=s(9959),c=s(6064),d=s(9926),p=s(5752),h=s(8068),g=s(8160),m={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:f.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};i.exports=h.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(y,{schema:v,state:x,prefs:_}){const E=v.$_getRule("normalize");E&&(y=y.normalize(E.args.form));const C=v.$_getRule("case");C&&(y=C.args.direction==="upper"?y.toLocaleUpperCase():y.toLocaleLowerCase());const w=v.$_getRule("trim");if(w&&w.args.enabled&&(y=y.trim()),v.$_terms.replacements)for(const R of v.$_terms.replacements)y=y.replace(R.pattern,R.replacement);const T=v.$_getRule("hex");if(T&&T.args.options.byteAligned&&y.length%2!=0&&(y=`0${y}`),v.$_getRule("isoDate")){const R=m.isoDate(y);R&&(y=R)}if(v._flags.truncate){const R=v.$_getRule("max");if(R){let L=R.args.limit;if(g.isResolvable(L)&&(L=L.resolve(y,x,_),!g.limit(L)))return{value:y,errors:v.$_createError("any.ref",L,{ref:R.args.limit,arg:"limit",reason:"must be a positive integer"},x,_)};y=y.slice(0,L)}}return{value:y}}},validate(y,{schema:v,error:x}){if(typeof y!="string")return{value:y,errors:x("string.base")};if(y===""){const _=v.$_getRule("min");return _&&_.args.limit===0?void 0:{value:y,errors:x("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(y,v)=>/^[a-zA-Z0-9]+$/.test(y)?y:v.error("string.alphanum")},base64:{method(y={}){return g.assertOptions(y,["paddingRequired","urlSafe"]),y={urlSafe:!1,paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof y.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:y}})},validate:(y,v,{options:x})=>m.base64Regex[x.paddingRequired][x.urlSafe].test(y)?y:v.error("string.base64")},case:{method(y){return a(["lower","upper"].includes(y),"Invalid case:",y),this.$_addRule({name:"case",args:{direction:y}})},validate:(y,v,{direction:x})=>x==="lower"&&y===y.toLocaleLowerCase()||x==="upper"&&y===y.toLocaleUpperCase()?y:v.error(`string.${x}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(y,v){let x=y.length,_=0,E=1;for(;x--;){const C=y.charAt(x)*E;_+=C-9*(C>9),E^=3}return _>0&&_%10==0?y:v.error("string.creditCard")}},dataUri:{method(y={}){return g.assertOptions(y,["paddingRequired"]),y={paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:y}})},validate(y,v,{options:x}){const _=y.match(m.dataUriRegex);return _&&(!_[2]||_[2]!=="base64"||m.base64Regex[x.paddingRequired].false.test(_[3]))?y:v.error("string.dataUri")}},domain:{method(y){y&&g.assertOptions(y,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const v=m.addressOptions(y);return this.$_addRule({name:"domain",args:{options:y},address:v})},validate:(y,v,x,{address:_})=>l.isValid(y,_)?y:v.error("string.domain")},email:{method(y={}){g.assertOptions(y,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(y.multiple===void 0||typeof y.multiple=="boolean","multiple option must be an boolean");const v=m.addressOptions(y),x=new RegExp(`\\s*[${y.separator?c(y.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:y},regex:x,address:v})},validate(y,v,{options:x},{regex:_,address:E}){const C=x.multiple?y.split(_):[y],w=[];for(const T of C)u.isValid(T,E)||w.push(T);return w.length?v.error("string.email",{value:y,invalids:w}):y}},guid:{alias:"uuid",method(y={}){g.assertOptions(y,["version","separator"]);let v="";if(y.version){const E=[].concat(y.version);a(E.length>=1,"version must have at least 1 valid version specified");const C=new Set;for(let w=0;w<E.length;++w){const T=E[w];a(typeof T=="string","version at position "+w+" must be a string");const R=m.guidVersions[T.toLowerCase()];a(R,"version at position "+w+" must be one of "+Object.keys(m.guidVersions).join(", ")),a(!C.has(R),"version at position "+w+" must not be a duplicate"),v+=R,C.add(R)}}a(m.guidSeparators.has(y.separator),'separator must be one of true, false, "-", or ":"');const x=y.separator===void 0?"[:-]?":y.separator===!0?"[:-]":y.separator===!1?"[]?":`\\${y.separator}`,_=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${x})[0-9A-F]{4}\\2?[${v||"0-9A-F"}][0-9A-F]{3}\\2?[${v?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:y},regex:_})},validate(y,v,x,{regex:_}){const E=_.exec(y);return E?m.guidBrackets[E[1]]!==E[E.length-1]?v.error("string.guid"):y:v.error("string.guid")}},hex:{method(y={}){return g.assertOptions(y,["byteAligned","prefix"]),y={byteAligned:!1,prefix:!1,...y},a(typeof y.byteAligned=="boolean","byteAligned must be boolean"),a(typeof y.prefix=="boolean"||y.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:y}})},validate:(y,v,{options:x})=>(x.prefix==="optional"?m.hexRegex.withOptionalPrefix:x.prefix===!0?m.hexRegex.withPrefix:m.hexRegex.withoutPrefix).test(y)?x.byteAligned&&y.length%2!=0?v.error("string.hexAlign"):y:v.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(y,v)=>l.isValid(y,{minDomainSegments:1})||m.ipRegex.test(y)?y:v.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(y={}){g.assertOptions(y,["cidr","version"]);const{cidr:v,versions:x,regex:_}=f.regex(y),E=y.version?x:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:v,version:E}},regex:_})},validate:(y,v,{options:x},{regex:_})=>_.test(y)?y:x.version?v.error("string.ipVersion",{value:y,cidr:x.cidr,version:x.version}):v.error("string.ip",{value:y,cidr:x.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(y,{error:v})=>m.isoDate(y)?y:v("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(y,v)=>m.isoDurationRegex.test(y)?y:v.error("string.isoDuration")},length:{method(y,v){return m.length(this,"length",y,"=",v)},validate(y,v,{limit:x,encoding:_},{name:E,operator:C,args:w}){const T=!_&&y.length;return g.compare(T,x,C)?y:v.error("string."+E,{limit:w.limit,value:y,encoding:_})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(y,v){return m.length(this,"max",y,"<=",v)},args:["limit","encoding"]},min:{method(y,v){return m.length(this,"min",y,">=",v)},args:["limit","encoding"]},normalize:{method(y="NFC"){return a(m.normalizationForms.includes(y),"normalization form must be one of "+m.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:y}})},validate:(y,{error:v},{form:x})=>y===y.normalize(x)?y:v("string.normalize",{value:y,form:x}),convert:!0},pattern:{alias:"regex",method(y,v={}){a(y instanceof RegExp,"regex must be a RegExp"),a(!y.flags.includes("g")&&!y.flags.includes("y"),"regex should not use global or sticky mode"),typeof v=="string"&&(v={name:v}),g.assertOptions(v,["invert","name"]);const x=["string.pattern",v.invert?".invert":"",v.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:y,options:v},errorCode:x})},validate:(y,v,{regex:x,options:_},{errorCode:E})=>x.test(y)^_.invert?y:v.error(E,{name:_.name,regex:x,value:y}),args:["regex","options"],multi:!0},replace:{method(y,v){typeof y=="string"&&(y=new RegExp(c(y),"g")),a(y instanceof RegExp,"pattern must be a RegExp"),a(typeof v=="string","replacement must be a String");const x=this.clone();return x.$_terms.replacements||(x.$_terms.replacements=[]),x.$_terms.replacements.push({pattern:y,replacement:v}),x}},token:{method(){return this.$_addRule("token")},validate:(y,v)=>/^\w+$/.test(y)?y:v.error("string.token")},trim:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:y}})},validate:(y,v,{enabled:x})=>x&&y!==y.trim()?v.error("string.trim"):y,convert:!0},truncate:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",y)}},uppercase:{method(){return this.case("upper")}},uri:{method(y={}){g.assertOptions(y,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),y.domain&&g.assertOptions(y.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:v,scheme:x}=p.regex(y),_=y.domain?m.addressOptions(y.domain):null;return this.$_addRule({name:"uri",args:{options:y},regex:v,domain:_,scheme:x})},validate(y,v,{options:x},{regex:_,domain:E,scheme:C}){if(["http:/","https:/"].includes(y))return v.error("string.uri");let w=_.exec(y);if(!w&&v.prefs.convert&&x.encodeUri){const T=encodeURI(y);w=_.exec(T),w&&(y=T)}if(w){const T=w[1]||w[2];return!E||x.allowRelative&&!T||l.isValid(T,E)?y:v.error("string.domain",{value:T})}return x.relativeOnly?v.error("string.uriRelativeOnly"):x.scheme?v.error("string.uriCustomScheme",{scheme:C,value:y}):v.error("string.uri")}}},manifest:{build(y,v){if(v.replacements)for(const{pattern:x,replacement:_}of v.replacements)y=y.replace(x,_);return y}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),m.addressOptions=function(y){if(!y)return m.tlds||y;if(a(y.minDomainSegments===void 0||Number.isSafeInteger(y.minDomainSegments)&&y.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(y.maxDomainSegments===void 0||Number.isSafeInteger(y.maxDomainSegments)&&y.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),y.tlds===!1)return y;if(y.tlds===!0||y.tlds===void 0)return a(m.tlds,"Built-in TLD list disabled"),Object.assign({},y,m.tlds);a(typeof y.tlds=="object","tlds must be true, false, or an object");const v=y.tlds.deny;if(v)return Array.isArray(v)&&(y=Object.assign({},y,{tlds:{deny:new Set(v)}})),a(y.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!y.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),m.validateTlds(y.tlds.deny,"tlds.deny"),y;const x=y.tlds.allow;return x?x===!0?(a(m.tlds,"Built-in TLD list disabled"),Object.assign({},y,m.tlds)):(Array.isArray(x)&&(y=Object.assign({},y,{tlds:{allow:new Set(x)}})),a(y.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),m.validateTlds(y.tlds.allow,"tlds.allow"),y):y},m.validateTlds=function(y,v){for(const x of y)a(l.isValid(x,{minDomainSegments:1,maxDomainSegments:1}),`${v} must contain valid top level domain names`)},m.isoDate=function(y){if(!g.isIsoDate(y))return null;/.*T.*[+-]\d\d$/.test(y)&&(y+="00");const v=new Date(y);return isNaN(v.getTime())?null:v.toISOString()},m.length=function(y,v,x,_,E){return a(!E||!1,"Invalid encoding:",E),y.$_addRule({name:v,method:"length",args:{limit:x,encoding:E},operator:_})}},8826:(i,o,s)=>{const a=s(375),l=s(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},i.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(f,{schema:c,error:d}){const p=c.$_terms.map.get(f);return p&&(f=p),c._flags.only&&typeof f!="symbol"?{value:f,errors:d("symbol.map",{map:c.$_terms.map})}:{value:f}}},validate(f,{error:c}){if(typeof f!="symbol")return{value:f,errors:c("symbol.base")}},rules:{map:{method(f){f&&!f[Symbol.iterator]&&typeof f=="object"&&(f=Object.entries(f)),a(f&&f[Symbol.iterator],"Iterable must be an iterable or object");const c=this.clone(),d=[];for(const p of f){a(p&&p[Symbol.iterator],"Entry must be an iterable");const[h,g]=p;a(typeof h!="object"&&typeof h!="function"&&typeof h!="symbol","Key must not be of type object, function, or Symbol"),a(typeof g=="symbol","Value must be a Symbol"),c.$_terms.map.set(h,g),d.push(g)}return c.valid(...d)}}},manifest:{build:(f,c)=>(c.map&&(f=f.map(c.map)),f)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(i,o,s)=>{const a=s(375),l=s(8571),u=s(738),f=s(9621),c=s(8160),d=s(6354),p=s(493),h={result:Symbol("result")};o.entry=function(g,m,y){let v=c.defaults;y&&(a(y.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(y.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),v=c.preferences(c.defaults,y));const x=h.entry(g,m,v);a(!x.mainstay.externals.length,"Schema with external rules must use validateAsync()");const _={value:x.value};return x.error&&(_.error=x.error),x.mainstay.warnings.length&&(_.warning=d.details(x.mainstay.warnings)),x.mainstay.debug&&(_.debug=x.mainstay.debug),x.mainstay.artifacts&&(_.artifacts=x.mainstay.artifacts),_},o.entryAsync=async function(g,m,y){let v=c.defaults;y&&(v=c.preferences(c.defaults,y));const x=h.entry(g,m,v),_=x.mainstay;if(x.error)throw _.debug&&(x.error.debug=_.debug),x.error;if(_.externals.length){let C=x.value;const w=[];for(const T of _.externals){const R=T.state.path,L=T.schema.type==="link"?_.links.get(T.schema):null;let B,P,S=C;const k=R.length?[C]:[],D=R.length?f(g,R):g;if(R.length){B=R[R.length-1];let O=C;for(const N of R.slice(0,-1))O=O[N],k.unshift(O);P=k[0],S=P[B]}try{const O=(j,q)=>(L||T.schema).$_createError(j,S,q,T.state,v),N=await T.method(S,{schema:T.schema,linked:L,state:T.state,prefs:y,original:D,error:O,errorsArray:h.errorsArray,warn:(j,q)=>_.warnings.push((L||T.schema).$_createError(j,S,q,T.state,v)),message:(j,q)=>(L||T.schema).$_createError("external",S,q,T.state,v,{messages:j})});if(N===void 0||N===S)continue;if(N instanceof d.Report){if(_.tracer.log(T.schema,T.state,"rule","external","error"),w.push(N),v.abortEarly)break;continue}if(Array.isArray(N)&&N[c.symbols.errors]){if(_.tracer.log(T.schema,T.state,"rule","external","error"),w.push(...N),v.abortEarly)break;continue}P?(_.tracer.value(T.state,"rule",S,N,"external"),P[B]=N):(_.tracer.value(T.state,"rule",C,N,"external"),C=N)}catch(O){throw v.errors.label&&(O.message+=` (${T.label})`),O}}if(x.value=C,w.length)throw x.error=d.process(w,g,v),_.debug&&(x.error.debug=_.debug),x.error}if(!v.warnings&&!v.debug&&!v.artifacts)return x.value;const E={value:x.value};return _.warnings.length&&(E.warning=d.details(_.warnings)),_.debug&&(E.debug=_.debug),_.artifacts&&(E.artifacts=_.artifacts),E},h.Mainstay=class{constructor(g,m,y){this.externals=[],this.warnings=[],this.tracer=g,this.debug=m,this.links=y,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const g=this._snapshots.pop();this.externals=g.externals,this.warnings=g.warnings}commit(){this._snapshots.pop()}},h.entry=function(g,m,y){const{tracer:v,cleanup:x}=h.tracer(m,y),_=y.debug?[]:null,E=m._ids._schemaChain?new Map:null,C=new h.Mainstay(v,_,E),w=m._ids._schemaChain?[{schema:m}]:null,T=new p([],[],{mainstay:C,schemas:w}),R=o.validate(g,m,T,y);x&&m.$_root.untrace();const L=d.process(R.errors,g,y);return{value:R.value,error:L,mainstay:C}},h.tracer=function(g,m){return g.$_root._tracer?{tracer:g.$_root._tracer._register(g)}:m.debug?(a(g.$_root.trace,"Debug mode not supported"),{tracer:g.$_root.trace()._register(g),cleanup:!0}):{tracer:h.ignore}},o.validate=function(g,m,y,v,x={}){if(m.$_terms.whens&&(m=m._generate(g,y,v).schema),m._preferences&&(v=h.prefs(m,v)),m._cache&&v.cache){const L=m._cache.get(g);if(y.mainstay.tracer.debug(y,"validate","cached",!!L),L)return L}const _=(L,B,P)=>m.$_createError(L,g,B,P||y,v),E={original:g,prefs:v,schema:m,state:y,error:_,errorsArray:h.errorsArray,warn:(L,B,P)=>y.mainstay.warnings.push(_(L,B,P)),message:(L,B)=>m.$_createError("custom",g,B,y,v,{messages:L})};y.mainstay.tracer.entry(m,y);const C=m._definition;if(C.prepare&&g!==void 0&&v.convert){const L=C.prepare(g,E);if(L){if(y.mainstay.tracer.value(y,"prepare",g,L.value),L.errors)return h.finalize(L.value,[].concat(L.errors),E);g=L.value}}if(C.coerce&&g!==void 0&&v.convert&&(!C.coerce.from||C.coerce.from.includes(typeof g))){const L=C.coerce.method(g,E);if(L){if(y.mainstay.tracer.value(y,"coerced",g,L.value),L.errors)return h.finalize(L.value,[].concat(L.errors),E);g=L.value}}const w=m._flags.empty;w&&w.$_match(h.trim(g,m),y.nest(w),c.defaults)&&(y.mainstay.tracer.value(y,"empty",g,void 0),g=void 0);const T=x.presence||m._flags.presence||(m._flags._endedSwitch?null:v.presence);if(g===void 0){if(T==="forbidden")return h.finalize(g,null,E);if(T==="required")return h.finalize(g,[m.$_createError("any.required",g,null,y,v)],E);if(T==="optional"){if(m._flags.default!==c.symbols.deepDefault)return h.finalize(g,null,E);y.mainstay.tracer.value(y,"default",g,{}),g={}}}else if(T==="forbidden")return h.finalize(g,[m.$_createError("any.unknown",g,null,y,v)],E);const R=[];if(m._valids){const L=m._valids.get(g,y,v,m._flags.insensitive);if(L)return v.convert&&(y.mainstay.tracer.value(y,"valids",g,L.value),g=L.value),y.mainstay.tracer.filter(m,y,"valid",L),h.finalize(g,null,E);if(m._flags.only){const B=m.$_createError("any.only",g,{valids:m._valids.values({display:!0})},y,v);if(v.abortEarly)return h.finalize(g,[B],E);R.push(B)}}if(m._invalids){const L=m._invalids.get(g,y,v,m._flags.insensitive);if(L){y.mainstay.tracer.filter(m,y,"invalid",L);const B=m.$_createError("any.invalid",g,{invalids:m._invalids.values({display:!0})},y,v);if(v.abortEarly)return h.finalize(g,[B],E);R.push(B)}}if(C.validate){const L=C.validate(g,E);if(L&&(y.mainstay.tracer.value(y,"base",g,L.value),g=L.value,L.errors)){if(!Array.isArray(L.errors))return R.push(L.errors),h.finalize(g,R,E);if(L.errors.length)return R.push(...L.errors),h.finalize(g,R,E)}}return m._rules.length?h.rules(g,R,E):h.finalize(g,R,E)},h.rules=function(g,m,y){const{schema:v,state:x,prefs:_}=y;for(const E of v._rules){const C=v._definition.rules[E.method];if(C.convert&&_.convert){x.mainstay.tracer.log(v,x,"rule",E.name,"full");continue}let w,T=E.args;if(E._resolve.length){T=Object.assign({},T);for(const L of E._resolve){const B=C.argsByName.get(L),P=T[L].resolve(g,x,_),S=B.normalize?B.normalize(P):P,k=c.validateArg(S,null,B);if(k){w=v.$_createError("any.ref",P,{arg:L,ref:T[L],reason:k},x,_);break}T[L]=S}}w=w||C.validate(g,y,T,E);const R=h.rule(w,E);if(R.errors){if(x.mainstay.tracer.log(v,x,"rule",E.name,"error"),E.warn){x.mainstay.warnings.push(...R.errors);continue}if(_.abortEarly)return h.finalize(g,R.errors,y);m.push(...R.errors)}else x.mainstay.tracer.log(v,x,"rule",E.name,"pass"),x.mainstay.tracer.value(x,"rule",g,R.value,E.name),g=R.value}return h.finalize(g,m,y)},h.rule=function(g,m){return g instanceof d.Report?(h.error(g,m),{errors:[g],value:null}):Array.isArray(g)&&g[c.symbols.errors]?(g.forEach(y=>h.error(y,m)),{errors:g,value:null}):{errors:null,value:g}},h.error=function(g,m){return m.message&&g._setTemplate(m.message),g},h.finalize=function(g,m,y){m=m||[];const{schema:v,state:x,prefs:_}=y;if(m.length){const C=h.default("failover",void 0,m,y);C!==void 0&&(x.mainstay.tracer.value(x,"failover",g,C),g=C,m=[])}if(m.length&&v._flags.error)if(typeof v._flags.error=="function"){m=v._flags.error(m),Array.isArray(m)||(m=[m]);for(const C of m)a(C instanceof Error||C instanceof d.Report,"error() must return an Error object")}else m=[v._flags.error];if(g===void 0){const C=h.default("default",g,m,y);x.mainstay.tracer.value(x,"default",g,C),g=C}if(v._flags.cast&&g!==void 0){const C=v._definition.cast[v._flags.cast];if(C.from(g)){const w=C.to(g,y);x.mainstay.tracer.value(x,"cast",g,w,v._flags.cast),g=w}}if(v.$_terms.externals&&_.externals&&_._externals!==!1)for(const{method:C}of v.$_terms.externals)x.mainstay.externals.push({method:C,schema:v,state:x,label:d.label(v._flags,x,_)});const E={value:g,errors:m.length?m:null};return v._flags.result&&(E.value=v._flags.result==="strip"?void 0:y.original,x.mainstay.tracer.value(x,v._flags.result,g,E.value),x.shadow(g,v._flags.result)),v._cache&&_.cache!==!1&&!v._refs.length&&v._cache.set(y.original,E),g===void 0||E.errors||v._flags.artifact===void 0||(x.mainstay.artifacts=x.mainstay.artifacts||new Map,x.mainstay.artifacts.has(v._flags.artifact)||x.mainstay.artifacts.set(v._flags.artifact,[]),x.mainstay.artifacts.get(v._flags.artifact).push(x.path)),E},h.prefs=function(g,m){const y=m===c.defaults;return y&&g._preferences[c.symbols.prefs]?g._preferences[c.symbols.prefs]:(m=c.preferences(m,g._preferences),y&&(g._preferences[c.symbols.prefs]=m),m)},h.default=function(g,m,y,v){const{schema:x,state:_,prefs:E}=v,C=x._flags[g];if(E.noDefaults||C===void 0)return m;if(_.mainstay.tracer.log(x,_,"rule",g,"full"),!C)return C;if(typeof C=="function"){const w=C.length?[l(_.ancestors[0]),v]:[];try{return C(...w)}catch(T){return void y.push(x.$_createError(`any.${g}`,null,{error:T},_,E))}}return typeof C!="object"?C:C[c.symbols.literal]?C.literal:c.isResolvable(C)?C.resolve(m,_,E):l(C)},h.trim=function(g,m){if(typeof g!="string")return g;const y=m.$_getRule("trim");return y&&y.args.enabled?g.trim():g},h.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},h.errorsArray=function(){const g=[];return g[c.symbols.errors]=!0,g}},2036:(i,o,s)=>{const a=s(375),l=s(9474),u=s(8160),f={};i.exports=f.Values=class{constructor(c,d){this._values=new Set(c),this._refs=new Set(d),this._lowercase=f.lowercases(c),this._override=!1}get length(){return this._values.size+this._refs.size}add(c,d){u.isResolvable(c)?this._refs.has(c)||(this._refs.add(c),d&&d.register(c)):this.has(c,null,null,!1)||(this._values.add(c),typeof c=="string"&&this._lowercase.set(c.toLowerCase(),c))}static merge(c,d,p){if(c=c||new f.Values,d){if(d._override)return d.clone();for(const h of[...d._values,...d._refs])c.add(h)}if(p)for(const h of[...p._values,...p._refs])c.remove(h);return c.length?c:null}remove(c){u.isResolvable(c)?this._refs.delete(c):(this._values.delete(c),typeof c=="string"&&this._lowercase.delete(c.toLowerCase()))}has(c,d,p,h){return!!this.get(c,d,p,h)}get(c,d,p,h){if(!this.length)return!1;if(this._values.has(c))return{value:c};if(typeof c=="string"&&c&&h){const g=this._lowercase.get(c.toLowerCase());if(g)return{value:g}}if(!this._refs.size&&typeof c!="object")return!1;if(typeof c=="object"){for(const g of this._values)if(l(g,c))return{value:g}}if(d)for(const g of this._refs){const m=g.resolve(c,d,p,null,{in:!0});if(m===void 0)continue;const y=g.in&&typeof m=="object"?Array.isArray(m)?m:Object.keys(m):[m];for(const v of y)if(typeof v==typeof c){if(h&&c&&typeof c=="string"){if(v.toLowerCase()===c.toLowerCase())return{value:v,ref:g}}else if(l(v,c))return{value:v,ref:g}}}return!1}override(){this._override=!0}values(c){if(c&&c.display){const d=[];for(const p of[...this._values,...this._refs])p!==void 0&&d.push(p);return d}return Array.from([...this._values,...this._refs])}clone(){const c=new f.Values(this._values,this._refs);return c._override=this._override,c}concat(c){a(!c._override,"Cannot concat override set of values");const d=new f.Values([...this._values,...c._values],[...this._refs,...c._refs]);return d._override=this._override,d}describe(){const c=[];this._override&&c.push({override:!0});for(const d of this._values.values())c.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())c.push(d.describe());return c}},f.Values.prototype[u.symbols.values]=!0,f.Values.prototype.slice=f.Values.prototype.clone,f.lowercases=function(c){const d=new Map;if(c)for(const p of c)typeof p=="string"&&d.set(p.toLowerCase(),p);return d}},978:(i,o,s)=>{const a=s(375),l=s(8571),u=s(1687),f=s(9621),c={};i.exports=function(d,p,h={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!p||p===!0||typeof p=="object","Invalid source value: must be true, falsy or an object"),a(typeof h=="object","Invalid options: must be an object"),!p)return null;if(h.shallow)return c.applyToDefaultsWithShallow(d,p,h);const g=l(d);if(p===!0)return g;const m=h.nullOverride!==void 0&&h.nullOverride;return u(g,p,{nullOverride:m,mergeArrays:!1})},c.applyToDefaultsWithShallow=function(d,p,h){const g=h.shallow;a(Array.isArray(g),"Invalid keys");const m=new Map,y=p===!0?null:new Set;for(let _ of g){_=Array.isArray(_)?_:_.split(".");const E=f(d,_);E&&typeof E=="object"?m.set(E,y&&f(p,_)||E):y&&y.add(_)}const v=l(d,{},m);if(!y)return v;for(const _ of y)c.reachCopy(v,p,_);const x=h.nullOverride!==void 0&&h.nullOverride;return u(v,p,{nullOverride:x,mergeArrays:!1})},c.reachCopy=function(d,p,h){for(const y of h){if(!(y in p))return;const v=p[y];if(typeof v!="object"||v===null)return;p=v}const g=p;let m=d;for(let y=0;y<h.length-1;++y){const v=h[y];typeof m[v]!="object"&&(m[v]={}),m=m[v]}m[h[h.length-1]]=g}},375:(i,o,s)=>{const a=s(7916);i.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(i,o,s)=>{const a=s(9621),l=s(4277),u=s(7043),f={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};i.exports=f.clone=function(c,d={},p=null){if(typeof c!="object"||c===null)return c;let h=f.clone,g=p;if(d.shallow){if(d.shallow!==!0)return f.cloneWithShallow(c,d);h=x=>x}else if(g){const x=g.get(c);if(x)return x}else g=new Map;const m=l.getInternalProto(c);if(m===l.buffer)return!1;if(m===l.date)return new Date(c.getTime());if(m===l.regex)return new RegExp(c);const y=f.base(c,m,d);if(y===c)return c;if(g&&g.set(c,y),m===l.set)for(const x of c)y.add(h(x,d,g));else if(m===l.map)for(const[x,_]of c)y.set(x,h(_,d,g));const v=u.keys(c,d);for(const x of v){if(x==="__proto__")continue;if(m===l.array&&x==="length"){y.length=c.length;continue}const _=Object.getOwnPropertyDescriptor(c,x);_?_.get||_.set?Object.defineProperty(y,x,_):_.enumerable?y[x]=h(c[x],d,g):Object.defineProperty(y,x,{enumerable:!1,writable:!0,configurable:!0,value:h(c[x],d,g)}):Object.defineProperty(y,x,{enumerable:!0,writable:!0,configurable:!0,value:h(c[x],d,g)})}return y},f.cloneWithShallow=function(c,d){const p=d.shallow;(d=Object.assign({},d)).shallow=!1;const h=new Map;for(const g of p){const m=a(c,g);typeof m!="object"&&typeof m!="function"||h.set(m,m)}return f.clone(c,d,h)},f.base=function(c,d,p){if(p.prototype===!1)return f.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const h=Object.getPrototypeOf(c);if(h&&h.isImmutable)return c;if(d===l.array){const g=[];return h!==d&&Object.setPrototypeOf(g,h),g}if(f.needsProtoHack.has(d)){const g=new h.constructor;return h!==d&&Object.setPrototypeOf(g,h),g}return Object.create(h)}},9474:(i,o,s)=>{const a=s(4277),l={mismatched:null};i.exports=function(u,f,c){return c=Object.assign({prototype:!0},c),!!l.isDeepEqual(u,f,c,[])},l.isDeepEqual=function(u,f,c,d){if(u===f)return u!==0||1/u==1/f;const p=typeof u;if(p!==typeof f||u===null||f===null)return!1;if(p==="function"){if(!c.deepFunction||u.toString()!==f.toString())return!1}else if(p!=="object")return u!=u&&f!=f;const h=l.getSharedType(u,f,!!c.prototype);switch(h){case a.buffer:return!1;case a.promise:return u===f;case a.regex:return u.toString()===f.toString();case l.mismatched:return!1}for(let g=d.length-1;g>=0;--g)if(d[g].isSame(u,f))return!0;d.push(new l.SeenEntry(u,f));try{return!!l.isDeepEqualObj(h,u,f,c,d)}finally{d.pop()}},l.getSharedType=function(u,f,c){if(c)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(f)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(f)?l.mismatched:d},l.valueOf=function(u){const f=u.valueOf;if(f===void 0)return u;try{return f.call(u)}catch(c){return c}},l.hasOwnEnumerableProperty=function(u,f){return Object.prototype.propertyIsEnumerable.call(u,f)},l.isSetSimpleEqual=function(u,f){for(const c of Set.prototype.values.call(u))if(!Set.prototype.has.call(f,c))return!1;return!0},l.isDeepEqualObj=function(u,f,c,d,p){const{isDeepEqual:h,valueOf:g,hasOwnEnumerableProperty:m}=l,{keys:y,getOwnPropertySymbols:v}=Object;if(u===a.array){if(!d.part){if(f.length!==c.length)return!1;for(let w=0;w<f.length;++w)if(!h(f[w],c[w],d,p))return!1;return!0}for(const w of f)for(const T of c)if(h(w,T,d,p))return!0}else if(u===a.set){if(f.size!==c.size)return!1;if(!l.isSetSimpleEqual(f,c)){const w=new Set(Set.prototype.values.call(c));for(const T of Set.prototype.values.call(f)){if(w.delete(T))continue;let R=!1;for(const L of w)if(h(T,L,d,p)){w.delete(L),R=!0;break}if(!R)return!1}}}else if(u===a.map){if(f.size!==c.size)return!1;for(const[w,T]of Map.prototype.entries.call(f))if(T===void 0&&!Map.prototype.has.call(c,w)||!h(T,Map.prototype.get.call(c,w),d,p))return!1}else if(u===a.error&&(f.name!==c.name||f.message!==c.message))return!1;const x=g(f),_=g(c);if((f!==x||c!==_)&&!h(x,_,d,p))return!1;const E=y(f);if(!d.part&&E.length!==y(c).length&&!d.skip)return!1;let C=0;for(const w of E)if(d.skip&&d.skip.includes(w))c[w]===void 0&&++C;else if(!m(c,w)||!h(f[w],c[w],d,p))return!1;if(!d.part&&E.length-C!==y(c).length)return!1;if(d.symbols!==!1){const w=v(f),T=new Set(v(c));for(const R of w){if(!d.skip||!d.skip.includes(R)){if(m(f,R)){if(!m(c,R)||!h(f[R],c[R],d,p))return!1}else if(m(c,R))return!1}T.delete(R)}for(const R of T)if(m(c,R))return!1}return!0},l.SeenEntry=class{constructor(u,f){this.obj=u,this.ref=f}isSame(u,f){return this.obj===u&&this.ref===f}}},7916:(i,o,s)=>{const a=s(8761);i.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o.assert)}}},5277:i=>{const o={};i.exports=function(s){if(!s)return"";let a="";for(let l=0;l<s.length;++l){const u=s.charCodeAt(l);o.isSafe(u)?a+=s[l]:a+=o.escapeHtmlChar(u)}return a},o.escapeHtmlChar=function(s){return o.namedHtml.get(s)||(s>=256?"&#"+s+";":`&#x${s.toString(16).padStart(2,"0")};`)},o.isSafe=function(s){return o.safeCharCodes.has(s)},o.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),o.safeCharCodes=function(){const s=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&s.add(a);return s}()},6064:i=>{i.exports=function(o){return o.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:i=>{i.exports=function(){}},1687:(i,o,s)=>{const a=s(375),l=s(8571),u=s(7043),f={};i.exports=f.merge=function(c,d,p){if(a(c&&typeof c=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return c;if(p=Object.assign({nullOverride:!0,mergeArrays:!0},p),Array.isArray(d)){a(Array.isArray(c),"Cannot merge array onto an object"),p.mergeArrays||(c.length=0);for(let g=0;g<d.length;++g)c.push(l(d[g],{symbols:p.symbols}));return c}const h=u.keys(d,p);for(let g=0;g<h.length;++g){const m=h[g];if(m==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,m))continue;const y=d[m];if(y&&typeof y=="object"){if(c[m]===y)continue;!c[m]||typeof c[m]!="object"||Array.isArray(c[m])!==Array.isArray(y)||y instanceof Date||y instanceof RegExp?c[m]=l(y,{symbols:p.symbols}):f.merge(c[m],y,p)}else(y!=null||p.nullOverride)&&(c[m]=y)}return c}},9621:(i,o,s)=>{const a=s(375),l={};i.exports=function(u,f,c){if(f===!1||f==null)return u;typeof(c=c||{})=="string"&&(c={separator:c});const d=Array.isArray(f);a(!d||!c.separator,"Separator option is not valid for array-based chain");const p=d?f:f.split(c.separator||".");let h=u;for(let g=0;g<p.length;++g){let m=p[g];const y=c.iterables&&l.iterables(h);if(Array.isArray(h)||y==="set"){const v=Number(m);Number.isInteger(v)&&(m=v<0?h.length+v:v)}if(!h||typeof h=="function"&&c.functions===!1||!y&&h[m]===void 0){a(!c.strict||g+1===p.length,"Missing segment",m,"in reach path ",f),a(typeof h=="object"||c.functions===!0||typeof h!="function","Invalid segment",m,"in reach path ",f),h=c.default;break}h=y?y==="set"?[...h][m]:h.get(m):h[m]}return h},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:i=>{i.exports=function(...o){try{return JSON.stringify(...o)}catch(s){return"[Cannot display object: "+s.message+"]"}}},4277:(i,o)=>{const s={};o=i.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},s.typeMap=new Map([["[object Error]",o.error],["[object Map]",o.map],["[object Promise]",o.promise],["[object Set]",o.set],["[object WeakMap]",o.weakMap],["[object WeakSet]",o.weakSet]]),o.getInternalProto=function(a){if(Array.isArray(a))return o.array;if(a instanceof Date)return o.date;if(a instanceof RegExp)return o.regex;if(a instanceof Error)return o.error;const l=Object.prototype.toString.call(a);return s.typeMap.get(l)||o.generic}},7043:(i,o)=>{o.keys=function(s,a={}){return a.symbols!==!1?Reflect.ownKeys(s):Object.getOwnPropertyNames(s)}},3652:(i,o,s)=>{const a=s(375),l={};o.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,f){const c=[].concat((f=f||{}).before||[]),d=[].concat(f.after||[]),p=f.group||"?",h=f.sort||0;a(!c.includes(p),`Item cannot come before itself: ${p}`),a(!c.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(p),`Item cannot come after itself: ${p}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const g of u){const m={seq:this._items.length,sort:h,before:c,after:d,group:p,node:g};this._items.push(m)}if(!f.manual){const g=this._sort();a(g,"item",p!=="?"?`added into group ${p}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const c of u)if(c)for(const d of c._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let c=0;c<this._items.length;++c)this._items[c].seq=c;const f=this._sort();return a(f,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},f=Object.create(null),c=Object.create(null);for(const m of this._items){const y=m.seq,v=m.group;c[v]=c[v]||[],c[v].push(y),u[y]=m.before;for(const x of m.after)f[x]=f[x]||[],f[x].push(y)}for(const m in u){const y=[];for(const v in u[m]){const x=u[m][v];c[x]=c[x]||[],y.push(...c[x])}u[m]=y}for(const m in f)if(c[m])for(const y of c[m])u[y].push(...f[m]);const d={};for(const m in u){const y=u[m];for(const v of y)d[v]=d[v]||[],d[v].push(m)}const p={},h=[];for(let m=0;m<this._items.length;++m){let y=m;if(d[m]){y=null;for(let v=0;v<this._items.length;++v){if(p[v]===!0)continue;d[v]||(d[v]=[]);const x=d[v].length;let _=0;for(let E=0;E<x;++E)p[d[v][E]]&&++_;if(_===x){y=v;break}}}y!==null&&(p[y]=!0,h.push(y))}if(h.length!==this._items.length)return!1;const g={};for(const m of this._items)g[m.seq]=m;this._items=[],this.nodes=[];for(const m of h){const y=g[m];this.nodes.push(y.node),this._items.push(y)}return!0}},l.mergeSort=(u,f)=>u.sort===f.sort?0:u.sort<f.sort?-1:1},5380:(i,o,s)=>{const a=s(443),l=s(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};o.analyze=function(f,c={}){if(!f)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof f!="string")throw new Error("Invalid input: domain must be a string");if(f.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(f)){if(c.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");f=f.normalize("NFC")}if(u.domainControlRx.test(f))return l.code("DOMAIN_INVALID_CHARS");f=u.punycode(f),c.allowFullyQualified&&f[f.length-1]==="."&&(f=f.slice(0,-1));const d=c.minDomainSegments||u.minDomainSegments,p=f.split(".");if(p.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(c.maxDomainSegments&&p.length>c.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const h=c.tlds;if(h){const g=p[p.length-1].toLowerCase();if(h.deny&&h.deny.has(g)||h.allow&&!h.allow.has(g))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let g=0;g<p.length;++g){const m=p[g];if(!m.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(m.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(g<p.length-1){if(!u.domainSegmentRx.test(m))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(m))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},o.isValid=function(f,c){return!o.analyze(f,c)},u.punycode=function(f){f.includes("%")&&(f=f.replace(/%/g,"%25"));try{return new u.URL(`http://${f}`).host}catch{return f}}},1745:(i,o,s)=>{const a=s(9848),l=s(5380),u=s(2178),f={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};o.analyze=function(c,d){return f.email(c,d)},o.isValid=function(c,d){return!f.email(c,d)},f.email=function(c,d={}){if(typeof c!="string")throw new Error("Invalid input: email must be a string");if(!c)return u.code("EMPTY_STRING");const p=!f.nonAsciiRx.test(c);if(!p){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");c=c.normalize("NFC")}const h=c.split("@");if(h.length!==2)return h.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[g,m]=h;if(!g)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(c.length>254)return u.code("ADDRESS_TOO_LONG");if(f.encoder.encode(g).length>64)return u.code("LOCAL_TOO_LONG")}return f.local(g,p)||l.analyze(m,d)},f.local=function(c,d){const p=c.split(".");for(const h of p){if(!h.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!f.atextRx.test(h))return u.code("INVALID_LOCAL_CHARS")}else for(const g of h){if(f.atextRx.test(g))continue;const m=f.binary(g);if(!f.atomRx.test(m))return u.code("INVALID_LOCAL_CHARS")}}},f.binary=function(c){return Array.from(f.encoder.encode(c)).map(d=>String.fromCharCode(d)).join("")},f.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,f.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(i,o)=>{o.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},o.code=function(s){return{code:s,error:o.codes[s]}}},9959:(i,o,s)=>{const a=s(375),l=s(5752);o.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const f=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(f),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let c=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),a(c.length>=1,"options.version must have at least 1 version specified");for(let h=0;h<c.length;++h)a(typeof c[h]=="string","options.version must only contain strings"),c[h]=c[h].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(c[h]),"options.version contains unknown version "+c[h]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));const d=`(?:${c.map(h=>{if(f==="forbidden")return l.ip[h];const g=`\\/${h==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return f==="required"?`${l.ip[h]}${g}`:`${l.ip[h]}(?:${g})?`}).join("|")})`,p=new RegExp(`^${d}$`);return{cidr:f,versions:c,regex:p,raw:d}}},5752:(i,o,s)=>{const a=s(375),l=s(6064),u={generate:function(){const f={},c="\\dA-Fa-f",d="["+c+"]",p="\\w-\\.~",h="!\\$&'\\(\\)\\*\\+,;=",g="%"+c,m=p+g+h+":@",y="["+m+"]",v="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";f.ipv4address="(?:"+v+"\\.){3}"+v;const x=d+"{1,4}",_="(?:"+x+":"+x+"|"+f.ipv4address+")",E="(?:"+x+":){6}"+_,C="::(?:"+x+":){5}"+_,w="(?:"+x+")?::(?:"+x+":){4}"+_,T="(?:(?:"+x+":){0,1}"+x+")?::(?:"+x+":){3}"+_,R="(?:(?:"+x+":){0,2}"+x+")?::(?:"+x+":){2}"+_,L="(?:(?:"+x+":){0,3}"+x+")?::"+x+":"+_,B="(?:(?:"+x+":){0,4}"+x+")?::"+_,P="(?:(?:"+x+":){0,5}"+x+")?::"+x,S="(?:(?:"+x+":){0,6}"+x+")?::";f.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",f.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",f.ipv6address="(?:"+E+"|"+C+"|"+w+"|"+T+"|"+R+"|"+L+"|"+B+"|"+P+"|"+S+")",f.ipvFuture="v"+d+"+\\.["+p+h+":]+",f.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",f.schemeRegex=new RegExp(f.scheme);const k="["+p+g+h+":]*",D="["+p+g+h+"]{1,255}",O="(?:\\[(?:"+f.ipv6address+"|"+f.ipvFuture+")\\]|"+f.ipv4address+"|"+D+")",N="(?:"+k+"@)?"+O+"(?::\\d*)?",j="(?:"+k+"@)?("+O+")(?::\\d*)?",q=y+"*",W=y+"+",Q="(?:\\/"+q+")*",ee="\\/(?:"+W+Q+")?",H=W+Q,se="["+p+g+h+"@]+"+Q,ne="(?:\\/\\/\\/"+q+Q+")";return f.hierPart="(?:(?:\\/\\/"+N+Q+")|"+ee+"|"+H+"|"+ne+")",f.hierPartCapture="(?:(?:\\/\\/"+j+Q+")|"+ee+"|"+H+")",f.relativeRef="(?:(?:\\/\\/"+N+Q+")|"+ee+"|"+se+"|)",f.relativeRefCapture="(?:(?:\\/\\/"+j+Q+")|"+ee+"|"+se+"|)",f.query="["+m+"\\/\\?]*(?=#|$)",f.queryWithSquareBrackets="["+m+"\\[\\]\\/\\?]*(?=#|$)",f.fragment="["+m+"\\/\\?]*",f}};u.rfc3986=u.generate(),o.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(f){const c=u.rfc3986,d="(?:\\?"+(f.allowQuerySquareBrackets?c.queryWithSquareBrackets:c.query)+")?(?:#"+c.fragment+")?",p=f.domain?c.relativeRefCapture:c.relativeRef;if(f.relativeOnly)return u.wrap(p+d);let h="";if(f.scheme){a(f.scheme instanceof RegExp||typeof f.scheme=="string"||Array.isArray(f.scheme),"scheme must be a RegExp, String, or Array");const y=[].concat(f.scheme);a(y.length>=1,"scheme must have at least 1 scheme specified");const v=[];for(let x=0;x<y.length;++x){const _=y[x];a(_ instanceof RegExp||typeof _=="string","scheme at position "+x+" must be a RegExp or String"),_ instanceof RegExp?v.push(_.source.toString()):(a(c.schemeRegex.test(_),"scheme at position "+x+" must be a valid scheme"),v.push(l(_)))}h=v.join("|")}const g="(?:"+(h?"(?:"+h+")":c.scheme)+":"+(f.domain?c.hierPartCapture:c.hierPart)+")",m=f.allowRelative?"(?:"+g+"|"+p+")":g;return u.wrap(m+d,h)},u.wrap=function(f,c){return{raw:f=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${f}`,regex:new RegExp(`^${f}$`),scheme:c}},u.uriRegex=u.createRegex({}),o.regex=function(f={}){return f.scheme||f.allowRelative||f.relativeOnly||f.allowQuerySquareBrackets||f.domain?u.createRegex(f):u.uriRegex}},1447:(i,o)=>{const s={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};o.Parser=class{constructor(a,l={}){if(!l[s.settings]&&l.constants)for(const u in l.constants){const f=l.constants[u];if(f!==null&&!["boolean","number","string"].includes(typeof f))throw new Error(`Formula constant ${u} contains invalid ${typeof f} value type`)}this.settings=l[s.settings]?l:Object.assign({[s.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",f=0,c=!1;const d=h=>{if(f)throw new Error("Formula missing closing parenthesis");const g=l.length?l[l.length-1]:null;if(c||u||h){if(g&&g.type==="reference"&&h===")")return g.type="function",g.value=this._subFormula(u,g.value),void(u="");if(h===")"){const m=new o.Parser(u,this.settings);l.push({type:"segment",value:m})}else if(c){if(c==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(s.operatorCharacters.includes(u))g&&g.type==="operator"&&s.operators.includes(g.value+u)?g.value+=u:l.push({type:"operator",value:u});else if(u.match(s.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(s.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const h of a)c?h===c?(d(),c=!1):u+=h:f?h==="("?(u+=h,++f):h===")"?(--f,f?u+=h:d(h)):u+=h:h in s.literals?c=s.literals[h]:h==="("?(d(),++f):s.operatorCharacters.includes(h)?(d(),u=h,d()):h!==" "?u+=h:d();d(),l=l.map((h,g)=>h.type!=="operator"||h.value!=="-"||g&&l[g-1].type!=="operator"?h:{type:"operator",value:"n"});let p=!1;for(const h of l){if(h.type==="operator"){if(s.operatorsPrefix.includes(h.value))continue;if(!p)throw new Error("Formula contains an operator in invalid position");if(!s.operators.includes(h.value))throw new Error(`Formula contains an unknown operator ${h.value}`)}else if(p)throw new Error("Formula missing expected operator");p=!p}if(!p)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(h=>{if(h.type==="operator")return s.operatorsPrefix.includes(h.value)?h:h.value;if(h.type!=="reference")return h.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(h.value))throw new Error(`Formula contains invalid reference ${h.value}`);return this.settings.reference?this.settings.reference(h.value):s.reference(h.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let f=[];if(a){let c="",d=0,p=!1;const h=()=>{if(!c)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);f.push(c),c=""};for(let g=0;g<a.length;++g){const m=a[g];p?(c+=m,m===p&&(p=!1)):m in s.literals&&!d?(c+=m,p=s.literals[m]):m!==","||d?(c+=m,m==="("?++d:m===")"&&--d):h()}h()}return f=f.map(c=>new o.Parser(c,this.settings)),function(c){const d=[];for(const p of f)d.push(p.evaluate(c));return u.call(c,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const f=l[u];if(f&&f.type==="operator"){const c=l[u+1];l.splice(u+1,1);const d=s.evaluate(c,a);l[u]=s.single(f.value,d)}}return s.operatorsOrder.forEach(u=>{for(let f=1;f<l.length-1;)if(u.includes(l[f])){const c=l[f],d=s.evaluate(l[f-1],a),p=s.evaluate(l[f+1],a);l.splice(f,2);const h=s.calculate(c,d,p);l[f-1]=h===0?0:h}else f+=2}),s.evaluate(l[0],a)}},o.Parser.prototype[s.symbol]=!0,s.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},s.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[s.symbol]?a.evaluate(l):a},s.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},s.calculate=function(a,l,u){if(a==="??")return s.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=s.exists(l)?l:"")+(s.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},s.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:i=>{i.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function i(o){var s=r[o];if(s!==void 0)return s.exports;var a=r[o]={exports:{}};return n[o](a,a.exports,i),a.exports}(5107);var n,r})}(V4)),V4.exports}var iGt=rGt();const Oi=Fa(iGt),i7e={id:Oi.string().required()},RTe={...i7e,as:Oi.string().valid("img","video").required(),src:Oi.string().uri().required(),position:Oi.string().valid("center","left","right"),"data-parallax":Oi.boolean().required()},o7e=Oi.object({type:Oi.string().required(),url:Oi.string().when("type",{is:"STAC",then:Oi.string().required(),otherwise:Oi.string().optional()}),properties:Oi.object({id:Oi.string().required()}).unknown().required(),source:Oi.object({type:Oi.string().required()}).unknown().when("type",{is:"STAC",then:Oi.optional(),otherwise:Oi.required()})}).pattern(Oi.string(),Oi.any()),oGt=Oi.object({type:Oi.string().valid("group","Group"),properties:Oi.object({id:Oi.string().required()}).unknown().required(),layers:Oi.array().items(o7e)}),Kj={layers:Oi.array().items(Oi.object().keys({type:Oi.string().required()}).unknown().custom((e,t)=>{const{error:n}=e.type==="Group"?oGt.validate(e):o7e.validate(e);return n?t.message(n.message):e},"Custom validator for map schema.")).optional(),center:Oi.array().items(Oi.number()).min(2).max(2).optional(),zoom:Oi.number().optional()},s7e={config:Oi.object({...Kj}).unknown().optional()},a7e={"eox-map":Oi.object({...i7e,...Kj,...s7e}).unknown()},sGt={hero:{img:Oi.object({...RTe}).unknown(),video:Oi.object({...RTe}).unknown()},tour:{"eox-map":a7e["eox-map"],"section-step":Oi.object({...Kj,...s7e}).unknown()}};function aGt(e,t){var i,o;let n=[];for(const s of Object.keys(e)){const a=e[s];if(a.as){const l=a.mode?(i=sGt[a.mode])==null?void 0:i[a.as]:a7e[a.as];l&&((o=l.validate(a,{abortEarly:!1}).error)==null||o.details.forEach(f=>{n.push({ref:`#${s}`,message:f.message}),console.error(`#${s}`,f.message)}))}}const r=(t.shadowRoot||t).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(n),300)}function l7e(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function lGt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const uGt=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],cGt=(e,t)=>{for(const[n,r]of t)e=e.replace(new RegExp(lGt(n),"g"),r);return e};function fGt(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const n=new Map([...uGt,...t.customReplacements]);return e=e.normalize(),e=cGt(e,n),e=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),e}const dGt=[["&"," and "],[""," unicorn "],[""," love "]],hGt=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),pGt=(e,t)=>{const n=l7e(t);return e.replace(new RegExp(`${n}{2,}`,"g"),t).replace(new RegExp(`^${n}|${n}$`,"g"),"")},gGt=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const n of e.preserveCharacters){if(n===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=l7e(n)}return new RegExp(`[^${t}]+`,"g")};function mGt(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t};const n=t.preserveLeadingUnderscore&&e.startsWith("_"),r=t.preserveTrailingDash&&e.endsWith("-"),i=new Map([...dGt,...t.customReplacements]);e=fGt(e,{customReplacements:i}),t.decamelize&&(e=hGt(e));const o=gGt(t);return t.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(o,t.separator),e=e.replace(/\\/g,""),t.separator&&(e=pGt(e,t.separator)),n&&(e=`_${e}`),r&&(e=`${e}-`),e}function vGt(e){e.core.ruler.push("curly_attributes",yGt)}function yGt(e){e.md.nav=[],e.md.attrs={keys:[],sections:{}},e.md.sections={};const t=e.tokens,n=[];let r;const i={len:0,contents:[],types:{}},o=[];let s=[],a=!1,l=0,u=!1,f=0;for(let c=0;c<t.length;c++){const d=t[c];if(d.tag==="p"){const{shouldContinue:h}=bGt(t[c+1]);if(h){c=c+2;continue}}if((u7e(d.type)||Qze[d.type])&&d7e(i,d),d.tag==="h1"||d.tag==="h2"){const h=wGt(c,t,s,a,l,u,f,e,i);a=h.sectionStart,u=h.sectionSteps,l=h.sectionStartIndex,f=h.sectionStepsIndex}if(d.tag==="h3"){const h=_Gt(c,t,s,a,l,u,f,e,i);a=h.sectionStart,u=h.sectionSteps,l=h.sectionStartIndex,f=h.sectionStepsIndex}if(d.type==="html_block"){const h=d.content.match(Zze);if(!h){d.level=d.level+1,s.push(d);continue}r=f7e(i,h[1],h[2]),r&&Ab(r,h[3])&&n.unshift(c)}d.type==="inline"&&(s=xGt(d,i,o,s,l,f,u)),d.level=d.level+1,s.push(d);const p=Oc(i.last.attrs,"as");i.last.markup==="#"&&dqt.includes(p)&&(s=EGt(s,e,i),c++)}a&&(c7e(s,l),SN(s,l,e)),u&&SN(s,f,e),CGt(s,e.md),n.forEach(c=>t.splice(c,1)),e.tokens=s,e.md.nav=o||[]}function pp(e,t,n,r,i,o=null){const s=new e.Token(i,t,n);return s.attrs=o,s.nesting=r,s}function u7e(e){return e.match(/_(open|start)$/)||e==="fence"||e==="code_block"}function bGt(e){const t=/\r\n|\r|\n/,n=/mode\s*=\s*(['"])fallback\1/g;let r=!1;if(n.test((e==null?void 0:e.content)||""))if(t.test(e.content)){const i=e.content.split(t);i.shift(),e.content=i.join(/\n/),e.children[0].type==="text"&&e.children.shift(),e.children.shift()}else r=!0;return{shouldContinue:r}}function xGt(e,t,n,r,i,o,s){let a;const l=[];if(e.children.forEach((u,f)=>{(u7e(u.type)||Qze[u.type]||u.type==="code_inline")&&d7e(t,u);const c=u.content.match(Zze);if(c){const d=f7e(t,c[1],c[2]);d&&Ab(d,c[3])&&(l.unshift(f),a&&AGt(a,"content"))}u.type==="text"&&(a=u)}),t.last.tag==="h3"&&s&&o!==-1){const u=r[o];u.section=r[i].id,Ab(u,t.last.attrStr)}if(t.last.tag==="h1"||t.last.tag==="h2"){const u=a&&a.content,f=Oc(t.last.attrs,"id"),c=Oc(t.last.attrs,"as"),d=Oc(t.last.attrs,"mode")||"container",p=Oc(t.last.attrs,"position")||"left",h=mGt(u||""),g=f||h,m=`section-${g}`,v=Oc(t.last.attrs,"nav")!=="false";t.last.tag==="h2"&&u&&n.push({title:u,id:m,state:v});const x=r[i],_=r[r.length-1],E=`.${d} .${p}`;x.attrs.push(["id",m]),x.id=m,c&&(_.tag=c,_.type="html_open",_.as=c,_.section=m,e.type="html_inline",e.content="",e.children=null,Ab(_,`${a?`title='${a.content}'`:""}${t.last.attrStr} #${g}`),x.mode=d,x.position=p,Ab(x,`#${m} .${x.attrs[0][1]} .section-custom`)),Ab(x,E)}return e.children&&l.forEach(u=>e.children.splice(u,1)),r}function wGt(e,t,n,r,i,o,s,a,l){const u=t[e];if(u.type==="heading_close"&&(u.tag=n[n.length-2].tag,u.type=n[n.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){o&&(SN(n,s,a),o=!1,s=-1);const f=n[i].tag;c7e(n,i),n.push(pp(a,f,-1,-1,"html_close")),r=!1,i=-1}r||(n.push(pp(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,i=n.length-1,l.last.as=!!t[e+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:i,sectionSteps:o,sectionStepsIndex:s,stack:l,finalTokens:n}}function _Gt(e,t,n,r,i,o,s,a,l){return t[e].type==="heading_open"&&r&&n[i].mode==="tour"&&(o&&(n.push(pp(a,"section-step",-1,-1,"html_close")),o=!1,s=-1),o||(n.push(pp(a,"section-step",0,1,"html_open")),o=!0,s=n.length-1,l.last.as=!!t[e+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:i,sectionSteps:o,sectionStepsIndex:s,stack:l,finalTokens:n}}function EGt(e,t,n){return e.push(pp(t,n.last.tag,1,-1,"html_close",null)),e.push(pp(t,"h1",1,1,"html_open",null)),e.push(pp(t,"h1",2,0,"html_inline",null)),e[e.length-1].content=Oc(n.last.attrs,"title"),e.push(pp(t,"h1",1,-1,"html_close",null)),e}function c7e(e,t){const n=e[t+1],r=Oc(n.attrs,"as"),i=Oc(n.attrs,"mode");r&&!i&&(e.splice(t+2,1),e.slice(t+3).forEach(o=>{o.level=1}),e.push(e[t+2]),e.splice(t+2,1))}function SN(e,t,n){const r=e[t].tag;e.push(pp(n,r,-1,-1,"html_close"))}function Oc(e,t){var n;return((n=(e||[]).find(r=>r[0]===t))==null?void 0:n[1])||null}function f7e(e,t,n){if(!t)return e.last;n==="^"?n=1:typeof n=="string"?n=+n.slice(1):n=0;const i=(cqt[t.toLowerCase()]||[t.toLowerCase()]).find(s=>e.types[s]),o=e.types[i];if(o)return o[o.length-1-n]}function Ab(e,t=""){var o,s;let n;for(e.attrStr=t;t.length>0;)if(n=t.match(/^\s*\.([a-zA-Z0-9\-_]+)/))Eg(e,"class",n[1],{append:!0}),t=t.slice(n[0].length);else if(n=t.match(/^\s*#([a-zA-Z0-9\-_]+)/))Eg(e,"id",n[1]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))Eg(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))Eg(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))Eg(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)/))Eg(e,n[1],""),t=t.slice(n[0].length);else if(n=t.match(/^\s+/))t=t.slice(n[0].length);else if(n=t.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))Eg(e,"as",n[1]),t=t.slice(n[0].length);else break;const r=Oc(e.attrs,"as"),i=Oc(e.attrs,"mode");return(s=(o=fqt[r])==null?void 0:o[i])==null||s.forEach(a=>{Oc(e.attrs,a[0])||(Eg(e,a[0],a[1]),t=t.slice(a[0].length))}),!0}function Eg(e,t,n,r={}){const i=e.attrIndex(t);t==="class"&&r.append&&i!==-1?e.attrs[i][1].includes(n)||(e.attrs[i][1]+=` ${n}`):i===-1?e.attrPush([t,n]):r.append?e.attrs[i][1]+=` ${n}`:e.attrs[i][1]=n}function d7e(e,t){const n=t.type.replace(/_(open|start)$/,"");e.types[n]||(e.types[n]=[]),e.types[n].push(t),e.last=t}function AGt(e,t){e[t]=e[t].replace(/\s*$/,"")}function CGt(e,t){e.forEach(n=>{const r=n.attrs||[];let i={};if(SGt(n,t),r.forEach(o=>{t.attrs.keys.includes(o[0])||t.attrs.keys.push(o[0]),i={...i,[o[0]]:r7e(o[1])},n.section&&(kGt(n,o,t),TGt(n,o,t))}),r.length&&n.section){const o=n.tag==="section-step",s=o?` ${n.tag} `:"",a=n.section+s,l=Object.keys(t.attrs.sections).filter(c=>!!c.startsWith(a)).length+1,f=a+(o?l:"");t.attrs.sections={...t.attrs.sections,[f]:{...i,...o?{as:n.tag,mode:"tour"}:{}}}}})}function SGt(e,t){var n,r;e.section&&(e.tag==="section-step"&&!t.sections[e.section].steps&&(t.sections[e.section].steps=[]),(e.markup==="#"||e.markup==="##")&&(t.sections[e.section]=t.sections[e.section]||{}),(r=(n=t.sections[e.section])==null?void 0:n.steps)==null||r.push({}))}function kGt(e,t,n){e.markup==="##"&&(n.sections[e.section]={[t[0]]:Xj(t[1]),...n.sections[e.section]})}function TGt(e,t,n){if(e.tag==="section-step"){const r=n.sections[e.section].steps,i=r.length-1,o=r[i];r[i]={[t[0]]:Xj(t[1]),...o}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function h7e(e){return typeof e>"u"||e===null}function DGt(e){return typeof e=="object"&&e!==null}function LGt(e){return Array.isArray(e)?e:h7e(e)?[]:[e]}function RGt(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function FGt(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function $Gt(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var MGt=h7e,OGt=DGt,IGt=LGt,NGt=FGt,PGt=$Gt,BGt=RGt,sa={isNothing:MGt,isObject:OGt,toArray:IGt,repeat:NGt,isNegativeZero:PGt,extend:BGt};function p7e(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function VE(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=p7e(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}VE.prototype=Object.create(Error.prototype);VE.prototype.constructor=VE;VE.prototype.toString=function(t){return this.name+": "+p7e(this,t)};var Kl=VE;function Y4(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(o=" ... ",t=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+e.slice(t,n).replace(/\t/g,"")+s,pos:r-t+o.length}}function X4(e,t){return sa.repeat(" ",t-e.length)+e}function zGt(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,u,f=Math.min(e.line+t.linesAfter,i.length).toString().length,c=t.maxLength-(t.indent+f+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)u=Y4(e.buffer,r[s-l],i[s-l],e.position-(r[s]-r[s-l]),c),a=sa.repeat(" ",t.indent)+X4((e.line-l+1).toString(),f)+" | "+u.str+`
`+a;for(u=Y4(e.buffer,r[s],i[s],e.position,c),a+=sa.repeat(" ",t.indent)+X4((e.line+1).toString(),f)+" | "+u.str+`
`,a+=sa.repeat("-",t.indent+f+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)u=Y4(e.buffer,r[s+l],i[s+l],e.position-(r[s]-r[s+l]),c),a+=sa.repeat(" ",t.indent)+X4((e.line+l+1).toString(),f)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var UGt=zGt,jGt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],HGt=["scalar","sequence","mapping"];function qGt(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function GGt(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(jGt.indexOf(n)===-1)throw new Kl('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=qGt(t.styleAliases||null),HGt.indexOf(this.kind)===-1)throw new Kl('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var el=GGt;function FTe(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}function WGt(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function kN(e){return this.extend(e)}kN.prototype.extend=function(t){var n=[],r=[];if(t instanceof el)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Kl("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof el))throw new Kl("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Kl("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Kl("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof el))throw new Kl("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(kN.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=FTe(i,"implicit"),i.compiledExplicit=FTe(i,"explicit"),i.compiledTypeMap=WGt(i.compiledImplicit,i.compiledExplicit),i};var g7e=kN,m7e=new el("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),v7e=new el("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),y7e=new el("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),b7e=new g7e({explicit:[m7e,v7e,y7e]});function VGt(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function YGt(){return null}function XGt(e){return e===null}var x7e=new el("tag:yaml.org,2002:null",{kind:"scalar",resolve:VGt,construct:YGt,predicate:XGt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function KGt(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function ZGt(e){return e==="true"||e==="True"||e==="TRUE"}function QGt(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var w7e=new el("tag:yaml.org,2002:bool",{kind:"scalar",resolve:KGt,construct:ZGt,predicate:QGt,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function JGt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function eWt(e){return 48<=e&&e<=55}function tWt(e){return 48<=e&&e<=57}function nWt(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!JGt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!eWt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!tWt(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function rWt(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function iWt(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!sa.isNegativeZero(e)}var _7e=new el("tag:yaml.org,2002:int",{kind:"scalar",resolve:nWt,construct:rWt,predicate:iWt,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),oWt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sWt(e){return!(e===null||!oWt.test(e)||e[e.length-1]==="_")}function aWt(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var lWt=/^[-+]?[0-9]+e/;function uWt(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(sa.isNegativeZero(e))return"-0.0";return n=e.toString(10),lWt.test(n)?n.replace("e",".e"):n}function cWt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||sa.isNegativeZero(e))}var E7e=new el("tag:yaml.org,2002:float",{kind:"scalar",resolve:sWt,construct:aWt,predicate:cWt,represent:uWt,defaultStyle:"lowercase"}),A7e=b7e.extend({implicit:[x7e,w7e,_7e,E7e]}),C7e=A7e,S7e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),k7e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function fWt(e){return e===null?!1:S7e.exec(e)!==null||k7e.exec(e)!==null}function dWt(e){var t,n,r,i,o,s,a,l=0,u=null,f,c,d;if(t=S7e.exec(e),t===null&&(t=k7e.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(f=+t[10],c=+(t[11]||0),u=(f*60+c)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,r,i,o,s,a,l)),u&&d.setTime(d.getTime()-u),d}function hWt(e){return e.toISOString()}var T7e=new el("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:fWt,construct:dWt,instanceOf:Date,represent:hWt});function pWt(e){return e==="<<"||e===null}var D7e=new el("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pWt}),Zj=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function gWt(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=Zj;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function mWt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=Zj,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function vWt(e){var t="",n=0,r,i,o=e.length,s=Zj;for(r=0;r<o;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):i===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):i===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function yWt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var L7e=new el("tag:yaml.org,2002:binary",{kind:"scalar",resolve:gWt,construct:mWt,predicate:yWt,represent:vWt}),bWt=Object.prototype.hasOwnProperty,xWt=Object.prototype.toString;function wWt(e){if(e===null)return!0;var t=[],n,r,i,o,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,xWt.call(i)!=="[object Object]")return!1;for(o in i)if(bWt.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function _Wt(e){return e!==null?e:[]}var R7e=new el("tag:yaml.org,2002:omap",{kind:"sequence",resolve:wWt,construct:_Wt}),EWt=Object.prototype.toString;function AWt(e){if(e===null)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],EWt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function CWt(e){if(e===null)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var F7e=new el("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:AWt,construct:CWt}),SWt=Object.prototype.hasOwnProperty;function kWt(e){if(e===null)return!0;var t,n=e;for(t in n)if(SWt.call(n,t)&&n[t]!==null)return!1;return!0}function TWt(e){return e!==null?e:{}}var $7e=new el("tag:yaml.org,2002:set",{kind:"mapping",resolve:kWt,construct:TWt}),Qj=C7e.extend({implicit:[T7e,D7e],explicit:[L7e,R7e,F7e,$7e]}),Fm=Object.prototype.hasOwnProperty,ZD=1,M7e=2,O7e=3,QD=4,K4=1,DWt=2,$Te=3,LWt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,RWt=/[\x85\u2028\u2029]/,FWt=/[,\[\]\{\}]/,I7e=/^(?:!|!!|![a-z\-]+!)$/i,N7e=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function MTe(e){return Object.prototype.toString.call(e)}function Vd(e){return e===10||e===13}function Ev(e){return e===9||e===32}function Ru(e){return e===9||e===32||e===10||e===13}function Bb(e){return e===44||e===91||e===93||e===123||e===125}function $Wt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function MWt(e){return e===120?2:e===117?4:e===85?8:0}function OWt(e){return 48<=e&&e<=57?e-48:-1}function OTe(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function IWt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var P7e=new Array(256),B7e=new Array(256);for(var gb=0;gb<256;gb++)P7e[gb]=OTe(gb)?1:0,B7e[gb]=OTe(gb);function NWt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Qj,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function z7e(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=UGt(n),new Kl(t,n)}function Qn(e,t){throw z7e(e,t)}function JD(e,t){e.onWarning&&e.onWarning.call(null,z7e(e,t))}var ITe={YAML:function(t,n,r){var i,o,s;t.version!==null&&Qn(t,"duplication of %YAML directive"),r.length!==1&&Qn(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Qn(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&Qn(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&JD(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&Qn(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],I7e.test(i)||Qn(t,"ill-formed tag handle (first argument) of the TAG directive"),Fm.call(t.tagMap,i)&&Qn(t,'there is a previously declared suffix for "'+i+'" tag handle'),N7e.test(o)||Qn(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Qn(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function cm(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||Qn(e,"expected valid JSON character");else LWt.test(a)&&Qn(e,"the stream contains non-printable characters");e.result+=a}}function NTe(e,t,n,r){var i,o,s,a;for(sa.isObject(n)||Qn(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],Fm.call(t,o)||(t[o]=n[o],r[o]=!0)}function zb(e,t,n,r,i,o,s,a,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Qn(e,"nested arrays are not supported inside keys"),typeof i=="object"&&MTe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&MTe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)NTe(e,t,o[u],n);else NTe(e,t,o,n);else!e.json&&!Fm.call(n,i)&&Fm.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,Qn(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Jj(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Qn(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ks(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ev(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Vd(i))for(Jj(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&JD(e,"deficient indentation"),r}function C$(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Ru(n)))}function eH(e,t){t===1?e.result+=" ":t>1&&(e.result+=sa.repeat(`
`,t-1))}function PWt(e,t,n){var r,i,o,s,a,l,u,f,c=e.kind,d=e.result,p;if(p=e.input.charCodeAt(e.position),Ru(p)||Bb(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Ru(i)||n&&Bb(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Ru(i)||n&&Bb(i))break}else if(p===35){if(r=e.input.charCodeAt(e.position-1),Ru(r))break}else{if(e.position===e.lineStart&&C$(e)||n&&Bb(p))break;if(Vd(p))if(l=e.line,u=e.lineStart,f=e.lineIndent,Ks(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=u,e.lineIndent=f;break}}a&&(cm(e,o,s,!1),eH(e,e.line-l),o=s=e.position,a=!1),Ev(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return cm(e,o,s,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function BWt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(cm(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Vd(n)?(cm(e,r,i,!0),eH(e,Ks(e,!1,t)),r=i=e.position):e.position===e.lineStart&&C$(e)?Qn(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Qn(e,"unexpected end of the stream within a single quoted scalar")}function zWt(e,t){var n,r,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return cm(e,n,e.position,!0),e.position++,!0;if(a===92){if(cm(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Vd(a))Ks(e,!1,t);else if(a<256&&P7e[a])e.result+=B7e[a],e.position++;else if((s=MWt(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=$Wt(a))>=0?o=(o<<4)+s:Qn(e,"expected hexadecimal character");e.result+=IWt(o),e.position++}else Qn(e,"unknown escape sequence");n=r=e.position}else Vd(a)?(cm(e,n,r,!0),eH(e,Ks(e,!1,t)),n=r=e.position):e.position===e.lineStart&&C$(e)?Qn(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Qn(e,"unexpected end of the stream within a double quoted scalar")}function UWt(e,t){var n=!0,r,i,o,s=e.tag,a,l=e.anchor,u,f,c,d,p,h=Object.create(null),g,m,y,v;if(v=e.input.charCodeAt(e.position),v===91)f=93,p=!1,a=[];else if(v===123)f=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(Ks(e,!0,t),v=e.input.charCodeAt(e.position),v===f)return e.position++,e.tag=s,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=a,!0;n?v===44&&Qn(e,"expected the node content, but found ','"):Qn(e,"missed comma between flow collection entries"),m=g=y=null,c=d=!1,v===63&&(u=e.input.charCodeAt(e.position+1),Ru(u)&&(c=d=!0,e.position++,Ks(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,tx(e,t,ZD,!1,!0),m=e.tag,g=e.result,Ks(e,!0,t),v=e.input.charCodeAt(e.position),(d||e.line===r)&&v===58&&(c=!0,v=e.input.charCodeAt(++e.position),Ks(e,!0,t),tx(e,t,ZD,!1,!0),y=e.result),p?zb(e,a,h,m,g,y,r,i,o):c?a.push(zb(e,null,h,m,g,y,r,i,o)):a.push(g),Ks(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}Qn(e,"unexpected end of the stream within a flow collection")}function jWt(e,t){var n,r,i=K4,o=!1,s=!1,a=t,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)r=!1;else if(c===62)r=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)K4===i?i=c===43?$Te:DWt:Qn(e,"repeat of a chomping mode identifier");else if((f=OWt(c))>=0)f===0?Qn(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Qn(e,"repeat of an indentation width identifier"):(a=t+f-1,s=!0);else break;if(Ev(c)){do c=e.input.charCodeAt(++e.position);while(Ev(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!Vd(c)&&c!==0)}for(;c!==0;){for(Jj(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Vd(c)){l++;continue}if(e.lineIndent<a){i===$Te?e.result+=sa.repeat(`
`,o?1+l:l):i===K4&&o&&(e.result+=`
`);break}for(r?Ev(c)?(u=!0,e.result+=sa.repeat(`
`,o?1+l:l)):u?(u=!1,e.result+=sa.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=sa.repeat(`
`,l):e.result+=sa.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=e.position;!Vd(c)&&c!==0;)c=e.input.charCodeAt(++e.position);cm(e,n,e.position,!1)}return!0}function PTe(e,t){var n,r=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Qn(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Ru(s))));){if(a=!0,e.position++,Ks(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,tx(e,t,O7e,!1,!0),o.push(e.result),Ks(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)Qn(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function HWt(e,t,n){var r,i,o,s,a,l,u=e.tag,f=e.anchor,c={},d=Object.create(null),p=null,h=null,g=null,m=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),v=e.input.charCodeAt(e.position);v!==0;){if(!m&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Qn(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(v===63||v===58)&&Ru(r))v===63?(m&&(zb(e,c,d,p,h,null,s,a,l),p=h=g=null),y=!0,m=!0,i=!0):m?(m=!1,i=!0):Qn(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=r;else{if(s=e.line,a=e.lineStart,l=e.position,!tx(e,n,M7e,!1,!0))break;if(e.line===o){for(v=e.input.charCodeAt(e.position);Ev(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),Ru(v)||Qn(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(zb(e,c,d,p,h,null,s,a,l),p=h=g=null),y=!0,m=!1,i=!1,p=e.tag,h=e.result;else if(y)Qn(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=f,!0}else if(y)Qn(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=f,!0}if((e.line===o||e.lineIndent>t)&&(m&&(s=e.line,a=e.lineStart,l=e.position),tx(e,t,QD,!0,i)&&(m?h=e.result:g=e.result),m||(zb(e,c,d,p,h,g,s,a,l),p=h=g=null),Ks(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&v!==0)Qn(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&zb(e,c,d,p,h,null,s,a,l),y&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=c),y}function qWt(e){var t,n=!1,r=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Qn(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Qn(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ru(s);)s===33&&(r?Qn(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),I7e.test(i)||Qn(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),FWt.test(o)&&Qn(e,"tag suffix cannot contain flow indicator characters")}o&&!N7e.test(o)&&Qn(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Qn(e,"tag name is malformed: "+o)}return n?e.tag=o:Fm.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:Qn(e,'undeclared tag handle "'+i+'"'),!0}function GWt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Qn(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ru(n)&&!Bb(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Qn(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function WWt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ru(r)&&!Bb(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Qn(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Fm.call(e.anchorMap,n)||Qn(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ks(e,!0,-1),!0}function tx(e,t,n,r,i){var o,s,a,l=1,u=!1,f=!1,c,d,p,h,g,m;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=QD===n||O7e===n,r&&Ks(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;qWt(e)||GWt(e);)Ks(e,!0,-1)?(u=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||QD===n)&&(ZD===n||M7e===n?g=t:g=t+1,m=e.position-e.lineStart,l===1?a&&(PTe(e,m)||HWt(e,m,g))||UWt(e,g)?f=!0:(s&&jWt(e,g)||BWt(e,g)||zWt(e,g)?f=!0:WWt(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&Qn(e,"alias node should not have any properties")):PWt(e,g,ZD===n)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=a&&PTe(e,m))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Qn(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,d=e.implicitTypes.length;c<d;c+=1)if(h=e.implicitTypes[c],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Fm.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,p=e.typeMap.multi[e.kind||"fallback"],c=0,d=p.length;c<d;c+=1)if(e.tag.slice(0,p[c].tag.length)===p[c].tag){h=p[c];break}h||Qn(e,"unknown tag !<"+e.tag+">"),e.result!==null&&h.kind!==e.kind&&Qn(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Qn(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function VWt(e){var t=e.position,n,r,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Ks(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!Ru(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&Qn(e,"directive name must not be less than one character in length");s!==0;){for(;Ev(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Vd(s));break}if(Vd(s))break;for(n=e.position;s!==0&&!Ru(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}s!==0&&Jj(e),Fm.call(ITe,r)?ITe[r](e,r,i):JD(e,'unknown document directive "'+r+'"')}if(Ks(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ks(e,!0,-1)):o&&Qn(e,"directives end mark is expected"),tx(e,e.lineIndent-1,QD,!1,!0),Ks(e,!0,-1),e.checkLineBreaks&&RWt.test(e.input.slice(t,e.position))&&JD(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&C$(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ks(e,!0,-1));return}if(e.position<e.length-1)Qn(e,"end of the stream or a document separator is expected");else return}function U7e(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new NWt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Qn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)VWt(n);return n.documents}function YWt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=U7e(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function XWt(e,t){var n=U7e(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Kl("expected a single document in the stream, but found more")}}var KWt=YWt,ZWt=XWt,j7e={loadAll:KWt,load:ZWt},H7e=Object.prototype.toString,q7e=Object.prototype.hasOwnProperty,tH=65279,QWt=9,YE=10,JWt=13,eVt=32,tVt=33,nVt=34,TN=35,rVt=37,iVt=38,oVt=39,sVt=42,G7e=44,aVt=45,eL=58,lVt=61,uVt=62,cVt=63,fVt=64,W7e=91,V7e=93,dVt=96,Y7e=123,hVt=124,X7e=125,Ol={};Ol[0]="\\0";Ol[7]="\\a";Ol[8]="\\b";Ol[9]="\\t";Ol[10]="\\n";Ol[11]="\\v";Ol[12]="\\f";Ol[13]="\\r";Ol[27]="\\e";Ol[34]='\\"';Ol[92]="\\\\";Ol[133]="\\N";Ol[160]="\\_";Ol[8232]="\\L";Ol[8233]="\\P";var pVt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gVt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function mVt(e,t){var n,r,i,o,s,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&q7e.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function vVt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Kl("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+sa.repeat("0",r-t.length)+t}var yVt=1,XE=2;function bVt(e){this.schema=e.schema||Qj,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=sa.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=mVt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?XE:yVt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function BTe(e,t){for(var n=sa.repeat(" ",t),r=0,i=-1,o="",s,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(s=e.slice(r),r=a):(s=e.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function DN(e,t){return`
`+sa.repeat(" ",e.indent*t)}function xVt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function tL(e){return e===eVt||e===QWt}function KE(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==tH||65536<=e&&e<=1114111}function zTe(e){return KE(e)&&e!==tH&&e!==JWt&&e!==YE}function UTe(e,t,n){var r=zTe(e),i=r&&!tL(e);return(n?r:r&&e!==G7e&&e!==W7e&&e!==V7e&&e!==Y7e&&e!==X7e)&&e!==TN&&!(t===eL&&!i)||zTe(t)&&!tL(t)&&e===TN||t===eL&&i}function wVt(e){return KE(e)&&e!==tH&&!tL(e)&&e!==aVt&&e!==cVt&&e!==eL&&e!==G7e&&e!==W7e&&e!==V7e&&e!==Y7e&&e!==X7e&&e!==TN&&e!==iVt&&e!==sVt&&e!==tVt&&e!==hVt&&e!==lVt&&e!==uVt&&e!==oVt&&e!==nVt&&e!==rVt&&e!==fVt&&e!==dVt}function _Vt(e){return!tL(e)&&e!==eL}function v_(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function K7e(e){var t=/^\n* /;return t.test(e)}var Z7e=1,LN=2,Q7e=3,J7e=4,Cb=5;function EVt(e,t,n,r,i,o,s,a){var l,u=0,f=null,c=!1,d=!1,p=r!==-1,h=-1,g=wVt(v_(e,0))&&_Vt(v_(e,e.length-1));if(t||s)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=v_(e,l),!KE(u))return Cb;g=g&&UTe(u,f,a),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=v_(e,l),u===YE)c=!0,p&&(d=d||l-h-1>r&&e[h+1]!==" ",h=l);else if(!KE(u))return Cb;g=g&&UTe(u,f,a),f=u}d=d||p&&l-h-1>r&&e[h+1]!==" "}return!c&&!d?g&&!s&&!i(e)?Z7e:o===XE?Cb:LN:n>9&&K7e(e)?Cb:s?o===XE?Cb:LN:d?J7e:Q7e}function AVt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===XE?'""':"''";if(!e.noCompatMode&&(pVt.indexOf(t)!==-1||gVt.test(t)))return e.quotingType===XE?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(u){return xVt(e,u)}switch(EVt(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!r,i)){case Z7e:return t;case LN:return"'"+t.replace(/'/g,"''")+"'";case Q7e:return"|"+jTe(t,e.indent)+HTe(BTe(t,o));case J7e:return">"+jTe(t,e.indent)+HTe(BTe(CVt(t,s),o));case Cb:return'"'+SVt(t)+'"';default:throw new Kl("impossible error: invalid scalar style")}}()}function jTe(e,t){var n=K7e(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function HTe(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function CVt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,n.lastIndex=u,qTe(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=n.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",r+=a+(!i&&!o&&l!==""?`
`:"")+qTe(l,t),i=o}return r}function qTe(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function SVt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=v_(e,i),r=Ol[n],!r&&KE(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||vVt(n);return t}function kVt(e,t,n){var r="",i=e.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],e.replacer&&(a=e.replacer.call(n,String(o),a)),(Op(e,t,a,!1,!1)||typeof a>"u"&&Op(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function GTe(e,t,n,r){var i="",o=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(Op(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&Op(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=DN(e,t)),e.dump&&YE===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function TVt(e,t,n){var r="",i=e.tag,o=Object.keys(n),s,a,l,u,f;for(s=0,a=o.length;s<a;s+=1)f="",r!==""&&(f+=", "),e.condenseFlow&&(f+='"'),l=o[s],u=n[l],e.replacer&&(u=e.replacer.call(n,l,u)),Op(e,t,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Op(e,t,u,!1,!1)&&(f+=e.dump,r+=f));e.tag=i,e.dump="{"+r+"}"}function DVt(e,t,n,r){var i="",o=e.tag,s=Object.keys(n),a,l,u,f,c,d;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Kl("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)d="",(!r||i!=="")&&(d+=DN(e,t)),u=s[a],f=n[u],e.replacer&&(f=e.replacer.call(n,u,f)),Op(e,t+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&YE===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=DN(e,t)),Op(e,t+1,f,!0,c)&&(e.dump&&YE===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=o,e.dump=i||"{}"}function WTe(e,t,n){var r,i,o,s,a,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,H7e.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(q7e.call(a.represent,l))r=a.represent[l](t,l);else throw new Kl("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function Op(e,t,n,r,i,o,s){e.tag=null,e.dump=n,WTe(e,n,!1)||WTe(e,n,!0);var a=H7e.call(e.dump),l=r,u;r&&(r=e.flowLevel<0||e.flowLevel>t);var f=a==="[object Object]"||a==="[object Array]",c,d;if(f&&(c=e.duplicates.indexOf(n),d=c!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(f&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(DVt(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(TVt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?GTe(e,t-1,e.dump,i):GTe(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(kVt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&AVt(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Kl("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function LVt(e,t){var n=[],r=[],i,o;for(RN(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function RN(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)RN(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)RN(e[r[i]],t,n)}function RVt(e,t){t=t||{};var n=new bVt(t);n.noRefs||LVt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Op(n,0,r,!0,!0)?n.dump+`
`:""}var FVt=RVt,$Vt={dump:FVt};function nH(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var MVt=el,OVt=g7e,IVt=b7e,NVt=A7e,PVt=C7e,BVt=Qj,zVt=j7e.load,UVt=j7e.loadAll,jVt=$Vt.dump,HVt=Kl,qVt={binary:L7e,float:E7e,map:y7e,null:x7e,pairs:F7e,set:$7e,timestamp:T7e,bool:w7e,int:_7e,merge:D7e,omap:R7e,seq:v7e,str:m7e},GVt=nH("safeLoad","load"),WVt=nH("safeLoadAll","loadAll"),VVt=nH("safeDump","dump"),YVt={Type:MVt,Schema:OVt,FAILSAFE_SCHEMA:IVt,JSON_SCHEMA:NVt,CORE_SCHEMA:PVt,DEFAULT_SCHEMA:BVt,load:zVt,loadAll:UVt,dump:jVt,YAMLException:HVt,types:qVt,safeLoad:GVt,safeLoadAll:WVt,safeDump:VVt};function XVt(e){e.core.ruler.before("normalize","extract-config",t=>{var i;const n=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=t.src.match(n);if(e.config={versionCheck:((i=e.config)==null?void 0:i.versionCheck)||!1},r)try{e.config=YVt.load(r[1]),t.src=t.src.replace(r[0],"")}catch(o){return console.error("Error parsing frontmatter:",o),null}e.config.versionCheck||(e.config.version=Number(Xqt(e.config.version)),e.config.versionCheck=!0)})}const KVt=`
${cC}
${r$}
${DU}
${PU}
  :host {
    overflow: unset !important;
  }

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .hamburger-menu {
    display: none;
    cursor: pointer;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTUsOS41TDcuNSwxNEgyLjVMNSw5LjVNMyw0SDdWOEgzVjRNNSwyMEEyLDIgMCAwLDAgNywxOEEyLDIgMCAwLDAgNSwxNkEyLDIgMCAwLDAgMywxOEEyLDIgMCAwLDAgNSwyME05LDVWN0gyMVY1SDlNOSwxOUgyMVYxN0g5VjE5TTksMTNIMjFWMTFIOVYxM1oiIC8+PC9zdmc+");
    background-repeat: no-repeat;
    background-size: contain;
    width: 30px;
    height: 30px;
  }
  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .nav-overlay {
    display: none;
  }
  @media (max-width: 768px) {
    .navigation {
      padding: 0px;
      height: 50px;
    }
    .navigation .container {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .hamburger-menu {
      display: flex;
    }
    .navigation .container ul {
      position: absolute;
      top: 50px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 99999999;
      display: none;
      flex-direction: column;
    }
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99999998;
      cursor: pointer;
    }
    .navigation .container ul.show, .nav-overlay.show {
      display: flex !important;
    }
    .nav-list li {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    .navigation .container ul li {
      width: 100%;
      text-align: center;
    } 
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p,
  .story-telling code {
    --font-size: 1.1rem;
  }
  .story-telling p {
    display: block;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling sup a {
    font-size: smaller;
  }
  .story-telling sup a,
  .story-telling a.footnote-backref {
    text-decoration: none;
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map:not(section-step eox-map),
  .story-telling .tour img:not(section-step img),
  .story-telling .tour video:not(section-step video) {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
    object-fit: cover;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0 !important;
    height: 0 !important;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var TL,tUe;class eUe extends Pi{constructor(){super();zn(this,TL);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableAutosave=!1,this.lastX=void 0,this.lastY=void 0,this.editor=void 0,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const n=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&n7e(this),wqt(this),t7e(this),xqt(n,r,this)}updateErrors(n){const r=this.renderRoot.querySelector(".editor-error");r&&(n.length?(r.style.display="block",r.querySelector("ul").innerHTML=n.map(i=>`<li><strong>${i.ref}</strong>: ${i.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const n=this.isNavigation?"partial-height":"";return yt`
      <div class="editor-wrapper ${n}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${kqt}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${In(this,TL,tUe)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}TL=new WeakSet,tUe=function(n){const r=this.renderRoot.querySelector(".editor-wrapper"),i=this.storyId?`#${this.storyId}`:"",o=document.querySelector(`eox-storytelling${i}`);n.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),o.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),o.setAttribute("show-editor","close"))},Cn(eUe,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean}});customElements.define("eox-storytelling-editor",eUe);const Ng=ef({html:!0,linkify:!0});Ng.use(vGt).use(XVt);Ng.use(lqt);var bf,l1,sA,DL,nUe;class ZVt extends Pi{constructor(){super();zn(this,DL);zn(this,bf);zn(this,l1,{});zn(this,sA,null);ko(this,bf,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.disableAutosave=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(n){if(n.has("markdownURL")&&this.markdownURL&&(this.markdown=await uqt(this.markdownURL)||this.markdown,this.requestUpdate()),n.has("markdown")){this.markdown&&this.dispatchEvent(new CustomEvent("changed",{detail:this.markdown}));const r=Ng.render(this.markdown);if(aGt(Ng.attrs.sections,this),ko(this,l1,Ng.config),typeof fn(this,l1).nav=="boolean"&&(this.showNav=fn(this,l1).nav),this.showNav&&(this.nav=Ng.nav),ko(this,bf,eGt(bTt.sanitize(r,{CUSTOM_ELEMENT_HANDLING:Vqt(Ng),ADD_TAGS:pqt}),Ng.sections,In(this,DL,nUe).bind(this),this)),ko(this,bf,nGt(fn(this,bf),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const o=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),s=o.querySelector("eox-jsonform");this.markdown!==(s==null?void 0:s.value.Story)&&(o.markdown=this.markdown)}this.requestUpdate()}n.has("nav")&&Wqt(this,".navigation a")}handleSlotChange(){const n=this.shadowRoot.querySelector("slot");if(n){const r=n.assignedNodes({flatten:!0});this.markdown=r.map(i=>i.textContent?i.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){ko(this,sA,xy(n=>{n.detail&&(this.markdown=n.detail.Story,this.requestUpdate())},1e3)),this.disableAutosave||Sqt(this),Yqt(),fn(this,bf)===void 0&&await this.waitForHtmlInitialization(),Yj(this)}async waitForHtmlInitialization(){const n=r=>new Promise(i=>setTimeout(i,r));for(;fn(this,bf)===void 0;)await n(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return yt`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&KVt}
        ${!this.unstyled&&QF}
      </style>

      <div class="story-telling ${n}">
        <div>${xr(fn(this,bf),()=>yt`${fn(this,bf)}`)}</div>
        ${xr(this.showEditor!==void 0,()=>yt`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${fn(this,sA)}
              .markdown=${this.markdown}
              .disableAutosave=${this.disableAutosave}
            ></eox-storytelling-editor>
          `)}
      </div>

      ${xr(this.addCustomSectionIndex>-1,()=>yt`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${xr(this.selectedCustomElement,()=>yt`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                          .customEditorInterfaces=${Hqt}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>kTe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${Uqt.map(r=>yt`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(i=>yt`<div
                            @click=${()=>kTe(this.markdown,this.addCustomSectionIndex,i.markdown,i.fields,!1,this)}
                            class="grid-item"
                          >
                            <icon id="${i.id}"></icon>
                            <p>${i.name}</p>
                            <style>
                              icon#${i.id}::before {
                                content: url("${i.icon}");
                              }
                            </style>
                          </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}bf=new WeakMap,l1=new WeakMap,sA=new WeakMap,DL=new WeakSet,nUe=function(n){this.dispatchEvent(new CustomEvent("init",{detail:n}))};customElements.define("eox-storytelling",ZVt);const QVt=`
:host {
  display: block;
}
`,JVt=`
:host, :root {
  --navigation-button-display: inline-flex;
}

* {
  font-family: Roboto, sans-serif;
}

${cC}
${PU}

[part=controls] {
  display: flex;
  align-items: center;
  gap: 8px;
}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous,
button.icon.next {
  display: var(--navigation-button-display);
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z' /%3E%3C/svg%3E");
}
`;class eYt extends Pi{static get properties(){return{width:{type:Number},steps:{type:Array}}}constructor(){super(),this.width=0,this.steps=[],this.height=6,this.svgWidth=0,this._yearMarks=[],this._years=[],this._sliderTicks=[]}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize()}updated(t){t.has("steps")&&(this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize())}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}groupDatesByYear(){const t=[];return this.steps.forEach(n=>{const i=If(n).year();let o=t.find(s=>s.year===i);o||(o={year:i,dates:[]},t.push(o)),o.dates.push(n)}),t}preprocessDates(){const t=[];this.steps.forEach(n=>{const i=If(n).year();let o=t.find(s=>s.year===i);o||(o={year:i,ratio:0,dates:[]},t.push(o)),o.dates.push({date:n,isYearMarker:o.dates.length===0})});for(let n of t)n.ratio=n.dates.length/this.steps.length;return t}get sliderTicks(){return this._sliderTicks}set sliderTicks(t){this._sliderTicks=t,this.requestUpdate()}calculateYearBars(){return this._years.flatMap((r,i)=>{const o=this.steps.indexOf(r.dates[0].date)/(this.steps.length-1)*this.width,s=this.steps.indexOf(r.dates[r.dates.length-1].date)/(this.steps.length-1)*this.width,a=Math.max(0,s-o-2),l=[];return l.push(Vy`
            <rect
              key=${i}
              x=${o+2/2} // Add half the spacing to the start position
              y="0"
              width=${a}
              height="6"
              fill="#7596A2"
            ></rect>
        `),a>=30&&l.push(Vy`
                <text
                  key=${`label-${i}`}
                  x=${o+16}
                  y="26"
                  fill="#555"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${r.year}
                </text>
            `),l})}calculateIndividualTicks(){return this._years.flatMap((t,n)=>{const r=this.steps.length,i=Math.max(1,Math.floor(r/this.width));return t.dates.filter((o,s)=>s%i===0).map((o,s)=>{const l=this.steps.indexOf(o.date)/(this.steps.length-1)*this.width,u=[];return u.push(Vy`
                <line
                  key=${n}-${s}
                  x1=${l}
                  y1="0"
                  x2=${l}
                  y2=${o.isYearMarker?12:6}
                  stroke=${o.isYearMarker?"#222":"#7596A2"}
                  stroke-width="1"
                ></line>
              `),o.isYearMarker&&this.density>.03&&this.density<.5&&n%2==0&&u.push(Vy`
                  <text
                    key=${`label-${n}`}
                    x=${l+16}
                    y="30"
                    fill="#555"
                    font-size="14"
                    text-anchor="middle"
                  >
                    ${t.year}
                  </text>
                `),u})})}get density(){return this.steps.length/this.width}calculateSliderTicks(){if(this.density<=.5)return this.calculateIndividualTicks();if(this.density>.5&&this.density<10)return this.calculateYearBars();if(this.density>=10)return this.calculateDecadeBars()}calculateDecadeBars(){const r=this._years.reduce((o,s)=>{const a=Math.floor(s.year/10)*10;return o[a]||(o[a]=[]),o[a].push(...s.dates),o},{});return Object.keys(r).flatMap((o,s)=>{const a=this.steps.indexOf(r[o][0].date)/(this.steps.length-1)*this.width,l=this.steps.indexOf(r[o][r[o].length-1].date)/(this.steps.length-1)*this.width,u=Math.max(0,l-a-2),f=[];return f.push(Vy`
            <rect
              key=${`decade-${s}`}
              x=${a+2/2}
              y="0"
              width=${u}
              height="6"
              fill="#555"
            ></rect>
        `),u>=30&&f.push(Vy`
                <text
                  key=${`decade-label-${s}`}
                  x=${a+18}
                  y="26"
                  fill="#333"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${o}
                </text>
            `),f})}get lines(){const t=this.numLines>this.width/2?this.width/2:this.numLines,n=this.width/(t-1);return Array.from({length:this.numLines},(r,i)=>i*n)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){return this._yearMarks}set yearMarks(t){this._yearMarks=t,this.requestUpdate()}get years(){return this._years}set years(t){this._years=t,this.requestUpdate()}calculateYearMarks(){this._years=this.preprocessDates();const t=[];let n=null;return this.lines.forEach((r,i)=>{const s=If(this.steps[i]).year();(i===0||s!==n)&&t.push({label:s,position:r}),n=s}),t}isYearLine(t){return this._yearMarks.some(r=>Math.abs(r.position-t)<1)}render(){return yt`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.sliderTicks}
        </svg>
      </div>
    `}}customElements.define("eox-sliderticks",eYt);var E3={exports:{}},tYt=E3.exports,VTe;function nYt(){return VTe||(VTe=1,function(e,t){(function(n,r){e.exports=r()})(tYt,function(){return function(n,r,i){r.prototype.dayOfYear=function(o){var s=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return o==null?s:this.add(o-s,"day")}}})}(E3)),E3.exports}var rYt=nYt();const iYt=Fa(rYt);var A3={exports:{}},oYt=A3.exports,YTe;function sYt(){return YTe||(YTe=1,function(e,t){(function(n,r){e.exports=r()})(oYt,function(){var n="day";return function(r,i,o){var s=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return s(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var f,c,d,p,h=s(this),g=(f=this.isoWeekYear(),c=this.$u,d=(c?o.utc:o)().year(f).startOf("year"),p=4-d.isoWeekday(),d.isoWeekday()>4&&(p+=7),d.add(p,n));return h.diff(g,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,f){var c=this.$utils(),d=!!c.u(f)||f;return c.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,f)}}})}(A3)),A3.exports}var aYt=sYt();const lYt=Fa(aYt);If.extend(iYt);If.extend(lYt);class uYt extends Pi{static get properties(){return{controlProperty:{type:String,attribute:"control-property"},controlValues:{type:Array,attribute:"control-values"},for:{type:String},layer:{type:String},slider:{type:Boolean},navigation:{type:Boolean},_originalParams:{type:Object},play:{type:Boolean,attribute:"play"},displayFormat:{type:String,attribute:"display-format"},currentStep:{type:String,attribute:"current-step"},_animationInterval:{state:!0},_controlSource:{state:!0},_isAnimationPlaying:{state:!0},_newStepIndex:{state:!0},_eoxMap:{state:!0},_width:{state:!0},unstyled:{type:Boolean}}}constructor(){super(),this.controlValues=[],this._newStepIndex=0,this.unstyled=!1,this.play=!1,this.navigation=!0,this.slider=!1,this.for="eox-map",this.layer="",this.controlProperty=void 0,this._eoxMap=void 0,this._width=300,window.addEventListener("resize",()=>{this._width=this.clientWidth}),this.displayFormat=void 0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(t){t?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=t,this.requestUpdate()}setConfig(t){this.layer=t.layer??this.layer,this.controlProperty=t.controlProperty??this.controlProperty,this.controlValues=t.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(t){const n=this.controlValues.findIndex(r=>r===t);n>-1?this._newStepIndex=n:console.error(`Unable to find step "${t}" in available times!`)}firstUpdated(){this.updateMap()}updated(t){t.has("for")&&this.updateMap()}updateMap(){const t=X_(this.for);if(t){const n=t;this.eoxMap=n}}get eoxMap(){return this._eoxMap}set eoxMap(t){const n=this._eoxMap;this._eoxMap=t,this.requestUpdate("eoxMap",n)}_updateStep(t=1){var n;t&&(this._newStepIndex=this._newStepIndex+t,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),this.layer&&this.for&&((n=this._controlSource)==null||n.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]})),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}})))}getFlatLayersArray(t){const n=[];n.push(...t);let r=n.filter(i=>i instanceof uI);for(;r.length;){const i=[];for(let o=0,s=r.length;o<s;o++){const a=r[o].getLayers().getArray();n.push(...a);const l=a.filter(u=>u instanceof uI);i.push(...l)}r=i}return n}render(){if(this.layer&&this.for){const n=X_(this.for).map;n.once("loadend",()=>{if(!this._originalParams){const i=this.getFlatLayersArray(n.getLayers().getArray()).find(o=>o.get("id")===this.layer);this._controlSource=i.getSource(),this._originalParams=this._controlSource.getParams()}})}return yt`
      <style>
        ${QVt}
        ${!this.unstyled&&JVt}
      </style>
      <main>
        <div id="controls" part="controls">
          ${this.navigation?yt`
                <button
                  part="previous"
                  class="icon previous"
                  @click="${()=>this.previous()}"
                >
                  <
                </button>
              `:Li}
          <span part="current">
            ${this.displayFormat?If(this.controlValues[this._newStepIndex]).format(this.displayFormat):this.controlValues[this._newStepIndex]}
          </span>
          ${this.navigation?yt`
                <button
                  part="next"
                  class="icon next"
                  @click="${()=>this.next()}"
                >
                  >
                </button>
              `:Li}
          ${this.play?yt`
                <button
                  part="play"
                  class="small icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `:Li}
        </div>
        <div>
          ${this.slider?yt`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(n=>n===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    .width="${this._width}"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}
        </div>
      </main>
    `}}customElements.define("eox-timecontrol",uYt);const XTe=[];function S$(){return window.matchMedia("(pointer: coarse)").matches}function cYt(){return window.matchMedia("(prefers-color-scheme: dark)").matches}async function rUe(e){await new Promise(t=>setTimeout(t,e))}function fYt(){return"fxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Jm(e,t){try{return typeof e=="string"?(t??document).querySelector(e):e}catch{return null}}function ll(e,t){try{return typeof e=="string"?(t??document).querySelectorAll(e):e??XTe}catch{return XTe}}function Fl(e,t){return(e==null?void 0:e.classList.contains(t))??!1}function Ip(e,t){var n;return((n=e==null?void 0:e.tagName)==null?void 0:n.toLowerCase())===t}function ZE(e,t){var n;return((n=e==null?void 0:e.type)==null?void 0:n.toLowerCase())===t}function fm(e,t){if(e instanceof NodeList)for(let n=0;n<e.length;n++)e[n].classList.add(t);else e==null||e.classList.add(t)}function Gc(e,t){if(e instanceof NodeList)for(let n=0;n<e.length;n++)e[n].classList.remove(t);else e==null||e.classList.remove(t)}function xs(e,t,n,r=!0){e!=null&&e.addEventListener&&e.addEventListener(t,n,r)}function rH(e,t,n,r=!0){e!=null&&e.removeEventListener&&e.removeEventListener(t,n,r)}function dYt(e,t){var n;(n=t==null?void 0:t.parentNode)==null||n.insertBefore(e,t)}function iH(e){return e==null?void 0:e.previousElementSibling}function oH(e){return e==null?void 0:e.nextElementSibling}function e0(e){return e==null?void 0:e.parentElement}function hYt(e){const t=document.createElement("div");for(let n=0,r=Object.keys(e),i=r.length;n<i;n++){const o=r[n],s=e[o];t.setAttribute(o,s)}return t}function sH(){var e;(e=document.activeElement)==null||e.blur()}function pYt(e){return ll('[data-ui="#'+e+'"]')}function gYt(e){return Jm('[data-ui="#'+e+'"]')}function mYt(e){e.id&&Fl(e,"page")&&(e=gYt(e.id)??e);const t=e0(e);if(!Fl(t,"tabs")&&!Fl(t,"tabbed")&&!Ip(t,"nav"))return;const n=ll("a",t);for(let r=0;r<n.length;r++)Gc(n[r],"active");fm(e,"active")}function iUe(e){e.placeholder||(e.placeholder=" ")}function vYt(e){const t=e.currentTarget,n=e0(t),r=Jm("input:not([type=file], [type=checkbox], [type=radio]), select, textarea",n);r&&r.focus()}function aH(e){const t=e.currentTarget;OC(t)}function lH(e){const t=e.currentTarget;OC(t)}function yYt(e){const t=e.currentTarget;uH(t)}function bYt(e){const t=e.currentTarget;cH(t)}function xYt(e){const t=e.currentTarget;uH(t,e)}function wYt(e){const t=e.currentTarget;cH(t,e)}function _Yt(e){const t=e.currentTarget;oUe(t)}function EYt(e){var t;const n=e.currentTarget,r=Jm("input",e0(n));r&&(t=n.textContent)!=null&&t.includes("visibility")&&(r.type=r.type==="password"?"text":"password")}function AYt(){const e=ll(".field > label");for(let t=0;t<e.length;t++)xs(e[t],"click",vYt)}function CYt(){const e=ll(".field > input:not([type=file], [type=color], [type=range])");for(let t=0;t<e.length;t++)xs(e[t],"focus",aH),xs(e[t],"blur",lH),OC(e[t])}function SYt(){const e=ll(".field > select");for(let t=0;t<e.length;t++)xs(e[t],"focus",aH),xs(e[t],"blur",lH)}function kYt(){const e=ll(".field > input[type=file]");for(let t=0;t<e.length;t++)xs(e[t],"change",yYt),uH(e[t])}function TYt(){const e=ll(".field > input[type=color]");for(let t=0;t<e.length;t++)xs(e[t],"change",bYt),cH(e[t])}function DYt(){const e=ll(".field.textarea > textarea");for(let t=0;t<e.length;t++)xs(e[t],"focus",aH),xs(e[t],"blur",lH),xs(e[t],"input",_Yt),oUe(e[t])}function LYt(){const e=ll("input[type=password] ~ :is(i, a)");for(let t=0;t<e.length;t++)xs(e[t],"click",EYt)}function OC(e){ZE(e,"number")&&!e.value&&(e.value=""),iUe(e)}function uH(e,t){if((t==null?void 0:t.key)==="Enter"){const r=iH(e);if(!ZE(r,"file"))return;r.click();return}const n=oH(e);ZE(n,"text")&&(n.value=e.files?Array.from(e.files).map(r=>r.name).join(", "):"",n.readOnly=!0,xs(n,"keydown",xYt,!1),OC(n))}function cH(e,t){if((t==null?void 0:t.key)==="Enter"){const r=iH(e);if(!ZE(r,"color"))return;r.click();return}const n=oH(e);ZE(n,"text")&&(n.readOnly=!0,n.value=e.value,xs(n,"keydown",wYt,!1),OC(n))}function oUe(e){iUe(e);const t=e0(e);t.removeAttribute("style"),Fl(t,"min")&&t.style.setProperty("---size",`${Math.min(192,Math.max(e.scrollHeight,t.offsetHeight))}px`)}function RYt(){AYt(),CYt(),SYt(),kYt(),TYt(),DYt(),LYt()}function KTe(e){const t=e.target;!Ip(t,"input")&&!Ip(t,"select")||(t.type==="range"?(t.focus(),aUe(t)):sUe())}function FYt(e){if(!S$())return;const t=e.target,n=e0(t);Fl(n,"vertical")&&document.body.classList.add("no-scroll")}function $Yt(e){if(!S$())return;const t=e.target,n=e0(t);Fl(n,"vertical")&&document.body.classList.remove("no-scroll")}function sUe(){const e=document.body,t=ll(".slider > input[type=range]");t.length?xs(e,"input",KTe,!1):rH(e,"input",KTe,!1);for(let n=0;n<t.length;n++)aUe(t[n])}function MYt(){const e=getComputedStyle(document.documentElement).getPropertyValue("--size")||"16px";return e.includes("%")?parseInt(e)*16/100:e.includes("em")?parseInt(e)*16:parseInt(e)}function aUe(e){xs(e,"focus",FYt),xs(e,"blur",$Yt);const t=e0(e),n=Jm("span",t),r=ll("input",t);if(!r.length||!n)return;const i=MYt(),o=Fl(t,"max")?0:.25*i*100/r[0].offsetWidth,s=[],a=[];for(let p=0,h=r.length;p<h;p++){const g=parseFloat(r[p].min)||0,m=parseFloat(r[p].max)||100,y=parseFloat(r[p].value)||0,v=(y-g)*100/(m-g),x=o/2-o*v/100;s.push(v+x),a.push(y)}let l=s[0],u=0,f=100-u-l,c=a[0],d=a[1]||0;r.length>1&&(l=Math.abs(s[1]-s[0]),u=s[1]>s[0]?s[0]:s[1],f=100-u-l,d>c&&(c=a[1]||0,d=a[0])),t.style.setProperty("---start",`${u}%`),t.style.setProperty("---end",`${f}%`),t.style.setProperty("---value1",`'${c}'`),t.style.setProperty("---value2",`'${d}'`)}function OYt(){sUe()}const Au={light:"",dark:""};function FN(){var e;return(e=document==null?void 0:document.body)!=null&&e.classList.contains("dark")?"dark":"light"}function IYt(){if(Au.light&&Au.dark)return Au;const e=document.body,t=document.createElement("body");t.className="light",e.appendChild(t);const n=document.createElement("body");n.className="dark",e.appendChild(n);const r=getComputedStyle(t),i=getComputedStyle(n),o=["--primary","--on-primary","--primary-container","--on-primary-container","--secondary","--on-secondary","--secondary-container","--on-secondary-container","--tertiary","--on-tertiary","--tertiary-container","--on-tertiary-container","--error","--on-error","--error-container","--on-error-container","--background","--on-background","--surface","--on-surface","--surface-variant","--on-surface-variant","--outline","--outline-variant","--shadow","--scrim","--inverse-surface","--inverse-on-surface","--inverse-primary","--surface-dim","--surface-bright","--surface-container-lowest","--surface-container-low","--surface-container","--surface-container-high","--surface-container-highest"];for(let s=0,a=o.length;s<a;s++)Au.light+=o[s]+":"+r.getPropertyValue(o[s])+";",Au.dark+=o[s]+":"+i.getPropertyValue(o[s])+";";return e.removeChild(t),e.removeChild(n),Au}function NYt(e){const t=globalThis,n=document.body;if(!e||!t.materialDynamicColors)return IYt();const r=FN();return e.light&&e.dark?(Au.light=e.light,Au.dark=e.dark,n.setAttribute("style",e[r]),e):t.materialDynamicColors(e).then(i=>{const o=s=>{let a="";for(let l=0,u=Object.keys(s),f=u.length;l<f;l++){const c=u[l],d=s[c],p=c.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();a+="--"+p+":"+d+";"}return a};return Au.light=o(i.light),Au.dark=o(i.dark),n.setAttribute("style",Au[r]),Au})}function lUe(e){const t=globalThis,n=document.body;if(!n)return e;if(!e)return FN();e==="auto"&&(e=cYt()?"dark":"light"),n.classList.remove("light","dark"),n.classList.add(e);const r=e==="light"?Au.light:Au.dark;return t.materialDynamicColors&&n.setAttribute("style",r),FN()}const C3=[];function uUe(e){if(e.key==="Escape"){const t=e.currentTarget;fUe(t,t)}}function PYt(e){(Jm("[autofocus]",e)??e).focus()}function cUe(e,t){Gc(pYt(e.id),"active"),Gc(e,"active"),Gc(t,"active"),e.close(),C3.pop();const n=C3[C3.length-1];n?n.focus():S$()&&document.body.classList.remove("no-scroll")}async function BYt(e,t,n,r){!Ip(r,"button")&&!Fl(r,"button")&&!Fl(r,"chip")&&fm(r,"active"),fm(t,"active"),fm(e,"active"),n?e.showModal():e.show(),await rUe(90),n||xs(e,"keydown",uUe,!1),C3.push(e),S$()&&document.body.classList.add("no-scroll"),PYt(e)}function zYt(e){const t=e.currentTarget,n=oH(t);Ip(n,"dialog")&&cUe(n,t)}async function fUe(e,t){sH();let n=iH(t);const r=Fl(t,"active")||t.open,i=Fl(t,"modal");i||rH(t,"keydown",uUe,!1),Fl(n,"overlay")||(n=hYt({class:"overlay"}),dYt(n,t),await rUe(90)),i||xs(n,"click",zYt,!1),r?cUe(t,n):BYt(t,n,i,e)}let Z4;function dUe(e){rH(document.body,"click",dUe);const t=e.target,n=ll("menu.active");for(let r=0;r<n.length;r++)hUe(t,n[r],e)}function UYt(e){setTimeout(()=>{const t=Jm(".field > input",e);t?t.focus():e.focus()},90)}function hUe(e,t,n){Z4&&clearTimeout(Z4),Z4=setTimeout(()=>{xs(document.body,"click",dUe),Ip(document.activeElement,"input")||sH();const r=Fl(t,"active"),i=(n==null?void 0:n.target)===e,o=!!e.closest("menu");if(!r&&o||r&&i){Gc(t,"active");return}Gc(ll("menu.active"),"active"),fm(t,"active"),UYt(t)},90)}let W_;function jYt(e){const t=e.currentTarget;Gc(t,"active"),W_&&clearTimeout(W_)}function HYt(e,t){sH();const n=ll(".snackbar.active");for(let r=0;r<n.length;r++)Gc(n[r],"active");fm(e,"active"),xs(e,"click",jYt),W_&&clearTimeout(W_),t!==-1&&(W_=setTimeout(()=>{Gc(e,"active")},t??6e3))}function qYt(e){const t=e0(e);t&&Gc(ll(":scope > .page",t),"active"),fm(e,"active")}function GYt(e){WYt(e)}function WYt(e){const t=e.currentTarget,n=t.getBoundingClientRect(),r=Math.max(n.width,n.height),i=r/2,o=e.clientX-n.left-i,s=e.clientY-n.top-i,a=document.createElement("div");a.className="ripple-js";const l=document.createElement("div");l.style.inlineSize=l.style.blockSize=`${r}px`,l.style.left=`${o}px`,l.style.top=`${s}px`,l.addEventListener("animationend",()=>{a.remove()}),a.appendChild(l),t.appendChild(a)}function VYt(){const e=ll(".slow-ripple, .ripple, .fast-ripple");for(let t=0;t<e.length;t++)xs(e[t],"pointerdown",GYt)}const S3=globalThis;let Q4,J4;function ZTe(){Q4&&clearTimeout(Q4),Q4=setTimeout(async()=>await gUe(),180)}async function fH(e,t,n,r){if(!(!t&&(t=Jm(e.getAttribute("data-ui")),!t))){if(mYt(e),Ip(t,"dialog")){await fUe(e,t);return}if(Ip(t,"menu")){hUe(e,t,r);return}if(Fl(t,"snackbar")){HYt(t,n);return}if(Fl(t,"page")){qYt(t);return}if(Fl(t,"active")){Gc(e,"active"),Gc(t,"active");return}fm(t,"active")}}function YYt(e){fH(e.currentTarget,null,null,e)}function XYt(e){e.key==="Enter"&&fH(e.currentTarget,null,null,e)}function pUe(){S3.ui||J4||(J4=new MutationObserver(ZTe),J4.observe(document.body,{childList:!0,subtree:!0}),ZTe())}function KYt(){const e=ll("[data-ui]");for(let t=0,n=e.length;t<n;t++)xs(e[t],"click",YYt),Ip(e[t],"a")&&!e[t].getAttribute("href")&&xs(e[t],"keydown",XYt)}function gUe(e,t){if(e){if(e==="setup"){pUe();return}if(e==="guid")return fYt();if(e==="mode")return lUe(t);if(e==="theme")return NYt(t);const n=Jm(e);if(!n)return;fH(n,n,t)}KYt(),RYt(),OYt(),VYt()}function ZYt(){var e;if(S3.ui)return;const t=(e=S3.document)==null?void 0:e.body;t&&!t.classList.contains("dark")&&!t.classList.contains("light")&&lUe("auto"),pUe(),S3.ui=gUe}ZYt();const mUe=(e,t)=>{var r;let{privateFields:n=!0}=t;return n||(r=e==null?void 0:e.modules)==null||r.forEach(i=>{var o;(o=i==null?void 0:i.declarations)==null||o.forEach(s=>{Object.keys(s).forEach(a=>{Array.isArray(s[a])&&(s[a]=s[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),tqe(e)};mUe(CYe,{privateFields:!1});const QYt={parameters:{docs:{toc:!0,page:SYe,source:{transform:(e,t)=>{const n=t.undecoratedStoryFn(t);let r;const i={};return n.strings.map((o,s)=>{var f,c;const a=o.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(c=(f=o.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:f[0])==null?void 0:c.replaceAll(" ",""),u=n.values[s];l&&u&&(i[r]||(i[r]={}),i[r][l]=u)}).filter(o=>o),Object.keys(i).forEach(o=>{e=e.replace(`<${o}`,`<${o}
  ${Object.keys(i[o]).map((s,a)=>`.${s}='\${${typeof i[o][s]=="string"?i[o][s]:JSON.stringify(i[o][s])}}'`).join(`
  `)}
  `)}),e}}}}},nKt=Object.freeze(Object.defineProperty({__proto__:null,default:QYt,setCustomElementsManifestWithOptions:mUe},Symbol.toStringTag,{value:"Module"}));export{QXt as L,JXt as a,nKt as p};
