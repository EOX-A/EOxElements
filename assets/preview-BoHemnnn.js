const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-DDPT6DuL.js","./index-DuuuSFPv.js","./chunk-L4EGOTBX-BALMY2cf.js","./entry-preview-BErytJoa.js","./lit-element-Dh4_iwrW.js","./index-DrFu-skq.js","./index-Ca-YMdQn.js","./index-DMRwGSq2.js","./iframe-C3OlDM4p.js","./index-DPS9-N-h.js","./directive-DUGPADuw.js","./main-Dj_s0YWX.js","./core-C4kcdPvA.js","./webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var JBe=Object.defineProperty;var Ove=e=>{throw TypeError(e)};var QBe=(e,t,n)=>t in e?JBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tn=(e,t,n)=>QBe(e,typeof t!="symbol"?t+"":t,n),nF=(e,t,n)=>t.has(e)||Ove("Cannot "+n);var $t=(e,t,n)=>(nF(e,t,"read from private field"),n?n.call(e):t.get(e)),gn=(e,t,n)=>t.has(e)?Ove("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ui=(e,t,n,r)=>(nF(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),dn=(e,t,n)=>(nF(e,t,"access private method"),n);import{s as eze}from"./chunk-L4EGOTBX-BALMY2cf.js";import{m as dI,p as tze,v as ng,r as iw,M as rF,f as nze}from"./entry-preview-BErytJoa.js";import{g as sa,j as bu,c as Xi,a as LCe}from"./index-DuuuSFPv.js";import{useMDXComponents as RCe}from"./index-Ca-YMdQn.js";import{c as rze,e as ize,S as sze,P as oze,f as aze,h as lze,i as uze}from"./index-DMRwGSq2.js";import{r as Zr,x as Ke,E as qr,T as fv,i as hI,b as Fy}from"./lit-element-Dh4_iwrW.js";import{c as q_,n as cze,d as fze,I as f3,R as FCe,r as dze,g as hze,h as pze,j as mze,C as gze,k as yze,m as Mve,u as $ve,v as pI,w as wg,x as V4,y as ku,z as W4,A as mI,B as vze,D as bze,E as xze,F as wze,i as _ze,G as Eze,H as Sze,J as Aze,K as Cze,L as kze,M as Tze,N as gI,O as Dze,p as yI,P as Ive,Q as OCe,S as vI,T as H_,U as lD,V as Qg,W as Lze,X as Rze,Y as Fze,Z as MCe,_ as uD,$ as cD,a0 as Oze,a1 as Mze,a2 as $ze,a3 as Ize,a4 as Pve,a5 as Pze,a6 as Nze,a7 as Bze,f as zze,a8 as jze,l as Uze,a9 as qze,aa as Hze,ab as Gze,ac as Vze,s as $Ce,ad as Wze,ae as Yze,af as Xze,ag as Zze,q as Kze,t as Jze,o as ICe,ah as Qze,ai as eje,aj as d3,ak as tje,al as nje,e as tE,a as fD,b as sp}from"./directive-DUGPADuw.js";import{m as G_,g as rje,C as ije,a as oi,b as h3,s as sje,S as V_,V as bI,d as Nve,c as y_,T as Bve,F as Y4,R as _g,e as nE,f as oje,w as aje,h as lje,i as e0,j as W_,k as dD,l as Fp,n as wC,o as au,p as Zv,P as gc,q as eu,r as p3,t as As,u as Kv,v as dv,L as $f,I as PCe,x as Eg,J as uje,y as cje,z as Oo,A as fje,B as X4,D as dje,M as U1,E as hD,G as rE,H as iE,X as pD,K as Tn,N as Rn,O as Rt,Q as xI,U as m3,W as hje,Y as pje,Z as Op,_ as g3,$ as NCe,a0 as er,a1 as Ge,a2 as yr,a3 as Oi,a4 as tu,a5 as q1,a6 as vp,a7 as Y_,a8 as BCe,a9 as Zt,aa as y3,ab as v3,ac as Ue,ad as Dt,ae as mD,af as Ds,ag as Ea,ah as b3,ai as zCe,aj as rg,ak as mje,al as wI,am as jCe,an as Rd,ao as Dc,ap as mi,aq as gje,ar as yje,as as jp,at as zve,au as yc,av as gf,aw as vje,ax as _I,ay as gD,az as bje,aA as UCe,aB as xje,aC as wje,aD as Ei,aE as qCe,aF as Ko,aG as EI,aH as x3,aI as SI,aJ as _je,aK as Eje,aL as Z4,aM as iF,aN as Sje,aO as yD,aP as X_,aQ as bp,aR as xp,aS as Up,aT as vD,aU as AI,aV as rh,aW as CI,aX as HCe,aY as Aje,aZ as Cl,a_ as Ts,a$ as kI,b0 as Ec,b1 as TI,b2 as GCe,b3 as jve,b4 as t0,b5 as Uve,b6 as tv,b7 as Cje,b8 as K4,b9 as VCe,ba as kje,bb as qve,bc as Tje,bd as DI,be as Dje,bf as WCe,bg as Z_,bh as Lje,bi as Rje,bj as Si,bk as YCe,bl as K_,bm as kl,bn as qp,bo as H1,bp as Fje,bq as ur,br as Oje,bs as Mje,bt as XCe,bu as Hp,bv as $je,bw as Ije,bx as Pje,by as Nje,bz as LI,bA as Bje,bB as zje,bC as jje,bD as ZCe,bE as Uje,bF as w3,bG as RI,bH as _3,bI as KCe,bJ as gh,bK as sE,bL as oE,bM as FI,bN as OI,bO as J_,bP as qje,bQ as Hje,bR as Gje,bS as bD,bT as Vje,bU as Wje,bV as Yje,bW as sF,bX as Q_,bY as xD,bZ as Xje,b_ as Zje,b$ as Hve,c0 as Gve,c1 as Kje,c2 as Vve,c3 as Jje,c4 as Qje,c5 as J4,c6 as JCe,c7 as eUe,c8 as G1,c9 as QCe,ca as Wve,cb as E3,cc as Yve,cd as L0,ce as MI,cf as tUe,cg as e3e,ch as wD,ci as nUe,cj as $I,ck as t3e,cl as rUe,cm as iUe,cn as sUe,co as oUe,cp as n3e,cq as aUe,cr as lUe,cs as uUe,ct as cUe,cu as fUe,cv as r3e,cw as dUe,cx as i3e,cy as hUe,cz as e2,cA as Q4,cB as pUe,cC as mUe,cD as e6,cE as s3e,cF as gUe,cG as yUe}from"./main-Dj_s0YWX.js";import{A as o3e,J as hv,S as vUe}from"./core-C4kcdPvA.js";import{_ as um}from"./iframe-C3OlDM4p.js";const Xve={duration:750},Zve={type:"FeatureCollection",features:[]};function bUe(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function xUe(e,t){const n=bUe(e,t);return n&&Math.sqrt(n)}class Ja{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function wUe(e,t){return Array.from(t,n=>e[n])}function _Ue(e=q_){if(e===q_)return a3e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function a3e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function zg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function t6(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function l3e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?a3e:_Ue(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),c=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*c*(l-c)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*c/l+d)),p=Math.min(r,Math.floor(t+(l-u)*c/l+d));l3e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(sw(e,n,t),i(e[r],s)>0&&sw(e,n,r);o<a;){for(sw(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?sw(e,n,a):(++a,sw(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function sw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function n6(e,t,n){if(e=Float64Array.from(cze(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return t6(e);if(t>=1)return zg(e);var r,i=(r-1)*t,s=Math.floor(i),o=zg(l3e(e,s).subarray(0,s+1)),a=t6(e.subarray(s+1));return o+(a-o)*(i-s)}}function u3e(e,t,n=fze){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function EUe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function c3e(e,t){return n6(e,.5,t)}function*SUe(e){for(const t of e)yield*t}function f3e(e){return Array.from(SUe(e))}function Kl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function d3e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function AUe(e,...t){e=new f3(e),t=t.map(CUe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function CUe(e){return e instanceof f3?e:new f3(e)}function kUe(...e){const t=new f3;for(const n of e)for(const r of n)t.add(r);return t}var h3e=-.14861,II=1.78277,PI=-.29227,_D=-.90649,t2=1.97294,Kve=t2*_D,Jve=t2*II,Qve=II*PI-_D*h3e;function TUe(e){if(e instanceof jg)return new jg(e.h,e.s,e.l,e.opacity);e instanceof FCe||(e=dze(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Qve*r+Kve*t-Jve*n)/(Qve+Kve-Jve),s=r-i,o=(t2*(n-i)-PI*s)/_D,a=Math.sqrt(o*o+s*s)/(t2*i*(1-i)),l=a?Math.atan2(o,s)*yze-120:NaN;return new jg(l<0?l+360:l,a,i,e.opacity)}function r6(e,t,n,r){return arguments.length===1?TUe(e):new jg(e,t,n,r??1)}function jg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hze(jg,r6,pze(gze,{brighter(e){return e=e==null?Mve:Math.pow(Mve,e),new jg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$ve:Math.pow($ve,e),new jg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*mze,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new FCe(255*(t+n*(h3e*r+II*i)),255*(t+n*(PI*r+_D*i)),255*(t+n*(t2*r)),this.opacity)}}));function DUe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function LUe(e,t){var n=pI(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var e1e=180/Math.PI,i6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function p3e(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*e1e,skewX:Math.atan(l)*e1e,scaleX:o,scaleY:a}}var QS;function RUe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?i6:p3e(t.a,t.b,t.c,t.d,t.e,t.f)}function FUe(e){return e==null||(QS||(QS=document.createElementNS("http://www.w3.org/2000/svg","g")),QS.setAttribute("transform",e),!(e=QS.transform.baseVal.consolidate()))?i6:(e=e.matrix,p3e(e.a,e.b,e.c,e.d,e.e,e.f))}function m3e(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,f,c,d,h,p){if(u!==c||f!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:wg(u,c)},{i:g-2,x:wg(f,d)})}else(c||d)&&h.push("translate("+c+t+d+n)}function o(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:wg(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:wg(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,h,p){if(u!==c||f!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:wg(u,c)},{i:g-2,x:wg(f,d)})}else(c!==1||d!==1)&&h.push(i(h)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=e(u),f=e(f),s(u.translateX,u.translateY,f.translateX,f.translateY,c,d),o(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var p=-1,g=d.length,v;++p<g;)c[(v=d[p]).i]=v.x(h);return c.join("")}}}var OUe=m3e(RUe,"px, ","px)","deg)"),MUe=m3e(FUe,", ",")",")"),$Ue=1e-12;function t1e(e){return((e=Math.exp(e))+1/e)/2}function IUe(e){return((e=Math.exp(e))-1/e)/2}function PUe(e){return((e=Math.exp(2*e))-1)/(e+1)}const NUe=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],f=o[0],c=o[1],d=o[2],h=f-a,p=c-l,g=h*h+p*p,v,x;if(g<$Ue)x=Math.log(d/u)/t,v=function(D){return[a+D*h,l+D*p,u*Math.exp(t*D*x)]};else{var y=Math.sqrt(g),w=(d*d-u*u+r*g)/(2*u*n*y),_=(d*d-u*u-r*g)/(2*d*n*y),A=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(_*_+1)-_);x=(T-A)/t,v=function(D){var k=D*x,R=t1e(A),O=u/(n*y)*(R*PUe(t*k+A)-IUe(A));return[a+O*h,l+O*p,u*R/t1e(t*k+A)]}}return v.duration=x*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function g3e(e){return function(t,n){var r=e((t=V4(t)).h,(n=V4(n)).h),i=ku(t.s,n.s),s=ku(t.l,n.l),o=ku(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const BUe=g3e(pI);var zUe=g3e(ku);function jUe(e,t){var n=ku((e=W4(e)).l,(t=W4(t)).l),r=ku(e.a,t.a),i=ku(e.b,t.b),s=ku(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function y3e(e){return function t(n){n=+n;function r(i,s){var o=e((i=r6(i)).h,(s=r6(s)).h),a=ku(i.s,s.s),l=ku(i.l,s.l),u=ku(i.opacity,s.opacity);return function(f){return i.h=o(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}const UUe=y3e(pI);var qUe=y3e(ku);function HUe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const GUe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:mI,interpolateArray:vze,interpolateBasis:bze,interpolateBasisClosed:xze,interpolateCubehelix:UUe,interpolateCubehelixLong:qUe,interpolateDate:wze,interpolateDiscrete:DUe,interpolateHcl:_ze,interpolateHclLong:Eze,interpolateHsl:BUe,interpolateHslLong:zUe,interpolateHue:LUe,interpolateLab:jUe,interpolateNumber:wg,interpolateNumberArray:Sze,interpolateObject:Aze,interpolateRgb:Cze,interpolateRgbBasis:kze,interpolateRgbBasisClosed:Tze,interpolateRound:gI,interpolateString:Dze,interpolateTransformCss:OUe,interpolateTransformSvg:MUe,interpolateZoom:NUe,piecewise:yI,quantize:HUe},Symbol.toStringTag,{value:"Module"}));function v3e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Ive),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return v3e(e).unknown(t)},e=arguments.length?Array.from(e,Ive):[0,1],OCe(n)}function b3e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=u3e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[H_(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(q_),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return b3e().domain(e).range(t).unknown(r)},vI.apply(s,arguments)}const oF=new Date,aF=new Date;function vo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>vo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(oF.setTime(+s),aF.setTime(+o),e(oF),e(aF),Math.floor(n(oF,aF))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Jv=vo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Jv);Jv.range;const Bd=1e3,Tu=Bd*60,zd=Tu*60,ih=zd*24,NI=ih*7,n1e=ih*30,lF=ih*365,jd=vo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bd)},(e,t)=>(t-e)/Bd,e=>e.getUTCSeconds());jd.range;const ED=vo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bd)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getMinutes());ED.range;const SD=vo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getUTCMinutes());SD.range;const AD=vo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bd-e.getMinutes()*Tu)},(e,t)=>{e.setTime(+e+t*zd)},(e,t)=>(t-e)/zd,e=>e.getHours());AD.range;const CD=vo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zd)},(e,t)=>(t-e)/zd,e=>e.getUTCHours());CD.range;const Yd=vo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tu)/ih,e=>e.getDate()-1);Yd.range;const Mp=vo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ih,e=>e.getUTCDate()-1);Mp.range;const x3e=vo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ih,e=>Math.floor(e/ih));x3e.range;function R0(e){return vo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tu)/NI)}const V1=R0(0),S3=R0(1),VUe=R0(2),WUe=R0(3),Qv=R0(4),YUe=R0(5),XUe=R0(6);V1.range;S3.range;VUe.range;WUe.range;Qv.range;YUe.range;XUe.range;function F0(e){return vo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/NI)}const W1=F0(0),A3=F0(1),ZUe=F0(2),KUe=F0(3),e1=F0(4),JUe=F0(5),QUe=F0(6);W1.range;A3.range;ZUe.range;KUe.range;e1.range;JUe.range;QUe.range;const n2=vo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());n2.range;const r2=vo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());r2.range;const If=vo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());If.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});If.range;const Pf=vo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Pf.range;function w3e(e,t,n,r,i,s){const o=[[jd,1,Bd],[jd,5,5*Bd],[jd,15,15*Bd],[jd,30,30*Bd],[s,1,Tu],[s,5,5*Tu],[s,15,15*Tu],[s,30,30*Tu],[i,1,zd],[i,3,3*zd],[i,6,6*zd],[i,12,12*zd],[r,1,ih],[r,2,2*ih],[n,1,NI],[t,1,n1e],[t,3,3*n1e],[e,1,lF]];function a(u,f,c){const d=f<u;d&&([u,f]=[f,u]);const h=c&&typeof c.range=="function"?c:l(u,f,c),p=h?h.range(u,+f+1):[];return d?p.reverse():p}function l(u,f,c){const d=Math.abs(f-u)/c,h=lD(([,,v])=>v).right(o,d);if(h===o.length)return e.every(Qg(u/lF,f/lF,c));if(h===0)return Jv.every(Math.max(Qg(u,f,c),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[eqe,tqe]=w3e(Pf,r2,W1,x3e,CD,SD),[nqe,rqe]=w3e(If,n2,V1,Yd,AD,ED);function uF(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cF(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ow(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _3e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=aw(i),f=lw(i),c=aw(s),d=lw(s),h=aw(o),p=lw(o),g=aw(a),v=lw(a),x=aw(l),y=lw(l),w={a:q,A:Y,b:X,B:te,c:null,d:l1e,e:l1e,f:Cqe,g:Iqe,G:Nqe,H:Eqe,I:Sqe,j:Aqe,L:E3e,m:kqe,M:Tqe,p:le,q:ee,Q:f1e,s:d1e,S:Dqe,u:Lqe,U:Rqe,V:Fqe,w:Oqe,W:Mqe,x:null,X:null,y:$qe,Y:Pqe,Z:Bqe,"%":c1e},_={a:z,A:he,b:de,B:ze,c:null,d:u1e,e:u1e,f:qqe,g:Qqe,G:tHe,H:zqe,I:jqe,j:Uqe,L:A3e,m:Hqe,M:Gqe,p:He,q:je,Q:f1e,s:d1e,S:Vqe,u:Wqe,U:Yqe,V:Xqe,w:Zqe,W:Kqe,x:null,X:null,y:Jqe,Y:eHe,Z:nHe,"%":c1e},A={a:O,A:B,b:K,B:L,c:$,d:o1e,e:o1e,f:bqe,g:s1e,G:i1e,H:a1e,I:a1e,j:mqe,L:vqe,m:pqe,M:gqe,p:R,q:hqe,Q:wqe,s:_qe,S:yqe,u:lqe,U:uqe,V:cqe,w:aqe,W:fqe,x:I,X:U,y:s1e,Y:i1e,Z:dqe,"%":xqe};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),_.x=T(n,_),_.X=T(r,_),_.c=T(t,_);function T(we,Ie){return function(qe){var Pe=[],At=-1,dt=0,nn=we.length,Wt,Mn,Ze;for(qe instanceof Date||(qe=new Date(+qe));++At<nn;)we.charCodeAt(At)===37&&(Pe.push(we.slice(dt,At)),(Mn=r1e[Wt=we.charAt(++At)])!=null?Wt=we.charAt(++At):Mn=Wt==="e"?" ":"0",(Ze=Ie[Wt])&&(Wt=Ze(qe,Mn)),Pe.push(Wt),dt=At+1);return Pe.push(we.slice(dt,At)),Pe.join("")}}function D(we,Ie){return function(qe){var Pe=ow(1900,void 0,1),At=k(Pe,we,qe+="",0),dt,nn;if(At!=qe.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if(Ie&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(dt=cF(ow(Pe.y,0,1)),nn=dt.getUTCDay(),dt=nn>4||nn===0?A3.ceil(dt):A3(dt),dt=Mp.offset(dt,(Pe.V-1)*7),Pe.y=dt.getUTCFullYear(),Pe.m=dt.getUTCMonth(),Pe.d=dt.getUTCDate()+(Pe.w+6)%7):(dt=uF(ow(Pe.y,0,1)),nn=dt.getDay(),dt=nn>4||nn===0?S3.ceil(dt):S3(dt),dt=Yd.offset(dt,(Pe.V-1)*7),Pe.y=dt.getFullYear(),Pe.m=dt.getMonth(),Pe.d=dt.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),nn="Z"in Pe?cF(ow(Pe.y,0,1)).getUTCDay():uF(ow(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(nn+5)%7:Pe.w+Pe.U*7-(nn+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,cF(Pe)):uF(Pe)}}function k(we,Ie,qe,Pe){for(var At=0,dt=Ie.length,nn=qe.length,Wt,Mn;At<dt;){if(Pe>=nn)return-1;if(Wt=Ie.charCodeAt(At++),Wt===37){if(Wt=Ie.charAt(At++),Mn=A[Wt in r1e?Ie.charAt(At++):Wt],!Mn||(Pe=Mn(we,qe,Pe))<0)return-1}else if(Wt!=qe.charCodeAt(Pe++))return-1}return Pe}function R(we,Ie,qe){var Pe=u.exec(Ie.slice(qe));return Pe?(we.p=f.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function O(we,Ie,qe){var Pe=h.exec(Ie.slice(qe));return Pe?(we.w=p.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function B(we,Ie,qe){var Pe=c.exec(Ie.slice(qe));return Pe?(we.w=d.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function K(we,Ie,qe){var Pe=x.exec(Ie.slice(qe));return Pe?(we.m=y.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function L(we,Ie,qe){var Pe=g.exec(Ie.slice(qe));return Pe?(we.m=v.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function $(we,Ie,qe){return k(we,t,Ie,qe)}function I(we,Ie,qe){return k(we,n,Ie,qe)}function U(we,Ie,qe){return k(we,r,Ie,qe)}function q(we){return o[we.getDay()]}function Y(we){return s[we.getDay()]}function X(we){return l[we.getMonth()]}function te(we){return a[we.getMonth()]}function le(we){return i[+(we.getHours()>=12)]}function ee(we){return 1+~~(we.getMonth()/3)}function z(we){return o[we.getUTCDay()]}function he(we){return s[we.getUTCDay()]}function de(we){return l[we.getUTCMonth()]}function ze(we){return a[we.getUTCMonth()]}function He(we){return i[+(we.getUTCHours()>=12)]}function je(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ie=T(we+="",w);return Ie.toString=function(){return we},Ie},parse:function(we){var Ie=D(we+="",!1);return Ie.toString=function(){return we},Ie},utcFormat:function(we){var Ie=T(we+="",_);return Ie.toString=function(){return we},Ie},utcParse:function(we){var Ie=D(we+="",!0);return Ie.toString=function(){return we},Ie}}}var r1e={"-":"",_:" ",0:"0"},$o=/^\s*\d+/,iqe=/^%/,sqe=/[\\^$*+?|[\]().{}]/g;function ai(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function oqe(e){return e.replace(sqe,"\\$&")}function aw(e){return new RegExp("^(?:"+e.map(oqe).join("|")+")","i")}function lw(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function aqe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function lqe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function uqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function cqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function fqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function i1e(e,t,n){var r=$o.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function s1e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dqe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hqe(e,t,n){var r=$o.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function pqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function o1e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function mqe(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function a1e(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function gqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function yqe(e,t,n){var r=$o.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vqe(e,t,n){var r=$o.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bqe(e,t,n){var r=$o.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xqe(e,t,n){var r=iqe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wqe(e,t,n){var r=$o.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function _qe(e,t,n){var r=$o.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function l1e(e,t){return ai(e.getDate(),t,2)}function Eqe(e,t){return ai(e.getHours(),t,2)}function Sqe(e,t){return ai(e.getHours()%12||12,t,2)}function Aqe(e,t){return ai(1+Yd.count(If(e),e),t,3)}function E3e(e,t){return ai(e.getMilliseconds(),t,3)}function Cqe(e,t){return E3e(e,t)+"000"}function kqe(e,t){return ai(e.getMonth()+1,t,2)}function Tqe(e,t){return ai(e.getMinutes(),t,2)}function Dqe(e,t){return ai(e.getSeconds(),t,2)}function Lqe(e){var t=e.getDay();return t===0?7:t}function Rqe(e,t){return ai(V1.count(If(e)-1,e),t,2)}function S3e(e){var t=e.getDay();return t>=4||t===0?Qv(e):Qv.ceil(e)}function Fqe(e,t){return e=S3e(e),ai(Qv.count(If(e),e)+(If(e).getDay()===4),t,2)}function Oqe(e){return e.getDay()}function Mqe(e,t){return ai(S3.count(If(e)-1,e),t,2)}function $qe(e,t){return ai(e.getFullYear()%100,t,2)}function Iqe(e,t){return e=S3e(e),ai(e.getFullYear()%100,t,2)}function Pqe(e,t){return ai(e.getFullYear()%1e4,t,4)}function Nqe(e,t){var n=e.getDay();return e=n>=4||n===0?Qv(e):Qv.ceil(e),ai(e.getFullYear()%1e4,t,4)}function Bqe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ai(t/60|0,"0",2)+ai(t%60,"0",2)}function u1e(e,t){return ai(e.getUTCDate(),t,2)}function zqe(e,t){return ai(e.getUTCHours(),t,2)}function jqe(e,t){return ai(e.getUTCHours()%12||12,t,2)}function Uqe(e,t){return ai(1+Mp.count(Pf(e),e),t,3)}function A3e(e,t){return ai(e.getUTCMilliseconds(),t,3)}function qqe(e,t){return A3e(e,t)+"000"}function Hqe(e,t){return ai(e.getUTCMonth()+1,t,2)}function Gqe(e,t){return ai(e.getUTCMinutes(),t,2)}function Vqe(e,t){return ai(e.getUTCSeconds(),t,2)}function Wqe(e){var t=e.getUTCDay();return t===0?7:t}function Yqe(e,t){return ai(W1.count(Pf(e)-1,e),t,2)}function C3e(e){var t=e.getUTCDay();return t>=4||t===0?e1(e):e1.ceil(e)}function Xqe(e,t){return e=C3e(e),ai(e1.count(Pf(e),e)+(Pf(e).getUTCDay()===4),t,2)}function Zqe(e){return e.getUTCDay()}function Kqe(e,t){return ai(A3.count(Pf(e)-1,e),t,2)}function Jqe(e,t){return ai(e.getUTCFullYear()%100,t,2)}function Qqe(e,t){return e=C3e(e),ai(e.getUTCFullYear()%100,t,2)}function eHe(e,t){return ai(e.getUTCFullYear()%1e4,t,4)}function tHe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?e1(e):e1.ceil(e),ai(e.getUTCFullYear()%1e4,t,4)}function nHe(){return"+0000"}function c1e(){return"%"}function f1e(e){return+e}function d1e(e){return Math.floor(+e/1e3)}var Oy,BI,k3e,zI,T3e;rHe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rHe(e){return Oy=_3e(e),BI=Oy.format,k3e=Oy.parse,zI=Oy.utcFormat,T3e=Oy.utcParse,Oy}function iHe(e){return new Date(e)}function sHe(e){return e instanceof Date?+e:+new Date(+e)}function jI(e,t,n,r,i,s,o,a,l,u){var f=Lze(),c=f.invert,d=f.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),y=u("%b %d"),w=u("%B"),_=u("%Y");function A(T){return(l(T)<T?h:a(T)<T?p:o(T)<T?g:s(T)<T?v:r(T)<T?i(T)<T?x:y:n(T)<T?w:_)(T)}return f.invert=function(T){return new Date(c(T))},f.domain=function(T){return arguments.length?d(Array.from(T,sHe)):d().map(iHe)},f.ticks=function(T){var D=d();return e(D[0],D[D.length-1],T??10)},f.tickFormat=function(T,D){return D==null?A:u(D)},f.nice=function(T){var D=d();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?d(Rze(D,T)):f},f.copy=function(){return Fze(f,jI(e,t,n,r,i,s,o,a,l,u))},f}function oHe(){return vI.apply(jI(nqe,rqe,If,n2,V1,Yd,AD,ED,jd,BI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aHe(){return vI.apply(jI(eqe,tqe,Pf,r2,W1,Mp,CD,SD,jd,zI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kD(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=MCe,f,c=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-s)*(r*g<r*s?a:l),u(c?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=f(e=+e),s=f(t=+t),o=f(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(c=!!g,h):c},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(v){var x,y,w;return arguments.length?([x,y,w]=v,u=yI(g,[x,y,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(mI),h.rangeRound=p(gI),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return f=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function D3e(){var e=OCe(kD()(MCe));return e.copy=function(){return uD(e,D3e())},cD.apply(e,arguments)}function L3e(){var e=Oze(kD()).domain([.1,1,10]);return e.copy=function(){return uD(e,L3e()).base(e.base())},cD.apply(e,arguments)}function R3e(){var e=Mze(kD());return e.copy=function(){return uD(e,R3e()).constant(e.constant())},cD.apply(e,arguments)}function UI(){var e=$ze(kD());return e.copy=function(){return uD(e,UI()).exponent(e.exponent())},cD.apply(e,arguments)}function lHe(){return UI.apply(null,arguments).exponent(.5)}function uHe(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const t=e.inversePixelTransform[0],n=e.inversePixelTransform[1],r=Math.sqrt(t*t+n*n),i=e.frameState,s=G_(e.inversePixelTransform.slice(),i.coordinateToPixelTransform),o=rje(i.viewState.resolution,r);let a;return new ije(e.context,r,i.extent,s,i.viewState.rotation,o,a)}function F3e(e,t,n){const r=[];let i=e(0),s=e(1),o=t(i),a=t(s);const l=[s,i],u=[a,o],f=[1,0],c={};let d=1e5,h,p,g,v,x,y;for(;--d>0&&f.length>0;)g=f.pop(),i=l.pop(),o=u.pop(),y=g.toString(),y in c||(r.push(o[0],o[1]),c[y]=!0),v=f.pop(),s=l.pop(),a=u.pop(),x=(g+v)/2,h=e(x),p=t(h),sje(p[0],p[1],o[0],o[1],a[0],a[1])<n?(r.push(a[0],a[1]),y=v.toString(),c[y]=!0):(f.push(v,x,x,g),u.push(a,p,p,o),l.push(s,h,h,i));return r}function cHe(e,t,n,r,i){const s=oi("EPSG:4326");return F3e(function(o){return[e,t+(n-t)*o]},h3(s,r),i)}function fHe(e,t,n,r,i){const s=oi("EPSG:4326");return F3e(function(o){return[t+(n-t)*o,e]},h3(s,r),i)}const dHe=new V_({color:"rgba(0,0,0,0.2)"}),hHe=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];let pHe=class extends bI{constructor(t){t=t||{};const n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,super(n),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:dHe,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?Nve.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?Nve.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new y_({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Bve({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Y4({color:"rgba(0,0,0,1)"}),stroke:new V_({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const i=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new y_({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Bve({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Y4({color:"rgba(0,0,0,1)"}),stroke:new V_({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const i=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(_g.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:hHe,this.setSource(new nE({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new oje,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new y_({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,n){let r=t.slice();return this.projection_&&this.getSource().getWrapX()&&aje(r,this.projection_),this.loadedExtent_&&(lje(this.loadedExtent_,r,n)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(t,n,r){this.loadedExtent_=t;const i=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=e0(s,t);if(this.renderedExtent_&&W_(this.renderedExtent_,o)&&this.renderedResolution_===n||(this.renderedExtent_=o,this.renderedResolution_=n,dD(o)))return;const a=Fp(o),l=n*n/4;(!this.projection_||!wC(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,n,l);let f=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(f+=this.meridians_.length),this.parallelsLabels_&&(f+=this.parallels_.length);let c;for(;f>this.featurePool_.length;)c=new au,this.featurePool_.push(c);const d=i.getFeaturesCollection();d.clear();let h=0,p,g;for(p=0,g=this.meridians_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.meridians_[p]),c.setStyle(this.lineStyle_),d.push(c);for(p=0,g=this.parallels_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.parallels_[p]),c.setStyle(this.lineStyle_),d.push(c)}addMeridian_(t,n,r,i,s,o){const a=this.getMeridian_(t,n,r,i,o);if(Zv(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new gc([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(t,n,r,i,s,o){const a=this.getParallel_(t,n,r,i,o);if(Zv(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new gc([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(t){const n=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,i=t.frameState.size,s=t.frameState.extent,o=Fp(s);let a=s;if(n){const p=i[0]*r,g=i[1]*r;a=[o[0]-p/2,o[1]-g/2,o[0]+p/2,o[1]+g/2]}let l=0,u=0,f=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),d=eu(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!p3(c,s)){l=Math.floor((s[0]-c[0])/d),u=Math.ceil((s[2]-c[2])/d);const p=Math.abs(n)>Math.PI/2;f=f!==p}const h=uHe(t);for(let p=l;p<=u;++p){let g=this.meridians_.length+this.parallels_.length,v,x,y,w;if(this.meridiansLabels_)for(x=0,y=this.meridiansLabels_.length;x<y;++x){const _=this.meridians_[x];if(!n&&p===0)w=this.getMeridianPoint_(_,s,x);else{const A=_.clone();A.translate(p*d,0),A.rotate(-n,o),w=this.getMeridianPoint_(A,a,x),w.rotate(n,o)}v=this.featurePool_[g++],v.setGeometry(w),v.set("graticule_label",this.meridiansLabels_[x].text),h.drawFeature(v,this.lonLabelStyle_(v))}if(this.parallelsLabels_&&(p===l&&f||p===u&&!f))for(x=0,y=this.parallels_.length;x<y;++x){const _=this.parallels_[x];if(!n&&p===0)w=this.getParallelPoint_(_,s,x);else{const A=_.clone();A.translate(p*d,0),A.rotate(-n,o),w=this.getParallelPoint_(A,a,x),w.rotate(n,o)}v=this.featurePool_[g++],v.setGeometry(w),v.set("graticule_label",this.parallelsLabels_[x].text),h.drawFeature(v,this.latLabelStyle_(v))}}}createGraticule_(t,n,r,i){const s=this.getInterval_(r);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=eu(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!p3(a,t)&&(eu(t)>=l?(t[0]=a[0],t[2]=a[2]):o=!0);const u=[As(n[0],this.minX_,this.maxX_),As(n[1],this.minY_,this.maxY_)],f=this.toLonLatTransform_(u);isNaN(f[1])&&(f[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=As(f[0],this.minLon_,this.maxLon_),d=As(f[1],this.minLat_,this.maxLat_);const h=this.maxLines_;let p,g,v,x,y=t;o||(y=[As(t[0],this.minX_,this.maxX_),As(t[1],this.minY_,this.maxY_),As(t[2],this.minX_,this.maxX_),As(t[3],this.minY_,this.maxY_)]);const w=Kv(y,this.toLonLatTransform_,void 0,8);let _=w[3],A=w[2],T=w[1],D=w[0];if(o||(dv(y,this.bottomLeft_)&&(D=this.minLon_,T=this.minLat_),dv(y,this.bottomRight_)&&(A=this.maxLon_,T=this.minLat_),dv(y,this.topLeft_)&&(D=this.minLon_,_=this.maxLat_),dv(y,this.topRight_)&&(A=this.maxLon_,_=this.maxLat_),_=As(_,d,this.maxLat_),A=As(A,c,this.maxLon_),T=As(T,this.minLat_,d),D=As(D,this.minLon_,c)),c=Math.floor(c/s)*s,x=As(c,this.minLon_,this.maxLon_),g=this.addMeridian_(x,T,_,i,t,0),p=0,o)for(;(x-=s)>=D&&p++<h;)g=this.addMeridian_(x,T,_,i,t,g);else for(;x!=this.minLon_&&p++<h;)x=Math.max(x-s,this.minLon_),g=this.addMeridian_(x,T,_,i,t,g);if(x=As(c,this.minLon_,this.maxLon_),p=0,o)for(;(x+=s)<=A&&p++<h;)g=this.addMeridian_(x,T,_,i,t,g);else for(;x!=this.maxLon_&&p++<h;)x=Math.min(x+s,this.maxLon_),g=this.addMeridian_(x,T,_,i,t,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/s)*s,v=As(d,this.minLat_,this.maxLat_),g=this.addParallel_(v,D,A,i,t,0),p=0;v!=this.minLat_&&p++<h;)v=Math.max(v-s,this.minLat_),g=this.addParallel_(v,D,A,i,t,g);for(v=As(d,this.minLat_,this.maxLat_),p=0;v!=this.maxLat_&&p++<h;)v=Math.min(v+s,this.maxLat_),g=this.addParallel_(v,D,A,i,t,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(t){const n=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let i=-1;const s=Math.pow(this.targetSize_*t,2),o=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const f=As(this.intervals_[l]/2,0,90),c=As(r,-90+f,90-f);if(o[0]=n-f,o[1]=c-f,a[0]=n+f,a[1]=c+f,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;i=this.intervals_[l]}return i}getMeridian_(t,n,r,i,s){const o=cHe(t,n,r,this.projection_,i);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new $f(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(t,n,r){const i=t.getFlatCoordinates();let s=1,o=i.length-1;i[s]>i[o]&&(s=o,o=1);const a=Math.max(n[1],i[s]),l=Math.min(n[3],i[o]),u=As(n[1]+Math.abs(n[1]-n[3])*this.lonLabelPosition_,a,l),c=[i[s-1]+(i[o-1]-i[s-1])*(u-i[s])/(i[o]-i[s]),u],d=this.meridiansLabels_[r].geom;return d.setCoordinates(c),d}getMeridians(){return this.meridians_}getParallel_(t,n,r,i,s){const o=fHe(t,n,r,this.projection_,i);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new $f(o,"XY"),a}getParallelPoint_(t,n,r){const i=t.getFlatCoordinates();let s=0,o=i.length-2;i[s]>i[o]&&(s=o,o=0);const a=Math.max(n[0],i[s]),l=Math.min(n[2],i[o]),u=As(n[0]+Math.abs(n[0]-n[2])*this.latLabelPosition_,a,l),f=i[s+1]+(i[o+1]-i[s+1])*(u-i[s])/(i[o]-i[s]),c=[u,f],d=this.parallelsLabels_[r].geom;return d.setCoordinates(c),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){const n=oi("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const i=h3(t,n);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const f=i(a,l,u);for(let c=0,d=f.length;c<d;c+=u)f[c]<o&&(f[c]+=360);return f}}this.fromLonLatTransform_=h3(n,t);const s=Kv([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Fp(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}};class qI extends PCe{constructor(t,n,r,i,s){const o=s!==void 0?Eg.IDLE:Eg.LOADED;super(t,n,r,o),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Eg.ERROR):this.state=Eg.LOADED,this.changed()}load(){this.state==Eg.IDLE&&(this.state=Eg.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const mHe={Point:bHe,LineString:xHe,Polygon:SHe,MultiPoint:_He,MultiLineString:wHe,MultiPolygon:EHe},gHe={Point:AHe,LineString:CHe,Polygon:kHe,MultiPoint:DHe,MultiLineString:THe,MultiPolygon:LHe};class yHe extends uje{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,n,r){const i=t,s=h1e(i.geometry,n),o=new au;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),i.attributes){o.setProperties(i.attributes,!0);const a=i.attributes[r];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(t,n){if(n=n||{},t.features){const r=t,i=[],s=r.features;for(let o=0,a=s.length;o<a;++o)i.push(this.readFeatureFromObject(s[o],n,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,n)]}readGeometryFromObject(t,n){return h1e(t,n)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const r=t.spatialReference.wkid;return oi("EPSG:"+r)}return null}writeGeometryObject(t,n){return p1e(t,this.adaptOptions(n))}writeFeatureObject(t,n){n=this.adaptOptions(n);const r={};if(!t.hasProperties())return r.attributes={},r;const i=t.getProperties(),s=t.getGeometry();if(s){r.geometry=p1e(s,n);const o=n&&(n.dataProjection||n.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(oi(o).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return cje(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(t,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=t.length;i<s;++i)r.push(this.writeFeatureObject(t[i],n));return{features:r}}}function h1e(e,t){if(!e)return null;let n;if(typeof e.x=="number"&&typeof e.y=="number")n="Point";else if(e.points)n="MultiPoint";else if(e.paths)e.paths.length===1?n="LineString":n="MultiLineString";else if(e.rings){const i=e,s=Y1(i),o=vHe(i.rings,s);o.length===1?(n="Polygon",e=Object.assign({},e,{rings:o[0]})):(n="MultiPolygon",e=Object.assign({},e,{rings:o}))}const r=mHe[n];return Oo(r(e),!1,t)}function vHe(e,t){const n=[],r=[],i=[];let s,o;for(s=0,o=e.length;s<o;++s)n.length=0,fje(n,0,e[s],t.length),dje(n,0,n.length,t.length)?r.push([e[s]]):i.push(e[s]);for(;i.length;){const a=i.shift();let l=!1;for(s=r.length-1;s>=0;s--){const u=r[s][0];if(p3(new X4(u).getExtent(),new X4(a).getExtent())){r[s].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function bHe(e){let t;return e.m!==void 0&&e.z!==void 0?t=new gc([e.x,e.y,e.z,e.m],"XYZM"):e.z!==void 0?t=new gc([e.x,e.y,e.z],"XYZ"):e.m!==void 0?t=new gc([e.x,e.y,e.m],"XYM"):t=new gc([e.x,e.y]),t}function xHe(e){const t=Y1(e);return new $f(e.paths[0],t)}function wHe(e){const t=Y1(e);return new U1(e.paths,t)}function Y1(e){let t="XY";return e.hasZ===!0&&e.hasM===!0?t="XYZM":e.hasZ===!0?t="XYZ":e.hasM===!0&&(t="XYM"),t}function _He(e){const t=Y1(e);return new hD(e.points,t)}function EHe(e){const t=Y1(e);return new rE(e.rings,t)}function SHe(e){const t=Y1(e);return new iE(e.rings,t)}function AHe(e,t){const n=e.getCoordinates();let r;const i=e.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function aE(e){const t=e.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function CHe(e,t){const n=aE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:[e.getCoordinates()]}}function kHe(e,t){const n=aE(e);return{hasZ:n.hasZ,hasM:n.hasM,rings:e.getCoordinates(!1)}}function THe(e,t){const n=aE(e);return{hasZ:n.hasZ,hasM:n.hasM,paths:e.getCoordinates()}}function DHe(e,t){const n=aE(e);return{hasZ:n.hasZ,hasM:n.hasM,points:e.getCoordinates()}}function LHe(e,t){const n=aE(e),r=e.getCoordinates(!1),i=[];for(let s=0;s<r.length;s++)for(let o=r[s].length-1;o>=0;o--)i.push(r[s][o]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function p1e(e,t){const n=gHe[e.getType()];return n(Oo(e,!0,t),t)}const Xd="http://www.opengis.net/gml",RHe=/^\s*$/;class un extends pD{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Tn(this.readFeaturesInternal),featureMembers:Rn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,n){const r=t.localName;let i=null;if(r=="FeatureCollection")i=Rt([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=n[0];let o=s.featureType,a=s.featureNS;const l="p",u="p0";if(!o&&t.childNodes){o=[],a={};for(let d=0,h=t.childNodes.length;d<h;++d){const p=t.childNodes[d];if(p.nodeType===1){const g=p.nodeName.split(":").pop();if(!o.includes(g)){let v="",x=0;const y=p.namespaceURI;for(const w in a){if(a[w]===y){v=w;break}++x}v||(v=l+x,a[v]=y),o.push(v+":"+g)}}}r!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const f={},c=Array.isArray(o)?o:[o];for(const d in a){const h={};for(let p=0,g=c.length;p<g;++p)(c[p].includes(":")?c[p].split(":")[0]:u)===d&&(h[c[p].split(":").pop()]=r=="featureMembers"?Tn(this.readFeatureElement,this):Rn(this.readFeatureElement,this));f[a[d]]=h}r=="featureMember"||r=="member"?i=Rt(void 0,f,t,n):i=Rt([],f,t,n)}return i===null&&(i=[]),i}readGeometryOrExtent(t,n){const r=n[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Rt(null,this.GEOMETRY_PARSERS,t,n,this)}readExtentElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?xI(i,r):void 0}readGeometryElement(t,n){const r=n[0],i=this.readGeometryOrExtent(t,n);return i?Oo(i,!1,r):void 0}readFeatureElementInternal(t,n,r){let i;const s={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let u;const f=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=m3(l,!1),RHe.test(u)&&(u=void 0)):(r&&(u=f==="boundedBy"?this.readExtentElement(l,n):this.readGeometryElement(l,n)),u?f!=="boundedBy"&&(i=f):u=this.readFeatureElementInternal(l,n,!1));const c=l.attributes.length;if(c>0&&!(u instanceof hje)){u={_content_:u};for(let d=0;d<c;d++){const h=l.attributes[d].name;u[h]=l.attributes[d].value}}s[f]?(s[f]instanceof Array||(s[f]=[s[f]]),s[f].push(u)):s[f]=u}if(!r)return s;const o=new au(s);i&&o.setGeometryName(i);const a=t.getAttribute("fid")||pje(t,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(t,n){return this.readFeatureElementInternal(t,n,!0)}readPoint(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new gc(r,"XYZ")}readMultiPoint(t,n){const r=Rt([],this.MULTIPOINT_PARSERS,t,n,this);if(r)return new hD(r)}readMultiLineString(t,n){const r=Rt([],this.MULTILINESTRING_PARSERS,t,n,this);if(r)return new U1(r)}readMultiPolygon(t,n){const r=Rt([],this.MULTIPOLYGON_PARSERS,t,n,this);if(r)return new rE(r)}pointMemberParser(t,n){Op(this.POINTMEMBER_PARSERS,t,n,this)}lineStringMemberParser(t,n){Op(this.LINESTRINGMEMBER_PARSERS,t,n,this)}polygonMemberParser(t,n){Op(this.POLYGONMEMBER_PARSERS,t,n,this)}readLineString(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new $f(r,"XYZ")}readFlatLinearRing(t,n){const r=Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);if(r)return r}readLinearRing(t,n){const r=this.readFlatCoordinatesFromNode(t,n);if(r)return new X4(r,"XYZ")}readPolygon(t,n){const r=Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)g3(i,r[o]),s.push(i.length);return new iE(i,"XYZ",s)}}readFlatCoordinatesFromNode(t,n){return Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}readGeometryFromNode(t,n){const r=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return r||null}readFeaturesFromNode(t,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return oi(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}un.prototype.namespace=Xd;un.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Tn(un.prototype.pointMemberParser),pointMembers:Tn(un.prototype.pointMemberParser)}};un.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Tn(un.prototype.lineStringMemberParser),lineStringMembers:Tn(un.prototype.lineStringMemberParser)}};un.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Tn(un.prototype.polygonMemberParser),polygonMembers:Tn(un.prototype.polygonMemberParser)}};un.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Tn(un.prototype.readFlatCoordinatesFromNode)}};un.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Tn(un.prototype.readLineString)}};un.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Tn(un.prototype.readPolygon)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing)}};const FHe=Xd+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",OHe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class hr extends un{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Xd].featureMember=Tn(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:FHe}readFlatCoordinates(t,n){const r=m3(t,!1).replace(/^\s*|\s*$/g,""),s=n[0].srsName;let o="enu";if(s){const u=oi(s);u&&(o=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,f=a.length;u<f;u++){const c=a[u].split(/,+/),d=parseFloat(c[0]),h=parseFloat(c[1]),p=c.length===3?parseFloat(c[2]):0;o.startsWith("en")?l.push(d,h,p):l.push(h,d,p)}return l}readBox(t,n){const r=Rt([null],this.BOX_PARSERS_,t,n,this);return NCe(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),er("http://www.opengis.net/gml",r)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Ge(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Ge(yr)))}}const f=Object.assign({},s);f.node=t,Oi(f,s.serializers,tu(void 0,o),u,r,l)}writeCurveOrLineString(t,n,r){const s=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,n,r)}else if(t.nodeName==="Curve"){const o=er(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&t.setAttribute("srsName",o);const l=n.getLineStrings();Oi({node:t,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=t;let o;Array.isArray(n)?o=xI(n,i):o=Oo(n,!0,i),Oi(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(t){const n=er(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=n.getCoordinates(),l=a.length,u=new Array(l);for(let f=0;f<l;++f){const c=a[f];u[f]=this.getCoords_(c,o,s)}yr(t,u.join(" "))}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Oi({node:t,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),er(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(t,n,r){let s=(n?oi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(r){const o=t[2]||0;s+=","+o}return s}writePoint(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=n.getCoordinates(),u=this.getCoords_(l,o,s);yr(a,u)}writeMultiPoint(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const a=n.getPoints();Oi({node:t,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,n,r)}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&t.setAttribute("srsName",o);const l=n.getPolygons();Oi({node:t,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Oi({node:t},this.ENVELOPE_SERIALIZERS,q1,a,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er("http://www.opengis.net/gml",OHe[i.nodeName])}}hr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Rn(hr.prototype.readFlatCoordinates)}};hr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:hr.prototype.innerBoundaryIsParser,outerBoundaryIs:hr.prototype.outerBoundaryIsParser}};hr.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Tn(hr.prototype.readFlatCoordinates)}};hr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Box:Rn(hr.prototype.readBox)}};hr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(hr.prototype.writeCurveOrLineString),MultiCurve:Ge(hr.prototype.writeMultiCurveOrLineString),Point:Ge(hr.prototype.writePoint),MultiPoint:Ge(hr.prototype.writeMultiPoint),LineString:Ge(hr.prototype.writeCurveOrLineString),MultiLineString:Ge(hr.prototype.writeMultiCurveOrLineString),LinearRing:Ge(hr.prototype.writeLinearRing),Polygon:Ge(hr.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(hr.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(hr.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(hr.prototype.writeEnvelope)}};hr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(hr.prototype.writeLineStringOrCurveMember),curveMember:Ge(hr.prototype.writeLineStringOrCurveMember)}};hr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ge(hr.prototype.writeRing),innerBoundaryIs:Ge(hr.prototype.writeRing)}};hr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(hr.prototype.writePointMember)}};hr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(hr.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(hr.prototype.writeSurfaceOrPolygonMember)}};hr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};const MHe=Xd+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",$He={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class vt extends un{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:MHe,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this);if(r)return new U1(r)}readFlatCurveRing(t,n){const r=Rt([],this.MULTICURVE_PARSERS,t,n,this),i=[];for(let s=0,o=r.length;s<o;++s)g3(i,r[s].getFlatCoordinates());return i}readMultiSurface(t,n){const r=Rt([],this.MULTISURFACE_PARSERS,t,n,this);if(r)return new rE(r)}curveMemberParser(t,n){Op(this.CURVEMEMBER_PARSERS,t,n,this)}surfaceMemberParser(t,n){Op(this.SURFACEMEMBER_PARSERS,t,n,this)}readPatch(t,n){return Rt([null],this.PATCHES_PARSERS,t,n,this)}readSegment(t,n){return Rt([],this.SEGMENTS_PARSERS,t,n,this)}readPolygonPatch(t,n){return Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)}readLineStringSegment(t,n){return Rt([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)}interiorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)}exteriorParser(t,n){const r=Rt(void 0,this.RING_PARSERS,t,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(t,n){const r=Rt([null],this.SURFACE_PARSERS,t,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)g3(i,r[o]),s.push(i.length);return new iE(i,"XYZ",s)}}readCurve(t,n){const r=Rt([null],this.CURVE_PARSERS,t,n,this);if(r)return new $f(r,"XYZ")}readEnvelope(t,n){const r=Rt([null],this.ENVELOPE_PARSERS,t,n,this);return NCe(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,n){let r=m3(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=i.exec(r);)s.push(parseFloat(o[1])),r=r.substr(o[0].length);if(r!=="")return;const l=n[0].srsName;if((l?oi(l).getAxisOrientation():"enu")==="neu")for(let c=0,d=s.length;c<d;c+=3){const h=s[c],p=s[c+1];s[c]=p,s[c+1]=h}const f=s.length;if(f==2&&s.push(0),f!==0)return s}readFlatPosList(t,n){const r=m3(t,!1).replace(/^\s*|\s*$/g,""),i=n[0],s=i.srsName,o=i.srsDimension,a=s?oi(s).getAxisOrientation():"enu",l=r.split(/\s+/);let u=2;t.getAttribute("srsDimension")?u=vp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?u=vp(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?u=vp(t.parentNode.getAttribute("srsDimension")):o&&(u=vp(o));const f=a.startsWith("en");let c,d,h;const p=[];for(let g=0,v=l.length;g<v;g+=u)c=parseFloat(l[g]),d=parseFloat(l[g+1]),h=u===3?parseFloat(l[g+2]):0,f?p.push(c,d,h):p.push(d,c,h);return p}writePos_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";t.setAttribute("srsDimension",o);const a=i.srsName,l=a?oi(a).getAxisOrientation():"enu",u=n.getCoordinates();let f=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(s){const c=u[2]||0;f+=" "+c}yr(t,f)}getCoords_(t,n,r){let s=(n?oi(n).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(r){const o=t[2]||0;s+=" "+o}return s}writePosList_(t,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";t.setAttribute("srsDimension",o);const a=i.srsName,l=n.getCoordinates(),u=l.length,f=new Array(u);let c;for(let d=0;d<u;++d)c=l[d],f[d]=this.getCoords_(c,a,s);yr(t,f.join(" "))}writePoint(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=er(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,n,r)}writeEnvelope(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Oi({node:t},this.ENVELOPE_SERIALIZERS,q1,a,r,o,this)}writeLinearRing(t,n,r){const s=r[r.length-1].srsName;s&&t.setAttribute("srsName",s);const o=er(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,n,r)}RING_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),er(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(t.nodeName!=="PolygonPatch"&&o&&t.setAttribute("srsName",o),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=n.getLinearRings();Oi({node:t,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=er(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(t,n,r){const s=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&s&&t.setAttribute("srsName",s),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=er(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,n,r)}else if(t.nodeName==="Curve"){const o=er(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeMultiSurfaceOrPolygon(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&t.setAttribute("srsName",o);const l=n.getPolygons();Oi({node:t,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,n,r){const i=r[r.length-1],s=i.srsName,o=i.hasZ;s&&t.setAttribute("srsName",s);const a=n.getPoints();Oi({node:t,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,tu("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&t.setAttribute("srsName",o);const l=n.getLineStrings();Oi({node:t,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,n,r){const i=er(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(t,n,r){const i=er(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(t,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(t,n,r){const i=er(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(t,n,r){const i=er(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(t,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=t;let o;Array.isArray(n)?o=xI(n,i):o=Oo(n,!0,i),Oi(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(t,n,r){const i=n.getId();i&&t.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const d in c){const h=c[d];h!=null&&(l.push(d),u.push(h),d==a||typeof h.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=Ge(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=Ge(yr)))}}const f=Object.assign({},s);f.node=t,Oi(f,s.serializers,tu(void 0,o),u,r,l)}writeFeatureMembers_(t,n,r){const i=r[r.length-1],s=i.featureType,o=i.featureNS,a={};a[o]={},a[o][s]=Ge(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=t,Oi(l,a,tu(s,o),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,n,r){const i=n[n.length-1].node;return er(this.namespace,$He[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),er(this.namespace,r)}writeGeometryNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,t,[i]),r}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er(this.namespace,"featureMembers");r.setAttributeNS(Y_,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,t,[i]),r}}vt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};vt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};vt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(vt.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(vt.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(vt.prototype.readEnvelope)}};vt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Tn(vt.prototype.curveMemberParser),curveMembers:Tn(vt.prototype.curveMemberParser)}};vt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Tn(vt.prototype.surfaceMemberParser),surfaceMembers:Tn(vt.prototype.surfaceMemberParser)}};vt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Tn(un.prototype.readLineString),Curve:Tn(vt.prototype.readCurve)}};vt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Tn(un.prototype.readPolygon),Surface:Tn(vt.prototype.readSurface)}};vt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Rn(vt.prototype.readPatch)}};vt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Rn(vt.prototype.readSegment)}};vt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Tn(vt.prototype.readFlatPosList),upperCorner:Tn(vt.prototype.readFlatPosList)}};vt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};vt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:BCe(vt.prototype.readLineStringSegment)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(vt.prototype.readFlatCurveRing)}};vt.prototype.writeFeatures;vt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};vt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};vt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};vt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(vt.prototype.writePointMember)}};vt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};vt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(vt.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};const HI=vt;HI.prototype.writeFeatures;HI.prototype.writeFeaturesNode;const as=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],IHe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",PHe={rte:O3e,trk:M3e,wpt:$3e},NHe=Zt(as,{rte:Tn(O3e),trk:Tn(M3e),wpt:Tn($3e)}),BHe=Zt(as,{text:Ue(Dt,"linkText"),type:Ue(Dt,"linkType")}),zHe=Zt(as,{name:Ue(Dt),email:hGe,link:lE}),jHe=Zt(as,{name:Ue(Dt),desc:Ue(Dt),author:Ue(cGe),copyright:Ue(fGe),link:lE,time:Ue(mD),keywords:Ue(Dt),bounds:dGe,extensions:TD}),UHe=Zt(as,{year:Ue(Ds),license:Ue(Dt)}),qHe=Zt(as,{rte:Ge(yGe),trk:Ge(vGe),wpt:Ge(xGe)});class HHe extends pD{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let n=0,r=t.length;n<r;++n){const i=t[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(y3(t)):v3(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(t){if(!as.includes(t.namespaceURI))return null;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(as.includes(n.namespaceURI)&&n.localName==="metadata")return Rt({},jHe,n,[]);return null}readFeatureFromNode(t,n){if(!as.includes(t.namespaceURI))return null;const r=PHe[t.localName];if(!r)return null;const i=r(t,[this.getReadOptions(t,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,n){if(!as.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const r=Rt([],NHe,t,[this.getReadOptions(t,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(t,n){n=this.adaptOptions(n);const r=er("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Y_),r.setAttributeNS(Y_,"xsi:schemaLocation",IHe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Oi({node:r},qHe,uGe,t,[n]),r}}const GHe=Zt(as,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:lE,number:Ue(Ds),extensions:TD,type:Ue(Dt),rtept:pGe}),VHe=Zt(as,{ele:Ue(Ea),time:Ue(mD)}),WHe=Zt(as,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:lE,number:Ue(Ds),type:Ue(Dt),extensions:TD,trkseg:gGe}),YHe=Zt(as,{trkpt:mGe}),XHe=Zt(as,{ele:Ue(Ea),time:Ue(mD)}),ZHe=Zt(as,{ele:Ue(Ea),time:Ue(mD),magvar:Ue(Ea),geoidheight:Ue(Ea),name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:lE,sym:Ue(Dt),type:Ue(Dt),fix:Ue(Dt),sat:Ue(Ds),hdop:Ue(Ea),vdop:Ue(Ea),pdop:Ue(Ea),ageofdgpsdata:Ue(Ea),dgpsid:Ue(Ds),extensions:TD}),KHe=["text","type"],JHe=Zt(as,{text:Ge(yr),type:Ge(yr)}),QHe=Zt(as,["name","cmt","desc","src","link","number","type","rtept"]),eGe=Zt(as,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(WI),number:Ge(b3),type:Ge(yr),rtept:zCe(Ge(YI))}),tGe=Zt(as,["ele","time"]),nGe=Zt(as,["name","cmt","desc","src","link","number","type","trkseg"]),rGe=Zt(as,{name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(WI),number:Ge(b3),type:Ge(yr),trkseg:zCe(Ge(bGe))}),iGe=tu("trkpt"),sGe=Zt(as,{trkpt:Ge(YI)}),oGe=Zt(as,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),aGe=Zt(as,{ele:Ge(rg),time:Ge(mje),magvar:Ge(rg),geoidheight:Ge(rg),name:Ge(yr),cmt:Ge(yr),desc:Ge(yr),src:Ge(yr),link:Ge(WI),sym:Ge(yr),type:Ge(yr),fix:Ge(yr),sat:Ge(b3),hdop:Ge(rg),vdop:Ge(rg),pdop:Ge(rg),ageofdgpsdata:Ge(rg),dgpsid:Ge(b3)}),lGe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function uGe(e,t,n){const r=e.getGeometry();if(r){const i=lGe[r.getType()];if(i){const s=t[t.length-1].node;return er(s.namespaceURI,i)}}}function GI(e,t,n,r){return e.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(e.push(r.ele),delete r.ele,t.hasZ=!0):e.push(0),"time"in r?(e.push(r.time),delete r.time,t.hasM=!0):e.push(0),e}function VI(e,t,n){let r="XY",i=2;if(e.hasZ&&e.hasM?(r="XYZM",i=4):e.hasZ?(r="XYZ",i=3):e.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=t.length/4;s<o;s++)t[s*i]=t[s*4],t[s*i+1]=t[s*4+1],e.hasZ&&(t[s*i+2]=t[s*4+2]),e.hasM&&(t[s*i+2]=t[s*4+3]);if(t.length=t.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function cGe(e,t){const n=Rt({},zHe,e,t);if(n)return n}function fGe(e,t){const n=Rt({},UHe,e,t);if(n){const r=e.getAttribute("author");return r!==null&&(n.author=r),n}}function dGe(e,t){const n=t[t.length-1],r=e.getAttribute("minlat"),i=e.getAttribute("minlon"),s=e.getAttribute("maxlat"),o=e.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function hGe(e,t){const n=t[t.length-1],r=e.getAttribute("id"),i=e.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function lE(e,t){const n=t[t.length-1],r=e.getAttribute("href");r!==null&&(n.link=r),Op(BHe,e,t)}function TD(e,t){const n=t[t.length-1];n.extensionsNode_=e}function pGe(e,t){const n=Rt({},VHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,s=r.layoutOptions;GI(i,s,e,n)}}function mGe(e,t){const n=Rt({},XHe,e,t);if(n){const r=t[t.length-1],i=r.flatCoordinates,s=r.layoutOptions;GI(i,s,e,n)}}function gGe(e,t){const n=t[t.length-1];Op(YHe,e,t);const r=n.flatCoordinates;n.ends.push(r.length)}function O3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],layoutOptions:{}},GHe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=VI(s,i),a=new $f(i,o);Oo(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function M3e(e,t){const n=t[0],r=Rt({flatCoordinates:[],ends:[],layoutOptions:{}},WHe,e,t);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=VI(o,i,s),l=new U1(i,a,s);Oo(l,!1,n);const u=new au(l);return u.setProperties(r,!0),u}function $3e(e,t){const n=t[0],r=Rt({},ZHe,e,t);if(!r)return;const i={},s=GI([],i,e,r),o=VI(i,s),a=new gc(s,o);Oo(a,!1,n);const l=new au(a);return l.setProperties(r,!0),l}function WI(e,t,n){e.setAttribute("href",t);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];Oi({node:e},JHe,q1,s,n,KHe)}function YI(e,t,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":t[3]!==0&&(o.time=t[3]);case"XYZ":t[2]!==0&&(o.ele=t[2]);break;case"XYM":t[2]!==0&&(o.time=t[2]);break}const l=e.nodeName=="rtept"?tGe[s]:oGe[s],u=wI(o,l);Oi({node:e,properties:o},aGe,q1,u,n,l)}function yGe(e,t,n){const r=n[0],i=t.getProperties(),s={node:e};s.properties=i;const o=t.getGeometry();if(o.getType()=="LineString"){const f=Oo(o,!0,r);s.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const a=n[n.length-1].node,l=QHe[a.namespaceURI],u=wI(i,l);Oi(s,eGe,q1,u,n,l)}function vGe(e,t,n){const r=n[0],i=t.getProperties(),s={node:e};s.properties=i;const o=t.getGeometry();if(o.getType()=="MultiLineString"){const f=Oo(o,!0,r);i.trkseg=f.getLineStrings()}const a=n[n.length-1].node,l=nGe[a.namespaceURI],u=wI(i,l);Oi(s,rGe,q1,u,n,l)}function bGe(e,t,n){const r={node:e};r.geometryLayout=t.getLayout(),r.properties={},Oi(r,sGe,iGe,t.getCoordinates(),n)}function xGe(e,t,n){const r=n[0],i=n[n.length-1];i.properties=t.getProperties();const s=t.getGeometry();if(s.getType()=="Point"){const o=Oo(s,!0,r);i.geometryLayout=o.getLayout(),YI(e,o.getCoordinates(),n)}}class XI extends jCe{constructor(){super()}getType(){return"text"}readFeature(t,n){return this.readFeatureFromText(eA(t),this.adaptOptions(n))}readFeatureFromText(t,n){return Rd()}readFeatures(t,n){return this.readFeaturesFromText(eA(t),this.adaptOptions(n))}readFeaturesFromText(t,n){return Rd()}readGeometry(t,n){return this.readGeometryFromText(eA(t),this.adaptOptions(n))}readGeometryFromText(t,n){return Rd()}readProjection(t){return this.readProjectionFromText(eA(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,n){return this.writeFeatureText(t,this.adaptOptions(n))}writeFeatureText(t,n){return Rd()}writeFeatures(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))}writeFeaturesText(t,n){return Rd()}writeGeometry(t,n){return this.writeGeometryText(t,this.adaptOptions(n))}writeGeometryText(t,n){return Rd()}}function eA(e){return typeof e=="string"?e:""}const wGe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,_Ge=/^H.([A-Z]{3}).*?:(.*)/,EGe=/^HFDTE(\d{2})(\d{2})(\d{2})/,SGe=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,AGe=/\r\n|\r|\n/;class CGe extends XI{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,n){const r=this.altitudeMode_,i=t.split(AGe),s={},o=[];let a=2e3,l=0,u=1,f=-1,c,d;for(c=0,d=i.length;c<d;++c){const v=i[c];let x;if(v.charAt(0)=="B"){if(x=wGe.exec(v),x){const y=parseInt(x[1],10),w=parseInt(x[2],10),_=parseInt(x[3],10);let A=parseInt(x[4],10)+parseInt(x[5],10)/6e4;this.lad_&&(A+=parseInt(v.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),x[6]=="S"&&(A=-A);let T=parseInt(x[7],10)+parseInt(x[8],10)/6e4;if(this.lod_&&(T+=parseInt(v.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),x[9]=="W"&&(T=-T),o.push(T,A),r!="none"){let k;r=="gps"?k=parseInt(x[11],10):r=="barometric"?k=parseInt(x[12],10):k=0,o.push(k)}let D=Date.UTC(a,l,u,y,w,_);D<f&&(D=Date.UTC(a,l,u+1,y,w,_)),o.push(D/1e3),f=D}}else if(v.charAt(0)=="H")x=SGe.exec(v),x?(u=parseInt(x[1],10),l=parseInt(x[2],10)-1,a=2e3+parseInt(x[3],10)):(x=EGe.exec(v),x?(u=parseInt(x[1],10),l=parseInt(x[2],10)-1,a=2e3+parseInt(x[3],10)):(x=_Ge.exec(v),x&&(s[x[1]]=x[2].trim())));else if(v.charAt(0)=="I"){const y=parseInt(v.slice(1,3),10);for(let w=0;w<y;w++){const _=v.slice(7+w*7,10+w*7);if(_==="LAD"||_==="LOD"){const A=parseInt(v.slice(3+w*7,5+w*7),10)-1,T=parseInt(v.slice(5+w*7,7+w*7),10);_==="LAD"?(this.lad_=!0,this.ladStart_=A,this.ladStop_=T):_==="LOD"&&(this.lod_=!0,this.lodStart_=A,this.lodStop_=T)}}}}if(o.length===0)return null;const h=r=="none"?"XYM":"XYZM",p=new $f(o,h),g=new au(Oo(p,!1,n));return g.setProperties(s,!0),g}readFeaturesFromText(t,n){const r=this.readFeatureFromText(t,n);return r?[r]:[]}}const Zs={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},n0={};n0[Zs.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};n0[Zs.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};n0[Zs.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};n0.none={none:{supports:[],formats:[],qualities:[]}};const kGe=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,m1e=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,TGe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function DGe(e){let t=e.getComplianceLevelSupportedFeatures();return t===void 0&&(t=n0[Zs.VERSION1].level0),{url:e.imageInfo["@id"]===void 0?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,e.imageInfo.formats===void 0?[]:e.imageInfo.formats],qualities:[...t.qualities,e.imageInfo.qualities===void 0?[]:e.imageInfo.qualities],resolutions:e.imageInfo.scale_factors,tileSize:e.imageInfo.tile_width!==void 0?e.imageInfo.tile_height!==void 0?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:e.imageInfo.tile_height!=null?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function LGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,r=n&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],i=n&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],s=n&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(o){return o.width})[0],e.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...t.supports,...r],formats:[...t.formats,...i],qualities:[...t.qualities,...s]}}function RGe(e){const t=e.getComplianceLevelSupportedFeatures(),n=e.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...e.imageInfo.extraFormats],r=e.imageInfo.preferredFormats!==void 0&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,s){return i===void 0&&n.includes(s)?s:i},void 0):void 0;return{url:e.imageInfo.id,sizes:e.imageInfo.sizes===void 0?void 0:e.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:e.imageInfo.tiles===void 0?void 0:[e.imageInfo.tiles.map(function(i){return i.width})[0],e.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:e.imageInfo.tiles===void 0?void 0:e.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:e.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...e.imageInfo.extraFeatures],formats:n,qualities:e.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...e.imageInfo.extraQualities],preferredFormat:r}}const DD={};DD[Zs.VERSION1]=DGe;DD[Zs.VERSION2]=LGe;DD[Zs.VERSION3]=RGe;class FGe{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Zs.VERSION1;case"http://iiif.io/api/image/2/context.json":return Zs.VERSION2;case"http://iiif.io/api/image/3/context.json":return Zs.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Zs.VERSION1)&&this.imageInfo.identifier)return Zs.VERSION1;break}Dc(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case Zs.VERSION1:if(kGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Zs.VERSION3:if(TGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Zs.VERSION2:if(typeof this.imageInfo.profile=="string"&&m1e.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&m1e.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const n=this.getComplianceLevelEntryFromProfile(t);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return n===void 0?n0.none.none:n0[t][n]}getTileSourceOptions(t){const n=t||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:DD[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:i.tileSize}}}class ZI{read(t){if(!t)return null;if(typeof t=="string"){const n=y3(t);return this.readFromDocument(n)}return v3(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(t){Rd()}}const OGe="http://www.w3.org/1999/xlink";function X1(e){return e.getAttributeNS(OGe,"href")}const Bl=[null,"http://www.opengis.net/ows/1.1"],MGe=Zt(Bl,{ServiceIdentification:Ue(iVe),ServiceProvider:Ue(oVe),OperationsMetadata:Ue(nVe)});class I3e extends ZI{constructor(){super()}readFromNode(t){const n=Rt({},MGe,t,[]);return n||null}}const $Ge=Zt(Bl,{DeliveryPoint:Ue(Dt),City:Ue(Dt),AdministrativeArea:Ue(Dt),PostalCode:Ue(Dt),Country:Ue(Dt),ElectronicMailAddress:Ue(Dt)}),IGe=Zt(Bl,{Value:mi(aVe)}),PGe=Zt(Bl,{AllowedValues:Ue(XGe)}),NGe=Zt(Bl,{Phone:Ue(rVe),Address:Ue(YGe)}),BGe=Zt(Bl,{HTTP:Ue(eVe)}),zGe=Zt(Bl,{Get:mi(QGe),Post:void 0}),jGe=Zt(Bl,{DCP:Ue(JGe)}),UGe=Zt(Bl,{Operation:tVe}),qGe=Zt(Bl,{Voice:Ue(Dt),Facsimile:Ue(Dt)}),HGe=Zt(Bl,{Constraint:mi(ZGe)}),GGe=Zt(Bl,{IndividualName:Ue(Dt),PositionName:Ue(Dt),ContactInfo:Ue(KGe)}),VGe=Zt(Bl,{Abstract:Ue(Dt),AccessConstraints:Ue(Dt),Fees:Ue(Dt),Title:Ue(Dt),ServiceTypeVersion:Ue(Dt),ServiceType:Ue(Dt)}),WGe=Zt(Bl,{ProviderName:Ue(Dt),ProviderSite:Ue(X1),ServiceContact:Ue(sVe)});function YGe(e,t){return Rt({},$Ge,e,t)}function XGe(e,t){return Rt({},IGe,e,t)}function ZGe(e,t){const n=e.getAttribute("name");if(n)return Rt({name:n},PGe,e,t)}function KGe(e,t){return Rt({},NGe,e,t)}function JGe(e,t){return Rt({},BGe,e,t)}function QGe(e,t){const n=X1(e);if(n)return Rt({href:n},HGe,e,t)}function eVe(e,t){return Rt({},zGe,e,t)}function tVe(e,t){const n=e.getAttribute("name"),r=Rt({},jGe,e,t);if(!r)return;const i=t[t.length-1];i[n]=r}function nVe(e,t){return Rt({},UGe,e,t)}function rVe(e,t){return Rt({},qGe,e,t)}function iVe(e,t){return Rt({},VGe,e,t)}function sVe(e,t){return Rt({},GGe,e,t)}function oVe(e,t){return Rt({},WGe,e,t)}function aVe(e,t){return Dt(e)}function g1e(e,t,n,r,i,s){i!==void 0?(i=i,s=s!==void 0?s:0):(i=[],s=0);let o=t;for(;o<n;){const a=e[o++];i[s++]=e[o++],i[s++]=a;for(let l=2;l<r;++l)i[s++]=e[o++]}return i.length=s,i}class lVe extends XI{constructor(t){super(),t=t||{},this.dataProjection=oi("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n);return new au(r)}readFeaturesFromText(t,n){return[this.readFeatureFromText(t,n)]}readGeometryFromText(t,n){const r=gje(this.geometryLayout_),i=cVe(t,r,this.factor_);g1e(i,0,i.length,r,i);const s=yje(i,0,i.length,r),o=new $f(s,this.geometryLayout_);return Oo(o,!1,this.adaptOptions(n))}writeFeatureText(t,n){const r=t.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,n){return this.writeFeatureText(t[0],n)}writeGeometryText(t,n){t=Oo(t,!0,this.adaptOptions(n));const r=t.getFlatCoordinates(),i=t.getStride();return g1e(r,0,r.length,i,r),uVe(r,i,this.factor_)}}function uVe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;for(let s=0,o=e.length;s<o;)for(r=0;r<t;++r,++s){const a=e[s],l=a-i[r];i[r]=a,e[s]=l}return fVe(e,n)}function cVe(e,t,n){n=n||1e5;let r;const i=new Array(t);for(r=0;r<t;++r)i[r]=0;const s=dVe(e,n);for(let o=0,a=s.length;o<a;)for(r=0;r<t;++r,++o)i[r]+=s[o],s[o]=i[r];return s}function fVe(e,t){t=t||1e5;for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t);return hVe(e)}function dVe(e,t){t=t||1e5;const n=pVe(e);for(let r=0,i=n.length;r<i;++r)n[r]/=t;return n}function hVe(e){for(let t=0,n=e.length;t<n;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return mVe(e)}function pVe(e){const t=gVe(e);for(let n=0,r=t.length;n<r;++n){const i=t[n];t[n]=i&1?~(i>>1):i>>1}return t}function mVe(e){let t="";for(let n=0,r=e.length;n<r;++n)t+=yVe(e[n]);return t}function gVe(e){const t=[];let n=0,r=0;for(let i=0,s=e.length;i<s;++i){const o=e.charCodeAt(i)-63;n|=(o&31)<<r,o<32?(t.push(n),n=0,r=0):r+=5}return t}function yVe(e){let t,n="";for(;e>=32;)t=(32|e&31)+63,n+=String.fromCharCode(t),e>>=5;return t=e+63,n+=String.fromCharCode(t),n}class Xr extends vt{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,n,r)}}Xr.prototype.namespace="http://www.opengis.net/gml/3.2";Xr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(hr.prototype.readFlatCoordinates)}};Xr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};Xr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(Xr.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(Xr.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(Xr.prototype.readEnvelope)}};Xr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Tn(vt.prototype.curveMemberParser),curveMembers:Tn(vt.prototype.curveMemberParser)}};Xr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Tn(vt.prototype.surfaceMemberParser),surfaceMembers:Tn(vt.prototype.surfaceMemberParser)}};Xr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Tn(un.prototype.readLineString),Curve:Tn(vt.prototype.readCurve)}};Xr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Tn(un.prototype.readPolygon),Surface:Tn(vt.prototype.readSurface)}};Xr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Rn(vt.prototype.readPatch)}};Xr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Rn(vt.prototype.readSegment)}};Xr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Tn(vt.prototype.readFlatPosList),upperCorner:Tn(vt.prototype.readFlatPosList)}};Xr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};Xr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:BCe(vt.prototype.readLineStringSegment)}};Xr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Tn(un.prototype.pointMemberParser),pointMembers:Tn(un.prototype.pointMemberParser)}};Xr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Tn(un.prototype.lineStringMemberParser),lineStringMembers:Tn(un.prototype.lineStringMemberParser)}};Xr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Tn(un.prototype.polygonMemberParser),polygonMembers:Tn(un.prototype.polygonMemberParser)}};Xr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Tn(un.prototype.readFlatCoordinatesFromNode)}};Xr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Tn(un.prototype.readLineString)}};Xr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Tn(un.prototype.readPolygon)}};Xr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(Xr.prototype.readFlatCurveRing)}};Xr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};Xr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ge(yr),upperCorner:Ge(yr)}};Xr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};Xr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ge(vt.prototype.writePointMember)}};Xr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};Xr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(Xr.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};let P3e=class{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}};class vVe extends P3e{constructor(t,n){super(t),this.conditions=n,Dc(this.conditions.length>=2,"At least 2 conditions are required")}}let bVe=class extends vVe{constructor(t){super("And",Array.prototype.slice.call(arguments))}};class xVe extends P3e{constructor(t,n,r){if(super("BBOX"),this.geometryName=t,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function wVe(e){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(bVe,t))}function _Ve(e,t,n){return new xVe(e,t,n)}const y1e={"http://www.opengis.net/gml":{boundedBy:Ue(un.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Tn(un.prototype.readFeaturesInternal)}},EVe={"http://www.opengis.net/wfs":{totalInserted:Ue(Ds),totalUpdated:Ue(Ds),totalDeleted:Ue(Ds)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ue(Ds),totalUpdated:Ue(Ds),totalDeleted:Ue(Ds)}},SVe={"http://www.opengis.net/wfs":{TransactionSummary:Ue(b1e,"transactionSummary"),InsertResults:Ue(w1e,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ue(b1e,"transactionSummary"),InsertResults:Ue(w1e,"insertIds")}},AVe={"http://www.opengis.net/wfs":{PropertyName:Ge(yr)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ge(yr)}},N3e={"http://www.opengis.net/wfs":{Insert:Ge(_1e),Update:Ge(S1e),Delete:Ge(E1e),Property:Ge(A1e),Native:Ge(C1e)},"http://www.opengis.net/wfs/2.0":{Insert:Ge(_1e),Update:Ge(S1e),Delete:Ge(E1e),Property:Ge(A1e),Native:Ge(C1e)}},B3e="feature",KI="http://www.w3.org/2000/xmlns/",JI={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},s6={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},QI={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},v1e={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},eP={"2.0.0":Xr,"1.1.0":vt,"1.0.0":hr},CVe="1.1.0";class kVe extends pD{constructor(t){super(),t=t||{},this.version_=t.version?t.version:CVe,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new eP[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:v1e[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,n){const r={node:t};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(t,n||{}));const i=[r];let s;this.version_==="2.0.0"?s=y1e:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=Rt([],s,t,i,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(t){if(t){if(typeof t=="string"){const n=y3(t);return this.readTransactionResponseFromDocument(n)}return v3(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const n=y3(t);return this.readFeatureCollectionMetadataFromDocument(n)}return v3(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(t){const n={},r=vp(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,Rt(n,y1e,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(t){return Rt({},SVe,t,[])}writeGetFeature(t){const n=er(s6[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),t.handle&&n.setAttribute("handle",t.handle),t.outputFormat&&n.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&n.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&n.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&n.setAttribute("count",String(t.count)),t.viewParams!==void 0&&n.setAttribute("viewParams",t.viewParams),n.setAttributeNS(Y_,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Dc(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let i=t.filter;t.bbox&&(Dc(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(r,{geometryName:t.geometryName,filter:i}),I1e(n,t.featureTypes,[r])}else t.featureTypes.forEach(i=>{const s=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(r,{geometryName:i.geometryName,filter:s}),I1e(n,[i.name],[r])});return n}combineBboxAndFilter(t,n,r,i){const s=_Ve(t,n,r);return i?wVe(i,s):s}writeTransaction(t,n,r,i){const s=[],o=i.version?i.version:this.version_,a=er(s6[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(Y_,"xsi:schemaLocation",v1e[o]);const u=TVe(a,l,o,i);return t&&tA("Insert",t,s,u),n&&tA("Update",n,s,u),r&&tA("Delete",r,s,u),i.nativeElements&&tA("Native",i.nativeElements,s,u),a}readProjectionFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),oi(r.pop().srsName)}}return null}}function TVe(e,t,n,r){const i=r.featurePrefix?r.featurePrefix:B3e;let s;return n==="1.0.0"?s=2:n==="1.1.0"?s=3:n==="2.0.0"&&(s=3.2),Object.assign({node:e},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},t)}function tA(e,t,n,r){Oi(r,N3e,tu(e),t,n)}function b1e(e,t){return Rt({},EVe,e,t)}const DVe={"http://www.opengis.net/ogc":{FeatureId:Tn(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:Tn(function(e,t){return e.getAttribute("fid")})}};function x1e(e,t){Op(DVe,e,t)}const LVe={"http://www.opengis.net/wfs":{Feature:x1e},"http://www.opengis.net/wfs/2.0":{Feature:x1e}};function w1e(e,t){return Rt([],LVe,e,t)}function _1e(e,t,n){const r=n[n.length-1],i=r.featureType,s=r.featureNS,o=r.gmlVersion,a=er(s,i);e.appendChild(a),o===2?hr.prototype.writeFeatureElement(a,t,n):o===3?vt.prototype.writeFeatureElement(a,t,n):Xr.prototype.writeFeatureElement(a,t,n)}function z3e(e,t,n){const i=n[n.length-1].version,s=JI[i],o=er(s,"Filter"),a=er(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",t),e.appendChild(o)}function tP(e,t){e=e||B3e;const n=e+":";return t.startsWith(n)?t:n+t}function E1e(e,t,n){const r=n[n.length-1];Dc(t.getId()!==void 0,"Features must have an id set");const i=r.featureType,s=r.featurePrefix,o=r.featureNS,a=tP(s,i);e.setAttribute("typeName",a),e.setAttributeNS(KI,"xmlns:"+s,o);const l=t.getId();l!==void 0&&z3e(e,l,n)}function S1e(e,t,n){const r=n[n.length-1];Dc(t.getId()!==void 0,"Features must have an id set");const i=r.version,s=r.featureType,o=r.featurePrefix,a=r.featureNS,l=tP(o,s),u=t.getGeometryName();e.setAttribute("typeName",l),e.setAttributeNS(KI,"xmlns:"+o,a);const f=t.getId();if(f!==void 0){const c=t.getKeys(),d=[];for(let h=0,p=c.length;h<p;h++){const g=t.get(c[h]);if(g!==void 0){let v=c[h];g&&typeof g.getSimplifiedGeometry=="function"&&(v=u),d.push({name:v,value:g})}}Oi({version:i,gmlVersion:r.gmlVersion,node:e,hasZ:r.hasZ,srsName:r.srsName},N3e,tu("Property"),d,n),z3e(e,f,n)}}function A1e(e,t,n){const r=n[n.length-1],i=r.version,s=s6[i],a=er(s,i==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(e.appendChild(a),yr(a,t.name),t.value!==void 0&&t.value!==null){const u=er(s,"Value");e.appendChild(u),t.value&&typeof t.value.getSimplifiedGeometry=="function"?l===2?hr.prototype.writeGeometryElement(u,t.value,n):l===3?vt.prototype.writeGeometryElement(u,t.value,n):Xr.prototype.writeGeometryElement(u,t.value,n):yr(u,t.value)}}function C1e(e,t,n){t.vendorId&&e.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&yr(e,t.value)}const LD={"http://www.opengis.net/wfs":{Query:Ge(k1e)},"http://www.opengis.net/wfs/2.0":{Query:Ge(k1e)},"http://www.opengis.net/ogc":{During:Ge(L1e),And:Ge(nA),Or:Ge(nA),Not:Ge(R1e),BBOX:Ge(T1e),Contains:Ge(tp),Intersects:Ge(tp),Within:Ge(tp),DWithin:Ge(D1e),PropertyIsEqualTo:Ge(gu),PropertyIsNotEqualTo:Ge(gu),PropertyIsLessThan:Ge(gu),PropertyIsLessThanOrEqualTo:Ge(gu),PropertyIsGreaterThan:Ge(gu),PropertyIsGreaterThanOrEqualTo:Ge(gu),PropertyIsNull:Ge(F1e),PropertyIsBetween:Ge(O1e),PropertyIsLike:Ge(M1e)},"http://www.opengis.net/fes/2.0":{During:Ge(L1e),And:Ge(nA),Or:Ge(nA),Not:Ge(R1e),BBOX:Ge(T1e),Contains:Ge(tp),Disjoint:Ge(tp),Intersects:Ge(tp),ResourceId:Ge(FVe),Within:Ge(tp),DWithin:Ge(D1e),PropertyIsEqualTo:Ge(gu),PropertyIsNotEqualTo:Ge(gu),PropertyIsLessThan:Ge(gu),PropertyIsLessThanOrEqualTo:Ge(gu),PropertyIsGreaterThan:Ge(gu),PropertyIsGreaterThanOrEqualTo:Ge(gu),PropertyIsNull:Ge(F1e),PropertyIsBetween:Ge(O1e),PropertyIsLike:Ge(M1e)}};function k1e(e,t,n){const r=n[n.length-1],i=r.version,s=r.featurePrefix,o=r.featureNS,a=r.propertyNames,l=r.srsName;let u;s?u=tP(s,t):u=t;let f;i==="2.0.0"?f="typeNames":f="typeName",e.setAttribute(f,u),l&&e.setAttribute("srsName",l),o&&e.setAttributeNS(KI,"xmlns:"+s,o);const c=Object.assign({},r);c.node=e,Oi(c,AVe,tu("PropertyName"),a,n);const d=r.filter;if(d){const h=er(RD(i),"Filter");e.appendChild(h),RVe(h,d,n)}}function RVe(e,t,n){const r=n[n.length-1],i={node:e};Object.assign(i,{context:r}),Oi(i,LD,tu(t.getTagName()),[t],n)}function T1e(e,t,n){const r=n[n.length-1],s=r.context.version;r.srsName=t.srsName;const o=eP[s];Z1(s,e,t.geometryName),o.prototype.writeGeometryElement(e,t.extent,n)}function FVe(e,t,n){e.setAttribute("rid",t.rid)}function tp(e,t,n){const r=n[n.length-1],s=r.context.version;r.srsName=t.srsName;const o=eP[s];Z1(s,e,t.geometryName),o.prototype.writeGeometryElement(e,t.geometry,n)}function D1e(e,t,n){const s=n[n.length-1].context.version;tp(e,t,n);const o=er(RD(s),"Distance");yr(o,t.distance.toString()),s==="2.0.0"?o.setAttribute("uom",t.unit):o.setAttribute("units",t.unit),e.appendChild(o)}function L1e(e,t,n){const s=n[n.length-1].context.version;C3(QI[s],"ValueReference",e,t.propertyName);const o=er(Xd,"TimePeriod");e.appendChild(o);const a=er(Xd,"begin");o.appendChild(a),$1e(a,t.begin);const l=er(Xd,"end");o.appendChild(l),$1e(l,t.end)}function nA(e,t,n){const i=n[n.length-1].context,s={node:e};Object.assign(s,{context:i});const o=t.conditions;for(let a=0,l=o.length;a<l;++a){const u=o[a];Oi(s,LD,tu(u.getTagName()),[u],n)}}function R1e(e,t,n){const i=n[n.length-1].context,s={node:e};Object.assign(s,{context:i});const o=t.condition;Oi(s,LD,tu(o.getTagName()),[o],n)}function gu(e,t,n){const s=n[n.length-1].context.version;t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),Z1(s,e,t.propertyName),k3(s,e,""+t.expression)}function F1e(e,t,n){const s=n[n.length-1].context.version;Z1(s,e,t.propertyName)}function O1e(e,t,n){const s=n[n.length-1].context.version,o=RD(s);Z1(s,e,t.propertyName);const a=er(o,"LowerBoundary");e.appendChild(a),k3(s,a,""+t.lowerBoundary);const l=er(o,"UpperBoundary");e.appendChild(l),k3(s,l,""+t.upperBoundary)}function M1e(e,t,n){const s=n[n.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&e.setAttribute("matchCase",t.matchCase.toString()),Z1(s,e,t.propertyName),k3(s,e,""+t.pattern)}function C3(e,t,n,r){const i=er(e,t);yr(i,r),n.appendChild(i)}function k3(e,t,n){C3(RD(e),"Literal",t,n)}function Z1(e,t,n){e==="2.0.0"?C3(QI[e],"ValueReference",t,n):C3(JI[e],"PropertyName",t,n)}function $1e(e,t){const n=er(Xd,"TimeInstant");e.appendChild(n);const r=er(Xd,"timePosition");n.appendChild(r),yr(r,t)}function I1e(e,t,n){const r=n[n.length-1],i=Object.assign({},r);i.node=e,Oi(i,LD,tu("Query"),t,n)}function RD(e){let t;return e==="2.0.0"?t=QI[e]:t=JI[e],t}const wi={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class P1e{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readPoint());return n}readPolygon(){const t=this.readUint32(),n=[];for(let r=0;r<t;r++)n.push(this.readLineString());return n}readWkbHeader(t){const r=this.readUint8()>0,i=this.readUint32(r),s=Math.floor((i&268435455)/1e3),o=!!(i&2147483648)||s===1||s===3,a=!!(i&1073741824)||s===2||s===3,l=!!(i&536870912),u=(i&268435455)%1e3,f=["XY",o?"Z":"",a?"M":""].join(""),c=l?this.readUint32(r):null;if(t!==void 0&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==f)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=o,this.hasM_=a,this.layout_=f,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(t){switch(t){case wi.POINT:return this.readPoint();case wi.LINE_STRING:return this.readLineString();case wi.POLYGON:case wi.TRIANGLE:return this.readPolygon();case wi.MULTI_POINT:return this.readMultiPoint();case wi.MULTI_LINE_STRING:return this.readMultiLineString();case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return this.readMultiPolygon();case wi.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,n){const r=this.readUint32(),i=[];for(let s=0;s<r;s++){const o=t.call(this,n);o&&i.push(o)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,wi.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,wi.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,wi.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case wi.POINT:return new gc(n,this.layout_);case wi.LINE_STRING:return new $f(n,this.layout_);case wi.POLYGON:case wi.TRIANGLE:return new iE(n,this.layout_);case wi.MULTI_POINT:return new hD(n,this.layout_);case wi.MULTI_LINE_STRING:return new U1(n,this.layout_);case wi.MULTI_POLYGON:case wi.POLYHEDRAL_SURFACE:case wi.TIN:return new rE(n,this.layout_);case wi.GEOMETRY_COLLECTION:return new jp(n);default:return null}}getSrid(){return this.srid_}}class OVe{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,n){const r=Object.assign.apply(null,n.split("").map((i,s)=>({[i]:t[s]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writePoint(t[r],n)}writePolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeLineString(t[r],n)}writeWkbHeader(t,n){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],n)}writeMultiLineString(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],n)}writeMultiPolygon(t,n){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],n)}writeGeometryCollection(t){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeGeometry(t[n])}findMinimumLayout(t,n="XYZM"){const r=(i,s)=>i===s?i:i==="XYZM"?s:s==="XYZM"?i:"XY";if(t instanceof zve)return r(t.getLayout(),n);if(t instanceof jp){const i=t.getGeometriesArray();for(let s=0;s<i.length&&n!=="XY";s++)n=this.findMinimumLayout(i[s],n)}return n}writeGeometry(t,n){const r={Point:wi.POINT,LineString:wi.LINE_STRING,Polygon:wi.POLYGON,MultiPoint:wi.MULTI_POINT,MultiLineString:wi.MULTI_LINE_STRING,MultiPolygon:wi.MULTI_POLYGON,GeometryCollection:wi.GEOMETRY_COLLECTION},i=t.getType(),s=r[i];if(!s)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(s,n),t instanceof zve?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,t.getCoordinates(),t.getLayout()):t instanceof jp&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((s,o)=>s+o[0],0),n=new ArrayBuffer(t),r=new DataView(n);let i=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(i,s[1]);break;case 4:r.setUint32(i,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,s[1],this.isLittleEndian_);break}i+=s[0]}),n}}class MVe extends jCe{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,n){return new au({geometry:this.readGeometry(t,n)})}readFeatures(t,n){let r=[];const i=this.readGeometry(t,n);return this.splitCollection&&i instanceof jp?r=i.getGeometriesArray():r=[i],r.map(s=>new au({geometry:s}))}readGeometry(t,n){const r=N1e(t);if(!r)return null;const s=new P1e(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(t,n),this.viewCache_=null,Oo(s,!1,n)}readProjection(t){const n=this.viewCache_||N1e(t);if(!n)return;const r=new P1e(n);return r.readWkbHeader(),r.getSrid()&&oi("EPSG:"+r.getSrid())||void 0}writeFeature(t,n){return this.writeGeometry(t.getGeometry(),n)}writeFeatures(t,n){return this.writeGeometry(new jp(t.map(r=>r.getGeometry())),n)}writeGeometry(t,n){n=this.adaptOptions(n);const r=new OVe({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=n.dataProjection&&oi(n.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(Oo(t,!0,n),i);const s=r.getBuffer();return this.hex_?$Ve(s):s}}function $Ve(e){const t=new Uint8Array(e);return Array.from(t.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function IVe(e){const t=new Uint8Array(e.length/2);for(let n=0;n<e.length/2;n++)t[n]=parseInt(e.substr(n*2,2),16);return new DataView(t.buffer)}function N1e(e){return typeof e=="string"?IVe(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}const PVe={POINT:gc,LINESTRING:$f,POLYGON:iE,MULTIPOINT:hD,MULTILINESTRING:U1,MULTIPOLYGON:rE},j3e="EMPTY",U3e="Z",q3e="M",NVe="ZM",pi={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},BVe={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class zVe{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,n){return n=n!==void 0?n:!1,t>="0"&&t<="9"||t=="."&&!n}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),n=this.index_;let r=t,i;if(t=="(")i=pi.LEFT_PAREN;else if(t==",")i=pi.COMMA;else if(t==")")i=pi.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")i=pi.NUMBER,r=this.readNumber_();else if(this.isAlpha_(t))i=pi.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")i=pi.EOF;else throw new Error("Unexpected character: "+t)}return{position:n,value:r,type:i}}readNumber_(){let t;const n=this.index_;let r=!1,i=!1;do t=="."?r=!0:(t=="e"||t=="E")&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!i&&(t=="e"||t=="E")||i&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let t;const n=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(n,this.index_--).toUpperCase()}}class jVe{constructor(t){this.lexer_=t,this.token_={position:0,type:pi.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const n=this.isTokenType(t);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const n=this.token_;if(this.isTokenType(pi.TEXT)){const r=n.value;r===U3e?t="XYZ":r===q3e?t="XYM":r===NVe&&(t="XYZM"),t!=="XY"&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(pi.LEFT_PAREN)){const t=[];do t.push(this.parseGeometry_());while(this.match(pi.COMMA));if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(pi.LEFT_PAREN)){let t;if(this.token_.type==pi.LEFT_PAREN?t=this.parsePointTextList_():t=this.parsePointList_(),this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(pi.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(pi.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(pi.NUMBER))t.push(i.value);else break}if(t.length==n)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(pi.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(pi.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(pi.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(pi.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(pi.TEXT)&&this.token_.value==j3e;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(pi.TEXT)){const n=t.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new jp([]);const o=this.parseGeometryCollectionText_();return new jp(o)}const i=PVe[n];if(!i)throw new Error("Invalid geometry type: "+n);let s;if(r)n=="POINT"?s=[NaN,NaN]:s=[];else switch(n){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new i(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class H3e extends XI{constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const n=new zVe(t);return new jVe(n).parse()}readFeatureFromText(t,n){const r=this.readGeometryFromText(t,n),i=new au;return i.setGeometry(r),i}readFeaturesFromText(t,n){let r=[];const i=this.readGeometryFromText(t,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const s=[];for(let o=0,a=r.length;o<a;++o){const l=new au;l.setGeometry(r[o]),s.push(l)}return s}readGeometryFromText(t,n){const r=this.parse_(t);return Oo(r,!1,n)}writeFeatureText(t,n){const r=t.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(t,n){if(t.length==1)return this.writeFeatureText(t[0],n);const r=[];for(let s=0,o=t.length;s<o;++s)r.push(t[s].getGeometry());const i=new jp(r);return this.writeGeometryText(i,n)}writeGeometryText(t,n){return W3e(Oo(t,!0,n))}}function G3e(e){const t=e.getCoordinates();return t.length===0?"":t.join(" ")}function UVe(e){const t=[],n=e.getPoints();for(let r=0,i=n.length;r<i;++r)t.push("("+G3e(n[r])+")");return t.join(",")}function qVe(e){const t=[],n=e.getGeometries();for(let r=0,i=n.length;r<i;++r)t.push(W3e(n[r]));return t.join(",")}function nP(e){const t=e.getCoordinates(),n=[];for(let r=0,i=t.length;r<i;++r)n.push(t[r].join(" "));return n.join(",")}function HVe(e){const t=[],n=e.getLineStrings();for(let r=0,i=n.length;r<i;++r)t.push("("+nP(n[r])+")");return t.join(",")}function V3e(e){const t=[],n=e.getLinearRings();for(let r=0,i=n.length;r<i;++r)t.push("("+nP(n[r])+")");return t.join(",")}function GVe(e){const t=[],n=e.getPolygons();for(let r=0,i=n.length;r<i;++r)t.push("("+V3e(n[r])+")");return t.join(",")}function VVe(e){const t=e.getLayout();let n="";return(t==="XYZ"||t==="XYZM")&&(n+=U3e),(t==="XYM"||t==="XYZM")&&(n+=q3e),n}const WVe={Point:G3e,LineString:nP,Polygon:V3e,MultiPoint:UVe,MultiLineString:HVe,MultiPolygon:GVe,GeometryCollection:qVe};function W3e(e){const t=e.getType(),n=WVe[t],r=n(e);let i=BVe[t];if(typeof e.getFlatCoordinates=="function"){const s=VVe(e);s.length>0&&(i+=" "+s)}return r.length===0?i+" "+j3e:i+"("+r+")"}const eo=[null,"http://www.opengis.net/wms"];function K1(e){return vje(e[0].version,"1.3")>=0}const YVe=Zt(eo,{Service:Ue(yWe),Capability:Ue(gWe)}),Y3e={Request:Ue(CWe),Exception:Ue(wWe),Layer:Ue(_We)},XVe=Zt(eo,{...Y3e,UserDefinedSymbolization:Ue(pWe)}),ZVe=Zt(eo,Y3e);class KVe extends ZI{constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const n=Rt({version:this.version},YVe,t,[]);return n||null}}const X3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(tke),OnlineResource:Ue(X1),ContactInformation:Ue(vWe),Fees:Ue(Dt),AccessConstraints:Ue(Dt)},JVe=Zt(eo,X3e),QVe=Zt(eo,{...X3e,LayerLimit:Ue(Ds),MaxWidth:Ue(Ds),MaxHeight:Ue(Ds)}),eWe=Zt(eo,{ContactPersonPrimary:Ue(bWe),ContactPosition:Ue(Dt),ContactAddress:Ue(xWe),ContactVoiceTelephone:Ue(Dt),ContactFacsimileTelephone:Ue(Dt),ContactElectronicMailAddress:Ue(Dt)}),tWe=Zt(eo,{ContactPerson:Ue(Dt),ContactOrganization:Ue(Dt)}),nWe=Zt(eo,{AddressType:Ue(Dt),Address:Ue(Dt),City:Ue(Dt),StateOrProvince:Ue(Dt),PostCode:Ue(Dt),Country:Ue(Dt)}),rWe=Zt(eo,{Format:Tn(Dt)}),Z3e={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(tke),BoundingBox:mi(Q3e),Dimension:mi(EWe),Attribution:Ue(hWe),AuthorityURL:mi(DWe),Identifier:mi(Dt),MetadataURL:mi(LWe),DataURL:mi(sh),FeatureListURL:mi(sh),Style:mi(RWe),Layer:mi(FD)},K3e=Zt(eo,{...Z3e,SRS:mi(Dt),Extent:Ue(SWe),ScaleHint:mi(AWe),LatLonBoundingBox:Ue((e,t)=>Q3e(e,t,!1)),Layer:mi(FD)}),J3e=Zt(eo,{...Z3e,CRS:mi(Dt),EX_GeographicBoundingBox:Ue(mWe),MinScaleDenominator:Ue(Ea),MaxScaleDenominator:Ue(Ea),Layer:mi(FD)}),iWe=Zt(eo,{Title:Ue(Dt),OnlineResource:Ue(X1),LogoURL:Ue(eke)}),sWe=Zt(eo,{westBoundLongitude:Ue(Ea),eastBoundLongitude:Ue(Ea),southBoundLatitude:Ue(Ea),northBoundLatitude:Ue(Ea)}),oWe=Zt(eo,{GetCapabilities:Ue(fF),GetMap:Ue(fF),GetFeatureInfo:Ue(fF)}),aWe=Zt(eo,{Format:mi(Dt),DCPType:mi(kWe)}),lWe=Zt(eo,{HTTP:Ue(TWe)}),uWe=Zt(eo,{Get:Ue(sh),Post:Ue(sh)}),cWe=Zt(eo,{Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),LegendURL:mi(eke),StyleSheetURL:Ue(sh),StyleURL:Ue(sh)}),fWe=Zt(eo,{Format:Ue(Dt),OnlineResource:Ue(X1)}),dWe=Zt(eo,{Keyword:Tn(Dt)});function hWe(e,t){return Rt({},iWe,e,t)}function pWe(e,t){return{SupportSLD:!!yc(e.getAttribute("UserDefinedSymbolization")),UserLayer:!!yc(e.getAttribute("UserLayer")),UserStyle:!!yc(e.getAttribute("UserStyle")),RemoteWFS:!!yc(e.getAttribute("RemoteWFS"))}}function Q3e(e,t,n=!0){const r=[gf(e.getAttribute("minx")),gf(e.getAttribute("miny")),gf(e.getAttribute("maxx")),gf(e.getAttribute("maxy"))],i=[gf(e.getAttribute("resx")),gf(e.getAttribute("resy"))],s={extent:r,res:i};return n&&(K1(t)?s.crs=e.getAttribute("CRS"):s.srs=e.getAttribute("SRS")),s}function mWe(e,t){const n=Rt({},sWe,e,t);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(r===void 0||i===void 0||s===void 0||o===void 0))return[r,i,s,o]}function gWe(e,t){return Rt({},K1(t)?ZVe:XVe,e,t)}function yWe(e,t){return Rt({},K1(t)?QVe:JVe,e,t)}function vWe(e,t){return Rt({},eWe,e,t)}function bWe(e,t){return Rt({},tWe,e,t)}function xWe(e,t){return Rt({},nWe,e,t)}function wWe(e,t){return Rt([],rWe,e,t)}function _We(e,t){const n=Rt({},K1(t)?J3e:K3e,e,t);return n.Layer===void 0?Object.assign(n,FD(e,t)):n}function FD(e,t){const n=K1(t),r=t[t.length-1],i=Rt({},n?J3e:K3e,e,t);if(!i)return;let s=yc(e.getAttribute("queryable"));s===void 0&&(s=r.queryable),i.queryable=s!==void 0?s:!1;let o=vp(e.getAttribute("cascaded"));o===void 0&&(o=r.cascaded),i.cascaded=o;let a=yc(e.getAttribute("opaque"));a===void 0&&(a=r.opaque),i.opaque=a!==void 0?a:!1;let l=yc(e.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),i.noSubsets=l!==void 0?l:!1;let u=gf(e.getAttribute("fixedWidth"));u||(u=r.fixedWidth),i.fixedWidth=u;let f=gf(e.getAttribute("fixedHeight"));f||(f=r.fixedHeight),i.fixedHeight=f;const c=["Style","AuthorityURL"];n?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(h){if(h in r){const p=i[h]||[];i[h]=p.concat(r[h])}});const d=["BoundingBox","Attribution"];return n?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(h){if(!(h in i)){const p=r[h];i[h]=p}}),i}function EWe(e,t){const n={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol")};return K1(t)&&Object.assign(n,{default:e.getAttribute("default"),multipleValues:yc(e.getAttribute("multipleValues")),nearestValue:yc(e.getAttribute("nearestValue")),current:yc(e.getAttribute("current")),values:Dt(e)}),n}function SWe(e,t){return{name:e.getAttribute("name"),default:e.getAttribute("default"),nearestValue:yc(e.getAttribute("nearestValue"))}}function AWe(e,t){return{min:gf(e.getAttribute("min")),max:gf(e.getAttribute("max"))}}function sh(e,t){return Rt({},fWe,e,t)}function CWe(e,t){return Rt({},oWe,e,t)}function kWe(e,t){return Rt({},lWe,e,t)}function TWe(e,t){return Rt({},uWe,e,t)}function fF(e,t){return Rt({},aWe,e,t)}function eke(e,t){const n=sh(e,t);if(n){const r=[vp(e.getAttribute("width")),vp(e.getAttribute("height"))];return n.size=r,n}}function DWe(e,t){const n=sh(e,t);if(n)return n.name=e.getAttribute("name"),n}function LWe(e,t){const n=sh(e,t);if(n)return n.type=e.getAttribute("type"),n}function RWe(e,t){return Rt({},cWe,e,t)}function tke(e,t){return Rt([],dWe,e,t)}const FWe="_feature",OWe="_layer";class MWe extends pD{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new hr,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,n){t.setAttribute("namespaceURI",this.featureNS_);const r=t.localName;let i=[];if(t.childNodes.length===0)return i;if(r=="msGMLOutput")for(let s=0,o=t.childNodes.length;s<o;s++){const a=t.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=n[0],f=OWe,c=l.localName.replace(f,"");if(this.layers_&&!this.layers_.includes(c))continue;const d=c+FWe;u.featureType=d,u.featureNS=this.featureNS_;const h={};h[d]=Tn(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=Zt([u.featureNS,null],h);l.setAttribute("namespaceURI",this.featureNS_);const g=Rt([],p,l,n,this.gmlFormat_);g&&g3(i,g)}if(r=="FeatureCollection"){const s=Rt([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);s&&(i=s)}return i}readFeaturesFromNode(t,n){const r={};return n&&Object.assign(r,this.getReadOptions(t,n)),this.readFeatures_(t,[r])}}const Wf=[null,"http://www.opengis.net/wmts/1.0"],J1=[null,"http://www.opengis.net/ows/1.1"],$We=Zt(Wf,{Contents:Ue(GWe)});let rP=class extends ZI{constructor(){super(),this.owsParser_=new I3e}readFromNode(t){let n=t.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(t);return r?(r.version=n,r=Rt(r,$We,t,[]),r||null):null}};const IWe=Zt(Wf,{Layer:mi(VWe),TileMatrixSet:mi(WWe)}),PWe=Zt(Wf,{Style:mi(YWe),Format:mi(Dt),TileMatrixSetLink:mi(XWe),Dimension:mi(ZWe),ResourceURL:mi(KWe)},Zt(J1,{Title:Ue(Dt),Abstract:Ue(Dt),WGS84BoundingBox:Ue(rke),BoundingBox:mi(JWe),Identifier:Ue(Dt)})),NWe=Zt(Wf,{LegendURL:mi(QWe)},Zt(J1,{Title:Ue(Dt),Identifier:Ue(Dt)})),BWe=Zt(Wf,{TileMatrixSet:Ue(Dt),TileMatrixSetLimits:Ue(tYe)}),zWe=Zt(Wf,{TileMatrixLimits:Tn(nYe)}),jWe=Zt(Wf,{TileMatrix:Ue(Dt),MinTileRow:Ue(Ds),MaxTileRow:Ue(Ds),MinTileCol:Ue(Ds),MaxTileCol:Ue(Ds)}),UWe=Zt(Wf,{Default:Ue(Dt),Value:mi(Dt)},Zt(J1,{Identifier:Ue(Dt)})),nke=Zt(J1,{LowerCorner:Tn(o6),UpperCorner:Tn(o6)}),qWe=Zt(Wf,{WellKnownScaleSet:Ue(Dt),TileMatrix:mi(eYe)},Zt(J1,{SupportedCRS:Ue(Dt),Identifier:Ue(Dt),BoundingBox:Ue(rke)})),HWe=Zt(Wf,{TopLeftCorner:Ue(o6),ScaleDenominator:Ue(Ea),TileWidth:Ue(Ds),TileHeight:Ue(Ds),MatrixWidth:Ue(Ds),MatrixHeight:Ue(Ds)},Zt(J1,{Identifier:Ue(Dt)}));function GWe(e,t){return Rt({},IWe,e,t)}function VWe(e,t){return Rt({},PWe,e,t)}function WWe(e,t){return Rt({},qWe,e,t)}function YWe(e,t){const n=Rt({},NWe,e,t);if(!n)return;const r=e.getAttribute("isDefault")==="true";return n.isDefault=r,n}function XWe(e,t){return Rt({},BWe,e,t)}function ZWe(e,t){return Rt({},UWe,e,t)}function KWe(e,t){const n=e.getAttribute("format"),r=e.getAttribute("template"),i=e.getAttribute("resourceType"),s={};return n&&(s.format=n),r&&(s.template=r),i&&(s.resourceType=i),s}function rke(e,t){const n=Rt([],nke,e,t);if(n.length==2)return _I(n)}function JWe(e,t){const n=e.getAttribute("crs"),r=Rt([],nke,e,t);if(r.length==2)return{extent:_I(r),crs:n}}function QWe(e,t){const n={};return n.format=e.getAttribute("format"),n.href=X1(e),n}function o6(e,t){const n=Dt(e).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function eYe(e,t){return Rt({},HWe,e,t)}function tYe(e,t){return Rt([],zWe,e,t)}function nYe(e,t){return Rt({},jWe,e,t)}const rYe=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:yHe,GML:HI,GPX:HHe,GeoJSON:gD,IGC:CGe,IIIFInfo:FGe,KML:bje,MVT:UCe,OWS:I3e,Polyline:lVe,TopoJSON:xje,WFS:kVe,WKB:MVe,WKT:H3e,WMSCapabilities:KVe,WMSGetFeatureInfo:MWe,WMTSCapabilities:rP},Symbol.toStringTag,{value:"Module"})),uE=34962,cE=34963,iYe=35040,iP=35044,i2=35048,sYe=5121,oYe=5123,aYe=5125,ike=5126,B1e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function lYe(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!wje},t);const n=B1e.length;for(let r=0;r<n;++r)try{const i=e.getContext(B1e[r],t);if(i)return i}catch{}return null}const uYe={STATIC_DRAW:iP,STREAM_DRAW:iYe,DYNAMIC_DRAW:i2};class t1{constructor(t,n){this.array_=null,this.type_=t,Dc(t===uE||t===cE,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:uYe.STATIC_DRAW}ofSize(t){return this.array_=new(rA(this.type_))(t),this}fromArray(t){return this.array_=rA(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(rA(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const n=rA(this.type_);if(!(t instanceof n))throw new Error(`Expected ${n}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function rA(e){switch(e){case uE:return Float32Array;case cE:return Uint32Array;default:return Float32Array}}const iA={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},cYe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,fYe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class z1e{constructor(t){this.gl_=t.webGlContext;const n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||cYe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,t.fragmentShader||fYe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(o=>{this.uniforms_.push({value:t.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(t,n,r,i){const s=this.getGL(),o=t.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=Ei(s.canvas);if(!t.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),r&&r(s,t),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(t):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const df={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},$s={UNSIGNED_BYTE:sYe,UNSIGNED_SHORT:oYe,UNSIGNED_INT:aYe,FLOAT:ike},T3={};function j1e(e){return"shared/"+e}let U1e=0;function dYe(){const e="unique/"+U1e;return U1e+=1,e}function hYe(e){let t=T3[e];if(!t){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",t={users:0,context:lYe(n)},T3[e]=t}return t.users+=1,t.context}function pYe(e){const t=T3[e];if(!t||(t.users-=1,t.users>0))return;const n=t.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete T3[e]}class mYe extends qCe{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?j1e(t.canvasCacheKey):dYe(),this.gl_=hYe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(iA.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(iA.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ko(),this.offsetScaleMatrix_=Ko(),this.tmpMat4_=EI(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new z1e({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new z1e({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const n in t)this.uniforms_.push({name:n,value:t[n]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===j1e(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n}bindBuffer(t){const n=this.gl_,r=Ei(t);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:t,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const n=this.gl_;this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const n=Ei(t);delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(iA.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(iA.RESTORED,this.boundHandleWebGLContextRestored_),pYe(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,n,r){const i=this.gl_,s=this.getCanvas(),o=t.size,a=t.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(t,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const t=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(t,n,r){const i=this.getGL();this.bindBuffer(t);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(t,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-t,a=t*s;r.drawElements(r.TRIANGLES,o,i,a)}finalizeDraw(t,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(t,null,n,r):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const n=t.size,r=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(df.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(df.ZOOM,t.viewState.zoom),this.setUniformFloatValue(df.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(df.PIXEL_RATIO,i),this.setUniformFloatVec2(df.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(df.ROTATION,r)}applyHitDetectionUniform(t){const n=this.getUniformLocation(df.HIT_DETECTION);this.getGL().uniform1i(n,t?1:0),t&&this.setUniformFloatValue(df.PIXEL_RATIO,.5)}applyUniforms(t){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(t):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,x3(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(t,n){this.gl_.useProgram(t),this.currentProgram_=t,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(t,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),i}getProgram(t,n){const r=this.gl_,i=this.compileShader(t,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(t){const n=Ei(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][t]===void 0&&(this.uniformLocationsByProgram_[n][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[n][t]}getAttributeLocation(t){const n=Ei(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][t]===void 0&&(this.attribLocationsByProgram_[n][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[n][t]}makeProjectionTransform(t,n){const r=t.size,i=t.viewState.rotation,s=t.viewState.resolution,o=t.viewState.center;return SI(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(t,n){this.gl_.uniform1f(this.getUniformLocation(t),n)}setUniformFloatVec2(t,n){this.gl_.uniform2fv(this.getUniformLocation(t),n)}setUniformFloatVec4(t,n){this.gl_.uniform4fv(this.getUniformLocation(t),n)}setUniformMatrixValue(t,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,n)}enableAttributeArray_(t,n,r,i,s){const o=this.getAttributeLocation(t);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,n,r,!1,i,s))}enableAttributes(t){const n=gYe(t);let r=0;for(let i=0;i<t.length;i++){const s=t[i];this.enableAttributeArray_(s.name,s.size,s.type||ike,n,r),r+=s.size*ske(s.type)}}handleWebGLContextLost(t){_je(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,u=0,f=s.RGBA,c=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,t[0],t[1],u,f,c,n):n?s.texImage2D(s.TEXTURE_2D,a,l,f,c,n):s.texImage2D(s.TEXTURE_2D,a,l,t[0],t[1],u,f,c,null),r}}function gYe(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];t+=r.size*ske(r.type)}return t}function ske(e){switch(e){case $s.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $s.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $s.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $s.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class fE extends Eje{constructor(t,n){super(t),n=n||{},this.inversePixelTransform_=Ko(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(Z4.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(_g.PRECOMPOSE)){const i=new iF(_g.PRECOMPOSE,void 0,n,t);r.dispatchEvent(i)}}dispatchPostComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(_g.POSTCOMPOSE)){const i=new iF(_g.POSTCOMPOSE,void 0,n,t);r.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=t.layerStatesArray.length;o<a;o++){const l=t.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof fE)){n=!0;continue}const f=l.getClassName();if((n||f!==i)&&(r+=1,n=!1),i=f,u===this)break}const s="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new mYe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(Z4.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,n,r){const i=this.getLayer();if(i.hasListener(t)){SI(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new iF(t,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(t,n){this.dispatchRenderEvent_(_g.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(_g.POSTRENDER,t,n)}}const rf=new Uint8Array(4);class oke{constructor(t,n){this.helper_=t;const r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){Sje(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,n){if(t<0||n<0||t>this.size_[0]||n>=this.size_[1])return rf[0]=0,rf[1]=0,rf[2]=0,rf[3]=0,rf;this.readAll();const r=Math.floor(t)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return rf[0]=this.data_[r*4],rf[1]=this.data_[r*4+1],rf[2]=this.data_[r*4+2],rf[3]=this.data_[r*4+3],rf}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t[0],t[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}const v_={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"},q1e=.985;function ake(e,t){t=t||[];const n=256,r=n-1;return t[0]=Math.floor(e/n/n/n)/r,t[1]=Math.floor(e/n/n)%n/r,t[2]=Math.floor(e/n)%n/r,t[3]=e%n/r,t}function lke(e){let t=0;const n=256,r=n-1;return t+=Math.round(e[0]*n*n*n*r),t+=Math.round(e[1]*n*n*r),t+=Math.round(e[2]*n*r),t+=Math.round(e[3]*r),t}function uke(){const e='const t="GENERATE_POLYGON_BUFFERS",e="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function x(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],u=e[2],i=e[3],f=e[4],s=e[5];return t[0]=i/n,t[1]=-o/n,t[2]=-u/n,t[3]=x/n,t[4]=(u*s-i*f)/n,t[5]=-(x*s-o*f)/n,t}function o(t,e,n=2){const r=e&&e.length,x=r?e[0]*n:t.length;let o=u(t,0,x,n,!0);const i=[];if(!o||o.next===o.prev)return i;let s,l,c;if(r&&(o=function(t,e,n,r){const x=[];for(let n=0,o=e.length;n<o;n++){const i=u(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);i===i.next&&(i.steiner=!0),x.push(g(i))}x.sort(y);for(let t=0;t<x.length;t++)n=h(x[t],n);return n}(t,e,o,n)),t.length>80*n){s=1/0,l=1/0;let e=-1/0,r=-1/0;for(let o=n;o<x;o+=n){const n=t[o],x=t[o+1];n<s&&(s=n),x<l&&(l=x),n>e&&(e=n),x>r&&(r=x)}c=Math.max(e-s,r-l),c=0!==c?32767/c:0}return f(o,i,n,s,l,c,0),i}function u(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,u=n-r;o<n;o+=r)x+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=z(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=z(x/r|0,t[x],t[x+1],o);return o&&M(o,o.next)&&(F(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(F(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function f(t,e,n,r,x,o,u){if(!t)return;!u&&o&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=v(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let u=x,i=0;for(let t=0;t<n&&(i++,u=u.nextZ,u);t++);let f=n;for(;i>0||f>0&&u;)0!==i&&(0===f||!u||x.z<=u.z)?(r=x,x=x.nextZ,i--):(r=u,u=u.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=u}o.nextZ=null,n*=2}while(e>1)}(x)}(t,r,x,o);let y=t;for(;t.prev!==t.next;){const h=t.prev,p=t.next;if(o?l(t,r,x,o):s(t))e.push(h.i,t.i,p.i),F(t),t=p.next,y=p.next;else if((t=p)===y){u?1===u?f(t=c(i(t),e),e,n,r,x,o,2):2===u&&a(t,e,n,r,x,o):f(i(t),e,n,r,x,o,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;const x=e.x,o=n.x,u=r.x,i=e.y,f=n.y,s=r.y,l=x<o?x<u?x:u:o<u?o:u,c=i<f?i<s?i:s:f<s?f:s,a=x>o?x>u?x:u:o>u?o:u,y=i>f?i>s?i:s:f>s?f:s;let h=r.next;for(;h!==e;){if(h.x>=l&&h.x<=a&&h.y>=c&&h.y<=y&&b(x,i,o,f,u,s,h.x,h.y)&&d(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function l(t,e,n,r){const x=t.prev,o=t,u=t.next;if(d(x,o,u)>=0)return!1;const i=x.x,f=o.x,s=u.x,l=x.y,c=o.y,a=u.y,y=i<f?i<s?i:s:f<s?f:s,h=l<c?l<a?l:a:c<a?c:a,p=i>f?i>s?i:s:f>s?f:s,g=l>c?l>a?l:a:c>a?c:a,Z=v(y,h,e,n,r),M=v(p,g,e,n,r);let w=t.prevZ,m=t.nextZ;for(;w&&w.z>=Z&&m&&m.z<=M;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=Z;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=M;){if(m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e){let n=t;do{const r=n.prev,x=n.next.next;!M(r,x)&&w(r,n,n.next,x)&&E(r,x)&&E(x,r)&&(e.push(r.i,n.i,x.i),F(n),F(n.next),n=t=x),n=n.next}while(n!==t);return i(n)}function a(t,e,n,r,x,o){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&Z(u,t)){let s=I(u,t);return u=i(u,u.next),s=i(s,s.next),f(u,e,n,r,x,o,0),void f(s,e,n,r,x,o,0)}t=t.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,x=t.y;let o,u=-1/0;do{if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>u&&(u=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const i=o,f=o.x,s=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&b(x<s?r:u,x,f,s,x<s?u:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);E(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&p(o,n)))&&(o=n,l=e)}n=n.next}while(n!==i);return o}(t,e);if(!n)return e;const r=I(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function v(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,x,o,u,i){return(x-u)*(e-i)>=(t-u)*(o-i)&&(t-u)*(r-i)>=(n-u)*(e-i)&&(n-u)*(o-i)>=(x-u)*(r-i)}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||M(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){const x=A(d(t,e,n)),o=A(d(t,e,r)),u=A(d(n,r,t)),i=A(d(n,r,e));return x!==o&&u!==i||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==u||!m(n,t,r))||!(0!==i||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function E(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function I(t,e){const n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){const x=P(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}new Array(6);const B=[],N={vertexPosition:0,indexPosition:0};function R(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function S(t,e,n,r,x,o){const u=3+x,i=t[e+0],f=t[e+1],s=B;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/u;return R(n,l,i,f,0),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,1),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,2),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,3),s.length&&n.set(s,l+3),l+=u,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,N.vertexPosition=l,N.indexPosition=c,N}function T(t,e,n,x,o,u,i,f,s,l,c){const a=10+f.length,y=u.length/a,h=[t[e+0],t[e+1]],p=[t[n],t[n+1]],v=t[e+2],g=t[n+2],b=r(s,[...h]),Z=r(s,[...p]);function d(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],u=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),i=[(n[0]-t[0])/u,(n[1]-t[1])/u],f=0===r||0===u?0:Math.acos((s=i[0]*x[0]+i[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return i[0]*o[0]+i[1]*o[1]>0?f:2*Math.PI-f}let M=-1,w=-1,m=c;const A=null!==o;if(null!==x){M=d(b,Z,r(s,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((M-Math.PI)/2))}if(A){w=d(Z,b,r(s,[...[t[o],t[o+1]]])),Math.cos(w)<=.985&&(m+=Math.tan((Math.PI-w)/2))}function E(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(0,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(1,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(2,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(3,c)),u.push(...f),i.push(y,y+1,y+2,y+1,y+3,y+2),{length:l+Math.sqrt((Z[0]-b[0])*(Z[0]-b[0])+(Z[1]-b[1])*(Z[1]-b[1])),angle:m}}function _(t,e,n,r,x){const u=2+x;let i=e;const f=t.slice(i,i+x);i+=x;const s=t[i++];let l=0;const c=new Array(s-1);for(let e=0;e<s;e++)l+=t[i++],e<s-1&&(c[e]=l);const a=t.slice(i,i+2*l),y=o(a,c,2);for(let t=0;t<y.length;t++)r.push(y[t]+n.length/u);for(let t=0;t<a.length;t+=2)n.push(a[t],a[t+1],...f);return i+2*l}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case e:{const t=3,e=2,n=o.customAttributesSize,r=e+n,x=new Float32Array(o.renderInstructions),u=x.length/r,i=4*u*(n+t),f=new Uint32Array(6*u),s=new Float32Array(i);let l;for(let t=0;t<x.length;t+=r)l=S(x,t,s,f,n,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},o);O.postMessage(c,[s.buffer,f.buffer,x.buffer]);break}case n:{const t=[],e=[],n=o.customAttributesSize,r=3,u=new Float32Array(o.renderInstructions);let i=0;const f=[1,0,0,1,0,0];let s,l;for(x(f,o.renderInstructionsTransform);i<u.length;){l=Array.from(u.slice(i,i+n)),i+=n,s=u[i++];const x=i,o=i+(s-1)*r,c=u[x]===u[o]&&u[x+1]===u[o+1];let a=0,y=0;for(let n=0;n<s-1;n++){let h=null;n>0?h=i+(n-1)*r:c&&(h=o-r);let p=null;n<s-2?p=i+(n+2)*r:c&&(p=x+r);const v=T(u,i+n*r,i+(n+1)*r,h,p,t,e,l,f,a,y);a=v.length,y=v.angle}i+=s*r}const c=Uint32Array.from(e),a=Float32Array.from(t),y=Object.assign({vertexBuffer:a.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},o);O.postMessage(y,[a.buffer,c.buffer,u.buffer]);break}case t:{const t=[],e=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let x=0;for(;x<r.length;)x=_(r,x,t,e,n);const u=Uint32Array.from(e),i=Float32Array.from(t),f=Object.assign({vertexBuffer:i.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},o);O.postMessage(f,[i.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}function cke(e,t){const n=e.viewState.projection,i=t.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=e.extent,a=i?eu(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}class fke extends fE{constructor(t,n){const r=n.uniforms||{},i=Ko();r[df.PROJECTION_MATRIX]=i,super(t,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new t1(uE,i2),this.indicesBuffer_=new t1(cE,i2),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const s=n.attributes?n.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:$s.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:$s.FLOAT},{name:"a_index",size:1,type:$s.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:$s.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:$s.FLOAT})),this.attributes.push(...s),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=yD(),this.currentTransform_=i,this.renderTransform_=Ko(),this.invertRenderTransform_=Ko(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=uke(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===v_.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,X_(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[bp(o,xp.ADDFEATURE,this.handleSourceFeatureAdded_,this),bp(o,xp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),bp(o,xp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),bp(o,xp.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Ei(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new oke(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const n=t.feature;this.featureCache_[Ei(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}}handleSourceFeatureDelete_(t){const n=t.feature;delete this.featureCache_[Ei(n)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,s]=cke(t,this.getLayer());return this.renderWorlds(t,!1,r,i,s),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),this.helper.getCanvas()}prepareFrameInternal(t){const n=this.getLayer(),r=n.getSource(),i=t.viewState,s=!t.viewHints[Up.ANIMATING]&&!t.viewHints[Up.INTERACTING],o=!W_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,f=n instanceof vD?n.getRenderBuffer():0,c=AI(t.extent,f*u);r.loadFeatures(c,u,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const n=Ko();this.helper.makeProjectionTransform(t,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let f=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],rh(n,l),this.renderInstructions_[++f]=l[0],this.renderInstructions_[++f]=l[1],this.hitDetectionEnabled_){const h=ake(f+5,u);this.renderInstructions_[++f]=h[0],this.renderInstructions_[++f]=h[1],this.renderInstructions_[++f]=h[2],this.renderInstructions_[++f]=h[3],this.renderInstructions_[++f]=Number(d)}for(let h=0;h<this.customAttributes.length;h++){const p=this.customAttributes[h].callback(o.feature,o.properties);this.renderInstructions_[++f]=p}}const c={id:++this.lastSentId,type:v_.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};c.projectionTransform=n,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,n,r,i,s){if(Dc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=rh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=lke(l),f=this.renderInstructions_[u],c=Math.floor(f).toString(),h=this.getLayer().getSource().getFeatureByUid(c);if(h)return i(h,this.getLayer(),null)}renderWorlds(t,n,r,i,s){let o=r;this.helper.useProgram(this.program_,t),n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),CI(this.currentTransform_,o*s,0),G_(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(n);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){HCe(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class yYe{constructor(t,n){this.name=t,this.data=n,this.texture_=null}getTexture(t){if(!this.texture_){const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}class vYe extends Aje{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Cl.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===Ts.LOADED,this.loaded)this.uploadTile();else{if(t instanceof kI){const n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(Cl.CHANGE,this.handleTileChange_)}}uploadTile(){Rd()}setReady(){this.ready=!0,this.dispatchEvent(Cl.CHANGE)}handleTileChange_(){this.tile.getState()===Ts.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Cl.CHANGE,this.handleTileChange_)}}function dke(e,t,n){const r=n?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r)}function bYe(e,t,n,r){dke(e,t,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}function H1e(e,t,n,r,i,s){const o=e.getGL();let a,l;n instanceof Float32Array?(a=o.FLOAT,e.getExtension("OES_texture_float"),l=e.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),dke(o,t,s&&l);const u=n.byteLength/r[1];let f=1;u%8===0?f=8:u%4===0?f=4:u%2===0&&(f=2);let c;switch(i){case 1:{c=o.LUMINANCE;break}case 2:{c=o.LUMINANCE_ALPHA;break}case 3:{c=o.RGB;break}case 4:{c=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,f),o.texImage2D(o.TEXTURE_2D,0,c,r[0],r[1],0,c,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let nv=null;function xYe(){nv=t0(1,1,void 0,{willReadFrequently:!0})}class wYe extends vYe{constructor(t){super(t),this.textures=[],this.renderSize_=Ec(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const n=new t1(uE,iP);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(t.tile)}setHelper(t){var r;const n=(r=this.helper)==null?void 0:r.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)n.deleteTexture(this.textures[i])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,n=t.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof kI||r instanceof TI?i=r.getImage():i=r.getData();const s=jve(i);if(s){const y=n.createTexture();this.textures.push(y),this.bandCount=4,bYe(n,y,s,r.interpolate),this.setReady();return}i=Uve(i);const o=r.getSize(),a=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=i instanceof Float32Array,u=a[0]*a[1],f=l?Float32Array:Uint8Array,c=f.BYTES_PER_ELEMENT,d=i.byteLength/a[1];this.bandCount=Math.floor(d/c/a[0]);const h=Math.ceil(this.bandCount/4);if(h===1){const y=n.createTexture();this.textures.push(y),H1e(t,y,i,a,this.bandCount,r.interpolate),this.setReady();return}const p=new Array(h);for(let y=0;y<h;++y){const w=n.createTexture();this.textures.push(w);const _=y<h-1?4:(this.bandCount-1)%4+1;p[y]=new f(u*_)}let g=0,v=0;const x=a[0]*this.bandCount;for(let y=0;y<a[1];++y){for(let w=0;w<x;++w){const _=i[v+w],A=Math.floor(g/this.bandCount),T=w%this.bandCount,D=Math.floor(T/4),k=p[D],R=k.length/u,O=T%4;k[A*R+O]=_,++g}v+=d/c}for(let y=0;y<h;++y){const w=this.textures[y],_=p[y],A=_.length/u;H1e(t,w,_,a,A,r.interpolate)}this.setReady()}getImagePixelData_(t,n,r){const i=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1];nv||xYe(),nv.clearRect(0,0,1,1);const a=t.width,l=t.height,u=a-2*i,f=l-2*i,c=i+Math.floor(u*(n/s)),d=i+Math.floor(f*(r/o));let h;try{nv.drawImage(t,c,d,1,1,0,0,1,1),h=nv.getImageData(0,0,1,1).data}catch{return nv=null,null}return h}getArrayPixelData_(t,n,r,i){const s=this.gutter,o=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],f=l+2*s,c=u+2*s,d=s+Math.floor(l*(r/o)),h=s+Math.floor(u*(i/a));if(t instanceof DataView){const g=t.byteLength/(f*c),v=g*(h*f+d),x=t.buffer.slice(v,v+g);return new DataView(x)}const p=this.bandCount*(h*f+d);return t.slice(p,p+this.bandCount)}getPixelData(t,n){if(!this.loaded)return null;if(this.tile instanceof GCe){const r=this.tile.getData(),i=Uve(r);if(i){const s=this.tile.getSize();return this.getArrayPixelData_(i,s,t,n)}return this.getImagePixelData_(jve(r),t,n)}return this.getImagePixelData_(this.tile.getImage(),t,n)}}const _Ye={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function G1e(e){return 1/(e+2)}function EYe(){return{tileIds:new Set,representationsByZ:{}}}function V1e(e,t){return e.tileIds.has(Ei(t))}function W1e(e,t,n){const r=e.representationsByZ;n in r||(r[n]=new Set),r[n].add(t),e.tileIds.add(Ei(t.tile))}function dF(e,t){const n=e.layerStatesArray[e.layerIndex];n.extent&&(t=e0(t,WCe(n.extent,e.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=e0(t,i))}return t}function a6(e,t){return`${e.getKey()},${e.getRevision()},${tv(t)}`}class SYe extends fE{constructor(t,n){super(t,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ko(),this.tempMat4=EI(),this.tempTileRange_=new Cje(0,0,0,0),this.tempTileCoord_=K4(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new VCe(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const r=this.getLayer().getRenderSource();return!r||dD(dF(t,t.extent))?!1:r.getState()==="ready"}createTileRepresentation(t){return Rd()}enqueueTiles(t,n,r,i,s){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),f=l.getGutterForProjection(o.projection),c=Ei(l);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],h=this.tileRepresentationCache,p=a.getMapInternal(),g=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let v=r;v>=g;--v){const x=u.getTileRangeForExtentAndZ(n,v,this.tempTileRange_),y=u.getResolution(v);for(let w=x.minX;w<=x.maxX;++w)for(let _=x.minY;_<=x.maxY;++_){const A=K4(v,w,_,this.tempTileCoord_),T=a6(l,A);let D,k;if(h.containsKey(T)&&(D=h.get(T),k=D.tile),(!D||D.tile.key!==l.getKey())&&(k=l.getTile(v,w,_,t.pixelRatio,o.projection),!k)||V1e(i,k))continue;D?D.setTile(k):(D=this.createTileRepresentation({tile:k,grid:u,helper:this.helper,gutter:f}),h.set(T,D)),W1e(i,D,v);const R=k.getKey();d[R]=!0,k.getState()===Ts.IDLE&&(t.tileQueue.isKeyQueued(R)||t.tileQueue.enqueue([k,c,u.getTileCoordCenter(A),y]))}}}beforeTilesRender(t,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,n,r,i,s,o,a,l,u,f,c){}renderTileMask(t,n,r,i){}drawTile_(t,n,r,i,s,o,a){if(!n.ready)return;const u=n.tile.tileCoord,f=tv(u),c=f in o?o[f]:1,d=a.getResolution(r),h=Ec(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),g=a.getTileCoordExtent(u),v=c<1?-1:G1e(r);c<1&&(t.animate=!0);const x=t.viewState,y=x.center[0],w=x.center[1],_=h[0]+2*i,A=h[1]+2*i,T=_/A,D=(y-p[0])/(h[0]*d),k=(p[1]-w)/(h[1]*d),R=x.resolution/d,O=u[1],B=u[2];kje(this.tileTransform_),qve(this.tileTransform_,2/(t.size[0]*R/_),-2/(t.size[1]*R/_)),Tje(this.tileTransform_,x.rotation),qve(this.tileTransform_,1,1/T),CI(this.tileTransform_,(h[0]*(O-D)-i)/_,(h[1]*(B-k)-i)/A),this.renderTile(n,this.tileTransform_,t,s,d,h,p,g,v,i,c)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,t);const r=t.viewState,i=this.getLayer(),s=i.getRenderSource(),o=s.getTileGridForProjection(r.projection),a=s.getGutterForProjection(r.projection),l=dF(t,t.extent),u=o.getZForResolution(r.resolution,s.zDirection),f=EYe(),c=i.getPreload();if(t.nextExtent){const w=o.getZForResolution(r.nextResolution,s.zDirection),_=dF(t,t.nextExtent);this.enqueueTiles(t,_,w,f,c)}this.enqueueTiles(t,l,u,f,0),c>0&&setTimeout(()=>{this.enqueueTiles(t,l,u-1,f,c-1)},0);const d={};let h=!1;const p=f.representationsByZ;if(u in p){const w=Ei(this),_=t.time;for(const A of p[u]){const T=A.tile;if((T instanceof TI||T instanceof DI)&&T.getState()===Ts.EMPTY)continue;const D=T.tileCoord;if(A.ready){const O=T.getAlpha(w,_);if(O===1){T.endTransition(w);continue}h=!0;const B=tv(D);d[B]=O}if(this.renderComplete=!1,this.findAltTiles_(o,D,u+1,f))continue;const R=o.getMinZoom();for(let O=u-1;O>=R&&!this.findAltTiles_(o,D,O,f);--O);}}const g=Object.keys(p).map(Number).sort(Dje);if(this.beforeTilesMaskRender(t))for(let w=0,_=g.length;w<_;++w){const A=g[w];for(const T of p[A]){const D=T.tile.tileCoord;if(tv(D)in d)continue;const R=o.getTileCoordExtent(D);this.renderTileMask(T,A,R,G1e(A))}}this.beforeTilesRender(t,h);for(let w=0,_=g.length;w<_;++w){const A=g[w];for(const T of p[A]){const D=T.tile.tileCoord;tv(D)in d||this.drawTile_(t,T,A,a,l,d,o)}}if(u in p)for(const w of p[u]){const _=w.tile.tileCoord;tv(_)in d&&this.drawTile_(t,w,u,a,l,d,o)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const x=this.helper.getCanvas(),y=this.tileRepresentationCache;for(;y.canExpireCache();)y.pop().dispose();return this.postRender(n,t),x}beforeFinalize(t){}findAltTiles_(t,n,r,i){const s=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let f=s.minY;f<=s.maxY;++f){const c=a6(l,[r,u,f]);let d=!1;if(a.containsKey(c)){const h=a.get(c);h.ready&&!V1e(i,h.tile)&&(W1e(i,h,r),d=!0)}d||(o=!1)}return o}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(n=>n.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Qn={..._Ye,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},_C={TEXTURE_COORD:"a_textureCoord"},AYe=[{name:_C.TEXTURE_COORD,size:2,type:$s.FLOAT}];class CYe extends SYe{constructor(t,n){super(t,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new t1(cE,iP),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}super.removeHelper()}createTileRepresentation(t){return new wYe(t)}beforeTilesRender(t,n){super.beforeTilesRender(t,n),this.helper.useProgram(this.program_,t)}renderTile(t,n,r,i,s,o,a,l,u,f,c){const d=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(AYe);let h=0;for(;h<t.textures.length;){const T=`${Qn.TILE_TEXTURE_ARRAY}[${h}]`;this.helper.bindTexture(t.textures[h],h,T),++h}for(let T=0;T<this.paletteTextures_.length;++T){const D=this.paletteTextures_[T],k=D.getTexture(d);this.helper.bindTexture(k,h,D.name),++h}const p=r.viewState,g=o[0]+2*f,v=o[1]+2*f,y=t.tile.tileCoord,w=y[1],_=y[2];this.helper.setUniformMatrixValue(Qn.TILE_TRANSFORM,x3(this.tempMat4,n)),this.helper.setUniformFloatValue(Qn.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(Qn.DEPTH,u);let A=i;f>0&&(A=l,e0(A,i,A)),this.helper.setUniformFloatVec4(Qn.RENDER_EXTENT,A),this.helper.setUniformFloatValue(Qn.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(Qn.ZOOM,p.zoom),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Qn.TEXTURE_PIXEL_HEIGHT,v),this.helper.setUniformFloatValue(Qn.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_X,a[0]+w*o[0]*s-f*s),this.helper.setUniformFloatValue(Qn.TEXTURE_ORIGIN_Y,a[1]-_*o[1]*s+f*s),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),s=rh(r.pixelToCoordinateTransform,t.slice()),o=r.viewState,a=i.getExtent();if(a&&!dv(WCe(a,o.projection),s))return null;const l=i.getSources(_I([s]),o.resolution);let u,f,c;for(u=l.length-1;u>=0;--u)if(f=l[u],f.getState()==="ready"){if(c=f.getTileGridForProjection(o.projection),f.getWrapX())break;const h=c.getExtent();if(!h||dv(h,s))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let h=c.getZForResolution(o.resolution);h>=c.getMinZoom();--h){const p=c.getTileCoordForCoordAndZ(s,h),g=a6(f,p);if(!d.containsKey(g))continue;const v=d.get(g),x=v.tile;if((x instanceof TI||x instanceof DI)&&x.getState()===Ts.EMPTY)return null;if(!v.loaded)continue;const y=c.getOrigin(h),w=Ec(c.getTileSize(h)),_=c.getResolution(h),A=(s[0]-y[0])/_-p[1]*w[0],T=(y[1]-s[1])/_-p[2]*w[1];return v.getPixelData(A,T)}return null}disposeInternal(){const t=this.helper;if(t){const n=t.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}function kYe(e,t){return`operator_${e}_${Object.keys(t.functions).length}`}function Ug(e){const t=e.toString();return t.includes(".")?t:t+".0"}function sP(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${e.length}(${e.map(Ug).join(", ")})`}function EC(e){const t=Z_(e),n=t.length>3?t[3]:1;return sP([t[0]/255,t[1]/255,t[2]/255,n])}function TYe(e){const t=Ec(e);return sP(t)}const hF={};let DYe=0;function pv(e){return e in hF||(hF[e]=DYe++),hF[e]}function Fd(e){return Ug(pv(e))}function oP(e){return"u_var_"+e}function l6(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const pF="getBandValue",hke="u_paletteTextures",pke="featureId",mke="geometryType";function LYe(e,t,n,r){const i=Lje(e,t,n);return aP(i,t,r)}function ri(e){return(t,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=aP(n.args[o],r,t);return e(s,t)}}const RYe={[ur.Get]:(e,t)=>{const r=t.args[0].value;return r in e.properties||(e.properties[r]={name:r,type:t.type}),(e.inFragmentShader?"v_prop_":"a_prop_")+r},[ur.Id]:e=>(e.featureId=!0,(e.inFragmentShader?"v_":"a_")+pke),[ur.GeometryType]:e=>(e.geometryType=!0,(e.inFragmentShader?"v_":"a_")+mke),[ur.LineMetric]:()=>"currentLineMetric",[ur.Var]:(e,t)=>{const r=t.args[0].value;return r in e.variables||(e.variables[r]={name:r,type:t.type}),oP(r)},[ur.Resolution]:()=>"u_resolution",[ur.Zoom]:()=>"u_zoom",[ur.Time]:()=>"u_time",[ur.Any]:ri(e=>`(${e.join(" || ")})`),[ur.All]:ri(e=>`(${e.join(" && ")})`),[ur.Not]:ri(([e])=>`(!${e})`),[ur.Equal]:ri(([e,t])=>`(${e} == ${t})`),[ur.NotEqual]:ri(([e,t])=>`(${e} != ${t})`),[ur.GreaterThan]:ri(([e,t])=>`(${e} > ${t})`),[ur.GreaterThanOrEqualTo]:ri(([e,t])=>`(${e} >= ${t})`),[ur.LessThan]:ri(([e,t])=>`(${e} < ${t})`),[ur.LessThanOrEqualTo]:ri(([e,t])=>`(${e} <= ${t})`),[ur.Multiply]:ri(e=>`(${e.join(" * ")})`),[ur.Divide]:ri(([e,t])=>`(${e} / ${t})`),[ur.Add]:ri(e=>`(${e.join(" + ")})`),[ur.Subtract]:ri(([e,t])=>`(${e} - ${t})`),[ur.Clamp]:ri(([e,t,n])=>`clamp(${e}, ${t}, ${n})`),[ur.Mod]:ri(([e,t])=>`mod(${e}, ${t})`),[ur.Pow]:ri(([e,t])=>`pow(${e}, ${t})`),[ur.Abs]:ri(([e])=>`abs(${e})`),[ur.Floor]:ri(([e])=>`floor(${e})`),[ur.Ceil]:ri(([e])=>`ceil(${e})`),[ur.Round]:ri(([e])=>`floor(${e} + 0.5)`),[ur.Sin]:ri(([e])=>`sin(${e})`),[ur.Cos]:ri(([e])=>`cos(${e})`),[ur.Atan]:ri(([e,t])=>t!==void 0?`atan(${e}, ${t})`:`atan(${e})`),[ur.Sqrt]:ri(([e])=>`sqrt(${e})`),[ur.Match]:ri(e=>{const t=e[0],n=e[e.length-1];let r=null;for(let i=e.length-3;i>=1;i-=2){const s=e[i],o=e[i+1];r=`(${t} == ${s} ? ${o} : ${r||n})`}return r}),[ur.Between]:ri(([e,t,n])=>`(${e} >= ${t} && ${e} <= ${n})`),[ur.Interpolate]:ri(([e,t,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let u;e===Ug(1)?u=`(${t} - ${s}) / (${a} - ${s})`:u=`(pow(${e}, (${t} - ${s})) - 1.0) / (pow(${e}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[ur.Case]:ri(e=>{const t=e[e.length-1];let n=null;for(let r=e.length-3;r>=0;r-=2){const i=e[r],s=e[r+1];n=`(${i} ? ${s} : ${n||t})`}return n}),[ur.In]:ri(([e,...t],n)=>{const r=kYe("in",n),i=[];for(let s=0;s<t.length;s+=1)i.push(`  if (inputValue == ${t[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${e})`}),[ur.Array]:ri(e=>`vec${e.length}(${e.join(", ")})`),[ur.Color]:ri(e=>{if(e.length===1)return`vec4(vec3(${e[0]} / 255.0), 1.0)`;if(e.length===2)return`vec4(vec3(${e[0]} / 255.0), ${e[1]})`;const t=e.slice(0,3).map(r=>`${r} / 255.0`);if(e.length===3)return`vec4(${t.join(", ")}, 1.0)`;const n=e[3];return`vec4(${t.join(", ")}, ${n})`}),[ur.Band]:ri(([e,t,n],r)=>{if(!(pF in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${Qn.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[pF]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Qn.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Qn.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${pF}(${e}, ${t??"0.0"}, ${n??"0.0"})`}),[ur.Palette]:(e,t)=>{const[n,...r]=t.args,i=r.length,s=new Uint8Array(i*4);for(let u=0;u<r.length;u++){const f=r[u].value,c=Z_(f),d=u*4;s[d]=c[0],s[d+1]=c[1],s[d+2]=c[2],s[d+3]=c[3]*255}e.paletteTextures||(e.paletteTextures=[]);const o=`${hke}[${e.paletteTextures.length}]`,a=new yYe(o,s);e.paletteTextures.push(a);const l=aP(n,Si,e);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function aP(e,t,n){if(e instanceof Rje){const r=RYe[e.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(e.operator)}`);return r(n,e,t)}if((e.type&Si)>0)return Ug(e.value);if((e.type&YCe)>0)return e.value.toString();if((e.type&K_)>0)return Fd(e.value.toString());if((e.type&kl)>0)return EC(e.value);if((e.type&qp)>0)return sP(e.value);if((e.type&H1)>0)return TYe(e.value);throw new Error(`Unexpected expression ${e.value} (expected type ${Fje(t)})`)}function FYe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const My=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,$y=FYe();class gke{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Ug($y["circle-radius"])} + ${Ug($y["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=EC($y["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Ug($y["stroke-width"]),this.strokeColorExpression_=EC($y["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Fd("round"),this.strokeJoinExpression_=Fd("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=EC($y["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,n,r){return this.varyings_.push({name:t,type:n,expression:r}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${q1e} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${q1e}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Fd("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Fd("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Fd("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Fd("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  vec4 color = ${this.strokeColorExpression_};
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  color.a *= smoothstep(0.5, -0.5, distance);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${My}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}const nc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},OYe=["#00f","#0ff","#0f0","#ff0","#f00"];let MYe=class extends vD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.gradient_=null,this.addChangeListener(nc.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:OYe),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const r=t.weight?t.weight:"weight";this.weightFunction_=typeof r=="string"?i=>i.get(r):r,this.setRenderOrder(null)}getBlur(){return this.get(nc.BLUR)}getGradient(){return this.get(nc.GRADIENT)}getRadius(){return this.get(nc.RADIUS)}handleGradientChanged_(){this.gradient_=$Ye(this.getGradient())}setBlur(t){this.set(nc.BLUR,t)}setGradient(t){this.set(nc.GRADIENT,t)}setRadius(t){this.set(nc.RADIUS,t)}createRenderer(){const t=new gke().addAttribute("float a_weight").addVarying("v_weight","float","a_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_weight)");return new fke(this,{className:this.getClassName(),attributes:[{name:"weight",callback:n=>{const r=this.weightFunction_(n);return r!==void 0?As(r,0,1):1}}],uniforms:{u_size:()=>(this.get(nc.RADIUS)+this.get(nc.BLUR))*2,u_blurSlope:()=>this.get(nc.RADIUS)/Math.max(1,this.get(nc.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}};function $Ye(e){const r=t0(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(e.length-1);for(let o=0,a=e.length;o<a;++o)i.addColorStop(o*s,e[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class IYe extends Oje{constructor(t){super(t),this.vectorRenderer_=new Mje(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Ko(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=rh(this.coordinateToVectorPixelTransform_,rh(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,r=t.viewState,i=r.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),XCe(a,this.layerImageRatio_));const l=eu(a)/i,u=Hp(a)/i;if(!s[Up.ANIMATING]&&!s[Up.INTERACTING]&&!dD(a)){o.useContainer(null,null);const f=o.context,c=t.layerStatesArray[t.layerIndex],d=Object.assign({},c,{opacity:1}),h=Object.assign({},t,{extent:a,size:[l,u],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(h.declutter={[p]:new $je(9)});let g=!0;const v=new qI(a,i,n,f.canvas,function(x){o.prepareFrame(h)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(h,null)&&(o.renderDeclutter(h),o.renderDeferred(h),g=!1),x())});v.addEventListener(Cl.CHANGE,()=>{if(v.getState()!==Eg.LOADED)return;this.image=g?null:v;const x=v.getPixelRatio(),y=Ije(v.getResolution())*n/x;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=SI(this.coordinateToVectorPixelTransform_,l/2,u/2,1/y,-1/y,0,-r.center[0],-r.center[1])}),v.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,r,i,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,r,i,s):super.forEachFeatureAtCoordinate(t,n,r,i,s)}}class PYe extends vD{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new IYe(this)}}function jn(e,t,n){const r=Nje();return LYe(t,n,r,e)}function NYe(e){const t=Z_(e),n=t[0]*256,r=t[1],i=t[2]*256,s=Math.round(t[3]*255);return[n+r,i+s]}const BYe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function u6(e){return e===kl||e===H1?2:e===qp?4:1}function sA(e){const t=u6(e);return t>1?`vec${t}`:"float"}function D3(e){return(JSON.stringify(e).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function lP(e,t,n,r){if(`${r}radius`in e&&r!=="icon-"){let i=jn(n,e[`${r}radius`],Si);if(`${r}radius2`in e){const s=jn(n,e[`${r}radius2`],Si);i=`max(${i}, ${s})`}`${r}stroke-width`in e&&(i=`(${i} + ${jn(n,e[`${r}stroke-width`],Si)} * 0.5)`),t.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in e){const i=jn(n,e[`${r}scale`],H1);t.setSymbolSizeExpression(`${t.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in e&&t.setSymbolOffsetExpression(jn(n,e[`${r}displacement`],qp)),`${r}rotation`in e&&t.setSymbolRotationExpression(jn(n,e[`${r}rotation`],Si)),`${r}rotate-with-view`in e&&t.setSymbolRotateWithView(!!e[`${r}rotate-with-view`])}function yke(e,t,n,r,i){let s="vec4(0.)";if(t!==null&&(s=t),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${e})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${e}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function uP(e,t,n,r,i){const s=new Image;s.crossOrigin=e[`${r}cross-origin`]===void 0?"anonymous":e[`${r}cross-origin`],s.src=e[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],t.addUniform(`vec2 u_texture${i}_size`);const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,t.addUniform(`sampler2D u_texture${i}`),o}function cP(e,t,n,r,i){let s=jn(n,e[`${t}offset`],qp);if(`${t}offset-origin`in e)switch(e[`${t}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function zYe(e,t,n,r,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,lP(e,t,r,"circle-");let s=null;"circle-opacity"in e&&(s=jn(i,e["circle-opacity"],Si));let o="coordsPx";"circle-scale"in e&&(o=`coordsPx / ${jn(i,e["circle-scale"],H1)}`);let a=null;"circle-fill-color"in e&&(a=jn(i,e["circle-fill-color"],kl));let l=null;"circle-stroke-color"in e&&(l=jn(i,e["circle-stroke-color"],kl));let u=jn(i,e["circle-radius"],Si),f=null;"circle-stroke-width"in e&&(f=jn(i,e["circle-stroke-width"],Si),u=`(${u} + ${f} * 0.5)`);const c=`circleDistanceField(${o}, ${u})`,d=yke(c,a,l,f,s);t.setSymbolColorExpression(d)}function jYe(e,t,n,r,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,lP(e,t,r,"shape-");let s=null;"shape-opacity"in e&&(s=jn(i,e["shape-opacity"],Si));let o="coordsPx";"shape-scale"in e&&(o=`coordsPx / ${jn(i,e["shape-scale"],H1)}`);let a=null;"shape-fill-color"in e&&(a=jn(i,e["shape-fill-color"],kl));let l=null;"shape-stroke-color"in e&&(l=jn(i,e["shape-stroke-color"],kl));let u=null;"shape-stroke-width"in e&&(u=jn(i,e["shape-stroke-width"],Si));const f=jn(i,e["shape-points"],Si);let c="0.";"shape-angle"in e&&(c=jn(i,e["shape-angle"],Si));let d,h=jn(i,e["shape-radius"],Si);if(u!==null&&(h=`${h} + ${u} * 0.5`),"shape-radius2"in e){let g=jn(i,e["shape-radius2"],Si);u!==null&&(g=`${g} + ${u} * 0.5`),d=`starDistanceField(${o}, ${f}, ${h}, ${g}, ${c})`}else d=`regularDistanceField(${o}, ${f}, ${h}, ${c})`;const p=yke(d,a,l,u,s);t.setSymbolColorExpression(p)}function UYe(e,t,n,r,i){let s="vec4(1.0)";"icon-color"in e&&(s=jn(i,e["icon-color"],kl)),"icon-opacity"in e&&(s=`${s} * vec4(1.0, 1.0, 1.0, ${jn(i,e["icon-opacity"],Si)})`);const o=D3(e["icon-src"]),a=uP(e,t,n,"icon-",o);if(t.setSymbolColorExpression(`${s} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in e&&"icon-height"in e&&t.setSymbolSizeExpression(`vec2(${jn(r,e["icon-width"],Si)}, ${jn(r,e["icon-height"],Si)})`),"icon-offset"in e&&"icon-size"in e){const l=jn(r,e["icon-size"],qp),u=t.getSymbolSizeExpression();t.setSymbolSizeExpression(l);const f=cP(e,"icon-",r,"v_quadSizePx",l);t.setTextureCoordinateExpression(`(vec4((${f}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(lP(e,t,r,"icon-"),"icon-anchor"in e){const l=jn(r,e["icon-anchor"],qp);let u="1.0";"icon-scale"in e&&(u=jn(r,e["icon-scale"],H1));let f;e["icon-anchor-x-units"]==="pixels"&&e["icon-anchor-y-units"]==="pixels"?f=`${l} * ${u}`:e["icon-anchor-x-units"]==="pixels"?f=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:e["icon-anchor-y-units"]==="pixels"?f=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:f=`${l} * v_quadSizePx`;let c=`v_quadSizePx * vec2(0.5, -0.5) + ${f} * vec2(-1., 1.)`;if("icon-anchor-origin"in e)switch(e["icon-anchor-origin"]){case"top-right":c=`v_quadSizePx * -0.5 + ${f}`;break;case"bottom-left":c=`v_quadSizePx * 0.5 - ${f}`;break;case"bottom-right":c=`v_quadSizePx * vec2(-0.5, 0.5) + ${f} * vec2(1., -1.)`;break}t.setSymbolOffsetExpression(`${t.getSymbolOffsetExpression()} + ${c}`)}}function qYe(e,t,n,r,i){if("stroke-color"in e&&t.setStrokeColorExpression(jn(i,e["stroke-color"],kl)),"stroke-pattern-src"in e){const s=D3(e["stroke-pattern-src"]),o=uP(e,t,n,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in e&&"stroke-pattern-size"in e&&(a=jn(i,e["stroke-pattern-size"],qp),l=cP(e,"stroke-pattern-",i,o,a));let u="0.";"stroke-pattern-spacing"in e&&(u=jn(i,e["stroke-pattern-spacing"],Si)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const f=`u_texture${s}`;let c="1.";"stroke-color"in e&&(c=t.getStrokeColorExpression()),t.setStrokeColorExpression(`${c} * sampleStrokePattern(${f}, ${o}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in e&&t.setStrokeWidthExpression(jn(r,e["stroke-width"],Si)),"stroke-offset"in e&&t.setStrokeOffsetExpression(jn(r,e["stroke-offset"],Si)),"stroke-line-cap"in e&&t.setStrokeCapExpression(jn(r,e["stroke-line-cap"],K_)),"stroke-line-join"in e&&t.setStrokeJoinExpression(jn(r,e["stroke-line-join"],K_)),"stroke-miter-limit"in e&&t.setStrokeMiterLimitExpression(jn(r,e["stroke-miter-limit"],Si)),"stroke-line-dash"in e){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Fd("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Fd("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=e["stroke-line-dash"].map(h=>jn(i,h,Si));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in e&&(o=jn(r,e["stroke-line-dash-offset"],Si));const l=`dashDistanceField_${D3(e["stroke-line-dash"])}`,u=s.map((h,p)=>`float dashLength${p} = ${h};`),f=s.map((h,p)=>`dashLength${p}`).join(" + ");let c="0.",d=`getSingleDashDistance(distance, radius, ${c}, dashLength0, totalDashLength, capType)`;for(let h=2;h<s.length;h+=2)c=`${c} + dashLength${h-2} + dashLength${h-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${c}, dashLength${h}, totalDashLength, capType))`;i.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${f};
  return ${d};
}`,t.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function HYe(e,t,n,r,i){if("fill-color"in e&&t.setFillColorExpression(jn(i,e["fill-color"],kl)),"fill-pattern-src"in e){const s=D3(e["fill-pattern-src"]),o=uP(e,t,n,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in e&&"fill-pattern-size"in e&&(a=jn(i,e["fill-pattern-size"],qp),l=cP(e,"fill-pattern-",i,o,a)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${s}`;let f="1.";"fill-color"in e&&(f=t.getFillColorExpression()),t.setFillColorExpression(`${f} * sampleFillPattern(${u}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function vke(e,t){const n=l6(),r={...l6(),inFragmentShader:!0,variables:n.variables},i=new gke,s={};if("icon-src"in e?UYe(e,i,s,n,r):"shape-points"in e?jYe(e,i,s,n,r):"circle-radius"in e&&zYe(e,i,s,n,r),qYe(e,i,s,n,r),HYe(e,i,s,n,r),e.filter){const l=jn(r,e.filter,YCe);i.setFragmentDiscardExpression(`!${l}`)}for(const l in r.variables){const u=r.variables[l],f=oP(u.name);let c=sA(u.type);u.type===kl&&(c="vec4"),i.addUniform(`${c} ${f}`),s[f]=()=>{const d=t[u.name];return typeof d=="number"?d:typeof d=="boolean"?d?1:0:u.type===kl?Z_(d||"#eee"):typeof d=="string"?pv(d):d}}for(const l in r.properties){const u=r.properties[l];n.properties[l]||(n.properties[l]=u);let f=sA(u.type),c=`a_prop_${u.name}`;u.type===kl&&(f="vec4",c=`unpackColor(${c})`,i.addVertexShaderFunction(BYe)),i.addVarying(`v_prop_${u.name}`,f,c)}for(const l in n.properties){const u=n.properties[l];i.addAttribute(`${sA(u.type)} a_prop_${u.name}`)}for(const l in n.functions)i.addVertexShaderFunction(n.functions[l]);for(const l in r.functions)i.addFragmentShaderFunction(r.functions[l]);const o={};for(const l in n.properties){const u=n.properties[l],f=c=>{const d=c.get(u.name);return u.type===kl?NYe([...Z_(d||"#eee")]):typeof d=="string"?pv(d):typeof d=="boolean"?d?1:0:d};o[`prop_${u.name}`]={size:u6(u.type),callback:f}}function a(l,u,f,c){const d=n[l],h=r[l];if(!d&&!h)return;const p=sA(f),g=u6(f);i.addAttribute(`${p} a_${u}`),h&&i.addVarying(`v_${u}`,p,`a_${u}`),o[u]={size:g,callback:c}}return a("geometryType",mke,K_,l=>pv(Pje(l.getGeometry()))),a("featureId",pke,K_|Si,l=>{const u=l.getId()??null;return typeof u=="string"?pv(u):u}),{builder:i,attributes:o,uniforms:s}}class GYe extends LI{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.parseResult_=vke(t.style,this.styleVariables_),this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map(n=>({name:n,...this.parseResult_.attributes[n]}));return new fke(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}function Y1e(e,t){const n=`
    attribute vec2 ${_C.TEXTURE_COORD};
    uniform mat4 ${Qn.TILE_TRANSFORM};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.TEXTURE_RESOLUTION};
    uniform float ${Qn.TEXTURE_ORIGIN_X};
    uniform float ${Qn.TEXTURE_ORIGIN_Y};
    uniform float ${Qn.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${_C.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Qn.TEXTURE_ORIGIN_X} + ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Qn.TEXTURE_ORIGIN_Y} - ${Qn.TEXTURE_RESOLUTION} * ${Qn.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Qn.TILE_TRANSFORM} * vec4(${_C.TEXTURE_COORD}, ${Qn.DEPTH}, 1.0);
    }
  `,r={...l6(),inFragmentShader:!0,bandCount:t},i=[];if(e.color!==void 0){const c=jn(r,e.color,kl);i.push(`color = ${c};`)}if(e.contrast!==void 0){const c=jn(r,e.contrast,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.exposure!==void 0){const c=jn(r,e.exposure,Si);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(e.saturation!==void 0){const c=jn(r,e.saturation,Si);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(e.gamma!==void 0){const c=jn(r,e.gamma,Si);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(e.brightness!==void 0){const c=jn(r,e.brightness,Si);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(r.variables).length;if(o>1&&!e.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<o;++c){const d=r.variables[Object.keys(r.variables)[c]];if(!(d.name in e.variables))throw new Error(`Missing '${d.name}' in style variables`);const h=oP(d.name);s[h]=function(){let p=e.variables[d.name];return typeof p=="string"&&(p=pv(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(c){return`uniform float ${c};`}),l=Math.ceil(t/4);a.push(`uniform sampler2D ${Qn.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${hke}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(c){return r.functions[c]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Qn.RENDER_EXTENT};
    uniform float ${Qn.TRANSITION_ALPHA};
    uniform float ${Qn.TEXTURE_PIXEL_WIDTH};
    uniform float ${Qn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Qn.RESOLUTION};
    uniform float ${Qn.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Qn.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Qn.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Qn.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Qn.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Qn.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Qn.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:f,uniforms:s,paletteTextures:r.paletteTextures}}class L3 extends Bje{constructor(t){t=t?Object.assign({},t):{};const n=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Z4.SOURCE,this.handleSourceUpdate_)}getSources(t,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const n=()=>{t.getState()==="ready"&&(t.removeEventListener("change",n),this.setStyle(this.style_))};t.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const t=Y1e(this.style_,this.getSourceBandCount_());return new CYe(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,n){const r=this.getRenderer();let i;for(let s=0,o=n.length;s<o;++s)this.renderedSource_=n[s],r.prepareFrame(t)&&(i=r.renderFrame(t));return i}render(t,n){this.rendered=!0;const r=t.viewState,i=this.getSources(t.extent,r.resolution);let s=!0;for(let a=0,l=i.length;a<l;++a){const u=i[a],f=u.getState();if(f=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}s=s&&f=="ready"}const o=this.renderSources(t,i);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,o;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(t.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(t,a)}return o}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const n=Y1e(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}L3.prototype.dispose;class VYe{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,n){for(let r=0;r<t.length;r++)this.addFeature(t[r],n)}addFeature(t,n){let r=t.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,t))}clearFeatureEntryInPointBatch_(t){const n=Ei(t),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(t){const n=Ei(t),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(t){const n=Ei(t),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(t,n){var i;const r=t.getType();switch(r){case"GeometryCollection":{const s=t.getGeometriesArray();for(const o of s)this.addGeometry_(o,n);break}case"MultiPolygon":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEndss(),n,Ei(n),s.getStride());break}case"MultiLineString":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Ei(n),s.getStride());break}case"MultiPoint":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),s.getStride());break}case"Polygon":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Ei(n),s.getStride());break}case"Point":{const s=t;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),s.getStride());break}case"LineString":case"LinearRing":{const s=t,o=s.getStride();this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Ei(n),o,(i=s.getLayout)==null?void 0:i.call(s));break}}}addCoordinates_(t,n,r,i,s,o,a){let l;switch(t){case"MultiPolygon":{const u=r;for(let f=0,c=u.length;f<c;f++){let d=u[f];const h=f>0?u[f-1]:null,p=h?h[h.length-1]:0,g=d[d.length-1];d=p>0?d.map(v=>v-p):d,this.addCoordinates_("Polygon",n.slice(p,g),d,i,s,o,a)}break}case"MultiLineString":{const u=r;for(let f=0,c=u.length;f<c;f++){const d=f>0?u[f-1]:0;this.addCoordinates_("LineString",n.slice(d,u[f]),null,i,s,o,a)}break}case"MultiPoint":for(let u=0,f=n.length;u<f;u+=o)this.addCoordinates_("Point",n.slice(u,u+2),null,i,s,null,null);break;case"Polygon":{const u=r;if(i instanceof zje){const d=jje(n,u);if(d.length>1){this.addCoordinates_("MultiPolygon",n,d,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const f=r.length,c=r.map((d,h,p)=>h>0?(d-p[h-1])/o:d/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=f,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(WYe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(c),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=f;for(let d=0,h=u.length;d<h;d++){const p=d>0?u[d-1]:0;this.addCoordinates_("LinearRing",n.slice(p,u[d]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(YYe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(t,n){const r=this.uidToRef_.get(t),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(t,i)),n}returnRef_(t,n){if(!t)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(t),this.uidToRef_.delete(n),this.freeGlobalRef_.push(t)}changeFeature(t){this.removeFeature(t);const n=t.getGeometry();n&&this.addGeometry_(n,t)}removeFeature(t){let n;n=this.clearFeatureEntryInPointBatch_(t)||n,n=this.clearFeatureEntryInPolygonBatch_(t)||n,n=this.clearFeatureEntryInLineStringBatch_(t)||n,n&&this.returnRef_(n.ref,Ei(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}}function WYe(e,t){return t===2?e:e.filter((n,r)=>r%t<2)}function YYe(e,t,n){return t===3&&n==="XYM"?e:t===4?e.filter((r,i)=>i%t!==2):t===3?e.map((r,i)=>i%t!==2?r:0):new Array(e.length*1.5).fill(0).map((r,i)=>i%3===2?0:e[Math.round(i/1.5)])}function fP(e,t,n,r){let i=0;for(const s in t){const o=t[s],a=o.callback.call(n,n.feature);e[r+i++]=a[0]??a,!(!o.size||o.size===1)&&(e[r+i++]=a[1],!(o.size<3)&&(e[r+i++]=a[2],!(o.size<4)&&(e[r+i++]=a[3])))}return i}function OD(e){return Object.keys(e).reduce((t,n)=>t+(e[n].size||1),0)}function XYe(e,t,n,r){const i=(2+OD(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++)s[0]=l.flatCoordss[u][0],s[1]=l.flatCoordss[u][1],rh(r,s),t[o++]=s[0],t[o++]=s[1],o+=fP(t,n,l,o)}return t}function ZYe(e,t,n,r){const i=3*e.verticesCount+(1+OD(n))*e.geometriesCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){s.length=l.flatCoordss[u].length,ZCe(l.flatCoordss[u],0,s.length,3,r,s,3),o+=fP(t,n,l,o),t[o++]=s.length/3;for(let c=0,d=s.length;c<d;c+=3)t[o++]=s[c],t[o++]=s[c+1],t[o++]=s[c+2]}}return t}function KYe(e,t,n,r){const i=2*e.verticesCount+(1+OD(n))*e.geometriesCount+e.ringsCount;(!t||t.length!==i)&&(t=new Float32Array(i));const s=[];let o=0;for(const a in e.entries){const l=e.entries[a];for(let u=0,f=l.flatCoordss.length;u<f;u++){s.length=l.flatCoordss[u].length,ZCe(l.flatCoordss[u],0,s.length,2,r,s),o+=fP(t,n,l,o),t[o++]=l.ringsVerticesCounts[u].length;for(let c=0,d=l.ringsVerticesCounts[u].length;c<d;c++)t[o++]=l.ringsVerticesCounts[u][c];for(let c=0,d=s.length;c<d;c+=2)t[o++]=s[c],t[o++]=s[c+1]}}return t}const JYe=[],mF=uke();let QYe=0;const sf={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class eXe{constructor(t,n,r,i){this.helper_,this.hitDetectionEnabled_=i;let s=t;if(!("builder"in t)){const u=vke(t,n);s={builder:u.builder,attributes:u.attributes,uniforms:u.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader());const a=this.hitDetectionEnabled_?{hitColor:{callback(){return ake(this.ref,JYe)},size:4}}:{};this.customAttributes_=Object.assign({},a,s.attributes),this.uniforms_=s.uniforms;const l=Object.entries(this.customAttributes_).map(([u,f])=>({name:`a_${u}`,size:f.size||1,type:$s.FLOAT}));this.polygonAttributesDesc_=[{name:sf.POSITION,size:2,type:$s.FLOAT},...l],this.lineStringAttributesDesc_=[{name:sf.SEGMENT_START,size:2,type:$s.FLOAT},{name:sf.MEASURE_START,size:1,type:$s.FLOAT},{name:sf.SEGMENT_END,size:2,type:$s.FLOAT},{name:sf.MEASURE_END,size:1,type:$s.FLOAT},{name:sf.JOIN_ANGLES,size:2,type:$s.FLOAT},{name:sf.DISTANCE,size:1,type:$s.FLOAT},{name:sf.PARAMETERS,size:1,type:$s.FLOAT},...l],this.pointAttributesDesc_=[{name:sf.POSITION,size:2,type:$s.FLOAT},{name:sf.INDEX,size:1,type:$s.FLOAT},...l],this.setHelper(r)}async generateBuffers(t,n){const r=this.generateRenderInstructions_(t,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=X_(Ko(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(t,n){const r=this.hasFill_?KYe(t.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?ZYe(t.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?XYe(t.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(t,n,r){if(t===null)return null;const i=QYe++;let s;switch(n){case"Polygon":s=v_.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=v_.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=v_.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:t.buffer,renderInstructionsTransform:r,customAttributesSize:OD(this.customAttributes_)};return mF.postMessage(o,[t.buffer]),t=null,new Promise(a=>{const l=u=>{const f=u.data;if(f.id!==i||(mF.removeEventListener("message",l),!this.helper_.getGL()))return;const c=new t1(uE,i2).fromArrayBuffer(f.vertexBuffer),d=new t1(cE,i2).fromArrayBuffer(f.indexBuffer);this.helper_.flushBufferData(c),this.helper_.flushBufferData(d),a([d,c])};mF.addEventListener("message",l)})}render(t,n,r){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(t,n,r,i,s,o){const a=t.getSize();a!==0&&(this.helper_.useProgram(r,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),o(),this.helper_.drawElements(0,a))}setHelper(t,n=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1])))}}const Iy={...df,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class tXe extends fE{constructor(t,n){const r={[Iy.RENDER_EXTENT]:[0,0,0,0],[Iy.PATTERN_ORIGIN]:[0,0],[Iy.GLOBAL_ALPHA]:1};super(t,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=yD(),this.currentTransform_=Ko(),this.tmpCoords_=[0,0],this.tmpTransform_=Ko(),this.tmpMat4_=EI(),this.currentFrameStateTransform_=Ko(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new VYe,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[bp(n,xp.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),bp(n,xp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),bp(n,xp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),bp(n,xp.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=Array.isArray(t.style)?t.style:[t.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(t=>new eXe(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((t,n)=>t.setHelper(this.helper,this.buffers_[n])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new oke(this.helper))}handleSourceFeatureAdded_(t,n){const r=n.feature;this.batch_.addFeature(r,t)}handleSourceFeatureChanged_(t){const n=t.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(t){const n=t.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){Uje(this.tmpTransform_,this.currentFrameStateTransform_),G_(this.tmpTransform_,t),this.helper.setUniformMatrixValue(Iy.PROJECTION_MATRIX,x3(this.tmpMat4_,this.tmpTransform_)),X_(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(Iy.SCREEN_TO_WORLD_MATRIX,x3(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,X_(this.tmpTransform_,t),rh(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(Iy.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const n=this.helper.getGL();this.preRender(n,t);const[r,i,s]=cke(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,r,i,s),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,t),o}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=t.viewState,s=!t.viewHints[Up.ANIMATING]&&!t.viewHints[Up.INTERACTING],o=!W_(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,f=n instanceof vD?n.getRenderBuffer():0,c=AI(t.extent,f*u);r.loadFeatures(c,u,l),this.ready=!1;const d=this.helper.makeProjectionTransform(t,Ko()),h=this.styleRenderers_.map((p,g)=>p.generateBuffers(this.batch_,d).then(v=>{this.buffers_[g]&&this.disposeBuffers(this.buffers_[g]),this.buffers_[g]=v}));Promise.all(h).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),CI(this.currentFrameStateTransform_,o*s,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const u=this.styleRenderers_[a],f=this.buffers_[a];f&&u.render(f,t,()=>{this.applyUniforms_(f.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}}while(++o<i)}forEachFeatureAtCoordinate(t,n,r,i,s){if(Dc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const o=rh(n.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=lke(l),f=this.batch_.getFeatureFromRef(u);if(f)return i(f,this.getLayer(),null)}disposeBuffers(t){t.pointBuffers&&t.pointBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.lineStringBuffers&&t.lineStringBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),t.polygonBuffers&&t.polygonBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n))}disposeInternal(){this.buffers_.forEach(t=>{this.disposeBuffers(t)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(t){HCe(t)}),this.sourceListenKeys_=null),super.disposeInternal()}}class nXe extends LI{constructor(t){const n=Object.assign({},t);super(n),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new tXe(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style=t,this.clearRenderer(),this.changed()}}const rXe=Object.freeze(Object.defineProperty({__proto__:null,Graticule:pHe,Group:w3,Heatmap:MYe,Image:RI,Layer:LI,Tile:_3,Vector:bI,VectorImage:PYe,VectorTile:KCe,WebGLPoints:GYe,WebGLTile:L3,WebGLVector:nXe},Symbol.toStringTag,{value:"Module"}));function iXe(e){const t=e[0],n=new Array(t);let r=1<<t-1,i,s;for(i=0;i<t;++i)s=48,e[1]&r&&(s+=1),e[2]&r&&(s+=2),n[i]=String.fromCharCode(s),r>>=1;return n.join("")}const sXe='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class oXe extends gh{constructor(t){const n=t.hidpi!==void 0?t.hidpi:!1;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:oi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=n,this.culture_=t.culture!==void 0?t.culture:"en-us",this.maxZoom_=t.maxZoom!==void 0?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(t.statusCode!=200||t.statusDescription!="OK"||t.authenticationResultCode!="ValidCredentials"||t.resourceSets.length!=1||t.resourceSets[0].resources.length!=1){this.setState("error");return}const n=t.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),s=sE(i),o=this.hidpi_?2:1,a=n.imageWidth==n.imageHeight?n.imageWidth/o:[n.imageWidth/o,n.imageHeight/o],l=oE({extent:s,minZoom:n.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,f=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=FI(n.imageUrlSubdomains.map(function(d){const h=[0,0,0],p=n.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(g,v,x){if(!g)return;K4(g[0],g[1],g[2],h);const y=new URL(p.replace("{quadkey}",iXe(h))),w=y.searchParams;return f&&(w.set("dpi","d1"),w.set("device","mobile")),c===!0?w.delete("n"):c===!1&&w.set("n","z"),y.toString()}})),n.imageryProviders){const d=OI(oi("EPSG:4326"),this.getProjection());this.setAttributions(h=>{const p=[],g=h.viewState,v=this.getTileGrid(),x=v.getZForResolution(g.resolution,this.zDirection),w=v.getTileCoordForCoordAndZ(g.center,x)[0];return n.imageryProviders.map(function(_){let A=!1;const T=_.coverageAreas;for(let D=0,k=T.length;D<k;++D){const R=T[D];if(w>=R.zoomMin&&w<=R.zoomMax){const O=R.bbox,B=[O[1],O[0],O[3],O[2]],K=Kv(B,d);if(Zv(K,h.extent)){A=!0;break}}}A&&p.push(_.attribution)}),p.push(sXe),p})}this.setState("ready")}}class aXe extends J_{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:t.maxZoom!==void 0?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t]){this.applyTemplate_(this.templateCache_[t]);return}let n="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(n+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(t,n){const r=n.target;if(!r.status||r.status>=200&&r.status<300){let i;try{i=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const n="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)}}class lXe extends nE{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(n){const r=n.getGeometry();return Dc(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,n,r){var i;(i=this.source)==null||i.loadFeatures(t,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Cl.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Cl.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,n){const r=t===0?0:Math.min(n,t)/t,i=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=yD(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let s=0,o=r.length;s<o;s++){const a=r[s];if(!(Ei(a)in i)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();qje(u,t),AI(t,n,t);const f=this.source.getFeaturesInExtent(t).filter(function(c){const d=Ei(c);return d in i?!1:(i[d]=!0,!0)});this.features.push(this.createCluster(f,t))}}}}createCluster(t,n){const r=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?Hje(r,l.getCoordinates()):t.splice(a,1)}Gje(r,1/t.length);const i=Fp(n),s=this.interpolationRatio,o=new gc([r[0]*(1-s)+i[0]*s,r[1]*(1-s)+i[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new au({geometry:o,features:t})}}class dE extends bD{constructor(t){const n=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&n&&(r=oE({extent:sE(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?Ec(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?Ec(n.getTileSize(t)):[256,256]}getGutterForProjection(t){const n=this.getProjection();return(!n||wC(n,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,n,r,i,s){const o=this.tileGrid||this.getTileGridForProjection(s||i),a=Math.max.apply(null,o.getResolutions().map((h,p)=>{const g=Ec(o.getTileSize(p)),v=this.getTileSize(p);return Math.max(v[0]/g[0],v[1]/g[1])})),l=this.getTileGridForProjection(i),u=[t,n,r],f=this.getTileCoordForTileUrlFunction(u,i),c=Object.assign({sourceProj:s||i,sourceTileGrid:o,targetProj:i,targetTileGrid:l,tileCoord:u,wrappedTileCoord:f,pixelRatio:a,gutter:this.gutter_,getTileFunction:(h,p,g,v)=>this.getTile(h,p,g,v),transformMatrix:this.transformMatrix},this.tileOptions),d=new DI(c);return d.key=this.getKey(),d}getTile(t,n,r,i,s){var w;const o=this.getProjection();if(s&&(o&&!wC(o,s)||this.transformMatrix))return this.getReprojTile_(t,n,r,s,o);const a=this.getTileSize(t),l=this.loader_,u=new AbortController,f={signal:u.signal,crossOrigin:this.crossOrigin_},c=this.getTileCoordForTileUrlFunction([t,n,r]);if(!c)return null;const d=c[0],h=c[1],p=c[2],g=(w=this.getTileGrid())==null?void 0:w.getFullTileRange(d);g&&(f.maxY=g.getHeight()-1);function v(){return Yje(function(){return l(d,h,p,f)})}const x=Object.assign({tileCoord:[t,n,r],loader:v,size:a,controller:u},this.tileOptions),y=new GCe(x);return y.key=this.getKey(),y.addEventListener(Cl.CHANGE,this.handleTileChange_),y}handleTileChange_(t){const n=t.target,r=Ei(n),i=n.getState();let s;i==Ts.LOADING?(this.tileLoadingKeys_[r]=!0,s=sF.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ts.ERROR?sF.TILELOADERROR:i==Ts.LOADED?sF.TILELOADEND:void 0),s&&this.dispatchEvent(new Vje(s,n))}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||wC(n,t))&&!this.transformMatrix)return this.tileGrid;const r=Ei(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Wje(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,n){const r=oi(t);if(r){const i=Ei(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}}function oa(e){return(t,...n)=>uXe(e,t,n)}function Q1(e,t){return oa(bke(e,t).get)}const{apply:uXe,construct:$jt,defineProperty:Ijt,get:Pjt,getOwnPropertyDescriptor:bke,getPrototypeOf:dP,has:Njt,ownKeys:cXe,set:Bjt,setPrototypeOf:zjt}=Reflect,{iterator:hE,species:jjt,toStringTag:fXe,for:Ujt}=Symbol,dXe=Object,{create:hP,defineProperty:hXe,freeze:qjt,is:Hjt}=dXe,pXe=Array,mXe=pXe.prototype,xke=mXe[hE],gXe=oa(xke),wke=ArrayBuffer,yXe=wke.prototype;Q1(yXe,"byteLength");const X1e=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;X1e&&Q1(X1e.prototype,"byteLength");const _ke=dP(Uint8Array);_ke.from;const rl=_ke.prototype;rl[hE];oa(rl.keys);oa(rl.values);oa(rl.entries);oa(rl.set);oa(rl.reverse);oa(rl.fill);oa(rl.copyWithin);oa(rl.sort);oa(rl.slice);oa(rl.subarray);Q1(rl,"buffer");Q1(rl,"byteOffset");Q1(rl,"length");Q1(rl,fXe);const vXe=Uint8Array,Eke=Uint16Array,pP=Uint32Array,bXe=Float32Array,s2=dP([][hE]()),Ske=oa(s2.next),xXe=oa(function*(){}().next),wXe=dP(s2),_Xe=DataView.prototype,EXe=oa(_Xe.getUint16),mP=WeakMap,Ake=mP.prototype,Cke=oa(Ake.get),SXe=oa(Ake.set),kke=new mP,AXe=hP(null,{next:{value:function(){const t=Cke(kke,this);return Ske(t)}},[hE]:{value:function(){return this}}});function CXe(e){if(e[hE]===xke&&s2.next===Ske)return e;const t=hP(AXe);return SXe(kke,t,gXe(e)),t}const kXe=new mP,TXe=hP(wXe,{next:{value:function(){const t=Cke(kXe,this);return xXe(t)},writable:!0,configurable:!0}});for(const e of cXe(s2))e!=="next"&&hXe(TXe,e,bke(s2,e));const Tke=new wke(4),DXe=new bXe(Tke),LXe=new pP(Tke),of=new Eke(512),af=new vXe(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(of[e]=0,of[e|256]=32768,af[e]=24,af[e|256]=24):t<-14?(of[e]=1024>>-t-14,of[e|256]=1024>>-t-14|32768,af[e]=-t-1,af[e|256]=-t-1):t<=15?(of[e]=t+15<<10,of[e|256]=t+15<<10|32768,af[e]=13,af[e|256]=13):t<128?(of[e]=31744,of[e|256]=64512,af[e]=24,af[e|256]=24):(of[e]=31744,of[e|256]=64512,af[e]=13,af[e|256]=13)}const gP=new pP(2048);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(t&8388608);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,gP[e]=t|n}for(let e=1024;e<2048;++e)gP[e]=939524096+(e-1024<<13);const eb=new pP(64);for(let e=1;e<31;++e)eb[e]=e<<23;eb[31]=1199570944;eb[32]=2147483648;for(let e=33;e<63;++e)eb[e]=2147483648+(e-32<<23);eb[63]=3347054592;const Dke=new Eke(64);for(let e=1;e<64;++e)e!==32&&(Dke[e]=1024);function RXe(e){const t=e>>10;return LXe[0]=gP[Dke[t]+(e&1023)]+eb[t],DXe[0]}function Lke(e,t,...n){return RXe(EXe(e,t,...CXe(n)))}var oA={exports:{}},Z1e;function FXe(){if(Z1e)return oA.exports;Z1e=1;function e(t,n,r){const i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+n+" in "+t);const s=typeof t=="object"?t.outer:t,o=s.slice(0,s.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const u=a[l],f=n+"\\="+u+"([^"+u+"]*)"+u;i&&console.log("[xml-utils] pattern:",f);const d=new RegExp(f).exec(o);if(i&&console.log("[xml-utils] match:",d),d)return d[1]}}return oA.exports=e,oA.exports.default=e,oA.exports}var OXe=FXe();const gF=sa(OXe);var aA={exports:{}},lA={exports:{}},uA={exports:{}},K1e;function MXe(){if(K1e)return uA.exports;K1e=1;function e(t,n,r){const s=new RegExp(n).exec(t.slice(r));return s?r+s.index:-1}return uA.exports=e,uA.exports.default=e,uA.exports}var cA={exports:{}},J1e;function $Xe(){if(J1e)return cA.exports;J1e=1;function e(t,n,r){const s=new RegExp(n).exec(t.slice(r));return s?r+s.index+s[0].length-1:-1}return cA.exports=e,cA.exports.default=e,cA.exports}var fA={exports:{}},Q1e;function IXe(){if(Q1e)return fA.exports;Q1e=1;function e(t,n){const r=new RegExp(n,"g"),i=t.match(r);return i?i.length:0}return fA.exports=e,fA.exports.default=e,fA.exports}var ebe;function PXe(){if(ebe)return lA.exports;ebe=1;const e=MXe(),t=$Xe(),n=IXe();function r(i,s,o){const a=o&&o.debug||!1,l=!(o&&typeof o.nested===!1),u=o&&o.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",s," and ",o);const f=e(i,`<${s}[ 
>/]`,u);if(a&&console.log("[xml-utils] start:",f),f===-1)return;const c=i.slice(f+s.length);let d=t(c,"^[^<]*[ /]>",0);const h=d!==-1&&c[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",h),h===!1)if(l){let x=0,y=1,w=0;for(;(d=t(c,"[ /]"+s+">",x))!==-1;){const _=c.substring(x,d+1);if(y+=n(_,"<"+s+`[ 
	>]`),w+=n(_,"</"+s+">"),w>=y)break;x=d}}else d=t(c,"[ /]"+s+">",0);const p=f+s.length+d+1;if(a&&console.log("[xml-utils] end:",p),p===-1)return;const g=i.slice(f,p);let v;return h?v=null:v=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:v,outer:g,start:f,end:p}}return lA.exports=r,lA.exports.default=r,lA.exports}var tbe;function NXe(){if(tbe)return aA.exports;tbe=1;const e=PXe();function t(n,r,i){const s=[],o=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,u;for(;u=e(n,r,{debug:o,startIndex:l});)a?l=u.start+1+r.length:l=u.end,s.push(u);return o&&console.log("findTagsByName found",s.length,"tags"),s}return aA.exports=t,aA.exports.default=t,aA.exports}var BXe=NXe();const zXe=sa(BXe),b_={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},cf={};for(const e in b_)b_.hasOwnProperty(e)&&(cf[b_[e]]=parseInt(e,10));const jXe=[cf.BitsPerSample,cf.ExtraSamples,cf.SampleFormat,cf.StripByteCounts,cf.StripOffsets,cf.StripRowCounts,cf.TileByteCounts,cf.TileOffsets,cf.SubIFDs],yF={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},cr={};for(const e in yF)yF.hasOwnProperty(e)&&(cr[yF[e]]=parseInt(e,10));const yl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},UXe={Unspecified:0,Assocalpha:1,Unassalpha:2},Gjt={Version:0,AddCompression:1},Vjt={None:0,Deflate:1,Zstandard:2},qXe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function HXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<e.length;++o,a+=3)s=256-e[o]/t*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function GXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<e.length;++o,a+=3)s=e[o]/t*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function VXe(e,t){const{width:n,height:r}=e,i=new Uint8Array(n*r*3),s=t.length/3,o=t.length/3*2;for(let a=0,l=0;a<e.length;++a,l+=3){const u=e[a];i[l]=t[u]/65536*256,i[l+1]=t[u+s]/65536*256,i[l+2]=t[u+o]/65536*256}return i}function WXe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,s=0;i<e.length;i+=4,s+=3){const o=e[i],a=e[i+1],l=e[i+2],u=e[i+3];r[s]=255*((255-o)/256)*((255-u)/256),r[s+1]=255*((255-a)/256)*((255-u)/256),r[s+2]=255*((255-l)/256)*((255-u)/256)}return r}function YXe(e){const{width:t,height:n}=e,r=new Uint8ClampedArray(t*n*3);for(let i=0,s=0;i<e.length;i+=3,s+=3){const o=e[i],a=e[i+1],l=e[i+2];r[s]=o+1.402*(l-128),r[s+1]=o-.34414*(a-128)-.71414*(l-128),r[s+2]=o+1.772*(a-128)}return r}const XXe=.95047,ZXe=1,KXe=1.08883;function JXe(e){const{width:t,height:n}=e,r=new Uint8Array(t*n*3);for(let i=0,s=0;i<e.length;i+=3,s+=3){const o=e[i+0],a=e[i+1]<<24>>24,l=e[i+2]<<24>>24;let u=(o+16)/116,f=a/500+u,c=u-l/200,d,h,p;f=XXe*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),u=ZXe*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=KXe*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=f*3.2406+u*-1.5372+c*-.4986,h=f*-.9689+u*1.8758+c*.0415,p=f*.0557+u*-.204+c*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,r[s]=Math.max(0,Math.min(1,d))*255,r[s+1]=Math.max(0,Math.min(1,h))*255,r[s+2]=Math.max(0,Math.min(1,p))*255}return r}const Rke=new Map;function cm(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>Rke.set(n,t))}async function Fke(e){const t=Rke.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const n=await t();return new n(e)}cm([void 0,1],()=>um(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default));cm(5,()=>um(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(e=>e.default));cm(6,()=>{throw new Error("old style JPEG compression is not supported.")});cm(7,()=>um(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(e=>e.default));cm([8,32946],()=>um(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(e=>e.default));cm(32773,()=>um(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(e=>e.default));cm(34887,()=>um(()=>import("./lerc-DDPT6DuL.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));cm(50001,()=>um(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([20,1]),import.meta.url).then(e=>e.default));function MD(e,t,n,r=1){return new(Object.getPrototypeOf(e)).constructor(t*n*r)}function QXe(e,t,n,r,i){const s=t/r,o=n/i;return e.map(a=>{const l=MD(a,r,i);for(let u=0;u<i;++u){const f=Math.min(Math.round(o*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(s*c),t-1),h=a[f*t+d];l[u*r+c]=h}}return l})}function Tv(e,t,n){return(1-n)*e+n*t}function eZe(e,t,n,r,i){const s=t/r,o=n/i;return e.map(a=>{const l=MD(a,r,i);for(let u=0;u<i;++u){const f=o*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=s*h,g=p%1,v=Math.floor(p),x=Math.min(Math.ceil(p),t-1),y=a[c*t+v],w=a[c*t+x],_=a[d*t+v],A=a[d*t+x],T=Tv(Tv(y,w,g),Tv(_,A,g),f%1);l[u*r+h]=T}}return l})}function tZe(e,t,n,r,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return QXe(e,t,n,r,i);case"bilinear":case"linear":return eZe(e,t,n,r,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function nZe(e,t,n,r,i,s){const o=t/r,a=n/i,l=MD(e,r,i,s);for(let u=0;u<i;++u){const f=Math.min(Math.round(a*u),n-1);for(let c=0;c<r;++c){const d=Math.min(Math.round(o*c),t-1);for(let h=0;h<s;++h){const p=e[f*t*s+d*s+h];l[u*r*s+c*s+h]=p}}}return l}function rZe(e,t,n,r,i,s){const o=t/r,a=n/i,l=MD(e,r,i,s);for(let u=0;u<i;++u){const f=a*u,c=Math.floor(f),d=Math.min(Math.ceil(f),n-1);for(let h=0;h<r;++h){const p=o*h,g=p%1,v=Math.floor(p),x=Math.min(Math.ceil(p),t-1);for(let y=0;y<s;++y){const w=e[c*t*s+v*s+y],_=e[c*t*s+x*s+y],A=e[d*t*s+v*s+y],T=e[d*t*s+x*s+y],D=Tv(Tv(w,_,g),Tv(A,T,g),f%1);l[u*r*s+h*s+y]=D}}}return l}function iZe(e,t,n,r,i,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return nZe(e,t,n,r,i,s);case"bilinear":case"linear":return rZe(e,t,n,r,i,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function sZe(e,t,n){let r=0;for(let i=t;i<n;++i)r+=e[i];return r}function c6(e,t,n){switch(e){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function oZe(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function aZe(e,t,n,r,i,s,o){const a=new DataView(e),l=n===2?o*s:o*s*r,u=n===2?1:r,f=c6(t,i,l),c=parseInt("1".repeat(i),2);if(t===1){let d;n===1?d=r*i:d=i;let h=s*d;h&7&&(h=h+7&-8);for(let p=0;p<o;++p){const g=p*h;for(let v=0;v<s;++v){const x=g+v*u*i;for(let y=0;y<u;++y){const w=x+y*i,_=(p*s+v)*u+y,A=Math.floor(w/8),T=w%8;if(T+i<=8)f[_]=a.getUint8(A)>>8-i-T&c;else if(T+i<=16)f[_]=a.getUint16(A)>>16-i-T&c;else if(T+i<=24){const D=a.getUint16(A)<<8|a.getUint8(A+2);f[_]=D>>24-i-T&c}else f[_]=a.getUint32(A)>>32-i-T&c}}}}return f.buffer}class Oke{constructor(t,n,r,i,s,o){this.fileDirectory=t,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,s){return Lke(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const r=this.getSampleFormat(t),i=this.getBitsPerSample(t);return c6(r,i,n)}async getTileOrStrip(t,n,r,i,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*o+t:this.planarConfiguration===2&&(l=r*o*a+n*o+t);let f,c;this.isTiled?(f=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:f,length:c}],s))[0];let h;return u===null||!u[l]?(h=(async()=>{let p=await i.decode(this.fileDirectory,d);const g=this.getSampleFormat(),v=this.getBitsPerSample();return oZe(g,v)&&(p=aZe(p,g,this.planarConfiguration,this.getSamplesPerPixel(),v,this.getTileWidth(),this.getBlockHeight(n))),p})(),u!==null&&(u[l]=h)):h=u[l],{x:t,y:n,sample:r,data:await h}}async _readRaster(t,n,r,i,s,o,a,l,u){const f=this.getTileWidth(),c=this.getTileHeight(),d=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(t[0]/f),0),g=Math.min(Math.ceil(t[2]/f),Math.ceil(d/f)),v=Math.max(Math.floor(t[1]/c),0),x=Math.min(Math.ceil(t[3]/c),Math.ceil(h/c)),y=t[2]-t[0];let w=this.getBytesPerPixel();const _=[],A=[];for(let k=0;k<n.length;++k)this.planarConfiguration===1?_.push(sZe(this.fileDirectory.BitsPerSample,0,n[k])/8):_.push(0),A.push(this.getReaderForSample(n[k]));const T=[],{littleEndian:D}=this;for(let k=v;k<x;++k)for(let R=p;R<g;++R){let O;this.planarConfiguration===1&&(O=this.getTileOrStrip(R,k,0,s,u));for(let B=0;B<n.length;++B){const K=B,L=n[B];this.planarConfiguration===2&&(w=this.getSampleByteSize(L),O=this.getTileOrStrip(R,k,L,s,u));const $=O.then(I=>{const U=I.data,q=new DataView(U),Y=this.getBlockHeight(I.y),X=I.y*c,te=I.x*f,le=X+Y,ee=(I.x+1)*f,z=A[K],he=Math.min(Y,Y-(le-t[3]),h-X),de=Math.min(f,f-(ee-t[2]),d-te);for(let ze=Math.max(0,t[1]-X);ze<he;++ze)for(let He=Math.max(0,t[0]-te);He<de;++He){const je=(ze*f+He)*w,we=z.call(q,je+_[K],D);let Ie;i?(Ie=(ze+X-t[1])*y*n.length+(He+te-t[0])*n.length+K,r[Ie]=we):(Ie=(ze+X-t[1])*y+He+te-t[0],r[K][Ie]=we)}});T.push($)}}if(await Promise.all(T),o&&t[2]-t[0]!==o||a&&t[3]-t[1]!==a){let k;return i?k=iZe(r,t[2]-t[0],t[3]-t[1],o,a,n.length,l):k=tZe(r,t[2]-t[0],t[3]-t[1],o,a,l),k.width=o,k.height=a,k}return r.width=o||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:n=[],interleave:r,pool:i=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const c=f[2]-f[0],d=f[3]-f[1],h=c*d,p=this.getSamplesPerPixel();if(!n||!n.length)for(let y=0;y<p;++y)n.push(y);else for(let y=0;y<n.length;++y)if(n[y]>=p)return Promise.reject(new RangeError(`Invalid sample index '${n[y]}'.`));let g;if(r){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,w=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=c6(y,w,h*n.length),l&&g.fill(l)}else{g=[];for(let y=0;y<n.length;++y){const w=this.getArrayForSample(n[y],h);Array.isArray(l)&&y<l.length?w.fill(l[y]):l&&!Array.isArray(l)&&w.fill(l),g.push(w)}}const v=i||await Fke(this.fileDirectory);return await this._readRaster(f,n,g,r,v,s,o,a,u)}async readRGB({window:t,interleave:n=!0,pool:r=null,width:i,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const f=this.fileDirectory.PhotometricInterpretation;if(f===yl.RGB){let x=[0,1,2];if(this.fileDirectory.ExtraSamples!==UXe.Unspecified&&a){x=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)x.push(y)}return this.readRasters({window:t,interleave:n,samples:x,pool:r,width:i,height:s,resampleMethod:o,signal:l})}let c;switch(f){case yl.WhiteIsZero:case yl.BlackIsZero:case yl.Palette:c=[0];break;case yl.CMYK:c=[0,1,2,3];break;case yl.YCbCr:case yl.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:c,pool:r,width:i,height:s,resampleMethod:o,signal:l},{fileDirectory:h}=this,p=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let v;switch(f){case yl.WhiteIsZero:v=HXe(p,g);break;case yl.BlackIsZero:v=GXe(p,g);break;case yl.Palette:v=VXe(p,h.ColorMap);break;case yl.CMYK:v=WXe(p);break;case yl.YCbCr:v=YXe(p);break;case yl.CIELab:v=JXe(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const x=new Uint8Array(v.length/3),y=new Uint8Array(v.length/3),w=new Uint8Array(v.length/3);for(let _=0,A=0;_<v.length;_+=3,++A)x[A]=v[_],y[A]=v[_+1],w[A]=v[_+2];v=[x,y,w]}return v.width=p.width,v.height=p.height,v}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=zXe(r,"Item");t===null?i=i.filter(s=>gF(s,"sample")===void 0):i=i.filter(s=>Number(gF(s,"sample"))===t);for(let s=0;s<i.length;++s){const o=i[s];n[gF(o,"name")]=o.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[i,s,o]=t.getResolution();return[i*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),o*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[i,s,o,a,l,u,f,c]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,n],[r,0],[r,n]].map(([v,x])=>[a+i*v+s*x,c+l*v+u*x]),p=h.map(v=>v[0]),g=h.map(v=>v[1]);return[Math.min(...p),Math.min(...g),Math.max(...p),Math.max(...g)]}else{const i=this.getOrigin(),s=this.getResolution(),o=i[0],a=i[1],l=o+s[0]*r,u=a+s[1]*n;return[Math.min(o,l),Math.min(a,u),Math.max(o,l),Math.max(a,u)]}}}class lZe{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const r=this.getUint32(t,n),i=this.getUint32(t+4,n);let s;if(n){if(s=r+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(t,n){let r=0;const i=(this._dataView.getUint8(t+(n?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(t+(n?o:7-o));i&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),r+=a*256**o}return i&&(r=-r),r}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return Lke(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class uZe{constructor(t,n,r,i){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),r=this.readUint32(t+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let n=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(t+(this._littleEndian?s:7-s));r&&(i?o!==0&&(o=~(o-1)&255,i=!1):o=~o&255),n+=o*256**s}return r&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const cZe=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class fZe{constructor(t=cZe,n){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{um(()=>import("./decoder-CaSv2t6h.js"),[],import.meta.url).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Fke(t).then(r=>r.decode(t,n)):new Promise(r=>{const i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",o))};i.worker.addEventListener("message",o),i.worker.postMessage({fileDirectory:t,buffer:n,id:s},[n])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const nbe=`\r
\r
`;function Mke(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[n,r]of e)t[n.toLowerCase()]=r;return t}function dZe(e){const t=e.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return Mke(t)}function hZe(e){const[t,...n]=e.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:t,params:Mke(r)}}function f6(e){let t,n,r;return e&&([,t,n,r]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}function pZe(e,t){let n=null;const r=new TextDecoder("ascii"),i=[],s=`--${t}`,o=`${s}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(e,a,s.length))===s&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<e.byteLength;){const a=r.decode(new Uint8Array(e,n,Math.min(s.length+1024,e.byteLength-n)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(nbe),f=dZe(l.substr(0,u)),{start:c,end:d,total:h}=f6(f["content-range"]),p=n+s.length+u+nbe.length,g=parseInt(d,10)+1-parseInt(c,10);i.push({headers:f,data:e.slice(p,p+g),offset:c,length:g,fileSize:h}),n=p+g+4}return i}class yP{async fetch(t,n=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class mZe extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,r]of t)this.onEviction(n,r.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const r=n.get(t);return this._getItemValue(t,r)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield t)}for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:i}):this._set(t,{value:n,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-t;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const r=t[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[r,i]of this.entriesAscending())t.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function gZe(e){return new Promise(t=>setTimeout(t,e))}function yZe(e,t){const n=Array.isArray(e)?e:Array.from(e),r=Array.isArray(t)?t:Array.from(t);return n.map((i,s)=>[i,r[s]])}class n1 extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,n1),this.name="AbortError"}}class vZe extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const bZe=vZe;class xZe{constructor(t,n,r=null){this.offset=t,this.length=n,this.data=r}get top(){return this.offset+this.length}}class rbe{constructor(t,n,r){this.offset=t,this.length=n,this.blockIds=r}}class wZe extends yP{constructor(t,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new mZe({maxSize:r,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const r=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:h}of t){let p=d+h;const{fileSize:g}=this;g!==null&&(p=Math.min(p,g));const v=Math.floor(d/this.blockSize)*this.blockSize;for(let x=v;x<p;x+=this.blockSize){const y=Math.floor(x/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),i.push(y)),this.blockRequests.has(y)&&r.push(this.blockRequests.get(y)),s.push(y)}}await gZe(),this.fetchBlocks(n);const o=[];for(const d of i)this.blockRequests.has(d)&&o.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],l=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const d of l){const h=this.blockRequests.get(d);if(!h)throw new Error(`Block ${d} is not in the block requests`);a.push(h)}await Promise.allSettled(a)}if(n&&n.aborted)throw new n1("Request was aborted");const u=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),f=u.filter(d=>!d);if(f.length)throw new bZe(f,"Request failed");const c=new Map(yZe(s,u));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,t);for(let i=0;i<n.length;++i){const s=n[i];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await r)[i],l=o*this.blockSize,u=l-a.offset,f=Math.min(u+this.blockSize,a.data.byteLength),c=a.data.slice(u,f),d=new xZe(l,c.byteLength,c,o);this.blockCache.set(o,d),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((o,a)=>o-a);if(n.length===0)return[];let r=[],i=null;const s=[];for(const o of n)i===null||i+1===o?(r.push(o),i=o):(s.push(new rbe(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],i=o);return s.push(new rbe(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(t,n){return t.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(r.offset/this.blockSize),o=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const f=n.get(u),c=f.offset-r.offset,d=f.top-i;let h=0,p=0,g;c<0?h=-c:c>0&&(p=c),d<0?g=f.length-h:g=i-f.offset-h;const v=new Uint8Array(f.data,h,g);l.set(v,p)}return a})}}class vP{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class bP{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class _Ze extends vP{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class EZe extends bP{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new _Ze(r)}}class SZe extends vP{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class AZe extends bP{constructRequest(t,n){return new Promise((r,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(t))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;r(new SZe(s,o))},s.onerror=i,s.onabort=()=>i(new n1("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const vF={};class CZe extends vP{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class kZe extends bP{constructor(t){super(t),this.parsedUrl=vF.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",vF)}constructRequest(t,n){return new Promise((r,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:t},o=>{const a=new Promise(l=>{const u=[];o.on("data",f=>{u.push(f)}),o.on("end",()=>{const f=Buffer.concat(u).buffer;l(f)}),o.on("error",i)});r(new CZe(o,a))});s.on("error",i),n&&(n.aborted&&s.destroy(new n1("Request aborted")),n.addEventListener("abort",()=>s.destroy(new n1("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class xP extends yP{constructor(t,n,r,i){super(),this.client=t,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,n))))}async fetchSlices(t,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:s}=hZe(r.getHeader("content-type"));if(i==="multipart/byteranges"){const c=pZe(await r.getData(),s.boundary);return this._fileSize=c[0].fileSize||null,c}const o=await r.getData(),{start:a,end:l,total:u}=f6(r.getHeader("content-range"));this._fileSize=u||null;const f=[{data:o,offset:a,length:l-a}];if(t.length>1){const c=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,n)));return f.concat(c)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:r,length:i}=t,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=f6(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function wP(e,{blockSize:t,cacheSize:n}){return t===null?e:new wZe(e,{blockSize:t,cacheSize:n})}function TZe(e,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...s}={}){const o=new EZe(e,n),a=new xP(o,t,r,i);return wP(a,s)}function DZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new AZe(e),o=new xP(s,t,n,r);return wP(o,i)}function LZe(e,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new kZe(e),o=new xP(s,t,n,r);return wP(o,i)}function d6(e,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?TZe(e,n):typeof XMLHttpRequest<"u"?DZe(e,n):LZe(e,n)}class RZe extends yP{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise((r,i)=>{const s=this.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=a=>r(a.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(s),n&&n.addEventListener("abort",()=>o.abort())})}}function FZe(e){return new RZe(e)}function h6(e){switch(e){case cr.BYTE:case cr.ASCII:case cr.SBYTE:case cr.UNDEFINED:return 1;case cr.SHORT:case cr.SSHORT:return 2;case cr.LONG:case cr.SLONG:case cr.FLOAT:case cr.IFD:return 4;case cr.RATIONAL:case cr.SRATIONAL:case cr.DOUBLE:case cr.LONG8:case cr.SLONG8:case cr.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function OZe(e){const t=e.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=t[3]*4;r+=4){const i=qXe[t[r]],s=t[r+1]?b_[t[r+1]]:null,o=t[r+2],a=t[r+3];let l=null;if(!s)l=a;else{if(l=e[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}n[i]=l}return n}function Py(e,t,n,r){let i=null,s=null;const o=h6(t);switch(t){case cr.BYTE:case cr.ASCII:case cr.UNDEFINED:i=new Uint8Array(n),s=e.readUint8;break;case cr.SBYTE:i=new Int8Array(n),s=e.readInt8;break;case cr.SHORT:i=new Uint16Array(n),s=e.readUint16;break;case cr.SSHORT:i=new Int16Array(n),s=e.readInt16;break;case cr.LONG:case cr.IFD:i=new Uint32Array(n),s=e.readUint32;break;case cr.SLONG:i=new Int32Array(n),s=e.readInt32;break;case cr.LONG8:case cr.IFD8:i=new Array(n),s=e.readUint64;break;case cr.SLONG8:i=new Array(n),s=e.readInt64;break;case cr.RATIONAL:i=new Uint32Array(n*2),s=e.readUint32;break;case cr.SRATIONAL:i=new Int32Array(n*2),s=e.readInt32;break;case cr.FLOAT:i=new Float32Array(n),s=e.readFloat32;break;case cr.DOUBLE:i=new Float64Array(n),s=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===cr.RATIONAL||t===cr.SRATIONAL)for(let a=0;a<n;a+=2)i[a]=s.call(e,r+a*o),i[a+1]=s.call(e,r+(a*o+4));else for(let a=0;a<n;++a)i[a]=s.call(e,r+a*o);return t===cr.ASCII?new TextDecoder("utf-8").decode(i):i}class MZe{constructor(t,n,r){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class dA extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class $ke{async readRasters(t={}){const{window:n,width:r,height:i}=t;let{resX:s,resY:o,bbox:a}=t;const l=await this.getImage();let u=l;const f=await this.getImageCount(),c=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[p,g]=l.getOrigin(),[v,x]=l.getResolution();a=[p+n[0]*v,g+n[1]*x,p+n[2]*v,g+n[3]*x]}const h=a||c;if(r){if(s)throw new Error("Both width and resX passed");s=(h[2]-h[0])/r}if(i){if(o)throw new Error("Both width and resY passed");o=(h[3]-h[1])/i}}if(s||o){const h=[];for(let p=0;p<f;++p){const g=await this.getImage(p),{SubfileType:v,NewSubfileType:x}=g.fileDirectory;(p===0||v===2||x&1)&&h.push(g)}h.sort((p,g)=>p.getWidth()-g.getWidth());for(let p=0;p<h.length;++p){const g=h[p],v=(c[2]-c[0])/g.getWidth(),x=(c[3]-c[1])/g.getHeight();if(u=g,s&&s>v||o&&o>x)break}}let d=n;if(a){const[h,p]=l.getOrigin(),[g,v]=u.getResolution(l);d=[Math.round((a[0]-h)/g),Math.round((a[1]-p)/v),Math.round((a[2]-h)/g),Math.round((a[3]-p)/v)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...t,window:d})}}class r1 extends $ke{constructor(t,n,r,i,s={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const r=this.bigTiff?4048:1024;return new uZe((await this.source.fetch([{offset:t,length:typeof n<"u"?n:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(t);const s=this.bigTiff?i.readUint64(t):i.readUint16(t),o=s*n+(this.bigTiff?16:6);i.covers(t,o)||(i=await this.getSlice(t,o));const a={};let l=t+(this.bigTiff?8:2);for(let c=0;c<s;l+=n,++c){const d=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let g,v;const x=h6(h),y=l+(this.bigTiff?12:8);if(x*p<=(this.bigTiff?8:4))g=Py(i,h,p,y);else{const w=i.readOffset(y),_=h6(h)*p;if(i.covers(w,_))g=Py(i,h,p,w);else{const A=await this.getSlice(w,_);g=Py(A,h,p,w)}}p===1&&jXe.indexOf(d)===-1&&!(h===cr.RATIONAL||h===cr.SRATIONAL)?v=g[0]:v=g,a[b_[d]]=v}const u=OZe(a),f=i.readOffset(t+r+n*s);return new MZe(a,u,f)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof dA?new dA(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new dA(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new Oke(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof dA)n=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(t,r);if(n===Py(i,cr.ASCII,n.length,t)){const o=Py(i,cr.ASCII,r,t).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>r&&(i=await this.getSlice(t,a));const l=Py(i,cr.ASCII,a,t);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,f])=>{this.ghostValues[u]=f})}return this.ghostValues}static async fromSource(t,n,r){const i=(await t.fetch([{offset:0,length:1024}],r))[0],s=new lZe(i),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const f=u?s.getUint64(8,a):s.getUint32(4,a);return new r1(t,a,u,f,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class $Ze extends $ke{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i];for(let o=0;o<this.imageCounts[i];o++){if(t===n){const a=await s.requestIFD(r);return new Oke(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function IZe(e,t={},n){return r1.fromSource(d6(e,t),n)}async function PZe(e,t){return r1.fromSource(FZe(e),t)}async function NZe(e,t=[],n={},r){const i=await r1.fromSource(d6(e,n),r),s=await Promise.all(t.map(o=>r1.fromSource(d6(o,n))));return new $Ze(i,s)}function BZe(e){return((e.fileDirectory.NewSubfileType||0)&4)===4}function zZe(e,t){if(!e)return!1;if(e===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const n=t.fileDirectory.PhotometricInterpretation,r=yl;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const ibe="STATISTICS_MAXIMUM",sbe="STATISTICS_MINIMUM",bF=256;let xF;function jZe(){return xF||(xF=new fZe),xF}function UZe(e){try{return e.getBoundingBox(!0)}catch{return[0,0,e.getWidth(),e.getHeight()]}}function qZe(e){try{return e.getOrigin().slice(0,2)}catch{return[0,e.getHeight()]}}function HZe(e,t){try{return e.getResolution(t)}catch{return[t.getWidth()/e.getWidth(),t.getHeight()/e.getHeight()]}}function GZe(e){const t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+t.ProjectedCSTypeGeoKey;let r=oi(n);if(!r){const i=Hve(t.ProjLinearUnitsGeoKey);i&&(r=new Gve({code:n,units:i}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const n="EPSG:"+t.GeographicTypeGeoKey;let r=oi(n);if(!r){const i=Hve(t.GeogAngularUnitsGeoKey);i&&(r=new Gve({code:n,units:i}))}return r}return null}function VZe(e){return e.getImageCount().then(function(t){const n=new Array(t);for(let r=0;r<t;++r)n[r]=e.getImage(r);return Promise.all(n)})}function WZe(e,t){let n;return e.blob?n=PZe(e.blob):e.overviews?n=NZe(e.url,e.overviews,t):n=IZe(e.url,t),n.then(VZe)}function Pw(e,t,n,r,i){if(Array.isArray(e)){const s=e.length;if(!Array.isArray(t)||s!=t.length){const o=new Error(r);throw i(o),o}for(let o=0;o<s;++o)Pw(e[o],t[o],n,r,i);return}if(t=t,Math.abs(e-t)>n*e)throw new Error(r)}function YZe(e){return e instanceof Int8Array?-128:e instanceof Int16Array?-32768:e instanceof Int32Array?-2147483648:e instanceof Float32Array?12e-39:0}function XZe(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}class _P extends dE{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const n=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,i=new Array(n);for(let s=0;s<n;++s)i[s]=WZe(this.sourceInfo_[s],this.sourceOptions_);Promise.all(i).then(function(s){r.configure_(s)}).catch(function(s){Q_(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const i=n[r],s=GZe(i);if(s){this.projection=s;break}}}determineTransformMatrix(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const s=n[r].fileDirectory.ModelTransformation;if(s){const[o,a,l,u,f,c,d,h]=s,p=G_(G_([1/Math.sqrt(o*o+f*f),0,0,-1/Math.sqrt(a*a+c*c),u,h],[o,f,a,c,0,0]),[1,0,0,1,-u,-h]);this.transformMatrix=p,this.addAlpha_=!0;break}}}configure_(t){let n,r,i,s,o;const a=new Array(t.length),l=new Array(t.length),u=new Array(t.length);let f=0;const c=t.length;for(let v=0;v<c;++v){const x=[],y=[];t[v].forEach(R=>{BZe(R)?y.push(R):x.push(R)});const w=x.length;if(y.length>0&&y.length!==w)throw new Error(`Expected one mask per image found ${y.length} masks and ${w} images`);let _,A;const T=new Array(w),D=new Array(w),k=new Array(w);l[v]=new Array(w),u[v]=new Array(w);for(let R=0;R<w;++R){const O=x[R],B=O.getGDALNoData();u[v][R]=O.getGDALMetadata(0),l[v][R]=B;const K=this.sourceInfo_[v].bands;a[v]=K?K.length:O.getSamplesPerPixel();const L=w-(R+1);_||(_=UZe(O)),A||(A=qZe(O));const $=HZe(O,x[0]);k[L]=$[0];const I=[O.getTileWidth(),O.getTileHeight()];I[0]!==I[1]&&I[1]<bF&&(I[0]=bF,I[1]=bF),T[L]=I;const U=$[0]/Math.abs($[1]);D[L]=[I[0],I[1]/U]}if(n?e0(n,_,n):n=_,!r)r=A;else{const R=`Origin mismatch for source ${v}, got [${A}] but expected [${r}]`;Pw(r,A,0,R,this.viewRejector)}if(!o)o=k,this.resolutionFactors_[v]=1;else{o.length-f>k.length&&(f=o.length-k.length);const R=o[o.length-1]/k[k.length-1];this.resolutionFactors_[v]=R;const O=k.map(K=>K*=R),B=`Resolution mismatch for source ${v}, got [${O}] but expected [${o}]`;Pw(o.slice(f,o.length),O,.02,B,this.viewRejector)}i?Pw(i.slice(f,i.length),D,.01,`Tile size mismatch for source ${v}`,this.viewRejector):i=D,s?Pw(s.slice(f,s.length),T,0,`Tile size mismatch for source ${v}`,this.viewRejector):s=T,this.sourceImagery_[v]=x.reverse(),this.sourceMasks_[v]=y.reverse()}for(let v=0,x=this.sourceImagery_.length;v<x;++v){const y=this.sourceImagery_[v];for(;y.length<o.length;)y.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let v=0;v<c;++v){if(this.sourceInfo_[v].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[v].length){this.addAlpha_=!0;break}const x=l[v],y=this.sourceInfo_[v].bands;if(y){for(let w=0;w<y.length;++w)if(x[y[w]-1]!==null){this.addAlpha_=!0;break e}continue}for(let w=0;w<x.length;++w)if(x[w]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let v=0;v<c;++v)d+=a[v];this.bandCount=d;const h=new xD({extent:n,minZoom:f,origin:r,resolutions:o,tileSizes:i});this.tileGrid=h,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]);let g=n;if(this.transformMatrix){const v=X_(Ko(),this.transformMatrix.slice()),x=Kje(y=>rh(v,y));g=Kv(n,x)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Xje(Fp(g),this.projection),extent:Zje(g,this.projection),zoom:p})}loadTile_(t,n,r,i){const s=this.getTileSize(t),o=this.sourceImagery_.length,a=new Array(o*2),l=this.nodataValues_,u=this.sourceInfo_,f=jZe();for(let c=0;c<o;++c){const d=u[c],h=this.resolutionFactors_[c],p=[Math.round(n*(s[0]*h)),Math.round(r*(s[1]*h)),Math.round((n+1)*(s[0]*h)),Math.round((r+1)*(s[1]*h))],g=this.sourceImagery_[c][t];let v;d.bands&&(v=d.bands.map(function(A){return A-1}));let x;"nodata"in d&&d.nodata!==null?x=d.nodata:v?x=v.map(function(A){return l[c][A]}):x=l[c];const y={window:p,width:s[0],height:s[1],samples:v,fillValue:x,pool:f,interleave:!1,signal:i.signal};zZe(this.convertToRGB_,g)?a[c]=g.readRGB(y):a[c]=g.readRasters(y);const w=o+c,_=this.sourceMasks_[c][t];if(!_){a[w]=Promise.resolve(null);continue}a[w]=_.readRasters({window:p,width:s[0],height:s[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,s)).catch(function(c){throw Q_(c),c})}composeTile_(t,n){const r=this.metadata_,i=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,f=this.addAlpha_,c=t[0]*t[1],d=c*o;let h;u?h=new Uint8Array(d):h=new Float32Array(d);let p=0;for(let g=0;g<c;++g){let v=f;for(let x=0;x<s;++x){const y=i[x];let w=y.min,_=y.max,A,T;if(u){const D=r[x][0];w===void 0&&(D&&sbe in D?w=parseFloat(D[sbe]):w=YZe(n[x][0])),_===void 0&&(D&&ibe in D?_=parseFloat(D[ibe]):_=XZe(n[x][0])),A=255/(_-w),T=-w*A}for(let D=0;D<a[x];++D){const k=n[x][D][g];let R;if(u?R=As(A*k+T,0,255):R=k,!f)h[p]=R;else{let O=y.nodata;if(O===void 0){let K;y.bands?K=y.bands[D]-1:K=D,O=l[x][K]}const B=isNaN(O);(!B&&k!==O||B&&!isNaN(k))&&(v=!1,h[p]=R)}p++}if(!v){const D=s+x,k=n[D];k&&!k[0][g]&&(v=!0)}}f&&(v||(h[p]=255),p++)}return h}}_P.prototype.getView;const ZZe="https://tile.googleapis.com/v1/createSession",KZe="https://tile.googleapis.com/v1/2dtiles",JZe="https://tile.googleapis.com/tile/v1/viewport",QZe=22;class eKe extends gh{constructor(t){const n=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const r={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(r.imageFormat=t.imageFormat),t.scale&&(r.scale=t.scale),n&&(r.highDpi=!0),t.layerTypes&&(r.layerTypes=t.layerTypes),t.styles&&(r.styles=t.styles),t.overlay===!0&&(r.overlay=!0),t.apiOptions&&(r.apiOptions=t.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,n){return fetch(t,n)}async createSession_(){const t=ZZe+"?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(t,n);if(!r.ok){try{const c=await r.json();this.error_=new Error(c.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const i=await r.json(),s=this.getTilePixelRatio(1),o=[i.tileWidth/s,i.tileHeight/s];this.tileGrid=oE({extent:sE(this.getProjection()),maxZoom:QZe,tileSize:o});const a=i.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(c,d,h){const p=c[0],g=c[1],v=c[2];return`${KZe}/${p}/${g}/${v}?session=${a}&key=${l}`};const u=parseInt(i.expiry,10)*1e3,f=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),f),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[Up.ANIMATING]||t.viewHints[Up.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[n,r]=Vve(Jje(t.extent),t.viewState.projection),[i,s]=Vve(Qje(t.extent),t.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${s}&south=${r}&east=${i}&west=${n}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,f=this.apiKey_,c=`${JZe}?session=${u}&key=${f}&${l}`;return this.previousViewportAttribution_=await fetch(c).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let Ike=class extends kI{constructor(t,n,r,i,s,o,a){super(n,r,i,s,o,a),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==Ts.LOADED){const n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;const r=t0(n[0],n[1]);return r.drawImage(t,0,0),this.zoomifyImage_=r.canvas,r.canvas}return t}};class tKe extends gh{constructor(t){const n=t.size,r=t.tierSizeCalculation!==void 0?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,s=n[0],o=n[1],a=[],l=t.tileSize||J4;let u=l*i;switch(r){case"default":for(;s>u||o>u;)a.push([Math.ceil(s/u),Math.ceil(o/u)]),u+=u;break;case"truncated":let T=s,D=o;for(;T>u||D>u;)a.push([Math.ceil(T/u),Math.ceil(D/u)]),T>>=1,D>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const f=[i],c=[0];for(let T=1,D=a.length;T<D;T++)f.push(i<<T),c.push(a[T-1][0]*a[T-1][1]+c[T-1]);f.reverse();const d=new xD({tileSize:l,extent:t.extent||[0,-o,s,0],resolutions:f});let h=t.url;h&&!h.includes("{TileGroup}")&&!h.includes("{tileIndex}")&&(h+="{TileGroup}/{z}-{x}-{y}.jpg");const p=JCe(h);let g=l*i;function v(T){return function(D,k,R){if(!D)return;const O=D[0],B=D[1],K=D[2],L=B+K*a[O][0],$=(L+c[O])/g|0,I={z:O,x:B,y:K,tileIndex:L,TileGroup:"TileGroup"+$};return T.replace(/\{(\w+?)\}/g,function(U,q){return I[q]})}}const x=FI(p.map(v)),y=Ike.bind(null,Ec(l*i));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:y,tileGrid:d,tileUrlFunction:x,transition:t.transition}),this.zDirection=t.zDirection;const w=d.getTileCoordForCoordAndResolution(Fp(d.getExtent()),f[f.length-1]),_=x(w,1,null),A=new Image;A.addEventListener("error",()=>{g=l,this.changed()}),A.src=_}}function uw(e){return e.toLocaleString("en",{maximumFractionDigits:10})}class nKe extends gh{constructor(t){const n=t||{};let r=n.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const i=n.version||Zs.VERSION2,s=n.sizes||[],o=n.size;Dc(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],u=n.tileSize,f=n.tilePixelRatio||1,c=n.format||"jpg",d=n.quality||(n.version==Zs.VERSION1?"native":"default");let h=n.resolutions||[];const p=n.supports||[],g=n.extent||[0,-l,a,0],v=s!=null&&Array.isArray(s)&&s.length>0,x=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),y=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let w,_,A;if(h.sort(function(R,O){return O-R}),x||y)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(w=u,_=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(w=u[0],_=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(w=u[0],_=u[1]):u[0]==null&&Number.isInteger(u[1])&&(w=u[1],_=u[1])))),(w===void 0||_===void 0)&&(w=J4,_=J4),h.length==0){A=Math.max(Math.ceil(Math.log(a/w)/Math.LN2),Math.ceil(Math.log(l/_)/Math.LN2));for(let R=A;R>=0;R--)h.push(Math.pow(2,R))}else{const R=Math.max(...h);A=Math.round(Math.log(R)/Math.LN2)}else if(w=a,_=l,h=[],v){s.sort(function(O,B){return O[0]-B[0]}),A=-1;const R=[];for(let O=0;O<s.length;O++){const B=a/s[O][0];if(h.length>0&&h[h.length-1]==B){R.push(O);continue}h.push(B),A++}if(R.length>0)for(let O=0;O<R.length;O++)s.splice(R[O]-O,1)}else h.push(1),s.push([a,l]),A=0;const T=new xD({tileSize:[w,_],extent:g,origin:eUe(g),resolutions:h}),D=function(R,O,B){let K,L;const $=R[0];if($>A)return;const I=R[1],U=R[2],q=h[$];if(!(I===void 0||U===void 0||q===void 0||I<0||Math.ceil(a/q/w)<=I||U<0||Math.ceil(l/q/_)<=U)){if(y||x){const Y=I*w*q,X=U*_*q;let te=w*q,le=_*q,ee=w,z=_;if(Y+te>a&&(te=a-Y),X+le>l&&(le=l-X),Y+w*q>a&&(ee=Math.floor((a-Y+q-1)/q)),X+_*q>l&&(z=Math.floor((l-X+q-1)/q)),Y==0&&te==a&&X==0&&le==l)K="full";else if(!y||p.includes("regionByPx"))K=Y+","+X+","+te+","+le;else if(p.includes("regionByPct")){const he=uw(Y/a*100),de=uw(X/l*100),ze=uw(te/a*100),He=uw(le/l*100);K="pct:"+he+","+de+","+ze+","+He}i==Zs.VERSION3&&(!y||p.includes("sizeByWh"))?L=ee+","+z:!y||p.includes("sizeByW")?L=ee+",":p.includes("sizeByH")?L=","+z:p.includes("sizeByWh")?L=ee+","+z:p.includes("sizeByPct")&&(L="pct:"+uw(100/q))}else if(K="full",v){const Y=s[$][0],X=s[$][1];i==Zs.VERSION3?Y==a&&X==l?L="max":L=Y+","+X:Y==a?L="full":L=Y+","}else L=i==Zs.VERSION3?"max":"full";return r+K+"/"+L+"/0/"+d+"."+c}},k=Ike.bind(null,Ec(u||256).map(function(R){return R*f}));super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:k,tileGrid:T,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:D,transition:n.transition}),this.zDirection=n.zDirection}}function Pke(e,t,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[Wve(eu(t)/a,Yve),Wve(Hp(t)/a,Yve)];s.SIZE=l[0]+","+l[1],s.BBOX=t.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return E3(u,s)}function Nke(e){const t=e.load?e.load:G1,n=oi(e.projection||"EPSG:3857"),r=e.ratio??1.5,i=e.crossOrigin??null;return function(s,o,a){a=e.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,e.params),s=QCe(s,o,a,r);const u=Pke(e.url,s,o,a,n,l),f=new Image;return f.crossOrigin=i,t(f,u).then(c=>{const d=eu(s)/c.width*a;return{image:c,extent:s,resolution:d,pixelRatio:a}})}}class rKe extends L0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:MI,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Nke({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),G1(s))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class iKe extends L0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getImageInternal(t,n,r,i){n=this.findNearestResolution(n);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==r&&p3(s.getExtent(),t))return s;t=t.slice(),XCe(t,this.ratio_);const o=eu(t)/n,a=Hp(t)/n,l=[o*r,a*r],u=this.canvasFunction_.call(this,t,n,r,l,i);return u&&(s=new qI(t,n,r,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}function sKe(e,t,n,r){const i=eu(e),s=Hp(e),o=t[0],a=t[1],l=.0254/r;return a*i>o*s?i*n/(o*l):s*n/(a*l)}function oKe(e,t,n,r,i,s,o){const a=sKe(n,r,s,o),l=Fp(n),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,t),E3(e,u)}function Bke(e){const t=e.load||G1,n=e.useOverlay??!1,r=e.metersPerUnit||1,i=e.displayDpi||96,s=e.ratio??1,o=e.crossOrigin??null;return function(a,l,u){const f=new Image;f.crossOrigin=o,a=QCe(a,l,u,s);const c=eu(a)/l,d=Hp(a)/l,h=[c*u,d*u],p=oKe(e.url,e.params,a,h,n,r,i);return t(f,p).then(g=>({image:g,extent:a,pixelRatio:u}))}}class aKe extends L0{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.displayDpi_=t.displayDpi!==void 0?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:MI,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.metersPerUnit_=t.metersPerUnit!==void 0?t.metersPerUnit:1,this.ratio_=t.ratio!==void 0?t.ratio:1,this.useOverlay_=t.useOverlay!==void 0?t.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Bke({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),G1(s))})),super.getImageInternal(t,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}function zke(e){const t=e.load||G1,n=e.imageExtent,r=e.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,t(i,e.url).then(s=>{const o=eu(n)/s.width,a=Hp(n)/s.height;return{image:s,extent:n,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class jke extends L0{constructor(t){const n=t.crossOrigin!==void 0?t.crossOrigin:null,r=t.imageLoadFunction!==void 0?t.imageLoadFunction:MI;super({attributions:t.attributions,interpolate:t.interpolate,projection:oi(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new PCe(this.imageExtent_,void 0,1,zke({url:t.url,imageExtent:t.imageExtent,crossOrigin:n,load:(i,s)=>(this.image.setImage(i),r(this.image,s),G1(i))})),this.image.addEventListener(Cl.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,n,r,i){return Zv(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const lKe=new Error("Image failed to load");function Uke(e,t,n,r,i){return new Promise((s,o)=>{const a=new Image;a.crossOrigin=i.crossOrigin??null,a.addEventListener("load",()=>s(a)),a.addEventListener("error",()=>o(lKe)),a.src=e3e(e,t,n,r,i.maxY)})}function obe(e){return function(t,n,r,i){const s=tUe(e,t,n,r);return Uke(s,t,n,r,i)}}function uKe(e){return function(t,n,r,i){const s=e(t,n,r,i);return Uke(s,t,n,r,i)}}function abe(e){let t;if(Array.isArray(e))t=obe(e);else if(typeof e=="string"){const n=JCe(e);t=obe(n)}else if(typeof e=="function")t=uKe(e);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return t}let lbe=0;function ube(e){return Array.isArray(e)?e.join(`
`):typeof e=="string"?e:(++lbe,"url-function-key-"+lbe)}class qke extends dE{constructor(t){t=t||{};let n=t.loader,r;t.url&&(n=abe(t.url),r=ube(t.url));const i=n?t.state:"loading",s=t.wrapX===void 0?!0:t.wrapX;super({loader:n,key:r,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:s,transition:t.transition,interpolate:t.interpolate!==!1,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const n=abe(t);this.setLoader(n),this.setKey(ube(t)),this.getState()!=="ready"&&this.setState("ready")}}function EP(e,t,n,r){const i=document.createElement("script"),s="olc_"+Ei(t);function o(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),n&&n()},1e4);window[s]=function(l){clearTimeout(a),o(),t(l)},document.head.appendChild(i)}class cKe extends Error{constructor(t){const n="Unexpected response status: "+t.status;super(n),this.name="ResponseError",this.response=t}}class fKe extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function Hke(e){return new Promise(function(t,n){function r(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const f="Error parsing response text as JSON: "+u.message;n(new Error(f));return}t(l);return}n(new cKe(a))}function i(o){n(new fKe(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",i),s.open("GET",e),s.setRequestHeader("Accept","application/json"),s.send()})}function Gke(e,t){return t.includes("://")?t:new URL(t,e).href}const dKe={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},hKe={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Vke(e,t){if(!t.length)return e;const n=new URL(e,"file:/");if(n.pathname.split("/").includes("collections"))return Q_('The "collections" query parameter cannot be added to collection endpoints'),e;const r=t.map(o=>encodeURIComponent(o)).join(",");n.searchParams.append("collections",r);const i=e.split("?")[0],s=decodeURIComponent(n.searchParams.toString());return`${i}?${s}`}function pKe(e,t,n){let r,i;for(let s=0;s<e.length;++s){const o=e[s];if(o.rel==="item"){if(o.type===t){r=o.href;break}(dKe[o.type]||!i&&o.type.startsWith("image/"))&&(i=o.href)}}if(!r)if(i)r=i;else throw new Error('Could not find "item" link');return n&&(r=Vke(r,n)),r}function mKe(e,t,n,r){let i,s;const o={};for(let a=0;a<e.length;++a){const l=e[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===t){i=l.href;break}hKe[l.type]&&(s=l.href)}}if(!i&&n)for(let a=0;a<n.length;++a){const l=n[a];if(o[l]){i=o[l];break}}if(!i)if(s)i=s;else throw new Error('Could not find "item" link');return r&&(i=Vke(i,r)),i}function cbe(e,t,n,r){let i=e.projection;if(!i&&(typeof t.crs=="string"?i=oi(t.crs):"uri"in t.crs&&(i=oi(t.crs.uri)),!i))throw new Error(`Unsupported CRS: ${JSON.stringify(t.crs)}`);const s=t.orderedAxes,a=!(s?s.slice(0,2).map(T=>T.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):i.getAxisOrientation()).startsWith("en"),l=t.tileMatrices,u={};for(let T=0;T<l.length;++T){const D=l[T];u[D.id]=D}const f={},c=[];if(r)for(let T=0;T<r.length;++T){const D=r[T],k=D.tileMatrix;c.push(k),f[k]=D}else for(let T=0;T<l.length;++T){const D=l[T].id;c.push(D)}const d=c.length,h=new Array(d),p=new Array(d),g=new Array(d),v=new Array(d),x=[-1/0,-1/0,1/0,1/0];for(let T=0;T<d;++T){const D=c[T],k=u[D],R=k.pointOfOrigin;a?h[T]=[R[1],R[0]]:h[T]=R,p[T]=k.cellSize,g[T]=[k.matrixWidth,k.matrixHeight],v[T]=[k.tileWidth,k.tileHeight];const O=f[D];if(O){const B=k.cellSize*k.tileWidth,K=h[T][0]+O.minTileCol*B,L=h[T][0]+(O.maxTileCol+1)*B,$=k.cellSize*k.tileHeight,I=k.cornerOfOrigin==="bottomLeft";let U,q;I?(U=h[T][1]+O.minTileRow*$,q=h[T][1]+(O.maxTileRow+1)*$):(U=h[T][1]-(O.maxTileRow+1)*$,q=h[T][1]-O.minTileRow*$),e0(x,[K,U,L,q],x)}}const y=new xD({origins:h,resolutions:p,sizes:g,tileSizes:v,extent:r?x:void 0}),w=e.context,_=e.url;function A(T,D,k){if(!T)return;const R=c[T[0]],O=u[R],B=O.cornerOfOrigin==="bottomLeft",K={tileMatrix:R,tileCol:T[1],tileRow:B?-T[2]-1:T[2]};if(r){const $=f[O.id];if(K.tileCol<$.minTileCol||K.tileCol>$.maxTileCol||K.tileRow<$.minTileRow||K.tileRow>$.maxTileRow)return}Object.assign(K,w);const L=n.replace(/\{(\w+?)\}/g,function($,I){return K[I]});return Gke(_,L)}return{grid:y,projection:i,urlTemplate:n,urlFunction:A}}function gKe(e,t){const n=t.tileMatrixSetLimits;let r;if(t.dataType==="map")r=pKe(t.links,e.mediaType,e.collections);else if(t.dataType==="vector")r=mKe(t.links,e.mediaType,e.supportedMediaTypes,e.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(t.tileMatrixSet)return cbe(e,t.tileMatrixSet,r,n);const i=t.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=i.href,o=Gke(e.url,s);return Hke(o).then(function(a){return cbe(e,a,r,n)})}function Wke(e){return Hke(e.url).then(function(t){return gKe(e,t)})}class yKe extends gh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};Wke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Q_(t),this.setState("error")}}class vKe extends wD{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const n={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};Wke(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){Q_(t),this.setState("error")}}function Yke(e){return function(t){const n=t.buffers,r=t.meta,i=t.imageOps,s=t.width,o=t.height,a=n.length,l=n[0].byteLength;if(i){const d=new Array(a);for(let p=0;p<a;++p)d[p]=new ImageData(new Uint8ClampedArray(n[p]),s,o);return e(d,r).data.buffer}const u=new Uint8ClampedArray(l),f=new Array(a),c=new Array(a);for(let d=0;d<a;++d)f[d]=new Uint8ClampedArray(n[d]),c[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let p=0;p<a;++p){const g=f[p];c[p][0]=g[d],c[p][1]=g[d+1],c[p][2]=g[d+2],c[p][3]=g[d+3]}const h=e(c,r);u[d]=h[0],u[d+1]=h[1],u[d+2]=h[2],u[d+3]=h[3]}return u.buffer}}function bKe(e,t){const r=Object.keys(e.lib||{}).map(function(s){return"const "+s+" = "+e.lib[s].toString()+";"}).concat(["const __minion__ = ("+Yke.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",t),i}function xKe(e,t){const n=Yke(e.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||t({data:{buffer:n(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class wKe extends qCe{constructor(t){super(),this.imageOps_=!!t.imageOps;let n;t.threads===0?n=0:this.imageOps_?n=1:n=t.threads||1;const r=new Array(n);if(n)for(let i=0;i<n;++i)r[i]=bKe(t,this.onWorkerMessage_.bind(this,i));else r[0]=xKe(t,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,n,r){this.enqueue_({inputs:t,meta:n,callback:r}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const n=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map(function(l){return l.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},i);return}const o=t.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const u=l*a,f=[];for(let c=0,d=i.length;c<d;++c)f.push(i[c].slice(u,u+a));this.workers_[l].postMessage({buffers:f,meta:t.meta,imageOps:this.imageOps_,width:n,height:r},f)}}onWorkerMessage_(t,n){this.disposed||(this.dataLookup_[t]=n.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,n=this.workers_.length;let r,i;if(n===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=t.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(n);const o=4*Math.ceil(s/4/n);for(let a=0;a<n;++a){const l=this.dataLookup_[a].buffer,u=a*o;r.set(new Uint8ClampedArray(l),u),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(r,t.inputs[0].width,t.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const fbe={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class dbe extends t3e{constructor(t,n,r){super(t),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=r}}class Xke extends L0{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=SKe(t.sources);const n=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(Cl.CHANGE,n);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new nUe(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ko(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:EKe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ko(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ei(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let o=0,a=t.sources.length;o<a;++o){const l=t.sources[o],u=l instanceof $I?l:l.getSource();if(!u)continue;const f=(s=u.getAttributions())==null?void 0:s(r);typeof f=="string"?i.push(f):f!==void 0&&i.push(...f)}return i}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,n){this.processor_&&this.processor_.dispose(),this.processor_=new wKe({operation:t,imageOps:this.operationType_==="image",queue:1,lib:n,threads:this.threads_}),this.changed()}updateFrameState_(t,n,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Fp(t);i.size[0]=Math.ceil(eu(t)/n),i.size[1]=Math.ceil(Hp(t)/n),i.extent=[s[0]-i.size[0]*n/2,s[1]-i.size[1]*n/2,s[0]+i.size[0]*n/2,s[1]+i.size[1]*n/2],i.time=Date.now();const o=i.viewState;return o.center=s,o.projection=r,o.resolution=n,i}allSourcesReady_(){let t=!0,n;for(let r=0,i=this.layers_.length;r<i;++r)if(n=this.layers_[r].getSource(),!n||n.getState()!=="ready"){t=!1;break}return t}getImage(t,n,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),n=this.findNearestResolution(n);const s=this.updateFrameState_(t,n,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(n!==o||!W_(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,n=this.layers_.length,r=new Array(n);for(let s=0;s<n;++s){t.layerIndex=s,t.renderTargets={};const o=_Ke(this.layers_[s],t);if(o)r[s]=o;else return}const i={};this.dispatchEvent(new dbe(fbe.BEFOREOPERATIONS,t,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,n,r,i){if(n||!r)return;const s=t.extent,o=t.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!W_(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(eu(s)/o),u=Math.round(Hp(s)/o);a=t0(l,u),this.renderedImageCanvas_=new qI(s,o,1,a.canvas)}a.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new dbe(fbe.AFTEROPERATIONS,t,i))}getResolutions(t){if(!this.useResolutions_)return null;let n=super.getResolutions();if(!n)for(let r=0,i=this.layers_.length;r<i&&(n=this.layers_[r].getSource().getResolutions(t),!n);++r);return n}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Xke.prototype.dispose;let ig=null;function _Ke(e,t){const n=e.getRenderer();if(!n)throw new Error("Unsupported layer type: "+e);if(!n.prepareFrame(t))return null;const r=t.size[0],i=t.size[1];if(r===0||i===0)return null;const s=n.renderFrame(t,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i)}if(!ig)ig=t0(r,i,void 0,{willReadFrequently:!0});else{const a=ig.canvas;a.width!==r||a.height!==i?ig=t0(r,i,void 0,{willReadFrequently:!0}):ig.clearRect(0,0,r,i)}return ig.drawImage(o,0,0,r,i),ig.getImageData(0,0,r,i)}function EKe(e){return e.map(function(t){return t.getLayerState()})}function SKe(e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=AKe(e[r]);return n}function AKe(e){let t;return e instanceof $I?e instanceof bD?t=new _3({source:e}):e instanceof L0&&(t=new RI({source:e})):t=e,t}const CKe='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',kKe='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',TKe='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',DKe={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},LKe={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class RKe extends J_{constructor(t){const n=t.layer.indexOf("-"),r=n==-1?t.layer:t.layer.slice(0,n),i=LKe[r]||{minZoom:0,maxZoom:20,retina:!0},s=DKe[t.layer],o=t.apiKey?"?api_key="+t.apiKey:"",a=i.retina&&t.retina?"@2x":"",l=t.url!==void 0?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,u=[CKe,kKe,rUe];t.layer.startsWith("stamen_")&&u.splice(1,0,TKe),super({attributions:u,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:i.maxZoom,minZoom:t.minZoom!==void 0?t.minZoom:i.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:l,tilePixelRatio:a?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}class FKe extends gh{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=yD(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const n=[];for(const r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(t,n,r,i,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=iUe(sUe(t),a.length);l=a[u]}return Pke(l,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(t[0]),i,s,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=t[0])return;n!=1&&!this.hidpi_&&(n=1);const s=i.getTileCoordExtent(t,this.tmpExtent_);let o=Ec(i.getTileSize(t[0]),this.tmpSize);n!=1&&(o=oUe(o,n,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,o,s,n,r,a)}}class OKe extends qke{constructor(t){t=t||{};const n=t.template||"z:{z} x:{x} y:{y}",r=t.source;super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:r!==void 0?r.getWrapX():void 0});const i=()=>{var o;this.projection=t.projection!==void 0?oi(t.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof dE&&(this.transformMatrix=((o=r.transformMatrix)==null?void 0:o.slice())||null);const s=this.tileGrid;s&&this.setTileSizes(s.getResolutions().map((a,l)=>Ec(s.getTileSize(l)).map(u=>Math.max(Math.floor(u),1)))),this.setLoader((a,l,u,f)=>{const c=e3e(n,a,l,u,f.maxY),[d,h]=this.getTileSize(a),p=t0(d,h);return p.strokeStyle="grey",p.strokeRect(.5,.5,d+.5,h+.5),p.fillStyle="grey",p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(c,d/2,h/2,d),p.fillText(c,d/2,h/2,d),p.canvas}),this.setState("ready")};if(r===void 0||r.getState()==="ready")i();else{const s=()=>{r.getState()==="ready"&&(r.removeEventListener(Cl.CHANGE,s),i())};r.addEventListener(Cl.CHANGE,s)}}}class Zke extends gh{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:oi("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)EP(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const n=oi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const u=OI(n,r);i=Kv(t.bounds,u)}const s=sE(r),o=t.minzoom||0,a=t.maxzoom||22,l=oE({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=n3e(t.tiles,l),t.attribution&&!this.getAttributions()){const u=i!==void 0?i:s;this.setAttributions(function(f){return Zv(u,f.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class MKe extends lUe{constructor(t,n,r,i,s,o){super(t,n),this.src_=r,this.extent_=i,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const n=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof i!="string")return null;let s=i.charCodeAt(Math.floor(n*i.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(t,n,r){this.state==Ts.EMPTY&&r===!0?(this.state=Ts.IDLE,uUe(this,Cl.CHANGE,i=>{n(this.getData(t))}),this.loadInternal_()):r===!0?setTimeout(()=>{n(this.getData(t))},0):n(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=Ts.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Ts.LOADED,this.changed()}loadInternal_(){if(this.state==Ts.IDLE)if(this.state=Ts.LOADING,this.jsonp_)EP(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(Ts.EMPTY)}}class $Ke extends bD{constructor(t){if(super({projection:oi("EPSG:3857"),state:"loading",wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection}),this.preemptive_=t.preemptive!==void 0?t.preemptive:!0,this.tileUrlFunction_=aUe,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)EP(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",t.url),n.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,n,r,i){if(this.tileGrid){const s=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,i)}else i===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const n=oi("EPSG:4326"),r=this.getProjection();let i;if(t.bounds!==void 0){const f=OI(n,r);i=Kv(t.bounds,f)}const s=sE(r),o=t.minzoom||0,a=t.maxzoom||22,l=oE({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=t.template;const u=t.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=n3e(u,l),t.attribution){const f=i!==void 0?i:s;this.setAttributions(function(c){return Zv(f,c.extent)?[t.attribution]:null})}this.setState("ready")}getTile(t,n,r,i,s){const o=[t,n,r],a=this.getTileCoordForTileUrlFunction(o,s),l=this.tileUrlFunction_(a,i,s);return new MKe(o,l!==void 0?Ts.IDLE:Ts.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_)}}function IKe(e,t){const n=new VCe(32),r=e.getExtent();return function(i,s){n.expireCache(),r&&(i=e0(r,i));const o=e.getZForResolution(s),a=[];return e.forEachTileCoord(i,o,l=>{const u=l.toString();if(!n.containsKey(u)){const f=t(l);n.set(u,f)}a.push(n.get(u))}),a}}const PKe=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:oXe,CartoDB:aXe,Cluster:lXe,DataTile:dE,GeoTIFF:_P,Google:eKe,IIIF:nKe,Image:L0,ImageArcGISRest:rKe,ImageCanvas:iKe,ImageMapGuide:aKe,ImageStatic:jke,ImageTile:qke,ImageWMS:cUe,OGCMapTile:yKe,OGCVectorTile:vKe,OSM:fUe,Raster:Xke,Source:$I,StadiaMaps:RKe,Tile:bD,TileArcGISRest:FKe,TileDebug:OKe,TileImage:gh,TileJSON:Zke,TileWMS:r3e,UTFGrid:$Ke,UrlTile:dUe,Vector:nE,VectorTile:wD,WMTS:i3e,XYZ:J_,Zoomify:tKe,createArcGISRestLoader:Nke,createMapGuideLoader:Bke,createStaticLoader:zke,createWMSLoader:hUe,sourcesFromTileGrid:IKe},Symbol.toStringTag,{value:"Module"})),NKe="1.0.0",BKe="",zKe=JSON.parse('[{"kind":"javascript-module","path":"elements/chart/src/main.js","declarations":[{"kind":"class","description":"Chart component based on [Vega-Lite](https://vega.github.io/vega-lite/)/[Vega-Embed](https://github.com/vega/vega-embed).\\nPass a valid Vega spec as `spec` property in order to render a chart.\\n\\nThe `eox-chart` provides some default `spec` settings (merged with the provided `spec` property) and helper functionalities on top of Vega-Lite.","name":"EOxChart","members":[{"kind":"field","name":"spec","privacy":"public","type":{"text":"VisualizationSpec"},"description":"[Vega-Lite spec](https://vega.github.io/vega-lite/docs/spec.html)","default":"undefined"},{"kind":"field","name":"dataValues","privacy":"public","type":{"text":"{[dataSourceName: string]: InlineData}"},"description":"Data values passed on runtime. Requires a [named data source](https://vega.github.io/vega-lite/docs/data.html#named) in the provided `spec`","default":"undefined"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-chart","customElement":true}],"exports":[{"kind":"js","name":"EOxChart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}},{"kind":"custom-element-definition","name":"eox-chart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}}]},{"kind":"javascript-module","path":"elements/drawtools/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxDrawTools","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"field","name":"#olMap","privacy":"private","type":{"text":"Map"}},{"kind":"field","name":"#geoJSON","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#layerId","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"layerId","privacy":"public","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","attribute":"layer-id"},{"kind":"method","name":"startDrawing"},{"kind":"method","name":"discardDrawing"},{"kind":"method","name":"handleFeatureChange","parameters":[{"name":"text","description":"The string representation of the features to be parsed.","type":{"text":"string"}},{"name":"replaceFeatures","default":"false","description":"A boolean flag indicating whether to replace the existing features.","type":{"text":"boolean"}}]},{"kind":"method","name":"handleFilesChange","parameters":[{"name":"evt","description":"The event object from the file input interaction.","type":{"text":"DragEvent | Event"}}]},{"kind":"method","name":"onModifyEnd"},{"kind":"method","name":"updateGeoJSON","description":"Update #geoJSON with stringify feature."},{"kind":"method","name":"emitDrawnFeatures","description":"Triggers different events when the drawing of a shape is completed."},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"allowModify","privacy":"public","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","attribute":"allow-modify"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"currentlyDrawing","privacy":"public","type":{"text":"boolean"},"description":"Whether the user is currently in the process of drawing or not","default":"false"},{"kind":"field","name":"draw","privacy":"public","type":{"text":"Draw | EOxSelectInteraction"},"description":"The current native OpenLayers `draw` interaction","default":"null"},{"kind":"field","name":"drawLayer","privacy":"public","type":{"text":"default"},"description":"The current native OpenLayers draw `layer` (initialized with a `zIndex` of 100)","default":"null"},{"kind":"field","name":"drawnFeatures","privacy":"public","type":{"text":"Array<Feature>"},"description":"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.","default":"[]"},{"kind":"field","name":"modify","privacy":"public","type":{"text":"Modify"},"description":"The current native OpenLayers `modify` interaction","default":"null"},{"kind":"field","name":"multipleFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","attribute":"multiple-features"},{"kind":"field","name":"importFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","attribute":"import-features"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","attribute":"show-editor"},{"kind":"field","name":"showList","privacy":"public","type":{"text":"boolean"},"description":"Show list of features","default":"false","attribute":"show-list"},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","attribute":"projection"},{"kind":"field","name":"type","privacy":"public","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","attribute":"type"},{"kind":"field","name":"selectionEvents","type":{"text":"ReturnType<typeof default>"},"default":"null"},{"kind":"field","name":"format","privacy":"public","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","attribute":"format"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"noShadow"}],"events":[{"name":"drawupdate","type":{"text":"Array<Feature>"},"description":"Fires whenever features are added, modified or discarded, where the event detail\\nis the `drawnFeatures` array"}],"attributes":[{"name":"allow-modify","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","fieldName":"allowModify"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer-id","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","fieldName":"layerId"},{"name":"multiple-features","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","fieldName":"multipleFeatures"},{"name":"import-features","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","fieldName":"importFeatures"},{"name":"show-editor","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","fieldName":"showEditor"},{"name":"show-list","type":{"text":"boolean"},"description":"Show list of features","default":"false","fieldName":"showList"},{"name":"projection","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","fieldName":"projection"},{"name":"noShadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"format","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","fieldName":"format"},{"name":"type","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","fieldName":"type"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-drawtools","customElement":true}],"exports":[{"kind":"js","name":"EOxDrawTools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}},{"kind":"custom-element-definition","name":"eox-drawtools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}}]},{"kind":"javascript-module","path":"elements/geosearch/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxGeoSearch","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"method","name":"onInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onInputBlur"},{"kind":"method","name":"onButtonClick"},{"kind":"method","name":"getFlexDirection"},{"kind":"method","name":"getResultsDirection"},{"kind":"method","name":"getVerticalAlign"},{"kind":"method","name":"getMarginDirection","parameters":[{"name":"direction"}]},{"kind":"method","name":"handleSelect","parameters":[{"name":"event"}]},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"_data","privacy":"private","description":"Internal storage of OpenCage API data after a successful API request.","type":{"text":"array"},"default":"[]"},{"kind":"field","name":"_isListVisible","privacy":"private","description":"Whether or not the list dropdown is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_isInputVisible","privacy":"private","description":"Whether or not the input field is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_query","privacy":"private","description":"The search query, which is bound to the input field.","type":{"text":"string"},"default":"\\"\\""},{"kind":"field","name":"_isLoading","privacy":"private","description":"Returns true if the element is currently loading data from the API.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"listDirection","type":{"text":"string"},"default":"\\"right\\""},{"kind":"field","name":"resultsDirection","privacy":"public","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","attribute":"results-direction"},{"kind":"field","name":"interval","privacy":"public","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","attribute":"interval"},{"kind":"field","name":"loaderSvg","privacy":"public","type":{"text":"string"},"default":"` <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 100 100\\" preserveAspectRatio=\\"xMidYMid\\" width=\\"50\\" height=\\"50\\" style=\\"shape-rendering: auto; display: block; background: transparent;\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" > <g> <circle stroke-dasharray=\\"164.93361431346415 56.97787143782138\\" r=\\"35\\" stroke-width=\\"12\\" stroke=\\"#1a467c\\" fill=\\"none\\" cy=\\"50\\" cx=\\"50\\" > <animateTransform keyTimes=\\"0;1\\" values=\\"0 50 50;360 50 50\\" dur=\\"1.2222222222222223s\\" repeatCount=\\"indefinite\\" type=\\"rotate\\" attributeName=\\"transform\\" ></animateTransform> </circle> <g></g> </g> </svg> `","attribute":"loader-svg"},{"kind":"field","name":"fetchDebounced"},{"kind":"field","name":"endpoint","privacy":"public","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","attribute":"endpoint"},{"kind":"field","name":"queryParameter","privacy":"public","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","attribute":"queryParameter"},{"kind":"field","name":"button","privacy":"public","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","attribute":"button"},{"kind":"field","name":"small","privacy":"public","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","attribute":"small"},{"kind":"field","name":"label","privacy":"public","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","attribute":"label"},{"kind":"field","name":"direction","privacy":"public","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","attribute":"list-direction"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"events":[{"name":"geosearchSelect","type":{"text":"CustomEvent"},"description":"The select event, including the details of the selected item"}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","fieldName":"endpoint"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"queryParameter","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","fieldName":"queryParameter"},{"name":"button","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","fieldName":"button"},{"name":"interval","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","fieldName":"interval"},{"name":"small","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","fieldName":"small"},{"name":"label","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","fieldName":"label"},{"name":"list-direction","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","fieldName":"direction"},{"name":"results-direction","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","fieldName":"resultsDirection"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"},{"name":"loader-svg","type":{"text":"string"},"default":"loaderSvg","fieldName":"loaderSvg"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch","customElement":true},{"kind":"class","description":"","name":"EOxGeoSearchItem","members":[{"kind":"field","name":"item","privacy":"public","type":{"text":"object"},"attribute":"item"},{"kind":"field","name":"onClick","privacy":"public","type":{"text":"function"},"attribute":"onClick"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"attributes":[{"name":"item","type":{"text":"object"},"fieldName":"item"},{"name":"onClick","type":{"text":"function"},"fieldName":"onClick"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch-item","customElement":true}],"exports":[{"kind":"custom-element-definition","name":"eox-geosearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}},{"kind":"custom-element-definition","name":"eox-geosearch-item","declaration":{"name":"EOxGeoSearchItem","module":"elements/geosearch/src/main.js"}},{"kind":"js","name":"EOxGeoSearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}}]},{"kind":"javascript-module","path":"elements/itemfilter/src/main.js","declarations":[{"kind":"class","description":"EOxItemFilter is a custom web component that provides a comprehensive item filtering system.\\nIt includes methods for applying filters, searching, sorting results, and resetting filters.\\nThe component supports both inline and dropdown modes for filter display.","name":"EOxItemFilter","members":[{"kind":"field","name":"#resultAggregation","privacy":"private","type":{"text":"Array<string>"},"default":"[]"},{"kind":"field","name":"#items","privacy":"private","type":{"text":"Array<object>"},"default":"[]"},{"kind":"field","name":"#config","privacy":"private","default":"ELEMENT_CONFIG","type":{"text":"Object"}},{"kind":"method","name":"apply","description":"Applies the filters to the items and updates the result aggregation."},{"kind":"method","name":"searchHandler","description":"Performs a search based on the current configuration and items.\\nRequests an update after the search completes."},{"kind":"method","name":"sortResults","parameters":[{"name":"items","description":"The items to be sorted.","type":{"text":"Array<object>"}}],"description":"Sorts the given items based on the current configuration.","return":{"type":{"text":"Array<object>"}}},{"kind":"method","name":"#createFilter","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the filter element.","type":{"text":"number"}}],"description":"Creates a filter element based on the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"#createReset","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the reset element.","type":{"text":"number"}}],"description":"Creates a reset element for the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"resetFilters","description":"Resets all applied filters."},{"kind":"method","name":"updateResult","parameters":[{"name":"evt","description":"\\"result\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Updates selected result when result component triggers the \\"result\\" event."},{"kind":"field","name":"items","privacy":"public","type":{"text":"Array<Object>"},"description":"The items to be filtered","default":"null"},{"kind":"field","name":"filters","privacy":"public","type":{"text":"Object"},"description":"The state object containing the applied filters.","default":"{}"},{"kind":"field","name":"results","privacy":"public","type":{"text":"Array<Object>"},"description":"The state object containing the filtered results.","default":"[]"},{"kind":"field","name":"selectedResult","privacy":"public","type":{"text":"Object"},"description":"The currently selected result","default":"null"},{"kind":"field","name":"search","type":{"text":"Function"},"privacy":"private"},{"kind":"field","name":"aggregateResults","privacy":"public","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","attribute":"aggregate-results"},{"kind":"field","name":"autoSpreadSingle","privacy":"public","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","attribute":"auto-spread-single"},{"kind":"field","name":"enableHighlighting","privacy":"public","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","attribute":"enable-highlighting"},{"kind":"field","name":"externalFilter","privacy":"public","type":{"text":"Function"},"description":"Use an external search endpoint instead of fuse search.\\nPassed properties: input string, filters object","default":"null"},{"kind":"field","name":"filterProperties","privacy":"public","type":{"text":"Array<{key?: String, keys?: Array<String>, title: String, type: String, placeholder?: String, format?: String, state?: Object}>"},"description":"The filter properties.","default":"[]"},{"kind":"field","name":"fuseConfig","privacy":"public","type":{"text":"Object"},"description":"Native fuse.js config override","default":"{}"},{"kind":"field","name":"inlineMode","privacy":"public","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","attribute":"inline-mode"},{"kind":"field","name":"matchAllWhenEmpty","privacy":"public","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","attribute":"match-all-when-empty"},{"kind":"field","name":"showResults","privacy":"public","type":{"text":"Boolean"},"description":"Display results list","default":"true","attribute":"show-result"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"subTitleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","attribute":"sub-title-property"},{"kind":"field","name":"imageProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","attribute":"image-property"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"expandMultipleFilters","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","attribute":"enable-multiple-filter"},{"kind":"field","name":"expandResults","privacy":"public","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","attribute":"expand-result"},{"kind":"field","name":"expandMultipleResults","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","attribute":"expand-multiple-results"},{"kind":"field","name":"resultType","privacy":"public","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","attribute":"result-type"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"filter","type":{"text":"CustomEvent"},"description":"Fires when the filters are changed; event detail includes `filters` and `results`"},{"name":"select","type":{"text":"CustomEvent"},"description":"Fires when a result is selected; event detail is `selectedResult`"}],"attributes":[{"name":"aggregate-results","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","fieldName":"aggregateResults"},{"name":"auto-spread-single","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","fieldName":"autoSpreadSingle"},{"name":"enable-highlighting","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","fieldName":"enableHighlighting"},{"name":"inline-mode","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","fieldName":"inlineMode"},{"name":"match-all-when-empty","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","fieldName":"matchAllWhenEmpty"},{"name":"show-result","type":{"text":"Boolean"},"description":"Display results list","default":"true","fieldName":"showResults"},{"name":"id-property","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"sub-title-property","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","fieldName":"subTitleProperty"},{"name":"image-property","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","fieldName":"imageProperty"},{"name":"enable-multiple-filter","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","fieldName":"expandMultipleFilters"},{"name":"expand-result","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","fieldName":"expandResults"},{"name":"expand-multiple-results","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","fieldName":"expandMultipleResults"},{"name":"result-type","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","fieldName":"resultType"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-itemfilter","customElement":true}],"exports":[{"kind":"js","name":"EOxItemFilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}},{"kind":"custom-element-definition","name":"eox-itemfilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}}]},{"kind":"javascript-module","path":"elements/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"customEditorInterfaces","privacy":"public","type":{"text":"Array"},"description":"List of custom editor interface\\nRead more about the implementation of custom editor interfaces here:\\nhttps://github.com/json-editor/json-editor/blob/master/docs/custom-editor.html","default":"[]"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/src/main.js","declarations":[{"kind":"class","description":"Display layers and groups of a connected OpenLayers map\\n\\n## Layer properties\\nIn order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. `layer.set(property, value)`).\\n\\n#### `id?: string`\\nThe layer id. Not required but recommended. Can also be any other layer property (defined via the `idProperty` property or `id-property`attribute - see API).\\n\\n#### `title?: string`\\nThe title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the `titleProperty` property or `title-property`attribute - see API).\\n\\n#### `layerControlHide?: Boolean`\\nCompletely hide a layer from the layer control.\\n\\n#### `layerControlOptional?: Boolean`\\nInitially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.\\n\\n#### `layerControlExclusive?: Boolean`\\nMake layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.\\n\\n#### `layerControlExpand?: Boolean`\\nPre-expand a layer dropdown so that it is always open when the component initializes.\\n\\n#### `layerControlToolsExpand?: Boolean`\\nPre-expand the layer tools so they are visible when the component initializes.\\n\\n#### `layerConfig?: Object`\\nConfiguration options for the layer (displayed in the layer tools\' \\"config\\" tab)\\n\\n#### `layerDateTime?: Object`\\nPartial eox-timecontrol config passed to the \\"datetime\\" tool\\n\\n### `layerLegend`?: Object\\nCreates a dynamic color legend based on range & domain of values. Extenteds partial config of `color-legend-element`","name":"EOxLayerControl","members":[{"kind":"field","name":"#eoxMap","privacy":"private","description":"Instance of `eox-map` which is a wrapper for the OL","type":{"text":"EOxMap"}},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"#handleLayerControlLayerListChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent & {target: Element}"}}],"description":"Event handler for changes in the layer list"},{"kind":"method","name":"#handleDatetimeUpdate","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches datetime updates from layer datetime to the layercontrol"},{"kind":"method","name":"#handleLayerConfigChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches jsonform updates from layer config to the layercontrol"},{"kind":"field","name":"#styleEOX","privacy":"private","default":"` :host, :root { font-family: Roboto, sans-serif; --padding: 0.5rem; --padding-vertical: .2rem; --list-padding: 48px; --layer-input-visibility: flex; --layer-summary-visibility: flex; --layer-type-visibility: block; --layer-title-visibility: flex; --layer-visibility: block; --layer-tools-button-visibility: flex; display: block; padding: var(--padding) 0; --background-color: var(--eox-background-color, transparent); background-color: var(--background-color, transparent); } select { background-color: var(--background-color); } `"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"map","privacy":"public","type":{"text":"Map"},"description":"The native OL map instance","default":"null"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"showLayerZoomState","privacy":"public","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","attribute":"show-layer-zoom-state"},{"kind":"field","name":"tools","privacy":"public","type":{"text":"Array<String>"},"description":"Layer tools","default":"[\\"info\\", \\"opacity\\", \\"datetime\\", \\"config\\", \\"remove\\", \\"sort\\"]"},{"kind":"field","name":"addExternalLayers","privacy":"public","type":{"text":"Boolean"},"description":"Enable-disable external layer","default":"false"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"toolsAsList","privacy":"public","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","attribute":"toolsAsList"}],"events":[{"name":"layerchange","type":{"text":"CustomEvent"},"description":"A generic layer change event; could be a layer visibility, group length updates and others.\\nPasses the changed layer in the `detail`."},{"name":"datetime:updated","type":{"text":"CustomEvent"}},{"name":"layerConfig:change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"id-property","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"show-layer-zoom-state","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","fieldName":"showLayerZoomState"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"toolsAsList","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","fieldName":"toolsAsList"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-layercontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxLayerControl","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layercontrol","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layout/src/main.js","declarations":[{"kind":"class","description":"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\\n- `eox-layout`: the container holding all the items\\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)","name":"EOxLayout","members":[],"attributes":[{"name":"gap"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout","customElement":true},{"kind":"class","description":"","name":"EOxLayoutItem","members":[],"attributes":[{"name":"x"},{"name":"y"},{"name":"w"},{"name":"h"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout-item","customElement":true}],"exports":[{"kind":"js","name":"EOxLayout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"js","name":"EOxLayoutItem","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout-item","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}}]},{"kind":"javascript-module","path":"elements/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string | number"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/stacinfo/src/main.js","declarations":[{"kind":"class","description":"### Introduction\\nWorking with STAC catalogs, collections and items often times requires\\nto fetch a JSON file, parse its contents and display some of its fields\\nin some formatted way. To make these steps reusable, the `eox-stacinfo`\\nelement offers a set of functionalities:\\n- **automatically fetch a STAC file** as soon as the element loads\\n- offer a **property whitelist** functionality to choose which properties to display\\n- display the properties in **configurable sections** (header, body, featured, footer)\\n- allow to **override** any property display for application-specific custom needs\\n\\nThe use case for this element is alongside a map which displays STAC files\\nor in a catalog browsing scenario where a quick look at the most important properties\\nis needed.\\n\\n#### Technology\\nUnder the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.","name":"EOxStacInfo","members":[{"kind":"field","name":"allowHtml","privacy":"public","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","attribute":"allow-html"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","attribute":"unstyled"},{"kind":"field","name":"for","privacy":"public","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","attribute":"for"},{"kind":"field","name":"header","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the header","default":"[]"},{"kind":"field","name":"tags","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display as tags","default":"[]"},{"kind":"field","name":"body","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display in the main body","default":"[]"},{"kind":"field","name":"featured","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the featured section","default":"[]"},{"kind":"field","name":"footer","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the footer","default":"[]"},{"kind":"field","name":"stacInfo","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the fetched STAC information","default":"[]"},{"kind":"field","name":"stacProperties","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the parsed STAC properties","default":"[]"}],"attributes":[{"name":"allow-html","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","fieldName":"allowHtml"},{"name":"unstyled","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","fieldName":"unstyled"},{"name":"for","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","fieldName":"for"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-stacinfo","customElement":true}],"exports":[{"kind":"js","name":"EOxStacInfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}},{"kind":"custom-element-definition","name":"eox-stacinfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}}]},{"kind":"javascript-module","path":"elements/storytelling/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxStoryTelling","members":[{"kind":"field","name":"#html","privacy":"private","description":"Generated HTML string using markdown","type":{"text":"String"},"default":"undefined"},{"kind":"field","name":"#config","privacy":"private","type":{"text":"Object"},"default":"{}","description":"Basic config"},{"kind":"field","name":"#debounceUpdateMarkdown","privacy":"private","type":{"text":"Object"},"default":"null","description":"Debounce update markdown"},{"kind":"method","name":"#dispatchInitEvent","privacy":"private","parameters":[{"name":"element","description":"Dom element","type":{"text":"Element"}}]},{"kind":"method","name":"handleSlotChange","description":"Handles changes to the slot\'s content, updating the component\'s internal state."},{"kind":"method","name":"waitForHtmlInitialization"},{"kind":"field","name":"markdown","privacy":"public","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","attribute":"markdown"},{"kind":"field","name":"markdownURL","privacy":"public","type":{"text":"String"},"description":"Markdown Content URL","default":"null","attribute":"markdown-url"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"disableAutosave","privacy":"public","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","attribute":"disable-autosave"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","attribute":"show-editor"},{"kind":"field","name":"showNav","privacy":"public","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","attribute":"show-nav"},{"kind":"field","name":"nav","privacy":"public","type":{"text":"Array<Object>"},"description":"List of items in navigation","default":"[]"},{"kind":"field","name":"addCustomSectionIndex","privacy":"public","type":{"text":"Number"},"description":"custom section index","default":"-1","attribute":"addCustomSectionIndex"},{"kind":"field","name":"selectedCustomElement","privacy":"public","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","attribute":"selectedCustomElement"}],"events":[{"name":"init","type":{"text":"CustomEvent"}},{"name":"changed","type":{"text":"CustomEvent"}}],"attributes":[{"name":"markdown","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","fieldName":"markdown"},{"name":"markdown-url","type":{"text":"String"},"description":"Markdown Content URL","default":"null","fieldName":"markdownURL"},{"name":"show-nav","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","fieldName":"showNav"},{"name":"show-editor","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","fieldName":"showEditor"},{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"disable-autosave","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","fieldName":"disableAutosave"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"addCustomSectionIndex","type":{"text":"Number"},"description":"custom section index","default":"-1","fieldName":"addCustomSectionIndex"},{"name":"selectedCustomElement","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","fieldName":"selectedCustomElement"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-storytelling","customElement":true}],"exports":[{"kind":"js","name":"EOxStoryTelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}},{"kind":"custom-element-definition","name":"eox-storytelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}}]},{"kind":"javascript-module","path":"elements/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"play","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"play"},{"kind":"field","name":"navigation","privacy":"public","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","attribute":"navigation"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"displayFormat","privacy":"public","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","attribute":"display-format"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"navigation","type":{"text":"boolean"},"description":"Display left & right navigation buttons for the values","default":"true","fieldName":"navigation"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"play"},{"name":"display-format","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","fieldName":"displayFormat"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}}]}]'),jKe={schemaVersion:NKe,readme:BKe,modules:zKe};function hbe(e){const t={h3:"h3",...RCe(),...e.components};return bu.jsxs(bu.Fragment,{children:[`
`,`
`,bu.jsx(rze,{isTemplate:!0}),`
`,bu.jsx(ize,{}),`
`,bu.jsx(sze,{}),`
`,bu.jsx(oze,{}),`
`,bu.jsx(aze,{}),`
`,bu.jsx(t.h3,{id:"api",children:"API"}),`
`,bu.jsx(lze,{}),`
`,bu.jsx(uze,{includePrimary:!1})]})}function UKe(e={}){const{wrapper:t}={...RCe(),...e.components};return t?bu.jsx(t,{...e,children:bu.jsx(hbe,{...e})}):hbe(e)}const qKe=`
  :root, :host, eox-chart {
    display: block;
  }
  #vis {
    width: 100%;
    height: 100%;
  }
`,HKe=`
  eox-chart {
    font-family: Roboto, sans-serif;
  }
`,$D=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}:root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}`,GKe=/("(?:[^\\"]|\\.)*")|[:,]/g;function wF(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function s(o,a,l){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const u=JSON.stringify(o,i);if(u===void 0)return u;const f=r-a.length-l;if(u.length<=f){const c=u.replace(GKe,(d,h)=>h||`${d} `);if(c.length<=f)return c}if(i!=null&&(o=JSON.parse(u),i=void 0),typeof o=="object"&&o!==null){const c=a+n,d=[];let h=0,p,g;if(Array.isArray(o)){p="[",g="]";const{length:v}=o;for(;h<v;h++)d.push(s(o[h],c,h===v-1?0:1)||"null")}else{p="{",g="}";const v=Object.keys(o),{length:x}=v;for(;h<x;h++){const y=v[h],w=`${JSON.stringify(y)}: `,_=s(o[y],c,w.length+(h===x-1?0:1));_!==void 0&&d.push(w+_)}}if(d.length>0)return[p,n+d.join(`,
${c}`),g].join(`
${a}`)}return u}(e,"",0)}function zl(e,t,n){return e.fields=t||[],e.fname=n,e}function Rs(e){return e==null?null:e.fname}function ka(e){return e==null?null:e.fields}function Kke(e){return e.length===1?VKe(e[0]):WKe(e)}const VKe=e=>function(t){return t[e]},WKe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ot(e){throw Error(e)}function Yf(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||ot("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&ot("Access path missing closing bracket: "+e),r&&ot("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function $u(e,t,n){const r=Yf(e);return e=r.length===1?r[0]:e,zl((n&&n.get||Kke)(r),[e],t||e)}const pE=$u("id"),Ra=zl(e=>e,[],"identity"),pp=zl(()=>0,[],"zero"),tb=zl(()=>1,[],"one"),Iu=zl(()=>!0,[],"true"),np=zl(()=>!1,[],"false");function YKe(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Jke=0,SP=1,AP=2,Qke=3,eTe=4;function CP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:YKe,r=e||Jke;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=SP&&n(t||"error","ERROR",arguments),this},warn(){return r>=AP&&n(t||"warn","WARN",arguments),this},info(){return r>=Qke&&n(t||"log","INFO",arguments),this},debug(){return r>=eTe&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function It(e){return e===Object(e)}const pbe=e=>e!=="__proto__";function nb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=XKe(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;rb(r,s,i[s],o)}return r},{})}function rb(e,t,n,r){if(!pbe(t))return;let i,s;if(It(n)&&!at(n)){s=It(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?rb(s,i,n[i]):pbe(i)&&(s[i]=n[i])}else e[t]=n}function XKe(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Hr(e){return e[e.length-1]}function Aa(e){return e==null||e===""?null:+e}const tTe=e=>t=>e*Math.exp(t),nTe=e=>t=>Math.log(e*t),rTe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),iTe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,R3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function ID(e,t,n,r){const i=n(e[0]),s=n(Hr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function sTe(e,t){return ID(e,t,Aa,Ra)}function oTe(e,t){var n=Math.sign(e[0]);return ID(e,t,nTe(n),tTe(n))}function aTe(e,t,n){return ID(e,t,R3(n),R3(1/n))}function lTe(e,t,n){return ID(e,t,rTe(n),iTe(n))}function PD(e,t,n,r,i){const s=r(e[0]),o=r(Hr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function kP(e,t,n){return PD(e,t,n,Aa,Ra)}function TP(e,t,n){const r=Math.sign(e[0]);return PD(e,t,n,nTe(r),tTe(r))}function F3(e,t,n,r){return PD(e,t,n,R3(r),R3(1/r))}function DP(e,t,n,r){return PD(e,t,n,rTe(r),iTe(r))}function uTe(e){return 1+~~(new Date(e).getMonth()/3)}function cTe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Bt(e){return e!=null?at(e)?e:[e]:[]}function fTe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function fr(e){return typeof e=="function"}const ZKe="descending";function LP(e,t,n){n=n||{},t=Bt(t)||[];const r=[],i=[],s={},o=n.comparator||KKe;return Bt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===ZKe?-1:1),i.push(a=fr(a)?a:$u(a,null,n)),(ka(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:zl(o(i,r),Object.keys(s))}const mE=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),KKe=(e,t)=>e.length===1?JKe(e[0],t[0]):QKe(e,t,e.length),JKe=(e,t)=>function(n,r){return mE(e(n),e(r))*t},QKe=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=mE(s(r),s(i));return o*t[a]});function Fa(e){return fr(e)?e:()=>e}function RP(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function rr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Nf(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function dTe(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}function Xt(e,t){return Object.hasOwn(e,t)}const hA={};function ib(e){let t={},n;function r(s){return Xt(t,s)&&t[s]!==hA}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===hA&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=hA),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==hA&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function hTe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=Hr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const f=Math.abs(l-t);return u<f&&u<=o?r:f<=o?i:s}function Lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),rr(r,n)}function mv(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function fm(e){return typeof e=="boolean"}function $p(e){return Object.prototype.toString.call(e)==="[object Date]"}function pTe(e){return e&&fr(e[Symbol.iterator])}function li(e){return typeof e=="number"}function mTe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function zt(e){return typeof e=="string"}function FP(e,t,n){e&&(e=t?Bt(e).map(a=>a.replace(/\\(.)/g,"$1")):Bt(e));const r=e&&e.length,i=n&&n.get||Kke,s=a=>i(t?[a]:Yf(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),f=0;for(;++f<r;)u+="|"+a[f](l);return u}}return zl(o,e,"key")}function gTe(e,t){const n=e[0],r=Hr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const eJe=1e4;function yTe(e){e=+e||eJe;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Xt(t,o)||Xt(n,o),get:o=>Xt(t,o)?t[o]:Xt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Xt(t,o)?t[o]=a:s(o,a)}}function vTe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function Nw(e,t){let n="";for(;--t>=0;)n+=e;return n}function bTe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?Nw(i,o)+s:r==="center"?Nw(i,~~(o/2))+s+Nw(i,Math.ceil(o/2)):s+Nw(i,o)}function gE(e){return e&&Hr(e)-e[0]||0}function Tt(e){return at(e)?"["+e.map(Tt)+"]":It(e)||zt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function OP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const tJe=e=>li(e)||$p(e)?e:Date.parse(e);function MP(e,t){return t=t||tJe,e==null||e===""?null:t(e)}function $P(e){return e==null||e===""?null:e+""}function Lc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function xTe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function op(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}var mbe={},_F={},EF=34,cw=10,SF=13;function wTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function nJe(e,t){var n=wTe(e);return function(r,i){return t(n(r),i,e)}}function gbe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function rJe(e){return e<0?"-"+vl(-e,6):e>9999?"+"+vl(e,6):vl(e,4)}function iJe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":rJe(e.getUTCFullYear())+"-"+vl(e.getUTCMonth()+1,2)+"-"+vl(e.getUTCDate(),2)+(i?"T"+vl(t,2)+":"+vl(n,2)+":"+vl(r,2)+"."+vl(i,3)+"Z":r?"T"+vl(t,2)+":"+vl(n,2)+":"+vl(r,2)+"Z":n||t?"T"+vl(t,2)+":"+vl(n,2)+"Z":"")}function sJe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,d){var h,p,g=i(c,function(v,x){if(h)return h(v,x-1);p=v,h=d?nJe(v,d):wTe(v)});return g.columns=p||[],g}function i(c,d){var h=[],p=c.length,g=0,v=0,x,y=p<=0,w=!1;c.charCodeAt(p-1)===cw&&--p,c.charCodeAt(p-1)===SF&&--p;function _(){if(y)return _F;if(w)return w=!1,mbe;var T,D=g,k;if(c.charCodeAt(D)===EF){for(;g++<p&&c.charCodeAt(g)!==EF||c.charCodeAt(++g)===EF;);return(T=g)>=p?y=!0:(k=c.charCodeAt(g++))===cw?w=!0:k===SF&&(w=!0,c.charCodeAt(g)===cw&&++g),c.slice(D+1,T-1).replace(/""/g,'"')}for(;g<p;){if((k=c.charCodeAt(T=g++))===cw)w=!0;else if(k===SF)w=!0,c.charCodeAt(g)===cw&&++g;else if(k!==n)continue;return c.slice(D,T)}return y=!0,c.slice(D,p)}for(;(x=_())!==_F;){for(var A=[];x!==mbe&&x!==_F;)A.push(x),x=_();d&&(A=d(A,v++))==null||h.push(A)}return h}function s(c,d){return c.map(function(h){return d.map(function(p){return f(h[p])}).join(e)})}function o(c,d){return d==null&&(d=gbe(c)),[d.map(f).join(e)].concat(s(c,d)).join(`
`)}function a(c,d){return d==null&&(d=gbe(c)),s(c,d).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?iJe(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:f}}function oJe(e){return e}function aJe(e){if(e==null)return oJe;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,f=a.length,c=new Array(f);for(c[0]=(t+=a[0])*r+s,c[1]=(n+=a[1])*i+o;u<f;)c[u]=a[u],++u;return c}}function lJe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function uJe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ybe(e,n)})}:ybe(e,t)}function ybe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=_Te(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function _Te(e,t){var n=aJe(e.transform),r=e.arcs;function i(f,c){c.length&&c.pop();for(var d=r[f<0?~f:f],h=0,p=d.length;h<p;++h)c.push(n(d[h],h));f<0&&lJe(c,p)}function s(f){return n(f)}function o(f){for(var c=[],d=0,h=f.length;d<h;++d)i(f[d],c);return c.length<2&&c.push(c[0]),c}function a(f){for(var c=o(f);c.length<4;)c.push(c[0]);return c}function l(f){return f.map(a)}function u(f){var c=f.type,d;switch(c){case"GeometryCollection":return{type:c,geometries:f.geometries.map(u)};case"Point":d=s(f.coordinates);break;case"MultiPoint":d=f.coordinates.map(s);break;case"LineString":d=o(f.arcs);break;case"MultiLineString":d=f.arcs.map(o);break;case"Polygon":d=l(f.arcs);break;case"MultiPolygon":d=f.arcs.map(l);break;default:return null}return{type:c,coordinates:d}}return u(t)}function cJe(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,f){var c=e.arcs[u<0?~u:u],d;c.length<3&&!c[1][0]&&!c[1][1]&&(d=t[++o],t[o]=u,t[f]=d)}),t.forEach(function(u){var f=a(u),c=f[0],d=f[1],h,p;if(h=i[c])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=c,p=i[c]){delete i[p.end];var v=p===h?h:p.concat(h);r[v.start=p.start]=i[v.end=h.end]=v}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=c]=i[h.end=d]=h});function a(u){var f=e.arcs[u<0?~u:u],c=f[0],d;return e.transform?(d=[0,0],f.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=f[f.length-1],u<0?[d,c]:[c,d]}function l(u,f){for(var c in u){var d=u[c];delete f[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function fJe(e){return _Te(e,dJe.apply(this,arguments))}function dJe(e,t,n){var r,i,s;if(arguments.length>1)r=hJe(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:cJe(e,r)}}function hJe(e,t,n){var r=[],i=[],s;function o(c){var d=c<0?~c:c;(i[d]||(i[d]=[])).push({i:c,g:s})}function a(c){c.forEach(o)}function l(c){c.forEach(a)}function u(c){c.forEach(l)}function f(c){switch(s=c,c.type){case"GeometryCollection":c.geometries.forEach(f);break;case"LineString":a(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return f(t),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}const ea="year",Fl="quarter",Ta="month",mo="week",Ol="date",Sa="day",Bf="dayofyear",lu="hours",uu="minutes",Pu="seconds",Rc="milliseconds",IP=[ea,Fl,Ta,mo,Ol,Sa,Bf,lu,uu,Pu,Rc],AF=IP.reduce((e,t,n)=>(e[t]=1+n,e),{});function PP(e){const t=Bt(e).slice(),n={};return t.length||ot("Missing time unit."),t.forEach(i=>{Xt(AF,i)?n[i]=1:ot(`Invalid time unit: ${i}.`)}),(n[mo]||n[Sa]?1:0)+(n[Fl]||n[Ta]||n[Ol]?1:0)+(n[Bf]?1:0)>1&&ot(`Incompatible time units: ${e}`),t.sort((i,s)=>AF[i]-AF[s]),t}const pJe={[ea]:"%Y ",[Fl]:"Q%q ",[Ta]:"%b ",[Ol]:"%d ",[mo]:"W%U ",[Sa]:"%a ",[Bf]:"%j ",[lu]:"%H:00",[uu]:"00:%M",[Pu]:":%S",[Rc]:".%L",[`${ea}-${Ta}`]:"%Y-%m ",[`${ea}-${Ta}-${Ol}`]:"%Y-%m-%d ",[`${lu}-${uu}`]:"%H:%M"};function ETe(e,t){const n=rr({},pJe,t),r=PP(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const Dg=new Date;function NP(e){return Dg.setFullYear(e),Dg.setMonth(0),Dg.setDate(1),Dg.setHours(0,0,0,0),Dg}function STe(e){return CTe(new Date(e))}function ATe(e){return p6(new Date(e))}function CTe(e){return Yd.count(NP(e.getFullYear())-1,e)}function p6(e){return V1.count(NP(e.getFullYear())-1,e)}function m6(e){return NP(e).getDay()}function mJe(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function kTe(e){return DTe(new Date(e))}function TTe(e){return g6(new Date(e))}function DTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Mp.count(t-1,e)}function g6(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return W1.count(t-1,e)}function y6(e){return Dg.setTime(Date.UTC(e,0,1)),Dg.getUTCDay()}function gJe(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function LTe(e,t,n,r,i){const s=t||1,o=Hr(e),a=(x,y,w)=>(w=w||x,yJe(n[w],r[w],x===o&&s,y)),l=new Date,u=Lc(e),f=u[ea]?a(ea):Fa(2012),c=u[Ta]?a(Ta):u[Fl]?a(Fl):pp,d=u[mo]&&u[Sa]?a(Sa,1,mo+Sa):u[mo]?a(mo,1):u[Sa]?a(Sa,1):u[Ol]?a(Ol,1):u[Bf]?a(Bf,1):tb,h=u[lu]?a(lu):pp,p=u[uu]?a(uu):pp,g=u[Pu]?a(Pu):pp,v=u[Rc]?a(Rc):pp;return function(x){l.setTime(+x);const y=f(l);return i(y,c(l),d(l,y),h(l),p(l),g(l),v(l))}}function yJe(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function i1(e,t,n){return t+e*7-(n+6)%7}const vJe={[ea]:e=>e.getFullYear(),[Fl]:e=>Math.floor(e.getMonth()/3),[Ta]:e=>e.getMonth(),[Ol]:e=>e.getDate(),[lu]:e=>e.getHours(),[uu]:e=>e.getMinutes(),[Pu]:e=>e.getSeconds(),[Rc]:e=>e.getMilliseconds(),[Bf]:e=>CTe(e),[mo]:e=>p6(e),[mo+Sa]:(e,t)=>i1(p6(e),e.getDay(),m6(t)),[Sa]:(e,t)=>i1(1,e.getDay(),m6(t))},bJe={[Fl]:e=>3*e,[mo]:(e,t)=>i1(e,0,m6(t))};function RTe(e,t){return LTe(e,t||1,vJe,bJe,mJe)}const xJe={[ea]:e=>e.getUTCFullYear(),[Fl]:e=>Math.floor(e.getUTCMonth()/3),[Ta]:e=>e.getUTCMonth(),[Ol]:e=>e.getUTCDate(),[lu]:e=>e.getUTCHours(),[uu]:e=>e.getUTCMinutes(),[Pu]:e=>e.getUTCSeconds(),[Rc]:e=>e.getUTCMilliseconds(),[Bf]:e=>DTe(e),[mo]:e=>g6(e),[Sa]:(e,t)=>i1(1,e.getUTCDay(),y6(t)),[mo+Sa]:(e,t)=>i1(g6(e),e.getUTCDay(),y6(t))},wJe={[Fl]:e=>3*e,[mo]:(e,t)=>i1(e,0,y6(t))};function FTe(e,t){return LTe(e,t||1,xJe,wJe,gJe)}const _Je={[ea]:If,[Fl]:n2.every(3),[Ta]:n2,[mo]:V1,[Ol]:Yd,[Sa]:Yd,[Bf]:Yd,[lu]:AD,[uu]:ED,[Pu]:jd,[Rc]:Jv},EJe={[ea]:Pf,[Fl]:r2.every(3),[Ta]:r2,[mo]:W1,[Ol]:Mp,[Sa]:Mp,[Bf]:Mp,[lu]:CD,[uu]:SD,[Pu]:jd,[Rc]:Jv};function sb(e){return _Je[e]}function ob(e){return EJe[e]}function OTe(e,t,n){return e?e.offset(t,n):void 0}function MTe(e,t,n){return OTe(sb(e),t,n)}function $Te(e,t,n){return OTe(ob(e),t,n)}function ITe(e,t,n,r){return e?e.range(t,n,r):void 0}function PTe(e,t,n,r){return ITe(sb(e),t,n,r)}function NTe(e,t,n,r){return ITe(ob(e),t,n,r)}const Bw=1e3,zw=Bw*60,jw=zw*60,ND=jw*24,SJe=ND*7,vbe=ND*30,v6=ND*365,BTe=[ea,Ta,Ol,lu,uu,Pu,Rc],Uw=BTe.slice(0,-1),qw=Uw.slice(0,-1),Hw=qw.slice(0,-1),AJe=Hw.slice(0,-1),CJe=[ea,mo],bbe=[ea,Ta],zTe=[ea],fw=[[Uw,1,Bw],[Uw,5,5*Bw],[Uw,15,15*Bw],[Uw,30,30*Bw],[qw,1,zw],[qw,5,5*zw],[qw,15,15*zw],[qw,30,30*zw],[Hw,1,jw],[Hw,3,3*jw],[Hw,6,6*jw],[Hw,12,12*jw],[AJe,1,ND],[CJe,1,SJe],[bbe,1,vbe],[bbe,3,3*vbe],[zTe,1,v6]];function jTe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(gE(t))/n;let i=lD(a=>a[2]).right(fw,r),s,o;return i===fw.length?(s=zTe,o=Qg(t[0]/v6,t[1]/v6,n)):i?(i=fw[r/fw[i-1][2]<fw[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=BTe,o=Math.max(Qg(t[0],t[1],n),1)),{units:s,step:o}}function Gw(e){const t={};return n=>t[n]||(t[n]=e(n))}function kJe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=TJe(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function TJe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function UTe(e){const t=Gw(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Pve(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return kJe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Pve(o??",f");const a=Qg(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=Bze(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=Nze(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=Pze(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let b6;qTe();function qTe(){return b6=UTe({format:zze,formatPrefix:jze})}function HTe(e){return UTe(Ize(e))}function O3(e){return arguments.length?b6=HTe(e):b6}function xbe(e,t,n){n=n||{},It(n)||ot(`Invalid time multi-format specifier: ${n}`);const r=t(Pu),i=t(uu),s=t(lu),o=t(Ol),a=t(mo),l=t(Ta),u=t(Fl),f=t(ea),c=e(n[Rc]||".%L"),d=e(n[Pu]||":%S"),h=e(n[uu]||"%I:%M"),p=e(n[lu]||"%I %p"),g=e(n[Ol]||n[Sa]||"%a %d"),v=e(n[mo]||"%b %d"),x=e(n[Ta]||"%B"),y=e(n[Fl]||"%B"),w=e(n[ea]||"%Y");return _=>(r(_)<_?c:i(_)<_?d:s(_)<_?h:o(_)<_?p:l(_)<_?a(_)<_?g:v:f(_)<_?u(_)<_?x:y:w)(_)}function GTe(e){const t=Gw(e.format),n=Gw(e.utcFormat);return{timeFormat:r=>zt(r)?t(r):xbe(t,sb,r),utcFormat:r=>zt(r)?n(r):xbe(n,ob,r),timeParse:Gw(e.parse),utcParse:Gw(e.utcParse)}}let x6;VTe();function VTe(){return x6=GTe({format:BI,parse:k3e,utcFormat:zI,utcParse:T3e})}function WTe(e){return GTe(_3e(e))}function o2(e){return arguments.length?x6=WTe(e):x6}const w6=(e,t)=>rr({},e,t);function YTe(e,t){const n=e?HTe(e):O3(),r=t?WTe(t):o2();return w6(n,r)}function BP(e,t){const n=arguments.length;return n&&n!==2&&ot("defaultLocale expects either zero or two arguments."),n?w6(O3(e),o2(t)):w6(O3(),o2())}function DJe(){return qTe(),VTe(),BP()}const LJe=/^(data:|([A-Za-z]+:)?\/\/)/,RJe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,FJe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,wbe="file://";function OJe(e,t){return n=>({options:n||{},sanitize:$Je,load:MJe,fileAccess:!1,file:IJe(t),http:NJe(e)})}async function MJe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function $Je(e,t){t=rr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=RJe.test(e.replace(FJe,""));(e==null||typeof e!="string"||!a)&&ot("Sanitize failure, invalid URI: "+Tt(e));const l=LJe.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(wbe))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(wbe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function IJe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):PJe}async function PJe(){ot("No file system access.")}function NJe(e){return e?async function(t,n){const r=rr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?fr(s[i])?s[i]():s.text():ot(s.status+""+s.statusText)}:BJe}async function BJe(){ot("No HTTP fetch method available.")}const zJe=e=>e!=null&&e===e,jJe=e=>e==="true"||e==="false"||e===!0||e===!1,UJe=e=>!Number.isNaN(Date.parse(e)),XTe=e=>!Number.isNaN(+e)&&!(e instanceof Date),qJe=e=>XTe(e)&&Number.isInteger(+e),_6={boolean:OP,integer:Aa,number:Aa,date:MP,string:$P,unknown:Ra},pA=[jJe,qJe,XTe,UJe],HJe=["boolean","integer","number","date"];function ZTe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=pA.length,i=pA.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&zJe(l)&&!pA[a](l)&&(i[a]=0,++o,o===pA.length))return"string";return HJe[i.reduce((s,o)=>s===0?o:s,0)-1]}function KTe(e,t){return t.reduce((n,r)=>(n[r]=ZTe(e,r),n),{})}function _be(e){const t=function(n,r){const i={delimiter:e};return zP(n,r?rr(r,i):i)};return t.responseType="text",t}function zP(e,t){return t.header&&(e=t.header.map(Tt).join(t.delimiter)+`
`+e),sJe(t.delimiter).parse(e+"")}zP.responseType="text";function GJe(e){return typeof Buffer=="function"&&fr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function jP(e,t){const n=t&&t.property?$u(t.property):Ra;return It(e)&&!GJe(e)?VJe(n(e),t):n(JSON.parse(e))}jP.responseType="json";function VJe(e,t){return!at(e)&&pTe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const WJe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function JTe(e,t){let n,r,i,s;return e=jP(e,t),t&&t.feature?(n=uJe,i=t.feature):t&&t.mesh?(n=fJe,i=t.mesh,s=WJe[t.filter]):ot("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ot("Invalid TopoJSON object: "+i),r&&r.features||[r]}JTe.responseType="json";const SC={dsv:zP,csv:_be(","),tsv:_be("	"),json:jP,topojson:JTe};function UP(e,t){return arguments.length>1?(SC[e]=t,this):Xt(SC,e)?SC[e]:null}function QTe(e){const t=UP(e);return t&&t.responseType||"text"}function eDe(e,t,n,r){t=t||{};const i=UP(t.type||"json");return i||ot("Unknown data format type: "+t.type),e=i(e,t),t.parse&&YJe(e,t.parse,n,r),Xt(e,"columns")&&delete e.columns,e}function YJe(e,t,n,r){if(!e.length)return;const i=o2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,f,c;t==="auto"&&(t=KTe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,v;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),v=g[1],(v[0]==="'"&&v[v.length-1]==="'"||v[0]==='"'&&v[v.length-1]==='"')&&(v=v.slice(1,-1)),(g[0]==="utc"?r:n)(v);if(!_6[p])throw Error("Illegal format pattern: "+h+":"+p);return _6[p]});for(l=0,f=e.length,c=s.length;l<f;++l)for(o=e[l],u=0;u<c;++u)a=s[u],o[a]=d[u](o[a])}const BD=OJe(typeof fetch<"u"&&fetch,null);function zD(e){const t=e||Ra,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function AC(e,t){try{await t(e)}catch(n){e.error(n)}}const tDe=Symbol("vega_id");let XJe=1;function jD(e){return!!(e&&_n(e))}function _n(e){return e[tDe]}function nDe(e,t){return e[tDe]=t,e}function yi(e){const t=e===Object(e)?e:{data:e};return _n(t)?t:nDe(t,XJe++)}function qP(e){return UD(e,yi({}))}function UD(e,t){for(const n in e)t[n]=e[n];return t}function rDe(e,t){return nDe(t,_n(e))}function O0(e,t){return e?t?(n,r)=>e(n,r)||_n(t(n))-_n(t(r)):(n,r)=>e(n,r)||_n(n)-_n(r):null}function iDe(e){return e&&e.constructor===M0}function M0(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:M0,insert(a){const l=Bt(a),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(a){const l=fr(a)?r:t,u=Bt(a),f=u.length;for(let c=0;c<f;++c)l.push(u[c]);return this},modify(a,l,u){const f={field:l,value:Fa(u)};return fr(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return fr(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},f={};let c,d,h,p,g,v;for(c=0,d=l.length;c<d;++c)u[_n(l[c])]=1;for(c=0,d=t.length;c<d;++c)g=t[c],u[_n(g)]=-1;for(c=0,d=r.length;c<d;++c)p=r[c],l.forEach(y=>{p(y)&&(u[_n(y)]=-1)});for(c=0,d=e.length;c<d;++c)g=e[c],v=_n(g),u[v]?u[v]=1:a.add.push(yi(e[c]));for(c=0,d=l.length;c<d;++c)g=l[c],u[_n(g)]<0&&a.rem.push(g);function x(y,w,_){_?y[w]=_(y):a.encode=w,o||(f[_n(y)]=y)}for(c=0,d=n.length;c<d;++c)h=n[c],g=h.tuple,p=h.field,v=u[_n(g)],v>0&&(x(g,p,h.value),a.modifies(p));for(c=0,d=i.length;c<d;++c)h=i[c],p=h.filter,l.forEach(y=>{p(y)&&u[_n(y)]>0&&x(y,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(y=>u[_n(y)]>0):l.slice();else for(v in f)a.mod.push(f[v]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const CC="_:mod:_";function qD(){Object.defineProperty(this,CC,{writable:!0,value:{}})}qD.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[CC];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[CC];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[CC]={},this}};let ZJe=0;const KJe="pulse",JJe=new qD,QJe=1,eQe=2;function qi(e,t,n,r){this.id=++ZJe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ebe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}qi.prototype={targets(){return this._targets||(this._targets=zD(pE))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ebe(QJe),modified:Ebe(eQe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new qD,i=this._argops=this._argops||[],s=[];let o,a,l,u;const f=(c,d,h)=>{h instanceof qi?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:c,index:d})):r.set(c,d,h)};for(o in e)if(a=e[o],o===KJe)Bt(a).forEach(c=>{c instanceof qi?c!==this&&(c.targets().add(this),s.push(c)):ot("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)f(o,u,a[u]);else f(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||JJe,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function tQe(e,t,n,r){let i=1,s;return e instanceof qi?s=e:e&&e.prototype instanceof qi?s=new e:fr(e)?s=new qi(null,e):(i=0,s=new qi(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function nQe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let rQe=0;function HD(e,t,n){this.id=++rQe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function rp(e,t,n){return new HD(e,t,n)}HD.prototype={_filter:Iu,_apply:Ra,targets(){return this._targets||(this._targets=zD(pE))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=rp(e);return this.targets().add(t),t},apply(e){const t=rp(null,e);return this.targets().add(t),t},merge(){const e=rp();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=rp();return this.targets().add(rp(null,null,RP(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(rp(null,null,()=>n=!0)),t.targets().add(rp(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Iu,this._targets=null}};function iQe(e,t,n,r){const i=this,s=rp(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Bt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function sQe(e,t){const n=this.locale();return eDe(e,t,n.timeParse,n.utcParse)}function oQe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function aQe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:QTe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function lQe(e,t,n){const r=this,i=r._pending||uQe(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Iu).insert(s.data||[])),i.done(),s}function uQe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const cQe={skip:!0};function fQe(e,t,n,r,i){return(e instanceof qi?hQe:dQe)(this,e,t,n,r,i),this}function dQe(e,t,n,r,i,s){const o=rr({},s,cQe);let a,l;fr(n)||(n=Fa(n)),r===void 0?a=u=>e.touch(n(u)):fr(r)?(l=new qi(null,r,i,!1),a=u=>{l.evaluate(u);const f=n(u),c=l.value;iDe(c)?e.pulse(f,c,s):e.update(f,c,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function hQe(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new qi(null,pQe(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function pQe(e,t){return t=fr(t)?t:Fa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function mQe(e){e.rank=++this._rank}function gQe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ot("Cycle detected in dataflow graph.")}const M3={},pf=1,ap=2,Ld=4,yQe=pf|ap,Sbe=pf|Ld,Ny=pf|ap|Ld,Abe=8,dw=16,Cbe=32,kbe=64;function Ip(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function CF(e,t){const n=[];return op(e,t,r=>n.push(r)),n}function Tbe(e,t){const n={};return e.visit(t,r=>{n[_n(r)]=1}),r=>n[_n(r)]?null:r}function mA(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ip.prototype={StopPropagation:M3,ADD:pf,REM:ap,MOD:Ld,ADD_REM:yQe,ADD_MOD:Sbe,ALL:Ny,REFLOW:Abe,SOURCE:dw,NO_SOURCE:Cbe,NO_FIELDS:kbe,fork(e){return new Ip(this.dataflow).init(this,e)},clone(){const e=this.fork(Ny);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ny|dw)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ip(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&kbe)&&(n.fields=e.fields),t&pf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ap?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ld?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Cbe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Ny;return t&pf&&this.add.length||t&ap&&this.rem.length||t&Ld&&this.mod.length},reflow(e){if(e)return this.fork(Ny).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ld,Tbe(this,pf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&pf&&(n.addF=mA(n.addF,t)),e&ap&&(n.remF=mA(n.remF,t)),e&Ld&&(n.modF=mA(n.modF,t)),e&dw&&(n.srcF=mA(n.srcF,t)),n},materialize(e){e=e||Ny;const t=this;return e&pf&&t.addF&&(t.add=CF(t.add,t.addF),t.addF=null),e&ap&&t.remF&&(t.rem=CF(t.rem,t.remF),t.remF=null),e&Ld&&t.modF&&(t.mod=CF(t.mod,t.modF),t.modF=null),e&dw&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&dw)return op(n.source,n.srcF,r),n;e&pf&&op(n.add,n.addF,r),e&ap&&op(n.rem,n.remF,r),e&Ld&&op(n.mod,n.modF,r);const i=n.source;if(e&Abe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?op(i,Tbe(n,Sbe),r):op(i,n.srcF,r))}return n}};function HP(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Lt(HP,Ip,{fork(e){const t=new Ip(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){ot("MultiPulse does not support filtering.")},materialize(){ot("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function vQe(e,t,n){const r=this,i=[];if(r._pulse)return sDe(r);if(r._pending&&await r._pending,t&&await AC(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Ip(r,s,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=zD(pE);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=M3),l!==M3&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++o}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((c,d)=>d.priority-c.priority);r._postrun=[];for(let c=0;c<f.length;++c)await AC(r,f[c].callback)}return n&&await AC(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(c=>{try{c(r)}catch(d){r.error(d)}})})),r}async function bQe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function xQe(e,t,n){return this._pulse?sDe(this):(this.evaluate(e,t,n),this)}function wQe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function sDe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function _Qe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function EQe(e,t){const n=e.source,r=this._clock;return n&&at(n)?new HP(this,r,n.map(i=>i.pulse),t):this._input[e.id]||SQe(this._pulse,n&&n.pulse)}function SQe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==M3&&(e.source=t.source),e)}const GP={skip:!1,force:!1};function AQe(e,t){const n=t||GP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function CQe(e,t,n){const r=n||GP;return(e.set(t)||r.force)&&this.touch(e,r),this}function kQe(e,t,n){this.touch(e,n||GP);const r=new Ip(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function TQe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),oDe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,DQe(t,0,e)):r=n,r}}}function oDe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function DQe(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,oDe(e,r,t,n)}function Dv(){this.logger(CP()),this.logLevel(SP),this._clock=0,this._rank=0,this._locale=BP();try{this._loader=BD()}catch{}this._touched=zD(pE),this._input={},this._pulse=null,this._heap=TQe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function hw(e){return function(){return this._log[e].apply(this,arguments)}}Dv.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:hw("error"),warn:hw("warn"),info:hw("info"),debug:hw("debug"),logLevel:hw("level"),cleanThreshold:1e4,add:tQe,connect:nQe,rank:mQe,rerank:gQe,pulse:kQe,touch:AQe,update:CQe,changeset:M0,ingest:oQe,parse:sQe,preload:lQe,request:aQe,events:iQe,on:fQe,evaluate:vQe,run:xQe,runAsync:bQe,runAfter:wQe,_enqueue:_Qe,_getPulse:EQe};function rt(e,t){qi.call(this,e,null,t)}Lt(rt,qi,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const s1={};function aDe(e){const t=lDe(e);return t&&t.Definition||null}function lDe(e){return e=e&&e.toLowerCase(),Xt(s1,e)?s1[e]:null}function*uDe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function VP(e,t,n){const r=Float64Array.from(uDe(e,n));return r.sort(q_),t.map(i=>u3e(r,i))}function WP(e,t){return VP(e,[.25,.5,.75],t)}function YP(e,t){const n=e.length,r=xUe(e,t),i=WP(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function cDe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,f,c,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(f=h/t,c=0,d=e.steps.length;c<d&&e.steps[c]<f;++c);a=e.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(c=0,d=i.length;c<d;++c)f=a/i[c],f>=u&&h/f<=t&&(a=f)}f=Math.log(a);const p=f>=0?0:~~(-f/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(s/a+g)*a,s=s<f?f-a:f,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Nu=Math.random;function LQe(e){Nu=e}function fDe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(uDe(e,r)),s=i.length,o=t;let a,l,u,f;for(u=0,f=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(Nu()*s)];f[u]=a/s}return f.sort(q_),[n6(f,n/2),n6(f,1-n/2)]}function dDe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,f=l+t,c;for(;a<i;++a){if(c=r(e[a]),c>=f){for(u=(l+u)/2;o<a;++o)s[o]=u;f=c+t,l=c}u=c}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?RQe(s,t+t/4):s}function RQe(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function FQe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function OQe(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Nu())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const hDe=Math.sqrt(2*Math.PI),MQe=Math.SQRT2;let pw=NaN;function GD(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(pw===pw)n=pw,pw=NaN;else{do n=Nu()*2-1,r=Nu()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,pw=r*s}return e+n*t}function XP(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*hDe)}function VD(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function WD(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*MQe*$Qe(2*e-1)}function $Qe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function ZP(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>GD(n,r),pdf:s=>XP(s,n,r),cdf:s=>VD(s,n,r),icdf:s=>WD(s,n,r)};return i.mean(e).stdev(t)}function KP(e,t){const n=ZP();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=YP(e)),i):t},sample(){return e[~~(Nu()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function JP(e,t){return e=e||0,t=t??1,Math.exp(e+GD()*t)}function QP(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*hDe*e)}function e8(e,t,n){return VD(Math.log(e),t,n)}function t8(e,t,n){return Math.exp(WD(e,t,n))}function pDe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>JP(n,r),pdf:s=>QP(s,n,r),cdf:s=>e8(s,n,r),icdf:s=>t8(s,n,r)};return i.mean(e).stdev(t)}function mDe(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Nu();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function n8(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Nu()}function r8(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function i8(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function s8(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function gDe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>n8(n,r),pdf:s=>r8(s,n,r),cdf:s=>i8(s,n,r),icdf:s=>s8(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function o8(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function yE(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function YD(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,f,c,d;for(d of e)s[a]=f=+t(d),o[a]=c=+n(d),++a,l+=(f-l)/a,u+=(c-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function vE(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function ab(e,t,n,r,i){let s=0,o=0;return vE(e,t,n,(a,l)=>{const u=l-i(a),f=l-r;s+=u*u,o+=f*f}),1-s/o}function a8(e,t,n){let r=0,i=0,s=0,o=0,a=0;vE(e,t,n,(f,c)=>{++a,r+=(f-r)/a,i+=(c-i)/a,s+=(f*c-s)/a,o+=(f*f-o)/a});const l=yE(r,i,s,o),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:ab(e,t,n,i,u)}}function yDe(e,t,n){let r=0,i=0,s=0,o=0,a=0;vE(e,t,n,(f,c)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(c-i)/a,s+=(f*c-s)/a,o+=(f*f-o)/a});const l=yE(r,i,s,o),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:ab(e,t,n,i,u)}}function vDe(e,t,n){const[r,i,s,o]=YD(e,t,n);let a=0,l=0,u=0,f=0,c=0,d,h,p;vE(e,t,n,(y,w)=>{d=r[c++],h=Math.log(w),p=d*w,a+=(w*h-a)/c,l+=(p-l)/c,u+=(p*h-u)/c,f+=(d*p-f)/c});const[g,v]=yE(l/o,a/o,u/o,f/o),x=y=>Math.exp(g+v*(y-s));return{coef:[Math.exp(g-v*s),v],predict:x,rSquared:ab(e,t,n,o,x)}}function bDe(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;vE(e,t,n,(c,d)=>{const h=Math.log(c),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(d-a)/l});const u=yE(r,i,s,o),f=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:ab(e,t,n,a,f)}}function l8(e,t,n){const[r,i,s,o]=YD(e,t,n),a=r.length;let l=0,u=0,f=0,c=0,d=0,h,p,g,v;for(h=0;h<a;)p=r[h],g=i[h++],v=p*p,l+=(v-l)/h,u+=(v*p-u)/h,f+=(v*v-f)/h,c+=(p*g-c)/h,d+=(v*g-d)/h;const x=f-l*l,y=l*x-u*u,w=(d*l-c*u)/y,_=(c*x-d*u)/y,A=-w*l,T=D=>(D=D-s,w*D*D+_*D+A+o);return{coef:[A-_*s+w*s*s+o,_-2*w*s,w],predict:T,rSquared:ab(e,t,n,o,T)}}function xDe(e,t,n,r){if(r===0)return o8(e,t,n);if(r===1)return a8(e,t,n);if(r===2)return l8(e,t,n);const[i,s,o,a]=YD(e,t,n),l=i.length,u=[],f=[],c=r+1;let d,h,p,g,v;for(d=0;d<c;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*s[p];for(u.push(g),v=new Float64Array(c),h=0;h<c;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);v[h]=g}f.push(v)}f.push(u);const x=PQe(f),y=w=>{w-=o;let _=a+x[0]+x[1]*w+x[2]*w*w;for(d=3;d<c;++d)_+=x[d]*Math.pow(w,d);return _};return{coef:IQe(c,x,-o,a),predict:y,rSquared:ab(e,t,n,a,y)}}function IQe(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function PQe(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Dbe=2,Lbe=1e-12;function wDe(e,t,n,r){const[i,s,o,a]=YD(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),c=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=Dbe;){const p=[0,u-1];for(let v=0;v<l;++v){const x=i[v],y=p[0],w=p[1],_=x-i[y]>i[w]-x?y:w;let A=0,T=0,D=0,k=0,R=0;const O=1/Math.abs(i[_]-x||1);for(let L=y;L<=w;++L){const $=i[L],I=s[L],U=NQe(Math.abs(x-$)*O)*d[L],q=$*U;A+=U,T+=q,D+=I*U,k+=I*q,R+=$*q}const[B,K]=yE(T/A,D/A,k/A,R/A);f[v]=B+K*x,c[v]=Math.abs(s[v]-f[v]),BQe(i,v+1,p)}if(h===Dbe)break;const g=c3e(c);if(Math.abs(g)<Lbe)break;for(let v=0,x,y;v<l;++v)x=c[v]/(6*g),d[v]=x>=1?Lbe:(y=1-x*x)*y}return zQe(i,f,o,a)}function NQe(e){return(e=1-e*e*e)*e*e}function BQe(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function zQe(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const jQe=.5*Math.PI/180;function XD(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],f=[];if(n===r){for(let g=1;g<r;++g)u.push(i(s+g/n*a));return u.push(i(o)),u}else{f.push(i(o));for(let g=n;--g>0;)f.push(i(s+g/n*a))}let c=u[0],d=f[f.length-1];const h=1/a,p=UQe(c[1],f);for(;d;){const g=i((c[0]+d[0])/2);g[0]-c[0]>=l&&qQe(c,g,d,h,p)>jQe?f.push(g):(c=d,u.push(d),f.pop()),d=f[f.length-1]}return u}function UQe(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function qQe(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function HQe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function E6(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:HQe(e)}function _De(e,t,n){return n||e+(t?"_"+t:"")}const kF=()=>{},GQe={init:kF,add:kF,rem:kF,idx:0},a2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},bE=Object.keys(a2).filter(e=>e!=="__count__");function VQe(e,t){return(n,r)=>rr({name:e,aggregate_param:r,out:n||e},GQe,t)}[...bE,"__count__"].forEach(e=>{a2[e]=VQe(e,a2[e])});function EDe(e,t,n){return a2[e](n,t)}function SDe(e,t){return e.idx-t.idx}function WQe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=a2[i]())})};return e.forEach(n),Object.values(t).sort(SDe)}function YQe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function XQe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ZQe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function KQe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function ADe(e,t){const n=t||Ra,r=WQe(e),i=e.slice().sort(SDe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=YQe,s.prototype.add=XQe,s.prototype.rem=ZQe,s.prototype.set=KQe,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function u8(e){this._key=e?$u(e):_n,this.reset()}const aa=u8.prototype;aa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};aa.add=function(e){this._add.push(e)};aa.rem=function(e){this._rem.push(e)};aa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};aa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Xt(n,s)||(n[s]=1,++i);return i};aa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=dTe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};aa.argmin=function(e){return this.extent(e)[0]||{}};aa.argmax=function(e){return this.extent(e)[1]||{}};aa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};aa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};aa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=WP(this.values(),e),this._get=e),this._q};aa.q1=function(e){return this.quartile(e)[0]};aa.q2=function(e){return this.quartile(e)[1]};aa.q3=function(e){return this.quartile(e)[2]};aa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=fDe(this.values(),1e3,.05,e),this._get=e),this._ci};aa.ci0=function(e){return this.ci(e)[0]};aa.ci1=function(e){return this.ci(e)[1]};function Gp(e){rt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Gp.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bE},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Lt(Gp,rt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,f,c;for(l in a)for(f=a[l].tuple,u=0;u<i;++u)r[u][c=f[n[u]]]=c}s(e._prev),s(t);function o(a,l,u){const f=n[u],c=r[u++];for(const d in c){const h=a?a+"|"+d:d;l[f]=c[d],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const w=Bt(ka(y)),_=w.length;let A=0,T;for(;A<_;++A)r[T=w[A]]||(r[T]=1,t.push(T))}this._dims=Bt(e.groupby),this._dnames=this._dims.map(y=>{const w=Rs(y);return i(y),n.push(w),w}),this.cellkey=e.key?e.key:E6(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,f={};let c,d,h,p,g,v,x;for(u!==o.length&&ot("Unmatched number of fields and aggregate ops."),x=0;x<u;++x){if(c=s[x],d=o[x],h=a[x]||null,c==null&&d!=="count"&&ot("Null aggregate field specified."),g=Rs(c),v=_De(d,g,l[x]),n.push(v),d==="count"){this._counts.push(v);continue}p=f[g],p||(i(c),p=f[g]=[],p.field=c,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(EDe(d,h,v))}return this._measures=this._measures.map(y=>ADe(y,y.field)),Object.create(null)},cellkey:E6(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new u8),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?rDe(t.tuple,s):yi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,f,c;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(f=0,c=this._alen;f<c;++f)s.push(this.celltuple(t[f])),t[f]=null;for(f=0,c=this._mlen;f<c;++f)l=n[f],(l.num===0&&i?o:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const JQe=1e-14;function c8(e){rt.call(this,null,e)}c8.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Lt(c8,rt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ka(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const c=r(f);f[a]=c,f[l]=c==null?null:i+s*(1+(c-i)/s)}:f=>f[a]=r(f)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=cDe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let f=Aa(t(u));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-r)),i+r*Math.floor(JQe+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=zl(l,ka(t),e.name||"bin_"+Rs(t))}});function CDe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(f=>!o[r(f)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?vTe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function f8(e){rt.call(this,[],e)}f8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Lt(f8,rt,{transform(e,t){const n=t.fork(t.ALL),r=CDe(_n,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(O0(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function kDe(e){qi.call(this,null,QQe,e)}Lt(kDe,qi);function QQe(e){return this.value&&!e.modified()?this.value:LP(e.fields,e.orders)}function d8(e){rt.call(this,null,e)}d8.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function eet(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Lt(d8,rt,{transform(e,t){const n=c=>d=>{for(var h=eet(a(d),e.case,s)||[],p,g=0,v=h.length;g<v;++g)o.test(p=h[g])||c(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(c=>i[c]=1+(i[c]||0)),f=n(c=>i[c]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=yi({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function h8(e){rt.call(this,null,e)}h8.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Lt(h8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=tet(a,i,s,e.filter||Iu)):n.mod=a,n.source=this.value,n.modifies(r)}});function tet(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(yi(s)),s={},s[t]=u);return i}const Rbe={kde:KP,mixture:mDe,normal:ZP,lognormal:pDe,uniform:gDe},net="distributions",Fbe="function",ret="field";function TDe(e,t){const n=e[Fbe];Xt(Rbe,n)||ot("Unknown distribution function: "+n);const r=Rbe[n]();for(const i in e)i===ret?r.data((e.from||t()).map(e[i])):i===net?r[i](e[i].map(s=>TDe(s,t))):typeof r[i]===Fbe&&r[i](e[i]);return r}function p8(e){rt.call(this,null,e)}const DDe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],iet={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:DDe},{name:"weights",type:"number",array:!0}]};p8.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:DDe.concat(iet)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(p8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=TDe(e.distribution,set(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ot("Invalid density method: "+o),!e.extent&&!r.data&&ot("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||Nf(r.data()),u=XD(o,l,i,s).map(f=>{const c={};return c[a[0]]=f[0],c[a[1]]=f[1],yi(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function set(e){return()=>e.materialize(e.SOURCE).source}function LDe(e,t){return e?e.map((n,r)=>t[r]||Rs(n)):null}function m8(e,t,n){const r=[],i=c=>c(l);let s,o,a,l,u,f;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),f=s[u],f||(s[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const RDe="bin";function g8(e){rt.call(this,null,e)}g8.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:RDe}]};const oet=(e,t)=>gE(Nf(e,t))/30;Lt(g8,rt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=m8(t.source,e.groupby,Ra),i=e.smooth||!1,s=e.field,o=e.step||oet(n,s),a=O0((p,g)=>s(p)-s(g)),l=e.as||RDe,u=r.length;let f=1/0,c=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of dDe(p,o,i,s))g<f&&(f=g),g>c&&(c=g),p[++h][l]=g}return this.value={start:f,stop:c,step:o},t.reflow(!0).modifies(l)}});function FDe(e){qi.call(this,null,aet,e),this.modified(!0)}Lt(FDe,qi);function aet(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:zl(n=>t(n,e),ka(t),Rs(t))}function y8(e){rt.call(this,[void 0,void 0],e)}y8.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Lt(y8,rt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Aa(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Rs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function v8(e,t){qi.call(this,e),this.parent=t,this.count=0}Lt(v8,qi,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ZD(e){rt.call(this,{},e),this._keys=ib();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Lt(ZD,rt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Xt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new v8(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=_n(l),f=s.get(u);f!==void 0&&(s.delete(u),a(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(_n(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=_n(l),f=s.get(u),c=r(l);f===c?a(c).mod(l):(s.set(u,c),a(f).rem(l),a(c).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(_n(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=_n(l),f=s.get(u),c=r(l);f!==c&&(s.set(u,c),a(f).rem(l),a(c).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function ODe(e){qi.call(this,null,uet,e)}Lt(ODe,qi);function uet(e){return this.value&&!e.modified()?this.value:at(e.name)?Bt(e.name).map(t=>$u(t)):$u(e.name,e.as)}function b8(e){rt.call(this,ib(),e)}b8.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Lt(b8,rt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,c=>{const d=_n(c);r.has(d)?r.delete(d):o.push(c)}),t.visit(t.ADD,c=>{l(c,e)?s.push(c):r.set(_n(c),1)});function f(c){const d=_n(c),h=l(c,e),p=r.get(d);h&&p?(r.delete(d),s.push(c)):!h&&!p?(r.set(d,1),o.push(c)):u&&h&&!p&&a.push(c)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function x8(e){rt.call(this,[],e)}x8.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Lt(x8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=LDe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let f=0,c,d,h;for(;f<u;++f){for(d=qP(a),c=0;c<o;++c)d[i[c]]=(h=l[c][f])==null?null:h;s&&(d[s]=f),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function w8(e){rt.call(this,[],e)}w8.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Lt(w8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Rs),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,c;f<l;++f)c=qP(u),c[o]=i[f],c[a]=r[f](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(s)}});function _8(e){rt.call(this,null,e)}_8.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Lt(_8,rt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function MDe(e){rt.call(this,[],e)}Lt(MDe,rt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=yi(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const gA={value:"value",median:c3e,mean:EUe,min:t6,max:zg},cet=[];function E8(e){rt.call(this,[],e)}E8.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function fet(e){var t=e.method||gA.value,n;if(gA[t]==null)ot("Unrecognized imputation method: "+t);else return t===gA.value?(n=e.value!==void 0?e.value:0,()=>n):gA[t]}function det(e){const t=e.field;return n=>n?t(n):NaN}Lt(E8,rt,{transform(e,t){var n=t.fork(t.ALL),r=fet(e),i=det(e),s=Rs(e.field),o=Rs(e.key),a=(e.groupby||[]).map(Rs),l=het(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,c=l.domain.length,d,h,p,g,v,x,y,w,_,A;for(v=0,w=l.length;v<w;++v)for(d=l[v],p=d.values,h=NaN,y=0;y<c;++y)if(d[y]==null){for(g=l.domain[y],A={_impute:!0},x=0,_=p.length;x<_;++x)A[a[x]]=p[x];A[o]=g,A[s]=Number.isNaN(h)?h=r(d,i):h,u.push(yi(A))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function het(e,t,n,r){var i=x=>x(v),s=[],o=r?r.slice():[],a={},l={},u,f,c,d,h,p,g,v;for(o.forEach((x,y)=>a[x]=y+1),d=0,g=e.length;d<g;++d)v=e[d],p=n(v),h=a[p]||(a[p]=o.push(p)),f=(u=t?t.map(i):cet)+"",(c=l[f])||(c=l[f]=[],s.push(c),c.values=u),c[h-1]=v;return s.domain=o,s}function S8(e){Gp.call(this,e)}S8.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Lt(S8,Gp,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{rr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function A8(e){rt.call(this,null,e)}A8.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(A8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=m8(r,e.groupby,e.field),s=(e.groupby||[]).map(Rs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,c=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ot("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=Nf(r,e.field)),c=d=e.steps||d),i.forEach(h=>{const p=KP(h,o)[a],g=e.counts?h.length:1,v=f||Nf(h);XD(p,v,c,d).forEach(x=>{const y={};for(let w=0;w<s.length;++w)y[s[w]]=h.dims[w];y[l[0]]=x[0],y[l[1]]=x[1]*g,u.push(yi(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function $De(e){qi.call(this,null,pet,e)}Lt($De,qi);function pet(e){return this.value&&!e.modified()?this.value:FP(e.fields,e.flat)}function IDe(e){rt.call(this,[],e),this._pending=null}Lt(IDe,rt,{transform(e,t){const n=t.dataflow;return this._pending?TF(this,t,this._pending):met(e)?t.StopPropagation:e.values?TF(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Bt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>TF(this,t,Bt(r.data)))}});function met(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function TF(e,t,n){n.forEach(yi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function C8(e){rt.call(this,{},e)}C8.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Lt(C8,rt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,f=e.as,c,d,h;return i?(d=i.length,a>1&&!f&&ot('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*d&&ot('The "as" parameter has too few output field names.'),f=f||i.map(Rs),c=function(p){for(var g=0,v=0,x,y;g<a;++g)if(y=r.get(n[g](p)),y==null)for(x=0;x<d;++x,++v)p[f[v]]=s;else for(x=0;x<d;++x,++v)p[f[v]]=i[x](y)}):(f||ot("Missing output field names."),c=function(p){for(var g=0,v;g<a;++g)v=r.get(n[g](p)),p[f[g]]=v??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,c),u.modifies(f)}});function PDe(e){qi.call(this,null,get,e)}Lt(PDe,qi);function get(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function NDe(e){qi.call(this,null,yet,e)}Lt(NDe,qi);function yet(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function BDe(e){rt.call(this,null,e)}Lt(BDe,rt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function k8(e){Gp.call(this,e)}k8.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Lt(k8,Gp,{_transform:Gp.prototype.transform,transform(e,t){return this._transform(vet(e,t),t)}});function vet(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ka(n).concat(ka(r)),o=xet(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>bet(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function bet(e,t,n,r){return zl(i=>t(i)===e?n(i):NaN,r,e+"")}function xet(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(mE),t?i.slice(0,t):i}function zDe(e){ZD.call(this,e)}Lt(zDe,ZD,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(_n(s),n,t,s);return(e.modified("field")||r&&t.modified(ka(r)))&&ot("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(yi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function T8(e){rt.call(this,null,e)}T8.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Lt(T8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=LDe(e.fields,e.as||[]),s=r?(a,l)=>wet(a,l,r,i):UD;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=_n(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,yi({}));o[_n(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[_n(a)]))}),n}});function wet(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function jDe(e){rt.call(this,null,e)}Lt(jDe,rt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function D8(e){rt.call(this,null,e)}D8.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const _et=1e-14;Lt(D8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=m8(i,e.groupby,e.field),o=(e.groupby||[]).map(Rs),a=[],l=e.step||.01,u=e.probs||Kl(l/2,1-_et,l),f=u.length;return s.forEach(c=>{const d=VP(c,u);for(let h=0;h<f;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=c.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(yi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function UDe(e){rt.call(this,null,e)}Lt(UDe,rt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=_n(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=qP(i);r[_n(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[_n(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function L8(e){rt.call(this,[],e),this.count=0}L8.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Lt(L8,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((f,c)=>(f[_n(c)]=1,f),{});let o=this.value,a=this.count,l=0;function u(f){let c,d;o.length<i?o.push(f):(d=~~((a+1)*Nu()),d<o.length&&d>=l&&(c=o[d],s[_n(c)]&&n.rem.push(c),o[d]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const c=_n(f);s[c]&&(s[c]=-1,n.rem.push(f)),--a}),o=o.filter(f=>s[_n(f)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,f=>{s[_n(f)]||u(f)}),l=-1),r&&o.length>i){const f=o.length-i;for(let c=0;c<f;++c)s[_n(o[c])]=-1,n.rem.push(o[c]);o=o.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{s[_n(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(f=>!s[_n(f)])),this.count=a,this.value=n.source=o,n}});function R8(e){rt.call(this,null,e)}R8.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Lt(R8,rt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,yi(s)}),n.add=t.add.concat(this.value),n}});function qDe(e){rt.call(this,null,e),this.modified(!0)}Lt(qDe,rt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function F8(e){rt.call(this,null,e)}const HDe=["unit0","unit1"];F8.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:IP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:HDe}]};Lt(F8,rt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ob:sb)(s.unit).offset,a=e.as||HDe,l=a[0],u=a[1],f=s.step;let c=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ka(n)))&&(t=t.reflow(!0),h=t.SOURCE,c=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let v,x;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=v=x=s(g),r&&(p[u]=x=o(v,f)),v<c&&(c=v),x>d&&(d=x))}),s.start=c,s.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:jTe({extent:e.extent||Nf(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=PP(r),o=this.value||{},a=(n?FTe:RTe)(s,i);return a.unit=Hr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function GDe(e){rt.call(this,ib(),e)}Lt(GDe,rt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function VDe(e){rt.call(this,null,e)}Lt(VDe,rt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(O0(e.sort)):t.source).map(e.field))}});function Eet(e,t,n,r){const i=l2[e](t,n);return{init:i.init||pp,update:function(s,o){o[r]=i.next(s)}}}const l2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=l2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ot("ntile num must be greater than zero.");const n=l2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ot("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Aet(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Aet(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Cet=Object.keys(l2);function WDe(e){const t=Bt(e.ops),n=Bt(e.fields),r=Bt(e.params),i=Bt(e.aggregate_params),s=Bt(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},f=[],c=[];let d=!0;function h(p){Bt(ka(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const v=n[g],x=r[g],y=i[g]||null,w=Rs(v),_=_De(p,w,s[g]);if(h(v),o.push(_),Xt(l2,p))a.push(Eet(p,v,x,_));else{if(v==null&&p!=="count"&&ot("Null aggregate field specified."),p==="count"){f.push(_);return}d=!1;let A=u[w];A||(A=u[w]=[],A.field=v,c.push(A)),A.push(EDe(p,y,_))}}),(f.length||c.length)&&(this.cell=ket(c,f,d)),this.inputs=Object.keys(l)}const YDe=WDe.prototype;YDe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};YDe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function ket(e,t,n){e=e.map(l=>ADe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new u8;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,f;for(a&&a.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=s.length;u<f;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function O8(e){rt.call(this,{},e),this._mlen=0,this._mods=[]}O8.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Cet.concat(bE)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Lt(O8,rt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=O0(e.sort),i=E6(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new WDe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Tet(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=CDe(_n),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Tet(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?lD(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Fa(-1)};t.init();for(let c=0;c<l;++c)Det(f,o,c,l),s&&Let(f,u),t.update(f,a[c])}function Det(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Let(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Ret=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Gp,bin:c8,collect:f8,compare:kDe,countpattern:d8,cross:h8,density:p8,dotbin:g8,expression:FDe,extent:y8,facet:ZD,field:ODe,filter:b8,flatten:x8,fold:w8,formula:_8,generate:MDe,impute:E8,joinaggregate:S8,kde:A8,key:$De,load:IDe,lookup:C8,multiextent:PDe,multivalues:NDe,params:BDe,pivot:k8,prefacet:zDe,project:T8,proxy:jDe,quantile:D8,relay:UDe,sample:L8,sequence:R8,sieve:qDe,subflow:v8,timeunit:F8,tupleindex:GDe,values:VDe,window:O8},Symbol.toStringTag,{value:"Module"}));function _i(e){return function(){return e}}const Obe=Math.abs,ma=Math.atan2,sg=Math.cos,Fet=Math.max,DF=Math.min,lf=Math.sin,Ig=Math.sqrt,ba=1e-12,o1=Math.PI,$3=o1/2,XDe=2*o1;function Oet(e){return e>1?0:e<-1?o1:Math.acos(e)}function Mbe(e){return e>=1?$3:e<=-1?-$3:Math.asin(e)}const S6=Math.PI,A6=2*S6,Sg=1e-6,Met=A6-Sg;function ZDe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $et(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZDe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let M8=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZDe:$et(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,f=o-t,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Sg)if(!(Math.abs(c*l-u*f)>Sg)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+u*u,v=h*h+p*p,x=Math.sqrt(g),y=Math.sqrt(d),w=s*Math.tan((S6-Math.acos((g+d-v)/(2*x*y)))/2),_=w/y,A=w/x;Math.abs(_-1)>Sg&&this._append`L${t+_*f},${n+_*c}`,this._append`A${s},${s},0,0,${+(c*h>f*p)},${this._x1=t+A*l},${this._y1=n+A*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,f=n+l,c=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Sg||Math.abs(this._y1-f)>Sg)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%A6+A6),d>Met?this._append`A${r},${r},0,1,${c},${t-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:d>Sg&&this._append`A${r},${r},0,${+(d>=S6)},${c},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function KD(){return new M8}KD.prototype=M8.prototype;function JD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new M8(t)}function Iet(e){return e.innerRadius}function Pet(e){return e.outerRadius}function Net(e){return e.startAngle}function Bet(e){return e.endAngle}function zet(e){return e&&e.padAngle}function jet(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,f=o-i,c=a-s,d=c*l-f*u;if(!(d*d<ba))return d=(f*(t-s)-c*(e-i))/d,[e+d*l,t+d*u]}function yA(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/Ig(a*a+l*l),f=u*l,c=-u*a,d=e+f,h=t+c,p=n+f,g=r+c,v=(d+p)/2,x=(h+g)/2,y=p-d,w=g-h,_=y*y+w*w,A=i-s,T=d*g-p*h,D=(w<0?-1:1)*Ig(Fet(0,A*A*_-T*T)),k=(T*w-y*D)/_,R=(-T*y-w*D)/_,O=(T*w+y*D)/_,B=(-T*y+w*D)/_,K=k-v,L=R-x,$=O-v,I=B-x;return K*K+L*L>$*$+I*I&&(k=O,R=B),{cx:k,cy:R,x01:-f,y01:-c,x11:k*(i/A-1),y11:R*(i/A-1)}}function Uet(){var e=Iet,t=Pet,n=_i(0),r=null,i=Net,s=Bet,o=zet,a=null,l=JD(u);function u(){var f,c,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-$3,g=s.apply(this,arguments)-$3,v=Obe(g-p),x=g>p;if(a||(a=f=l()),h<d&&(c=h,h=d,d=c),!(h>ba))a.moveTo(0,0);else if(v>XDe-ba)a.moveTo(h*sg(p),h*lf(p)),a.arc(0,0,h,p,g,!x),d>ba&&(a.moveTo(d*sg(g),d*lf(g)),a.arc(0,0,d,g,p,x));else{var y=p,w=g,_=p,A=g,T=v,D=v,k=o.apply(this,arguments)/2,R=k>ba&&(r?+r.apply(this,arguments):Ig(d*d+h*h)),O=DF(Obe(h-d)/2,+n.apply(this,arguments)),B=O,K=O,L,$;if(R>ba){var I=Mbe(R/d*lf(k)),U=Mbe(R/h*lf(k));(T-=I*2)>ba?(I*=x?1:-1,_+=I,A-=I):(T=0,_=A=(p+g)/2),(D-=U*2)>ba?(U*=x?1:-1,y+=U,w-=U):(D=0,y=w=(p+g)/2)}var q=h*sg(y),Y=h*lf(y),X=d*sg(A),te=d*lf(A);if(O>ba){var le=h*sg(w),ee=h*lf(w),z=d*sg(_),he=d*lf(_),de;if(v<o1)if(de=jet(q,Y,z,he,le,ee,X,te)){var ze=q-de[0],He=Y-de[1],je=le-de[0],we=ee-de[1],Ie=1/lf(Oet((ze*je+He*we)/(Ig(ze*ze+He*He)*Ig(je*je+we*we)))/2),qe=Ig(de[0]*de[0]+de[1]*de[1]);B=DF(O,(d-qe)/(Ie-1)),K=DF(O,(h-qe)/(Ie+1))}else B=K=0}D>ba?K>ba?(L=yA(z,he,q,Y,h,K,x),$=yA(le,ee,X,te,h,K,x),a.moveTo(L.cx+L.x01,L.cy+L.y01),K<O?a.arc(L.cx,L.cy,K,ma(L.y01,L.x01),ma($.y01,$.x01),!x):(a.arc(L.cx,L.cy,K,ma(L.y01,L.x01),ma(L.y11,L.x11),!x),a.arc(0,0,h,ma(L.cy+L.y11,L.cx+L.x11),ma($.cy+$.y11,$.cx+$.x11),!x),a.arc($.cx,$.cy,K,ma($.y11,$.x11),ma($.y01,$.x01),!x))):(a.moveTo(q,Y),a.arc(0,0,h,y,w,!x)):a.moveTo(q,Y),!(d>ba)||!(T>ba)?a.lineTo(X,te):B>ba?(L=yA(X,te,le,ee,d,-B,x),$=yA(q,Y,z,he,d,-B,x),a.lineTo(L.cx+L.x01,L.cy+L.y01),B<O?a.arc(L.cx,L.cy,B,ma(L.y01,L.x01),ma($.y01,$.x01),!x):(a.arc(L.cx,L.cy,B,ma(L.y01,L.x01),ma(L.y11,L.x11),!x),a.arc(0,0,d,ma(L.cy+L.y11,L.cx+L.x11),ma($.cy+$.y11,$.cx+$.x11),x),a.arc($.cx,$.cy,B,ma($.y11,$.x11),ma($.y01,$.x01),!x))):a.arc(0,0,d,A,_,x)}if(a.closePath(),f)return a=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-o1/2;return[sg(c)*f,lf(c)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:_i(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:_i(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:_i(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_i(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:_i(+f),u):i},u.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:_i(+f),u):s},u.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:_i(+f),u):o},u.context=function(f){return arguments.length?(a=f??null,u):a},u}function KDe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JDe(e){this._context=e}JDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $8(e){return new JDe(e)}function QDe(e){return e[0]}function eLe(e){return e[1]}function tLe(e,t){var n=_i(!0),r=null,i=$8,s=null,o=JD(a);e=typeof e=="function"?e:e===void 0?QDe:_i(e),t=typeof t=="function"?t:t===void 0?eLe:_i(t);function a(l){var u,f=(l=KDe(l)).length,c,d=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(c,u,l),+t(c,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:_i(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:_i(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_i(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function nLe(e,t,n){var r=null,i=_i(!0),s=null,o=$8,a=null,l=JD(u);e=typeof e=="function"?e:e===void 0?QDe:_i(+e),t=typeof t=="function"?t:_i(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?eLe:_i(+n);function u(c){var d,h,p,g=(c=KDe(c)).length,v,x=!1,y,w=new Array(g),_=new Array(g);for(s==null&&(a=o(y=l())),d=0;d<=g;++d){if(!(d<g&&i(v=c[d],d,c))===x)if(x=!x)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],_[p]);a.lineEnd(),a.areaEnd()}x&&(w[d]=+e(v,d,c),_[d]=+t(v,d,c),a.point(r?+r(v,d,c):w[d],n?+n(v,d,c):_[d]))}if(y)return a=null,y+""||null}function f(){return tLe().defined(i).curve(o).context(s)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),r=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:_i(+c),u):e},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_i(+c),u):r},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),n=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:_i(+c),u):t},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:_i(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:_i(!!c),u):i},u.curve=function(c){return arguments.length?(o=c,s!=null&&(a=o(s)),u):o},u.context=function(c){return arguments.length?(c==null?s=a=null:a=o(s=c),u):s},u}const qet={draw(e,t){const n=Ig(t/o1);e.moveTo(n,0),e.arc(0,0,n,0,XDe)}};function Het(e,t){let n=null,r=JD(i);e=typeof e=="function"?e:_i(e||qet),t=typeof t=="function"?t:_i(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_i(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_i(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Vp(){}function I3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function QD(e){this._context=e}QD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:I3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Get(e){return new QD(e)}function rLe(e){this._context=e}rLe.prototype={areaStart:Vp,areaEnd:Vp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:I3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vet(e){return new rLe(e)}function iLe(e){this._context=e}iLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:I3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wet(e){return new iLe(e)}function sLe(e,t){this._basis=new QD(e),this._beta=t}sLe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Yet=function e(t){function n(r){return t===1?new QD(r):new sLe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function P3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function I8(e,t){this._context=e,this._k=(1-t)/6}I8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:P3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:P3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xet=function e(t){function n(r){return new I8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function P8(e,t){this._context=e,this._k=(1-t)/6}P8.prototype={areaStart:Vp,areaEnd:Vp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:P3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zet=function e(t){function n(r){return new P8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function N8(e,t){this._context=e,this._k=(1-t)/6}N8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:P3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ket=function e(t){function n(r){return new N8(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B8(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ba){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ba){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/f,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function oLe(e,t){this._context=e,this._alpha=t}oLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:B8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jet=function e(t){function n(r){return t?new oLe(r,t):new I8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aLe(e,t){this._context=e,this._alpha=t}aLe.prototype={areaStart:Vp,areaEnd:Vp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:B8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qet=function e(t){function n(r){return t?new aLe(r,t):new P8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lLe(e,t){this._context=e,this._alpha=t}lLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:B8(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ett=function e(t){function n(r){return t?new lLe(r,t):new N8(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uLe(e){this._context=e}uLe.prototype={areaStart:Vp,areaEnd:Vp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ttt(e){return new uLe(e)}function $be(e){return e<0?-1:1}function Ibe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return($be(s)+$be(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Pbe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function LF(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function N3(e){this._context=e}N3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LF(this,this._t0,Pbe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LF(this,Pbe(this,n=Ibe(this,e,t)),n);break;default:LF(this,this._t0,n=Ibe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cLe(e){this._context=new fLe(e)}(cLe.prototype=Object.create(N3.prototype)).point=function(e,t){N3.prototype.point.call(this,t,e)};function fLe(e){this._context=e}fLe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function ntt(e){return new N3(e)}function rtt(e){return new cLe(e)}function dLe(e){this._context=e}dLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Nbe(e),i=Nbe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Nbe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function itt(e){return new dLe(e)}function eL(e,t){this._context=e,this._t=t}eL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function stt(e){return new eL(e,.5)}function ott(e){return new eL(e,0)}function att(e){return new eL(e,1)}function Pp(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ltt=()=>typeof Image<"u"?Image:null;function Xf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const utt=Xf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ctt=Xf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ftt=Xf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),dtt=Xf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),htt=Xf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ptt=Xf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),mtt=Xf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),gtt=Xf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ytt=Xf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),vtt=Xf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function z8(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const btt="identity",a1="linear",oh="log",xE="pow",wE="sqrt",tL="symlog",r0="time",i0="utc",Tf="sequential",lb="diverging",l1="quantile",nL="quantize",rL="threshold",j8="ordinal",C6="point",hLe="band",U8="bin-ordinal",bo="continuous",_E="discrete",EE="discretizing",qu="interpolating",q8="temporal";function xtt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function wtt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function H8(){const e=ICe().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function f(){const c=t().length,d=r[1]<r[0],h=r[1-d],p=z8(c,a,l);let g=r[d-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(c-a))*u,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const v=Kl(c).map(x=>g+i*x);return n(d?v.reverse():v)}return e.domain=function(c){return arguments.length?(t(c),f()):t()},e.range=function(c){return arguments.length?(r=[+c[0],+c[1]],f()):r.slice()},e.rangeRound=function(c){return r=[+c[0],+c[1]],o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(c){return arguments.length?(o=!!c,f()):o},e.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),a=l,f()):a},e.paddingInner=function(c){return arguments.length?(a=Math.max(0,Math.min(1,c)),f()):a},e.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),f()):l},e.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),f()):u},e.invertRange=function(c){if(c[0]==null||c[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+c[0],v=+c[1],x,y,w;if(!(g!==g||v!==v)&&(v<g&&(w=g,g=v,v=w),!(v<h[0]||g>r[1-d])))return x=Math.max(0,H_(h,g)-1),y=g===v?x:H_(h,v)-1,g-h[x]>s+1e-10&&++x,d&&(w=x,x=p-y,y=p-w),x>y?void 0:t().slice(x,y+1)},e.invert=function(c){const d=e.invertRange([c,c]);return d&&d[0]},e.copy=function(){return H8().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},f()}function pLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return pLe(t())},e}function _tt(){return pLe(H8().paddingInner(1))}var Ett=Array.prototype.map;function Stt(e){return Ett.call(e,Aa)}const Att=Array.prototype.slice;function mLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(H_(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Stt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Att.call(r),n):t.slice()},n.tickFormat=function(r,i){return Qze(e[0],Hr(e),r??10,i)},n.copy=function(){return mLe().domain(n.domain()).range(n.range())},n}const B3=new Map,gLe=Symbol("vega_scale");function yLe(e){return e[gLe]=!0,e}function Ctt(e){return e&&e[gLe]===!0}function ktt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?xtt(s):s.invertExtent?wtt(s):void 0),s.type=e,yLe(s)};return r.metadata=Lc(Bt(n)),r}function ui(e,t,n){return arguments.length>1?(B3.set(e,ktt(e,t,n)),this):vLe(e)?B3.get(e):void 0}ui(btt,v3e);ui(a1,Uze,bo);ui(oh,qze,[bo,oh]);ui(xE,Hze,bo);ui(wE,Gze,bo);ui(tL,Vze,bo);ui(r0,oHe,[bo,q8]);ui(i0,aHe,[bo,q8]);ui(Tf,$Ce,[bo,qu]);ui(`${Tf}-${a1}`,$Ce,[bo,qu]);ui(`${Tf}-${oh}`,Wze,[bo,qu,oh]);ui(`${Tf}-${xE}`,Yze,[bo,qu]);ui(`${Tf}-${wE}`,Xze,[bo,qu]);ui(`${Tf}-${tL}`,Zze,[bo,qu]);ui(`${lb}-${a1}`,D3e,[bo,qu]);ui(`${lb}-${oh}`,L3e,[bo,qu,oh]);ui(`${lb}-${xE}`,UI,[bo,qu]);ui(`${lb}-${wE}`,lHe,[bo,qu]);ui(`${lb}-${tL}`,R3e,[bo,qu]);ui(l1,b3e,[EE,l1]);ui(nL,Kze,EE);ui(rL,Jze,EE);ui(U8,mLe,[_E,EE]);ui(j8,ICe,_E);ui(hLe,H8,_E);ui(C6,_tt,_E);function vLe(e){return B3.has(e)}function $0(e,t){const n=B3.get(e);return n&&n.metadata[t]}function G8(e){return $0(e,bo)}function u1(e){return $0(e,_E)}function k6(e){return $0(e,EE)}function bLe(e){return $0(e,oh)}function Ttt(e){return $0(e,q8)}function xLe(e){return $0(e,qu)}function wLe(e){return $0(e,l1)}const Dtt=["clamp","base","constant","exponent"];function _Le(e,t){const n=t[0],r=Hr(t)-n;return function(i){return e(n+i*r)}}function iL(e,t,n){return yI(V8(t||"rgb",n),e)}function ELe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function SLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Fa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ui(s)().domain([t,n]).range([0,1]),Dtt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function V8(e,t){const n=GUe[Ltt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Ltt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Rtt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ftt={accent:ctt,category10:utt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:ftt,observable10:dtt,paired:htt,pastel1:ptt,pastel2:mtt,set1:gtt,set2:ytt,set3:vtt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function ALe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function CLe(e,t){for(const n in e)W8(n,t(e[n]))}const Bbe={};CLe(Ftt,ALe);CLe(Rtt,e=>iL(ALe(e)));function W8(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Bbe[e]=t,this):Bbe[e]}const kC="symbol",Ott="discrete",Mtt="gradient",$tt=e=>at(e)?e.map(t=>String(t)):String(e),Itt=(e,t)=>e[1]-t[1],Ptt=(e,t)=>t[1]-e[1];function Y8(e,t,n){let r;return li(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(gE(e.domain())/n||1)+1))),It(t)&&(r=t.step,t=t.interval),zt(t)&&(t=e.type===r0?sb(t):e.type==i0?ob(t):ot("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function kLe(e,t,n){let r=e.range(),i=r[0],s=Hr(r),o=Itt;if(i>s&&(r=s,s=i,i=r,o=Ptt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Hr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function X8(e,t){return e.bins?kLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function TLe(e,t,n,r,i,s){const o=t.type;let a=$tt;if(o===r0||i===r0)a=e.timeFormat(r);else if(o===i0||i===i0)a=e.utcFormat(r);else if(bLe(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=DLe(t,n,!1);a=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function DLe(e,t,n){const r=X8(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const T6={[l1]:"quantiles",[nL]:"thresholds",[rL]:"domain"},LLe={[l1]:"quantiles",[nL]:"domain"};function RLe(e,t){return e.bins?ztt(e.bins):e.type===oh?DLe(e,t,!0):T6[e.type]?Btt(e[T6[e.type]]()):X8(e,t)}function Ntt(e,t,n){const r=t[LLe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Btt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function ztt(e){const t=e.slice(0,-1);return t.max=Hr(e),t}const jtt=e=>T6[e.type]||e.bins;function FLe(e,t,n,r,i,s,o){const a=LLe[t.type]&&s!==r0&&s!==i0?Ntt(e,t,i):TLe(e,t,n,i,s,o);return r===kC&&jtt(t)?Utt(a):r===Ott?qtt(a):Htt(a)}const Utt=e=>(t,n,r)=>{const i=zbe(r[n+1],zbe(r.max,1/0)),s=jbe(t,e),o=jbe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},zbe=(e,t)=>e??t,qtt=e=>(t,n)=>n?e(t):null,Htt=e=>t=>e(t),jbe=(e,t)=>Number.isFinite(e)?t(e):null;function Gtt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Hr(t),s=i-r;if(e.type===rL){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Vtt(e,t,n,r){const i=r||t.type;return zt(n)&&Ttt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===r0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===i0?e.utcFormat("%A, %d %B %Y, %X UTC"):FLe(e,t,5,null,n,r,!0)}function OLe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Vtt(e,t,n.format,n.formatType);if(k6(t.type)){const s=RLe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(u1(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Hr(s))}`}}let MLe=0;function Wtt(){MLe=0}const z3="p_";function Z8(e){return e&&e.gradient}function $Le(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?z3:"";return i||(i=e.id="gradient_"+MLe++,r==="radial"?(e.x1=uf(e.x1,.5),e.y1=uf(e.y1,.5),e.r1=uf(e.r1,0),e.x2=uf(e.x2,.5),e.y2=uf(e.y2,.5),e.r2=uf(e.r2,.5),s=z3):(e.x1=uf(e.x1,0),e.y1=uf(e.y1,0),e.x2=uf(e.x2,1),e.y2=uf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function uf(e,t){return e??t}function ILe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Ube={basis:{curve:Get},"basis-closed":{curve:Vet},"basis-open":{curve:Wet},bundle:{curve:Yet,tension:"beta",value:.85},cardinal:{curve:Xet,tension:"tension",value:0},"cardinal-open":{curve:Ket,tension:"tension",value:0},"cardinal-closed":{curve:Zet,tension:"tension",value:0},"catmull-rom":{curve:Jet,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Qet,tension:"alpha",value:.5},"catmull-rom-open":{curve:ett,tension:"alpha",value:.5},linear:{curve:$8},"linear-closed":{curve:ttt},monotone:{horizontal:rtt,vertical:ntt},natural:{curve:itt},step:{curve:stt},"step-after":{curve:att},"step-before":{curve:ott}};function K8(e,t,n){var r=Xt(Ube,e)&&Ube[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Ytt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Xtt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ztt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ktt=/^((\s+,?\s*)|(,\s*))/,Jtt=/^[01]/;function c1(e){const t=[];return(e.match(Xtt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Ytt[s],a=Qtt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function Qtt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Jtt:Ztt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Ktt);l!==null&&(i+=l[0].length)}return r}const Wp=Math.PI/180,ent=1e-14,Lg=Math.PI/2,bf=Math.PI*2,By=Math.sqrt(3)/2;var RF={},FF={},PLe=[].join;function tnt(e,t,n,r,i,s,o,a,l){const u=PLe.call(arguments);if(RF[u])return RF[u];const f=o*Wp,c=Math.sin(f),d=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+c*(l-t)*.5,p=d*(l-t)*.5-c*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const v=d/n,x=c/n,y=-c/r,w=d/r,_=v*a+x*l,A=y*a+w*l,T=v*e+x*t,D=y*e+w*t;let R=1/((T-_)*(T-_)+(D-A)*(D-A))-.25;R<0&&(R=0);let O=Math.sqrt(R);s==i&&(O=-O);const B=.5*(_+T)-O*(D-A),K=.5*(A+D)+O*(T-_),L=Math.atan2(A-K,_-B);let I=Math.atan2(D-K,T-B)-L;I<0&&s===1?I+=bf:I>0&&s===0&&(I-=bf);const U=Math.ceil(Math.abs(I/(Lg+.001))),q=[];for(let Y=0;Y<U;++Y){const X=L+Y*I/U,te=L+(Y+1)*I/U;q[Y]=[B,K,X,te,n,r,c,d]}return RF[u]=q}function nnt(e){const t=PLe.call(e);if(FF[t])return FF[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const f=u*o,c=-l*a,d=l*o,h=u*a,p=Math.cos(i),g=Math.sin(i),v=Math.cos(s),x=Math.sin(s),y=.5*(s-i),w=Math.sin(y*.5),_=8/3*w*w/Math.sin(y),A=n+p-_*g,T=r+g+_*p,D=n+v,k=r+x,R=D+_*x,O=k-_*v;return FF[t]=[f*A+c*T,d*A+h*T,f*R+c*O,d*R+h*O,f*D+c*k,d*D+h*k]}const yu=["l",0,0,0,0,0,0,0];function rnt(e,t,n){const r=yu[0]=e[0];if(r==="a"||r==="A")yu[1]=t*e[1],yu[2]=n*e[2],yu[3]=e[3],yu[4]=e[4],yu[5]=e[5],yu[6]=t*e[6],yu[7]=n*e[7];else if(r==="h"||r==="H")yu[1]=t*e[1];else if(r==="v"||r==="V")yu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)yu[i]=(i%2==1?t:n)*e[i];return yu}function u2(e,t,n,r,i,s){var o,a=null,l=0,u=0,f=0,c=0,d,h,p,g,v=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,w=t.length;y<w;++y){switch(o=t[y],(i!==1||s!==1)&&(o=rnt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],v=l,x=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],v=l,x=u,e.moveTo(l+n,u+r);break;case"c":d=l+o[5],h=u+o[6],f=l+o[3],c=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,f+n,c+r,d+n,h+r),l=d,u=h;break;case"C":l=o[5],u=o[6],f=o[3],c=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,f+n,c+r,l+n,u+r);break;case"s":d=l+o[3],h=u+o[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,l+o[1]+n,u+o[2]+r,d+n,h+r),f=l+o[1],c=u+o[2],l=d,u=h;break;case"S":d=o[3],h=o[4],f=2*l-f,c=2*u-c,e.bezierCurveTo(f+n,c+r,o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,f=o[1],c=o[2];break;case"q":d=l+o[3],h=u+o[4],f=l+o[1],c=u+o[2],e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,f=o[1],c=o[2];break;case"t":d=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(f=l,c=u):a[0]==="t"?(f=2*l-p,c=2*u-g):a[0]==="q"&&(f=2*l-f,c=2*u-c),p=f,g=c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h,f=l+o[1],c=u+o[2];break;case"T":d=o[1],h=o[2],f=2*l-f,c=2*u-c,e.quadraticCurveTo(f+n,c+r,d+n,h+r),l=d,u=h;break;case"a":qbe(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":qbe(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=v,u=x,e.closePath();break}a=o}}function qbe(e,t,n,r){const i=tnt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=nnt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Hbe=.5773502691896257,Gbe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,bf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n,i=r-n*Hbe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n,i=r-n*Hbe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=By*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function NLe(e){return Xt(Gbe,e)?Gbe[e]:int(e)}var OF={};function int(e){if(!Xt(OF,e)){const t=c1(e);OF[e]={draw:function(n,r){u2(n,t,0,0,Math.sqrt(r)/2)}}}return OF[e]}const Qh=.448084975506;function snt(e){return e.x}function ont(e){return e.y}function ant(e){return e.width}function lnt(e){return e.height}function Ad(e){return typeof e=="function"?e:()=>+e}function vA(e,t,n){return Math.max(t,Math.min(e,n))}function BLe(){var e=snt,t=ont,n=ant,r=lnt,i=Ad(0),s=i,o=i,a=i,l=null;function u(f,c,d){var h,p=c??+e.call(this,f),g=d??+t.call(this,f),v=+n.call(this,f),x=+r.call(this,f),y=Math.min(v,x)/2,w=vA(+i.call(this,f),0,y),_=vA(+s.call(this,f),0,y),A=vA(+o.call(this,f),0,y),T=vA(+a.call(this,f),0,y);if(l||(l=h=KD()),w<=0&&_<=0&&A<=0&&T<=0)l.rect(p,g,v,x);else{var D=p+v,k=g+x;l.moveTo(p+w,g),l.lineTo(D-_,g),l.bezierCurveTo(D-Qh*_,g,D,g+Qh*_,D,g+_),l.lineTo(D,k-T),l.bezierCurveTo(D,k-Qh*T,D-Qh*T,k,D-T,k),l.lineTo(p+A,k),l.bezierCurveTo(p+Qh*A,k,p,k-Qh*A,p,k-A),l.lineTo(p,g+w),l.bezierCurveTo(p,g+Qh*w,p+Qh*w,g,p+w,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(f){return arguments.length?(e=Ad(f),u):e},u.y=function(f){return arguments.length?(t=Ad(f),u):t},u.width=function(f){return arguments.length?(n=Ad(f),u):n},u.height=function(f){return arguments.length?(r=Ad(f),u):r},u.cornerRadius=function(f,c,d,h){return arguments.length?(i=Ad(f),s=c!=null?Ad(c):i,a=d!=null?Ad(d):i,o=h!=null?Ad(h):s,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function zLe(){var e,t,n,r,i=null,s,o,a,l;function u(c,d,h){const p=h/2;if(s){var g=a-d,v=c-o;if(g||v){var x=Math.hypot(g,v),y=(g/=x)*l,w=(v/=x)*l,_=Math.atan2(v,g);i.moveTo(o-y,a-w),i.lineTo(c-g*p,d-v*p),i.arc(c,d,p,_-Math.PI,_),i.lineTo(o+y,a+w),i.arc(o,a,l,_,_+Math.PI)}else i.arc(c,d,p,0,bf);i.closePath()}else s=1;o=c,a=d,l=p}function f(c){var d,h=c.length,p,g=!1,v;for(i==null&&(i=v=KD()),d=0;d<=h;++d)!(d<h&&r(p=c[d],d,c))===g&&(g=!g)&&(s=0),g&&u(+e(p,d,c),+t(p,d,c),+n(p,d,c));if(v)return i=null,v+""||null}return f.x=function(c){return arguments.length?(e=c,f):e},f.y=function(c){return arguments.length?(t=c,f):t},f.size=function(c){return arguments.length?(n=c,f):n},f.defined=function(c){return arguments.length?(r=c,f):r},f.context=function(c){return arguments.length?(c==null?i=null:i=c,f):i},f}function SE(e,t){return e??t}const AE=e=>e.x||0,CE=e=>e.y||0,unt=e=>e.width||0,cnt=e=>e.height||0,fnt=e=>(e.x||0)+(e.width||0),dnt=e=>(e.y||0)+(e.height||0),hnt=e=>e.startAngle||0,pnt=e=>e.endAngle||0,mnt=e=>e.padAngle||0,gnt=e=>e.innerRadius||0,ynt=e=>e.outerRadius||0,vnt=e=>e.cornerRadius||0,bnt=e=>SE(e.cornerRadiusTopLeft,e.cornerRadius)||0,xnt=e=>SE(e.cornerRadiusTopRight,e.cornerRadius)||0,wnt=e=>SE(e.cornerRadiusBottomRight,e.cornerRadius)||0,_nt=e=>SE(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Ent=e=>SE(e.size,64),Snt=e=>e.size||1,sL=e=>e.defined!==!1,Ant=e=>NLe(e.shape||"circle"),Cnt=Uet().startAngle(hnt).endAngle(pnt).padAngle(mnt).innerRadius(gnt).outerRadius(ynt).cornerRadius(vnt),knt=nLe().x(AE).y1(CE).y0(dnt).defined(sL),Tnt=nLe().y(CE).x1(AE).x0(fnt).defined(sL),Dnt=tLe().x(AE).y(CE).defined(sL),Lnt=BLe().x(AE).y(CE).width(unt).height(cnt).cornerRadius(bnt,xnt,wnt,_nt),Rnt=Het().type(Ant).size(Ent),Fnt=zLe().x(AE).y(CE).defined(sL).size(Snt);function J8(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Ont(e,t){return Cnt.context(e)(t)}function Mnt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Tnt:knt).curve(K8(r,n.orient,n.tension)).context(e)(t)}function $nt(e,t){const n=t[0],r=n.interpolate||"linear";return Dnt.curve(K8(r,n.orient,n.tension)).context(e)(t)}function ub(e,t,n,r){return Lnt.context(e)(t,n,r)}function Int(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Pnt(e,t){return Rnt.context(e)(t)}function Nnt(e,t){return Fnt.context(e)(t)}var jLe=1;function ULe(){jLe=1}function Q8(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+jLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return fr(r)?o.path=r(null):J8(n)?o.path=ub(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Qs(e){this.clear(),e&&this.union(e)}Qs.prototype={clone(){return new Qs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+f,a*r-l*o+u,l*r+a*o+f,a*s-l*i+u,l*s+a*i+f,a*s-l*o+u,l*s+a*o+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function oL(e){this.mark=e,this.bounds=this.bounds||new Qs}function aL(e){oL.call(this,e),this.items=this.items||[]}Lt(aL,oL);class qLe{constructor(t){this._pending=0,this._loader=t||BD()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vbe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(mw(n),r)).catch(()=>(mw(n),null))}loadImage(t){const n=this,r=ltt();return Vbe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Xt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>mw(n),o.onerror=()=>mw(n),o.src=s,o}).catch(i=>(mw(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vbe(e){e._pending+=1}function mw(e){e._pending-=1}function yh(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Bnt(t,r):0))}return e}function Bnt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const znt=bf-1e-8;let lL,TC,DC,Pg,D6,LC,L6,R6;const wp=(e,t)=>lL.add(e,t),RC=(e,t)=>wp(TC=e,DC=t),Wbe=e=>wp(e,lL.y1),Ybe=e=>wp(lL.x1,e),Rg=(e,t)=>D6*e+L6*t,Fg=(e,t)=>LC*e+R6*t,MF=(e,t)=>wp(Rg(e,t),Fg(e,t)),$F=(e,t)=>RC(Rg(e,t),Fg(e,t));function kE(e,t){return lL=e,t?(Pg=t*Wp,D6=R6=Math.cos(Pg),LC=Math.sin(Pg),L6=-LC):(D6=R6=1,Pg=LC=L6=0),jnt}const jnt={beginPath(){},closePath(){},moveTo:$F,lineTo:$F,rect(e,t,n,r){Pg?(MF(e+n,t),MF(e+n,t+r),MF(e,t+r),$F(e,t)):(wp(e+n,t+r),RC(e,t))},quadraticCurveTo(e,t,n,r){const i=Rg(e,t),s=Fg(e,t),o=Rg(n,r),a=Fg(n,r);Xbe(TC,i,o,Wbe),Xbe(DC,s,a,Ybe),RC(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Rg(e,t),a=Fg(e,t),l=Rg(n,r),u=Fg(n,r),f=Rg(i,s),c=Fg(i,s);Zbe(TC,o,l,f,Wbe),Zbe(DC,a,u,c,Ybe),RC(f,c)},arc(e,t,n,r,i,s){if(r+=Pg,i+=Pg,TC=n*Math.cos(i)+e,DC=n*Math.sin(i)+t,Math.abs(i-r)>znt)wp(e-n,t-n),wp(e+n,t+n);else{const o=u=>wp(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%bf,r<0&&(r+=bf),i=i%bf,i<0&&(i+=bf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=bf,a=r-r%Lg,l=0;l<4&&a>i;++l,a-=Lg)o(a);else for(a=r-r%Lg+Lg,l=0;l<4&&a<i;++l,a=a+Lg)o(a)}}};function Xbe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Zbe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,f;Math.abs(s)>ent?(f=o*o+a*s,f>=0&&(f=Math.sqrt(f),l=(-o+f)/s,u=(-o-f)/s)):l=.5*a/o,0<l&&l<1&&i(Kbe(l,e,t,n,r)),0<u&&u<1&&i(Kbe(u,e,t,n,r))}function Kbe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Np=(Np=Pp(1,1))?Np.getContext("2d"):null;const F6=new Qs;function eN(e){return function(t,n){if(!Np)return!0;e(Np,t),F6.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=F6;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(Np.isPointInPath(l,a))return!0;return!1}}function tN(e,t){return t.contains(e.x||0,e.y||0)}function HLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(F6.set(n,r,n+i,r+s))}function GLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return gv(t,n,r,i,s)}function gv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,f=i-n;let c=0,d=1,h,p,g,v;for(v=0;v<4;++v){if(v===0&&(h=-u,p=-(s-t)),v===1&&(h=u,p=a-t),v===2&&(h=-f,p=-(o-n)),v===3&&(h=f,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>c&&(c=g)}else if(h>0){if(g<c)return!1;g<d&&(d=g)}}return!0}function f1(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ac(e,t){return e??t}function Jbe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Unt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ac(t.x1,.5)*r,n.y1+ac(t.y1,.5)*i,Math.max(r,i)*ac(t.r1,0),n.x1+ac(t.x2,.5)*r,n.y1+ac(t.y2,.5)*i,Math.max(r,i)*ac(t.r2,.5));else{const o=ac(t.x1,0),a=ac(t.y1,0),l=ac(t.x2,1),u=ac(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const f=Pp(Math.ceil(r),Math.ceil(i)),c=f.getContext("2d");return c.scale(r,i),c.fillStyle=Jbe(c.createLinearGradient(o,a,l,u),t.stops),c.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return Jbe(s,t.stops)}function VLe(e,t,n){return Z8(n)?Unt(e,n,t.bounds):n}function j3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=VLe(e,t,t.fill),!0):!1}var qnt=[];function d1(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=VLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||qnt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Hnt(e,t){return e.zindex-t.zindex||e.index-t.index}function nN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Hnt)}function Fc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=nN(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function U3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=nN(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function rN(e){return function(t,n,r){Fc(n,i=>{(!r||r.intersects(i.bounds))&&WLe(e,t,i,i)})}}function Gnt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&WLe(e,t,n.items[0],n.items)}}function WLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(f1(t,n),n.fill&&j3(t,n,i)&&t.fill(),n.stroke&&d1(t,n,i)&&t.stroke()))}function uL(e){return e=e||Iu,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,U3(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function TE(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,f;return l&&(u=o.strokeWidth,f=o.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function iN(e){return uL(TE(e))}function qg(e,t){return"translate("+e+","+t+")"}function sN(e){return"rotate("+e+")"}function Vnt(e,t){return"scale("+e+","+t+")"}function YLe(e){return qg(e.x||0,e.y||0)}function Wnt(e){return qg(e.x||0,e.y||0)+(e.angle?" "+sN(e.angle):"")}function Ynt(e){return qg(e.x||0,e.y||0)+(e.angle?" "+sN(e.angle):"")+(e.scaleX||e.scaleY?" "+Vnt(e.scaleX||1,e.scaleY||1):"")}function oN(e,t,n){function r(o,a){o("transform",Wnt(a)),o("d",t(null,a))}function i(o,a){return t(kE(o,a.angle),a),yh(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,f=a.angle||0;o.translate(l,u),f&&o.rotate(f*=Wp),o.beginPath(),t(o,a),f&&o.rotate(-f),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:rN(s),pick:iN(s),isect:n||eN(s)}}var Xnt=oN("arc",Ont);function Znt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Knt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Jnt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function aN(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(kE(l),f),yh(l,f[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=TE(s);function a(l,u,f,c,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(f*=l.pixelRatio,c*=l.pixelRatio,o(l,p,f,c)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Gnt(s),pick:a,isect:tN,tip:n}}var Qnt=aN("area",Mnt,Znt);function ert(e,t){var n=t.clip;e.save(),fr(n)?(e.beginPath(),n(e),e.clip()):XLe(e,t.group)}function XLe(e,t){e.beginPath(),J8(t)?ub(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function ZLe(e){const t=ac(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function trt(e,t){e("transform",YLe(t))}function KLe(e,t){const n=ZLe(t);e("d",ub(null,t,n,n))}function nrt(e,t){e("class","background"),e("aria-hidden",!0),KLe(e,t)}function rrt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?KLe(e,t):e("d","")}function irt(e,t,n){const r=t.clip?Q8(n,t,t):null;e("clip-path",r)}function srt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),yh(e,t),e.translate(t.x||0,t.y||0)}function c2(e,t,n,r){const i=ZLe(t);e.beginPath(),ub(e,t,(n||0)+i,(r||0)+i)}const ort=TE(c2),art=TE(c2,!1),lrt=TE(c2,!0);function urt(e,t,n,r){Fc(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(c2(e,i,s,o),f1(e,i),i.fill&&j3(e,i,l)&&e.fill(),i.stroke&&!a&&d1(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&XLe(e,i),n&&n.translate(-s,-o),Fc(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(c2(e,i,s,o),f1(e,i),d1(e,i,l)&&e.stroke())})}function crt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return U3(t,l=>{let u,f,c;const d=l.bounds;if(d&&!d.contains(i,s))return;f=l.x||0,c=l.y||0;const h=f+(l.width||0),p=c+(l.height||0),g=l.clip;if(g&&(i<f||i>h||s<c||s>p))return;if(e.save(),e.translate(f,c),f=i-f,c=s-c,g&&J8(l)&&!lrt(e,l,o,a))return e.restore(),null;const v=l.strokeForeground,x=t.interactive!==!1;return x&&v&&l.stroke&&art(e,l,o,a)?(e.restore(),l):(u=U3(l,y=>frt(y,f,c)?this.pick(y,n,r,f,c):null),!u&&x&&(l.fill||!v&&l.stroke)&&ort(e,l,o,a)&&(u=l),e.restore(),u||null)})}function frt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var drt={type:"group",tag:"g",nested:!1,attr:trt,bound:srt,draw:urt,pick:crt,isect:HLe,content:irt,background:nrt,foreground:rrt},f2={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function lN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function uN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function cN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function cL(e,t){return e==="center"?t/2:e==="right"?t:0}function fL(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function hrt(e,t,n){const r=lN(t,n),i=uN(t,r),s=cN(t,r),o=(t.x||0)-cL(t.align,i),a=(t.y||0)-fL(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,f2["xmlns:xlink"],"xlink:href"),e("transform",qg(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function prt(e,t){const n=t.image,r=uN(t,n),i=cN(t,n),s=(t.x||0)-cL(t.align,r),o=(t.y||0)-fL(t.baseline,i);return e.set(s,o,s+r,o+i)}function mrt(e,t,n){Fc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=lN(r,this);let s=uN(r,i),o=cN(r,i);if(s===0||o===0)return;let a=(r.x||0)-cL(r.align,s),l=(r.y||0)-fL(r.baseline,o),u,f,c,d;r.aspect!==!1&&(f=i.width/i.height,c=r.width/r.height,f===f&&c===c&&f!==c&&(c<f?(d=s/f,l+=(o-d)/2,o=d):(d=o*f,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(f1(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var grt={type:"image",tag:"image",nested:!1,attr:hrt,bound:prt,draw:mrt,pick:uL(),isect:Iu,get:lN,xOffset:cL,yOffset:fL},yrt=aN("line",$nt,Knt);function vrt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Ynt(t)),e("d",t.path)}function FC(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Wp,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=c1(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),u2(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):u2(e,l,r,i,s,o)}function brt(e,t){return FC(kE(e,t.angle),t)?e.set(0,0,0,0):yh(e,t,!0)}var xrt={type:"path",tag:"path",nested:!1,attr:vrt,bound:brt,draw:rN(FC),pick:iN(FC),isect:eN(FC)};function wrt(e,t){e("d",ub(null,t))}function _rt(e,t){var n,r;return yh(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Qbe(e,t){e.beginPath(),ub(e,t)}var Ert={type:"rect",tag:"path",nested:!1,attr:wrt,bound:_rt,draw:rN(Qbe),pick:iN(Qbe),isect:HLe};function Srt(e,t){e("transform",YLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Art(e,t){var n,r;return yh(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function JLe(e,t,n){var r,i,s,o;return t.stroke&&d1(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Crt(e,t,n){Fc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&JLe(e,r,i)&&(f1(e,r),e.stroke())}})}function krt(e,t,n,r){return e.isPointInStroke?JLe(e,t,1)&&e.isPointInStroke(n,r):!1}var Trt={type:"rule",tag:"line",nested:!1,attr:Srt,bound:Art,draw:Crt,pick:uL(krt),isect:GLe},Drt=oN("shape",Int),Lrt=oN("symbol",Pnt,tN);const exe=yTe();var nu={height:Zf,measureWidth:fN,estimateWidth:q3,width:q3,canvas:QLe};QLe(!0);function QLe(e){nu.width=e&&Np?fN:q3}function q3(e,t){return eRe(Xp(e,t),Zf(e))}function eRe(e,t){return~~(.8*e.length*t)}function fN(e,t){return Zf(e)<=0||!(t=Xp(e,t))?0:tRe(t,dL(e))}function tRe(e,t){const n=`(${t}) ${e}`;let r=exe.get(n);return r===void 0&&(Np.font=t,r=Np.measureText(e).width,exe.set(n,r)),r}function Zf(e){return e.fontSize!=null?+e.fontSize||0:11}function Yp(e){return e.lineHeight!=null?e.lineHeight:Zf(e)+2}function Rrt(e){return at(e)?e.length>1?e:e[0]:e}function DE(e){return Rrt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function dN(e){const t=DE(e);return(at(t)?t.length-1:0)*Yp(e)}function Xp(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Ort(e,n):n}function Frt(e){if(nu.width===fN){const t=dL(e);return n=>tRe(n,t)}else if(nu.width===q3){const t=Zf(e);return n=>eRe(n,t)}else return t=>nu.width(e,t)}function Ort(e,t){var n=+e.limit,r=Frt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function LE(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function dL(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Zf(e)+"px "+LE(e,t)}function hN(e){var t=e.baseline,n=Zf(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Yp(e):t==="line-bottom"?.29*n-.5*Yp(e):0)}const Mrt={left:"start",center:"middle",right:"end"},x_=new Qs;function hL(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Lg,t+=r*Math.cos(i),n+=r*Math.sin(i)),x_.x1=t,x_.y1=n,x_}function $rt(e,t){var n=t.dx||0,r=(t.dy||0)+hN(t),i=hL(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",Mrt[t.align]||"start"),a?(l=qg(s,o)+" "+sN(a),(n||r)&&(l+=" "+qg(n,r))):l=qg(s+n,o+r),e("transform",l)}function pN(e,t,n){var r=nu.height(t),i=t.align,s=hL(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+hN(t)-Math.round(.8*r),f=DE(t),c;if(at(f)?(r+=Yp(t)*(f.length-1),c=f.reduce((d,h)=>Math.max(d,nu.width(t,h)),0)):c=nu.width(t,f),i==="center"?l-=c/2:i==="right"&&(l-=c),e.set(l+=o,u+=a,l+c,u+r),t.angle&&!n)e.rotate(t.angle*Wp,o,a);else if(n===2)return e.rotatedPoints(t.angle*Wp,o,a);return e}function Irt(e,t,n){Fc(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,f,c;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=dL(r),e.textAlign=r.align||"left",s=hL(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Wp),o=a=0),o+=r.dx||0,a+=(r.dy||0)+hN(r),f=DE(r),f1(e,r),at(f))for(u=Yp(r),l=0;l<f.length;++l)c=Xp(r,f[l]),r.fill&&j3(e,r,i)&&e.fillText(c,o,a),r.stroke&&d1(e,r,i)&&e.strokeText(c,o,a),a+=u;else c=Xp(r,f),r.fill&&j3(e,r,i)&&e.fillText(c,o,a),r.stroke&&d1(e,r,i)&&e.strokeText(c,o,a);r.angle&&e.restore()}})}function Prt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=hL(t),a=o.x1,l=o.y1,u=pN(x_,t,1),f=-t.angle*Wp,c=Math.cos(f),d=Math.sin(f),h=c*i-d*s+(a-c*a+d*l),p=d*i+c*s+(l-d*a-c*l);return u.contains(h,p)}function Nrt(e,t){const n=pN(x_,e,2);return gv(t,n[0],n[1],n[2],n[3])||gv(t,n[0],n[1],n[4],n[5])||gv(t,n[4],n[5],n[6],n[7])||gv(t,n[2],n[3],n[6],n[7])}var Brt={type:"text",tag:"text",nested:!1,attr:$rt,bound:pN,draw:Irt,pick:uL(Prt),isect:Nrt},zrt=aN("trail",Nnt,Jnt),cu={arc:Xnt,area:Qnt,group:drt,image:grt,line:yrt,path:xrt,rect:Ert,rule:Trt,shape:Drt,symbol:Lrt,text:Brt,trail:zrt};function O6(e,t,n){var r=cu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Qs),e,n)}var txe={mark:null};function nRe(e,t,n){var r=cu[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,f;if(r.nested)return o?u=s[0]:(txe.mark=e,u=txe),f=O6(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new Qs,o)for(a=0,l=s.length;a<l;++a)t.union(O6(s[a],i,n));return e.bounds=t}const jrt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function rRe(e,t){return JSON.stringify(e,jrt,t)}function iRe(e){const t=typeof e=="string"?JSON.parse(e):e;return sRe(t)}function sRe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&sRe(n[i]);return t&&nRe(e),e}class oRe{constructor(t){arguments.length?this.root=iRe(t):(this.root=nxe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new aL(this.root)])}toJSON(t){return rRe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=nxe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function nxe(e,t){const n={bounds:new Qs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function _p(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function mN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ho(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=_p(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Su(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function aRe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function pL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Urt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=cu[i.marktype]).tip){for(o=pL(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let gN=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||BD(),this._tooltip=n||qrt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=_p(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Urt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function qrt(e,t,n,r){e.element().setAttribute("title",r||"")}let RE=class{constructor(t){this._el=null,this._bgcolor=null,this._loader=new qLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}};const Hrt="keydown",Grt="keypress",Vrt="keyup",lRe="dragenter",OC="dragleave",uRe="dragover",M6="pointerdown",Wrt="pointerup",H3="pointermove",MC="pointerout",cRe="pointerover",$6="mousedown",Yrt="mouseup",fRe="mousemove",G3="mouseout",dRe="mouseover",V3="click",Xrt="dblclick",Zrt="wheel",hRe="mousewheel",W3="touchstart",Y3="touchmove",X3="touchend",Krt=[Hrt,Grt,Vrt,lRe,OC,uRe,M6,Wrt,H3,MC,cRe,$6,Yrt,fRe,G3,dRe,V3,Xrt,Zrt,hRe,W3,Y3,X3],I6=H3,w_=G3,P6=V3;class FE extends gN{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Krt,this.pointermove=ixe([H3,fRe],[cRe,dRe],[MC,G3]),this.dragover=ixe([uRe],[lRe],[OC]),this.pointerout=sxe([MC,G3]),this.dragleave=sxe([OC])}initialize(t,n,r){return this._canvas=t&&mN(t,"canvas"),[V3,$6,M6,H3,MC,OC].forEach(i=>rxe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(hRe,t)}pointerdown(t){this._down=this._active,this.fire(M6,t)}mousedown(t){this._down=this._active,this.fire($6,t)}click(t){this._down===this._active&&(this.fire(V3,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(W3,t,!0)}touchmove(t){this.fire(Y3,t,!0)}touchend(t){this.fire(X3,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===P6&&i&&i.href?this.handleHref(n,i,i.href):(t===I6||t===w_)&&this.handleTooltip(n,i,t!==w_),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(rxe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=pL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return cu[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Jrt=e=>e===W3||e===Y3||e===X3?[W3,Y3,X3]:[e];function rxe(e,t){Jrt(t).forEach(n=>Qrt(e,n))}function Qrt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function Vw(e,t,n){t.forEach(r=>e.fire(r,n))}function ixe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?Vw(this,e,r):((!i||!i.exit)&&Vw(this,n,r),this._active=s,Vw(this,t,r),Vw(this,e,r))}}function sxe(e){return function(t){Vw(this,e,t),this._active=null}}function eit(){return typeof window<"u"&&window.devicePixelRatio||1}function tit(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?eit():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Z3 extends RE{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Qs,this._tempb=new Qs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Pp(1,1,this._options.type),t&&this._canvas&&(Su(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)tit(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ot("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=nit(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):rit(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=cu[n.marktype];n.clip&&ert(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const nit=(e,t,n)=>new Qs().set(0,0,t,n).translate(-e[0],-e[1]);function rit(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class pRe extends gN{constructor(t,n){super(t,n);const r=this;r._hrefHandler=IF(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=IF(r,(i,s)=>{r.handleTooltip(i,s,i.type!==w_)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(P6,this._hrefHandler),i.removeEventListener(I6,this._tooltipHandler),i.removeEventListener(w_,this._tooltipHandler)),this._svg=i=t&&mN(t,"svg"),i&&(i.addEventListener(P6,this._hrefHandler),i.addEventListener(I6,this._tooltipHandler),i.addEventListener(w_,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:IF(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const IF=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},mRe="aria-hidden",yN="aria-label",vN="role",bN="aria-roledescription",gRe="graphics-object",xN="graphics-symbol",yRe=(e,t,n)=>({[vN]:e,[bN]:t,[yN]:n||void 0}),iit=Lc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),oxe={axis:{desc:"axis",caption:ait},legend:{desc:"legend",caption:lit},"title-text":{desc:"title",caption:e=>`Title text '${lxe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${lxe(e)}'`}},axe={ariaRole:vN,ariaRoleDescription:bN,description:yN};function vRe(e,t){const n=t.aria===!1;if(e(mRe,n||void 0),n||t.description==null)for(const r in axe)e(axe[r],void 0);else{const r=t.mark.marktype;e(yN,t.description),e(vN,t.ariaRole||(r==="group"?gRe:xN)),e(bN,t.ariaRoleDescription||`${r} mark`)}}function bRe(e){return e.aria===!1?{[mRe]:!0}:iit[e.role]?null:oxe[e.role]?oit(e,oxe[e.role]):sit(e)}function sit(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return yRe(n?gRe:xN,`${t} mark container`,e.description)}function oit(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return yRe(t.role||xN,t.desc,n.description||r(n))}catch{return null}}function lxe(e){return Bt(e.text).join(" ")}function ait(e){const t=e.datum,n=e.orient,r=t.title?xRe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${u1(a)?"discrete":a} scale with ${OLe(o,s,e)}`}function lit(e){const t=e.datum,n=t.title?xRe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return cit(r)+(n?` titled '${n}'`:"")+` for ${uit(s)} with ${OLe(l,a,e)}`}function xRe(e){try{return Bt(Hr(e.items).items[0].text).join(" ")}catch{return null}}function uit(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Hr(e)}function cit(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const wRe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fit=e=>wRe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function wN(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${fit(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];for(const d of f)for(const h in d)o(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=wRe(l),a),toString:()=>e};return a}const _Re=e=>ERe(wN(),e)+"";function ERe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):ERe(e,r)}return e.close()}const K3={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},J3={blend:"mix-blend-mode"},SRe={fill:"none","stroke-miterlimit":10},gw=0,uxe="http://www.w3.org/2000/xmlns/",fo=f2.xmlns;class _N extends RE{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ho(t,0,"svg",fo),this._svg.setAttributeNS(uxe,"xmlns",fo),this._svg.setAttributeNS(uxe,"xmlns:xlink",f2["xmlns:xlink"]),this._svg.setAttribute("version",f2.version),this._svg.setAttribute("class","marks"),Su(t,1),this._root=ho(this._svg,gw,"g",fo),Ep(this._root,SRe),Su(this._svg,gw+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ep(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ho(t,gw,"rect",fo),Ep(r,{width:this._width,height:this._height,fill:n}));const i=_Re(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Su(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=cu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,cxe(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,cxe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=cu[o],l=n.interactive===!1?"none":null,u=a.tag==="g",f=fxe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Su(f,0),n._svg;f.setAttribute("class",aRe(n));const c=bRe(n);for(const g in c)Ua(f,g,c[g]);u||Ua(f,"pointer-events",l),Ua(f,"clip-path",n.clip?Q8(this,n,n.group):null);let d=null,h=0;const p=g=>{const v=this.isDirty(g),x=fxe(g,f,d,a.tag,s);v&&(this._update(a,x,g),u&&pit(this,x,g,i)),d=x,++h};return a.nested?n.items.length&&p(n.items[0]):Fc(n,p),Su(f,h),f}_update(t,n,r){Ud=n,_a=n.__values__,vRe(__,r),t.attr(__,r,this);const i=git[t.type];i&&i.call(this,t,n,r),Ud&&this.style(Ud,r)}style(t,n){if(n!=null){for(const r in K3){let i=r==="font"?LE(n):n[r];if(i===_a[r])continue;const s=K3[r];i==null?t.removeAttribute(s):(Z8(i)&&(i=$Le(i,this._defs.gradient,ARe())),t.setAttribute(s,i+"")),_a[r]=i}for(const r in J3)$C(t,J3[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ho(t,gw+1,"defs",fo)),i=dit(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ho(t,gw+1,"defs",fo)),i=hit(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Su(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function cxe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function dit(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ho(e,n++,"pattern",fo);Ep(o,{id:z3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ho(o,0,"rect",fo),Ep(o,{width:1,height:1,fill:`url(${ARe()}#${t.id})`}),e=ho(e,n++,"radialGradient",fo),Ep(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ho(e,n++,"linearGradient",fo),Ep(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ho(e,r,"stop",fo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Su(e,r),n}function hit(e,t,n){let r;return e=ho(e,n,"clipPath",fo),e.setAttribute("id",t.id),t.path?(r=ho(e,0,"path",fo),r.setAttribute("d",t.path)):(r=ho(e,0,"rect",fo),Ep(r,{x:0,y:0,width:t.width,height:t.height})),Su(e,1),n+1}function pit(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Fc(n,o=>{i=e.mark(t,o,i,r),++s}),Su(t,1+s)}function fxe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=_p(o,r,fo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=_p(o,"path",fo);s.appendChild(a),a.__data__=e;const l=_p(o,"g",fo);s.appendChild(l),l.__data__=e;const u=_p(o,"path",fo);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||mit(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function mit(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ud=null,_a=null;const git={group(e,t,n){const r=Ud=t.childNodes[2];_a=r.__values__,e.foreground(__,n,this),_a=t.__values__,Ud=t.childNodes[1],e.content(__,n,this);const i=Ud=t.childNodes[0];e.background(__,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==_a.events&&(Ua(r,"pointer-events",s),Ua(i,"pointer-events",s),_a.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ua(r,"display",null),this.style(i,n),Ua(i,"stroke",null),o&&(n.fill=null),_a=r.__values__,this.style(r,n),o&&(n.fill=o),Ud=null}else Ua(r,"display","none")},image(e,t,n){n.smooth===!1?($C(t,"image-rendering","optimizeSpeed"),$C(t,"image-rendering","pixelated")):$C(t,"image-rendering",null)},text(e,t,n){const r=DE(n);let i,s,o,a;at(r)?(s=r.map(l=>Xp(n,l)),i=s.join(`
`),i!==_a.text&&(Su(t,0),o=t.ownerDocument,a=Yp(n),s.forEach((l,u)=>{const f=_p(o,"tspan",fo);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),_a.text=i)):(s=Xp(n,r),s!==_a.text&&(t.textContent=s,_a.text=s)),Ua(t,"font-family",LE(n)),Ua(t,"font-size",Zf(n)+"px"),Ua(t,"font-style",n.fontStyle),Ua(t,"font-variant",n.fontVariant),Ua(t,"font-weight",n.fontWeight)}};function __(e,t,n){t!==_a[e]&&(n?yit(Ud,e,t,n):Ua(Ud,e,t),_a[e]=t)}function $C(e,t,n){n!==_a[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),_a[t]=n)}function Ep(e,t){for(const n in t)Ua(e,n,t[n])}function Ua(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function yit(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function ARe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class CRe extends RE{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=wN();n.open("svg",rr({},f2,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",SRe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=cu[n.marktype],i=r.tag,s=[vRe,r.attr];t.open("g",{class:aRe(n),"clip-path":n.clip?Q8(this,n,n.group):null},bRe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=DE(a);if(at(u)){const f={x:0,dy:Yp(a)};for(let c=0;c<u.length;++c)t.open("tspan",c?f:null).text(Xp(a,u[c])).close()}else t.text(Xp(a,u))}else if(i==="g"){const u=a.strokeForeground,f=a.fill,c=a.stroke;u&&c&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Fc(a,d=>this.mark(t,d)),t.close(),u&&c?(f&&(a.fill=null),a.stroke=c,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Fc(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,f)=>{s[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&vit(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:z3+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function vit(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=LE(t),e["font-size"]=Zf(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in K3){let a=t[o];const l=K3[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Z8(a)&&(a=$Le(a,i.gradient,"")),e[l]=a)}for(const o in J3){const a=t[o];a!=null&&(s=s||[],s.push(`${J3[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const cc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function bit(e){cc.svgMarkTypes=e.svgMarkTypes??["text"],cc.svgOnTop=e.svgOnTop??!0,cc.debug=e.debug??!1}class N6 extends RE{constructor(t){super(t),this._svgRenderer=new _N(t),this._canvasRenderer=new Z3(t)}initialize(t,n,r,i,s){this._root_el=ho(t,0,"div");const o=ho(this._root_el,0,"div"),a=ho(this._root_el,1,"div");return this._root_el.style.position="relative",cc.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=cc.svgOnTop?a:o,this._canvasEl=cc.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return cc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!cc.svgMarkTypes.includes(s));this._svgRenderer.render(t,cc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return cc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class kRe extends FE{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ho(ho(t,0,"div"),cc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const TRe="canvas",DRe="hybrid",LRe="png",RRe="svg",FRe="none",Sp={Canvas:TRe,PNG:LRe,SVG:RRe,Hybrid:DRe,None:FRe},s0={};s0[TRe]=s0[LRe]={renderer:Z3,headless:Z3,handler:FE};s0[RRe]={renderer:_N,headless:CRe,handler:pRe};s0[DRe]={renderer:N6,headless:N6,handler:kRe};s0[FRe]={};function mL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(s0[e]=t,this):s0[e]}function ORe(e,t,n){const r=[],i=new Qs().union(t),s=e.marktype;return s?MRe(e,i,n,r):s==="group"?$Re(e,i,n,r):ot("Intersect scene must be mark node or group item.")}function MRe(e,t,n,r){if(xit(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)$Re(i[a],t,n,r);else for(const l=cu[s].isect;a<o;++a){const u=i[a];IRe(u,t,l)&&r.push(u)}}return r}function xit(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function $Re(e,t,n,r){n&&n(e.mark)&&IRe(e,t,cu.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)MRe(i[l],t,n,r);t.translate(o,a)}return r}function IRe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const PF=new Qs;function PRe(e){const t=e.clip;if(fr(t))t(kE(PF.clear()));else if(t)PF.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(PF)}const wit=1e-9;function EN(e,t,n){return e===t?!0:n==="path"?NRe(e,t):e instanceof Date&&t instanceof Date?+e==+t:li(e)&&li(t)?Math.abs(e-t)<=wit:!e||!t||!It(e)&&!It(t)?e==t:_it(e,t)}function NRe(e,t){return EN(c1(e),c1(t))}function _it(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!EN(e[i],t[i],i))return!1;return typeof e==typeof t}function Eit(){ULe(),Wtt()}const h1="top",mc="left",vc="right",Zp="bottom",Sit="top-left",Ait="top-right",Cit="bottom-left",kit="bottom-right",SN="start",B6="middle",qa="end",Tit="x",Dit="y",gL="group",AN="axis",CN="title",Lit="frame",Rit="scope",kN="legend",BRe="row-header",zRe="row-footer",jRe="row-title",URe="column-header",qRe="column-footer",HRe="column-title",Fit="padding",Oit="symbol",GRe="fit",VRe="fit-x",WRe="fit-y",Mit="pad",TN="none",bA="all",z6="each",DN="flush",Ap="column",Cp="row";function YRe(e){rt.call(this,null,e)}Lt(YRe,rt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=cu[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=xA(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===gL||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(xA(u,o))),r.role){case AN:case kN:case CN:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(xA(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(xA(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return PRe(r),t.modifies("bounds")}});function xA(e,t,n){return t(e.bounds.clear(),e,n)}const dxe=":vega_identifier:";function LN(e){rt.call(this,0,e)}LN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Lt(LN,rt,{transform(e,t){const n=$it(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function $it(e){return e._signals[dxe]||(e._signals[dxe]=e.add(0))}function XRe(e){rt.call(this,null,e)}Lt(XRe,rt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Iit(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===gL?aL:oL;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Iit(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function ZRe(e){rt.call(this,null,e)}const hxe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!KRe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},KRe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),pxe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(KRe(i,s=e[n].bounds,t))return!0},Pit=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Nit=(e,t,n)=>{var r=e.range(),i=new Qs;return t===h1||t===Zp?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},mxe=e=>(e.forEach(t=>t.opacity=1),e),gxe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Lt(ZRe,rt,{transform(e,t){const n=hxe[e.method]||hxe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(mxe(i),t=gxe(t,e)),t;if(i=i.filter(Pit),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=mxe(i),t=gxe(t,e),s.length>=3&&pxe(s,r)){do s=n(s,r);while(s.length>=3&&pxe(s,r));s.length<3&&!Hr(i).opacity&&(s.length>1&&(Hr(s).opacity=0),Hr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Nit(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function JRe(e){rt.call(this,null,e)}Lt(JRe,rt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const xa=new Qs;function yv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Bit(e){var t=e.items[0].orient;return t===mc||t===vc}function zit(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function jit(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=zit(s),u=i.range,f=i.offset,c=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,v=i.bounds,x=p&&dN(p),y=0,w=0,_,A;switch(xa.clear().union(v),v.clear(),(_=l[0])>-1&&v.union(i.items[_].bounds),(_=l[1])>-1&&v.union(i.items[_].bounds),a){case h1:y=c||0,w=-f,A=Math.max(d,Math.min(h,-v.y1)),v.add(0,-A).add(u,0),p&&wA(e,p,A,g,x,0,-1,v);break;case mc:y=-f,w=c||0,A=Math.max(d,Math.min(h,-v.x1)),v.add(-A,0).add(0,u),p&&wA(e,p,A,g,x,1,-1,v);break;case vc:y=n+f,w=c||0,A=Math.max(d,Math.min(h,v.x2)),v.add(0,0).add(A,u),p&&wA(e,p,A,g,x,1,1,v);break;case Zp:y=c||0,w=r+f,A=Math.max(d,Math.min(h,v.y2)),v.add(0,0).add(u,A),p&&wA(e,p,A,g,0,0,1,v);break;default:y=i.x,w=i.y}return yh(v.translate(y,w),i),yv(i,"x",y+o)|yv(i,"y",w+o)&&(i.bounds=xa,e.dirty(i),i.bounds=v,e.dirty(i)),i.mark.bounds.clear().union(v)}function wA(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let f=0,c=0;e.dirty(t),s?f=(t.x||0)-(t.x=u):c=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-c)),e.dirty(t)}a.union(l)}const yxe=(e,t)=>Math.floor(Math.min(e,t)),vxe=(e,t)=>Math.ceil(Math.max(e,t));function Uit(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===gL)switch(i.role){case AN:case kN:case CN:break;case BRe:o.rowheaders.push(...s);break;case zRe:o.rowfooters.push(...s);break;case URe:o.colheaders.push(...s);break;case qRe:o.colfooters.push(...s);break;case jRe:o.rowtitle=s[0];break;case HRe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function qit(e){return new Qs().set(0,0,e.width||0,e.height||0)}function Hit(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function us(e,t,n){const r=It(e)?e[t]:e;return r??(n!==void 0?n:0)}function bxe(e){return e<0?Math.ceil(-e):0}function QRe(e,t,n){var r=!n.nodirty,i=n.bounds===DN?qit:Hit,s=xa.set(0,0,0,0),o=us(n.align,Ap),a=us(n.align,Cp),l=us(n.padding,Ap),u=us(n.padding,Cp),f=n.columns||t.length,c=f<=0?1:Math.ceil(t.length/f),d=t.length,h=Array(d),p=Array(f),g=0,v=Array(d),x=Array(c),y=0,w=Array(d),_=Array(d),A=Array(d),T,D,k,R,O,B,K,L,$,I,U;for(D=0;D<f;++D)p[D]=0;for(D=0;D<c;++D)x[D]=0;for(D=0;D<d;++D)B=t[D],O=A[D]=i(B),B.x=B.x||0,w[D]=0,B.y=B.y||0,_[D]=0,k=D%f,R=~~(D/f),g=Math.max(g,K=Math.ceil(O.x2)),y=Math.max(y,L=Math.ceil(O.y2)),p[k]=Math.max(p[k],K),x[R]=Math.max(x[R],L),h[D]=l+bxe(O.x1),v[D]=u+bxe(O.y1),r&&e.dirty(t[D]);for(D=0;D<d;++D)D%f===0&&(h[D]=0),D<f&&(v[D]=0);if(o===z6)for(k=1;k<f;++k){for(U=0,D=k;D<d;D+=f)U<h[D]&&(U=h[D]);for(D=k;D<d;D+=f)h[D]=U+p[k-1]}else if(o===bA){for(U=0,D=0;D<d;++D)D%f&&U<h[D]&&(U=h[D]);for(D=0;D<d;++D)D%f&&(h[D]=U+g)}else for(o=!1,k=1;k<f;++k)for(D=k;D<d;D+=f)h[D]+=p[k-1];if(a===z6)for(R=1;R<c;++R){for(U=0,D=R*f,T=D+f;D<T;++D)U<v[D]&&(U=v[D]);for(D=R*f;D<T;++D)v[D]=U+x[R-1]}else if(a===bA){for(U=0,D=f;D<d;++D)U<v[D]&&(U=v[D]);for(D=f;D<d;++D)v[D]=U+y}else for(a=!1,R=1;R<c;++R)for(D=R*f,T=D+f;D<T;++D)v[D]+=x[R-1];for($=0,D=0;D<d;++D)$=h[D]+(D%f?$:0),w[D]+=$-t[D].x;for(k=0;k<f;++k)for(I=0,D=k;D<d;D+=f)I+=v[D],_[D]+=I-t[D].y;if(o&&us(n.center,Ap)&&c>1)for(D=0;D<d;++D)O=o===bA?g:p[D%f],$=O-A[D].x2-t[D].x-w[D],$>0&&(w[D]+=$/2);if(a&&us(n.center,Cp)&&f!==1)for(D=0;D<d;++D)O=a===bA?y:x[~~(D/f)],I=O-A[D].y2-t[D].y-_[D],I>0&&(_[D]+=I/2);for(D=0;D<d;++D)s.union(A[D].translate(w[D],_[D]));switch($=us(n.anchor,Tit),I=us(n.anchor,Dit),us(n.anchor,Ap)){case qa:$-=s.width();break;case B6:$-=s.width()/2}switch(us(n.anchor,Cp)){case qa:I-=s.height();break;case B6:I-=s.height()/2}for($=Math.round($),I=Math.round(I),s.clear(),D=0;D<d;++D)t[D].mark.bounds.clear();for(D=0;D<d;++D)B=t[D],B.x+=w[D]+=$,B.y+=_[D]+=I,s.union(B.mark.bounds.union(B.bounds.translate(w[D],_[D]))),r&&e.dirty(B);return s}function Git(e,t,n){var r=Uit(t),i=r.marks,s=n.bounds===DN?Vit:Wit,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,f,c,d,h,p,g,v;const x=QRe(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(g=us(n.headerBand,Cp,null),f=_A(e,r.rowheaders,i,a,l,-us(o,"rowHeader"),yxe,0,s,"x1",0,a,1,g)),r.colheaders&&(g=us(n.headerBand,Ap,null),c=_A(e,r.colheaders,i,a,a,-us(o,"columnHeader"),yxe,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=us(n.footerBand,Cp,null),d=_A(e,r.rowfooters,i,a,l,us(o,"rowFooter"),vxe,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=us(n.footerBand,Ap,null),h=_A(e,r.colfooters,i,a,a,us(o,"columnFooter"),vxe,1,s,"y2",u-a,1,a,g)),r.rowtitle&&(p=us(n.titleAnchor,Cp),v=us(o,"rowTitle"),v=p===qa?d+v:f-v,g=us(n.titleBand,Cp,.5),xxe(e,r.rowtitle,v,0,x,g)),r.coltitle&&(p=us(n.titleAnchor,Ap),v=us(o,"columnTitle"),v=p===qa?h+v:c-v,g=us(n.titleBand,Ap,.5),xxe(e,r.coltitle,v,1,x,g))}function Vit(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Wit(e,t){return e.bounds[t]}function _A(e,t,n,r,i,s,o,a,l,u,f,c,d,h){var p=n.length,g=0,v=0,x,y,w,_,A,T,D,k,R;if(!p)return g;for(x=f;x<p;x+=c)n[x]&&(g=o(g,l(n[x],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,y=0,_=t.length;y<_;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(x=f,y=0,_=t.length;y<_;++y,x+=c){for(T=t[y],A=T.mark.bounds,w=x;w>=0&&(D=n[w])==null;w-=d);a?(k=h==null?D.x:Math.round(D.bounds.x1+h*D.bounds.width()),R=g):(k=g,R=h==null?D.y:Math.round(D.bounds.y1+h*D.bounds.height())),A.union(T.bounds.translate(k-(T.x||0),R-(T.y||0))),T.x=k,T.y=R,e.dirty(T),v=o(v,A[u])}return v}function xxe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Yit(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Xit(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Zit(e,t,n,r,i,s,o){const a=Yit(n,t),l=Xit(e,a("offset",0)),u=a("anchor",SN),f=u===qa?1:u===B6?.5:0,c={align:z6,bounds:a("bounds",DN),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case mc:c.anchor={x:Math.floor(r.x1)-l,column:qa,y:f*(o||r.height()+2*r.y1),row:u};break;case vc:c.anchor={x:Math.ceil(r.x2)+l,y:f*(o||r.height()+2*r.y1),row:u};break;case h1:c.anchor={y:Math.floor(i.y1)-l,row:qa,x:f*(s||i.width()+2*i.x1),column:u};break;case Zp:c.anchor={y:Math.ceil(i.y2)+l,x:f*(s||i.width()+2*i.x1),column:u};break;case Sit:c.anchor={x:l,y:l};break;case Ait:c.anchor={x:s-l,y:l,column:qa};break;case Cit:c.anchor={x:l,y:o-l,row:qa};break;case kit:c.anchor={x:s-l,y:o-l,column:qa,row:qa};break}return c}function Kit(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Qit(e,n,n.items[0].items[0]),s=Jit(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===Oit&&est(n.items[0].items[0].items[0].items),i!==TN&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,yh(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function Jit(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Qit(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&yw(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,f=r-o.y;switch(o.orient){case mc:i+=Math.ceil(o.bounds.width())+l;break;case vc:case Zp:break;default:s+=o.bounds.height()+l}switch((i||s)&&yw(e,n,i,s),o.orient){case mc:f+=zy(t,n,o,a,1,1);break;case vc:u+=zy(t,n,o,qa,0,0)+l,f+=zy(t,n,o,a,1,1);break;case Zp:u+=zy(t,n,o,a,0,0),f+=zy(t,n,o,qa,-1,0,1)+l;break;default:u+=zy(t,n,o,a,0,0)}(u||f)&&yw(e,o,u,f),(u=Math.round(o.bounds.x1-r))<0&&(yw(e,n,-u,0),yw(e,o,-u,0))}}function zy(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,c=l&&s?f:0,d=l&&s?0:f,h=i<=0?0:dN(n);return Math.round(r===SN?c:r===qa?d-h:.5*(f-h))}function yw(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function est(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function tst(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,f=s.padding,c=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===mc||a===vc?r:n,p=0,g=0,v=0,x=0,y=0,w;if(o!==gL?a===mc?(p=i.y2,h=i.y1):a===vc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===mc&&(p=r,h=0),w=l===SN?p:l===qa?h:(p+h)/2,d&&d.text){switch(a){case h1:case Zp:y=c.bounds.height()+f;break;case mc:x=c.bounds.width()+f;break;case vc:x=-c.bounds.width()-f;break}xa.clear().union(d.bounds),xa.translate(x-(d.x||0),y-(d.y||0)),yv(d,"x",x)|yv(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(xa),d.mark.bounds.clear().union(xa),e.dirty(d)),xa.clear().union(d.bounds)}else xa.clear();switch(xa.union(c.bounds),a){case h1:g=w,v=i.y1-xa.height()-u;break;case mc:g=i.x1-xa.width()-u,v=w;break;case vc:g=i.x2+xa.width()+u,v=w;break;case Zp:g=w,v=i.y2+u;break;default:g=s.x,v=s.y}return yv(s,"x",g)|yv(s,"y",v)&&(xa.translate(g,v),e.dirty(s),s.bounds.clear().union(xa),t.bounds.clear().union(xa),e.dirty(s)),s.bounds}function eFe(e){rt.call(this,null,e)}Lt(eFe,rt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Git(n,r,e.layout),rst(n,r,e)}),nst(e.mark.group)?t.reflow():t}});function nst(e){return e&&e.mark.role!=="legend-entry"}function rst(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Qs().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],f,c,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(c=r[p],c.role){case AN:h=Bit(c)?a:l,h.union(jit(e,c,i,s));break;case CN:f=c;break;case kN:u.push(Kit(e,c));break;case Lit:case Rit:case BRe:case zRe:case jRe:case URe:case qRe:case HRe:a.union(c.bounds),l.union(c.bounds);break;default:o.union(c.bounds)}if(u.length){const v={};u.forEach(x=>{d=x.orient||vc,d!==TN&&(v[d]||(v[d]=[])).push(x)});for(const x in v){const y=v[x];QRe(e,y,Zit(y,x,n.legends,a,l,i,s))}u.forEach(x=>{const y=x.bounds;if(y.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=y,e.dirty(x)),n.autosize&&(n.autosize.type===GRe||n.autosize.type===VRe||n.autosize.type===WRe))switch(x.orient){case mc:case vc:o.add(y.x1,0).add(y.x2,0);break;case h1:case Zp:o.add(0,y.y1).add(0,y.y2)}else o.union(y)})}o.union(a).union(l),f&&o.union(tst(e,f,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),ist(e,t,o,n)}function ist(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),c=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===Fit){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===TN?(u=0,c=0,l=o,f=a):s===GRe?(l=Math.max(0,o-u-d),f=Math.max(0,a-c-h)):s===VRe?(l=Math.max(0,o-u-d),a=f+c+h):s===WRe?(o=l+u+d,f=Math.max(0,a-c-h)):s===Mit&&(o=l+u+d,a=f+c+h),e._resizeView(o,a,l,f,[u,c],i.resize)}const sst=Object.freeze(Object.defineProperty({__proto__:null,bound:YRe,identifier:LN,mark:XRe,overlap:ZRe,render:JRe,viewlayout:eFe},Symbol.toStringTag,{value:"Module"}));function tFe(e){rt.call(this,null,e)}Lt(tFe,rt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Y8(s,o,e.minstep),l=e.format||TLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?kLe(s,e.values,a):X8(s,a);return i&&(r.rem=i),i=u.map((f,c)=>yi({index:c/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(yi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function nFe(e){rt.call(this,null,e)}function ost(){return yi({})}function ast(e){const t=ib().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Lt(nFe,rt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||ost,s=e.key||_n,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ot("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=ast(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function rFe(e){rt.call(this,null,e)}Lt(rFe,rt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(c=>i[c]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||np,l=i.enter||np,u=i.exit||np,f=(s&&!o?i[s]:a)||np;if(t.changed(t.ADD)&&(t.visit(t.ADD,c=>{l(c,e),a(c,e)}),n.modifies(l.output),n.modifies(a.output),f!==np&&f!==a&&(t.visit(t.ADD,c=>{f(c,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==np&&(t.visit(t.REM,c=>{u(c,e)}),n.modifies(u.output)),o||f!==np){const c=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(c,d=>{const h=l(d,e)||r;(f(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(c,d=>{(f(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function iFe(e){rt.call(this,[],e)}Lt(iFe,rt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||kC,o=e.scale,a=+e.limit,l=Y8(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===kC,f=e.format||FLe(n,o,l,s,e.formatSpecifier,e.formatType,u),c=e.values||RLe(o,l),d,h,p,g,v;return i&&(r.rem=i),s===kC?(a&&c.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=c.slice(0,a-1),v=!0):i=c,fr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((x,y)=>Math.max(x,p(y,e)),0)):p=Fa(g=p||8),i=i.map((x,y)=>yi({index:y,label:f(x,y,i),value:x,offset:g,size:p(x,e)})),v&&(v=c[i.length],i.push(yi({index:i.length,label:`${c.length-i.length} entries`,value:v,offset:g,size:p(v,e)})))):s===Mtt?(d=o.domain(),h=SLe(o,d[0],Hr(d)),c.length<3&&!e.values&&d[0]!==Hr(d)&&(c=[d[0],Hr(d)]),i=c.map((x,y)=>yi({index:y,label:f(x,y,c),value:x,perc:h(x)}))):(p=c.length-1,h=Gtt(o),i=c.map((x,y)=>yi({index:y,label:f(x,y,c),value:x,perc:y?h(x):0,perc2:y===p?1:h(c[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const lst=e=>e.source.x,ust=e=>e.source.y,cst=e=>e.target.x,fst=e=>e.target.y;function RN(e){rt.call(this,{},e)}RN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Lt(RN,rt,{transform(e,t){var n=e.sourceX||lst,r=e.sourceY||ust,i=e.targetX||cst,s=e.targetY||fst,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=wxe.get(l+"-"+a)||wxe.get(l);return u||ot("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[o]=u(n(f),r(f),i(f),s(f))}),t.reflow(e.modified()).modifies(o)}});const sFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,dst=(e,t,n,r)=>sFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},hst=(e,t,n,r)=>oFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),aFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},pst=(e,t,n,r)=>aFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),mst=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,gst=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,yst=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},vst=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},bst=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},xst=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},wxe=ib({line:sFe,"line-radial":dst,arc:oFe,"arc-radial":hst,curve:aFe,"curve-radial":pst,"orthogonal-horizontal":mst,"orthogonal-vertical":gst,"orthogonal-radial":yst,"diagonal-horizontal":vst,"diagonal-vertical":bst,"diagonal-radial":xst});function FN(e){rt.call(this,null,e)}FN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Lt(FN,rt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||tb,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),f=u.length,c=o,d=(a-o)/d3e(u),h=Kl(f),p,g,v;for(e.sort&&h.sort((x,y)=>u[x]-u[y]),p=0;p<f;++p)v=u[h[p]],g=l[h[p]],g[r]=c,g[i]=c+=v*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const wst=5;function _st(e){const t=e.type;return!e.bins&&(t===a1||t===xE||t===wE)}function lFe(e){return G8(e)&&e!==Tf}const Est=Lc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function uFe(e){rt.call(this,null,e),this.modified(!0)}Lt(uFe,rt,{transform(e,t){var n=t.dataflow,r=this.value,i=Sst(e);(!r||i!==r.type)&&(this.value=r=ui(i)());for(i in e)if(!Est[i]){if(i==="padding"&&lFe(r.type))continue;fr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Lst(r,e,Dst(r,e,Cst(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Sst(e){var t=e.type,n="",r;return t===Tf?Tf+"-"+a1:(Ast(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Tf+"-":r===3?lb+"-":""),(n+t||a1).toLowerCase())}function Ast(e){const t=e.type;return G8(t)&&t!==r0&&t!==i0&&(e.scheme||e.range&&e.range.length&&e.range.every(zt))}function Cst(e,t,n){const r=kst(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&_st(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return lFe(s)&&t.padding&&i[0]!==Hr(i)&&(i=Tst(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(cFe(s,i,n)),s===j8&&e.unknown(t.domainImplicit?eje:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Y8(e,t.nice)||null),i.length}function kst(e,t,n){return t?(e.domain(cFe(e.type,t,n)),t.length):-1}function Tst(e,t,n,r,i,s){var o=Math.abs(Hr(n)-n[0]),a=o/(o-2*r),l=e===oh?TP(t,null,a):e===wE?F3(t,null,a,.5):e===xE?F3(t,null,a,i||1):e===tL?DP(t,null,a,s||1):kP(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function cFe(e,t,n){if(bLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Tt(t))}return t}function Dst(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Hr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||ot("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Kl(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===U8&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Lst(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Rst(r,t,n);else if(t.scheme&&(s=Fst(r,t,n),fr(s))){if(e.interpolator)return e.interpolator(s);ot(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&xLe(r))return e.interpolator(iL(j6(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(V8(t.interpolate,t.interpolateGamma)):fr(e.round)?e.round(i):fr(e.rangeRound)&&e.interpolate(i?gI:mI),s&&e.range(j6(s,t.reverse))}function Rst(e,t,n){e!==hLe&&e!==C6&&ot("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===C6?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*z8(n,i,r)]}function Fst(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=iL(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=W8(i),s||ot(`Unrecognized scheme name: ${t.scheme}`)),n=e===rL?n+1:e===U8?n-1:e===l1||e===nL?+t.schemeCount||wst:n,xLe(e)?_xe(s,r,t.reverse):fr(s)?ELe(_xe(s,r),n):e===j8?s:s.slice(0,n)}function _xe(e,t,n){return fr(e)&&(t||n)?_Le(e,j6(t||[0,1],n)):e}function j6(e,t){return t?e.slice().reverse():e}function fFe(e){rt.call(this,null,e)}Lt(fFe,rt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(O0(e.sort)),this.modified(n),t}});const Exe="zero",dFe="center",hFe="normalize",pFe=["y0","y1"];function ON(e){rt.call(this,null,e)}ON.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Exe,values:[Exe,dFe,hFe]},{name:"as",type:"string",array:!0,length:2,default:pFe}]};Lt(ON,rt,{transform(e,t){var n=e.as||pFe,r=n[0],i=n[1],s=O0(e.sort),o=e.field||tb,a=e.offset===dFe?Ost:e.offset===hFe?Mst:$st,l,u,f,c;for(l=Ist(t.source,e.groupby,s,o),u=0,f=l.length,c=l.max;u<f;++u)a(l[u],c,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Ost(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function Mst(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,f;l<a;++l)f=e[l],f[r]=o,f[i]=o=s*(u+=Math.abs(n(f)))}function $st(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,f;l<a;++l)f=e[l],u=+n(f),u<0?(f[r]=o,f[i]=o+=u):(f[r]=s,f[i]=s+=u)}function Ist(e,t,n,r){var i=[],s=g=>g(f),o,a,l,u,f,c,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)f=e[a],c=t.map(s),d=o[c],d||(o[c]=d=[],i.push(d)),d.push(f);for(c=0,p=0,u=i.length;c<u;++c){for(d=i[c],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Pst=Object.freeze(Object.defineProperty({__proto__:null,axisticks:tFe,datajoin:nFe,encode:rFe,legendentries:iFe,linkpath:RN,pie:FN,scale:uFe,sortitems:fFe,stack:ON},Symbol.toStringTag,{value:"Module"}));var kn=1e-6,Q3=1e-12,wr=Math.PI,Ls=wr/2,ek=wr/4,el=wr*2,Is=180/wr,gr=wr/180,Ur=Math.abs,cb=Math.atan,Bu=Math.atan2,Dn=Math.cos,EA=Math.ceil,mFe=Math.exp,U6=Math.hypot,tk=Math.log,NF=Math.pow,Sn=Math.sin,Du=Math.sign||function(e){return e>0?1:e<0?-1:0},tl=Math.sqrt,MN=Math.tan;function gFe(e){return e>1?0:e<-1?wr:Math.acos(e)}function Ml(e){return e>1?Ls:e<-1?-Ls:Math.asin(e)}function Jo(){}function nk(e,t){e&&Axe.hasOwnProperty(e.type)&&Axe[e.type](e,t)}var Sxe={Feature:function(e,t){nk(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)nk(n[r].geometry,t)}},Axe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){q6(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)q6(n[r],t,0)},Polygon:function(e,t){Cxe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cxe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)nk(n[r],t)}};function q6(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Cxe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)q6(e[n],t,1);t.polygonEnd()}function Pd(e,t){e&&Sxe.hasOwnProperty(e.type)?Sxe[e.type](e,t):nk(e,t)}var rk=new Ja,ik=new Ja,yFe,vFe,H6,G6,V6,zf={point:Jo,lineStart:Jo,lineEnd:Jo,polygonStart:function(){rk=new Ja,zf.lineStart=Nst,zf.lineEnd=Bst},polygonEnd:function(){var e=+rk;ik.add(e<0?el+e:e),this.lineStart=this.lineEnd=this.point=Jo},sphere:function(){ik.add(el)}};function Nst(){zf.point=zst}function Bst(){bFe(yFe,vFe)}function zst(e,t){zf.point=bFe,yFe=e,vFe=t,e*=gr,t*=gr,H6=e,G6=Dn(t=t/2+ek),V6=Sn(t)}function bFe(e,t){e*=gr,t*=gr,t=t/2+ek;var n=e-H6,r=n>=0?1:-1,i=r*n,s=Dn(t),o=Sn(t),a=V6*o,l=G6*s+a*Dn(i),u=a*r*Sn(i);rk.add(Bu(u,l)),H6=e,G6=s,V6=o}function jst(e){return ik=new Ja,Pd(e,zf),ik*2}function sk(e){return[Bu(e[1],e[0]),Ml(e[2])]}function o0(e){var t=e[0],n=e[1],r=Dn(n);return[r*Dn(t),r*Sn(t),Sn(n)]}function SA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function p1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function BF(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function AA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ok(e){var t=tl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var gs,_l,Cs,Wl,Ag,xFe,wFe,Lv,E_,lp,ah,Od={point:W6,lineStart:kxe,lineEnd:Txe,polygonStart:function(){Od.point=EFe,Od.lineStart=Ust,Od.lineEnd=qst,E_=new Ja,zf.polygonStart()},polygonEnd:function(){zf.polygonEnd(),Od.point=W6,Od.lineStart=kxe,Od.lineEnd=Txe,rk<0?(gs=-(Cs=180),_l=-(Wl=90)):E_>kn?Wl=90:E_<-kn&&(_l=-90),ah[0]=gs,ah[1]=Cs},sphere:function(){gs=-(Cs=180),_l=-(Wl=90)}};function W6(e,t){lp.push(ah=[gs=e,Cs=e]),t<_l&&(_l=t),t>Wl&&(Wl=t)}function _Fe(e,t){var n=o0([e*gr,t*gr]);if(Lv){var r=p1(Lv,n),i=[r[1],-r[0],0],s=p1(i,r);ok(s),s=sk(s);var o=e-Ag,a=o>0?1:-1,l=s[0]*Is*a,u,f=Ur(o)>180;f^(a*Ag<l&&l<a*e)?(u=s[1]*Is,u>Wl&&(Wl=u)):(l=(l+360)%360-180,f^(a*Ag<l&&l<a*e)?(u=-s[1]*Is,u<_l&&(_l=u)):(t<_l&&(_l=t),t>Wl&&(Wl=t))),f?e<Ag?Gl(gs,e)>Gl(gs,Cs)&&(Cs=e):Gl(e,Cs)>Gl(gs,Cs)&&(gs=e):Cs>=gs?(e<gs&&(gs=e),e>Cs&&(Cs=e)):e>Ag?Gl(gs,e)>Gl(gs,Cs)&&(Cs=e):Gl(e,Cs)>Gl(gs,Cs)&&(gs=e)}else lp.push(ah=[gs=e,Cs=e]);t<_l&&(_l=t),t>Wl&&(Wl=t),Lv=n,Ag=e}function kxe(){Od.point=_Fe}function Txe(){ah[0]=gs,ah[1]=Cs,Od.point=W6,Lv=null}function EFe(e,t){if(Lv){var n=e-Ag;E_.add(Ur(n)>180?n+(n>0?360:-360):n)}else xFe=e,wFe=t;zf.point(e,t),_Fe(e,t)}function Ust(){zf.lineStart()}function qst(){EFe(xFe,wFe),zf.lineEnd(),Ur(E_)>kn&&(gs=-(Cs=180)),ah[0]=gs,ah[1]=Cs,Lv=null}function Gl(e,t){return(t-=e)<0?t+360:t}function Hst(e,t){return e[0]-t[0]}function Dxe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Gst(e){var t,n,r,i,s,o,a;if(Wl=Cs=-(gs=_l=1/0),lp=[],Pd(e,Od),n=lp.length){for(lp.sort(Hst),t=1,r=lp[0],s=[r];t<n;++t)i=lp[t],Dxe(r,i[0])||Dxe(r,i[1])?(Gl(r[0],i[1])>Gl(r[0],r[1])&&(r[1]=i[1]),Gl(i[0],r[1])>Gl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Gl(r[1],i[0]))>o&&(o=a,gs=i[0],Cs=r[1])}return lp=ah=null,gs===1/0||_l===1/0?[[NaN,NaN],[NaN,NaN]]:[[gs,_l],[Cs,Wl]]}var Ww,ak,lk,uk,ck,fk,dk,hk,Y6,X6,Z6,SFe,AFe,Ha,Ga,Va,bc={sphere:Jo,point:$N,lineStart:Lxe,lineEnd:Rxe,polygonStart:function(){bc.lineStart=Yst,bc.lineEnd=Xst},polygonEnd:function(){bc.lineStart=Lxe,bc.lineEnd=Rxe}};function $N(e,t){e*=gr,t*=gr;var n=Dn(t);OE(n*Dn(e),n*Sn(e),Sn(t))}function OE(e,t,n){++Ww,lk+=(e-lk)/Ww,uk+=(t-uk)/Ww,ck+=(n-ck)/Ww}function Lxe(){bc.point=Vst}function Vst(e,t){e*=gr,t*=gr;var n=Dn(t);Ha=n*Dn(e),Ga=n*Sn(e),Va=Sn(t),bc.point=Wst,OE(Ha,Ga,Va)}function Wst(e,t){e*=gr,t*=gr;var n=Dn(t),r=n*Dn(e),i=n*Sn(e),s=Sn(t),o=Bu(tl((o=Ga*s-Va*i)*o+(o=Va*r-Ha*s)*o+(o=Ha*i-Ga*r)*o),Ha*r+Ga*i+Va*s);ak+=o,fk+=o*(Ha+(Ha=r)),dk+=o*(Ga+(Ga=i)),hk+=o*(Va+(Va=s)),OE(Ha,Ga,Va)}function Rxe(){bc.point=$N}function Yst(){bc.point=Zst}function Xst(){CFe(SFe,AFe),bc.point=$N}function Zst(e,t){SFe=e,AFe=t,e*=gr,t*=gr,bc.point=CFe;var n=Dn(t);Ha=n*Dn(e),Ga=n*Sn(e),Va=Sn(t),OE(Ha,Ga,Va)}function CFe(e,t){e*=gr,t*=gr;var n=Dn(t),r=n*Dn(e),i=n*Sn(e),s=Sn(t),o=Ga*s-Va*i,a=Va*r-Ha*s,l=Ha*i-Ga*r,u=U6(o,a,l),f=Ml(u),c=u&&-f/u;Y6.add(c*o),X6.add(c*a),Z6.add(c*l),ak+=f,fk+=f*(Ha+(Ha=r)),dk+=f*(Ga+(Ga=i)),hk+=f*(Va+(Va=s)),OE(Ha,Ga,Va)}function Kst(e){Ww=ak=lk=uk=ck=fk=dk=hk=0,Y6=new Ja,X6=new Ja,Z6=new Ja,Pd(e,bc);var t=+Y6,n=+X6,r=+Z6,i=U6(t,n,r);return i<Q3&&(t=fk,n=dk,r=hk,ak<kn&&(t=lk,n=uk,r=ck),i=U6(t,n,r),i<Q3)?[NaN,NaN]:[Bu(n,t)*Is,Ml(r/i)*Is]}function K6(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function J6(e,t){return Ur(e)>wr&&(e-=Math.round(e/el)*el),[e,t]}J6.invert=J6;function kFe(e,t,n){return(e%=el)?t||n?K6(Oxe(e),Mxe(t,n)):Oxe(e):t||n?Mxe(t,n):J6}function Fxe(e){return function(t,n){return t+=e,Ur(t)>wr&&(t-=Math.round(t/el)*el),[t,n]}}function Oxe(e){var t=Fxe(e);return t.invert=Fxe(-e),t}function Mxe(e,t){var n=Dn(e),r=Sn(e),i=Dn(t),s=Sn(t);function o(a,l){var u=Dn(l),f=Dn(a)*u,c=Sn(a)*u,d=Sn(l),h=d*n+f*r;return[Bu(c*i-h*s,f*n-d*r),Ml(h*i+c*s)]}return o.invert=function(a,l){var u=Dn(l),f=Dn(a)*u,c=Sn(a)*u,d=Sn(l),h=d*i-c*s;return[Bu(c*i+d*s,f*n+h*r),Ml(h*n-f*r)]},o}function Jst(e){e=kFe(e[0]*gr,e[1]*gr,e.length>2?e[2]*gr:0);function t(n){return n=e(n[0]*gr,n[1]*gr),n[0]*=Is,n[1]*=Is,n}return t.invert=function(n){return n=e.invert(n[0]*gr,n[1]*gr),n[0]*=Is,n[1]*=Is,n},t}function Qst(e,t,n,r,i,s){if(n){var o=Dn(t),a=Sn(t),l=r*n;i==null?(i=t+r*el,s=t-l/2):(i=$xe(o,i),s=$xe(o,s),(r>0?i<s:i>s)&&(i+=r*el));for(var u,f=i;r>0?f>s:f<s;f-=l)u=sk([o,-a*Dn(f),-a*Sn(f)]),e.point(u[0],u[1])}}function $xe(e,t){t=o0(t),t[0]-=e,ok(t);var n=gFe(-t[1]);return((-t[2]<0?-n:n)+el-kn)%el}function TFe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Jo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function IC(e,t){return Ur(e[0]-t[0])<kn&&Ur(e[1]-t[1])<kn}function CA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function DFe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],x=p[g],y;if(IC(v,x)){if(!v[2]&&!x[2]){for(i.lineStart(),a=0;a<g;++a)i.point((v=p[a])[0],v[1]);i.lineEnd();return}x[0]+=2*kn}s.push(y=new CA(v,p,null,!0)),o.push(y.o=new CA(v,null,y,!1)),s.push(y=new CA(x,p,null,!1)),o.push(y.o=new CA(x,null,y,!0))}}),!!s.length){for(o.sort(t),Ixe(s),Ixe(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],f,c;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=f.length;a<l;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Ixe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function zF(e){return Ur(e[0])<=wr?e[0]:Du(e[0])*((Ur(e[0])+wr)%el-wr)}function eot(e,t){var n=zF(t),r=t[1],i=Sn(r),s=[Sn(n),-Dn(n),0],o=0,a=0,l=new Ja;i===1?r=Ls+kn:i===-1&&(r=-Ls-kn);for(var u=0,f=e.length;u<f;++u)if(d=(c=e[u]).length)for(var c,d,h=c[d-1],p=zF(h),g=h[1]/2+ek,v=Sn(g),x=Dn(g),y=0;y<d;++y,p=_,v=T,x=D,h=w){var w=c[y],_=zF(w),A=w[1]/2+ek,T=Sn(A),D=Dn(A),k=_-p,R=k>=0?1:-1,O=R*k,B=O>wr,K=v*T;if(l.add(Bu(K*R*Sn(O),x*D+K*Dn(O))),o+=B?k+R*el:k,B^p>=n^_>=n){var L=p1(o0(h),o0(w));ok(L);var $=p1(s,L);ok($);var I=(B^k>=0?-1:1)*Ml($[2]);(r>I||r===I&&(L[0]||L[1]))&&(a+=B^k>=0?1:-1)}}return(o<-kn||o<kn&&l<-Q3)^a&1}function LFe(e,t,n,r){return function(i){var s=t(i),o=TFe(),a=t(o),l=!1,u,f,c,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=x,d.lineStart=y,d.lineEnd=w,f=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,f=f3e(f);var _=eot(u,r);f.length?(l||(i.polygonStart(),l=!0),DFe(f,not,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,A){e(_,A)&&i.point(_,A)}function p(_,A){s.point(_,A)}function g(){d.point=p,s.lineStart()}function v(){d.point=h,s.lineEnd()}function x(_,A){c.push([_,A]),a.point(_,A)}function y(){a.lineStart(),c=[]}function w(){x(c[0][0],c[0][1]),a.lineEnd();var _=a.clean(),A=o.result(),T,D=A.length,k,R,O;if(c.pop(),u.push(c),c=null,!!D){if(_&1){if(R=A[0],(k=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),T=0;T<k;++T)i.point((O=R[T])[0],O[1]);i.lineEnd()}return}D>1&&_&2&&A.push(A.pop().concat(A.shift())),f.push(A.filter(tot))}}return d}}function tot(e){return e.length>1}function not(e,t){return((e=e.x)[0]<0?e[1]-Ls-kn:Ls-e[1])-((t=t.x)[0]<0?t[1]-Ls-kn:Ls-t[1])}const Pxe=LFe(function(){return!0},rot,sot,[-wr,-Ls]);function rot(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?wr:-wr,l=Ur(s-t);Ur(l-wr)<kn?(e.point(t,n=(n+o)/2>0?Ls:-Ls),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=wr&&(Ur(t-r)<kn&&(t-=r*kn),Ur(s-a)<kn&&(s-=a*kn),n=iot(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function iot(e,t,n,r){var i,s,o=Sn(e-n);return Ur(o)>kn?cb((Sn(t)*(s=Dn(r))*Sn(n)-Sn(r)*(i=Dn(t))*Sn(e))/(i*s*o)):(t+r)/2}function sot(e,t,n,r){var i;if(e==null)i=n*Ls,r.point(-wr,i),r.point(0,i),r.point(wr,i),r.point(wr,0),r.point(wr,-i),r.point(0,-i),r.point(-wr,-i),r.point(-wr,0),r.point(-wr,i);else if(Ur(e[0]-t[0])>kn){var s=e[0]<t[0]?wr:-wr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function oot(e){var t=Dn(e),n=2*gr,r=t>0,i=Ur(t)>kn;function s(f,c,d,h){Qst(h,e,n,d,f,c)}function o(f,c){return Dn(f)*Dn(c)>t}function a(f){var c,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,x){var y=[v,x],w,_=o(v,x),A=r?_?0:u(v,x):_?u(v+(v<0?wr:-wr),x):0;if(!c&&(p=h=_)&&f.lineStart(),_!==h&&(w=l(c,y),(!w||IC(c,w)||IC(y,w))&&(y[2]=1)),_!==h)g=0,_?(f.lineStart(),w=l(y,c),f.point(w[0],w[1])):(w=l(c,y),f.point(w[0],w[1],2),f.lineEnd()),c=w;else if(i&&c&&r^_){var T;!(A&d)&&(T=l(y,c,!0))&&(g=0,r?(f.lineStart(),f.point(T[0][0],T[0][1]),f.point(T[1][0],T[1][1]),f.lineEnd()):(f.point(T[1][0],T[1][1]),f.lineEnd(),f.lineStart(),f.point(T[0][0],T[0][1],3)))}_&&(!c||!IC(c,y))&&f.point(y[0],y[1]),c=y,h=_,d=A},lineEnd:function(){h&&f.lineEnd(),c=null},clean:function(){return g|(p&&h)<<1}}}function l(f,c,d){var h=o0(f),p=o0(c),g=[1,0,0],v=p1(h,p),x=SA(v,v),y=v[0],w=x-y*y;if(!w)return!d&&f;var _=t*x/w,A=-t*y/w,T=p1(g,v),D=AA(g,_),k=AA(v,A);BF(D,k);var R=T,O=SA(D,R),B=SA(R,R),K=O*O-B*(SA(D,D)-1);if(!(K<0)){var L=tl(K),$=AA(R,(-O-L)/B);if(BF($,D),$=sk($),!d)return $;var I=f[0],U=c[0],q=f[1],Y=c[1],X;U<I&&(X=I,I=U,U=X);var te=U-I,le=Ur(te-wr)<kn,ee=le||te<kn;if(!le&&Y<q&&(X=q,q=Y,Y=X),ee?le?q+Y>0^$[1]<(Ur($[0]-I)<kn?q:Y):q<=$[1]&&$[1]<=Y:te>wr^(I<=$[0]&&$[0]<=U)){var z=AA(R,(-O+L)/B);return BF(z,D),[$,sk(z)]}}}function u(f,c){var d=r?e:wr-e,h=0;return f<-d?h|=1:f>d&&(h|=2),c<-d?h|=4:c>d&&(h|=8),h}return LFe(o,a,s,r?[0,-e]:[-wr,e-wr])}function aot(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],f=0,c=1,d=l-o,h=u-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<f)return;p<c&&(c=p)}else if(d>0){if(p>c)return;p>f&&(f=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>c)return;p>f&&(f=p)}else if(d>0){if(p<f)return;p<c&&(c=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<f)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>f&&(f=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>f&&(f=p)}else if(h>0){if(p<f)return;p<c&&(c=p)}return f>0&&(e[0]=o+f*d,e[1]=a+f*h),c<1&&(t[0]=o+c*d,t[1]=a+c*h),!0}}}}}var Yw=1e9,kA=-Yw;function RFe(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function s(u,f,c,d){var h=0,p=0;if(u==null||(h=o(u,c))!==(p=o(f,c))||l(u,f)<0^c>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+c+4)%4)!==p);else d.point(f[0],f[1])}function o(u,f){return Ur(u[0]-e)<kn?f>0?0:3:Ur(u[0]-n)<kn?f>0?2:1:Ur(u[1]-t)<kn?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var c=o(u,1),d=o(f,1);return c!==d?c-d:c===0?f[1]-u[1]:c===1?u[0]-f[0]:c===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,c=TFe(),d,h,p,g,v,x,y,w,_,A,T,D={point:k,lineStart:K,lineEnd:L,polygonStart:O,polygonEnd:B};function k(I,U){i(I,U)&&f.point(I,U)}function R(){for(var I=0,U=0,q=h.length;U<q;++U)for(var Y=h[U],X=1,te=Y.length,le=Y[0],ee,z,he=le[0],de=le[1];X<te;++X)ee=he,z=de,le=Y[X],he=le[0],de=le[1],z<=r?de>r&&(he-ee)*(r-z)>(de-z)*(e-ee)&&++I:de<=r&&(he-ee)*(r-z)<(de-z)*(e-ee)&&--I;return I}function O(){f=c,d=[],h=[],T=!0}function B(){var I=R(),U=T&&I,q=(d=f3e(d)).length;(U||q)&&(u.polygonStart(),U&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),q&&DFe(d,a,I,s,u),u.polygonEnd()),f=u,d=h=p=null}function K(){D.point=$,h&&h.push(p=[]),A=!0,_=!1,y=w=NaN}function L(){d&&($(g,v),x&&_&&c.rejoin(),d.push(c.result())),D.point=k,_&&f.lineEnd()}function $(I,U){var q=i(I,U);if(h&&p.push([I,U]),A)g=I,v=U,x=q,A=!1,q&&(f.lineStart(),f.point(I,U));else if(q&&_)f.point(I,U);else{var Y=[y=Math.max(kA,Math.min(Yw,y)),w=Math.max(kA,Math.min(Yw,w))],X=[I=Math.max(kA,Math.min(Yw,I)),U=Math.max(kA,Math.min(Yw,U))];aot(Y,X,e,t,n,r)?(_||(f.lineStart(),f.point(Y[0],Y[1])),f.point(X[0],X[1]),q||f.lineEnd(),T=!1):q&&(f.lineStart(),f.point(I,U),T=!1)}y=I,w=U,_=q}return D}}function Nxe(e,t,n){var r=Kl(e,t-kn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Bxe(e,t,n){var r=Kl(e,t-kn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function lot(){var e,t,n,r,i,s,o,a,l=10,u=l,f=90,c=360,d,h,p,g,v=2.5;function x(){return{type:"MultiLineString",coordinates:y()}}function y(){return Kl(EA(r/f)*f,n,f).map(p).concat(Kl(EA(a/c)*c,o,c).map(g)).concat(Kl(EA(t/l)*l,e,l).filter(function(w){return Ur(w%f)>kn}).map(d)).concat(Kl(EA(s/u)*u,i,u).filter(function(w){return Ur(w%c)>kn}).map(h))}return x.lines=function(){return y().map(function(w){return{type:"LineString",coordinates:w}})},x.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},x.extent=function(w){return arguments.length?x.extentMajor(w).extentMinor(w):x.extentMinor()},x.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),x.precision(v)):[[r,a],[n,o]]},x.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),x.precision(v)):[[t,s],[e,i]]},x.step=function(w){return arguments.length?x.stepMajor(w).stepMinor(w):x.stepMinor()},x.stepMajor=function(w){return arguments.length?(f=+w[0],c=+w[1],x):[f,c]},x.stepMinor=function(w){return arguments.length?(l=+w[0],u=+w[1],x):[l,u]},x.precision=function(w){return arguments.length?(v=+w,d=Nxe(s,i,90),h=Bxe(t,e,v),p=Nxe(a,o,90),g=Bxe(r,n,v),x):v},x.extentMajor([[-180,-90+kn],[180,90-kn]]).extentMinor([[-180,-80-kn],[180,80+kn]])}const d2=e=>e;var jF=new Ja,Q6=new Ja,FFe,OFe,e5,t5,Nd={point:Jo,lineStart:Jo,lineEnd:Jo,polygonStart:function(){Nd.lineStart=uot,Nd.lineEnd=fot},polygonEnd:function(){Nd.lineStart=Nd.lineEnd=Nd.point=Jo,jF.add(Ur(Q6)),Q6=new Ja},result:function(){var e=jF/2;return jF=new Ja,e}};function uot(){Nd.point=cot}function cot(e,t){Nd.point=MFe,FFe=e5=e,OFe=t5=t}function MFe(e,t){Q6.add(t5*e-e5*t),e5=e,t5=t}function fot(){MFe(FFe,OFe)}var m1=1/0,pk=m1,h2=-m1,mk=h2,gk={point:dot,lineStart:Jo,lineEnd:Jo,polygonStart:Jo,polygonEnd:Jo,result:function(){var e=[[m1,pk],[h2,mk]];return h2=mk=-(pk=m1=1/0),e}};function dot(e,t){e<m1&&(m1=e),e>h2&&(h2=e),t<pk&&(pk=t),t>mk&&(mk=t)}var n5=0,r5=0,Xw=0,yk=0,vk=0,vv=0,i5=0,s5=0,Zw=0,$Fe,IFe,xf,wf,Au={point:a0,lineStart:zxe,lineEnd:jxe,polygonStart:function(){Au.lineStart=mot,Au.lineEnd=got},polygonEnd:function(){Au.point=a0,Au.lineStart=zxe,Au.lineEnd=jxe},result:function(){var e=Zw?[i5/Zw,s5/Zw]:vv?[yk/vv,vk/vv]:Xw?[n5/Xw,r5/Xw]:[NaN,NaN];return n5=r5=Xw=yk=vk=vv=i5=s5=Zw=0,e}};function a0(e,t){n5+=e,r5+=t,++Xw}function zxe(){Au.point=hot}function hot(e,t){Au.point=pot,a0(xf=e,wf=t)}function pot(e,t){var n=e-xf,r=t-wf,i=tl(n*n+r*r);yk+=i*(xf+e)/2,vk+=i*(wf+t)/2,vv+=i,a0(xf=e,wf=t)}function jxe(){Au.point=a0}function mot(){Au.point=yot}function got(){PFe($Fe,IFe)}function yot(e,t){Au.point=PFe,a0($Fe=xf=e,IFe=wf=t)}function PFe(e,t){var n=e-xf,r=t-wf,i=tl(n*n+r*r);yk+=i*(xf+e)/2,vk+=i*(wf+t)/2,vv+=i,i=wf*e-xf*t,i5+=i*(xf+e),s5+=i*(wf+t),Zw+=i*3,a0(xf=e,wf=t)}function NFe(e){this._context=e}NFe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,el);break}}},result:Jo};var o5=new Ja,UF,BFe,zFe,Kw,Jw,p2={point:Jo,lineStart:function(){p2.point=vot},lineEnd:function(){UF&&jFe(BFe,zFe),p2.point=Jo},polygonStart:function(){UF=!0},polygonEnd:function(){UF=null},result:function(){var e=+o5;return o5=new Ja,e}};function vot(e,t){p2.point=jFe,BFe=Kw=e,zFe=Jw=t}function jFe(e,t){Kw-=e,Jw-=t,o5.add(tl(Kw*Kw+Jw*Jw)),Kw=e,Jw=t}let Uxe,bk,qxe,Hxe;class Gxe{constructor(t){this._append=t==null?UFe:bot(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==qxe||this._append!==bk){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,qxe=r,bk=this._append,Hxe=this._,this._=i}this._+=Hxe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function UFe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bot(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return UFe;if(t!==Uxe){const n=10**t;Uxe=t,bk=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return bk}function qFe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Pd(a,i(s))),s.result()}return o.area=function(a){return Pd(a,i(Nd)),Nd.result()},o.measure=function(a){return Pd(a,i(p2)),p2.result()},o.bounds=function(a){return Pd(a,i(gk)),gk.result()},o.centroid=function(a){return Pd(a,i(Au)),Au.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,d2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Gxe(n)):new NFe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new Gxe(n)),o},o.projection(e).digits(n).context(t)}function yL(e){return function(t){var n=new a5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function a5(){}a5.prototype={constructor:a5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function IN(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Pd(n,e.stream(gk)),t(gk.result()),r!=null&&e.clipExtent(r),e}function vL(e,t,n){return IN(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function PN(e,t,n){return vL(e,[[0,0],t],n)}function NN(e,t,n){return IN(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function BN(e,t,n){return IN(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Vxe=16,xot=Dn(30*gr);function Wxe(e,t){return+t?_ot(e,t):wot(e)}function wot(e){return yL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function _ot(e,t){function n(r,i,s,o,a,l,u,f,c,d,h,p,g,v){var x=u-r,y=f-i,w=x*x+y*y;if(w>4*t&&g--){var _=o+d,A=a+h,T=l+p,D=tl(_*_+A*A+T*T),k=Ml(T/=D),R=Ur(Ur(T)-1)<kn||Ur(s-c)<kn?(s+c)/2:Bu(A,_),O=e(R,k),B=O[0],K=O[1],L=B-r,$=K-i,I=y*L-x*$;(I*I/w>t||Ur((x*L+y*$)/w-.5)>.3||o*d+a*h+l*p<xot)&&(n(r,i,s,o,a,l,B,K,R,_/=D,A/=D,T,g,v),v.point(B,K),n(B,K,R,_,A,T,u,f,c,d,h,p,g,v))}}return function(r){var i,s,o,a,l,u,f,c,d,h,p,g,v={point:x,lineStart:y,lineEnd:_,polygonStart:function(){r.polygonStart(),v.lineStart=A},polygonEnd:function(){r.polygonEnd(),v.lineStart=y}};function x(k,R){k=e(k,R),r.point(k[0],k[1])}function y(){c=NaN,v.point=w,r.lineStart()}function w(k,R){var O=o0([k,R]),B=e(k,R);n(c,d,f,h,p,g,c=B[0],d=B[1],f=k,h=O[0],p=O[1],g=O[2],Vxe,r),r.point(c,d)}function _(){v.point=x,r.lineEnd()}function A(){y(),v.point=T,v.lineEnd=D}function T(k,R){w(i=k,R),s=c,o=d,a=h,l=p,u=g,v.point=w}function D(){n(c,d,f,h,p,g,s,o,i,a,l,u,Vxe,r),v.lineEnd=_,_()}return v}}var Eot=yL({point:function(e,t){this.stream.point(e*gr,t*gr)}});function Sot(e){return yL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Aot(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Yxe(e,t,n,r,i,s){if(!s)return Aot(e,t,n,r,i);var o=Dn(s),a=Sn(s),l=o*e,u=a*e,f=o/e,c=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,v){return g*=r,v*=i,[l*g-u*v+t,n-u*g-l*v]}return p.invert=function(g,v){return[r*(f*g-c*v+d),i*(h-c*g-f*v)]},p}function Kf(e){return HFe(function(){return e})()}function HFe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,f,c=0,d=1,h=1,p=null,g=Pxe,v=null,x,y,w,_=d2,A=.5,T,D,k,R,O;function B(I){return k(I[0]*gr,I[1]*gr)}function K(I){return I=k.invert(I[0],I[1]),I&&[I[0]*Is,I[1]*Is]}B.stream=function(I){return R&&O===I?R:R=Eot(Sot(f)(g(T(_(O=I)))))},B.preclip=function(I){return arguments.length?(g=I,p=void 0,$()):g},B.postclip=function(I){return arguments.length?(_=I,v=x=y=w=null,$()):_},B.clipAngle=function(I){return arguments.length?(g=+I?oot(p=I*gr):(p=null,Pxe),$()):p*Is},B.clipExtent=function(I){return arguments.length?(_=I==null?(v=x=y=w=null,d2):RFe(v=+I[0][0],x=+I[0][1],y=+I[1][0],w=+I[1][1]),$()):v==null?null:[[v,x],[y,w]]},B.scale=function(I){return arguments.length?(n=+I,L()):n},B.translate=function(I){return arguments.length?(r=+I[0],i=+I[1],L()):[r,i]},B.center=function(I){return arguments.length?(s=I[0]%360*gr,o=I[1]%360*gr,L()):[s*Is,o*Is]},B.rotate=function(I){return arguments.length?(a=I[0]%360*gr,l=I[1]%360*gr,u=I.length>2?I[2]%360*gr:0,L()):[a*Is,l*Is,u*Is]},B.angle=function(I){return arguments.length?(c=I%360*gr,L()):c*Is},B.reflectX=function(I){return arguments.length?(d=I?-1:1,L()):d<0},B.reflectY=function(I){return arguments.length?(h=I?-1:1,L()):h<0},B.precision=function(I){return arguments.length?(T=Wxe(D,A=I*I),$()):tl(A)},B.fitExtent=function(I,U){return vL(B,I,U)},B.fitSize=function(I,U){return PN(B,I,U)},B.fitWidth=function(I,U){return NN(B,I,U)},B.fitHeight=function(I,U){return BN(B,I,U)};function L(){var I=Yxe(n,0,0,d,h,c).apply(null,t(s,o)),U=Yxe(n,r-I[0],i-I[1],d,h,c);return f=kFe(a,l,u),D=K6(t,U),k=K6(f,D),T=Wxe(D,A),$()}function $(){return R=O=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&K,L()}}function zN(e){var t=0,n=wr/3,r=HFe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*gr,n=s[1]*gr):[t*Is,n*Is]},i}function Cot(e){var t=Dn(e);function n(r,i){return[r*t,Sn(i)/t]}return n.invert=function(r,i){return[r/t,Ml(i*t)]},n}function kot(e,t){var n=Sn(e),r=(n+Sn(t))/2;if(Ur(r)<kn)return Cot(e);var i=1+n*(2*r-n),s=tl(i)/r;function o(a,l){var u=tl(i-2*r*Sn(l))/r;return[u*Sn(a*=r),s-u*Dn(a)]}return o.invert=function(a,l){var u=s-l,f=Bu(a,Ur(u))*Du(u);return u*r<0&&(f-=wr*Du(a)*Du(u)),[f/r,Ml((i-(a*a+u*u)*r*r)/(2*r))]},o}function xk(){return zN(kot).scale(155.424).center([0,33.6442])}function GFe(){return xk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tot(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Dot(){var e,t,n=GFe(),r,i=xk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=xk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function f(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}f.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},f.stream=function(d){return e&&t===d?e:e=Tot([n.stream(t=d),i.stream(d),o.stream(d)])},f.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),c()):n.precision()},f.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),f.translate(n.translate())):n.scale()},f.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+kn,g+.12*h+kn],[p-.214*h-kn,g+.234*h-kn]]).stream(u),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+kn,g+.166*h+kn],[p-.115*h-kn,g+.234*h-kn]]).stream(u),c()},f.fitExtent=function(d,h){return vL(f,d,h)},f.fitSize=function(d,h){return PN(f,d,h)},f.fitWidth=function(d,h){return NN(f,d,h)},f.fitHeight=function(d,h){return BN(f,d,h)};function c(){return e=t=null,f}return f.scale(1070)}function VFe(e){return function(t,n){var r=Dn(t),i=Dn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Sn(t),s*Sn(n)]}}function ME(e){return function(t,n){var r=tl(t*t+n*n),i=e(r),s=Sn(i),o=Dn(i);return[Bu(t*s,r*o),Ml(r&&n*s/r)]}}var WFe=VFe(function(e){return tl(2/(1+e))});WFe.invert=ME(function(e){return 2*Ml(e/2)});function Lot(){return Kf(WFe).scale(124.75).clipAngle(180-.001)}var YFe=VFe(function(e){return(e=gFe(e))&&e/Sn(e)});YFe.invert=ME(function(e){return e});function Rot(){return Kf(YFe).scale(79.4188).clipAngle(180-.001)}function bL(e,t){return[e,tk(MN((Ls+t)/2))]}bL.invert=function(e,t){return[e,2*cb(mFe(t))-Ls]};function Fot(){return XFe(bL).scale(961/el)}function XFe(e){var t=Kf(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(c){return arguments.length?(r(c),f()):r()},t.translate=function(c){return arguments.length?(i(c),f()):i()},t.center=function(c){return arguments.length?(n(c),f()):n()},t.clipExtent=function(c){return arguments.length?(c==null?o=a=l=u=null:(o=+c[0][0],a=+c[0][1],l=+c[1][0],u=+c[1][1]),f()):o==null?null:[[o,a],[l,u]]};function f(){var c=wr*r(),d=t(Jst(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]]:e===bL?[[Math.max(d[0]-c,o),a],[Math.min(d[0]+c,l),u]]:[[o,Math.max(d[1]-c,a)],[l,Math.min(d[1]+c,u)]])}return f()}function TA(e){return MN((Ls+e)/2)}function Oot(e,t){var n=Dn(e),r=e===t?Sn(e):tk(n/Dn(t))/tk(TA(t)/TA(e)),i=n*NF(TA(e),r)/r;if(!r)return bL;function s(o,a){i>0?a<-Ls+kn&&(a=-Ls+kn):a>Ls-kn&&(a=Ls-kn);var l=i/NF(TA(a),r);return[l*Sn(r*o),i-l*Dn(r*o)]}return s.invert=function(o,a){var l=i-a,u=Du(r)*tl(o*o+l*l),f=Bu(o,Ur(l))*Du(l);return l*r<0&&(f-=wr*Du(o)*Du(l)),[f/r,2*cb(NF(i/u,1/r))-Ls]},s}function Mot(){return zN(Oot).scale(109.5).parallels([30,30])}function wk(e,t){return[e,t]}wk.invert=wk;function $ot(){return Kf(wk).scale(152.63)}function Iot(e,t){var n=Dn(e),r=e===t?Sn(e):(n-Dn(t))/(t-e),i=n/r+e;if(Ur(r)<kn)return wk;function s(o,a){var l=i-a,u=r*o;return[l*Sn(u),i-l*Dn(u)]}return s.invert=function(o,a){var l=i-a,u=Bu(o,Ur(l))*Du(l);return l*r<0&&(u-=wr*Du(o)*Du(l)),[u/r,i-Du(r)*tl(o*o+l*l)]},s}function Pot(){return zN(Iot).scale(131.154).center([0,13.9389])}var S_=1.340264,A_=-.081106,C_=893e-6,k_=.003796,_k=tl(3)/2,Not=12;function ZFe(e,t){var n=Ml(_k*Sn(t)),r=n*n,i=r*r*r;return[e*Dn(n)/(_k*(S_+3*A_*r+i*(7*C_+9*k_*r))),n*(S_+A_*r+i*(C_+k_*r))]}ZFe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Not&&(a=n*(S_+A_*r+i*(C_+k_*r))-t,l=S_+3*A_*r+i*(7*C_+9*k_*r),n-=o=a/l,r=n*n,i=r*r*r,!(Ur(o)<Q3));++s);return[_k*e*(S_+3*A_*r+i*(7*C_+9*k_*r))/Dn(n),Ml(Sn(n)/_k)]};function Bot(){return Kf(ZFe).scale(177.158)}function KFe(e,t){var n=Dn(t),r=Dn(e)*n;return[n*Sn(e)/r,Sn(t)/r]}KFe.invert=ME(cb);function zot(){return Kf(KFe).scale(144.049).clipAngle(60)}function jot(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,f,c,d=1,h=1,p=yL({point:function(_,A){var T=w([_,A]);this.stream.point(T[0],T[1])}}),g=d2,v,x;function y(){return d=e*r,h=e*i,v=x=null,w}function w(_){var A=_[0]*d,T=_[1]*h;if(s){var D=T*o-A*a;A=A*o+T*a,T=D}return[A+t,T+n]}return w.invert=function(_){var A=_[0]-t,T=_[1]-n;if(s){var D=T*o+A*a;A=A*o-T*a,T=D}return[A/d,T/h]},w.stream=function(_){return v&&x===_?v:v=p(g(x=_))},w.postclip=function(_){return arguments.length?(g=_,l=u=f=c=null,y()):g},w.clipExtent=function(_){return arguments.length?(g=_==null?(l=u=f=c=null,d2):RFe(l=+_[0][0],u=+_[0][1],f=+_[1][0],c=+_[1][1]),y()):l==null?null:[[l,u],[f,c]]},w.scale=function(_){return arguments.length?(e=+_,y()):e},w.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],y()):[t,n]},w.angle=function(_){return arguments.length?(s=_%360*gr,a=Sn(s),o=Dn(s),y()):s*Is},w.reflectX=function(_){return arguments.length?(r=_?-1:1,y()):r<0},w.reflectY=function(_){return arguments.length?(i=_?-1:1,y()):i<0},w.fitExtent=function(_,A){return vL(w,_,A)},w.fitSize=function(_,A){return PN(w,_,A)},w.fitWidth=function(_,A){return NN(w,_,A)},w.fitHeight=function(_,A){return BN(w,_,A)},w}function JFe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}JFe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ur(i)>kn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Uot(){return Kf(JFe).scale(175.295)}function QFe(e,t){return[Dn(t)*Sn(e),Sn(t)]}QFe.invert=ME(Ml);function qot(){return Kf(QFe).scale(249.5).clipAngle(90+kn)}function eOe(e,t){var n=Dn(t),r=1+Dn(e)*n;return[n*Sn(e)/r,Sn(t)/r]}eOe.invert=ME(function(e){return 2*cb(e)});function Hot(){return Kf(eOe).scale(250).clipAngle(142)}function tOe(e,t){return[tk(MN((Ls+t)/2)),-e]}tOe.invert=function(e,t){return[-t,2*cb(mFe(e))-Ls]};function Got(){var e=XFe(tOe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Vot=Math.abs,l5=Math.cos,Ek=Math.sin,Wot=1e-6,nOe=Math.PI,u5=nOe/2,Xxe=Yot(2);function Zxe(e){return e>1?u5:e<-1?-u5:Math.asin(e)}function Yot(e){return e>0?Math.sqrt(e):0}function Xot(e,t){var n=e*Ek(t),r=30,i;do t-=i=(t+Ek(t)-n)/(1+l5(t));while(Vot(i)>Wot&&--r>0);return t/2}function Zot(e,t,n){function r(i,s){return[e*i*l5(s=Xot(n,s)),t*Ek(s)]}return r.invert=function(i,s){return s=Zxe(s/t),[i/(e*l5(s)),Zxe((2*s+Ek(2*s))/n)]},r}var Kot=Zot(Xxe/u5,Xxe,nOe);function Jot(){return Kf(Kot).scale(169.529)}const Qot=qFe(),c5=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function eat(e,t){return function n(){const r=t();return r.type=e,r.path=qFe().projection(r),r.copy=r.copy||function(){const i=n();return c5.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},yLe(r)}}function jN(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Sk[e]=eat(e,t),this):Sk[e]||null}function rOe(e){return e&&e.path||Qot}const Sk={albers:GFe,albersusa:Dot,azimuthalequalarea:Lot,azimuthalequidistant:Rot,conicconformal:Mot,conicequalarea:xk,conicequidistant:Pot,equalEarth:Bot,equirectangular:$ot,gnomonic:zot,identity:jot,mercator:Fot,mollweide:Jot,naturalEarth1:Uot,orthographic:qot,stereographic:Hot,transversemercator:Got};for(const e in Sk)jN(e,Sk[e]);function tat(){}const Cd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function iOe(){var e=1,t=1,n=a;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],c=[];return s(l,u,d=>{n(d,l,u),nat(d)>0?f.push([d]):c.push(d)}),c.forEach(d=>{for(var h=0,p=f.length,g;h<p;++h)if(rat((g=f[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function s(l,u,f){var c=[],d=[],h,p,g,v,x,y;for(h=p=-1,v=l[0]>=u,Cd[v<<1].forEach(w);++h<e-1;)g=v,v=l[h+1]>=u,Cd[g|v<<1].forEach(w);for(Cd[v<<0].forEach(w);++p<t-1;){for(h=-1,v=l[p*e+e]>=u,x=l[p*e]>=u,Cd[v<<1|x<<2].forEach(w);++h<e-1;)g=v,v=l[p*e+e+h+1]>=u,y=x,x=l[p*e+h+1]>=u,Cd[g|v<<1|x<<2|y<<3].forEach(w);Cd[v|x<<3].forEach(w)}for(h=-1,x=l[p*e]>=u,Cd[x<<2].forEach(w);++h<e-1;)y=x,x=l[p*e+h+1]>=u,Cd[x<<2|y<<3].forEach(w);Cd[x<<3].forEach(w);function w(_){var A=[_[0][0]+h,_[0][1]+p],T=[_[1][0]+h,_[1][1]+p],D=o(A),k=o(T),R,O;(R=d[D])?(O=c[k])?(delete d[R.end],delete c[O.start],R===O?(R.ring.push(T),f(R.ring)):c[R.start]=d[O.end]={start:R.start,end:O.end,ring:R.ring.concat(O.ring)}):(delete d[R.end],R.ring.push(T),d[R.end=k]=R):(R=c[k])?(O=d[D])?(delete c[R.start],delete d[O.end],R===O?(R.ring.push(T),f(R.ring)):c[O.start]=d[R.end]={start:O.start,end:R.end,ring:O.ring.concat(R.ring)}):(delete c[R.start],R.ring.unshift(A),c[R.start=D]=R):c[D]=d[k]={start:D,end:k,ring:[A,T]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,f){l.forEach(c=>{var d=c[0],h=c[1],p=d|0,g=h|0,v,x=u[g*e+p];d>0&&d<e&&p===d&&(v=u[g*e+p-1],c[0]=d+(f-v)/(x-v)-.5),h>0&&h<t&&g===h&&(v=u[(g-1)*e+p],c[1]=h+(f-v)/(x-v)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||ot("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:tat,r):n===a},r}function nat(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function rat(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=iat(e,t[n]))return i;return 0}function iat(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],f=l[1],c=e[a],d=c[0],h=c[1];if(sat(l,c,t))return 0;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(i=-i)}return i}function sat(e,t,n){var r;return oat(e,t,n)&&aat(e[r=+(e[0]===t[0])],n[r],t[r])}function oat(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function aat(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function sOe(e,t,n){return function(r){var i=Nf(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?Qg(s,o,e):a/(e+1);return Kl(s+l,o,l)}}function UN(e){rt.call(this,null,e)}UN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Lt(UN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ra,s=iOe().smooth(e.smooth!==!1),o=e.thresholds||lat(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),c=s.size([f.width,f.height])(f.values,at(o)?o:o(f.values));uat(c,f,u,e),c.forEach(d=>{l.push(UD(u,yi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function lat(e,t,n){const r=sOe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>zg(t(i).values)))}function uat(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(fr(i)&&(i=i(n,r)),fr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(li(i)?i:i[0])||1,a=(li(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(oOe(t,o,a,l,u))}function oOe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(c){c.forEach(u)}function u(c){a&&c.reverse(),c.forEach(f)}function f(c){c[0]=(c[0]-s)*t+r,c[1]=(c[1]-o)*n+i}return function(c){return c.coordinates.forEach(l),c}}function Kxe(e,t,n){const r=e>=0?e:YP(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function qF(e){return fr(e)?e:Fa(+e)}function aOe(){var e=l=>l[0],t=l=>l[1],n=tb,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const f=Kxe(r[0],l,e)>>o,c=Kxe(r[1],l,t)>>o,d=f?f+2:0,h=c?c+2:0,p=2*d+(i>>o),g=2*h+(s>>o),v=new Float32Array(p*g),x=new Float32Array(p*g);let y=v;l.forEach(_=>{const A=d+(+e(_)>>o),T=h+(+t(_)>>o);A>=0&&A<p&&T>=0&&T<g&&(v[A+T*p]+=+n(_))}),f>0&&c>0?(jy(p,g,v,x,f),Uy(p,g,x,v,c),jy(p,g,v,x,f),Uy(p,g,x,v,c),jy(p,g,v,x,f),Uy(p,g,x,v,c)):f>0?(jy(p,g,v,x,f),jy(p,g,x,v,f),jy(p,g,v,x,f),y=x):c>0&&(Uy(p,g,v,x,c),Uy(p,g,x,v,c),Uy(p,g,v,x,c),y=x);const w=u?Math.pow(2,-2*o):1/d3e(y);for(let _=0,A=p*g;_<A;++_)y[_]*=w;return{values:y,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=qF(l),a):e},a.y=function(l){return arguments.length?(t=qF(l),a):t},a.weight=function(l){return arguments.length?(n=qF(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],f=+l[1];return u>=0&&f>=0||ot("invalid size"),i=u,s=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||ot("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=Bt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ot("invalid bandwidth"),r=l,a):r},a}function jy(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function Uy(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function qN(e){rt.call(this,null,e)}qN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const cat=["x","y","weight","size","cellSize","bandwidth"];function lOe(e,t){return cat.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Lt(qN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=fat(r,e.groupby),s=(e.groupby||[]).map(Rs),o=lOe(aOe(),e),a=e.as||"grid",l=[];function u(f,c){for(let d=0;d<s.length;++d)f[s[d]]=c[d];return f}return l=i.map(f=>yi(u({[a]:o(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function fat(e,t){var n=[],r=f=>f(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function HN(e){rt.call(this,null,e)}HN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Lt(HN,rt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=iOe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||sOe(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=lOe(aOe(),e)(i,!0),l=oOe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(yi),n}});const f5="Feature",GN="FeatureCollection",dat="MultiPoint";function VN(e){rt.call(this,null,e)}VN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Lt(VN,rt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ra,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ka(a))||s&&t.modified(ka(s))||o&&t.modified(ka(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),s&&o&&(t.visit(l,f=>{var c=s(f),d=o(f);c!=null&&d!=null&&(c=+c)===c&&(d=+d)===d&&r.push([c,d])}),n=n.concat({type:f5,geometry:{type:dat,coordinates:r}})),this.value={type:GN,features:n}}});function WN(e){rt.call(this,null,e)}WN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Lt(WN,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ra,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=rOe(e.projection),n.materialize().reflow()):o=i===Ra||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=hat(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function hat(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function YN(e){rt.call(this,null,e)}YN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Lt(YN,rt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(f){const c=n([r(f),i(f)]);c?(f[o]=c[0],f[a]=c[1]):(f[o]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function XN(e){rt.call(this,null,e)}XN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Lt(XN,rt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=pat(rOe(e.projection),e.field||$u("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function pat(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function ZN(e){rt.call(this,[],e),this.generator=lot()}ZN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Lt(ZN,rt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)fr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(rDe(n[0],i)):t.add.push(yi(i)),n[0]=i,t}});function KN(e){rt.call(this,null,e)}KN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Lt(KN,rt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ra,s=gat(e.opacity,e),o=mat(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?zg(n.map(u=>zg(i(u).values))):0};return n.forEach(u=>{const f=i(u),c=rr({},u,l);r||(c.$max=zg(f.values||[])),u[a]=yat(f,c,o.dep?o:Fa(o(c)),s.dep?s:Fa(s(c)))}),t.reflow(!0).modifies(a)}});function mat(e,t){let n;return fr(e)?(n=r=>d3(e(r,t)),n.dep=uOe(e)):n=Fa(d3(e||"#888")),n}function gat(e,t){let n;return fr(e)?(n=r=>e(r,t),n.dep=uOe(e)):e?n=Fa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function uOe(e){if(!fr(e))return!1;const t=Lc(ka(e));return t.$x||t.$y||t.$value||t.$max}function yat(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,f=e.values,c=f?v=>f[v]:pp,d=Pp(l-o,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),g=p.data;for(let v=a,x=0;v<u;++v){t.$y=v-a;for(let y=o,w=v*i;y<l;++y,x+=4){t.$x=y-o,t.$value=c(y+w);const _=n(t);g[x+0]=_.r,g[x+1]=_.g,g[x+2]=_.b,g[x+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function cOe(e){rt.call(this,null,e),this.modified(!0)}Lt(cOe,rt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=bat(e.type),c5.forEach(r=>{e[r]!=null&&Jxe(n,r,e[r])})):c5.forEach(r=>{e.modified(r)&&Jxe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&vat(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vat(e,t){const n=xat(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function bat(e){const t=jN((e||"mercator").toLowerCase());return t||ot("Unrecognized projection type: "+e),t()}function Jxe(e,t,n){fr(e[t])&&e[t](n)}function xat(e){return e=Bt(e),e.length===1?e[0]:{type:GN,features:e.reduce((t,n)=>t.concat(wat(n)),[])}}function wat(e){return e.type===GN?e.features:Bt(e).filter(t=>t!=null).map(t=>t.type===f5?t:{type:f5,geometry:t})}const _at=Object.freeze(Object.defineProperty({__proto__:null,contour:HN,geojson:VN,geopath:WN,geopoint:YN,geoshape:XN,graticule:ZN,heatmap:KN,isocontour:UN,kde2d:qN,projection:cOe},Symbol.toStringTag,{value:"Module"}));function Eat(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Sat(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return fOe(this.cover(t,n),t,n,e)}function fOe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,f=e._y1,c,d,h,p,g,v,x,y;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(c=(a+u)/2))?a=c:u=c,(v=n>=(d=(l+f)/2))?l=d:f=d,i=s,!(s=s[x=v<<1|g]))return i[x]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[x]=o:e._root=o,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(g=t>=(c=(a+u)/2))?a=c:u=c,(v=n>=(d=(l+f)/2))?l=d:f=d;while((x=v<<1|g)===(y=(p>=d)<<1|h>=c));return i[y]=s,i[x]=o,e}function Aat(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>f&&(f=i),s<u&&(u=s),s>c&&(c=s));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),n=0;n<r;++n)fOe(this,o[n],a[n],e[n]);return this}function Cat(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function kat(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Tat(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Dat(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,f=this._x1,c=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Wa(h,i,s,f,c)),n==null?n=1/0:(i=e-n,s=t-n,f=e+n,c=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>f||(a=p.y0)>c||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var v=(o+l)/2,x=(a+u)/2;d.push(new Wa(h[3],v,x,l,u),new Wa(h[2],o,x,v,u),new Wa(h[1],v,a,l,x),new Wa(h[0],o,a,v,x)),(g=(t>=x)<<1|e>=v)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var y=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),_=y*y+w*w;if(_<n){var A=Math.sqrt(n=_);i=e-A,s=t-A,f=e+A,c=t+A,r=h.data}}return r}function Lat(e){if(isNaN(f=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,f,c,d,h,p,g,v,x;if(!n)return this;if(n.length)for(;;){if((p=f>=(d=(o+l)/2))?o=d:l=d,(g=c>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[v=g<<1|p]))return this;if(!n.length)break;(t[v+1&3]||t[v+2&3]||t[v+3&3])&&(r=t,x=v)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[v]=s:delete t[v],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Rat(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Fat(){return this._root}function Oat(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Mat(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new Wa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,f=(o+l)/2;(i=r[3])&&t.push(new Wa(i,u,f,a,l)),(i=r[2])&&t.push(new Wa(i,s,f,u,l)),(i=r[1])&&t.push(new Wa(i,u,o,a,f)),(i=r[0])&&t.push(new Wa(i,s,o,u,f))}return this}function $at(e){var t=[],n=[],r;for(this._root&&t.push(new Wa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(o+l)/2,c=(a+u)/2;(s=i[0])&&t.push(new Wa(s,o,a,f,c)),(s=i[1])&&t.push(new Wa(s,f,a,l,c)),(s=i[2])&&t.push(new Wa(s,o,c,f,u)),(s=i[3])&&t.push(new Wa(s,f,c,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Iat(e){return e[0]}function Pat(e){return arguments.length?(this._x=e,this):this._x}function Nat(e){return e[1]}function Bat(e){return arguments.length?(this._y=e,this):this._y}function JN(e,t,n){var r=new QN(t??Iat,n??Nat,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function QN(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Qxe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var il=JN.prototype=QN.prototype;il.copy=function(){var e=new QN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Qxe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Qxe(r));return e};il.add=Sat;il.addAll=Aat;il.cover=Cat;il.data=kat;il.extent=Tat;il.find=Dat;il.remove=Lat;il.removeAll=Rat;il.root=Fat;il.size=Oat;il.visit=Mat;il.visitAfter=$at;il.x=Pat;il.y=Bat;function Za(e){return function(){return e}}function kp(e){return(e()-.5)*1e-6}function zat(e){return e.x+e.vx}function jat(e){return e.y+e.vy}function Uat(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Za(e==null?1:+e));function o(){for(var u,f=t.length,c,d,h,p,g,v,x=0;x<s;++x)for(c=JN(t,zat,jat).visitAfter(a),u=0;u<f;++u)d=t[u],g=n[d.index],v=g*g,h=d.x+d.vx,p=d.y+d.vy,c.visit(y);function y(w,_,A,T,D){var k=w.data,R=w.r,O=g+R;if(k){if(k.index>d.index){var B=h-k.x-k.vx,K=p-k.y-k.vy,L=B*B+K*K;L<O*O&&(B===0&&(B=kp(r),L+=B*B),K===0&&(K=kp(r),L+=K*K),L=(O-(L=Math.sqrt(L)))/L*i,d.vx+=(B*=L)*(O=(R*=R)/(v+R)),d.vy+=(K*=L)*O,k.vx-=B*(O=1-O),k.vy-=K*O)}return}return _>h+O||T<h-O||A>p+O||D<p-O}}function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,c;for(n=new Array(f),u=0;u<f;++u)c=t[u],n[c.index]=+e(c,u,t)}}return o.initialize=function(u,f){t=u,r=f,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Za(+u),l(),o):e},o}function qat(e){return e.index}function ewe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Hat(e){var t=qat,n=c,r,i=Za(30),s,o,a,l,u,f=1;e==null&&(e=[]);function c(v){return 1/Math.min(a[v.source.index],a[v.target.index])}function d(v){for(var x=0,y=e.length;x<f;++x)for(var w=0,_,A,T,D,k,R,O;w<y;++w)_=e[w],A=_.source,T=_.target,D=T.x+T.vx-A.x-A.vx||kp(u),k=T.y+T.vy-A.y-A.vy||kp(u),R=Math.sqrt(D*D+k*k),R=(R-s[w])/R*v*r[w],D*=R,k*=R,T.vx-=D*(O=l[w]),T.vy-=k*O,A.vx+=D*(O=1-O),A.vy+=k*O}function h(){if(o){var v,x=o.length,y=e.length,w=new Map(o.map((A,T)=>[t(A,T,o),A])),_;for(v=0,a=new Array(x);v<y;++v)_=e[v],_.index=v,typeof _.source!="object"&&(_.source=ewe(w,_.source)),typeof _.target!="object"&&(_.target=ewe(w,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(v=0,l=new Array(y);v<y;++v)_=e[v],l[v]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(y),p(),s=new Array(y),g()}}function p(){if(o)for(var v=0,x=e.length;v<x;++v)r[v]=+n(e[v],v,e)}function g(){if(o)for(var v=0,x=e.length;v<x;++v)s[v]=+i(e[v],v,e)}return d.initialize=function(v,x){o=v,u=x,h()},d.links=function(v){return arguments.length?(e=v,h(),d):e},d.id=function(v){return arguments.length?(t=v,d):t},d.iterations=function(v){return arguments.length?(f=+v,d):f},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:Za(+v),p(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Za(+v),g(),d):i},d}var Gat={value:()=>{}};function dOe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new PC(n)}function PC(e){this._=e}function Vat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}PC.prototype=dOe.prototype={constructor:PC,on:function(e,t){var n=this._,r=Vat(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Wat(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=twe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=twe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new PC(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Wat(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function twe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Gat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var g1=0,Qw=0,vw=0,hOe=1e3,Ak,e_,Ck=0,l0=0,xL=0,m2=typeof performance=="object"&&performance.now?performance:Date,pOe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function e9(){return l0||(pOe(Yat),l0=m2.now()+xL)}function Yat(){l0=0}function kk(){this._call=this._time=this._next=null}kk.prototype=mOe.prototype={constructor:kk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?e9():+n)+(t==null?0:+t),!this._next&&e_!==this&&(e_?e_._next=this:Ak=this,e_=this),this._call=e,this._time=n,d5()},stop:function(){this._call&&(this._call=null,this._time=1/0,d5())}};function mOe(e,t,n){var r=new kk;return r.restart(e,t,n),r}function Xat(){e9(),++g1;for(var e=Ak,t;e;)(t=l0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--g1}function nwe(){l0=(Ck=m2.now())+xL,g1=Qw=0;try{Xat()}finally{g1=0,Kat(),l0=0}}function Zat(){var e=m2.now(),t=e-Ck;t>hOe&&(xL-=t,Ck=e)}function Kat(){for(var e,t=Ak,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ak=n);e_=e,d5(r)}function d5(e){if(!g1){Qw&&(Qw=clearTimeout(Qw));var t=e-l0;t>24?(e<1/0&&(Qw=setTimeout(nwe,e-m2.now()-xL)),vw&&(vw=clearInterval(vw))):(vw||(Ck=m2.now(),vw=setInterval(Zat,hOe)),g1=1,pOe(nwe))}}function Jat(e,t,n){var r=new kk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?e9():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}const Qat=1664525,elt=1013904223,rwe=4294967296;function tlt(){let e=1;return()=>(e=(Qat*e+elt)%rwe)/rwe}function nlt(e){return e.x}function rlt(e){return e.y}var ilt=10,slt=Math.PI*(3-Math.sqrt(5));function olt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=mOe(c),u=dOe("tick","end"),f=tlt();e==null&&(e=[]);function c(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var v,x=e.length,y;g===void 0&&(g=1);for(var w=0;w<g;++w)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),v=0;v<x;++v)y=e[v],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var g=0,v=e.length,x;g<v;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var y=ilt*Math.sqrt(.5+g),w=g*slt;x.x=y*Math.cos(w),x.y=y*Math.sin(w)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function p(g){return g.initialize&&g.initialize(e,f),g}return h(),t={tick:d,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(f=g,a.forEach(p),t):f},force:function(g,v){return arguments.length>1?(v==null?a.delete(g):a.set(g,p(v)),t):a.get(g)},find:function(g,v,x){var y=0,w=e.length,_,A,T,D,k;for(x==null?x=1/0:x*=x,y=0;y<w;++y)D=e[y],_=g-D.x,A=v-D.y,T=_*_+A*A,T<x&&(k=D,x=T);return k},on:function(g,v){return arguments.length>1?(u.on(g,v),t):u.on(g)}}}function alt(){var e,t,n,r,i=Za(-30),s,o=1,a=1/0,l=.81;function u(h){var p,g=e.length,v=JN(e,nlt,rlt).visitAfter(c);for(r=h,p=0;p<g;++p)t=e[p],v.visit(d)}function f(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+i(g,h,e)}}function c(h){var p=0,g,v,x=0,y,w,_;if(h.length){for(y=w=_=0;_<4;++_)(g=h[_])&&(v=Math.abs(g.value))&&(p+=g.value,x+=v,y+=v*g.x,w+=v*g.y);h.x=y/x,h.y=w/x}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,v){if(!h.value)return!0;var x=h.x-t.x,y=h.y-t.y,w=v-p,_=x*x+y*y;if(w*w/l<_)return _<a&&(x===0&&(x=kp(n),_+=x*x),y===0&&(y=kp(n),_+=y*y),_<o&&(_=Math.sqrt(o*_)),t.vx+=x*h.value*r/_,t.vy+=y*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(x===0&&(x=kp(n),_+=x*x),y===0&&(y=kp(n),_+=y*y),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(w=s[h.data.index]*r/_,t.vx+=x*w,t.vy+=y*w);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,f()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Za(+h),f(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function llt(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}function ult(e){var t=Za(.1),n,r,i;typeof e!="function"&&(e=Za(e==null?0:+e));function s(a){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Za(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Za(+a),o(),s):e},s}const iwe={center:Eat,collide:Uat,nbody:alt,link:Hat,x:llt,y:ult},t_="forces",h5=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],clt=["static","iterations"],gOe=["x","y","vx","vy"];function t9(e){rt.call(this,null,e)}t9.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:gOe}]};Lt(t9,rt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(h5),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&yOe(n,e,0,t)):(this.value=n=dlt(t.source,e),n.on("tick",flt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(clt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,f;l<u;++l)if(f=a[l],!(f.name!==t_||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(gOe)}});function flt(e,t){return()=>e.touch(t).run()}function dlt(e,t){const n=olt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),yOe(n,t,!0).on("end",()=>s=!0)}function yOe(e,t,n,r){var i=Bt(t.forces),s,o,a,l;for(s=0,o=h5.length;s<o;++s)a=h5[s],a!==t_&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=t_+s,a=n||t.modified(t_,s)?plt(i[s]):r&&hlt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(t_+s,null);return e.numForces=i.length,e}function hlt(e,t){var n,r;for(n in e)if(fr(r=e[n])&&t.modified(ka(r)))return 1;return 0}function plt(e){var t,n;Xt(iwe,e.force)||ot("Unrecognized force: "+e.force),t=iwe[e.force]();for(n in e)fr(t[n])&&mlt(t[n],e[n],e);return t}function mlt(e,t,n){e(fr(t)?r=>t(r,n):t)}const glt=Object.freeze(Object.defineProperty({__proto__:null,force:t9},Symbol.toStringTag,{value:"Module"}));function ylt(e,t){return e.parent===t.parent?1:2}function vlt(e){return e.reduce(blt,0)/e.length}function blt(e,t){return e+t.x}function xlt(e){return 1+e.reduce(wlt,0)}function wlt(e,t){return Math.max(e,t.y)}function _lt(e){for(var t;t=e.children;)e=t[0];return e}function Elt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Slt(){var e=ylt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=vlt(h),d.y=xlt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=_lt(s),u=Elt(s),f=l.x-e(l,u)/2,c=u.x+e(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-f)/(c-f)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Alt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Clt(){return this.eachAfter(Alt)}function klt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Tlt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Dlt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Llt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Rlt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Flt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Olt(e){for(var t=this,n=Mlt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Mlt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function $lt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ilt(){return Array.from(this)}function Plt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Nlt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Blt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function n9(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Ult)):t===void 0&&(t=jlt);for(var n=new y1(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new y1(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(vOe)}function zlt(){return n9(this).eachBefore(qlt)}function jlt(e){return e.children}function Ult(e){return Array.isArray(e)?e[1]:null}function qlt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vOe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function y1(e){this.data=e,this.depth=this.height=0,this.parent=null}y1.prototype=n9.prototype={constructor:y1,count:Clt,each:klt,eachAfter:Dlt,eachBefore:Tlt,find:Llt,sum:Rlt,sort:Flt,path:Olt,ancestors:$lt,descendants:Ilt,leaves:Plt,links:Nlt,copy:zlt,[Symbol.iterator]:Blt};function NC(e){return e==null?null:bOe(e)}function bOe(e){if(typeof e!="function")throw new Error;return e}function Og(){return 0}function rv(e){return function(){return e}}const Hlt=1664525,Glt=1013904223,swe=4294967296;function Vlt(){let e=1;return()=>(e=(Hlt*e+Glt)%swe)/swe}function Wlt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ylt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Xlt(e,t){for(var n=0,r=(e=Ylt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&xOe(o,s)?++n:(o=Klt(i=Zlt(i,s)),n=0);return o}function Zlt(e,t){var n,r;if(HF(t,e))return[t];for(n=0;n<e.length;++n)if(DA(t,e[n])&&HF(n_(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(DA(n_(e[n],e[r]),t)&&DA(n_(e[n],t),e[r])&&DA(n_(e[r],t),e[n])&&HF(wOe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function DA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function xOe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function HF(e,t){for(var n=0;n<t.length;++n)if(!xOe(e,t[n]))return!1;return!0}function Klt(e){switch(e.length){case 1:return Jlt(e[0]);case 2:return n_(e[0],e[1]);case 3:return wOe(e[0],e[1],e[2])}}function Jlt(e){return{x:e.x,y:e.y,r:e.r}}function n_(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,f=a-i,c=Math.sqrt(l*l+u*u);return{x:(n+s+l/c*f)/2,y:(r+o+u/c*f)/2,r:(c+i+a)/2}}function wOe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,f=n.y,c=n.r,d=r-o,h=r-u,p=i-a,g=i-f,v=l-s,x=c-s,y=r*r+i*i-s*s,w=y-o*o-a*a+l*l,_=y-u*u-f*f+c*c,A=h*p-d*g,T=(p*_-g*w)/(A*2)-r,D=(g*v-p*x)/A,k=(h*w-d*_)/(A*2)-i,R=(d*x-h*v)/A,O=D*D+R*R-1,B=2*(s+T*D+k*R),K=T*T+k*k-s*s,L=-(Math.abs(O)>1e-6?(B+Math.sqrt(B*B-4*O*K))/(2*O):K/B);return{x:r+T+D*L,y:i+k+R*L,r:L}}function owe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function awe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function lwe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function LA(e){this._=e,this.next=null,this.previous=null}function Qlt(e,t){if(!(s=(e=Wlt(e)).length))return 0;var n,r,i,s,o,a,l,u,f,c,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;owe(r,n,i=e[2]),n=new LA(n),r=new LA(r),i=new LA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){owe(n._,r._,i=e[l]),i=new LA(i),u=r.next,f=n.previous,c=r._.r,d=n._.r;do if(c<=d){if(awe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(awe(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}d+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=lwe(n);(i=i.next)!==r;)(a=lwe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xlt(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function eut(e){return Math.sqrt(e.value)}function tut(){var e=null,t=1,n=1,r=Og;function i(s){const o=Vlt();return s.x=t/2,s.y=n/2,e?s.eachBefore(uwe(e)).eachAfter(GF(r,.5,o)).eachBefore(cwe(1)):s.eachBefore(uwe(eut)).eachAfter(GF(Og,1,o)).eachAfter(GF(r,s.r/Math.min(t,n),o)).eachBefore(cwe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=NC(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:rv(+s),i):r},i}function uwe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function GF(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=Qlt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function cwe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function _Oe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function $E(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function nut(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(_Oe),o}function s(o,a){return function(l){l.children&&$E(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,f=l.y0,c=l.x1-n,d=l.y1-n;c<u&&(u=c=(u+c)/2),d<f&&(f=d=(f+d)/2),l.x0=u,l.y0=f,l.x1=c,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var rut={depth:-1},fwe={},VF={};function iut(e){return e.id}function sut(e){return e.parentId}function dwe(){var e=iut,t=sut,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,f,c,d,h,p,g,v=new Map;if(n!=null){const x=s.map((_,A)=>out(n(_,A,i))),y=x.map(hwe),w=new Set(x).add("");for(const _ of y)w.has(_)||(w.add(_),x.push(_),y.push(hwe(_)),s.push(VF));o=(_,A)=>x[A],a=(_,A)=>y[A]}for(f=0,l=s.length;f<l;++f)u=s[f],h=s[f]=new y1(u),(p=o(u,f,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?fwe:h)),(p=a(u,f,i))!=null&&(p+="")&&(h.parent=p);for(f=0;f<l;++f)if(h=s[f],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===fwe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(c)throw new Error("multiple roots");c=h}if(!c)throw new Error("no root");if(n!=null){for(;c.data===VF&&c.children.length===1;)c=c.children[0],--l;for(let x=s.length-1;x>=0&&(h=s[x],h.data===VF);--x)h.data=null}if(c.parent=rut,c.eachBefore(function(x){x.depth=x.parent.depth+1,--l}).eachBefore(vOe),c.parent=null,l>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(e=NC(i),r):e},r.parentId=function(i){return arguments.length?(t=NC(i),r):t},r.path=function(i){return arguments.length?(n=NC(i),r):n},r}function out(e){e=`${e}`;let t=e.length;return p5(e,t-1)&&!p5(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function hwe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!p5(e,t););return e.slice(0,t)}function p5(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function aut(e,t){return e.parent===t.parent?1:2}function WF(e){var t=e.children;return t?t[0]:e.t}function YF(e){var t=e.children;return t?t[t.length-1]:e.t}function lut(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function uut(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function cut(e,t,n){return e.a.parent===t.parent?e.a:n}function BC(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}BC.prototype=Object.create(y1.prototype);function fut(e){for(var t=new BC(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new BC(s[o],o)),i.parent=n;return(t.parent=new BC(null,0)).children=[t],t}function dut(){var e=aut,t=1,n=1,r=null;function i(u){var f=fut(u);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(o),r)u.eachBefore(l);else{var c=u,d=u,h=u;u.eachBefore(function(y){y.x<c.x&&(c=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=c===d?1:e(c,d)/2,g=p-c.x,v=t/(d.x+p+g),x=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+g)*v,y.y=y.depth*x})}return u}function s(u){var f=u.children,c=u.parent.children,d=u.i?c[u.i-1]:null;if(f){uut(u);var h=(f[0].z+f[f.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||c[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,f,c){if(f){for(var d=u,h=u,p=f,g=d.parent.children[0],v=d.m,x=h.m,y=p.m,w=g.m,_;p=YF(p),d=WF(d),p&&d;)g=WF(g),h=YF(h),h.a=u,_=p.z+y-d.z-v+e(p._,d._),_>0&&(lut(cut(p,u,c),u,_),v+=_,x+=_),y+=p.m,v+=d.m,w+=g.m,x+=h.m;p&&!YF(h)&&(h.t=p,h.m+=y-x),d&&!WF(g)&&(g.t=d,g.m+=v-w,c=u)}return c}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function wL(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var EOe=(1+Math.sqrt(5))/2;function SOe(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,f=0,c=0,d=a.length,h,p,g=t.value,v,x,y,w,_,A,T;f<d;){h=i-n,p=s-r;do v=a[c++].value;while(!v&&c<d);for(x=y=v,A=Math.max(p/h,h/p)/(g*e),T=v*v*A,_=Math.max(y/T,T/x);c<d;++c){if(v+=u=a[c].value,u<x&&(x=u),u>y&&(y=u),T=v*v*A,w=Math.max(y/T,T/x),w>_){v-=u;break}_=w}o.push(l={value:v,dice:h<p,children:a.slice(f,c)}),l.dice?$E(l,n,r,i,g?r+=p*v/g:s):wL(l,n,r,g?n+=h*v/g:i,s),g-=v,f=c}return o}const AOe=function e(t){function n(r,i,s,o,a){SOe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EOe);function hut(){var e=AOe,t=!1,n=1,r=1,i=[0],s=Og,o=Og,a=Og,l=Og,u=Og;function f(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(c),i=[0],t&&d.eachBefore(_Oe),d}function c(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,v=d.x1-h,x=d.y1-h;v<p&&(p=v=(p+v)/2),x<g&&(g=x=(g+x)/2),d.x0=p,d.y0=g,d.x1=v,d.y1=x,d.children&&(h=i[d.depth+1]=s(d)/2,p+=u(d)-h,g+=o(d)-h,v-=a(d)-h,x-=l(d)-h,v<p&&(p=v=(p+v)/2),x<g&&(g=x=(g+x)/2),e(d,p,g,v,x))}return f.round=function(d){return arguments.length?(t=!!d,f):t},f.size=function(d){return arguments.length?(n=+d[0],r=+d[1],f):[n,r]},f.tile=function(d){return arguments.length?(e=bOe(d),f):e},f.padding=function(d){return arguments.length?f.paddingInner(d).paddingOuter(d):f.paddingInner()},f.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:rv(+d),f):s},f.paddingOuter=function(d){return arguments.length?f.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):f.paddingTop()},f.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:rv(+d),f):o},f.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:rv(+d),f):a},f.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:rv(+d),f):l},f.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:rv(+d),f):u},f}function put(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;f(0,a,e.value,t,n,r,i);function f(c,d,h,p,g,v,x){if(c>=d-1){var y=s[c];y.x0=p,y.y0=g,y.x1=v,y.y1=x;return}for(var w=u[c],_=h/2+w,A=c+1,T=d-1;A<T;){var D=A+T>>>1;u[D]<_?A=D+1:T=D}_-u[A-1]<u[A]-_&&c+1<A&&--A;var k=u[A]-w,R=h-k;if(v-p>x-g){var O=h?(p*R+v*k)/h:v;f(c,A,k,p,g,O,x),f(A,d,R,O,g,v,x)}else{var B=h?(g*R+x*k)/h:x;f(c,A,k,p,g,v,B),f(A,d,R,p,B,v,x)}}}function mut(e,t,n,r,i){(e.depth&1?wL:$E)(e,t,n,r,i)}const gut=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,c,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],f=u.children,c=u.value=0,h=f.length;c<h;++c)u.value+=f[c].value;u.dice?$E(u,i,s,o,g?s+=(a-s)*u.value/g:a):wL(u,i,s,g?i+=(o-i)*u.value/g:o,a),g-=u.value}else r._squarify=l=SOe(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(EOe);function m5(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function r9(e){rt.call(this,null,e)}r9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const yut=e=>e.values;Lt(r9,rt,{transform(e,t){t.source||ot("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&jD(o.data)&&i.rem.push(o.data)}),this.value=s=n9({values:Bt(e.keys).reduce((o,a)=>(o.key(a),o),vut()).entries(i.source)},yut),n&&s.each(o=>{o.children&&(o=yi(o.data),i.add.push(o),i.source.push(o))}),m5(s,_n,_n)),i.source.root=s,i}});function vut(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let f=-1,c,d,h;for(;++f<o;)c=a(d=i[f])+"",(h=l[c])?h.push(d):l[c]=[d];for(c in l)u[c]=n(l[c],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function vh(e){rt.call(this,null,e)}const but=(e,t)=>e.parent===t.parent?1:2;Lt(vh,rt,{transform(e,t){(!t.source||!t.source.root)&&ot(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(O0(e.sort,o=>o.data)),xut(n,this.params,e),n.separation&&n.separation(e.separation!==!1?but:tb);try{this.value=n(i)}catch(o){ot(o)}return i.each(o=>wut(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function xut(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function wut(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const g5=["x","y","r","depth","children"];function i9(e){vh.call(this,e)}i9.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:g5.length,default:g5}]};Lt(i9,vh,{layout:tut,params:["radius","size","padding"],fields:g5});const y5=["x0","y0","x1","y1","depth","children"];function s9(e){vh.call(this,e)}s9.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:y5.length,default:y5}]};Lt(s9,vh,{layout:nut,params:["size","round","padding"],fields:y5});function o9(e){rt.call(this,null,e)}o9.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Lt(o9,rt,{transform(e,t){t.source||ot("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?m5(dwe().id(e.key).parentId(e.parentKey)(i.source),e.key,Iu):m5(dwe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const pwe={tidy:dut,cluster:Slt},v5=["x","y","depth","children"];function a9(e){vh.call(this,e)}a9.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:v5.length,default:v5}]};Lt(a9,vh,{layout(e){const t=e||"tidy";if(Xt(pwe,t))return pwe[t]();ot("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:v5});function l9(e){rt.call(this,[],e)}l9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Lt(l9,rt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ot("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[_n(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[_n(a)]&&s[_n(l)]&&i.add.push(yi({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[_n(o)]=1),n.forEach(o=>{(s[_n(o.source)]||s[_n(o.target)])&&i.mod.push(o)})),i}});const mwe={binary:put,dice:$E,slice:wL,slicedice:mut,squarify:AOe,resquarify:gut},b5=["x0","y0","x1","y1","depth","children"];function u9(e){vh.call(this,e)}u9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:b5.length,default:b5}]};Lt(u9,vh,{layout(){const e=hut();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Xt(mwe,t)?e.tile(mwe[t]):ot("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:b5});const _ut=Object.freeze(Object.defineProperty({__proto__:null,nest:r9,pack:i9,partition:s9,stratify:o9,tree:a9,treelinks:l9,treemap:u9},Symbol.toStringTag,{value:"Module"})),XF=4278190080;function Eut(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Sut(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=Pp(s,o).getContext("2d"),u=Pp(s,o).getContext("2d"),f=a&&Pp(s,o).getContext("2d");n.forEach(k=>zC(l,k,!1)),zC(u,t,!1),a&&zC(f,t,!0);const c=ZF(l,s,o),d=ZF(u,s,o),h=a&&ZF(f,s,o),p=e.bitmap(),g=a&&e.bitmap();let v,x,y,w,_,A,T,D;for(x=0;x<o;++x)for(v=0;v<s;++v)_=x*s+v,A=c[_]&XF,D=d[_]&XF,T=a&&h[_]&XF,(A||T||D)&&(y=e(v),w=e(x),!i&&(A||D)&&p.set(y,w),a&&(A||T)&&g.set(y,w));return[p,g]}function ZF(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function zC(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>zC(e,s.items,n))}):cu[r].draw(e,{items:n?t.map(Aut):t})}function Aut(e){const t=UD(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const kd=5,Pa=31,g2=32,up=new Uint32Array(g2+1),pc=new Uint32Array(g2+1);pc[0]=0;up[0]=~pc[0];for(let e=1;e<=g2;++e)pc[e]=pc[e-1]<<1|1,up[e]=~pc[e];function Cut(e,t){const n=new Uint32Array(~~((e*t+g2)/g2));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>kd]&1<<(a&Pa)},set:(s,o)=>{const a=o*e+s;r(a>>>kd,1<<(a&Pa))},clear:(s,o)=>{const a=o*e+s;i(a>>>kd,~(1<<(a&Pa)))},getRange:(s,o,a,l)=>{let u=l,f,c,d,h;for(;u>=o;--u)if(f=u*e+s,c=u*e+a,d=f>>>kd,h=c>>>kd,d===h){if(n[d]&up[f&Pa]&pc[(c&Pa)+1])return!0}else{if(n[d]&up[f&Pa]||n[h]&pc[(c&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,f,c,d,h;for(;o<=l;++o)if(u=o*e+s,f=o*e+a,c=u>>>kd,d=f>>>kd,c===d)r(c,up[u&Pa]&pc[(f&Pa)+1]);else for(r(c,up[u&Pa]),r(d,pc[(f&Pa)+1]),h=c+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,f,c,d,h;for(;o<=l;++o)if(u=o*e+s,f=o*e+a,c=u>>>kd,d=f>>>kd,c===d)i(c,pc[u&Pa]|up[(f&Pa)+1]);else for(i(c,pc[u&Pa]),i(d,up[(f&Pa)+1]),h=c+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function kut(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Cut(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Tut(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,f=nu.width(o.datum,o.datum.text);let c=0,d,h,p,g,v,x,y;for(let w=0;w<l;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,g=a[w].y2===void 0?p:a[w].y2,v=(d+h)/2,x=(p+g)/2,y=Math.abs(h-d+g-p),y>=c&&(c=y,o.x=v,o.y=x);return v=f/2,x=u/2,d=o.x-v,h=o.x+v,p=o.y-x,g=o.y+x,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function Tk(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Tp(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),f=e(t+l),c=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(u,c,f,d)||o.getRange(u,c,f,d)||a&&a.getRange(u,c,f,d)}function Dut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,f,c,d,h){const p=e.invert(u),g=e.invert(f);let v=c,x=s,y;if(!Tk(p,g,d,h,i,s)&&!Tp(e,p,g,h,d,v,o,a)&&!Tp(e,p,g,h,d,h,o,null)){for(;x-v>=1;)y=(v+x)/2,Tp(e,p,g,h,d,y,o,a)?x=y:v=y;if(v>c)return[p,g,v,!0]}}return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text);let p=n?d:0,g=!1,v=!1,x=0,y,w,_,A,T,D,k,R,O,B,K,L,$,I,U,q,Y;for(let X=0;X<c;++X){for(y=f[X].x,_=f[X].y,w=f[X].x2===void 0?y:f[X].x2,A=f[X].y2===void 0?_:f[X].y2,y>w&&(Y=y,y=w,w=Y),_>A&&(Y=_,_=A,A=Y),O=e(y),K=e(w),B=~~((O+K)/2),L=e(_),I=e(A),$=~~((L+I)/2),k=B;k>=O;--k)for(R=$;R>=L;--R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,g]=q);for(k=B;k<=K;++k)for(R=$;R<=I;++R)q=l(k,R,p,h,d),q&&([u.x,u.y,p,g]=q);!g&&!n&&(U=Math.abs(w-y+A-_),T=(y+w)/2,D=(_+A)/2,U>=x&&!Tk(T,D,h,d,i,s)&&!Tp(e,T,D,d,h,d,o,null)&&(x=U,u.x=T,u.y=D,v=!0))}return g||v?(T=h/2,D=d/2,o.setRange(e(u.x-T),e(u.y-D),e(u.x+T),e(u.y+D)),u.align="center",u.baseline="middle",!0):!1}}const Lut=[-1,-1,1,1],Rut=[-1,1,-1,1];function Fut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,c=f.length,d=u.datum.fontSize,h=nu.width(u.datum,u.datum.text),p=[];let g=n?d:0,v=!1,x=!1,y=0,w,_,A,T,D,k,R,O,B,K,L,$;for(let I=0;I<c;++I){for(w=f[I].x,A=f[I].y,_=f[I].x2===void 0?w:f[I].x2,T=f[I].y2===void 0?A:f[I].y2,p.push([e((w+_)/2),e((A+T)/2)]);p.length;)if([R,O]=p.pop(),!(o.get(R,O)||a.get(R,O)||l.get(R,O))){l.set(R,O);for(let U=0;U<4;++U)D=R+Lut[U],k=O+Rut[U],l.outOfBounds(D,k,D,k)||p.push([D,k]);if(D=e.invert(R),k=e.invert(O),B=g,K=s,!Tk(D,k,h,d,i,s)&&!Tp(e,D,k,d,h,B,o,a)&&!Tp(e,D,k,d,h,d,o,null)){for(;K-B>=1;)L=(B+K)/2,Tp(e,D,k,d,h,L,o,a)?K=L:B=L;B>g&&(u.x=D,u.y=k,g=B,v=!0)}}!v&&!n&&($=Math.abs(_-w+T-A),D=(w+_)/2,k=(A+T)/2,$>=y&&!Tk(D,k,h,d,i,s)&&!Tp(e,D,k,d,h,d,o,null)&&(y=$,u.x=D,u.y=k,x=!0))}return v||x?(D=h/2,k=d/2,o.setRange(e(u.x-D),e(u.y-k),e(u.x+D),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const Out=["right","center","left"],Mut=["bottom","middle","top"];function $ut(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const f=u.boundary,c=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let d=u.textWidth??0,h,p,g,v,x,y,w,_,A,T,D,k,R,O,B;for(let K=0;K<l;++K){if(h=(n[K]&3)-1,p=(n[K]>>>2&3)-1,g=h===0&&p===0||r[K]<0,v=h&&p?Math.SQRT1_2:1,x=r[K]<0?-1:1,y=f[1+h]+r[K]*h*v,D=f[4+p]+x*c*p/2+r[K]*p*v,_=D-c/2,A=D+c/2,k=e(y),O=e(_),B=e(A),!d)if(gwe(k,k,O,B,o,a,y,y,_,A,f,g))d=nu.width(u.datum,u.datum.text);else continue;if(T=y+x*d*h/2,y=T-d/2,w=T+d/2,k=e(y),R=e(w),gwe(k,R,O,B,o,a,y,w,_,A,f,g))return u.x=h?h*x<0?w:y:T,u.y=p?p*x<0?A:_:D,u.align=Out[h*x+1],u.baseline=Mut[p*x+1],o.setRange(k,O,R,B),!0}return!1}}function gwe(e,t,n,r,i,s,o,a,l,u,f,c){return!(i.outOfBounds(e,n,t,r)||(c&&s||i).getRange(e,n,t,r))}const KF=0,JF=4,QF=8,eO=0,tO=1,nO=2,Iut={"top-left":KF+eO,top:KF+tO,"top-right":KF+nO,left:JF+eO,middle:JF+tO,right:JF+nO,"bottom-left":QF+eO,bottom:QF+tO,"bottom-right":QF+nO},Put={naive:Tut,"reduced-search":Dut,floodfill:Fut};function Nut(e,t,n,r,i,s,o,a,l,u,f){if(!e.length)return e;const c=Math.max(r.length,i.length),d=But(r,c),h=zut(i,c),p=jut(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,v=g==="area",x=Uut(p,g,a,l),y=u===null||u===1/0,w=v&&f==="naive";let _=-1,A=-1;const T=e.map(O=>{const B=y?nu.width(O,O.text):void 0;return _=Math.max(_,B),A=Math.max(A,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(O),textWidth:B}});u=u===null||u===1/0?Math.max(_,A)+Math.max(...r):u;const D=kut(t[0],t[1],u);let k;if(!w){n&&T.sort((K,L)=>n(K.datum,L.datum));let O=!1;for(let K=0;K<h.length&&!O;++K)O=h[K]===5||d[K]<0;const B=(p&&o||v)&&e.map(K=>K.datum);k=s.length||B?Sut(D,B||[],s,O,v):Eut(D,o&&T)}const R=v?Put[f](D,k,o,l):$ut(D,k,h,d);return T.forEach(O=>O.opacity=+R(O)),T}function But(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zut(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Iut[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function jut(e){return e&&e.mark&&e.mark.marktype}function Uut(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const x5=["x","y","opacity","align","baseline"],COe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function c9(e){rt.call(this,null,e)}c9.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:COe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:x5.length,default:x5}]};Lt(c9,rt,{transform(e,t){function n(s){const o=e[s];return fr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ot("Size parameter should be specified as a [width, height] array.");const i=e.as||x5;return Nut(t.materialize(t.SOURCE).source||[],e.size,e.sort,Bt(e.offset==null?1:e.offset),Bt(e.anchor||COe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const qut=Object.freeze(Object.defineProperty({__proto__:null,label:c9},Symbol.toStringTag,{value:"Module"}));function kOe(e,t){var n=[],r=function(f){return f(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function f9(e){rt.call(this,null,e)}f9.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Lt(f9,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kOe(r,e.groupby),s=(e.groupby||[]).map(Rs),o=s.length,a=e.as||[Rs(e.x),Rs(e.y)],l=[];i.forEach(u=>{wDe(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const c={};for(let d=0;d<o;++d)c[s[d]]=u.dims[d];c[a[0]]=f[0],c[a[1]]=f[1],l.push(yi(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const w5={constant:o8,linear:a8,log:yDe,exp:vDe,pow:bDe,quad:l8,poly:xDe},Hut=(e,t)=>e==="poly"?t:e==="quad"?2:1;function d9(e){rt.call(this,null,e)}d9.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(w5)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Lt(d9,rt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kOe(r,e.groupby),s=(e.groupby||[]).map(Rs),o=e.method||"linear",a=e.order==null?3:e.order,l=Hut(o,a),u=e.as||[Rs(e.x),Rs(e.y)],f=w5[o],c=[];let d=e.extent;Xt(w5,o)||ot("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=f(h,e.x,e.y,a);if(e.params){c.push(yi({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const v=d||Nf(h,e.x),x=y=>{const w={};for(let _=0;_<s.length;++_)w[s[_]]=h.dims[_];w[u[0]]=y[0],w[u[1]]=y[1],c.push(yi(w))};o==="linear"||o==="constant"?v.forEach(y=>x([y,g.predict(y)])):XD(g.predict,v,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const Gut=Object.freeze(Object.defineProperty({__proto__:null,loess:f9,regression:d9},Symbol.toStringTag,{value:"Module"})),Zd=11102230246251565e-32,ga=134217729,Vut=(3+8*Zd)*Zd;function rO(e,t,n,r,i){let s,o,a,l,u=t[0],f=r[0],c=0,d=0;f>u==f>-u?(s=u,u=t[++c]):(s=f,f=r[++d]);let h=0;if(c<e&&d<n)for(f>u==f>-u?(o=u+s,a=s-(o-u),u=t[++c]):(o=f+s,a=s-(o-f),f=r[++d]),s=o,a!==0&&(i[h++]=a);c<e&&d<n;)f>u==f>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++c]):(o=s+f,l=o-s,a=s-(o-l)+(f-l),f=r[++d]),s=o,a!==0&&(i[h++]=a);for(;c<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++c],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+f,l=o-s,a=s-(o-l)+(f-l),f=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Wut(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function IE(e){return new Float64Array(e)}const Yut=(3+16*Zd)*Zd,Xut=(2+12*Zd)*Zd,Zut=(9+64*Zd)*Zd*Zd,qy=IE(4),ywe=IE(8),vwe=IE(12),bwe=IE(16),Na=IE(4);function Kut(e,t,n,r,i,s,o){let a,l,u,f,c,d,h,p,g,v,x,y,w,_,A,T,D,k;const R=e-i,O=n-i,B=t-s,K=r-s;_=R*K,d=ga*R,h=d-(d-R),p=R-h,d=ga*K,g=d-(d-K),v=K-g,A=p*v-(_-h*g-p*g-h*v),T=B*O,d=ga*B,h=d-(d-B),p=B-h,d=ga*O,g=d-(d-O),v=O-g,D=p*v-(T-h*g-p*g-h*v),x=A-D,c=A-x,qy[0]=A-(x+c)+(c-D),y=_+x,c=y-_,w=_-(y-c)+(x-c),x=w-T,c=w-x,qy[1]=w-(x+c)+(c-T),k=y+x,c=k-y,qy[2]=y-(k-c)+(x-c),qy[3]=k;let L=Wut(4,qy),$=Xut*o;if(L>=$||-L>=$||(c=e-R,a=e-(R+c)+(c-i),c=n-O,u=n-(O+c)+(c-i),c=t-B,l=t-(B+c)+(c-s),c=r-K,f=r-(K+c)+(c-s),a===0&&l===0&&u===0&&f===0)||($=Zut*o+Vut*Math.abs(L),L+=R*f+K*a-(B*u+O*l),L>=$||-L>=$))return L;_=a*K,d=ga*a,h=d-(d-a),p=a-h,d=ga*K,g=d-(d-K),v=K-g,A=p*v-(_-h*g-p*g-h*v),T=l*O,d=ga*l,h=d-(d-l),p=l-h,d=ga*O,g=d-(d-O),v=O-g,D=p*v-(T-h*g-p*g-h*v),x=A-D,c=A-x,Na[0]=A-(x+c)+(c-D),y=_+x,c=y-_,w=_-(y-c)+(x-c),x=w-T,c=w-x,Na[1]=w-(x+c)+(c-T),k=y+x,c=k-y,Na[2]=y-(k-c)+(x-c),Na[3]=k;const I=rO(4,qy,4,Na,ywe);_=R*f,d=ga*R,h=d-(d-R),p=R-h,d=ga*f,g=d-(d-f),v=f-g,A=p*v-(_-h*g-p*g-h*v),T=B*u,d=ga*B,h=d-(d-B),p=B-h,d=ga*u,g=d-(d-u),v=u-g,D=p*v-(T-h*g-p*g-h*v),x=A-D,c=A-x,Na[0]=A-(x+c)+(c-D),y=_+x,c=y-_,w=_-(y-c)+(x-c),x=w-T,c=w-x,Na[1]=w-(x+c)+(c-T),k=y+x,c=k-y,Na[2]=y-(k-c)+(x-c),Na[3]=k;const U=rO(I,ywe,4,Na,vwe);_=a*f,d=ga*a,h=d-(d-a),p=a-h,d=ga*f,g=d-(d-f),v=f-g,A=p*v-(_-h*g-p*g-h*v),T=l*u,d=ga*l,h=d-(d-l),p=l-h,d=ga*u,g=d-(d-u),v=u-g,D=p*v-(T-h*g-p*g-h*v),x=A-D,c=A-x,Na[0]=A-(x+c)+(c-D),y=_+x,c=y-_,w=_-(y-c)+(x-c),x=w-T,c=w-x,Na[1]=w-(x+c)+(c-T),k=y+x,c=k-y,Na[2]=y-(k-c)+(x-c),Na[3]=k;const q=rO(U,vwe,4,Na,bwe);return bwe[q-1]}function RA(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=Yut*u?l:-Kut(e,t,n,r,i,s,u)}const xwe=Math.pow(2,-52),FA=new Uint32Array(512);class Dk{static from(t,n=nct,r=rct){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Dk(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let R=0;R<o;R++){const O=t[2*R],B=t[2*R+1];O<a&&(a=O),B<l&&(l=B),O>u&&(u=O),B>f&&(f=B),this._ids[R]=R}const c=(a+u)/2,d=(l+f)/2;let h,p,g;for(let R=0,O=1/0;R<o;R++){const B=iO(c,d,t[2*R],t[2*R+1]);B<O&&(h=R,O=B)}const v=t[2*h],x=t[2*h+1];for(let R=0,O=1/0;R<o;R++){if(R===h)continue;const B=iO(v,x,t[2*R],t[2*R+1]);B<O&&B>0&&(p=R,O=B)}let y=t[2*p],w=t[2*p+1],_=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const O=ect(v,x,y,w,t[2*R],t[2*R+1]);O<_&&(g=R,_=O)}let A=t[2*g],T=t[2*g+1];if(_===1/0){for(let B=0;B<o;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];bv(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let O=0;for(let B=0,K=-1/0;B<o;B++){const L=this._ids[B],$=this._dists[L];$>K&&(R[O++]=L,K=$)}this.hull=R.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(RA(v,x,y,w,A,T)<0){const R=p,O=y,B=w;p=g,y=A,w=T,g=R,A=O,T=B}const D=tct(v,x,y,w,A,T);this._cx=D.x,this._cy=D.y;for(let R=0;R<o;R++)this._dists[R]=iO(t[2*R],t[2*R+1],D.x,D.y);bv(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(v,x)]=h,s[this._hashKey(y,w)]=p,s[this._hashKey(A,T)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let R=0,O,B;R<this._ids.length;R++){const K=this._ids[R],L=t[2*K],$=t[2*K+1];if(R>0&&Math.abs(L-O)<=xwe&&Math.abs($-B)<=xwe||(O=L,B=$,K===h||K===p||K===g))continue;let I=0;for(let te=0,le=this._hashKey(L,$);te<this._hashSize&&(I=s[(le+te)%this._hashSize],!(I!==-1&&I!==r[I]));te++);I=n[I];let U=I,q;for(;q=r[U],RA(L,$,t[2*U],t[2*U+1],t[2*q],t[2*q+1])>=0;)if(U=q,U===I){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,K,r[U],-1,-1,i[U]);i[K]=this._legalize(Y+2),i[U]=Y,k++;let X=r[U];for(;q=r[X],RA(L,$,t[2*X],t[2*X+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(X,K,q,i[K],-1,i[X]),i[K]=this._legalize(Y+2),r[X]=X,k--,X=q;if(U===I)for(;q=n[U],RA(L,$,t[2*q],t[2*q+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(q,K,U,-1,i[U],i[q]),this._legalize(Y+2),i[q]=Y,r[U]=U,k--,U=q;this._hullStart=n[K]=U,r[U]=n[X]=K,r[K]=X,s[this._hashKey(L,$)]=K,s[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(k);for(let R=0,O=this._hullStart;R<k;R++)this.hull[R]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Jut(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=FA[--s];continue}const u=a-a%3,f=l+(t+1)%3,c=u+(a+2)%3,d=n[o],h=n[t],p=n[f],g=n[c];if(Qut(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const x=r[c];if(x===-1){let w=this._hullStart;do{if(this._hullTri[w]===c){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,x),this._link(a,r[o]),this._link(o,c);const y=u+(a+1)%3;s<FA.length&&(FA[s++]=y)}else{if(s===0)break;t=FA[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Jut(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function iO(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Qut(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,f=n-o,c=r-a,d=i-o,h=s-a,p=l*l+u*u,g=f*f+c*c,v=d*d+h*h;return l*(c*v-g*h)-u*(f*v-g*d)+p*(f*h-c*d)<0}function ect(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,f=o*o+a*a,c=l*l+u*u,d=.5/(o*u-a*l),h=(u*f-a*c)*d,p=(o*c-l*f)*d;return h*h+p*p}function tct(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,f=o*o+a*a,c=l*l+u*u,d=.5/(o*u-a*l),h=e+(u*f-a*c)*d,p=t+(o*c-l*f)*d;return{x:h,y:p}}function bv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;bw(e,i,s),t[e[n]]>t[e[r]]&&bw(e,n,r),t[e[s]]>t[e[r]]&&bw(e,s,r),t[e[n]]>t[e[s]]&&bw(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;bw(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(bv(e,t,s,r),bv(e,t,n,o-1)):(bv(e,t,n,o-1),bv(e,t,s,r))}}function bw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nct(e){return e[0]}function rct(e){return e[1]}const wwe=1e-6;class Ng{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>wwe||Math.abs(this._y1-s)>wwe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class _5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let ict=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,v=0,x=r.length,y,w;g<x;g+=3,v+=2){const _=r[g]*2,A=r[g+1]*2,T=r[g+2]*2,D=t[_],k=t[_+1],R=t[A],O=t[A+1],B=t[T],K=t[T+1],L=R-D,$=O-k,I=B-D,U=K-k,q=(L*U-$*I)*2;if(Math.abs(q)<1e-9){if(s===void 0){s=o=0;for(const X of n)s+=t[X*2],o+=t[X*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-D)*U-(o-k)*I);y=(D+B)/2-Y*U,w=(k+K)/2+Y*I}else{const Y=1/q,X=L*L+$*$,te=I*I+U*U;y=D+(U*X-$*te)*Y,w=k+(L*te-I*X)*Y}a[v]=y,a[v+1]=w}let l=n[n.length-1],u,f=l*4,c,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=f,c=d,h=p,f=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[f]=h-p,i[u+3]=i[f+1]=d-c}render(t){const n=t==null?t=new Ng:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let f=0,c=r.length;f<c;++f){const d=r[f];if(d<f)continue;const h=Math.floor(f/3)*2,p=Math.floor(d/3)*2,g=o[h],v=o[h+1],x=o[p],y=o[p+1];this._renderSegment(g,v,x,y,t)}let l,u=s[s.length-1];for(let f=0;f<s.length;++f){l=u,u=s[f];const c=Math.floor(i[u]/3)*2,d=o[c],h=o[c+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ng:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Ng:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new _5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,f=this._regioncode(a,l),c,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=f,f=this._regioncode(a,l),u===0&&f===0)c=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,v,x,y;if(u===0){if((p=this._clipSegment(s,o,a,l,u,f))===null)continue;[g,v,x,y]=p}else{if((p=this._clipSegment(a,l,s,o,f,u))===null)continue;[x,y,g,v]=p,c=d,d=this._edgecode(g,v),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(g,v):i=[g,v]}c=d,d=this._edgecode(x,y),c&&d&&this._edge(t,c,d,i,i.length),i?i.push(x,y):i=[x,y]}if(i)c=d,d=this._edgecode(i[0],i[1]),c&&d&&this._edge(t,c,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,f=s||o;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,f=a.length,c,d=this._edgecode(a[f-2],a[f-1]);u<f;u+=2)c=d,d=this._edgecode(a[u],a[u+1]),c&&d&&(u=this._edge(t,c,d,a,u),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const sct=2*Math.PI,Hy=Math.pow;function oct(e){return e[0]}function act(e){return e[1]}function lct(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function uct(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class h9{static from(t,n=oct,r=act,i){return new h9("length"in t?cct(t,n,r,i):Float64Array.from(fct(t,n,r,i)))}constructor(t){this._delaunator=new Dk(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&lct(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let d=0,h=n.length/2;d<h;++d){const p=uct(n[2*d],n[2*d+1],c);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Dk(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=s[l%3===2?l-2:l+1];(r[l]===-1||o[f]===-1)&&(o[f]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new ict(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const c=a.indexOf(t);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const c=r[(i[t]+1)%r.length];c!==f&&(yield c);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,c=Hy(n-u[t*2],2)+Hy(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Hy(n-u[p*2],2)+Hy(r-u[p*2+1],2);if(g<c&&(c=g,f=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Hy(n-u[h*2],2)+Hy(r-u[h*2+1],2)<c)return h;break}}while(h!==d);return f}render(t){const n=t==null?t=new Ng:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,f=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Ng:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,sct)}return r&&r.value()}renderHull(t){const n=t==null?t=new Ng:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new _5;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Ng:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new _5;return this.renderTriangle(t,n),n.value()}}function cct(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*fct(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function p9(e){rt.call(this,null,e)}p9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const dct=[-1e5,-1e5,1e5,1e5];Lt(p9,rt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:dct;const s=this.value=h9.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!pct(l)?hct(l):null}return t.reflow(e.modified()).modifies(n)}});function hct(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function pct(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mct=Object.freeze(Object.defineProperty({__proto__:null,voronoi:p9},Symbol.toStringTag,{value:"Module"}));var sO=Math.PI/180,r_=64,jC=2048;function gct(){var e=[256,256],t,n,r,i,s,o,a,l=TOe,u=[],f=Math.random,c={};c.layout=function(){for(var p=d(Pp()),g=_ct((e[0]>>5)*e[1]),v=null,x=u.length,y=-1,w=[],_=u.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,D)=>D.size-T.size);++y<x;){var A=_[y];A.x=e[0]*(f()+.5)>>1,A.y=e[1]*(f()+.5)>>1,yct(p,A,_,y),A.hasText&&h(g,A,v)&&(w.push(A),v?bct(v,A):v=[{x:A.x+A.x0,y:A.y+A.y0},{x:A.x+A.x1,y:A.y+A.y1}],A.x-=e[0]>>1,A.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(r_<<5)/g,p.height=jC/g;var v=p.getContext("2d");return v.fillStyle=v.strokeStyle="red",v.textAlign="center",{context:v,ratio:g}}function h(p,g,v){for(var x=g.x,y=g.y,w=Math.hypot(e[0],e[1]),_=l(e),A=f()<.5?1:-1,T=-A,D,k,R;(D=_(T+=A))&&(k=~~D[0],R=~~D[1],!(Math.min(Math.abs(k),Math.abs(R))>=w));)if(g.x=x+k,g.y=y+R,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!v||!vct(g,p,e[0]))&&(!v||xct(g,v))){for(var O=g.sprite,B=g.width>>5,K=e[0]>>5,L=g.x-(B<<4),$=L&127,I=32-$,U=g.y1-g.y0,q=(g.y+g.y0)*K+(L>>5),Y,X=0;X<U;X++){Y=0;for(var te=0;te<=B;te++)p[q+te]|=Y<<I|(te<B?(Y=O[X*B+te])>>>$:0);q+=K}return g.sprite=null,!0}return!1}return c.words=function(p){return arguments.length?(u=p,c):u},c.size=function(p){return arguments.length?(e=[+p[0],+p[1]],c):e},c.font=function(p){return arguments.length?(n=og(p),c):n},c.fontStyle=function(p){return arguments.length?(i=og(p),c):i},c.fontWeight=function(p){return arguments.length?(s=og(p),c):s},c.rotate=function(p){return arguments.length?(o=og(p),c):o},c.text=function(p){return arguments.length?(t=og(p),c):t},c.spiral=function(p){return arguments.length?(l=Ect[p]||p,c):l},c.fontSize=function(p){return arguments.length?(r=og(p),c):r},c.padding=function(p){return arguments.length?(a=og(p),c):a},c.random=function(p){return arguments.length?(f=p,c):f},c}function yct(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(r_<<5)/s,jC/s);var o=0,a=0,l=0,u=n.length,f,c,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,f=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*sO),v=Math.cos(t.rotate*sO),x=f*v,y=f*g,w=d*v,_=d*g;f=Math.max(Math.abs(x+_),Math.abs(x-_))+31>>5<<5,d=~~Math.max(Math.abs(y+w),Math.abs(y-w))}else f=f+31>>5<<5;if(d>l&&(l=d),o+f>=r_<<5&&(o=0,a+=l,l=0),a+d>=jC)break;i.translate((o+(f>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*sO),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=d,t.xoff=o,t.yoff=a,t.x1=f>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=f}for(var A=i.getImageData(0,0,(r_<<5)/s,jC/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,c=f>>5,d=t.y1-t.y0,h=0;h<d*c;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var D=0,k=-1;for(p=0;p<d;p++){for(h=0;h<f;h++){var R=c*p+(h>>5),O=A[(a+p)*(r_<<5)+(o+h)<<2]?1<<31-h%32:0;T[R]|=O,D|=O}D?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=T.slice(0,(t.y1-t.y0)*c)}}}function vct(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),f,c=0;c<l;c++){f=0;for(var d=0;d<=i;d++)if((f<<a|(d<i?(f=r[c*i+d])>>>o:0))&t[u+d])return!0;u+=n}return!1}function bct(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function xct(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function TOe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wct(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function _ct(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function og(e){return typeof e=="function"?e:function(){return e}}var Ect={archimedean:TOe,rectangular:wct};const DOe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Sct=["text","font","rotate","fontSize","fontStyle","fontWeight"];function m9(e){rt.call(this,gct(),e)}m9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:DOe}]};Lt(m9,rt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ot("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return fr(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Sct.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||DOe;let a=e.fontSize||14,l;if(fr(a)?l=e.fontSizeRange:a=Fa(a),l){const p=a,g=ui("sqrt")().domain(Nf(i,p)).range(l);a=v=>g(p(v))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Nu).layout(),f=s.size(),c=f[0]>>1,d=f[1]>>1,h=u.length;for(let p=0,g,v;p<h;++p)g=u[p],v=g.datum,v[o[0]]=g.x+c,v[o[1]]=g.y+d,v[o[2]]=g.font,v[o[3]]=g.size,v[o[4]]=g.style,v[o[5]]=g.weight,v[o[6]]=g.rotate;return t.reflow(r).modifies(o)}});const Act=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:m9},Symbol.toStringTag,{value:"Module"})),Cct=e=>new Uint8Array(e),kct=e=>new Uint16Array(e),T_=e=>new Uint32Array(e);function Tct(){let e=8,t=[],n=T_(0),r=OA(0,e),i=OA(0,e);return{data:()=>t,seen:()=>n=Dct(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let f,c,d;for(c=0;!o[c]&&c<a;++c)l[c]=t[c],u[c]=c;for(d=c;c<a;++c)f=t[c],o[c]?u[c]=-1:(u[c]=d,r[d]=r[c],i[d]=i[c],l[d]=f,f._index=d++),r[c]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=OA(s,e,r),i=OA(s,e))}}}function Dct(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function OA(e,t,n){const r=(t<257?Cct:t<65537?kct:T_)(e);return n&&r.set(n),r}function _we(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],f=a[1],c=l.length;let d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=f;d<c;++d)s[l[d]]|=r;return o}}}function Ewe(){let e=T_(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const f=n,c=l.length,d=T_(c);let h=Array(c),p,g,v;for(v=0;v<c;++v)h[v]=a(l[v]),d[v]=v;if(h=Lct(h,d),f)p=t,g=e,t=Array(f+c),e=T_(f+c),Rct(u,p,g,f,h,d,c,t,e);else{if(u>0)for(v=0;v<c;++v)d[v]+=u;t=h,e=d}return n=f+c,{index:d,value:h}}function i(a,l){const u=n;let f,c,d;for(c=0;!l[e[c]]&&c<u;++c);for(d=c;c<u;++c)l[f=e[c]]||(e[d]=f,t[d]=t[c],++d);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[tje(l,a[0],0,u),H_(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Lct(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),wUe(e,t)}function Rct(e,t,n,r,i,s,o,a,l){let u=0,f=0,c;for(c=0;u<r&&f<o;++c)t[u]<i[f]?(a[c]=t[u],l[c]=n[u++]):(a[c]=i[f],l[c]=s[f++]+e);for(;u<r;++u,++c)a[c]=t[u],l[c]=n[u];for(;f<o;++f,++c)a[c]=i[f],l[c]=s[f]+e}function g9(e){rt.call(this,Tct(),e),this._indices=null,this._dims=null}g9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Lt(g9,rt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=Ewe()),s.push(_we(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),f=a.all(),c=n.rem=n.add,d=n.mod,h=i.length,p={};let g,v,x,y,w,_,A,T,D;if(u.set(l),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},y=t.mod,A=0,T=y.length;A<T;++A)_[y[A]._index]=1;for(A=0;A<h;++A)D=r[A],(!o[A]||e.modified("fields",A)||t.modified(D.fields))&&(x=D.fname,(g=p[x])||(s[x]=v=Ewe(),p[x]=g=v.insert(D,t.source,0)),o[A]=_we(v,A,i[A]).onAdd(g,l));for(A=0,T=a.data().length;A<T;++A)w[A]||(u[A]!==l[A]?c.push(A):_[A]&&l[A]!==f&&d.push(A));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,f=i.size()+r.length,c=s.length;let d=i.size(),h,p,g;i.resize(f,c),i.add(r);const v=i.curr(),x=i.prev(),y=i.all();for(h=0;h<c;++h)p=a[h].fname,g=l[p]||(l[p]=o[p].insert(a[h],r,d)),s[h].onAdd(g,v);for(;d<f;++d)x[d]=y,v[d]!==y&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,f=t.rem;let c,d,h,p;for(c=0,d=f.length;c<d;++c)h=f[c]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),c=f[0],d=f[1],h=u[0],p=u[1],g=e.one;let v,x,y;if(c<h)for(v=c,x=Math.min(h,d);v<x;++v)y=l[v],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=g;else if(c>h)for(v=h,x=Math.min(c,p);v<x;++v)y=l[v],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=g;if(d>p)for(v=Math.max(c,p),x=d;v<x;++v)y=l[v],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=g;else if(d<p)for(v=Math.max(h,d),x=p;v<x;++v)y=l[v],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],c=a[0],d=a[1],h=e.one;let p,g,v;if(u<c)for(p=u,g=Math.min(c,f);p<g;++p)v=o[p],s[v]^=h,n.push(v);else if(u>c)for(p=c,g=Math.min(u,d);p<g;++p)v=o[p],s[v]^=h,r.push(v);if(f>d)for(p=Math.max(u,d),g=f;p<g;++p)v=o[p],s[v]^=h,n.push(v);else if(f<d)for(p=Math.max(c,f),g=d;p<g;++p)v=o[p],s[v]^=h,r.push(v);e.range=t.slice()}});function y9(e){rt.call(this,null,e)}y9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Lt(y9,rt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=f=>a[f]&n?null:o[f];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,f=>{const c=a[f]&n;return!c&&c^l[f]&n?o[f]:null}),s.filter(s.REM,f=>{const c=a[f]&n;return c&&!(c^(c^l[f]&n))?o[f]:null})):(s.filter(s.ADD,u),s.filter(s.REM,f=>(a[f]&n)===i?o[f]:null)),s.filter(s.SOURCE,f=>u(f._index))}});const Fct=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:g9,resolvefilter:y9},Symbol.toStringTag,{value:"Module"})),Oct="RawCode",u0="Literal",Mct="Property",$ct="Identifier",Ict="ArrayExpression",Pct="BinaryExpression",LOe="CallExpression",Nct="ConditionalExpression",Bct="LogicalExpression",zct="MemberExpression",jct="ObjectExpression",Uct="UnaryExpression";function Bc(e){this.type=e}Bc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=qct(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function qct(e){switch(e.type){case Ict:return e.elements;case Pct:case Bct:return[e.left,e.right];case LOe:return[e.callee].concat(e.arguments);case Nct:return[e.test,e.consequent,e.alternate];case zct:return[e.object,e.property];case jct:return e.properties;case Mct:return[e.key,e.value];case Uct:return[e.argument];case $ct:case u0:case Oct:default:return[]}}var Jf,ln,st,Da,Ti,_L=1,PE=2,c0=3,dm=4,EL=5,I0=6,xl=7,NE=8,Hct=9;Jf={};Jf[_L]="Boolean";Jf[PE]="<end>";Jf[c0]="Identifier";Jf[dm]="Keyword";Jf[EL]="Null";Jf[I0]="Numeric";Jf[xl]="Punctuator";Jf[NE]="String";Jf[Hct]="RegularExpression";var Gct="ArrayExpression",Vct="BinaryExpression",Wct="CallExpression",Yct="ConditionalExpression",ROe="Identifier",Xct="Literal",Zct="LogicalExpression",Kct="MemberExpression",Jct="ObjectExpression",Qct="Property",eft="UnaryExpression",Do="Unexpected token %0",tft="Unexpected number",nft="Unexpected string",rft="Unexpected identifier",ift="Unexpected reserved word",sft="Unexpected end of input",E5="Invalid regular expression",oO="Invalid regular expression: missing /",FOe="Octal literals are not allowed in strict mode.",oft="Duplicate data property in object literal not allowed in strict mode",Qo="ILLEGAL",y2="Disabled.",aft=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),lft=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function SL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Md(e){return e>=48&&e<=57}function v9(e){return"0123456789abcdefABCDEF".includes(e)}function D_(e){return"01234567".includes(e)}function uft(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function v2(e){return e===10||e===13||e===8232||e===8233}function BE(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&aft.test(String.fromCharCode(e))}function Lk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&lft.test(String.fromCharCode(e))}const cft={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function OOe(){for(;st<Da;){const e=ln.charCodeAt(st);if(uft(e)||v2(e))++st;else break}}function S5(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)st<Da&&v9(ln[st])?(r=ln[st++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ii({},Do,Qo);return String.fromCharCode(i)}function fft(){var e,t,n,r;for(e=ln[st],t=0,e==="}"&&ii({},Do,Qo);st<Da&&(e=ln[st++],!!v9(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ii({},Do,Qo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function MOe(){var e,t;for(e=ln.charCodeAt(st++),t=String.fromCharCode(e),e===92&&(ln.charCodeAt(st)!==117&&ii({},Do,Qo),++st,e=S5("u"),(!e||e==="\\"||!BE(e.charCodeAt(0)))&&ii({},Do,Qo),t=e);st<Da&&(e=ln.charCodeAt(st),!!Lk(e));)++st,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ln.charCodeAt(st)!==117&&ii({},Do,Qo),++st,e=S5("u"),(!e||e==="\\"||!Lk(e.charCodeAt(0)))&&ii({},Do,Qo),t+=e);return t}function dft(){var e,t;for(e=st++;st<Da;){if(t=ln.charCodeAt(st),t===92)return st=e,MOe();if(Lk(t))++st;else break}return ln.slice(e,st)}function hft(){var e,t,n;return e=st,t=ln.charCodeAt(st)===92?MOe():dft(),t.length===1?n=c0:cft.hasOwnProperty(t)?n=dm:t==="null"?n=EL:t==="true"||t==="false"?n=_L:n=c0,{type:n,value:t,start:e,end:st}}function aO(){var e=st,t=ln.charCodeAt(st),n,r=ln[st],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++st,{type:xl,value:String.fromCharCode(t),start:e,end:st};default:if(n=ln.charCodeAt(st+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return st+=2,{type:xl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:st};case 33:case 61:return st+=2,ln.charCodeAt(st)===61&&++st,{type:xl,value:ln.slice(e,st),start:e,end:st}}}if(o=ln.substr(st,4),o===">>>=")return st+=4,{type:xl,value:o,start:e,end:st};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return st+=3,{type:xl,value:s,start:e,end:st};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return st+=2,{type:xl,value:i,start:e,end:st};if(i==="//"&&ii({},Do,Qo),"<>=!+-*%&|^/".includes(r))return++st,{type:xl,value:r,start:e,end:st};ii({},Do,Qo)}function pft(e){let t="";for(;st<Da&&v9(ln[st]);)t+=ln[st++];return t.length===0&&ii({},Do,Qo),BE(ln.charCodeAt(st))&&ii({},Do,Qo),{type:I0,value:parseInt("0x"+t,16),start:e,end:st}}function mft(e){let t="0"+ln[st++];for(;st<Da&&D_(ln[st]);)t+=ln[st++];return(BE(ln.charCodeAt(st))||Md(ln.charCodeAt(st)))&&ii({},Do,Qo),{type:I0,value:parseInt(t,8),octal:!0,start:e,end:st}}function Swe(){var e,t,n;if(n=ln[st],SL(Md(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=st,e="",n!=="."){if(e=ln[st++],n=ln[st],e==="0"){if(n==="x"||n==="X")return++st,pft(t);if(D_(n))return mft(t);n&&Md(n.charCodeAt(0))&&ii({},Do,Qo)}for(;Md(ln.charCodeAt(st));)e+=ln[st++];n=ln[st]}if(n==="."){for(e+=ln[st++];Md(ln.charCodeAt(st));)e+=ln[st++];n=ln[st]}if(n==="e"||n==="E")if(e+=ln[st++],n=ln[st],(n==="+"||n==="-")&&(e+=ln[st++]),Md(ln.charCodeAt(st)))for(;Md(ln.charCodeAt(st));)e+=ln[st++];else ii({},Do,Qo);return BE(ln.charCodeAt(st))&&ii({},Do,Qo),{type:I0,value:parseFloat(e),start:t,end:st}}function gft(){var e="",t,n,r,i,s=!1;for(t=ln[st],SL(t==="'"||t==='"',"String literal must starts with a quote"),n=st,++st;st<Da;)if(r=ln[st++],r===t){t="";break}else if(r==="\\")if(r=ln[st++],!r||!v2(r.charCodeAt(0)))switch(r){case"u":case"x":ln[st]==="{"?(++st,e+=fft()):e+=S5(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:D_(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),st<Da&&D_(ln[st])&&(s=!0,i=i*8+"01234567".indexOf(ln[st++]),"0123".includes(r)&&st<Da&&D_(ln[st])&&(i=i*8+"01234567".indexOf(ln[st++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ln[st]===`
`&&++st;else{if(v2(r.charCodeAt(0)))break;e+=r}return t!==""&&ii({},Do,Qo),{type:NE,value:e,octal:s,start:n,end:st}}function yft(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ii({},E5)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ii({},E5)}try{return new RegExp(e,t)}catch{return null}}function vft(){var e,t,n,r,i;for(e=ln[st],SL(e==="/","Regular expression literal must start with a slash"),t=ln[st++],n=!1,r=!1;st<Da;)if(e=ln[st++],t+=e,e==="\\")e=ln[st++],v2(e.charCodeAt(0))&&ii({},oO),t+=e;else if(v2(e.charCodeAt(0)))ii({},oO);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ii({},oO),i=t.substr(1,t.length-2),{value:i,literal:t}}function bft(){var e,t,n;for(t="",n="";st<Da&&(e=ln[st],!!Lk(e.charCodeAt(0)));)++st,e==="\\"&&st<Da?ii({},Do,Qo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ii({},E5,n),{value:n,literal:t}}function xft(){var e,t,n,r;return Ti=null,OOe(),e=st,t=vft(),n=bft(),r=yft(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:st}}function wft(e){return e.type===c0||e.type===dm||e.type===_L||e.type===EL}function $Oe(){if(OOe(),st>=Da)return{type:PE,start:st,end:st};const e=ln.charCodeAt(st);return BE(e)?hft():e===40||e===41||e===59?aO():e===39||e===34?gft():e===46?Md(ln.charCodeAt(st+1))?Swe():aO():Md(e)?Swe():aO()}function El(){const e=Ti;return st=e.end,Ti=$Oe(),st=e.end,e}function IOe(){const e=st;Ti=$Oe(),st=e}function _ft(e){const t=new Bc(Gct);return t.elements=e,t}function Awe(e,t,n){const r=new Bc(e==="||"||e==="&&"?Zct:Vct);return r.operator=e,r.left=t,r.right=n,r}function Eft(e,t){const n=new Bc(Wct);return n.callee=e,n.arguments=t,n}function Sft(e,t,n){const r=new Bc(Yct);return r.test=e,r.consequent=t,r.alternate=n,r}function b9(e){const t=new Bc(ROe);return t.name=e,t}function i_(e){const t=new Bc(Xct);return t.value=e.value,t.raw=ln.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Cwe(e,t,n){const r=new Bc(Kct);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Aft(e){const t=new Bc(Jct);return t.properties=e,t}function kwe(e,t,n){const r=new Bc(Qct);return r.key=t,r.value=n,r.kind=e,r}function Cft(e,t){const n=new Bc(eft);return n.operator=e,n.argument=t,n.prefix=!0,n}function ii(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(SL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=st,n.description=i,n}function AL(e){e.type===PE&&ii(e,sft),e.type===I0&&ii(e,tft),e.type===NE&&ii(e,nft),e.type===c0&&ii(e,rft),e.type===dm&&ii(e,ift),ii(e,Do,e.value)}function La(e){const t=El();(t.type!==xl||t.value!==e)&&AL(t)}function ss(e){return Ti.type===xl&&Ti.value===e}function lO(e){return Ti.type===dm&&Ti.value===e}function kft(){const e=[];for(st=Ti.start,La("[");!ss("]");)ss(",")?(El(),e.push(null)):(e.push(f0()),ss("]")||La(","));return El(),_ft(e)}function Twe(){st=Ti.start;const e=El();return e.type===NE||e.type===I0?(e.octal&&ii(e,FOe),i_(e)):b9(e.value)}function Tft(){var e,t,n,r;if(st=Ti.start,e=Ti,e.type===c0)return n=Twe(),La(":"),r=f0(),kwe("init",n,r);if(e.type===PE||e.type===xl)AL(e);else return t=Twe(),La(":"),r=f0(),kwe("init",t,r)}function Dft(){var e=[],t,n,r,i={},s=String;for(st=Ti.start,La("{");!ss("}");)t=Tft(),t.key.type===ROe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ii({},oft):i[r]=!0,e.push(t),ss("}")||La(",");return La("}"),Aft(e)}function Lft(){La("(");const e=x9();return La(")"),e}const Rft={if:1};function Fft(){var e,t,n;if(ss("("))return Lft();if(ss("["))return kft();if(ss("{"))return Dft();if(e=Ti.type,st=Ti.start,e===c0||Rft[Ti.value])n=b9(El().value);else if(e===NE||e===I0)Ti.octal&&ii(Ti,FOe),n=i_(El());else{if(e===dm)throw new Error(y2);e===_L?(t=El(),t.value=t.value==="true",n=i_(t)):e===EL?(t=El(),t.value=null,n=i_(t)):ss("/")||ss("/=")?(n=i_(xft()),IOe()):AL(El())}return n}function Oft(){const e=[];if(La("("),!ss(")"))for(;st<Da&&(e.push(f0()),!ss(")"));)La(",");return La(")"),e}function Mft(){st=Ti.start;const e=El();return wft(e)||AL(e),b9(e.value)}function $ft(){return La("."),Mft()}function Ift(){La("[");const e=x9();return La("]"),e}function Pft(){var e,t,n;for(e=Fft();;)if(ss("."))n=$ft(),e=Cwe(".",e,n);else if(ss("("))t=Oft(),e=Eft(e,t);else if(ss("["))n=Ift(),e=Cwe("[",e,n);else break;return e}function Dwe(){const e=Pft();if(Ti.type===xl&&(ss("++")||ss("--")))throw new Error(y2);return e}function UC(){var e,t;if(Ti.type!==xl&&Ti.type!==dm)t=Dwe();else{if(ss("++")||ss("--"))throw new Error(y2);if(ss("+")||ss("-")||ss("~")||ss("!"))e=El(),t=UC(),t=Cft(e.value,t);else{if(lO("delete")||lO("void")||lO("typeof"))throw new Error(y2);t=Dwe()}}return t}function Lwe(e){let t=0;if(e.type!==xl&&e.type!==dm)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Nft(){var e,t,n,r,i,s,o,a,l,u;if(e=Ti,l=UC(),r=Ti,i=Lwe(r),i===0)return l;for(r.prec=i,El(),t=[e,Ti],o=UC(),s=[l,r,o];(i=Lwe(Ti))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=Awe(a,l,o),s.push(n);r=El(),r.prec=i,s.push(r),t.push(Ti),n=UC(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=Awe(s[u-1].value,s[u-2],n),u-=2;return n}function f0(){var e,t,n;return e=Nft(),ss("?")&&(El(),t=f0(),La(":"),n=f0(),e=Sft(e,t,n)),e}function x9(){const e=f0();if(ss(","))throw new Error(y2);return e}function w9(e){ln=e,st=0,Da=ln.length,Ti=null,IOe();const t=x9();if(Ti.type!==PE)throw new Error("Unexpect token after expression.");return t}var POe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function NOe(e){function t(o,a,l,u){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ot("Missing arguments to clamp function."),o.length>3&&ot("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ot("Missing arguments to if function."),o.length>3&&ot("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Bft(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function BOe(e){e=e||{};const t=e.allowed?Lc(e.allowed):{},n=e.forbidden?Lc(e.forbidden):{},r=e.constants||POe,i=(e.functions||NOe)(c),s=e.globalvar,o=e.fieldvar,a=fr(s)?s:p=>`${s}["${p}"]`;let l={},u={},f=0;function c(p){if(zt(p))return p;const g=d[p.type];return g==null&&ot("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return f>0?g:Xt(n,g)?ot("Illegal identifier: "+g):Xt(r,g)?r[g]:Xt(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,v=c(p.object);g&&(f+=1);const x=c(p.property);return v===o&&(u[Bft(x)]=1),g&&(f-=1),v+(g?"."+x:"["+x+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ot("Illegal callee type: "+p.callee.type);const g=p.callee.name,v=p.arguments,x=Xt(i,g)&&i[g];return x||ot("Unrecognized function: "+g),fr(x)?x(v):x+"("+v.map(c).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(c).join(",")+"]",BinaryExpression:p=>"("+c(p.left)+" "+p.operator+" "+c(p.right)+")",UnaryExpression:p=>"("+p.operator+c(p.argument)+")",ConditionalExpression:p=>"("+c(p.test)+"?"+c(p.consequent)+":"+c(p.alternate)+")",LogicalExpression:p=>"("+c(p.left)+p.operator+c(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(c).join(",")+"}",Property:p=>{f+=1;const g=c(p.key);return f-=1,g+":"+c(p.value)}};function h(p){const g={code:c(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const Rwe=Symbol("vega_selection_getter");function zOe(e){return(!e.getter||!e.getter[Rwe])&&(e.getter=$u(e.field),e.getter[Rwe]=!0),e.getter}const _9="intersect",Fwe="union",zft="vlMulti",jft="vlPoint",Owe="or",Uft="and",yf="_vgsid_",b2=$u(yf),qft="E",Hft="R",Gft="R-E",Vft="R-LE",Wft="R-RE",Yft="E-LT",Xft="E-LTE",Zft="E-GT",Kft="E-GTE",Jft="E-VALID",Qft="E-ONE",Rk="index:unit";function Mwe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=zOe(a)(e),$p(o)&&(o=Aa(o)),$p(r[s])&&(r[s]=Aa(r[s])),at(r[s])&&$p(r[s][0])&&(r[s]=r[s].map(Aa)),a.type===qft){if(at(r[s])?!r[s].includes(o):o!==r[s])return!1}else if(a.type===Hft){if(!mv(o,r[s]))return!1}else if(a.type===Wft){if(!mv(o,r[s],!0,!1))return!1}else if(a.type===Gft){if(!mv(o,r[s],!1,!1))return!1}else if(a.type===Vft){if(!mv(o,r[s],!1,!0))return!1}else if(a.type===Yft){if(o>=r[s])return!1}else if(a.type===Xft){if(o>r[s])return!1}else if(a.type===Zft){if(o<=r[s])return!1}else if(a.type===Kft){if(o<r[s])return!1}else if(a.type===Jft){if(o===null||isNaN(o))return!1}else if(a.type===Qft&&r[s].indexOf(o)===-1)return!1;return!0}function edt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[Rk]&&r[Rk].value:void 0,o=n===_9,a=i.length,l=0,u,f,c,d,h;l<a;++l)if(u=i[l],s&&o){if(f=f||{},c=f[d=u.unit]||0,c===-1)continue;if(h=Mwe(t,u),f[d]=h?-1:++c,h&&s.size===1)return!0;if(!h&&c===s.get(d).count)return!1}else if(h=Mwe(t,u),o^h)return h;return a&&o}const jOe=lD(b2),tdt=jOe.left,ndt=jOe.right;function rdt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[Rk]&&r[Rk].value:void 0,o=n===_9,a=b2(t),l=tdt(i,a);if(l===i.length||b2(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(ndt(i,a)-l<s.size)return!1}return!0}function idt(e,t){return e.map(n=>rr(t.fields?{values:t.fields.map(r=>zOe(r)(n.datum))}:{[yf]:b2(n.datum)},t))}function sdt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,f,c,d,h,p,g,v,x,y,w=s.length,_=0,A,T;_<w;++_)if(u=s[_],d=u.unit,f=u.fields,c=u.values,f&&c){for(A=0,T=f.length;A<T;++A)h=f[A],g=o[h.field]||(o[h.field]={}),v=g[d]||(g[d]=[]),l[h.field]=x=h.type.charAt(0),y=uO[`${x}_union`],g[d]=y(v,Bt(c[A]));n&&(v=a[d]||(a[d]=[]),v.push(Bt(c).reduce((D,k,R)=>(D[f[R].field]=k,D),{})))}else h=yf,p=b2(u),g=o[h]||(o[h]={}),v=g[d]||(g[d]=[]),v.push(p),n&&(v=a[d]||(a[d]=[]),v.push({[yf]:p}));if(t=t||Fwe,o[yf]?o[yf]=uO[`${yf}_${t}`](...Object.values(o[yf])):Object.keys(o).forEach(D=>{o[D]=Object.keys(o[D]).map(k=>o[D][k]).reduce((k,R)=>k===void 0?R:uO[`${l[D]}_${t}`](k,R))}),s=Object.keys(a),n&&s.length){const D=r?jft:zft;o[D]=t===Fwe?{[Owe]:s.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[Uft]:s.map(k=>({[Owe]:a[k]}))}}return o}var uO={[`${yf}_union`]:kUe,[`${yf}_intersect`]:AUe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Aa(t[0]),r=Aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const odt=":",adt="@";function E9(e,t,n,r){t[0].type!==u0&&ot("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Hr(t).value,o="unit",a=adt+o,l=odt+i;s===_9&&!Xt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Xt(r,l)||(r[l]=n.getData(i).tuplesRef())}function UOe(e){const t=this.context.data[e];return t?t.values.value:[]}function ldt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function udt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Iu).insert(t)),1}function cdt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const zE=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},fdt=zE("format"),qOe=zE("timeFormat"),ddt=zE("utcFormat"),hdt=zE("timeParse"),pdt=zE("utcParse"),MA=new Date(2e3,0,1);function CL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(MA.setYear(2e3),MA.setMonth(e),MA.setDate(t),qOe.call(this,MA,n))}function mdt(e){return CL.call(this,e,1,"%B")}function gdt(e){return CL.call(this,e,1,"%b")}function ydt(e){return CL.call(this,0,2+e,"%A")}function vdt(e){return CL.call(this,0,2+e,"%a")}const bdt=":",xdt="@",A5="%",HOe="$";function S9(e,t,n,r){t[0].type!==u0&&ot("First argument to data functions must be a string literal.");const i=t[0].value,s=bdt+i;if(!Xt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function wdt(e,t,n,r){t[0].type!==u0&&ot("First argument to indata must be a string literal."),t[1].type!==u0&&ot("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=xdt+s;Xt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Qa(e,t,n,r){if(t[0].type===u0)$we(n,r,t[0].value);else for(e in n.scales)$we(n,r,e)}function $we(e,t,n){const r=A5+n;if(!Xt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Qf(e,t){if(zt(e)){const n=t.scales[e];return n&&Ctt(n.value)?n.value:void 0}}function _dt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Qa,n._range=Qa,n._scale=Qa;const r=i=>"_["+(i.type===u0?Tt(A5+i.value):Tt(A5)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function A9(e,t){return function(n,r,i){if(n){const s=Qf(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Edt=A9("area",jst),Sdt=A9("bounds",Gst),Adt=A9("centroid",Kst);function Cdt(e,t){const n=Qf(e,(t||this).context);return n&&n.scale()}function kdt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function C9(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Tdt(){return C9(this.context.dataflow,"warn",arguments)}function Ddt(){return C9(this.context.dataflow,"info",arguments)}function Ldt(){return C9(this.context.dataflow,"debug",arguments)}function cO(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function C5(e){const t=d3(e),n=cO(t.r),r=cO(t.g),i=cO(t.b);return .2126*n+.7152*r+.0722*i}function Rdt(e,t){const n=C5(e),r=C5(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Fdt(){const e=[].slice.call(arguments);return e.unshift({}),rr(...e)}function GOe(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?Odt(e,t):!1:It(e)&&It(t)?VOe(e,t):!1}function Odt(e,t){for(let n=0,r=e.length;n<r;++n)if(!GOe(e[n],t[n]))return!1;return!0}function VOe(e,t){for(const n in e)if(!GOe(e[n],t[n]))return!1;return!0}function Iwe(e){return t=>VOe(e,t)}function Mdt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let f=a.changes,c,d;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=o.changeset(),f.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,f).run()},!0,1)),n&&(c=n===!0?Iu:at(n)||jD(n)?n:Iwe(n),f.remove(c)),t&&f.insert(t),r&&(c=Iwe(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(d in s)f.modify(i,d,s[d]);return 1}function $dt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Idt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Pwe={};function Pdt(e,t){const n=Pwe[t]||(Pwe[t]=$u(t));return at(e)?e.map(n):n(e)}function kL(e){return at(e)||ArrayBuffer.isView(e)?e:null}function k9(e){return kL(e)||(zt(e)?e:null)}function Ndt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kL(e).join(...n)}function Bdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k9(e).indexOf(...n)}function zdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k9(e).lastIndexOf(...n)}function jdt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k9(e).slice(...n)}function Udt(e,t,n){return fr(n)&&ot("Function argument passed to replace."),String(e).replace(t,n)}function qdt(e){return kL(e).slice().reverse()}function Hdt(e){return kL(e).slice().sort(mE)}function Gdt(e,t,n){return z8(e||0,t||0,n||0)}function Vdt(e,t){const n=Qf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Wdt(e,t){const n=Qf(e,(t||this).context);return n?n.copy():void 0}function Ydt(e,t){const n=Qf(e,(t||this).context);return n?n.domain():[]}function Xdt(e,t,n){const r=Qf(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Zdt(e,t){const n=Qf(e,(t||this).context);return n&&n.range?n.range():[]}function Kdt(e,t,n){const r=Qf(e,(n||this).context);return r?r(t):void 0}function Jdt(e,t,n,r,i){let s=typeof e=="string"?Qf(e,(i||this).context):e;const o=ILe(t,n);let a=s.domain(),l=a[0],u=Hr(a),f=Ra;return u-l?f=SLe(s,l,u):s=(s.interpolator?ui("sequential")().interpolator(s.interpolator()):ui("linear")().interpolate(s.interpolate()).range(s.range())).domain([l=0,u=1]),s.ticks&&(a=s.ticks(+r||15),l!==a[0]&&a.unshift(l),u!==Hr(a)&&a.push(u)),a.forEach(c=>o.stop(f(c),s(c))),o}function Qdt(e,t,n){const r=Qf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function eht(e){let t=null;return function(n){return n?u2(n,t=t||c1(e)):e}}const WOe=e=>e.data;function YOe(e,t){const n=UOe.call(t,e);return n.root&&n.root.lookup||{}}function tht(e,t,n){const r=YOe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(WOe):void 0}function nht(e,t){const n=YOe(e,this)[t];return n?n.ancestors().map(WOe):void 0}const XOe=()=>typeof window<"u"&&window||null;function rht(){const e=XOe();return e?e.screen:{}}function iht(){const e=XOe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function sht(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function ZOe(e,t,n){if(!e)return[];const[r,i]=e,s=new Qs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return ORe(o,s,oht(t))}function oht(e){let t=null;if(e){const n=Bt(e.marktype),r=Bt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function aht(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Bt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function lht(e){return Bt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function uht(e,t,n){const{x:r,y:i,mark:s}=n,o=new Qs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),ZOe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>cht(l.x,l.y,t))}function cht(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const x2={random(){return Nu()},cumulativeNormal:VD,cumulativeLogNormal:e8,cumulativeUniform:i8,densityNormal:XP,densityLogNormal:QP,densityUniform:r8,quantileNormal:WD,quantileLogNormal:t8,quantileUniform:s8,sampleNormal:GD,sampleLogNormal:JP,sampleUniform:n8,isArray:at,isBoolean:fm,isDate:$p,isDefined(e){return e!==void 0},isNumber:li,isObject:It,isRegExp:mTe,isString:zt,isTuple:jD,isValid(e){return e!=null&&e===e},toBoolean:OP,toDate(e){return MP(e)},toNumber:Aa,toString:$P,indexof:Bdt,join:Ndt,lastindexof:zdt,replace:Udt,reverse:qdt,sort:Hdt,slice:jdt,flush:hTe,lerp:gTe,merge:Fdt,pad:bTe,peek:Hr,pluck:Pdt,span:gE,inrange:mv,truncate:xTe,rgb:d3,lab:W4,hcl:nje,hsl:V4,luminance:C5,contrast:Rdt,sequence:Kl,format:fdt,utcFormat:ddt,utcParse:pdt,utcOffset:$Te,utcSequence:NTe,timeFormat:qOe,timeParse:hdt,timeOffset:MTe,timeSequence:PTe,timeUnitSpecifier:ETe,monthFormat:mdt,monthAbbrevFormat:gdt,dayFormat:ydt,dayAbbrevFormat:vdt,quarter:uTe,utcquarter:cTe,week:ATe,utcweek:TTe,dayofyear:STe,utcdayofyear:kTe,warn:Tdt,info:Ddt,debug:Ldt,extent(e){return Nf(e)},inScope:kdt,intersect:ZOe,clampRange:fTe,pinchDistance:$dt,pinchAngle:Idt,screen:rht,containerSize:sht,windowSize:iht,bandspace:Gdt,setdata:udt,pathShape:eht,panLinear:sTe,panLog:oTe,panPow:aTe,panSymlog:lTe,zoomLinear:kP,zoomLog:TP,zoomPow:F3,zoomSymlog:DP,encode:cdt,modify:Mdt,lassoAppend:aht,lassoPath:lht,intersectLasso:uht},fht=["view","item","group","xy","x","y"],dht="event.vega.",KOe="this.",T9={},JOe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Tt(HOe+e)}]`,functions:hht,constants:POe,visitors:T9},k5=BOe(JOe);function hht(e){const t=NOe(e);fht.forEach(n=>t[n]=dht+n);for(const n in x2)t[n]=KOe+n;return rr(t,_dt(e,x2,T9)),t}function zs(e,t,n){return arguments.length===1?x2[e]:(x2[e]=t,n&&(T9[e]=n),k5&&(k5.functions[e]=KOe+e),this)}zs("bandwidth",Vdt,Qa);zs("copy",Wdt,Qa);zs("domain",Ydt,Qa);zs("range",Zdt,Qa);zs("invert",Xdt,Qa);zs("scale",Kdt,Qa);zs("gradient",Jdt,Qa);zs("geoArea",Edt,Qa);zs("geoBounds",Sdt,Qa);zs("geoCentroid",Adt,Qa);zs("geoShape",Qdt,Qa);zs("geoScale",Cdt,Qa);zs("indata",ldt,wdt);zs("data",UOe,S9);zs("treePath",tht,S9);zs("treeAncestors",nht,S9);zs("vlSelectionTest",edt,E9);zs("vlSelectionIdTest",rdt,E9);zs("vlSelectionResolve",sdt,E9);zs("vlSelectionTuples",idt);function jf(e,t){const n={};let r;try{e=zt(e)?e:Tt(e)+"",r=w9(e)}catch{ot("Expression parse error: "+e)}r.visit(s=>{if(s.type!==LOe)return;const o=s.callee.name,a=JOe.visitors[o];a&&a(o,s.arguments,t,n)});const i=k5(r);return i.globals.forEach(s=>{const o=HOe+s;!Xt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:rr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function pht(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const mht=Lc(["rule"]),Nwe=Lc(["group","image","rect"]);function ght(e,t){let n="";return mht[t]||(e.x2&&(e.x?(Nwe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Nwe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function D9(e){return(e+"").toLowerCase()}function yht(e){return D9(e)==="operator"}function vht(e){return D9(e)==="collect"}function xw(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function bht(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var xht={operator:(e,t)=>xw(e,["_"],t.code),parameter:(e,t)=>xw(e,["datum","_"],t.code),event:(e,t)=>xw(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return xw(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Tt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=ght(r,n),i+="return m;",xw(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Tt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),bht(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function wht(e){const t=this;yht(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function _ht(e){const t=this;if(e.params){const n=t.get(e.id);n||ot("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Eht(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>Bwe(s,n,t)):Bwe(i,n,t)}return t}function Bwe(e,t,n){if(!e||!It(e))return e;for(let r=0,i=zwe.length,s;r<i;++r)if(s=zwe[r],Xt(e,s.key))return s.parse(e,t,n);return e}var zwe=[{key:"$ref",parse:Sht},{key:"$key",parse:Cht},{key:"$expr",parse:Aht},{key:"$field",parse:kht},{key:"$encode",parse:Dht},{key:"$compare",parse:Tht},{key:"$context",parse:Lht},{key:"$subflow",parse:Rht},{key:"$tupleid",parse:Fht}];function Sht(e,t){return t.get(e.$ref)||ot("Operator not defined: "+e.$ref)}function Aht(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=zl(t.parameterExpression(e.$expr),e.$fields))}function Cht(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=FP(e.$key,e.$flat,t.expr.codegen))}function kht(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=$u(e.$field,e.$name,t.expr.codegen))}function Tht(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Bt(e.$compare).map(i=>i&&i.$tupleid?_n:i);return t.fn[n]||(t.fn[n]=LP(r,e.$order,t.expr.codegen))}function Dht(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=zl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Lht(e,t){return t}function Rht(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function Fht(){return _n}function Oht(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ot("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Mht(e){var t=this,n=It(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ot("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const $ht={skip:!0};function Iht(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Pht(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],$ht)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Iu).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function QOe(e,t,n,r){return new eMe(e,t,n,r)}function eMe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||xht,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function jwe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}eMe.prototype=jwe.prototype={fork(){const e=new jwe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),vht(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[D9(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:pht,parseOperator:wht,parseOperatorParameters:_ht,parseParameters:Eht,parseStream:Oht,parseUpdate:Mht,getState:Iht,setState:Pht};function Nht(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),tMe(t,e.description()))}function tMe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Bht(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fO="default";function zht(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fO,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?zt(i)?i:i.user:fO,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return zt(r)||(i=r.item,r=r.user),T5(e,r&&r!==fO?r:i||r),i},{cursor:t})}function T5(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Fk(e,t){var n=e._runtime.data;return Xt(n,t)||ot("Unrecognized data set: "+t),n[t]}function jht(e,t){return arguments.length<2?Fk(this,e).values.value:TL.call(this,e,M0().remove(Iu).insert(t))}function TL(e,t){iDe(t)||ot("Second argument to changes must be a changeset.");const n=Fk(this,e);return n.modified=!0,this.pulse(n.input,t)}function Uht(e,t){return TL.call(this,e,M0().insert(t))}function qht(e,t){return TL.call(this,e,M0().remove(t))}function nMe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function rMe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function DL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Hht(e){var t=DL(e),n=nMe(e),r=rMe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Ght(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=DL(e),o=t.changedTouches?t.changedTouches[0]:t,s=pL(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Vht(e,n,s),t}function Vht(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;zt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Fa(e),item:Fa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Uwe="view",Wht="timer",Yht="window",Xht={trap:!1};function Zht(e){const t=rr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=Lc(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function iMe(e,t,n,r){e._eventListeners.push({type:n,sources:Bt(t),handler:r})}function Kht(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function $A(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||It(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Jht(e,t,n){var r=this,i=new HD(n),s=function(u,f){r.runAsync(null,()=>{e===Uwe&&Kht(r,t)&&u.preventDefault(),i.receive(Ght(r,u,f))})},o;if(e===Wht)$A(r,"timer",t)&&r.timer(s,t);else if(e===Uwe)$A(r,"view",t)&&r.addEventListener(t,s,Xht);else if(e===Yht?$A(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&$A(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);iMe(r,o,t,s)}return i}function qwe(e){return e.item}function Hwe(e){return e.item.mark.source}function Gwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Qht(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",qwe),Hwe,Gwe(e)),this.on(this.events("view","pointerout",qwe),Hwe,Gwe(t)),this}function ept(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ru(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const tpt="vega-bind",npt="vega-bind-name",rpt="vega-bind-radio";function ipt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=RP(r.debounce,i.update))),(r.input==null&&r.element?spt:apt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function spt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),iMe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(opt(i))}}function opt(e){return typeof Event<"u"?new Event(e):{type:e}}function apt(e,t,n,r){const i=r.signal(n.signal),s=ru("div",{class:tpt}),o=n.input==="radio"?s:s.appendChild(ru("label"));o.appendChild(ru("span",{class:npt},n.name||n.signal)),t.appendChild(s);let a=lpt;switch(n.input){case"checkbox":a=upt;break;case"select":a=cpt;break;case"radio":a=fpt;break;case"range":a=dpt;break}a(e,o,n,i)}function lpt(e,t,n,r){const i=ru("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function upt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=ru("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function cpt(e,t,n,r){const i=ru("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};Ok(o,r)&&(l.selected=!0),i.appendChild(ru("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(Ok(n.options[a],o)){i.selectedIndex=a;return}}}function fpt(e,t,n,r){const i=ru("span",{class:rpt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};Ok(o,r)&&(l.checked=!0);const u=ru("input",l);u.addEventListener("change",()=>e.update(o));const f=ru("label",{},(s[a]||o)+"");return f.prepend(u),i.appendChild(f),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Ok(a[u].value,o)&&(a[u].checked=!0)}}function dpt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Qg(s,i,100),a=ru("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=ru("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function Ok(e,t){return e===t||e+""==t+""}function sMe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,nMe(e),rMe(e),DL(e),i,s).background(e.background())}function L9(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function hpt(e,t,n,r){const i=new r(e.loader(),L9(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,DL(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function ppt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=mL(r);e=n._el=e?dO(n,e,!0):null,Nht(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||FE,a=e?s.renderer:s.headless;return n._renderer=a?sMe(n,n._renderer,e,a):null,n._handler=hpt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dO(n,t,!0):e.appendChild(ru("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=dO(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{ipt(n,l.element||t,l)})),n}function dO(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const ww=e=>+e||0,mpt=e=>({top:e,bottom:e,left:e,right:e});function Vwe(e){return It(e)?{top:ww(e.top),bottom:ww(e.bottom),left:ww(e.left),right:ww(e.right)}:mpt(ww(e))}async function R9(e,t,n,r){const i=mL(t),s=i&&i.headless;return s||ot("Unrecognized renderer type: "+t),await e.runAsync(),sMe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function gpt(e,t){e!==Sp.Canvas&&e!==Sp.SVG&&e!==Sp.PNG&&ot("Unrecognized image type: "+e);const n=await R9(this,e,t);return e===Sp.SVG?ypt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function ypt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function vpt(e,t){return(await R9(this,Sp.Canvas,e,t)).canvas()}async function bpt(e){return(await R9(this,Sp.SVG,e)).svg()}function xpt(e,t,n){return QOe(e,s1,x2,n).parse(t)}function wpt(e){var t=this._runtime.scales;return Xt(t,e)||ot("Unrecognized scale or projection: "+e),t[e].value}var oMe="width",aMe="height",F9="padding",Wwe={skip:!0};function lMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===F9?r.left+r.right:0)}function uMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===F9?r.top+r.bottom:0)}function _pt(e){var t=e._signals,n=t[oMe],r=t[aMe],i=t[F9];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=lMe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=uMe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Ept(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(oMe,n,Wwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(aMe,r,Wwe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Spt(e){return this._runtime.getState(e||{data:Apt,signals:Cpt,recurse:!0})}function Apt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function Cpt(e,t){return!(e==="parent"||t instanceof s1.proxy)}function kpt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Tpt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Jat(n,t))}function Dpt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Lpt(r))}function Lpt(e){return e==null?"":at(e)?cMe(e):It(e)&&!$p(e)?Rpt(e):e+""}function Rpt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?cMe(n):fMe(n))}).join(`
`)}function cMe(e){return"["+e.map(fMe).join(", ")+"]"}function fMe(e){return at(e)?"[]":It(e)&&!$p(e)?"{}":e}function Fpt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function dMe(e,t){const n=this;if(t=t||{},Dv.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=rr({},e.locale,t.locale);n.locale(YTe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Sp.Canvas,n._scenegraph=new oRe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Dpt,n._redraw=!0,n._handler=new FE().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Zht(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=xpt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:rr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=lMe(n,n._width),n._viewHeight=uMe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,_pt(n),Bht(n),zht(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function IA(e,t){return Xt(e._signals,t)?e._signals[t]:ot("Unrecognized signal name: "+Tt(t))}function hMe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Ywe(e,t,n,r){let i=hMe(n,r);return i||(i=L9(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Xwe(e,t,n){const r=hMe(t,n);return r&&t._targets.remove(r),e}Lt(dMe,Dv,{async evaluate(e,t,n){if(await Dv.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Hht(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&AC(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&tMe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=IA(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Vwe(e)):Vwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(mL(e)||ot("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Dv.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(IA(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Ept,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=L9(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Ywe(this,e,IA(this,e),t)},removeSignalListener(e,t){return Xwe(this,IA(this,e),t)},addDataListener(e,t){return Ywe(this,e,Fk(this,e).values,t)},removeDataListener(e,t){return Xwe(this,Fk(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T5(this,null);this._globalCursor=!!e,t&&T5(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Tpt,events:Jht,finalize:ept,hover:Qht,data:jht,change:TL,insert:Uht,remove:qht,scale:wpt,initialize:ppt,toImageURL:gpt,toCanvas:vpt,toSVG:bpt,getState:Spt,setState:kpt,_watchPixelRatio:Fpt});const Opt="view",Mk="[",$k="]",pMe="{",mMe="}",Mpt=":",gMe=",",$pt="@",Ipt=">",Ppt=/[[\]{}]/,Npt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let yMe,vMe;function hm(e,t,n){return yMe=t||Opt,vMe=n||Npt,bMe(e.trim()).map(D5)}function Bpt(e){return vMe[e]}function L_(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function bMe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=L_(e,i,gMe,Mk+pMe,$k+mMe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function D5(e){return e[0]==="["?zpt(e):jpt(e)}function zpt(e){const t=e.length;let n=1,r;if(n=L_(e,n,$k,Mk,$k),n===t)throw"Empty between selector: "+e;if(r=bMe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Ipt)throw"Expected '>' after between selector: "+e;r=r.map(D5);const i=D5(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function jpt(e){const t={source:yMe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===mMe){if(a=e.lastIndexOf(pMe),a>=0){try{r=Upt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===$pt&&(i=++a),l=L_(e,a,Mpt),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=L_(e,a,Mk),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=L_(e,a,$k),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==Mk)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Ppt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Bpt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Upt(e){const t=e.split(gMe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function qpt(e){return It(e)?e:{type:e||"pad"}}const _w=e=>+e||0,Hpt=e=>({top:e,bottom:e,left:e,right:e});function Gpt(e){return It(e)?e.signal?e:{top:_w(e.top),bottom:_w(e.bottom),left:_w(e.left),right:_w(e.right)}:Hpt(_w(e))}const Lo=e=>It(e)&&!at(e)?rr({},e):{value:e};function Zwe(e,t,n,r){return n!=null?(It(n)&&!at(n)||at(n)&&n.length&&It(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ia(e,t,n){for(const r in t)Zwe(e,r,t[r]);for(const r in n)Zwe(e,r,n[r],"update")}function fb(e,t,n){for(const r in t)n&&Xt(n,r)||(e[r]=rr(e[r]||{},t[r]));return e}function iv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const O9="mark",M9="frame",$9="scope",Vpt="axis",Wpt="axis-domain",Ypt="axis-grid",Xpt="axis-label",Zpt="axis-tick",Kpt="axis-title",Jpt="legend",Qpt="legend-band",emt="legend-entry",tmt="legend-gradient",xMe="legend-label",nmt="legend-symbol",rmt="legend-title",imt="title",smt="title-text",omt="title-subtitle";function amt(e,t,n,r,i){const s={},o={};let a,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!iv(l,e)&&hO(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===M9?i.group:n===O9?rr({},i.mark,i[t]):null;for(l in f)u=iv(l,e)||(l==="fill"||l==="stroke")&&(iv("fill",e)||iv("stroke",e)),u||hO(s,l,f[l]);Bt(r).forEach(c=>{const d=i.style&&i.style[c];for(const h in d)iv(h,e)||hO(s,h,d[h])}),e=rr({},e);for(l in s)f=s[l],f.signal?(a=a||{})[l]=f:o[l]=f;return e.enter=rr(o,e.enter),a&&(e.update=rr(a,e.update)),e}function hO(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const wMe=e=>zt(e)?Tt(e):e.signal?`(${e.signal})`:_Me(e);function LL(e){if(e.gradient!=null)return umt(e);let t=e.signal?`(${e.signal})`:e.color?lmt(e.color):e.field!=null?_Me(e.field):e.value!==void 0?Tt(e.value):void 0;return e.scale!=null&&(t=cmt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${qC(e.exponent)})`),e.mult!=null&&(t+=`*${qC(e.mult)}`),e.offset!=null&&(t+=`+${qC(e.offset)}`),e.round&&(t=`round(${t})`),t}const PA=(e,t,n,r)=>`(${e}(${[t,n,r].map(LL).join(",")})+'')`;function lmt(e){return e.c?PA("hcl",e.h,e.c,e.l):e.h||e.s?PA("hsl",e.h,e.s,e.l):e.l||e.a?PA("lab",e.l,e.a,e.b):e.r||e.g||e.b?PA("rgb",e.r,e.g,e.b):null}function umt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Tt(n));for(;t.length&&Hr(t)==null;)t.pop();return t.unshift(wMe(e.gradient)),`gradient(${t.join(",")})`}function qC(e){return It(e)?"("+LL(e)+")":e}function _Me(e){return EMe(It(e)?e:{datum:e})}function EMe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ot("Invalid field reference: "+Tt(e));return e.signal||(r=zt(r)?Yf(r).map(Tt).join("]["):EMe(r)),t+"["+r+"]"}function cmt(e,t){const n=wMe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+qC(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function fmt(e){let t="";return e.forEach(n=>{const r=LL(n);t+=n.test?`(${n.test})?${r}:`:r}),Hr(t)===":"&&(t+="null"),t}function SMe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=amt(e,t,n,r,i.config);for(const a in e)o[a]=dmt(e[a],t,s,i);return s}function dmt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=pmt(hmt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function hmt(e){return at(e)?fmt(e):LL(e)}function pmt(e,t,n,r){const i=jf(e,t);return i.$fields.forEach(s=>r[s]=1),rr(n,i.$params),i.$expr}const mmt="outer",gmt=["value","update","init","react","bind"];function Kwe(e,t){ot(e+' for "outer" push: '+Tt(t))}function AMe(e,t){const n=e.name;if(e.push===mmt)t.signals[n]||Kwe("No prior signal definition",n),gmt.forEach(r=>{e[r]!==void 0&&Kwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function L5(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function RL(e,t,n,r){return new L5(e,t,n,r)}function Ik(e,t){return RL("operator",e,t)}function wn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function w2(e,t){return t?{$field:e,$name:t}:{$field:e}}const R5=w2("key");function Jwe(e,t){return{$compare:e,$order:t}}function ymt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const vmt="ascending",bmt="descending";function xmt(e){return It(e)?(e.order===bmt?"-":"+")+FL(e.op,e.field):""}function FL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const I9="scope",F5="view";function yo(e){return e&&e.signal}function wmt(e){return e&&e.expr}function HC(e){if(yo(e))return!0;if(It(e)){for(const t in e)if(HC(e[t]))return!0}return!1}function fc(e,t){return e??t}function Hg(e){return e&&e.signal||e}const Qwe="timer";function _2(e,t){return(e.merge?Emt:e.stream?Smt:e.type?Amt:ot("Invalid stream specification: "+Tt(e)))(e,t)}function _mt(e){return e===I9?F5:e||F5}function Emt(e,t){const n=e.merge.map(i=>_2(i,t)),r=P9({merge:n},e,t);return t.addStream(r).id}function Smt(e,t){const n=_2(e.stream,t),r=P9({stream:n},e,t);return t.addStream(r).id}function Amt(e,t){let n;e.type===Qwe?(n=t.event(Qwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(_mt(e.source),e.type);const r=P9({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function P9(e,t,n){let r=t.between;return r&&(r.length!==2&&ot('Stream "between" parameter must have 2 entries: '+Tt(t)),e.between=[_2(r[0],n),_2(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Cmt(t.marktype,t.markname,t.markrole)),t.source===I9&&r.push("inScope(event.item)"),r.length&&(e.filter=jf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Cmt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const kmt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Tmt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ot("Signal update missing events specification."),zt(s)&&(s=hm(s,t.isSubscope()?I9:F5)),s=Bt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Lmt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ot("Signal encode and update are mutually exclusive."),o="encode(item(),"+Tt(r)+")"),i.update=zt(o)?jf(o,t):o.expr!=null?jf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:kmt,$params:{$value:t.signalRef(o.signal)}}:ot("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(rr(Dmt(l,t),i)))}function Dmt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):_2(e,t)}}function Lmt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Rmt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ot("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=jf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Tmt(i,t,n.id))}const Pi=e=>(t,n,r)=>RL(e,n,t||void 0,r),CMe=Pi("aggregate"),Fmt=Pi("axisticks"),kMe=Pi("bound"),zc=Pi("collect"),e_e=Pi("compare"),Omt=Pi("datajoin"),TMe=Pi("encode"),Mmt=Pi("expression"),$mt=Pi("facet"),Imt=Pi("field"),Pmt=Pi("key"),Nmt=Pi("legendentries"),Bmt=Pi("load"),zmt=Pi("mark"),jmt=Pi("multiextent"),Umt=Pi("multivalues"),qmt=Pi("overlap"),Hmt=Pi("params"),DMe=Pi("prefacet"),Gmt=Pi("projection"),Vmt=Pi("proxy"),Wmt=Pi("relay"),LMe=Pi("render"),Ymt=Pi("scale"),P0=Pi("sieve"),Xmt=Pi("sortitems"),RMe=Pi("viewlayout"),Zmt=Pi("values");let Kmt=0;const FMe={min:"min",max:"max",count:"sum"};function Jmt(e,t){const n=e.type||"linear";vLe(n)||ot("Unrecognized scale type: "+Tt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Qmt(e,t){const n=t.getScale(e.name).params;let r;n.domain=OMe(e.domain,e,t),e.range!=null&&(n.range=$Me(e,t,n)),e.interpolate!=null&&ugt(e.interpolate,n),e.nice!=null&&(n.nice=lgt(e.nice,t)),e.bins!=null&&(n.bins=agt(e.bins,t));for(r in e)Xt(n,r)||r==="name"||(n[r]=Lu(e[r],t))}function Lu(e,t){return It(e)?e.signal?t.signalRef(e.signal):ot("Unsupported object: "+Tt(e)):e}function GC(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Lu(n,t))}function OL(e){ot("Can not find data set: "+Tt(e))}function OMe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ot("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?egt:e.fields?ngt:tgt)(e,t,n)}function egt(e,t,n){return e.map(r=>Lu(r,n))}function tgt(e,t,n){const r=n.getData(e.data);return r||OL(e.data),u1(t.type)?r.valuesRef(n,e.field,MMe(e.sort,!1)):wLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ngt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=zt(o)?{data:r,field:o}:at(o)||o.signal?rgt(o,n):o,s.push(o),s),[]);return(u1(t.type)?igt:wLe(t.type)?sgt:ogt)(e,n,i)}function rgt(e,t){const n="_:vega:_"+Kmt++,r=zc({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Tt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,P0({})]),{data:n,field:"data"}}function igt(e,t,n){const r=MMe(e.sort,!0);let i,s;const o=n.map(u=>{const f=t.getData(u.data);return f||OL(u.data),f.countsRef(t,u.field,r)}),a={groupby:R5,pulse:o};r&&(i=r.op||"count",s=r.field?FL(i,r.field):"count",a.ops=[FMe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(CMe(a));const l=t.add(zc({pulse:wn(i)}));return s=t.add(Zmt({field:R5,sort:t.sortRef(r),pulse:wn(l)})),wn(s)}function MMe(e,t){return e&&(!e.field&&!e.op?It(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ot("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!FMe[e.op]&&ot("Multiple domain scales can not be sorted using "+e.op)),e}function sgt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||OL(i.data),s.domainRef(t,i.field)});return wn(t.add(Umt({values:r})))}function ogt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||OL(i.data),s.extentRef(t,i.field)});return wn(t.add(jmt({extents:r})))}function agt(e,t){return e.signal||at(e)?GC(e,t):t.objectProperty(e)}function lgt(e,t){return e.signal?t.signalRef(e.signal):It(e)?{interval:Lu(e.interval),step:Lu(e.step)}:Lu(e)}function ugt(e,t){t.interpolate=Lu(e.type||e),e.gamma!=null&&(t.interpolateGamma=Lu(e.gamma))}function $Me(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(zt(i)){if(r&&Xt(r,i))return e=rr({},e,{range:r[i]}),$Me(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=u1(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ot("Unrecognized scale range value: "+Tt(i))}else if(i.scheme){n.scheme=at(i.scheme)?GC(i.scheme,t):Lu(i.scheme,t),i.extent&&(n.schemeExtent=GC(i.extent,t)),i.count&&(n.schemeCount=Lu(i.count,t));return}else if(i.step){n.rangeStep=Lu(i.step,t);return}else{if(u1(e.type)&&!at(i))return OMe(i,e,t);at(i)||ot("Unsupported range type: "+Tt(i))}return i.map(s=>(at(s)?GC:Lu)(s,t))}function cgt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=O5(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=O5(n[i],i,t));t.addProjection(e.name,r)}function O5(e,t,n){return at(e)?e.map(r=>O5(r,t,n)):It(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ot("Unsupported parameter object: "+Tt(e)):e}const jc="top",db="left",hb="right",Kp="bottom",IMe="center",fgt="vertical",dgt="start",hgt="middle",pgt="end",M5="index",N9="label",mgt="offset",v1="perc",ggt="perc2",Fu="value",jE="guide-label",B9="guide-title",ygt="group-title",vgt="group-subtitle",t_e="symbol",VC="gradient",$5="discrete",I5="size",bgt="shape",xgt="fill",wgt="stroke",_gt="strokeWidth",Egt="strokeDash",Sgt="opacity",z9=[I5,bgt,xgt,wgt,_gt,Egt,Sgt],UE={name:1,style:1,interactive:1},Yr={value:0},Ou={value:1},ML="group",PMe="rect",j9="rule",Agt="symbol",N0="text";function E2(e){return e.type=ML,e.interactive=e.interactive||!1,e}function jl(e,t){const n=(r,i)=>fc(e[r],fc(t[r],i));return n.isVertical=r=>fgt===fc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>fc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>fc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>fc(e.columns,fc(t.columns,+n.isVertical(!0))),n}function NMe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Cgt(e,t,n){const r=t.config.style[n];return r&&r[e]}function $L(e,t,n){return`item.anchor === '${dgt}' ? ${e} : item.anchor === '${pgt}' ? ${t} : ${n}`}const U9=$L(Tt(db),Tt(hb),Tt(IMe));function kgt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},It(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function BMe(e,t){return t?e?It(e)?Object.assign({},e,{offset:BMe(e.offset,t)}):{value:e,offset:t}:t:e}function fu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=fb(e.encode,t,UE)):e.interactive=!1,e}function Tgt(e,t,n,r){const i=jl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,f,c,d;s?(u=[0,1],f=[0,0],c=o,d=a):(u=[0,0],f=[1,0],c=a,d=o);const h={enter:l={opacity:Yr,x:Yr,y:Yr,width:Lo(c),height:Lo(d)},update:rr({},l,{opacity:Ou,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:Yr}};return ia(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fu({type:PMe,role:tmt,encode:h},r)}function Dgt(e,t,n,r,i){const s=jl(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,f,c,d,h="";o?(u="y",c="y2",f="x",d="width",h="1-"):(u="x",c="x2",f="y",d="height");const p={opacity:Yr,fill:{scale:t,field:Fu}};p[u]={signal:h+"datum."+v1,mult:l},p[f]=Yr,p[c]={signal:h+"datum."+ggt,mult:l},p[d]=Lo(a);const g={enter:p,update:rr({},p,{opacity:Ou}),exit:{opacity:Yr}};return ia(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),fu({type:PMe,role:Qpt,key:Fu,from:i,encode:g},r)}const Lgt=`datum.${v1}<=0?"${db}":datum.${v1}>=1?"${hb}":"${IMe}"`,Rgt=`datum.${v1}<=0?"${Kp}":datum.${v1}>=1?"${jc}":"${hgt}"`;function n_e(e,t,n,r){const i=jl(e,t),s=i.isVertical(),o=Lo(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,f,c,d,h="";const p={enter:u={opacity:Yr},update:f={opacity:Ou,text:{field:N9}},exit:{opacity:Yr}};return ia(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:fc(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=f.baseline={signal:Rgt},c="y",d="x",h="1-"):(u.align=f.align={signal:Lgt},u.baseline={value:"top"},c="x",d="y"),u[c]=f[c]={signal:h+"datum."+v1,mult:a},u[d]=f[d]=o,o.offset=fc(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+M5}:void 0,fu({type:N0,role:xMe,style:jE,key:Fu,from:r,encode:p,overlap:l},n)}function Fgt(e,t,n,r,i){const s=jl(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),f=s("symbolOffset"),c={data:"value"},d=`(${i}) ? datum.${mgt} : datum.${I5}`,h=u?Lo(u):{field:I5},p=`datum.${M5}`,g=`max(1, ${i})`;let v,x,y,w,_;h.mult=.5,v={enter:x={opacity:Yr,x:{signal:d,mult:.5,offset:f},y:h},update:y={opacity:Ou,x:x.x,y:x.y},exit:{opacity:Yr}};let A=null,T=null;e.fill||(A=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),ia(v,{fill:s("symbolFillColor",A),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),z9.forEach(O=>{e[O]&&(y[O]=x[O]={scale:e[O],field:Fu})});const D=fu({type:Agt,role:nmt,key:Fu,from:c,clip:u?!0:void 0,encode:v},n.symbols),k=Lo(f);k.offset=s("labelOffset"),v={enter:x={opacity:Yr,x:{signal:d,offset:k},y:h},update:y={opacity:Ou,text:{field:N9},x:x.x,y:x.y},exit:{opacity:Yr}},ia(v,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=fu({type:N0,role:xMe,style:jE,key:Fu,from:c,encode:v},n.labels);return v={enter:{noBound:{value:!u},width:Yr,height:u?Lo(u):Yr,opacity:Yr},exit:{opacity:Yr},update:y={opacity:Ou,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${g})`,y.row.signal=`${p}%${w}`,y.column.signal=`floor(${p} / ${w})`,_={field:["row",p]}):(y.row.signal=`floor(${p} / ${g})`,y.column.signal=`${p} % ${g}`,_={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:M5}},E2({role:$9,from:r,encode:fb(v,o,UE),marks:[D,R],name:l,interactive:a,sort:_})}function Ogt(e,t){const n=jl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const q9='item.orient === "left"',H9='item.orient === "right"',IL=`(${q9} || ${H9})`,Mgt=`datum.vgrad && ${IL}`,$gt=$L('"top"','"bottom"','"middle"'),Igt=$L('"right"','"left"','"center"'),Pgt=`datum.vgrad && ${H9} ? (${Igt}) : (${IL} && !(datum.vgrad && ${q9})) ? "left" : ${U9}`,Ngt=`item._anchor || (${IL} ? "middle" : "start")`,Bgt=`${Mgt} ? (${q9} ? -90 : 90) : 0`,zgt=`${IL} ? (datum.vgrad ? (${H9} ? "bottom" : "top") : ${$gt}) : "top"`;function jgt(e,t,n,r){const i=jl(e,t),s={enter:{opacity:Yr},update:{opacity:Ou,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Yr}};return ia(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Ngt},angle:{signal:Bgt},align:{signal:Pgt},baseline:{signal:zgt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fu({type:N0,role:rmt,style:B9,from:r,encode:s},n)}function Ugt(e,t){let n;return It(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+r_e(e.path)+")":e.sphere&&(n="geoShape("+r_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function r_e(e){return It(e)&&e.signal?e.signal:Tt(e)}function zMe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===ML?$9:t||O9}function qgt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||zMe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Hgt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function G9(e,t){const n=aDe(e.type);n||ot("Unrecognized transform type: "+Tt(e.type));const r=RL(n.type.toLowerCase(),null,jMe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function jMe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Ggt(o,t,n)}return r}function Ggt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Vgt(e,t,n);if(i===void 0){e.required&&ot("Missing required "+Tt(t.type)+" parameter: "+Tt(e.name));return}else{if(r==="param")return Wgt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!yo(i)?i.map(s=>i_e(e,s,n)):i_e(e,i,n)}function i_e(e,t,n){const r=e.type;if(yo(t))return o_e(r)?ot("Expression references can not be signals."):pO(r)?n.fieldRef(t):a_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pO(r);return i&&Ygt(t)?n.exprRef(t.expr,t.as):i&&Xgt(t)?w2(t.field,t.as):o_e(r)?jf(t,n):Zgt(r)?wn(n.getData(t).values):pO(r)?w2(t):a_e(r)?n.compareRef(t):t}}function Vgt(e,t,n){return zt(t.from)||ot('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Wgt(e,t,n){const r=t[e.name];return e.array?(at(r)||ot("Expected an array of sub-parameters. Instead: "+Tt(r)),r.map(i=>s_e(e,i,n))):s_e(e,r,n)}function s_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ot("Unsupported parameter: "+Tt(t));const s=rr(jMe(i,t,n),i.key);return wn(n.add(Hmt(s)))}const Ygt=e=>e&&e.expr,Xgt=e=>e&&e.field,Zgt=e=>e==="data",o_e=e=>e==="expr",pO=e=>e==="field",a_e=e=>e==="compare";function Kgt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ot("Only group marks can be faceted."),r.field!=null?o=a=WC(r,n):(e.data?a=wn(n.getData(e.data).aggregate):(s=G9(rr({type:"aggregate",groupby:Bt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=WC(r,n),o=a=wn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=wn(n.add(zc(null,[{}]))),o||(o=WC(e,n)),{key:i,pulse:o,parent:a}}function WC(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:wn(t.getData(e.data).output)}function d0(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}d0.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=wn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new d0(e,s,i,r,o)};function UMe(e){return zt(e)?e:null}function l_e(e,t,n){const r=FL(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Ew(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=xmt(s);let u=UMe(i),f,c;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=a[u]),!f){const d=s?{field:R5,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:wn(t.output)};l&&(d.sort=e.sortRef(s)),c=e.add(RL(r,void 0,d)),o&&(t.index[i]=c),f=wn(c),u!=null&&(a[u]=f)}return f}d0.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=UMe(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&l_e(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:wn(r.output)},n&&n.field&&l_e(e,l,n),a=e.add(CMe(l)),o=e.add(zc({pulse:wn(a)})),o={agg:a,ref:wn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return wn(this.values)},extentRef(e,t){return Ew(e,this,"extent","extent",t,!1)},domainRef(e,t){return Ew(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Ew(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Ew(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Ew(e,this,"indata","tupleindex",t,!0,!0)}};function Jgt(e,t,n){const r=e.from.facet,i=r.name,s=WC(r,t);let o;r.name||ot("Facet must have a name: "+Tt(r)),r.data||ot("Facet must reference a data set: "+Tt(r)),r.field?o=t.add(DMe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add($mt({key:t.keyRef(r.groupby),group:wn(t.proxy(n.parent)),pulse:s})):ot("Facet must specify groupby or field: "+Tt(r));const a=t.fork(),l=a.add(zc()),u=a.add(P0({pulse:wn(l)}));a.addData(i,new d0(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Qgt(e,t,n){const r=t.add(DMe({pulse:n.pulse})),i=t.fork();i.add(P0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function qMe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(Ik()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(c=>c??"null").join(",")+"),0)",f=jf(u,t);l.update=f.$expr,l.params=f.$params}function PL(e,t){const n=zMe(e),r=e.type===ML,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===$9||n===M9,a,l,u,f,c,d,h;const p=n===O9||o||i,g=Kgt(e.from,r,t);l=t.add(Omt({key:g.key||(e.key?w2(e.key):void 0),pulse:g.pulse,clean:!r}));const v=wn(l);l=u=t.add(zc({pulse:v})),l=t.add(zmt({markdef:qgt(e),interactive:Hgt(e.interactive,t),clip:Ugt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:wn(l)}));const x=wn(l);l=f=t.add(TMe(SMe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const D=G9(T,t),k=D.metadata;(k.generates||k.changes)&&ot("Mark transforms should not generate new data."),k.nomod||(f.params.mod=!0),D.params.pulse=wn(l),t.add(l=D)}),e.sort&&(l=t.add(Xmt({sort:t.compareRef(e.sort),pulse:wn(l)})));const y=wn(l);(i||o)&&(o=t.add(RMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:y})),d=wn(o));const w=t.add(kMe({mark:x,pulse:d||y}));h=wn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(y,d||h,v),i?Jgt(e,t,g):p?Qgt(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=e0t(s,h,t));const _=t.add(LMe({pulse:h})),A=t.add(P0({pulse:wn(_)},void 0,t.parent()));e.name!=null&&(c=e.name,t.addData(c,new d0(t,u,_,A)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&ot("Marks only support modify triggers."),qMe(T,t,c)}))}function e0t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:yo(s)?n.signalRef(s.signal):s,method:yo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=yo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return wn(n.add(qmt(o)))}function t0t(e,t){const n=t.config.legend,r=e.encode||{},i=jl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let f=0,c,d,h;z9.forEach(w=>e[w]?(u[w]=e[w],f=f||e[w]):0),f||ot("Missing valid scale for legend.");const p=n0t(e,t.scaleType(f)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},v=wn(t.add(zc(null,[g]))),x={enter:{x:{value:0},y:{value:0}}},y=wn(t.add(Nmt(d={type:p,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===VC?(h=[Tgt(e,f,n,r.gradient),n_e(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${Hg(i.gradientLength())})/100))`)):p===$5?h=[Dgt(e,f,n,r.gradient,y),n_e(e,n,r.labels,y)]:(c=Ogt(e,n),h=[Fgt(e,n,r,y,Hg(c.columns))],d.size=s0t(e,t,h[0].marks)),h=[E2({role:emt,from:v,encode:x,marks:h,layout:c,interactive:a})],g.title&&h.push(jgt(e,n,r.title,v)),PL(E2({role:Jpt,from:v,encode:fb(i0t(i,e,n),s,UE),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function n0t(e,t){let n=e.type||t_e;return!e.type&&r0t(e)===1&&(e.fill||e.stroke)&&(n=G8(t)?VC:k6(t)?$5:t_e),n!==VC?n:k6(t)?$5:VC}function r0t(e){return z9.reduce((t,n)=>t+(e[n]?1:0),0)}function i0t(e,t,n){const r={enter:{},update:{}};return ia(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function s0t(e,t,n){const r=Hg(u_e("size",e,n)),i=Hg(u_e("strokeWidth",e,n)),s=Hg(o0t(n[1].encode,t,jE));return jf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function u_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:NMe(e,n[0].encode)}function o0t(e,t,n){return NMe("fontSize",e)||Cgt("fontSize",t,n)}const a0t=`item.orient==="${db}"?-90:item.orient==="${hb}"?90:0`;function l0t(e,t){e=zt(e)?{text:e}:e;const n=jl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},f=wn(t.add(zc(null,[u])));return l.push(f0t(e,n,u0t(e),f)),e.subtitle&&l.push(d0t(e,n,r.subtitle,f)),PL(E2({role:imt,from:f,encode:c0t(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function u0t(e){const t=e.encode;return t&&t.title||rr({name:e.name,interactive:e.interactive,style:e.style},t)}function c0t(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:U9},angle:{signal:a0t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),fb(n,t,UE)}function f0t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:N0,role:smt,style:ygt,from:r,encode:o},n)}function d0t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ia(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fu({type:N0,role:omt,style:vgt,from:r,encode:o},n)}function h0t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(G9(r,t))}),e.on&&e.on.forEach(r=>{qMe(r,t,e.name)}),t.addDataPipeline(e.name,p0t(e,t,n))}function p0t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,f,c;for(e.values?yo(e.values)||HC(e.format)?(r.push(c_e(t,e)),r.push(i=ag())):r.push(i=ag({$ingest:e.values,$format:e.format})):e.url?HC(e.url)||HC(e.format)?(r.push(c_e(t,e)),r.push(i=ag())):r.push(i=ag({$request:e.url,$format:e.format})):e.source&&(i=a=Bt(e.source).map(d=>wn(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],c=f.metadata,!i&&!c.source&&r.push(i=ag()),r.push(f),c.generates&&(o=!0),c.modifies&&!o&&(s=!0),c.source?i=f:c.changes&&(i=null);return a&&(u=a.length-1,r[0]=Wmt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,ag())),i||r.push(ag()),r.push(P0({})),r}function ag(e){const t=zc({},e);return t.metadata={source:!0},t}function c_e(e,t){return Bmt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const HMe=e=>e===Kp||e===jc,NL=(e,t,n)=>yo(e)?v0t(e.signal,t,n):e===db||e===jc?t:n,Ro=(e,t,n)=>yo(e)?g0t(e.signal,t,n):HMe(e)?t:n,Sc=(e,t,n)=>yo(e)?y0t(e.signal,t,n):HMe(e)?n:t,GMe=(e,t,n)=>yo(e)?b0t(e.signal,t,n):e===jc?{value:t}:{value:n},m0t=(e,t,n)=>yo(e)?x0t(e.signal,t,n):e===hb?{value:t}:{value:n},g0t=(e,t,n)=>VMe(`${e} === '${jc}' || ${e} === '${Kp}'`,t,n),y0t=(e,t,n)=>VMe(`${e} !== '${jc}' && ${e} !== '${Kp}'`,t,n),v0t=(e,t,n)=>V9(`${e} === '${db}' || ${e} === '${jc}'`,t,n),b0t=(e,t,n)=>V9(`${e} === '${jc}'`,t,n),x0t=(e,t,n)=>V9(`${e} === '${hb}'`,t,n),VMe=(e,t,n)=>(t=t!=null?Lo(t):t,n=n!=null?Lo(n):n,f_e(t)&&f_e(n)?(t=t?t.signal||Tt(t.value):null,n=n?n.signal||Tt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[rr({test:e},t)].concat(n||[])),f_e=e=>e==null||Object.keys(e).length===1,V9=(e,t,n)=>({signal:`${e} ? (${xv(t)}) : (${xv(n)})`}),w0t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${db}' ? (${xv(r)}) : `:"")+(n!=null?`${e} === '${Kp}' ? (${xv(n)}) : `:"")+(i!=null?`${e} === '${hb}' ? (${xv(i)}) : `:"")+(t!=null?`${e} === '${jc}' ? (${xv(t)}) : `:"")+"(null)"}),xv=e=>yo(e)?e.signal:e==null?null:Tt(e),_0t=(e,t)=>t===0?0:yo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Rv=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Gy(e,t,n,r){let i;if(t&&Xt(t,e))return t[e];if(Xt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[B9][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[jE][i]}return null}function d_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function E0t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(yo(o)){const c=d_e([n.axisX,n.axisY]),d=d_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of c)a[u]=Ro(o,Gy(u,n.axisX,i,r),Gy(u,n.axisY,i,r));l={};for(u of d)l[u]=w0t(o.signal,Gy(u,n.axisTop,i,r),Gy(u,n.axisBottom,i,r),Gy(u,n.axisLeft,i,r),Gy(u,n.axisRight,i,r))}else a=o===jc||o===Kp?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?rr({},i,a,l,s):i}function S0t(e,t,n,r){const i=jl(e,t),s=e.orient;let o,a;const l={enter:o={opacity:Yr},update:a={opacity:Ou},exit:{opacity:Yr}};ia(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=h_e(e,0),f=h_e(e,1);return o.x=a.x=Ro(s,u,Yr),o.x2=a.x2=Ro(s,f),o.y=a.y=Sc(s,u,Yr),o.y2=a.y2=Sc(s,f),fu({type:j9,role:Wpt,from:r,encode:l},n)}function h_e(e,t){return{scale:e.scale,range:t}}function A0t(e,t,n,r,i){const s=jl(e,t),o=e.orient,a=e.gridScale,l=NL(o,1,-1),u=C0t(e.offset,l);let f,c,d;const h={enter:f={opacity:Yr},update:d={opacity:Ou},exit:c={opacity:Yr}};ia(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Fu,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Ro(o,{signal:"height"},{signal:"width"}),v=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},x=a?{scale:a,range:1,mult:l,offset:u}:rr(g,{mult:l,offset:u});return f.x=d.x=Ro(o,p,v),f.y=d.y=Sc(o,p,v),f.x2=d.x2=Sc(o,x),f.y2=d.y2=Ro(o,x),c.x=Ro(o,p),c.y=Sc(o,p),fu({type:j9,role:Ypt,key:Fu,from:r,encode:h},n)}function C0t(e,t){if(t!==1)if(!It(e))e=yo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=rr({},e);for(;n.mult!=null;)if(It(n.mult))n=n.mult=rr({},n.mult);else return n.mult=yo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function k0t(e,t,n,r,i,s){const o=jl(e,t),a=e.orient,l=NL(a,-1,1);let u,f,c;const d={enter:u={opacity:Yr},update:c={opacity:Ou},exit:f={opacity:Yr}};ia(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Lo(i);h.mult=l;const p={scale:e.scale,field:Fu,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return c.y=u.y=Ro(a,Yr,p),c.y2=u.y2=Ro(a,h),f.x=Ro(a,p),c.x=u.x=Sc(a,Yr,p),c.x2=u.x2=Sc(a,h),f.y=Sc(a,p),fu({type:j9,role:Zpt,key:Fu,from:r,encode:d},n)}function mO(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function T0t(e,t,n,r,i,s){const o=jl(e,t),a=e.orient,l=e.scale,u=NL(a,-1,1),f=Hg(o("labelFlush")),c=Hg(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=f===0||!!f,g;const v=Lo(i);v.mult=u,v.offset=Lo(o("labelPadding")||0),v.offset.mult=u;const x={scale:l,field:Fu,band:.5,offset:BMe(s.offset,o("labelOffset"))},y=Ro(a,p?mO(l,f,'"left"','"right"','"center"'):{value:"center"},m0t(a,"left","right")),w=Ro(a,GMe(a,"bottom","top"),p?mO(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),_=mO(l,f,`-(${c})`,c,0);p=p&&c;const A={opacity:Yr,x:Ro(a,x,v),y:Sc(a,x,v)},T={enter:A,update:g={opacity:Ou,text:{field:N9},x:A.x,y:A.y,align:y,baseline:w},exit:{opacity:Yr,x:A.x,y:A.y}};ia(T,{dx:!d&&p?Ro(a,_):null,dy:!h&&p?Sc(a,_):null}),ia(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const D=o("labelBound");let k=o("labelOverlap");return k=k||D?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:D?{scale:l,orient:a,tolerance:D}:null}:void 0,g.align!==y&&(g.align=Rv(g.align,y)),g.baseline!==w&&(g.baseline=Rv(g.baseline,w)),fu({type:N0,role:Xpt,style:jE,key:Fu,from:r,encode:T,overlap:k},n)}function D0t(e,t,n,r){const i=jl(e,t),s=e.orient,o=NL(s,-1,1);let a,l;const u={enter:a={opacity:Yr,anchor:Lo(i("titleAnchor",null)),align:{signal:U9}},update:l=rr({},a,{opacity:Ou,text:Lo(e.title)}),exit:{opacity:Yr}},f={signal:`lerp(range("${e.scale}"), ${$L(0,1,.5)})`};return l.x=Ro(s,f),l.y=Sc(s,f),a.angle=Ro(s,Yr,_0t(o,90)),a.baseline=Ro(s,GMe(s,Kp,jc),{value:Kp}),l.angle=a.angle,l.baseline=a.baseline,ia(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),L0t(i,s,u,n),u.update.align=Rv(u.update.align,a.align),u.update.angle=Rv(u.update.angle,a.angle),u.update.baseline=Rv(u.update.baseline,a.baseline),fu({type:N0,role:Kpt,style:B9,from:r,encode:u},n)}function L0t(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Rv(Lo(a),n.update[l]),!1):!iv(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Lo(o):Ro(t,Lo(o),Lo(s))}function R0t(e,t){const n=E0t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=jl(e,n),u=kgt(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},c=wn(t.add(zc({},[f]))),d=wn(t.add(Fmt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return f.grid&&h.push(A0t(e,n,r.grid,d,u)),f.ticks&&(p=l("tickSize"),h.push(k0t(e,n,r.ticks,d,p,u))),f.labels&&(p=f.ticks?p:0,h.push(T0t(e,n,r.labels,d,p,u))),f.domain&&h.push(S0t(e,n,r.domain,c)),f.title&&h.push(D0t(e,n,r.title,c)),PL(E2({role:Vpt,from:c,encode:fb(F0t(l,e),i,UE),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function F0t(e,t){const n={enter:{},update:{}};return ia(n,{orient:e("orient"),offset:e("offset")||0,position:fc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function WMe(e,t,n){const r=Bt(e.signals),i=Bt(e.scales);return n||r.forEach(s=>AMe(s,t)),Bt(e.projections).forEach(s=>cgt(s,t)),i.forEach(s=>Jmt(s,t)),Bt(e.data).forEach(s=>h0t(s,t)),i.forEach(s=>Qmt(s,t)),(n||r).forEach(s=>Rmt(s,t)),Bt(e.axes).forEach(s=>R0t(s,t)),Bt(e.marks).forEach(s=>PL(s,t)),Bt(e.legends).forEach(s=>t0t(s,t)),e.title&&l0t(e.title,t),t.parseLambdas(),t}const O0t=e=>fb({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function M0t(e,t){const n=t.config,r=wn(t.root=t.add(Ik())),i=$0t(e,n);i.forEach(u=>AMe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(zc()),o=t.add(TMe(SMe(O0t(e.encode),ML,M9,e.style,t,{pulse:wn(s)}))),a=t.add(RMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:wn(o)}));t.operators.pop(),t.pushState(wn(o),wn(a),null),WMe(e,t,i),t.operators.push(a);let l=t.add(kMe({mark:r,pulse:wn(a)}));return l=t.add(LMe({pulse:wn(l)})),l=t.add(P0({pulse:wn(l)})),t.addData("root",new d0(t,s,s,l)),t}function Sw(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function $0t(e,t){const n=o=>fc(e[o],t[o]),r=[Sw("background",n("background")),Sw("autosize",qpt(n("autosize"))),Sw("padding",Gpt(n("padding"))),Sw("width",n("width")||0),Sw("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Bt(e.signals).forEach(o=>{Xt(i,o.name)?o=rr(i[o.name],o):r.push(o),s[o.name]=o}),Bt(t.signals).forEach(o=>{!Xt(s,o.name)&&!Xt(i,o.name)&&r.push(o)}),r}function YMe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function p_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}YMe.prototype=p_e.prototype={parse(e){return WMe(e,this)},fork(){return new p_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof L5?wn(e):e;return this.add(Vmt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(wn(this.add(P0({pulse:e})))),this._parent.push(t),this._lookup.push(n?wn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Hr(this._parent)},encode(){return Hr(this._encode)},lookup(){return Hr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(zt(e))return w2(e,t);e.signal||ot("Unsupported field reference: "+Tt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=wn(this.add(Imt(i)))}return r},compareRef(e){let t=!1;const n=s=>yo(s)?(t=!0,this.signalRef(s.signal)):wmt(s)?(t=!0,this.exprRef(s.expr)):s,r=Bt(e.field).map(n),i=Bt(e.order).map(n);return t?wn(this.add(e_e({fields:r,orders:i}))):Jwe(r,i)},keyRef(e,t){let n=!1;const r=s=>yo(s)?(n=!0,wn(i[s.signal])):s,i=this.signals;return e=Bt(e).map(r),n?wn(this.add(Pmt({fields:e,flat:t}))):ymt(e,t)},sortRef(e){if(!e)return e;const t=FL(e.op,e.field),n=e.order||vmt;return n.signal?wn(this.add(e_e({fields:t,orders:this.signalRef(n.signal)}))):Jwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Xt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ot("Duplicate signal name: "+Tt(e));const n=t instanceof L5?t:this.add(Ik(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ot("Unrecognized signal name: "+Tt(e)),this.signals[e]},signalRef(e){return this.signals[e]?wn(this.signals[e]):(Xt(this.lambdas,e)||(this.lambdas[e]=this.add(Ik(null))),wn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=jf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!It(e)?e:this.signalRef(e.signal||W9(e))},exprRef(e,t){const n={expr:jf(e,this)};return t&&(n.expr.$name=t),wn(this.add(Mmt(n)))},addBinding(e,t){this.bindings||ot("Nested signals do not support binding: "+Tt(e)),this.bindings.push(rr({signal:e},t))},addScaleProj(e,t){Xt(this.scales,e)&&ot("Duplicate scale or projection name: "+Tt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Ymt(t))},addProjection(e,t){this.addScaleProj(e,Gmt(t))},getScale(e){return this.scales[e]||ot("Unrecognized scale name: "+Tt(e)),this.scales[e]},scaleRef(e){return wn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Xt(this.data,e)&&ot("Duplicate data set name: "+Tt(e)),this.data[e]=t},getData(e){return this.data[e]||ot("Undefined data set name: "+Tt(e)),this.data[e]},addDataPipeline(e,t){return Xt(this.data,e)&&ot("Duplicate data set name: "+Tt(e)),this.addData(e,d0.fromEntries(this,t))}};function W9(e){return(at(e)?I0t:P0t)(e)}function I0t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(It(i)?i.signal||W9(i):Tt(i))}return n+"]"}function P0t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Tt(r)+":"+(It(i)?i.signal||W9(i):Tt(i));return t+"}"}function N0t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function B0t(e,t,n){return It(e)||ot("Input Vega specification must be an object."),t=nb(N0t(),t,e.config),M0t(e,new YMe(t,n)).toRuntime()}var z0t="5.31.0";rr(s1,Ret,sst,Pst,_at,glt,qut,_ut,Gut,mct,Act,Fct);const j0t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Qs,CanvasHandler:FE,CanvasRenderer:Z3,DATE:Ol,DAY:Sa,DAYOFYEAR:Bf,Dataflow:Dv,Debug:eTe,Error:SP,EventStream:HD,Gradient:ILe,GroupItem:aL,HOURS:lu,Handler:gN,HybridHandler:kRe,HybridRenderer:N6,Info:Qke,Item:oL,MILLISECONDS:Rc,MINUTES:uu,MONTH:Ta,Marks:cu,MultiPulse:HP,None:Jke,Operator:qi,Parameters:qD,Pulse:Ip,QUARTER:Fl,RenderType:Sp,Renderer:RE,ResourceLoader:qLe,SECONDS:Pu,SVGHandler:pRe,SVGRenderer:_N,SVGStringRenderer:CRe,Scenegraph:oRe,TIME_UNITS:IP,Transform:rt,View:dMe,WEEK:mo,Warn:AP,YEAR:ea,accessor:zl,accessorFields:ka,accessorName:Rs,array:Bt,ascending:mE,bandwidthNRD:YP,bin:cDe,bootstrapCI:fDe,boundClip:PRe,boundContext:kE,boundItem:O6,boundMark:nRe,boundStroke:yh,changeset:M0,clampRange:fTe,codegenExpression:BOe,compare:LP,constant:Fa,cumulativeLogNormal:e8,cumulativeNormal:VD,cumulativeUniform:i8,dayofyear:STe,debounce:RP,defaultLocale:BP,definition:aDe,densityLogNormal:QP,densityNormal:XP,densityUniform:r8,domChild:ho,domClear:Su,domCreate:_p,domFind:mN,dotbin:dDe,error:ot,expressionFunction:zs,extend:rr,extent:Nf,extentIndex:dTe,falsy:np,fastmap:ib,field:$u,flush:hTe,font:dL,fontFamily:LE,fontSize:Zf,format:SC,formatLocale:O3,formats:UP,hasOwnProperty:Xt,id:pE,identity:Ra,inferType:ZTe,inferTypes:KTe,ingest:yi,inherits:Lt,inrange:mv,interpolate:V8,interpolateColors:iL,interpolateRange:_Le,intersect:ORe,intersectBoxLine:gv,intersectPath:eN,intersectPoint:tN,intersectRule:GLe,isArray:at,isBoolean:fm,isDate:$p,isFunction:fr,isIterable:pTe,isNumber:li,isObject:It,isRegExp:mTe,isString:zt,isTuple:jD,key:FP,lerp:gTe,lineHeight:Yp,loader:BD,locale:YTe,logger:CP,lruCache:yTe,markup:wN,merge:vTe,mergeConfig:nb,multiLineOffset:dN,one:tb,pad:bTe,panLinear:sTe,panLog:oTe,panPow:aTe,panSymlog:lTe,parse:B0t,parseExpression:w9,parseSelector:hm,path:KD,pathCurves:K8,pathEqual:NRe,pathParse:c1,pathRectangle:BLe,pathRender:u2,pathSymbols:NLe,pathTrail:zLe,peek:Hr,point:pL,projection:jN,quantileLogNormal:t8,quantileNormal:WD,quantileUniform:s8,quantiles:VP,quantizeInterpolator:ELe,quarter:uTe,quartiles:WP,get random(){return Nu},randomInteger:OQe,randomKDE:KP,randomLCG:FQe,randomLogNormal:pDe,randomMixture:mDe,randomNormal:ZP,randomUniform:gDe,read:eDe,regressionConstant:o8,regressionExp:vDe,regressionLinear:a8,regressionLoess:wDe,regressionLog:yDe,regressionPoly:xDe,regressionPow:bDe,regressionQuad:l8,renderModule:mL,repeat:Nw,resetDefaultLocale:DJe,resetSVGClipId:ULe,resetSVGDefIds:Eit,responseType:QTe,runtimeContext:QOe,sampleCurve:XD,sampleLogNormal:JP,sampleNormal:GD,sampleUniform:n8,scale:ui,sceneEqual:EN,sceneFromJSON:iRe,scenePickVisit:U3,sceneToJSON:rRe,sceneVisit:Fc,sceneZOrder:nN,scheme:W8,serializeXML:_Re,setHybridRendererOptions:bit,setRandom:LQe,span:gE,splitAccessPath:Yf,stringValue:Tt,textMetrics:nu,timeBin:jTe,timeFloor:RTe,timeFormatLocale:o2,timeInterval:sb,timeOffset:MTe,timeSequence:PTe,timeUnitSpecifier:ETe,timeUnits:PP,toBoolean:OP,toDate:MP,toNumber:Aa,toSet:Lc,toString:$P,transform:lDe,transforms:s1,truncate:xTe,truthy:Iu,tupleid:_n,typeParsers:_6,utcFloor:FTe,utcInterval:ob,utcOffset:$Te,utcSequence:NTe,utcdayofyear:kTe,utcquarter:cTe,utcweek:TTe,version:z0t,visitArray:op,week:ATe,writeConfig:rb,zero:pp,zoomLinear:kP,zoomLog:TP,zoomPow:F3,zoomSymlog:DP},Symbol.toStringTag,{value:"Module"}));function U0t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var q0t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},H0t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},G0t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const V0t=Array.prototype.slice,lg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,V0t.call(t,1))},W0t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Y0t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:W0t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return lg("join",arguments)},indexof:function(){return lg("indexOf",arguments)},lastindexof:function(){return lg("lastIndexOf",arguments)},slice:function(){return lg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return lg("substring",arguments,String)},split:function(){return lg("split",arguments,String)},replace:function(){return lg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const X0t=["view","item","group","xy","x","y"],P5=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&P5.add(setImmediate);const Z0t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:q0t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),P5.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Y0t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>H0t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>G0t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,P5.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Aw(e,t,n,r,i,s){const o=a=>Z0t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,X0t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var K0t={operator(e,t){const n=t.ast,r=e.functions;return i=>Aw(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>Aw(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Aw(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return Aw(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,f;for(const c in r)f=Aw(r[c].ast,i,a,l,void 0,o),o[c]!==f&&(o[c]=f,u=1);return n!=="rule"&&U0t(o,r,s),u}}};const J0t="vega-lite",Q0t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',eyt="5.23.0",tyt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],nyt="https://vega.github.io/vega-lite/",ryt="Vega-Lite is a concise high-level language for interactive visualization.",iyt=["vega","chart","visualization"],syt="build/vega-lite.js",oyt="build/vega-lite.min.js",ayt="build/vega-lite.min.js",lyt="build/src/index",uyt="build/src/index.d.ts",cyt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},fyt=["bin","build","src","vega-lite*","tsconfig.json"],dyt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},hyt={type:"git",url:"https://github.com/vega/vega-lite.git"},pyt="BSD-3-Clause",myt={url:"https://github.com/vega/vega-lite/issues"},gyt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},yyt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},vyt={vega:"^5.24.0"},byt={node:">=18"},xyt="yarn@1.22.22",wyt={name:J0t,author:Q0t,version:eyt,collaborators:tyt,homepage:nyt,description:ryt,keywords:iyt,main:syt,unpkg:oyt,jsdelivr:ayt,module:lyt,types:uyt,bin:cyt,files:fyt,scripts:dyt,repository:hyt,license:pyt,bugs:myt,devDependencies:gyt,dependencies:yyt,peerDependencies:vyt,engines:byt,packageManager:xyt};function Y9(e){return St(e,"or")}function X9(e){return St(e,"and")}function Z9(e){return St(e,"not")}function YC(e,t){if(Z9(e))YC(e.not,t);else if(X9(e))for(const n of e.and)YC(n,t);else if(Y9(e))for(const n of e.or)YC(n,t);else t(e)}function Fv(e,t){return Z9(e)?{not:Fv(e.not,t)}:X9(e)?{and:e.and.map(n=>Fv(n,t))}:Y9(e)?{or:e.or.map(n=>Fv(n,t))}:t(e)}const Gn=structuredClone;function XMe(e){throw new Error(e)}function b1(e,t){const n={};for(const r of t)Xt(e,r)&&(n[r]=e[r]);return n}function Ll(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ii(e)).join(",")})`};function Or(e){if(li(e))return e;const t=zt(e)?e:Ii(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function N5(e){return e===!1||e===null}function _r(e,t){return e.includes(t)}function x1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function K9(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function ZMe(e,...t){for(const n of t)_yt(e,n??{});return e}function _yt(e,t){for(const n of wt(t))rb(e,n,t[n],!0)}function Ef(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Eyt(e,t){const n=wt(e),r=wt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function KMe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function J9(e,t){for(const n of e)if(t.has(n))return!0;return!1}function B5(e){const t=new Set;for(const n of e){const i=Yf(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Q9(e,t){return e===void 0||t===void 0?!0:J9(B5(e),B5(t))}function $i(e){return wt(e).length===0}const wt=Object.keys,ta=Object.values,Jp=Object.entries;function S2(e){return e===!0||e===!1}function cs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function R_(e,t){return Z9(e)?`!(${R_(e.not,t)})`:X9(e)?`(${e.and.map(n=>R_(n,t)).join(") && (")})`:Y9(e)?`(${e.or.map(n=>R_(n,t)).join(") || (")})`:t(e)}function Pk(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Pk(e[n],t)&&delete e[n],$i(e)}function qE(e){return e.charAt(0).toUpperCase()+e.substr(1)}function e7(e,t="datum"){const n=Yf(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Tt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function JMe(e,t="datum"){return`${t}[${Tt(Yf(e).join("."))}]`}function ki(e){return`datum['${e.replaceAll("'","\\'")}']`}function Syt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zu(e){return`${Yf(e).map(Syt).join("\\.")}`}function h0(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function pb(e){return`${Yf(e).join(".")}`}function w1(e){return e?Yf(e).length:0}function Ns(...e){return e.find(t=>t!==void 0)}let QMe=42;function e4e(e){const t=++QMe;return e?String(e)+t:t}function Ayt(){QMe=42}function t4e(e){return n4e(e)?e:`__${e}`}function n4e(e){return e.startsWith("__")}function A2(e){if(e!==void 0)return(e%360+360)%360}function BL(e){return li(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const m_e=Object.getPrototypeOf(structuredClone({}));function Jl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Jl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Jl(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==m_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==m_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Jl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ii(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}function St(e,t){return It(e)&&Xt(e,t)&&e[t]!==void 0}const Kd="row",Jd="column",zL="facet",fs="x",Io="y",Uc="x2",ed="y2",pm="xOffset",mb="yOffset",qc="radius",bh="radius2",Hu="theta",xh="theta2",Hc="latitude",Gc="longitude",Vc="latitude2",ju="longitude2",mm="time",$l="color",td="fill",nd="stroke",Il="shape",wh="size",B0="angle",_h="opacity",gm="fillOpacity",ym="strokeOpacity",vm="strokeWidth",bm="strokeDash",HE="text",_1="order",GE="detail",jL="key",p0="tooltip",UL="href",qL="url",HL="description",Cyt={x:1,y:1,x2:1,y2:1},r4e={theta:1,theta2:1,radius:1,radius2:1};function i4e(e){return Xt(r4e,e)}const t7={longitude:1,longitude2:1,latitude:1,latitude2:1};function s4e(e){switch(e){case Hc:return"y";case Vc:return"y2";case Gc:return"x";case ju:return"x2"}}function o4e(e){return Xt(t7,e)}const kyt=wt(t7),n7={...Cyt,...r4e,...t7,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Ov(e){return e===$l||e===td||e===nd}const a4e={row:1,column:1,facet:1},Ru=wt(a4e),r7={...n7,...a4e},Tyt=wt(r7),{order:Jjt,detail:Qjt,tooltip:eUt,...Dyt}=r7,{row:tUt,column:nUt,facet:rUt,...Lyt}=Dyt;function Ryt(e){return Xt(Lyt,e)}function l4e(e){return Xt(r7,e)}const Fyt=[Uc,ed,Vc,ju,xh,bh];function u4e(e){return z0(e)!==e}function z0(e){switch(e){case Uc:return fs;case ed:return Io;case Vc:return Hc;case ju:return Gc;case xh:return Hu;case bh:return qc}return e}function Qp(e){if(i4e(e))switch(e){case Hu:return"startAngle";case xh:return"endAngle";case qc:return"outerRadius";case bh:return"innerRadius"}return e}function rd(e){switch(e){case fs:return Uc;case Io:return ed;case Hc:return Vc;case Gc:return ju;case Hu:return xh;case qc:return bh}}function Pl(e){switch(e){case fs:case Uc:return"width";case Io:case ed:return"height"}}function c4e(e){switch(e){case fs:return"xOffset";case Io:return"yOffset";case Uc:return"x2Offset";case ed:return"y2Offset";case Hu:return"thetaOffset";case qc:return"radiusOffset";case xh:return"theta2Offset";case bh:return"radius2Offset"}}function i7(e){switch(e){case fs:return"xOffset";case Io:return"yOffset"}}function Oyt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Myt=wt(n7),{x:iUt,y:sUt,x2:oUt,y2:aUt,xOffset:lUt,yOffset:uUt,latitude:cUt,longitude:fUt,latitude2:dUt,longitude2:hUt,theta:pUt,theta2:mUt,radius:gUt,radius2:yUt,...s7}=n7,$yt=wt(s7),o7={x:1,y:1},Eh=wt(o7);function Bs(e){return Xt(o7,e)}const a7={theta:1,radius:1},Iyt=wt(a7);function GL(e){return e==="width"?fs:Io}const f4e={xOffset:1,yOffset:1};function VE(e){return Xt(f4e,e)}const Pyt={time:1};function gO(e){return e in Pyt}const{text:vUt,tooltip:bUt,href:xUt,url:wUt,description:_Ut,detail:EUt,key:SUt,order:AUt,...d4e}=s7,Nyt=wt(d4e);function Byt(e){return Xt(s7,e)}function zyt(e){switch(e){case $l:case td:case nd:case wh:case Il:case _h:case vm:case bm:return!0;case gm:case ym:case B0:case mm:return!1}}const h4e={...o7,...a7,...f4e,...d4e},l7=wt(h4e);function id(e){return Xt(h4e,e)}function jyt(e,t){return qyt(e)[t]}const p4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:CUt,...Uyt}=p4e;function qyt(e){switch(e){case $l:case td:case nd:case HL:case GE:case jL:case p0:case UL:case _1:case _h:case gm:case ym:case vm:case zL:case Kd:case Jd:return p4e;case fs:case Io:case pm:case mb:case Hc:case Gc:case mm:return Uyt;case Uc:case ed:case Vc:case ju:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case wh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case bm:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Il:return{point:"always",geoshape:"always"};case HE:return{text:"always"};case B0:return{point:"always",square:"always",text:"always"};case qL:return{image:"always"};case Hu:return{text:"always",arc:"always"};case qc:return{text:"always",arc:"always"};case xh:case bh:return{arc:"always"}}}function yO(e){switch(e){case fs:case Io:case Hu:case qc:case pm:case mb:case wh:case B0:case vm:case _h:case gm:case ym:case mm:case Uc:case ed:case xh:case bh:return;case zL:case Kd:case Jd:case Il:case bm:case HE:case p0:case UL:case qL:case HL:return"discrete";case $l:case td:case nd:return"flexible";case Hc:case Gc:case Vc:case ju:case GE:case jL:case _1:return}}const Hyt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Gyt={count:1,min:1,max:1};function lh(e){return St(e,"argmin")}function xm(e){return St(e,"argmax")}function u7(e){return zt(e)&&Xt(Hyt,e)}const Vyt=new Set(["count","valid","missing","distinct"]);function VL(e){return zt(e)&&Vyt.has(e)}function Wyt(e){return zt(e)&&_r(["min","max"],e)}const Yyt=new Set(["count","sum","distinct","valid","missing"]),Xyt=new Set(["mean","average","median","q1","q3","min","max"]);function m4e(e){return fm(e)&&(e=iR(e,void 0)),"bin"+wt(e).map(t=>WL(e[t])?cs(`_${t}_${Jp(e[t])}`):cs(`_${t}_${e[t]}`)).join("")}function Ki(e){return e===!0||j0(e)&&!e.binned}function Wo(e){return e==="binned"||j0(e)&&e.binned===!0}function j0(e){return It(e)}function WL(e){return St(e,"param")}function g_e(e){switch(e){case Kd:case Jd:case wh:case $l:case td:case nd:case vm:case _h:case gm:case ym:case Il:return 6;case bm:return 4;default:return 10}}function WE(e){return St(e,"expr")}function Yo(e,{level:t}={level:0}){const n=wt(e||{}),r={};for(const i of n)r[i]=t===0?Xl(e[i]):Yo(e[i],{level:t-1});return r}function g4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:c,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,v={...g,...a?{fill:a}:{}},x={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},y={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...c?{subtitleFontStyle:c}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=b1(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:v,subtitleMarkConfig:w,nonMarkTitleProperties:x,subtitle:y}}function cp(e){return zt(e)||at(e)&&zt(e[0])}function cn(e){return St(e,"signal")}function U0(e){return St(e,"step")}function Zyt(e){return at(e)?!1:St(e,"fields")&&!St(e,"data")}function Kyt(e){return at(e)?!1:St(e,"fields")&&St(e,"data")}function qd(e){return at(e)?!1:St(e,"field")&&St(e,"data")}const Jyt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Qyt=wt(Jyt),evt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},z5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function y4e(e){const t=at(e.condition)?e.condition.map(y_e):y_e(e.condition);return{...Xl(e),condition:t}}function Xl(e){if(WE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function y_e(e){if(WE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function os(e){if(WE(e)){const{expr:t,...n}=e;return{signal:t,...n}}return cn(e)?e:e!==void 0?{value:e}:void 0}function tvt(e){return cn(e)?e.signal:Tt(e)}function v_e(e){return cn(e)?e.signal:Tt(e.value)}function xc(e){return cn(e)?e.signal:e==null?null:Tt(e)}function nvt(e,t,n){for(const r of n){const i=Uf(r,t.markDef,t.config);i!==void 0&&(e[r]=os(i))}return e}function v4e(e){return[].concat(e.type,e.style??[])}function Mi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&St(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Uf(e,t,n,r)}function Uf(e,t,n,{vgChannel:r}={}){const i=j5(e,t,n.style);return Ns(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function j5(e,t,n){return b4e(e,v4e(t),n)}function b4e(e,t,n){t=Bt(t);let r;for(const i of t){const s=n[i];St(s,e)&&(r=s[e])}return r}function x4e(e,t){return Bt(e).reduce((n,r)=>(n.field.push(Ft(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function w4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Jl(i,r))return;n.push(r)}),n}function _4e(e,t){return Jl(e,t)||!t?e:e?[...Bt(e),...Bt(t)].join(", "):t}function E4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((cp(n)||cn(n))&&(cp(r)||cn(r)))return{explicit:e.explicit,value:_4e(n,r)};if(cp(n)||cn(n))return{explicit:e.explicit,value:n};if(cp(r)||cn(r))return{explicit:e.explicit,value:r};if(!cp(n)&&!cn(n)&&!cp(r)&&!cn(r))return{explicit:e.explicit,value:w4e(n,r)};throw new Error("It should never reach here")}function c7(e){return`Invalid specification ${Ii(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const rvt='Autosize "fit" only works for single views and layered views.';function b_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function x_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function w_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Pl(e)}.`:'Dropping "fit" because spec has discrete size.'}function f7(e){return`Unknown field for ${e}. Cannot calculate view size.`}function __e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ivt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function svt(e){return`The "nearest" transform is not supported for ${e} marks.`}function S4e(e){return`Selection not supported for ${e} yet.`}function ovt(e){return`Cannot find a selection named "${e}".`}const avt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",lvt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",uvt="Legend bindings are only supported for selections over an individual field or encoding channel.";function cvt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function fvt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const dvt="The same selection must be used to override scale domains in a layered view.",hvt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function pvt(e){return`Unknown repeated value "${e}".`}function E_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const mvt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",d7="Animation involving facet, layer, or concat is currently unsupported.";function gvt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Tt(e)}.`}function yvt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Tt(t)} encoding found for selection ${Tt(n.param)}. Using "field": ${Tt(r)}.`}const vvt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function bvt(e){return`Unrecognized parse "${e}".`}function S_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const xvt="Attempt to add the same child twice.";function wvt(e){return`Ignoring an invalid transform: ${Ii(e)}.`}const _vt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function A_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Evt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ii(t)} is overridden by a child projection ${Ii(n)}.`}const Svt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Avt(e){return`${e}Offset dropped because ${e} is continuous`}function Cvt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ii(n)}}.`}function A4e(e){return`Invalid field type "${e}".`}function kvt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Tvt(e){return`Invalid aggregation operator "${e}".`}function C4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Dvt(e){return`Position range does not support relative band size for ${e}.`}function U5(e,t){return`Dropping ${Ii(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Lvt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function YL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Rvt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Fvt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Ovt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Mvt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function vO(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function $vt(e){return`The ${e} for range marks cannot be an expression`}function Ivt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Pvt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Nvt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Bvt(e){return`Cannot use the relative band size with ${e} scale.`}function zvt(e){return`Using unaggregated domain with raw field has no effect (${Ii(e)}).`}function jvt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Uvt(e){return`Unaggregated domain is currently unsupported for log scale (${Ii(e)}).`}function qvt(e){return`Cannot apply size to non-oriented mark "${e}".`}function Hvt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Gvt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function k4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function T4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Vvt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using ${Ii(n)}.`}function Wvt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ii(n)} and ${Ii(r)}). Using the union of the two domains.`}function Yvt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Xvt(e){return`Dropping sort property ${Ii(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const C_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Zvt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Kvt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Jvt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Qvt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function e1t(e){return`Stack is applied to a non-linear scale (${e}).`}function t1t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Nk(e,t){return`Invalid ${e}: ${Ii(t)}.`}function n1t(e){return`Dropping day from datetime ${Ii(e)} as day cannot be combined with other units.`}function r1t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function i1t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function s1t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function k_e(e){return`1D error band does not support ${e}.`}function D4e(e){return`Channel ${e} is required for "binned" bin.`}function o1t(e){return`Channel ${e} should not be used with "binned" bin.`}function a1t(e){return`Domain for ${e} is required for threshold scale.`}const L4e=CP(AP);let m0=L4e;function l1t(e){return m0=e,m0}function u1t(){return m0=L4e,m0}function h7(...e){m0.error(...e)}function Ct(...e){m0.warn(...e)}function c1t(...e){m0.debug(...e)}function q0(e){if(e&&It(e)){for(const t of m7)if(St(e,t))return!0}return!1}const R4e=["january","february","march","april","may","june","july","august","september","october","november","december"],f1t=R4e.map(e=>e.substr(0,3)),F4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d1t=F4e.map(e=>e.substr(0,3));function h1t(e){if(BL(e)&&(e=+e),li(e))return e>4&&Ct(Nk("quarter",e)),e-1;throw new Error(Nk("quarter",e))}function p1t(e){if(BL(e)&&(e=+e),li(e))return e-1;{const t=e.toLowerCase(),n=R4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=f1t.indexOf(r);if(i!==-1)return i;throw new Error(Nk("month",e))}}function m1t(e){if(BL(e)&&(e=+e),li(e))return e%7;{const t=e.toLowerCase(),n=F4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=d1t.indexOf(r);if(i!==-1)return i;throw new Error(Nk("day",e))}}function p7(e,t){const n=[];if(t&&e.day!==void 0&&wt(e).length>1&&(Ct(n1t(e)),e=Gn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?p1t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?h1t(e.quarter):e.quarter;n.push(li(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?m1t(e.day):e.day;n.push(li(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function g0(e){const n=p7(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function g1t(e){const n=p7(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function y1t(e){const t=p7(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const O4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},m7=wt(O4e);function v1t(e){return Xt(O4e,e)}function H0(e){return It(e)?e.binned:M4e(e)}function M4e(e){return e&&e.startsWith("binned")}function g7(e){return e.startsWith("utc")}function b1t(e){return e.substring(3)}const x1t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function XL(e){return m7.filter(t=>I4e(e,t))}function $4e(e){const t=XL(e);return t[t.length-1]}function I4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function w1t(e,t,{end:n}={end:!1}){const r=e7(t),i=g7(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of m7)I4e(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),g1t(a)}function P4e(e){if(!e)return;const t=XL(e);return`timeUnitSpecifier(${Ii(t)}, ${Ii(x1t)})`}function _1t(e,t,n){if(!e)return;const r=P4e(e);return`${n||g7(e)?"utc":"time"}Format(${t}, ${r})`}function Fo(e){if(!e)return;let t;return zt(e)?M4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:It(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),g7(t.unit)&&(t.utc=!0,t.unit=b1t(t.unit)),t}function E1t(e){const{utc:t,...n}=Fo(e);return n.unit?(t?"utc":"")+wt(n).map(r=>cs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+wt(n).map(r=>cs(`_${r}_${n[r]}`)).join("")}function N4e(e,t=n=>n){const n=Fo(e),r=$4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=B4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(g0(a))} - ${t(g0(i))}`}}const S1t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function A1t(e){return Xt(S1t,e)}function B4e(e,t=1){if(A1t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function C1t(e){return St(e,"param")}function y7(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function v7(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function b7(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function x7(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function w7(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function _7(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(cn(e.range))return!0}return!1}function E7(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function k1t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function z4e(e){return E7(e)||y7(e)||_7(e)||v7(e)||x7(e)||b7(e)||w7(e)}function ff(e,t){return sR(e,{timeUnit:t,wrapTime:!0})}function T1t(e,t){return e.map(n=>ff(n,t))}function j4e(e,t=!0){const{field:n}=e,r=Fo(e.timeUnit),{unit:i,binned:s}=r||{},o=Ft(e,{expr:"datum"}),a=i?`time(${s?o:w1t(i,n)})`:o;if(y7(e))return`${a}===${ff(e.equal,i)}`;if(v7(e)){const l=e.lt;return`${a}<${ff(l,i)}`}else if(x7(e)){const l=e.gt;return`${a}>${ff(l,i)}`}else if(b7(e)){const l=e.lte;return`${a}<=${ff(l,i)}`}else if(w7(e)){const l=e.gte;return`${a}>=${ff(l,i)}`}else{if(E7(e))return`indexof([${T1t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(k1t(e))return ZL(a,e.valid);if(_7(e)){const{range:l}=Yo(e),u=cn(l)?{signal:`${l.signal}[0]`}:l[0],f=cn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return"inrange("+a+", ["+ff(u,i)+", "+ff(f,i)+"])";const c=[];return u!==null&&c.push(`${a} >= ${ff(u,i)}`),f!==null&&c.push(`${a} <= ${ff(f,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ii(e)}`)}function ZL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function D1t(e){return z4e(e)&&e.timeUnit?{...e,timeUnit:Fo(e.timeUnit)}:e}const YE={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function L1t(e){return e==="quantitative"||e==="temporal"}function U4e(e){return e==="ordinal"||e==="nominal"}const y0=YE.quantitative,S7=YE.ordinal,E1=YE.temporal,A7=YE.nominal,gb=YE.geojson;function R1t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case y0:return"quantitative";case"t":case E1:return"temporal";case"o":case S7:return"ordinal";case"n":case A7:return"nominal";case gb:return"geojson"}}const Xo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},q5={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function F1t(e,t){const n=q5[e],r=q5[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const O1t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function T_e(e){return O1t[e]}const q4e=new Set(["linear","log","pow","sqrt","symlog"]),H4e=new Set([...q4e,"time","utc"]);function G4e(e){return q4e.has(e)}const V4e=new Set(["quantile","quantize","threshold"]),M1t=new Set([...H4e,...V4e,"sequential","identity"]),$1t=new Set(["ordinal","bin-ordinal","point","band"]);function Mo(e){return $1t.has(e)}function Oc(e){return M1t.has(e)}function Sf(e){return H4e.has(e)}function S1(e){return V4e.has(e)}const I1t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function P1t(e){return!zt(e)&&St(e,"name")}function W4e(e){return St(e,"param")}function N1t(e){return St(e,"unionWith")}function B1t(e){return It(e)&&"field"in e}const z1t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:kUt,domain:TUt,range:DUt,rangeMax:LUt,rangeMin:RUt,scheme:FUt,...j1t}=z1t,U1t=wt(j1t);function H5(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Sf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Sf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Sf(e);case"nice":return Sf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Oc(e)&&!_r(["log","time","utc","threshold","quantile"],e)}}function Y4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Ov(e)?void 0:Nvt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function q1t(e,t){return _r([S7,A7],t)?e===void 0||Mo(e):t===E1?_r([Xo.TIME,Xo.UTC,void 0],e):t===y0?G4e(e)||S1(e)||e===void 0:!0}function H1t(e,t,n=!1){if(!id(e))return!1;switch(e){case fs:case Io:case pm:case mb:case Hu:case qc:return Sf(t)||t==="band"?!0:t==="point"?!n:!1;case mm:return _r(["linear","band"],t);case wh:case vm:case _h:case gm:case ym:case B0:return Sf(t)||S1(t)||_r(["band","point","ordinal"],t);case $l:case td:case nd:return t!=="band";case bm:case Il:return t==="ordinal"||S1(t)}}function G1t(e){return It(e)&&"value"in e}const sl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},X4e=sl.arc,KL=sl.area,JL=sl.bar,V1t=sl.image,QL=sl.line,eR=sl.point,W1t=sl.rect,Bk=sl.rule,Z4e=sl.text,C7=sl.tick,Y1t=sl.trail,k7=sl.circle,T7=sl.square,K4e=sl.geoshape;function wm(e){return["line","area","trail"].includes(e)}function C2(e){return["rect","bar","image","arc","tick"].includes(e)}const X1t=new Set(wt(sl));function qf(e){return St(e,"type")}const Z1t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],K1t=["fill","fillOpacity"],J1t=[...Z1t,...K1t],Q1t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},D_e=wt(Q1t),bO=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],ebt={area:["line","point"],bar:bO,rect:bO,line:["point"],tick:["bandSize","thickness",...bO]},tbt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},nbt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},J4e=wt(nbt);function v0(e){return St(e,"band")}const rbt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},ibt=5,D7={binSpacing:0,continuousBandSize:ibt,minBandSize:.25,timeUnitBandPosition:.5},sbt={...D7,binSpacing:1},obt={...D7,thickness:1};function abt(e){return qf(e)?e.type:e}function Q4e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function L7({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Oc(r)||i)return"always-valid";const s=Q4e(Mi("invalid",e,t),{isPath:wm(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function lbt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function e6e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function t6e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var f;const o=n==null?void 0:n.get("type"),a=$c(t),l=VL(a==null?void 0:a.aggregate),u=L7({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const c=((f=s.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:ZL(Ft(a,{expr:"datum"}),!1),...ubt(c,n,r)}}}function ubt(e,t,n){if(G1t(e)){const{value:r}=e;return cn(r)?{signal:r.signal}:{value:r}}return e6e({scale:t,scaleName:n,mode:"zeroOrMin"})}function R7(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=z0(t),l=F7(e),u=t6e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function cbt(e){const{datum:t}=e;return q0(t)?g0(t):`${Ii(t)}`}function Gg(e,t,n,r){const i={};if(t&&(i.scale=t),sd(e)){const{datum:s}=e;q0(s)?i.signal=g0(s):cn(s)?i.signal=s.signal:WE(s)?i.signal=s.expr:i.value=s}else i.field=Ft(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function zk({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!cn(o)&&0<o&&o<1?"datum":void 0,l=Ft(t,{expr:a,suffix:i}),u=n!==void 0?Ft(n,{expr:a}):Ft(t,{suffix:s,expr:a}),f={};if(o===0||o===1){f.scale=e;const c=o===0?l:u;f.field=c}else{const c=cn(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;f.signal=`scale("${e}", ${c})`}return r&&(f.offset=r),f}function fbt({scaleName:e,fieldDef:t}){const n=Ft(t,{expr:"datum"}),r=Ft(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function F7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Wn(t)){const c=o==null?void 0:o.get("type");if(nl(t)){f??(f=em({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Ki(d)||f&&h&&p===E1)return a!=null&&a.impute?Gg(t,s,{binSuffix:"mid"},{offset:l}):f&&!Mo(c)?zk({scaleName:s,fieldOrDatumDef:t,bandPosition:f,offset:l}):Gg(t,s,QE(t,e)?{binSuffix:"range"}:{},{offset:l});if(Wo(d)){if(kt(n))return zk({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});Ct(D4e(e===fs?Uc:ed))}}return Gg(t,s,Mo(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?f??t.bandPosition??.5:void 0})}else if(Mc(t)){const c=t.value,d=l?{offset:l}:{};return{...F_(e,c),...d}}}return fr(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function F_(e,t){return _r(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:_r(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:os(t)}function b0(e){return e&&e!=="number"&&e!=="time"}function n6e(e,t,n){return`${e}(${t}${n?`, ${Ii(n)}`:""})`}const dbt="  ";function O7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(b0(n))return wc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=r6e(e,r,i),a=A1(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return wc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return wc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&kt(e)&&e.timeUnit===void 0)return wc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(k1(e)){const f=pbt({field:o,timeUnit:kt(e)?(l=Fo(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:G0(e)&&((u=e.scale)==null?void 0:u.type)===Xo.UTC});return f?{signal:f}:void 0}if(t=G5({type:a,specifiedFormat:t,config:s,normalizeStack:i}),kt(e)&&Ki(e.bin)){const f=Ft(e,{expr:r,binSuffix:"end"});return{signal:XE(o,f,t,n,s)}}else return t||A1(e)==="quantitative"?{signal:`${o6e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function r6e(e,t,n){return kt(e)?n?`${Ft(e,{expr:t,suffix:"end"})}-${Ft(e,{expr:t,suffix:"start"})}`:Ft(e,{expr:t}):cbt(e)}function wc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=r6e(e,r,i)),o!=="datum.value"&&kt(e)&&Ki(e.bin)){const a=Ft(e,{expr:r,binSuffix:"end"});return{signal:XE(o,a,t,n,s)}}return{signal:n6e(n,o,t)}}function i6e(e,t,n,r,i,s){var o;if(!(zt(r)&&b0(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&A1(e)==="quantitative"&&(i.normalizedNumberFormatType&&C1(e)&&e.stack==="normalize"||i.numberFormatType))){if(C1(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return G5({type:"quantitative",config:i,normalizeStack:!0});if(k1(e)){const a=kt(e)?(o=Fo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:hbt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return G5({type:t,specifiedFormat:n,config:i})}}function s6e(e,t,n){var r;if(e&&(cn(e)||e==="number"||e==="time"))return e;if(k1(t)&&n!=="time"&&n!=="utc")return kt(t)&&((r=Fo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function G5({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(zt(t))return t;if(e===y0)return r?n.normalizedNumberFormat:n.numberFormat}function hbt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:P4e(t)}:r?void 0:n.timeFormat)}function o6e(e,t){return`format(${e}, "${t||""}")`}function L_e(e,t,n,r){return b0(n)?n6e(n,e,t):o6e(e,(zt(t)?t:void 0)??r.numberFormat)}function XE(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return XE(e,t,i.numberFormat,i.numberFormatType,i);const s=L_e(e,n,r,i),o=L_e(t,n,r,i);return`${ZL(e,!1)} ? "null" : ${s} + "${dbt}" + ${o}`}function pbt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=zt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):_1t(t,e,s)}const tR="min",mbt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function R_e(e){return Xt(mbt,e)}function gbt(e){return St(e,"encoding")}function Qd(e){return e&&(e.op==="count"||St(e,"field"))}function a6e(e){return e&&at(e)}function ZE(e){return St(e,"row")||St(e,"column")}function M7(e){return St(e,"header")}function nR(e){return St(e,"facet")}function ybt(e){return St(e,"param")}function vbt(e){return!zt(e)&&St(e,"repeat")}function F_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function $7(e){return St(e,"sort")}function em({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Wn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Uf("timeUnitBandPosition",n,r);if(Ki(s))return .5}}function l6e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,f,c;const a=Pl(e),l=Mi(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Uf("timeUnitBandSize",r,i)};if(Ki(h)&&!Mo(s))return{band:1}}if(C2(r.type))return s?Mo(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(c=i[r.type])==null?void 0:c.discreteBandSize}function u6e(e,t,n,r){return Ki(e.bin)||e.timeUnit&&nl(e)&&e.type==="temporal"?em({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function c6e(e){return St(e,"sort")&&!St(e,"field")}function KE(e){return St(e,"condition")}function rR(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&kt(t)}function JE(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Wn(t)}function bbt(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||Mc(t))}function kt(e){return St(e,"field")||(e==null?void 0:e.aggregate)==="count"}function A1(e){return e==null?void 0:e.type}function sd(e){return St(e,"datum")}function Dp(e){return nl(e)&&!Uk(e)||jk(e)}function O_e(e){return nl(e)&&e.type==="quantitative"&&!e.bin||jk(e)}function jk(e){return sd(e)&&li(e.datum)}function Wn(e){return kt(e)||sd(e)}function nl(e){return e&&(St(e,"field")||e.aggregate==="count")&&St(e,"type")}function Mc(e){return St(e,"value")}function G0(e){return St(e,"scale")||St(e,"sort")}function C1(e){return St(e,"axis")||St(e,"stack")||St(e,"impute")}function f6e(e){return St(e,"legend")}function d6e(e){return St(e,"format")||St(e,"formatType")}function xbt(e){return Ll(e,["legend","axis","header","scale"])}function wbt(e){return St(e,"op")}function Ft(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Ebt(e))n=t4e("count");else{let o;if(!t.nofn)if(wbt(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Ki(a)?(o=m4e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?xm(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):lh(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!H0(u)&&(o=E1t(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?pb(n):t.expr?JMe(n,t.expr)+s:zu(n)+s}function Uk(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(A4e(e.type))}function _bt(e){var t;return G0(e)&&S1((t=e.scale)==null?void 0:t.type)}function Ebt(e){return e.aggregate==="count"}function Sbt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Ki(r))return`${n} (binned)`;if(i&&!H0(i)){const a=(o=Fo(i))==null?void 0:o.unit;if(a)return`${n} (${XL(a).join("-")})`}else if(s)return xm(s)?`${n} for max ${s.argmax}`:lh(s)?`${n} for min ${s.argmin}`:`${qE(s)} of ${n}`;return n}function Abt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(xm(t))return`${i} for argmax(${t.argmax})`;if(lh(t))return`${i} for argmin(${t.argmin})`;const s=r&&!H0(r)?Fo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Ki(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const h6e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Abt(e);default:return Sbt(e,t)}};let p6e=h6e;function m6e(e){p6e=e}function Cbt(){m6e(h6e)}function Mv(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=I7(e))==null?void 0:a.title;if(!kt(e))return i??e.title;const s=e,o=r?P7(s,t):void 0;return n?Ns(i,s.title,o):i??s.title??o}function I7(e){if(C1(e)&&e.axis)return e.axis;if(f6e(e)&&e.legend)return e.legend;if(M7(e)&&e.header)return e.header}function P7(e,t){return p6e(e,t)}function qk(e){if(d6e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=I7(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function kbt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if($7(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!xm(n)&&!lh(n))return"quantitative";if(G0(e)&&((s=e.scale)!=null&&s.type))switch(q5[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function $c(e){if(kt(e))return e;if(rR(e))return e.condition}function go(e){if(Wn(e))return e;if(JE(e))return e.condition}function g6e(e,t,n,r={}){if(zt(e)||li(e)||fm(e)){const i=zt(e)?"string":li(e)?"number":"boolean";return Ct(Cvt(t,i,e)),{value:e}}return Wn(e)?Hk(e,t,n,r):JE(e)?{...e,condition:Hk(e.condition,t,n,r)}:e}function Hk(e,t,n,r){if(d6e(e)){const{format:i,formatType:s,...o}=e;if(b0(s)&&!n.customFormatTypes)return Ct(A_e(t)),Hk(o,t,n,r)}else{const i=C1(e)?"axis":f6e(e)?"legend":M7(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(b0(o)&&!n.customFormatTypes)return Ct(A_e(t)),Hk({...e,[i]:a},t,n,r)}}return kt(e)?N7(e,t,r):Tbt(e)}function Tbt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=li(n)?"quantitative":zt(n)?"nominal":q0(n)?"temporal":void 0,{...e,type:t}}function N7(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!u7(r)&&!xm(r)&&!lh(r)&&(Ct(Tvt(r)),delete a.aggregate),i&&(a.timeUnit=Fo(i)),o&&(a.field=`${o}`),Ki(s)&&(a.bin=iR(s,t)),Wo(s)&&!Bs(t)&&Ct(o1t(t)),nl(a)){const{type:l}=a,u=R1t(l);l!==u&&(a.type=u),l!=="quantitative"&&VL(r)&&(Ct(kvt(l,r)),a.type="quantitative")}else if(!u4e(t)){const l=kbt(a,t);a.type=l}if(nl(a)){const{compatible:l,warning:u}=Dbt(a,t)||{};l===!1&&Ct(u)}if($7(a)&&zt(a.sort)){const{sort:l}=a;if(R_e(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&R_e(u))return{...a,sort:{encoding:u,order:"descending"}}}if(M7(a)){const{header:l}=a;if(l){const{orient:u,...f}=l;if(u)return{...a,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function iR(e,t){return fm(e)?{maxbins:g_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:g_e(t)}:e}const Vy={compatible:!0};function Dbt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Kd:case Jd:case zL:return Uk(e)?Vy:{compatible:!1,warning:Fvt(t)};case fs:case Io:case pm:case mb:case $l:case td:case nd:case HE:case GE:case jL:case p0:case UL:case qL:case B0:case Hu:case qc:case HL:return Vy;case Gc:case ju:case Hc:case Vc:return n!==y0?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Vy;case _h:case gm:case ym:case vm:case wh:case xh:case bh:case Uc:case ed:case mm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Vy;case Il:case bm:return!Uk(e)&&!_bt(e)?{compatible:!1,warning:Ovt(t)}:Vy;case _1:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Vy}}function k1(e){const{formatType:t}=qk(e);return t==="time"||!t&&Lbt(e)}function Lbt(e){return e&&(e.type==="temporal"||kt(e)&&!!e.timeUnit)}function sR(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=Fo(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return WE(e)?a=e.expr:cn(e)?a=e.signal:q0(e)?(o=!0,a=g0(e)):(zt(e)||li(e))&&o&&(a=`datetime(${Ii(e)})`,v1t(s)&&(li(e)&&e<1e4||zt(e)&&isNaN(Date.parse(e)))&&(a=g0({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ii(e)}function y6e(e,t){const{type:n}=e;return t.map(r=>{const i=kt(e)&&!H0(e.timeUnit)?e.timeUnit:void 0,s=sR(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function QE(e,t){return Ki(e.bin)?id(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const M_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function eS(e){return e==null?void 0:e.condition}const v6e=["domain","grid","labels","ticks","title"],Rbt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},b6e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Fbt={...b6e,style:1,labelExpr:1,encoding:1};function $_e(e){return Xt(Fbt,e)}const Obt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},x6e=wt(Obt);function Sh(e){return St(e,"mark")}class oR{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Sh(t)?abt(t.mark)===this.name:!1}}function Vg(e,t){const n=e&&e[t];return n?at(n)?x1(n,r=>!!r.field):kt(n)||rR(n):!1}function w6e(e,t){const n=e&&e[t];return n?at(n)?x1(n,r=>!!r.field):kt(n)||sd(n)||JE(n):!1}function _6e(e,t){if(Bs(t)){const n=e[t];if((kt(n)||sd(n))&&(U4e(n.type)||kt(n)&&n.timeUnit)){const r=i7(t);return w6e(e,r)}}return!1}function E6e(e){return x1(Tyt,t=>{if(Vg(e,t)){const n=e[t];if(at(n))return x1(n,r=>!!r.aggregate);{const r=$c(n);return r&&!!r.aggregate}}return!1})}function S6e(e,t){const n=[],r=[],i=[],s=[],o={};return B7(e,(a,l)=>{if(kt(a)){const{field:u,aggregate:f,bin:c,timeUnit:d,...h}=a;if(f||d||c){const p=I7(a),g=p==null?void 0:p.title;let v=Ft(a,{forAs:!0});const x={...g?[]:{title:Mv(a,t,{allowDisabling:!0})},...h,field:v};if(f){let y;if(xm(f)?(y="argmax",v=Ft({op:"argmax",field:f.argmax},{forAs:!0}),x.field=`${v}.${u}`):lh(f)?(y="argmin",v=Ft({op:"argmin",field:f.argmin},{forAs:!0}),x.field=`${v}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(y=f),y){const w={op:y,as:v};u&&(w.field=u),s.push(w)}}else if(n.push(v),nl(a)&&Ki(c)){if(r.push({bin:c,field:u,as:v}),n.push(Ft(a,{binSuffix:"end"})),QE(a,l)&&n.push(Ft(a,{binSuffix:"range"})),Bs(l)){const y={field:`${v}_end`};o[`${l}2`]=y}x.bin="binned",u4e(l)||(x.type=y0)}else if(d&&!H0(d)){i.push({timeUnit:d,field:u,as:v});const y=nl(a)&&a.type!==E1&&"time";y&&(l===HE||l===p0?x.formatType=y:Byt(l)?x.legend={formatType:y,...x.legend}:Bs(l)&&(x.axis={formatType:y,...x.axis}))}o[l]=x}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Mbt(e,t,n){const r=jyt(t,n);if(r){if(r==="binned"){const i=e[t===Uc?fs:Io];return!!(kt(i)&&kt(e[t])&&Wo(i.bin))}}else return!1;return!0}function $bt(e,t,n,r){const i={};for(const s of wt(e))l4e(s)||Ct(Rvt(s));for(let s of Myt){if(!e[s])continue;const o=e[s];if(VE(s)){const a=Oyt(s),l=i[a];if(kt(l)&&L1t(l.type)&&kt(o)&&!l.timeUnit){Ct(Avt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ct(Svt),s=Hu),!Mbt(e,s,t)){Ct(YL(s,t));continue}if(s===wh&&t==="line"){const a=$c(e[s]);if(a!=null&&a.aggregate){Ct(Lvt);continue}}if(s===$l&&(n?"fill"in e:"stroke"in e)){Ct(C4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===GE||s===_1&&!at(o)&&!Mc(o)||s===p0&&at(o)){if(o){if(s===_1){const a=e[s];if(c6e(a)){i[s]=a;continue}}i[s]=Bt(o).reduce((a,l)=>(kt(l)?a.push(N7(l,s)):Ct(U5(l,s)),a),[])}}else{if(s===p0&&o===null)i[s]=null;else if(!kt(o)&&!sd(o)&&!Mc(o)&&!KE(o)&&!cn(o)){Ct(U5(o,s));continue}i[s]=g6e(o,s,r)}}return i}function aR(e,t){const n={};for(const r of wt(e)){const i=g6e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Ibt(e){const t=[];for(const n of wt(e))if(Vg(e,n)){const r=e[n],i=Bt(r);for(const s of i)kt(s)?t.push(s):rR(s)&&t.push(s.condition)}return t}function B7(e,t,n){if(e)for(const r of wt(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Pbt(e,t,n,r){return e?wt(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function A6e(e,t){return wt(t).reduce((n,r)=>{switch(r){case fs:case Io:case UL:case HL:case qL:case Uc:case ed:case pm:case mb:case Hu:case xh:case qc:case bh:case mm:case Hc:case Gc:case Vc:case ju:case HE:case Il:case B0:case p0:return n;case _1:if(e==="line"||e==="trail")return n;case GE:case jL:{const i=t[r];if(at(i)||kt(i))for(const s of Bt(i))s.aggregate||n.push(Ft(s,{}));return n}case wh:if(e==="trail")return n;case $l:case td:case nd:case _h:case gm:case ym:case bm:case vm:{const i=$c(t[r]);return i&&!i.aggregate&&n.push(Ft(i,{})),n}}},[])}function Nbt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function V5(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${z7(t)}`:"";return{field:o+t.field,type:t.type,title:cn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=Ibt(n).map(xbt);return{tooltip:[...i,...Ef(s,Or)]}}function z7(e){const{title:t,field:n}=e;return Ns(t,n)}function j7(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:c={}})=>{const d=z7(n);return C6e(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...zt(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...c}})}}function C6e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...qf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...fm(e[t])?{}:e[t]}}]:[]}function k6e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:NA(s,n),continuousAxisChannelDef2:NA(o,n),continuousAxisChannelDefError:NA(a,n),continuousAxisChannelDefError2:NA(l,n),continuousAxis:i}}function NA(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ct(s1t(n,t)),r}else return e}function T6e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(qf(n)&&n.orient)return n.orient;if(Dp(i)){if(Dp(s)){const o=kt(i)&&i.aggregate,a=kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return k1(s)&&!k1(i)?"horizontal":"vertical"}return"horizontal"}else{if(Dp(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Gk="boxplot",Bbt=["box","median","outliers","rule","ticks"],zbt=new oR(Gk,L6e);function D6e(e){return li(e)?"tukey":e}function L6e(e,{config:t}){e={...e,encoding:aR(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=qf(n)?n:{type:n};i&&Ct(S4e("boxplot"));const l=a.extent??t.boxplot.extent,u=Mi("size",a,t),f=a.invalid,c=D6e(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:v,groupby:x,aggregate:y,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:A,customTooltipWithoutAggregatedField:T}=jbt(e,l,t),D=pb(g.field),{color:k,size:R,...O}=w,B=Ze=>j7(a,v,g,Ze,t.boxplot),K=B(O),L=B(w),$=(It(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",I=B({...O,...R?{size:R}:{},color:{condition:{test:`${ki(`lower_box_${g.field}`)} >= ${ki(`upper_box_${g.field}`)}`,...k||{value:$}}}}),U=V5([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,w),q={type:"tick",color:"black",opacity:1,orient:_,invalid:f,aria:!1},Y=c==="min-max"?U:V5([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,w),X=[...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...K({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],te=[...c!=="tukey"?X:[],...L({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:A,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...I({partName:"median",mark:{type:"tick",invalid:f,...It(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(c==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:te};const le=ki(`lower_box_${g.field}`),ee=ki(`upper_box_${g.field}`),z=`(${ee} - ${le})`,he=`${le} - ${l} * ${z}`,de=`${ee} + ${l} * ${z}`,ze=ki(g.field),He={joinaggregate:R6e(g.field),groupby:x},je={transform:[{filter:`(${he} <= ${ze}) && (${ze} <= ${de})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${D}`},{op:"max",field:g.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${D}`},...y],groupby:x}],layer:X},{tooltip:we,...Ie}=O,{scale:qe,axis:Pe}=g,At=z7(g),dt=Ll(Pe,["title"]),nn=C6e(a,"outliers",t.boxplot,{transform:[{filter:`(${ze} < ${he}) || (${ze} > ${de})`}],mark:"point",encoding:{[v]:{field:g.field,type:g.type,...At!==void 0?{title:At}:{},...qe!==void 0?{scale:qe}:{},...$i(dt)?{}:{axis:dt}},...Ie,...k?{color:k}:{},...T?{tooltip:T}:{}}})[0];let Wt;const Mn=[...d,...h,He];return nn?Wt={transform:Mn,layer:[nn,je]}:(Wt=je,Wt.transform.unshift(...Mn)),{...o,layer:[Wt,{transform:p,layer:te}]}}function R6e(e){const t=pb(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function jbt(e,t,n){const r=T6e(e,Gk),{continuousAxisChannelDef:i,continuousAxis:s}=k6e(e,r,Gk),o=i.field,a=pb(o),l=D6e(t),u=[...R6e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${ki(`upper_box_${a}`)} - ${ki(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ki(`upper_box_${a}`)} + ${ki(`iqr_${a}`)} * ${t}, ${ki(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ki(`lower_box_${a}`)} - ${ki(`iqr_${a}`)} * ${t}, ${ki(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Nbt(d),{bins:g,timeUnits:v,aggregate:x,groupby:y,encoding:w}=S6e(p,n),_=r==="vertical"?"horizontal":"vertical",A=r,T=[...g,...v,{aggregate:[...x,...u],groupby:y},...f];return{bins:g,timeUnits:v,transform:T,groupby:y,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:A,customTooltipWithoutAggregatedField:h}}const U7="errorbar",Ubt=["ticks","rule"],qbt=new oR(U7,F6e);function F6e(e,{config:t}){e={...e,encoding:aR(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=O6e(e,U7,t);delete s.size;const f=j7(a,i,r,s,t.errorbar),c=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...c!==void 0?{thickness:c}:{},...d!==void 0?{size:d}:{}},p=[...f({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Hbt(e,t){const{encoding:n}=e;if(Gbt(n))return{orient:T6e(e,t),inputType:"raw"};const r=Vbt(n),i=Wbt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Wn(a)&&Wn(l))throw new Error(`${t} cannot have both x2 and y2`);if(Wn(a)){if(Dp(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Wn(l)){if(Dp(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Wn(l)&&!Wn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Wn(f)&&!Wn(u))throw new Error(`${t} cannot have yError2 without yError`);if(Wn(a)&&Wn(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Wn(a)){if(Dp(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Wn(u)){if(Dp(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Gbt(e){return(Wn(e.x)||Wn(e.y))&&!Wn(e.x2)&&!Wn(e.y2)&&!Wn(e.xError)&&!Wn(e.xError2)&&!Wn(e.yError)&&!Wn(e.yError2)}function Vbt(e){return Wn(e.x2)||Wn(e.y2)}function Wbt(e){return Wn(e.xError)||Wn(e.xError2)||Wn(e.yError)||Wn(e.yError2)}function O6e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=qf(r)?r:{type:r};s&&Ct(S4e(t));const{orient:u,inputType:f}=Hbt(e,t),{continuousAxisChannelDef:c,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=k6e(e,u,t),{errorBarSpecificAggregate:v,postAggregateCalculates:x,tooltipSummary:y,tooltipTitleWithFieldName:w}=Ybt(l,c,d,h,p,f,t,n),{[g]:_,[g==="x"?"x2":"y2"]:A,[g==="x"?"xError":"yError"]:T,[g==="x"?"xError2":"yError2"]:D,...k}=i,{bins:R,timeUnits:O,aggregate:B,groupby:K,encoding:L}=S6e(k,n),$=[...B,...v],I=f!=="raw"?[]:K,U=V5(y,c,L,w);return{transform:[...a.transform??[],...R,...O,...$.length===0?[]:[{aggregate:$,groupby:I}],...x],groupby:I,continuousAxisChannelDef:c,continuousAxis:g,encodingWithoutContinuousAxis:L,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:U}}function Ybt(e,t,n,r,i,s,o,a){let l=[],u=[];const f=t.field;let c,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ct(i1t(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:f,as:`extent_${f}`},{op:h,field:f,as:`center_${f}`}],u=[{calculate:`${ki(`center_${f}`)} + ${ki(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${ki(`center_${f}`)} - ${ki(`extent_${f}`)}`,as:`lower_${f}`}],c=[{fieldPrefix:"center_",titlePrefix:qE(h)},{fieldPrefix:"upper_",titlePrefix:I_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:I_e(h,p,"-")}],d=!0;else{let g,v,x;p==="ci"?(g="mean",v="ci0",x="ci1"):(g="median",v="q1",x="q3"),l=[{op:v,field:f,as:`lower_${f}`},{op:x,field:f,as:`upper_${f}`},{op:g,field:f,as:`center_${f}`}],c=[{fieldPrefix:"upper_",titlePrefix:Mv({field:f,aggregate:x,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Mv({field:f,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Mv({field:f,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ct(r1t(e.center,e.extent)),s==="aggregated-upper-lower"?(c=[],u=[{calculate:ki(n.field),as:`upper_${f}`},{calculate:ki(f),as:`lower_${f}`}]):s==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${ki(f)} + ${ki(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${ki(f)} + ${ki(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${ki(f)} - ${ki(r.field)}`,as:`lower_${f}`}));for(const h of u)c.push({fieldPrefix:h.as.substring(0,6),titlePrefix:h0(h0(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:d}}function I_e(e,t,n){return`${qE(e)} ${n} ${t}`}const q7="errorband",Xbt=["band","borders"],Zbt=new oR(q7,M6e);function M6e(e,{config:t}){e={...e,encoding:aR(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=O6e(e,q7,t),u=o,f=j7(u,i,r,s,t.errorband),c=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:c?"area":"rect"},h={type:c?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Ct(k_e("interpolate")):u.tension&&Ct(k_e("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const $6e={};function H7(e,t,n){const r=new oR(e,t);$6e[e]={normalizer:r,parts:n}}function Kbt(){return wt($6e)}H7(Gk,L6e,Bbt);H7(U7,F6e,Ubt);H7(q7,M6e,Xbt);const Jbt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],I6e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},P6e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Qbt=wt(I6e),ext=wt(P6e),txt={header:1,headerRow:1,headerColumn:1,headerFacet:1},N6e=wt(txt),B6e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],nxt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},rxt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ic="_vgsid_",ixt={point:{on:"click",fields:[Ic],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function G7(e){return e==="legend"||!!(e!=null&&e.legend)}function xO(e){return G7(e)&&It(e)}function V7(e){return!!(e!=null&&e.select)}function z6e(e){const t=[];for(const n of e||[]){if(V7(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function sxt(e){return lR(e)||Y7(e)||W7(e)}function W7(e){return St(e,"concat")}function lR(e){return St(e,"vconcat")}function Y7(e){return St(e,"hconcat")}function j6e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Hf(e){return St(e,"step")}function P_e(e){return St(e,"view")||St(e,"width")||St(e,"height")}const N_e=20,oxt={align:1,bounds:1,center:1,columns:1,spacing:1},axt=wt(oxt);function lxt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(nR(e)&&!ZE(e.facet)||W7(e))&&(i.columns=o),lR(e)&&(i.columns=1);for(const a of axt)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=li(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function W5(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function Y5(e,t){const n=Vk(e,t);return Hf(n)?n.step:U6e}function Vk(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ns(n,{step:e.step})}const U6e=20,uxt={continuousWidth:200,continuousHeight:200,step:U6e},cxt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:uxt,mark:tbt,arc:{},area:{},bar:sbt,circle:{},geoshape:{},image:{},line:{},point:{},rect:D7,rule:{color:"black"},square:{},text:{color:"black"},tick:obt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:I1t,projection:{},legend:nxt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:ixt,style:{},title:{},facet:{spacing:N_e},concat:{spacing:N_e},normalizedNumberFormat:".0%"},Td=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],B_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},z_e={blue:Td[0],orange:Td[1],red:Td[2],teal:Td[3],green:Td[4],yellow:Td[5],purple:Td[6],pink:Td[7],brown:Td[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function fxt(e={}){return{signals:[{name:"color",value:It(e)?{...z_e,...e}:z_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function dxt(e){return{signals:[{name:"fontSize",value:It(e)?{...B_e,...e}:B_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function hxt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function q6e(e){const t=wt(e||{}),n={};for(const r of t){const i=e[r];n[r]=eS(i)?y4e(i):Xl(i)}return n}function pxt(e){const t=wt(e),n={};for(const r of t)n[r]=q6e(e[r]);return n}const mxt=[...J4e,...x6e,...N6e,"background","padding","legend","lineBreak","scale","style","title","view"];function H6e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=nb({},Gn(cxt),n?hxt(n):{},t?fxt(t):{},r?dxt(r):{},s||{});i&&rb(o,"selection",i,!0);const a=Ll(o,mxt);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Xl(o[l]));for(const l of J4e)o[l]&&(a[l]=Yo(o[l]));for(const l of x6e)o[l]&&(a[l]=q6e(o[l]));for(const l of N6e)o[l]&&(a[l]=Yo(o[l]));if(o.legend&&(a.legend=Yo(o.legend)),o.scale){const{invalid:l,...u}=o.scale,f=Yo(l,{level:1});a.scale={...Yo(u),...wt(f).length>0?{invalid:f}:{}}}return o.style&&(a.style=pxt(o.style)),o.title&&(a.title=Yo(o.title)),o.view&&(a.view=Yo(o.view)),a}const gxt=new Set(["view",...X1t]),yxt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],vxt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...ebt};function bxt(e){e=Gn(e);for(const t of yxt)delete e[t];if(e.axis)for(const t in e.axis)eS(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Jbt)delete e.legend[t];if(e.mark){for(const t of D_e)delete e.mark[t];e.mark.tooltip&&It(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(z6e(e.params)),delete e.params);for(const t of gxt){for(const r of D_e)delete e[t][r];const n=vxt[t];if(n)for(const r of n)delete e[t][r];wxt(e,t)}for(const t of Kbt())delete e[t];xxt(e);for(const t in e)It(e[t])&&$i(e[t])&&delete e[t];return $i(e)?void 0:e}function xxt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=g4e(e.title);$i(t)||(e.style["group-title"]={...e.style["group-title"],...t}),$i(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),$i(r)?delete e.title:e.title=r}function wxt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};$i(s)||(e.style[n??t]=s),delete e[t]}function uR(e){return St(e,"layer")}function _xt(e){return St(e,"repeat")}function Ext(e){return!at(e.repeat)&&St(e.repeat,"layer")}class X7{map(t,n){return nR(t)?this.mapFacet(t,n):_xt(t)?this.mapRepeat(t,n):Y7(t)?this.mapHConcat(t,n):lR(t)?this.mapVConcat(t,n):W7(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(uR(t))return this.mapLayer(t,n);if(Sh(t))return this.mapUnit(t,n);throw new Error(c7(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Sxt={zero:1,center:1,normalize:1};function Axt(e){return Xt(Sxt,e)}const Cxt=new Set([X4e,JL,KL,Bk,eR,k7,T7,QL,Z4e,C7]),kxt=new Set([JL,KL,X4e]);function Wy(e){return kt(e)&&A1(e)==="quantitative"&&!e.bin}function j_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(kt(o)&&kt(a))if(Wy(o)&&Wy(a)){if(o.stack)return t;if(a.stack)return i;const l=kt(o)&&!!o.aggregate,u=kt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Wy(o))return t;if(Wy(a))return i}else{if(Wy(o))return s&&n==="vertical"?void 0:t;if(Wy(a))return s&&n==="horizontal"?void 0:i}}function Txt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function G6e(e,t){var g,v;const n=qf(e)?e:{type:e},r=n.type;if(!Cxt.has(r))return null;const i=j_e(t,"x",n)||j_e(t,"theta",n);if(!i)return null;const s=t[i],o=kt(s)?Ft(s,{}):void 0,a=Txt(i),l=[],u=new Set;if(t[a]){const x=t[a],y=kt(x)?Ft(x,{}):void 0;y&&y!==o&&(l.push(a),u.add(y))}const f=a==="x"?"xOffset":"yOffset",c=t[f],d=kt(c)?Ft(c,{}):void 0;d&&d!==o&&(l.push(f),u.add(d));const h=$yt.reduce((x,y)=>{if(y!=="tooltip"&&Vg(t,y)){const w=t[y];for(const _ of Bt(w)){const A=$c(_);if(A.aggregate)continue;const T=Ft(A,{});(!T||!u.has(T))&&x.push({channel:y,fieldDef:A})}}return x},[]);let p;return s.stack!==void 0?fm(s.stack)?p=s.stack?"zero":null:p=s.stack:kxt.has(r)&&(p="zero"),!p||!Axt(p)||E6e(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((v=s==null?void 0:s.scale)==null?void 0:v.type)!==Xo.LINEAR&&s!=null&&s.stack&&Ct(e1t(s.scale.type)),Wn(t[rd(i)])?(s.stack!==void 0&&Ct(Qvt(i)),null):(kt(s)&&s.aggregate&&!Yyt.has(s.aggregate)&&Ct(t1t(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:wm(r),stackBy:h,offset:p}))}function V6e(e,t,n){const r=Yo(e),i=Mi("orient",r,n);if(r.orient=Fxt(r.type,t,i),i!==void 0&&i!==r.orient&&Ct(Pvt(r.orient,i)),r.type==="bar"&&r.orient){const l=Mi("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:rbt[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Mi("opacity",r,n),o=Mi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Lxt(r.type,t)),Mi("cursor",r,n)===void 0&&(r.cursor=Dxt(r,t,n)),r}function Dxt(e,t,n){return t.href||e.href||Mi("href",e,n)?"pointer":e.cursor}function Lxt(e,t){if(_r([eR,C7,k7,T7],e)&&!E6e(t))return .7}function Rxt(e,t,{graticule:n}){if(n)return!1;const r=Uf("filled",e,t),i=e.type;return Ns(r,i!==eR&&i!==QL&&i!==Bk)}function Fxt(e,t,n){switch(e){case eR:case k7:case T7:case Z4e:case W1t:case V1t:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case JL:if(kt(r)&&(Wo(r.bin)||kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(kt(i)&&(Wo(i.bin)||kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(kt(r)&&r.type===y0&&!Ki(r.bin)||jk(r))&&kt(i)&&Wo(i.bin)?"horizontal":"vertical";if(!o)return(kt(i)&&i.type===y0&&!Ki(i.bin)||jk(i))&&kt(r)&&Wo(r.bin)?"vertical":"horizontal"}case Bk:if(s&&!(kt(r)&&Wo(r.bin))&&o&&!(kt(i)&&Wo(i.bin)))return;case KL:if(o)return kt(i)&&Wo(i.bin)?"horizontal":"vertical";if(s)return kt(r)&&Wo(r.bin)?"vertical":"horizontal";if(e===Bk){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case QL:case C7:{const a=O_e(r),l=O_e(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=nl(r)&&r.type===E1,f=nl(i)&&i.type===E1;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function Oxt(e){const{point:t,line:n,...r}=e;return wt(r).length>1?r:r.type}function Mxt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ll(e[t],["point","line"])});return e}function wO(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?It(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?It(t.point)?t.point:{}:void 0}function U_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class $xt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Sh(t)){const{mark:r,encoding:i}=t,s=qf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!wO(s,n[s.type],i);case"area":return!!wO(s,n[s.type],i)||!!U_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...f}=t,c=aR(u,i),d=qf(a)?a:{type:a},h=wO(d,i[d.type],c),p=d.type==="area"&&U_e(d,i[d.type]),g=[{name:l,...s?{params:s}:{},mark:Oxt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Ll(c,["shape"])}],v=G6e(V6e(d,c,i),c);let x=c;if(v){const{fieldChannel:y,offset:w}=v;x={...c,[y]:{...c[y],...w?{stack:w}:{}}}}return x=Ll(x,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...b1(d,["clip","interpolate","tension","tooltip"]),...p},encoding:x}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...b1(d,["clip","tooltip"]),...h},encoding:x}),r({...f,layer:g},{...n,config:Mxt(i)})}}function Ixt(e,t){return t?ZE(e)?Y6e(e,t):W6e(e,t):e}function _O(e,t){return t?Y6e(e,t):e}function X5(e,t,n){const r=t[e];if(vbt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ct(pvt(r.repeat));return}return t}function W6e(e,t){if(e=X5("field",e,t),e!==void 0){if(e===null)return null;if($7(e)&&Qd(e.sort)){const n=X5("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function q_e(e,t){if(kt(e))return W6e(e,t);{const n=X5("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function H_e(e,t){if(Wn(e)){const n=q_e(e,t);if(n)return n;if(KE(e))return{condition:e.condition}}else{if(JE(e)){const n=q_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function Y6e(e,t){const n={};for(const r in e)if(St(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>H_e(s,t)).filter(s=>s);else{const s=H_e(i,t);s!==void 0&&(n[r]=s)}}return n}class Pxt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Sh(t)){const{encoding:n,mark:r}=t;if(r==="line"||qf(r)&&r.type==="line")for(const i of Fyt){const s=z0(i),o=n[s];if(n[i]&&(kt(o)&&!Wo(o.bin)||sd(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ct(Ivt(!!i.x2,!!i.y2)),r({...t,mark:It(s)?{...s,type:"rule"}:"rule"},n)}}class Nxt extends X7{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[zbt,qbt,Zbt,new $xt,new Pxt]}map(t,n){if(Sh(t)){const r=Vg(t.encoding,Kd),i=Vg(t.encoding,Jd),s=Vg(t.encoding,zL);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=_O(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return Ext(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:f=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(c=>{const d={...u,layer:c},h=`${(i.name?`${i.name}_`:"")+f}child__layer_${cs(c)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(E_e("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,f=!at(r)&&r.row||[l?l.row:null],c=!at(r)&&r.column||[l?l.column:null],d=at(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of f)for(const v of c){const x={repeat:p,row:g,column:v,layer:l.layer},y=(i.name?`${i.name}_`:"")+u+"child__"+(at(r)?`${cs(p)}`:(r.row?`row_${cs(g)}`:"")+(r.column?`column_${cs(v)}`:"")),w=this.map(i,{...n,repeater:x,repeaterPrefix:y});w.name=y,a.push(Ll(w,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return ZE(r)&&t.columns&&(t=Ll(t,["columns"]),Ct(E_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=V_e({parentProjection:o,projection:i}),u=G_e({parentEncoding:s,encoding:_O(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:f,view:c,params:d,encoding:h,...p}=t,{facetMapping:g,layout:v}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),x=_O(o,n.repeater);return this.mapFacet({...p,...v,facet:g,spec:{...l?{width:l}:{},...f?{height:f}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:x,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ct(Mvt([...r?[Kd]:[],...i?[Jd]:[]]));const o={},a={};for(const l of[Kd,Jd]){const u=t[l];if(u){const{align:f,center:c,spacing:d,columns:h,...p}=u;o[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...f}=s;return{facetMapping:Ixt(f,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:G_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:V_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function G_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...wt(e),...wt(t)]);for(const s of i){const o=t[s],a=e[s];if(Wn(o)){const l={...a,...o};r[s]=l}else JE(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Mc(a)||cn(a)||Wn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||$i(r)?void 0:r}function V_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ct(Evt({parentProjection:t,projection:n})),n??t}function Z7(e){return St(e,"filter")}function Bxt(e){return St(e,"stop")}function X6e(e){return St(e,"lookup")}function zxt(e){return St(e,"data")}function jxt(e){return St(e,"param")}function Uxt(e){return St(e,"pivot")}function qxt(e){return St(e,"density")}function Hxt(e){return St(e,"quantile")}function Gxt(e){return St(e,"regression")}function Vxt(e){return St(e,"loess")}function Wxt(e){return St(e,"sample")}function Yxt(e){return St(e,"window")}function Xxt(e){return St(e,"joinaggregate")}function Zxt(e){return St(e,"flatten")}function Kxt(e){return St(e,"calculate")}function Z6e(e){return St(e,"bin")}function Jxt(e){return St(e,"impute")}function Qxt(e){return St(e,"timeUnit")}function ewt(e){return St(e,"aggregate")}function twt(e){return St(e,"stack")}function nwt(e){return St(e,"fold")}function rwt(e){return St(e,"extent")&&!St(e,"density")&&!St(e,"regression")}function iwt(e){return e.map(t=>Z7(t)?{filter:Fv(t.filter,D1t)}:t)}class swt extends X7{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=W_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=W_e(t,n),t.encoding){const r={};for(const[i,s]of Jp(t.encoding))r[i]=K6e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Jp(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...f}=o;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[s]=u!=="none";for(const c of ta(n.selectionPredicates[s]??{}))c.empty=u!=="none";return{name:s,value:a,select:f,bind:l}})}:t}}function W_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Z7(s))return{filter:Z5(s,t)};if(Z6e(s)&&j0(s.bin))return{...s,bin:J6e(s.bin)};if(X6e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function K6e(e,t){var r,i;const n=Gn(e);if(kt(n)&&j0(n.bin)&&(n.bin=J6e(n.bin)),G0(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(KE(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:Z5(s,t)}});else{const{selection:s,param:o,test:a,...l}=K6e(n.condition,t);n.condition=o?n.condition:{...l,test:Z5(n.condition,t)}}return n}function J6e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Z5(e,t){const n=r=>Fv(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Fv(e.test||e.filter,r=>r.selection?n(r.selection):r)}class K5 extends X7{map(t,n){const r=n.selections??[];if(t.params&&!Sh(t)){const i=[];for(const s of t.params)V7(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(zt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=K5.prototype[e];K5.prototype[e]=function(n,r){return t.call(this,n,owt(n,r))}}function owt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Q6e(e,t){t===void 0&&(t=H6e(e.config));const n=cwt(e,t),{width:r,height:i}=e,s=fwt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const awt=new Nxt,lwt=new swt,uwt=new K5;function cwt(e,t={}){const n={config:t};return uwt.map(awt.map(lwt.map(e,n),n),n)}function Y_e(e){return zt(e)?{type:e}:e??{}}function fwt(e,t,n){let{width:r,height:i}=t;const s=Sh(e)||uR(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ct(b_e("width")),r=void 0),i=="container"&&(Ct(b_e("height")),i=void 0));const a={type:"pad",...o,...n?Y_e(n.autosize):{},...Y_e(e.autosize)};if(a.type==="fit"&&!s&&(Ct(rvt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ct(x_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ct(x_e("height")),!Jl(a,{type:"pad"}))return a}function dwt(e){return["fit","fit-x","fit-y"].includes(e)}function hwt(e){return e?`fit-${GL(e)}`:"fit"}const pwt=["background","padding"];function X_e(e,t){const n={};for(const r of pwt)e&&e[r]!==void 0&&(n[r]=Xl(e[r]));return t&&(n.params=e.params),n}class Ah{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ah(Gn(this.explicit),Gn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ns(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of wt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function mf(e){return{explicit:!0,value:e}}function ql(e){return{explicit:!1,value:e}}function e5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:cR(t,n,r,i)}}function cR(e,t,n,r){return e.explicit&&t.explicit&&Ct(Vvt(n,r,e.value,t.value)),e}function tm(e,t,n,r,i=cR){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Jl(e.value,t.value)?e:i(e,t,n,r)}class mwt extends Ah{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function T1(e){return St(e,"url")}function k2(e){return St(e,"values")}function t5e(e){return St(e,"name")&&!T1(e)&&!k2(e)&&!Bp(e)}function Bp(e){return e&&(n5e(e)||r5e(e)||K7(e))}function n5e(e){return St(e,"sequence")}function r5e(e){return St(e,"sphere")}function K7(e){return St(e,"graticule")}var vs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(vs||(vs={}));function i5e({invalid:e,isPath:t}){switch(Q4e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function gwt(e){const{marks:t,scales:n}=i5e(e);return t===n?vs.Main:n==="include-invalid-values"?vs.PreFilterInvalid:vs.PostFilterInvalid}class Di{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ct(xvt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Rl extends Di{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${e4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function EO(e){return e.as!==void 0}function Z_e(e){return`${e}_end`}class Df extends Di{clone(){return new Df(null,Gn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(H0(l)){if(ys(n)){const{mark:f,markDef:c,config:d}=n,h=em({fieldDef:s,markDef:c,config:d});(C2(f)||h)&&(u={timeUnit:Fo(l),field:a})}}else u={as:Ft(s,{forAs:!0}),field:a,timeUnit:l};if(ys(n)){const{mark:f,markDef:c,config:d}=n,h=em({fieldDef:s,markDef:c,config:d});C2(f)&&Bs(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Or(u)]=u)}return i},{});return $i(r)?null:new Df(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Fo(r),o={...i,timeUnit:s};return new Df(t,{[Or(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Jp(this.timeUnits)){const s=EO(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ta(this.timeUnits).map(t=>EO(t)?t.as:Z_e(t.field)))}dependentFields(){return new Set(ta(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Or(this.timeUnits)}`}assemble(){const t=[];for(const n of ta(this.timeUnits)){const{rectBandPosition:r}=n,i=Fo(n.timeUnit);if(EO(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,f=[o,`${o}_end`];t.push({field:zu(s),type:"timeunit",...a?{units:XL(a)}:{},...l?{timezone:"utc"}:{},...u,as:f}),t.push(...K_e(f,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=s5e({timeUnit:i,field:o}),l=Z_e(o);t.push({type:"formula",expr:a,as:l}),t.push(...K_e([o,l],r,i))}}return t}}const fR="offsetted_rect_start",dR="offsetted_rect_end";function s5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=$4e(r),{part:o,step:a}=B4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ki(t)}, ${n?-a:a})`}function K_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=ki(e),s=ki(t);return[{type:"formula",expr:J_e([s5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${fR}`},{type:"formula",expr:J_e([i,s],n+.5),as:`${e}_${dR}`}]}return[]}function J_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const tS="_tuple_fields";class ywt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const vwt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new ywt),s={},o={},a=new Set,l=(p,g)=>{const v=g==="visual"?p.channel:p.field;let x=cs(`${r}_${v}`);for(let y=1;a.has(x);y++)x=cs(`${r}_${v}_${y}`);return a.add(x),{[g]:x}},u=t.type,f=e.config.selection[u],c=n.value!==void 0?Bt(n.value):null;let{fields:d,encodings:h}=It(n.select)?n.select:{};if(!d&&!h&&c){for(const p of c)if(It(p))for(const g of wt(p))Ryt(g)?(h||(h=[])).push(g):u==="interval"?(Ct(hvt),h=f.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=f.encodings,"fields"in f&&(d=f.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let v=g.field;if(g.aggregate){Ct(ivt(p,g.aggregate));continue}else if(!v){Ct(__e(p));continue}if(g.timeUnit&&!H0(g.timeUnit)){v=e.vgField(p);const x={timeUnit:g.timeUnit,as:v,field:g.field};o[Or(x)]=x}if(!s[v]){const x=u==="interval"&&id(p)&&Oc(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",y={field:v,channel:p,type:x,index:i.items.length};y.signals={...l(y,"data"),...l(y,"visual")},i.items.push(s[v]=y),i.hasField[v]=s[v],i.hasSelectionId=i.hasSelectionId||v===Ic,o4e(p)?(y.geoChannel=p,y.channel=s4e(p),i.hasChannel[y.channel]=s[v]):i.hasChannel[p]=s[v]}}else Ct(__e(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Ic}c&&(t.init=c.map(p=>i.items.map(g=>It(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),$i(o)||(i.timeUnit=new Df(null,o))},signals:(e,t,n)=>{const r=t.name+tS;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u5e)})}},o5e="_curr",XC="anim_value",sv="anim_clock",J5="eased_anim_clock",a5e="min_extent",l5e="max_range_extent",SO="last_tick_at",AO="is_playing",bwt=1/60*1e3,xwt=(e,t)=>[{name:J5,update:sv},{name:`${e}_domain`,init:`domain('${t}')`},{name:a5e,init:`extent(${e}_domain)[0]`},{name:l5e,init:`extent(range('${t}'))[1]`},{name:XC,update:`invert('${t}', ${J5})`}],wwt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Lf(t)&&(n=n.concat([{name:sv,init:"0",on:[{events:{type:"timer",throttle:bwt},update:`${AO} ? (${sv} + (now() - ${SO}) > ${l5e} ? 0 : ${sv} + (now() - ${SO})) : ${sv}`}]},{name:SO,init:"now()",on:[{events:[{signal:sv},{signal:AO}],update:"now()"}]},{name:AO,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+tS,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ta(e.component.selection??{}).reduce((f,c)=>c.type==="interval"?f.concat(c.name+$v):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Wg(e)}, `;if(t.project.hasSelectionId)u+=`${Ic}: ${o}[${Tt(Ic)}]`;else if(Lf(t))u+=`fields: ${i}, values: [${XC} ? ${XC} : ${a5e}]`;else{const f=s.items.map(c=>{const d=e.fieldDef(c.channel);return d!=null&&d.bin?`[${o}[${Tt(e.vgField(c.channel,{}))}], ${o}[${Tt(e.vgField(c.channel,{binSuffix:"end"}))}]]`:`${o}[${Tt(c.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}if(Lf(t))return n.concat(xwt(t.name,e.scaleName(mm)),[{name:r+ch,on:[{events:[{signal:J5},{signal:XC}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+ch,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function u5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=zu(i.field),i}function x0(e,t=!0,n=Ra){if(at(e)){const r=e.map(i=>x0(i,t,n));return t?`[${r.join(", ")}]`:r}else if(q0(e))return n(t?g0(e):y1t(e));return t?n(Ii(e)):e}function _wt(e,t){for(const n of ta(e.component.selection??{})){const r=n.name;let i=`${r}${ch}, ${n.resolve==="global"?"true":`{unit: ${Wg(e)}}`}`;for(const s of pR)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Xwt,on:[{events:{signal:n.name+ch},update:`modify(${Tt(n.name+w0)}, ${i})`}]})}return J7(t)}function Ewt(e,t){if(e.component.selection&&wt(e.component.selection).length){const n=Tt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:hm("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return J7(t)}function Swt(e,t){let n=!1;for(const r of ta(e.component.selection??{})){const i=r.name,s=Tt(i+w0);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C5e}(${s}, ${Tt(a)}${l}`})}n=!0;for(const a of pR)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),J7(t)}function Awt(e,t){const n=[],r=[],i=Wg(e,{escape:!1});for(const s of ta(e.component.selection??{})){const o={name:s.name+w0};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ic}}]),s.init){const l=s.project.items.map(u5e);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:i,[Ic]:x0(u,!1)[0]})):s.init.map(u=>({unit:i,fields:l,values:x0(u,!1)}))}if([...n,...t].filter(l=>l.name===s.name+w0).length||n.push(o),Lf(s)&&t.length){const l=e.lookupDataSource(e.getDataName(vs.Main)),u=t.find(c=>c.name===l),f=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(d=>d!==f);const c={name:u.name+o5e,source:u.name,transform:[f]};r.push(c)}}}return n.concat(t,r)}function c5e(e,t){for(const n of ta(e.component.selection??{}))for(const r of pR)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Cwt(e,t){for(const n of e.children)ys(n)&&(t=c5e(n,t));return t}function kwt(e,t,n,r){const i=R5e(e,t.param,t);return{signal:Oc(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function J7(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const eh={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!id(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ct(lvt),!s||!Oc(o)){Ct(avt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||e$(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(C5e))i.update=`{${r.map(o=>`${Tt(zu(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Tt(zu(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!e$(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function Q5(e,t){return`domain(${Tt(e.scaleName(t))})`}function e$(e){return e.parent&&wb(e.parent)&&(!e.parent.parent||e$(e.parent.parent))}const $v="_brush",f5e="_scale_trigger",Cw="geo_interval_init_tick",d5e="_init",Twt="_center",Dwt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...It(n.select)?n.select:{}};i.fields=[Ic],i.encodings||(i.encodings=n.value?wt(n.value):[Gc,Hc]),n.select={type:"interval",...i}}if(t.translate&&!eh.defined(t)){const i=`!event.item || event.item.mark.name !== ${Tt(t.name+$v)}`;for(const s of t.events){if(!s.between){Ct(`${s} is not an ordered event stream for interval selections.`);continue}const o=Bt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ch,s=ta(t.project.hasChannel).filter(a=>a.channel===fs||a.channel===Io),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(Lwt(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=Tt(e.projectionName()),l=e.projectionName()+Twt,{x:u,y:f}=t.project.hasChannel,c=u&&u.signals.visual,d=f&&f.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=f?o&&o[f.index]:`${l}[1]`,g=A=>e.getSizeSignalRef(A).signal,v=`[[${c?c+"[0]":"0"}, ${d?d+"[0]":"0"}],[${c?c+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:r+d5e,init:`[scale(${a}, [${u?h[0]:h}, ${f?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${f?p[1]:p}])]`}),(!u||!f)&&(n.find(T=>T.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const x=`intersect(${v}, {markname: ${Tt(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${Wg(e)}}`,w=`vlSelectionTuples(${x}, ${y})`,_=s.map(A=>A.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:Cw}]:[]],update:w}]})}else{if(!eh.defined(t)){const u=r+f5e,f=s.map(c=>{const d=c.channel,{data:h,visual:p}=c.signals,g=Tt(e.scaleName(d)),v=e.getScaleComponent(d).get("type"),x=Oc(v)?"+":"";return`(!isArray(${h}) || (${x}invert(${g}, ${p})[0] === ${x}${h}[0] && ${x}invert(${g}, ${p})[1] === ${x}${h}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:s.map(c=>({scale:e.scaleName(c.channel)})),update:f.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Wg(e)}, fields: ${r+tS}, values`;return n.concat({name:i,...o?{init:`{${l}: ${x0(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ys(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Cw).length||n.unshift({name:Cw,value:null,on:[{events:"timer{1}",update:`${Cw} === null ? {} : ${Cw}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${Tt(t.name+w0)})`;if(eh.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const v of wt(u))u[v]=[{test:`${l}.length && ${l}[0].unit === ${Wg(e)}`,...u[v]},{value:0}];const{fill:f,fillOpacity:c,cursor:d,...h}=t.mark,p=wt(h).reduce((v,x)=>(v[x]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[x]},{value:null}],v),{}),g=d??(t.translate?"move":null);return[{name:`${r+$v}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:c}},update:u}},...n,{name:r+$v,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function Lwt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Tt(i?e.scaleName(s):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(s===fs?"width":"height").signal,f=`${s}(unit)`,c=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${f}, ${f}]`},{events:h,update:`[${o}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=eh.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,v=r?{init:x0(r,!0,l)}:{value:[]};return c.push({events:{signal:t.name+f5e},update:Oc(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...v,on:c},{name:d,...r?{init:x0(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===fs?0:1,h=t.name+d5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:c}]}}function yb({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=KE(t)&&t.condition;let o=[];s&&(o=Bt(s).map(u=>{const f=i(u);if(ybt(u)){const{param:c,empty:d}=u;return{test:L5e(e,{param:c,empty:d}),...f}}else return{test:Xk(e,u.test),...f}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Q7(e,t="text"){const n=e.encoding[t];return yb({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>hR(r,e.config),invalidValueRef:void 0})}function hR(e,t,n="datum"){if(e){if(Mc(e))return os(e.value);if(Wn(e)){const{format:r,formatType:i}=qk(e);return O7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:Q_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return yb({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const f=hR(u,i,a);if(f)return f;if(u===null)return;let c=Mi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),zt(c))return{value:c};if(It(c))return cn(c)?c:c.content==="encoding"?Q_e(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function p5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(f,c){const d=z0(c),h=nl(f)?f:{...f,type:e[d].type},p=h.title||P7(h,i),g=Bt(p).join(", ").replaceAll(/"/g,'\\"');let v;if(Bs(c)){const x=c==="x"?"x2":"y2",y=$c(e[x]);if(Wo(h.bin)&&y){const w=Ft(h,{expr:o}),_=Ft(y,{expr:o}),{format:A,formatType:T}=qk(h);v=XE(w,_,A,T,i),s.add(x)}}if((Bs(c)||c===Hu||c===qc)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:x,formatType:y}=qk(h);v=O7({fieldOrDatumDef:h,format:x,formatType:y,expr:o,config:i,normalizeStack:!0}).signal}v??(v=hR(h,i,o).signal),a.push({channel:c,key:g,value:v})}B7(e,(f,c)=>{kt(f)?l(f,c):rR(f)&&l(f.condition,c)});const u={};for(const{channel:f,key:c,value:d}of a)!s.has(f)&&!u[c]&&(u[c]=d);return u}function Q_e(e,t,n,{reactiveGeom:r}={}){const i=p5e(e,t,n,{reactiveGeom:r}),s=Jp(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Rwt(e){const{markDef:t,config:n}=e,r=Mi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Fwt(e),...Owt(e)}}function Fwt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Mi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Xt(evt,t)?{}:{ariaRoleDescription:{value:t}}}function Owt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return yb({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>hR(l,e.config),invalidValueRef:void 0});const o=Mi("description",n,r);if(o!=null)return{description:os(o)};if(r.aria===!1)return{};const a=p5e(t,i,r);if(!$i(a))return{description:{signal:Jp(a).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Zo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Mi(e,r,s,{vgChannel:o,ignoreVgConfig:!KE(u)})),l!==void 0&&(a=os(l)));const f={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},c=t6e({...f,scaleChannel:e,channelDef:u});return yb({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:c,mainRefFn:h=>F7({...f,channel:e,channelDef:h,stack:null,defaultRef:a})})}function m5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Mi("filled",n,i),a=_r(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Mi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Mi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],f=o?"fill":"stroke",c={...l?{fill:os(l)}:{},...u?{stroke:os(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ct(C4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...Zo("color",e,{vgChannel:f,defaultValue:o?l:u}),...Zo("fill",e,{defaultValue:r.fill?l:void 0}),...Zo("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Mwt(e){const{encoding:t,mark:n}=e,r=t.order;return!wm(n)&&Mc(r)?yb({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>os(i.value),invalidValueRef:void 0}):{}}function D1({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:F7({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:os(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[rd(e)],f=t.scaleName(e),c=t.getScaleComponent(e),{offset:d,offsetType:h}=D1({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=eB({model:t,defaultPos:n,channel:e,scaleName:f,scale:c}),g=!l&&Bs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:$wt({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:f,scale:c,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function $wt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Wn(n)&&i&&t===i.fieldChannel){if(kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return zk({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Gg(n,r,{suffix:"end"},{offset:s})}return R7(e)}function eB({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=z0(n),l=Qp(n),u=Mi(n,s,o,{vgChannel:l});if(u!==void 0)return F_(n,u);switch(t){case"zeroOrMin":return e2e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return e2e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[Pl(n)],mult:.5}}}}function e2e({mainChannel:e,config:t,...n}){const r=e6e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Iwt={left:"x",center:"xc",right:"x2"},Pwt={top:"y",middle:"yc",bottom:"y2"};function g5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Qp(e);const i=e==="x"?"align":"baseline",s=Mi(i,t,n);let o;return cn(s)?(Ct($vt(i)),o=void 0):o=s,e==="x"?Iwt[o||(r==="top"?"left":"center")]:Pwt[o||r]}function Wk(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y5e(e,t,{defaultPos:n,defaultPos2:r}):Ka(e,t,{defaultPos:n})}function y5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=rd(e),a=Pl(e),l=Nwt(t,r,o),u=l[a]?g5e(e,i,s):Qp(e);return{...Ka(e,t,{defaultPos:n,vgChannel:u}),...l}}function Nwt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=z0(n),u=Pl(n),f=Qp(n),c=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?D1({channel:n,markDef:s,encoding:r,model:e}):D1({channel:l,markDef:s,encoding:r,model:e});if(!c&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const v=Pl(n),x=e.markDef[v];return x!=null?{[v]:{value:x}}:{[f]:{field:e.getName(n)}}}const g=Bwt({channel:n,channelDef:c,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[f]:g}:BA(n,s)||BA(n,{[n]:j5(n,s,a.style),[u]:j5(u,s,a.style)})||BA(n,a[i])||BA(n,a.mark)||{[f]:eB({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Bwt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return Wn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Gg(t,s,{suffix:"start"},{offset:l}):R7({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function BA(e,t){const n=Pl(e),r=Qp(e);if(t[r]!==void 0)return{[r]:F_(e,t[r])};if(t[e]!==void 0)return{[r]:F_(e,t[e])};if(t[n]){const i=t[n];if(v0(i))Ct(Dvt(n));else return{[n]:F_(e,i)}}}function uh(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=rd(t),a=Pl(t),l=r[t],u=r[o],f=e.getScaleComponent(t),c=f?f.get("type"):void 0,d=i.orient,h=r[a]??r.size??Mi("size",i,n,{vgChannel:a}),p=c4e(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return kt(l)&&(Ki(l.bin)||Wo(l.bin)||l.timeUnit&&!u)&&!(h&&!v0(h))&&!r[p]&&!Mo(c)?Uwt({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Wn(l)&&Mo(c)||g)&&!u?jwt(l,t,e):y5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function zwt(e,t,n,r,i,s,o){if(v0(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=Uf("minBandSize",{type:o},r);return{signal:f?`max(${xc(f)}, ${u})`:u}}else i.band!==1&&(Ct(Bvt(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(cn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(U0(l)&&li(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:c}=r.scale,d=Ns(l,o==="tick"?c:o==="bar"?u:f);if(cn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(li(d))return{signal:`${1-d} * ${e}`}}return{value:Y5(r.view,e)-2}}function jwt(e,t,n){var R,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=Pl(t),c=rd(t),d=c4e(t),h=n.scaleName(d),p=n.getScaleComponent(i7(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let v;(i.size||r.size)&&(g?v=Zo("size",n,{vgChannel:f,defaultRef:os(r.size)}):Ct(qvt(r.type)));const x=!!v,y=l6e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=u||p)==null?void 0:R.get("type"),useVlSizeChannel:g});v=v||{[f]:zwt(f,h||l,p||u,s,y,!!e,r.type)};const w=((O=u||p)==null?void 0:O.get("type"))==="band"&&v0(y)&&!x?"top":"middle",_=g5e(t,r,s,w),A=_==="xc"||_==="yc",{offset:T,offsetType:D}=D1({channel:t,markDef:r,encoding:i,model:n,bandPosition:A?.5:0}),k=R7({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:T,defaultRef:eB({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:A?D==="encoding"?0:.5:cn(y)?{signal:`(1-${y})/2`}:v0(y)?(1-y.band)/2:0});if(f)return{[_]:k,...v};{const B=Qp(c),K=v[f],L=T?{...K,offset:T}:K;return{[_]:k,[B]:at(k)?[k[0],{...k[1],offset:L}]:{...k,offset:L}}}}function t2e(e,t,n,r,i,s,o){if(i4e(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(cn(n)||cn(i)||cn(r)||s){const u=xc(n),f=xc(i),c=xc(r),d=xc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${l})`:l,g=c?`${c} + `:"",v=u?`(${u} ? -1 : 1) * `:"",x=f?`(${f} + ${p})`:p;return{signal:g+v+x}}else return i=i||0,r+(n?-i-l:+i+l)}function Uwt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,f=a.get("reverse"),c=l6e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),d=(O=r.component.axes[n])==null?void 0:O[0],h=(d==null?void 0:d.get("translate"))??.5,p=Bs(n)?Mi("binSpacing",s,i)??0:0,g=rd(n),v=Qp(n),x=Qp(g),y=Uf("minBandSize",s,i),{offset:w}=D1({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=D1({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),A=fbt({fieldDef:e,scaleName:l}),T=t2e(n,p,f,h,w,y,A),D=t2e(g,p,f,h,_??w,y,A),k=cn(c)?{signal:`(1-${c.signal})/2`}:v0(c)?(1-c.band)/2:.5,R=em({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Ki(e.bin)||e.timeUnit){const B=e.timeUnit&&R!==.5;return{[x]:n2e({fieldDef:e,scaleName:l,bandPosition:k,offset:D,useRectOffsetField:B}),[v]:n2e({fieldDef:e,scaleName:l,bandPosition:cn(k)?{signal:`1-${k.signal}`}:1-k,offset:T,useRectOffsetField:B})}}else if(Wo(e.bin)){const B=Gg(e,l,{},{offset:D});if(kt(t))return{[x]:B,[v]:Gg(t,l,{},{offset:T})};if(j0(e.bin)&&e.bin.step)return{[x]:B,[v]:{signal:`scale("${l}", ${Ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Ct(D4e(g))}function n2e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return zk({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:fR,endSuffix:dR}:{}})}const qwt=new Set(["aria","width","height"]);function Gu(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m5e(e):{};return{...Hwt(e.markDef,t),...r2e("fill",n),...r2e("stroke",r),...Zo("opacity",e),...Zo("fillOpacity",e),...Zo("strokeOpacity",e),...Zo("strokeWidth",e),...Zo("strokeDash",e),...Mwt(e),...h5e(e),...Q7(e,"href"),...Rwt(e)}}function r2e(e,t){return t?{[e]:t}:{}}function Hwt(e,t){return Qyt.reduce((n,r)=>(!qwt.has(r)&&St(e,r)&&t[r]!=="ignore"&&(n[r]=os(e[r])),n),{})}function tB(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!id(s)||!(o=e.getScaleType(s)))return;const a=VL(i.aggregate),l=L7({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(lbt(l)){const f=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(s=>ZL(s,!0)).join(" && ")}}}function i2e(e,t){if(t!==void 0)return{[e]:os(t)}}const CO="voronoi",v5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(CO)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(wm(s))return Ct(svt(s)),n;const o={name:e.getName(CO),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,f)=>{const c=u.name??"";c===e.component.mark[0].name?a=f:c.includes(CO)&&(l=!0)}),l||n.splice(a+1,0,o),n}},b5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!G7(e.bind),parse:(e,t,n)=>k5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const f=cs(`${r}_${l.field}`);n.filter(d=>d.name===f).length||n.unshift({name:f,...o?{init:x0(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Tt(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+ch),o=r+tS,a=i.items.map(u=>cs(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},Yk="_toggle",x5e={defined:e=>e.type==="point"&&!Lf(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Yk,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ch,r=t.name+Yk;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Wg(e)}}, `)+`${r} ? ${n} : null`}},Gwt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Lf(e),parse:(e,t)=>{t.clear&&(t.clear=zt(t.clear)?hm(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===cs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ch);r(i,"null"),x5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+Yk),r(i,"false"))}return n}},w5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&G7(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ic;return t&&!n&&Ct(uvt),t&&n},parse:(e,t,n)=>{const r=Gn(n);if(r.select=zt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},k5e(t,r),It(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Bt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=xO(t.bind)?t.bind.legend:"click",s=zt(i)?hm(i,"view"):Bt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=xO(t.bind)&&t.bind.legend,s=o=>a=>{const l=Gn(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${cs(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ch),o=r+tS,a=i.items.filter(d=>d.hasLegend).map(d=>cs(`${r}_${cs(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const f=n.find(d=>d.name===r+Yk),c=xO(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:c}):f.on[0].events=c),n}};function Vwt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of ta(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&w5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const _5e="_translate_anchor",E5e="_translate_delta",Wwt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=eh.defined(t),s=r+_5e,{x:o,y:a}=t.project.hasChannel;let l=hm(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+$v,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?Q5(e,fs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?Q5(e,Io):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+E5e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&s2e(e,t,o,"width",n),a!==void 0&&s2e(e,t,a,"height",n),n}};function s2e(e,t,n,r,i){const s=t.name,o=s+_5e,a=s+E5e,l=n.channel,u=eh.defined(t),f=i.find(A=>A.name===n.signals[u?"data":"visual"]),c=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===fs?p?"":"-":p?"-":"":"",v=`${o}.extent_${l}`,x=`${g}${a}.${l} / ${u?`${c}`:`span(${v})`}`,y=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${y}(${v}, ${x}${w})`;f.on.push({events:{signal:a},update:u?_:`clampRange(${_}, 0, ${c})`})}const S5e="_zoom_anchor",A5e="_zoom_delta",Ywt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=eh.defined(t),s=r+A5e,{x:o,y:a}=t.project.hasChannel,l=Tt(e.scaleName(fs)),u=Tt(e.scaleName(Io));let f=hm(t.zoom,"scope");return i||(f=f.map(c=>(c.markname=r+$v,c))),n.push({name:r+S5e,on:[{events:f,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&o2e(e,t,o,"width",n),a!==void 0&&o2e(e,t,a,"height",n),n}};function o2e(e,t,n,r,i){const s=t.name,o=n.channel,a=eh.defined(t),l=i.find(y=>y.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(o),c=f&&f.get("type"),d=a?Q5(e,o):l.name,h=s+A5e,p=`${s}${S5e}.${o}`,g=!a||!f?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",v=a?c==="pow"?`, ${f.get("exponent")??1}`:c==="symlog"?`, ${f.get("constant")??1}`:"":"",x=`${g}(${d}, ${p}, ${h}${v})`;l.on.push({events:{signal:h},update:a?x:`clampRange(${x}, 0, ${u})`})}const w0="_store",ch="_tuple",Xwt="_modify",C5e="vlSelectionResolve",pR=[wwt,Dwt,vwt,x5e,b5e,eh,w5e,Gwt,Wwt,Ywt,v5e];function Zwt(e){let t=e.parent;for(;t&&!iu(t);)t=t.parent;return t}function Wg(e,{escape:t}={escape:!0}){let n=t?Tt(e.name):e.name;const r=Zwt(e);if(r){const{facet:i}=r;for(const s of Ru)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Tt(r.vgField(s))}])`)}return n}function nB(e){return ta(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function k5e(e,t){(zt(t.select)||!t.select.on)&&delete e.events,(zt(t.select)||!t.select.clear)&&delete e.clear,(zt(t.select)||!t.select.toggle)&&delete e.toggle}function Lf(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function t$(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...t$(e.object)),t.push(...t$(e.property))),t)}function T5e(e){return e.object.type==="MemberExpression"?T5e(e.object):e.object.name==="datum"}function D5e(e){const t=w9(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&T5e(r)&&n.add(t$(r).slice(1).join("."))}),n}class vb extends Di{clone(){return new vb(null,this.model,Gn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Xk(this.model,this.filter,this),this._dependentFields=D5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Kwt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=cs(s.name),a=s.select,l=zt(a)?a:a.type,u=It(a)?Gn(a):{type:l},f=r[l];for(const h in f)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...f.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=Gn(f[h]??u[h])));const c=n[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:zt(u.on)?hm(u.on,"scope"):Bt(Gn(u.on))};if(Lf(c)&&(i++,i>1)){delete n[o];continue}const d=Gn(s);for(const h of pR)h.defined(c)&&h.parse&&h.parse(e,c,d)}return i>1&&Ct(mvt),n}function L5e(e,t,n,r="datum"){const i=zt(t)?t:t.param,s=cs(i),o=Tt(s+w0);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Tt(a.resolve)})`,f=`${l}${o}, ${r}${u}`,c=`length(data(${o}))`;return t.empty===!1?`${c} && ${f}`:`!${c} || ${f}`}function R5e(e,t,n){const r=cs(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ct(gvt(s));else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ct(yvt(a,i,n,s))):s=a[0].field}return`${o.name}[${Tt(zu(s))}]`}function Jwt(e,t){for(const[n,r]of Jp(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Rl(new vb(t,e,{param:n}),i,vs.Lookup,e.component.data.outputNodeRefCounts)}}function Xk(e,t,n){return R_(t,r=>zt(r)?r:C1t(r)?L5e(e,r,n):j4e(r))}function Qwt(e,t){if(e)return at(e)&&!cp(e)?e.map(n=>P7(n,t)).join(", "):e}function kO(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function s_(e,t,n,r={header:!1}){var c,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...f}=e.combine();if(!i){for(const h in f){const p=h,g=Rbt[p],v=f[p];if(g&&g!==t&&g!=="both")delete f[p];else if(eS(v)){const{condition:x,...y}=v,w=Bt(x),_=M_e[p];if(_){const{vgProp:A,part:T}=_,D=[...w.map(k=>{const{test:R,...O}=k;return{test:Xk(null,R),...O}}),y];kO(f,T,A,D),delete f[p]}else if(_===null){const A={signal:w.map(T=>{const{test:D,...k}=T;return`${Xk(null,D)} ? ${v_e(k)} : `}).join("")+v_e(y)};f[p]=A}}else if(cn(v)){const x=M_e[p];if(x){const{vgProp:y,part:w}=x;kO(f,w,y,v),delete f[p]}}_r(["labelAlign","labelBaseline"],p)&&f[p]===null&&delete f[p]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:h}=f.encode;f.encode={...h?{grid:h}:{}},$i(f.encode)&&delete f.encode}return{scale:o,orient:s,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ns(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(c=f.encode)==null?void 0:c.labels)!=null&&d.update&&cn(f.encode.labels.update.text)&&(p=h0(a,"datum.label",f.encode.labels.update.text.signal)),kO(f,"labels","text",{signal:p})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const p of v6e)e.hasAxisPart(p)||delete f.encode[p];$i(f.encode)&&delete f.encode}const h=Qwt(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Ns(u,0)}}}}function F5e(e){const{axes:t}=e.component,n=[];for(const r of Eh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function e_t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>s_(i,"grid",t)),...r.map(i=>s_(i,"grid",t)),...n.map(i=>s_(i,"main",t)),...r.map(i=>s_(i,"main",t))].filter(i=>i)}function a2e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...wt(o),...wt(a)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${s}" ? ${xc(o[f])} : ${xc(a[f])}`};return u}return t[i]})])}function t_t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:G4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=cn(n)?"axisOrient":`axis${qE(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:a2e(a,r,e,n),vgAxisConfig:a2e(l,r,e,n),axisConfigStyle:n_t([...l,...a],r)}}function n_t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Bt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function n$(e,t,n,r={}){var s;const i=b4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const l2e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??r_t(n,e),gridScale:({model:e,channel:t})=>i_t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||M5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||O5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??o_t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??a_t(t.type,n,kt(t)&&!!t.timeUnit,kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??u_t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:c_t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return w4e(i?[F_e(i)]:[],kt(o)?[F_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>f_t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??d_t(n,t)};function r_t(e,t){return!Mo(e)&&kt(t)&&!Ki(t==null?void 0:t.bin)&&!Wo(t==null?void 0:t.bin)}function i_t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function s_t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return cn(s)?s:A2(s);{const{configValue:o}=n$("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?A2(o):n===fs&&_r([A7,S7],e.type)&&!(kt(e)&&e.timeUnit)?270:void 0}}function r$(e){return`(((${e.signal} % 360) + 360) % 360)`}function O5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(cn(e)){const i=r$(e),s=cn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(cn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(cn(e)){const i=r$(e),s=cn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(cn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function M5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(cn(e)){const o=r$(e),a=cn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(cn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function o_t(e,t){if(t==="x"&&_r(["quantitative","temporal"],e))return!0}function a_t(e,t,n,r){if(n&&!It(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function l_t(e){return e==="x"?"bottom":"left"}function u_t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Mo(t)&&t!=="log"){if(kt(e)){if(Ki(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&_r(["month","hours","day","quarter"],(i=Fo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function c_t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(kt(t)){const{timeUnit:n}=t;if(n){const r=N4e(n);if(r)return{signal:r}}}}function $5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return _4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function f_t(e,t){const n=e.values;if(at(n))return y6e(t,n);if(cn(n))return n}function d_t(e,t){return e==="rect"&&Uk(t)?1:0}class L1 extends Di{clone(){return new L1(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=D5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(G0(r)&&a6e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,f)=>`${j4e({field:s,timeUnit:o,equal:u})} ? ${f} : `).join("")+a.length;t=new L1(t,{calculate:l,as:R1(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Or(this.transform)}`}}function R1(e,t,n){return Ft(e,{prefix:t,suffix:"sort_index",...n})}function mR(e,t){return _r(["top","bottom"],t)?"column":_r(["left","right"],t)||e==="row"?"row":"column"}function F1(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ns((t||{})[e],i[e],n.header[e])}function gR(e,t,n,r){const i={};for(const s of e){const o=F1(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const rB=["row","column"],iB=["header","footer"];function h_t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=gR(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=mR(t,a),u=A2(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...P5e(u,l),...I5e(l,u,s),...N5e(r,i,t,Qbt,I6e)}}}function I5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=M5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function P5e(e,t){const n=O5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function p_t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of iB)if(n[i])for(const s of n[i]){const o=g_t(e,t,i,n,s);o!=null&&r.push(o)}return r}function m_t(e,t){const{sort:n}=e;return Qd(n)?{field:Ft(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:R1(e,t,{expr:"datum"}),order:"ascending"}:{field:Ft(e,{expr:"datum"}),order:n??"ascending"}}function i$(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=gR(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=O7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=mR(t,a);return{text:{signal:l?h0(h0(l,"datum.label",u),"datum.value",Ft(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...P5e(s,f),...I5e(f,s,o),...N5e(n,e,t,ext,P6e)}}function g_t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:c}=gR(["labelOrient"],o.header,a,t);(t==="row"&&!_r(["top","bottom"],c)||t==="column"&&!_r(["left","right"],c))&&(s=i$(o,t,a))}const l=iu(e)&&!ZE(e.facet),u=i.axes,f=(u==null?void 0:u.length)>0;if(s||f){const c=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:m_t(o,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[c]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const y_t={column:{start:0,end:1},row:{start:1,end:0}};function v_t(e,t){return y_t[t][e]}function b_t(e,t){const n={};for(const r of Ru){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=gR(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=mR(r,o),l=v_t(s,a);l!==void 0&&(n[a]=l)}}return $i(n)?void 0:n}function N5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=F1(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function sB(e){return[...zA(e,"width"),...zA(e,"height"),...zA(e,"childWidth"),...zA(e,"childHeight")]}function zA(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Mo(o)&&U0(a)){const l=e.scaleName(n);return iu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[u2e(l,a)]:[u2e(l,a),{name:i,update:B5e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=W5(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function u2e(e,t){const n=`${e}_step`;return cn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function B5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ns(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${xc(o)}, ${xc(s)}) * ${e}_step`}function z5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function j5e(e,t){return wt(e).reduce((n,r)=>({...n,...yb({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>os(i.value),invalidValueRef:void 0})}),{})}function U5e(e,t){if(iu(t))return e==="theta"?"independent":"shared";if(wb(t))return"shared";if(dB(t))return Bs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function oB(e,t){const n=e.scale[t],r=Bs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ct(Yvt(t)),"independent"):e[r][t]||"shared"}const x_t={...rxt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},q5e=wt(x_t);class w_t extends Ah{}const c2e={symbols:__t,gradient:E_t,labels:S_t,entries:A_t};function __t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,f=o.filled&&u!=="trail";let c={...nvt({},n,J1t),...m5e(n,{filled:f})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?H5e(a.opacity)??o.opacity:void 0;if(c.fill){if(r==="fill"||f&&r===$l)delete c.fill;else if(St(c.fill,"field"))h?delete c.fill:(c.fill=os(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=os(g??1));else if(at(c.fill)){const v=s$(a.fill??a.color)??o.fill??(f&&o.color);v&&(c.fill=os(v))}}if(c.stroke){if(r==="stroke"||!f&&r===$l)delete c.stroke;else if(St(c.stroke,"field")||p)delete c.stroke;else if(at(c.stroke)){const v=Ns(s$(a.stroke||a.color),o.stroke,f?o.color:void 0);v&&(c.stroke={value:v})}}if(r!==_h){const v=kt(t)&&V5e(n,i,t);v?c.opacity=[{test:v,...os(g??1)},os(l.legend.unselectedOpacity)]:g&&(c.opacity=os(g))}return c={...c,...e},$i(c)?void 0:c}function E_t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H5e(o.opacity)||s.opacity:void 0;return u&&(a.opacity=os(u)),a={...a,...e},$i(a)?void 0:a}function S_t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=kt(t)?V5e(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=s;let c;b0(f)?c=wc({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:o}):u===void 0&&f===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?c=wc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&kt(t)&&t.timeUnit===void 0&&(c=wc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...l?{opacity:l}:{},...c?{text:c}:{},...e};return $i(d)?void 0:d}function A_t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H5e(e){return G5e(e,(t,n)=>Math.max(t,n.value))}function s$(e){return G5e(e,(t,n)=>Ns(t,n.value))}function G5e(e,t){if(bbt(e))return Bt(e.condition).reduce(t,e.value);if(Mc(e))return e.value}function V5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Tt(n.field);return r.map(s=>`(!length(data(${Tt(cs(s)+w0)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const f2e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return i6e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return s6e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??F_t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??O_t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??k_t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Mv(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Ov(n)&&Sf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>C_t(t,e)};function C_t(e,t){const n=e.values;if(at(n))return y6e(t,n);if(cn(n))return n}function k_t(e,t,n,r){if(t!=="shape"){const i=s$(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function T_t(e){const{legend:t}=e;return Ns(t.type,D_t(e))}function D_t({channel:e,timeUnit:t,scaleType:n}){if(Ov(e)){if(_r(["quarter","month","day"],t))return"symbol";if(Sf(n))return"gradient"}return"symbol"}function L_t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??R_t(n,t)}function R_t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function F_t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Sf(i))return n==="horizontal"?r==="top"||r==="bottom"?d2e(t,"width",o,s):o:d2e(t,"height",l,a)}function d2e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function O_t(e){if(_r(["quantile","threshold","log","symlog"],e))return"greedy"}function W5e(e){const t=ys(e)?M_t(e):N_t(e);return e.component.legends=t,t}function M_t(e){const{encoding:t}=e,n={};for(const r of[$l,...B6e]){const i=go(t[r]);!i||!e.getScaleComponent(r)||r===Il&&kt(i)&&i.type===gb||(n[r]=P_t(e,r))}return n}function $_t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function I_t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function P_t(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new w_t({},$_t(e,t));Vwt(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),f=go(i[t]),c=kt(f)?(_=Fo(f.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||s.legend.orient||"right",h=T_t({legend:n,channel:t,timeUnit:c,scaleType:u}),p=L_t({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:o,config:s,scaleType:u,orient:d,legendType:h,direction:p};for(const A of q5e){if(h==="gradient"&&A.startsWith("symbol")||h==="symbol"&&A.startsWith("gradient"))continue;const T=A in f2e?f2e[A](g):n[A];if(T!==void 0){const D=I_t(T,A,n,e.fieldDef(t));(D||s.legend[A]===void 0)&&a.set(A,T,D)}}const v=(n==null?void 0:n.encoding)??{},x=a.get("selections"),y={},w={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:h};for(const A of["labels","legend","title","symbols","gradient","entries"]){const T=j5e(v[A]??{},e),D=A in c2e?c2e[A](T,w):T;D!==void 0&&!$i(D)&&(y[A]={...x!=null&&x.length&&kt(f)?{name:`${cs(f.field)}_legend_${A}`}:{},...x!=null&&x.length?{interactive:!!x}:{},update:D})}return $i(y)||a.set("encode",y,!!(n!=null&&n.encoding)),a}function N_t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){W5e(r);for(const i of wt(r.component.legends))n.legend[i]=oB(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of wt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y5e(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of q5e){const f=tm(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(c,d)=>{switch(u){case"symbolType":return B_t(c,d);case"title":return E4e(c,d);case"type":return i=!0,ql("symbol")}return cR(c,d,u,"legend")});e.setWithExplicit(u,f)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&Pk(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Pk(e.explicit,["encode","gradient"])),e}function B_t(e,t){return t.value==="circle"?t:e}function z_t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function X5e(e){const t=e.component.legends,n={};for(const i of wt(t)){const s=e.getScaleComponent(i),o=Ii(s.get("domains"));if(n[o])for(const a of n[o])Y5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return ta(n).flat().map(i=>j_t(i,e.config)).filter(i=>i!==void 0)}function j_t(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const f of B6e)s[f]&&delete u[f]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&cn(s.encode.labels.update.text)&&(u=h0(r,"datum.label",s.encode.labels.update.text.signal)),z_t(s,"labels","text",{signal:u})}return s}}function U_t(e){return wb(e)||dB(e)?q_t(e):Z5e(e)}function q_t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Z5e(e))}function Z5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=cn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return _r(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const H_t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class K5e extends Ah{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J5e(e){e.component.projection=ys(e)?G_t(e):Y_t(e)}function G_t(e){if(e.hasProjection){const t=Yo(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?V_t(e):void 0,s=new K5e(e.projectionName(!0),{...Yo(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function V_t(e){const t=[],{encoding:n}=e;for(const r of[[Gc,Hc],[ju,Vc]])(go(n[r[0]])||go(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Il)&&e.typedFieldDef(Il).type===gb&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(vs.Main)),t}function W_t(e,t){const n=K9(H_t,i=>!!(!Xt(e.explicit,i)&&!Xt(t.explicit,i)||Xt(e.explicit,i)&&Xt(t.explicit,i)&&Jl(e.get(i),t.get(i))));if(Jl(e.size,t.size)){if(n)return e;if(Jl(e.explicit,{}))return t;if(Jl(t.explicit,{}))return e}return null}function Y_t(e){if(e.children.length===0)return;let t;for(const r of e.children)J5e(r);const n=K9(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=W_t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new K5e(r,t.specifiedProjection,t.size,Gn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function X_t(e,t,n,r){if(QE(t,n)){const i=ys(e)?e.axis(n)??e.legend(n)??{}:{},s=Ft(t,{expr:"datum"}),o=Ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ft(t,{binSuffix:"range",forAs:!0}),formula:XE(s,o,i.format,i.formatType,r)}}return{}}function Q5e(e,t){return`${m4e(e)}_${t}`}function Z_t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function aB(e,t,n){const r=iR(n,void 0)??{},i=Q5e(r,t);return e.getName(`${i}_bins`)}function K_t(e){return"as"in e}function h2e(e,t,n){let r,i;K_t(e)?r=zt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ft(e,{forAs:!0}),Ft(e,{binSuffix:"end",forAs:!0})];const s={...iR(t,void 0)},o=Q5e(s,e.field),{signal:a,extentSignal:l}=Z_t(n,o);if(WL(s.extent)){const f=s.extent;i=R5e(n,f.param,f),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class Rf extends Di{clone(){return new Rf(null,Gn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(nl(s)&&Ki(s.bin)){const{key:a,binComponent:l}=h2e(s,s.bin,n);i[a]={...l,...i[a],...X_t(n,s,o,n.config)}}return i},{});return $i(r)?null:new Rf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=h2e(n,n.bin,r);return new Rf(t,{[i]:s})}merge(t,n){for(const r of wt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Ef([...this.bins[r].as,...t.bins[r].as],Or)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ta(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ta(this.bins).map(t=>t.field))}hash(){return`Bin ${Or(this.bins)}`}assemble(){return ta(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:zu(t.field),as:r,signal:t.signal,...WL(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:zu(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ft({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function J_t(e,t,n,r){var s;const i=ys(r)?r.encoding[rd(t)]:void 0;if(nl(n)&&ys(r)&&u6e(n,i,r.markDef,r.config)){e.add(Ft(n,{})),e.add(Ft(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=em({fieldDef:n,markDef:a,config:l});C2(o)&&u!==.5&&Bs(t)&&(e.add(Ft(n,{suffix:fR})),e.add(Ft(n,{suffix:dR}))),n.bin&&QE(n,t)&&e.add(Ft(n,{binSuffix:"range"}))}else if(o4e(t)){const o=s4e(t);e.add(r.getName(o))}else e.add(Ft(n));return G0(n)&&B1t((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Q_t(e,t){for(const n of wt(t)){const r=t[n];for(const i of wt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ac extends Di{clone(){return new Ac(null,new Set(this.dimensions),Gn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ft(o,{forAs:!0})]);else{if(lh(l)||xm(l)){const f=lh(l)?"argmin":"argmax",c=l[f];i[c]??(i[c]={}),i[c][f]=new Set([Ft({op:f,field:c},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([Ft(o,{forAs:!0})]);id(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([Ft({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([Ft({field:u,aggregate:"max"},{forAs:!0})]))}else J_t(s,a,o,n)}),s.size+wt(i).length===0)?null:new Ac(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||Ft(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||Ft(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+wt(s).length===0?null:new Ac(t,i,s)}merge(t){return KMe(this.dimensions,t.dimensions)?(Q_t(this.measures,t.measures),!0):(c1t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...wt(this.measures)])}producedFields(){const t=new Set;for(const n of wt(this.measures))for(const r of wt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Or({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of wt(this.measures))for(const o of wt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:zu(s));return{type:"aggregate",groupby:[...this.dimensions].map(zu),ops:t,fields:n,as:r}}}class bb extends Di{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ru){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Ft(o),...Ki(a)?[Ft(o,{binSuffix:"end"})]:[]],...Qd(l)?{sortField:l}:at(l)?{sortIndexField:R1(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ru)this[n]&&(t+=` ${n.charAt(0)}:${Or(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ru)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ru)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Eh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Mo(i)&&U0(s)){const o=yR(this.childModel,n),a=fB(o);a?t[n]=a:Ct(f7(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:f=tR,field:c}=l;s.push(c),o.push(f),a.push(Ft(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of rB){for(const f of iB){const c=(r[u]&&r[u][f])??[];for(const d of c)if(((l=d.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const f=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Jd,Kd])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function p2e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function e2t(e,t){const n=e7(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=p2e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=p2e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ct(bvt(t)),null}function t2t(e){const t={};return YC(e.filter,n=>{if(z4e(n)){let r=null;y7(n)?r=Xl(n.equal):b7(n)?r=Xl(n.lte):v7(n)?r=Xl(n.lt):x7(n)?r=Xl(n.gt):w7(n)?r=Xl(n.gte):_7(n)?r=n.range[0]:E7(n)&&(r=(n.oneOf??n.in)[0]),r&&(q0(r)?t[n.field]="date":li(r)?t[n.field]="number":zt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function n2t(e){const t={};function n(r){k1(r)?t[r.field]="date":r.type==="quantitative"&&Wyt(r.aggregate)?t[r.field]="number":w1(r.field)>1?r.field in t||(t[r.field]="flatten"):G0(r)&&Qd(r.sort)&&w1(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ys(e)||iu(e))&&e.forEachFieldDef((r,i)=>{if(nl(r))n(r);else{const s=z0(i),o=e.fieldDef(s);n({...r,type:o.type})}}),ys(e)){const{mark:r,markDef:i,encoding:s}=e;if(wm(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function r2t(e){const t={};if(ys(e)&&e.component.selection)for(const n of wt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&w1(i.field)>1&&(t[i.field]="flatten")}return t}class Ca extends Di{clone(){return new Ca(null,Gn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Or(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Bp(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of wt(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Ct(S_e(a,r[a],l.value)))}for(const a of wt(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Ct(S_e(a,n[a],l)))}const s=new Ah(n,r);i.copyAll(s);const o={};for(const a of wt(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return wt(o).length===0||i.parseNothing?null:new Ca(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of wt(this._parse)){const r=this._parse[n];w1(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(wt(this._parse))}dependentFields(){return new Set(wt(this._parse))}assembleTransforms(t=!1){return wt(this._parse).filter(n=>t?w1(n)>1:!0).map(n=>{const r=e2t(n,this._parse[n]);return r?{type:"formula",expr:r,as:pb(n)}:null}).filter(n=>n!==null)}}class nm extends Di{clone(){return new nm(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ic])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ic}}}class nS extends Di{clone(){return new nS(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Or(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class rS extends Di{clone(){return new rS(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Or(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class _0 extends Di{constructor(t){super(null),t??(t={name:"source"});let n;if(Bp(t)||(n=t.format?{...Ll(t.format,["parse"])}:{}),k2(t))this._data={values:t.values};else if(T1(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];_r(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else r5e(t)?this._data={values:[{type:"Sphere"}]}:(t5e(t)||Bp(t))&&(this._data={});this._generator=Bp(t),t.name&&(this._name=t.name),n&&!$i(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var m2e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},i2t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},o_;function lB(e){return e instanceof _0||e instanceof nS||e instanceof rS}class uB{constructor(){o_.set(this,void 0),m2e(this,o_,!1,"f")}setModified(){m2e(this,o_,!0,"f")}get modifiedFlag(){return i2t(this,o_,"f")}}o_=new WeakMap;class V0 extends uB{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class cB extends uB{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class s2t extends cB{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of wt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class o2t extends cB{constructor(t){super(),this.requiresSelectionId=t&&nB(t)}run(t){t instanceof nm&&(this.requiresSelectionId&&(lB(t.parent)||t.parent instanceof Ac||t.parent instanceof Ca)||(this.setModified(),t.remove()))}}class a2t extends uB{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Df&&(r=t.producedFields(),J9(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class l2t extends cB{constructor(){super()}run(t){t instanceof Rl&&!t.isRequired()&&(this.setModified(),t.remove())}}class u2t extends V0{run(t){if(!lB(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ca)if(t instanceof Ca)this.setModified(),t.merge(n);else{if(Q9(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class c2t extends V0{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ca);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of wt(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!$i(i)){this.setModified();const o=new Ca(t,i);for(const a of n){if(a instanceof Ca)for(const l of wt(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Ca&&wt(a.parse).length===0&&a.remove()}}}}}class f2t extends V0{run(t){t instanceof Rl||t.numChildren()>0||t instanceof bb||t instanceof _0||(this.setModified(),t.remove())}}class d2t extends V0{run(t){const n=t.children.filter(i=>i instanceof Df),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class h2t extends V0{run(t){const n=t.children.filter(i=>i instanceof Ac),r={};for(const i of n){const s=Or(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of wt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class p2t extends V0{constructor(t){super(),this.model=t}run(t){const n=!(lB(t)||t instanceof vb||t instanceof Ca||t instanceof nm),r=[],i=[];for(const s of t.children)s instanceof Rf&&(n&&!Q9(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Rf?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class m2t extends V0{run(t){const n=[...t.children];if(!x1(n,o=>o instanceof Rl)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Rl){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Rl)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class W0 extends Di{clone(){return new W0(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ef(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`JoinAggregateTransform ${Or(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class O1 extends Di{clone(){return new O1(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,f,c)=>{const d=id(c)&&n.getScaleComponent(c);if(d){const h=d.get("type"),{aggregate:p}=f,g=L7({scaleChannel:c,markDef:s,config:i,scaleType:h,isCountAggregate:VL(p)});g!=="show"&&g!=="always-valid"&&(u[f.field]=f)}return u},{});return wt(l).length?new O1(t,l):null}dependentFields(){return new Set(wt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Or(this.filter)}`}assemble(){const t=wt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${o$(s)}))`):i.type==="quantitative"&&n.push(o$(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function o$(e){return`isValid(${e}) && isFinite(+${e})`}function g2t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ft(r);return i&&t.push(i),t},[])}function y2t(e){return at(e)&&e.every(t=>zt(t))&&e.length>1}class th extends Di{clone(){return new th(null,Gn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const c of n.sort)a.push(c.field),l.push(Ns(c.order,"ascending"));const u={field:a,order:l};let f;return y2t(s)?f=s:zt(s)?f=[s,`${s}_end`]:f=[`${n.stack}_start`,`${n.stack}_end`],new th(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:f})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return $c(p)}).filter(h=>!!h),f=g2t(n),c=n.encoding.order;let d;if(at(c)||kt(c))d=x4e(c);else{const h=c6e(c)?c.sort:o==="y"?"descending":"ascending";d=f.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new th(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:f,sort:d,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Or(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ft(i,{binSuffix:"mid"})]:[Ft(i,{}),Ft(i,{binSuffix:"end"})]:[Ft(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const f of r){const{bandPosition:c=.5,bin:d}=f;if(d){const h=Ft(f,{expr:"datum"}),p=Ft(f,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${o$(h)} ? ${c}*${h}+${1-c}*${p} : ${h}`,as:Ft(f,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Ft(f,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class xb extends Di{clone(){return new xb(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ef(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`WindowTransform ${Or(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(c.param===void 0?null:c.param),t.push(c.field===void 0?null:c.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(c=>u7(c)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)a.push(c.field),l.push(c.order??"ascending");const u={field:a,order:l},f=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...f!==void 0?{ignorePeers:f}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function v2t(e){function t(n){if(!(n instanceof bb)){const r=n.clone();if(r instanceof Rl){const i=l$+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ac||r instanceof th||r instanceof xb||r instanceof W0)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function a$(e){if(e instanceof bb)if(e.numChildren()===1&&!(e.children[0]instanceof Rl)){const t=e.children[0];(t instanceof Ac||t instanceof th||t instanceof xb||t instanceof W0)&&t.addDimensions(e.fields),t.swapWithParent(),a$(e)}else{const t=e.model.component.data.main;e$e(t);const n=v2t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(a$)}function e$e(e){if(e instanceof Rl&&e.type===vs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof bb||(t.swapWithParent(),e$e(e))}}const l$="scale_",jA=5;function u$(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!u$(t.children))return!1}return!0}function rc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function g2e(e,t,n){let r=e.sources,i=!1;return i=rc(new l2t,r)||i,i=rc(new o2t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=rc(new f2t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=rc(new u2t,r)||i,i=rc(new p2t(t),r)||i,i=rc(new a2t,r)||i,i=rc(new c2t,r)||i,i=rc(new h2t,r)||i,i=rc(new d2t,r)||i,i=rc(new s2t,r)||i,i=rc(new m2t,r)||i),e.sources=r,i}function b2t(e,t){u$(e.sources);let n=0,r=0;for(let i=0;i<jA&&g2e(e,t,!0);i++)n++;e.sources.map(a$);for(let i=0;i<jA&&g2e(e,t,!1);i++)r++;u$(e.sources),Math.max(n,r)===jA&&Ct(`Maximum optimization runs(${jA}) reached.`)}class ko{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ko(()=>t(n))}}function t$e(e){ys(e)?x2t(e):w2t(e)}function x2t(e){const t=e.component.scales;for(const n of wt(t)){const r=E2t(e,n);if(t[n].setWithExplicit("domains",r),A2t(e,n),e.component.data.isFaceted){let s=e;for(;!iu(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)qd(a)&&(a.data=l$+a.data.replace(l$,""))}}}function w2t(e){for(const n of e.children)t$e(n);const t=e.component.scales;for(const n of wt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=tm(r,o.getWithExplicit("domains"),"domains","scale",c$);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ct(dvt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function _2t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=y2e(t,n);if(!i){Ct(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=y2e(t,n);if(i)return"unaggregated"}return e}function E2t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=_2t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&go(r.x2)?go(r.x)?tm(ip(n,i,e,"x"),ip(n,i,e,"x2"),"domain","scale",c$):ip(n,i,e,"x2"):t==="y"&&go(r.y2)?go(r.y)?tm(ip(n,i,e,"y"),ip(n,i,e,"y2"),"domain","scale",c$):ip(n,i,e,"y2"):ip(n,i,e,t)}function S2t(e,t,n){return e.map(r=>({signal:`{data: ${sR(r,{timeUnit:n,type:t})}}`}))}function TO(e,t,n){var i;const r=(i=Fo(n))==null?void 0:i.unit;return t==="temporal"||r?S2t(e,t,r):[e]}function ip(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=go(i[r]),{type:f}=u,c=u.timeUnit,d=gwt({invalid:Uf("invalid",s,a),isPath:wm(o)});if(N1t(t)){const g=ip(e,void 0,n,r),v=TO(t.unionWith,f,c);return mf([...v,...g.value])}else{if(cn(t))return mf([t]);if(t&&t!=="unaggregated"&&!W4e(t))return mf(TO(t,f,c))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ql([[0,1]]);const g=n.requestDataName(d);return ql([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=id(r)&&kt(u)?C2t(n,r,e):void 0;if(sd(u)){const g=TO([u.datum],f,c);return ql(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return ql([{data:n.requestDataName(d),field:Ft({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:Ft({field:g,aggregate:"max"})}])}else if(Ki(p.bin)){if(Mo(e))return ql(e==="bin-ordinal"?[]:[{data:S2(h)?n.requestDataName(d):n.requestDataName(vs.Raw),field:n.vgField(r,QE(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!It(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Ki(g)){const v=aB(n,p.field,g);return ql([new ko(()=>{const x=n.getSignalName(v);return`[${x}.start, ${x}.stop]`})])}else return ql([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&_r(["time","utc"],e)){const g=i[rd(r)];if(u6e(p,g,s,a)){const v=n.requestDataName(d),x=em({fieldDef:p,fieldDef2:g,markDef:s,config:a}),y=C2(o)&&x!==.5&&Bs(r);return ql([{data:v,field:n.vgField(r,y?{suffix:fR}:{})},{data:v,field:n.vgField(r,{suffix:y?dR:"end"})}])}}return ql(h?[{data:S2(h)?n.requestDataName(d):n.requestDataName(vs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function DO(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":tR),...r?{field:zu(r)}:{},...i?{order:i}:{}}}function A2t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=W4e(r)?r:void 0,o=j0(i)&&WL(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function C2t(e,t,n){if(!Mo(n))return;const r=e.fieldDef(t),i=r.sort;if(a6e(i))return{op:"min",field:R1(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Qd(i)){const a=s&&!o.has(i.field);return DO(i,a)}else if(gbt(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:f,field:c}=u,d=s&&!o.has(c);if(lh(f)||xm(f))return DO({field:Ft(u),order:l},d);if(u7(f)||!f)return DO({op:f,field:c,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(_r(["ascending",void 0],i))return!0}}function y2e(e,t){const{aggregate:n,type:r}=e;return n?zt(n)&&!Xyt.has(n)?{valid:!1,reason:jvt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Uvt(e)}:{valid:!0}:{valid:!1,reason:zvt(e)}}function c$(e,t,n,r){return e.explicit&&t.explicit&&Ct(Wvt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function k2t(e){const t=Ef(e.map(o=>{if(qd(o)){const{sort:a,...l}=o;return l}return o}),Or),n=Ef(e.map(o=>{if(qd(o)){const a=o.sort;return a!==void 0&&!S2(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Or);if(t.length===0)return;if(t.length===1){const o=e[0];if(qd(o)&&n.length>0){let a=n[0];if(n.length>1){Ct(C_e);const l=n.filter(u=>It(u)&&"op"in u&&u.op!=="min");n.every(u=>It(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(It(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Ef(n.map(o=>S2(o)||!("op"in o)||zt(o.op)&&Xt(Gyt,o.op)?o:(Ct(Xvt(o)),!0)),Or);let i;r.length===1?i=r[0]:r.length>1&&(Ct(C_e),i=!0);const s=Ef(e.map(o=>qd(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function fB(e){if(qd(e)&&zt(e.field))return e.field;if(Zyt(e)){let t;for(const n of e.fields)if(qd(n)&&zt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ct(Zvt),t}return Ct(Kvt),t}else if(Kyt(e)){Ct(Jvt);const t=e.fields[0];return zt(t)?t:void 0}}function yR(e,t){const r=e.component.scales[t].get("domains").map(i=>(qd(i)&&(i.data=e.lookupDataSource(i.data)),i));return k2t(r)}function n$e(e){return wb(e)||dB(e)?e.children.reduce((t,n)=>t.concat(n$e(n)),v2e(e)):v2e(e)}function v2e(e){return wt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:f,...c}=i,d=T2t(i.range,s,n,e),h=yR(e,n),p=a?kwt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...f!==void 0?{reverse:f}:{},...c}),t},[])}function T2t(e,t,n,r){if(Bs(n)){if(U0(e))return{step:{signal:`${t}_step`}}}else if(It(e)&&qd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class r$e extends Ah{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(_r([Xo.LOG,Xo.TIME,Xo.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&_r([Xo.LINEAR,Xo.SQRT,Xo.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(at(a)){const l=a[0],u=a[a.length-1];if(li(l)&&li(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const D2t=["range","scheme"];function L2t(e){const t=e.component.scales;for(const n of l7){const r=t[n];if(!r)continue;const i=R2t(n,e);r.setWithExplicit("range",i)}}function b2e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Pl(t),o=e.getName(s);if(It(r)&&r.binned&&r.step!==void 0)return new ko(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(Ki(r)){const a=aB(e,i,r);return new ko(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function R2t(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const c of D2t)if(n[c]!==void 0){const d=H5(s,c),h=Y4e(e,c);if(!d)Ct(k4e(s,c,e));else if(h)Ct(h);else switch(c){case"range":{const p=n.range;if(at(p)){if(Bs(e))return mf(p.map(g=>{if(g==="width"||g==="height"){const v=t.getName(g),x=t.getSignalName.bind(t);return ko.fromName(x,v)}return g}))}else if(It(p))return mf({data:t.requestDataName(vs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return mf(p)}case"scheme":return mf(F2t(n[c]))}}const o=e===fs||e==="xOffset"?"width":"height",a=r[o];if(Hf(a)){if(Bs(e))if(Mo(s)){const c=s$e(a,t,e);if(c)return mf({step:c})}else Ct(T4e(o));else if(VE(e)){const c=e===pm?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const p=o$e(a,s);if(p)return mf(p)}}}const{rangeMin:l,rangeMax:u}=n,f=O2t(e,t);return(l!==void 0||u!==void 0)&&H5(s,"rangeMin")&&at(f)&&f.length===2?mf([l??f[0],u??f[1]]):ql(f)}function F2t(e){return P1t(e)?{scheme:e.name,...Ll(e,["name"])}:{scheme:e}}function i$e(e,t,n,{center:r}={}){const i=Pl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Io&&Oc(n)?r?[ko.fromName(a=>`${o(a)}/2`,s),ko.fromName(a=>`-${o(a)}/2`,s)]:[ko.fromName(o,s),0]:r?[ko.fromName(a=>`-${o(a)}/2`,s),ko.fromName(a=>`${o(a)}/2`,s)]:[0,ko.fromName(o,s)]}function O2t(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=go(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case fs:case Io:{if(_r(["point","band"],l)){const c=a$e(e,n,r.view);if(Hf(c))return{step:s$e(c,t,e)}}return i$e(e,t,l)}case pm:case mb:return M2t(e,t,l);case wh:{const c=P2t(i,r),d=N2t(i,n,t,r);return S1(l)?I2t(c,d,$2t(l,r,u,e)):[c,d]}case Hu:return[0,Math.PI*2];case B0:return[0,360];case qc:return[0,new ko(()=>{const c=t.getSignalName(iu(t.parent)?"child_width":"width"),d=t.getSignalName(iu(t.parent)?"child_height":"height");return`min(${c},${d})/2`})];case mm:return{step:1e3/r.scale.framesPerSecond};case vm:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case bm:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Il:return"symbol";case $l:case td:case nd:return l==="ordinal"?o==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case _h:case gm:case ym:return[r.scale.minOpacity,r.scale.maxOpacity]}}function s$e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=i7(n),o=r[s];if(j6e({step:e,offsetIsDiscrete:Wn(o)&&U4e(o.type)})==="offset"&&w6e(r,s)){const l=t.getScaleComponent(s);let f=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${d}, ${h})`}const c=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${tvt(c)})`}}else return e.step}function o$e(e,t){if(j6e({step:e,offsetIsDiscrete:Mo(t)})==="offset")return{step:e.step}}function M2t(e,t,n){const r=e===pm?"x":"y",i=t.getScaleComponent(r);if(!i)return i$e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=a$e(r,t.size,t.config.view);if(Hf(u)){const f=o$e(u,n);if(f)return f}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(kt(u)&&u.timeUnit){const f=N4e(u.timeUnit,p=>`scale('${o}', ${p})`),c=t.config.scale.bandWithNestedOffsetPaddingInner,d=em({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(c){const p=cn(c)?`${c.signal}/2`+h:`${c/2+d}`,g=cn(c)?`(1 - ${c.signal}/2)`+h:`${1-c/2+d}`;return[{signal:`${p} * (${f})`},{signal:`${g} * (${f})`}]}return[0,{signal:f}]}return XMe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function a$e(e,t,n){const r=e===fs?"width":"height",i=t[r];return i||Vk(n,r)}function $2t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Ct(a1t(r)),3)}}function I2t(e,t,n){const r=()=>{const i=xc(t),s=xc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return cn(t)?new ko(r):{signal:r()}}function P2t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(YL("size",e))}const x2e=.95;function N2t(e,t,n,r){const i={x:b2e(n,"x"),y:b2e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=w2e(t,i,r.view);return li(s)?s-1:new ko(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=w2e(t,i,r.view);return li(s)?Math.pow(x2e*s,2):new ko(()=>`pow(${x2e} * ${s.signal}, 2)`)}}throw new Error(YL("size",e))}function w2e(e,t,n){const r=Hf(e.width)?e.width.step:Y5(n,"width"),i=Hf(e.height)?e.height.step:Y5(n,"height");return t.x||t.y?new ko(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function l$e(e,t){ys(e)?B2t(e,t):c$e(e,t)}function B2t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of wt(n)){const l=o[a],u=n[a],f=e.getScaleComponent(a),c=go(i[a]),d=l[t],h=f.get("type"),p=f.get("padding"),g=f.get("paddingInner"),v=H5(h,t),x=Y4e(a,t);if(d!==void 0&&(v?x&&Ct(x):Ct(k4e(h,t,a))),v&&x===void 0)if(d!==void 0){const y=c.timeUnit,w=c.type;switch(t){case"domainMax":case"domainMin":q0(l[t])||w==="temporal"||y?u.set(t,{signal:sR(l[t],{type:w,timeUnit:y})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const y=St(_2e,t)?_2e[t]({model:e,channel:a,fieldOrDatumDef:c,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:_6e(i,a),hasSecondaryRangeChannel:!!i[rd(a)]}):r.scale[t];y!==void 0&&u.set(t,y,!1)}}}const _2e={bins:({model:e,fieldOrDatumDef:t})=>kt(t)?z2t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>j2t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>U2t(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>q2t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>H2t(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>G2t(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=kt(e)?e.sort:void 0;return V2t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>W2t(e,t,n,r,i,s.scale,o)};function u$e(e){ys(e)?L2t(e):c$e(e,"range")}function c$e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?u$e(r):l$e(r,t);for(const r of wt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=tm(i,a,t,"scale",e5e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function z2t(e,t){const n=t.bin;if(Ki(n)){const r=aB(e,t.field,n);return new ko(()=>e.getSignalName(r))}else if(Wo(n)&&j0(n)&&n.step!==void 0)return{step:n.step}}function j2t(e,t){if(_r([$l,td,nd],e)&&t!=="nominal")return"hcl"}function U2t(e,t,n,r,i,s){var o;if(!((o=$c(s))!=null&&o.bin||at(n)||i!=null||r!=null||_r([Xo.TIME,Xo.UTC],e)))return Bs(t)?!0:void 0}function q2t(e,t,n,r,i,s){if(Bs(e)){if(Sf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Xo.POINT)return n.pointPadding}}function H2t(e,t,n,r,i,s=!1){if(e===void 0){if(Bs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return s?f:Ns(o,n==="bar"?a:n==="tick"?u:l)}else if(VE(t)&&r===Xo.BAND)return i.offsetBandPaddingInner}}function G2t(e,t,n,r,i,s=!1){if(e===void 0){if(Bs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Xo.BAND)return Ns(o,cn(r)?{signal:`${r.signal}/2`}:r/2)}else if(VE(t)){if(n===Xo.POINT)return .5;if(n===Xo.BAND)return i.offsetBandPaddingOuter}}}function V2t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Oc(e)&&t==="descending"?cn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Oc(e)&&t==="descending")return!0}function W2t(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Oc(i)){if(at(n)){const l=n[0],u=n[n.length-1];if(li(l)&&l<=0&&li(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!S1(i))return!0;if(!(kt(t)&&t.bin)&&_r([...Eh,...Iyt],e)){const{orient:l,type:u}=r;return _r(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:_r(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function Y2t(e,t,n,r,i=!1){const s=X2t(t,n,r,i),{type:o}=e;return id(t)?o!==void 0?H1t(t,o)?kt(n)&&!q1t(o,n.type)?(Ct(Gvt(o,s)),s):o:(Ct(Hvt(t,o,s)),s):s:null}function X2t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Ov(e)||yO(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ct(vO(e,"ordinal")),"ordinal";if(gO(e))return"band";if(Bs(e)||VE(e)){if(_r(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in a7)return"band";const s=n[Pl(e)];return v0(s)||C1(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Ov(e)?"time":yO(e)==="discrete"?(Ct(vO(e,"temporal")),"ordinal"):kt(t)&&t.timeUnit&&Fo(t.timeUnit).utc?"utc":gO(e)?"band":"time";case"quantitative":return Ov(e)?kt(t)&&Ki(t.bin)?"bin-ordinal":"linear":yO(e)==="discrete"?(Ct(vO(e,"quantitative")),"ordinal"):gO(e)?"band":"linear";case"geojson":return}throw new Error(A4e(t.type))}function Z2t(e,{ignoreRange:t}={}){f$e(e),t$e(e);for(const n of U1t)l$e(e,n);t||u$e(e)}function f$e(e){ys(e)?e.component.scales=K2t(e):e.component.scales=Q2t(e)}function K2t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of l7){const o=go(t[s]);if(o&&n===K4e&&s===Il&&o.type===gb)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=_6e(t,s),u=Y2t(a,s,o,r,l);i[s]=new r$e(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const J2t=e5e((e,t)=>T_e(e)-T_e(t));function Q2t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){f$e(s);for(const o of wt(s.component.scales))if((t=i.scale)[o]??(t[o]=U5e(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?F1t(a.value,l.value)?r[o]=tm(a,l,"type","scale",J2t):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of wt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new r$e(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class LO{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ys(e){return(e==null?void 0:e.type)==="unit"}function iu(e){return(e==null?void 0:e.type)==="facet"}function dB(e){return(e==null?void 0:e.type)==="concat"}function wb(e){return(e==null?void 0:e.type)==="layer"}class hB{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=Yo(a),this.name=t.name??i,this.title=cp(t.title)?{text:t.title}:t.title?Yo(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new LO,this.projectionNameMap=r?r.projectionNameMap:new LO,this.signalNameMap=r?r.signalNameMap:new LO,this.data=t.data,this.description=t.description,this.transforms=iwt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:lxt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:nR(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ah,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Gn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Z2t(this)}parseProjection(){J5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){W5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of wt(r)){const o=r[s];o!==void 0&&(i[s]=os(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=os(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:$i(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=b_t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ru)t[r].title&&n.push(h_t(this,r));for(const r of rB)n=n.concat(p_t(this,r));return n}assembleAxes(){return e_t(this.component.axes,this.config)}assembleLegends(){return X5e(this)}assembleProjections(){return U_t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...g4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return _r(["unit","layer"],this.type)?_r(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),$i(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||iu(this.parent)?n$e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return cs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(vs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(iu(this.parent)){const n=z5e(t),r=GL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Mo(s)&&U0(o)){const a=i.get("name"),l=yR(this,r),u=fB(l);if(u){const f=Ft({aggregate:"distinct",field:u},{expr:"datum"});return{signal:B5e(a,i,f)}}else return Ct(f7(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(l4e(t)&&id(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(ovt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class d$e extends hB{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ft(r,n)}reduceFieldDef(t,n){return Pbt(this.getMapping(),(r,i,s)=>{const o=$c(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){B7(this.getMapping(),(r,i)=>{const s=$c(r);s&&t(s,i)},n)}}class vR extends Di{clone(){return new vR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Or(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class bR extends Di{clone(){return new bR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Or(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class xR extends Di{clone(){return new xR(this.parent,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Or(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class wR extends Di{clone(){return new wR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Or(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Iv extends Di{clone(){return new Iv(null,Gn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Gc,Hc],[ju,Vc]]){const s=i.map(o=>{const a=go(n.encoding[o]);return kt(a)?a.field:sd(a)?{expr:`${a.datum}`}:Mc(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Iv(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Il)){const i=n.typedFieldDef(Il);i.type===gb&&(t=new Iv(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(zt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Or(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class T2 extends Di{clone(){return new T2(null,this.projection,Gn(this.fields),Gn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Gc,Hc],[ju,Vc]]){const i=r.map(o=>{const a=go(n.encoding[o]);return kt(a)?a.field:sd(a)?{expr:`${a.datum}`}:Mc(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ju?"2":"";(i[0]||i[1])&&(t=new T2(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(zt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Or(this.fields)} ${Or(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Yg extends Di{clone(){return new Yg(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Yg(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(kt(i)&&kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:f,keyvals:c}=o.impute,d=A6e(n.mark,r);return new Yg(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...f?{frame:f}:{},...c!==void 0?{keyvals:c}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Or(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:Bxt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},f={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,f]}else return[l]}}class _R extends Di{clone(){return new _R(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Or(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class D2 extends Di{clone(){return new D2(null,Gn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(zxt(o)){let l=m$e(o.data,s);l||(l=new _0(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new Rl(l,u,vs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(jxt(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(cs(l),l)}catch{throw new Error(cvt(l))}if(a=u.materialized,!a)throw new Error(fvt(l))}return new D2(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Bt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Or({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Bt(this.transform.as)}:{}};else{let n=this.transform.as;zt(n)||(Ct(_vt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class ER extends Di{clone(){return new ER(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Or(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class SR extends Di{clone(){return new SR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Gn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Or(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class AR extends Di{clone(){return new AR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ef((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Or(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class CR extends Di{clone(){return new CR(null,Gn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Or(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function h$e(e){let t=0;function n(r,i){if(r instanceof _0&&!r.isGenerator&&!T1(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ca&&(r.parent instanceof _0&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof bb){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof nS||r instanceof rS||r instanceof O1||r instanceof vb||r instanceof L1||r instanceof T2||r instanceof Ac||r instanceof D2||r instanceof xb||r instanceof W0||r instanceof wR||r instanceof xR||r instanceof vR||r instanceof _R||r instanceof ER||r instanceof SR||r instanceof nm||r instanceof CR||r instanceof AR||r instanceof bR)&&i.transform.push(r.assemble()),(r instanceof Rf||r instanceof Df||r instanceof Yg||r instanceof th||r instanceof Iv)&&i.transform.push(...r.assemble()),r instanceof Rl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Rl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Rl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function eEt(e){const t=[],n=h$e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function tEt(e,t){const n=[],r=h$e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function nEt(e){return e==="top"||e==="left"||cn(e)?"header":"footer"}function rEt(e){for(const t of Ru)iEt(e,t);E2e(e,"x"),E2e(e,"y")}function iEt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=F1("title",null,r,t);let u=Mv(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=at(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=F1("labelOrient",a.header,r,t),c=a.header!==null?Ns((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=_r(["bottom","right"],f)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[p$e(e,t,c)]}}}function p$e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function E2e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=oB(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=nEt(a.get("orient"));o[l]??(o[l]=[p$e(e,s,!1)]);const u=s_(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function sEt(e){pB(e),Zk(e,"width"),Zk(e,"height")}function oEt(e){pB(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Zk(e,t),Zk(e,n)}function pB(e){for(const t of e.children)t.parseLayoutSize()}function Zk(e,t){const n=z5e(t),r=GL(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??U5e(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=tm(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function aEt(e){const{size:t,component:n}=e;for(const r of Eh){const i=Pl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Hf(s)?"step":s,!0)}else{const s=lEt(e,i);n.layoutSize.set(i,s,!1)}}}function lEt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Mo(s)){const a=Vk(r.view,t);return U0(o)||Hf(a)?"step":a}else return W5(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return W5(r.view,t);{const s=Vk(r.view,t);return Hf(s)?s.step:s}}}function f$(e,t,n){return Ft(t,{suffix:`by_${Ft(e)}`,...n})}class O_ extends d$e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=bB(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ZE(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=wt(t),r={};for(const i of n){if(![Kd,Jd].includes(i)){Ct(YL(i,"facet"));break}const s=t[i];if(s.field===void 0){Ct(U5(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=N7(t,n);return r.header?r.header=Yo(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return St(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=kR(this),this.child.parseData()}parseLayoutSize(){pB(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Lf(t))&&h7(d7)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),rEt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ru)for(const r of iB){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=F1("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=mR(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof O_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof O_?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof O_){if(this.child.channelHasField("column")){const i=Ft(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Eh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Mo(o)&&U0(a)){const l=yR(this.child,i),u=fB(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Ct(f7(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const f of Ru){const c=this.facet[f];if(c){l.push(Ft(c));const{bin:d,sort:h}=c;if(Ki(d)&&l.push(Ft(c,{binSuffix:"end"})),Qd(h)){const{field:p,op:g=tR}=h,v=f$(c,h);r&&i?(s.push(v),o.push("max"),a.push(v)):(s.push(p),o.push(g),a.push(v))}else if(at(h)){const p=R1(c,f);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Qd(r.sort)?[f$(r,r.sort,{expr:"datum"})]:at(r.sort)?[R1(r,t,{expr:"datum"})]:[Ft(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Qd(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return i$(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of rB)if(t[s]){const o=F1("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return i$(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=eEt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ru.map(l=>this.facetSortFields(l)).flat(),order:Ru.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Ewt(this,[]))}]}getMapping(){return this.facet}}function uEt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Qd(s.sort)){const{field:o,op:a=tR}=s.sort;e=i=new W0(e,{joinaggregate:[{op:a,field:o,as:f$(s,s.sort,{forAs:!0})}],groupby:[Ft(s)]})}return i}return null}function m$e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||u)&&f!==u)continue;const c=(s=a.format)==null?void 0:s.mesh;if(!((l||c)&&l!==c)){if(k2(e)&&k2(a)){if(Jl(e.values,a.values))return o}else if(T1(e)&&T1(a)){if(e.url===a.url)return o}else if(t5e(e)&&e.name===o.dataName)return o}}return null}function cEt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new _0({values:[]});return t.push(r),r}const n=m$e(e.data,t);if(n)return Bp(e.data)||(n.data.format=ZMe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new _0(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function fEt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Kxt(i))o=e=new L1(e,i),s="derived";else if(Z7(i)){const a=t2t(i);o=e=Ca.makeWithAncestors(e,{},a,n)??e,e=new vb(e,t,i.filter)}else if(Z6e(i))o=e=Rf.makeFromTransform(e,i,t),s="number";else if(Qxt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ca(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Df.makeFromTransform(e,i);else if(ewt(i))o=e=Ac.makeFromTransform(e,i),s="number",nB(t)&&(e=new nm(e));else if(X6e(i))o=e=D2.make(e,t,i,r++),s="derived";else if(Yxt(i))o=e=new xb(e,i),s="number";else if(Xxt(i))o=e=new W0(e,i),s="number";else if(twt(i))o=e=th.makeFromTransform(e,i),s="derived";else if(nwt(i))o=e=new wR(e,i),s="derived";else if(rwt(i))o=e=new bR(e,i),s="derived";else if(Zxt(i))o=e=new xR(e,i),s="derived";else if(Uxt(i))o=e=new AR(e,i),s="derived";else if(Wxt(i))e=new CR(e,i);else if(Jxt(i))o=e=Yg.makeFromTransform(e,i),s="derived";else if(qxt(i))o=e=new vR(e,i),s="derived";else if(Hxt(i))o=e=new ER(e,i),s="derived";else if(Gxt(i))o=e=new SR(e,i),s="derived";else if(Vxt(i))o=e=new _R(e,i),s="derived";else{Ct(wvt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function kR(e){var v;let t=cEt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Bp(i)||T1(i)||k2(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new mwt;Bp(i)?(n5e(i)?t=new rS(t,i.sequence):K7(i)&&(t=new nS(t,i.graticule)),o.parseNothing=!0):((v=i==null?void 0:i.format)==null?void 0:v.parse)===null&&(o.parseNothing=!0),t=Ca.makeExplicit(t,e,o)??t,t=new nm(t);const a=e.parent&&wb(e.parent);(ys(e)||iu(e))&&a&&(t=Rf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=fEt(t,e,o));const l=r2t(e),u=n2t(e);t=Ca.makeWithAncestors(t,{},{...l,...u},o)??t,ys(e)&&(t=Iv.parseAll(t,e),t=T2.parseAll(t,e)),(ys(e)||iu(e))&&(a||(t=Rf.makeFromEncoding(t,e)??t),t=Df.makeFromEncoding(t,e)??t,t=L1.parseAllForSortIndex(t,e));const f=t=UA(vs.Raw,e,t);if(ys(e)){const x=Ac.makeFromEncoding(t,e);x&&(t=x,nB(e)&&(t=new nm(t))),t=Yg.makeFromEncoding(t,e)??t,t=th.makeFromEncoding(t,e)??t}let c,d;if(ys(e)){const{markDef:x,mark:y,config:w}=e,_=Mi("invalid",x,w),{marks:A,scales:T}=d=i5e({invalid:_,isPath:wm(y)});A!==T&&T==="include-invalid-values"&&(c=t=UA(vs.PreFilterInvalid,e,t)),A==="exclude-invalid-values"&&(t=O1.make(t,e,d)??t)}const h=t=UA(vs.Main,e,t);let p;if(ys(e)&&d){const{marks:x,scales:y}=d;x==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=O1.make(t,e,d)??t,p=t=UA(vs.PostFilterInvalid,e,t))}ys(e)&&Jwt(e,h);let g=null;if(iu(e)){const x=e.getName("facet");t=uEt(t,e.facet)??t,g=new bb(t,e,x,h.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:c,postFilterInvalid:p}}function UA(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Rl(n,s,e,i);return r[s]=o,o}class dEt extends hB{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Ct(vvt),this.children=this.getChildren(t).map((u,f)=>bB(u,this,this.getName(`concat_${f}`),void 0,i))}parseData(){this.component.data=kR(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Lf(t))&&h7(d7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return lR(t)?t.vconcat:Y7(t)?t.hconcat:t.concat}parseLayoutSize(){oEt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=sB(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function hEt(e){return e===!1||e===null}const pEt={disable:1,gridScale:1,scale:1,...b6e,labelExpr:1,encode:1},g$e=wt(pEt);class mB extends Ah{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new mB(Gn(this.explicit),Gn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!hEt(this.get(t))}hasOrientSignalRef(){return cn(this.explicit.orient)}}function mEt(e,t,n){const{encoding:r,config:i}=e,s=go(r[t])??go(r[rd(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(b0(l))return{text:wc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(A1(s)==="quantitative"){if(C1(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:wc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:wc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(A1(s)==="temporal"&&i.timeFormatType&&kt(s)&&!s.timeUnit)return{text:wc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function gEt(e){return Eh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[EEt(n,e)]),t),{})}const yEt={bottom:"top",top:"bottom",left:"right",right:"left"};function vEt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of wt(i.component.axes))n.axis[s]=oB(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=bEt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Eh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!cn(a)){if(r[a]>0&&!l){const u=yEt[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function bEt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=xEt(i,s)}}}else return t.map(n=>n.clone());return e}function xEt(e,t){for(const n of g$e){const r=tm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return E4e(i,s);case"gridScale":return{explicit:i.explicit,value:Ns(i.value,s.value)}}return cR(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function wEt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(cn(n.labelAngle)?n.labelAngle:A2(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$5e(r,i))return!0}return e===n[t]}const _Et=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function EEt(e,t){var x,y;let n=t.axis(e);const r=new mB,i=go(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((x=o[e==="x"?"axisX":"axisY"])==null?void 0:x.orient)||((y=o.axis)==null?void 0:y.orient)||l_t(e),l=t.getScaleComponent(e).get("type"),u=t_t(e,l,a,t.config),f=n!==void 0?!n:n$("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const c=s_t(i,n,e,o.style,u),d=s6e(n.formatType,i,l),h=i6e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:c,format:h,formatType:d,mark:s,config:o};for(const w of g$e){const _=w in l2e?l2e[w](p):$_e(w)?n[w]:void 0,A=_!==void 0,T=wEt(_,w,n,t,e);if(A&&T)r.set(w,_,T);else{const{configValue:D=void 0,configFrom:k=void 0}=$_e(w)&&w!=="values"?n$(w,o.style,n.style,u):{},R=D!==void 0;A&&!R?r.set(w,_,T):(k!=="vgAxisConfig"||_Et.has(w)&&R||eS(D)||cn(D))&&r.set(w,D,!1)}}const g=n.encoding??{},v=v6e.reduce((w,_)=>{if(!r.hasAxisPart(_))return w;const A=j5e(g[_]??{},t),T=_==="labels"?mEt(t,e,A):A;return T!==void 0&&!$i(T)&&(w[_]={update:T}),w},{});return $i(v)||r.set("encode",v,!!n.encoding||n.labelAngle!==void 0),r}function SEt({encoding:e,size:t}){for(const n of Eh){const r=Pl(n);Hf(t[r])&&Dp(e[n])&&(delete t[r],Ct(T4e(r)))}return t}const AEt={vgMark:"arc",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...uh(e,"radius"),...uh(e,"theta")})},CEt={vgMark:"area",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Wk("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Wk("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...tB(e)})},kEt={vgMark:"rect",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...uh(e,"x"),...uh(e,"y")})},TEt={vgMark:"shape",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&kt(n)&&n.type===gb?{field:Ft(n,{expr:"datum"})}:{}}]}},DEt={vgMark:"image",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...uh(e,"x"),...uh(e,"y"),...Q7(e,"url")})},LEt={vgMark:"line",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e,{vgChannel:"strokeWidth"}),...tB(e)})},REt={vgMark:"trail",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e),...tB(e)})};function gB(e,t){const{config:n}=e;return{...Gu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zo("size",e),...Zo("angle",e),...FEt(e,n,t)}}function FEt(e,t,n){return n?{shape:{value:n}}:Zo("shape",e)}const OEt={vgMark:"symbol",encodeEntry:e=>gB(e)},MEt={vgMark:"symbol",encodeEntry:e=>gB(e,"circle")},$Et={vgMark:"symbol",encodeEntry:e=>gB(e,"square")},IEt={vgMark:"rect",encodeEntry:e=>({...Gu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...uh(e,"x"),...uh(e,"y")})},PEt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Gu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wk("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Wk("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Zo("size",e,{vgChannel:"strokeWidth"})}}},NEt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Gu(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Q7(e),...Zo("size",e,{vgChannel:"fontSize"}),...Zo("angle",e),...i2e("align",BEt(e.markDef,n,t)),...i2e("baseline",zEt(e.markDef,n,t)),...Ka("radius",e,{defaultPos:null}),...Ka("theta",e,{defaultPos:null})}}};function BEt(e,t,n){if(Mi("align",e,n)===void 0)return"center"}function zEt(e,t,n){if(Mi("baseline",e,n)===void 0)return"middle"}const jEt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Gu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...uh(e,i),...Ka(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:os(Mi("thickness",n,t))}}},qA={arc:AEt,area:CEt,bar:kEt,circle:MEt,geoshape:TEt,image:DEt,line:LEt,point:OEt,rect:IEt,rule:PEt,square:$Et,text:NEt,tick:jEt,trail:REt};function UEt(e){if(_r([QL,KL,Y1t],e.mark)){const t=A6e(e.mark,e.encoding);if(t.length>0)return qEt(e,t)}else if(e.mark===JL){const t=z5.some(n=>Mi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return HEt(e)}return yB(e)}const S2e="faceted_path_";function qEt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:S2e+e.requestDataName(vs.Main),data:e.requestDataName(vs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:yB(e,{fromPrefix:S2e})}]}const A2e="stack_group_";function HEt(e){var u;const[t]=yB(e,{fromPrefix:A2e}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,c)=>{const d=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${f}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...b1(t.encode.update,["y","yc","y2","height",...z5]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ll(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...b1(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ll(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of z5){const c=Uf(f,e.markDef,e.config);t.encode.update[f]?(s[f]=t.encode.update[f],delete t.encode.update[f]):c&&(s[f]=os(c)),c&&(t.encode.update[f]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const f of e.stack.groupbyChannels){const c=e.fieldDef(f),d=Ft(c);d&&a.push(d),(c!=null&&c.bin||c!=null&&c.timeUnit)&&a.push(Ft(c,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,c)=>{if(t.encode.update[c])return{...f,[c]:t.encode.update[c]};{const d=Uf(c,e.markDef,e.config);return d!==void 0?{...f,[c]:os(d)}:f}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(vs.Main),name:A2e+e.requestDataName(vs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function GEt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&Mc(o)&&N5(o.value)||!o&&N5(Mi("order",i,s)))){if((at(o)||kt(o))&&!n)return x4e(o,{expr:"datum"});if(wm(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(kt(l))return{field:a}}}}function yB(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ns(r.clip,VEt(e),WEt(e)),a=v4e(r),l=i.key,u=GEt(e),f=YEt(e),c=Mi("aria",r,s),d=qA[n].postEncodingTransform?qA[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:qA[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...c===!1?{aria:c}:{},from:{data:t.fromPrefix+e.requestDataName(vs.Main)},encode:{update:qA[n].encodeEntry(e)},...d?{transform:d}:{}}]}function VEt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function WEt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function YEt(e){if(!e.component.selection)return null;const t=wt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=wt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class y$e extends d$e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,P_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var f,c,d;return(f=u.from)!=null&&f.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+o5e)),(d=(c=u.from)==null?void 0:c.facet)!=null&&d.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const o=qf(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Rxt(o,s,{graticule:t.data&&K7(t.data)}));const l=this.encoding=$bt(t.encoding||{},a,o.filled,s);this.markDef=V6e(o,l,s),this.size=SEt({encoding:l,size:P_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=G6e(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>V7(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===K4e,r=t&&kyt.some(i=>Wn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return l7.reduce((r,i)=>{const s=go(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Yo(t);return at(n)&&(i.domain=n.map(Xl)),at(r)&&(i.range=r.map(Xl)),i}initAxes(t){return Eh.reduce((n,r)=>{const i=t[r];if(Wn(i)||r===fs&&Wn(t.x2)||r===Io&&Wn(t.y2)){const s=Wn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=wt(t),r={};for(const i of n){const s=t[i];r[i]=eS(s)?y4e(s):Xl(s)}return r}initLegends(t){return Nyt.reduce((n,r)=>{const i=go(t[r]);if(i&&zyt(r)){const s=i.legend;n[r]=s&&Yo(s)}return n},{})}parseData(){this.component.data=kR(this)}parseLayoutSize(){aEt(this)}parseSelections(){this.component.selection=Kwt(this,this.selection)}parseMarkGroup(){this.component.mark=UEt(this)}parseAxesAndHeaders(){this.component.axes=gEt(this)}assembleSelectionTopLevelSignals(t){return Swt(this,t)}assembleSignals(){return[...F5e(this),..._wt(this,[])]}assembleSelectionData(t){return Awt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return sB(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!wb(this.parent))&&(t=c5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Vg(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return $c(n)}typedFieldDef(t){const n=this.fieldDef(t);return nl(n)?n:null}}class vB extends hB{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(uR(a))return new vB(a,this,this.getName(`layer_${l}`),o,s);if(Sh(a))return new y$e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(c7(a))})}parseData(){this.component.data=kR(this);for(const t of this.children)t.parseData()}parseLayoutSize(){sEt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Lf(t))&&h7(d7)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){vEt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),F5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),sB(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Bt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Cwt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),X5e(this))}}function bB(e,t,n,r,i){if(nR(e))return new O_(e,t,n,i);if(uR(e))return new vB(e,t,n,r,i);if(Sh(e))return new y$e(e,t,n,r,i);if(sxt(e))return new dEt(e,t,n,i);throw new Error(c7(e))}function XEt(e,t={}){t.logger&&l1t(t.logger),t.fieldTitle&&m6e(t.fieldTitle);try{const n=H6e(nb(t.config,e.config)),r=Q6e(e,n),i=bB(r,null,"",void 0,n);return i.parse(),b2t(i.component.data,i),{spec:KEt(i,ZEt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&u1t(),t.fieldTitle&&Cbt()}}function ZEt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):zt(t)&&(t={type:t}),i&&s&&dwt(t.type)){if(i==="step"&&s==="step")Ct(w_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ct(w_e(GL(o)));const a=o==="width"?"height":"width";t.type=hwt(a)}}return{...wt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...X_e(n,!1),...X_e(e,!0)}}function KEt(e,t,n={},r){const i=e.config?bxt(e.config):void 0,s=tEt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...z6e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const JEt=wyt.version,QEt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:w1,accessPathWithDatum:e7,accessWithDatumToUnescapedPath:ki,compile:XEt,contains:_r,deepEqual:Jl,deleteNestedProperty:Pk,duplicate:Gn,entries:Jp,every:K9,fieldIntersection:Q9,flatAccessWithDatum:JMe,getFirstDefined:Ns,hasIntersection:J9,hasProperty:St,hash:Or,internalField:t4e,isBoolean:S2,isEmpty:$i,isEqual:Eyt,isInternalField:n4e,isNullOrFalse:N5,isNumeric:BL,keys:wt,logicalExpr:R_,mergeDeep:ZMe,never:XMe,normalize:Q6e,normalizeAngle:A2,omit:Ll,pick:b1,prefixGenerator:B5,removePathFromField:pb,replaceAll:h0,replacePathInField:zu,resetIdCounter:Ayt,setEqual:KMe,some:x1,stringify:Ii,titleCase:qE,unique:Ef,uniqueId:e4e,vals:ta,varName:cs,version:JEt},Symbol.toStringTag,{value:"Module"}));function v$e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var eSt="vega-themes",tSt="2.15.0",nSt="Themes for stylized Vega and Vega-Lite visualizations.",rSt=["vega","vega-lite","themes","style"],iSt="BSD-3-Clause",sSt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},oSt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],aSt="build/vega-themes.js",lSt="build/vega-themes.module.js",uSt="build/vega-themes.min.js",cSt="build/vega-themes.min.js",fSt="build/vega-themes.module.d.ts",dSt={type:"git",url:"https://github.com/vega/vega-themes.git"},hSt=["src","build"],pSt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},mSt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},gSt={vega:"*","vega-lite":"*"},ySt={},vSt={name:eSt,version:tSt,description:nSt,keywords:rSt,license:iSt,author:sSt,contributors:oSt,main:aSt,module:lSt,unpkg:uSt,jsdelivr:cSt,types:fSt,repository:dSt,files:hSt,scripts:pSt,devDependencies:mSt,peerDependencies:gSt,dependencies:ySt};const Yy="#fff",C2e="#888",bSt={background:"#333",view:{stroke:C2e},title:{color:Yy,subtitleColor:Yy},style:{"guide-label":{fill:Yy},"guide-title":{fill:Yy}},axis:{domainColor:Yy,gridColor:C2e,tickColor:Yy}},ug="#4572a7",xSt={background:"#fff",arc:{fill:ug},area:{fill:ug},line:{stroke:ug,strokeWidth:2},path:{stroke:ug},rect:{fill:ug},shape:{stroke:ug},symbol:{fill:ug,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},cg="#30a2da",RO="#cbcbcb",wSt="#999",_St="#333",k2e="#f0f0f0",T2e="#333",ESt={arc:{fill:cg},area:{fill:cg},axis:{domainColor:RO,grid:!0,gridColor:RO,gridWidth:1,labelColor:wSt,labelFontSize:10,titleColor:_St,tickColor:RO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:k2e,group:{fill:k2e},legend:{labelColor:T2e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:T2e,titleFontSize:14,titlePadding:10},line:{stroke:cg,strokeWidth:2},path:{stroke:cg,strokeWidth:.5},rect:{fill:cg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:cg},bar:{binSpacing:2,fill:cg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},fg="#000",SSt={group:{fill:"#e5e5e5"},arc:{fill:fg},area:{fill:fg},line:{stroke:fg},path:{stroke:fg},rect:{fill:fg},shape:{stroke:fg},symbol:{fill:fg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ASt=22,CSt="normal",D2e="Benton Gothic, sans-serif",L2e=11.5,kSt="normal",dg="#82c6df",FO="Benton Gothic Bold, sans-serif",R2e="normal",F2e=13,kw={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},TSt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:FO,fontSize:ASt,fontWeight:CSt},arc:{fill:dg},area:{fill:dg},line:{stroke:dg,strokeWidth:2},path:{stroke:dg},rect:{fill:dg},shape:{stroke:dg},symbol:{fill:dg,size:30},axis:{labelFont:D2e,labelFontSize:L2e,labelFontWeight:kSt,titleFont:FO,titleFontSize:F2e,titleFontWeight:R2e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:D2e,labelFontSize:L2e,symbolType:"square",titleFont:FO,titleFontSize:F2e,titleFontWeight:R2e},range:{category:kw["category-6"],diverging:kw["fireandice-6"],heatmap:kw["fire-7"],ordinal:kw["fire-7"],ramp:kw["fire-7"]}},hg="#ab5787",HA="#979797",DSt={background:"#f9f9f9",arc:{fill:hg},area:{fill:hg},line:{stroke:hg},path:{stroke:hg},rect:{fill:hg},shape:{stroke:hg},symbol:{fill:hg,size:30},axis:{domainColor:HA,domainWidth:.5,gridWidth:.2,labelColor:HA,tickColor:HA,tickWidth:.2,titleColor:HA},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pg="#3e5c69",LSt={background:"#fff",arc:{fill:pg},area:{fill:pg},line:{stroke:pg},path:{stroke:pg},rect:{fill:pg},shape:{stroke:pg},symbol:{fill:pg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},vu="#1696d2",O2e="#000000",RSt="#FFFFFF",GA="Lato",OO="Lato",FSt="Lato",OSt="#DEDDDD",MSt=18,Tw={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},$St={background:RSt,title:{anchor:"start",fontSize:MSt,font:GA},axisX:{domain:!0,domainColor:O2e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:OO,labelAngle:0,tickColor:O2e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:GA},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:OSt,gridWidth:1,labelFontSize:12,labelFont:OO,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:GA,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:OO,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:GA,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Tw["six-groups-cat-1"],diverging:Tw["diverging-colors"],heatmap:Tw["diverging-colors"],ordinal:Tw["six-groups-seq"],ramp:Tw["shades-blue"]},area:{fill:vu},rect:{fill:vu},line:{color:vu,stroke:vu,strokeWidth:5},trail:{color:vu,stroke:vu,strokeWidth:0,size:1},path:{stroke:vu,strokeWidth:.5},point:{filled:!0},text:{font:FSt,color:vu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:vu,stroke:null}},arc:{fill:vu},shape:{stroke:vu},symbol:{fill:vu,size:30}},mg="#3366CC",M2e="#ccc",VA="Arial, sans-serif",ISt={arc:{fill:mg},area:{fill:mg},path:{stroke:mg},rect:{fill:mg},shape:{stroke:mg},symbol:{stroke:mg},circle:{fill:mg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:VA,fontSize:12},"guide-title":{font:VA,fontSize:12},"group-title":{font:VA,fontSize:12}},title:{font:VA,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:M2e,tickColor:M2e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},xB=e=>e*(1/3+1),$2e=xB(9),I2e=xB(10),P2e=xB(12),Dw="Segoe UI",N2e="wf_standard-font, helvetica, arial, sans-serif",B2e="#252423",Lw="#605E5C",z2e="transparent",PSt="#C8C6C4",lc="#118DFF",NSt="#12239E",BSt="#E66C37",zSt="#6B007B",jSt="#E044A7",USt="#744EC2",qSt="#D9B300",HSt="#D64550",b$e=lc,x$e="#DEEFFF",j2e=[x$e,b$e],GSt=[x$e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",b$e],VSt={view:{stroke:z2e},background:z2e,font:Dw,header:{titleFont:N2e,titleFontSize:P2e,titleColor:B2e,labelFont:Dw,labelFontSize:I2e,labelColor:Lw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Lw,labelFontSize:$2e,titleFont:N2e,titleColor:B2e,titleFontSize:P2e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:PSt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:lc},line:{stroke:lc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Dw,fontSize:$2e,fill:Lw},arc:{fill:lc},area:{fill:lc,line:!0,opacity:.6},path:{stroke:lc},rect:{fill:lc},point:{fill:lc,filled:!0,size:75},shape:{stroke:lc},symbol:{fill:lc,strokeWidth:1.5,size:50},legend:{titleFont:Dw,titleFontWeight:"bold",titleColor:Lw,labelFont:Dw,labelFontSize:I2e,labelColor:Lw,symbolType:"circle",symbolSize:75},range:{category:[lc,NSt,BSt,zSt,jSt,USt,qSt,HSt],diverging:j2e,heatmap:j2e,ordinal:GSt}},MO='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',WSt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$O=400,WA={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},YSt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],XSt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function TR({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=WA.gridBg[e],i=WA.textPrimary[e],s=WA.textSecondary[e],o=n==="dark"?YSt:XSt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:MO,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:WSt,labelFontWeight:$O,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:WA.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:MO,fill:s,fontWeight:$O},"guide-title":{font:MO,fill:s,fontWeight:$O}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const ZSt=TR({theme:"white",background:"#ffffff"}),KSt=TR({theme:"g10",background:"#f4f4f4"}),JSt=TR({theme:"g90",background:"#262626"}),QSt=TR({theme:"g100",background:"#161616"}),eAt=vSt.version,tAt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:KSt,carbong100:QSt,carbong90:JSt,carbonwhite:ZSt,dark:bSt,excel:xSt,fivethirtyeight:ESt,ggplot2:SSt,googlecharts:ISt,latimes:TSt,powerbi:VSt,quartz:DSt,urbaninstitute:$St,version:eAt,vox:LSt},Symbol.toStringTag,{value:"Module"}));function nAt(e,t,n,r){if(at(e))return`[${e.map(i=>t(zt(i)?i:U2e(i,n))).join(", ")}]`;if(It(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let f=a[u];f!==void 0&&(It(f)&&(f=U2e(f,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function rAt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function U2e(e,t){return JSON.stringify(e,rAt(t))}var iAt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const w$e="vg-tooltip-element",sAt={offsetX:10,offsetY:10,id:w$e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:oAt,maxDepth:2,formatTooltip:nAt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function oAt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function aAt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return iAt.toString().replace(w$e,e)}function _$e(e,t,{offsetX:n,offsetY:r}){const i=E$e({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),s=["bottom-right","bottom-left","top-right","top-left"];for(const o of s)if(S$e(i[o],t))return i[o];return i["top-left"]}function lAt(e,t,n,r,i){const{position:s,offsetX:o,offsetY:a}=i,l=e._el.getBoundingClientRect(),u=e._origin,f=uAt(l,u,n),c=E$e(f,r,o,a),d=Array.isArray(s)?s:[s];for(const h of d)if(S$e(c[h],r)&&!cAt(t,c[h],r))return c[h];return _$e(t,r,i)}function uAt(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,s=e.top+t[1]+r.y1,o=n;for(;o.mark.group;)o=o.mark.group,i+=o.x??0,s+=o.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:s,y2:s+l}}function E$e(e,t,n,r){const i=(e.x1+e.x2)/2,s=(e.y1+e.y2)/2,o=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,u=e.y1-t.height-r,f=s-t.height/2,c=e.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:c},left:{x:o,y:f},right:{x:l,y:f},"top-left":{x:o,y:u},"top-right":{x:l,y:u},"bottom-left":{x:o,y:c},"bottom-right":{x:l,y:c}}}function S$e(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function cAt(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class fAt{constructor(t){this.options={...sAt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=aAt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=this.options.anchor==="mark"?lAt(t,n,r,this.el.getBoundingClientRect(),this.options):_$e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var IO={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var dAt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hAt=Object.prototype.hasOwnProperty;function d$(e,t){return hAt.call(e,t)}function h$(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)d$(e,i)&&r.push(i);return r}function Ql(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function p$(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Cg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function A$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function m$(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(m$(e[t]))return!0}else if(typeof e=="object"){for(var r=h$(e),i=r.length,s=0;s<i;s++)if(m$(e[r[s]]))return!0}}return!1}function q2e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var C$e=function(e){dAt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,q2e(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=q2e(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),ks=C$e,pAt=Ql,wv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Kk(n,this.path);r&&(r=Ql(r));var i=Xg(n,{op:"remove",path:this.from}).removed;return Xg(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Kk(n,this.from);return Xg(n,{op:"add",path:this.path,value:Ql(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:L2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},mAt={add:function(e,t,n){return p$(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:wv.move,copy:wv.copy,test:wv.test,_get:wv._get};function Kk(e,t){if(t=="")return e;var n={op:"_get",path:t};return Xg(e,n),n.value}function Xg(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Jk(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Kk(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=L2(e,t.value),o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ks("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ql(e));var a=t.path||"",l=a.split("/"),u=e,f=1,c=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Jk;;){if(h=l[f],h&&h.indexOf("~")!=-1&&(h=A$e(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,f).join("/"):f==c-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),f++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!p$(h))throw new ks("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);p$(h)&&(h=~~h)}if(f>=c){if(n&&t.op==="add"&&h>u.length)throw new ks("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=mAt[t.op].call(t,u,h,e);if(o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(f>=c){var o=wv[t.op].call(t,u,h,e);if(o.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&f<c&&(!u||typeof u!="object"))throw new ks("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function DR(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ks("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ql(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Xg(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function gAt(e,t,n){var r=Xg(e,t);if(r.test===!1)throw new ks("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Jk(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ks("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(wv[e.op]){if(typeof e.path!="string")throw new ks("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ks('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ks("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ks("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&m$(e.value))throw new ks("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ks("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ks("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=k$e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ks("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ks("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function k$e(e,t,n){try{if(!Array.isArray(e))throw new ks("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)DR(Ql(t),Ql(e),n||!0);else{n=n||Jk;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ks)return i;throw i}}function L2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!L2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!L2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var yAt=Object.freeze({__proto__:null,JsonPatchError:ks,_areEquals:L2,applyOperation:Xg,applyPatch:DR,applyReducer:gAt,deepClone:pAt,getValueByPointer:Kk,validate:k$e,validator:Jk});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var wB=new WeakMap,vAt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),bAt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function xAt(e){return wB.get(e)}function wAt(e,t){return e.observers.get(t)}function _At(e,t){e.observers.delete(t.callback)}function EAt(e,t){t.unobserve()}function SAt(e,t){var n=[],r,i=xAt(e);if(!i)i=new vAt(e),wB.set(e,i);else{var s=wAt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ql(e),t){r.callback=t,r.next=null;var o=function(){g$(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){g$(r),clearTimeout(r.next),_At(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new bAt(t,r)),r}function g$(e,t){t===void 0&&(t=!1);var n=wB.get(e.object);_B(n.value,e.object,e.patches,"",t),e.patches.length&&DR(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function _B(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=h$(t),o=h$(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],f=e[u];if(d$(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var c=t[u];typeof f=="object"&&f!=null&&typeof c=="object"&&c!=null&&Array.isArray(f)===Array.isArray(c)?_B(f,c,n,r+"/"+Cg(u),i):f!==c&&(i&&n.push({op:"test",path:r+"/"+Cg(u),value:Ql(f)}),n.push({op:"replace",path:r+"/"+Cg(u),value:Ql(c)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Cg(u),value:Ql(f)}),n.push({op:"remove",path:r+"/"+Cg(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!d$(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Cg(u),value:Ql(t[u])})}}}function AAt(e,t,n){n===void 0&&(n=!1);var r=[];return _B(e,t,r,"",n),r}var CAt=Object.freeze({__proto__:null,compare:AAt,generate:g$,observe:SAt,unobserve:EAt});Object.assign({},yAt,CAt,{JsonPatchError:C$e,deepClone:Ql,escapePathComponent:Cg,unescapePathComponent:A$e});function kAt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var PO,H2e;function TAt(){if(H2e)return PO;H2e=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return PO=e,PO}var NO,G2e;function EB(){if(G2e)return NO;G2e=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return NO=r=>r?typeof r!="object"?e:r:t,NO}var YA={exports:{}},BO,V2e;function SB(){if(V2e)return BO;V2e=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return BO={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},BO}var zO,W2e;function LR(){return W2e||(W2e=1,zO=typeof process=="object"&&IO&&IO.NODE_DEBUG&&/\bsemver\b/i.test(IO.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),zO}var Y2e;function AB(){return Y2e||(Y2e=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=SB(),s=LR();t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let f=0;const c="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[c,r]],h=g=>{for(const[v,x]of d)g=g.split(`${v}*`).join(`${v}{0,${x}}`).split(`${v}+`).join(`${v}{1,${x}}`);return g},p=(g,v,x)=>{const y=h(v),w=f++;s(g,w,v),u[g]=w,l[w]=v,o[w]=new RegExp(v,x?"g":void 0),a[w]=new RegExp(y,x?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${c}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(YA,YA.exports)),YA.exports}var jO,X2e;function DAt(){if(X2e)return jO;X2e=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),o=e.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return jO={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},jO}var UO,Z2e;function CB(){if(Z2e)return UO;Z2e=1;const e=LR(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=SB(),{safeRe:r,t:i}=AB(),s=EB(),{compareIdentifiers:o}=DAt();class a{constructor(u,f){if(f=s(f),u instanceof a){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const c=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const c=this.prerelease[f],d=u.prerelease[f];if(e("prerelease compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return o(c,d)}while(++f)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let f=0;do{const c=this.build[f],d=u.build[f];if(e("build compare",f,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c===d)continue;return o(c,d)}while(++f)}inc(u,f,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,c),this.inc("pre",f,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,c),this.inc("pre",f,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(c)?1:0;if(!f&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(f===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(f){let h=[f,d];c===!1&&(h=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return UO=a,UO}var qO,K2e;function _b(){if(K2e)return qO;K2e=1;const e=CB();return qO=(n,r,i)=>new e(n,i).compare(new e(r,i)),qO}var HO,J2e;function LAt(){if(J2e)return HO;J2e=1;const e=_b();return HO=(n,r,i)=>e(n,r,i)===0,HO}var GO,Q2e;function RAt(){if(Q2e)return GO;Q2e=1;const e=_b();return GO=(n,r,i)=>e(n,r,i)!==0,GO}var VO,eEe;function FAt(){if(eEe)return VO;eEe=1;const e=_b();return VO=(n,r,i)=>e(n,r,i)>0,VO}var WO,tEe;function OAt(){if(tEe)return WO;tEe=1;const e=_b();return WO=(n,r,i)=>e(n,r,i)>=0,WO}var YO,nEe;function MAt(){if(nEe)return YO;nEe=1;const e=_b();return YO=(n,r,i)=>e(n,r,i)<0,YO}var XO,rEe;function $At(){if(rEe)return XO;rEe=1;const e=_b();return XO=(n,r,i)=>e(n,r,i)<=0,XO}var ZO,iEe;function IAt(){if(iEe)return ZO;iEe=1;const e=LAt(),t=RAt(),n=FAt(),r=OAt(),i=MAt(),s=$At();return ZO=(a,l,u,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,f);case"!=":return t(a,u,f);case">":return n(a,u,f);case">=":return r(a,u,f);case"<":return i(a,u,f);case"<=":return s(a,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},ZO}var KO,sEe;function PAt(){if(sEe)return KO;sEe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,c){if(c=n(c),f instanceof t){if(f.loose===!!c.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,c),this.options=c,this.loose=!!c.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const c=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=f.match(c);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return s(f,this.operator,this.semver,this.options)}intersects(f,c){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,c).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,c).test(f.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||s(this.semver,"<",f.semver,c)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||s(this.semver,">",f.semver,c)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}KO=t;const n=EB(),{safeRe:r,t:i}=AB(),s=IAt(),o=LR(),a=CB(),l=T$e();return KO}var JO,oEe;function T$e(){if(oEe)return JO;oEe=1;const e=/\s+/g;class t{constructor(I,U){if(U=i(U),I instanceof t)return I.loose===!!U.loose&&I.includePrerelease===!!U.includePrerelease?I:new t(I.raw,U);if(I instanceof s)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=I.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(Y=>!g(Y[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&v(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const U=this.set[I];for(let q=0;q<U.length;q++)q>0&&(this.formatted+=" "),this.formatted+=U[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const q=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+I,Y=r.get(q);if(Y)return Y;const X=this.options.loose,te=X?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];I=I.replace(te,K(this.options.includePrerelease)),o("hyphen replace",I),I=I.replace(l[u.COMPARATORTRIM],f),o("comparator trim",I),I=I.replace(l[u.TILDETRIM],c),o("tilde trim",I),I=I.replace(l[u.CARETTRIM],d),o("caret trim",I);let le=I.split(" ").map(de=>y(de,this.options)).join(" ").split(/\s+/).map(de=>B(de,this.options));X&&(le=le.filter(de=>(o("loose invalid filter",de,this.options),!!de.match(l[u.COMPARATORLOOSE])))),o("range list",le);const ee=new Map,z=le.map(de=>new s(de,this.options));for(const de of z){if(g(de))return[de];ee.set(de.value,de)}ee.size>1&&ee.has("")&&ee.delete("");const he=[...ee.values()];return r.set(q,he),he}intersects(I,U){if(!(I instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>x(q,U)&&I.set.some(Y=>x(Y,U)&&q.every(X=>Y.every(te=>X.intersects(te,U)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new a(I,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(L(this.set[U],I,this.options))return!0;return!1}}JO=t;const n=TAt(),r=new n,i=EB(),s=PAt(),o=LR(),a=CB(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:c,caretTrimReplace:d}=AB(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=SB(),g=$=>$.value==="<0.0.0-0",v=$=>$.value==="",x=($,I)=>{let U=!0;const q=$.slice();let Y=q.pop();for(;U&&q.length;)U=q.every(X=>Y.intersects(X,I)),Y=q.pop();return U},y=($,I)=>(o("comp",$,I),$=T($,I),o("caret",$),$=_($,I),o("tildes",$),$=k($,I),o("xrange",$),$=O($,I),o("stars",$),$),w=$=>!$||$.toLowerCase()==="x"||$==="*",_=($,I)=>$.trim().split(/\s+/).map(U=>A(U,I)).join(" "),A=($,I)=>{const U=I.loose?l[u.TILDELOOSE]:l[u.TILDE];return $.replace(U,(q,Y,X,te,le)=>{o("tilde",$,q,Y,X,te,le);let ee;return w(Y)?ee="":w(X)?ee=`>=${Y}.0.0 <${+Y+1}.0.0-0`:w(te)?ee=`>=${Y}.${X}.0 <${Y}.${+X+1}.0-0`:le?(o("replaceTilde pr",le),ee=`>=${Y}.${X}.${te}-${le} <${Y}.${+X+1}.0-0`):ee=`>=${Y}.${X}.${te} <${Y}.${+X+1}.0-0`,o("tilde return",ee),ee})},T=($,I)=>$.trim().split(/\s+/).map(U=>D(U,I)).join(" "),D=($,I)=>{o("caret",$,I);const U=I.loose?l[u.CARETLOOSE]:l[u.CARET],q=I.includePrerelease?"-0":"";return $.replace(U,(Y,X,te,le,ee)=>{o("caret",$,Y,X,te,le,ee);let z;return w(X)?z="":w(te)?z=`>=${X}.0.0${q} <${+X+1}.0.0-0`:w(le)?X==="0"?z=`>=${X}.${te}.0${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.0${q} <${+X+1}.0.0-0`:ee?(o("replaceCaret pr",ee),X==="0"?te==="0"?z=`>=${X}.${te}.${le}-${ee} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}-${ee} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le}-${ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?te==="0"?z=`>=${X}.${te}.${le}${q} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le} <${+X+1}.0.0-0`),o("caret return",z),z})},k=($,I)=>(o("replaceXRanges",$,I),$.split(/\s+/).map(U=>R(U,I)).join(" ")),R=($,I)=>{$=$.trim();const U=I.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return $.replace(U,(q,Y,X,te,le,ee)=>{o("xRange",$,q,Y,X,te,le,ee);const z=w(X),he=z||w(te),de=he||w(le),ze=de;return Y==="="&&ze&&(Y=""),ee=I.includePrerelease?"-0":"",z?Y===">"||Y==="<"?q="<0.0.0-0":q="*":Y&&ze?(he&&(te=0),le=0,Y===">"?(Y=">=",he?(X=+X+1,te=0,le=0):(te=+te+1,le=0)):Y==="<="&&(Y="<",he?X=+X+1:te=+te+1),Y==="<"&&(ee="-0"),q=`${Y+X}.${te}.${le}${ee}`):he?q=`>=${X}.0.0${ee} <${+X+1}.0.0-0`:de&&(q=`>=${X}.${te}.0${ee} <${X}.${+te+1}.0-0`),o("xRange return",q),q})},O=($,I)=>(o("replaceStars",$,I),$.trim().replace(l[u.STAR],"")),B=($,I)=>(o("replaceGTE0",$,I),$.trim().replace(l[I.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=$=>(I,U,q,Y,X,te,le,ee,z,he,de,ze)=>(w(q)?U="":w(Y)?U=`>=${q}.0.0${$?"-0":""}`:w(X)?U=`>=${q}.${Y}.0${$?"-0":""}`:te?U=`>=${U}`:U=`>=${U}${$?"-0":""}`,w(z)?ee="":w(he)?ee=`<${+z+1}.0.0-0`:w(de)?ee=`<${z}.${+he+1}.0-0`:ze?ee=`<=${z}.${he}.${de}-${ze}`:$?ee=`<${z}.${he}.${+de+1}-0`:ee=`<=${ee}`,`${U} ${ee}`.trim()),L=($,I,U)=>{for(let q=0;q<$.length;q++)if(!$[q].test(I))return!1;if(I.prerelease.length&&!U.includePrerelease){for(let q=0;q<$.length;q++)if(o($[q].semver),$[q].semver!==s.ANY&&$[q].semver.prerelease.length>0){const Y=$[q].semver;if(Y.major===I.major&&Y.minor===I.minor&&Y.patch===I.patch)return!0}return!1}return!0};return JO}var QO,aEe;function NAt(){if(aEe)return QO;aEe=1;const e=T$e();return QO=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},QO}var BAt=NAt(),D$e=kAt(BAt);function zAt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(f){f.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var jAt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function L$e(e,...t){for(const n of t)UAt(e,n);return e}function UAt(e,t){for(const n of Object.keys(t))rb(e,n,t[n],!0)}const hf=j0t;let R2=QEt;const XA=typeof window<"u"?window:void 0;var DCe;R2===void 0&&((DCe=XA==null?void 0:XA.vl)!=null&&DCe.compile)&&(R2=XA.vl);const qAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},HAt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},a_={vega:"Vega","vega-lite":"Vega-Lite"},Qk={vega:hf.version,"vega-lite":R2?R2.version:"not available"},GAt={vega:e=>e,"vega-lite":(e,t)=>R2.compile(e,{config:t}).spec},VAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,WAt="chart-wrapper";function YAt(e){return typeof e=="function"}function lEe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${a_[r]} JSON Source`}function XAt(e,t){if(e.$schema){const n=v$e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${a_[n.library]}, but mode argument sets ${a_[t]??t}.`);const r=n.library;return D$e(Qk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${a_[r]} ${n.version}, but the current version of ${a_[r]} is v${Qk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function R$e(e){return!!(e&&"load"in e)}function uEe(e){return R$e(e)?e:hf.loader(e)}function ZAt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return zt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function KAt(e,t,n={}){let r,i;zt(t)?(i=uEe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=ZAt(r),o=s.loader;(!i||o)&&(i=uEe(n.loader??o));const a=await cEe(s,i),l=await cEe(n,i),u={...L$e(l,a),config:nb(l.config??{},a.config??{})};return await QAt(e,r,u,i)}async function cEe(e,t){const n=zt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=zt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function JAt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function QAt(e,t,n={},r){const i=n.theme?nb(tAt[n.theme],n.config??{}):n.config,s=fm(n.actions)?n.actions:L$e({},qAt,n.actions??{}),o={...HAt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??hf.Warn,u=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const A="vega-embed-style",{root:T,rootContainer:D}=JAt(f);if(!T.getElementById(A)){const k=document.createElement("style");k.id=A,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?jAt.toString():n.defaultStyle,D.appendChild(k)}}const c=XAt(t,n.mode);let d=GAt[c](t,i);if(c==="vega-lite"&&d.$schema){const A=v$e(d.$schema);D$e(Qk.vega,`^${A.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${A.version}, but current version is v${Qk.vega}.`)}f.classList.add("vega-embed"),s&&f.classList.add("has-actions"),f.innerHTML="";let h=f;if(s){const A=document.createElement("div");A.classList.add(WAt),f.appendChild(A),h=A}const p=n.patch;if(p&&(d=p instanceof Function?p(d):DR(d,p,!0,!1).newDocument),n.formatLocale&&hf.formatLocale(n.formatLocale),n.timeFormatLocale&&hf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const A in n.expressionFunctions){const T=n.expressionFunctions[A];"fn"in T?hf.expressionFunction(A,T.fn,T.visitor):T instanceof Function&&hf.expressionFunction(A,T)}const{ast:g}=n,v=hf.parse(d,c==="vega-lite"?{}:i,{ast:g}),x=new(n.viewClass||hf.View)(v,{loader:r,logLevel:l,renderer:a,...g?{expr:hf.expressionInterpreter??n.expr??K0t}:{}});if(x.addSignalListener("autosize",(A,T)=>{const{type:D}=T;D=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):D=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):D=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:A,tooltip:T}=n,D=A&&!R$e(A)?A==null?void 0:A.baseURL:void 0,k=YAt(T)?T:new fAt({baseURL:D,...T===!0?{}:T}).call;x.tooltip(k)}let{hover:y}=n;if(y===void 0&&(y=c==="vega"),y){const{hoverSet:A,updateSet:T}=typeof y=="boolean"?{}:y;x.hover(A,T)}n&&(n.width!=null&&x.width(n.width),n.height!=null&&x.height(n.height),n.padding!=null&&x.padding(n.padding)),await x.initialize(h,n.bind).runAsync();let w;if(s!==!1){let A=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const D=document.createElement("details");D.title=o.CLICK_TO_VIEW_ACTIONS,f.append(D),A=D;const k=document.createElement("summary");k.innerHTML=VAt,D.append(k),w=R=>{D.contains(R.target)||D.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(A.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){const k=o[`${D.toUpperCase()}_ACTION`],R=document.createElement("a"),O=It(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${u}.${D}`,R.addEventListener("mousedown",async function(B){B.preventDefault();const K=await x.toImageURL(D,O);this.href=K}),T.append(R)}}if(s===!0||s.source!==!1){const D=document.createElement("a");D.text=o.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(k){lEe(wF(t),n.sourceHeader??"",n.sourceFooter??"",c),k.preventDefault()}),T.append(D)}if(c==="vega-lite"&&(s===!0||s.compiled!==!1)){const D=document.createElement("a");D.text=o.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(k){lEe(wF(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),T.append(D)}if(s===!0||s.editor!==!1){const D=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){zAt(window,D,{config:i,mode:p?"vega":c,renderer:a,spec:wF(p?d:t)}),R.preventDefault()}),T.append(k)}}function _(){w&&document.removeEventListener("click",w),x.finalize()}return{view:x,spec:t,vgSpec:d,finalize:_,embedOptions:n}}const _m={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};_m.defaultMerge;function eCt(e,t){return t}function tCt(e,t){return e.filter(n=>n!==void 0)}var fEe;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(fEe||(fEe={}));function dEe(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:iCt(e)?1:e instanceof Set?3:e instanceof Map?4:5}function nCt(e){const t=new Set;for(const n of e)for(const r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(r);return t}function rCt(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function F$e(e){var r;let t=0,n=(r=e[0])==null?void 0:r[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var i;do{if(n===void 0)return{done:!0,value:void 0};const s=n.next();if(s.done===!0){t+=1,n=(i=e[t])==null?void 0:i[Symbol.iterator]();continue}return{done:!1,value:s.value}}while(!0)}}}}}const hEe=["[object Object]","[object Module]"];function iCt(e){if(!hEe.includes(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!hEe.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function sCt(e,t,n){const r={};for(const i of nCt(e)){const s=[];for(const l of e)rCt(l,i)&&s.push(l[i]);if(s.length===0)continue;const o=t.metaDataUpdater(n,{key:i,parents:e}),a=O$e(s,t,o);a!==_m.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):r[i]=a)}return r}function oCt(e){return e.flat()}function aCt(e){return new Set(F$e(e))}function lCt(e){return new Map(F$e(e))}function uCt(e){return e.at(-1)}const ZA={mergeRecords:sCt,mergeArrays:oCt,mergeSets:aCt,mergeMaps:lCt,mergeOthers:uCt};function cCt(...e){return fCt({})(...e)}function fCt(e,t){const n=dCt(e,r);function r(...i){return O$e(i,n,t)}return r}function dCt(e,t){return{defaultMergeFunctions:ZA,mergeFunctions:{...ZA,...Object.fromEntries(Object.entries(e).filter(([n,r])=>Object.hasOwn(ZA,n)).map(([n,r])=>r===!1?[n,ZA.mergeOthers]:[n,r]))},metaDataUpdater:e.metaDataUpdater??eCt,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,filterValues:e.filterValues===!1?void 0:e.filterValues??tCt,actions:_m}}function O$e(e,t,n){var s;const r=((s=t.filterValues)==null?void 0:s.call(t,e,n))??e;if(r.length===0)return;if(r.length===1)return eM(r,t,n);const i=dEe(r[0]);if(i!==0&&i!==5){for(let o=1;o<r.length;o++)if(dEe(r[o])!==i)return eM(r,t,n)}switch(i){case 1:return hCt(r,t,n);case 2:return pCt(r,t,n);case 3:return mCt(r,t,n);case 4:return gCt(r,t,n);default:return eM(r,t,n)}}function hCt(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);return r===_m.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):r}function pCt(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);return r===_m.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):r}function mCt(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);return r===_m.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):r}function gCt(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);return r===_m.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):r}function eM(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===_m.defaultMerge||t.useImplicitDefaultMerging&&r===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const yCt={width:"container",height:"container",autosize:"fit",resize:!0},vCt=(e,t,n)=>{const r=cCt(yCt,t);KAt(e.renderRoot.querySelector("#vis"),r).then(i=>{n&&(Object.keys(n).forEach(s=>{i.view.insert(s,n[s])}),i.view.run())})};class M$e extends Zr{constructor(){super(),this.spec=void 0,this.dataValues=void 0,this.noShadow=!1,this.unstyled=!1}async updated(t){(t.has("spec")||t.has("dataValues"))&&vCt(this,this.spec,this.dataValues)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Ke`
      <style>
        ${qKe}
        ${!this.unstyled&&$D}
        ${!this.unstyled&&HKe}
      </style>
      <div id="vis"></div>
    `}}tn(M$e,"properties",{dataValues:{attribute:!1,type:Object},spec:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-chart",M$e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bCt=tE(class extends fD{constructor(){super(...arguments),this.key=qr}render(e,t){return this.key=e,t}update(e,[t,n]){return t!==this.key&&(dI(e),this.key=t),n}}),xCt=e=>{e.hoverInteraction=e.eoxMap.selectInteractions.selectHover,e.clickInteraction=e.eoxMap.selectInteractions.selectClick;const t=()=>{e.requestUpdate()};e.hoverInteraction.selectStyleLayer.on("change",t),e.clickInteraction.selectStyleLayer.on("change",t)},wCt=(e,t,n)=>{if(e.clickId===t)return;const r=n?[]:[t];e.hoverInteraction.highlightById(r)},_Ct=(e,t)=>{e.stopPropagation();const n=Number(e.target.getAttribute("index")),r=t.drawnFeatures[n];t.drawLayer.getSource().removeFeature(r),t.drawnFeatures.splice(n,1),t.requestUpdate()},ECt=(e,t)=>{const n=e.getId(),{clickId:r,drawLayer:i,olMap:s,clickInteraction:o}=t,a=r===n,l=e.getGeometry();if(a){const u=i.getSource().getExtent();s.getView().fit(u,Xve),o.highlightById([])}else{const u=l.getExtent();o.highlightById([n]),s.getView().fit(u,Xve)}t.requestUpdate()},SCt="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class $$e extends Zr{constructor(){super();tn(this,"hoverInteraction");tn(this,"clickInteraction");tn(this,"hoverId");tn(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(n){_Ct(n,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(n){ECt(n,this)}_handleHoverFeature(n,r=!1){wCt(this,n,r)}firstUpdated(){xCt(this)}createRenderRoot(){return this}render(){var n,r;return this.hoverId=(n=this.hoverInteraction)==null?void 0:n.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],Ke`
      <style>
        ${!this.unstyled&&SCt}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((i,s)=>{const o=s+1,a=i.getId(),l=this.hoverId===a,u=this.clickId===a;return bCt(o,Ke`
              <li
                class="${l||u?"selected":qr}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(i)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}tn($$e,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",$$e);const ACt=e=>{const{multipleFeatures:t,drawnFeatures:n,currentlyDrawing:r}=e,i=!t&&(n==null?void 0:n.length)>0||r,s=!(n!=null&&n.length)&&!r;return{drawDisabled:i,discardDisabled:s}},iS="button,.button { /* TODO: why does this only work here and not from :root? */ --primary-color: #004170; --primary-color-hover: #004170cc; --error-color: #ff5252; display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}",CCt='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input,input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004; background-color: var(--background-color);}';function kCt(e){navigator.clipboard.writeText(e).then(function(){},function(t){console.error("Could not copy text: ",t)})}const TCt=(e,t)=>new gD().writeFeaturesObject(e,t),DCt=(e,t)=>new H3e().writeFeatures(e,t);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Un(e,t,n){return e?t(e):n==null?void 0:n(e)}var W2,Y2;class I$e extends Zr{constructor(){super();gn(this,W2,!0);gn(this,Y2,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1,this.select=!1}updateButtonStates(){const{drawDisabled:n,discardDisabled:r}=ACt(this);Ui(this,W2,n),Ui(this,Y2,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const n=this.currentlyDrawing?"drawing":"draw";return Ke`
      <style>
        ${!this.unstyled&&iS}
        ${!this.unstyled&&CCt}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="${this.select?"pointer":"polygon"} icon"
            ?disabled="${$t(this,W2)||qr}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${n}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${$t(this,Y2)||qr}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${Un(this.importFeatures,()=>Ke`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${Un(this.showEditor,()=>Ke`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>kCt(this.geoJSON)}
            >
              ${this.unstyled?"copy":qr}
            </button>
          </div>
        `)}
    `}}W2=new WeakMap,Y2=new WeakMap,tn(I$e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},select:{type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",I$e);const LCt=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.pointer:before {
    content:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Ecursor-default-click%3C/title%3E%3Cpath d='M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10' /%3E%3C/svg%3E");
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,RCt=e=>{(()=>{e.emitDrawnFeatures(),e.multipleFeatures||(e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.currentlyDrawing=!1)})(),e.requestUpdate()},FCt=e=>{const t=()=>{e.drawLayer.set("isDrawingEnabled",!0),e.draw.setActive(!0),e.selectionEvents.addSelectionEvent()},n=()=>{e.currentlyDrawing=!0,e.requestUpdate()};t(),n()},pEe=(e,t)=>{var s;const r=e2(e.for),i=r.map;return e.drawLayer=r.addOrUpdateLayer({zIndex:100,type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:t},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:e.type,modify:e.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5},tooltip:!1}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),e.draw=r.interactions.drawInteraction,e.modify=r.interactions.drawInteractionmodify,y$(e,r,e.layerId),(s=e.modify)==null||s.on("modifyend",()=>e.onModifyEnd()),r.addEventListener("addfeatures",()=>RCt(e)),{EoxMap:r,OlMap:i}},OCt=e=>{const t=()=>{e.drawnFeatures=[],e.draw.setActive(!1),e.selectionEvents.removeSelectionEvent(),e.drawLayer.getSource().clear(),e.geoJSON=null},n=()=>{e.emitDrawnFeatures(),e.currentlyDrawing=!1,e.requestUpdate()};t(),n()},MCt=(e,t)=>{setTimeout(()=>{const r=e.drawLayer.getSource().getFeatures(),i=e.eoxMap.projection||"EPSG:3857",s=e.projection;e.drawnFeatures=s?r.map(a=>{a=a.clone();const l=a.getGeometry().transform(i,s);return a.setGeometry(l),a}):r;let o;switch(e.format){case"geojson":o=TCt(e.drawnFeatures);break;case"wkt":o=DCt(e.drawnFeatures);break;case"feature":o=e.drawnFeatures;break;default:o=e.drawnFeatures;break}e.updateGeoJSON(),e.requestUpdate(),t(o)},0)},$Ct=e=>{const t=i=>{(i==null?void 0:i.detail.id)!=="SelectLayerClickInteraction"||!i.detail.feature||(e.drawLayer.getSource().addFeature(i.detail.feature),e.eoxMap.dispatchEvent(new CustomEvent("addfeatures",{detail:i.detail})))};return{addSelectionEvent:()=>{e.layerId&&(e.eoxMap.selectInteractions.SelectLayerHoverInteraction.setActive(!0),e.eoxMap.addEventListener("select",t))},removeSelectionEvent:()=>{var s;const i=(s=e.eoxMap.selectInteractions)==null?void 0:s.SelectLayerHoverInteraction;i&&(i.selectedFids=[],i.setActive(!1)),e.eoxMap.removeEventListener("select",t)}}},y$=(e,t,n)=>{if(!n||!t)return;const r=JSON.parse(JSON.stringify(t.getLayerById(n).get("_jsonDefinition")))||null;if(!r){console.error(`Layer with id ${n} not found`);return}const i={type:"select",active:!1,options:{id:"SelectLayerHoverInteraction",condition:"pointermove",active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"#3399CC","stroke-width":2.5}}},s={type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",multi:e.multipleFeatures,modify:e.allowModify,active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"rgba(0, 0, 0,0.0)"}}};r.interactions=[i,s],t.addOrUpdateLayer(r);const o=e.draw;e.draw=t.selectInteractions.SelectLayerClickInteraction,o.setActive(!1),t.selectInteractions.SelectLayerClickInteraction.setActive(!1),t.selectInteractions.SelectLayerHoverInteraction.setActive(!1)},ICt=(e,t,n,r)=>{if(t){if(n){r&&n!==r&&mEe(e,t),y$(e,t,n);return}if(!n&&r){mEe(e,t);return}}};function mEe(e,t){t&&(e.discardDrawing(),e.selectionEvents.removeSelectionEvent(),e.draw=t.interactions.drawInteraction,t.selectInteractions.SelectLayerClickInteraction.remove(),t.selectInteractions.SelectLayerHoverInteraction.remove())}const RR=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, transparent); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';function PCt(e,t){function n(s){s.preventDefault(),s.stopPropagation()}function r(s){s.srcElement.style.opacity="0.4"}function i(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{t.addEventListener(s,n,!1),["dragenter","dragover"].includes(s)?t.addEventListener(s,r,!1):t.addEventListener(s,i,!1)}),t.addEventListener("drop",s=>P$e(s,e),!1)}function NCt(e){e.preventDefault(),e.stopPropagation()}function P$e(e,t){NCt(e);const n=e.dataTransfer?e.dataTransfer.files:e.target.files;Array.from(n).forEach(r=>BCt(r,t))}function BCt(e,t){const n=new FileReader;n.readAsText(e),n.onloadend=function(){typeof n.result=="string"&&t.handleFeatureChange(n.result)}}var qv,Hv,X2,Gv;class zCt extends Zr{constructor(){super();gn(this,qv);gn(this,Hv);gn(this,X2);gn(this,Gv);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.layerId="",this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.projection="EPSG:4326",this.type="Polygon",this.selectionEvents=null,this.format="feature",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},layerId:{attribute:"layer-id",type:String},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},projection:{type:String},noShadow:{type:Boolean},format:{type:String},type:{type:String},unstyled:{type:Boolean}}}set layerId(n){ICt(this,this.eoxMap,n,$t(this,Gv)),Ui(this,Gv,n)}get layerId(){return $t(this,Gv)}startDrawing(){FCt(this)}discardDrawing(){OCt(this)}handleFeatureChange(n,r=!1){this.eoxMap.parseTextToFeature(n||JSON.stringify(Zve),this.drawLayer,this.eoxMap,r)}handleFilesChange(n){P$e(n,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){Ui(this,X2,JSON.stringify(this.eoxMap.parseFeature(this.drawnFeatures)||Zve,void 0,2))}emitDrawnFeatures(){MCt(this,r=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:r}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:n,OlMap:r}=pEe(this,this.multipleFeatures);this.eoxMap=n,Ui(this,Hv,r),this.selectionEvents=$Ct(this),this.importFeatures&&PCt(this,this.eoxMap),this.updateGeoJSON(),this.requestUpdate()}updated(n){if(n.has("for")){const{EoxMap:r,OlMap:i}=pEe(this,this.multipleFeatures);this.eoxMap=r,Ui(this,Hv,i)}}get eoxMap(){return $t(this,qv)}set eoxMap(n){const r=$t(this,qv);Ui(this,qv,n),this.requestUpdate("eoxMap",r)}disconnectedCallback(){var n;(n=this.eoxMap)==null||n.map.removeLayer(this.drawLayer),super.disconnectedCallback()}render(){var n;return Ke`
      <style>
        :host { display: block; }
        ${!this.unstyled&&RR}
        ${!this.unstyled&&LCt}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.startDrawing(),discard:()=>this.discardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        ?select=${!!this.layerId}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${$t(this,X2)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((n=this.drawnFeatures)!=null&&n.length)?Ke`<eox-drawtools-list
            .eoxMap=${this.eoxMap}
            .olMap=${$t(this,Hv)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:qr}
    `}}qv=new WeakMap,Hv=new WeakMap,X2=new WeakMap,Gv=new WeakMap;customElements.define("eox-drawtools",zCt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let eT=class extends fD{constructor(t){if(super(t),this.it=qr,t.type!==sp.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===qr||t==null)return this._t=void 0,this.it=t;if(t===fv)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const n=[t];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}};eT.directiveName="unsafeHTML",eT.resultType=1;const Cc=tE(eT);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class v$ extends eT{}v$.directiveName="unsafeSVG",v$.resultType=2;const jCt=tE(v$);var tM,gEe;function UCt(){if(gEe)return tM;gEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Xi=="object"&&Xi&&Xi.Object===Object&&Xi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,g=function(){return f.Date.now()};function v(A,T,D){var k,R,O,B,K,L,$=0,I=!1,U=!1,q=!0;if(typeof A!="function")throw new TypeError(e);T=_(T)||0,x(D)&&(I=!!D.leading,U="maxWait"in D,O=U?h(_(D.maxWait)||0,T):O,q="trailing"in D?!!D.trailing:q);function Y(He){var je=k,we=R;return k=R=void 0,$=He,B=A.apply(we,je),B}function X(He){return $=He,K=setTimeout(ee,T),I?Y(He):B}function te(He){var je=He-L,we=He-$,Ie=T-je;return U?p(Ie,O-we):Ie}function le(He){var je=He-L,we=He-$;return L===void 0||je>=T||je<0||U&&we>=O}function ee(){var He=g();if(le(He))return z(He);K=setTimeout(ee,te(He))}function z(He){return K=void 0,q&&k?Y(He):(k=R=void 0,B)}function he(){K!==void 0&&clearTimeout(K),$=0,k=L=R=K=void 0}function de(){return K===void 0?B:z(g())}function ze(){var He=g(),je=le(He);if(k=arguments,R=this,L=He,je){if(K===void 0)return X(L);if(U)return K=setTimeout(ee,T),Y(L)}return K===void 0&&(K=setTimeout(ee,T)),B}return ze.cancel=he,ze.flush=de,ze}function x(A){var T=typeof A;return!!A&&(T=="object"||T=="function")}function y(A){return!!A&&typeof A=="object"}function w(A){return typeof A=="symbol"||y(A)&&d.call(A)==n}function _(A){if(typeof A=="number")return A;if(w(A))return t;if(x(A)){var T=typeof A.valueOf=="function"?A.valueOf():A;A=x(T)?T+"":T}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var D=s.test(A);return D||o.test(A)?a(A.slice(2),D?2:8):i.test(A)?t:+A}return tM=v,tM}var qCt=UCt();const Y0=sa(qCt),N$e=hI`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow:
      0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08),
      0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow:
      0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05),
      0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`,HCt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    preserveAspectRatio="xMidYMid"
    width="50"
    height="50"
    style="shape-rendering: auto; display: block; background: transparent;"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g>
      <circle
        stroke-dasharray="164.93361431346415 56.97787143782138"
        r="35"
        stroke-width="12"
        stroke="#1a467c"
        fill="none"
        cy="50"
        cx="50"
      >
        <animateTransform
          keyTimes="0;1"
          values="0 50 50;360 50 50"
          dur="1.2222222222222223s"
          repeatCount="indefinite"
          type="rotate"
          attributeName="transform"
        ></animateTransform>
      </circle>
      <g></g>
    </g>
  </svg>
`;var Vv;class GCt extends Zr{constructor(){super();gn(this,Vv);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this._isLoading=!1,this.for="eox-map",this.listDirection="right",this.resultsDirection="down",this.interval=800,this.loaderSvg=HCt,this.fetchDebounced=Y0(async()=>{if(!(this._query.length<2)){this._isLoading=!0;try{const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,i=await(await fetch(encodeURI(n))).json();this._data=i.results,this._isLoading=!1}catch{console.log("Error setting up or requesting from geosearch endpoint")}}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},_isLoading:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean},loaderSvg:{type:String,attribute:"loader-svg"}}}async onInput(n){if(this._query=n.target.value,this._query.length==0){this._isListVisible=!1;return}else this._query.length>=2&&(this._isLoading=!0),this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(n){return n==="up"?"top":n==="left"?"left":n==="down"?"bottom":n==="right"?"right":"row"}handleSelect(n){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const r=this.eoxMap.map.getView().getProjection().getCode();let i=Q4("EPSG:4326",r,[n.bounds.southwest.lng,n.bounds.southwest.lat]),s=Q4("EPSG:4326",r,[n.bounds.northeast.lng,n.bounds.northeast.lat]);const o=[i[0],i[1],s[0],s[1]];this.eoxMap.zoomExtent=o,this.dispatchEvent(new CustomEvent("geosearchSelect",n))}updateMap(){const n=e2(this.for);if(n){const r=n;this.eoxMap=r}}firstUpdated(){this.updateMap()}updated(n){n.has("for")&&this.updateMap()}get eoxMap(){return $t(this,Vv)}set eoxMap(n){const r=$t(this,Vv);Ui(this,Vv,n),this.requestUpdate("eoxMap",r)}render(){return Ke`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&RR}
          ${!this.unstyled&&iS}
          ${!this.unstyled&&N$e}
          .fill {
          width: 100%;
          height: 100%;
          min-height: 100px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._isLoading?Ke`<div class="fill">${jCt(this.loaderSvg)}</div>`:this._query.length<2?Ke`<span class="hint"
                    >Enter at least two characters to search</span
                  >`:this._data.map(n=>Ke`
                      <eox-geosearch-item
                        .item="${n}"
                        .onClick="${r=>{this.handleSelect(r)}}"
                        .unstyled=${this.unstyled}
                      />
                    `)}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}Vv=new WeakMap;class VCt extends Zr{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return Ke`
      <style>
        ${!this.unstyled&&RR}
        ${!this.unstyled&&N$e}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",GCt);customElements.define("eox-geosearch-item",VCt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*su(e,t){if(e!==void 0){let n=0;for(const r of e)yield t(r,n++)}}const WCt=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
form#itemfilter:not(.inline) {
  overflow-y: auto;
}
details {
  width: 100%;
}
`,sS=`
:host, :root {
  --item-color: color-mix(
    in srgb,
    var(--primary-color) 10%,
    transparent
  );
  --item-hover-color: color-mix(
    in srgb,
    var(--secondary-color) 30%,
    transparent
  );
  --item-select-color: var(--primary-color);
  --inline-bg-color: color-mix(
    in srgb,
    var(--secondary-color) 10%,
    transparent
  );
  --border-color: color-mix(
    in srgb,
    #000000 20%,
    transparent
  );
  --background-color: var(--eox-background-color, transparent);
  --padding: 0.5rem;
  --text-transform: capitalize;
  --form-flex-direction: column;
  --filter-display: block;
  background-color: var(--background-color);
}
* {
  font-family: Roboto, sans-serif;
}
form#itemfilter {
  flex-direction: var(--form-flex-direction);
}
eox-itemfilter-container {
  min-width: 200px;
  display: var(--filter-display);
}
eox-itemfilter-results {
  flex-grow: 1;
}
ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
}
.cards li span {
  display: block;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem var(--padding);
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: 13px;
  align-items: center;
  text-transform: var(--text-transform);
}
.cards .title {
  font-size: 16px;
  font-weight: 600;
  text-wrap: auto;
  line-height: 19px;
}
.subtitle {
  font-size: 11px;
  opacity: .7;
  margin-top: 6px;
}
.cards .subtitle {
  font-size: 14px;
  color: #757575;
  text-wrap: auto;
  line-height: 19px;
}
.image {
  width: 24px;
  height: 24px;
  object-fit: cover;
  overflow: hidden;
  margin-right: 8px;
}
.cards .image {
  width: 100%;
  height: 190px;
  margin-bottom: 8px;
}
.title-container {
  display: flex;
  flex-direction: column;
}
h6.main-heading {
  font-size: 1rem;
  margin-block-start: 1.33em;
  margin-block-end: 1.33em;
  margin-top: var(--padding);
  padding: 0 var(--padding);
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  margin-left: auto;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--padding);
}
[data-type=filter] .title,
details summary {
  text-transform: var(--text-transform);
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul:not(#filters) > li {
  padding: 5px 0;
}
ul#results li {
  padding: 5px var(--padding);
}
ul#results ul.cards {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  gap: 40px;
  margin: 20px 0;
  cursor: initial;
}
ul#results ul.cards li {
  flex-basis: calc(33.3% - 77px);
  min-width: 0;
  align-self: flex-start;
}
@media screen and (max-width: 768px) {
  ul#results ul.cards li {
    flex-basis: calc(50% - 70px);
  }
}
@media screen and (max-width: 480px) {
  ul#results ul.cards li {
    flex-basis: 100%;
  }
}
section {
  position: relative;
  background-color: var(--background-color);
}
button#filter-reset {
  position: absolute;
  top: 0;
  right: var(--padding);
  padding: 2px 10px;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--secondary-color);
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: var(--primary-color);
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range,
tc-range-slider {
  align-items: center;
  display: block;
}
tc-range-slider {
  width: calc(100% - 16px);
  margin-left: 8px;
  margin-right: 8px;
  --width: 100%;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before,
.range-after {
  margin: 1rem 0px;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: -5px;
  height: 14px;
  width: 14px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 14px;
  width: 14px;
}
.inline-content {
  border: 1.5px solid var(--secondary-color);
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: var(--inline-bg-color);
  margin-top: 4px;
  padding: 8px;
}
.inline-container {
  position: relative;
  align-items: center;
}
.inline-container-wrapper {
  width: 100%;
  position: relative;
}
.inline-container {
  position: relative;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  height: 24px;
  padding: 8px;
  flex: 1;
  justify-content: space-between;
  cursor: text;
  transition: all 0.2s ease-in-out;
  display: flex;
}
.inline-container:hover {
  border: 1px solid var(--primary-color);
}
[popover] {
  position: fixed;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  border: none;
}
.input-container {
  display: flex;
  flex: 1;
  align-items: center;
}
.input-container input,
.input-container input:focus {
  height: 100%;
  border: none;
  outline: none;
  border: 0;
  min-width: 25%;
}
.button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 1px;
  top: 5px;
  height: calc(100% - 10px);
  width: 34px;
  background: white;
}
button.icon {
  color: #004170;
  height: 24px;
  font-size: large;
  width: unset;
}
.inline-container::-webkit-scrollbar {
  height: 2px;
}
.inline-container::-webkit-scrollbar-thumb {
  background: lightgrey;
  border-radius: 2px;
}
.hidden {
  height: 0;
  padding: 0;
  border: none;
}
.hidden:hover {
  border: none;
}
.chip-title {
  pointer-events: none;
  text-transform: var(--text-transform);
}
.chip {
  display: flex;
  align-items: center;
  background: var(--item-color);
  border-radius: 30px;
  margin-right: 4px;
  padding: 5px 10px;
  font-size: small;
  cursor: default;
  white-space: nowrap;
}
.chip.highlighted {
  background: var(--primary-color);
  color: white;
}
.chip-close {
  cursor: pointer;
  font-weight: 600;
  position: absolute;
  right: -25px;
  background: white;
  top: 0;
  height: 100%;
  display: flex;
  align-items: center;
  height: 24px;
  width: 24px;
}
.chip-close:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
  height: 24px;
  width: 24px;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
.chip-container {
  position: relative;
  max-width: 75%;
}
.autocomplete-container,
.text-container {
  position: relative;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  justify-content: space-between;
  cursor: text;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  background: white;
}
.autocomplete-container-wrapper,
.text-container-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex: 1;
  overflow-x: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.autocomplete-container-wrapper::-webkit-scrollbar {
  display: none;
}
.chip-wrapper {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.chip-wrapper::-webkit-scrollbar {
  display: none;
  width: 0;
  background: transparent;
}
.autocomplete-input,
.text-input {
  flex: 1;
  border: 1px solid var(--border-color);
  outline: none;
  box-sizing: border-box;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  min-width: 150px;
}
input[type="text"].text-input,
input[type="text"].autocomplete-input {
  padding: 9px 6px !important;
  border-radius: 4px;
}
.text-input:hover,
.autocomplete-input:hover {
  border: 1px solid var(--primary-color);
}
.text-input:invalid {
  border: 1px solid red;
}
.selected-items {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
}
.select li:hover,
.multiselect li:hover,
eox-itemfilter-results li:hover {
  background: var(--item-hover-color);
}
eox-itemfilter-results li.highlighted {
  color: var(--background-color);
  background: var(--item-select-color);
}
.selected-item span {
  margin-right: 8px;
}
.selected-item button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.multiselect-container,
.select-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.multiselect-container label,
.select-container label {
  display: flex;
  align-items: center;
  cursor: pointer;
}
.multiselect-container input,
.select-container input {
  margin-right: 8px;
}
.select-overflow {
  max-height: 185px;
  overflow-y: auto;
}
.chip-title strong {
  font-weight: 500;
}
.chip-wrapper {
  max-width: 100%;
  overflow-x: scroll;
}
.chip-container {
  display: flex;
  flex: 0;
}
.input-container.dirty-filter-input {
  margin-left: 25px;
}
.error-validation {
  position: relative;
  color: red;
  font-size: x-small;
  top: -8px;
}
input {
  background-color: var(--background-color);
}
`;var MT,B$e;class YCt extends Zr{constructor(){super();gn(this,MT);this.filterObject={},this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},unstyled:{type:Boolean}}}render(){return Ke`
      <style>
        ${!this.unstyled&&sS}
      </style>

      ${Un(this.filterObject.featured,()=>Ke`<slot name="filter"></slot>`,()=>Ke`<details
            @toggle="${dn(this,MT,B$e)}"
            class="details-filter"
            ?open=${this.filterObject.expanded||qr}
          >
            <summary>
              <span
                class="title"
                style="${!this.filterObject.title&&"text-transform: var(--text-transform)"}"
              >
                ${this.filterObject.title||this.filterObject.key||"Filter"}
                <slot name="reset-button"></slot>
              </span>
            </summary>
            <div>
              <slot name="filter"></slot>
            </div>
          </details>`)}
    `}}MT=new WeakSet,B$e=function(n){this.dispatchEvent(new CustomEvent("details-toggled",{detail:n,bubbles:!0,composed:!0}))};customElements.define("eox-itemfilter-expandcontainer",YCt);function fh(e){return Array.isArray?Array.isArray(e):U$e(e)==="[object Array]"}const XCt=1/0;function ZCt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-XCt?"-0":t}function KCt(e){return e==null?"":ZCt(e)}function Af(e){return typeof e=="string"}function z$e(e){return typeof e=="number"}function JCt(e){return e===!0||e===!1||QCt(e)&&U$e(e)=="[object Boolean]"}function j$e(e){return typeof e=="object"}function QCt(e){return j$e(e)&&e!==null}function Yl(e){return e!=null}function nM(e){return!e.trim().length}function U$e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const e3t="Incorrect 'index' type",t3t=e=>`Invalid value for key ${e}`,n3t=e=>`Pattern length exceeds max of ${e}.`,r3t=e=>`Missing ${e} property in key`,i3t=e=>`Property 'weight' in key '${e}' must be a positive integer`,yEe=Object.prototype.hasOwnProperty;class s3t{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=q$e(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function q$e(e){let t=null,n=null,r=null,i=1,s=null;if(Af(e)||fh(e))r=e,t=vEe(e),n=b$(e);else{if(!yEe.call(e,"name"))throw new Error(r3t("name"));const o=e.name;if(r=o,yEe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(i3t(o));t=vEe(o),n=b$(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function vEe(e){return fh(e)?e:e.split(".")}function b$(e){return fh(e)?e.join("."):e}function o3t(e,t){let n=[],r=!1;const i=(s,o,a)=>{if(Yl(s))if(!o[a])n.push(s);else{let l=o[a];const u=s[l];if(!Yl(u))return;if(a===o.length-1&&(Af(u)||z$e(u)||JCt(u)))n.push(KCt(u));else if(fh(u)){r=!0;for(let f=0,c=u.length;f<c;f+=1)i(u[f],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,Af(t)?t.split("."):t,0),r?n:n[0]}const a3t={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},l3t={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},u3t={location:0,threshold:.6,distance:100},c3t={useExtendedSearch:!1,getFn:o3t,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Yn={...l3t,...a3t,...u3t,...c3t};const f3t=/[^ ]+/g;function d3t(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(f3t).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class kB{constructor({getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){this.norm=d3t(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Af(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Af(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Yl(t)||nM(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Yl(o)){if(fh(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:f}=l.pop();if(Yl(f))if(Af(f)&&!nM(f)){let c={v:f,i:u,n:this.norm.get(f)};a.push(c)}else fh(f)&&f.forEach((c,d)=>{l.push({nestedArrIndex:d,value:c})})}r.$[s]=a}else if(Af(o)&&!nM(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function H$e(e,t,{getFn:n=Yn.getFn,fieldNormWeight:r=Yn.fieldNormWeight}={}){const i=new kB({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(q$e)),i.setSources(t),i.create(),i}function h3t(e,{getFn:t=Yn.getFn,fieldNormWeight:n=Yn.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new kB({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function KA(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Yn.distance,ignoreLocation:s=Yn.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function p3t(e=[],t=Yn.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Mg=32;function m3t(e,t,n,{location:r=Yn.location,distance:i=Yn.distance,threshold:s=Yn.threshold,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,includeMatches:l=Yn.includeMatches,ignoreLocation:u=Yn.ignoreLocation}={}){if(t.length>Mg)throw new Error(n3t(Mg));const f=t.length,c=e.length,d=Math.max(0,Math.min(r,c));let h=s,p=d;const g=a>1||l,v=g?Array(c):[];let x;for(;(x=e.indexOf(t,p))>-1;){let D=KA(t,{currentLocation:x,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(D,h),p=x+f,g){let k=0;for(;k<f;)v[x+k]=1,k+=1}}p=-1;let y=[],w=1,_=f+c;const A=1<<f-1;for(let D=0;D<f;D+=1){let k=0,R=_;for(;k<R;)KA(t,{errors:D,currentLocation:d+R,expectedLocation:d,distance:i,ignoreLocation:u})<=h?k=R:_=R,R=Math.floor((_-k)/2+k);_=R;let O=Math.max(1,d-R+1),B=o?c:Math.min(d+R,c)+f,K=Array(B+2);K[B+1]=(1<<D)-1;for(let $=B;$>=O;$-=1){let I=$-1,U=n[e.charAt(I)];if(g&&(v[I]=+!!U),K[$]=(K[$+1]<<1|1)&U,D&&(K[$]|=(y[$+1]|y[$])<<1|1|y[$+1]),K[$]&A&&(w=KA(t,{errors:D,currentLocation:I,expectedLocation:d,distance:i,ignoreLocation:u}),w<=h)){if(h=w,p=I,p<=d)break;O=Math.max(1,2*d-p)}}if(KA(t,{errors:D+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;y=K}const T={isMatch:p>=0,score:Math.max(.001,w)};if(g){const D=p3t(v,a);D.length?l&&(T.indices=D):T.isMatch=!1}return T}function g3t(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class G$e{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:s=Yn.includeMatches,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(d,h)=>{this.chunks.push({pattern:d,alphabet:g3t(d),startIndex:h})},c=this.pattern.length;if(c>Mg){let d=0;const h=c%Mg,p=c-h;for(;d<p;)f(this.pattern.substr(d,Mg),d),d+=Mg;if(h){const g=c-Mg;f(this.pattern.substr(g),g)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],c=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:v})=>{const{isMatch:x,score:y,indices:w}=m3t(t,p,g,{location:i+v,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});x&&(d=!0),c+=y,x&&w&&(f=[...f,...w])});let h={isMatch:d,score:d?c/this.chunks.length:1};return d&&r&&(h.indices=f),h}}class Em{constructor(t){this.pattern=t}static isMultiMatch(t){return bEe(t,this.multiRegex)}static isSingleMatch(t){return bEe(t,this.singleRegex)}search(){}}function bEe(e,t){const n=e.match(t);return n?n[1]:null}class y3t extends Em{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class v3t extends Em{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class b3t extends Em{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class x3t extends Em{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class w3t extends Em{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class _3t extends Em{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class V$e extends Em{constructor(t,{location:n=Yn.location,threshold:r=Yn.threshold,distance:i=Yn.distance,includeMatches:s=Yn.includeMatches,findAllMatches:o=Yn.findAllMatches,minMatchCharLength:a=Yn.minMatchCharLength,isCaseSensitive:l=Yn.isCaseSensitive,ignoreLocation:u=Yn.ignoreLocation}={}){super(t),this._bitapSearch=new G$e(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class W$e extends Em{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const x$=[y3t,W$e,b3t,x3t,_3t,w3t,v3t,V$e],xEe=x$.length,E3t=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,S3t="|";function A3t(e,t={}){return e.split(S3t).map(n=>{let r=n.trim().split(E3t).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,u=-1;for(;!l&&++u<xEe;){const f=x$[u];let c=f.isMultiMatch(a);c&&(i.push(new f(c,t)),l=!0)}if(!l)for(u=-1;++u<xEe;){const f=x$[u];let c=f.isSingleMatch(a);if(c){i.push(new f(c,t));break}}}return i})}const C3t=new Set([V$e.type,W$e.type]);class k3t{constructor(t,{isCaseSensitive:n=Yn.isCaseSensitive,includeMatches:r=Yn.includeMatches,minMatchCharLength:i=Yn.minMatchCharLength,ignoreLocation:s=Yn.ignoreLocation,findAllMatches:o=Yn.findAllMatches,location:a=Yn.location,threshold:l=Yn.threshold,distance:u=Yn.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=A3t(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];o.length=0,s=0;for(let c=0,d=f.length;c<d;c+=1){const h=f[c],{isMatch:p,indices:g,score:v}=h.search(t);if(p){if(s+=1,a+=v,r){const x=h.constructor.type;C3t.has(x)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return r&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const w$=[];function T3t(...e){w$.push(...e)}function _$(e,t){for(let n=0,r=w$.length;n<r;n+=1){let i=w$[n];if(i.condition(e,t))return new i(e,t)}return new G$e(e,t)}const tT={AND:"$and",OR:"$or"},E$={PATH:"$path",PATTERN:"$val"},S$=e=>!!(e[tT.AND]||e[tT.OR]),D3t=e=>!!e[E$.PATH],L3t=e=>!fh(e)&&j$e(e)&&!S$(e),wEe=e=>({[tT.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Y$e(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=D3t(i);if(!o&&s.length>1&&!S$(i))return r(wEe(i));if(L3t(i)){const l=o?i[E$.PATH]:s[0],u=o?i[E$.PATTERN]:i[l];if(!Af(u))throw new Error(t3t(l));const f={keyId:b$(l),pattern:u};return n&&(f.searcher=_$(u,t)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];fh(u)&&u.forEach(f=>{a.children.push(r(f))})}),a};return S$(e)||(e=wEe(e)),r(e)}function R3t(e,{ignoreFieldNorm:t=Yn.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),n.score=r})}function F3t(e,t){const n=e.matches;t.matches=[],Yl(n)&&n.forEach(r=>{if(!Yl(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function O3t(e,t){t.score=e.score}function M3t(e,t,{includeMatches:n=Yn.includeMatches,includeScore:r=Yn.includeScore}={}){const i=[];return n&&i.push(F3t),r&&i.push(O3t),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class Sm{constructor(t,n={},r){this.options={...Yn,...n},this.options.useExtendedSearch,this._keyStore=new s3t(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof kB))throw new Error(e3t);this._myIndex=n||H$e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Yl(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=Af(t)?Af(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return R3t(l,{ignoreFieldNorm:a}),s&&l.sort(o),z$e(n)&&n>-1&&(l=l.slice(0,n)),M3t(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=_$(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!Yl(s))return;const{isMatch:l,score:u,indices:f}=n.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:f}]})}),i}_searchLogical(t){const n=Y$e(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const f=[];for(let c=0,d=a.children.length;c<d;c+=1){const h=a.children[c],p=r(h,l,u);if(p.length)f.push(...p);else if(a.operator===tT.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Yl(a)){let u=r(n,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(t){const n=_$(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Yl(o))return;let l=[];r.forEach((u,f)=>{l.push(...this._findMatches({key:u,value:o[f],searcher:n}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Yl(n))return[];let i=[];if(fh(n))n.forEach(({v:s,i:o,n:a})=>{if(!Yl(s))return;const{isMatch:l,score:u,indices:f}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:u})}return i}}Sm.version="7.0.0";Sm.createIndex=H$e;Sm.parseIndex=h3t;Sm.config=Yn;Sm.parseQuery=Y$e;T3t(k3t);function X$e(e,t){const n=new Sm(t.filterProperties,{keys:["title"]}),r=e.target.value,s=n.search(r).map(o=>o.item.key||o.item.keys.join("|"));Object.keys(t.filters).forEach(o=>{t.querySelector(`[data-details="${o}"]`).parentElement.style.display=s.includes(o)||!r?"":"none"})}function $3t(e,t){const n=e.target.getAttribute("data-close").replace("|","-");t.querySelector(`#filter-${n}`).reset(),t.dispatchEvent(new CustomEvent("filter")),t.requestUpdate()}const A$=Math.min,Pv=Math.max,nT=Math.round,JA=Math.floor,Ff=e=>({x:e,y:e});function Z$e(e){return e.split("-")[0]}function I3t(e){return e.split("-")[1]}function P3t(e){return e==="x"?"y":"x"}function N3t(e){return e==="y"?"height":"width"}function K$e(e){return["top","bottom"].includes(Z$e(e))?"y":"x"}function B3t(e){return P3t(K$e(e))}function J$e(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function _Ee(e,t,n){let{reference:r,floating:i}=e;const s=K$e(t),o=B3t(t),a=N3t(o),l=Z$e(t),u=s==="y",f=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:f,y:r.y-i.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-i.width,y:c};break;default:h={x:r.x,y:r.y}}switch(I3t(t)){case"start":h[o]-=d*(n&&u?-1:1);break;case"end":h[o]+=d*(n&&u?-1:1);break}return h}const z3t=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:c}=_Ee(u,r,l),d=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:v,fn:x}=a[g],{x:y,y:w,data:_,reset:A}=await x({x:f,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});f=y??f,c=w??c,h={...h,[v]:{...h[v],..._}},A&&p<=50&&(p++,typeof A=="object"&&(A.placement&&(d=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:f,y:c}=_Ee(u,d,l)),g=-1)}return{x:f,y:c,placement:d,strategy:i,middlewareData:h}};function FR(){return typeof window<"u"}function Eb(e){return Q$e(e)?(e.nodeName||"").toLowerCase():"#document"}function ou(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function od(e){var t;return(t=(Q$e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Q$e(e){return FR()?e instanceof Node||e instanceof ou(e).Node:!1}function Pc(e){return FR()?e instanceof Element||e instanceof ou(e).Element:!1}function Gf(e){return FR()?e instanceof HTMLElement||e instanceof ou(e).HTMLElement:!1}function EEe(e){return!FR()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ou(e).ShadowRoot}function oS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Nc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function j3t(e){return["table","td","th"].includes(Eb(e))}function OR(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function TB(e){const t=DB(),n=Pc(e)?Nc(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function U3t(e){let t=rm(e);for(;Gf(t)&&!M1(t);){if(TB(t))return t;if(OR(t))return null;t=rm(t)}return null}function DB(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function M1(e){return["html","body","#document"].includes(Eb(e))}function Nc(e){return ou(e).getComputedStyle(e)}function MR(e){return Pc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rm(e){if(Eb(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EEe(e)&&e.host||od(e);return EEe(t)?t.host:t}function eIe(e){const t=rm(e);return M1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gf(t)&&oS(t)?t:eIe(t)}function F2(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=eIe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ou(i);if(s){const a=C$(o);return t.concat(o,o.visualViewport||[],oS(i)?i:[],a&&n?F2(a):[])}return t.concat(i,F2(i,[],n))}function C$(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tIe(e){const t=Nc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Gf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=nT(n)!==s||nT(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function LB(e){return Pc(e)?e:e.contextElement}function Nv(e){const t=LB(e);if(!Gf(t))return Ff(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=tIe(t);let o=(s?nT(n.width):n.width)/r,a=(s?nT(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const q3t=Ff(0);function nIe(e){const t=ou(e);return!DB()||!t.visualViewport?q3t:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function H3t(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ou(e)?!1:t}function E0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=LB(e);let o=Ff(1);t&&(r?Pc(r)&&(o=Nv(r)):o=Nv(e));const a=H3t(s,n,r)?nIe(s):Ff(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,f=i.width/o.x,c=i.height/o.y;if(s){const d=ou(s),h=r&&Pc(r)?ou(r):r;let p=d,g=C$(p);for(;g&&r&&h!==p;){const v=Nv(g),x=g.getBoundingClientRect(),y=Nc(g),w=x.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,_=x.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,u*=v.y,f*=v.x,c*=v.y,l+=w,u+=_,p=ou(g),g=C$(p)}}return J$e({width:f,height:c,x:l,y:u})}function RB(e,t){const n=MR(e).scrollLeft;return t?t.left+n:E0(od(e)).left+n}function rIe(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:RB(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function G3t(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=od(r),a=t?OR(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Ff(1);const f=Ff(0),c=Gf(r);if((c||!c&&!s)&&((Eb(r)!=="body"||oS(o))&&(l=MR(r)),Gf(r))){const h=E0(r);u=Nv(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}const d=o&&!c&&!s?rIe(o,l,!0):Ff(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+d.x,y:n.y*u.y-l.scrollTop*u.y+f.y+d.y}}function V3t(e){return Array.from(e.getClientRects())}function W3t(e){const t=od(e),n=MR(e),r=e.ownerDocument.body,i=Pv(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Pv(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+RB(e);const a=-n.scrollTop;return Nc(r).direction==="rtl"&&(o+=Pv(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Y3t(e,t){const n=ou(e),r=od(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=DB();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function X3t(e,t){const n=E0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Gf(e)?Nv(e):Ff(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function SEe(e,t,n){let r;if(t==="viewport")r=Y3t(e,n);else if(t==="document")r=W3t(od(e));else if(Pc(t))r=X3t(t,n);else{const i=nIe(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return J$e(r)}function iIe(e,t){const n=rm(e);return n===t||!Pc(n)||M1(n)?!1:Nc(n).position==="fixed"||iIe(n,t)}function Z3t(e,t){const n=t.get(e);if(n)return n;let r=F2(e,[],!1).filter(a=>Pc(a)&&Eb(a)!=="body"),i=null;const s=Nc(e).position==="fixed";let o=s?rm(e):e;for(;Pc(o)&&!M1(o);){const a=Nc(o),l=TB(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||oS(o)&&!l&&iIe(e,o))?r=r.filter(f=>f!==o):i=a,o=rm(o)}return t.set(e,r),r}function K3t(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?OR(t)?[]:Z3t(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,f)=>{const c=SEe(t,f,i);return u.top=Pv(c.top,u.top),u.right=A$(c.right,u.right),u.bottom=A$(c.bottom,u.bottom),u.left=Pv(c.left,u.left),u},SEe(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function J3t(e){const{width:t,height:n}=tIe(e);return{width:t,height:n}}function Q3t(e,t,n){const r=Gf(t),i=od(t),s=n==="fixed",o=E0(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Ff(0);if(r||!r&&!s)if((Eb(t)!=="body"||oS(i))&&(a=MR(t)),r){const d=E0(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=RB(i));const u=i&&!r&&!s?rIe(i,a):Ff(0),f=o.left+a.scrollLeft-l.x-u.x,c=o.top+a.scrollTop-l.y-u.y;return{x:f,y:c,width:o.width,height:o.height}}function rM(e){return Nc(e).position==="static"}function AEe(e,t){if(!Gf(e)||Nc(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return od(e)===n&&(n=n.ownerDocument.body),n}function sIe(e,t){const n=ou(e);if(OR(e))return n;if(!Gf(e)){let i=rm(e);for(;i&&!M1(i);){if(Pc(i)&&!rM(i))return i;i=rm(i)}return n}let r=AEe(e,t);for(;r&&j3t(r)&&rM(r);)r=AEe(r,t);return r&&M1(r)&&rM(r)&&!TB(r)?n:r||U3t(e)||n}const ekt=async function(e){const t=this.getOffsetParent||sIe,n=this.getDimensions,r=await n(e.floating);return{reference:Q3t(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tkt(e){return Nc(e).direction==="rtl"}const nkt={convertOffsetParentRelativeRectToViewportRelativeRect:G3t,getDocumentElement:od,getClippingRect:K3t,getOffsetParent:sIe,getElementRects:ekt,getClientRects:V3t,getDimensions:J3t,getScale:Nv,isElement:Pc,isRTL:tkt};function oIe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function rkt(e,t){let n=null,r;const i=od(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:f,top:c,width:d,height:h}=u;if(a||t(),!d||!h)return;const p=JA(c),g=JA(i.clientWidth-(f+d)),v=JA(i.clientHeight-(c+h)),x=JA(f),w={rootMargin:-p+"px "+-g+"px "+-v+"px "+-x+"px",threshold:Pv(0,A$(1,l))||1};let _=!0;function A(T){const D=T[0].intersectionRatio;if(D!==l){if(!_)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!oIe(u,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(A,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,w)}n.observe(e)}return o(!0),s}function ikt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=LB(e),f=i||s?[...u?F2(u):[],...F2(t)]:[];f.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const c=u&&a?rkt(u,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,g=l?E0(e):null;l&&v();function v(){const x=E0(e);g&&!oIe(g,x)&&n(),g=x,p=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),c==null||c(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const skt=(e,t,n)=>{const r=new Map,i={platform:nkt,...n},s={...i.platform,_c:r};return z3t(e,t,{...i,platform:s})};function okt(e){const t=e.renderRoot.querySelector(".inline-container-wrapper"),n=e.renderRoot.querySelector("[popover]");return ikt(t,n,()=>{n.matches(":popover-open")&&skt(t,n,{strategy:"fixed"}).then(({x:i,y:s})=>{Object.assign(n.style,{left:`${i}px`,top:`${s}px`,width:`${t.getBoundingClientRect().width}px`})})},{animationFrame:!0})}function aIe(e){e.renderRoot.querySelector("#eox-itemfilter-input-search").value="",X$e({target:{value:""}},e)}function akt(e,t){t.inlineMode&&e.stopPropagation()}function lkt(e){e.inlineMode&&(e.showDropdown=!0)}function ukt(e,t){t.inlineMode&&(e.stopPropagation(),t.showDropdown=!0)}function ckt(e,t){t.inlineMode&&e.key==="Escape"&&t.showDropdown&&(aIe(t),t.showDropdown=!1)}function fkt(e,t){t.inlineMode&&e.target.tagName!=="DROPDOWN-FORM"&&e.target.tagName!=="EOX-ITEMFILTER"&&t.showDropdown&&(aIe(t),t.showDropdown=!1)}function dkt(e,t){var n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,f=null,c=null,d=e[0],h=e[1],p=t.length;for(n;n<p;n++){r=0;var g=t[n].length-1,v=t[n];if(f=v[0],f[0]!==v[g][0]&&f[1]!==v[g][1])throw new Error("First and last coordinates in a ring must be the same");for(o=f[0]-d,a=f[1]-h,r;r<g;r++){if(c=v[r+1],u=c[1]-h,a<0&&u<0||a>0&&u>0){f=c,a=u,o=f[0]-d;continue}if(l=c[0]-e[0],u>0&&a<=0){if(s=o*u-l*a,s>0)i=i+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)i=i+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}f=c,a=u,o=l}}return i%2!==0}function S0(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function hkt(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!CEe(e[0])||!CEe(e[1]))throw new Error("coordinates must contain numbers");return S0({type:"Point",coordinates:e},t,n)}function pkt(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return S0({type:"LineString",coordinates:e},t,n)}function k$(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function mkt(e,t,n={}){return S0({type:"MultiLineString",coordinates:e},t,n)}function CEe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function lIe(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function gkt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $1(e){return e.type==="Feature"?e.geometry:e}function Mu(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=lIe(e),i=$1(t),s=i.type,o=t.bbox;let a=i.coordinates;if(o&&ykt(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const f=dkt(r,a[u]);if(f===0)return!n.ignoreBoundary;f&&(l=!0)}return l}function ykt(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}class uIe{constructor(t=[],n=vkt){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,i=n[t];for(;t>0;){const s=t-1>>1,o=n[s];if(r(i,o)>=0)break;n[t]=o,t=s}n[t]=i}_down(t){const{data:n,compare:r}=this,i=this.length>>1,s=n[t];for(;t<i;){let o=(t<<1)+1,a=n[o];const l=o+1;if(l<this.length&&r(n[l],a)<0&&(o=l,a=n[l]),r(a,s)>=0)break;n[t]=a,t=o}n[t]=s}}function vkt(e,t){return e<t?-1:e>t?1:0}function cIe(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function bkt(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let kEe=class{constructor(t,n,r,i){this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(t){return this.p.x===t.p.x&&this.p.y===t.p.y}};function xkt(e,t){if(e.type==="FeatureCollection"){const n=e.features;for(let r=0;r<n.length;r++)TEe(n[r],t)}else TEe(e,t)}let QA=0,eC=0,tC=0;function TEe(e,t){const n=e.type==="Feature"?e.geometry:e;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let i=0;i<r.length;i++)for(let s=0;s<r[i].length;s++){let o=r[i][s][0],a=null;eC=eC+1;for(let l=0;l<r[i][s].length-1;l++){a=r[i][s][l+1];const u=new kEe(o,QA,eC,tC),f=new kEe(a,QA,eC,tC+1);u.otherEvent=f,f.otherEvent=u,cIe(u,f)>0?(f.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,f.isLeftEndpoint=!1),t.push(u),t.push(f),o=a,tC=tC+1}}QA=QA+1}class wkt{constructor(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent}}function _kt(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,s=e.rightSweepEvent.p.y,o=t.leftSweepEvent.p.x,a=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,u=t.rightSweepEvent.p.y,f=(u-a)*(i-n)-(l-o)*(s-r),c=(l-o)*(r-a)-(u-a)*(n-o),d=(i-n)*(r-a)-(s-r)*(n-o);if(f===0)return!1;const h=c/f,p=d/f;if(h>=0&&h<=1&&p>=0&&p<=1){const g=n+h*(i-n),v=r+h*(s-r);return[g,v]}return!1}function Ekt(e,t){t=t||!1;const n=[],r=new uIe([],bkt);for(;e.length;){const i=e.pop();if(i.isLeftEndpoint){const s=new wkt(i);for(let o=0;o<r.data.length;o++){const a=r.data[o];if(t&&a.leftSweepEvent.featureId===i.featureId)continue;const l=_kt(s,a);l!==!1&&n.push(l)}r.push(s)}else i.isLeftEndpoint===!1&&r.pop()}return n}function Skt(e,t){const n=new uIe([],cIe);return xkt(e,n),Ekt(n,t)}var Akt=Skt;function FB(e,t,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:i=!0}=n;let s=[];e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(S0(e)),t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(S0(t));const o=Akt(k$(s),i);let a=[];if(r){const l={};o.forEach(u=>{const f=u.join(",");l[f]||(l[f]=!0,a.push(u))})}else a=o;return k$(a.map(l=>hkt(l)))}function fIe(e,t,n){if(e!==null)for(var r,i,s,o,a,l,u,f=0,c=0,d,h=e.type,p=h==="FeatureCollection",g=h==="Feature",v=p?e.features.length:1,x=0;x<v;x++){u=p?e.features[x].geometry:g?e.geometry:e,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var y=0;y<a;y++){var w=0,_=0;if(o=d?u.geometries[y]:u,o!==null){l=o.coordinates;var A=o.type;switch(f=0,A){case null:break;case"Point":if(t(l,c,x,w,_)===!1)return!1;c++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(t(l[r],c,x,w,_)===!1)return!1;c++,A==="MultiPoint"&&w++}A==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(t(l[r][i],c,x,w,_)===!1)return!1;c++}A==="MultiLineString"&&w++,A==="Polygon"&&_++}A==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(t(l[r][i][s],c,x,w,_)===!1)return!1;c++}_++}w++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(fIe(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ckt(e,t){var n,r,i,s,o,a,l,u,f,c,d=0,h=e.type==="FeatureCollection",p=e.type==="Feature",g=h?e.features.length:1;for(n=0;n<g;n++){for(a=h?e.features[n].geometry:p?e.geometry:e,u=h?e.features[n].properties:p?e.properties:{},f=h?e.features[n].bbox:p?e.bbox:void 0,c=h?e.features[n].id:p?e.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(t(null,d,u,f,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,d,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],d,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function rT(e,t){Ckt(e,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(S0(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var f=n.coordinates[u],c={type:l,coordinates:f};if(t(S0(c,i),r,u)===!1)return!1}})}function T$(e,t={}){const n=$1(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return kkt(n,t);case"MultiPolygon":return Tkt(n,t);default:throw new Error("invalid poly")}}function kkt(e,t={}){const r=$1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return dIe(r,i)}function Tkt(e,t={}){const r=$1(e).coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},s=[];return r.forEach(o=>{s.push(dIe(o,i))}),k$(s)}function dIe(e,t){return e.length>1?mkt(e,t):pkt(e[0],t)}function Dkt(e,t,{ignoreSelfIntersections:n=!0}={ignoreSelfIntersections:!0}){let r=!0;return rT(e,i=>{rT(t,s=>{if(r===!1)return!1;r=Lkt(i.geometry,s.geometry,n)})}),r}function Lkt(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return!Mkt(e.coordinates,t.coordinates);case"LineString":return!DEe(t,e);case"Polygon":return!Mu(e,t)}break;case"LineString":switch(t.type){case"Point":return!DEe(e,t);case"LineString":return!Rkt(e,t,n);case"Polygon":return!LEe(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!Mu(t,e);case"LineString":return!LEe(e,t,n);case"Polygon":return!Fkt(t,e,n)}}return!1}function DEe(e,t){for(let n=0;n<e.coordinates.length-1;n++)if(Okt(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Rkt(e,t,n){return FB(e,t,{ignoreSelfIntersections:n}).features.length>0}function LEe(e,t,n){for(const i of t.coordinates)if(Mu(i,e))return!0;return FB(t,T$(e),{ignoreSelfIntersections:n}).features.length>0}function Fkt(e,t,n){for(const i of e.coordinates[0])if(Mu(i,t))return!0;for(const i of t.coordinates[0])if(Mu(i,e))return!0;return FB(T$(e),T$(t),{ignoreSelfIntersections:n}).features.length>0}function Okt(e,t,n){const r=n[0]-e[0],i=n[1]-e[1],s=t[0]-e[0],o=t[1]-e[1];return r*o-i*s!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:o>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function Mkt(e,t){return e[0]===t[0]&&e[1]===t[1]}function $kt(e,t,{ignoreSelfIntersections:n=!0}={}){let r=!1;return rT(e,i=>{rT(t,s=>{if(r===!0)return!0;r=!Dkt(i.geometry,s.geometry,{ignoreSelfIntersections:n})})}),r}var Ikt=$kt;function iT(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return fIe(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function sT(e,t,n={}){const r=lIe(e),i=gkt(t);for(let s=0;s<i.length-1;s++){let o=!1;if(n.ignoreEndVertices&&(s===0&&(o="start"),s===i.length-2&&(o="end"),s===0&&s+1===i.length-1&&(o="both")),Pkt(i[s],i[s+1],r,o,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function Pkt(e,t,n,r,i){const s=n[0],o=n[1],a=e[0],l=e[1],u=t[0],f=t[1],c=n[0]-a,d=n[1]-l,h=u-a,p=f-l,g=c*p-d*h;if(i!==null){if(Math.abs(g)>i)return!1}else if(g!==0)return!1;if(Math.abs(h)===Math.abs(p)&&Math.abs(h)===0)return r?!1:n[0]===e[0]&&n[1]===e[1];if(r){if(r==="start")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<=u:u<=s&&s<a:p>0?l<o&&o<=f:f<=o&&o<l;if(r==="end")return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<u:u<s&&s<=a:p>0?l<=o&&o<f:f<o&&o<=l;if(r==="both")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<u:u<s&&s<a:p>0?l<o&&o<f:f<o&&o<l}else return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<=u:u<=s&&s<=a:p>0?l<=o&&o<=f:f<=o&&o<=l;return!1}function Nkt(e,t){var n=$1(e),r=$1(t),i=n.type,s=r.type;switch(i){case"Point":switch(s){case"MultiPoint":return Bkt(n,r);case"LineString":return sT(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Mu(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return zkt(n,r);case"LineString":return jkt(n,r);case"Polygon":case"MultiPolygon":return Ukt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return qkt(n,r);case"Polygon":case"MultiPolygon":return Hkt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return Gkt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Bkt(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(pIe(t.coordinates[n],e.coordinates)){r=!0;break}return r}function zkt(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)pIe(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function jkt(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!sT(e.coordinates[r],t))return!1;n||(n=sT(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}function Ukt(e,t){for(var n=!0,r=!1,i=0;i<e.coordinates.length;i++){if(r=Mu(e.coordinates[i],t),!r){n=!1;break}r=Mu(e.coordinates[i],t,{ignoreBoundary:!0})}return n&&r}function qkt(e,t){for(var n=0;n<e.coordinates.length;n++)if(!sT(e.coordinates[n],t))return!1;return!0}function Hkt(e,t){var n=iT(t),r=iT(e);if(!hIe(n,r))return!1;for(var i=!1,s=0;s<e.coordinates.length;s++){if(!Mu(e.coordinates[s],t))return!1;if(i||(i=Mu(e.coordinates[s],t,{ignoreBoundary:!0})),!i&&s<e.coordinates.length-1){var o=Vkt(e.coordinates[s],e.coordinates[s+1]);i=Mu(o,t,{ignoreBoundary:!0})}}return i}function Gkt(e,t){var n=iT(e),r=iT(t);if(!hIe(r,n))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Mu(e.coordinates[0][i],t))return!1;return!0}function hIe(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function pIe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Vkt(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var Wkt=Nkt;const Ykt=(e,t)=>t?Ikt(e,t):!0,Xkt=(e,t)=>t?Wkt(e,t):!0;function Zkt(e,t="highlight",n="title"){const r=(s,o,a)=>{const l=o.split(".");let u;for(u=0;u<l.length-1;u++)s=s[l[u]];s[l[u]]=a},i=(s,o=[])=>{let a="",l=0;return o.forEach(u=>{const f=u[1]+1;a+=[s.substring(l,u[0]),`<mark class="${t}">`,s.substring(u[0],f),"</mark>"].join(""),l=f}),a+=s.substring(l),a};return e.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={...s};return o.forEach(l=>{l.key===n&&r(a,l.key,i(l.value,l.indices))}),a})}var ZC={exports:{}},Kkt=ZC.exports,REe;function Jkt(){return REe||(REe=1,function(e,t){(function(n,r){e.exports=r()})(Kkt,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",f="week",c="month",d="quarter",h="year",p="date",g="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var I=["th","st","nd","rd"],U=$%100;return"["+$+(I[(U-20)%10]||I[U]||I[0])+"]"}},w=function($,I,U){var q=String($);return!q||q.length>=I?$:""+Array(I+1-q.length).join(U)+$},_={s:w,z:function($){var I=-$.utcOffset(),U=Math.abs(I),q=Math.floor(U/60),Y=U%60;return(I<=0?"+":"-")+w(q,2,"0")+":"+w(Y,2,"0")},m:function $(I,U){if(I.date()<U.date())return-$(U,I);var q=12*(U.year()-I.year())+(U.month()-I.month()),Y=I.clone().add(q,c),X=U-Y<0,te=I.clone().add(q+(X?-1:1),c);return+(-(q+(U-Y)/(X?Y-te:te-Y))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:c,y:h,w:f,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},A="en",T={};T[A]=y;var D="$isDayjsObject",k=function($){return $ instanceof K||!(!$||!$[D])},R=function $(I,U,q){var Y;if(!I)return A;if(typeof I=="string"){var X=I.toLowerCase();T[X]&&(Y=X),U&&(T[X]=U,Y=X);var te=I.split("-");if(!Y&&te.length>1)return $(te[0])}else{var le=I.name;T[le]=I,Y=le}return!q&&Y&&(A=Y),Y||!q&&A},O=function($,I){if(k($))return $.clone();var U=typeof I=="object"?I:{};return U.date=$,U.args=arguments,new K(U)},B=_;B.l=R,B.i=k,B.w=function($,I){return O($,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var K=function(){function $(U){this.$L=R(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[D]=!0}var I=$.prototype;return I.parse=function(U){this.$d=function(q){var Y=q.date,X=q.utc;if(Y===null)return new Date(NaN);if(B.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var te=Y.match(v);if(te){var le=te[2]-1||0,ee=(te[7]||"0").substring(0,3);return X?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)}}return new Date(Y)}(U),this.init()},I.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},I.$utils=function(){return B},I.isValid=function(){return this.$d.toString()!==g},I.isSame=function(U,q){var Y=O(U);return this.startOf(q)<=Y&&Y<=this.endOf(q)},I.isAfter=function(U,q){return O(U)<this.startOf(q)},I.isBefore=function(U,q){return this.endOf(q)<O(U)},I.$g=function(U,q,Y){return B.u(U)?this[q]:this.set(Y,U)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(U,q){var Y=this,X=!!B.u(q)||q,te=B.p(U),le=function(we,Ie){var qe=B.w(Y.$u?Date.UTC(Y.$y,Ie,we):new Date(Y.$y,Ie,we),Y);return X?qe:qe.endOf(u)},ee=function(we,Ie){return B.w(Y.toDate()[we].apply(Y.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Ie)),Y)},z=this.$W,he=this.$M,de=this.$D,ze="set"+(this.$u?"UTC":"");switch(te){case h:return X?le(1,0):le(31,11);case c:return X?le(1,he):le(0,he+1);case f:var He=this.$locale().weekStart||0,je=(z<He?z+7:z)-He;return le(X?de-je:de+(6-je),he);case u:case p:return ee(ze+"Hours",0);case l:return ee(ze+"Minutes",1);case a:return ee(ze+"Seconds",2);case o:return ee(ze+"Milliseconds",3);default:return this.clone()}},I.endOf=function(U){return this.startOf(U,!1)},I.$set=function(U,q){var Y,X=B.p(U),te="set"+(this.$u?"UTC":""),le=(Y={},Y[u]=te+"Date",Y[p]=te+"Date",Y[c]=te+"Month",Y[h]=te+"FullYear",Y[l]=te+"Hours",Y[a]=te+"Minutes",Y[o]=te+"Seconds",Y[s]=te+"Milliseconds",Y)[X],ee=X===u?this.$D+(q-this.$W):q;if(X===c||X===h){var z=this.clone().set(p,1);z.$d[le](ee),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else le&&this.$d[le](ee);return this.init(),this},I.set=function(U,q){return this.clone().$set(U,q)},I.get=function(U){return this[B.p(U)]()},I.add=function(U,q){var Y,X=this;U=Number(U);var te=B.p(q),le=function(he){var de=O(X);return B.w(de.date(de.date()+Math.round(he*U)),X)};if(te===c)return this.set(c,this.$M+U);if(te===h)return this.set(h,this.$y+U);if(te===u)return le(1);if(te===f)return le(7);var ee=(Y={},Y[a]=r,Y[l]=i,Y[o]=n,Y)[te]||1,z=this.$d.getTime()+U*ee;return B.w(z,this)},I.subtract=function(U,q){return this.add(-1*U,q)},I.format=function(U){var q=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||g;var X=U||"YYYY-MM-DDTHH:mm:ssZ",te=B.z(this),le=this.$H,ee=this.$m,z=this.$M,he=Y.weekdays,de=Y.months,ze=Y.meridiem,He=function(Ie,qe,Pe,At){return Ie&&(Ie[qe]||Ie(q,X))||Pe[qe].slice(0,At)},je=function(Ie){return B.s(le%12||12,Ie,"0")},we=ze||function(Ie,qe,Pe){var At=Ie<12?"AM":"PM";return Pe?At.toLowerCase():At};return X.replace(x,function(Ie,qe){return qe||function(Pe){switch(Pe){case"YY":return String(q.$y).slice(-2);case"YYYY":return B.s(q.$y,4,"0");case"M":return z+1;case"MM":return B.s(z+1,2,"0");case"MMM":return He(Y.monthsShort,z,de,3);case"MMMM":return He(de,z);case"D":return q.$D;case"DD":return B.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return He(Y.weekdaysMin,q.$W,he,2);case"ddd":return He(Y.weekdaysShort,q.$W,he,3);case"dddd":return he[q.$W];case"H":return String(le);case"HH":return B.s(le,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return we(le,ee,!0);case"A":return we(le,ee,!1);case"m":return String(ee);case"mm":return B.s(ee,2,"0");case"s":return String(q.$s);case"ss":return B.s(q.$s,2,"0");case"SSS":return B.s(q.$ms,3,"0");case"Z":return te}return null}(Ie)||te.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(U,q,Y){var X,te=this,le=B.p(q),ee=O(U),z=(ee.utcOffset()-this.utcOffset())*r,he=this-ee,de=function(){return B.m(te,ee)};switch(le){case h:X=de()/12;break;case c:X=de();break;case d:X=de()/3;break;case f:X=(he-z)/6048e5;break;case u:X=(he-z)/864e5;break;case l:X=he/i;break;case a:X=he/r;break;case o:X=he/n;break;default:X=he}return Y?X:B.a(X)},I.daysInMonth=function(){return this.endOf(c).$D},I.$locale=function(){return T[this.$L]},I.locale=function(U,q){if(!U)return this.$L;var Y=this.clone(),X=R(U,q,!0);return X&&(Y.$L=X),Y},I.clone=function(){return B.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},$}(),L=K.prototype;return O.prototype=L,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",c],["$y",h],["$D",p]].forEach(function($){L[$[1]]=function(I){return this.$g(I,$[0],$[1])}}),O.extend=function($,I){return $.$i||($(I,K,O),$.$i=!0),O},O.locale=R,O.isDayjs=k,O.unix=function($){return O(1e3*$)},O.en=T[A],O.Ls=T,O.p={},O})}(ZC)),ZC.exports}var Qkt=Jkt();const kc=sa(Qkt);let mIe;const eTt=(e,t)=>{mIe=new Sm(e,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...t})},tTt=async(e,t,n)=>{const r=Object.entries(t).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const f="$or",c=[],d=(h,p)=>{const g={};u.type==="text"?g[h]=`${p}`:g[l]=`="${h}"`,c.push(g)};return Object.entries(u.state).filter(([,h])=>h).forEach(([h,p])=>d(h,p)),c.length>0&&a.push({[f]:c}),a},[]);let i;if(!(r.length>0)&&n.matchAllWhenEmpty!==!1)i=e;else{const a={$and:[...r]},l=mIe.search(a);i=n.enableHighlighting?Zkt(l,"highlight",n.titleProperty):l.map(u=>u.item)}const s=Object.entries(t).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const[f,c]of Object.entries(s)){const d=p=>c.format==="date"?kc(p).unix():p,h=O2(f,i[l]);h?Array.isArray(h)?u[f]=s[f].min<=d(h[1])&&d(h[0])<=s[f].max:d(h)>=s[f].min&&d(h)<=s[f].max?u[f]=!0:u[f]=!1:u[f]=!0}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}const o=Object.entries(t).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const f of Object.keys(o)){const c=O2(f,i[l]),d=o[f].mode||"within";c&&(d==="within"?Xkt(c,o[f].geometry):Ykt(c,o[f].geometry))?u[f]=!0:u[f]=!1}Object.values(u).every(f=>!!f)&&a.push(i[l])}i=[...a]}return i};function nTt(e,t){return[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...e&&{format:"GeoJSON"},...e&&{url:t}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://tiles.maps.eox.at/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}]}function $R(e){if(!e.dirty)return null;switch(e.type){case"multiselect":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"range":e.state.min=e.min,e.state.max=e.max;break;case"select":for(const n in e.state)e.state.hasOwnProperty(n)&&(e.state[n]=!1);break;case"spatial":e.state.geometry=void 0;break;case"text":e.keys.forEach(n=>{e.state[n]=void 0});break}return delete e.stringifiedState,delete e.dirty,e}function FEe(e,t){return e*2+t}function rTt(e){return Object.keys(e).map(t=>({title:Ke`${e[t].title||e[t].key}:
        <strong>${e[t].stringifiedState}</strong>`,key:t})).filter(t=>e[t.key].dirty)}function D$(e){return Object.values(e).map(t=>t.dirty).filter(t=>t).length>0}async function iTt(e,t,n){return await(await fetch(`${n.externalFilter(e,t)}`)).json()}function gIe(e,t,n){let r;if(e.detail?r=e.detail.target:r=e.target,r!=null&&r.classList.contains("details-filter")){if(!r.open||t!=null&&t.expandMultipleFilters)return;n.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(i=>{const s=i.shadowRoot.querySelector(".details-filter");s&&s!==r&&s.removeAttribute("open")})}else{if(!(r!=null&&r.open)||t!=null&&t.expandMultipleResults)return;n.querySelectorAll("details").forEach(i=>{i!==r&&i.removeAttribute("open")})}}function O2(e,t){return e!=null&&e.includes(".")?e.split(".").reduce((n,r)=>n&&n[r],t):t[e]}var Hi,yIe,L$,R$,vIe,F$,O$,bIe,M$,xIe,wIe;class sTt extends Zr{constructor(){super();gn(this,Hi);this.filterProperties={},this.unstyled=!1,this.inlineMode=!1,this.filters={},this._handleClickOutside=dn(this,Hi,vIe).bind(this),this._handleKeyDown=dn(this,Hi,F$).bind(this)}static get properties(){return{filterProperties:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},unstyled:{type:Boolean},filters:{state:!0,type:Object}}}set showDropdown(n){this.renderRoot.querySelector("[popover]").togglePopover(n)}get showDropdown(){var n;return(n=this.renderRoot.querySelector("[popover]"))==null?void 0:n.matches(":popover-open")}connectedCallback(){super.connectedCallback(),this.inlineMode&&dn(this,Hi,L$).call(this)}disconnectedCallback(){this.inlineMode&&dn(this,Hi,R$).call(this),super.disconnectedCallback()}_overlayCleanup(){}updateInline(){this.inlineMode&&this.requestUpdate()}updated(n){n.has("inlineMode")&&(this.inlineMode?dn(this,Hi,L$).call(this):dn(this,Hi,R$).call(this))}render(){return Ke`
      <style>
        ${!this.unstyled&&sS}
      </style>
      ${this.inlineMode?Ke`
            <div
              class="inline-container-wrapper"
              @click="${dn(this,Hi,O$)}"
            >
              <div class="inline-container" part="container">
                <div class="chip-container">
                  <div class="chip-wrapper">
                    <eox-itemfilter-chips
                      .items=${rTt(this.filters)}
                      .controller=${{remove:n=>dn(this,Hi,xIe).call(this,n)}}
                    >
                    </eox-itemfilter-chips>
                  </div>

                  ${Un(D$(this.filters),()=>Ke`
                      <span
                        class="chip-close"
                        @click=${()=>this.dispatchEvent(new CustomEvent("reset"))}
                      ></span>
                    `)}
                </div>
                <div
                  class="input-container ${D$(this.filters)?"dirty-filter-input":""}"
                >
                  <input
                    autocomplete="off"
                    id="eox-itemfilter-input-search"
                    type="text"
                    @click="${dn(this,Hi,O$)}"
                    @focus="${dn(this,Hi,bIe)}"
                    @input="${dn(this,Hi,wIe)}"
                    placeholder="Search and add filter"
                    aria-haspopup="true"
                    aria-expanded="${this.showDropdown}"
                  />
                </div>
              </div>
              <div popover="manual">
                <div
                  class="inline-content"
                  slot="content"
                  @keydown="${dn(this,Hi,F$)}"
                  @click="${dn(this,Hi,M$)}"
                  @focus="${dn(this,Hi,M$)}"
                >
                  <slot name="section"></slot>
                </div>
              </div>
            </div>
          `:Ke`<slot name="section"></slot>`}
    `}}Hi=new WeakSet,yIe=function(){setTimeout(()=>this._overlayCleanup=okt(this))},L$=function(){document.addEventListener("click",this._handleClickOutside),document.addEventListener("focusout",this._handleClickOutside),document.addEventListener("keydown",this._handleKeyDown),dn(this,Hi,yIe).call(this)},R$=function(){document.removeEventListener("click",this._handleClickOutside),document.removeEventListener("focusout",this._handleClickOutside),document.removeEventListener("keydown",this._handleKeyDown),this._overlayCleanup()},vIe=function(n){fkt(n,this)},F$=function(n){ckt(n,this)},O$=function(n){ukt(n,this)},bIe=function(){lkt(this)},M$=function(n){akt(n,this)},xIe=function(n){$3t(n,this)},wIe=function(n){X$e(n,this)};customElements.define("eox-itemfilter-container",sTt);function oTt(e){const t=e.renderRoot.querySelector("input[type='text']");t.value="",$R(e.filterObject),e.requestUpdate()}function aTt(e){const t=e.renderRoot.querySelector("input[type='text']");e.isValid=t.checkValidity(),e.filterObject.keys.forEach(n=>{e.filterObject.state[n]=t.value}),e.filterObject.dirty=!0,e.filterObject.stringifiedState=t.value,e.dispatchEvent(new CustomEvent("filter")),t.value===""&&e.reset()}const $$="ddd, D MMM YYYY HH:mm:ss";function lTt(e){if(e.filterObject=$R(e.filterObject),e.filterObject){const t=e.querySelector("tc-range-slider"),n=e.filterObject.min,r=e.filterObject.max;t.value1!==n&&(t.value1=n),t.value2!==r&&(t.value2=r)}e.requestUpdate()}function uTt(e,t){const[n,r]=e.detail.values;(n!==t.filterObject.state.min||r!==t.filterObject.state.max)&&([t.filterObject.state.min,t.filterObject.state.max]=[n,r],t.filterObject.dirty=!0),t.filterObject.dirty&&(t.filterObject.stringifiedState=t.filterObject.format==="date"?`${kc.unix(n).format($$)} - ${kc.unix(r).format($$)}`:`${n} - ${r}`),t.dispatchEvent(new CustomEvent("filter")),n===t.filterObject.min&&r===t.filterObject.max?t.reset():t.requestUpdate()}function cTt(e,t,n){const r=n.filterObject.format==="date",i=n.filterObject.state[e],s=r?kc.unix(i).format($$):i;return Ke`<div class="range-${t}">${s}</div>`}function fTt(e){dTt(-1,e),$R(e.filterObject),e.requestUpdate()}function dTt(e,t){t.selectedItems=[],OB(t),EIe(t)}function _Ie(e,t){const n=t.selectedItems.indexOf(e);n>=0?t.selectedItems=t.selectedItems.filter((r,i)=>i!==n):t.type==="multiselect"?t.selectedItems=[...t.selectedItems,e]:(t.selectedItems=[e],t.showSuggestions=!1),OB(t),EIe(t)}function hTt(e,t){t.query=e.target.value,t.showSuggestions=!0}function pTt(e,t){switch(e.key){case"ArrowDown":t.highlightedIndex=Math.min(t.highlightedIndex+1,t.filteredSuggestions.length-1);break;case"ArrowUp":t.highlightedIndex=Math.max(t.highlightedIndex-1,0);break;case"Enter":t.highlightedIndex>=0&&_Ie(t.filteredSuggestions[t.highlightedIndex],t);break;case"Escape":t.showSuggestions=!1;break}}function mTt(e,t){(e.has("suggestions")||e.has("query"))&&OB(t)}function gTt(e,t){var r;const n=((r=e.filterObject)==null?void 0:r.sort)||((i,s)=>i.localeCompare(s));return t.sort(n).map(i=>i)}function OB(e){var n,r,i;let t;e.query&&(t=new Sm(e.suggestions,{threshold:.4}).search(e.query).map(o=>o.item)),e.filteredSuggestions=gTt(e,t||e.suggestions),(n=e.filterObject)!=null&&n.filterKeys&&(e.filteredSuggestions=(r=e.filterObject)==null?void 0:r.filterKeys.map(s=>`${s}`),e.filterObject.state=(i=e.filterObject)==null?void 0:i.filterKeys.map(s=>`${s}`).reduce((s,o)=>(o in s||(s[o]=void 0),s),e.filterObject.state)),e.highlightedIndex=-1}function EIe(e){Object.keys(e.filterObject.state).forEach(t=>{e.filterObject.state[t]=e.selectedItems.includes(t)}),e.filterObject.stringifiedState=Object.keys(e.filterObject.state).filter(t=>e.filterObject.state[t]).join(", ")||"",e.filterObject.dirty=e.filterObject.stringifiedState.length>0,e.dispatchEvent(new CustomEvent("filter")),e.requestUpdate()}function yTt(e){$R(e.filterObject),e.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),e.requestUpdate()}function vTt(e){e.renderRoot.querySelector("#eox-map").innerHTML="",SIe(e)}function bTt(e,t){t.filterObject.state.mode=e;const n=new CustomEvent("filter",{detail:{[t.filterObject.key]:{}}});t.dispatchEvent(n)}function SIe(e){const t=e.renderRoot.querySelector("#eox-map");t.innerHTML===""&&(t.innerHTML='<eox-map part="map" style="height: 400px"></eox-map>');const n=e.geometry&&xTt(e.geometry),r=nTt(e.geometry,n);e.eoxMap=e.renderRoot.querySelector("eox-map"),setTimeout(()=>{e.eoxMap.layers=r;const i=s=>{const o=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:s.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});e.dispatchEvent(o)};e.eoxMap.interactions.drawInteraction.on("drawend",s=>{i(s.feature),e.eoxMap.removeInteraction("drawInteraction")}),e.eoxMap.interactions.drawInteraction_modify.on("modifyend",s=>{i(s.features.getArray()[0])})},1e3)}function xTt(e){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:e}]}))}`}var $T;class wTt extends Zr{constructor(){super();gn(this,$T,()=>{aTt(this)});tn(this,"debouncedInputHandler",Y0($t(this,$T),500,{leading:!0}));this.filterObject={},this.unstyled=!1,this.tabIndex=0,this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number},unstyled:{type:Boolean},isValid:{state:!0,type:Boolean}}}reset(){oTt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Ke`
        <style></style>
        <div class="text-container">
          <div class="text-container-wrapper">
            <input
              type="text"
              placeholder=${this.filterObject.placeholder}
              data-cy="search"
              class="text-input"
              part="input-search"
              value="${Object.values(this.filterObject.state)[0]}"
              tabindex=${this.tabIndex}
              pattern="${((n=this.filterObject.validation)==null?void 0:n.pattern)||".*"}"
              @input="${this.debouncedInputHandler}"
              @click=${r=>r.stopPropagation()}
            />
          </div>
        </div>
        <small class="error-validation"
          >${this.filterObject.validation&&this.isValid===!1?this.filterObject.validation.message:""}</small
        >
      `})}}$T=new WeakMap;customElements.define("eox-itemfilter-text",wTt);function _Tt(e,t,n){return e.filter(r=>{const i=r[n.config.aggregateResults];let s;return n.filters[n.config.aggregateResults]&&(s=Object.keys(n.filters[n.config.aggregateResults]).filter(a=>n.filters[n.config.aggregateResults].state[a])),(s!=null&&s.length?s.includes(t):!0)&&Array.isArray(i)?i.includes(t):i===t})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const OEe=(e,t,n)=>{const r=new Map;for(let i=t;i<=n;i++)r.set(e[i],i);return r},AIe=tE(class extends fD{constructor(e){if(super(e),e.type!==sp.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const i=[],s=[];let o=0;for(const a of e)i[o]=r?r(a,o):o,s[o]=n(a,o),o++;return{values:s,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,r]){const i=tze(e),{values:s,keys:o}=this.dt(t,n,r);if(!Array.isArray(i))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let u,f,c=0,d=i.length-1,h=0,p=s.length-1;for(;c<=d&&h<=p;)if(i[c]===null)c++;else if(i[d]===null)d--;else if(a[c]===o[h])l[h]=ng(i[c],s[h]),c++,h++;else if(a[d]===o[p])l[p]=ng(i[d],s[p]),d--,p--;else if(a[c]===o[p])l[p]=ng(i[c],s[p]),iw(e,l[p+1],i[c]),c++,p--;else if(a[d]===o[h])l[h]=ng(i[d],s[h]),iw(e,i[c],i[d]),d--,h++;else if(u===void 0&&(u=OEe(o,h,p),f=OEe(a,c,d)),u.has(a[c]))if(u.has(a[d])){const g=f.get(o[h]),v=g!==void 0?i[g]:null;if(v===null){const x=iw(e,i[c]);ng(x,s[h]),l[h]=x}else l[h]=ng(v,s[h]),iw(e,i[c],v),i[g]=null;h++}else rF(i[d]),d--;else rF(i[c]),c++;for(;h<=p;){const g=iw(e,l[p+1]);ng(g,s[h]),l[h++]=g}for(;c<=d;){const g=i[c++];g!==null&&rF(g)}return this.ut=o,dI(e,l),fv}});function ETt(e,t){return Ke`
    <details
      class="details-results"
      @toggle=${t.handleAccordion}
      ?open=${t.config.expandResults||qr}
    >
      <summary>
        <span class="title">
          ${e}
          <span class="count"
            >${t.aggregateResults(t.results,e).length}</span
          >
        </span>
      </summary>
      <div>
        ${CIe(e,t)}
      </div>
    </details>
  `}function CIe(e,t){const n=t.results,r=e?t.aggregateResults(n,e):n,i=t.config,s=o=>{var a;return((a=t.selectedResult)==null?void 0:a[i.idProperty])===o[i.idProperty]?"highlighted":qr};return Ke`
    <ul class=${t.resultType}>
      ${AIe(r,o=>o.id,o=>Ke`
          <li
            class=${s(o)}
            @click=${()=>{t.selectedResult===o?t.selectedResult=null:t.selectedResult=o,t.dispatchEvent(new CustomEvent("result",{detail:t.selectedResult}))}}
          >
            <span id="${o.id}">
              ${Un(i.subTitleProperty||i.imageProperty,()=>Ke`
                  ${O2(i.imageProperty,o)?Ke`
                        <img
                          class="image"
                          src="${O2(i.imageProperty,o)}"
                        />
                      `:Ke`
                        <svg
                          class="image"
                          width="800"
                          height="600"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <rect
                            width="800"
                            height="600"
                            fill="var(--primary-color)"
                          />
                        </svg>
                      `}
                  <div class="title-container">
                    <span class="title"
                      >${Cc(o[i.titleProperty])}</span
                    >
                    <span class="subtitle"
                      >${Cc(o[i.subTitleProperty])}</span
                    >
                  </div>
                `,()=>Ke`
                  <span class="title"
                    >${Cc(o[i.titleProperty])}</span
                  >
                `)}
            </span>
          </li>
        `)}
    </ul>
  `}var C0,I$,kIe;class STt extends Zr{constructor(){super();gn(this,C0);this.config=null,this.filters={},this.resultAggregation=[],this.selectedResult=null,this.resultType="list"}static get properties(){return{config:{attribute:!1,type:Object},results:{state:!0,type:Object},filters:{state:!0,type:Object},resultAggregation:{attribute:!1,type:Array},selectedResult:{state:!0,type:Object},resultType:{attribute:"result-type",type:String}}}aggregateResults(n,r){return _Tt(n,r,this)}createRenderRoot(){return this}handleAccordion(n){gIe(n,this.config,this)}render(){return Ke`
      <section id="section-results">
        <div slot="resultstitle"></div>
        <div id="container-results" class="scroll">
          ${Un(this.results.length<1,()=>Ke`<small class="no-results">No matching items</small>`,()=>qr)}
          <ul id="results" part="results">
            ${Un(this.config.aggregateResults,()=>su(this.resultAggregation.filter(n=>this.aggregateResults(this.results,n).length),n=>Ke`${Un(this.aggregateResults(this.results,n).length===1&&this.config.autoSpreadSingle,()=>Ke`<div style="margin-left: -8px">
                          ${dn(this,C0,I$).call(this,n)}
                        </div>`,()=>dn(this,C0,kIe).call(this,n))}`),()=>dn(this,C0,I$).call(this))}
          </ul>
        </div>
      </section>
    `}}C0=new WeakSet,I$=function(n){return CIe(n,this)},kIe=function(n){return ETt(n,this)};customElements.define("eox-itemfilter-results",STt);const IR=`input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}`,MB=`input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}`;var am,DIe,LIe,RIe;class TIe extends Zr{constructor(){super();gn(this,am);tn(this,"debouncedInputHandler",Y0(dn(this,am,RIe),500,{leading:!0}));this.filterObject={},this.suggestions=[],this.selectedItems=[],this.query="",this.showSuggestions=!1,this.highlightedIndex=-1,this.filteredSuggestions=[],this.type="select",this.unstyled=!1,this.tabIndex=0,this.inlineMode=!1}updated(n){mTt(n,this)}reset(){fTt(this)}firstUpdated(){this.filterObject.state&&(this.selectedItems=Object.keys(this.filterObject.state).map(n=>this.filterObject.state[n]?n:null).filter(n=>!!n),this.filterObject.stringifiedState=this.selectedItems.join(", ")||"",this.requestUpdate())}render(){const n=this.type.includes("multi")?"checkbox":"radio",r=this.filteredSuggestions.length>5?"select-overflow":qr;return Ke`
      <style>
        ${!this.unstyled&&sS}
        ${!this.unstyled&&IR}
        ${!this.unstyled&&MB}
      </style>
      ${Un(this.suggestions.length>10,()=>Ke`<div class="autocomplete-container">
            <div class="autocomplete-container-wrapper">
              <input
                autocomplete="off"
                tabindex=${this.tabIndex}
                class="autocomplete-input"
                type="text"
                .value=${this.query}
                placeholder="${this.filterObject.placeholder||""}"
                @input=${dn(this,am,DIe)}
                @keydown=${dn(this,am,LIe)}
                @blur=${()=>this.showSuggestions=!1}
                @focus=${()=>this.showSuggestions=!0}
              />
            </div>
          </div>`)}
      <div class="select-container ${r}">
        <ul class="${this.type}">
          ${this.filteredSuggestions.map(i=>Ke`
              <li
                data-identifier="${i.toString().toLowerCase()}"
                data-title="${i}"
              >
                <label>
                  <input
                    type="${n}"
                    name=${i}
                    .checked=${this.selectedItems.includes(i)}
                    @change=${()=>this.debouncedInputHandler(i)}
                    @keydown=${s=>{s.key===" "&&this.inlineMode&&this.debouncedInputHandler(i)}}
                    tabindex=${this.tabIndex+1}
                  />
                  <span class="title">${i}</span>
                </label>
              </li>
            `)}
        </ul>
      </div>
    `}}am=new WeakSet,DIe=function(n){hTt(n,this)},LIe=function(n){pTt(n,this)},RIe=function(n){_Ie(n,this)},tn(TIe,"properties",{filterObject:{attribute:!1,type:Object},suggestions:{attribute:!1,type:Array},selectedItems:{state:!0,type:Array},query:{state:!0,type:String},showSuggestions:{state:!0,type:Boolean},highlightedIndex:{state:!0,type:Number},filteredSuggestions:{state:!0,type:Array},type:{attribute:!0,type:String},unstyled:{type:Boolean},tabIndex:{attribute:!1,type:Number},inlineMode:{attribute:"inline-mode",type:Boolean}});customElements.define("eox-itemfilter-select",TIe);(()=>{var e=Object.defineProperty,t=Math.pow,n=(ge,Le,it)=>Le in ge?e(ge,Le,{enumerable:!0,configurable:!0,writable:!0,value:it}):ge[Le]=it,r=(ge,Le,it)=>(n(ge,typeof Le!="symbol"?Le+"":Le,it),it),i=(ge,Le)=>` ${Le&&Le.length>0?Le.map(it=>`<link rel="stylesheet" href="${it}" />`).join(""):""} <style> ${ge} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",f="data",c="min",d="max",h="step",p="round",g="type",v="theme",x="rtl",y="btt",w="disabled",_="keyboard-disabled",A="mousewheel-disabled",T="slider-width",D="slider-height",k="slider-radius",R="slider-bg",O="slider-bg-hover",B="slider-bg-fill",K="pointer-width",L="pointer-height",$="pointer-radius",I="pointer-bg",U="pointer-bg-hover",q="pointer-bg-focus",Y="pointer-shadow",X="pointer-shadow-hover",te="pointer-shadow-focus",le="pointer-border",ee="pointer-border-hover",z="pointer-border-focus",he="animate-onclick",de="css-links",ze="vertical",He="horizontal",je=(ge,Le,it,Je,Et)=>{let an=Le-ge;return an===0?it:(Je-it)*(Et-ge)/an+it},we=ge=>!isNaN(parseFloat(ge))&&isFinite(ge),Ie=(ge,Le)=>we(ge)?Number(ge):Le,qe=(ge,Le)=>Le===0?0:Math.round(ge/Le)*Le,Pe=(ge,Le=1/0)=>{if(Le===1/0)return ge;let it=t(10,Le);return Math.round(ge*it)/it},At=ge=>ge==null?!1:typeof ge=="boolean"?ge:ge.trim().toLowerCase()==="true",dt=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Le}}))},nn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Le}}))},Wt=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Le}}))},Mn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Le}}))},Ze=(ge,Le)=>{if(!Le||Le.length<=0)return;let it=Le.map(Et=>we(Et)?Ie(Et,Et):Et),Je={values:it||[]};Je.value=it[0],Je.value0=it[0],Je.value1=it[0];for(let Et=1;Et<it.length;Et++)Je[`value${Et+1}`]=it[Et];ge.dispatchEvent(new CustomEvent("change",{detail:Je}))},pe=(ge,Le,it)=>{let Je=0,Et,an,en,xt,et=!1,pn=(ht,Xn,ni,Ar,Rr,nr)=>{let Gt=Je;ni!==void 0&&ht>ni&&(ht=ni),Xn!==void 0&&ht<Xn&&(ht=Xn),Je=ht;let vi=Je;return(Ar===ze&&nr||Ar===He&&Rr)&&(vi=100-vi),Ar===ze?Le.style.top=`${vi}%`:Le.style.left=`${vi}%`,Gt!==Je},Cn=ht=>ht===Le||Le.contains(ht),Ut=(ht,Xn,ni,Ar)=>{Et=ht,an=Xn,en=ni,xt=Ar},qt=ht=>{et=ht,Le.classList.toggle("disabled",et),et?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Sr=(ht,Xn)=>{Xn==null?Le.removeAttribute(ht):Le.setAttribute(ht,Xn)},ci=ht=>Le.getAttribute(ht),Jt=ht=>{if(!et){switch(ht.key){case"ArrowLeft":{ht.preventDefault(),typeof Et=="function"&&Et(it);break}case"ArrowRight":{ht.preventDefault(),typeof an=="function"&&an(it);break}case"ArrowUp":{ht.preventDefault(),typeof en=="function"&&en(it);break}case"ArrowDown":{ht.preventDefault(),typeof xt=="function"&&xt(it);break}}Mn(ge,ht)}},Xe=()=>{et||dt(ge,Le)};return Le.className=`pointer pointer-${it}`,Le.addEventListener("keydown",Jt),Le.addEventListener("click",Xe),{$pointer:Le,get percent(){return Je},get disabled(){return et},set disabled(ht){qt(ht)},updatePosition:pn,isClicked:Cn,setCallbacks:Ut,setAttr:Sr,getAttr:ci,destroy:()=>{Le.removeEventListener("keydown",Jt),Le.removeEventListener("click",Xe),Le.remove()}}},se=ge=>{if(ge==null)return;if(Array.isArray(ge))return ge;if(ge.trim()==="")return;let Le=ge.split(","),it=[],Je=!0;for(let Et=0;Et<Le.length;Et++){let an=Le[Et].trim();an!==""&&(it.push(an),we(an)||(Je=!1))}return Je?it.map(Et=>Number(Et)):it},oe=(ge,Le)=>Le?Le.findIndex(it=>it===ge||it.toString().trim()===ge.toString().trim()):-1,be=ge=>({updatePosition:(Le,it,Je,Et)=>{if(it.length<=0)return;let an=it.length===1,en=it[0],xt=it[it.length-1];Le===ze?(ge.style.removeProperty("width"),ge.style.removeProperty("right"),ge.style.removeProperty("left"),an?ge.style.height=`${en}%`:ge.style.height=`${Math.abs(en-xt)}%`,Et?(ge.style.bottom="0%",an?ge.style.top="auto":ge.style.top=`${Math.min(100-xt,100-en)}%`):(ge.style.bottom="auto",an?ge.style.top="0%":ge.style.top=`${Math.min(en,xt)}%`)):(ge.style.removeProperty("height"),ge.style.removeProperty("top"),ge.style.removeProperty("bottom"),an?ge.style.width=`${en}%`:ge.style.width=`${Math.abs(en-xt)}%`,Je?(ge.style.right="0%",an?ge.style.left="auto":ge.style.left=`${Math.min(100-xt,100-en)}%`):(ge.style.right="auto",an?ge.style.left="0%":ge.style.left=`${Math.min(en,xt)}%`))}}),F="--animate-onclick",H="--width",J="--height",re="--panel-bg-border-radius",ye="--panel-bg",xe="--panel-bg-hover",Re="--panel-bg-fill",P="--pointer-width",Q="--pointer-height",ie="--pointer-border-radius",ae="--pointer-bg",ke="--pointer-bg-hover",Ce="--pointer-bg-focus",Ee="--pointer-shadow",De="--pointer-shadow-hover",Oe="--pointer-shadow-focus",We="--pointer-border",tt="--pointer-border-hover",bt="--pointer-border-focus",Pt=(ge,Le,it)=>{let Je=new Map;for(let Et of ge.attributes){let an=Et.nodeName.trim().toLowerCase();if(!Le.test(an))continue;let en=an.replace(/\D/g,"").trim(),xt=en===""||en==="0"||en==="1"?0:Ie(en,0)-1,et=it&&typeof it=="function"?it(Et.value):Et.value;Je.set(xt,et)}return Je},_t=ge=>{if(!ge)return null;let Le=ge.getAttribute(de);if(!Le)return null;let it=Le.split(";"),Je=[];for(let Et of it)Et.trim()!==""&&Je.push(Et.trim());return Je},Kt=[[H,T,"sliderWidth",null],[J,D,"sliderHeight",null],[re,k,"sliderRadius",null],[ye,R,"sliderBg",null],[xe,O,"sliderBgHover",null],[Re,B,"sliderBgFill",null],[P,K,"pointer#Width",/^pointer([0-9]*)-width$/],[Q,L,"pointer#Height",/^pointer([0-9]*)-height$/],[ie,$,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ae,I,"pointer#Bg",/^pointer([0-9]*)-bg$/],[ke,U,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ce,q,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Ee,Y,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[De,X,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Oe,te,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[We,le,"pointer#Border",/^pointer([0-9]*)-border$/],[tt,ee,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[bt,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],sn=(ge,Le,it)=>{let Je=null,Et=[],an=new Map,en=(Jt,Xe=Le)=>{let ht=[...Xe.classList];for(let Xn of ht)Xn.startsWith(Jt)&&Le.classList.remove(Xn)},xt=()=>{en("shape");let Jt=Le.querySelectorAll(".pointer");for(let Xe of Jt)en("shape",Xe)},et=Jt=>{Je=Jt,en("theme-"),typeof Jt=="string"&&Le.classList.add(`theme-${Jt}`)},pn=()=>{if(xt(),!(Et.length<=0)){Le.classList.add("shape",`shape-${Et[0]}`);for(let Jt=1;Jt<Et.length;Jt++){let Xe=Et[Jt];if(!Xe)continue;let ht=Le.querySelector(`.pointer-${Jt}`);!ht||ht.classList.add("shape",`shape-${Xe}`)}}},Cn=(Jt,Xe)=>{Et[Jt]=Xe,pn()},Ut=()=>{xt();let Jt=Pt(ge,/^pointer([0-9]*)-shape$/);if(!(Jt.size<=0)){for(let Xe of Jt){let ht=Xe[0];Et[ht]=Xe[1]}pn()}},qt=(Jt,Xe)=>`${Jt}-${Xe}`,Sr=(Jt,Xe,ht)=>{let Xn=it[ht];if(!Xn)return;let ni=ht===0?Le:Xn.$pointer;if(Xe==null){an.has(qt(Jt,ht))&&an.delete(qt(Jt,ht)),ni.style.removeProperty(Jt);return}an.set(qt(Jt,ht),Xe),ni.style.setProperty(Jt,Xe)},ci=(Jt,Xe)=>an.get(qt(Jt,Xe));return(()=>{for(let Jt of Kt){let[Xe,ht,Xn,ni]=Jt;if(ni){let Rr=Pt(ge,ni);for(let nr of Rr){let Gt=nr[0],vi=nr[1];Sr(Xe,vi,Gt)}}else{let Rr=ge.getAttribute(ht);Sr(Xe,Rr,0)}let Ar=[];if(Xn.indexOf("#")===-1)Ar.push([Xn,0]);else{Ar.push([Xn.replace("#",""),0]),Ar.push([Xn.replace("#","0"),0]),Ar.push([Xn.replace("#","1"),0]);for(let Rr=1;Rr<it.length;Rr++)Ar.push([Xn.replace("#",(Rr+1).toString()),Rr])}for(let Rr of Ar)try{let nr=Rr[0],Gt=Rr[1];Object.prototype.hasOwnProperty.call(ge,nr)||Object.defineProperty(ge,nr,{get(){return ci(Xe,Gt)},set:vi=>{Sr(Xe,vi,Gt)}})}catch(nr){console.error(nr)}}et(ge.getAttribute(v)),Ut()})(),{setStyle:Sr,getStyle:ci,get theme(){return Je},set theme(Jt){et(Jt)},get pointerShapes(){return Et},setPointerShape:Cn}},rn="animate-on-click",on="range-dragging",vn=(ge,Le,it,Je)=>{let Et=[],an=Cn=>{for(let Ut of Et)Ut.update&&typeof Ut.update=="function"&&Ut.update(Cn)},en=()=>{for(let Cn of Et)Cn.destroy&&typeof Cn.destroy=="function"&&Cn.destroy()},xt=(Cn,Ut)=>{for(let qt of Et)qt.onAttrChange&&typeof qt.onAttrChange=="function"&&qt.onAttrChange(Cn,Ut)},et=Cn=>{if(Cn.gettersAndSetters){for(let Ut of Cn.gettersAndSetters)if(!(!Ut.name||!Ut.attributes))try{Object.prototype.hasOwnProperty.call(ge,Ut.name)||Object.defineProperty(ge,Ut.name,Ut.attributes)}catch(qt){console.error("defineSettersGetters error:",qt)}}},pn=Cn=>{var Ut;if(!Cn.css)return;let qt=(Ut=ge.shadowRoot)==null?void 0:Ut.querySelector("style");!qt||(qt.innerHTML+=Cn.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let Cn of window.tcRangeSliderPlugins){let Ut=Cn();Et.push(Ut),Ut.init&&typeof Ut.init=="function"&&(Ut.init(ge,Le,it,Je),et(Ut),pn(Ut))}},update:an,onAttrChange:xt,destroy:en}},Er=10,Ji=20,ds=(ge,Le)=>{let it=new Map,Je=/^value([0-9]*)$/;for(let xt of ge.attributes){let et=xt.nodeName.trim().toLowerCase();if(!Je.test(et))continue;let pn=et.replace("value","").trim(),Cn=pn===""||pn==="0"||pn==="1"?0:Ie(pn,0)-1,Ut=we(xt.value)?Ie(xt.value,0):xt.value;it.set(Cn,Ut)}let Et=Math.max(...Array.from(it.keys())),an=[];an.push([pe(ge,Le,0),it.get(0)]);let en=Le;for(let xt=1;xt<=Et;xt++){let et=Le.cloneNode(!0);en.after(et),en=et,an.push([pe(ge,et,xt),it.get(xt)])}return an},Gi=(ge,Le,it,Je,Et,an,en)=>{try{Object.defineProperty(ge,Je,{configurable:!0,get(){if(!Le)return;let xt=Le.pointers[it];if(!xt)return;let et=Le.getTextValue(xt.percent);return we(et)?Ie(et,et):et},set:xt=>{Le.pointers[it]?Le==null||Le.setValue(xt,it):Le==null||Le.addPointer(xt)}}),Object.defineProperty(ge,Et,{configurable:!0,get(){var xt,et;return(et=(xt=Le==null?void 0:Le.pointers[it])==null?void 0:xt.getAttr("aria-label"))!=null?et:void 0},set:xt=>{!Le||Le.setAriaLabel(it,xt)}}),Object.defineProperty(ge,an,{configurable:!0,get(){var xt,et;return(et=(xt=Le==null?void 0:Le.styles)==null?void 0:xt.pointerShapes[it])!=null?et:null},set:xt=>{!Le||!Le.styles||Le.styles.setPointerShape(it,xt)}}),Object.defineProperty(ge,en,{configurable:!0,get(){var xt;return(xt=Le==null?void 0:Le.pointers[it].disabled)!=null?xt:!1},set:xt=>{if(!Le)return;let et=Le==null?void 0:Le.pointers[it];!et||(et.disabled=xt)}})}catch(xt){console.error(xt)}},No=(ge,Le)=>{let it=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Je=2;Je<Er;Je++)it.push([`value${Je}`,`ariaLabel${Je}`,`pointer${Je}Shape`,`pointer${Je}Disabled`,Je-1]);for(let Je of it)Gi(ge,Le,Je[4],Je[0],Je[1],Je[2],Je[3])},qn=(ge,Le,it)=>{var Je;let Et=(Je=it.shadowRoot)==null?void 0:Je.querySelector(".container");if(Et)for(let an of ge)Le?Et.prepend(an.$pointer):Et.append(an.$pointer)},Mr=(ge,Le)=>{if(!(!Le||ge.length<=1)){for(let it of ge)it.$pointer.style.zIndex=Ji.toString();Le.$pointer.style.zIndex=(Ji*2).toString()}},Lr=0,yn=100,Kr=2,ir="0.3s",Ni=(ge,Le,it)=>{let Je=it.map(Te=>Te[0]),Et=null,an=null,en=null,xt=null,et=Lr,pn=yn,Cn,Ut,qt=He,Sr=Kr,ci=!1,Jt=!1,Xe=!1,ht=0,Xn=1/0,ni=!1,Ar,Rr,nr=!1,Gt=!1,vi=!1,Qi=ir,bi=[],js=Te=>{nr||(Te.preventDefault&&Te.preventDefault(),bs(Te),window.addEventListener("mousemove",bs),window.addEventListener("mouseup",xo),nn(ge,Te))},xo=Te=>{nr||(Ar=void 0,Rr=void 0,window.removeEventListener("mousemove",bs),window.removeEventListener("mouseup",xo),Qi&&Le.classList.add(rn),Wt(ge,Te))},no=(Te,ut)=>{if(Je.length<=0)return;if(Je.length===1)return Je[0].isClicked(Te)&&Qi&&Le.classList.remove(rn),Je[0];let Yt=es(Te);if(ni){let Pn=ut,ji=Vi(Pn);ji!==void 0&&(Pn=qe(Pn,ji)),Yt?(Ar=Pn,Rr=0,Qi&&Le.classList.remove(rn)):Ar!==void 0&&(Rr=Pn-Ar,Ar=Pn)}if(!Cr(Te)&&!Yt){for(let Pn of Je)if(!(!Pn.isClicked(Te)||Pn.disabled))return Qi&&Le.classList.remove(rn),Pn;for(let Pn of Je)if(Et===Pn)return Pn}let Vn=1/0,mr=null;for(let Pn of Je){if(Pn.disabled)continue;let ji=Math.abs(ut-Pn.percent);ji<Vn&&(Vn=ji,mr=Pn)}return mr},Bo=()=>Je.findIndex(Te=>Et===Te&&!Te.disabled),bs=Te=>{let ut;if(qt===ze){let{height:Vn,top:mr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientY:Te.touches[0].clientY;ut=Math.min(Math.max(0,Pn-mr),Vn)*100/Vn}else{let{width:Vn,left:mr}=Le.getBoundingClientRect(),Pn=Te.type.indexOf("mouse")!==-1?Te.clientX:Te.touches[0].clientX;ut=Math.min(Math.max(0,Pn-mr),Vn)*100/Vn}if((ci||Jt)&&(ut=100-ut),Et=no(Te.target,ut),Et&&Mr(Je,Et),ni&&Je.length>1&&Rr!==void 0){let Vn=Je[0],mr=Je[Je.length-1],Pn=Vn.percent+Rr<0,ji=mr.percent+Rr>100;if(Pn||ji)return;for(let $a=0;$a<Je.length;$a++)sr($a,Je[$a].percent+Rr);return}let Yt=Bo();Yt!==-1&&(sr(Yt,ut),Et==null||Et.$pointer.focus())},Fs=Te=>{if(nr||document.activeElement!==ge||Et!=null&&Et.disabled)return;Te.stopPropagation(),Te.preventDefault();let ut=Te.deltaY<0,Yt=ci||Jt,Vn=ut?!Yt:Yt,mr=Bo();mr!==-1&&(Vn?ro(mr,Je[mr].percent):Os(mr,Je[mr].percent))},zo=Te=>{nr||Gt||(qt===ze?Jt?sr(Te,100):sr(Te,0):ci?Os(Te,Je[Te].percent):ro(Te,Je[Te].percent))},hs=Te=>{nr||Gt||(qt===ze?Jt?sr(Te,0):sr(Te,100):ci?ro(Te,Je[Te].percent):Os(Te,Je[Te].percent))},ol=Te=>{nr||Gt||(qt===ze?Jt?Os(Te,Je[Te].percent):ro(Te,Je[Te].percent):ci?sr(Te,100):sr(Te,0))},al=Te=>{nr||Gt||(qt===ze?Jt?ro(Te,Je[Te].percent):Os(Te,Je[Te].percent):ci?sr(Te,0):sr(Te,100))},Cr=Te=>Te.classList.contains("panel"),es=Te=>Te.classList.contains("panel-fill"),ro=(Te,ut)=>{if(ut===void 0)return;let Yt=Vi(ut);Yt==null&&(Yt=1),ut-=Yt,ut<0&&(ut=0),sr(Te,ut)},Os=(Te,ut)=>{if(ut===void 0)return;let Yt=Vi(ut);Yt==null&&(Yt=1),ut+=Yt,ut>100&&(ut=100),sr(Te,ut)},Us=()=>{!xt||xt.update({percents:Ma(),values:so(),$pointers:Yi(),min:oo(),max:ul(),data:Vt(),step:jo(),round:me(),type:Z(),textMin:io(),textMax:ps(),rightToLeft:Nt(),bottomToTop:In(),pointersOverlap:Ai(),pointersMinDistance:Be(),pointersMaxDistance:gt(),rangeDragging:Jr(),disabled:dr(),keyboardDisabled:kr(),mousewheelDisabled:Ln()})},fa=()=>{Us()},qs=Te=>{if(!(Xe||Je.length<=1||pn===et))if(Te===0){let ut=Xn*100/(pn-et);return Math.max(0,Je[Te+1].percent-ut)}else{let ut=ht*100/(pn-et);return Math.min(Je[Te-1].percent+ut,100)}},ll=Te=>{if(!(Xe||Je.length<=1||pn===et))if(Te===Je.length-1){let ut=Xn*100/(pn-et);return Math.min(Je[Te-1].percent+ut,100)}else{let ut=ht*100/(pn-et);return Math.max(0,Je[Te+1].percent-ut)}},Vi=Te=>{let ut;if(typeof Cn=="function"){let Yt=je(0,100,et,pn,Te);ut=Cn(Yt,Te)}else ut=Cn;if(we(ut)){let Yt=pn-et;return ut=Yt===0?0:ut*100/Yt,ut}},Wi=Te=>{if(Te===void 0)return;let ut=je(0,100,et,pn,Te);return Ut!==void 0?Ut[Math.round(ut)]:Pe(ut,Sr)},io=()=>Ut!==void 0?Ut[et]:et,ps=()=>Ut!==void 0?Ut[pn]:pn,jo=()=>Cn,Hs=Te=>{var ut;return Te<=0||Xe?io():(ut=Wi(Je[Te-1].percent))!=null?ut:""},fi=Te=>{var ut;return Je.length<=1||Te>=Je.length-1||Xe?ps():(ut=Wi(Je[Te+1].percent))!=null?ut:""},Ma=()=>Je.map(Te=>Te.percent),so=()=>Je.map(Te=>Wi(Te.percent)),Yi=()=>Je.map(Te=>Te.$pointer),oo=()=>et,ul=()=>pn,Vt=()=>Ut,Z=()=>qt,me=()=>Sr,Be=()=>ht,gt=()=>Xn,mn=Te=>bi[Te],Nt=()=>ci,In=()=>Jt,dr=()=>nr,kr=()=>Gt,Ln=()=>vi,Ai=()=>Xe,Jr=()=>ni,sr=(Te,ut)=>{if(ut===void 0)return;let Yt=Vi(ut);Yt!==void 0&&(ut=qe(ut,Yt));let Vn=Je[Te];if(!Vn)return;let mr=Vn.updatePosition(ut,qs(Te),ll(Te),qt,ci,Jt);an==null||an.updatePosition(qt,Je.map(Pn=>Pn.percent),ci,Jt),Us();for(let Pn of Je){let ji=Wi(Pn.percent);ji!==void 0&&(Pn.setAttr("aria-valuenow",ji.toString()),Pn.setAttr("aria-valuetext",ji.toString()))}Gs(),mr&&Ze(ge,Je.map(Pn=>Wi(Pn.percent)))},di=()=>{for(let Te=0;Te<Je.length;Te++)sr(Te,Je[Te].percent)},xs=(Te,ut)=>{et=Ut!==void 0?0:Ie(Te,Lr),pn=Ut!==void 0?Ut.length-1:Ie(ut,yn),Bi(et),zi(pn)},Gs=()=>{var Te,ut;for(let Yt=0;Yt<Je.length;Yt++){let Vn=Je[Yt];Vn.setAttr("aria-valuemin",((Te=Hs(Yt))!=null?Te:"").toString()),Vn.setAttr("aria-valuemax",((ut=fi(Yt))!=null?ut:"").toString())}},Bi=Te=>{et=Ie(Te,Lr),et>pn&&(pn=et+yn),di()},zi=Te=>{pn=Ie(Te,yn),pn<et&&(pn=et+yn),di()},wo=Te=>{Xe=!0;for(let ut=0;ut<Te.length;ut++)Gr(Te[ut],ut);Xe=!1;for(let ut=0;ut<Te.length;ut++)Gr(Te[ut],ut)},Gr=(Te,ut)=>{let Yt;Ut!==void 0?(Yt=Te==null?0:oe(Te,Ut),Yt===-1&&(Yt=0)):(Yt=Ie(Te,et),Yt<et&&(Yt=et),Yt>pn&&(Yt=pn));let Vn=je(et,pn,0,100,Yt);sr(ut,Vn)},da=Te=>{if(Te==null){Cn=void 0;return}if(typeof Te=="function"){Cn=Te,di();return}if(we(Te)){Cn=Ie(Te,1);let ut=Math.abs(pn-et);Cn>ut&&(Cn=void 0),di();return}Cn=void 0},Vu=Te=>{Xe=Te,di()},cl=Te=>{(!we(Te)||Te<0)&&(Te=0),ht=Te},fl=Te=>{(!we(Te)||Te<0)&&(Te=1/0),Xn=Te},Yc=Te=>{nr=Te,Le.classList.toggle("disabled",nr),nr?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Wu=Te=>{Gt=Te},ne=Te=>{vi=Te,vi?document.removeEventListener("wheel",Fs):document.addEventListener("wheel",Fs,{passive:!1})},_e=Te=>{if(Te==null){Ut=void 0;return}if(Ut=se(Te),Ut===void 0||Ut.length<=0){Ut=void 0;return}Bi(0),zi(Ut.length-1),Cn===void 0&&da(1)},Ye=Te=>{var ut;typeof Te=="string"?qt=Te.trim().toLowerCase()===ze?ze:He:qt=He;let Yt=(ut=ge.shadowRoot)==null?void 0:ut.querySelector(".range-slider-box");if(!Yt)return;Yt.className=`range-slider-box type-${qt}`,di();let Vn=qt===ze?"vertical":"horizontal";for(let mr of Je)mr.setAttr("aria-orientation",Vn)},yt=Te=>{ci=Te,Je.length>1&&qn(Je,ci,ge),di(),Us()},Qt=Te=>{Jt=Te,Je.length>1&&qn(Je,Jt,ge),di(),Us()},Ht=Te=>{Sr=Ie(Te,Kr),Sr<0&&(Sr=Kr),Us()},An=Te=>{Te==null||Te.toString().trim().toLowerCase()==="false"?(Qi=void 0,Le.style.removeProperty(F),Le.classList.remove(rn)):(Qi=Te.toString(),Le.style.setProperty(F,Qi),Le.classList.add(rn))},pr=(Te,ut)=>{let Yt=Je[Te];!Yt||(Yt.setAttr("aria-label",ut),bi[Te]=ut)},Ir=Te=>{if(Ar=void 0,Je.length<=1){ni=!1,Le.classList.remove(on);return}ni=Te,Le.classList.toggle(on,ni)},ts=()=>{Yc(At(ge.getAttribute(w))),Gt=At(ge.getAttribute(_)),vi=At(ge.getAttribute(A));let Te=Pt(ge,/^pointer([0-9]*)-disabled$/,ut=>At(ut));for(let ut of Te){let Yt=ut[0];!Je[Yt]||(Je[Yt].disabled=ut[1])}},ws=()=>{let Te=Pt(ge,/^aria-label([0-9]*)$/);for(let ut of Te){let Yt=ut[0];pr(Yt,ut[1])}},xi=Te=>{let ut=Je.length,Yt=Je[ut-1].$pointer,Vn=Yt.cloneNode(!0);Yt.after(Vn);let mr=pe(ge,Vn,ut);return mr.setCallbacks(zo,hs,ol,al),Je.push(mr),Gr(Te,ut),di(),Us(),ut},Li=()=>{let Te=Je.length,ut=Je[Te-1];return ut?(ut.destroy(),Je.pop(),Je.length<=1&&Ir(!1),di(),Us(),Te-1):-1};return(()=>{var Te,ut;for(let Vn of Je)Vn.setCallbacks(zo,hs,ol,al);let Yt=(Te=ge.shadowRoot)==null?void 0:Te.querySelector(".panel-fill");Yt&&(an=be(Yt)),Ye(ge.getAttribute(g)),yt(At(ge.getAttribute(x))),Qt(At(ge.getAttribute(y))),xs(ge.getAttribute(c),ge.getAttribute(d)),da(ge.getAttribute(h)),_e(ge.getAttribute(f)),wo(it.map(Vn=>Vn[1])),Vu(At(ge.getAttribute(o))),cl(Ie(ge.getAttribute(a),0)),fl(Ie(ge.getAttribute(l),1/0)),Ir(At(ge.getAttribute(u))),Ht(Ie(ge.getAttribute(p),Kr)),ts(),ws(),en=sn(ge,Le,Je),An((ut=ge.getAttribute(he))!=null?ut:ir),Le.addEventListener("mousedown",js),Le.addEventListener("mouseup",xo),Le.addEventListener("touchmove",bs),Le.addEventListener("touchstart",bs),vi||document.addEventListener("wheel",Fs,{passive:!1}),xt=vn(ge,fa,{setValues:wo,setMin:Bi,setMax:zi,setStep:da,setPointersOverlap:Vu,setPointersMinDistance:cl,setPointersMaxDistance:fl,setDisabled:Yc,setType:Ye,setRightToLeft:yt,setBottomToTop:Qt,setRound:Ht,setKeyboardDisabled:Wu,setMousewheelDisabled:ne,setRangeDragging:Ir,setData:_e},{getPercents:Ma,getValues:so,getPointerElements:Yi,getMin:oo,getMax:ul,getStep:jo,getData:Vt,getType:Z,getRound:me,getTextMin:io,getTextMax:ps,isRightToLeft:Nt,isBottomToTop:In,isDisabled:dr,isKeyboardDisabled:kr,isMousewheelDisabled:Ln,isPointersOverlap:Ai,isRangeDraggingEnabled:Jr,getPointersMinDistance:Be,getPointersMaxDistance:gt}),xt.init()})(),{get pointers(){return Je},get styles(){return en},get pluginsManager(){return xt},get min(){return io()},get max(){return ps()},get step(){return jo()},get pointersOverlap(){return Ai()},set pointersOverlap(Te){Vu(Te)},get pointersMinDistance(){return Be()},set pointersMinDistance(Te){cl(Te)},get pointersMaxDistance(){return gt()},set pointersMaxDistance(Te){fl(Te)},get disabled(){return dr()},set disabled(Te){Yc(Te)},get data(){return Vt()},get type(){return Z()},set type(Te){Ye(Te)},get rightToLeft(){return Nt()},set rightToLeft(Te){yt(Te)},get bottomToTop(){return In()},set bottomToTop(Te){Qt(Te)},get round(){return me()},set round(Te){Ht(Te)},get animateOnClick(){return Qi},set animateOnClick(Te){An(Te)},get keyboardDisabled(){return kr()},set keyboardDisabled(Te){Wu(Te)},get mousewheelDisabled(){return Ln()},set mousewheelDisabled(Te){ne(Te)},get rangeDragging(){return Jr()},set rangeDragging(Te){Ir(Te)},setMin:Bi,setMax:zi,setValue:Gr,setStep:da,setData:_e,getTextValue:Wi,setAriaLabel:pr,getAriaLabel:mn,addPointer:xi,removePointer:Li,destroy:()=>{Le.removeEventListener("mousedown",js),Le.removeEventListener("mouseup",xo),Le.removeEventListener("touchmove",bs),Le.removeEventListener("touchstart",bs),document.removeEventListener("wheel",Fs);for(let Te of Je)Te.destroy();xt==null||xt.destroy()}}},tr=(ge,Le,it)=>{let Je=Kt.find(([xt,et,pn,Cn])=>et.replace("#","")===Le.replace(/\d+/g,""));if(Je&&ge.styles){let[xt,et,pn,Cn]=Je,Ut=Le.replace(/\D/g,"").trim(),qt=Ut===""||Ut==="0"||Ut==="1"?0:Ie(Ut,0)-1;ge.styles.setStyle(xt,it,qt);return}switch(ge&&ge.pluginsManager&&ge.pluginsManager.onAttrChange(Le,it),Le){case c:{ge.setMin(it);break}case d:{ge.setMax(it);break}case h:{ge.setStep(it);break}case o:{ge.pointersOverlap=At(it);break}case a:{ge.pointersMinDistance=Ie(it,0);break}case u:{ge.rangeDragging=At(it);break}case l:{ge.pointersMaxDistance=Ie(it,1/0);break}case w:{ge.disabled=At(it);break}case _:{ge.keyboardDisabled=At(it);break}case A:{ge.mousewheelDisabled=At(it);break}case f:{ge.setData(it);break}case g:{ge.type=it;break}case x:{ge.rightToLeft=At(it);break}case y:{ge.bottomToTop=At(it);break}case p:{ge.round=Ie(it,Kr);break}case v:{ge.styles&&(ge.styles.theme=it);break}case he:{ge.animateOnClick=it;break}}let Et=null;if(/^value([0-9]*)$/.test(Le)&&(Et="value"),/^pointer([0-9]*)-disabled$/.test(Le)&&(Et="pointer-disabled"),/^aria-label([0-9]*)$/.test(Le)&&(Et="aria-label"),/^pointer([0-9]*)-shape$/.test(Le)&&(Et="pointer-shape"),!Et)return;let an=Le.replace(/\D/g,"").trim(),en=an===""||an==="0"||an==="1"?0:Ie(an,0)-1;switch(Et){case"value":{ge.setValue(it,en);break}case"pointer-disabled":{let xt=ge==null?void 0:ge.pointers[en];if(!xt)return;xt.disabled=At(it);break}case"aria-label":{ge.setAriaLabel(en,it);break}case"pointer-shape":{ge.styles&&ge.styles.setPointerShape(en,it);break}}},$r=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ge){this.slider&&this.slider.setStep(ge)}get step(){var ge;return(ge=this.slider)==null?void 0:ge.step}set disabled(ge){this.slider&&(this.slider.disabled=ge)}get disabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.disabled)!=null?Le:!1}set data(ge){var Le;(Le=this.slider)==null||Le.setData(ge)}get data(){var ge;return(ge=this.slider)==null?void 0:ge.data}set min(ge){var Le;(Le=this.slider)==null||Le.setMin(ge)}get min(){var ge;return(ge=this.slider)==null?void 0:ge.min}set max(ge){var Le;(Le=this.slider)==null||Le.setMax(ge)}get max(){var ge;return(ge=this.slider)==null?void 0:ge.max}set round(ge){!this.slider||(this.slider.round=ge)}get round(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.round)!=null?Le:Kr}set type(ge){!this.slider||(this.slider.type=ge??He)}get type(){var ge;return((ge=this.slider)==null?void 0:ge.type)||He}set pointersOverlap(ge){!this.slider||(this.slider.pointersOverlap=ge)}get pointersOverlap(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersOverlap)!=null?Le:!1}set pointersMinDistance(ge){!this.slider||(this.slider.pointersMinDistance=ge)}get pointersMinDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMinDistance)!=null?Le:0}set pointersMaxDistance(ge){!this.slider||(this.slider.pointersMaxDistance=ge)}get pointersMaxDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMaxDistance)!=null?Le:1/0}set theme(ge){!this.slider||!this.slider.styles||(this.slider.styles.theme=ge)}get theme(){var ge,Le,it;return(it=(Le=(ge=this.slider)==null?void 0:ge.styles)==null?void 0:Le.theme)!=null?it:null}set rtl(ge){!this.slider||(this.slider.rightToLeft=ge)}get rtl(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rightToLeft)!=null?Le:!1}set btt(ge){!this.slider||(this.slider.bottomToTop=ge)}get btt(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.bottomToTop)!=null?Le:!1}set keyboardDisabled(ge){!this.slider||(this.slider.keyboardDisabled=ge)}get keyboardDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.keyboardDisabled)!=null?Le:!1}set mousewheelDisabled(ge){!this.slider||(this.slider.mousewheelDisabled=ge)}get mousewheelDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.mousewheelDisabled)!=null?Le:!1}set animateOnClick(ge){!this.slider||(this.slider.animateOnClick=ge)}get animateOnClick(){var ge;return(ge=this.slider)==null?void 0:ge.animateOnClick}get rangeDragging(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rangeDragging)!=null?Le:!1}set rangeDragging(ge){this.slider&&(this.slider.rangeDragging=At(ge))}get externalCSSList(){return this._externalCSSList}addPointer(ge){var Le,it;if(!this.slider)return;let Je=(it=(Le=this.slider)==null?void 0:Le.addPointer(ge))!=null?it:0;Gi(this,this.slider,Je,`value${Je+1}`,`ariaLabel${Je+1}`,`pointerShape${Je+1}`,`pointer${Je+1}Disabled`)}removePointer(){var ge;!this.slider||(ge=this.slider)==null||ge.removePointer()}addCSS(ge){if(!this.shadowRoot)return;let Le=document.createElement("style");Le.textContent=ge,this.shadowRoot.appendChild(Le)}connectedCallback(){var ge,Le;if(!this.shadowRoot)return;this._externalCSSList=_t(this),this.shadowRoot.innerHTML=i(s,this._externalCSSList);let it=(ge=this.shadowRoot)==null?void 0:ge.querySelector(".pointer");if(!it)return;let Je=(Le=this.shadowRoot)==null?void 0:Le.getElementById("range-slider");if(!Je)return;let Et=ds(this,it);this.slider=Ni(this,Je,Et),No(this,this.slider),this._observer=new MutationObserver(an=>{an.forEach(en=>{var xt;if(!this.slider||en.type!=="attributes")return;let et=en.attributeName;!et||tr(this.slider,et,(xt=this.getAttribute(et))!=null?xt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},to=$r;window.tcRangeSlider=to,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",to),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends to{})})();var k0,OIe,P$;class FIe extends Zr{constructor(){super();gn(this,k0);this.filterObject={},this.tabIndex=0,this.inputHandler=dn(this,k0,OIe).bind(this),this.debouncedInputHandler=Y0(this.inputHandler,500,{leading:!1})}reset(){lTt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>Ke`
        ${dn(this,k0,P$).call(this,"min","before")}
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min||this.filterObject.min}"
          value2="${this.filterObject.state.max||this.filterObject.max}"
          step="${this.filterObject.step||1}"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        ${dn(this,k0,P$).call(this,"max","after")}
      `)}}k0=new WeakSet,OIe=function(n){uTt(n,this)},P$=function(n,r){return cTt(n,r,this)},tn(FIe,"properties",{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number}});customElements.define("eox-itemfilter-range",FIe);var IT,MIe;class ATt extends Zr{constructor(){super();gn(this,IT);this.filterObject={},this.tabIndex=0}static get properties(){return{filterObject:{type:Object},tabIndex:{attribute:!1,type:Number}}}reset(){yTt(this)}createRenderRoot(){return this}render(){return Un(this.filterObject,()=>{var n;return Ke`
        <form style="display: inline">
          ${su(["intersects","within"],r=>Ke`
              <label>
                <input
                  tabindex=${this.tabIndex}
                  type="radio"
                  name="mode"
                  .checked="${(this.filterObject.state.mode||"")===r||qr}"
                  value="${r}"
                  @click=${()=>dn(this,IT,MIe).call(this,r)}
                />
                <small>${r} filter geometry</small>
              </label>
            `)}
        </form>
        <eox-itemfilter-spatial-filter
          exportparts="map: spatial-filter-map"
          .geometry="${(n=this.filterObject.state)==null?void 0:n.geometry}"
          @filter="${r=>{this.filterObject.state.geometry=r.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
        ></eox-itemfilter-spatial>
      `})}}IT=new WeakSet,MIe=function(n){bTt(n,this)};customElements.define("eox-itemfilter-spatial",ATt);var PT,$Ie;class CTt extends Zr{constructor(){super();gn(this,PT);this.geometry=null,this.eoxMap=null}static get properties(){return{geometry:{type:Object},eoxMap:{type:Object}}}firstUpdated(){dn(this,PT,$Ie).call(this)}reset(){vTt(this)}render(){return Ke`<div id="eox-map"></div>`}}PT=new WeakSet,$Ie=function(){SIe(this)};customElements.define("eox-itemfilter-spatial-filter",CTt);function kTt(e,t){t.renderRoot.querySelectorAll(".chip").forEach(n=>{n.classList.remove("highlighted")}),e.target.classList.add("highlighted"),t.requestUpdate()}function TTt(e,t){const{code:n,target:r}=e;r.id==="eox-itemfilter-input-search"&&(t.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(n)||(n==="Space"&&e.preventDefault(),["Escape","Space","Enter"].includes(n)||e.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(n)&&DTt(n,e.target.value??"",t)))}function DTt(e,t,n){const r=n.renderRoot.querySelector(".chip.highlighted");if((e==="Escape"||t)&&r&&r.classList.remove("highlighted"),e==="Backspace"&&!t){if(n.items.length){r&&(r.querySelector(".chip-item-close").click(),n.items.splice(Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(r),1));const i=n.renderRoot.querySelectorAll(".chip")[n.renderRoot.querySelectorAll(".chip").length-1];i.classList.contains("highlighted")||i.classList.add("highlighted"),n.requestUpdate()}n._dispatchEvent()}if((e==="ArrowLeft"||e==="ArrowRight")&&!t){if(n.renderRoot.querySelectorAll(".chip").length<1)return;let i=0;const s=n.renderRoot.querySelector(".chip.highlighted");s&&(i=Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(s),s.classList.remove("highlighted")),i=i+(e==="ArrowLeft"?-1:1),e==="ArrowLeft"&&i<0&&(i=n.renderRoot.querySelectorAll(".chip").length-1),e==="ArrowRight"&&i>n.renderRoot.querySelectorAll(".chip").length-1&&(i=0),Array.from(n.renderRoot.querySelectorAll(".chip"))[i].classList.add("highlighted")}}var T0,N$,IIe;class LTt extends Zr{constructor(){super();gn(this,T0);this.items={},this.controller={}}static get properties(){return{items:{attribute:!1,type:Object},controller:{attribute:!1,type:Object}}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",dn(this,T0,N$).bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",dn(this,T0,N$).bind(this))}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}render(){return Ke`
      <style>
        ${sS}
      </style>
      <span class="chip-container">
        ${su(this.items,n=>Ke`
            <span class="chip" @click=${dn(this,T0,IIe).bind(this)}>
              <span class="chip-title">${n.title}</span>
                <span
                  class="chip-item-close hidden"
                  data-close=${n.key}
                  @click=${r=>{r.stopPropagation(),this.controller.remove(r),this.requestUpdate()}}
                ></span>
            </span>
            </span>
          `)}
      </span>
    `}}T0=new WeakSet,N$=function(n){TTt(n,this)},IIe=function(n){kTt(n,this)};customElements.define("eox-itemfilter-chips",LTt);const RTt=Object.freeze({aggregateResults:void 0,autoSpreadSingle:!1,enableHighlighting:!1,externalFilter:()=>{},filterProperties:[],fuseConfig:{},inlineMode:!1,matchAllWhenEmpty:!0,showResults:!0,idProperty:"id",titleProperty:"title",subTitleProperty:void 0,imageProperty:void 0,expandMultipleFilters:!0,expandResults:!0,expandMultipleResults:!0}),MEe=["aggregateResults","autoSpreadSingle","enableHighlighting","externalFilter","filterProperties","fuseConfig","inlineMode","matchAllWhenEmpty","showResults","titleProperty","subTitleProperty","imageProperty","idProperty","expandMultipleFilters","expandResults","expandMultipleResults","items"];var iM,$Ee;function FTt(){if($Ee)return iM;$Ee=1;var e=200,t="__lodash_hash_undefined__",n=1/0,r="[object Function]",i="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=typeof Xi=="object"&&Xi&&Xi.Object===Object&&Xi,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function f(P,Q){var ie=P?P.length:0;return!!ie&&d(P,Q,0)>-1}function c(P,Q,ie,ae){for(var ke=P.length,Ce=ie+-1;++Ce<ke;)if(Q(P[Ce],Ce,P))return Ce;return-1}function d(P,Q,ie){if(Q!==Q)return c(P,h,ie);for(var ae=ie-1,ke=P.length;++ae<ke;)if(P[ae]===Q)return ae;return-1}function h(P){return P!==P}function p(P,Q){return P.has(Q)}function g(P,Q){return P==null?void 0:P[Q]}function v(P){var Q=!1;if(P!=null&&typeof P.toString!="function")try{Q=!!(P+"")}catch{}return Q}function x(P){var Q=-1,ie=Array(P.size);return P.forEach(function(ae){ie[++Q]=ae}),ie}var y=Array.prototype,w=Function.prototype,_=Object.prototype,A=u["__core-js_shared__"],T=function(){var P=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),D=w.toString,k=_.hasOwnProperty,R=_.toString,O=RegExp("^"+D.call(k).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=y.splice,K=oe(u,"Map"),L=oe(u,"Set"),$=oe(Object,"create");function I(P){var Q=-1,ie=P?P.length:0;for(this.clear();++Q<ie;){var ae=P[Q];this.set(ae[0],ae[1])}}function U(){this.__data__=$?$(null):{}}function q(P){return this.has(P)&&delete this.__data__[P]}function Y(P){var Q=this.__data__;if($){var ie=Q[P];return ie===t?void 0:ie}return k.call(Q,P)?Q[P]:void 0}function X(P){var Q=this.__data__;return $?Q[P]!==void 0:k.call(Q,P)}function te(P,Q){var ie=this.__data__;return ie[P]=$&&Q===void 0?t:Q,this}I.prototype.clear=U,I.prototype.delete=q,I.prototype.get=Y,I.prototype.has=X,I.prototype.set=te;function le(P){var Q=-1,ie=P?P.length:0;for(this.clear();++Q<ie;){var ae=P[Q];this.set(ae[0],ae[1])}}function ee(){this.__data__=[]}function z(P){var Q=this.__data__,ie=Wt(Q,P);if(ie<0)return!1;var ae=Q.length-1;return ie==ae?Q.pop():B.call(Q,ie,1),!0}function he(P){var Q=this.__data__,ie=Wt(Q,P);return ie<0?void 0:Q[ie][1]}function de(P){return Wt(this.__data__,P)>-1}function ze(P,Q){var ie=this.__data__,ae=Wt(ie,P);return ae<0?ie.push([P,Q]):ie[ae][1]=Q,this}le.prototype.clear=ee,le.prototype.delete=z,le.prototype.get=he,le.prototype.has=de,le.prototype.set=ze;function He(P){var Q=-1,ie=P?P.length:0;for(this.clear();++Q<ie;){var ae=P[Q];this.set(ae[0],ae[1])}}function je(){this.__data__={hash:new I,map:new(K||le),string:new I}}function we(P){return se(this,P).delete(P)}function Ie(P){return se(this,P).get(P)}function qe(P){return se(this,P).has(P)}function Pe(P,Q){return se(this,P).set(P,Q),this}He.prototype.clear=je,He.prototype.delete=we,He.prototype.get=Ie,He.prototype.has=qe,He.prototype.set=Pe;function At(P){var Q=-1,ie=P?P.length:0;for(this.__data__=new He;++Q<ie;)this.add(P[Q])}function dt(P){return this.__data__.set(P,t),this}function nn(P){return this.__data__.has(P)}At.prototype.add=At.prototype.push=dt,At.prototype.has=nn;function Wt(P,Q){for(var ie=P.length;ie--;)if(re(P[ie][0],Q))return ie;return-1}function Mn(P){if(!xe(P)||F(P))return!1;var Q=ye(P)||v(P)?O:o;return Q.test(H(P))}function Ze(P,Q,ie){var ae=-1,ke=f,Ce=P.length,Ee=!0,De=[],Oe=De;if(Ce>=e){var We=pe(P);if(We)return x(We);Ee=!1,ke=p,Oe=new At}else Oe=De;e:for(;++ae<Ce;){var tt=P[ae],bt=tt;if(tt=tt!==0?tt:0,Ee&&bt===bt){for(var Pt=Oe.length;Pt--;)if(Oe[Pt]===bt)continue e;De.push(tt)}else ke(Oe,bt,ie)||(Oe!==De&&Oe.push(bt),De.push(tt))}return De}var pe=L&&1/x(new L([,-0]))[1]==n?function(P){return new L(P)}:Re;function se(P,Q){var ie=P.__data__;return be(Q)?ie[typeof Q=="string"?"string":"hash"]:ie.map}function oe(P,Q){var ie=g(P,Q);return Mn(ie)?ie:void 0}function be(P){var Q=typeof P;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?P!=="__proto__":P===null}function F(P){return!!T&&T in P}function H(P){if(P!=null){try{return D.call(P)}catch{}try{return P+""}catch{}}return""}function J(P){return P&&P.length?Ze(P):[]}function re(P,Q){return P===Q||P!==P&&Q!==Q}function ye(P){var Q=xe(P)?R.call(P):"";return Q==r||Q==i}function xe(P){var Q=typeof P;return!!P&&(Q=="object"||Q=="function")}function Re(){}return iM=J,iM}var OTt=FTt();const PIe=sa(OTt);var l_={exports:{}};l_.exports;var IEe;function MTt(){return IEe||(IEe=1,function(e,t){var n=200,r="Expected a function",i="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u="[object Arguments]",f="[object Array]",c="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",v="[object Map]",x="[object Number]",y="[object Object]",w="[object Promise]",_="[object RegExp]",A="[object Set]",T="[object String]",D="[object Symbol]",k="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",B="[object Float32Array]",K="[object Float64Array]",L="[object Int8Array]",$="[object Int16Array]",I="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",Y="[object Uint16Array]",X="[object Uint32Array]",te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,ee=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,de=/\\(\\)?/g,ze=/^\[object .+?Constructor\]$/,He=/^(?:0|[1-9]\d*)$/,je={};je[B]=je[K]=je[L]=je[$]=je[I]=je[U]=je[q]=je[Y]=je[X]=!0,je[u]=je[f]=je[R]=je[c]=je[O]=je[d]=je[h]=je[p]=je[v]=je[x]=je[y]=je[_]=je[A]=je[T]=je[k]=!1;var we=typeof Xi=="object"&&Xi&&Xi.Object===Object&&Xi,Ie=typeof self=="object"&&self&&self.Object===Object&&self,qe=we||Ie||Function("return this")(),Pe=t&&!t.nodeType&&t,At=Pe&&!0&&e&&!e.nodeType&&e,dt=At&&At.exports===Pe,nn=dt&&we.process,Wt=function(){try{return nn&&nn.binding("util")}catch{}}(),Mn=Wt&&Wt.isTypedArray;function Ze(ne,_e){for(var Ye=-1,yt=ne?ne.length:0,Qt=Array(yt);++Ye<yt;)Qt[Ye]=_e(ne[Ye],Ye,ne);return Qt}function pe(ne,_e){for(var Ye=-1,yt=_e.length,Qt=ne.length;++Ye<yt;)ne[Qt+Ye]=_e[Ye];return ne}function se(ne,_e){for(var Ye=-1,yt=ne?ne.length:0;++Ye<yt;)if(_e(ne[Ye],Ye,ne))return!0;return!1}function oe(ne){return function(_e){return _e==null?void 0:_e[ne]}}function be(ne,_e){for(var Ye=-1,yt=Array(ne);++Ye<ne;)yt[Ye]=_e(Ye);return yt}function F(ne){return function(_e){return ne(_e)}}function H(ne,_e){return ne==null?void 0:ne[_e]}function J(ne){var _e=!1;if(ne!=null&&typeof ne.toString!="function")try{_e=!!(ne+"")}catch{}return _e}function re(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(yt,Qt){Ye[++_e]=[Qt,yt]}),Ye}function ye(ne,_e){return function(Ye){return ne(_e(Ye))}}function xe(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(yt){Ye[++_e]=yt}),Ye}var Re=Array.prototype,P=Function.prototype,Q=Object.prototype,ie=qe["__core-js_shared__"],ae=function(){var ne=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),ke=P.toString,Ce=Q.hasOwnProperty,Ee=Q.toString,De=RegExp("^"+ke.call(Ce).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=qe.Symbol,We=qe.Uint8Array,tt=Q.propertyIsEnumerable,bt=Re.splice,Pt=Oe?Oe.isConcatSpreadable:void 0,_t=ye(Object.keys,Object),Kt=Hs(qe,"DataView"),sn=Hs(qe,"Map"),rn=Hs(qe,"Promise"),on=Hs(qe,"Set"),vn=Hs(qe,"WeakMap"),Er=Hs(Object,"create"),Ji=Nt(Kt),ds=Nt(sn),Gi=Nt(rn),No=Nt(on),qn=Nt(vn),Mr=Oe?Oe.prototype:void 0,Lr=Mr?Mr.valueOf:void 0,yn=Mr?Mr.toString:void 0;function Kr(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var yt=ne[_e];this.set(yt[0],yt[1])}}function ir(){this.__data__=Er?Er(null):{}}function Ni(ne){return this.has(ne)&&delete this.__data__[ne]}function tr(ne){var _e=this.__data__;if(Er){var Ye=_e[ne];return Ye===i?void 0:Ye}return Ce.call(_e,ne)?_e[ne]:void 0}function $r(ne){var _e=this.__data__;return Er?_e[ne]!==void 0:Ce.call(_e,ne)}function to(ne,_e){var Ye=this.__data__;return Ye[ne]=Er&&_e===void 0?i:_e,this}Kr.prototype.clear=ir,Kr.prototype.delete=Ni,Kr.prototype.get=tr,Kr.prototype.has=$r,Kr.prototype.set=to;function ge(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var yt=ne[_e];this.set(yt[0],yt[1])}}function Le(){this.__data__=[]}function it(ne){var _e=this.__data__,Ye=nr(_e,ne);if(Ye<0)return!1;var yt=_e.length-1;return Ye==yt?_e.pop():bt.call(_e,Ye,1),!0}function Je(ne){var _e=this.__data__,Ye=nr(_e,ne);return Ye<0?void 0:_e[Ye][1]}function Et(ne){return nr(this.__data__,ne)>-1}function an(ne,_e){var Ye=this.__data__,yt=nr(Ye,ne);return yt<0?Ye.push([ne,_e]):Ye[yt][1]=_e,this}ge.prototype.clear=Le,ge.prototype.delete=it,ge.prototype.get=Je,ge.prototype.has=Et,ge.prototype.set=an;function en(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var yt=ne[_e];this.set(yt[0],yt[1])}}function xt(){this.__data__={hash:new Kr,map:new(sn||ge),string:new Kr}}function et(ne){return ps(this,ne).delete(ne)}function pn(ne){return ps(this,ne).get(ne)}function Cn(ne){return ps(this,ne).has(ne)}function Ut(ne,_e){return ps(this,ne).set(ne,_e),this}en.prototype.clear=xt,en.prototype.delete=et,en.prototype.get=pn,en.prototype.has=Cn,en.prototype.set=Ut;function qt(ne){var _e=-1,Ye=ne?ne.length:0;for(this.__data__=new en;++_e<Ye;)this.add(ne[_e])}function Sr(ne){return this.__data__.set(ne,i),this}function ci(ne){return this.__data__.has(ne)}qt.prototype.add=qt.prototype.push=Sr,qt.prototype.has=ci;function Jt(ne){this.__data__=new ge(ne)}function Xe(){this.__data__=new ge}function ht(ne){return this.__data__.delete(ne)}function Xn(ne){return this.__data__.get(ne)}function ni(ne){return this.__data__.has(ne)}function Ar(ne,_e){var Ye=this.__data__;if(Ye instanceof ge){var yt=Ye.__data__;if(!sn||yt.length<n-1)return yt.push([ne,_e]),this;Ye=this.__data__=new en(yt)}return Ye.set(ne,_e),this}Jt.prototype.clear=Xe,Jt.prototype.delete=ht,Jt.prototype.get=Xn,Jt.prototype.has=ni,Jt.prototype.set=Ar;function Rr(ne,_e){var Ye=Jr(ne)||Ai(ne)?be(ne.length,String):[],yt=Ye.length,Qt=!!yt;for(var Ht in ne)Ce.call(ne,Ht)&&!(Qt&&(Ht=="length"||Yi(Ht,yt)))&&Ye.push(Ht);return Ye}function nr(ne,_e){for(var Ye=ne.length;Ye--;)if(Ln(ne[Ye][0],_e))return Ye;return-1}var Gt=qs(bi);function vi(ne,_e,Ye,yt,Qt){var Ht=-1,An=ne.length;for(Ye||(Ye=so),Qt||(Qt=[]);++Ht<An;){var pr=ne[Ht];Ye(pr)?pe(Qt,pr):Qt[Qt.length]=pr}return Qt}var Qi=ll();function bi(ne,_e){return ne&&Qi(ne,_e,fl)}function js(ne,_e){_e=oo(_e,ne)?[_e]:fa(_e);for(var Ye=0,yt=_e.length;ne!=null&&Ye<yt;)ne=ne[mn(_e[Ye++])];return Ye&&Ye==yt?ne:void 0}function xo(ne){return Ee.call(ne)}function no(ne,_e){return ne!=null&&_e in Object(ne)}function Bo(ne,_e,Ye,yt,Qt){return ne===_e?!0:ne==null||_e==null||!Bi(ne)&&!zi(_e)?ne!==ne&&_e!==_e:bs(ne,_e,Bo,Ye,yt,Qt)}function bs(ne,_e,Ye,yt,Qt,Ht){var An=Jr(ne),pr=Jr(_e),Ir=f,ts=f;An||(Ir=fi(ne),Ir=Ir==u?y:Ir),pr||(ts=fi(_e),ts=ts==u?y:ts);var ws=Ir==y&&!J(ne),xi=ts==y&&!J(_e),Li=Ir==ts;if(Li&&!ws)return Ht||(Ht=new Jt),An||Gr(ne)?Vi(ne,_e,Ye,yt,Qt,Ht):Wi(ne,_e,Ir,Ye,yt,Qt,Ht);if(!(Qt&o)){var Te=ws&&Ce.call(ne,"__wrapped__"),ut=xi&&Ce.call(_e,"__wrapped__");if(Te||ut){var Yt=Te?ne.value():ne,Vn=ut?_e.value():_e;return Ht||(Ht=new Jt),Ye(Yt,Vn,yt,Qt,Ht)}}return Li?(Ht||(Ht=new Jt),io(ne,_e,Ye,yt,Qt,Ht)):!1}function Fs(ne,_e,Ye,yt){var Qt=Ye.length,Ht=Qt;if(ne==null)return!Ht;for(ne=Object(ne);Qt--;){var An=Ye[Qt];if(An[2]?An[1]!==ne[An[0]]:!(An[0]in ne))return!1}for(;++Qt<Ht;){An=Ye[Qt];var pr=An[0],Ir=ne[pr],ts=An[1];if(An[2]){if(Ir===void 0&&!(pr in ne))return!1}else{var ws=new Jt,xi;if(!(xi===void 0?Bo(ts,Ir,yt,s|o,ws):xi))return!1}}return!0}function zo(ne){if(!Bi(ne)||Vt(ne))return!1;var _e=xs(ne)||J(ne)?De:ze;return _e.test(Nt(ne))}function hs(ne){return zi(ne)&&Gs(ne.length)&&!!je[Ee.call(ne)]}function ol(ne){return typeof ne=="function"?ne:ne==null?Yc:typeof ne=="object"?Jr(ne)?ro(ne[0],ne[1]):es(ne):Wu(ne)}function al(ne){if(!Z(ne))return _t(ne);var _e=[];for(var Ye in Object(ne))Ce.call(ne,Ye)&&Ye!="constructor"&&_e.push(Ye);return _e}function Cr(ne,_e){var Ye=-1,yt=sr(ne)?Array(ne.length):[];return Gt(ne,function(Qt,Ht,An){yt[++Ye]=_e(Qt,Ht,An)}),yt}function es(ne){var _e=jo(ne);return _e.length==1&&_e[0][2]?Be(_e[0][0],_e[0][1]):function(Ye){return Ye===ne||Fs(Ye,ne,_e)}}function ro(ne,_e){return oo(ne)&&me(_e)?Be(mn(ne),_e):function(Ye){var yt=Vu(Ye,ne);return yt===void 0&&yt===_e?cl(Ye,ne):Bo(_e,yt,void 0,s|o)}}function Os(ne){return function(_e){return js(_e,ne)}}function Us(ne){if(typeof ne=="string")return ne;if(wo(ne))return yn?yn.call(ne):"";var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function fa(ne){return Jr(ne)?ne:gt(ne)}function qs(ne,_e){return function(Ye,yt){if(Ye==null)return Ye;if(!sr(Ye))return ne(Ye,yt);for(var Qt=Ye.length,Ht=-1,An=Object(Ye);++Ht<Qt&&yt(An[Ht],Ht,An)!==!1;);return Ye}}function ll(ne){return function(_e,Ye,yt){for(var Qt=-1,Ht=Object(_e),An=yt(_e),pr=An.length;pr--;){var Ir=An[++Qt];if(Ye(Ht[Ir],Ir,Ht)===!1)break}return _e}}function Vi(ne,_e,Ye,yt,Qt,Ht){var An=Qt&o,pr=ne.length,Ir=_e.length;if(pr!=Ir&&!(An&&Ir>pr))return!1;var ts=Ht.get(ne);if(ts&&Ht.get(_e))return ts==_e;var ws=-1,xi=!0,Li=Qt&s?new qt:void 0;for(Ht.set(ne,_e),Ht.set(_e,ne);++ws<pr;){var Te=ne[ws],ut=_e[ws];if(yt)var Yt=An?yt(ut,Te,ws,_e,ne,Ht):yt(Te,ut,ws,ne,_e,Ht);if(Yt!==void 0){if(Yt)continue;xi=!1;break}if(Li){if(!se(_e,function(Vn,mr){if(!Li.has(mr)&&(Te===Vn||Ye(Te,Vn,yt,Qt,Ht)))return Li.add(mr)})){xi=!1;break}}else if(!(Te===ut||Ye(Te,ut,yt,Qt,Ht))){xi=!1;break}}return Ht.delete(ne),Ht.delete(_e),xi}function Wi(ne,_e,Ye,yt,Qt,Ht,An){switch(Ye){case O:if(ne.byteLength!=_e.byteLength||ne.byteOffset!=_e.byteOffset)return!1;ne=ne.buffer,_e=_e.buffer;case R:return!(ne.byteLength!=_e.byteLength||!yt(new We(ne),new We(_e)));case c:case d:case x:return Ln(+ne,+_e);case h:return ne.name==_e.name&&ne.message==_e.message;case _:case T:return ne==_e+"";case v:var pr=re;case A:var Ir=Ht&o;if(pr||(pr=xe),ne.size!=_e.size&&!Ir)return!1;var ts=An.get(ne);if(ts)return ts==_e;Ht|=s,An.set(ne,_e);var ws=Vi(pr(ne),pr(_e),yt,Qt,Ht,An);return An.delete(ne),ws;case D:if(Lr)return Lr.call(ne)==Lr.call(_e)}return!1}function io(ne,_e,Ye,yt,Qt,Ht){var An=Qt&o,pr=fl(ne),Ir=pr.length,ts=fl(_e),ws=ts.length;if(Ir!=ws&&!An)return!1;for(var xi=Ir;xi--;){var Li=pr[xi];if(!(An?Li in _e:Ce.call(_e,Li)))return!1}var Te=Ht.get(ne);if(Te&&Ht.get(_e))return Te==_e;var ut=!0;Ht.set(ne,_e),Ht.set(_e,ne);for(var Yt=An;++xi<Ir;){Li=pr[xi];var Vn=ne[Li],mr=_e[Li];if(yt)var Pn=An?yt(mr,Vn,Li,_e,ne,Ht):yt(Vn,mr,Li,ne,_e,Ht);if(!(Pn===void 0?Vn===mr||Ye(Vn,mr,yt,Qt,Ht):Pn)){ut=!1;break}Yt||(Yt=Li=="constructor")}if(ut&&!Yt){var ji=ne.constructor,$a=_e.constructor;ji!=$a&&"constructor"in ne&&"constructor"in _e&&!(typeof ji=="function"&&ji instanceof ji&&typeof $a=="function"&&$a instanceof $a)&&(ut=!1)}return Ht.delete(ne),Ht.delete(_e),ut}function ps(ne,_e){var Ye=ne.__data__;return ul(_e)?Ye[typeof _e=="string"?"string":"hash"]:Ye.map}function jo(ne){for(var _e=fl(ne),Ye=_e.length;Ye--;){var yt=_e[Ye],Qt=ne[yt];_e[Ye]=[yt,Qt,me(Qt)]}return _e}function Hs(ne,_e){var Ye=H(ne,_e);return zo(Ye)?Ye:void 0}var fi=xo;(Kt&&fi(new Kt(new ArrayBuffer(1)))!=O||sn&&fi(new sn)!=v||rn&&fi(rn.resolve())!=w||on&&fi(new on)!=A||vn&&fi(new vn)!=k)&&(fi=function(ne){var _e=Ee.call(ne),Ye=_e==y?ne.constructor:void 0,yt=Ye?Nt(Ye):void 0;if(yt)switch(yt){case Ji:return O;case ds:return v;case Gi:return w;case No:return A;case qn:return k}return _e});function Ma(ne,_e,Ye){_e=oo(_e,ne)?[_e]:fa(_e);for(var yt,Qt=-1,An=_e.length;++Qt<An;){var Ht=mn(_e[Qt]);if(!(yt=ne!=null&&Ye(ne,Ht)))break;ne=ne[Ht]}if(yt)return yt;var An=ne?ne.length:0;return!!An&&Gs(An)&&Yi(Ht,An)&&(Jr(ne)||Ai(ne))}function so(ne){return Jr(ne)||Ai(ne)||!!(Pt&&ne&&ne[Pt])}function Yi(ne,_e){return _e=_e??l,!!_e&&(typeof ne=="number"||He.test(ne))&&ne>-1&&ne%1==0&&ne<_e}function oo(ne,_e){if(Jr(ne))return!1;var Ye=typeof ne;return Ye=="number"||Ye=="symbol"||Ye=="boolean"||ne==null||wo(ne)?!0:le.test(ne)||!te.test(ne)||_e!=null&&ne in Object(_e)}function ul(ne){var _e=typeof ne;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ne!=="__proto__":ne===null}function Vt(ne){return!!ae&&ae in ne}function Z(ne){var _e=ne&&ne.constructor,Ye=typeof _e=="function"&&_e.prototype||Q;return ne===Ye}function me(ne){return ne===ne&&!Bi(ne)}function Be(ne,_e){return function(Ye){return Ye==null?!1:Ye[ne]===_e&&(_e!==void 0||ne in Object(Ye))}}var gt=kr(function(ne){ne=da(ne);var _e=[];return ee.test(ne)&&_e.push(""),ne.replace(z,function(Ye,yt,Qt,Ht){_e.push(Qt?Ht.replace(de,"$1"):yt||Ye)}),_e});function mn(ne){if(typeof ne=="string"||wo(ne))return ne;var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function Nt(ne){if(ne!=null){try{return ke.call(ne)}catch{}try{return ne+""}catch{}}return""}function In(ne,_e){return vi(dr(ne,_e))}function dr(ne,_e){var Ye=Jr(ne)?Ze:Cr;return Ye(ne,ol(_e))}function kr(ne,_e){if(typeof ne!="function"||_e&&typeof _e!="function")throw new TypeError(r);var Ye=function(){var yt=arguments,Qt=_e?_e.apply(this,yt):yt[0],Ht=Ye.cache;if(Ht.has(Qt))return Ht.get(Qt);var An=ne.apply(this,yt);return Ye.cache=Ht.set(Qt,An),An};return Ye.cache=new(kr.Cache||en),Ye}kr.Cache=en;function Ln(ne,_e){return ne===_e||ne!==ne&&_e!==_e}function Ai(ne){return di(ne)&&Ce.call(ne,"callee")&&(!tt.call(ne,"callee")||Ee.call(ne)==u)}var Jr=Array.isArray;function sr(ne){return ne!=null&&Gs(ne.length)&&!xs(ne)}function di(ne){return zi(ne)&&sr(ne)}function xs(ne){var _e=Bi(ne)?Ee.call(ne):"";return _e==p||_e==g}function Gs(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=l}function Bi(ne){var _e=typeof ne;return!!ne&&(_e=="object"||_e=="function")}function zi(ne){return!!ne&&typeof ne=="object"}function wo(ne){return typeof ne=="symbol"||zi(ne)&&Ee.call(ne)==D}var Gr=Mn?F(Mn):hs;function da(ne){return ne==null?"":Us(ne)}function Vu(ne,_e,Ye){var yt=ne==null?void 0:js(ne,_e);return yt===void 0?Ye:yt}function cl(ne,_e){return ne!=null&&Ma(ne,_e,no)}function fl(ne){return sr(ne)?Rr(ne):al(ne)}function Yc(ne){return ne}function Wu(ne){return oo(ne)?oe(mn(ne)):Os(ne)}e.exports=In}(l_,l_.exports)),l_.exports}var $Tt=MTt();const NIe=sa($Tt);function ITt(e,t,n){let r=[];e.filterProperties.length&&e.filterProperties.forEach(s=>{const o={},a=u=>s.format==="date"?kc(u).unix():parseFloat(u);t.forEach(u=>{var f,c;if(s.type==="range"){const d=O2(s.key,u);if(Array.isArray(d)){const h=[a(d[0]),a(d[1])];o.min=o.min!==void 0?Math.min(o.min,h[0]):h[0],o.max=o.max!==void 0?Math.max(o.max,h[1]):h[1]}else{const h=a(d);o.min=o.min!==void 0?Math.min(o.min,h):h,o.max=o.max!==void 0?Math.max(o.max,h):h}return}Array.isArray(u[s.key])?u[s.key].forEach(d=>{o[d]=void 0}):s.type==="spatial"?(o.geometry=((f=s==null?void 0:s.state)==null?void 0:f.geometry)||void 0,o.geometry&&(s.stringifiedState=o.geometry.type),o.mode=s.mode||"intersects"):(c=s.key)!=null&&c.includes(".")?PIe(NIe(n.items,s.key)).filter(d=>d).forEach(d=>{o[d]=void 0}):o[u[s.key]]=void 0});const l=s.key||s.keys.join("|");n.filters[l]=Object.assign({type:s.type||"multiselect",dirty:s.state?Object.values(s.state).some(u=>u):void 0,key:l},s.type==="range"?{min:o.min,max:o.max,format:s.format}:{},s),n.filters[l].state=Object.assign({},o,s.state)}),e.matchAllWhenEmpty!==!1&&(n.results=n.sortResults(t),n.requestUpdate()),e.aggregateResults&&(r=Array.from(new Set(t.reduce((s,o)=>s.concat(o[e.aggregateResults]),[]))).sort((s,o)=>s.localeCompare(o)));const i=[];return Object.values(n.filters).forEach(s=>{s.type==="text"?s.keys.forEach(o=>{i.includes(o)||i.push(o)}):(s.type==="select"||s.type==="multiselect")&&(i.includes(s.key)||i.push(s.key))}),eTt(t,Object.assign({keys:i},e.fuseConfig)),r}async function PTt(e,t,n){let r;n.externalFilter?r=await iTt(t,n.filters,e):r=await tTt(t,n.filters,e),n.results=n.sortResults(r)}function NTt(e,t,n){const r=`filter-${e.key}`.replace("|","-");switch(e.type){case"text":return Ke`<eox-itemfilter-text
        data-type="filter"
        data-cy="text-filter"
        slot="filter"
        id="${r}"
        .tabIndex=${t}
        .filterObject=${e}
        .unstyled=${n.unstyled}
        @filter=${()=>n.search()}
      ></eox-itemfilter-text>`;case"multiselect":case"select":return Ke`
        <eox-itemfilter-select
          .inlineMode=${n.inlineMode||!1}
          data-type="filter"
          id="${r}"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .suggestions="${PIe(NIe(n.items,e.key)).filter(i=>i)}"
          type="${e.type}"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-select>
      `;case"range":return Ke`
        <eox-itemfilter-range
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-range>
      `;case"spatial":return Ke`
        <eox-itemfilter-spatial
          id="${r}"
          data-type="filter"
          .tabIndex=${t}
          .filterObject=${e}
          slot="filter"
          @filter=${()=>n.search()}
        ></eox-itemfilter-spatial>
      `;default:return Ke``}}function BTt(e,t){return[...e].sort((n,r)=>n[t.titleProperty].localeCompare(r[t.titleProperty]))}function zTt(e,t,n){return Ke`
    ${Un(e.dirty,()=>Ke`
        <button
          type="button"
          tabindex=${t}
          slot="reset-button"
          class="reset-icon icon"
          @click=${r=>{const i=r.target.parentElement.querySelector("[slot=filter]");i&&typeof i.reset=="function"&&i.reset(),n.search(),n.requestUpdate()}}
        >
          ${n.unstyled?"Reset":qr}
        </button>
      `)}
  `}function jTt(e){e.renderRoot.querySelectorAll("[data-type='filter']").forEach(t=>{typeof t.reset=="function"&&t.reset()}),e.search()}var Z2,Wv,_u,j1,BIe,zIe;class UTt extends Zr{constructor(){super();gn(this,j1);gn(this,Z2,[]);gn(this,Wv,[]);gn(this,_u,RTt);this.items=null,this.filters={},this.results=[],this.selectedResult=null,this.search=Y0(this.searchHandler,100,{leading:!0}),this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.externalFilter=null,this.filterProperties=[],this.fuseConfig={},this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.showResults=!0,this.titleProperty="title",this.subTitleProperty=void 0,this.imageProperty=void 0,this.idProperty="id",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0,this.resultType="list",this.unstyled=!1}static get properties(){return{items:{attribute:!1,type:Object},results:{state:!0,attribute:!1,type:Object},filters:{state:!0,attribute:!1,type:Object},selectedResult:{attribute:!1,type:Object},aggregateResults:{attribute:"aggregate-results",type:String},autoSpreadSingle:{attribute:"auto-spread-single",type:Boolean},enableHighlighting:{attribute:"enable-highlighting",type:Boolean},filterProperties:{attribute:!1,type:Array},fuseConfig:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},matchAllWhenEmpty:{attribute:"match-all-when-empty",type:Boolean},showResults:{attribute:"show-result",type:Boolean},idProperty:{attribute:"id-property",type:String},titleProperty:{attribute:"title-property",type:String},subTitleProperty:{attribute:"sub-title-property",type:String},imageProperty:{attribute:"image-property",type:String},expandMultipleFilters:{attribute:"enable-multiple-filter",type:Boolean},expandResults:{attribute:"expand-result",type:Boolean},expandMultipleResults:{attribute:"expand-multiple-results",type:Boolean},externalFilter:{attribute:!1,type:Function},resultType:{attribute:"result-type",type:String},unstyled:{type:Boolean}}}apply(){Ui(this,Z2,ITt($t(this,_u),$t(this,Wv),this)),this.search()}async searchHandler(){await PTt($t(this,_u),$t(this,Wv),this),this.dispatchEvent(new CustomEvent("filter",{detail:{results:this.results,filters:this.filters},bubbles:!0,composed:!0})),this.inlineMode&&this.renderRoot.querySelector("eox-itemfilter-container").updateInline(),this.requestUpdate()}sortResults(n){return BTt(n,$t(this,_u))}resetFilters(){jTt(this)}firstUpdated(n){var i;let r={};MEe.map(s=>{r={...r,[s]:this[s]}}),Ui(this,_u,r),Ui(this,Wv,((i=this.items)==null?void 0:i.map((s,o)=>Object.assign({id:s[this.idProperty]||`item-${o}`},s)))||[]),this.apply()}updated(n){MEe.map(r=>{if(n.has(r))return this.firstUpdated(),!0})}updateResult(n){this.selectedResult=n.detail,this.dispatchEvent(new CustomEvent("select",{detail:this.selectedResult,bubbles:!0,composed:!0})),this.requestUpdate()}render(){var n;return Ke`
      <style>
        ${WCt}
        ${!this.unstyled&&sS}
        ${!this.unstyled&&$D}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        class=${this.inlineMode?"inline":qr}
        @submit="${r=>r.preventDefault()}"
      >
        ${Un(this.filterProperties,()=>Ke`
            <eox-itemfilter-container
              .filters=${this.filters}
              .filterProperties=${this.filterProperties}
              .inlineMode=${this.inlineMode||!1}
              @reset=${()=>this.resetFilters()}
              @filter=${()=>this.search()}
            >
              <section slot="section">
                ${Un(!this.inlineMode,()=>Ke`
                    <slot name="filterstitle"
                      ><h6 class="main-heading">Filters</h6></slot
                    >
                  `)}
                <ul id="filters">
                  ${su(Object.values(this.filters),(r,i)=>Ke` <li>
                        <eox-itemfilter-expandcontainer
                          .filterObject=${r}
                          @details-toggled=${s=>gIe(s,$t(this,_u),this)}
                          data-details="${r.key}"
                        >
                          ${dn(this,j1,zIe).call(this,r,FEe(i,1))}
                          ${dn(this,j1,BIe).call(this,r,FEe(i,2))}
                        </eox-itemfilter-expandcontainer>
                      </li>`)}
                </ul>
                ${Un(!this.inlineMode&&$t(this,_u).filterProperties&&!this.inlineMode&&$t(this,_u).filterProperties&&D$(this.filters),()=>Ke`
                    <button
                      type="button"
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
              </section>
            </eox-itemfilter-container>
          `)}
        ${Un(((n=$t(this,_u))==null?void 0:n.showResults)&&this.results,()=>Ke`
            <eox-itemfilter-results
              .config=${$t(this,_u)}
              .results=${this.results}
              .filters=${this.filters}
              .resultAggregation=${$t(this,Z2)}
              .selectedResult=${this.selectedResult}
              .resultType=${this.resultType}
              @result=${this.updateResult}
            >
              <slot name="resultstitle"
                ><h6 class="main-heading">Results</h6></slot
              >
            </eox-itemfilter-results>
          `)}
      </form>
    `}}Z2=new WeakMap,Wv=new WeakMap,_u=new WeakMap,j1=new WeakSet,BIe=function(n,r){return NTt(n,r,this)},zIe=function(n,r){return zTt(n,r,this)};customElements.define("eox-itemfilter",UTt);function nC(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sM={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var PEe;function qTt(){return PEe||(PEe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,f){if(!i[u]){if(!r[u]){var c=typeof nC=="function"&&nC;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){return o(r[u][1][p]||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof nC=="function"&&nC,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){},{}],2:[function(n,r,i){var s=n("typo-js");function o(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!o.aff_loading){o.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(o.aff_data=u.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},u.send(null)}if(!o.dic_loading){o.dic_loading=!0;var f=new XMLHttpRequest;f.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),f.onload=function(){f.readyState===4&&f.status===200&&(o.dic_data=f.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},f.send(null)}var c='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(p){var g=p.peek(),v="";if(c.includes(g))return p.next(),null;for(;(g=p.peek())!=null&&!c.includes(g);)v+=g,p.next();return o.typo&&!o.typo.check(v)?"spell-error":null}},h=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(h,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}o.num_loaded=0,o.aff_loading=!1,o.dic_loading=!1,o.aff_data="",o.dic_data="",o.typo,r.exports=o},{"typo-js":16}],3:[function(n,r,i){(function(s){function o(a,l){clearTimeout(l.timeout),s.off(window,"mouseup",l.hurry),s.off(window,"keyup",l.hurry)}s.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(o(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,f){function c(){u.display.wrapper.offsetHeight?(o(0,f),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):f.timeout=setTimeout(c,f.delay)}f.timeout=setTimeout(c,f.delay),f.hurry=function(){clearTimeout(f.timeout),f.timeout=setTimeout(c,50)},s.on(window,"mouseup",f.hurry),s.on(window,"keyup",f.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(n,r,i){(function(s){s.defineOption("fullScreen",!1,function(o,a,l){l==s.Init&&(l=!1),!l!=!a&&(a?function(u){var f=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:f.style.width,height:f.style.height},f.style.width="",f.style.height="auto",f.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(o):function(u){var f=u.getWrapperElement();f.className=f.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=u.state.fullScreenRestore;f.style.width=c.width,f.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),u.refresh()}(o))})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(n,r,i){(function(s){function o(c){c.state.placeholder&&(c.state.placeholder.parentNode.removeChild(c.state.placeholder),c.state.placeholder=null)}function a(c){o(c);var d=c.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=c.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var h=c.getOption("placeholder");typeof h=="string"&&(h=document.createTextNode(h)),d.appendChild(h),c.display.lineSpace.insertBefore(d,c.display.lineSpace.firstChild)}function l(c){f(c)&&a(c)}function u(c){var d=c.getWrapperElement(),h=f(c);d.className=d.className.replace(" CodeMirror-empty","")+(h?" CodeMirror-empty":""),h?a(c):o(c)}function f(c){return c.lineCount()===1&&c.getLine(0)===""}s.defineOption("placeholder","",function(c,d,h){var p=h&&h!=s.Init;if(d&&!p)c.on("blur",l),c.on("change",u),c.on("swapDoc",u),s.on(c.getInputField(),"compositionupdate",c.state.placeholderCompose=function(){(function(v){setTimeout(function(){var x=!1;if(v.lineCount()==1){var y=v.getInputField();x=y.nodeName=="TEXTAREA"?!v.getLine(0).length:!/[^\u200b]/.test(y.querySelector(".CodeMirror-line").textContent)}x?a(v):o(v)},20)})(c)}),u(c);else if(!d&&p){c.off("blur",l),c.off("change",u),c.off("swapDoc",u),s.off(c.getInputField(),"compositionupdate",c.state.placeholderCompose),o(c);var g=c.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}d&&!c.hasFocus()&&l(c)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(n,r,i){(function(s){var o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(f,c){var d=c.line,h=0,p=0,g=o.exec(f.getLine(d)),v=g[1];do{var x=d+(h+=1),y=f.getLine(x),w=o.exec(y);if(w){var _=w[1],A=parseInt(g[3],10)+h-p,T=parseInt(w[3],10),D=T;if(v!==_||isNaN(T)){if(v.length>_.length||v.length<_.length&&h===1)return;p+=1}else A===T&&(D=T+1),A>T&&(D=A+1),f.replaceRange(y.replace(o,_+D+w[4]+w[5]),{line:x,ch:0},{line:x,ch:y.length})}}while(w)}s.commands.newlineAndIndentContinueMarkdownList=function(f){if(f.getOption("disableInput"))return s.Pass;for(var c=f.listSelections(),d=[],h=0;h<c.length;h++){var p=c[h].head,g=f.getStateAfter(p.line),v=s.innerMode(f.getMode(),g);if(v.mode.name!=="markdown"&&v.mode.helperType!=="markdown")return void f.execCommand("newlineAndIndent");var x=(g=v.state).list!==!1,y=g.quote!==0,w=f.getLine(p.line),_=o.exec(w),A=/^\s*$/.test(w.slice(0,p.ch));if(!c[h].empty()||!x&&!y||!_||A)return void f.execCommand("newlineAndIndent");if(a.test(w)){var T=y&&/>\s*$/.test(w),D=!/>\s*$/.test(w);(T||D)&&f.replaceRange("",{line:p.line,ch:0},{line:p.line,ch:p.ch+1}),d[h]=`
`}else{var k=_[1],R=_[5],O=!(l.test(_[2])||_[2].indexOf(">")>=0),B=O?parseInt(_[3],10)+1+_[4]:_[2].replace("x"," ");d[h]=`
`+k+B+R,O&&u(f,p)}}f.replaceSelections(d)}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(n,r,i){(function(s){s.overlayMode=function(o,a,l){return{startState:function(){return{base:s.startState(o),overlay:s.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:s.copyState(o,u.base),overlay:s.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,f){return(u!=f.streamSeen||Math.min(f.basePos,f.overlayPos)<u.start)&&(f.streamSeen=u,f.basePos=f.overlayPos=u.start),u.start==f.basePos&&(f.baseCur=o.token(u,f.base),f.basePos=u.pos),u.start==f.overlayPos&&(u.pos=u.start,f.overlayCur=a.token(u,f.overlay),f.overlayPos=u.pos),u.pos=Math.min(f.basePos,f.overlayPos),f.overlayCur==null?f.baseCur:f.baseCur!=null&&f.overlay.combineTokens||l&&f.overlay.combineTokens==null?f.baseCur+" "+f.overlayCur:f.overlayCur},indent:o.indent&&function(u,f,c){return o.indent(u.base,f,c)},electricChars:o.electricChars,innerMode:function(u){return{state:u.base,mode:o}},blankLine:function(u){var f,c;return o.blankLine&&(f=o.blankLine(u.base)),a.blankLine&&(c=a.blankLine(u.overlay)),c==null?f:l&&f!=null?f+" "+c:c}}}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(n,r,i){(function(s){var o,a,l=s.Pos;function u(_,A){for(var T=function(R){var O=R.flags;return O??(R.ignoreCase?"i":"")+(R.global?"g":"")+(R.multiline?"m":"")}(_),D=T,k=0;k<A.length;k++)D.indexOf(A.charAt(k))==-1&&(D+=A.charAt(k));return T==D?_:new RegExp(_.source,D)}function f(_){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(_.source)}function c(_,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=_.lastLine();D<=R;D++,k=0){A.lastIndex=k;var O=_.getLine(D),B=A.exec(O);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function d(_,A,T){if(!f(A))return c(_,A,T);A=u(A,"gm");for(var D,k=1,R=T.line,O=_.lastLine();R<=O;){for(var B=0;B<k&&!(R>O);B++){var K=_.getLine(R++);D=D==null?K:D+`
`+K}k*=2,A.lastIndex=T.ch;var L=A.exec(D);if(L){var $=D.slice(0,L.index).split(`
`),I=L[0].split(`
`),U=T.line+$.length-1,q=$[$.length-1].length;return{from:l(U,q),to:l(U+I.length-1,I.length==1?q+I[0].length:I[I.length-1].length),match:L}}}}function h(_,A,T){for(var D,k=0;k<=_.length;){A.lastIndex=k;var R=A.exec(_);if(!R)break;var O=R.index+R[0].length;if(O>_.length-T)break;(!D||O>D.index+D[0].length)&&(D=R),k=R.index+1}return D}function p(_,A,T){A=u(A,"g");for(var D=T.line,k=T.ch,R=_.firstLine();D>=R;D--,k=-1){var O=_.getLine(D),B=h(O,A,k<0?0:O.length-k);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function g(_,A,T){if(!f(A))return p(_,A,T);A=u(A,"gm");for(var D,k=1,R=_.getLine(T.line).length-T.ch,O=T.line,B=_.firstLine();O>=B;){for(var K=0;K<k&&O>=B;K++){var L=_.getLine(O--);D=D==null?L:L+`
`+D}k*=2;var $=h(D,A,R);if($){var I=D.slice(0,$.index).split(`
`),U=$[0].split(`
`),q=O+I.length,Y=I[I.length-1].length;return{from:l(q,Y),to:l(q+U.length-1,U.length==1?Y+U[0].length:U[U.length-1].length),match:$}}}}function v(_,A,T,D){if(_.length==A.length)return T;for(var k=0,R=T+Math.max(0,_.length-A.length);;){if(k==R)return k;var O=k+R>>1,B=D(_.slice(0,O)).length;if(B==T)return O;B>T?R=O:k=O+1}}function x(_,A,T,D){if(!A.length)return null;var k=D?o:a,R=k(A).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=_.lastLine()+1-R.length;O<=K;O++,B=0){var L=_.getLine(O).slice(B),$=k(L);if(R.length==1){var I=$.indexOf(R[0]);if(I==-1)continue e;return T=v(L,$,I,k)+B,{from:l(O,v(L,$,I,k)+B),to:l(O,v(L,$,I+R[0].length,k)+B)}}var U=$.length-R[0].length;if($.slice(U)==R[0]){for(var q=1;q<R.length-1;q++)if(k(_.getLine(O+q))!=R[q])continue e;var Y=_.getLine(O+R.length-1),X=k(Y),te=R[R.length-1];if(X.slice(0,te.length)==te)return{from:l(O,v(L,$,U,k)+B),to:l(O+R.length-1,v(Y,X,te.length,k))}}}}function y(_,A,T,D){if(!A.length)return null;var k=D?o:a,R=k(A).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=_.firstLine()-1+R.length;O>=K;O--,B=-1){var L=_.getLine(O);B>-1&&(L=L.slice(0,B));var $=k(L);if(R.length==1){var I=$.lastIndexOf(R[0]);if(I==-1)continue e;return{from:l(O,v(L,$,I,k)),to:l(O,v(L,$,I+R[0].length,k))}}var U=R[R.length-1];if($.slice(0,U.length)==U){var q=1;for(T=O-R.length+1;q<R.length-1;q++)if(k(_.getLine(T+q))!=R[q])continue e;var Y=_.getLine(O+1-R.length),X=k(Y);if(X.slice(X.length-R[0].length)==R[0])return{from:l(O+1-R.length,v(Y,X,Y.length-R[0].length,k)),to:l(O,v(L,$,U.length,k))}}}}function w(_,A,T,D){var k;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=_,T=T?_.clipPos(T):l(0,0),this.pos={from:T,to:T},typeof D=="object"?k=D.caseFold:(k=D,D=null),typeof A=="string"?(k==null&&(k=!1),this.matches=function(R,O){return(R?y:x)(_,A,O,k)}):(A=u(A,"gm"),D&&D.multiline===!1?this.matches=function(R,O){return(R?p:c)(_,A,O)}:this.matches=function(R,O){return(R?g:d)(_,A,O)})}String.prototype.normalize?(o=function(_){return _.normalize("NFD").toLowerCase()},a=function(_){return _.normalize("NFD")}):(o=function(_){return _.toLowerCase()},a=function(_){return _}),w.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(_){var A=this.doc.clipPos(_?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(A=l(A.line,A.ch),_?(A.ch--,A.ch<0&&(A.line--,A.ch=(this.doc.getLine(A.line)||"").length)):(A.ch++,A.ch>(this.doc.getLine(A.line)||"").length&&(A.ch=0,A.line++)),s.cmpPos(A,this.doc.clipPos(A))!=0))return this.atOccurrence=!1;var T=this.matches(_,A);if(this.afterEmptyMatch=T&&s.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var D=l(_?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:D,to:D},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(_,A){if(this.atOccurrence){var T=s.splitLines(_);this.doc.replaceRange(T,this.pos.from,this.pos.to,A),this.pos.to=l(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},s.defineExtension("getSearchCursor",function(_,A,T){return new w(this.doc,_,A,T)}),s.defineDocExtension("getSearchCursor",function(_,A,T){return new w(this,_,A,T)}),s.defineExtension("selectMatches",function(_,A){for(var T=[],D=this.getSearchCursor(_,this.getCursor("from"),A);D.findNext()&&!(s.cmpPos(D.to(),this.getCursor("to"))>0);)T.push({anchor:D.from(),head:D.to()});T.length&&this.setSelections(T,0)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(n,r,i){(function(s){function o(h){h.state.markedSelection&&h.operation(function(){(function(p){if(!p.somethingSelected())return c(p);if(p.listSelections().length>1)return d(p);var g=p.getCursor("start"),v=p.getCursor("end"),x=p.state.markedSelection;if(!x.length)return f(p,g,v);var y=x[0].find(),w=x[x.length-1].find();if(!y||!w||v.line-g.line<=8||u(g,w.to)>=0||u(v,y.from)<=0)return d(p);for(;u(g,y.from)>0;)x.shift().clear(),y=x[0].find();for(u(g,y.from)<0&&(y.to.line-g.line<8?(x.shift().clear(),f(p,g,y.to,0)):f(p,g,y.from,0));u(v,w.to)<0;)x.pop().clear(),w=x[x.length-1].find();u(v,w.to)>0&&(v.line-w.from.line<8?(x.pop().clear(),f(p,w.from,v)):f(p,w.to,v))})(h)})}function a(h){h.state.markedSelection&&h.state.markedSelection.length&&h.operation(function(){c(h)})}s.defineOption("styleSelectedText",!1,function(h,p,g){var v=g&&g!=s.Init;p&&!v?(h.state.markedSelection=[],h.state.markedSelectionStyle=typeof p=="string"?p:"CodeMirror-selectedtext",d(h),h.on("cursorActivity",o),h.on("change",a)):!p&&v&&(h.off("cursorActivity",o),h.off("change",a),c(h),h.state.markedSelection=h.state.markedSelectionStyle=null)});var l=s.Pos,u=s.cmpPos;function f(h,p,g,v){if(u(p,g)!=0)for(var x=h.state.markedSelection,y=h.state.markedSelectionStyle,w=p.line;;){var _=w==p.line?p:l(w,0),A=w+8,T=A>=g.line,D=T?g:l(A,0),k=h.markText(_,D,{className:y});if(v==null?x.push(k):x.splice(v++,0,k),T)break;w=A}}function c(h){for(var p=h.state.markedSelection,g=0;g<p.length;++g)p[g].clear();p.length=0}function d(h){c(h);for(var p=h.listSelections(),g=0;g<p.length;g++)f(h,p[g].from(),p[g].to())}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(n,r,i){(function(s,o){typeof i=="object"&&r!==void 0?r.exports=o():(s=s||self).CodeMirror=o()})(this,function(){var s=navigator.userAgent,o=navigator.platform,a=/gecko\/\d/i.test(s),l=/MSIE \d/.test(s),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),f=/Edge\/(\d+)/.exec(s),c=l||u||f,d=c&&(l?document.documentMode||6:+(f||u)[1]),h=!f&&/WebKit\//.test(s),p=h&&/Qt\/\d+\.\d+/.test(s),g=!f&&/Chrome\/(\d+)/.exec(s),v=g&&+g[1],x=/Opera\//.test(s),y=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),_=/PhantomJS/.test(s),A=y&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),T=/Android/.test(s),D=A||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),k=A||/Mac/.test(o),R=/\bCrOS\b/.test(s),O=/win/i.test(o),B=x&&s.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(x=!1,h=!0);var K=k&&(p||x&&(B==null||B<12.11)),L=a||c&&d>=9;function $(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var I,U=function(m,b){var S=m.className,E=$(b).exec(S);if(E){var C=S.slice(E.index+E[0].length);m.className=S.slice(0,E.index)+(C?E[1]+C:"")}};function q(m){for(var b=m.childNodes.length;b>0;--b)m.removeChild(m.firstChild);return m}function Y(m,b){return q(m).appendChild(b)}function X(m,b,S,E){var C=document.createElement(m);if(S&&(C.className=S),E&&(C.style.cssText=E),typeof b=="string")C.appendChild(document.createTextNode(b));else if(b)for(var M=0;M<b.length;++M)C.appendChild(b[M]);return C}function te(m,b,S,E){var C=X(m,b,S,E);return C.setAttribute("role","presentation"),C}function le(m,b){if(b.nodeType==3&&(b=b.parentNode),m.contains)return m.contains(b);do if(b.nodeType==11&&(b=b.host),b==m)return!0;while(b=b.parentNode)}function ee(m){var b;try{b=m.activeElement}catch{b=m.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function z(m,b){var S=m.className;$(b).test(S)||(m.className+=(S?" ":"")+b)}function he(m,b){for(var S=m.split(" "),E=0;E<S.length;E++)S[E]&&!$(S[E]).test(b)&&(b+=" "+S[E]);return b}I=document.createRange?function(m,b,S,E){var C=document.createRange();return C.setEnd(E||m,S),C.setStart(m,b),C}:function(m,b,S){var E=document.body.createTextRange();try{E.moveToElementText(m.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",S),E.moveStart("character",b),E};var de=function(m){m.select()};function ze(m){return m.display.wrapper.ownerDocument}function He(m){return ze(m).defaultView}function je(m){var b=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,b)}}function we(m,b,S){for(var E in b||(b={}),m)!m.hasOwnProperty(E)||S===!1&&b.hasOwnProperty(E)||(b[E]=m[E]);return b}function Ie(m,b,S,E,C){b==null&&(b=m.search(/[^\s\u00a0]/))==-1&&(b=m.length);for(var M=E||0,N=C||0;;){var j=m.indexOf("	",M);if(j<0||j>=b)return N+(b-M);N+=j-M,N+=S-N%S,M=j+1}}A?de=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:c&&(de=function(m){try{m.select()}catch{}});var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=je(this.onTimeout,this)};function Pe(m,b){for(var S=0;S<m.length;++S)if(m[S]==b)return S;return-1}qe.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},qe.prototype.set=function(m,b){this.f=b;var S=+new Date+m;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=S)};var At={toString:function(){return"CodeMirror.Pass"}},dt={scroll:!1},nn={origin:"*mouse"},Wt={origin:"+move"};function Mn(m,b,S){for(var E=0,C=0;;){var M=m.indexOf("	",E);M==-1&&(M=m.length);var N=M-E;if(M==m.length||C+N>=b)return E+Math.min(N,b-C);if(C+=M-E,E=M+1,(C+=S-C%S)>=b)return E}}var Ze=[""];function pe(m){for(;Ze.length<=m;)Ze.push(se(Ze)+" ");return Ze[m]}function se(m){return m[m.length-1]}function oe(m,b){for(var S=[],E=0;E<m.length;E++)S[E]=b(m[E],E);return S}function be(){}function F(m,b){var S;return Object.create?S=Object.create(m):(be.prototype=m,S=new be),b&&we(b,S),S}var H=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||H.test(m))}function re(m,b){return b?!!(b.source.indexOf("\\w")>-1&&J(m))||b.test(m):J(m)}function ye(m){for(var b in m)if(m.hasOwnProperty(b)&&m[b])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Re(m){return m.charCodeAt(0)>=768&&xe.test(m)}function P(m,b,S){for(;(S<0?b>0:b<m.length)&&Re(m.charAt(b));)b+=S;return b}function Q(m,b,S){for(var E=b>S?-1:1;;){if(b==S)return b;var C=(b+S)/2,M=E<0?Math.ceil(C):Math.floor(C);if(M==b)return m(M)?b:S;m(M)?S=M:b=M+E}}var ie=null;function ae(m,b,S){var E;ie=null;for(var C=0;C<m.length;++C){var M=m[C];if(M.from<b&&M.to>b)return C;M.to==b&&(M.from!=M.to&&S=="before"?E=C:ie=C),M.from==b&&(M.from!=M.to&&S!="before"?E=C:ie=C)}return E??ie}var ke=function(){var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b=/[stwN]/,S=/[LRr]/,E=/[Lb1n]/,C=/[1n]/;function M(N,j,V){this.level=N,this.from=j,this.to=V}return function(N,j){var V=j=="ltr"?"L":"R";if(N.length==0||j=="ltr"&&!m.test(N))return!1;for(var W,ce=N.length,fe=[],Se=0;Se<ce;++Se)fe.push((W=N.charCodeAt(Se))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(W):1424<=W&&W<=1524?"R":1536<=W&&W<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(W-1536):1774<=W&&W<=2220?"r":8192<=W&&W<=8203?"w":W==8204?"b":"L");for(var ve=0,$e=V;ve<ce;++ve){var Ne=fe[ve];Ne=="m"?fe[ve]=$e:$e=Ne}for(var Me=0,Ve=V;Me<ce;++Me){var nt=fe[Me];nt=="1"&&Ve=="r"?fe[Me]="n":S.test(nt)&&(Ve=nt,nt=="r"&&(fe[Me]="R"))}for(var Qe=1,pt=fe[0];Qe<ce-1;++Qe){var ct=fe[Qe];ct=="+"&&pt=="1"&&fe[Qe+1]=="1"?fe[Qe]="1":ct!=","||pt!=fe[Qe+1]||pt!="1"&&pt!="n"||(fe[Qe]=pt),pt=ct}for(var mt=0;mt<ce;++mt){var bn=fe[mt];if(bn==",")fe[mt]="N";else if(bn=="%"){var Mt=void 0;for(Mt=mt+1;Mt<ce&&fe[Mt]=="%";++Mt);for(var Hn=mt&&fe[mt-1]=="!"||Mt<ce&&fe[Mt]=="1"?"1":"N",fn=mt;fn<Mt;++fn)fe[fn]=Hn;mt=Mt-1}}for(var or=0,Nr=V;or<ce;++or){var ar=fe[or];Nr=="L"&&ar=="1"?fe[or]="L":S.test(ar)&&(Nr=ar)}for(var Zn=0;Zn<ce;++Zn)if(b.test(fe[Zn])){var lr=void 0;for(lr=Zn+1;lr<ce&&b.test(fe[lr]);++lr);for(var $n=(Zn?fe[Zn-1]:V)=="L",Br=$n==((lr<ce?fe[lr]:V)=="L")?$n?"L":"R":V,Fn=Zn;Fn<lr;++Fn)fe[Fn]=Br;Zn=lr-1}for(var Jn,Nn=[],vr=0;vr<ce;)if(E.test(fe[vr])){var lo=vr;for(++vr;vr<ce&&E.test(fe[vr]);++vr);Nn.push(new M(0,lo,vr))}else{var zr=vr,Ws=Nn.length,Ys=j=="rtl"?1:0;for(++vr;vr<ce&&fe[vr]!="L";++vr);for(var Ci=zr;Ci<vr;)if(C.test(fe[Ci])){zr<Ci&&(Nn.splice(Ws,0,new M(1,zr,Ci)),Ws+=Ys);var uo=Ci;for(++Ci;Ci<vr&&C.test(fe[Ci]);++Ci);Nn.splice(Ws,0,new M(2,uo,Ci)),Ws+=Ys,zr=Ci}else++Ci;zr<vr&&Nn.splice(Ws,0,new M(1,zr,vr))}return j=="ltr"&&(Nn[0].level==1&&(Jn=N.match(/^\s+/))&&(Nn[0].from=Jn[0].length,Nn.unshift(new M(0,0,Jn[0].length))),se(Nn).level==1&&(Jn=N.match(/\s+$/))&&(se(Nn).to-=Jn[0].length,Nn.push(new M(0,ce-Jn[0].length,ce)))),j=="rtl"?Nn.reverse():Nn}}();function Ce(m,b){var S=m.order;return S==null&&(S=m.order=ke(m.text,b)),S}var Ee=[],De=function(m,b,S){if(m.addEventListener)m.addEventListener(b,S,!1);else if(m.attachEvent)m.attachEvent("on"+b,S);else{var E=m._handlers||(m._handlers={});E[b]=(E[b]||Ee).concat(S)}};function Oe(m,b){return m._handlers&&m._handlers[b]||Ee}function We(m,b,S){if(m.removeEventListener)m.removeEventListener(b,S,!1);else if(m.detachEvent)m.detachEvent("on"+b,S);else{var E=m._handlers,C=E&&E[b];if(C){var M=Pe(C,S);M>-1&&(E[b]=C.slice(0,M).concat(C.slice(M+1)))}}}function tt(m,b){var S=Oe(m,b);if(S.length)for(var E=Array.prototype.slice.call(arguments,2),C=0;C<S.length;++C)S[C].apply(null,E)}function bt(m,b,S){return typeof b=="string"&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),tt(m,S||b.type,m,b),on(b)||b.codemirrorIgnore}function Pt(m){var b=m._handlers&&m._handlers.cursorActivity;if(b)for(var S=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),E=0;E<b.length;++E)Pe(S,b[E])==-1&&S.push(b[E])}function _t(m,b){return Oe(m,b).length>0}function Kt(m){m.prototype.on=function(b,S){De(this,b,S)},m.prototype.off=function(b,S){We(this,b,S)}}function sn(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function rn(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function on(m){return m.defaultPrevented!=null?m.defaultPrevented:m.returnValue==0}function vn(m){sn(m),rn(m)}function Er(m){return m.target||m.srcElement}function Ji(m){var b=m.which;return b==null&&(1&m.button?b=1:2&m.button?b=3:4&m.button&&(b=2)),k&&m.ctrlKey&&b==1&&(b=3),b}var ds,Gi,No=function(){if(c&&d<9)return!1;var m=X("div");return"draggable"in m||"dragDrop"in m}();function qn(m){if(ds==null){var b=X("span","");Y(m,X("span",[b,document.createTextNode("x")])),m.firstChild.offsetHeight!=0&&(ds=b.offsetWidth<=1&&b.offsetHeight>2&&!(c&&d<8))}var S=ds?X("span",""):X("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}function Mr(m){if(Gi!=null)return Gi;var b=Y(m,document.createTextNode("AA")),S=I(b,0,1).getBoundingClientRect(),E=I(b,1,2).getBoundingClientRect();return q(m),!(!S||S.left==S.right)&&(Gi=E.right-S.right<3)}var Lr,yn=`

b`.split(/\n/).length!=3?function(m){for(var b=0,S=[],E=m.length;b<=E;){var C=m.indexOf(`
`,b);C==-1&&(C=m.length);var M=m.slice(b,m.charAt(C-1)=="\r"?C-1:C),N=M.indexOf("\r");N!=-1?(S.push(M.slice(0,N)),b+=N+1):(S.push(M),b=C+1)}return S}:function(m){return m.split(/\r\n?|\n/)},Kr=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch{return!1}}:function(m){var b;try{b=m.ownerDocument.selection.createRange()}catch{}return!(!b||b.parentElement()!=m)&&b.compareEndPoints("StartToEnd",b)!=0},ir="oncopy"in(Lr=X("div"))||(Lr.setAttribute("oncopy","return;"),typeof Lr.oncopy=="function"),Ni=null,tr={},$r={};function to(m,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),tr[m]=b}function ge(m){if(typeof m=="string"&&$r.hasOwnProperty(m))m=$r[m];else if(m&&typeof m.name=="string"&&$r.hasOwnProperty(m.name)){var b=$r[m.name];typeof b=="string"&&(b={name:b}),(m=F(b,m)).name=b.name}else{if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return ge("application/xml");if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return ge("application/json")}return typeof m=="string"?{name:m}:m||{name:"null"}}function Le(m,b){b=ge(b);var S=tr[b.name];if(!S)return Le(m,"text/plain");var E=S(m,b);if(it.hasOwnProperty(b.name)){var C=it[b.name];for(var M in C)C.hasOwnProperty(M)&&(E.hasOwnProperty(M)&&(E["_"+M]=E[M]),E[M]=C[M])}if(E.name=b.name,b.helperType&&(E.helperType=b.helperType),b.modeProps)for(var N in b.modeProps)E[N]=b.modeProps[N];return E}var it={};function Je(m,b){we(b,it.hasOwnProperty(m)?it[m]:it[m]={})}function Et(m,b){if(b===!0)return b;if(m.copyState)return m.copyState(b);var S={};for(var E in b){var C=b[E];C instanceof Array&&(C=C.concat([])),S[E]=C}return S}function an(m,b){for(var S;m.innerMode&&(S=m.innerMode(b))&&S.mode!=m;)b=S.state,m=S.mode;return S||{mode:m,state:b}}function en(m,b,S){return!m.startState||m.startState(b,S)}var xt=function(m,b,S){this.pos=this.start=0,this.string=m,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};function et(m,b){if((b-=m.first)<0||b>=m.size)throw new Error("There is no line "+(b+m.first)+" in the document.");for(var S=m;!S.lines;)for(var E=0;;++E){var C=S.children[E],M=C.chunkSize();if(b<M){S=C;break}b-=M}return S.lines[b]}function pn(m,b,S){var E=[],C=b.line;return m.iter(b.line,S.line+1,function(M){var N=M.text;C==S.line&&(N=N.slice(0,S.ch)),C==b.line&&(N=N.slice(b.ch)),E.push(N),++C}),E}function Cn(m,b,S){var E=[];return m.iter(b,S,function(C){E.push(C.text)}),E}function Ut(m,b){var S=b-m.height;if(S)for(var E=m;E;E=E.parent)E.height+=S}function qt(m){if(m.parent==null)return null;for(var b=m.parent,S=Pe(b.lines,m),E=b.parent;E;b=E,E=E.parent)for(var C=0;E.children[C]!=b;++C)S+=E.children[C].chunkSize();return S+b.first}function Sr(m,b){var S=m.first;e:do{for(var E=0;E<m.children.length;++E){var C=m.children[E],M=C.height;if(b<M){m=C;continue e}b-=M,S+=C.chunkSize()}return S}while(!m.lines);for(var N=0;N<m.lines.length;++N){var j=m.lines[N].height;if(b<j)break;b-=j}return S+N}function ci(m,b){return b>=m.first&&b<m.first+m.size}function Jt(m,b){return String(m.lineNumberFormatter(b+m.firstLineNumber))}function Xe(m,b,S){if(S===void 0&&(S=null),!(this instanceof Xe))return new Xe(m,b,S);this.line=m,this.ch=b,this.sticky=S}function ht(m,b){return m.line-b.line||m.ch-b.ch}function Xn(m,b){return m.sticky==b.sticky&&ht(m,b)==0}function ni(m){return Xe(m.line,m.ch)}function Ar(m,b){return ht(m,b)<0?b:m}function Rr(m,b){return ht(m,b)<0?m:b}function nr(m,b){return Math.max(m.first,Math.min(b,m.first+m.size-1))}function Gt(m,b){if(b.line<m.first)return Xe(m.first,0);var S=m.first+m.size-1;return b.line>S?Xe(S,et(m,S).text.length):function(E,C){var M=E.ch;return M==null||M>C?Xe(E.line,C):M<0?Xe(E.line,0):E}(b,et(m,b.line).text.length)}function vi(m,b){for(var S=[],E=0;E<b.length;E++)S[E]=Gt(m,b[E]);return S}xt.prototype.eol=function(){return this.pos>=this.string.length},xt.prototype.sol=function(){return this.pos==this.lineStart},xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},xt.prototype.eat=function(m){var b=this.string.charAt(this.pos);if(typeof m=="string"?b==m:b&&(m.test?m.test(b):m(b)))return++this.pos,b},xt.prototype.eatWhile=function(m){for(var b=this.pos;this.eat(m););return this.pos>b},xt.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},xt.prototype.skipToEnd=function(){this.pos=this.string.length},xt.prototype.skipTo=function(m){var b=this.string.indexOf(m,this.pos);if(b>-1)return this.pos=b,!0},xt.prototype.backUp=function(m){this.pos-=m},xt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ie(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},xt.prototype.indentation=function(){return Ie(this.string,null,this.tabSize)-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},xt.prototype.match=function(m,b,S){if(typeof m!="string"){var E=this.string.slice(this.pos).match(m);return E&&E.index>0?null:(E&&b!==!1&&(this.pos+=E[0].length),E)}var C=function(M){return S?M.toLowerCase():M};if(C(this.string.substr(this.pos,m.length))==C(m))return b!==!1&&(this.pos+=m.length),!0},xt.prototype.current=function(){return this.string.slice(this.start,this.pos)},xt.prototype.hideFirstChars=function(m,b){this.lineStart+=m;try{return b()}finally{this.lineStart-=m}},xt.prototype.lookAhead=function(m){var b=this.lineOracle;return b&&b.lookAhead(m)},xt.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};var Qi=function(m,b){this.state=m,this.lookAhead=b},bi=function(m,b,S,E){this.state=b,this.doc=m,this.line=S,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};function js(m,b,S,E){var C=[m.state.modeGen],M={};al(m,b.text,m.doc.mode,S,function(W,ce){return C.push(W,ce)},M,E);for(var N=S.state,j=function(W){S.baseTokens=C;var ce=m.state.overlays[W],fe=1,Se=0;S.state=!0,al(m,b.text,ce.mode,S,function(ve,$e){for(var Ne=fe;Se<ve;){var Me=C[fe];Me>ve&&C.splice(fe,1,ve,C[fe+1],Me),fe+=2,Se=Math.min(ve,Me)}if($e)if(ce.opaque)C.splice(Ne,fe-Ne,ve,"overlay "+$e),fe=Ne+2;else for(;Ne<fe;Ne+=2){var Ve=C[Ne+1];C[Ne+1]=(Ve?Ve+" ":"")+"overlay "+$e}},M),S.state=N,S.baseTokens=null,S.baseTokenPos=1},V=0;V<m.state.overlays.length;++V)j(V);return{styles:C,classes:M.bgClass||M.textClass?M:null}}function xo(m,b,S){if(!b.styles||b.styles[0]!=m.state.modeGen){var E=no(m,qt(b)),C=b.text.length>m.options.maxHighlightLength&&Et(m.doc.mode,E.state),M=js(m,b,E);C&&(E.state=C),b.stateAfter=E.save(!C),b.styles=M.styles,M.classes?b.styleClasses=M.classes:b.styleClasses&&(b.styleClasses=null),S===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return b.styles}function no(m,b,S){var E=m.doc,C=m.display;if(!E.mode.startState)return new bi(E,!0,b);var M=function(V,W,ce){for(var fe,Se,ve=V.doc,$e=ce?-1:W-(V.doc.mode.innerMode?1e3:100),Ne=W;Ne>$e;--Ne){if(Ne<=ve.first)return ve.first;var Me=et(ve,Ne-1),Ve=Me.stateAfter;if(Ve&&(!ce||Ne+(Ve instanceof Qi?Ve.lookAhead:0)<=ve.modeFrontier))return Ne;var nt=Ie(Me.text,null,V.options.tabSize);(Se==null||fe>nt)&&(Se=Ne-1,fe=nt)}return Se}(m,b,S),N=M>E.first&&et(E,M-1).stateAfter,j=N?bi.fromSaved(E,N,M):new bi(E,en(E.mode),M);return E.iter(M,b,function(V){Bo(m,V.text,j);var W=j.line;V.stateAfter=W==b-1||W%5==0||W>=C.viewFrom&&W<C.viewTo?j.save():null,j.nextLine()}),S&&(E.modeFrontier=j.line),j}function Bo(m,b,S,E){var C=m.doc.mode,M=new xt(b,m.options.tabSize,S);for(M.start=M.pos=E||0,b==""&&bs(C,S.state);!M.eol();)Fs(C,M,S.state),M.start=M.pos}function bs(m,b){if(m.blankLine)return m.blankLine(b);if(m.innerMode){var S=an(m,b);return S.mode.blankLine?S.mode.blankLine(S.state):void 0}}function Fs(m,b,S,E){for(var C=0;C<10;C++){E&&(E[0]=an(m,S).mode);var M=m.token(b,S);if(b.pos>b.start)return M}throw new Error("Mode "+m.name+" failed to advance stream.")}bi.prototype.lookAhead=function(m){var b=this.doc.getLine(this.line+m);return b!=null&&m>this.maxLookAhead&&(this.maxLookAhead=m),b},bi.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},bi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},bi.fromSaved=function(m,b,S){return b instanceof Qi?new bi(m,Et(m.mode,b.state),S,b.lookAhead):new bi(m,Et(m.mode,b),S)},bi.prototype.save=function(m){var b=m!==!1?Et(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Qi(b,this.maxLookAhead):b};var zo=function(m,b,S){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=b||null,this.state=S};function hs(m,b,S,E){var C,M,N=m.doc,j=N.mode,V=et(N,(b=Gt(N,b)).line),W=no(m,b.line,S),ce=new xt(V.text,m.options.tabSize,W);for(E&&(M=[]);(E||ce.pos<b.ch)&&!ce.eol();)ce.start=ce.pos,C=Fs(j,ce,W.state),E&&M.push(new zo(ce,C,Et(N.mode,W.state)));return E?M:new zo(ce,C,W.state)}function ol(m,b){if(m)for(;;){var S=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;m=m.slice(0,S.index)+m.slice(S.index+S[0].length);var E=S[1]?"bgClass":"textClass";b[E]==null?b[E]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(b[E])||(b[E]+=" "+S[2])}return m}function al(m,b,S,E,C,M,N){var j=S.flattenSpans;j==null&&(j=m.options.flattenSpans);var V,W=0,ce=null,fe=new xt(b,m.options.tabSize,E),Se=m.options.addModeClass&&[null];for(b==""&&ol(bs(S,E.state),M);!fe.eol();){if(fe.pos>m.options.maxHighlightLength?(j=!1,N&&Bo(m,b,E,fe.pos),fe.pos=b.length,V=null):V=ol(Fs(S,fe,E.state,Se),M),Se){var ve=Se[0].name;ve&&(V="m-"+(V?ve+" "+V:ve))}if(!j||ce!=V){for(;W<fe.start;)C(W=Math.min(fe.start,W+5e3),ce);ce=V}fe.start=fe.pos}for(;W<fe.pos;){var $e=Math.min(fe.pos,W+5e3);C($e,ce),W=$e}}var Cr=!1,es=!1;function ro(m,b,S){this.marker=m,this.from=b,this.to=S}function Os(m,b){if(m)for(var S=0;S<m.length;++S){var E=m[S];if(E.marker==b)return E}}function Us(m,b){for(var S,E=0;E<m.length;++E)m[E]!=b&&(S||(S=[])).push(m[E]);return S}function fa(m,b){if(b.full)return null;var S=ci(m,b.from.line)&&et(m,b.from.line).markedSpans,E=ci(m,b.to.line)&&et(m,b.to.line).markedSpans;if(!S&&!E)return null;var C=b.from.ch,M=b.to.ch,N=ht(b.from,b.to)==0,j=function(ct,mt,bn){var Mt;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],or=fn.marker;if(fn.from==null||(or.inclusiveLeft?fn.from<=mt:fn.from<mt)||fn.from==mt&&or.type=="bookmark"&&(!bn||!fn.marker.insertLeft)){var Nr=fn.to==null||(or.inclusiveRight?fn.to>=mt:fn.to>mt);(Mt||(Mt=[])).push(new ro(or,fn.from,Nr?null:fn.to))}}return Mt}(S,C,N),V=function(ct,mt,bn){var Mt;if(ct)for(var Hn=0;Hn<ct.length;++Hn){var fn=ct[Hn],or=fn.marker;if(fn.to==null||(or.inclusiveRight?fn.to>=mt:fn.to>mt)||fn.from==mt&&or.type=="bookmark"&&(!bn||fn.marker.insertLeft)){var Nr=fn.from==null||(or.inclusiveLeft?fn.from<=mt:fn.from<mt);(Mt||(Mt=[])).push(new ro(or,Nr?null:fn.from-mt,fn.to==null?null:fn.to-mt))}}return Mt}(E,M,N),W=b.text.length==1,ce=se(b.text).length+(W?C:0);if(j)for(var fe=0;fe<j.length;++fe){var Se=j[fe];if(Se.to==null){var ve=Os(V,Se.marker);ve?W&&(Se.to=ve.to==null?null:ve.to+ce):Se.to=C}}if(V)for(var $e=0;$e<V.length;++$e){var Ne=V[$e];Ne.to!=null&&(Ne.to+=ce),Ne.from==null?Os(j,Ne.marker)||(Ne.from=ce,W&&(j||(j=[])).push(Ne)):(Ne.from+=ce,W&&(j||(j=[])).push(Ne))}j&&(j=qs(j)),V&&V!=j&&(V=qs(V));var Me=[j];if(!W){var Ve,nt=b.text.length-2;if(nt>0&&j)for(var Qe=0;Qe<j.length;++Qe)j[Qe].to==null&&(Ve||(Ve=[])).push(new ro(j[Qe].marker,null,null));for(var pt=0;pt<nt;++pt)Me.push(Ve);Me.push(V)}return Me}function qs(m){for(var b=0;b<m.length;++b){var S=m[b];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&m.splice(b--,1)}return m.length?m:null}function ll(m){var b=m.markedSpans;if(b){for(var S=0;S<b.length;++S)b[S].marker.detachLine(m);m.markedSpans=null}}function Vi(m,b){if(b){for(var S=0;S<b.length;++S)b[S].marker.attachLine(m);m.markedSpans=b}}function Wi(m){return m.inclusiveLeft?-1:0}function io(m){return m.inclusiveRight?1:0}function ps(m,b){var S=m.lines.length-b.lines.length;if(S!=0)return S;var E=m.find(),C=b.find(),M=ht(E.from,C.from)||Wi(m)-Wi(b);if(M)return-M;var N=ht(E.to,C.to)||io(m)-io(b);return N||b.id-m.id}function jo(m,b){var S,E=es&&m.markedSpans;if(E)for(var C=void 0,M=0;M<E.length;++M)(C=E[M]).marker.collapsed&&(b?C.from:C.to)==null&&(!S||ps(S,C.marker)<0)&&(S=C.marker);return S}function Hs(m){return jo(m,!0)}function fi(m){return jo(m,!1)}function Ma(m,b){var S,E=es&&m.markedSpans;if(E)for(var C=0;C<E.length;++C){var M=E[C];M.marker.collapsed&&(M.from==null||M.from<b)&&(M.to==null||M.to>b)&&(!S||ps(S,M.marker)<0)&&(S=M.marker)}return S}function so(m,b,S,E,C){var M=et(m,b),N=es&&M.markedSpans;if(N)for(var j=0;j<N.length;++j){var V=N[j];if(V.marker.collapsed){var W=V.marker.find(0),ce=ht(W.from,S)||Wi(V.marker)-Wi(C),fe=ht(W.to,E)||io(V.marker)-io(C);if(!(ce>=0&&fe<=0||ce<=0&&fe>=0)&&(ce<=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?ht(W.to,S)>=0:ht(W.to,S)>0)||ce>=0&&(V.marker.inclusiveRight&&C.inclusiveLeft?ht(W.from,E)<=0:ht(W.from,E)<0)))return!0}}}function Yi(m){for(var b;b=Hs(m);)m=b.find(-1,!0).line;return m}function oo(m,b){var S=et(m,b),E=Yi(S);return S==E?b:qt(E)}function ul(m,b){if(b>m.lastLine())return b;var S,E=et(m,b);if(!Vt(m,E))return b;for(;S=fi(E);)E=S.find(1,!0).line;return qt(E)+1}function Vt(m,b){var S=es&&b.markedSpans;if(S){for(var E=void 0,C=0;C<S.length;++C)if((E=S[C]).marker.collapsed&&(E.from==null||!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&Z(m,b,E)))return!0}}function Z(m,b,S){if(S.to==null){var E=S.marker.find(1,!0);return Z(m,E.line,Os(E.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==b.text.length)return!0;for(var C=void 0,M=0;M<b.markedSpans.length;++M)if((C=b.markedSpans[M]).marker.collapsed&&!C.marker.widgetNode&&C.from==S.to&&(C.to==null||C.to!=S.from)&&(C.marker.inclusiveLeft||S.marker.inclusiveRight)&&Z(m,b,C))return!0}function me(m){for(var b=0,S=(m=Yi(m)).parent,E=0;E<S.lines.length;++E){var C=S.lines[E];if(C==m)break;b+=C.height}for(var M=S.parent;M;M=(S=M).parent)for(var N=0;N<M.children.length;++N){var j=M.children[N];if(j==S)break;b+=j.height}return b}function Be(m){if(m.height==0)return 0;for(var b,S=m.text.length,E=m;b=Hs(E);){var C=b.find(0,!0);E=C.from.line,S+=C.from.ch-C.to.ch}for(E=m;b=fi(E);){var M=b.find(0,!0);S-=E.text.length-M.from.ch,S+=(E=M.to.line).text.length-M.to.ch}return S}function gt(m){var b=m.display,S=m.doc;b.maxLine=et(S,S.first),b.maxLineLength=Be(b.maxLine),b.maxLineChanged=!0,S.iter(function(E){var C=Be(E);C>b.maxLineLength&&(b.maxLineLength=C,b.maxLine=E)})}var mn=function(m,b,S){this.text=m,Vi(this,b),this.height=S?S(this):1};function Nt(m){m.parent=null,ll(m)}mn.prototype.lineNo=function(){return qt(this)},Kt(mn);var In={},dr={};function kr(m,b){if(!m||/^\s*$/.test(m))return null;var S=b.addModeClass?dr:In;return S[m]||(S[m]=m.replace(/\S+/g,"cm-$&"))}function Ln(m,b){var S=te("span",null,null,h?"padding-right: .1px":null),E={pre:te("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};b.measure={};for(var C=0;C<=(b.rest?b.rest.length:0);C++){var M=C?b.rest[C-1]:b.line,N=void 0;E.pos=0,E.addToken=Jr,Mr(m.display.measure)&&(N=Ce(M,m.doc.direction))&&(E.addToken=sr(E.addToken,N)),E.map=[],xs(M,E,xo(m,M,b!=m.display.externalMeasured&&qt(M))),M.styleClasses&&(M.styleClasses.bgClass&&(E.bgClass=he(M.styleClasses.bgClass,E.bgClass||"")),M.styleClasses.textClass&&(E.textClass=he(M.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(qn(m.display.measure))),C==0?(b.measure.map=E.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(E.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(h){var j=E.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return tt(m,"renderLine",m,b.line,E.pre),E.pre.className&&(E.textClass=he(E.pre.className,E.textClass||"")),E}function Ai(m){var b=X("span","","cm-invalidchar");return b.title="\\u"+m.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function Jr(m,b,S,E,C,M,N){if(b){var j,V=m.splitSpaces?function(ct,mt){if(ct.length>1&&!/  /.test(ct))return ct;for(var bn=mt,Mt="",Hn=0;Hn<ct.length;Hn++){var fn=ct.charAt(Hn);fn!=" "||!bn||Hn!=ct.length-1&&ct.charCodeAt(Hn+1)!=32||(fn=""),Mt+=fn,bn=fn==" "}return Mt}(b,m.trailingSpace):b,W=m.cm.state.specialChars,ce=!1;if(W.test(b)){j=document.createDocumentFragment();for(var fe=0;;){W.lastIndex=fe;var Se=W.exec(b),ve=Se?Se.index-fe:b.length-fe;if(ve){var $e=document.createTextNode(V.slice(fe,fe+ve));c&&d<9?j.appendChild(X("span",[$e])):j.appendChild($e),m.map.push(m.pos,m.pos+ve,$e),m.col+=ve,m.pos+=ve}if(!Se)break;fe+=ve+1;var Ne=void 0;if(Se[0]=="	"){var Me=m.cm.options.tabSize,Ve=Me-m.col%Me;(Ne=j.appendChild(X("span",pe(Ve),"cm-tab"))).setAttribute("role","presentation"),Ne.setAttribute("cm-text","	"),m.col+=Ve}else Se[0]=="\r"||Se[0]==`
`?((Ne=j.appendChild(X("span",Se[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",Se[0]),m.col+=1):((Ne=m.cm.options.specialCharPlaceholder(Se[0])).setAttribute("cm-text",Se[0]),c&&d<9?j.appendChild(X("span",[Ne])):j.appendChild(Ne),m.col+=1);m.map.push(m.pos,m.pos+1,Ne),m.pos++}}else m.col+=b.length,j=document.createTextNode(V),m.map.push(m.pos,m.pos+b.length,j),c&&d<9&&(ce=!0),m.pos+=b.length;if(m.trailingSpace=V.charCodeAt(b.length-1)==32,S||E||C||ce||M||N){var nt=S||"";E&&(nt+=E),C&&(nt+=C);var Qe=X("span",[j],nt,M);if(N)for(var pt in N)N.hasOwnProperty(pt)&&pt!="style"&&pt!="class"&&Qe.setAttribute(pt,N[pt]);return m.content.appendChild(Qe)}m.content.appendChild(j)}}function sr(m,b){return function(S,E,C,M,N,j,V){C=C?C+" cm-force-border":"cm-force-border";for(var W=S.pos,ce=W+E.length;;){for(var fe=void 0,Se=0;Se<b.length&&!((fe=b[Se]).to>W&&fe.from<=W);Se++);if(fe.to>=ce)return m(S,E,C,M,N,j,V);m(S,E.slice(0,fe.to-W),C,M,null,j,V),M=null,E=E.slice(fe.to-W),W=fe.to}}}function di(m,b,S,E){var C=!E&&S.widgetNode;C&&m.map.push(m.pos,m.pos+b,C),!E&&m.cm.display.input.needsContentAttribute&&(C||(C=m.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",S.id)),C&&(m.cm.display.input.setUneditable(C),m.content.appendChild(C)),m.pos+=b,m.trailingSpace=!1}function xs(m,b,S){var E=m.markedSpans,C=m.text,M=0;if(E)for(var N,j,V,W,ce,fe,Se,ve=C.length,$e=0,Ne=1,Me="",Ve=0;;){if(Ve==$e){V=W=ce=j="",Se=null,fe=null,Ve=1/0;for(var nt=[],Qe=void 0,pt=0;pt<E.length;++pt){var ct=E[pt],mt=ct.marker;if(mt.type=="bookmark"&&ct.from==$e&&mt.widgetNode)nt.push(mt);else if(ct.from<=$e&&(ct.to==null||ct.to>$e||mt.collapsed&&ct.to==$e&&ct.from==$e)){if(ct.to!=null&&ct.to!=$e&&Ve>ct.to&&(Ve=ct.to,W=""),mt.className&&(V+=" "+mt.className),mt.css&&(j=(j?j+";":"")+mt.css),mt.startStyle&&ct.from==$e&&(ce+=" "+mt.startStyle),mt.endStyle&&ct.to==Ve&&(Qe||(Qe=[])).push(mt.endStyle,ct.to),mt.title&&((Se||(Se={})).title=mt.title),mt.attributes)for(var bn in mt.attributes)(Se||(Se={}))[bn]=mt.attributes[bn];mt.collapsed&&(!fe||ps(fe.marker,mt)<0)&&(fe=ct)}else ct.from>$e&&Ve>ct.from&&(Ve=ct.from)}if(Qe)for(var Mt=0;Mt<Qe.length;Mt+=2)Qe[Mt+1]==Ve&&(W+=" "+Qe[Mt]);if(!fe||fe.from==$e)for(var Hn=0;Hn<nt.length;++Hn)di(b,0,nt[Hn]);if(fe&&(fe.from||0)==$e){if(di(b,(fe.to==null?ve+1:fe.to)-$e,fe.marker,fe.from==null),fe.to==null)return;fe.to==$e&&(fe=!1)}}if($e>=ve)break;for(var fn=Math.min(ve,Ve);;){if(Me){var or=$e+Me.length;if(!fe){var Nr=or>fn?Me.slice(0,fn-$e):Me;b.addToken(b,Nr,N?N+V:V,ce,$e+Nr.length==Ve?W:"",j,Se)}if(or>=fn){Me=Me.slice(fn-$e),$e=fn;break}$e=or,ce=""}Me=C.slice(M,M=S[Ne++]),N=kr(S[Ne++],b.cm.options)}}else for(var ar=1;ar<S.length;ar+=2)b.addToken(b,C.slice(M,M=S[ar]),kr(S[ar+1],b.cm.options))}function Gs(m,b,S){this.line=b,this.rest=function(E){for(var C,M;C=fi(E);)E=C.find(1,!0).line,(M||(M=[])).push(E);return M}(b),this.size=this.rest?qt(se(this.rest))-S+1:1,this.node=this.text=null,this.hidden=Vt(m,b)}function Bi(m,b,S){for(var E,C=[],M=b;M<S;M=E){var N=new Gs(m.doc,et(m.doc,M),M);E=M+N.size,C.push(N)}return C}var zi=null,wo=null;function Gr(m,b){var S=Oe(m,b);if(S.length){var E,C=Array.prototype.slice.call(arguments,2);zi?E=zi.delayedCallbacks:wo?E=wo:(E=wo=[],setTimeout(da,0));for(var M=function(j){E.push(function(){return S[j].apply(null,C)})},N=0;N<S.length;++N)M(N)}}function da(){var m=wo;wo=null;for(var b=0;b<m.length;++b)m[b]()}function Vu(m,b,S,E){for(var C=0;C<b.changes.length;C++){var M=b.changes[C];M=="text"?Yc(m,b):M=="gutter"?ne(m,b,S,E):M=="class"?Wu(m,b):M=="widget"&&_e(m,b,E)}b.changes=null}function cl(m){return m.node==m.text&&(m.node=X("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),c&&d<8&&(m.node.style.zIndex=2)),m.node}function fl(m,b){var S=m.display.externalMeasured;return S&&S.line==b.line?(m.display.externalMeasured=null,b.measure=S.measure,S.built):Ln(m,b)}function Yc(m,b){var S=b.text.className,E=fl(m,b);b.text==b.node&&(b.node=E.pre),b.text.parentNode.replaceChild(E.pre,b.text),b.text=E.pre,E.bgClass!=b.bgClass||E.textClass!=b.textClass?(b.bgClass=E.bgClass,b.textClass=E.textClass,Wu(m,b)):S&&(b.text.className=S)}function Wu(m,b){(function(E,C){var M=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(M&&(M+=" CodeMirror-linebackground"),C.background)M?C.background.className=M:(C.background.parentNode.removeChild(C.background),C.background=null);else if(M){var N=cl(C);C.background=N.insertBefore(X("div",null,M),N.firstChild),E.display.input.setUneditable(C.background)}})(m,b),b.line.wrapClass?cl(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var S=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=S||""}function ne(m,b,S,E){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var C=cl(b);b.gutterBackground=X("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(m.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),m.display.input.setUneditable(b.gutterBackground),C.insertBefore(b.gutterBackground,b.text)}var M=b.line.gutterMarkers;if(m.options.lineNumbers||M){var N=cl(b),j=b.gutter=X("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(j.setAttribute("aria-hidden","true"),m.display.input.setUneditable(j),N.insertBefore(j,b.text),b.line.gutterClass&&(j.className+=" "+b.line.gutterClass),!m.options.lineNumbers||M&&M["CodeMirror-linenumbers"]||(b.lineNumber=j.appendChild(X("div",Jt(m.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),M)for(var V=0;V<m.display.gutterSpecs.length;++V){var W=m.display.gutterSpecs[V].className,ce=M.hasOwnProperty(W)&&M[W];ce&&j.appendChild(X("div",[ce],"CodeMirror-gutter-elt","left: "+E.gutterLeft[W]+"px; width: "+E.gutterWidth[W]+"px"))}}}function _e(m,b,S){b.alignable&&(b.alignable=null);for(var E=$("CodeMirror-linewidget"),C=b.node.firstChild,M=void 0;C;C=M)M=C.nextSibling,E.test(C.className)&&b.node.removeChild(C);yt(m,b,S)}function Ye(m,b,S,E){var C=fl(m,b);return b.text=b.node=C.pre,C.bgClass&&(b.bgClass=C.bgClass),C.textClass&&(b.textClass=C.textClass),Wu(m,b),ne(m,b,S,E),yt(m,b,E),b.node}function yt(m,b,S){if(Qt(m,b.line,b,S,!0),b.rest)for(var E=0;E<b.rest.length;E++)Qt(m,b.rest[E],b,S,!1)}function Qt(m,b,S,E,C){if(b.widgets)for(var M=cl(S),N=0,j=b.widgets;N<j.length;++N){var V=j[N],W=X("div",[V.node],"CodeMirror-linewidget"+(V.className?" "+V.className:""));V.handleMouseEvents||W.setAttribute("cm-ignore-events","true"),Ht(V,W,S,E),m.display.input.setUneditable(W),C&&V.above?M.insertBefore(W,S.gutter||S.text):M.appendChild(W),Gr(V,"redraw")}}function Ht(m,b,S,E){if(m.noHScroll){(S.alignable||(S.alignable=[])).push(b);var C=E.wrapperWidth;b.style.left=E.fixedPos+"px",m.coverGutter||(C-=E.gutterTotalWidth,b.style.paddingLeft=E.gutterTotalWidth+"px"),b.style.width=C+"px"}m.coverGutter&&(b.style.zIndex=5,b.style.position="relative",m.noHScroll||(b.style.marginLeft=-E.gutterTotalWidth+"px"))}function An(m){if(m.height!=null)return m.height;var b=m.doc.cm;if(!b)return 0;if(!le(document.body,m.node)){var S="position: relative;";m.coverGutter&&(S+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),m.noHScroll&&(S+="width: "+b.display.wrapper.clientWidth+"px;"),Y(b.display.measure,X("div",[m.node],null,S))}return m.height=m.node.parentNode.offsetHeight}function pr(m,b){for(var S=Er(b);S!=m.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==m.sizer&&S!=m.mover)return!0}function Ir(m){return m.lineSpace.offsetTop}function ts(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function ws(m){if(m.cachedPaddingH)return m.cachedPaddingH;var b=Y(m.measure,X("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,E={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return isNaN(E.left)||isNaN(E.right)||(m.cachedPaddingH=E),E}function xi(m){return 50-m.display.nativeBarWidth}function Li(m){return m.display.scroller.clientWidth-xi(m)-m.display.barWidth}function Te(m){return m.display.scroller.clientHeight-xi(m)-m.display.barHeight}function ut(m,b,S){if(m.line==b)return{map:m.measure.map,cache:m.measure.cache};if(m.rest){for(var E=0;E<m.rest.length;E++)if(m.rest[E]==b)return{map:m.measure.maps[E],cache:m.measure.caches[E]};for(var C=0;C<m.rest.length;C++)if(qt(m.rest[C])>S)return{map:m.measure.maps[C],cache:m.measure.caches[C],before:!0}}}function Yt(m,b,S,E){return Pn(m,mr(m,b),S,E)}function Vn(m,b){if(b>=m.display.viewFrom&&b<m.display.viewTo)return m.display.view[Zc(m,b)];var S=m.display.externalMeasured;return S&&b>=S.lineN&&b<S.lineN+S.size?S:void 0}function mr(m,b){var S=qt(b),E=Vn(m,S);E&&!E.text?E=null:E&&E.changes&&(Vu(m,E,S,ey(m)),m.curOp.forceUpdate=!0),E||(E=function(M,N){var j=qt(N=Yi(N)),V=M.display.externalMeasured=new Gs(M.doc,N,j);V.lineN=j;var W=V.built=Ln(M,V);return V.text=W.pre,Y(M.display.lineMeasure,W.pre),V}(m,b));var C=ut(E,b,S);return{line:b,view:E,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function Pn(m,b,S,E,C){b.before&&(S=-1);var M,N=S+(E||"");return b.cache.hasOwnProperty(N)?M=b.cache[N]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(function(j,V,W){var ce=j.options.lineWrapping,fe=ce&&Li(j);if(!V.measure.heights||ce&&V.measure.width!=fe){var Se=V.measure.heights=[];if(ce){V.measure.width=fe;for(var ve=V.text.firstChild.getClientRects(),$e=0;$e<ve.length-1;$e++){var Ne=ve[$e],Me=ve[$e+1];Math.abs(Ne.bottom-Me.bottom)>2&&Se.push((Ne.bottom+Me.top)/2-W.top)}}Se.push(W.bottom-W.top)}}(m,b.view,b.rect),b.hasHeights=!0),M=function(j,V,W,ce){var fe,Se=Tb(V.map,W,ce),ve=Se.node,$e=Se.start,Ne=Se.end,Me=Se.collapse;if(ve.nodeType==3){for(var Ve=0;Ve<4;Ve++){for(;$e&&Re(V.line.text.charAt(Se.coverStart+$e));)--$e;for(;Se.coverStart+Ne<Se.coverEnd&&Re(V.line.text.charAt(Se.coverStart+Ne));)++Ne;if((fe=c&&d<9&&$e==0&&Ne==Se.coverEnd-Se.coverStart?ve.parentNode.getBoundingClientRect():xS(I(ve,$e,Ne).getClientRects(),ce)).left||fe.right||$e==0)break;Ne=$e,$e-=1,Me="right"}c&&d<11&&(fe=function(Nr,ar){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function($n){if(Ni!=null)return Ni;var Br=Y($n,X("span","x")),Fn=Br.getBoundingClientRect(),Jn=I(Br,0,1).getBoundingClientRect();return Ni=Math.abs(Fn.left-Jn.left)>1}(Nr))return ar;var Zn=screen.logicalXDPI/screen.deviceXDPI,lr=screen.logicalYDPI/screen.deviceYDPI;return{left:ar.left*Zn,right:ar.right*Zn,top:ar.top*lr,bottom:ar.bottom*lr}}(j.display.measure,fe))}else{var nt;$e>0&&(Me=ce="right"),fe=j.options.lineWrapping&&(nt=ve.getClientRects()).length>1?nt[ce=="right"?nt.length-1:0]:ve.getBoundingClientRect()}if(c&&d<9&&!$e&&(!fe||!fe.left&&!fe.right)){var Qe=ve.parentNode.getClientRects()[0];fe=Qe?{left:Qe.left,right:Qe.left+cd(j.display),top:Qe.top,bottom:Qe.bottom}:$a}for(var pt=fe.top-V.rect.top,ct=fe.bottom-V.rect.top,mt=(pt+ct)/2,bn=V.view.measure.heights,Mt=0;Mt<bn.length-1&&!(mt<bn[Mt]);Mt++);var Hn=Mt?bn[Mt-1]:0,fn=bn[Mt],or={left:(Me=="right"?fe.right:fe.left)-V.rect.left,right:(Me=="left"?fe.left:fe.right)-V.rect.left,top:Hn,bottom:fn};return fe.left||fe.right||(or.bogus=!0),j.options.singleCursorHeightPerLine||(or.rtop=pt,or.rbottom=ct),or}(m,b,S,E),M.bogus||(b.cache[N]=M)),{left:M.left,right:M.right,top:C?M.rtop:M.top,bottom:C?M.rbottom:M.bottom}}var ji,$a={left:0,right:0,top:0,bottom:0};function Tb(m,b,S){for(var E,C,M,N,j,V,W=0;W<m.length;W+=3)if(j=m[W],V=m[W+1],b<j?(C=0,M=1,N="left"):b<V?M=(C=b-j)+1:(W==m.length-3||b==V&&m[W+3]>b)&&(C=(M=V-j)-1,b>=V&&(N="right")),C!=null){if(E=m[W+2],j==V&&S==(E.insertLeft?"left":"right")&&(N=S),S=="left"&&C==0)for(;W&&m[W-2]==m[W-3]&&m[W-1].insertLeft;)E=m[2+(W-=3)],N="left";if(S=="right"&&C==V-j)for(;W<m.length-3&&m[W+3]==m[W+4]&&!m[W+5].insertLeft;)E=m[(W+=3)+2],N="right";break}return{node:E,start:C,end:M,collapse:N,coverStart:j,coverEnd:V}}function xS(m,b){var S=$a;if(b=="left")for(var E=0;E<m.length&&(S=m[E]).left==S.right;E++);else for(var C=m.length-1;C>=0&&(S=m[C]).left==S.right;C--);return S}function Db(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var b=0;b<m.rest.length;b++)m.measure.caches[b]={}}function Lb(m){m.display.externalMeasure=null,q(m.display.lineMeasure);for(var b=0;b<m.display.view.length;b++)Db(m.display.view[b])}function kh(m){Lb(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function Rb(m){return g&&T?-(m.body.getBoundingClientRect().left-parseInt(getComputedStyle(m.body).marginLeft)):m.defaultView.pageXOffset||(m.documentElement||m.body).scrollLeft}function Fb(m){return g&&T?-(m.body.getBoundingClientRect().top-parseInt(getComputedStyle(m.body).marginTop)):m.defaultView.pageYOffset||(m.documentElement||m.body).scrollTop}function Z0(m){var b=Yi(m).widgets,S=0;if(b)for(var E=0;E<b.length;++E)b[E].above&&(S+=An(b[E]));return S}function Am(m,b,S,E,C){if(!C){var M=Z0(b);S.top+=M,S.bottom+=M}if(E=="line")return S;E||(E="local");var N=me(b);if(E=="local"?N+=Ir(m.display):N-=m.display.viewOffset,E=="page"||E=="window"){var j=m.display.lineSpace.getBoundingClientRect();N+=j.top+(E=="window"?0:Fb(ze(m)));var V=j.left+(E=="window"?0:Rb(ze(m)));S.left+=V,S.right+=V}return S.top+=N,S.bottom+=N,S}function Ob(m,b,S){if(S=="div")return b;var E=b.left,C=b.top;if(S=="page")E-=Rb(ze(m)),C-=Fb(ze(m));else if(S=="local"||!S){var M=m.display.sizer.getBoundingClientRect();E+=M.left,C+=M.top}var N=m.display.lineSpace.getBoundingClientRect();return{left:E-N.left,top:C-N.top}}function Cm(m,b,S,E,C){return E||(E=et(m.doc,b.line)),Am(m,E,Yt(m,E,b.ch,C),S)}function dl(m,b,S,E,C,M){function N($e,Ne){var Me=Pn(m,C,$e,Ne?"right":"left",M);return Ne?Me.left=Me.right:Me.right=Me.left,Am(m,E,Me,S)}E=E||et(m.doc,b.line),C||(C=mr(m,E));var j=Ce(E,m.doc.direction),V=b.ch,W=b.sticky;if(V>=E.text.length?(V=E.text.length,W="before"):V<=0&&(V=0,W="after"),!j)return N(W=="before"?V-1:V,W=="before");function ce($e,Ne,Me){return N(Me?$e-1:$e,j[Ne].level==1!=Me)}var fe=ae(j,V,W),Se=ie,ve=ce(V,fe,W=="before");return Se!=null&&(ve.other=ce(V,Se,W!="before")),ve}function Mb(m,b){var S=0;b=Gt(m.doc,b),m.options.lineWrapping||(S=cd(m.display)*b.ch);var E=et(m.doc,b.line),C=me(E)+Ir(m.display);return{left:S,right:S,top:C,bottom:C+E.height}}function K0(m,b,S,E,C){var M=Xe(m,b,S);return M.xRel=C,E&&(M.outside=E),M}function J0(m,b,S){var E=m.doc;if((S+=m.display.viewOffset)<0)return K0(E.first,0,null,-1,-1);var C=Sr(E,S),M=E.first+E.size-1;if(C>M)return K0(E.first+E.size-1,et(E,M).text.length,null,1,1);b<0&&(b=0);for(var N=et(E,C);;){var j=wS(m,N,C,b,S),V=Ma(N,j.ch+(j.xRel>0||j.outside>0?1:0));if(!V)return j;var W=V.find(1);if(W.line==C)return W;N=et(E,C=W.line)}}function $b(m,b,S,E){E-=Z0(b);var C=b.text.length,M=Q(function(N){return Pn(m,S,N-1).bottom<=E},C,0);return{begin:M,end:C=Q(function(N){return Pn(m,S,N).top>E},M,C)}}function Ib(m,b,S,E){return S||(S=mr(m,b)),$b(m,b,S,Am(m,b,Pn(m,S,E),"line").top)}function Q0(m,b,S,E){return!(m.bottom<=S)&&(m.top>S||(E?m.left:m.right)>b)}function wS(m,b,S,E,C){C-=me(b);var M=mr(m,b),N=Z0(b),j=0,V=b.text.length,W=!0,ce=Ce(b,m.doc.direction);if(ce){var fe=(m.options.lineWrapping?ES:_S)(m,b,S,M,ce,E,C);j=(W=fe.level!=1)?fe.from:fe.to-1,V=W?fe.to:fe.from-1}var Se,ve,$e=null,Ne=null,Me=Q(function(ct){var mt=Pn(m,M,ct);return mt.top+=N,mt.bottom+=N,!!Q0(mt,E,C,!1)&&(mt.top<=C&&mt.left<=E&&($e=ct,Ne=mt),!0)},j,V),Ve=!1;if(Ne){var nt=E-Ne.left<Ne.right-E,Qe=nt==W;Me=$e+(Qe?0:1),ve=Qe?"after":"before",Se=nt?Ne.left:Ne.right}else{W||Me!=V&&Me!=j||Me++,ve=Me==0?"after":Me==b.text.length?"before":Pn(m,M,Me-(W?1:0)).bottom+N<=C==W?"after":"before";var pt=dl(m,Xe(S,Me,ve),"line",b,M);Se=pt.left,Ve=C<pt.top?-1:C>=pt.bottom?1:0}return K0(S,Me=P(b.text,Me,1),ve,Ve,E-Se)}function _S(m,b,S,E,C,M,N){var j=Q(function(fe){var Se=C[fe],ve=Se.level!=1;return Q0(dl(m,Xe(S,ve?Se.to:Se.from,ve?"before":"after"),"line",b,E),M,N,!0)},0,C.length-1),V=C[j];if(j>0){var W=V.level!=1,ce=dl(m,Xe(S,W?V.from:V.to,W?"after":"before"),"line",b,E);Q0(ce,M,N,!0)&&ce.top>N&&(V=C[j-1])}return V}function ES(m,b,S,E,C,M,N){var j=$b(m,b,E,N),V=j.begin,W=j.end;/\s/.test(b.text.charAt(W-1))&&W--;for(var ce=null,fe=null,Se=0;Se<C.length;Se++){var ve=C[Se];if(!(ve.from>=W||ve.to<=V)){var $e=Pn(m,E,ve.level!=1?Math.min(W,ve.to)-1:Math.max(V,ve.from)).right,Ne=$e<M?M-$e+1e9:$e-M;(!ce||fe>Ne)&&(ce=ve,fe=Ne)}}return ce||(ce=C[C.length-1]),ce.from<V&&(ce={from:V,to:ce.to,level:ce.level}),ce.to>W&&(ce={from:ce.from,to:W,level:ce.level}),ce}function ud(m){if(m.cachedTextHeight!=null)return m.cachedTextHeight;if(ji==null){ji=X("pre",null,"CodeMirror-line-like");for(var b=0;b<49;++b)ji.appendChild(document.createTextNode("x")),ji.appendChild(X("br"));ji.appendChild(document.createTextNode("x"))}Y(m.measure,ji);var S=ji.offsetHeight/50;return S>3&&(m.cachedTextHeight=S),q(m.measure),S||1}function cd(m){if(m.cachedCharWidth!=null)return m.cachedCharWidth;var b=X("span","xxxxxxxxxx"),S=X("pre",[b],"CodeMirror-line-like");Y(m.measure,S);var E=b.getBoundingClientRect(),C=(E.right-E.left)/10;return C>2&&(m.cachedCharWidth=C),C||10}function ey(m){for(var b=m.display,S={},E={},C=b.gutters.clientLeft,M=b.gutters.firstChild,N=0;M;M=M.nextSibling,++N){var j=m.display.gutterSpecs[N].className;S[j]=M.offsetLeft+M.clientLeft+C,E[j]=M.clientWidth}return{fixedPos:ty(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:S,gutterWidth:E,wrapperWidth:b.wrapper.clientWidth}}function ty(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function Pb(m){var b=ud(m.display),S=m.options.lineWrapping,E=S&&Math.max(5,m.display.scroller.clientWidth/cd(m.display)-3);return function(C){if(Vt(m.doc,C))return 0;var M=0;if(C.widgets)for(var N=0;N<C.widgets.length;N++)C.widgets[N].height&&(M+=C.widgets[N].height);return S?M+(Math.ceil(C.text.length/E)||1)*b:M+b}}function ny(m){var b=m.doc,S=Pb(m);b.iter(function(E){var C=S(E);C!=E.height&&Ut(E,C)})}function Xc(m,b,S,E){var C=m.display;if(!S&&Er(b).getAttribute("cm-not-content")=="true")return null;var M,N,j=C.lineSpace.getBoundingClientRect();try{M=b.clientX-j.left,N=b.clientY-j.top}catch{return null}var V,W=J0(m,M,N);if(E&&W.xRel>0&&(V=et(m.doc,W.line).text).length==W.ch){var ce=Ie(V,V.length,m.options.tabSize)-V.length;W=Xe(W.line,Math.max(0,Math.round((M-ws(m.display).left)/cd(m.display))-ce))}return W}function Zc(m,b){if(b>=m.display.viewTo||(b-=m.display.viewFrom)<0)return null;for(var S=m.display.view,E=0;E<S.length;E++)if((b-=S[E].size)<0)return E}function _o(m,b,S,E){b==null&&(b=m.doc.first),S==null&&(S=m.doc.first+m.doc.size),E||(E=0);var C=m.display;if(E&&S<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>b)&&(C.updateLineNumbers=b),m.curOp.viewChanged=!0,b>=C.viewTo)es&&oo(m.doc,b)<C.viewTo&&Xu(m);else if(S<=C.viewFrom)es&&ul(m.doc,S+E)>C.viewFrom?Xu(m):(C.viewFrom+=E,C.viewTo+=E);else if(b<=C.viewFrom&&S>=C.viewTo)Xu(m);else if(b<=C.viewFrom){var M=km(m,S,S+E,1);M?(C.view=C.view.slice(M.index),C.viewFrom=M.lineN,C.viewTo+=E):Xu(m)}else if(S>=C.viewTo){var N=km(m,b,b,-1);N?(C.view=C.view.slice(0,N.index),C.viewTo=N.lineN):Xu(m)}else{var j=km(m,b,b,-1),V=km(m,S,S+E,1);j&&V?(C.view=C.view.slice(0,j.index).concat(Bi(m,j.lineN,V.lineN)).concat(C.view.slice(V.index)),C.viewTo+=E):Xu(m)}var W=C.externalMeasured;W&&(S<W.lineN?W.lineN+=E:b<W.lineN+W.size&&(C.externalMeasured=null))}function Yu(m,b,S){m.curOp.viewChanged=!0;var E=m.display,C=m.display.externalMeasured;if(C&&b>=C.lineN&&b<C.lineN+C.size&&(E.externalMeasured=null),!(b<E.viewFrom||b>=E.viewTo)){var M=E.view[Zc(m,b)];if(M.node!=null){var N=M.changes||(M.changes=[]);Pe(N,S)==-1&&N.push(S)}}}function Xu(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function km(m,b,S,E){var C,M=Zc(m,b),N=m.display.view;if(!es||S==m.doc.first+m.doc.size)return{index:M,lineN:S};for(var j=m.display.viewFrom,V=0;V<M;V++)j+=N[V].size;if(j!=b){if(E>0){if(M==N.length-1)return null;C=j+N[M].size-b,M++}else C=j-b;b+=C,S+=C}for(;oo(m.doc,S)!=S;){if(M==(E<0?0:N.length-1))return null;S+=E*N[M-(E<0?1:0)].size,M+=E}return{index:M,lineN:S}}function Nb(m){for(var b=m.display.view,S=0,E=0;E<b.length;E++){var C=b[E];C.hidden||C.node&&!C.changes||++S}return S}function Th(m){m.display.input.showSelection(m.display.input.prepareSelection())}function Bb(m,b){b===void 0&&(b=!0);var S=m.doc,E={},C=E.cursors=document.createDocumentFragment(),M=E.selection=document.createDocumentFragment(),N=m.options.$customCursor;N&&(b=!0);for(var j=0;j<S.sel.ranges.length;j++)if(b||j!=S.sel.primIndex){var V=S.sel.ranges[j];if(!(V.from().line>=m.display.viewTo||V.to().line<m.display.viewFrom)){var W=V.empty();if(N){var ce=N(m,V);ce&&ry(m,ce,C)}else(W||m.options.showCursorWhenSelecting)&&ry(m,V.head,C);W||SS(m,V,M)}}return E}function ry(m,b,S){var E=dl(m,b,"div",null,null,!m.options.singleCursorHeightPerLine),C=S.appendChild(X("div","","CodeMirror-cursor"));if(C.style.left=E.left+"px",C.style.top=E.top+"px",C.style.height=Math.max(0,E.bottom-E.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var M=Cm(m,b,"div",null,null),N=M.right-M.left;C.style.width=(N>0?N:m.defaultCharWidth())+"px"}if(E.other){var j=S.appendChild(X("div","","CodeMirror-cursor CodeMirror-secondarycursor"));j.style.display="",j.style.left=E.other.left+"px",j.style.top=E.other.top+"px",j.style.height=.85*(E.other.bottom-E.other.top)+"px"}}function Tm(m,b){return m.top-b.top||m.left-b.left}function SS(m,b,S){var E=m.display,C=m.doc,M=document.createDocumentFragment(),N=ws(m.display),j=N.left,V=Math.max(E.sizerWidth,Li(m)-E.sizer.offsetLeft)-N.right,W=C.direction=="ltr";function ce(Qe,pt,ct,mt){pt<0&&(pt=0),pt=Math.round(pt),mt=Math.round(mt),M.appendChild(X("div",null,"CodeMirror-selected","position: absolute; left: "+Qe+`px;
                             top: `+pt+"px; width: "+(ct??V-Qe)+`px;
                             height: `+(mt-pt)+"px"))}function fe(Qe,pt,ct){var mt,bn,Mt=et(C,Qe),Hn=Mt.text.length;function fn(ar,Zn){return Cm(m,Xe(Qe,ar),"div",Mt,Zn)}function or(ar,Zn,lr){var $n=Ib(m,Mt,null,ar),Br=Zn=="ltr"==(lr=="after")?"left":"right";return fn(lr=="after"?$n.begin:$n.end-(/\s/.test(Mt.text.charAt($n.end-1))?2:1),Br)[Br]}var Nr=Ce(Mt,C.direction);return function(ar,Zn,lr,$n){if(!ar)return $n(Zn,lr,"ltr",0);for(var Br=!1,Fn=0;Fn<ar.length;++Fn){var Jn=ar[Fn];(Jn.from<lr&&Jn.to>Zn||Zn==lr&&Jn.to==Zn)&&($n(Math.max(Jn.from,Zn),Math.min(Jn.to,lr),Jn.level==1?"rtl":"ltr",Fn),Br=!0)}Br||$n(Zn,lr,"ltr")}(Nr,pt||0,ct??Hn,function(ar,Zn,lr,$n){var Br=lr=="ltr",Fn=fn(ar,Br?"left":"right"),Jn=fn(Zn-1,Br?"right":"left"),Nn=pt==null&&ar==0,vr=ct==null&&Zn==Hn,lo=$n==0,zr=!Nr||$n==Nr.length-1;if(Jn.top-Fn.top<=3){var Ws=(W?vr:Nn)&&zr,Ys=(W?Nn:vr)&&lo?j:(Br?Fn:Jn).left,Ci=Ws?V:(Br?Jn:Fn).right;ce(Ys,Fn.top,Ci-Ys,Fn.bottom)}else{var uo,Ia,Ms,ml;Br?(uo=W&&Nn&&lo?j:Fn.left,Ia=W?V:or(ar,lr,"before"),Ms=W?j:or(Zn,lr,"after"),ml=W&&vr&&zr?V:Jn.right):(uo=W?or(ar,lr,"before"):j,Ia=!W&&Nn&&lo?V:Fn.right,Ms=!W&&vr&&zr?j:Jn.left,ml=W?or(Zn,lr,"after"):V),ce(uo,Fn.top,Ia-uo,Fn.bottom),Fn.bottom<Jn.top&&ce(j,Fn.bottom,null,Jn.top),ce(Ms,Jn.top,ml-Ms,Jn.bottom)}(!mt||Tm(Fn,mt)<0)&&(mt=Fn),Tm(Jn,mt)<0&&(mt=Jn),(!bn||Tm(Fn,bn)<0)&&(bn=Fn),Tm(Jn,bn)<0&&(bn=Jn)}),{start:mt,end:bn}}var Se=b.from(),ve=b.to();if(Se.line==ve.line)fe(Se.line,Se.ch,ve.ch);else{var $e=et(C,Se.line),Ne=et(C,ve.line),Me=Yi($e)==Yi(Ne),Ve=fe(Se.line,Se.ch,Me?$e.text.length+1:null).end,nt=fe(ve.line,Me?0:null,ve.ch).start;Me&&(Ve.top<nt.top-2?(ce(Ve.right,Ve.top,null,Ve.bottom),ce(j,nt.top,nt.left,nt.bottom)):ce(Ve.right,Ve.top,nt.left-Ve.right,Ve.bottom)),Ve.bottom<nt.top&&ce(j,Ve.bottom,null,nt.top)}S.appendChild(M)}function iy(m){if(m.state.focused){var b=m.display;clearInterval(b.blinker);var S=!0;b.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?b.blinker=setInterval(function(){m.hasFocus()||fd(m),b.cursorDiv.style.visibility=(S=!S)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function zb(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||oy(m))}function sy(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&fd(m))},100)}function oy(m,b){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),m.options.readOnly!="nocursor"&&(m.state.focused||(tt(m,"focus",m,b),m.state.focused=!0,z(m.display.wrapper,"CodeMirror-focused"),m.curOp||m.display.selForContextMenu==m.doc.sel||(m.display.input.reset(),h&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),iy(m))}function fd(m,b){m.state.delayingBlurEvent||(m.state.focused&&(tt(m,"blur",m,b),m.state.focused=!1,U(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function Dm(m){for(var b=m.display,S=b.lineDiv.offsetTop,E=Math.max(0,b.scroller.getBoundingClientRect().top),C=b.lineDiv.getBoundingClientRect().top,M=0,N=0;N<b.view.length;N++){var j=b.view[N],V=m.options.lineWrapping,W=void 0,ce=0;if(!j.hidden){if(C+=j.line.height,c&&d<8){var fe=j.node.offsetTop+j.node.offsetHeight;W=fe-S,S=fe}else{var Se=j.node.getBoundingClientRect();W=Se.bottom-Se.top,!V&&j.text.firstChild&&(ce=j.text.firstChild.getBoundingClientRect().right-Se.left-1)}var ve=j.line.height-W;if((ve>.005||ve<-.005)&&(C<E&&(M-=ve),Ut(j.line,W),jb(j.line),j.rest))for(var $e=0;$e<j.rest.length;$e++)jb(j.rest[$e]);if(ce>m.display.sizerWidth){var Ne=Math.ceil(ce/cd(m.display));Ne>m.display.maxLineLength&&(m.display.maxLineLength=Ne,m.display.maxLine=j.line,m.display.maxLineChanged=!0)}}}Math.abs(M)>2&&(b.scroller.scrollTop+=M)}function jb(m){if(m.widgets)for(var b=0;b<m.widgets.length;++b){var S=m.widgets[b],E=S.node.parentNode;E&&(S.height=E.offsetHeight)}}function Lm(m,b,S){var E=S&&S.top!=null?Math.max(0,S.top):m.scroller.scrollTop;E=Math.floor(E-Ir(m));var C=S&&S.bottom!=null?S.bottom:E+m.wrapper.clientHeight,M=Sr(b,E),N=Sr(b,C);if(S&&S.ensure){var j=S.ensure.from.line,V=S.ensure.to.line;j<M?(M=j,N=Sr(b,me(et(b,j))+m.wrapper.clientHeight)):Math.min(V,b.lastLine())>=N&&(M=Sr(b,me(et(b,V))-m.wrapper.clientHeight),N=V)}return{from:M,to:Math.max(N,M+1)}}function ay(m,b){var S=m.display,E=ud(m.display);b.top<0&&(b.top=0);var C=m.curOp&&m.curOp.scrollTop!=null?m.curOp.scrollTop:S.scroller.scrollTop,M=Te(m),N={};b.bottom-b.top>M&&(b.bottom=b.top+M);var j=m.doc.height+ts(S),V=b.top<E,W=b.bottom>j-E;if(b.top<C)N.scrollTop=V?0:b.top;else if(b.bottom>C+M){var ce=Math.min(b.top,(W?j:b.bottom)-M);ce!=C&&(N.scrollTop=ce)}var fe=m.options.fixedGutter?0:S.gutters.offsetWidth,Se=m.curOp&&m.curOp.scrollLeft!=null?m.curOp.scrollLeft:S.scroller.scrollLeft-fe,ve=Li(m)-S.gutters.offsetWidth,$e=b.right-b.left>ve;return $e&&(b.right=b.left+ve),b.left<10?N.scrollLeft=0:b.left<Se?N.scrollLeft=Math.max(0,b.left+fe-($e?0:10)):b.right>ve+Se-3&&(N.scrollLeft=b.right+($e?0:10)-ve),N}function ly(m,b){b!=null&&(Rm(m),m.curOp.scrollTop=(m.curOp.scrollTop==null?m.doc.scrollTop:m.curOp.scrollTop)+b)}function dd(m){Rm(m);var b=m.getCursor();m.curOp.scrollToPos={from:b,to:b,margin:m.options.cursorScrollMargin}}function Dh(m,b,S){b==null&&S==null||Rm(m),b!=null&&(m.curOp.scrollLeft=b),S!=null&&(m.curOp.scrollTop=S)}function Rm(m){var b=m.curOp.scrollToPos;b&&(m.curOp.scrollToPos=null,Ub(m,Mb(m,b.from),Mb(m,b.to),b.margin))}function Ub(m,b,S,E){var C=ay(m,{left:Math.min(b.left,S.left),top:Math.min(b.top,S.top)-E,right:Math.max(b.right,S.right),bottom:Math.max(b.bottom,S.bottom)+E});Dh(m,C.scrollLeft,C.scrollTop)}function Lh(m,b){Math.abs(m.doc.scrollTop-b)<2||(a||cy(m,{top:b}),qb(m,b,!0),a&&cy(m),Oh(m,100))}function qb(m,b,S){b=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,b)),(m.display.scroller.scrollTop!=b||S)&&(m.doc.scrollTop=b,m.display.scrollbars.setScrollTop(b),m.display.scroller.scrollTop!=b&&(m.display.scroller.scrollTop=b))}function Kc(m,b,S,E){b=Math.max(0,Math.min(b,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),(S?b==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-b)<2)&&!E||(m.doc.scrollLeft=b,Yb(m),m.display.scroller.scrollLeft!=b&&(m.display.scroller.scrollLeft=b),m.display.scrollbars.setScrollLeft(b))}function Rh(m){var b=m.display,S=b.gutters.offsetWidth,E=Math.round(m.doc.height+ts(m.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:m.options.fixedGutter?S:0,docHeight:E,scrollHeight:E+xi(m)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:S}}var Jc=function(m,b,S){this.cm=S;var E=this.vert=X("div",[X("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=X("div",[X("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=C.tabIndex=-1,m(E),m(C),De(E,"scroll",function(){E.clientHeight&&b(E.scrollTop,"vertical")}),De(C,"scroll",function(){C.clientWidth&&b(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Jc.prototype.update=function(m){var b=m.scrollWidth>m.clientWidth+1,S=m.scrollHeight>m.clientHeight+1,E=m.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=b?E+"px":"0";var C=m.viewHeight-(b?E:0);this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=S?E+"px":"0",this.horiz.style.left=m.barLeft+"px";var M=m.viewWidth-m.barLeft-(S?E:0);this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+M)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&m.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?E:0,bottom:b?E:0}},Jc.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Jc.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Jc.prototype.zeroWidthHack=function(){var m=k&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=m,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qe,this.disableVert=new qe},Jc.prototype.enableZeroWidthBar=function(m,b,S){m.style.visibility="",b.set(1e3,function E(){var C=m.getBoundingClientRect();(S=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1))!=m?m.style.visibility="hidden":b.set(1e3,E)})},Jc.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var Fh=function(){};function hd(m,b){b||(b=Rh(m));var S=m.display.barWidth,E=m.display.barHeight;Hb(m,b);for(var C=0;C<4&&S!=m.display.barWidth||E!=m.display.barHeight;C++)S!=m.display.barWidth&&m.options.lineWrapping&&Dm(m),Hb(m,Rh(m)),S=m.display.barWidth,E=m.display.barHeight}function Hb(m,b){var S=m.display,E=S.scrollbars.update(b);S.sizer.style.paddingRight=(S.barWidth=E.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=E.bottom)+"px",S.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=E.bottom+"px",S.scrollbarFiller.style.width=E.right+"px"):S.scrollbarFiller.style.display="",E.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=E.bottom+"px",S.gutterFiller.style.width=b.gutterWidth+"px"):S.gutterFiller.style.display=""}Fh.prototype.update=function(){return{bottom:0,right:0}},Fh.prototype.setScrollLeft=function(){},Fh.prototype.setScrollTop=function(){},Fh.prototype.clear=function(){};var Gb={native:Jc,null:Fh};function Vb(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&U(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new Gb[m.options.scrollbarStyle](function(b){m.display.wrapper.insertBefore(b,m.display.scrollbarFiller),De(b,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,S){S=="horizontal"?Kc(m,b):Lh(m,b)},m),m.display.scrollbars.addClass&&z(m.display.wrapper,m.display.scrollbars.addClass)}var AS=0;function Qc(m){var b;m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++AS,markArrays:null},b=m.curOp,zi?zi.ops.push(b):b.ownsGroup=zi={ops:[b],delayedCallbacks:[]}}function ef(m){var b=m.curOp;b&&function(S,E){var C=S.ownsGroup;if(C)try{(function(M){var N=M.delayedCallbacks,j=0;do{for(;j<N.length;j++)N[j].call(null);for(var V=0;V<M.ops.length;V++){var W=M.ops[V];if(W.cursorActivityHandlers)for(;W.cursorActivityCalled<W.cursorActivityHandlers.length;)W.cursorActivityHandlers[W.cursorActivityCalled++].call(null,W.cm)}}while(j<N.length)})(C)}finally{zi=null,E(C)}}(b,function(S){for(var E=0;E<S.ops.length;E++)S.ops[E].cm.curOp=null;(function(C){for(var M=C.ops,N=0;N<M.length;N++)CS(M[N]);for(var j=0;j<M.length;j++)kS(M[j]);for(var V=0;V<M.length;V++)TS(M[V]);for(var W=0;W<M.length;W++)DS(M[W]);for(var ce=0;ce<M.length;ce++)LS(M[ce])})(S)})}function CS(m){var b=m.cm,S=b.display;(function(E){var C=E.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=xi(E)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=xi(E)+"px",C.scrollbarsClipped=!0)})(b),m.updateMaxLine&&gt(b),m.mustUpdate=m.viewChanged||m.forceUpdate||m.scrollTop!=null||m.scrollToPos&&(m.scrollToPos.from.line<S.viewFrom||m.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&b.options.lineWrapping,m.update=m.mustUpdate&&new Fm(b,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function kS(m){m.updatedDisplay=m.mustUpdate&&uy(m.cm,m.update)}function TS(m){var b=m.cm,S=b.display;m.updatedDisplay&&Dm(b),m.barMeasure=Rh(b),S.maxLineChanged&&!b.options.lineWrapping&&(m.adjustWidthTo=Yt(b,S.maxLine,S.maxLine.text.length).left+3,b.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+m.adjustWidthTo+xi(b)+b.display.barWidth),m.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+m.adjustWidthTo-Li(b))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=S.input.prepareSelection())}function DS(m){var b=m.cm;m.adjustWidthTo!=null&&(b.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<b.doc.scrollLeft&&Kc(b,Math.min(b.display.scroller.scrollLeft,m.maxScrollLeft),!0),b.display.maxLineChanged=!1);var S=m.focus&&m.focus==ee(ze(b));m.preparedSelection&&b.display.input.showSelection(m.preparedSelection,S),(m.updatedDisplay||m.startHeight!=b.doc.height)&&hd(b,m.barMeasure),m.updatedDisplay&&dy(b,m.barMeasure),m.selectionChanged&&iy(b),b.state.focused&&m.updateInput&&b.display.input.reset(m.typing),S&&zb(m.cm)}function LS(m){var b=m.cm,S=b.display,E=b.doc;if(m.updatedDisplay&&Wb(b,m.update),S.wheelStartX==null||m.scrollTop==null&&m.scrollLeft==null&&!m.scrollToPos||(S.wheelStartX=S.wheelStartY=null),m.scrollTop!=null&&qb(b,m.scrollTop,m.forceScroll),m.scrollLeft!=null&&Kc(b,m.scrollLeft,!0,!0),m.scrollToPos){var C=function(W,ce,fe,Se){var ve;Se==null&&(Se=0),W.options.lineWrapping||ce!=fe||(fe=ce.sticky=="before"?Xe(ce.line,ce.ch+1,"before"):ce,ce=ce.ch?Xe(ce.line,ce.sticky=="before"?ce.ch-1:ce.ch,"after"):ce);for(var $e=0;$e<5;$e++){var Ne=!1,Me=dl(W,ce),Ve=fe&&fe!=ce?dl(W,fe):Me,nt=ay(W,ve={left:Math.min(Me.left,Ve.left),top:Math.min(Me.top,Ve.top)-Se,right:Math.max(Me.left,Ve.left),bottom:Math.max(Me.bottom,Ve.bottom)+Se}),Qe=W.doc.scrollTop,pt=W.doc.scrollLeft;if(nt.scrollTop!=null&&(Lh(W,nt.scrollTop),Math.abs(W.doc.scrollTop-Qe)>1&&(Ne=!0)),nt.scrollLeft!=null&&(Kc(W,nt.scrollLeft),Math.abs(W.doc.scrollLeft-pt)>1&&(Ne=!0)),!Ne)break}return ve}(b,Gt(E,m.scrollToPos.from),Gt(E,m.scrollToPos.to),m.scrollToPos.margin);(function(W,ce){if(!bt(W,"scrollCursorIntoView")){var fe=W.display,Se=fe.sizer.getBoundingClientRect(),ve=null,$e=fe.wrapper.ownerDocument;if(ce.top+Se.top<0?ve=!0:ce.bottom+Se.top>($e.defaultView.innerHeight||$e.documentElement.clientHeight)&&(ve=!1),ve!=null&&!_){var Ne=X("div","",null,`position: absolute;
                         top: `+(ce.top-fe.viewOffset-Ir(W.display))+`px;
                         height: `+(ce.bottom-ce.top+xi(W)+fe.barHeight)+`px;
                         left: `+ce.left+"px; width: "+Math.max(2,ce.right-ce.left)+"px;");W.display.lineSpace.appendChild(Ne),Ne.scrollIntoView(ve),W.display.lineSpace.removeChild(Ne)}}})(b,C)}var M=m.maybeHiddenMarkers,N=m.maybeUnhiddenMarkers;if(M)for(var j=0;j<M.length;++j)M[j].lines.length||tt(M[j],"hide");if(N)for(var V=0;V<N.length;++V)N[V].lines.length&&tt(N[V],"unhide");S.wrapper.offsetHeight&&(E.scrollTop=b.display.scroller.scrollTop),m.changeObjs&&tt(b,"changes",b,m.changeObjs),m.update&&m.update.finish()}function Uo(m,b){if(m.curOp)return b();Qc(m);try{return b()}finally{ef(m)}}function _s(m,b){return function(){if(m.curOp)return b.apply(m,arguments);Qc(m);try{return b.apply(m,arguments)}finally{ef(m)}}}function ao(m){return function(){if(this.curOp)return m.apply(this,arguments);Qc(this);try{return m.apply(this,arguments)}finally{ef(this)}}}function Es(m){return function(){var b=this.cm;if(!b||b.curOp)return m.apply(this,arguments);Qc(b);try{return m.apply(this,arguments)}finally{ef(b)}}}function Oh(m,b){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(b,je(RS,m))}function RS(m){var b=m.doc;if(!(b.highlightFrontier>=m.display.viewTo)){var S=+new Date+m.options.workTime,E=no(m,b.highlightFrontier),C=[];b.iter(E.line,Math.min(b.first+b.size,m.display.viewTo+500),function(M){if(E.line>=m.display.viewFrom){var N=M.styles,j=M.text.length>m.options.maxHighlightLength?Et(b.mode,E.state):null,V=js(m,M,E,!0);j&&(E.state=j),M.styles=V.styles;var W=M.styleClasses,ce=V.classes;ce?M.styleClasses=ce:W&&(M.styleClasses=null);for(var fe=!N||N.length!=M.styles.length||W!=ce&&(!W||!ce||W.bgClass!=ce.bgClass||W.textClass!=ce.textClass),Se=0;!fe&&Se<N.length;++Se)fe=N[Se]!=M.styles[Se];fe&&C.push(E.line),M.stateAfter=E.save(),E.nextLine()}else M.text.length<=m.options.maxHighlightLength&&Bo(m,M.text,E),M.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>S)return Oh(m,m.options.workDelay),!0}),b.highlightFrontier=E.line,b.modeFrontier=Math.max(b.modeFrontier,E.line),C.length&&Uo(m,function(){for(var M=0;M<C.length;M++)Yu(m,C[M],"text")})}}var Fm=function(m,b,S){var E=m.display;this.viewport=b,this.visible=Lm(E,m.doc,b),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=Li(m),this.force=S,this.dims=ey(m),this.events=[]};function FS(m){if(m.hasFocus())return null;var b=ee(ze(m));if(!b||!le(m.display.lineDiv,b))return null;var S={activeElt:b};if(window.getSelection){var E=He(m).getSelection();E.anchorNode&&E.extend&&le(m.display.lineDiv,E.anchorNode)&&(S.anchorNode=E.anchorNode,S.anchorOffset=E.anchorOffset,S.focusNode=E.focusNode,S.focusOffset=E.focusOffset)}return S}function uy(m,b){var S=m.display,E=m.doc;if(b.editorIsHidden)return Xu(m),!1;if(!b.force&&b.visible.from>=S.viewFrom&&b.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&Nb(m)==0)return!1;Xb(m)&&(Xu(m),b.dims=ey(m));var C=E.first+E.size,M=Math.max(b.visible.from-m.options.viewportMargin,E.first),N=Math.min(C,b.visible.to+m.options.viewportMargin);S.viewFrom<M&&M-S.viewFrom<20&&(M=Math.max(E.first,S.viewFrom)),S.viewTo>N&&S.viewTo-N<20&&(N=Math.min(C,S.viewTo)),es&&(M=oo(m.doc,M),N=ul(m.doc,N));var j=M!=S.viewFrom||N!=S.viewTo||S.lastWrapHeight!=b.wrapperHeight||S.lastWrapWidth!=b.wrapperWidth;(function(ce,fe,Se){var ve=ce.display;ve.view.length==0||fe>=ve.viewTo||Se<=ve.viewFrom?(ve.view=Bi(ce,fe,Se),ve.viewFrom=fe):(ve.viewFrom>fe?ve.view=Bi(ce,fe,ve.viewFrom).concat(ve.view):ve.viewFrom<fe&&(ve.view=ve.view.slice(Zc(ce,fe))),ve.viewFrom=fe,ve.viewTo<Se?ve.view=ve.view.concat(Bi(ce,ve.viewTo,Se)):ve.viewTo>Se&&(ve.view=ve.view.slice(0,Zc(ce,Se)))),ve.viewTo=Se})(m,M,N),S.viewOffset=me(et(m.doc,S.viewFrom)),m.display.mover.style.top=S.viewOffset+"px";var V=Nb(m);if(!j&&V==0&&!b.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var W=FS(m);return V>4&&(S.lineDiv.style.display="none"),function(ce,fe,Se){var ve=ce.display,$e=ce.options.lineNumbers,Ne=ve.lineDiv,Me=Ne.firstChild;function Ve(Mt){var Hn=Mt.nextSibling;return h&&k&&ce.display.currentWheelTarget==Mt?Mt.style.display="none":Mt.parentNode.removeChild(Mt),Hn}for(var nt=ve.view,Qe=ve.viewFrom,pt=0;pt<nt.length;pt++){var ct=nt[pt];if(!ct.hidden)if(ct.node&&ct.node.parentNode==Ne){for(;Me!=ct.node;)Me=Ve(Me);var mt=$e&&fe!=null&&fe<=Qe&&ct.lineNumber;ct.changes&&(Pe(ct.changes,"gutter")>-1&&(mt=!1),Vu(ce,ct,Qe,Se)),mt&&(q(ct.lineNumber),ct.lineNumber.appendChild(document.createTextNode(Jt(ce.options,Qe)))),Me=ct.node.nextSibling}else{var bn=Ye(ce,ct,Qe,Se);Ne.insertBefore(bn,Me)}Qe+=ct.size}for(;Me;)Me=Ve(Me)}(m,S.updateLineNumbers,b.dims),V>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,function(ce){if(ce&&ce.activeElt&&ce.activeElt!=ee(ce.activeElt.ownerDocument)&&(ce.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(ce.activeElt.nodeName)&&ce.anchorNode&&le(document.body,ce.anchorNode)&&le(document.body,ce.focusNode))){var fe=ce.activeElt.ownerDocument,Se=fe.defaultView.getSelection(),ve=fe.createRange();ve.setEnd(ce.anchorNode,ce.anchorOffset),ve.collapse(!1),Se.removeAllRanges(),Se.addRange(ve),Se.extend(ce.focusNode,ce.focusOffset)}}(W),q(S.cursorDiv),q(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,j&&(S.lastWrapHeight=b.wrapperHeight,S.lastWrapWidth=b.wrapperWidth,Oh(m,400)),S.updateLineNumbers=null,!0}function Wb(m,b){for(var S=b.viewport,E=!0;;E=!1){if(E&&m.options.lineWrapping&&b.oldDisplayWidth!=Li(m))E&&(b.visible=Lm(m.display,m.doc,S));else if(S&&S.top!=null&&(S={top:Math.min(m.doc.height+ts(m.display)-Te(m),S.top)}),b.visible=Lm(m.display,m.doc,S),b.visible.from>=m.display.viewFrom&&b.visible.to<=m.display.viewTo)break;if(!uy(m,b))break;Dm(m);var C=Rh(m);Th(m),hd(m,C),dy(m,C),b.force=!1}b.signal(m,"update",m),m.display.viewFrom==m.display.reportedViewFrom&&m.display.viewTo==m.display.reportedViewTo||(b.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function cy(m,b){var S=new Fm(m,b);if(uy(m,S)){Dm(m),Wb(m,S);var E=Rh(m);Th(m),hd(m,E),dy(m,E),S.finish()}}function fy(m){var b=m.gutters.offsetWidth;m.sizer.style.marginLeft=b+"px",Gr(m,"gutterChanged",m)}function dy(m,b){m.display.sizer.style.minHeight=b.docHeight+"px",m.display.heightForcer.style.top=b.docHeight+"px",m.display.gutters.style.height=b.docHeight+m.display.barHeight+xi(m)+"px"}function Yb(m){var b=m.display,S=b.view;if(b.alignWidgets||b.gutters.firstChild&&m.options.fixedGutter){for(var E=ty(b)-b.scroller.scrollLeft+m.doc.scrollLeft,C=b.gutters.offsetWidth,M=E+"px",N=0;N<S.length;N++)if(!S[N].hidden){m.options.fixedGutter&&(S[N].gutter&&(S[N].gutter.style.left=M),S[N].gutterBackground&&(S[N].gutterBackground.style.left=M));var j=S[N].alignable;if(j)for(var V=0;V<j.length;V++)j[V].style.left=M}m.options.fixedGutter&&(b.gutters.style.left=E+C+"px")}}function Xb(m){if(!m.options.lineNumbers)return!1;var b=m.doc,S=Jt(m.options,b.first+b.size-1),E=m.display;if(S.length!=E.lineNumChars){var C=E.measure.appendChild(X("div",[X("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),M=C.firstChild.offsetWidth,N=C.offsetWidth-M;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(M,E.lineGutter.offsetWidth-N)+1,E.lineNumWidth=E.lineNumInnerWidth+N,E.lineNumChars=E.lineNumInnerWidth?S.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",fy(m.display),!0}return!1}function hy(m,b){for(var S=[],E=!1,C=0;C<m.length;C++){var M=m[C],N=null;if(typeof M!="string"&&(N=M.style,M=M.className),M=="CodeMirror-linenumbers"){if(!b)continue;E=!0}S.push({className:M,style:N})}return b&&!E&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function Zb(m){var b=m.gutters,S=m.gutterSpecs;q(b),m.lineGutter=null;for(var E=0;E<S.length;++E){var C=S[E],M=C.className,N=C.style,j=b.appendChild(X("div",null,"CodeMirror-gutter "+M));N&&(j.style.cssText=N),M=="CodeMirror-linenumbers"&&(m.lineGutter=j,j.style.width=(m.lineNumWidth||1)+"px")}b.style.display=S.length?"":"none",fy(m)}function Mh(m){Zb(m.display),_o(m),Yb(m)}function OS(m,b,S,E){var C=this;this.input=S,C.scrollbarFiller=X("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=X("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=te("div",null,"CodeMirror-code"),C.selectionDiv=X("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=X("div",null,"CodeMirror-cursors"),C.measure=X("div",null,"CodeMirror-measure"),C.lineMeasure=X("div",null,"CodeMirror-measure"),C.lineSpace=te("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var M=te("div",[C.lineSpace],"CodeMirror-lines");C.mover=X("div",[M],null,"position: relative"),C.sizer=X("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=X("div",null,null,"position: absolute; height: 50px; width: 1px;"),C.gutters=X("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=X("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=X("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),g&&v>=105&&(C.wrapper.style.clipPath="inset(0px)"),C.wrapper.setAttribute("translate","no"),c&&d<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),h||a&&D||(C.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(C.wrapper):m(C.wrapper)),C.viewFrom=C.viewTo=b.first,C.reportedViewFrom=C.reportedViewTo=b.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=hy(E.gutters,E.lineNumbers),Zb(C),S.init(C)}Fm.prototype.signal=function(m,b){_t(m,b)&&this.events.push(arguments)},Fm.prototype.finish=function(){for(var m=0;m<this.events.length;m++)tt.apply(null,this.events[m])};var Om=0,hu=null;function Kb(m){var b=m.wheelDeltaX,S=m.wheelDeltaY;return b==null&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(b=m.detail),S==null&&m.detail&&m.axis==m.VERTICAL_AXIS?S=m.detail:S==null&&(S=m.wheelDelta),{x:b,y:S}}function MS(m){var b=Kb(m);return b.x*=hu,b.y*=hu,b}function Jb(m,b){g&&v==102&&(m.display.chromeScrollHack==null?m.display.sizer.style.pointerEvents="none":clearTimeout(m.display.chromeScrollHack),m.display.chromeScrollHack=setTimeout(function(){m.display.chromeScrollHack=null,m.display.sizer.style.pointerEvents=""},100));var S=Kb(b),E=S.x,C=S.y,M=hu;b.deltaMode===0&&(E=b.deltaX,C=b.deltaY,M=1);var N=m.display,j=N.scroller,V=j.scrollWidth>j.clientWidth,W=j.scrollHeight>j.clientHeight;if(E&&V||C&&W){if(C&&k&&h){e:for(var ce=b.target,fe=N.view;ce!=j;ce=ce.parentNode)for(var Se=0;Se<fe.length;Se++)if(fe[Se].node==ce){m.display.currentWheelTarget=ce;break e}}if(E&&!a&&!x&&M!=null)return C&&W&&Lh(m,Math.max(0,j.scrollTop+C*M)),Kc(m,Math.max(0,j.scrollLeft+E*M)),(!C||C&&W)&&sn(b),void(N.wheelStartX=null);if(C&&M!=null){var ve=C*M,$e=m.doc.scrollTop,Ne=$e+N.wrapper.clientHeight;ve<0?$e=Math.max(0,$e+ve-50):Ne=Math.min(m.doc.height,Ne+ve+50),cy(m,{top:$e,bottom:Ne})}Om<20&&b.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=j.scrollLeft,N.wheelStartY=j.scrollTop,N.wheelDX=E,N.wheelDY=C,setTimeout(function(){if(N.wheelStartX!=null){var Me=j.scrollLeft-N.wheelStartX,Ve=j.scrollTop-N.wheelStartY,nt=Ve&&N.wheelDY&&Ve/N.wheelDY||Me&&N.wheelDX&&Me/N.wheelDX;N.wheelStartX=N.wheelStartY=null,nt&&(hu=(hu*Om+nt)/(Om+1),++Om)}},200)):(N.wheelDX+=E,N.wheelDY+=C))}}c?hu=-.53:a?hu=15:g?hu=-.7:y&&(hu=-1/3);var ha=function(m,b){this.ranges=m,this.primIndex=b};ha.prototype.primary=function(){return this.ranges[this.primIndex]},ha.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var S=this.ranges[b],E=m.ranges[b];if(!Xn(S.anchor,E.anchor)||!Xn(S.head,E.head))return!1}return!0},ha.prototype.deepCopy=function(){for(var m=[],b=0;b<this.ranges.length;b++)m[b]=new Pr(ni(this.ranges[b].anchor),ni(this.ranges[b].head));return new ha(m,this.primIndex)},ha.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},ha.prototype.contains=function(m,b){b||(b=m);for(var S=0;S<this.ranges.length;S++){var E=this.ranges[S];if(ht(b,E.from())>=0&&ht(m,E.to())<=0)return S}return-1};var Pr=function(m,b){this.anchor=m,this.head=b};function hl(m,b,S){var E=m&&m.options.selectionsMayTouch,C=b[S];b.sort(function(Se,ve){return ht(Se.from(),ve.from())}),S=Pe(b,C);for(var M=1;M<b.length;M++){var N=b[M],j=b[M-1],V=ht(j.to(),N.from());if(E&&!N.empty()?V>0:V>=0){var W=Rr(j.from(),N.from()),ce=Ar(j.to(),N.to()),fe=j.empty()?N.from()==N.head:j.from()==j.head;M<=S&&--S,b.splice(--M,2,new Pr(fe?ce:W,fe?W:ce))}}return new ha(b,S)}function Zu(m,b){return new ha([new Pr(m,b||m)],0)}function Ku(m){return m.text?Xe(m.from.line+m.text.length-1,se(m.text).length+(m.text.length==1?m.from.ch:0)):m.to}function Qb(m,b){if(ht(m,b.from)<0)return m;if(ht(m,b.to)<=0)return Ku(b);var S=m.line+b.text.length-(b.to.line-b.from.line)-1,E=m.ch;return m.line==b.to.line&&(E+=Ku(b).ch-b.to.ch),Xe(S,E)}function py(m,b){for(var S=[],E=0;E<m.sel.ranges.length;E++){var C=m.sel.ranges[E];S.push(new Pr(Qb(C.anchor,b),Qb(C.head,b)))}return hl(m.cm,S,m.sel.primIndex)}function ex(m,b,S){return m.line==b.line?Xe(S.line,m.ch-b.ch+S.ch):Xe(S.line+(m.line-b.line),m.ch)}function my(m){m.doc.mode=Le(m.options,m.doc.modeOption),$h(m)}function $h(m){m.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null),b.styles&&(b.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,Oh(m,100),m.state.modeGen++,m.curOp&&_o(m)}function tx(m,b){return b.from.ch==0&&b.to.ch==0&&se(b.text)==""&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function gy(m,b,S,E){function C(nt){return S?S[nt]:null}function M(nt,Qe,pt){(function(ct,mt,bn,Mt){ct.text=mt,ct.stateAfter&&(ct.stateAfter=null),ct.styles&&(ct.styles=null),ct.order!=null&&(ct.order=null),ll(ct),Vi(ct,bn);var Hn=Mt?Mt(ct):1;Hn!=ct.height&&Ut(ct,Hn)})(nt,Qe,pt,E),Gr(nt,"change",nt,b)}function N(nt,Qe){for(var pt=[],ct=nt;ct<Qe;++ct)pt.push(new mn(W[ct],C(ct),E));return pt}var j=b.from,V=b.to,W=b.text,ce=et(m,j.line),fe=et(m,V.line),Se=se(W),ve=C(W.length-1),$e=V.line-j.line;if(b.full)m.insert(0,N(0,W.length)),m.remove(W.length,m.size-W.length);else if(tx(m,b)){var Ne=N(0,W.length-1);M(fe,fe.text,ve),$e&&m.remove(j.line,$e),Ne.length&&m.insert(j.line,Ne)}else if(ce==fe)if(W.length==1)M(ce,ce.text.slice(0,j.ch)+Se+ce.text.slice(V.ch),ve);else{var Me=N(1,W.length-1);Me.push(new mn(Se+ce.text.slice(V.ch),ve,E)),M(ce,ce.text.slice(0,j.ch)+W[0],C(0)),m.insert(j.line+1,Me)}else if(W.length==1)M(ce,ce.text.slice(0,j.ch)+W[0]+fe.text.slice(V.ch),C(0)),m.remove(j.line+1,$e);else{M(ce,ce.text.slice(0,j.ch)+W[0],C(0)),M(fe,Se+fe.text.slice(V.ch),ve);var Ve=N(1,W.length-1);$e>1&&m.remove(j.line+1,$e-1),m.insert(j.line+1,Ve)}Gr(m,"change",m,b)}function Ju(m,b,S){(function E(C,M,N){if(C.linked)for(var j=0;j<C.linked.length;++j){var V=C.linked[j];if(V.doc!=M){var W=N&&V.sharedHist;S&&!W||(b(V.doc,W),E(V.doc,C,W))}}})(m,null,!0)}function nx(m,b){if(b.cm)throw new Error("This document is already in use.");m.doc=b,b.cm=m,ny(m),my(m),rx(m),m.options.direction=b.direction,m.options.lineWrapping||gt(m),m.options.mode=b.modeOption,_o(m)}function rx(m){(m.doc.direction=="rtl"?z:U)(m.display.lineDiv,"CodeMirror-rtl")}function Mm(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function yy(m,b){var S={from:ni(b.from),to:Ku(b),text:pn(m,b.from,b.to)};return ox(m,S,b.from.line,b.to.line+1),Ju(m,function(E){return ox(E,S,b.from.line,b.to.line+1)},!0),S}function ix(m){for(;m.length&&se(m).ranges;)m.pop()}function sx(m,b,S,E){var C=m.history;C.undone.length=0;var M,N,j=+new Date;if((C.lastOp==E||C.lastOrigin==b.origin&&b.origin&&(b.origin.charAt(0)=="+"&&C.lastModTime>j-(m.cm?m.cm.options.historyEventDelay:500)||b.origin.charAt(0)=="*"))&&(M=function(W,ce){return ce?(ix(W.done),se(W.done)):W.done.length&&!se(W.done).ranges?se(W.done):W.done.length>1&&!W.done[W.done.length-2].ranges?(W.done.pop(),se(W.done)):void 0}(C,C.lastOp==E)))N=se(M.changes),ht(b.from,b.to)==0&&ht(b.from,N.to)==0?N.to=Ku(b):M.changes.push(yy(m,b));else{var V=se(C.done);for(V&&V.ranges||$m(m.sel,C.done),M={changes:[yy(m,b)],generation:C.generation},C.done.push(M);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(S),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=j,C.lastOp=C.lastSelOp=E,C.lastOrigin=C.lastSelOrigin=b.origin,N||tt(m,"historyAdded")}function $S(m,b,S,E){var C=m.history,M=E&&E.origin;S==C.lastSelOp||M&&C.lastSelOrigin==M&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==M||function(N,j,V,W){var ce=j.charAt(0);return ce=="*"||ce=="+"&&V.ranges.length==W.ranges.length&&V.somethingSelected()==W.somethingSelected()&&new Date-N.history.lastSelTime<=(N.cm?N.cm.options.historyEventDelay:500)}(m,M,se(C.done),b))?C.done[C.done.length-1]=b:$m(b,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=M,C.lastSelOp=S,E&&E.clearRedo!==!1&&ix(C.undone)}function $m(m,b){var S=se(b);S&&S.ranges&&S.equals(m)||b.push(m)}function ox(m,b,S,E){var C=b["spans_"+m.id],M=0;m.iter(Math.max(m.first,S),Math.min(m.first+m.size,E),function(N){N.markedSpans&&((C||(C=b["spans_"+m.id]={}))[M]=N.markedSpans),++M})}function IS(m){if(!m)return null;for(var b,S=0;S<m.length;++S)m[S].marker.explicitlyCleared?b||(b=m.slice(0,S)):b&&b.push(m[S]);return b?b.length?b:null:m}function ax(m,b){var S=function(ce,fe){var Se=fe["spans_"+ce.id];if(!Se)return null;for(var ve=[],$e=0;$e<fe.text.length;++$e)ve.push(IS(Se[$e]));return ve}(m,b),E=fa(m,b);if(!S)return E;if(!E)return S;for(var C=0;C<S.length;++C){var M=S[C],N=E[C];if(M&&N)e:for(var j=0;j<N.length;++j){for(var V=N[j],W=0;W<M.length;++W)if(M[W].marker==V.marker)continue e;M.push(V)}else N&&(S[C]=N)}return S}function pd(m,b,S){for(var E=[],C=0;C<m.length;++C){var M=m[C];if(M.ranges)E.push(S?ha.prototype.deepCopy.call(M):M);else{var N=M.changes,j=[];E.push({changes:j});for(var V=0;V<N.length;++V){var W=N[V],ce=void 0;if(j.push({from:W.from,to:W.to,text:W.text}),b)for(var fe in W)(ce=fe.match(/^spans_(\d+)$/))&&Pe(b,Number(ce[1]))>-1&&(se(j)[fe]=W[fe],delete W[fe])}}}return E}function vy(m,b,S,E){if(E){var C=m.anchor;if(S){var M=ht(b,C)<0;M!=ht(S,C)<0?(C=b,b=S):M!=ht(b,S)<0&&(b=S)}return new Pr(C,b)}return new Pr(S||b,b)}function Im(m,b,S,E,C){C==null&&(C=m.cm&&(m.cm.display.shift||m.extend)),Vs(m,new ha([vy(m.sel.primary(),b,S,C)],0),E)}function lx(m,b,S){for(var E=[],C=m.cm&&(m.cm.display.shift||m.extend),M=0;M<m.sel.ranges.length;M++)E[M]=vy(m.sel.ranges[M],b[M],null,C);Vs(m,hl(m.cm,E,m.sel.primIndex),S)}function by(m,b,S,E){var C=m.sel.ranges.slice(0);C[b]=S,Vs(m,hl(m.cm,C,m.sel.primIndex),E)}function ux(m,b,S,E){Vs(m,Zu(b,S),E)}function cx(m,b,S){var E=m.history.done,C=se(E);C&&C.ranges?(E[E.length-1]=b,Pm(m,b,S)):Vs(m,b,S)}function Vs(m,b,S){Pm(m,b,S),$S(m,m.sel,m.cm?m.cm.curOp.id:NaN,S)}function Pm(m,b,S){(_t(m,"beforeSelectionChange")||m.cm&&_t(m.cm,"beforeSelectionChange"))&&(b=function(C,M,N){var j={ranges:M.ranges,update:function(V){this.ranges=[];for(var W=0;W<V.length;W++)this.ranges[W]=new Pr(Gt(C,V[W].anchor),Gt(C,V[W].head))},origin:N&&N.origin};return tt(C,"beforeSelectionChange",C,j),C.cm&&tt(C.cm,"beforeSelectionChange",C.cm,j),j.ranges!=M.ranges?hl(C.cm,j.ranges,j.ranges.length-1):M}(m,b,S));var E=S&&S.bias||(ht(b.primary().head,m.sel.primary().head)<0?-1:1);fx(m,hx(m,b,E,!0)),S&&S.scroll===!1||!m.cm||m.cm.getOption("readOnly")=="nocursor"||dd(m.cm)}function fx(m,b){b.equals(m.sel)||(m.sel=b,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,Pt(m.cm)),Gr(m,"cursorActivity",m))}function dx(m){fx(m,hx(m,m.sel,null,!1))}function hx(m,b,S,E){for(var C,M=0;M<b.ranges.length;M++){var N=b.ranges[M],j=b.ranges.length==m.sel.ranges.length&&m.sel.ranges[M],V=Nm(m,N.anchor,j&&j.anchor,S,E),W=N.head==N.anchor?V:Nm(m,N.head,j&&j.head,S,E);(C||V!=N.anchor||W!=N.head)&&(C||(C=b.ranges.slice(0,M)),C[M]=new Pr(V,W))}return C?hl(m.cm,C,b.primIndex):b}function md(m,b,S,E,C){var M=et(m,b.line);if(M.markedSpans)for(var N=0;N<M.markedSpans.length;++N){var j=M.markedSpans[N],V=j.marker,W="selectLeft"in V?!V.selectLeft:V.inclusiveLeft,ce="selectRight"in V?!V.selectRight:V.inclusiveRight;if((j.from==null||(W?j.from<=b.ch:j.from<b.ch))&&(j.to==null||(ce?j.to>=b.ch:j.to>b.ch))){if(C&&(tt(V,"beforeCursorEnter"),V.explicitlyCleared)){if(M.markedSpans){--N;continue}break}if(!V.atomic)continue;if(S){var fe=V.find(E<0?1:-1),Se=void 0;if((E<0?ce:W)&&(fe=px(m,fe,-E,fe&&fe.line==b.line?M:null)),fe&&fe.line==b.line&&(Se=ht(fe,S))&&(E<0?Se<0:Se>0))return md(m,fe,b,E,C)}var ve=V.find(E<0?-1:1);return(E<0?W:ce)&&(ve=px(m,ve,E,ve.line==b.line?M:null)),ve?md(m,ve,b,E,C):null}}return b}function Nm(m,b,S,E,C){var M=E||1,N=md(m,b,S,M,C)||!C&&md(m,b,S,M,!0)||md(m,b,S,-M,C)||!C&&md(m,b,S,-M,!0);return N||(m.cantEdit=!0,Xe(m.first,0))}function px(m,b,S,E){return S<0&&b.ch==0?b.line>m.first?Gt(m,Xe(b.line-1)):null:S>0&&b.ch==(E||et(m,b.line)).text.length?b.line<m.first+m.size-1?Xe(b.line+1,0):null:new Xe(b.line,b.ch+S)}function mx(m){m.setSelection(Xe(m.firstLine(),0),Xe(m.lastLine()),dt)}function gx(m,b,S){var E={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return E.canceled=!0}};return S&&(E.update=function(C,M,N,j){C&&(E.from=Gt(m,C)),M&&(E.to=Gt(m,M)),N&&(E.text=N),j!==void 0&&(E.origin=j)}),tt(m,"beforeChange",m,E),m.cm&&tt(m.cm,"beforeChange",m.cm,E),E.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function gd(m,b,S){if(m.cm){if(!m.cm.curOp)return _s(m.cm,gd)(m,b,S);if(m.cm.state.suppressEdits)return}if(!(_t(m,"beforeChange")||m.cm&&_t(m.cm,"beforeChange"))||(b=gx(m,b,!0))){var E=Cr&&!S&&function(M,N,j){var V=null;if(M.iter(N.line,j.line+1,function(nt){if(nt.markedSpans)for(var Qe=0;Qe<nt.markedSpans.length;++Qe){var pt=nt.markedSpans[Qe].marker;!pt.readOnly||V&&Pe(V,pt)!=-1||(V||(V=[])).push(pt)}}),!V)return null;for(var W=[{from:N,to:j}],ce=0;ce<V.length;++ce)for(var fe=V[ce],Se=fe.find(0),ve=0;ve<W.length;++ve){var $e=W[ve];if(!(ht($e.to,Se.from)<0||ht($e.from,Se.to)>0)){var Ne=[ve,1],Me=ht($e.from,Se.from),Ve=ht($e.to,Se.to);(Me<0||!fe.inclusiveLeft&&!Me)&&Ne.push({from:$e.from,to:Se.from}),(Ve>0||!fe.inclusiveRight&&!Ve)&&Ne.push({from:Se.to,to:$e.to}),W.splice.apply(W,Ne),ve+=Ne.length-3}}return W}(m,b.from,b.to);if(E)for(var C=E.length-1;C>=0;--C)yx(m,{from:E[C].from,to:E[C].to,text:C?[""]:b.text,origin:b.origin});else yx(m,b)}}function yx(m,b){if(b.text.length!=1||b.text[0]!=""||ht(b.from,b.to)!=0){var S=py(m,b);sx(m,b,S,m.cm?m.cm.curOp.id:NaN),Ih(m,b,S,fa(m,b));var E=[];Ju(m,function(C,M){M||Pe(E,C.history)!=-1||(wx(C.history,b),E.push(C.history)),Ih(C,b,null,fa(C,b))})}}function Bm(m,b,S){var E=m.cm&&m.cm.state.suppressEdits;if(!E||S){for(var C,M=m.history,N=m.sel,j=b=="undo"?M.done:M.undone,V=b=="undo"?M.undone:M.done,W=0;W<j.length&&(C=j[W],S?!C.ranges||C.equals(m.sel):C.ranges);W++);if(W!=j.length){for(M.lastOrigin=M.lastSelOrigin=null;;){if(!(C=j.pop()).ranges){if(E)return void j.push(C);break}if($m(C,V),S&&!C.equals(m.sel))return void Vs(m,C,{clearRedo:!1});N=C}var ce=[];$m(N,V),V.push({changes:ce,generation:M.generation}),M.generation=C.generation||++M.maxGeneration;for(var fe=_t(m,"beforeChange")||m.cm&&_t(m.cm,"beforeChange"),Se=function(Ne){var Me=C.changes[Ne];if(Me.origin=b,fe&&!gx(m,Me,!1))return j.length=0,{};ce.push(yy(m,Me));var Ve=Ne?py(m,Me):se(j);Ih(m,Me,Ve,ax(m,Me)),!Ne&&m.cm&&m.cm.scrollIntoView({from:Me.from,to:Ku(Me)});var nt=[];Ju(m,function(Qe,pt){pt||Pe(nt,Qe.history)!=-1||(wx(Qe.history,Me),nt.push(Qe.history)),Ih(Qe,Me,null,ax(Qe,Me))})},ve=C.changes.length-1;ve>=0;--ve){var $e=Se(ve);if($e)return $e.v}}}}function vx(m,b){if(b!=0&&(m.first+=b,m.sel=new ha(oe(m.sel.ranges,function(C){return new Pr(Xe(C.anchor.line+b,C.anchor.ch),Xe(C.head.line+b,C.head.ch))}),m.sel.primIndex),m.cm)){_o(m.cm,m.first,m.first-b,b);for(var S=m.cm.display,E=S.viewFrom;E<S.viewTo;E++)Yu(m.cm,E,"gutter")}}function Ih(m,b,S,E){if(m.cm&&!m.cm.curOp)return _s(m.cm,Ih)(m,b,S,E);if(b.to.line<m.first)vx(m,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>m.lastLine())){if(b.from.line<m.first){var C=b.text.length-1-(m.first-b.from.line);vx(m,C),b={from:Xe(m.first,0),to:Xe(b.to.line+C,b.to.ch),text:[se(b.text)],origin:b.origin}}var M=m.lastLine();b.to.line>M&&(b={from:b.from,to:Xe(M,et(m,M).text.length),text:[b.text[0]],origin:b.origin}),b.removed=pn(m,b.from,b.to),S||(S=py(m,b)),m.cm?function(N,j,V){var W=N.doc,ce=N.display,fe=j.from,Se=j.to,ve=!1,$e=fe.line;N.options.lineWrapping||($e=qt(Yi(et(W,fe.line))),W.iter($e,Se.line+1,function(Qe){if(Qe==ce.maxLine)return ve=!0,!0})),W.sel.contains(j.from,j.to)>-1&&Pt(N),gy(W,j,V,Pb(N)),N.options.lineWrapping||(W.iter($e,fe.line+j.text.length,function(Qe){var pt=Be(Qe);pt>ce.maxLineLength&&(ce.maxLine=Qe,ce.maxLineLength=pt,ce.maxLineChanged=!0,ve=!1)}),ve&&(N.curOp.updateMaxLine=!0)),function(Qe,pt){if(Qe.modeFrontier=Math.min(Qe.modeFrontier,pt),!(Qe.highlightFrontier<pt-10)){for(var ct=Qe.first,mt=pt-1;mt>ct;mt--){var bn=et(Qe,mt).stateAfter;if(bn&&(!(bn instanceof Qi)||mt+bn.lookAhead<pt)){ct=mt+1;break}}Qe.highlightFrontier=Math.min(Qe.highlightFrontier,ct)}}(W,fe.line),Oh(N,400);var Ne=j.text.length-(Se.line-fe.line)-1;j.full?_o(N):fe.line!=Se.line||j.text.length!=1||tx(N.doc,j)?_o(N,fe.line,Se.line+1,Ne):Yu(N,fe.line,"text");var Me=_t(N,"changes"),Ve=_t(N,"change");if(Ve||Me){var nt={from:fe,to:Se,text:j.text,removed:j.removed,origin:j.origin};Ve&&Gr(N,"change",N,nt),Me&&(N.curOp.changeObjs||(N.curOp.changeObjs=[])).push(nt)}N.display.selForContextMenu=null}(m.cm,b,E):gy(m,b,E),Pm(m,S,dt),m.cantEdit&&Nm(m,Xe(m.firstLine(),0))&&(m.cantEdit=!1)}}function yd(m,b,S,E,C){var M;E||(E=S),ht(E,S)<0&&(S=(M=[E,S])[0],E=M[1]),typeof b=="string"&&(b=m.splitLines(b)),gd(m,{from:S,to:E,text:b,origin:C})}function bx(m,b,S,E){S<m.line?m.line+=E:b<m.line&&(m.line=b,m.ch=0)}function xx(m,b,S,E){for(var C=0;C<m.length;++C){var M=m[C],N=!0;if(M.ranges){M.copied||((M=m[C]=M.deepCopy()).copied=!0);for(var j=0;j<M.ranges.length;j++)bx(M.ranges[j].anchor,b,S,E),bx(M.ranges[j].head,b,S,E)}else{for(var V=0;V<M.changes.length;++V){var W=M.changes[V];if(S<W.from.line)W.from=Xe(W.from.line+E,W.from.ch),W.to=Xe(W.to.line+E,W.to.ch);else if(b<=W.to.line){N=!1;break}}N||(m.splice(0,C+1),C=0)}}}function wx(m,b){var S=b.from.line,E=b.to.line,C=b.text.length-(E-S)-1;xx(m.done,S,E,C),xx(m.undone,S,E,C)}function Ph(m,b,S,E){var C=b,M=b;return typeof b=="number"?M=et(m,nr(m,b)):C=qt(b),C==null?null:(E(M,C)&&m.cm&&Yu(m.cm,C,S),M)}function Nh(m){this.lines=m,this.parent=null;for(var b=0,S=0;S<m.length;++S)m[S].parent=this,b+=m[S].height;this.height=b}function Bh(m){this.children=m;for(var b=0,S=0,E=0;E<m.length;++E){var C=m[E];b+=C.chunkSize(),S+=C.height,C.parent=this}this.size=b,this.height=S,this.parent=null}Pr.prototype.from=function(){return Rr(this.anchor,this.head)},Pr.prototype.to=function(){return Ar(this.anchor,this.head)},Pr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Nh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,b){for(var S=m,E=m+b;S<E;++S){var C=this.lines[S];this.height-=C.height,Nt(C),Gr(C,"delete")}this.lines.splice(m,b)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,b,S){this.height+=S,this.lines=this.lines.slice(0,m).concat(b).concat(this.lines.slice(m));for(var E=0;E<b.length;++E)b[E].parent=this},iterN:function(m,b,S){for(var E=m+b;m<E;++m)if(S(this.lines[m]))return!0}},Bh.prototype={chunkSize:function(){return this.size},removeInner:function(m,b){this.size-=b;for(var S=0;S<this.children.length;++S){var E=this.children[S],C=E.chunkSize();if(m<C){var M=Math.min(b,C-m),N=E.height;if(E.removeInner(m,M),this.height-=N-E.height,C==M&&(this.children.splice(S--,1),E.parent=null),(b-=M)==0)break;m=0}else m-=C}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Nh))){var j=[];this.collapse(j),this.children=[new Nh(j)],this.children[0].parent=this}},collapse:function(m){for(var b=0;b<this.children.length;++b)this.children[b].collapse(m)},insertInner:function(m,b,S){this.size+=b.length,this.height+=S;for(var E=0;E<this.children.length;++E){var C=this.children[E],M=C.chunkSize();if(m<=M){if(C.insertInner(m,b,S),C.lines&&C.lines.length>50){for(var N=C.lines.length%25+25,j=N;j<C.lines.length;){var V=new Nh(C.lines.slice(j,j+=25));C.height-=V.height,this.children.splice(++E,0,V),V.parent=this}C.lines=C.lines.slice(0,N),this.maybeSpill()}break}m-=M}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var b=new Bh(m.children.splice(m.children.length-5,5));if(m.parent){m.size-=b.size,m.height-=b.height;var S=Pe(m.parent.children,m);m.parent.children.splice(S+1,0,b)}else{var E=new Bh(m.children);E.parent=m,m.children=[E,b],m=E}b.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,b,S){for(var E=0;E<this.children.length;++E){var C=this.children[E],M=C.chunkSize();if(m<M){var N=Math.min(b,M-m);if(C.iterN(m,N,S))return!0;if((b-=N)==0)break;m=0}else m-=M}}};var zh=function(m,b,S){if(S)for(var E in S)S.hasOwnProperty(E)&&(this[E]=S[E]);this.doc=m,this.node=b};function _x(m,b,S){me(b)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&ly(m,S)}zh.prototype.clear=function(){var m=this.doc.cm,b=this.line.widgets,S=this.line,E=qt(S);if(E!=null&&b){for(var C=0;C<b.length;++C)b[C]==this&&b.splice(C--,1);b.length||(S.widgets=null);var M=An(this);Ut(S,Math.max(0,S.height-M)),m&&(Uo(m,function(){_x(m,S,-M),Yu(m,E,"widget")}),Gr(m,"lineWidgetCleared",m,this,E))}},zh.prototype.changed=function(){var m=this,b=this.height,S=this.doc.cm,E=this.line;this.height=null;var C=An(this)-b;C&&(Vt(this.doc,E)||Ut(E,E.height+C),S&&Uo(S,function(){S.curOp.forceUpdate=!0,_x(S,E,C),Gr(S,"lineWidgetChanged",S,m,qt(E))}))},Kt(zh);var Ex=0,Qu=function(m,b){this.lines=[],this.type=b,this.doc=m,this.id=++Ex};function vd(m,b,S,E,C){if(E&&E.shared)return function(fe,Se,ve,$e,Ne){($e=we($e)).shared=!1;var Me=[vd(fe,Se,ve,$e,Ne)],Ve=Me[0],nt=$e.widgetNode;return Ju(fe,function(Qe){nt&&($e.widgetNode=nt.cloneNode(!0)),Me.push(vd(Qe,Gt(Qe,Se),Gt(Qe,ve),$e,Ne));for(var pt=0;pt<Qe.linked.length;++pt)if(Qe.linked[pt].isParent)return;Ve=se(Me)}),new jh(Me,Ve)}(m,b,S,E,C);if(m.cm&&!m.cm.curOp)return _s(m.cm,vd)(m,b,S,E,C);var M=new Qu(m,C),N=ht(b,S);if(E&&we(E,M,!1),N>0||N==0&&M.clearWhenEmpty!==!1)return M;if(M.replacedWith&&(M.collapsed=!0,M.widgetNode=te("span",[M.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||M.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(M.widgetNode.insertLeft=!0)),M.collapsed){if(so(m,b.line,b,S,M)||b.line!=S.line&&so(m,S.line,b,S,M))throw new Error("Inserting collapsed marker partially overlapping an existing one");es=!0}M.addToHistory&&sx(m,{from:b,to:S,origin:"markText"},m.sel,NaN);var j,V=b.line,W=m.cm;if(m.iter(V,S.line+1,function(fe){W&&M.collapsed&&!W.options.lineWrapping&&Yi(fe)==W.display.maxLine&&(j=!0),M.collapsed&&V!=b.line&&Ut(fe,0),function(Se,ve,$e){var Ne=$e&&window.WeakSet&&($e.markedSpans||($e.markedSpans=new WeakSet));Ne&&Se.markedSpans&&Ne.has(Se.markedSpans)?Se.markedSpans.push(ve):(Se.markedSpans=Se.markedSpans?Se.markedSpans.concat([ve]):[ve],Ne&&Ne.add(Se.markedSpans)),ve.marker.attachLine(Se)}(fe,new ro(M,V==b.line?b.ch:null,V==S.line?S.ch:null),m.cm&&m.cm.curOp),++V}),M.collapsed&&m.iter(b.line,S.line+1,function(fe){Vt(m,fe)&&Ut(fe,0)}),M.clearOnEnter&&De(M,"beforeCursorEnter",function(){return M.clear()}),M.readOnly&&(Cr=!0,(m.history.done.length||m.history.undone.length)&&m.clearHistory()),M.collapsed&&(M.id=++Ex,M.atomic=!0),W){if(j&&(W.curOp.updateMaxLine=!0),M.collapsed)_o(W,b.line,S.line+1);else if(M.className||M.startStyle||M.endStyle||M.css||M.attributes||M.title)for(var ce=b.line;ce<=S.line;ce++)Yu(W,ce,"text");M.atomic&&dx(W.doc),Gr(W,"markerAdded",W,M)}return M}Qu.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,b=m&&!m.curOp;if(b&&Qc(m),_t(this,"clear")){var S=this.find();S&&Gr(this,"clear",S.from,S.to)}for(var E=null,C=null,M=0;M<this.lines.length;++M){var N=this.lines[M],j=Os(N.markedSpans,this);m&&!this.collapsed?Yu(m,qt(N),"text"):m&&(j.to!=null&&(C=qt(N)),j.from!=null&&(E=qt(N))),N.markedSpans=Us(N.markedSpans,j),j.from==null&&this.collapsed&&!Vt(this.doc,N)&&m&&Ut(N,ud(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var V=0;V<this.lines.length;++V){var W=Yi(this.lines[V]),ce=Be(W);ce>m.display.maxLineLength&&(m.display.maxLine=W,m.display.maxLineLength=ce,m.display.maxLineChanged=!0)}E!=null&&m&&this.collapsed&&_o(m,E,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&dx(m.doc)),m&&Gr(m,"markerCleared",m,this,E,C),b&&ef(m),this.parent&&this.parent.clear()}},Qu.prototype.find=function(m,b){var S,E;m==null&&this.type=="bookmark"&&(m=1);for(var C=0;C<this.lines.length;++C){var M=this.lines[C],N=Os(M.markedSpans,this);if(N.from!=null&&(S=Xe(b?M:qt(M),N.from),m==-1))return S;if(N.to!=null&&(E=Xe(b?M:qt(M),N.to),m==1))return E}return S&&{from:S,to:E}},Qu.prototype.changed=function(){var m=this,b=this.find(-1,!0),S=this,E=this.doc.cm;b&&E&&Uo(E,function(){var C=b.line,M=qt(b.line),N=Vn(E,M);if(N&&(Db(N),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!Vt(S.doc,C)&&S.height!=null){var j=S.height;S.height=null;var V=An(S)-j;V&&Ut(C,C.height+V)}Gr(E,"markerChanged",E,m)})},Qu.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&Pe(b.maybeHiddenMarkers,this)!=-1||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},Qu.prototype.detachLine=function(m){if(this.lines.splice(Pe(this.lines,m),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},Kt(Qu);var jh=function(m,b){this.markers=m,this.primary=b;for(var S=0;S<m.length;++S)m[S].parent=this};function Sx(m){return m.findMarks(Xe(m.first,0),m.clipPos(Xe(m.lastLine())),function(b){return b.parent})}function PS(m){for(var b=function(E){var C=m[E],M=[C.primary.doc];Ju(C.primary.doc,function(V){return M.push(V)});for(var N=0;N<C.markers.length;N++){var j=C.markers[N];Pe(M,j.doc)==-1&&(j.parent=null,C.markers.splice(N--,1))}},S=0;S<m.length;S++)b(S)}jh.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();Gr(this,"clear")}},jh.prototype.find=function(m,b){return this.primary.find(m,b)},Kt(jh);var NS=0,Eo=function(m,b,S,E,C){if(!(this instanceof Eo))return new Eo(m,b,S,E,C);S==null&&(S=0),Bh.call(this,[new Nh([new mn("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var M=Xe(S,0);this.sel=Zu(M),this.history=new Mm(null),this.id=++NS,this.modeOption=b,this.lineSep=E,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof m=="string"&&(m=this.splitLines(m)),gy(this,{from:M,to:M,text:m}),Vs(this,Zu(M),dt)};Eo.prototype=F(Bh.prototype,{constructor:Eo,iter:function(m,b,S){S?this.iterN(m-this.first,b-m,S):this.iterN(this.first,this.first+this.size,m)},insert:function(m,b){for(var S=0,E=0;E<b.length;++E)S+=b[E].height;this.insertInner(m-this.first,b,S)},remove:function(m,b){this.removeInner(m-this.first,b)},getValue:function(m){var b=Cn(this,this.first,this.first+this.size);return m===!1?b:b.join(m||this.lineSeparator())},setValue:Es(function(m){var b=Xe(this.first,0),S=this.first+this.size-1;gd(this,{from:b,to:Xe(S,et(this,S).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&Dh(this.cm,0,0),Vs(this,Zu(b),dt)}),replaceRange:function(m,b,S,E){yd(this,m,b=Gt(this,b),S=S?Gt(this,S):b,E)},getRange:function(m,b,S){var E=pn(this,Gt(this,m),Gt(this,b));return S===!1?E:S===""?E.join(""):E.join(S||this.lineSeparator())},getLine:function(m){var b=this.getLineHandle(m);return b&&b.text},getLineHandle:function(m){if(ci(this,m))return et(this,m)},getLineNumber:function(m){return qt(m)},getLineHandleVisualStart:function(m){return typeof m=="number"&&(m=et(this,m)),Yi(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return Gt(this,m)},getCursor:function(m){var b=this.sel.primary();return m==null||m=="head"?b.head:m=="anchor"?b.anchor:m=="end"||m=="to"||m===!1?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Es(function(m,b,S){ux(this,Gt(this,typeof m=="number"?Xe(m,b||0):m),null,S)}),setSelection:Es(function(m,b,S){ux(this,Gt(this,m),Gt(this,b||m),S)}),extendSelection:Es(function(m,b,S){Im(this,Gt(this,m),b&&Gt(this,b),S)}),extendSelections:Es(function(m,b){lx(this,vi(this,m),b)}),extendSelectionsBy:Es(function(m,b){lx(this,vi(this,oe(this.sel.ranges,m)),b)}),setSelections:Es(function(m,b,S){if(m.length){for(var E=[],C=0;C<m.length;C++)E[C]=new Pr(Gt(this,m[C].anchor),Gt(this,m[C].head||m[C].anchor));b==null&&(b=Math.min(m.length-1,this.sel.primIndex)),Vs(this,hl(this.cm,E,b),S)}}),addSelection:Es(function(m,b,S){var E=this.sel.ranges.slice(0);E.push(new Pr(Gt(this,m),Gt(this,b||m))),Vs(this,hl(this.cm,E,E.length-1),S)}),getSelection:function(m){for(var b,S=this.sel.ranges,E=0;E<S.length;E++){var C=pn(this,S[E].from(),S[E].to());b=b?b.concat(C):C}return m===!1?b:b.join(m||this.lineSeparator())},getSelections:function(m){for(var b=[],S=this.sel.ranges,E=0;E<S.length;E++){var C=pn(this,S[E].from(),S[E].to());m!==!1&&(C=C.join(m||this.lineSeparator())),b[E]=C}return b},replaceSelection:function(m,b,S){for(var E=[],C=0;C<this.sel.ranges.length;C++)E[C]=m;this.replaceSelections(E,b,S||"+input")},replaceSelections:Es(function(m,b,S){for(var E=[],C=this.sel,M=0;M<C.ranges.length;M++){var N=C.ranges[M];E[M]={from:N.from(),to:N.to(),text:this.splitLines(m[M]),origin:S}}for(var j=b&&b!="end"&&function(W,ce,fe){for(var Se=[],ve=Xe(W.first,0),$e=ve,Ne=0;Ne<ce.length;Ne++){var Me=ce[Ne],Ve=ex(Me.from,ve,$e),nt=ex(Ku(Me),ve,$e);if(ve=Me.to,$e=nt,fe=="around"){var Qe=W.sel.ranges[Ne],pt=ht(Qe.head,Qe.anchor)<0;Se[Ne]=new Pr(pt?nt:Ve,pt?Ve:nt)}else Se[Ne]=new Pr(Ve,Ve)}return new ha(Se,W.sel.primIndex)}(this,E,b),V=E.length-1;V>=0;V--)gd(this,E[V]);j?cx(this,j):this.cm&&dd(this.cm)}),undo:Es(function(){Bm(this,"undo")}),redo:Es(function(){Bm(this,"redo")}),undoSelection:Es(function(){Bm(this,"undo",!0)}),redoSelection:Es(function(){Bm(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,b=0,S=0,E=0;E<m.done.length;E++)m.done[E].ranges||++b;for(var C=0;C<m.undone.length;C++)m.undone[C].ranges||++S;return{undo:b,redo:S}},clearHistory:function(){var m=this;this.history=new Mm(this.history),Ju(this,function(b){return b.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:pd(this.history.done),undone:pd(this.history.undone)}},setHistory:function(m){var b=this.history=new Mm(this.history);b.done=pd(m.done.slice(0),null,!0),b.undone=pd(m.undone.slice(0),null,!0)},setGutterMarker:Es(function(m,b,S){return Ph(this,m,"gutter",function(E){var C=E.gutterMarkers||(E.gutterMarkers={});return C[b]=S,!S&&ye(C)&&(E.gutterMarkers=null),!0})}),clearGutter:Es(function(m){var b=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[m]&&Ph(b,S,"gutter",function(){return S.gutterMarkers[m]=null,ye(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(m){var b;if(typeof m=="number"){if(!ci(this,m)||(b=m,!(m=et(this,m))))return null}else if((b=qt(m))==null)return null;return{line:b,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:Es(function(m,b,S){return Ph(this,m,b=="gutter"?"gutter":"class",function(E){var C=b=="text"?"textClass":b=="background"?"bgClass":b=="gutter"?"gutterClass":"wrapClass";if(E[C]){if($(S).test(E[C]))return!1;E[C]+=" "+S}else E[C]=S;return!0})}),removeLineClass:Es(function(m,b,S){return Ph(this,m,b=="gutter"?"gutter":"class",function(E){var C=b=="text"?"textClass":b=="background"?"bgClass":b=="gutter"?"gutterClass":"wrapClass",M=E[C];if(!M)return!1;if(S==null)E[C]=null;else{var N=M.match($(S));if(!N)return!1;var j=N.index+N[0].length;E[C]=M.slice(0,N.index)+(N.index&&j!=M.length?" ":"")+M.slice(j)||null}return!0})}),addLineWidget:Es(function(m,b,S){return function(E,C,M,N){var j=new zh(E,M,N),V=E.cm;return V&&j.noHScroll&&(V.display.alignWidgets=!0),Ph(E,C,"widget",function(W){var ce=W.widgets||(W.widgets=[]);if(j.insertAt==null?ce.push(j):ce.splice(Math.min(ce.length,Math.max(0,j.insertAt)),0,j),j.line=W,V&&!Vt(E,W)){var fe=me(W)<E.scrollTop;Ut(W,W.height+An(j)),fe&&ly(V,j.height),V.curOp.forceUpdate=!0}return!0}),V&&Gr(V,"lineWidgetAdded",V,j,typeof C=="number"?C:qt(C)),j}(this,m,b,S)}),removeLineWidget:function(m){m.clear()},markText:function(m,b,S){return vd(this,Gt(this,m),Gt(this,b),S,S&&S.type||"range")},setBookmark:function(m,b){var S={replacedWith:b&&(b.nodeType==null?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return vd(this,m=Gt(this,m),m,S,"bookmark")},findMarksAt:function(m){var b=[],S=et(this,(m=Gt(this,m)).line).markedSpans;if(S)for(var E=0;E<S.length;++E){var C=S[E];(C.from==null||C.from<=m.ch)&&(C.to==null||C.to>=m.ch)&&b.push(C.marker.parent||C.marker)}return b},findMarks:function(m,b,S){m=Gt(this,m),b=Gt(this,b);var E=[],C=m.line;return this.iter(m.line,b.line+1,function(M){var N=M.markedSpans;if(N)for(var j=0;j<N.length;j++){var V=N[j];V.to!=null&&C==m.line&&m.ch>=V.to||V.from==null&&C!=m.line||V.from!=null&&C==b.line&&V.from>=b.ch||S&&!S(V.marker)||E.push(V.marker.parent||V.marker)}++C}),E},getAllMarks:function(){var m=[];return this.iter(function(b){var S=b.markedSpans;if(S)for(var E=0;E<S.length;++E)S[E].from!=null&&m.push(S[E].marker)}),m},posFromIndex:function(m){var b,S=this.first,E=this.lineSeparator().length;return this.iter(function(C){var M=C.text.length+E;if(M>m)return b=m,!0;m-=M,++S}),Gt(this,Xe(S,b))},indexFromPos:function(m){var b=(m=Gt(this,m)).ch;if(m.line<this.first||m.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,m.line,function(E){b+=E.text.length+S}),b},copy:function(m){var b=new Eo(Cn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,m&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(m){m||(m={});var b=this.first,S=this.first+this.size;m.from!=null&&m.from>b&&(b=m.from),m.to!=null&&m.to<S&&(S=m.to);var E=new Eo(Cn(this,b,S),m.mode||this.modeOption,b,this.lineSep,this.direction);return m.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:m.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],function(C,M){for(var N=0;N<M.length;N++){var j=M[N],V=j.find(),W=C.clipPos(V.from),ce=C.clipPos(V.to);if(ht(W,ce)){var fe=vd(C,W,ce,j.primary,j.primary.type);j.markers.push(fe),fe.parent=j}}}(E,Sx(this)),E},unlinkDoc:function(m){if(m instanceof Ri&&(m=m.doc),this.linked){for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==m){this.linked.splice(b,1),m.unlinkDoc(this),PS(Sx(this));break}}if(m.history==this.history){var S=[m.id];Ju(m,function(E){return S.push(E.id)},!0),m.history=new Mm(null),m.history.done=pd(this.history.done,S),m.history.undone=pd(this.history.undone,S)}},iterLinkedDocs:function(m){Ju(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):yn(m)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Es(function(m){var b;m!="rtl"&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(S){return S.order=null}),this.cm&&Uo(b=this.cm,function(){rx(b),_o(b)}))})}),Eo.prototype.eachLine=Eo.prototype.iter;var Ax=0;function BS(m){var b=this;if(Cx(b),!bt(b,m)&&!pr(b.display,m)){sn(m),c&&(Ax=+new Date);var S=Xc(b,m,!0),E=m.dataTransfer.files;if(S&&!b.isReadOnly())if(E&&E.length&&window.FileReader&&window.File)for(var C=E.length,M=Array(C),N=0,j=function(){++N==C&&_s(b,function(){var ve={from:S=Gt(b.doc,S),to:S,text:b.doc.splitLines(M.filter(function($e){return $e!=null}).join(b.doc.lineSeparator())),origin:"paste"};gd(b.doc,ve),cx(b.doc,Zu(Gt(b.doc,S),Gt(b.doc,Ku(ve))))})()},V=function(ve,$e){if(b.options.allowDropFileTypes&&Pe(b.options.allowDropFileTypes,ve.type)==-1)j();else{var Ne=new FileReader;Ne.onerror=function(){return j()},Ne.onload=function(){var Me=Ne.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Me)||(M[$e]=Me),j()},Ne.readAsText(ve)}},W=0;W<E.length;W++)V(E[W],W);else{if(b.state.draggingText&&b.doc.sel.contains(S)>-1)return b.state.draggingText(m),void setTimeout(function(){return b.display.input.focus()},20);try{var ce=m.dataTransfer.getData("Text");if(ce){var fe;if(b.state.draggingText&&!b.state.draggingText.copy&&(fe=b.listSelections()),Pm(b.doc,Zu(S,S)),fe)for(var Se=0;Se<fe.length;++Se)yd(b.doc,"",fe[Se].anchor,fe[Se].head,"drag");b.replaceSelection(ce,"around","paste"),b.display.input.focus()}}catch{}}}}function Cx(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function kx(m){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),S=[],E=0;E<b.length;E++){var C=b[E].CodeMirror;C&&S.push(C)}S.length&&S[0].operation(function(){for(var M=0;M<S.length;M++)m(S[M])})}}var Tx=!1;function zS(){var m;Tx||(De(window,"resize",function(){m==null&&(m=setTimeout(function(){m=null,kx(jS)},100))}),De(window,"blur",function(){return kx(fd)}),Tx=!0)}function jS(m){var b=m.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,m.setSize()}for(var ec={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Uh=0;Uh<10;Uh++)ec[Uh+48]=ec[Uh+96]=String(Uh);for(var zm=65;zm<=90;zm++)ec[zm]=String.fromCharCode(zm);for(var qh=1;qh<=12;qh++)ec[qh+111]=ec[qh+63235]="F"+qh;var pu={};function US(m){var b,S,E,C,M=m.split(/-(?!$)/);m=M[M.length-1];for(var N=0;N<M.length-1;N++){var j=M[N];if(/^(cmd|meta|m)$/i.test(j))C=!0;else if(/^a(lt)?$/i.test(j))b=!0;else if(/^(c|ctrl|control)$/i.test(j))S=!0;else{if(!/^s(hift)?$/i.test(j))throw new Error("Unrecognized modifier name: "+j);E=!0}}return b&&(m="Alt-"+m),S&&(m="Ctrl-"+m),C&&(m="Cmd-"+m),E&&(m="Shift-"+m),m}function qS(m){var b={};for(var S in m)if(m.hasOwnProperty(S)){var E=m[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(E=="..."){delete m[S];continue}for(var C=oe(S.split(" "),US),M=0;M<C.length;M++){var N=void 0,j=void 0;M==C.length-1?(j=C.join(" "),N=E):(j=C.slice(0,M+1).join(" "),N="...");var V=b[j];if(V){if(V!=N)throw new Error("Inconsistent bindings for "+j)}else b[j]=N}delete m[S]}for(var W in b)m[W]=b[W];return m}function bd(m,b,S,E){var C=(b=jm(b)).call?b.call(m,E):b[m];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&S(C))return"handled";if(b.fallthrough){if(Object.prototype.toString.call(b.fallthrough)!="[object Array]")return bd(m,b.fallthrough,S,E);for(var M=0;M<b.fallthrough.length;M++){var N=bd(m,b.fallthrough[M],S,E);if(N)return N}}}function Dx(m){var b=typeof m=="string"?m:ec[m.keyCode];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function Lx(m,b,S){var E=m;return b.altKey&&E!="Alt"&&(m="Alt-"+m),(K?b.metaKey:b.ctrlKey)&&E!="Ctrl"&&(m="Ctrl-"+m),(K?b.ctrlKey:b.metaKey)&&E!="Mod"&&(m="Cmd-"+m),!S&&b.shiftKey&&E!="Shift"&&(m="Shift-"+m),m}function Rx(m,b){if(x&&m.keyCode==34&&m.char)return!1;var S=ec[m.keyCode];return S!=null&&!m.altGraphKey&&(m.keyCode==3&&m.code&&(S=m.code),Lx(S,m,b))}function jm(m){return typeof m=="string"?pu[m]:m}function xd(m,b){for(var S=m.doc.sel.ranges,E=[],C=0;C<S.length;C++){for(var M=b(S[C]);E.length&&ht(M.from,se(E).to)<=0;){var N=E.pop();if(ht(N.from,M.from)<0){M.from=N.from;break}}E.push(M)}Uo(m,function(){for(var j=E.length-1;j>=0;j--)yd(m.doc,"",E[j].from,E[j].to,"+delete");dd(m)})}function xy(m,b,S){var E=P(m.text,b+S,S);return E<0||E>m.text.length?null:E}function wy(m,b,S){var E=xy(m,b.ch,S);return E==null?null:new Xe(b.line,E,S<0?"after":"before")}function _y(m,b,S,E,C){if(m){b.doc.direction=="rtl"&&(C=-C);var M=Ce(S,b.doc.direction);if(M){var N,j=C<0?se(M):M[0],V=C<0==(j.level==1)?"after":"before";if(j.level>0||b.doc.direction=="rtl"){var W=mr(b,S);N=C<0?S.text.length-1:0;var ce=Pn(b,W,N).top;N=Q(function(fe){return Pn(b,W,fe).top==ce},C<0==(j.level==1)?j.from:j.to-1,N),V=="before"&&(N=xy(S,N,1))}else N=C<0?j.to:j.from;return new Xe(E,N,V)}}return new Xe(E,C<0?S.text.length:0,C<0?"before":"after")}pu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},pu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},pu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},pu.default=k?pu.macDefault:pu.pcDefault;var Hh={selectAll:mx,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),dt)},killLine:function(m){return xd(m,function(b){if(b.empty()){var S=et(m.doc,b.head.line).text.length;return b.head.ch==S&&b.head.line<m.lastLine()?{from:b.head,to:Xe(b.head.line+1,0)}:{from:b.head,to:Xe(b.head.line,S)}}return{from:b.from(),to:b.to()}})},deleteLine:function(m){return xd(m,function(b){return{from:Xe(b.from().line,0),to:Gt(m.doc,Xe(b.to().line+1,0))}})},delLineLeft:function(m){return xd(m,function(b){return{from:Xe(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(m){return xd(m,function(b){var S=m.charCoords(b.head,"div").top+5;return{from:m.coordsChar({left:0,top:S},"div"),to:b.from()}})},delWrappedLineRight:function(m){return xd(m,function(b){var S=m.charCoords(b.head,"div").top+5,E=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:S},"div");return{from:b.from(),to:E}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(Xe(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(Xe(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(b){return Fx(m,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(b){return Ox(m,b.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(b){return function(S,E){var C=et(S.doc,E),M=function(N){for(var j;j=fi(N);)N=j.find(1,!0).line;return N}(C);return M!=C&&(E=qt(M)),_y(!0,S,C,E,-1)}(m,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(b){var S=m.cursorCoords(b.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:S},"div")},Wt)},goLineLeft:function(m){return m.extendSelectionsBy(function(b){var S=m.cursorCoords(b.head,"div").top+5;return m.coordsChar({left:0,top:S},"div")},Wt)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(b){var S=m.cursorCoords(b.head,"div").top+5,E=m.coordsChar({left:0,top:S},"div");return E.ch<m.getLine(E.line).search(/\S/)?Ox(m,b.head):E},Wt)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("	")},insertSoftTab:function(m){for(var b=[],S=m.listSelections(),E=m.options.tabSize,C=0;C<S.length;C++){var M=S[C].from(),N=Ie(m.getLine(M.line),M.ch,E);b.push(pe(E-N%E))}m.replaceSelections(b)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Uo(m,function(){for(var b=m.listSelections(),S=[],E=0;E<b.length;E++)if(b[E].empty()){var C=b[E].head,M=et(m.doc,C.line).text;if(M){if(C.ch==M.length&&(C=new Xe(C.line,C.ch-1)),C.ch>0)C=new Xe(C.line,C.ch+1),m.replaceRange(M.charAt(C.ch-1)+M.charAt(C.ch-2),Xe(C.line,C.ch-2),C,"+transpose");else if(C.line>m.doc.first){var N=et(m.doc,C.line-1).text;N&&(C=new Xe(C.line,1),m.replaceRange(M.charAt(0)+m.doc.lineSeparator()+N.charAt(N.length-1),Xe(C.line-1,N.length-1),C,"+transpose"))}}S.push(new Pr(C,C))}m.setSelections(S)})},newlineAndIndent:function(m){return Uo(m,function(){for(var b=m.listSelections(),S=b.length-1;S>=0;S--)m.replaceRange(m.doc.lineSeparator(),b[S].anchor,b[S].head,"+input");b=m.listSelections();for(var E=0;E<b.length;E++)m.indentLine(b[E].from().line,null,!0);dd(m)})},openLine:function(m){return m.replaceSelection(`
`,"start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function Fx(m,b){var S=et(m.doc,b),E=Yi(S);return E!=S&&(b=qt(E)),_y(!0,m,E,b,1)}function Ox(m,b){var S=Fx(m,b.line),E=et(m.doc,S.line),C=Ce(E,m.doc.direction);if(!C||C[0].level==0){var M=Math.max(S.ch,E.text.search(/\S/)),N=b.line==S.line&&b.ch<=M&&b.ch;return Xe(S.line,N?0:M,S.sticky)}return S}function Um(m,b,S){if(typeof b=="string"&&!(b=Hh[b]))return!1;m.display.input.ensurePolled();var E=m.display.shift,C=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),S&&(m.display.shift=!1),C=b(m)!=At}finally{m.display.shift=E,m.state.suppressEdits=!1}return C}var HS=new qe;function Gh(m,b,S,E){var C=m.state.keySeq;if(C){if(Dx(b))return"handled";if(/\'$/.test(b)?m.state.keySeq=null:HS.set(50,function(){m.state.keySeq==C&&(m.state.keySeq=null,m.display.input.reset())}),Mx(m,C+" "+b,S,E))return!0}return Mx(m,b,S,E)}function Mx(m,b,S,E){var C=function(M,N,j){for(var V=0;V<M.state.keyMaps.length;V++){var W=bd(N,M.state.keyMaps[V],j,M);if(W)return W}return M.options.extraKeys&&bd(N,M.options.extraKeys,j,M)||bd(N,M.options.keyMap,j,M)}(m,b,E);return C=="multi"&&(m.state.keySeq=b),C=="handled"&&Gr(m,"keyHandled",m,b,S),C!="handled"&&C!="multi"||(sn(S),iy(m)),!!C}function $x(m,b){var S=Rx(b,!0);return!!S&&(b.shiftKey&&!m.state.keySeq?Gh(m,"Shift-"+S,b,function(E){return Um(m,E,!0)})||Gh(m,S,b,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return Um(m,E)}):Gh(m,S,b,function(E){return Um(m,E)}))}var Ey=null;function Ix(m){var b=this;if(!(m.target&&m.target!=b.display.input.getField()||(b.curOp.focus=ee(ze(b)),bt(b,m)))){c&&d<11&&m.keyCode==27&&(m.returnValue=!1);var S=m.keyCode;b.display.shift=S==16||m.shiftKey;var E=$x(b,m);x&&(Ey=E?S:null,E||S!=88||ir||!(k?m.metaKey:m.ctrlKey)||b.replaceSelection("",null,"cut")),a&&!k&&!E&&S==46&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),S!=18||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||function(C){var M=C.display.lineDiv;function N(j){j.keyCode!=18&&j.altKey||(U(M,"CodeMirror-crosshair"),We(document,"keyup",N),We(document,"mouseover",N))}z(M,"CodeMirror-crosshair"),De(document,"keyup",N),De(document,"mouseover",N)}(b)}}function Px(m){m.keyCode==16&&(this.doc.sel.shift=!1),bt(this,m)}function Nx(m){var b=this;if(!(m.target&&m.target!=b.display.input.getField()||pr(b.display,m)||bt(b,m)||m.ctrlKey&&!m.altKey||k&&m.metaKey)){var S=m.keyCode,E=m.charCode;if(x&&S==Ey)return Ey=null,void sn(m);if(!x||m.which&&!(m.which<10)||!$x(b,m)){var C=String.fromCharCode(E??S);C!="\b"&&(function(M,N,j){return Gh(M,"'"+j+"'",N,function(V){return Um(M,V,!0)})}(b,m,C)||b.display.input.onKeyPress(m))}}}var Vh,Wh,Sy=function(m,b,S){this.time=m,this.pos=b,this.button=S};function Bx(m){var b=this,S=b.display;if(!(bt(b,m)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=m.shiftKey,pr(S,m))h||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));else if(!Ay(b,m)){var E=Xc(b,m),C=Ji(m),M=E?function(N,j){var V=+new Date;return Wh&&Wh.compare(V,N,j)?(Vh=Wh=null,"triple"):Vh&&Vh.compare(V,N,j)?(Wh=new Sy(V,N,j),Vh=null,"double"):(Vh=new Sy(V,N,j),Wh=null,"single")}(E,C):"single";He(b).focus(),C==1&&b.state.selectingText&&b.state.selectingText(m),E&&function(N,j,V,W,ce){var fe="Click";return W=="double"?fe="Double"+fe:W=="triple"&&(fe="Triple"+fe),Gh(N,Lx(fe=(j==1?"Left":j==2?"Middle":"Right")+fe,ce),ce,function(Se){if(typeof Se=="string"&&(Se=Hh[Se]),!Se)return!1;var ve=!1;try{N.isReadOnly()&&(N.state.suppressEdits=!0),ve=Se(N,V)!=At}finally{N.state.suppressEdits=!1}return ve})}(b,C,E,M,m)||(C==1?E?function(N,j,V,W){c?setTimeout(je(zb,N),0):N.curOp.focus=ee(ze(N));var ce,fe=function(ve,$e,Ne){var Me=ve.getOption("configureMouse"),Ve=Me?Me(ve,$e,Ne):{};if(Ve.unit==null){var nt=R?Ne.shiftKey&&Ne.metaKey:Ne.altKey;Ve.unit=nt?"rectangle":$e=="single"?"char":$e=="double"?"word":"line"}return(Ve.extend==null||ve.doc.extend)&&(Ve.extend=ve.doc.extend||Ne.shiftKey),Ve.addNew==null&&(Ve.addNew=k?Ne.metaKey:Ne.ctrlKey),Ve.moveOnDrag==null&&(Ve.moveOnDrag=!(k?Ne.altKey:Ne.ctrlKey)),Ve}(N,V,W),Se=N.doc.sel;N.options.dragDrop&&No&&!N.isReadOnly()&&V=="single"&&(ce=Se.contains(j))>-1&&(ht((ce=Se.ranges[ce]).from(),j)<0||j.xRel>0)&&(ht(ce.to(),j)>0||j.xRel<0)?function(ve,$e,Ne,Me){var Ve=ve.display,nt=!1,Qe=_s(ve,function(mt){h&&(Ve.scroller.draggable=!1),ve.state.draggingText=!1,ve.state.delayingBlurEvent&&(ve.hasFocus()?ve.state.delayingBlurEvent=!1:sy(ve)),We(Ve.wrapper.ownerDocument,"mouseup",Qe),We(Ve.wrapper.ownerDocument,"mousemove",pt),We(Ve.scroller,"dragstart",ct),We(Ve.scroller,"drop",Qe),nt||(sn(mt),Me.addNew||Im(ve.doc,Ne,null,null,Me.extend),h&&!y||c&&d==9?setTimeout(function(){Ve.wrapper.ownerDocument.body.focus({preventScroll:!0}),Ve.input.focus()},20):Ve.input.focus())}),pt=function(mt){nt=nt||Math.abs($e.clientX-mt.clientX)+Math.abs($e.clientY-mt.clientY)>=10},ct=function(){return nt=!0};h&&(Ve.scroller.draggable=!0),ve.state.draggingText=Qe,Qe.copy=!Me.moveOnDrag,De(Ve.wrapper.ownerDocument,"mouseup",Qe),De(Ve.wrapper.ownerDocument,"mousemove",pt),De(Ve.scroller,"dragstart",ct),De(Ve.scroller,"drop",Qe),ve.state.delayingBlurEvent=!0,setTimeout(function(){return Ve.input.focus()},20),Ve.scroller.dragDrop&&Ve.scroller.dragDrop()}(N,W,j,fe):function(ve,$e,Ne,Me){c&&sy(ve);var Ve=ve.display,nt=ve.doc;sn($e);var Qe,pt,ct=nt.sel,mt=ct.ranges;if(Me.addNew&&!Me.extend?(pt=nt.sel.contains(Ne),Qe=pt>-1?mt[pt]:new Pr(Ne,Ne)):(Qe=nt.sel.primary(),pt=nt.sel.primIndex),Me.unit=="rectangle")Me.addNew||(Qe=new Pr(Ne,Ne)),Ne=Xc(ve,$e,!0,!0),pt=-1;else{var bn=zx(ve,Ne,Me.unit);Qe=Me.extend?vy(Qe,bn.anchor,bn.head,Me.extend):bn}Me.addNew?pt==-1?(pt=mt.length,Vs(nt,hl(ve,mt.concat([Qe]),pt),{scroll:!1,origin:"*mouse"})):mt.length>1&&mt[pt].empty()&&Me.unit=="char"&&!Me.extend?(Vs(nt,hl(ve,mt.slice(0,pt).concat(mt.slice(pt+1)),0),{scroll:!1,origin:"*mouse"}),ct=nt.sel):by(nt,pt,Qe,nn):(pt=0,Vs(nt,new ha([Qe],0),nn),ct=nt.sel);var Mt=Ne;function Hn($n){if(ht(Mt,$n)!=0)if(Mt=$n,Me.unit=="rectangle"){for(var Br=[],Fn=ve.options.tabSize,Jn=Ie(et(nt,Ne.line).text,Ne.ch,Fn),Nn=Ie(et(nt,$n.line).text,$n.ch,Fn),vr=Math.min(Jn,Nn),lo=Math.max(Jn,Nn),zr=Math.min(Ne.line,$n.line),Ws=Math.min(ve.lastLine(),Math.max(Ne.line,$n.line));zr<=Ws;zr++){var Ys=et(nt,zr).text,Ci=Mn(Ys,vr,Fn);vr==lo?Br.push(new Pr(Xe(zr,Ci),Xe(zr,Ci))):Ys.length>Ci&&Br.push(new Pr(Xe(zr,Ci),Xe(zr,Mn(Ys,lo,Fn))))}Br.length||Br.push(new Pr(Ne,Ne)),Vs(nt,hl(ve,ct.ranges.slice(0,pt).concat(Br),pt),{origin:"*mouse",scroll:!1}),ve.scrollIntoView($n)}else{var uo,Ia=Qe,Ms=zx(ve,$n,Me.unit),ml=Ia.anchor;ht(Ms.anchor,ml)>0?(uo=Ms.head,ml=Rr(Ia.from(),Ms.anchor)):(uo=Ms.anchor,ml=Ar(Ia.to(),Ms.head));var Wm=ct.ranges.slice(0);Wm[pt]=function(Jx,tf){var qo=tf.anchor,tc=tf.head,XS=et(Jx.doc,qo.line);if(ht(qo,tc)==0&&qo.sticky==tc.sticky)return tf;var Ed=Ce(XS);if(!Ed)return tf;var Dy=ae(Ed,qo.ch,qo.sticky),Xh=Ed[Dy];if(Xh.from!=qo.ch&&Xh.to!=qo.ch)return tf;var Ym,Zh=Dy+(Xh.from==qo.ch==(Xh.level!=1)?0:1);if(Zh==0||Zh==Ed.length)return tf;if(tc.line!=qo.line)Ym=(tc.line-qo.line)*(Jx.doc.direction=="ltr"?1:-1)>0;else{var Ly=ae(Ed,tc.ch,tc.sticky),Qx=Ly-Dy||(tc.ch-qo.ch)*(Xh.level==1?-1:1);Ym=Ly==Zh-1||Ly==Zh?Qx<0:Qx>0}var Ry=Ed[Zh+(Ym?-1:0)],ew=Ym==(Ry.level==1),tw=ew?Ry.from:Ry.to,nw=ew?"after":"before";return qo.ch==tw&&qo.sticky==nw?tf:new Pr(new Xe(qo.line,tw,nw),tc)}(ve,new Pr(Gt(nt,ml),uo)),Vs(nt,hl(ve,Wm,pt),nn)}}var fn=Ve.wrapper.getBoundingClientRect(),or=0;function Nr($n){var Br=++or,Fn=Xc(ve,$n,!0,Me.unit=="rectangle");if(Fn)if(ht(Fn,Mt)!=0){ve.curOp.focus=ee(ze(ve)),Hn(Fn);var Jn=Lm(Ve,nt);(Fn.line>=Jn.to||Fn.line<Jn.from)&&setTimeout(_s(ve,function(){or==Br&&Nr($n)}),150)}else{var Nn=$n.clientY<fn.top?-20:$n.clientY>fn.bottom?20:0;Nn&&setTimeout(_s(ve,function(){or==Br&&(Ve.scroller.scrollTop+=Nn,Nr($n))}),50)}}function ar($n){ve.state.selectingText=!1,or=1/0,$n&&(sn($n),Ve.input.focus()),We(Ve.wrapper.ownerDocument,"mousemove",Zn),We(Ve.wrapper.ownerDocument,"mouseup",lr),nt.history.lastSelOrigin=null}var Zn=_s(ve,function($n){$n.buttons!==0&&Ji($n)?Nr($n):ar($n)}),lr=_s(ve,ar);ve.state.selectingText=lr,De(Ve.wrapper.ownerDocument,"mousemove",Zn),De(Ve.wrapper.ownerDocument,"mouseup",lr)}(N,W,j,fe)}(b,E,M,m):Er(m)==S.scroller&&sn(m):C==2?(E&&Im(b.doc,E),setTimeout(function(){return S.input.focus()},20)):C==3&&(L?b.display.input.onContextMenu(m):sy(b)))}}}function zx(m,b,S){if(S=="char")return new Pr(b,b);if(S=="word")return m.findWordAt(b);if(S=="line")return new Pr(Xe(b.line,0),Gt(m.doc,Xe(b.line+1,0)));var E=S(m,b);return new Pr(E.from,E.to)}function jx(m,b,S,E){var C,M;if(b.touches)C=b.touches[0].clientX,M=b.touches[0].clientY;else try{C=b.clientX,M=b.clientY}catch{return!1}if(C>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;E&&sn(b);var N=m.display,j=N.lineDiv.getBoundingClientRect();if(M>j.bottom||!_t(m,S))return on(b);M-=j.top-N.viewOffset;for(var V=0;V<m.display.gutterSpecs.length;++V){var W=N.gutters.childNodes[V];if(W&&W.getBoundingClientRect().right>=C)return tt(m,S,m,Sr(m.doc,M),m.display.gutterSpecs[V].className,b),on(b)}}function Ay(m,b){return jx(m,b,"gutterClick",!0)}function Ux(m,b){pr(m.display,b)||function(S,E){return _t(S,"gutterContextMenu")?jx(S,E,"gutterContextMenu",!1):!1}(m,b)||bt(m,b,"contextmenu")||L||m.display.input.onContextMenu(b)}function qx(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),kh(m)}Sy.prototype.compare=function(m,b,S){return this.time+400>m&&ht(b,this.pos)==0&&S==this.button};var wd={toString:function(){return"CodeMirror.Init"}},Hx={},qm={};function GS(m,b,S){if(!b!=!(S&&S!=wd)){var E=m.display.dragFunctions,C=b?De:We;C(m.display.scroller,"dragstart",E.start),C(m.display.scroller,"dragenter",E.enter),C(m.display.scroller,"dragover",E.over),C(m.display.scroller,"dragleave",E.leave),C(m.display.scroller,"drop",E.drop)}}function VS(m){m.options.lineWrapping?(z(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(U(m.display.wrapper,"CodeMirror-wrap"),gt(m)),ny(m),_o(m),kh(m),setTimeout(function(){return hd(m)},100)}function Ri(m,b){var S=this;if(!(this instanceof Ri))return new Ri(m,b);this.options=b=b?we(b):{},we(Hx,b,!1);var E=b.value;typeof E=="string"?E=new Eo(E,b.mode,null,b.lineSeparator,b.direction):b.mode&&(E.modeOption=b.mode),this.doc=E;var C=new Ri.inputStyles[b.inputStyle](this),M=this.display=new OS(m,E,C,b);for(var N in M.wrapper.CodeMirror=this,qx(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},b.autofocus&&!D&&M.input.focus(),c&&d<11&&setTimeout(function(){return S.display.input.reset(!0)},20),function(V){var W=V.display;De(W.scroller,"mousedown",_s(V,Bx)),De(W.scroller,"dblclick",c&&d<11?_s(V,function(Me){if(!bt(V,Me)){var Ve=Xc(V,Me);if(Ve&&!Ay(V,Me)&&!pr(V.display,Me)){sn(Me);var nt=V.findWordAt(Ve);Im(V.doc,nt.anchor,nt.head)}}}):function(Me){return bt(V,Me)||sn(Me)}),De(W.scroller,"contextmenu",function(Me){return Ux(V,Me)}),De(W.input.getField(),"contextmenu",function(Me){W.scroller.contains(Me.target)||Ux(V,Me)});var ce,fe={end:0};function Se(){W.activeTouch&&(ce=setTimeout(function(){return W.activeTouch=null},1e3),(fe=W.activeTouch).end=+new Date)}function ve(Me){if(Me.touches.length!=1)return!1;var Ve=Me.touches[0];return Ve.radiusX<=1&&Ve.radiusY<=1}function $e(Me,Ve){if(Ve.left==null)return!0;var nt=Ve.left-Me.left,Qe=Ve.top-Me.top;return nt*nt+Qe*Qe>400}De(W.scroller,"touchstart",function(Me){if(!bt(V,Me)&&!ve(Me)&&!Ay(V,Me)){W.input.ensurePolled(),clearTimeout(ce);var Ve=+new Date;W.activeTouch={start:Ve,moved:!1,prev:Ve-fe.end<=300?fe:null},Me.touches.length==1&&(W.activeTouch.left=Me.touches[0].pageX,W.activeTouch.top=Me.touches[0].pageY)}}),De(W.scroller,"touchmove",function(){W.activeTouch&&(W.activeTouch.moved=!0)}),De(W.scroller,"touchend",function(Me){var Ve=W.activeTouch;if(Ve&&!pr(W,Me)&&Ve.left!=null&&!Ve.moved&&new Date-Ve.start<300){var nt,Qe=V.coordsChar(W.activeTouch,"page");nt=!Ve.prev||$e(Ve,Ve.prev)?new Pr(Qe,Qe):!Ve.prev.prev||$e(Ve,Ve.prev.prev)?V.findWordAt(Qe):new Pr(Xe(Qe.line,0),Gt(V.doc,Xe(Qe.line+1,0))),V.setSelection(nt.anchor,nt.head),V.focus(),sn(Me)}Se()}),De(W.scroller,"touchcancel",Se),De(W.scroller,"scroll",function(){W.scroller.clientHeight&&(Lh(V,W.scroller.scrollTop),Kc(V,W.scroller.scrollLeft,!0),tt(V,"scroll",V))}),De(W.scroller,"mousewheel",function(Me){return Jb(V,Me)}),De(W.scroller,"DOMMouseScroll",function(Me){return Jb(V,Me)}),De(W.wrapper,"scroll",function(){return W.wrapper.scrollTop=W.wrapper.scrollLeft=0}),W.dragFunctions={enter:function(Me){bt(V,Me)||vn(Me)},over:function(Me){bt(V,Me)||(function(Ve,nt){var Qe=Xc(Ve,nt);if(Qe){var pt=document.createDocumentFragment();ry(Ve,Qe,pt),Ve.display.dragCursor||(Ve.display.dragCursor=X("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ve.display.lineSpace.insertBefore(Ve.display.dragCursor,Ve.display.cursorDiv)),Y(Ve.display.dragCursor,pt)}}(V,Me),vn(Me))},start:function(Me){return function(Ve,nt){if(c&&(!Ve.state.draggingText||+new Date-Ax<100))vn(nt);else if(!bt(Ve,nt)&&!pr(Ve.display,nt)&&(nt.dataTransfer.setData("Text",Ve.getSelection()),nt.dataTransfer.effectAllowed="copyMove",nt.dataTransfer.setDragImage&&!y)){var Qe=X("img",null,null,"position: fixed; left: 0; top: 0;");Qe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(Qe.width=Qe.height=1,Ve.display.wrapper.appendChild(Qe),Qe._top=Qe.offsetTop),nt.dataTransfer.setDragImage(Qe,0,0),x&&Qe.parentNode.removeChild(Qe)}}(V,Me)},drop:_s(V,BS),leave:function(Me){bt(V,Me)||Cx(V)}};var Ne=W.input.getField();De(Ne,"keyup",function(Me){return Px.call(V,Me)}),De(Ne,"keydown",_s(V,Ix)),De(Ne,"keypress",_s(V,Nx)),De(Ne,"focus",function(Me){return oy(V,Me)}),De(Ne,"blur",function(Me){return fd(V,Me)})}(this),zS(),Qc(this),this.curOp.forceUpdate=!0,nx(this,E),b.autofocus&&!D||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&oy(S)},20):fd(this),qm)qm.hasOwnProperty(N)&&qm[N](this,b[N],wd);Xb(this),b.finishInit&&b.finishInit(this);for(var j=0;j<Cy.length;++j)Cy[j](this);ef(this),h&&b.lineWrapping&&getComputedStyle(M.lineDiv).textRendering=="optimizelegibility"&&(M.lineDiv.style.textRendering="auto")}Ri.defaults=Hx,Ri.optionHandlers=qm;var Cy=[];function Yh(m,b,S,E){var C,M=m.doc;S==null&&(S="add"),S=="smart"&&(M.mode.indent?C=no(m,b).state:S="prev");var N=m.options.tabSize,j=et(M,b),V=Ie(j.text,null,N);j.stateAfter&&(j.stateAfter=null);var W,ce=j.text.match(/^\s*/)[0];if(E||/\S/.test(j.text)){if(S=="smart"&&((W=M.mode.indent(C,j.text.slice(ce.length),j.text))==At||W>150)){if(!E)return;S="prev"}}else W=0,S="not";S=="prev"?W=b>M.first?Ie(et(M,b-1).text,null,N):0:S=="add"?W=V+m.options.indentUnit:S=="subtract"?W=V-m.options.indentUnit:typeof S=="number"&&(W=V+S),W=Math.max(0,W);var fe="",Se=0;if(m.options.indentWithTabs)for(var ve=Math.floor(W/N);ve;--ve)Se+=N,fe+="	";if(Se<W&&(fe+=pe(W-Se)),fe!=ce)return yd(M,fe,Xe(b,0),Xe(b,ce.length),"+input"),j.stateAfter=null,!0;for(var $e=0;$e<M.sel.ranges.length;$e++){var Ne=M.sel.ranges[$e];if(Ne.head.line==b&&Ne.head.ch<ce.length){var Me=Xe(b,ce.length);by(M,$e,new Pr(Me,Me));break}}}Ri.defineInitHook=function(m){return Cy.push(m)};var pl=null;function Hm(m){pl=m}function ky(m,b,S,E,C){var M=m.doc;m.display.shift=!1,E||(E=M.sel);var N=+new Date-200,j=C=="paste"||m.state.pasteIncoming>N,V=yn(b),W=null;if(j&&E.ranges.length>1)if(pl&&pl.text.join(`
`)==b){if(E.ranges.length%pl.text.length==0){W=[];for(var ce=0;ce<pl.text.length;ce++)W.push(M.splitLines(pl.text[ce]))}}else V.length==E.ranges.length&&m.options.pasteLinesPerSelection&&(W=oe(V,function(Ve){return[Ve]}));for(var fe=m.curOp.updateInput,Se=E.ranges.length-1;Se>=0;Se--){var ve=E.ranges[Se],$e=ve.from(),Ne=ve.to();ve.empty()&&(S&&S>0?$e=Xe($e.line,$e.ch-S):m.state.overwrite&&!j?Ne=Xe(Ne.line,Math.min(et(M,Ne.line).text.length,Ne.ch+se(V).length)):j&&pl&&pl.lineWise&&pl.text.join(`
`)==V.join(`
`)&&($e=Ne=Xe($e.line,0)));var Me={from:$e,to:Ne,text:W?W[Se%W.length]:V,origin:C||(j?"paste":m.state.cutIncoming>N?"cut":"+input")};gd(m.doc,Me),Gr(m,"inputRead",m,Me)}b&&!j&&Vx(m,b),dd(m),m.curOp.updateInput<2&&(m.curOp.updateInput=fe),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function Gx(m,b){var S=m.clipboardData&&m.clipboardData.getData("Text");if(S)return m.preventDefault(),b.isReadOnly()||b.options.disableInput||!b.hasFocus()||Uo(b,function(){return ky(b,S,0,null,"paste")}),!0}function Vx(m,b){if(m.options.electricChars&&m.options.smartIndent)for(var S=m.doc.sel,E=S.ranges.length-1;E>=0;E--){var C=S.ranges[E];if(!(C.head.ch>100||E&&S.ranges[E-1].head.line==C.head.line)){var M=m.getModeAt(C.head),N=!1;if(M.electricChars){for(var j=0;j<M.electricChars.length;j++)if(b.indexOf(M.electricChars.charAt(j))>-1){N=Yh(m,C.head.line,"smart");break}}else M.electricInput&&M.electricInput.test(et(m.doc,C.head.line).text.slice(0,C.head.ch))&&(N=Yh(m,C.head.line,"smart"));N&&Gr(m,"electricInput",m,C.head.line)}}}function Wx(m){for(var b=[],S=[],E=0;E<m.doc.sel.ranges.length;E++){var C=m.doc.sel.ranges[E].head.line,M={anchor:Xe(C,0),head:Xe(C+1,0)};S.push(M),b.push(m.getRange(M.anchor,M.head))}return{text:b,ranges:S}}function Yx(m,b,S,E){m.setAttribute("autocorrect",S?"":"off"),m.setAttribute("autocapitalize",E?"":"off"),m.setAttribute("spellcheck",!!b)}function Xx(){var m=X("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),b=X("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?m.style.width="1000px":m.setAttribute("wrap","off"),A&&(m.style.border="1px solid black"),Yx(m),b}function Ty(m,b,S,E,C){var M=b,N=S,j=et(m,b.line),V=C&&m.direction=="rtl"?-S:S;function W(Ve){var nt,Qe;if(E=="codepoint"){var pt=j.text.charCodeAt(b.ch+(S>0?0:-1));if(isNaN(pt))nt=null;else{var ct=S>0?pt>=55296&&pt<56320:pt>=56320&&pt<57343;nt=new Xe(b.line,Math.max(0,Math.min(j.text.length,b.ch+S*(ct?2:1))),-S)}}else nt=C?function(mt,bn,Mt,Hn){var fn=Ce(bn,mt.doc.direction);if(!fn)return wy(bn,Mt,Hn);Mt.ch>=bn.text.length?(Mt.ch=bn.text.length,Mt.sticky="before"):Mt.ch<=0&&(Mt.ch=0,Mt.sticky="after");var or=ae(fn,Mt.ch,Mt.sticky),Nr=fn[or];if(mt.doc.direction=="ltr"&&Nr.level%2==0&&(Hn>0?Nr.to>Mt.ch:Nr.from<Mt.ch))return wy(bn,Mt,Hn);var ar,Zn=function(zr,Ws){return xy(bn,zr instanceof Xe?zr.ch:zr,Ws)},lr=function(zr){return mt.options.lineWrapping?(ar=ar||mr(mt,bn),Ib(mt,bn,ar,zr)):{begin:0,end:bn.text.length}},$n=lr(Mt.sticky=="before"?Zn(Mt,-1):Mt.ch);if(mt.doc.direction=="rtl"||Nr.level==1){var Br=Nr.level==1==Hn<0,Fn=Zn(Mt,Br?1:-1);if(Fn!=null&&(Br?Fn<=Nr.to&&Fn<=$n.end:Fn>=Nr.from&&Fn>=$n.begin)){var Jn=Br?"before":"after";return new Xe(Mt.line,Fn,Jn)}}var Nn=function(zr,Ws,Ys){for(var Ci=function(ml,Wm){return Wm?new Xe(Mt.line,Zn(ml,1),"before"):new Xe(Mt.line,ml,"after")};zr>=0&&zr<fn.length;zr+=Ws){var uo=fn[zr],Ia=Ws>0==(uo.level!=1),Ms=Ia?Ys.begin:Zn(Ys.end,-1);if(uo.from<=Ms&&Ms<uo.to||(Ms=Ia?uo.from:Zn(uo.to,-1),Ys.begin<=Ms&&Ms<Ys.end))return Ci(Ms,Ia)}},vr=Nn(or+Hn,Hn,$n);if(vr)return vr;var lo=Hn>0?$n.end:Zn($n.begin,-1);return lo==null||Hn>0&&lo==bn.text.length||!(vr=Nn(Hn>0?0:fn.length-1,Hn,lr(lo)))?null:vr}(m.cm,j,b,S):wy(j,b,S);if(nt==null){if(Ve||(Qe=b.line+V)<m.first||Qe>=m.first+m.size||(b=new Xe(Qe,b.ch,b.sticky),!(j=et(m,Qe))))return!1;b=_y(C,m.cm,j,b.line,V)}else b=nt;return!0}if(E=="char"||E=="codepoint")W();else if(E=="column")W(!0);else if(E=="word"||E=="group")for(var ce=null,fe=E=="group",Se=m.cm&&m.cm.getHelper(b,"wordChars"),ve=!0;!(S<0)||W(!ve);ve=!1){var $e=j.text.charAt(b.ch)||`
`,Ne=re($e,Se)?"w":fe&&$e==`
`?"n":!fe||/\s/.test($e)?null:"p";if(!fe||ve||Ne||(Ne="s"),ce&&ce!=Ne){S<0&&(S=1,W(),b.sticky="after");break}if(Ne&&(ce=Ne),S>0&&!W(!ve))break}var Me=Nm(m,b,M,N,!0);return Xn(M,Me)&&(Me.hitSide=!0),Me}function Zx(m,b,S,E){var C,M,N=m.doc,j=b.left;if(E=="page"){var V=Math.min(m.display.wrapper.clientHeight,He(m).innerHeight||N(m).documentElement.clientHeight),W=Math.max(V-.5*ud(m.display),3);C=(S>0?b.bottom:b.top)+S*W}else E=="line"&&(C=S>0?b.bottom+3:b.top-3);for(;(M=J0(m,j,C)).outside;){if(S<0?C<=0:C>=N.height){M.hitSide=!0;break}C+=5*S}return M}var Qr=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Kx(m,b){var S=Vn(m,b.line);if(!S||S.hidden)return null;var E=et(m.doc,b.line),C=ut(S,E,b.line),M=Ce(E,m.doc.direction),N="left";M&&(N=ae(M,b.ch)%2?"right":"left");var j=Tb(C.map,b.ch,N);return j.offset=j.collapse=="right"?j.end:j.start,j}function _d(m,b){return b&&(m.bad=!0),m}function Gm(m,b,S){var E;if(b==m.display.lineDiv){if(!(E=m.display.lineDiv.childNodes[S]))return _d(m.clipPos(Xe(m.display.viewTo-1)),!0);b=null,S=0}else for(E=b;;E=E.parentNode){if(!E||E==m.display.lineDiv)return null;if(E.parentNode&&E.parentNode==m.display.lineDiv)break}for(var C=0;C<m.display.view.length;C++){var M=m.display.view[C];if(M.node==E)return WS(M,b,S)}}function WS(m,b,S){var E=m.text.firstChild,C=!1;if(!b||!le(E,b))return _d(Xe(qt(m.line),0),!0);if(b==E&&(C=!0,b=E.childNodes[S],S=0,!b)){var M=m.rest?se(m.rest):m.line;return _d(Xe(qt(M),M.text.length),C)}var N=b.nodeType==3?b:null,j=b;for(N||b.childNodes.length!=1||b.firstChild.nodeType!=3||(N=b.firstChild,S&&(S=N.nodeValue.length));j.parentNode!=E;)j=j.parentNode;var V=m.measure,W=V.maps;function ce(Me,Ve,nt){for(var Qe=-1;Qe<(W?W.length:0);Qe++)for(var pt=Qe<0?V.map:W[Qe],ct=0;ct<pt.length;ct+=3){var mt=pt[ct+2];if(mt==Me||mt==Ve){var bn=qt(Qe<0?m.line:m.rest[Qe]),Mt=pt[ct]+nt;return(nt<0||mt!=Me)&&(Mt=pt[ct+(nt?1:0)]),Xe(bn,Mt)}}}var fe=ce(N,j,S);if(fe)return _d(fe,C);for(var Se=j.nextSibling,ve=N?N.nodeValue.length-S:0;Se;Se=Se.nextSibling){if(fe=ce(Se,Se.firstChild,0))return _d(Xe(fe.line,fe.ch-ve),C);ve+=Se.textContent.length}for(var $e=j.previousSibling,Ne=S;$e;$e=$e.previousSibling){if(fe=ce($e,$e.firstChild,-1))return _d(Xe(fe.line,fe.ch+Ne),C);Ne+=$e.textContent.length}}Qr.prototype.init=function(m){var b=this,S=this,E=S.cm,C=S.div=m.lineDiv;function M(j){for(var V=j.target;V;V=V.parentNode){if(V==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(V.className))break}return!1}function N(j){if(M(j)&&!bt(E,j)){if(E.somethingSelected())Hm({lineWise:!1,text:E.getSelections()}),j.type=="cut"&&E.replaceSelection("",null,"cut");else{if(!E.options.lineWiseCopyCut)return;var V=Wx(E);Hm({lineWise:!0,text:V.text}),j.type=="cut"&&E.operation(function(){E.setSelections(V.ranges,0,dt),E.replaceSelection("",null,"cut")})}if(j.clipboardData){j.clipboardData.clearData();var W=pl.text.join(`
`);if(j.clipboardData.setData("Text",W),j.clipboardData.getData("Text")==W)return void j.preventDefault()}var ce=Xx(),fe=ce.firstChild;E.display.lineSpace.insertBefore(ce,E.display.lineSpace.firstChild),fe.value=pl.text.join(`
`);var Se=ee(C.ownerDocument);de(fe),setTimeout(function(){E.display.lineSpace.removeChild(ce),Se.focus(),Se==C&&S.showPrimarySelection()},50)}}C.contentEditable=!0,Yx(C,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize),De(C,"paste",function(j){!M(j)||bt(E,j)||Gx(j,E)||d<=11&&setTimeout(_s(E,function(){return b.updateFromDOM()}),20)}),De(C,"compositionstart",function(j){b.composing={data:j.data,done:!1}}),De(C,"compositionupdate",function(j){b.composing||(b.composing={data:j.data,done:!1})}),De(C,"compositionend",function(j){b.composing&&(j.data!=b.composing.data&&b.readFromDOMSoon(),b.composing.done=!0)}),De(C,"touchstart",function(){return S.forceCompositionEnd()}),De(C,"input",function(){b.composing||b.readFromDOMSoon()}),De(C,"copy",N),De(C,"cut",N)},Qr.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},Qr.prototype.prepareSelection=function(){var m=Bb(this.cm,!1);return m.focus=ee(this.div.ownerDocument)==this.div,m},Qr.prototype.showSelection=function(m,b){m&&this.cm.display.view.length&&((m.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(m))},Qr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qr.prototype.showPrimarySelection=function(){var m=this.getSelection(),b=this.cm,S=b.doc.sel.primary(),E=S.from(),C=S.to();if(b.display.viewTo==b.display.viewFrom||E.line>=b.display.viewTo||C.line<b.display.viewFrom)m.removeAllRanges();else{var M=Gm(b,m.anchorNode,m.anchorOffset),N=Gm(b,m.focusNode,m.focusOffset);if(!M||M.bad||!N||N.bad||ht(Rr(M,N),E)!=0||ht(Ar(M,N),C)!=0){var j=b.display.view,V=E.line>=b.display.viewFrom&&Kx(b,E)||{node:j[0].measure.map[2],offset:0},W=C.line<b.display.viewTo&&Kx(b,C);if(!W){var ce=j[j.length-1].measure,fe=ce.maps?ce.maps[ce.maps.length-1]:ce.map;W={node:fe[fe.length-1],offset:fe[fe.length-2]-fe[fe.length-3]}}if(V&&W){var Se,ve=m.rangeCount&&m.getRangeAt(0);try{Se=I(V.node,V.offset,W.offset,W.node)}catch{}Se&&(!a&&b.state.focused?(m.collapse(V.node,V.offset),Se.collapsed||(m.removeAllRanges(),m.addRange(Se))):(m.removeAllRanges(),m.addRange(Se)),ve&&m.anchorNode==null?m.addRange(ve):a&&this.startGracePeriod()),this.rememberSelection()}else m.removeAllRanges()}}},Qr.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},Qr.prototype.showMultipleSelections=function(m){Y(this.cm.display.cursorDiv,m.cursors),Y(this.cm.display.selectionDiv,m.selection)},Qr.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},Qr.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var b=m.getRangeAt(0).commonAncestorContainer;return le(this.div,b)},Qr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&ee(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qr.prototype.blur=function(){this.div.blur()},Qr.prototype.getField=function(){return this.div},Qr.prototype.supportsTouch=function(){return!0},Qr.prototype.receivedFocus=function(){var m=this,b=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Uo(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function S(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,S))})},Qr.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},Qr.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var m=this.getSelection(),b=this.cm;if(T&&g&&this.cm.display.gutterSpecs.length&&function(C){for(var M=C;M;M=M.parentNode)if(/CodeMirror-gutter-wrapper/.test(M.className))return!0;return!1}(m.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var S=Gm(b,m.anchorNode,m.anchorOffset),E=Gm(b,m.focusNode,m.focusOffset);S&&E&&Uo(b,function(){Vs(b.doc,Zu(S,E),dt),(S.bad||E.bad)&&(b.curOp.selectionChanged=!0)})}}},Qr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m,b,S,E=this.cm,C=E.display,M=E.doc.sel.primary(),N=M.from(),j=M.to();if(N.ch==0&&N.line>E.firstLine()&&(N=Xe(N.line-1,et(E.doc,N.line-1).length)),j.ch==et(E.doc,j.line).text.length&&j.line<E.lastLine()&&(j=Xe(j.line+1,0)),N.line<C.viewFrom||j.line>C.viewTo-1)return!1;N.line==C.viewFrom||(m=Zc(E,N.line))==0?(b=qt(C.view[0].line),S=C.view[0].node):(b=qt(C.view[m].line),S=C.view[m-1].node.nextSibling);var V,W,ce=Zc(E,j.line);if(ce==C.view.length-1?(V=C.viewTo-1,W=C.lineDiv.lastChild):(V=qt(C.view[ce+1].line)-1,W=C.view[ce+1].node.previousSibling),!S)return!1;for(var fe=E.doc.splitLines(function(bn,Mt,Hn,fn,or){var Nr="",ar=!1,Zn=bn.doc.lineSeparator(),lr=!1;function $n(Nn){return function(vr){return vr.id==Nn}}function Br(){ar&&(Nr+=Zn,lr&&(Nr+=Zn),ar=lr=!1)}function Fn(Nn){Nn&&(Br(),Nr+=Nn)}function Jn(Nn){if(Nn.nodeType==1){var vr=Nn.getAttribute("cm-text");if(vr)return void Fn(vr);var lo,zr=Nn.getAttribute("cm-marker");if(zr){var Ws=bn.findMarks(Xe(fn,0),Xe(or+1,0),$n(+zr));return void(Ws.length&&(lo=Ws[0].find(0))&&Fn(pn(bn.doc,lo.from,lo.to).join(Zn)))}if(Nn.getAttribute("contenteditable")=="false")return;var Ys=/^(pre|div|p|li|table|br)$/i.test(Nn.nodeName);if(!/^br$/i.test(Nn.nodeName)&&Nn.textContent.length==0)return;Ys&&Br();for(var Ci=0;Ci<Nn.childNodes.length;Ci++)Jn(Nn.childNodes[Ci]);/^(pre|p)$/i.test(Nn.nodeName)&&(lr=!0),Ys&&(ar=!0)}else Nn.nodeType==3&&Fn(Nn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jn(Mt),Mt!=Hn;)Mt=Mt.nextSibling,lr=!1;return Nr}(E,S,W,b,V)),Se=pn(E.doc,Xe(b,0),Xe(V,et(E.doc,V).text.length));fe.length>1&&Se.length>1;)if(se(fe)==se(Se))fe.pop(),Se.pop(),V--;else{if(fe[0]!=Se[0])break;fe.shift(),Se.shift(),b++}for(var ve=0,$e=0,Ne=fe[0],Me=Se[0],Ve=Math.min(Ne.length,Me.length);ve<Ve&&Ne.charCodeAt(ve)==Me.charCodeAt(ve);)++ve;for(var nt=se(fe),Qe=se(Se),pt=Math.min(nt.length-(fe.length==1?ve:0),Qe.length-(Se.length==1?ve:0));$e<pt&&nt.charCodeAt(nt.length-$e-1)==Qe.charCodeAt(Qe.length-$e-1);)++$e;if(fe.length==1&&Se.length==1&&b==N.line)for(;ve&&ve>N.ch&&nt.charCodeAt(nt.length-$e-1)==Qe.charCodeAt(Qe.length-$e-1);)ve--,$e++;fe[fe.length-1]=nt.slice(0,nt.length-$e).replace(/^\u200b+/,""),fe[0]=fe[0].slice(ve).replace(/\u200b+$/,"");var ct=Xe(b,ve),mt=Xe(V,Se.length?se(Se).length-$e:0);return fe.length>1||fe[0]||ht(ct,mt)?(yd(E.doc,fe,ct,mt,"+input"),!0):void 0},Qr.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qr.prototype.reset=function(){this.forceCompositionEnd()},Qr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qr.prototype.readFromDOMSoon=function(){var m=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing){if(!m.composing.done)return;m.composing=null}m.updateFromDOM()},80))},Qr.prototype.updateFromDOM=function(){var m=this;!this.cm.isReadOnly()&&this.pollContent()||Uo(this.cm,function(){return _o(m.cm)})},Qr.prototype.setUneditable=function(m){m.contentEditable="false"},Qr.prototype.onKeyPress=function(m){m.charCode==0||this.composing||(m.preventDefault(),this.cm.isReadOnly()||_s(this.cm,ky)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0))},Qr.prototype.readOnlyChanged=function(m){this.div.contentEditable=String(m!="nocursor")},Qr.prototype.onContextMenu=function(){},Qr.prototype.resetPosition=function(){},Qr.prototype.needsContentAttribute=!0;var ns=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null,this.resetting=!1};ns.prototype.init=function(m){var b=this,S=this,E=this.cm;this.createField(m);var C=this.textarea;function M(N){if(!bt(E,N)){if(E.somethingSelected())Hm({lineWise:!1,text:E.getSelections()});else{if(!E.options.lineWiseCopyCut)return;var j=Wx(E);Hm({lineWise:!0,text:j.text}),N.type=="cut"?E.setSelections(j.ranges,null,dt):(S.prevInput="",C.value=j.text.join(`
`),de(C))}N.type=="cut"&&(E.state.cutIncoming=+new Date)}}m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),A&&(C.style.width="0px"),De(C,"input",function(){c&&d>=9&&b.hasSelection&&(b.hasSelection=null),S.poll()}),De(C,"paste",function(N){bt(E,N)||Gx(N,E)||(E.state.pasteIncoming=+new Date,S.fastPoll())}),De(C,"cut",M),De(C,"copy",M),De(m.scroller,"paste",function(N){if(!pr(m,N)&&!bt(E,N)){if(!C.dispatchEvent)return E.state.pasteIncoming=+new Date,void S.focus();var j=new Event("paste");j.clipboardData=N.clipboardData,C.dispatchEvent(j)}}),De(m.lineSpace,"selectstart",function(N){pr(m,N)||sn(N)}),De(C,"compositionstart",function(){var N=E.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:N,range:E.markText(N,E.getCursor("to"),{className:"CodeMirror-composing"})}}),De(C,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},ns.prototype.createField=function(m){this.wrapper=Xx(),this.textarea=this.wrapper.firstChild},ns.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},ns.prototype.prepareSelection=function(){var m=this.cm,b=m.display,S=m.doc,E=Bb(m);if(m.options.moveInputWithCursor){var C=dl(m,S.sel.primary().head,"div"),M=b.wrapper.getBoundingClientRect(),N=b.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,C.top+N.top-M.top)),E.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,C.left+N.left-M.left))}return E},ns.prototype.showSelection=function(m){var b=this.cm.display;Y(b.cursorDiv,m.cursors),Y(b.selectionDiv,m.selection),m.teTop!=null&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},ns.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing&&m)){var b=this.cm;if(this.resetting=!0,b.somethingSelected()){this.prevInput="";var S=b.getSelection();this.textarea.value=S,b.state.focused&&de(this.textarea),c&&d>=9&&(this.hasSelection=S)}else m||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null));this.resetting=!1}},ns.prototype.getField=function(){return this.textarea},ns.prototype.supportsTouch=function(){return!1},ns.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},ns.prototype.blur=function(){this.textarea.blur()},ns.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ns.prototype.receivedFocus=function(){this.slowPoll()},ns.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},ns.prototype.fastPoll=function(){var m=!1,b=this;b.pollingFast=!0,b.polling.set(20,function S(){b.poll()||m?(b.pollingFast=!1,b.slowPoll()):(m=!0,b.polling.set(60,S))})},ns.prototype.poll=function(){var m=this,b=this.cm,S=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!b.state.focused||Kr(S)&&!E&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var C=S.value;if(C==E&&!b.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===C||k&&/[\uf700-\uf7ff]/.test(C))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var M=C.charCodeAt(0);if(M!=8203||E||(E=""),M==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,j=Math.min(E.length,C.length);N<j&&E.charCodeAt(N)==C.charCodeAt(N);)++N;return Uo(b,function(){ky(b,C.slice(N),E.length-N,null,m.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?S.value=m.prevInput="":m.prevInput=C,m.composing&&(m.composing.range.clear(),m.composing.range=b.markText(m.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ns.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ns.prototype.onKeyPress=function(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()},ns.prototype.onContextMenu=function(m){var b=this,S=b.cm,E=S.display,C=b.textarea;b.contextMenuPending&&b.contextMenuPending();var M=Xc(S,m),N=E.scroller.scrollTop;if(M&&!x){S.options.resetSelectionOnContextMenu&&S.doc.sel.contains(M)==-1&&_s(S,Vs)(S.doc,Zu(M),dt);var j,V=C.style.cssText,W=b.wrapper.style.cssText,ce=b.wrapper.offsetParent.getBoundingClientRect();if(b.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(m.clientY-ce.top-5)+"px; left: "+(m.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,h&&(j=C.ownerDocument.defaultView.scrollY),E.input.focus(),h&&C.ownerDocument.defaultView.scrollTo(null,j),E.input.reset(),S.somethingSelected()||(C.value=b.prevInput=" "),b.contextMenuPending=ve,E.selForContextMenu=S.doc.sel,clearTimeout(E.detectingSelectAll),c&&d>=9&&Se(),L){vn(m);var fe=function(){We(window,"mouseup",fe),setTimeout(ve,20)};De(window,"mouseup",fe)}else setTimeout(ve,50)}function Se(){if(C.selectionStart!=null){var $e=S.somethingSelected(),Ne=""+($e?C.value:"");C.value="",C.value=Ne,b.prevInput=$e?"":"",C.selectionStart=1,C.selectionEnd=Ne.length,E.selForContextMenu=S.doc.sel}}function ve(){if(b.contextMenuPending==ve&&(b.contextMenuPending=!1,b.wrapper.style.cssText=W,C.style.cssText=V,c&&d<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=N),C.selectionStart!=null)){(!c||c&&d<9)&&Se();var $e=0,Ne=function(){E.selForContextMenu==S.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&b.prevInput==""?_s(S,mx)(S):$e++<10?E.detectingSelectAll=setTimeout(Ne,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout(Ne,200)}}},ns.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled=m=="nocursor",this.textarea.readOnly=!!m},ns.prototype.setUneditable=function(){},ns.prototype.needsContentAttribute=!1,function(m){var b=m.optionHandlers;function S(E,C,M,N){m.defaults[E]=C,M&&(b[E]=N?function(j,V,W){W!=wd&&M(j,V,W)}:M)}m.defineOption=S,m.Init=wd,S("value","",function(E,C){return E.setValue(C)},!0),S("mode",null,function(E,C){E.doc.modeOption=C,my(E)},!0),S("indentUnit",2,my,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(E){$h(E),kh(E),_o(E)},!0),S("lineSeparator",null,function(E,C){if(E.doc.lineSep=C,C){var M=[],N=E.doc.first;E.doc.iter(function(V){for(var W=0;;){var ce=V.text.indexOf(C,W);if(ce==-1)break;W=ce+C.length,M.push(Xe(N,ce))}N++});for(var j=M.length-1;j>=0;j--)yd(E.doc,C,M[j],Xe(M[j].line,M[j].ch+C.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,C,M){E.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),M!=wd&&E.refresh()}),S("specialCharPlaceholder",Ai,function(E){return E.refresh()},!0),S("electricChars",!0),S("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(E,C){return E.getInputField().spellcheck=C},!0),S("autocorrect",!1,function(E,C){return E.getInputField().autocorrect=C},!0),S("autocapitalize",!1,function(E,C){return E.getInputField().autocapitalize=C},!0),S("rtlMoveVisually",!O),S("wholeLineUpdateBefore",!0),S("theme","default",function(E){qx(E),Mh(E)},!0),S("keyMap","default",function(E,C,M){var N=jm(C),j=M!=wd&&jm(M);j&&j.detach&&j.detach(E,N),N.attach&&N.attach(E,j||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,VS,!0),S("gutters",[],function(E,C){E.display.gutterSpecs=hy(C,E.options.lineNumbers),Mh(E)},!0),S("fixedGutter",!0,function(E,C){E.display.gutters.style.left=C?ty(E.display)+"px":"0",E.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(E){return hd(E)},!0),S("scrollbarStyle","native",function(E){Vb(E),hd(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),S("lineNumbers",!1,function(E,C){E.display.gutterSpecs=hy(E.options.gutters,C),Mh(E)},!0),S("firstLineNumber",1,Mh,!0),S("lineNumberFormatter",function(E){return E},Mh,!0),S("showCursorWhenSelecting",!1,Th,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(E,C){C=="nocursor"&&(fd(E),E.display.input.blur()),E.display.input.readOnlyChanged(C)}),S("screenReaderLabel",null,function(E,C){C=C===""?null:C,E.display.input.screenReaderLabelChanged(C)}),S("disableInput",!1,function(E,C){C||E.display.input.reset()},!0),S("dragDrop",!0,GS),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,Th,!0),S("singleCursorHeightPerLine",!0,Th,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,$h,!0),S("addModeClass",!1,$h,!0),S("pollInterval",100),S("undoDepth",200,function(E,C){return E.doc.history.undoDepth=C}),S("historyEventDelay",1250),S("viewportMargin",10,function(E){return E.refresh()},!0),S("maxHighlightLength",1e4,$h,!0),S("moveInputWithCursor",!0,function(E,C){C||E.display.input.resetPosition()}),S("tabindex",null,function(E,C){return E.display.input.getField().tabIndex=C||""}),S("autofocus",null),S("direction","ltr",function(E,C){return E.doc.setDirection(C)},!0),S("phrases",null)}(Ri),function(m){var b=m.optionHandlers,S=m.helpers={};m.prototype={constructor:m,focus:function(){He(this).focus(),this.display.input.focus()},setOption:function(E,C){var M=this.options,N=M[E];M[E]==C&&E!="mode"||(M[E]=C,b.hasOwnProperty(E)&&_s(this,b[E])(this,C,N),tt(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,C){this.state.keyMaps[C?"push":"unshift"](jm(E))},removeKeyMap:function(E){for(var C=this.state.keyMaps,M=0;M<C.length;++M)if(C[M]==E||C[M].name==E)return C.splice(M,1),!0},addOverlay:ao(function(E,C){var M=E.token?E:m.getMode(this.options,E);if(M.startState)throw new Error("Overlays may not be stateful.");(function(N,j,V){for(var W=0,ce=V(j);W<N.length&&V(N[W])<=ce;)W++;N.splice(W,0,j)})(this.state.overlays,{mode:M,modeSpec:E,opaque:C&&C.opaque,priority:C&&C.priority||0},function(N){return N.priority}),this.state.modeGen++,_o(this)}),removeOverlay:ao(function(E){for(var C=this.state.overlays,M=0;M<C.length;++M){var N=C[M].modeSpec;if(N==E||typeof E=="string"&&N.name==E)return C.splice(M,1),this.state.modeGen++,void _o(this)}}),indentLine:ao(function(E,C,M){typeof C!="string"&&typeof C!="number"&&(C=C==null?this.options.smartIndent?"smart":"prev":C?"add":"subtract"),ci(this.doc,E)&&Yh(this,E,C,M)}),indentSelection:ao(function(E){for(var C=this.doc.sel.ranges,M=-1,N=0;N<C.length;N++){var j=C[N];if(j.empty())j.head.line>M&&(Yh(this,j.head.line,E,!0),M=j.head.line,N==this.doc.sel.primIndex&&dd(this));else{var V=j.from(),W=j.to(),ce=Math.max(M,V.line);M=Math.min(this.lastLine(),W.line-(W.ch?0:1))+1;for(var fe=ce;fe<M;++fe)Yh(this,fe,E);var Se=this.doc.sel.ranges;V.ch==0&&C.length==Se.length&&Se[N].from().ch>0&&by(this.doc,N,new Pr(V,Se[N].to()),dt)}}}),getTokenAt:function(E,C){return hs(this,E,C)},getLineTokens:function(E,C){return hs(this,Xe(E),C,!0)},getTokenTypeAt:function(E){E=Gt(this.doc,E);var C,M=xo(this,et(this.doc,E.line)),N=0,j=(M.length-1)/2,V=E.ch;if(V==0)C=M[2];else for(;;){var W=N+j>>1;if((W?M[2*W-1]:0)>=V)j=W;else{if(!(M[2*W+1]<V)){C=M[2*W+2];break}N=W+1}}var ce=C?C.indexOf("overlay "):-1;return ce<0?C:ce==0?null:C.slice(0,ce-1)},getModeAt:function(E){var C=this.doc.mode;return C.innerMode?m.innerMode(C,this.getTokenAt(E).state).mode:C},getHelper:function(E,C){return this.getHelpers(E,C)[0]},getHelpers:function(E,C){var M=[];if(!S.hasOwnProperty(C))return M;var N=S[C],j=this.getModeAt(E);if(typeof j[C]=="string")N[j[C]]&&M.push(N[j[C]]);else if(j[C])for(var V=0;V<j[C].length;V++){var W=N[j[C][V]];W&&M.push(W)}else j.helperType&&N[j.helperType]?M.push(N[j.helperType]):N[j.name]&&M.push(N[j.name]);for(var ce=0;ce<N._global.length;ce++){var fe=N._global[ce];fe.pred(j,this)&&Pe(M,fe.val)==-1&&M.push(fe.val)}return M},getStateAfter:function(E,C){var M=this.doc;return no(this,(E=nr(M,E??M.first+M.size-1))+1,C).state},cursorCoords:function(E,C){var M=this.doc.sel.primary();return dl(this,E==null?M.head:typeof E=="object"?Gt(this.doc,E):E?M.from():M.to(),C||"page")},charCoords:function(E,C){return Cm(this,Gt(this.doc,E),C||"page")},coordsChar:function(E,C){return J0(this,(E=Ob(this,E,C||"page")).left,E.top)},lineAtHeight:function(E,C){return E=Ob(this,{top:E,left:0},C||"page").top,Sr(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,C,M){var N,j=!1;if(typeof E=="number"){var V=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>V&&(E=V,j=!0),N=et(this.doc,E)}else N=E;return Am(this,N,{top:0,left:0},C||"page",M||j).top+(j?this.doc.height-me(N):0)},defaultTextHeight:function(){return ud(this.display)},defaultCharWidth:function(){return cd(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,C,M,N,j){var V,W,ce,fe=this.display,Se=(E=dl(this,Gt(this.doc,E))).bottom,ve=E.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),fe.sizer.appendChild(C),N=="over")Se=E.top;else if(N=="above"||N=="near"){var $e=Math.max(fe.wrapper.clientHeight,this.doc.height),Ne=Math.max(fe.sizer.clientWidth,fe.lineSpace.clientWidth);(N=="above"||E.bottom+C.offsetHeight>$e)&&E.top>C.offsetHeight?Se=E.top-C.offsetHeight:E.bottom+C.offsetHeight<=$e&&(Se=E.bottom),ve+C.offsetWidth>Ne&&(ve=Ne-C.offsetWidth)}C.style.top=Se+"px",C.style.left=C.style.right="",j=="right"?(ve=fe.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(j=="left"?ve=0:j=="middle"&&(ve=(fe.sizer.clientWidth-C.offsetWidth)/2),C.style.left=ve+"px"),M&&(V=this,W={left:ve,top:Se,right:ve+C.offsetWidth,bottom:Se+C.offsetHeight},(ce=ay(V,W)).scrollTop!=null&&Lh(V,ce.scrollTop),ce.scrollLeft!=null&&Kc(V,ce.scrollLeft))},triggerOnKeyDown:ao(Ix),triggerOnKeyPress:ao(Nx),triggerOnKeyUp:Px,triggerOnMouseDown:ao(Bx),execCommand:function(E){if(Hh.hasOwnProperty(E))return Hh[E].call(null,this)},triggerElectric:ao(function(E){Vx(this,E)}),findPosH:function(E,C,M,N){var j=1;C<0&&(j=-1,C=-C);for(var V=Gt(this.doc,E),W=0;W<C&&!(V=Ty(this.doc,V,j,M,N)).hitSide;++W);return V},moveH:ao(function(E,C){var M=this;this.extendSelectionsBy(function(N){return M.display.shift||M.doc.extend||N.empty()?Ty(M.doc,N.head,E,C,M.options.rtlMoveVisually):E<0?N.from():N.to()},Wt)}),deleteH:ao(function(E,C){var M=this.doc.sel,N=this.doc;M.somethingSelected()?N.replaceSelection("",null,"+delete"):xd(this,function(j){var V=Ty(N,j.head,E,C,!1);return E<0?{from:V,to:j.head}:{from:j.head,to:V}})}),findPosV:function(E,C,M,N){var j=1,V=N;C<0&&(j=-1,C=-C);for(var W=Gt(this.doc,E),ce=0;ce<C;++ce){var fe=dl(this,W,"div");if(V==null?V=fe.left:fe.left=V,(W=Zx(this,fe,j,M)).hitSide)break}return W},moveV:ao(function(E,C){var M=this,N=this.doc,j=[],V=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(ce){if(V)return E<0?ce.from():ce.to();var fe=dl(M,ce.head,"div");ce.goalColumn!=null&&(fe.left=ce.goalColumn),j.push(fe.left);var Se=Zx(M,fe,E,C);return C=="page"&&ce==N.sel.primary()&&ly(M,Cm(M,Se,"div").top-fe.top),Se},Wt),j.length)for(var W=0;W<N.sel.ranges.length;W++)N.sel.ranges[W].goalColumn=j[W]}),findWordAt:function(E){var C=et(this.doc,E.line).text,M=E.ch,N=E.ch;if(C){var j=this.getHelper(E,"wordChars");E.sticky!="before"&&N!=C.length||!M?++N:--M;for(var V=C.charAt(M),W=re(V,j)?function(ce){return re(ce,j)}:/\s/.test(V)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!re(ce)};M>0&&W(C.charAt(M-1));)--M;for(;N<C.length&&W(C.charAt(N));)++N}return new Pr(Xe(E.line,M),Xe(E.line,N))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(ze(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ao(function(E,C){Dh(this,E,C)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-xi(this)-this.display.barHeight,width:E.scrollWidth-xi(this)-this.display.barWidth,clientHeight:Te(this),clientWidth:Li(this)}},scrollIntoView:ao(function(E,C){E==null?(E={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof E=="number"?E={from:Xe(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=C||0,E.from.line!=null?function(M,N){Rm(M),M.curOp.scrollToPos=N}(this,E):Ub(this,E.from,E.to,E.margin)}),setSize:ao(function(E,C){var M=this,N=function(V){return typeof V=="number"||/^\d+$/.test(String(V))?V+"px":V};E!=null&&(this.display.wrapper.style.width=N(E)),C!=null&&(this.display.wrapper.style.height=N(C)),this.options.lineWrapping&&Lb(this);var j=this.display.viewFrom;this.doc.iter(j,this.display.viewTo,function(V){if(V.widgets){for(var W=0;W<V.widgets.length;W++)if(V.widgets[W].noHScroll){Yu(M,j,"widget");break}}++j}),this.curOp.forceUpdate=!0,tt(this,"refresh",this)}),operation:function(E){return Uo(this,E)},startOperation:function(){return Qc(this)},endOperation:function(){return ef(this)},refresh:ao(function(){var E=this.display.cachedTextHeight;_o(this),this.curOp.forceUpdate=!0,kh(this),Dh(this,this.doc.scrollLeft,this.doc.scrollTop),fy(this.display),(E==null||Math.abs(E-ud(this.display))>.5||this.options.lineWrapping)&&ny(this),tt(this,"refresh",this)}),swapDoc:ao(function(E){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),nx(this,E),kh(this),this.display.input.reset(),Dh(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,Gr(this,"swapDoc",this,C),C}),phrase:function(E){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,E)?C[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Kt(m),m.registerHelper=function(E,C,M){S.hasOwnProperty(E)||(S[E]=m[E]={_global:[]}),S[E][C]=M},m.registerGlobalHelper=function(E,C,M,N){m.registerHelper(E,C,N),S[E]._global.push({pred:M,val:N})}}(Ri);var YS="iter insert remove copy getEditor constructor".split(" ");for(var Vm in Eo.prototype)Eo.prototype.hasOwnProperty(Vm)&&Pe(YS,Vm)<0&&(Ri.prototype[Vm]=function(m){return function(){return m.apply(this.doc,arguments)}}(Eo.prototype[Vm]));return Kt(Eo),Ri.inputStyles={textarea:ns,contenteditable:Qr},Ri.defineMode=function(m){Ri.defaults.mode||m=="null"||(Ri.defaults.mode=m),to.apply(this,arguments)},Ri.defineMIME=function(m,b){$r[m]=b},Ri.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Ri.defineMIME("text/plain","null"),Ri.defineExtension=function(m,b){Ri.prototype[m]=b},Ri.defineDocExtension=function(m,b){Eo.prototype[m]=b},Ri.fromTextArea=function(m,b){if((b=b?we(b):{}).value=m.value,!b.tabindex&&m.tabIndex&&(b.tabindex=m.tabIndex),!b.placeholder&&m.placeholder&&(b.placeholder=m.placeholder),b.autofocus==null){var S=ee(m.ownerDocument);b.autofocus=S==m||m.getAttribute("autofocus")!=null&&S==document.body}function E(){m.value=j.getValue()}var C;if(m.form&&(De(m.form,"submit",E),!b.leaveSubmitMethodAlone)){var M=m.form;C=M.submit;try{var N=M.submit=function(){E(),M.submit=C,M.submit(),M.submit=N}}catch{}}b.finishInit=function(V){V.save=E,V.getTextArea=function(){return m},V.toTextArea=function(){V.toTextArea=isNaN,E(),m.parentNode.removeChild(V.getWrapperElement()),m.style.display="",m.form&&(We(m.form,"submit",E),b.leaveSubmitMethodAlone||typeof m.form.submit!="function"||(m.form.submit=C))}},m.style.display="none";var j=Ri(function(V){return m.parentNode.insertBefore(V,m.nextSibling)},b);return j},function(m){m.off=We,m.on=De,m.wheelEventPixels=MS,m.Doc=Eo,m.splitLines=yn,m.countColumn=Ie,m.findColumn=Mn,m.isWordChar=J,m.Pass=At,m.signal=tt,m.Line=mn,m.changeEnd=Ku,m.scrollbarModel=Gb,m.Pos=Xe,m.cmpPos=ht,m.modes=tr,m.mimeModes=$r,m.resolveMode=ge,m.getMode=Le,m.modeExtensions=it,m.extendMode=Je,m.copyState=Et,m.startState=en,m.innerMode=an,m.commands=Hh,m.keyMap=pu,m.keyName=Rx,m.isModifierKey=Dx,m.lookupKey=bd,m.normalizeKeyMap=qS,m.StringStream=xt,m.SharedTextMarker=jh,m.TextMarker=Qu,m.LineWidget=zh,m.e_preventDefault=sn,m.e_stopPropagation=rn,m.e_stop=vn,m.addClass=z,m.contains=le,m.rmClass=U,m.keyNames=ec}(Ri),Ri.version="5.65.9",Ri})},{}],11:[function(n,r,i){var s;s=function(o){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;o.defineMode("gfm",function(l,u){var f=0,c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(p){return{code:p.code,codeBlock:p.codeBlock,ateSpace:p.ateSpace}},token:function(p,g){if(g.combineTokens=null,g.codeBlock)return p.match(/^```+/)?(g.codeBlock=!1,null):(p.skipToEnd(),null);if(p.sol()&&(g.code=!1),p.sol()&&p.match(/^```+/))return p.skipToEnd(),g.codeBlock=!0,null;if(p.peek()==="`"){p.next();var v=p.pos;p.eatWhile("`");var x=1+p.pos-v;return g.code?x===f&&(g.code=!1):(f=x,g.code=!0),null}return g.code?(p.next(),null):p.eatSpace()?(g.ateSpace=!0,null):(p.sol()||g.ateSpace)&&(g.ateSpace=!1,u.gitHubSpice!==!1)&&(p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||p.match(a)&&p.string.slice(p.start-2,p.start)!="]("&&(p.start==0||/\W/.test(p.string.charAt(p.start-1)))?(g.combineTokens=!0,"link"):(p.next(),null)},blankLine:function(p){return p.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in u)d[h]=u[h];return d.name="markdown",o.overlayMode(o.getMode(l,d),c)},"markdown"),o.defineMIME("text/x-gfm","gfm")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../markdown/markdown"),n("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(n,r,i){var s;s=function(o){o.defineMode("markdown",function(a,l){var u=o.getMode(a,"text/html"),f=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in c)c.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(c[d]=l.tokenTypeOverrides[d]);var h=/^([*\-_])(?:\s*\1){2,}\s*$/,p=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,v=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,x=/^ {0,3}(?:\={1,}|-{2,})\s*$/,y=/^[^#!\[\]*_\\<>` "'(~:]+/,w=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,_=/^\s*\[[^\]]+?\]:.*$/,A=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function T(ee,z,he){return z.f=z.inline=he,he(ee,z)}function D(ee,z,he){return z.f=z.block=he,he(ee,z)}function k(ee){if(ee.linkTitle=!1,ee.linkHref=!1,ee.linkText=!1,ee.em=!1,ee.strong=!1,ee.strikethrough=!1,ee.quote=0,ee.indentedCode=!1,ee.f==O){var z=f;if(!z){var he=o.innerMode(u,ee.htmlState);z=he.mode.name=="xml"&&he.state.tagStart===null&&!he.state.context&&he.state.tokenize.isInText}z&&(ee.f=$,ee.block=R,ee.htmlState=null)}return ee.trailingSpace=0,ee.trailingSpaceNewLine=!1,ee.prevLine=ee.thisLine,ee.thisLine={stream:null},null}function R(ee,z){var he,de=ee.column()===z.indentation,ze=!(he=z.prevLine.stream)||!/\S/.test(he.string),He=z.indentedCode,je=z.prevLine.hr,we=z.list!==!1,Ie=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var qe=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,we)){for(z.list=null;qe<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=qe-z.listStack[z.listStack.length-1])}var Pe=!(ze||je||z.prevLine.header||we&&He||z.prevLine.fencedCodeEnd),At=(z.list===!1||je||ze)&&z.indentation<=Ie&&ee.match(h),dt=null;if(z.indentationDiff>=4&&(He||z.prevLine.fencedCodeEnd||z.prevLine.header||ze))return ee.skipToEnd(),z.indentedCode=!0,c.code;if(ee.eatSpace())return null;if(de&&z.indentation<=Ie&&(dt=ee.match(v))&&dt[1].length<=6)return z.quote=0,z.header=dt[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,K(z);if(z.indentation<=Ie&&ee.eat(">"))return z.quote=de?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),ee.eatSpace(),K(z);if(!At&&!z.setext&&de&&z.indentation<=Ie&&(dt=ee.match(p))){var nn=dt[1]?"ol":"ul";return z.indentation=qe+ee.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&ee.match(g,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+nn]),K(z)}return de&&z.indentation<=Ie&&(dt=ee.match(w,!0))?(z.quote=0,z.fencedEndRE=new RegExp(dt[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(Wt){if(o.findModeByName){var Mn=o.findModeByName(Wt);Mn&&(Wt=Mn.mime||Mn.mimes[0])}var Ze=o.getMode(a,Wt);return Ze.name=="null"?null:Ze}(dt[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=o.startState(z.localMode)),z.f=z.block=B,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,K(z)):z.setext||!(Pe&&we||z.quote||z.list!==!1||z.code||At||_.test(ee.string))&&(dt=ee.lookAhead(1))&&(dt=dt.match(x))?(z.setext?(z.header=z.setext,z.setext=0,ee.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=dt[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,K(z)):At?(ee.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,c.hr):ee.peek()==="["?T(ee,z,Y):T(ee,z,z.inline)}function O(ee,z){var he=u.token(ee,z.htmlState);if(!f){var de=o.innerMode(u,z.htmlState);(de.mode.name=="xml"&&de.state.tagStart===null&&!de.state.context&&de.state.tokenize.isInText||z.md_inside&&ee.current().indexOf(">")>-1)&&(z.f=$,z.block=R,z.htmlState=null)}return he}function B(ee,z){var he,de=z.listStack[z.listStack.length-1]||0,ze=z.indentation<de,He=de+3;return z.fencedEndRE&&z.indentation<=He&&(ze||ee.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),ze||(he=K(z)),z.localMode=z.localState=null,z.block=R,z.f=$,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,ze?D(ee,z,z.block):he):z.localMode?z.localMode.token(ee,z.localState):(ee.skipToEnd(),c.code)}function K(ee){var z=[];if(ee.formatting){z.push(c.formatting),typeof ee.formatting=="string"&&(ee.formatting=[ee.formatting]);for(var he=0;he<ee.formatting.length;he++)z.push(c.formatting+"-"+ee.formatting[he]),ee.formatting[he]==="header"&&z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.header),ee.formatting[he]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.quote):z.push("error"))}if(ee.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(ee.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(ee.linkHref?z.push(c.linkHref,"url"):(ee.strong&&z.push(c.strong),ee.em&&z.push(c.em),ee.strikethrough&&z.push(c.strikethrough),ee.emoji&&z.push(c.emoji),ee.linkText&&z.push(c.linkText),ee.code&&z.push(c.code),ee.image&&z.push(c.image),ee.imageAltText&&z.push(c.imageAltText,"link"),ee.imageMarker&&z.push(c.imageMarker)),ee.header&&z.push(c.header,c.header+"-"+ee.header),ee.quote&&(z.push(c.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.quote+"-"+ee.quote):z.push(c.quote+"-"+l.maxBlockquoteDepth)),ee.list!==!1){var de=(ee.listStack.length-1)%3;de?de===1?z.push(c.list2):z.push(c.list3):z.push(c.list1)}return ee.trailingSpaceNewLine?z.push("trailing-space-new-line"):ee.trailingSpace&&z.push("trailing-space-"+(ee.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function L(ee,z){if(ee.match(y,!0))return K(z)}function $(ee,z){var he=z.text(ee,z);if(he!==void 0)return he;if(z.list)return z.list=null,K(z);if(z.taskList)return ee.match(g,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,K(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&ee.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),K(z);var de=ee.next();if(z.linkTitle){z.linkTitle=!1;var ze=de;de==="("&&(ze=")");var He="^\\s*(?:[^"+(ze=(ze+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+ze;if(ee.match(new RegExp(He),!0))return c.linkHref}if(de==="`"){var je=z.formatting;l.highlightFormatting&&(z.formatting="code"),ee.eatWhile("`");var we=ee.current().length;if(z.code!=0||z.quote&&we!=1){if(we==z.code){var Ie=K(z);return z.code=0,Ie}return z.formatting=je,K(z)}return z.code=we,K(z)}if(z.code)return K(z);if(de==="\\"&&(ee.next(),l.highlightFormatting)){var qe=K(z),Pe=c.formatting+"-escape";return qe?qe+" "+Pe:Pe}if(de==="!"&&ee.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="["&&z.imageMarker&&ee.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(de==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var qe=K(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=U,qe}if(de==="["&&!z.image)return z.linkText&&ee.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),K(z);if(de==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var qe=K(z);return z.linkText=!1,z.inline=z.f=ee.match(/\(.*?\)| ?\[.*?\]/,!1)?U:$,qe}if(de==="<"&&ee.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkInline;if(de==="<"&&ee.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkEmail;if(l.xml&&de==="<"&&ee.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var At=ee.string.indexOf(">",ee.pos);if(At!=-1){var dt=ee.string.substring(ee.start,At);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(dt)&&(z.md_inside=!0)}return ee.backUp(1),z.htmlState=o.startState(u),D(ee,z,O)}if(l.xml&&de==="<"&&ee.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(de==="*"||de==="_"){for(var nn=1,Wt=ee.pos==1?" ":ee.string.charAt(ee.pos-2);nn<3&&ee.eat(de);)nn++;var Mn=ee.peek()||" ",Ze=!/\s/.test(Mn)&&(!A.test(Mn)||/\s/.test(Wt)||A.test(Wt)),pe=!/\s/.test(Wt)&&(!A.test(Wt)||/\s/.test(Mn)||A.test(Mn)),se=null,oe=null;if(nn%2&&(z.em||!Ze||de!=="*"&&pe&&!A.test(Wt)?z.em!=de||!pe||de!=="*"&&Ze&&!A.test(Mn)||(se=!1):se=!0),nn>1&&(z.strong||!Ze||de!=="*"&&pe&&!A.test(Wt)?z.strong!=de||!pe||de!=="*"&&Ze&&!A.test(Mn)||(oe=!1):oe=!0),oe!=null||se!=null)return l.highlightFormatting&&(z.formatting=se==null?"strong":oe==null?"em":"strong em"),se===!0&&(z.em=de),oe===!0&&(z.strong=de),Ie=K(z),se===!1&&(z.em=!1),oe===!1&&(z.strong=!1),Ie}else if(de===" "&&(ee.eat("*")||ee.eat("_"))){if(ee.peek()===" ")return K(z);ee.backUp(1)}if(l.strikethrough){if(de==="~"&&ee.eatWhile(de)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),Ie=K(z),z.strikethrough=!1,Ie;if(ee.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),K(z)}else if(de===" "&&ee.match("~~",!0)){if(ee.peek()===" ")return K(z);ee.backUp(2)}}if(l.emoji&&de===":"&&ee.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var be=K(z);return z.emoji=!1,be}return de===" "&&(ee.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),K(z)}function I(ee,z){if(ee.next()===">"){z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link");var he=K(z);return he?he+=" ":he="",he+c.linkInline}return ee.match(/^[^>]+/,!0),c.linkInline}function U(ee,z){if(ee.eatSpace())return null;var he,de=ee.next();return de==="("||de==="["?(z.f=z.inline=(he=de==="("?")":"]",function(ze,He){if(ze.next()===he){He.f=He.inline=$,l.highlightFormatting&&(He.formatting="link-string");var je=K(He);return He.linkHref=!1,je}return ze.match(q[he]),He.linkHref=!0,K(He)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,K(z)):"error"}var q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Y(ee,z){return ee.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=X,ee.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,K(z)):T(ee,z,$)}function X(ee,z){if(ee.match("]:",!0)){z.f=z.inline=te,l.highlightFormatting&&(z.formatting="link");var he=K(z);return z.linkText=!1,he}return ee.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function te(ee,z){return ee.eatSpace()?null:(ee.match(/^[^\s]+/,!0),ee.peek()===void 0?z.linkTitle=!0:ee.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=$,c.linkHref+" url")}var le={startState:function(){return{f:R,prevLine:{stream:null},thisLine:{stream:null},block:R,htmlState:null,indentation:0,inline:$,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ee){return{f:ee.f,prevLine:ee.prevLine,thisLine:ee.thisLine,block:ee.block,htmlState:ee.htmlState&&o.copyState(u,ee.htmlState),indentation:ee.indentation,localMode:ee.localMode,localState:ee.localMode?o.copyState(ee.localMode,ee.localState):null,inline:ee.inline,text:ee.text,formatting:!1,linkText:ee.linkText,linkTitle:ee.linkTitle,linkHref:ee.linkHref,code:ee.code,em:ee.em,strong:ee.strong,strikethrough:ee.strikethrough,emoji:ee.emoji,header:ee.header,setext:ee.setext,hr:ee.hr,taskList:ee.taskList,list:ee.list,listStack:ee.listStack.slice(0),quote:ee.quote,indentedCode:ee.indentedCode,trailingSpace:ee.trailingSpace,trailingSpaceNewLine:ee.trailingSpaceNewLine,md_inside:ee.md_inside,fencedEndRE:ee.fencedEndRE}},token:function(ee,z){if(z.formatting=!1,ee!=z.thisLine.stream){if(z.header=0,z.hr=!1,ee.match(/^\s*$/,!0))return k(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:ee},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=O)){var he=ee.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=he,z.indentationDiff=null,he>0)return null}}return z.f(ee,z)},innerMode:function(ee){return ee.block==O?{state:ee.htmlState,mode:u}:ee.localState?{state:ee.localState,mode:ee.localMode}:{state:ee,mode:le}},indent:function(ee,z,he){return ee.block==O&&u.indent?u.indent(ee.htmlState,z,he):ee.localState&&ee.localMode.indent?ee.localMode.indent(ee.localState,z,he):o.Pass},blankLine:k,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return le},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../xml/xml"),n("../meta")):s(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(n,r,i){(function(s){s.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var o=0;o<s.modeInfo.length;o++){var a=s.modeInfo[o];a.mimes&&(a.mime=a.mimes[0])}s.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.mime==l)return f;if(f.mimes){for(var c=0;c<f.mimes.length;c++)if(f.mimes[c]==l)return f}}return/\+xml$/.test(l)?s.findModeByMIME("application/xml"):/\+json$/.test(l)?s.findModeByMIME("application/json"):void 0},s.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.ext){for(var c=0;c<f.ext.length;c++)if(f.ext[c]==l)return f}}},s.findModeByFileName=function(l){for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.file&&f.file.test(l))return f}var c=l.lastIndexOf("."),d=c>-1&&l.substring(c+1,l.length);if(d)return s.findModeByExtension(d)},s.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var f=s.modeInfo[u];if(f.name.toLowerCase()==l)return f;if(f.alias){for(var c=0;c<f.alias.length;c++)if(f.alias[c].toLowerCase()==l)return f}}}})(typeof i=="object"&&typeof r=="object"?n("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(n,r,i){(function(s){var o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};s.defineMode("xml",function(l,u){var f,c,d=l.indentUnit,h={},p=u.htmlMode?o:a;for(var g in p)h[g]=p[g];for(var g in u)h[g]=u[g];function v(q,Y){function X(le){return Y.tokenize=le,le(q,Y)}var te=q.next();return te=="<"?q.eat("!")?q.eat("[")?q.match("CDATA[")?X(y("atom","]]>")):null:q.match("--")?X(y("comment","-->")):q.match("DOCTYPE",!0,!0)?(q.eatWhile(/[\w\._\-]/),X(w(1))):null:q.eat("?")?(q.eatWhile(/[\w\._\-]/),Y.tokenize=y("meta","?>"),"meta"):(f=q.eat("/")?"closeTag":"openTag",Y.tokenize=x,"tag bracket"):te=="&"?(q.eat("#")?q.eat("x")?q.eatWhile(/[a-fA-F\d]/)&&q.eat(";"):q.eatWhile(/[\d]/)&&q.eat(";"):q.eatWhile(/[\w\.\-:]/)&&q.eat(";"))?"atom":"error":(q.eatWhile(/[^&<]/),null)}function x(q,Y){var X,te,le=q.next();if(le==">"||le=="/"&&q.eat(">"))return Y.tokenize=v,f=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return f="equals",null;if(le=="<"){Y.tokenize=v,Y.state=k,Y.tagName=Y.tagStart=null;var ee=Y.tokenize(q,Y);return ee?ee+" tag error":"tag error"}return/[\'\"]/.test(le)?(Y.tokenize=(X=le,te=function(z,he){for(;!z.eol();)if(z.next()==X){he.tokenize=x;break}return"string"},te.isInAttribute=!0,te),Y.stringStartCol=q.column(),Y.tokenize(q,Y)):(q.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function y(q,Y){return function(X,te){for(;!X.eol();){if(X.match(Y)){te.tokenize=v;break}X.next()}return q}}function w(q){return function(Y,X){for(var te;(te=Y.next())!=null;){if(te=="<")return X.tokenize=w(q+1),X.tokenize(Y,X);if(te==">"){if(q==1){X.tokenize=v;break}return X.tokenize=w(q-1),X.tokenize(Y,X)}}return"meta"}}function _(q){return q&&q.toLowerCase()}function A(q,Y,X){this.prev=q.context,this.tagName=Y||"",this.indent=q.indented,this.startOfLine=X,(h.doNotIndent.hasOwnProperty(Y)||q.context&&q.context.noIndent)&&(this.noIndent=!0)}function T(q){q.context&&(q.context=q.context.prev)}function D(q,Y){for(var X;;){if(!q.context||(X=q.context.tagName,!h.contextGrabbers.hasOwnProperty(_(X))||!h.contextGrabbers[_(X)].hasOwnProperty(_(Y))))return;T(q)}}function k(q,Y,X){return q=="openTag"?(X.tagStart=Y.column(),R):q=="closeTag"?O:k}function R(q,Y,X){return q=="word"?(X.tagName=Y.current(),c="tag",L):h.allowMissingTagName&&q=="endTag"?(c="tag bracket",L(q,0,X)):(c="error",R)}function O(q,Y,X){if(q=="word"){var te=Y.current();return X.context&&X.context.tagName!=te&&h.implicitlyClosed.hasOwnProperty(_(X.context.tagName))&&T(X),X.context&&X.context.tagName==te||h.matchClosing===!1?(c="tag",B):(c="tag error",K)}return h.allowMissingTagName&&q=="endTag"?(c="tag bracket",B(q,0,X)):(c="error",K)}function B(q,Y,X){return q!="endTag"?(c="error",B):(T(X),k)}function K(q,Y,X){return c="error",B(q,0,X)}function L(q,Y,X){if(q=="word")return c="attribute",$;if(q=="endTag"||q=="selfcloseTag"){var te=X.tagName,le=X.tagStart;return X.tagName=X.tagStart=null,q=="selfcloseTag"||h.autoSelfClosers.hasOwnProperty(_(te))?D(X,te):(D(X,te),X.context=new A(X,te,le==X.indented)),k}return c="error",L}function $(q,Y,X){return q=="equals"?I:(h.allowMissing||(c="error"),L(q,0,X))}function I(q,Y,X){return q=="string"?U:q=="word"&&h.allowUnquoted?(c="string",L):(c="error",L(q,0,X))}function U(q,Y,X){return q=="string"?U:L(q,0,X)}return v.isInText=!0,{startState:function(q){var Y={tokenize:v,state:k,indented:q||0,tagName:null,tagStart:null,context:null};return q!=null&&(Y.baseIndent=q),Y},token:function(q,Y){if(!Y.tagName&&q.sol()&&(Y.indented=q.indentation()),q.eatSpace())return null;f=null;var X=Y.tokenize(q,Y);return(X||f)&&X!="comment"&&(c=null,Y.state=Y.state(f||X,q,Y),c&&(X=c=="error"?X+" error":c)),X},indent:function(q,Y,X){var te=q.context;if(q.tokenize.isInAttribute)return q.tagStart==q.indented?q.stringStartCol+1:q.indented+d;if(te&&te.noIndent)return s.Pass;if(q.tokenize!=x&&q.tokenize!=v)return X?X.match(/^(\s*)/)[0].length:0;if(q.tagName)return h.multilineTagIndentPastTag!==!1?q.tagStart+q.tagName.length+2:q.tagStart+d*(h.multilineTagIndentFactor||1);if(h.alignCDATA&&/<!\[CDATA\[/.test(Y))return 0;var le=Y&&/^<(\/)?([\w_:\.-]*)/.exec(Y);if(le&&le[1])for(;te;){if(te.tagName==le[2]){te=te.prev;break}if(!h.implicitlyClosed.hasOwnProperty(_(te.tagName)))break;te=te.prev}else if(le)for(;te;){var ee=h.contextGrabbers[_(te.tagName)];if(!ee||!ee.hasOwnProperty(_(le[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+d:q.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:h.htmlMode?"html":"xml",helperType:h.htmlMode?"html":"xml",skipAttribute:function(q){q.state==I&&(q.state=L)},xmlCurrentTag:function(q){return q.tagName?{name:q.tagName,close:q.type=="closeTag"}:null},xmlCurrentContext:function(q){for(var Y=[],X=q.context;X;X=X.prev)Y.push(X.tagName);return Y.reverse()}}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(n,r,i){(function(s,o){o(typeof i=="object"&&r!==void 0?i:(s=typeof globalThis<"u"?globalThis:s||self).marked={})})(this,function(s){function o(Ze,pe){for(var se=0;se<pe.length;se++){var oe=pe[se];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Ze,oe.key,oe)}}function a(Ze,pe){(pe==null||pe>Ze.length)&&(pe=Ze.length);for(var se=0,oe=new Array(pe);se<pe;se++)oe[se]=Ze[se];return oe}function l(Ze,pe){var se=typeof Symbol<"u"&&Ze[Symbol.iterator]||Ze["@@iterator"];if(se)return(se=se.call(Ze)).next.bind(se);if(Array.isArray(Ze)||(se=function(be,F){if(be){if(typeof be=="string")return a(be,F);var H=Object.prototype.toString.call(be).slice(8,-1);return H==="Object"&&be.constructor&&(H=be.constructor.name),H==="Map"||H==="Set"?Array.from(be):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?a(be,F):void 0}}(Ze))||pe){se&&(Ze=se);var oe=0;return function(){return oe>=Ze.length?{done:!0}:{done:!1,value:Ze[oe++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}s.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var f=/[&<>"']/,c=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Ze){return p[Ze]};function v(Ze,pe){if(pe){if(f.test(Ze))return Ze.replace(c,g)}else if(d.test(Ze))return Ze.replace(h,g);return Ze}var x=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function y(Ze){return Ze.replace(x,function(pe,se){return(se=se.toLowerCase())==="colon"?":":se.charAt(0)==="#"?se.charAt(1)==="x"?String.fromCharCode(parseInt(se.substring(2),16)):String.fromCharCode(+se.substring(1)):""})}var w=/(^|[^\[])\^/g;function _(Ze,pe){Ze=typeof Ze=="string"?Ze:Ze.source,pe=pe||"";var se={replace:function(oe,be){return be=(be=be.source||be).replace(w,"$1"),Ze=Ze.replace(oe,be),se},getRegex:function(){return new RegExp(Ze,pe)}};return se}var A=/[^\w:]/g,T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(Ze,pe,se){if(Ze){var oe;try{oe=decodeURIComponent(y(se)).replace(A,"").toLowerCase()}catch{return null}if(oe.indexOf("javascript:")===0||oe.indexOf("vbscript:")===0||oe.indexOf("data:")===0)return null}pe&&!T.test(se)&&(se=function(be,F){k[" "+be]||(R.test(be)?k[" "+be]=be+"/":k[" "+be]=I(be,"/",!0));var H=(be=k[" "+be]).indexOf(":")===-1;return F.substring(0,2)==="//"?H?F:be.replace(O,"$1")+F:F.charAt(0)==="/"?H?F:be.replace(B,"$1")+F:be+F}(pe,se));try{se=encodeURI(se).replace(/%25/g,"%")}catch{return null}return se}var k={},R=/^[^:]+:\/*[^/]*$/,O=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/,K={exec:function(){}};function L(Ze){for(var pe,se,oe=1;oe<arguments.length;oe++)for(se in pe=arguments[oe])Object.prototype.hasOwnProperty.call(pe,se)&&(Ze[se]=pe[se]);return Ze}function $(Ze,pe){var se=Ze.replace(/\|/g,function(be,F,H){for(var J=!1,re=F;--re>=0&&H[re]==="\\";)J=!J;return J?"|":" |"}).split(/ \|/),oe=0;if(se[0].trim()||se.shift(),se.length>0&&!se[se.length-1].trim()&&se.pop(),se.length>pe)se.splice(pe);else for(;se.length<pe;)se.push("");for(;oe<se.length;oe++)se[oe]=se[oe].trim().replace(/\\\|/g,"|");return se}function I(Ze,pe,se){var oe=Ze.length;if(oe===0)return"";for(var be=0;be<oe;){var F=Ze.charAt(oe-be-1);if(F!==pe||se){if(F===pe||!se)break;be++}else be++}return Ze.slice(0,oe-be)}function U(Ze){Ze&&Ze.sanitize&&!Ze.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function q(Ze,pe){if(pe<1)return"";for(var se="";pe>1;)1&pe&&(se+=Ze),pe>>=1,Ze+=Ze;return se+Ze}function Y(Ze,pe,se,oe){var be=pe.href,F=pe.title?v(pe.title):null,H=Ze[1].replace(/\\([\[\]])/g,"$1");if(Ze[0].charAt(0)!=="!"){oe.state.inLink=!0;var J={type:"link",raw:se,href:be,title:F,text:H,tokens:oe.inlineTokens(H)};return oe.state.inLink=!1,J}return{type:"image",raw:se,href:be,title:F,text:v(H)}}var X=function(){function Ze(se){this.options=se||s.defaults}var pe=Ze.prototype;return pe.space=function(se){var oe=this.rules.block.newline.exec(se);if(oe&&oe[0].length>0)return{type:"space",raw:oe[0]}},pe.code=function(se){var oe=this.rules.block.code.exec(se);if(oe){var be=oe[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:oe[0],codeBlockStyle:"indented",text:this.options.pedantic?be:I(be,`
`)}}},pe.fences=function(se){var oe=this.rules.block.fences.exec(se);if(oe){var be=oe[0],F=function(H,J){var re=H.match(/^(\s+)(?:```)/);if(re===null)return J;var ye=re[1];return J.split(`
`).map(function(xe){var Re=xe.match(/^\s+/);return Re===null?xe:Re[0].length>=ye.length?xe.slice(ye.length):xe}).join(`
`)}(be,oe[3]||"");return{type:"code",raw:be,lang:oe[2]?oe[2].trim():oe[2],text:F}}},pe.heading=function(se){var oe=this.rules.block.heading.exec(se);if(oe){var be=oe[2].trim();if(/#$/.test(be)){var F=I(be,"#");this.options.pedantic?be=F.trim():F&&!/ $/.test(F)||(be=F.trim())}return{type:"heading",raw:oe[0],depth:oe[1].length,text:be,tokens:this.lexer.inline(be)}}},pe.hr=function(se){var oe=this.rules.block.hr.exec(se);if(oe)return{type:"hr",raw:oe[0]}},pe.blockquote=function(se){var oe=this.rules.block.blockquote.exec(se);if(oe){var be=oe[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:oe[0],tokens:this.lexer.blockTokens(be,[]),text:be}}},pe.list=function(se){var oe=this.rules.block.list.exec(se);if(oe){var be,F,H,J,re,ye,xe,Re,P,Q,ie,ae,ke=oe[1].trim(),Ce=ke.length>1,Ee={type:"list",raw:"",ordered:Ce,start:Ce?+ke.slice(0,-1):"",loose:!1,items:[]};ke=Ce?"\\d{1,9}\\"+ke.slice(-1):"\\"+ke,this.options.pedantic&&(ke=Ce?ke:"[*+-]");for(var De=new RegExp("^( {0,3}"+ke+")((?:[	 ][^\\n]*)?(?:\\n|$))");se&&(ae=!1,oe=De.exec(se))&&!this.rules.block.hr.test(se);){if(be=oe[0],se=se.substring(be.length),Re=oe[2].split(`
`,1)[0],P=se.split(`
`,1)[0],this.options.pedantic?(J=2,ie=Re.trimLeft()):(J=(J=oe[2].search(/[^ ]/))>4?1:J,ie=Re.slice(J),J+=oe[1].length),ye=!1,!Re&&/^ *$/.test(P)&&(be+=P+`
`,se=se.substring(P.length+1),ae=!0),!ae)for(var Oe=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),We=new RegExp("^ {0,"+Math.min(3,J-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),tt=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:```|~~~)"),bt=new RegExp("^ {0,"+Math.min(3,J-1)+"}#");se&&(Re=Q=se.split(`
`,1)[0],this.options.pedantic&&(Re=Re.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!tt.test(Re))&&!bt.test(Re)&&!Oe.test(Re)&&!We.test(se);){if(Re.search(/[^ ]/)>=J||!Re.trim())ie+=`
`+Re.slice(J);else{if(ye)break;ie+=`
`+Re}ye||Re.trim()||(ye=!0),be+=Q+`
`,se=se.substring(Q.length+1)}Ee.loose||(xe?Ee.loose=!0:/\n *\n *$/.test(be)&&(xe=!0)),this.options.gfm&&(F=/^\[[ xX]\] /.exec(ie))&&(H=F[0]!=="[ ] ",ie=ie.replace(/^\[[ xX]\] +/,"")),Ee.items.push({type:"list_item",raw:be,task:!!F,checked:H,loose:!1,text:ie}),Ee.raw+=be}Ee.items[Ee.items.length-1].raw=be.trimRight(),Ee.items[Ee.items.length-1].text=ie.trimRight(),Ee.raw=Ee.raw.trimRight();var Pt=Ee.items.length;for(re=0;re<Pt;re++){this.lexer.state.top=!1,Ee.items[re].tokens=this.lexer.blockTokens(Ee.items[re].text,[]);var _t=Ee.items[re].tokens.filter(function(sn){return sn.type==="space"}),Kt=_t.every(function(sn){for(var rn,on=0,vn=l(sn.raw.split(""));!(rn=vn()).done;)if(rn.value===`
`&&(on+=1),on>1)return!0;return!1});!Ee.loose&&_t.length&&Kt&&(Ee.loose=!0,Ee.items[re].loose=!0)}return Ee}},pe.html=function(se){var oe=this.rules.block.html.exec(se);if(oe){var be={type:"html",raw:oe[0],pre:!this.options.sanitizer&&(oe[1]==="pre"||oe[1]==="script"||oe[1]==="style"),text:oe[0]};if(this.options.sanitize){var F=this.options.sanitizer?this.options.sanitizer(oe[0]):v(oe[0]);be.type="paragraph",be.text=F,be.tokens=this.lexer.inline(F)}return be}},pe.def=function(se){var oe=this.rules.block.def.exec(se);if(oe)return oe[3]&&(oe[3]=oe[3].substring(1,oe[3].length-1)),{type:"def",tag:oe[1].toLowerCase().replace(/\s+/g," "),raw:oe[0],href:oe[2],title:oe[3]}},pe.table=function(se){var oe=this.rules.block.table.exec(se);if(oe){var be={type:"table",header:$(oe[1]).map(function(xe){return{text:xe}}),align:oe[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:oe[3]&&oe[3].trim()?oe[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(be.header.length===be.align.length){be.raw=oe[0];var F,H,J,re,ye=be.align.length;for(F=0;F<ye;F++)/^ *-+: *$/.test(be.align[F])?be.align[F]="right":/^ *:-+: *$/.test(be.align[F])?be.align[F]="center":/^ *:-+ *$/.test(be.align[F])?be.align[F]="left":be.align[F]=null;for(ye=be.rows.length,F=0;F<ye;F++)be.rows[F]=$(be.rows[F],be.header.length).map(function(xe){return{text:xe}});for(ye=be.header.length,H=0;H<ye;H++)be.header[H].tokens=this.lexer.inline(be.header[H].text);for(ye=be.rows.length,H=0;H<ye;H++)for(re=be.rows[H],J=0;J<re.length;J++)re[J].tokens=this.lexer.inline(re[J].text);return be}}},pe.lheading=function(se){var oe=this.rules.block.lheading.exec(se);if(oe)return{type:"heading",raw:oe[0],depth:oe[2].charAt(0)==="="?1:2,text:oe[1],tokens:this.lexer.inline(oe[1])}},pe.paragraph=function(se){var oe=this.rules.block.paragraph.exec(se);if(oe){var be=oe[1].charAt(oe[1].length-1)===`
`?oe[1].slice(0,-1):oe[1];return{type:"paragraph",raw:oe[0],text:be,tokens:this.lexer.inline(be)}}},pe.text=function(se){var oe=this.rules.block.text.exec(se);if(oe)return{type:"text",raw:oe[0],text:oe[0],tokens:this.lexer.inline(oe[0])}},pe.escape=function(se){var oe=this.rules.inline.escape.exec(se);if(oe)return{type:"escape",raw:oe[0],text:v(oe[1])}},pe.tag=function(se){var oe=this.rules.inline.tag.exec(se);if(oe)return!this.lexer.state.inLink&&/^<a /i.test(oe[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(oe[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(oe[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(oe[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:oe[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(oe[0]):v(oe[0]):oe[0]}},pe.link=function(se){var oe=this.rules.inline.link.exec(se);if(oe){var be=oe[2].trim();if(!this.options.pedantic&&/^</.test(be)){if(!/>$/.test(be))return;var F=I(be.slice(0,-1),"\\");if((be.length-F.length)%2==0)return}else{var H=function(Re,P){if(Re.indexOf(P[1])===-1)return-1;for(var Q=Re.length,ie=0,ae=0;ae<Q;ae++)if(Re[ae]==="\\")ae++;else if(Re[ae]===P[0])ie++;else if(Re[ae]===P[1]&&--ie<0)return ae;return-1}(oe[2],"()");if(H>-1){var J=(oe[0].indexOf("!")===0?5:4)+oe[1].length+H;oe[2]=oe[2].substring(0,H),oe[0]=oe[0].substring(0,J).trim(),oe[3]=""}}var re=oe[2],ye="";if(this.options.pedantic){var xe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(re);xe&&(re=xe[1],ye=xe[3])}else ye=oe[3]?oe[3].slice(1,-1):"";return re=re.trim(),/^</.test(re)&&(re=this.options.pedantic&&!/>$/.test(be)?re.slice(1):re.slice(1,-1)),Y(oe,{href:re&&re.replace(this.rules.inline._escapes,"$1"),title:ye&&ye.replace(this.rules.inline._escapes,"$1")},oe[0],this.lexer)}},pe.reflink=function(se,oe){var be;if((be=this.rules.inline.reflink.exec(se))||(be=this.rules.inline.nolink.exec(se))){var F=(be[2]||be[1]).replace(/\s+/g," ");if(!(F=oe[F.toLowerCase()])||!F.href){var H=be[0].charAt(0);return{type:"text",raw:H,text:H}}return Y(be,F,be[0],this.lexer)}},pe.emStrong=function(se,oe,be){be===void 0&&(be="");var F=this.rules.inline.emStrong.lDelim.exec(se);if(F&&(!F[3]||!be.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=F[1]||F[2]||"";if(!H||H&&(be===""||this.rules.inline.punctuation.exec(be))){var J,re,ye=F[0].length-1,xe=ye,Re=0,P=F[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,oe=oe.slice(-1*se.length+ye);(F=P.exec(oe))!=null;)if(J=F[1]||F[2]||F[3]||F[4]||F[5]||F[6])if(re=J.length,F[3]||F[4])xe+=re;else if(!((F[5]||F[6])&&ye%3)||(ye+re)%3){if(!((xe-=re)>0)){if(re=Math.min(re,re+xe+Re),Math.min(ye,re)%2){var Q=se.slice(1,ye+F.index+re);return{type:"em",raw:se.slice(0,ye+F.index+re+1),text:Q,tokens:this.lexer.inlineTokens(Q)}}var ie=se.slice(2,ye+F.index+re-1);return{type:"strong",raw:se.slice(0,ye+F.index+re+1),text:ie,tokens:this.lexer.inlineTokens(ie)}}}else Re+=re}}},pe.codespan=function(se){var oe=this.rules.inline.code.exec(se);if(oe){var be=oe[2].replace(/\n/g," "),F=/[^ ]/.test(be),H=/^ /.test(be)&&/ $/.test(be);return F&&H&&(be=be.substring(1,be.length-1)),be=v(be,!0),{type:"codespan",raw:oe[0],text:be}}},pe.br=function(se){var oe=this.rules.inline.br.exec(se);if(oe)return{type:"br",raw:oe[0]}},pe.del=function(se){var oe=this.rules.inline.del.exec(se);if(oe)return{type:"del",raw:oe[0],text:oe[2],tokens:this.lexer.inlineTokens(oe[2])}},pe.autolink=function(se,oe){var be,F,H=this.rules.inline.autolink.exec(se);if(H)return F=H[2]==="@"?"mailto:"+(be=v(this.options.mangle?oe(H[1]):H[1])):be=v(H[1]),{type:"link",raw:H[0],text:be,href:F,tokens:[{type:"text",raw:be,text:be}]}},pe.url=function(se,oe){var be;if(be=this.rules.inline.url.exec(se)){var F,H;if(be[2]==="@")H="mailto:"+(F=v(this.options.mangle?oe(be[0]):be[0]));else{var J;do J=be[0],be[0]=this.rules.inline._backpedal.exec(be[0])[0];while(J!==be[0]);F=v(be[0]),H=be[1]==="www."?"http://"+F:F}return{type:"link",raw:be[0],text:F,href:H,tokens:[{type:"text",raw:F,text:F}]}}},pe.inlineText=function(se,oe){var be,F=this.rules.inline.text.exec(se);if(F)return be=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):v(F[0]):F[0]:v(this.options.smartypants?oe(F[0]):F[0]),{type:"text",raw:F[0],text:be}},Ze}(),te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};te.def=_(te.def).replace("label",te._label).replace("title",te._title).getRegex(),te.bullet=/(?:[*+-]|\d{1,9}[.)])/,te.listItemStart=_(/^( *)(bull) */).replace("bull",te.bullet).getRegex(),te.list=_(te.list).replace(/bull/g,te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+te.def.source+")").getRegex(),te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,te.html=_(te.html,"i").replace("comment",te._comment).replace("tag",te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),te.paragraph=_(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.blockquote=_(te.blockquote).replace("paragraph",te.paragraph).getRegex(),te.normal=L({},te),te.gfm=L({},te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),te.gfm.table=_(te.gfm.table).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.gfm.paragraph=_(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.pedantic=L({},te.normal,{html:_(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:K,paragraph:_(te.normal._paragraph).replace("hr",te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ee(Ze){return Ze.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function z(Ze){var pe,se,oe="",be=Ze.length;for(pe=0;pe<be;pe++)se=Ze.charCodeAt(pe),Math.random()>.5&&(se="x"+se.toString(16)),oe+="&#"+se+";";return oe}le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=_(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=_(te._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=_(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=_(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=_(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=_(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=_(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=_(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=_(le.reflink).replace("label",le._label).replace("ref",te._label).getRegex(),le.nolink=_(le.nolink).replace("ref",te._label).getRegex(),le.reflinkSearch=_(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=L({},le),le.pedantic=L({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=L({},le.normal,{escape:_(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=_(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=L({},le.gfm,{br:_(le.br).replace("{2,}","*").getRegex(),text:_(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var he=function(){function Ze(F){this.tokens=[],this.tokens.links=Object.create(null),this.options=F||s.defaults,this.options.tokenizer=this.options.tokenizer||new X,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var H={block:te.normal,inline:le.normal};this.options.pedantic?(H.block=te.pedantic,H.inline=le.pedantic):this.options.gfm&&(H.block=te.gfm,this.options.breaks?H.inline=le.breaks:H.inline=le.gfm),this.tokenizer.rules=H}Ze.lex=function(F,H){return new Ze(H).lex(F)},Ze.lexInline=function(F,H){return new Ze(H).inlineTokens(F)};var pe,se,oe,be=Ze.prototype;return be.lex=function(F){var H;for(F=F.replace(/\r\n|\r/g,`
`),this.blockTokens(F,this.tokens);H=this.inlineQueue.shift();)this.inlineTokens(H.src,H.tokens);return this.tokens},be.blockTokens=function(F,H){var J,re,ye,xe,Re=this;for(H===void 0&&(H=[]),F=this.options.pedantic?F.replace(/\t/g,"    ").replace(/^ +$/gm,""):F.replace(/^( *)(\t+)/gm,function(Q,ie,ae){return ie+"    ".repeat(ae.length)});F;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Q){return!!(J=Q.call({lexer:Re},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)}))){if(J=this.tokenizer.space(F))F=F.substring(J.raw.length),J.raw.length===1&&H.length>0?H[H.length-1].raw+=`
`:H.push(J);else if(J=this.tokenizer.code(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?H.push(J):(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.fences(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.heading(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.hr(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.blockquote(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.list(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.html(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.def(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title}):(re.raw+=`
`+J.raw,re.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.table(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.lheading(F))F=F.substring(J.raw.length),H.push(J);else if(ye=F,this.options.extensions&&this.options.extensions.startBlock&&function(){var Q=1/0,ie=F.slice(1),ae=void 0;Re.options.extensions.startBlock.forEach(function(ke){typeof(ae=ke.call({lexer:this},ie))=="number"&&ae>=0&&(Q=Math.min(Q,ae))}),Q<1/0&&Q>=0&&(ye=F.substring(0,Q+1))}(),this.state.top&&(J=this.tokenizer.paragraph(ye)))re=H[H.length-1],xe&&re.type==="paragraph"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J),xe=ye.length!==F.length,F=F.substring(J.raw.length);else if(J=this.tokenizer.text(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&re.type==="text"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J);else if(F){var P="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(P);break}throw new Error(P)}}return this.state.top=!0,H},be.inline=function(F,H){return H===void 0&&(H=[]),this.inlineQueue.push({src:F,tokens:H}),H},be.inlineTokens=function(F,H){var J,re,ye,xe=this;H===void 0&&(H=[]);var Re,P,Q,ie=F;if(this.tokens.links){var ae=Object.keys(this.tokens.links);if(ae.length>0)for(;(Re=this.tokenizer.rules.inline.reflinkSearch.exec(ie))!=null;)ae.includes(Re[0].slice(Re[0].lastIndexOf("[")+1,-1))&&(ie=ie.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Re=this.tokenizer.rules.inline.blockSkip.exec(ie))!=null;)ie=ie.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Re=this.tokenizer.rules.inline.escapedEmSt.exec(ie))!=null;)ie=ie.slice(0,Re.index)+"++"+ie.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;F;)if(P||(Q=""),P=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ce){return!!(J=Ce.call({lexer:xe},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)})))if(J=this.tokenizer.escape(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.tag(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.link(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.reflink(F,this.tokens.links))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.emStrong(F,ie,Q))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.codespan(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.br(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.del(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.autolink(F,z))F=F.substring(J.raw.length),H.push(J);else if(this.state.inLink||!(J=this.tokenizer.url(F,z))){if(ye=F,this.options.extensions&&this.options.extensions.startInline&&function(){var Ce=1/0,Ee=F.slice(1),De=void 0;xe.options.extensions.startInline.forEach(function(Oe){typeof(De=Oe.call({lexer:this},Ee))=="number"&&De>=0&&(Ce=Math.min(Ce,De))}),Ce<1/0&&Ce>=0&&(ye=F.substring(0,Ce+1))}(),J=this.tokenizer.inlineText(ye,ee))F=F.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(Q=J.raw.slice(-1)),P=!0,(re=H[H.length-1])&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(F){var ke="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(ke);break}throw new Error(ke)}}else F=F.substring(J.raw.length),H.push(J);return H},pe=Ze,oe=[{key:"rules",get:function(){return{block:te,inline:le}}}],(se=null)&&o(pe.prototype,se),oe&&o(pe,oe),Object.defineProperty(pe,"prototype",{writable:!1}),Ze}(),de=function(){function Ze(se){this.options=se||s.defaults}var pe=Ze.prototype;return pe.code=function(se,oe,be){var F=(oe||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(se,F);H!=null&&H!==se&&(be=!0,se=H)}return se=se.replace(/\n$/,"")+`
`,F?'<pre><code class="'+this.options.langPrefix+v(F,!0)+'">'+(be?se:v(se,!0))+`</code></pre>
`:"<pre><code>"+(be?se:v(se,!0))+`</code></pre>
`},pe.blockquote=function(se){return`<blockquote>
`+se+`</blockquote>
`},pe.html=function(se){return se},pe.heading=function(se,oe,be,F){return this.options.headerIds?"<h"+oe+' id="'+(this.options.headerPrefix+F.slug(be))+'">'+se+"</h"+oe+`>
`:"<h"+oe+">"+se+"</h"+oe+`>
`},pe.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},pe.list=function(se,oe,be){var F=oe?"ol":"ul";return"<"+F+(oe&&be!==1?' start="'+be+'"':"")+`>
`+se+"</"+F+`>
`},pe.listitem=function(se){return"<li>"+se+`</li>
`},pe.checkbox=function(se){return"<input "+(se?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},pe.paragraph=function(se){return"<p>"+se+`</p>
`},pe.table=function(se,oe){return oe&&(oe="<tbody>"+oe+"</tbody>"),`<table>
<thead>
`+se+`</thead>
`+oe+`</table>
`},pe.tablerow=function(se){return`<tr>
`+se+`</tr>
`},pe.tablecell=function(se,oe){var be=oe.header?"th":"td";return(oe.align?"<"+be+' align="'+oe.align+'">':"<"+be+">")+se+"</"+be+`>
`},pe.strong=function(se){return"<strong>"+se+"</strong>"},pe.em=function(se){return"<em>"+se+"</em>"},pe.codespan=function(se){return"<code>"+se+"</code>"},pe.br=function(){return this.options.xhtml?"<br/>":"<br>"},pe.del=function(se){return"<del>"+se+"</del>"},pe.link=function(se,oe,be){if((se=D(this.options.sanitize,this.options.baseUrl,se))===null)return be;var F='<a href="'+v(se)+'"';return oe&&(F+=' title="'+oe+'"'),F+=">"+be+"</a>"},pe.image=function(se,oe,be){if((se=D(this.options.sanitize,this.options.baseUrl,se))===null)return be;var F='<img src="'+se+'" alt="'+be+'"';return oe&&(F+=' title="'+oe+'"'),F+=this.options.xhtml?"/>":">"},pe.text=function(se){return se},Ze}(),ze=function(){function Ze(){}var pe=Ze.prototype;return pe.strong=function(se){return se},pe.em=function(se){return se},pe.codespan=function(se){return se},pe.del=function(se){return se},pe.html=function(se){return se},pe.text=function(se){return se},pe.link=function(se,oe,be){return""+be},pe.image=function(se,oe,be){return""+be},pe.br=function(){return""},Ze}(),He=function(){function Ze(){this.seen={}}var pe=Ze.prototype;return pe.serialize=function(se){return se.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},pe.getNextSafeSlug=function(se,oe){var be=se,F=0;if(this.seen.hasOwnProperty(be)){F=this.seen[se];do be=se+"-"+ ++F;while(this.seen.hasOwnProperty(be))}return oe||(this.seen[se]=F,this.seen[be]=0),be},pe.slug=function(se,oe){oe===void 0&&(oe={});var be=this.serialize(se);return this.getNextSafeSlug(be,oe.dryrun)},Ze}(),je=function(){function Ze(se){this.options=se||s.defaults,this.options.renderer=this.options.renderer||new de,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ze,this.slugger=new He}Ze.parse=function(se,oe){return new Ze(oe).parse(se)},Ze.parseInline=function(se,oe){return new Ze(oe).parseInline(se)};var pe=Ze.prototype;return pe.parse=function(se,oe){oe===void 0&&(oe=!0);var be,F,H,J,re,ye,xe,Re,P,Q,ie,ae,ke,Ce,Ee,De,Oe,We,tt,bt="",Pt=se.length;for(be=0;be<Pt;be++)if(Q=se[be],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q.type])||(tt=this.options.extensions.renderers[Q.type].call({parser:this},Q))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Q.type))switch(Q.type){case"space":continue;case"hr":bt+=this.renderer.hr();continue;case"heading":bt+=this.renderer.heading(this.parseInline(Q.tokens),Q.depth,y(this.parseInline(Q.tokens,this.textRenderer)),this.slugger);continue;case"code":bt+=this.renderer.code(Q.text,Q.lang,Q.escaped);continue;case"table":for(Re="",xe="",J=Q.header.length,F=0;F<J;F++)xe+=this.renderer.tablecell(this.parseInline(Q.header[F].tokens),{header:!0,align:Q.align[F]});for(Re+=this.renderer.tablerow(xe),P="",J=Q.rows.length,F=0;F<J;F++){for(xe="",re=(ye=Q.rows[F]).length,H=0;H<re;H++)xe+=this.renderer.tablecell(this.parseInline(ye[H].tokens),{header:!1,align:Q.align[H]});P+=this.renderer.tablerow(xe)}bt+=this.renderer.table(Re,P);continue;case"blockquote":P=this.parse(Q.tokens),bt+=this.renderer.blockquote(P);continue;case"list":for(ie=Q.ordered,ae=Q.start,ke=Q.loose,J=Q.items.length,P="",F=0;F<J;F++)De=(Ee=Q.items[F]).checked,Oe=Ee.task,Ce="",Ee.task&&(We=this.renderer.checkbox(De),ke?Ee.tokens.length>0&&Ee.tokens[0].type==="paragraph"?(Ee.tokens[0].text=We+" "+Ee.tokens[0].text,Ee.tokens[0].tokens&&Ee.tokens[0].tokens.length>0&&Ee.tokens[0].tokens[0].type==="text"&&(Ee.tokens[0].tokens[0].text=We+" "+Ee.tokens[0].tokens[0].text)):Ee.tokens.unshift({type:"text",text:We}):Ce+=We),Ce+=this.parse(Ee.tokens,ke),P+=this.renderer.listitem(Ce,Oe,De);bt+=this.renderer.list(P,ie,ae);continue;case"html":bt+=this.renderer.html(Q.text);continue;case"paragraph":bt+=this.renderer.paragraph(this.parseInline(Q.tokens));continue;case"text":for(P=Q.tokens?this.parseInline(Q.tokens):Q.text;be+1<Pt&&se[be+1].type==="text";)P+=`
`+((Q=se[++be]).tokens?this.parseInline(Q.tokens):Q.text);bt+=oe?this.renderer.paragraph(P):P;continue;default:var _t='Token with "'+Q.type+'" type was not found.';if(this.options.silent)return void console.error(_t);throw new Error(_t)}else bt+=tt||"";return bt},pe.parseInline=function(se,oe){oe=oe||this.renderer;var be,F,H,J="",re=se.length;for(be=0;be<re;be++)if(F=se[be],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type])||(H=this.options.extensions.renderers[F.type].call({parser:this},F))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(F.type))switch(F.type){case"escape":case"text":J+=oe.text(F.text);break;case"html":J+=oe.html(F.text);break;case"link":J+=oe.link(F.href,F.title,this.parseInline(F.tokens,oe));break;case"image":J+=oe.image(F.href,F.title,F.text);break;case"strong":J+=oe.strong(this.parseInline(F.tokens,oe));break;case"em":J+=oe.em(this.parseInline(F.tokens,oe));break;case"codespan":J+=oe.codespan(F.text);break;case"br":J+=oe.br();break;case"del":J+=oe.del(this.parseInline(F.tokens,oe));break;default:var ye='Token with "'+F.type+'" type was not found.';if(this.options.silent)return void console.error(ye);throw new Error(ye)}else J+=H||"";return J},Ze}();function we(Ze,pe,se){if(Ze==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");if(typeof pe=="function"&&(se=pe,pe=null),U(pe=L({},we.defaults,pe||{})),se){var oe,be=pe.highlight;try{oe=he.lex(Ze,pe)}catch(ye){return se(ye)}var F=function(ye){var xe;if(!ye)try{pe.walkTokens&&we.walkTokens(oe,pe.walkTokens),xe=je.parse(oe,pe)}catch(Re){ye=Re}return pe.highlight=be,ye?se(ye):se(null,xe)};if(!be||be.length<3||(delete pe.highlight,!oe.length))return F();var H=0;return we.walkTokens(oe,function(ye){ye.type==="code"&&(H++,setTimeout(function(){be(ye.text,ye.lang,function(xe,Re){if(xe)return F(xe);Re!=null&&Re!==ye.text&&(ye.text=Re,ye.escaped=!0),--H===0&&F()})},0))}),void(H===0&&F())}function J(ye){if(ye.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+v(ye.message+"",!0)+"</pre>";throw ye}try{var re=he.lex(Ze,pe);if(pe.walkTokens){if(pe.async)return Promise.all(we.walkTokens(re,pe.walkTokens)).then(function(){return je.parse(re,pe)}).catch(J);we.walkTokens(re,pe.walkTokens)}return je.parse(re,pe)}catch(ye){J(ye)}}we.options=we.setOptions=function(Ze){var pe;return L(we.defaults,Ze),pe=we.defaults,s.defaults=pe,we},we.getDefaults=u,we.defaults=s.defaults,we.use=function(){for(var Ze=arguments.length,pe=new Array(Ze),se=0;se<Ze;se++)pe[se]=arguments[se];var oe,be=L.apply(void 0,[{}].concat(pe)),F=we.defaults.extensions||{renderers:{},childTokens:{}};pe.forEach(function(H){if(H.extensions&&(oe=!0,H.extensions.forEach(function(re){if(!re.name)throw new Error("extension name required");if(re.renderer){var ye=F.renderers?F.renderers[re.name]:null;F.renderers[re.name]=ye?function(){for(var xe=arguments.length,Re=new Array(xe),P=0;P<xe;P++)Re[P]=arguments[P];var Q=re.renderer.apply(this,Re);return Q===!1&&(Q=ye.apply(this,Re)),Q}:re.renderer}if(re.tokenizer){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[re.level]?F[re.level].unshift(re.tokenizer):F[re.level]=[re.tokenizer],re.start&&(re.level==="block"?F.startBlock?F.startBlock.push(re.start):F.startBlock=[re.start]:re.level==="inline"&&(F.startInline?F.startInline.push(re.start):F.startInline=[re.start]))}re.childTokens&&(F.childTokens[re.name]=re.childTokens)})),H.renderer&&function(){var re=we.defaults.renderer||new de,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,ie=new Array(Q),ae=0;ae<Q;ae++)ie[ae]=arguments[ae];var ke=H.renderer[Re].apply(re,ie);return ke===!1&&(ke=P.apply(re,ie)),ke}};for(var xe in H.renderer)ye(xe);be.renderer=re}(),H.tokenizer&&function(){var re=we.defaults.tokenizer||new X,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,ie=new Array(Q),ae=0;ae<Q;ae++)ie[ae]=arguments[ae];var ke=H.tokenizer[Re].apply(re,ie);return ke===!1&&(ke=P.apply(re,ie)),ke}};for(var xe in H.tokenizer)ye(xe);be.tokenizer=re}(),H.walkTokens){var J=we.defaults.walkTokens;be.walkTokens=function(re){var ye=[];return ye.push(H.walkTokens.call(this,re)),J&&(ye=ye.concat(J.call(this,re))),ye}}oe&&(be.extensions=F),we.setOptions(be)})},we.walkTokens=function(Ze,pe){for(var se,oe=[],be=function(){var H=se.value;switch(oe=oe.concat(pe.call(we,H)),H.type){case"table":for(var J,re=l(H.header);!(J=re()).done;){var ye=J.value;oe=oe.concat(we.walkTokens(ye.tokens,pe))}for(var xe,Re=l(H.rows);!(xe=Re()).done;)for(var P,Q=l(xe.value);!(P=Q()).done;){var ie=P.value;oe=oe.concat(we.walkTokens(ie.tokens,pe))}break;case"list":oe=oe.concat(we.walkTokens(H.items,pe));break;default:we.defaults.extensions&&we.defaults.extensions.childTokens&&we.defaults.extensions.childTokens[H.type]?we.defaults.extensions.childTokens[H.type].forEach(function(ae){oe=oe.concat(we.walkTokens(H[ae],pe))}):H.tokens&&(oe=oe.concat(we.walkTokens(H.tokens,pe)))}},F=l(Ze);!(se=F()).done;)be();return oe},we.parseInline=function(Ze,pe){if(Ze==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");U(pe=L({},we.defaults,pe||{}));try{var se=he.lexInline(Ze,pe);return pe.walkTokens&&we.walkTokens(se,pe.walkTokens),je.parseInline(se,pe)}catch(oe){if(oe.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+v(oe.message+"",!0)+"</pre>";throw oe}},we.Parser=je,we.parser=je.parse,we.Renderer=de,we.TextRenderer=ze,we.Lexer=he,we.lexer=he.lex,we.Tokenizer=X,we.Slugger=He,we.parse=we;var Ie=we.options,qe=we.setOptions,Pe=we.use,At=we.walkTokens,dt=we.parseInline,nn=we,Wt=je.parse,Mn=he.lex;s.Lexer=he,s.Parser=je,s.Renderer=de,s.Slugger=He,s.TextRenderer=ze,s.Tokenizer=X,s.getDefaults=u,s.lexer=Mn,s.marked=we,s.options=Ie,s.parse=nn,s.parseInline=dt,s.parser=Wt,s.setOptions=qe,s.use=Pe,s.walkTokens=At,Object.defineProperty(s,"__esModule",{value:!0})})},{}],16:[function(n,r,i){(function(s){(function(){var o;(function(){(o=function(a,l,u,f){f=f||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=f.flags||{},this.memoized={},this.loaded=!1;var c,d,h,p,g,v=this;function x(A,T){var D=v._readFile(A,null,f.asyncLoad);f.asyncLoad?D.then(function(k){T(k)}):T(D)}function y(A){l=A,u&&_()}function w(A){u=A,l&&_()}function _(){for(v.rules=v._parseAFF(l),v.compoundRuleCodes={},d=0,p=v.compoundRules.length;d<p;d++){var A=v.compoundRules[d];for(h=0,g=A.length;h<g;h++)v.compoundRuleCodes[A[h]]=[]}for(d in"ONLYINCOMPOUND"in v.flags&&(v.compoundRuleCodes[v.flags.ONLYINCOMPOUND]=[]),v.dictionaryTable=v._parseDIC(u),v.compoundRuleCodes)v.compoundRuleCodes[d].length===0&&delete v.compoundRuleCodes[d];for(d=0,p=v.compoundRules.length;d<p;d++){var T=v.compoundRules[d],D="";for(h=0,g=T.length;h<g;h++){var k=T[h];k in v.compoundRuleCodes?D+="("+v.compoundRuleCodes[k].join("|")+")":D+=k}v.compoundRules[d]=new RegExp(D,"i")}v.loaded=!0,f.asyncLoad&&f.loadedCallback&&f.loadedCallback(v)}return a&&(v.dictionary=a,l&&u?_():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(c=f.dictionaryPath?f.dictionaryPath:"typo/dictionaries",l||x(chrome.extension.getURL(c+"/"+a+"/"+a+".aff"),y),u||x(chrome.extension.getURL(c+"/"+a+"/"+a+".dic"),w)):(c=f.dictionaryPath?f.dictionaryPath:s!==void 0?s+"/dictionaries":"./dictionaries",l||x(c+"/"+a+"/"+a+".aff",y),u||x(c+"/"+a+"/"+a+".dic",w))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var f,c=new XMLHttpRequest;return c.open("GET",a,u),u&&(f=new Promise(function(h,p){c.onload=function(){c.status===200?h(c.responseText):p(c.statusText)},c.onerror=function(){p(c.statusText)}})),c.overrideMimeType&&c.overrideMimeType("text/plain; charset="+l),c.send(null),u?f:c.responseText}if(n!==void 0){var d=n("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(h){return console.log(h),""}}},_parseAFF:function(a){var l,u,f,c,d,h,p,g={},v=a.split(/\r?\n/);for(c=0,h=v.length;c<h;c++)if(l=(l=this._removeAffixComments(v[c])).trim()){var x=l.split(/\s+/),y=x[0];if(y=="PFX"||y=="SFX"){var w=x[1],_=x[2],A=[];for(d=c+1,p=c+1+(u=parseInt(x[3],10));d<p;d++){var T=(f=v[d].split(/\s+/))[2],D=f[3].split("/"),k=D[0];k==="0"&&(k="");var R=this.parseRuleCodes(D[1]),O=f[4],B={};B.add=k,R.length>0&&(B.continuationClasses=R),O!=="."&&(B.match=y==="SFX"?new RegExp(O+"$"):new RegExp("^"+O)),T!="0"&&(B.remove=y==="SFX"?new RegExp(T+"$"):T),A.push(B)}g[w]={type:y,combineable:_=="Y",entries:A},c+=u}else if(y==="COMPOUNDRULE"){for(d=c+1,p=c+1+(u=parseInt(x[1],10));d<p;d++)f=(l=v[d]).split(/\s+/),this.compoundRules.push(f[1]);c+=u}else y==="REP"?(f=l.split(/\s+/)).length===3&&this.replacementTable.push([f[1],f[2]]):this.flags[y]=x[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function f(I,U){u.hasOwnProperty(I)||(u[I]=null),U.length>0&&(u[I]===null&&(u[I]=[]),u[I].push(U))}for(var c=1,d=l.length;c<d;c++){var h=l[c];if(h){var p=h.split("/",2),g=p[0];if(p.length>1){var v=this.parseRuleCodes(p[1]);"NEEDAFFIX"in this.flags&&v.indexOf(this.flags.NEEDAFFIX)!=-1||f(g,v);for(var x=0,y=v.length;x<y;x++){var w=v[x],_=this.rules[w];if(_)for(var A=this._applyRule(g,_),T=0,D=A.length;T<D;T++){var k=A[T];if(f(k,[]),_.combineable)for(var R=x+1;R<y;R++){var O=v[R],B=this.rules[O];if(B&&B.combineable&&_.type!=B.type)for(var K=this._applyRule(k,B),L=0,$=K.length;L<$;L++)f(K[L],[])}}w in this.compoundRuleCodes&&this.compoundRuleCodes[w].push(g)}}else f(g.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,f=a.length;u<f;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,f=[],c=0,d=u.length;c<d;c++){var h=u[c];if(!h.match||a.match(h.match)){var p=a;if(h.remove&&(p=p.replace(h.remove,"")),l.type==="SFX"?p+=h.add:p=h.add+p,f.push(p),"continuationClasses"in h)for(var g=0,v=h.continuationClasses.length;g<v;g++){var x=this.rules[h.continuationClasses[g]];x&&(f=f.concat(this._applyRule(p,x)))}}}return f},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var f=l[0].toLowerCase()+l.substring(1);if(f!==l){if(this.hasFlag(f,"KEEPCASE"))return!1;if(this.checkExact(f))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,f=this.dictionaryTable[a];if(f===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(f===null)return!0;if(typeof f=="object"){for(l=0,u=f.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",f[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var f=0,c=this.replacementTable.length;f<c;f++){var d=this.replacementTable[f];if(a.indexOf(d[0])!==-1){var h=a.replace(d[0],d[1]);if(this.check(h))return[h]}}var p=this;function g(v,x){var y,w,_,A,T={},D=p.alphabet.length;if(typeof v=="string"){var k=v;(v={})[k]=!0}for(var k in v)for(y=0,_=k.length+1;y<_;y++){var R=[k.substring(0,y),k.substring(y)];if(R[1]&&(A=R[0]+R[1].substring(1),x&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1].length>1&&R[1][1]!==R[1][0]&&(A=R[0]+R[1][1]+R[1][0]+R[1].substring(2),x&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)),R[1]){var O=R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase";for(w=0;w<D;w++){var B=p.alphabet[w];O==="uppercase"&&(B=B.toUpperCase()),B!=R[1].substring(0,1)&&(A=R[0]+B+R[1].substring(1),x&&!p.check(A)||(A in T?T[A]+=1:T[A]=1))}}if(R[1])for(w=0;w<D;w++)O=R[0].substring(-1).toUpperCase()===R[0].substring(-1)&&R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase",B=p.alphabet[w],O==="uppercase"&&(B=B.toUpperCase()),A=R[0]+B+R[1],x&&!p.check(A)||(A in T?T[A]+=1:T[A]=1)}return T}return p.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(v){var x,y=g(v),w=g(y,!0);for(var _ in y)p.check(_)&&(_ in w?w[_]+=y[_]:w[_]=y[_]);var A=[];for(x in w)w.hasOwnProperty(x)&&A.push([x,w[x]]);A.sort(function(R,O){var B=R[1],K=O[1];return B<K?-1:B>K?1:O[0].localeCompare(R[0])}).reverse();var T=[],D="lowercase";v.toUpperCase()===v?D="uppercase":v.substr(0,1).toUpperCase()+v.substr(1).toLowerCase()===v&&(D="capitalized");var k=l;for(x=0;x<Math.min(k,A.length);x++)D==="uppercase"?A[x][0]=A[x][0].toUpperCase():D==="capitalized"&&(A[x][0]=A[x][0].substr(0,1).toUpperCase()+A[x][0].substr(1)),p.hasFlag(A[x][0],"NOSUGGEST")||T.indexOf(A[x][0])!=-1?k++:T.push(A[x][0]);return T}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=o)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(n,r,i){var s=n("codemirror");s.commands.tabAndIndentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentMore");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}},s.commands.shiftTabAndUnindentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentLess");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}}},{codemirror:10}],18:[function(n,r,i){var s=n("codemirror");n("codemirror/addon/edit/continuelist.js"),n("./codemirror/tablist"),n("codemirror/addon/display/fullscreen.js"),n("codemirror/mode/markdown/markdown.js"),n("codemirror/addon/mode/overlay.js"),n("codemirror/addon/display/placeholder.js"),n("codemirror/addon/display/autorefresh.js"),n("codemirror/addon/selection/mark-selection.js"),n("codemirror/addon/search/searchcursor.js"),n("codemirror/mode/gfm/gfm.js"),n("codemirror/mode/xml/xml.js");var o=n("codemirror-spell-checker"),a=n("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),f={toggleBold:_,toggleItalic:A,drawLink:te,toggleHeadingSmaller:R,toggleHeadingBigger:O,drawImage:le,toggleBlockquote:k,toggleOrderedList:Y,toggleUnorderedList:q,toggleCodeBlock:D,togglePreview:Ie,toggleStrikethrough:T,toggleHeading1:B,toggleHeading2:K,toggleHeading3:L,toggleHeading4:$,toggleHeading5:I,toggleHeading6:U,cleanBlock:X,drawTable:de,drawHorizontalRule:ze,undo:He,redo:je,toggleSideBySide:we,toggleFullScreen:w},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var P,Q=!1;return P=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(P)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(P.substr(0,4)))&&(Q=!0),Q};function h(P){return P=l?P.replace("Ctrl","Cmd"):P.replace("Cmd","Ctrl")}function p(P,Q,ie,ae){var ke=g(P,!1,Q,ie,"button",ae);ke.classList.add("easymde-dropdown"),ke.onclick=function(){ke.focus()};var Ce=document.createElement("div");Ce.className="easymde-dropdown-content";for(var Ee=0;Ee<P.children.length;Ee++){var De,Oe=P.children[Ee];(De=g(typeof Oe=="string"&&Oe in oe?oe[Oe]:Oe,!0,Q,ie,"button",ae)).addEventListener("click",function(We){We.stopPropagation()},!1),Ce.appendChild(De)}return ke.appendChild(Ce),ke}function g(P,Q,ie,ae,ke,Ce){P=P||{};var Ee=document.createElement(ke);if(P.attributes)for(var De in P.attributes)Object.prototype.hasOwnProperty.call(P.attributes,De)&&Ee.setAttribute(De,P.attributes[De]);var Oe=Ce.options.toolbarButtonClassPrefix?Ce.options.toolbarButtonClassPrefix+"-":"";Ee.className=Oe+P.name,Ee.setAttribute("type",ke),ie=ie==null||ie,P.text&&(Ee.innerText=P.text),P.name&&P.name in ae&&(f[P.name]=P.action),P.title&&ie&&(Ee.title=function(rn,on,vn){var Er,Ji=rn;return on&&vn[Er=function(ds){for(var Gi in f)if(f[Gi]===ds)return Gi;return null}(on)]&&(Ji+=" ("+h(vn[Er])+")"),Ji}(P.title,P.action,ae),l&&(Ee.title=Ee.title.replace("Ctrl",""),Ee.title=Ee.title.replace("Alt",""))),P.title&&Ee.setAttribute("aria-label",P.title),P.noDisable&&Ee.classList.add("no-disable"),P.noMobile&&Ee.classList.add("no-mobile");var We=[];P.className!==void 0&&(We=P.className.split(" "));for(var tt=[],bt=0;bt<We.length;bt++){var Pt=We[bt];Pt.match(/^fa([srlb]|(-[\w-]*)|$)/)?tt.push(Pt):Ee.classList.add(Pt)}if(Ee.tabIndex=-1,tt.length>0){for(var _t=document.createElement("i"),Kt=0;Kt<tt.length;Kt++){var sn=tt[Kt];_t.classList.add(sn)}Ee.appendChild(_t)}return P.icon!==void 0&&(Ee.innerHTML=P.icon),P.action&&Q&&(typeof P.action=="function"?Ee.onclick=function(rn){rn.preventDefault(),P.action(Ce)}:typeof P.action=="string"&&(Ee.onclick=function(rn){rn.preventDefault(),window.open(P.action,"_blank")})),Ee}function v(){var P=document.createElement("i");return P.className="separator",P.innerHTML="|",P}function x(P,Q){Q=Q||P.getCursor("start");var ie=P.getTokenAt(Q);if(!ie.type)return{};for(var ae,ke,Ce=ie.type.split(" "),Ee={},De=0;De<Ce.length;De++)(ae=Ce[De])==="strong"?Ee.bold=!0:ae==="variable-2"?(ke=P.getLine(Q.line),/^\s*\d+\.\s/.test(ke)?Ee["ordered-list"]=!0:Ee["unordered-list"]=!0):ae==="atom"?Ee.quote=!0:ae==="em"?Ee.italic=!0:ae==="quote"?Ee.quote=!0:ae==="strikethrough"?Ee.strikethrough=!0:ae==="comment"?Ee.code=!0:ae!=="link"||Ee.image?ae==="image"?Ee.image=!0:ae.match(/^header(-[1-6])?$/)&&(Ee[ae.replace("header","heading")]=!0):Ee.link=!0;return Ee}var y="";function w(P){var Q=P.codemirror;Q.setOption("fullScreen",!Q.getOption("fullScreen")),Q.getOption("fullScreen")?(y=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=y;var ie=Q.getWrapperElement(),ae=ie.nextSibling;if(ae.classList.contains("editor-preview-active-side"))if(P.options.sideBySideFullscreen===!1){var ke=ie.parentNode;Q.getOption("fullScreen")?ke.classList.remove("sided--no-fullscreen"):ke.classList.add("sided--no-fullscreen")}else we(P);P.options.onToggleFullScreen&&P.options.onToggleFullScreen(Q.getOption("fullScreen")||!1),P.options.maxHeight!==void 0&&(Q.getOption("fullScreen")?(Q.getScrollerElement().style.removeProperty("height"),ae.style.removeProperty("height")):(Q.getScrollerElement().style.height=P.options.maxHeight,P.setPreviewMaxHeight())),P.toolbar_div.classList.toggle("fullscreen"),P.toolbarElements&&P.toolbarElements.fullscreen&&P.toolbarElements.fullscreen.classList.toggle("active")}function _(P){nn(P,"bold",P.options.blockStyles.bold)}function A(P){nn(P,"italic",P.options.blockStyles.italic)}function T(P){nn(P,"strikethrough","~~")}function D(P){var Q=P.options.blockStyles.code;function ie(yn){if(typeof yn!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof yn+": "+yn;return yn.styles&&yn.styles[2]&&yn.styles[2].indexOf("formatting-code-block")!==-1}function ae(yn){return yn.state.base.base||yn.state.base}function ke(yn,Kr,ir,Ni,tr){ir=ir||yn.getLineHandle(Kr),Ni=Ni||yn.getTokenAt({line:Kr,ch:1}),tr=tr||!!ir.text&&yn.getTokenAt({line:Kr,ch:ir.text.length-1});var $r=Ni.type?Ni.type.split(" "):[];return tr&&ae(tr).indentedCode?"indented":$r.indexOf("comment")!==-1&&(ae(Ni).fencedChars||ae(tr).fencedChars||ie(ir)?"fenced":"single")}var Ce,Ee,De,Oe=P.codemirror,We=Oe.getCursor("start"),tt=Oe.getCursor("end"),bt=Oe.getTokenAt({line:We.line,ch:We.ch||1}),Pt=Oe.getLineHandle(We.line),_t=ke(Oe,We.line,Pt,bt);if(_t==="single"){var Kt=Pt.text.slice(0,We.ch).replace("`",""),sn=Pt.text.slice(We.ch).replace("`","");Oe.replaceRange(Kt+sn,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),We.ch--,We!==tt&&tt.ch--,Oe.setSelection(We,tt),Oe.focus()}else if(_t==="fenced")if(We.line!==tt.line||We.ch!==tt.ch){for(Ce=We.line;Ce>=0&&!ie(Pt=Oe.getLineHandle(Ce));Ce--);var rn,on,vn,Er,Ji=ae(Oe.getTokenAt({line:Ce,ch:1})).fencedChars;ie(Oe.getLineHandle(We.line))?(rn="",on=We.line):ie(Oe.getLineHandle(We.line-1))?(rn="",on=We.line-1):(rn=Ji+`
`,on=We.line),ie(Oe.getLineHandle(tt.line))?(vn="",Er=tt.line,tt.ch===0&&(Er+=1)):tt.ch!==0&&ie(Oe.getLineHandle(tt.line+1))?(vn="",Er=tt.line+1):(vn=Ji+`
`,Er=tt.line+1),tt.ch===0&&(Er-=1),Oe.operation(function(){Oe.replaceRange(vn,{line:Er,ch:0},{line:Er+(vn?0:1),ch:0}),Oe.replaceRange(rn,{line:on,ch:0},{line:on+(rn?0:1),ch:0})}),Oe.setSelection({line:on+(rn?1:0),ch:0},{line:Er+(rn?1:-1),ch:0}),Oe.focus()}else{var ds=We.line;if(ie(Oe.getLineHandle(We.line))&&(ke(Oe,We.line+1)==="fenced"?(Ce=We.line,ds=We.line+1):(Ee=We.line,ds=We.line-1)),Ce===void 0)for(Ce=ds;Ce>=0&&!ie(Pt=Oe.getLineHandle(Ce));Ce--);if(Ee===void 0)for(De=Oe.lineCount(),Ee=ds;Ee<De&&!ie(Pt=Oe.getLineHandle(Ee));Ee++);Oe.operation(function(){Oe.replaceRange("",{line:Ce,ch:0},{line:Ce+1,ch:0}),Oe.replaceRange("",{line:Ee-1,ch:0},{line:Ee,ch:0})}),Oe.focus()}else if(_t==="indented"){if(We.line!==tt.line||We.ch!==tt.ch)Ce=We.line,Ee=tt.line,tt.ch===0&&Ee--;else{for(Ce=We.line;Ce>=0;Ce--)if(!(Pt=Oe.getLineHandle(Ce)).text.match(/^\s*$/)&&ke(Oe,Ce,Pt)!=="indented"){Ce+=1;break}for(De=Oe.lineCount(),Ee=We.line;Ee<De;Ee++)if(!(Pt=Oe.getLineHandle(Ee)).text.match(/^\s*$/)&&ke(Oe,Ee,Pt)!=="indented"){Ee-=1;break}}var Gi=Oe.getLineHandle(Ee+1),No=Gi&&Oe.getTokenAt({line:Ee+1,ch:Gi.text.length-1});No&&ae(No).indentedCode&&Oe.replaceRange(`
`,{line:Ee+1,ch:0});for(var qn=Ce;qn<=Ee;qn++)Oe.indentLine(qn,"subtract");Oe.focus()}else{var Mr=We.line===tt.line&&We.ch===tt.ch&&We.ch===0,Lr=We.line!==tt.line;Mr||Lr?function(yn,Kr,ir,Ni){var tr=Kr.line+1,$r=ir.line+1,to=Kr.line!==ir.line,ge=Ni+`
`,Le=`
`+Ni;to&&$r++,to&&ir.ch===0&&(Le=Ni+`
`,$r--),qe(yn,!1,[ge,Le]),yn.setSelection({line:tr,ch:0},{line:$r,ch:0})}(Oe,We,tt,Q):qe(Oe,!1,["`","`"])}}function k(P){At(P.codemirror,"quote")}function R(P){Pe(P.codemirror,"smaller")}function O(P){Pe(P.codemirror,"bigger")}function B(P){Pe(P.codemirror,void 0,1)}function K(P){Pe(P.codemirror,void 0,2)}function L(P){Pe(P.codemirror,void 0,3)}function $(P){Pe(P.codemirror,void 0,4)}function I(P){Pe(P.codemirror,void 0,5)}function U(P){Pe(P.codemirror,void 0,6)}function q(P){var Q=P.codemirror,ie="*";["-","+","*"].includes(P.options.unorderedListStyle)&&(ie=P.options.unorderedListStyle),At(Q,"unordered-list",ie)}function Y(P){At(P.codemirror,"ordered-list")}function X(P){(function(Q){if(!Q.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var ie,ae=Q.getCursor("start"),ke=Q.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)ie=(ie=Q.getLine(Ce)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),Q.replaceRange(ie,{line:Ce,ch:0},{line:Ce,ch:99999999999999})})(P.codemirror)}function te(P){var Q=P.options,ie="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.link,ie);if(!ae)return!1;ie=ee(ae)}dt(P,"link",Q.insertTexts.link,ie)}function le(P){var Q=P.options,ie="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.image,ie);if(!ae)return!1;ie=ee(ae)}dt(P,"image",Q.insertTexts.image,ie)}function ee(P){return encodeURI(P).replace(/([\\()])/g,"\\$1")}function z(P){P.openBrowseFileWindow()}function he(P,Q){var ie=P.codemirror,ae=x(ie),ke=P.options,Ce=Q.substr(Q.lastIndexOf("/")+1),Ee=Ce.substring(Ce.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Ee))qe(ie,ae.image,ke.insertTexts.uploadedImage,Q);else{var De=ke.insertTexts.link;De[0]="["+Ce,qe(ie,ae.link,De,Q)}P.updateStatusBar("upload-image",P.options.imageTexts.sbOnUploaded.replace("#image_name#",Ce)),setTimeout(function(){P.updateStatusBar("upload-image",P.options.imageTexts.sbInit)},1e3)}function de(P){var Q=P.codemirror,ie=x(Q),ae=P.options;qe(Q,ie.table,ae.insertTexts.table)}function ze(P){var Q=P.codemirror,ie=x(Q),ae=P.options;qe(Q,ie.image,ae.insertTexts.horizontalRule)}function He(P){var Q=P.codemirror;Q.undo(),Q.focus()}function je(P){var Q=P.codemirror;Q.redo(),Q.focus()}function we(P){var Q=P.codemirror,ie=Q.getWrapperElement(),ae=ie.nextSibling,ke=P.toolbarElements&&P.toolbarElements["side-by-side"],Ce=!1,Ee=ie.parentNode;ae.classList.contains("editor-preview-active-side")?(P.options.sideBySideFullscreen===!1&&Ee.classList.remove("sided--no-fullscreen"),ae.classList.remove("editor-preview-active-side"),ke&&ke.classList.remove("active"),ie.classList.remove("CodeMirror-sided")):(setTimeout(function(){Q.getOption("fullScreen")||(P.options.sideBySideFullscreen===!1?Ee.classList.add("sided--no-fullscreen"):w(P)),ae.classList.add("editor-preview-active-side")},1),ke&&ke.classList.add("active"),ie.classList.add("CodeMirror-sided"),Ce=!0);var De=ie.lastChild;if(De.classList.contains("editor-preview-active")){De.classList.remove("editor-preview-active");var Oe=P.toolbarElements.preview,We=P.toolbar_div;Oe.classList.remove("active"),We.classList.remove("disabled-for-preview")}if(Q.sideBySideRenderingFunction||(Q.sideBySideRenderingFunction=function(){var bt=P.options.previewRender(P.value(),ae);bt!=null&&(ae.innerHTML=bt)}),Ce){var tt=P.options.previewRender(P.value(),ae);tt!=null&&(ae.innerHTML=tt),Q.on("update",Q.sideBySideRenderingFunction)}else Q.off("update",Q.sideBySideRenderingFunction);Q.refresh()}function Ie(P){var Q=P.codemirror,ie=Q.getWrapperElement(),ae=P.toolbar_div,ke=!!P.options.toolbar&&P.toolbarElements.preview,Ce=ie.lastChild;if(Q.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&we(P),!Ce||!Ce.classList.contains("editor-preview-full")){if((Ce=document.createElement("div")).className="editor-preview-full",P.options.previewClass)if(Array.isArray(P.options.previewClass))for(var Ee=0;Ee<P.options.previewClass.length;Ee++)Ce.classList.add(P.options.previewClass[Ee]);else typeof P.options.previewClass=="string"&&Ce.classList.add(P.options.previewClass);ie.appendChild(Ce)}Ce.classList.contains("editor-preview-active")?(Ce.classList.remove("editor-preview-active"),ke&&(ke.classList.remove("active"),ae.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ce.classList.add("editor-preview-active")},1),ke&&(ke.classList.add("active"),ae.classList.add("disabled-for-preview")));var De=P.options.previewRender(P.value(),Ce);De!==null&&(Ce.innerHTML=De)}function qe(P,Q,ie,ae){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var ke,Ce=ie[0],Ee=ie[1],De={},Oe={};Object.assign(De,P.getCursor("start")),Object.assign(Oe,P.getCursor("end")),ae&&(Ce=Ce.replace("#url#",ae),Ee=Ee.replace("#url#",ae)),Q?(Ce=(ke=P.getLine(De.line)).slice(0,De.ch),Ee=ke.slice(De.ch),P.replaceRange(Ce+Ee,{line:De.line,ch:0})):(ke=P.getSelection(),P.replaceSelection(Ce+ke+Ee),De.ch+=Ce.length,De!==Oe&&(Oe.ch+=Ce.length)),P.setSelection(De,Oe),P.focus()}}function Pe(P,Q,ie){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=P.getCursor("start"),ke=P.getCursor("end"),Ce=ae.line;Ce<=ke.line;Ce++)(function(Ee){var De=P.getLine(Ee),Oe=De.search(/[^#]/);De=Q!==void 0?Oe<=0?Q=="bigger"?"###### "+De:"# "+De:Oe==6&&Q=="smaller"?De.substr(7):Oe==1&&Q=="bigger"?De.substr(2):Q=="bigger"?De.substr(1):"#"+De:Oe<=0?"#".repeat(ie)+" "+De:Oe==ie?De.substr(Oe+1):"#".repeat(ie)+" "+De.substr(Oe+1),P.replaceRange(De,{line:Ee,ch:0},{line:Ee,ch:99999999999999})})(Ce);P.focus()}}function At(P,Q,ie){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,ke=/^\s*/,Ce=x(P),Ee=P.getCursor("start"),De=P.getCursor("end"),Oe={quote:/^(\s*)>\s+/,"unordered-list":ae,"ordered-list":ae},We=function(Pt,_t,Kt){var sn=ae.exec(_t),rn=function(on,vn){return{quote:">","unordered-list":ie,"ordered-list":"%%i."}[on].replace("%%i",vn)}(Pt,tt);return sn!==null?(function(on,vn){var Er=new RegExp({quote:">","unordered-list":"\\"+ie,"ordered-list":"\\d+."}[on]);return vn&&Er.test(vn)}(Pt,sn[2])&&(rn=""),_t=sn[1]+rn+sn[3]+_t.replace(ke,"").replace(Oe[Pt],"$1")):Kt==0&&(_t=rn+" "+_t),_t},tt=1,bt=Ee.line;bt<=De.line;bt++)(function(Pt){var _t=P.getLine(Pt);Ce[Q]?_t=_t.replace(Oe[Q],"$1"):(Q=="unordered-list"&&(_t=We("ordered-list",_t,!0)),_t=We(Q,_t,!1),tt+=1),P.replaceRange(_t,{line:Pt,ch:0},{line:Pt,ch:99999999999999})})(bt);P.focus()}}function dt(P,Q,ie,ae){if(P.codemirror&&!P.isPreviewActive()){var ke=P.codemirror,Ce=x(ke)[Q];if(Ce){var Ee=ke.getCursor("start"),De=ke.getCursor("end"),Oe=ke.getLine(Ee.line),We=Oe.slice(0,Ee.ch),tt=Oe.slice(Ee.ch);Q=="link"?We=We.replace(/(.*)[^!]\[/,"$1"):Q=="image"&&(We=We.replace(/(.*)!\[$/,"$1")),tt=tt.replace(/]\(.*?\)/,""),ke.replaceRange(We+tt,{line:Ee.line,ch:0},{line:Ee.line,ch:99999999999999}),Ee.ch-=ie[0].length,Ee!==De&&(De.ch-=ie[0].length),ke.setSelection(Ee,De),ke.focus()}else qe(ke,Ce,ie,ae)}}function nn(P,Q,ie,ae){if(P.codemirror&&!P.isPreviewActive()){ae=ae===void 0?ie:ae;var ke,Ce=P.codemirror,Ee=x(Ce),De=ie,Oe=ae,We=Ce.getCursor("start"),tt=Ce.getCursor("end");Ee[Q]?(De=(ke=Ce.getLine(We.line)).slice(0,We.ch),Oe=ke.slice(We.ch),Q=="bold"?(De=De.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Oe=Oe.replace(/(\*\*|__)/,"")):Q=="italic"?(De=De.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Oe=Oe.replace(/(\*|_)/,"")):Q=="strikethrough"&&(De=De.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Oe=Oe.replace(/(\*\*|~~)/,"")),Ce.replaceRange(De+Oe,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),Q=="bold"||Q=="strikethrough"?(We.ch-=2,We!==tt&&(tt.ch-=2)):Q=="italic"&&(We.ch-=1,We!==tt&&(tt.ch-=1))):(ke=Ce.getSelection(),Q=="bold"?ke=(ke=ke.split("**").join("")).split("__").join(""):Q=="italic"?ke=(ke=ke.split("*").join("")).split("_").join(""):Q=="strikethrough"&&(ke=ke.split("~~").join("")),Ce.replaceSelection(De+ke+Oe),We.ch+=ie.length,tt.ch=We.ch+ke.length),Ce.setSelection(We,tt),Ce.focus()}}function Wt(P,Q){if(Math.abs(P)<1024)return""+P+Q[0];var ie=0;do P/=1024,++ie;while(Math.abs(P)>=1024&&ie<Q.length);return""+P.toFixed(1)+Q[ie]}function Mn(P,Q){for(var ie in Q)Object.prototype.hasOwnProperty.call(Q,ie)&&(Q[ie]instanceof Array?P[ie]=Q[ie].concat(P[ie]instanceof Array?P[ie]:[]):Q[ie]!==null&&typeof Q[ie]=="object"&&Q[ie].constructor===Object?P[ie]=Mn(P[ie]||{},Q[ie]):P[ie]=Q[ie]);return P}function Ze(P){for(var Q=1;Q<arguments.length;Q++)P=Mn(P,arguments[Q]);return P}function pe(P){var Q=P.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),ie=0;if(Q===null)return ie;for(var ae=0;ae<Q.length;ae++)Q[ae].charCodeAt(0)>=19968?ie+=Q[ae].length:ie+=1;return ie}var se={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},oe={bold:{name:"bold",action:_,className:se.bold,title:"Bold",default:!0},italic:{name:"italic",action:A,className:se.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:T,className:se.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:R,className:se.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:R,className:se["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:O,className:se["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:B,className:se["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:K,className:se["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:L,className:se["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:D,className:se.code,title:"Code"},quote:{name:"quote",action:k,className:se.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:q,className:se["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:Y,className:se["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:X,className:se["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:te,className:se.link,title:"Create Link",default:!0},image:{name:"image",action:le,className:se.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:se["upload-image"],title:"Import an image"},table:{name:"table",action:de,className:se.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:ze,className:se["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:Ie,className:se.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:we,className:se["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:w,className:se.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:se.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:He,className:se.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:je,className:se.redo,noDisable:!0,title:"Redo"}},be={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},F={link:"URL for the link:",image:"URL of the image:"},H={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},J={bold:"**",code:"```",italic:"*"},re={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},ye={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function xe(P){(P=P||{}).parent=this;var Q=!0;if(P.autoDownloadFontAwesome===!1&&(Q=!1),P.autoDownloadFontAwesome!==!0)for(var ie=document.styleSheets,ae=0;ae<ie.length;ae++)ie[ae].href&&ie[ae].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(Q=!1);if(Q){var ke=document.createElement("link");ke.rel="stylesheet",ke.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(ke)}if(P.element)this.element=P.element;else if(P.element===null)return void console.log("EasyMDE: Error. No element was found.");if(P.toolbar===void 0)for(var Ce in P.toolbar=[],oe)Object.prototype.hasOwnProperty.call(oe,Ce)&&(Ce.indexOf("separator-")!=-1&&P.toolbar.push("|"),(oe[Ce].default===!0||P.showIcons&&P.showIcons.constructor===Array&&P.showIcons.indexOf(Ce)!=-1)&&P.toolbar.push(Ce));if(Object.prototype.hasOwnProperty.call(P,"previewClass")||(P.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(P,"status")||(P.status=["autosave","lines","words","cursor"],P.uploadImage&&P.status.unshift("upload-image")),P.previewRender||(P.previewRender=function(De){return this.parent.markdown(De)}),P.parsingConfig=Ze({highlightFormatting:!0},P.parsingConfig||{}),P.insertTexts=Ze({},be,P.insertTexts||{}),P.promptTexts=Ze({},F,P.promptTexts||{}),P.blockStyles=Ze({},J,P.blockStyles||{}),P.autosave!=null&&(P.autosave.timeFormat=Ze({},H,P.autosave.timeFormat||{})),P.iconClassMap=Ze({},se,P.iconClassMap||{}),P.shortcuts=Ze({},c,P.shortcuts||{}),P.maxHeight=P.maxHeight||void 0,P.direction=P.direction||"ltr",P.maxHeight!==void 0?P.minHeight=P.maxHeight:P.minHeight=P.minHeight||"300px",P.errorCallback=P.errorCallback||function(De){alert(De)},P.uploadImage=P.uploadImage||!1,P.imageMaxSize=P.imageMaxSize||2097152,P.imageAccept=P.imageAccept||"image/png, image/jpeg, image/gif, image/avif",P.imageTexts=Ze({},re,P.imageTexts||{}),P.errorMessages=Ze({},ye,P.errorMessages||{}),P.imagePathAbsolute=P.imagePathAbsolute||!1,P.imageCSRFName=P.imageCSRFName||"csrfmiddlewaretoken",P.imageCSRFHeader=P.imageCSRFHeader||!1,P.autosave!=null&&P.autosave.unique_id!=null&&P.autosave.unique_id!=""&&(P.autosave.uniqueId=P.autosave.unique_id),P.overlayMode&&P.overlayMode.combine===void 0&&(P.overlayMode.combine=!0),this.options=P,this.render(),!P.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(P.initialValue),P.uploadImage){var Ee=this;this.codemirror.on("dragenter",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragend",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragleave",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragover",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("drop",function(De,Oe){Oe.stopPropagation(),Oe.preventDefault(),P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.dataTransfer.files):Ee.uploadImages(Oe.dataTransfer.files)}),this.codemirror.on("paste",function(De,Oe){P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.clipboardData.files):Ee.uploadImages(Oe.clipboardData.files)})}}function Re(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}xe.prototype.uploadImages=function(P,Q,ie){if(P.length!==0){for(var ae=[],ke=0;ke<P.length;ke++)ae.push(P[ke].name),this.uploadImage(P[ke],Q,ie);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ae.join(", ")))}},xe.prototype.uploadImagesUsingCustomFunction=function(P,Q){if(Q.length!==0){for(var ie=[],ae=0;ae<Q.length;ae++)ie.push(Q[ae].name),this.uploadImageUsingCustomFunction(P,Q[ae]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ie.join(", ")))}},xe.prototype.updateStatusBar=function(P,Q){if(this.gui.statusbar){var ie=this.gui.statusbar.getElementsByClassName(P);ie.length===1?this.gui.statusbar.getElementsByClassName(P)[0].textContent=Q:ie.length===0?console.log("EasyMDE: status bar item "+P+" was not found."):console.log("EasyMDE: Several status bar items named "+P+" was found.")}},xe.prototype.markdown=function(P){if(a){var Q;if(Q=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?Q.breaks=!1:Q.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var ie=this.options.renderingConfig.hljs||window.hljs;ie&&(Q.highlight=function(ke,Ce){return Ce&&ie.getLanguage(Ce)?ie.highlight(Ce,ke).value:ie.highlightAuto(ke).value})}a.setOptions(Q);var ae=a.parse(P);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(ae=this.options.renderingConfig.sanitizerFunction.call(this,ae)),ae=function(ke){for(var Ce=new DOMParser().parseFromString(ke,"text/html"),Ee=Ce.getElementsByTagName("li"),De=0;De<Ee.length;De++)for(var Oe=Ee[De],We=0;We<Oe.children.length;We++){var tt=Oe.children[We];tt instanceof HTMLInputElement&&tt.type==="checkbox"&&(Oe.style.marginLeft="-1.5em",Oe.style.listStyleType="none")}return Ce.documentElement.innerHTML}(ae=function(ke){for(var Ce;(Ce=u.exec(ke))!==null;){var Ee=Ce[0];if(Ee.indexOf("target=")===-1){var De=Ee.replace(/>$/,' target="_blank">');ke=ke.replace(Ee,De)}}return ke}(ae))}},xe.prototype.render=function(P){if(P||(P=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==P){this.element=P;var Q,ie,ae=this.options,ke=this,Ce={};for(var Ee in ae.shortcuts)ae.shortcuts[Ee]!==null&&f[Ee]!==null&&function(_t){Ce[h(ae.shortcuts[_t])]=function(){var Kt=f[_t];typeof Kt=="function"?Kt(ke):typeof Kt=="string"&&window.open(Kt,"_blank")}}(Ee);if(Ce.Enter="newlineAndIndentContinueMarkdownList",Ce.Tab="tabAndIndentMarkdownList",Ce["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ce.Esc=function(_t){_t.getOption("fullScreen")&&w(ke)},this.documentOnKeyDown=function(_t){(_t=_t||window.event).keyCode==27&&ke.codemirror.getOption("fullScreen")&&w(ke)},document.addEventListener("keydown",this.documentOnKeyDown,!1),ae.overlayMode?(s.defineMode("overlay-mode",function(_t){return s.overlayMode(s.getMode(_t,ae.spellChecker!==!1?"spell-checker":"gfm"),ae.overlayMode.mode,ae.overlayMode.combine)}),Q="overlay-mode",(ie=ae.parsingConfig).gitHubSpice=!1):((Q=ae.parsingConfig).name="gfm",Q.gitHubSpice=!1),ae.spellChecker!==!1&&(Q="spell-checker",(ie=ae.parsingConfig).name="gfm",ie.gitHubSpice=!1,typeof ae.spellChecker=="function"?ae.spellChecker({codeMirrorInstance:s}):o({codeMirrorInstance:s})),this.codemirror=s.fromTextArea(P,{mode:Q,backdrop:ie,theme:ae.theme!=null?ae.theme:"easymde",tabSize:ae.tabSize!=null?ae.tabSize:2,indentUnit:ae.tabSize!=null?ae.tabSize:2,indentWithTabs:ae.indentWithTabs!==!1,lineNumbers:ae.lineNumbers===!0,autofocus:ae.autofocus===!0,extraKeys:Ce,direction:ae.direction,lineWrapping:ae.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:ae.placeholder||P.getAttribute("placeholder")||"",styleSelectedText:ae.styleSelectedText!=null?ae.styleSelectedText:!d(),scrollbarStyle:ae.scrollbarStyle!=null?ae.scrollbarStyle:"native",configureMouse:function(_t,Kt,sn){return{addNew:!1}},inputStyle:ae.inputStyle!=null?ae.inputStyle:d()?"contenteditable":"textarea",spellcheck:ae.nativeSpellcheck==null||ae.nativeSpellcheck,autoRefresh:ae.autoRefresh!=null&&ae.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=ae.minHeight,ae.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=ae.maxHeight),ae.forceSync===!0){var De=this.codemirror;De.on("change",function(){De.save()})}this.gui={};var Oe=document.createElement("div");Oe.classList.add("EasyMDEContainer"),Oe.setAttribute("role","application");var We=this.codemirror.getWrapperElement();We.parentNode.insertBefore(Oe,We),Oe.appendChild(We),ae.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),ae.status!==!1&&(this.gui.statusbar=this.createStatusbar()),ae.autosave!=null&&ae.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(ke._autosave_timeout),ke._autosave_timeout=setTimeout(function(){ke.autosave()},ke.options.autosave.submit_delay||ke.options.autosave.delay||1e3)}));var tt=this;this.codemirror.on("update",function(){ae.previewImagesInEditor&&Oe.querySelectorAll(".cm-image-marker").forEach(function(_t){var Kt=_t.parentElement;if(Kt.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Kt.hasAttribute("data-img-src")){var sn=Kt.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),sn&&sn.length>=2){var rn=sn[1];if(ae.imagesPreviewHandler){var on=ae.imagesPreviewHandler(sn[1]);typeof on=="string"&&(rn=on)}if(window.EMDEimagesCache[rn])Pt(Kt,window.EMDEimagesCache[rn]);else{var vn=document.createElement("img");vn.onload=function(){window.EMDEimagesCache[rn]={naturalWidth:vn.naturalWidth,naturalHeight:vn.naturalHeight,url:rn},Pt(Kt,window.EMDEimagesCache[rn])},vn.src=rn}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(ae.autofocus===!0||P.autofocus)&&this.codemirror.focus();var bt=this.codemirror;setTimeout((function(){bt.refresh()}).bind(bt),0)}function Pt(_t,Kt){var sn,rn;_t.setAttribute("data-img-src",Kt.url),_t.setAttribute("style","--bg-image:url("+Kt.url+");--width:"+Kt.naturalWidth+"px;--height:"+(sn=Kt.naturalWidth,rn=Kt.naturalHeight,sn<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?rn+"px":rn/sn*100+"%")),tt.codemirror.setSize()}},xe.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},xe.prototype.autosave=function(){if(Re()){var P=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(P.element.form!=null&&P.element.form!=null&&P.element.form.addEventListener("submit",function(){clearTimeout(P.autosaveTimeoutId),P.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+P.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var Q=P.value();Q!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,Q):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var ie=document.getElementById("autosaved");if(ie!=null&&ie!=null&&ie!=""){var ae=new Date,ke=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(ae),Ce=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;ie.innerHTML=Ce+ke}}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.clearAutosavedValue=function(){if(Re()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.openBrowseFileWindow=function(P,Q){var ie=this,ae=this.gui.toolbar.getElementsByClassName("imageInput")[0];ae.click(),ae.addEventListener("change",function ke(Ce){ie.options.imageUploadFunction?ie.uploadImagesUsingCustomFunction(ie.options.imageUploadFunction,Ce.target.files):ie.uploadImages(Ce.target.files,P,Q),ae.removeEventListener("change",ke)})},xe.prototype.uploadImage=function(P,Q,ie){var ae=this;function ke(Oe){ae.updateStatusBar("upload-image",Oe),setTimeout(function(){ae.updateStatusBar("upload-image",ae.options.imageTexts.sbInit)},1e4),ie&&typeof ie=="function"&&ie(Oe),ae.options.errorCallback(Oe)}function Ce(Oe){var We=ae.options.imageTexts.sizeUnits.split(",");return Oe.replace("#image_name#",P.name).replace("#image_size#",Wt(P.size,We)).replace("#image_max_size#",Wt(ae.options.imageMaxSize,We))}if(Q=Q||function(Oe){he(ae,Oe)},P.size>this.options.imageMaxSize)ke(Ce(this.options.errorMessages.fileTooLarge));else{var Ee=new FormData;Ee.append("image",P),ae.options.imageCSRFToken&&!ae.options.imageCSRFHeader&&Ee.append(ae.options.imageCSRFName,ae.options.imageCSRFToken);var De=new XMLHttpRequest;De.upload.onprogress=function(Oe){if(Oe.lengthComputable){var We=""+Math.round(100*Oe.loaded/Oe.total);ae.updateStatusBar("upload-image",ae.options.imageTexts.sbProgress.replace("#file_name#",P.name).replace("#progress#",We))}},De.open("POST",this.options.imageUploadEndpoint),ae.options.imageCSRFToken&&ae.options.imageCSRFHeader&&De.setRequestHeader(ae.options.imageCSRFName,ae.options.imageCSRFToken),De.onload=function(){try{var Oe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void ke(Ce(ae.options.errorMessages.importError))}this.status===200&&Oe&&!Oe.error&&Oe.data&&Oe.data.filePath?Q((ae.options.imagePathAbsolute?"":window.location.origin+"/")+Oe.data.filePath):Oe.error&&Oe.error in ae.options.errorMessages?ke(Ce(ae.options.errorMessages[Oe.error])):Oe.error?ke(Ce(Oe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),ke(Ce(ae.options.errorMessages.importError)))},De.onerror=function(Oe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Oe.target.status+" ("+Oe.target.statusText+")"),ke(ae.options.errorMessages.importError)},De.send(Ee)}},xe.prototype.uploadImageUsingCustomFunction=function(P,Q){var ie=this;P.apply(this,[Q,function(ae){he(ie,ae)},function(ae){var ke=function(Ce){var Ee=ie.options.imageTexts.sizeUnits.split(",");return Ce.replace("#image_name#",Q.name).replace("#image_size#",Wt(Q.size,Ee)).replace("#image_max_size#",Wt(ie.options.imageMaxSize,Ee))}(ae);ie.updateStatusBar("upload-image",ke),setTimeout(function(){ie.updateStatusBar("upload-image",ie.options.imageTexts.sbInit)},1e4),ie.options.errorCallback(ke)}])},xe.prototype.setPreviewMaxHeight=function(){var P=this.codemirror.getWrapperElement(),Q=P.nextSibling,ie=parseInt(window.getComputedStyle(P).paddingTop),ae=parseInt(window.getComputedStyle(P).borderTopWidth),ke=(parseInt(this.options.maxHeight)+2*ie+2*ae).toString()+"px";Q.style.height=ke},xe.prototype.createSideBySide=function(){var P=this.codemirror,Q=P.getWrapperElement(),ie=Q.nextSibling;if(!ie||!ie.classList.contains("editor-preview-side")){if((ie=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var ae=0;ae<this.options.previewClass.length;ae++)ie.classList.add(this.options.previewClass[ae]);else typeof this.options.previewClass=="string"&&ie.classList.add(this.options.previewClass);Q.parentNode.insertBefore(ie,Q.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return ie;var ke=!1,Ce=!1;return P.on("scroll",function(Ee){if(ke)ke=!1;else{Ce=!0;var De=Ee.getScrollInfo().height-Ee.getScrollInfo().clientHeight,Oe=parseFloat(Ee.getScrollInfo().top)/De,We=(ie.scrollHeight-ie.clientHeight)*Oe;ie.scrollTop=We}}),ie.onscroll=function(){if(Ce)Ce=!1;else{ke=!0;var Ee=ie.scrollHeight-ie.clientHeight,De=parseFloat(ie.scrollTop)/Ee,Oe=(P.getScrollInfo().height-P.getScrollInfo().clientHeight)*De;P.scrollTo(0,Oe)}},ie},xe.prototype.createToolbar=function(P){if((P=P||this.options.toolbar)&&P.length!==0){var Q;for(Q=0;Q<P.length;Q++)oe[P[Q]]!=null&&(P[Q]=oe[P[Q]]);var ie=document.createElement("div");ie.className="editor-toolbar",ie.setAttribute("role","toolbar");var ae=this,ke={};for(ae.toolbar=P,Q=0;Q<P.length;Q++)if((P[Q].name!="guide"||ae.options.toolbarGuideIcon!==!1)&&!(ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Q].name)!=-1||(P[Q].name=="fullscreen"||P[Q].name=="side-by-side")&&d())){if(P[Q]==="|"){for(var Ce=!1,Ee=Q+1;Ee<P.length;Ee++)P[Ee]==="|"||ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Ee].name)!=-1||(Ce=!0);if(!Ce)continue}(function(We){var tt;if(tt=We==="|"?v():We.children?p(We,ae.options.toolbarTips,ae.options.shortcuts,ae):g(We,!0,ae.options.toolbarTips,ae.options.shortcuts,"button",ae),ke[We.name||We]=tt,ie.appendChild(tt),We.name==="upload-image"){var bt=document.createElement("input");bt.className="imageInput",bt.type="file",bt.multiple=!0,bt.name="image",bt.accept=ae.options.imageAccept,bt.style.display="none",bt.style.opacity=0,ie.appendChild(bt)}})(P[Q])}ae.toolbar_div=ie,ae.toolbarElements=ke;var De=this.codemirror;De.on("cursorActivity",function(){var We=x(De);for(var tt in ke)(function(bt){var Pt=ke[bt];We[bt]?Pt.classList.add("active"):bt!="fullscreen"&&bt!="side-by-side"&&Pt.classList.remove("active")})(tt)});var Oe=De.getWrapperElement();return Oe.parentNode.insertBefore(ie,Oe),ie}},xe.prototype.createStatusbar=function(P){P=P||this.options.status;var Q=this.options,ie=this.codemirror;if(P&&P.length!==0){var ae,ke,Ce,Ee,De=[];for(ae=0;ae<P.length;ae++)if(ke=void 0,Ce=void 0,Ee=void 0,typeof P[ae]=="object")De.push({className:P[ae].className,defaultValue:P[ae].defaultValue,onUpdate:P[ae].onUpdate,onActivity:P[ae].onActivity});else{var Oe=P[ae];Oe==="words"?(Ee=function(_t){_t.innerHTML=pe(ie.getValue())},ke=function(_t){_t.innerHTML=pe(ie.getValue())}):Oe==="lines"?(Ee=function(_t){_t.innerHTML=ie.lineCount()},ke=function(_t){_t.innerHTML=ie.lineCount()}):Oe==="cursor"?(Ee=function(_t){_t.innerHTML="1:1"},Ce=function(_t){var Kt=ie.getCursor(),sn=Kt.line+1,rn=Kt.ch+1;_t.innerHTML=sn+":"+rn}):Oe==="autosave"?Ee=function(_t){Q.autosave!=null&&Q.autosave.enabled===!0&&_t.setAttribute("id","autosaved")}:Oe==="upload-image"&&(Ee=function(_t){_t.innerHTML=Q.imageTexts.sbInit}),De.push({className:Oe,defaultValue:Ee,onUpdate:ke,onActivity:Ce})}var We=document.createElement("div");for(We.className="editor-statusbar",ae=0;ae<De.length;ae++){var tt=De[ae],bt=document.createElement("span");bt.className=tt.className,typeof tt.defaultValue=="function"&&tt.defaultValue(bt),typeof tt.onUpdate=="function"&&this.codemirror.on("update",function(_t,Kt){return function(){Kt.onUpdate(_t)}}(bt,tt)),typeof tt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(_t,Kt){return function(){Kt.onActivity(_t)}}(bt,tt)),We.appendChild(bt)}var Pt=this.codemirror.getWrapperElement();return Pt.parentNode.insertBefore(We,Pt.nextSibling),We}},xe.prototype.value=function(P){var Q=this.codemirror;if(P===void 0)return Q.getValue();if(Q.getDoc().setValue(P),this.isPreviewActive()){var ie=Q.getWrapperElement().lastChild,ae=this.options.previewRender(P,ie);ae!==null&&(ie.innerHTML=ae)}return this},xe.toggleBold=_,xe.toggleItalic=A,xe.toggleStrikethrough=T,xe.toggleBlockquote=k,xe.toggleHeadingSmaller=R,xe.toggleHeadingBigger=O,xe.toggleHeading1=B,xe.toggleHeading2=K,xe.toggleHeading3=L,xe.toggleHeading4=$,xe.toggleHeading5=I,xe.toggleHeading6=U,xe.toggleCodeBlock=D,xe.toggleUnorderedList=q,xe.toggleOrderedList=Y,xe.cleanBlock=X,xe.drawLink=te,xe.drawImage=le,xe.drawUploadedImage=z,xe.drawTable=de,xe.drawHorizontalRule=ze,xe.undo=He,xe.redo=je,xe.togglePreview=Ie,xe.toggleSideBySide=we,xe.toggleFullScreen=w,xe.prototype.toggleBold=function(){_(this)},xe.prototype.toggleItalic=function(){A(this)},xe.prototype.toggleStrikethrough=function(){T(this)},xe.prototype.toggleBlockquote=function(){k(this)},xe.prototype.toggleHeadingSmaller=function(){R(this)},xe.prototype.toggleHeadingBigger=function(){O(this)},xe.prototype.toggleHeading1=function(){B(this)},xe.prototype.toggleHeading2=function(){K(this)},xe.prototype.toggleHeading3=function(){L(this)},xe.prototype.toggleHeading4=function(){$(this)},xe.prototype.toggleHeading5=function(){I(this)},xe.prototype.toggleHeading6=function(){U(this)},xe.prototype.toggleCodeBlock=function(){D(this)},xe.prototype.toggleUnorderedList=function(){q(this)},xe.prototype.toggleOrderedList=function(){Y(this)},xe.prototype.cleanBlock=function(){X(this)},xe.prototype.drawLink=function(){te(this)},xe.prototype.drawImage=function(){le(this)},xe.prototype.drawUploadedImage=function(){z(this)},xe.prototype.drawTable=function(){de(this)},xe.prototype.drawHorizontalRule=function(){ze(this)},xe.prototype.undo=function(){He(this)},xe.prototype.redo=function(){je(this)},xe.prototype.togglePreview=function(){Ie(this)},xe.prototype.toggleSideBySide=function(){we(this)},xe.prototype.toggleFullScreen=function(){w(this)},xe.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},xe.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},xe.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},xe.prototype.getState=function(){return x(this.codemirror)},xe.prototype.toTextArea=function(){var P=this.codemirror,Q=P.getWrapperElement(),ie=Q.parentNode;ie&&(this.gui.toolbar&&ie.removeChild(this.gui.toolbar),this.gui.statusbar&&ie.removeChild(this.gui.statusbar),this.gui.sideBySide&&ie.removeChild(this.gui.sideBySide)),ie.parentNode.insertBefore(Q,ie),ie.remove(),P.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=xe},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}(sM)),sM.exports}var HTt=qTt();const GTt=sa(HTt);(()=>{var e=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var t="min-label",n="max-label",r="#1E293B",i=()=>{let s=null,o=null,a=null,l,u=!1,f=r,c="",d,h=null,p=null,g=null,v=[],x=()=>{var O;let B=(O=s==null?void 0:s.shadowRoot)==null?void 0:O.querySelector(".range-slider-box");h=document.createElement("div"),h.classList.add("labels-row"),B.prepend(h)},y=O=>{let B=document.createElement("label");return B.className=O,B.setAttribute("for","range-slider"),B},w=()=>{p=y(t),p.textContent=R(a==null?void 0:a.getTextMin(),c),g=y(n),g.textContent=R(a==null?void 0:a.getTextMax(),c),o==null||o.before(p),o==null||o.after(g);let O=a==null?void 0:a.getValues();if(O)for(let B=0;B<O.length;B++){let K=y(`value${B+1}-label generated-label`);K.textContent=R(O[B],c),v.push(K),h==null||h.append(K)}},_=()=>{for(let O of v)!O||O.remove();p==null||p.remove(),g==null||g.remove(),h==null||h.remove(),v=[]},A=O=>{u=O,u?(x(),w()):_()},T=O=>{f=O;for(let B of v)!B||(B.style.color=f??r);p&&(p.style.color=f??r),g&&(g.style.color=f??r)},D=O=>{c=O,l&&l()},k=()=>{!a||!h||h.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},R=(O,B)=>{let K=`${(O??"").toString()}${B}`;return d&&typeof d=="function"?d(O):K};return{get name(){return"Generated Labels"},init:(O,B,K,L)=>{var $,I,U;s=O,a=L,o=($=O.shadowRoot)==null?void 0:$.getElementById("range-slider"),l=B,f=(I=s.getAttribute("generate-labels-text-color"))!=null?I:r,c=(U=s.getAttribute("generate-labels-units"))!=null?U:"",A(e(s.getAttribute("generate-labels"))),k(),T(f)},update:O=>{if(!(!u||!O.values)){k();for(let B=0;B<O.values.length;B++){let K=O.values[B],L=v[B];if(K===void 0&&L){L.remove(),v[B]=void 0;continue}if(K!==void 0&&!L){let $=y(`value${B+1}-label generated-label`);if($.textContent=R(K,c),v[B]=$,O.values.length<=0)h==null||h.append($);else if(B===0)h==null||h.append($);else{let I=v[B-1];I==null||I.after($)}continue}!L||(L.textContent=R(K,c))}p&&(p.textContent=R(O.textMin,c)),g&&(g.textContent=R(O.textMax,c)),T(f)}},onAttrChange:(O,B)=>{O==="generate-labels"&&A(e(B)),O==="generate-labels-text-color"&&T(B),O==="generate-labels-units"&&D(B)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:O=>{A(e(O))}}},{name:"textColor",attributes:{get(){return f??""},set:O=>{T(O)}}},{name:"generateLabelsTextColor",attributes:{get(){return f??""},set:O=>{T(O)}}},{name:"units",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsUnits",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:O=>{d=O,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:_}};window.tcRangeSliderPlugins.push(i)})();function VTt(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}class WTt extends o3e{register(){super.register()}unregister(){super.unregister()}build(){const t=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,s=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(t).find(f=>f.includes("min")),l=Object.keys(t).find(f=>f.includes("max")),u={min:t[a].minimum,max:t[l].maximum,value1:(s==null?void 0:s[a])||t[a].default,value2:(s==null?void 0:s[l])||t[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};VTt(o,u),this.input=o,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",f=>{f.preventDefault(),f.stopPropagation(),this.value={[a]:f.detail.value1,[l]:f.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const oT=e=>["feature","features"].some(t=>(e==null?void 0:e.format)===t),aT=e=>["polygon","polygons"].includes(e==null?void 0:e.format),lT=e=>["point","points"].includes(e==null?void 0:e.format),uT=e=>["bounding-boxes","bounding-box"].includes(e==null?void 0:e.format),cT=e=>["lines","line"].includes(e==null?void 0:e.format),B$=e=>(e==null?void 0:e.type)==="wkt",z$=e=>(e==null?void 0:e.type)==="geojson",Bv=e=>["bounding-boxes","polygons","features","points","lines"].includes(e==null?void 0:e.format),YTt=e=>oT(e)||aT(e)||uT(e)||lT(e)||cT(e);function NEe(e,t){Object.keys(t).forEach(n=>{e.setAttribute(n,t[n])})}const XTt=(e,t)=>{if(!e||!t)return!1;switch(t){case"string":return typeof e=="string";case"number":return!isNaN(e);case"boolean":return typeof e=="boolean";case"array":return Array.isArray(e);case"object":return typeof e=="object"&&!!Object.keys(e).length}return!1};class Fi extends o3e{register(){super.register()}unregister(){super.unregister()}build(){var c,d,h,p;const t=this.options,n=this.schema.description,r=this.theme;t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const i=document.createElement("eox-drawtools");let s;switch(!0){case aT(this.schema):s="Polygon";break;case uT(this.schema):s="Box";break;case lT(this.schema):s="Point";break;case cT(this.schema):s="LineString";break;default:s="Box";break}let o;switch(!0){case B$(this.schema):o="wkt";break;case z$(this.schema):o="geojson";break;default:o="feature";break}const a={type:s,format:o};if((d=(c=this.schema)==null?void 0:c.options)!=null&&d.projection&&(a.projection=this.schema.options.projection),oT(this.schema)&&(a["layer-id"]=this.schema.options.layerId),Bv(this.schema)&&(a["multiple-features"]=!0,a["show-list"]=!0),"for"in(this.schema.options??{}))a.for=this.options.for;else{const g=document.createElement("eox-map");g.projection="EPSG:4326";const v="map-"+this.formname.replace(/[^\w\s]/gi,"");g.layers=[{type:"Tile",source:{type:"OSM"}}],NEe(g,{id:v,style:"width: 100%; height: 300px;"}),this.container.appendChild(g),i.for=g}NEe(i,a),t.autoStartSelection!==!1&&i.updateComplete.then(()=>{i.startDrawing()}),this.input=i,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(p=(h=this.schema)==null?void 0:h.options)==null?void 0:p.featureProperty,f=(g,v)=>g.length?!Bv(this.schema)&&g.length===1?v(g[0]):g.map(v):v(g);this.input.addEventListener("drawupdate",g=>{var v;switch(g.preventDefault(),g.stopPropagation(),!0){case!g.detail:{this.value=null;break}case B$(this.schema):{this.value=g.detail;break}case z$(this.schema):{const x=g.detail;if(Bv(this.schema)){this.value=x;break}this.value=((v=x.features)==null?void 0:v[0])??null;break}case cT(this.schema):{this.value=f(g.detail,x=>x.getGeometry().getCoordinates());break}case oT(this.schema):{if(!g.detail.length){this.value=null;break}const x=y=>u?y.get(u)??y:y;this.value=f(g.detail,x);break}case uT(this.schema):{if(!g.detail.length){this.value=null;break}const x=y=>y.getGeometry().getExtent();this.value=f(g.detail,x);break}case aT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=f(g.detail,x=>x);break}case lT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=f(g.detail,x=>{var y;return(y=x.getGeometry())==null?void 0:y.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function ZTt(e){return function(t,n,r){let i=[];return t.properties&&Object.keys(t.properties).forEach(s=>{const o=t.properties[s];if(!(YTt(o)&&(o.format==="feature"||e.some(u=>u.format===o.format&&u.type===o.type))))return;const l=nDt(s,n[s],r);if(l.length){i.push(...l);return}switch(!0){case B$(o):{i.push(...rDt(s,n[s],r));break}case z$(o):{i.push(...iDt(s,n[s],r,o));break}case oT(o):{i.push(...Rw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:JTt}));break}case uT(o):{i.push(...Rw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:KTt}));break}case aT(o):{i.push(...Rw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:QTt}));break}case lT(o):{i.push(...Rw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:eDt}));break}case cT(o):{i.push(...Rw({key:s,subValue:n[s],subSchema:o,path:r,validationFn:tDt}));break}}}),i}}function Rw({key:e,subValue:t,path:n,subSchema:r,validationFn:i}){if(Bv(r)){if(Array.isArray(t)){if(!t.length)return[{path:`${n}.${e}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${e}`,message:`Value is expected to be an array but got typeof ${typeof t}`,property:"format"}];return t==null?void 0:t.flatMap((s,o)=>i(`${e}.${o}`,s,n,r))}else return i(e,t,n,r)}function KTt(e,t,n){const r=[];return t.length!==4?[{path:`${n}.${e}`,message:`Value is expected to have 4 items but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${s}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function JTt(e,t,n,r){var s;let i;return Bv(r)?i=(s=r==null?void 0:r.items)==null?void 0:s.type:i=r.type,i?XTt(t,i)?[]:[{path:`${n}.${e}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function QTt(e,t,n){return typeof t!="object"||!Object.keys(t).length?[{path:`${n}.${e}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function eDt(e,t,n){const r=[];return t.length!==2?[{path:`${n}.${e}`,message:`Value is expected to have 2 items but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${e}.${s}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function tDt(e,t,n){const r=[];return t.length<2?[{path:`${n}.${e}`,message:`Value is expected to have at least 2 points but got ${t.length}`,property:"format"}]:(t.forEach((i,s)=>{i.forEach((o,a)=>{typeof o!="number"&&r.push({path:`${n}.${e}.${s}.${a}`,message:`coordinates is expected to be of type number but got ${o}`,property:"format"})})}),r)}function nDt(e,t,n){return t?[]:[{path:`${n}.${e}`,message:`invalid value ${JSON.stringify(t)}`,property:"type"}]}function rDt(e,t,n){return typeof t!="string"?[{path:`${n}.${e}`,message:"Value is expected to be a valid wkt string",property:"type"}]:t==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${e}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function iDt(e,t,n,r){var i;if(typeof t!="object"||!Object.keys(t).length)return[{path:`${n}.${e}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(Bv(r)){if(t.type!=="FeatureCollection")return[{path:`${n}.${e}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=t==null?void 0:t.features)!=null&&i.length))return[{path:`${n}.${e}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(t!=null&&t.geometry.type))return[{path:`${n}.${e}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const sDt=[{type:"object",format:"minmax",func:WTt},{type:"array",format:"bounding-boxes",func:Fi},{type:"wkt",format:"bounding-boxes",func:Fi},{type:"geojson",format:"bounding-boxes",func:Fi},{type:"array",format:"bounding-box",func:Fi},{type:"wkt",format:"bounding-box",func:Fi},{type:"geojson",format:"bounding-box",func:Fi},{type:"array",format:"polygons",func:Fi},{type:"wkt",format:"polygons",func:Fi},{type:"geojson",format:"polygons",func:Fi},{type:"object",format:"polygon",func:Fi},{type:"wkt",format:"polygon",func:Fi},{type:"geojson",format:"polygon",func:Fi},{type:"array",format:"points",func:Fi},{type:"wkt",format:"points",func:Fi},{type:"geojson",format:"points",func:Fi},{type:"array",format:"point",func:Fi},{type:"wkt",format:"point",func:Fi},{type:"geojson",format:"point",func:Fi},{format:"feature",func:Fi},{type:"array",format:"features",func:Fi},{type:"wkt",format:"features",func:Fi},{type:"geojson",format:"features",func:Fi},{type:"array",format:"line",func:Fi},{type:"wkt",format:"line",func:Fi},{type:"geojson",format:"line",func:Fi},{type:"array",format:"lines",func:Fi},{type:"wkt",format:"lines",func:Fi},{type:"geojson",format:"lines",func:Fi}],oDt=(e,t)=>{const n=[...sDt,...t];hv.defaults.custom_validators.push(ZTt(n)),n.map(({type:r,format:i,func:s})=>{hv.defaults.startVals=e,hv.defaults.editors[i]=s,hv.defaults.resolvers.unshift(o=>{if(o.type===r&&o.format===i||o.format==="feature")return i})})};window.SimpleMDE=GTt;const BEe=e=>{oDt(e.value||{},e.customEditorInterfaces||[]);const t=e.renderRoot.querySelector("form");hv.defaults.callbacks={button:{onSubmit:function(){e.dispatchEvent(new CustomEvent("submit",{detail:e.value,bubbles:!0,composed:!0}))}}};let r=new hv(t,{schema:e.schema,...e.value?{startval:e.value}:{},theme:"html",ajax:!0,...e.options});return r.on("ready",()=>{if(Object.values(r.editors).some(i=>i instanceof vUe)){const i=document.createElement("style");i.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,e.renderRoot.insertBefore(i,e.renderRoot.firstChild)}}),r};async function zEe(e){if(e&&typeof e!="object")try{const t=await fetch(e);if(t.ok)return await t.json();console.error("Failed to fetch schema from URL: ",t.status)}catch(t){console.error("Error fetching schema: ",t)}return e}const aDt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,lDt=`
  :host, :root {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  form {
    background-color: var(--background-color, transparent);
  }
  .CodeMirror {
    background-color: var(--background-color, transparent);
  }
  select {
    background-color: var(--background-color);
  }
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .je-range-control output {
    width: 35px;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none !important;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .je-object__controls {
    margin: 0 !important;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
  [data-schematype=boolean] label {
    display: flex;
    align-items: center;
  }
`;var u_={exports:{}};u_.exports;var jEe;function uDt(){return jEe||(jEe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",x="[object Null]",y="[object Object]",w="[object Promise]",_="[object Proxy]",A="[object RegExp]",T="[object Set]",D="[object String]",k="[object Symbol]",R="[object Undefined]",O="[object WeakMap]",B="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",$="[object Float64Array]",I="[object Int8Array]",U="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",X="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,de={};de[L]=de[$]=de[I]=de[U]=de[q]=de[Y]=de[X]=de[te]=de[le]=!0,de[a]=de[l]=de[B]=de[f]=de[K]=de[c]=de[d]=de[h]=de[g]=de[v]=de[y]=de[A]=de[T]=de[D]=de[O]=!1;var ze=typeof Xi=="object"&&Xi&&Xi.Object===Object&&Xi,He=typeof self=="object"&&self&&self.Object===Object&&self,je=ze||He||Function("return this")(),we=t&&!t.nodeType&&t,Ie=we&&!0&&e&&!e.nodeType&&e,qe=Ie&&Ie.exports===we,Pe=qe&&ze.process,At=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),dt=At&&At.isTypedArray;function nn(Z,me){for(var Be=-1,gt=Z==null?0:Z.length,mn=0,Nt=[];++Be<gt;){var In=Z[Be];me(In,Be,Z)&&(Nt[mn++]=In)}return Nt}function Wt(Z,me){for(var Be=-1,gt=me.length,mn=Z.length;++Be<gt;)Z[mn+Be]=me[Be];return Z}function Mn(Z,me){for(var Be=-1,gt=Z==null?0:Z.length;++Be<gt;)if(me(Z[Be],Be,Z))return!0;return!1}function Ze(Z,me){for(var Be=-1,gt=Array(Z);++Be<Z;)gt[Be]=me(Be);return gt}function pe(Z){return function(me){return Z(me)}}function se(Z,me){return Z.has(me)}function oe(Z,me){return Z==null?void 0:Z[me]}function be(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(gt,mn){Be[++me]=[mn,gt]}),Be}function F(Z,me){return function(Be){return Z(me(Be))}}function H(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(gt){Be[++me]=gt}),Be}var J=Array.prototype,re=Function.prototype,ye=Object.prototype,xe=je["__core-js_shared__"],Re=re.toString,P=ye.hasOwnProperty,Q=function(){var Z=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),ie=ye.toString,ae=RegExp("^"+Re.call(P).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=qe?je.Buffer:void 0,Ce=je.Symbol,Ee=je.Uint8Array,De=ye.propertyIsEnumerable,Oe=J.splice,We=Ce?Ce.toStringTag:void 0,tt=Object.getOwnPropertySymbols,bt=ke?ke.isBuffer:void 0,Pt=F(Object.keys,Object),_t=hs(je,"DataView"),Kt=hs(je,"Map"),sn=hs(je,"Promise"),rn=hs(je,"Set"),on=hs(je,"WeakMap"),vn=hs(Object,"create"),Er=qs(_t),Ji=qs(Kt),ds=qs(sn),Gi=qs(rn),No=qs(on),qn=Ce?Ce.prototype:void 0,Mr=qn?qn.valueOf:void 0;function Lr(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var gt=Z[me];this.set(gt[0],gt[1])}}function yn(){this.__data__=vn?vn(null):{},this.size=0}function Kr(Z){var me=this.has(Z)&&delete this.__data__[Z];return this.size-=me?1:0,me}function ir(Z){var me=this.__data__;if(vn){var Be=me[Z];return Be===r?void 0:Be}return P.call(me,Z)?me[Z]:void 0}function Ni(Z){var me=this.__data__;return vn?me[Z]!==void 0:P.call(me,Z)}function tr(Z,me){var Be=this.__data__;return this.size+=this.has(Z)?0:1,Be[Z]=vn&&me===void 0?r:me,this}Lr.prototype.clear=yn,Lr.prototype.delete=Kr,Lr.prototype.get=ir,Lr.prototype.has=Ni,Lr.prototype.set=tr;function $r(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var gt=Z[me];this.set(gt[0],gt[1])}}function to(){this.__data__=[],this.size=0}function ge(Z){var me=this.__data__,Be=Ar(me,Z);if(Be<0)return!1;var gt=me.length-1;return Be==gt?me.pop():Oe.call(me,Be,1),--this.size,!0}function Le(Z){var me=this.__data__,Be=Ar(me,Z);return Be<0?void 0:me[Be][1]}function it(Z){return Ar(this.__data__,Z)>-1}function Je(Z,me){var Be=this.__data__,gt=Ar(Be,Z);return gt<0?(++this.size,Be.push([Z,me])):Be[gt][1]=me,this}$r.prototype.clear=to,$r.prototype.delete=ge,$r.prototype.get=Le,$r.prototype.has=it,$r.prototype.set=Je;function Et(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var gt=Z[me];this.set(gt[0],gt[1])}}function an(){this.size=0,this.__data__={hash:new Lr,map:new(Kt||$r),string:new Lr}}function en(Z){var me=zo(this,Z).delete(Z);return this.size-=me?1:0,me}function xt(Z){return zo(this,Z).get(Z)}function et(Z){return zo(this,Z).has(Z)}function pn(Z,me){var Be=zo(this,Z),gt=Be.size;return Be.set(Z,me),this.size+=Be.size==gt?0:1,this}Et.prototype.clear=an,Et.prototype.delete=en,Et.prototype.get=xt,Et.prototype.has=et,Et.prototype.set=pn;function Cn(Z){var me=-1,Be=Z==null?0:Z.length;for(this.__data__=new Et;++me<Be;)this.add(Z[me])}function Ut(Z){return this.__data__.set(Z,r),this}function qt(Z){return this.__data__.has(Z)}Cn.prototype.add=Cn.prototype.push=Ut,Cn.prototype.has=qt;function Sr(Z){var me=this.__data__=new $r(Z);this.size=me.size}function ci(){this.__data__=new $r,this.size=0}function Jt(Z){var me=this.__data__,Be=me.delete(Z);return this.size=me.size,Be}function Xe(Z){return this.__data__.get(Z)}function ht(Z){return this.__data__.has(Z)}function Xn(Z,me){var Be=this.__data__;if(Be instanceof $r){var gt=Be.__data__;if(!Kt||gt.length<n-1)return gt.push([Z,me]),this.size=++Be.size,this;Be=this.__data__=new Et(gt)}return Be.set(Z,me),this.size=Be.size,this}Sr.prototype.clear=ci,Sr.prototype.delete=Jt,Sr.prototype.get=Xe,Sr.prototype.has=ht,Sr.prototype.set=Xn;function ni(Z,me){var Be=Wi(Z),gt=!Be&&Vi(Z),mn=!Be&&!gt&&ps(Z),Nt=!Be&&!gt&&!mn&&Yi(Z),In=Be||gt||mn||Nt,dr=In?Ze(Z.length,String):[],kr=dr.length;for(var Ln in Z)P.call(Z,Ln)&&!(In&&(Ln=="length"||mn&&(Ln=="offset"||Ln=="parent")||Nt&&(Ln=="buffer"||Ln=="byteLength"||Ln=="byteOffset")||es(Ln,kr)))&&dr.push(Ln);return dr}function Ar(Z,me){for(var Be=Z.length;Be--;)if(ll(Z[Be][0],me))return Be;return-1}function Rr(Z,me,Be){var gt=me(Z);return Wi(Z)?gt:Wt(gt,Be(Z))}function nr(Z){return Z==null?Z===void 0?R:x:We&&We in Object(Z)?ol(Z):fa(Z)}function Gt(Z){return so(Z)&&nr(Z)==a}function vi(Z,me,Be,gt,mn){return Z===me?!0:Z==null||me==null||!so(Z)&&!so(me)?Z!==Z&&me!==me:Qi(Z,me,Be,gt,vi,mn)}function Qi(Z,me,Be,gt,mn,Nt){var In=Wi(Z),dr=Wi(me),kr=In?l:Cr(Z),Ln=dr?l:Cr(me);kr=kr==a?y:kr,Ln=Ln==a?y:Ln;var Ai=kr==y,Jr=Ln==y,sr=kr==Ln;if(sr&&ps(Z)){if(!ps(me))return!1;In=!0,Ai=!1}if(sr&&!Ai)return Nt||(Nt=new Sr),In||Yi(Z)?no(Z,me,Be,gt,mn,Nt):Bo(Z,me,kr,Be,gt,mn,Nt);if(!(Be&i)){var di=Ai&&P.call(Z,"__wrapped__"),xs=Jr&&P.call(me,"__wrapped__");if(di||xs){var Gs=di?Z.value():Z,Bi=xs?me.value():me;return Nt||(Nt=new Sr),mn(Gs,Bi,Be,gt,Nt)}}return sr?(Nt||(Nt=new Sr),bs(Z,me,Be,gt,mn,Nt)):!1}function bi(Z){if(!Ma(Z)||Os(Z))return!1;var me=Hs(Z)?ae:z;return me.test(qs(Z))}function js(Z){return so(Z)&&fi(Z.length)&&!!de[nr(Z)]}function xo(Z){if(!Us(Z))return Pt(Z);var me=[];for(var Be in Object(Z))P.call(Z,Be)&&Be!="constructor"&&me.push(Be);return me}function no(Z,me,Be,gt,mn,Nt){var In=Be&i,dr=Z.length,kr=me.length;if(dr!=kr&&!(In&&kr>dr))return!1;var Ln=Nt.get(Z);if(Ln&&Nt.get(me))return Ln==me;var Ai=-1,Jr=!0,sr=Be&s?new Cn:void 0;for(Nt.set(Z,me),Nt.set(me,Z);++Ai<dr;){var di=Z[Ai],xs=me[Ai];if(gt)var Gs=In?gt(xs,di,Ai,me,Z,Nt):gt(di,xs,Ai,Z,me,Nt);if(Gs!==void 0){if(Gs)continue;Jr=!1;break}if(sr){if(!Mn(me,function(Bi,zi){if(!se(sr,zi)&&(di===Bi||mn(di,Bi,Be,gt,Nt)))return sr.push(zi)})){Jr=!1;break}}else if(!(di===xs||mn(di,xs,Be,gt,Nt))){Jr=!1;break}}return Nt.delete(Z),Nt.delete(me),Jr}function Bo(Z,me,Be,gt,mn,Nt,In){switch(Be){case K:if(Z.byteLength!=me.byteLength||Z.byteOffset!=me.byteOffset)return!1;Z=Z.buffer,me=me.buffer;case B:return!(Z.byteLength!=me.byteLength||!Nt(new Ee(Z),new Ee(me)));case f:case c:case v:return ll(+Z,+me);case d:return Z.name==me.name&&Z.message==me.message;case A:case D:return Z==me+"";case g:var dr=be;case T:var kr=gt&i;if(dr||(dr=H),Z.size!=me.size&&!kr)return!1;var Ln=In.get(Z);if(Ln)return Ln==me;gt|=s,In.set(Z,me);var Ai=no(dr(Z),dr(me),gt,mn,Nt,In);return In.delete(Z),Ai;case k:if(Mr)return Mr.call(Z)==Mr.call(me)}return!1}function bs(Z,me,Be,gt,mn,Nt){var In=Be&i,dr=Fs(Z),kr=dr.length,Ln=Fs(me),Ai=Ln.length;if(kr!=Ai&&!In)return!1;for(var Jr=kr;Jr--;){var sr=dr[Jr];if(!(In?sr in me:P.call(me,sr)))return!1}var di=Nt.get(Z);if(di&&Nt.get(me))return di==me;var xs=!0;Nt.set(Z,me),Nt.set(me,Z);for(var Gs=In;++Jr<kr;){sr=dr[Jr];var Bi=Z[sr],zi=me[sr];if(gt)var wo=In?gt(zi,Bi,sr,me,Z,Nt):gt(Bi,zi,sr,Z,me,Nt);if(!(wo===void 0?Bi===zi||mn(Bi,zi,Be,gt,Nt):wo)){xs=!1;break}Gs||(Gs=sr=="constructor")}if(xs&&!Gs){var Gr=Z.constructor,da=me.constructor;Gr!=da&&"constructor"in Z&&"constructor"in me&&!(typeof Gr=="function"&&Gr instanceof Gr&&typeof da=="function"&&da instanceof da)&&(xs=!1)}return Nt.delete(Z),Nt.delete(me),xs}function Fs(Z){return Rr(Z,oo,al)}function zo(Z,me){var Be=Z.__data__;return ro(me)?Be[typeof me=="string"?"string":"hash"]:Be.map}function hs(Z,me){var Be=oe(Z,me);return bi(Be)?Be:void 0}function ol(Z){var me=P.call(Z,We),Be=Z[We];try{Z[We]=void 0;var gt=!0}catch{}var mn=ie.call(Z);return gt&&(me?Z[We]=Be:delete Z[We]),mn}var al=tt?function(Z){return Z==null?[]:(Z=Object(Z),nn(tt(Z),function(me){return De.call(Z,me)}))}:ul,Cr=nr;(_t&&Cr(new _t(new ArrayBuffer(1)))!=K||Kt&&Cr(new Kt)!=g||sn&&Cr(sn.resolve())!=w||rn&&Cr(new rn)!=T||on&&Cr(new on)!=O)&&(Cr=function(Z){var me=nr(Z),Be=me==y?Z.constructor:void 0,gt=Be?qs(Be):"";if(gt)switch(gt){case Er:return K;case Ji:return g;case ds:return w;case Gi:return T;case No:return O}return me});function es(Z,me){return me=me??o,!!me&&(typeof Z=="number"||he.test(Z))&&Z>-1&&Z%1==0&&Z<me}function ro(Z){var me=typeof Z;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?Z!=="__proto__":Z===null}function Os(Z){return!!Q&&Q in Z}function Us(Z){var me=Z&&Z.constructor,Be=typeof me=="function"&&me.prototype||ye;return Z===Be}function fa(Z){return ie.call(Z)}function qs(Z){if(Z!=null){try{return Re.call(Z)}catch{}try{return Z+""}catch{}}return""}function ll(Z,me){return Z===me||Z!==Z&&me!==me}var Vi=Gt(function(){return arguments}())?Gt:function(Z){return so(Z)&&P.call(Z,"callee")&&!De.call(Z,"callee")},Wi=Array.isArray;function io(Z){return Z!=null&&fi(Z.length)&&!Hs(Z)}var ps=bt||Vt;function jo(Z,me){return vi(Z,me)}function Hs(Z){if(!Ma(Z))return!1;var me=nr(Z);return me==h||me==p||me==u||me==_}function fi(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function Ma(Z){var me=typeof Z;return Z!=null&&(me=="object"||me=="function")}function so(Z){return Z!=null&&typeof Z=="object"}var Yi=dt?pe(dt):js;function oo(Z){return io(Z)?ni(Z):xo(Z)}function ul(){return[]}function Vt(){return!1}e.exports=jo}(u_,u_.exports)),u_.exports}var cDt=uDt();const UEe=sa(cDt);var ja,D0,UIe,j$;class jIe extends Zr{constructor(){super();gn(this,D0);gn(this,ja,null);this.schema=null,this.value=null,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1,this.customEditorInterfaces=[]}get editor(){return $t(this,ja)}get schema(){return this._schema}set schema(n){$t(this,ja)&&!UEe(this._schema,n)&&$t(this,ja).destroy(),this._schema=n}get value(){return this._value}set value(n){$t(this,ja)&&$t(this,ja).ready&&!UEe(this._value,n)&&$t(this,ja).setValue(n),this._value=n}async updated(n){this._value=await zEe(this.value),n.has("schema")?(this._schema=await zEe(this.schema),(!$t(this,ja)||$t(this,ja).destroyed)&&(Ui(this,ja,await BEe(this)),dn(this,D0,j$).call(this))):n.has("customEditorInterfaces")&&this.customEditorInterfaces&&(Ui(this,ja,await BEe(this)),dn(this,D0,j$).call(this))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return Ke`
      <style>
        ${aDt}
        ${!this.unstyled&&$D}
        ${!this.unstyled&&lDt}
      </style>
      <form></form>
    `}}ja=new WeakMap,D0=new WeakSet,UIe=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},j$=function(){["ready","change"].map(r=>{$t(this,ja).on(r,()=>{this._value=$t(this,ja).getValue(),dn(this,D0,UIe).call(this)})})},tn(jIe,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},customEditorInterfaces:{attribute:!1,type:Array},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",jIe);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Dr=e=>e!==void 0,qIe=(e,t,n)=>t in e?e[t]:e[t]=n;const M2={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class fDt{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,n){return PR(t,n).join("")}}function PR(e,t){return HIe(e,t,[]).join("")}function HIe(e,t,n){if(e.nodeType===M2.CDATA_SECTION||e.nodeType===M2.TEXT)t?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var r;for(r=e.firstChild;r;r=r.nextSibling)HIe(r,t,n)}return n}function dDt(e,t,n,r){for(var i=hDt(t);i;i=pDt(i)){var s=i.namespaceURI||null,o=e[s];if(Dr(o)){var a=o[i.localName];Dr(a)&&a.call(r,i,n)}}}function hDt(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==M2.ELEMENT;)t=t.nextSibling;return t}function pDt(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==M2.ELEMENT;)t=t.nextSibling;return t}function la(e,t,n){return mDt(e,t,n)}function mDt(e,t,n){var r=Dr(n)?n:{},i,s;for(i=0,s=e.length;i<s;++i)r[e[i]]=t;return r}function GIe(e,t){return function(n,r){var i=e.call(Dr(t)?t:this,n,r);if(Dr(i)){var s=r[r.length-1];s.push(i)}}}function Po(e,t,n,r,i){return r.push(e),dDt(t,n,r,i),r.pop()}function hn(e,t,n){return function(r,i){let s=e.call(Dr(n)?n:this,r,i);if(Dr(s)){var o=i[i.length-1],a=Dr(t)?t:r.localName;o[a]=s}}}function bl(e,t,n){return function(r,i){var s=e.call(Dr(n)?n:this,r,i);if(Dr(s)){var o=i[i.length-1],a=Dr(t)?t:r.localName,l=qIe(o,a,[]);l.push(s)}}}const gDt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function yDt(e){return e.replace(gDt,"")}function Zg(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Dr(t[1])||!1}function _v(e){return Hd(PR(e,!1))}function Hd(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function oM(e){return fT(PR(e,!1))}function fT(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function si(e){return yDt(PR(e,!1))}const vDt="http://www.w3.org/1999/xlink";function $B(e){return e.getAttributeNS(vDt,"href")}function bDt(e,t){return Po({},VDt,e,t)}function VIe(e){return[Hd(e.getAttribute("minx")),Hd(e.getAttribute("miny")),Hd(e.getAttribute("maxx")),Hd(e.getAttribute("maxy"))]}function xDt(e,t){const n=VIe(e),r=[Hd(e.getAttribute("resx")),Hd(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:n,res:r}}function wDt(e,t){const n=VIe(e);if(!(!Dr(n[0])||!Dr(n[1])||!Dr(n[2])||!Dr(n[3])))return n}function _Dt(e,t){const n=parseFloat(e.getAttribute("min")),r=parseFloat(e.getAttribute("max"));return{min:n,max:r}}function EDt(e,t){const n=Po({},WDt,e,t);if(!Dr(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(!Dr(r)||!Dr(i)||!Dr(s)||!Dr(o)))return[r,i,s,o]}function SDt(e,t){return Po({},zDt,e,t)}function ADt(e,t){return Po({},jDt,e,t)}function CDt(e,t){return Po({},UDt,e,t)}function kDt(e,t){return Po({},qDt,e,t)}function TDt(e,t){return Po({},HDt,e,t)}function DDt(e,t){return Po([],GDt,e,t)}function LDt(e,t){const n=Zg(e.getAttribute("queryable"));return Po({queryable:Dr(n)?n:!1},XIe,e,t)}function RDt(e,t){var n=t[t.length-1];const r=Po({},XIe,e,t);if(!Dr(r))return;let i=Zg(e.getAttribute("queryable"));Dr(i)||(i=n.queryable),r.queryable=Dr(i)?i:!1;let s=fT(e.getAttribute("cascaded"));Dr(s)||(s=n.cascaded),r.cascaded=s;let o=Zg(e.getAttribute("opaque"));Dr(o)||(o=n.opaque),r.opaque=Dr(o)?o:!1;let a=Zg(e.getAttribute("noSubsets"));Dr(a)||(a=n.noSubsets),r.noSubsets=Dr(a)?a:!1;let l=Hd(e.getAttribute("fixedWidth"));Dr(l)||(l=n.fixedWidth),r.fixedWidth=l;let u=Hd(e.getAttribute("fixedHeight"));Dr(u)||(u=n.fixedHeight),r.fixedHeight=u;const f=["Style","CRS","AuthorityURL"];for(let d=0,h=f.length;d<h;d++){const p=f[d],g=n[p];if(Dr(g)){let v=qIe(r,p,[]);v=v.concat(g),r[p]=v}}const c=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,h=c.length;d<h;d++){const p=c[d],g=r[p];if(!Dr(g)){const v=n[p];r[p]=v}}return r}function FDt(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:Zg(e.getAttribute("multipleValues")),nearestValue:Zg(e.getAttribute("nearestValue")),current:Zg(e.getAttribute("current")),values:si(e)}}function dh(e,t){return Po({},QDt,e,t)}function ODt(e,t){return Po({},YDt,e,t)}function MDt(e,t){return Po({},ZDt,e,t)}function $Dt(e,t){return Po({},KDt,e,t)}function aM(e,t){return Po({},XDt,e,t)}function WIe(e,t){var n=dh(e,t);if(Dr(n)){const r=[fT(e.getAttribute("width")),fT(e.getAttribute("height"))];return n.size=r,n}}function IDt(e,t){var n=dh(e,t);if(Dr(n))return n.name=e.getAttribute("name"),n}function PDt(e,t){var n=dh(e,t);if(Dr(n))return n.type=e.getAttribute("type"),n}function NDt(e,t){return Po({},JDt,e,t)}function YIe(e,t){return Po([],eLt,e,t)}const ua=[null,"http://www.opengis.net/wms"],BDt=la(ua,{Service:hn(ADt),Capability:hn(SDt)}),zDt=la(ua,{Request:hn(ODt),Exception:hn(DDt),Layer:hn(LDt)}),jDt=la(ua,{Name:hn(si),Title:hn(si),Abstract:hn(si),KeywordList:hn(YIe),OnlineResource:hn($B),ContactInformation:hn(CDt),Fees:hn(si),AccessConstraints:hn(si),LayerLimit:hn(oM),MaxWidth:hn(oM),MaxHeight:hn(oM)}),UDt=la(ua,{ContactPersonPrimary:hn(kDt),ContactPosition:hn(si),ContactAddress:hn(TDt),ContactVoiceTelephone:hn(si),ContactFacsimileTelephone:hn(si),ContactElectronicMailAddress:hn(si)}),qDt=la(ua,{ContactPerson:hn(si),ContactOrganization:hn(si)}),HDt=la(ua,{AddressType:hn(si),Address:hn(si),City:hn(si),StateOrProvince:hn(si),PostCode:hn(si),Country:hn(si)}),GDt=la(ua,{Format:GIe(si)}),XIe=la(ua,{Name:hn(si),Title:hn(si),Abstract:hn(si),KeywordList:hn(YIe),CRS:bl(si),SRS:bl(si),EX_GeographicBoundingBox:hn(EDt),LatLonBoundingBox:hn(wDt),BoundingBox:bl(xDt),Dimension:bl(FDt),Attribution:hn(bDt),AuthorityURL:bl(IDt),Identifier:bl(si),MetadataURL:bl(PDt),DataURL:bl(dh),FeatureListURL:bl(dh),Style:bl(NDt),MinScaleDenominator:hn(_v),MaxScaleDenominator:hn(_v),ScaleHint:hn(_Dt),Layer:bl(RDt)}),VDt=la(ua,{Title:hn(si),OnlineResource:hn($B),LogoURL:hn(WIe)}),WDt=la(ua,{westBoundLongitude:hn(_v),eastBoundLongitude:hn(_v),southBoundLatitude:hn(_v),northBoundLatitude:hn(_v)}),YDt=la(ua,{GetCapabilities:hn(aM),GetMap:hn(aM),GetFeatureInfo:hn(aM)}),XDt=la(ua,{Format:bl(si),DCPType:bl(MDt)}),ZDt=la(ua,{HTTP:hn($Dt)}),KDt=la(ua,{Get:hn(dh),Post:hn(dh)}),JDt=la(ua,{Name:hn(si),Title:hn(si),Abstract:hn(si),LegendURL:bl(WIe),StyleSheetURL:hn(dh),StyleURL:hn(dh)}),QDt=la(ua,{Format:hn(si),OnlineResource:hn($B)}),eLt=la(ua,{Keyword:GIe(si)});class tLt{constructor(t,n){!n&&typeof window<"u"&&(n=window.DOMParser),this.version=void 0,this._parser=new fDt(n),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==M2.ELEMENT)return this.readFromNode(n);return null}readFromNode(t){return this.version=t.getAttribute("version"),Po({version:this.version},BDt,t,[])||null}}async function nLt(e){let t=new URL(e),n=t.searchParams;n.set("SERVICE","WMS"),n.set("REQUEST","GetCapabilities");let r=t.toString();const i=await fetch(r);if(i.ok){const s=await i.text();return new tLt(s).toJSON()}else throw new Error(`Error: ${i.status}`)}function IB(e){const t=/\b(?:wms|ows)\b/i,n=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return t.test(e)?"TileWMS":n.test(e)?"XYZ":!1}function rLt(e){const n=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(e),r=IB(e);return!!(e&&n&&r)}function ZIe(e){return e.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function iLt(e){try{return JSON.parse(ZIe(e)),!!e}catch{return!1}}function sLt(e,t){const n=new URL(e).searchParams;Object.entries(t).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{n.set(l,a[l])}):n.set(o,a)});const r=e.split("?")[0],i=n.toString();return`${r}?${i}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qEe(Object(n),!0).forEach(function(r){oLt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qEe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KC(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?KC=function(t){return typeof t}:KC=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KC(e)}function oLt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hh(){return hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hh.apply(this,arguments)}function aLt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function lLt(e,t){if(e==null)return{};var n=aLt(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var uLt="1.15.6";function nh(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ch=nh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),aS=nh(/Edge/i),HEe=nh(/firefox/i),M_=nh(/safari/i)&&!nh(/chrome/i)&&!nh(/android/i),PB=nh(/iP(ad|od|hone)/i),KIe=nh(/chrome/i)&&nh(/android/i),JIe={capture:!1,passive:!1};function jr(e,t,n){e.addEventListener(t,n,!Ch&&JIe)}function Fr(e,t,n){e.removeEventListener(t,n,!Ch&&JIe)}function dT(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function QIe(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function dc(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&dT(e,t):dT(e,t))||r&&e===n)return e;if(e===n)break}while(e=QIe(e))}return null}var GEe=/\s+/g;function Ul(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(GEe," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(GEe," ")}}function Bn(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function zv(e,t){var n="";if(typeof e=="string")n=e;else do{var r=Bn(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function ePe(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Of(){var e=document.scrollingElement;return e||document.documentElement}function Ks(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,a,l,u,f,c;if(e!==window&&e.parentNode&&e!==Of()?(s=e.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,f=s.height,c=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Ch))do if(i&&i.getBoundingClientRect&&(Bn(i,"transform")!=="none"||n&&Bn(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Bn(i,"border-top-width")),a-=d.left+parseInt(Bn(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&e!==window){var h=zv(i||e),p=h&&h.a,g=h&&h.d;h&&(o/=g,a/=p,c/=p,f/=g,l=o+f,u=a+c)}return{top:o,left:a,bottom:l,right:u,width:c,height:f}}}function VEe(e,t,n){for(var r=Lp(e,!0),i=Ks(e)[t];r;){var s=Ks(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Of())break;r=Lp(r,!1)}return!1}function I1(e,t,n,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==zn.ghost&&(r||o[s]!==zn.dragged)&&dc(o[s],n.draggable,e,!1)){if(i===t)return o[s];i++}s++}return null}function NB(e,t){for(var n=e.lastElementChild;n&&(n===zn.ghost||Bn(n,"display")==="none"||t&&!dT(n,t));)n=n.previousElementSibling;return n||null}function wu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==zn.clone&&(!t||dT(e,t))&&n++;return n}function WEe(e){var t=0,n=0,r=Of();if(e)do{var i=zv(e),s=i.a,o=i.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function cLt(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Lp(e,t){if(!e||!e.getBoundingClientRect)return Of();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Bn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Of();if(r||t)return n;r=!0}}while(n=n.parentNode);return Of()}function fLt(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function lM(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var $_;function tPe(e,t){return function(){if(!$_){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),$_=setTimeout(function(){$_=void 0},t)}}}function dLt(){clearTimeout($_),$_=void 0}function nPe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function rPe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function iPe(e,t,n){var r={};return Array.from(e.children).forEach(function(i){var s,o,a,l;if(!(!dc(i,t.draggable,e,!1)||i.animated||i===n)){var u=Ks(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Sl="Sortable"+new Date().getTime();function hLt(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Bn(i,"display")==="none"||i===zn.ghost)){e.push({target:i,rect:Ks(i)});var s=Vf({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=zv(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(cLt(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(a){var l=0,u=a.target,f=u.fromRect,c=Ks(u),d=u.prevFromRect,h=u.prevToRect,p=a.rect,g=zv(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&lM(d,c)&&!lM(f,c)&&(p.top-c.top)/(p.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(l=mLt(p,d,h,i.options)),lM(c,f)||(u.prevFromRect=f,u.prevToRect=c,l||(l=i.options.animation),i.animate(u,p,c,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){Bn(r,"transition",""),Bn(r,"transform","");var a=zv(this.el),l=a&&a.a,u=a&&a.d,f=(i.left-s.left)/(l||1),c=(i.top-s.top)/(u||1);r.animatingX=!!f,r.animatingY=!!c,Bn(r,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=pLt(r),Bn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Bn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Bn(r,"transition",""),Bn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function pLt(e){return e.offsetWidth}function mLt(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Xy=[],uM={initializeByDefault:!0},lS={mount:function(t){for(var n in uM)uM.hasOwnProperty(n)&&!(n in t)&&(t[n]=uM[n]);Xy.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Xy.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=t+"Global";Xy.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Vf({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](Vf({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Xy.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,hh(r,u.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,n){var r={};return Xy.forEach(function(i){typeof i.eventProperties=="function"&&hh(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Xy.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(t[s.pluginName],r))}),i}};function gLt(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,u=e.newIndex,f=e.oldDraggableIndex,c=e.newDraggableIndex,d=e.originalEvent,h=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Sl],!!t){var g,v=t.options,x="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ch&&!aS?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||n,g.from=a||n,g.item=i||n,g.clone=s,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=f,g.newDraggableIndex=c,g.originalEvent=d,g.pullMode=h?h.lastPutMode:void 0;var y=Vf(Vf({},p),lS.getEventProperties(r,t));for(var w in y)g[w]=y[w];n&&n.dispatchEvent(g),v[x]&&v[x].call(t,g)}}var yLt=["evt"],gl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=lLt(r,yLt);lS.pluginEvent.bind(zn)(t,n,Vf({dragEl:Ot,parentEl:Ss,ghostEl:Kn,rootEl:ls,nextEl:kg,lastDownEl:JC,cloneEl:ms,cloneHidden:mp,dragStarted:c_,putSortable:Go,activeSortable:zn.active,originalEvent:i,oldIndex:Ev,oldDraggableIndex:I_,newIndex:Hl,newDraggableIndex:fp,hideGhostForTarget:lPe,unhideGhostForTarget:uPe,cloneNowHidden:function(){mp=!0},cloneNowShown:function(){mp=!1},dispatchSortableEvent:function(a){Ba({sortable:n,name:a,originalEvent:i})}},s))};function Ba(e){gLt(Vf({putSortable:Go,cloneEl:ms,targetEl:Ot,rootEl:ls,oldIndex:Ev,oldDraggableIndex:I_,newIndex:Hl,newDraggableIndex:fp},e))}var Ot,Ss,Kn,ls,kg,JC,ms,mp,Ev,Hl,I_,fp,rC,Go,ov=!1,hT=!1,pT=[],gg,ic,cM,fM,YEe,XEe,c_,Zy,P_,N_=!1,iC=!1,QC,ya,dM=[],U$=!1,mT=[],NR=typeof document<"u",sC=PB,ZEe=aS||Ch?"cssFloat":"float",vLt=NR&&!KIe&&!PB&&"draggable"in document.createElement("div"),sPe=function(){if(NR){if(Ch)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),oPe=function(t,n){var r=Bn(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=I1(t,0,n),o=I1(t,1,n),a=s&&Bn(s),l=o&&Bn(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ks(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ks(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[ZEe]==="none"||o&&r[ZEe]==="none"&&u+f>i)?"vertical":"horizontal"},bLt=function(t,n,r){var i=r?t.left:t.top,s=r?t.right:t.bottom,o=r?t.width:t.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||s===l||i+o/2===a+u/2},xLt=function(t,n){var r;return pT.some(function(i){var s=i[Sl].options.emptyInsertThreshold;if(!(!s||NB(i))){var o=Ks(i),a=t>=o.left-s&&t<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},aPe=function(t){function n(s,o){return function(a,l,u,f){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||c))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,u,f),o)(a,l,u,f);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=t.group;(!i||KC(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},lPe=function(){!sPe&&Kn&&Bn(Kn,"display","none")},uPe=function(){!sPe&&Kn&&Bn(Kn,"display","")};NR&&!KIe&&document.addEventListener("click",function(e){if(hT)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),hT=!1,!1},!0);var yg=function(t){if(Ot){t=t.touches?t.touches[0]:t;var n=xLt(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Sl]._onDragOver(r)}}},wLt=function(t){Ot&&Ot.parentNode[Sl]._isOutsideThisEl(t.target)};function zn(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=hh({},t),e[Sl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oPe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:zn.supportPointer!==!1&&"PointerEvent"in window&&(!M_||PB),emptyInsertThreshold:5};lS.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);aPe(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:vLt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?jr(e,"pointerdown",this._onTapStart):(jr(e,"mousedown",this._onTapStart),jr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(jr(e,"dragover",this),jr(e,"dragenter",this)),pT.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),hh(this,hLt())}zn.prototype={constructor:zn,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Zy=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Ot):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(DLt(r),!Ot&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&M_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=dc(l,i.draggable,r,!1),!(l&&l.animated)&&JC!==l)){if(Ev=wu(l),I_=wu(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){Ba({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),gl("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=dc(u,c.trim(),r,!1),c)return Ba({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),gl("filter",n,{evt:t}),!0}),f)){s&&t.preventDefault();return}i.handle&&!dc(u,i.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Ot&&r.parentNode===s){var u=Ks(r);if(ls=s,Ot=r,Ss=Ot.parentNode,kg=Ot.nextSibling,JC=r,rC=o.group,zn.dragged=Ot,gg={target:Ot,clientX:(n||t).clientX,clientY:(n||t).clientY},YEe=gg.clientX-u.left,XEe=gg.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Ot.style["will-change"]="all",l=function(){if(gl("delayEnded",i,{evt:t}),zn.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!HEe&&i.nativeDraggable&&(Ot.draggable=!0),i._triggerDragStart(t,n),Ba({sortable:i,name:"choose",originalEvent:t}),Ul(Ot,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){ePe(Ot,f.trim(),hM)}),jr(a,"dragover",yg),jr(a,"mousemove",yg),jr(a,"touchmove",yg),o.supportPointer?(jr(a,"pointerup",i._onDrop),!this.nativeDraggable&&jr(a,"pointercancel",i._onDrop)):(jr(a,"mouseup",i._onDrop),jr(a,"touchend",i._onDrop),jr(a,"touchcancel",i._onDrop)),HEe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ot.draggable=!0),gl("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(aS||Ch))){if(zn.eventCanceled){this._onDrop();return}o.supportPointer?(jr(a,"pointerup",i._disableDelayedDrag),jr(a,"pointercancel",i._disableDelayedDrag)):(jr(a,"mouseup",i._disableDelayedDrag),jr(a,"touchend",i._disableDelayedDrag),jr(a,"touchcancel",i._disableDelayedDrag)),jr(a,"mousemove",i._delayedDragTouchMoveHandler),jr(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&jr(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ot&&hM(Ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._disableDelayedDrag),Fr(t,"touchend",this._disableDelayedDrag),Fr(t,"touchcancel",this._disableDelayedDrag),Fr(t,"pointerup",this._disableDelayedDrag),Fr(t,"pointercancel",this._disableDelayedDrag),Fr(t,"mousemove",this._delayedDragTouchMoveHandler),Fr(t,"touchmove",this._delayedDragTouchMoveHandler),Fr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?jr(document,"pointermove",this._onTouchMove):n?jr(document,"touchmove",this._onTouchMove):jr(document,"mousemove",this._onTouchMove):(jr(Ot,"dragend",this),jr(ls,"dragstart",this._onDragStart));try{document.selection?e3(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(ov=!1,ls&&Ot){gl("dragStarted",this,{evt:n}),this.nativeDraggable&&jr(document,"dragover",wLt);var r=this.options;!t&&Ul(Ot,r.dragClass,!1),Ul(Ot,r.ghostClass,!0),zn.active=this,t&&this._appendGhost(),Ba({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ic){this._lastX=ic.clientX,this._lastY=ic.clientY,lPe();for(var t=document.elementFromPoint(ic.clientX,ic.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ic.clientX,ic.clientY),t!==n);)n=t;if(Ot.parentNode[Sl]._isOutsideThisEl(t),n)do{if(n[Sl]){var r=void 0;if(r=n[Sl]._onDragOver({clientX:ic.clientX,clientY:ic.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=QIe(n));uPe()}},_onTouchMove:function(t){if(gg){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=t.touches?t.touches[0]:t,o=Kn&&zv(Kn,!0),a=Kn&&o&&o.a,l=Kn&&o&&o.d,u=sC&&ya&&WEe(ya),f=(s.clientX-gg.clientX+i.x)/(a||1)+(u?u[0]-dM[0]:0)/(a||1),c=(s.clientY-gg.clientY+i.y)/(l||1)+(u?u[1]-dM[1]:0)/(l||1);if(!zn.active&&!ov){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Kn){o?(o.e+=f-(cM||0),o.f+=c-(fM||0)):o={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Bn(Kn,"webkitTransform",d),Bn(Kn,"mozTransform",d),Bn(Kn,"msTransform",d),Bn(Kn,"transform",d),cM=f,fM=c,ic=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Kn){var t=this.options.fallbackOnBody?document.body:ls,n=Ks(Ot,!0,sC,!0,t),r=this.options;if(sC){for(ya=t;Bn(ya,"position")==="static"&&Bn(ya,"transform")==="none"&&ya!==document;)ya=ya.parentNode;ya!==document.body&&ya!==document.documentElement?(ya===document&&(ya=Of()),n.top+=ya.scrollTop,n.left+=ya.scrollLeft):ya=Of(),dM=WEe(ya)}Kn=Ot.cloneNode(!0),Ul(Kn,r.ghostClass,!1),Ul(Kn,r.fallbackClass,!0),Ul(Kn,r.dragClass,!0),Bn(Kn,"transition",""),Bn(Kn,"transform",""),Bn(Kn,"box-sizing","border-box"),Bn(Kn,"margin",0),Bn(Kn,"top",n.top),Bn(Kn,"left",n.left),Bn(Kn,"width",n.width),Bn(Kn,"height",n.height),Bn(Kn,"opacity","0.8"),Bn(Kn,"position",sC?"absolute":"fixed"),Bn(Kn,"zIndex","100000"),Bn(Kn,"pointerEvents","none"),zn.ghost=Kn,t.appendChild(Kn),Bn(Kn,"transform-origin",YEe/parseInt(Kn.style.width)*100+"% "+XEe/parseInt(Kn.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,s=r.options;if(gl("dragStart",this,{evt:t}),zn.eventCanceled){this._onDrop();return}gl("setupClone",this),zn.eventCanceled||(ms=rPe(Ot),ms.removeAttribute("id"),ms.draggable=!1,ms.style["will-change"]="",this._hideClone(),Ul(ms,this.options.chosenClass,!1),zn.clone=ms),r.cloneId=e3(function(){gl("clone",r),!zn.eventCanceled&&(r.options.removeCloneOnHide||ls.insertBefore(ms,Ot),r._hideClone(),Ba({sortable:r,name:"clone"}))}),!n&&Ul(Ot,s.dragClass,!0),n?(hT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Fr(document,"mouseup",r._onDrop),Fr(document,"touchend",r._onDrop),Fr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Ot)),jr(document,"drop",r),Bn(Ot,"transform","translateZ(0)")),ov=!0,r._dragStartId=e3(r._dragStarted.bind(r,n,t)),jr(document,"selectstart",r),c_=!0,window.getSelection().removeAllRanges(),M_&&Bn(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,s,o,a=this.options,l=a.group,u=zn.active,f=rC===l,c=a.sort,d=Go||u,h,p=this,g=!1;if(U$)return;function v(Y,X){gl(Y,p,Vf({evt:t,isOwner:f,axis:h?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:c,fromSortable:d,target:r,completed:y,onMove:function(le,ee){return oC(ls,n,Ot,i,le,Ks(le),t,ee)},changed:w},X))}function x(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function y(Y){return v("dragOverCompleted",{insertion:Y}),Y&&(f?u._hideClone():u._showClone(p),p!==d&&(Ul(Ot,Go?Go.options.ghostClass:u.options.ghostClass,!1),Ul(Ot,a.ghostClass,!0)),Go!==p&&p!==zn.active?Go=p:p===zn.active&&Go&&(Go=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===Ot&&!Ot.animated||r===n&&!r.animated)&&(Zy=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(Ot.parentNode[Sl]._isOutsideThisEl(t.target),!Y&&yg(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function w(){Hl=wu(Ot),fp=wu(Ot,a.draggable),Ba({sortable:p,name:"change",toEl:n,newIndex:Hl,newDraggableIndex:fp,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=dc(r,a.draggable,n,!0),v("dragOver"),zn.eventCanceled)return g;if(Ot.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return y(!1);if(hT=!1,u&&!a.disabled&&(f?c||(o=Ss!==ls):Go===this||(this.lastPutMode=rC.checkPull(this,u,Ot,t))&&l.checkPut(this,u,Ot,t))){if(h=this._getDirection(t,r)==="vertical",i=Ks(Ot),v("dragOverValid"),zn.eventCanceled)return g;if(o)return Ss=ls,x(),this._hideClone(),v("revert"),zn.eventCanceled||(kg?ls.insertBefore(Ot,kg):ls.appendChild(Ot)),y(!0);var _=NB(n,a.draggable);if(!_||ALt(t,h,this)&&!_.animated){if(_===Ot)return y(!1);if(_&&n===t.target&&(r=_),r&&(s=Ks(r)),oC(ls,n,Ot,i,r,s,t,!!r)!==!1)return x(),_&&_.nextSibling?n.insertBefore(Ot,_.nextSibling):n.appendChild(Ot),Ss=n,w(),y(!0)}else if(_&&SLt(t,h,this)){var A=I1(n,0,a,!0);if(A===Ot)return y(!1);if(r=A,s=Ks(r),oC(ls,n,Ot,i,r,s,t,!1)!==!1)return x(),n.insertBefore(Ot,A),Ss=n,w(),y(!0)}else if(r.parentNode===n){s=Ks(r);var T=0,D,k=Ot.parentNode!==n,R=!bLt(Ot.animated&&Ot.toRect||i,r.animated&&r.toRect||s,h),O=h?"top":"left",B=VEe(r,"top","top")||VEe(Ot,"top","top"),K=B?B.scrollTop:void 0;Zy!==r&&(D=s[O],N_=!1,iC=!R&&a.invertSwap||k),T=CLt(t,r,s,h,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,iC,Zy===r);var L;if(T!==0){var $=wu(Ot);do $-=T,L=Ss.children[$];while(L&&(Bn(L,"display")==="none"||L===Kn))}if(T===0||L===r)return y(!1);Zy=r,P_=T;var I=r.nextElementSibling,U=!1;U=T===1;var q=oC(ls,n,Ot,i,r,s,t,U);if(q!==!1)return(q===1||q===-1)&&(U=q===1),U$=!0,setTimeout(ELt,30),x(),U&&!I?n.appendChild(Ot):r.parentNode.insertBefore(Ot,U?I:r),B&&nPe(B,0,K-B.scrollTop),Ss=Ot.parentNode,D!==void 0&&!iC&&(QC=Math.abs(D-Ks(r)[O])),w(),y(!0)}if(n.contains(Ot))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Fr(document,"mousemove",this._onTouchMove),Fr(document,"touchmove",this._onTouchMove),Fr(document,"pointermove",this._onTouchMove),Fr(document,"dragover",yg),Fr(document,"mousemove",yg),Fr(document,"touchmove",yg)},_offUpEvents:function(){var t=this.el.ownerDocument;Fr(t,"mouseup",this._onDrop),Fr(t,"touchend",this._onDrop),Fr(t,"pointerup",this._onDrop),Fr(t,"pointercancel",this._onDrop),Fr(t,"touchcancel",this._onDrop),Fr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Hl=wu(Ot),fp=wu(Ot,r.draggable),gl("drop",this,{evt:t}),Ss=Ot&&Ot.parentNode,Hl=wu(Ot),fp=wu(Ot,r.draggable),zn.eventCanceled){this._nulling();return}ov=!1,iC=!1,N_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),q$(this.cloneId),q$(this._dragStartId),this.nativeDraggable&&(Fr(document,"drop",this),Fr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),M_&&Bn(document.body,"user-select",""),Bn(Ot,"transform",""),t&&(c_&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Kn&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),(ls===Ss||Go&&Go.lastPutMode!=="clone")&&ms&&ms.parentNode&&ms.parentNode.removeChild(ms),Ot&&(this.nativeDraggable&&Fr(Ot,"dragend",this),hM(Ot),Ot.style["will-change"]="",c_&&!ov&&Ul(Ot,Go?Go.options.ghostClass:this.options.ghostClass,!1),Ul(Ot,this.options.chosenClass,!1),Ba({sortable:this,name:"unchoose",toEl:Ss,newIndex:null,newDraggableIndex:null,originalEvent:t}),ls!==Ss?(Hl>=0&&(Ba({rootEl:Ss,name:"add",toEl:Ss,fromEl:ls,originalEvent:t}),Ba({sortable:this,name:"remove",toEl:Ss,originalEvent:t}),Ba({rootEl:Ss,name:"sort",toEl:Ss,fromEl:ls,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ss,originalEvent:t})),Go&&Go.save()):Hl!==Ev&&Hl>=0&&(Ba({sortable:this,name:"update",toEl:Ss,originalEvent:t}),Ba({sortable:this,name:"sort",toEl:Ss,originalEvent:t})),zn.active&&((Hl==null||Hl===-1)&&(Hl=Ev,fp=I_),Ba({sortable:this,name:"end",toEl:Ss,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){gl("nulling",this),ls=Ot=Ss=Kn=kg=ms=JC=mp=gg=ic=c_=Hl=fp=Ev=I_=Zy=P_=Go=rC=zn.dragged=zn.ghost=zn.clone=zn.active=null,mT.forEach(function(t){t.checked=!0}),mT.length=cM=fM=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Ot&&(this._onDragOver(t),_Lt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],dc(n,o.draggable,this.el,!1)&&t.push(n.getAttribute(o.dataIdAttr)||TLt(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];dc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),t.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return dc(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=lS.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&aPe(r)},destroy:function(){gl("destroy",this);var t=this.el;t[Sl]=null,Fr(t,"mousedown",this._onTapStart),Fr(t,"touchstart",this._onTapStart),Fr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Fr(t,"dragover",this),Fr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),pT.splice(pT.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!mp){if(gl("hideClone",this),zn.eventCanceled)return;Bn(ms,"display","none"),this.options.removeCloneOnHide&&ms.parentNode&&ms.parentNode.removeChild(ms),mp=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(mp){if(gl("showClone",this),zn.eventCanceled)return;Ot.parentNode==ls&&!this.options.group.revertClone?ls.insertBefore(ms,Ot):kg?ls.insertBefore(ms,kg):ls.appendChild(ms),this.options.group.revertClone&&this.animate(Ot,ms),Bn(ms,"display",""),mp=!1}}};function _Lt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function oC(e,t,n,r,i,s,o,a){var l,u=e[Sl],f=u.options.onMove,c;return window.CustomEvent&&!Ch&&!aS?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=s||Ks(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),f&&(c=f.call(u,l,o)),c}function hM(e){e.draggable=!1}function ELt(){U$=!1}function SLt(e,t,n){var r=Ks(I1(n.el,0,n.options,!0)),i=iPe(n.el,n.options,Kn),s=10;return t?e.clientX<i.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-s||e.clientY<r.bottom&&e.clientX<r.left}function ALt(e,t,n){var r=Ks(NB(n.el,n.options.draggable)),i=iPe(n.el,n.options,Kn),s=10;return t?e.clientX>i.right+s||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+s||e.clientX>r.right&&e.clientY>r.top}function CLt(e,t,n,r,i,s,o,a){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,f=r?n.top:n.left,c=r?n.bottom:n.right,d=!1;if(!o){if(a&&QC<u*i){if(!N_&&(P_===1?l>f+u*s/2:l<c-u*s/2)&&(N_=!0),N_)d=!0;else if(P_===1?l<f+QC:l>c-QC)return-P_}else if(l>f+u*(1-i)/2&&l<c-u*(1-i)/2)return kLt(t)}return d=d||o,d&&(l<f+u*s/2||l>c-u*s/2)?l>f+u/2?1:-1:0}function kLt(e){return wu(Ot)<wu(e)?1:-1}function TLt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function DLt(e){mT.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&mT.push(r)}}function e3(e){return setTimeout(e,0)}function q$(e){return clearTimeout(e)}NR&&jr(document,"touchmove",function(e){(zn.active||ov)&&e.cancelable&&e.preventDefault()});zn.utils={on:jr,off:Fr,css:Bn,find:ePe,is:function(t,n){return!!dc(t,n,t,!1)},extend:fLt,throttle:tPe,closest:dc,toggleClass:Ul,clone:rPe,index:wu,nextTick:e3,cancelNextTick:q$,detectDirection:oPe,getChild:I1,expando:Sl};zn.get=function(e){return e[Sl]};zn.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(zn.utils=Vf(Vf({},zn.utils),r.utils)),lS.mount(r)})};zn.create=function(e,t){return new zn(e,t)};zn.version=uLt;var Xs=[],f_,H$,G$=!1,pM,mM,gT,d_;function LLt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?jr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?jr(document,"pointermove",this._handleFallbackAutoScroll):r.touches?jr(document,"touchmove",this._handleFallbackAutoScroll):jr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Fr(document,"dragover",this._handleAutoScroll):(Fr(document,"pointermove",this._handleFallbackAutoScroll),Fr(document,"touchmove",this._handleFallbackAutoScroll),Fr(document,"mousemove",this._handleFallbackAutoScroll)),KEe(),t3(),dLt()},nulling:function(){gT=H$=f_=G$=d_=pM=mM=null,Xs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(gT=n,r||this.options.forceAutoScrollFallback||aS||Ch||M_){gM(n,this.options,a,r);var l=Lp(a,!0);G$&&(!d_||s!==pM||o!==mM)&&(d_&&KEe(),d_=setInterval(function(){var u=Lp(document.elementFromPoint(s,o),!0);u!==l&&(l=u,t3()),gM(n,i.options,u,r)},10),pM=s,mM=o)}else{if(!this.options.bubbleScroll||Lp(a,!0)===Of()){t3();return}gM(n,this.options,Lp(a,!1),!1)}}},hh(e,{pluginName:"scroll",initializeByDefault:!0})}function t3(){Xs.forEach(function(e){clearInterval(e.pid)}),Xs=[]}function KEe(){clearInterval(d_)}var gM=tPe(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,a=t.scrollSpeed,l=Of(),u=!1,f;H$!==n&&(H$=n,t3(),f_=t.scroll,f=t.scrollFn,f_===!0&&(f_=Lp(n,!0)));var c=0,d=f_;do{var h=d,p=Ks(h),g=p.top,v=p.bottom,x=p.left,y=p.right,w=p.width,_=p.height,A=void 0,T=void 0,D=h.scrollWidth,k=h.scrollHeight,R=Bn(h),O=h.scrollLeft,B=h.scrollTop;h===l?(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),T=_<k&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(A=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"),T=_<k&&(R.overflowY==="auto"||R.overflowY==="scroll"));var K=A&&(Math.abs(y-i)<=o&&O+w<D)-(Math.abs(x-i)<=o&&!!O),L=T&&(Math.abs(v-s)<=o&&B+_<k)-(Math.abs(g-s)<=o&&!!B);if(!Xs[c])for(var $=0;$<=c;$++)Xs[$]||(Xs[$]={});(Xs[c].vx!=K||Xs[c].vy!=L||Xs[c].el!==h)&&(Xs[c].el=h,Xs[c].vx=K,Xs[c].vy=L,clearInterval(Xs[c].pid),(K!=0||L!=0)&&(u=!0,Xs[c].pid=setInterval((function(){r&&this.layer===0&&zn.active._onTouchMove(gT);var I=Xs[this.layer].vy?Xs[this.layer].vy*a:0,U=Xs[this.layer].vx?Xs[this.layer].vx*a:0;typeof f=="function"&&f.call(zn.dragged.parentNode[Sl],U,I,e,gT,Xs[this.layer].el)!=="continue"||nPe(Xs[this.layer].el,U,I)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&d!==l&&(d=Lp(d,!1)));G$=u}},30),cPe=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function BB(){}BB.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=I1(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:cPe};hh(BB,{pluginName:"revertOnSpill"});function zB(){}zB.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:cPe};hh(zB,{pluginName:"removeOnSpill"});zn.mount(new LLt);zn.mount(zB,BB);const RLt=e=>{const t=e.item;let n=Array.prototype.slice.call(t.parentNode.childNodes);return n=n.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),n},FLt=(e,t,n,r,i,s)=>{const a=e.item.parentNode;for(const g of n)a.appendChild(g);if(e.oldIndex==e.newIndex)return;const l=r.getArray(),u=e.item.querySelector("eox-layercontrol-layer").layer.get(i),f=l.find(g=>g.get(i)===u),c=s.dataset.layer,d=l.find(g=>g.get(i)==c);let h,p;for(h=0;h<l.length;h++)if(l[h]==f){r.removeAt(h);break}for(p=0;p<l.length;p++)if(l[p]===d){h>p?r.insertAt(p,f):r.insertAt(p+1,f);break}t.requestUpdate()};function OLt(e,t,n,r){let i=[],s=null;e._sortable=zn.create(e,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>i=RLt(o),onMove:o=>{s=o.related},onEnd:o=>FLt(o,r,i,t,n,s)})}function MLt(e,t,n,r){const i=e.getArray();let s=!1;i.forEach(o=>{const a=o.ol_uid;o.get(t)||(o.set(t,a),s=!0),o.get(n)||(o.set(n,`layer ${a}`),s=!0),s&&r.requestUpdate()})}function jB(e,t,n){let r=[];const i=(s,o,a)=>{r=[...r,...s.filter(u=>u.get(o)===a)];const l=s.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>i(u.getLayers().getArray(),o,a)),r};return i(e,t,n),r}function $Lt(e,t,n){if(!e||!t)return!1;if(!fPe(e,n))return!0;const r=e.get("minZoom"),i=e.get("maxZoom"),s=t.getView().getZoom();return s>r&&s<i}function fPe(e,t){const n=e.get("minZoom"),r=e.get("maxZoom");return!!(t&&(n!==-1/0||r!==1/0))}function ILt(e,t){var i,s,o;return!e||!t?void 0:e.getLayers?"group":((o=(i=t.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:i.ol_uid)==null?void 0:o.includes(e.getSource?(s=e.getSource())==null?void 0:s.ol_uid:void 0))?"draw":e.declutter_!==void 0?"vector":"raster"}const PLt=(e,t,n)=>{let r=t;return n.layer.getSource().getTileUrlFunction()&&(r||(r=n.layer.getSource().getTileUrlFunction()),n.layer.getSource().setTileUrlFunction((...i)=>sLt(r(...i),e)),n.layer.getSource().setKey(new Date)),r};function NLt(e,t,n){const r="updateStyleVariables"in t,i="setStyle"in t,s=r?t.style_:n.style;let o=s==null?void 0:s.variables;if(o){const a=UB(e);if(s.variables={...o,...a},r)t.updateStyleVariables(a);else if(i){const l=BLt(s);t.setStyle(l)}}}const UB=e=>{const t={};for(const n in e)if(typeof e[n]=="object"&&e[n]!==null){const r=UB(e[n]);for(const i in r)t[i]=r==null?void 0:r[i]}else t[n]=e==null?void 0:e[n];return t};function BLt(e){let t=e;if("variables"in e){let n=JSON.stringify(e);const{variables:r}=e;for(const i in r)typeof r[i]=="number"?n=n.replaceAll(`["var","${i}"]`,r[i]):n=n.replaceAll(`["var","${i}"]`,`"${r[i]}"`);t=JSON.parse(n)}return t}const zLt=(e,t)=>{if(!e)return;const n=UB(t);let r,i;return Array.isArray(e)?i=structuredClone(e):i=[structuredClone(e)],r=i.filter(s=>{if(!("boundTo"in s))return!0;const o=s.boundTo.key,a=s.boundTo.value;return!(o in n)||n[o]==a}),r.length||(r=i),r.map(s=>{var o;return delete s.boundTo,!("domainProperties"in s)||"domain"in s?s:(o=Object.keys(s))==null?void 0:o.reduce((a,l)=>(l==="domainProperties"?a.domain=s[l].map(u=>n[u]):a[l]=s[l],a),{})})};function dPe(e,t){var r;let n={};for(const i in e){const s=e[i].type;if(s&&s!=="object")n[i]=s==="number"?Number(t[i]):t[i];else if(typeof e[i]=="object"&&((r=e[i])!=null&&r.properties)){const o=dPe(e[i].properties,t);Object.keys(o).length>0&&(n[i]=o)}}return n}function jLt(e,t){var s,o,a,l,u;if(!t)return null;let n={},r="updateStyleVariables"in e?(s=e.style_)==null?void 0:s.variables:(o=t.style)==null?void 0:o.variables;if((t.type==="style"||t.style)&&r)n=r;else if((l=(a=e.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const f=new URL(e.getSource().getTileUrlFunction()([0,0,0]));n=Object.fromEntries(f.searchParams.entries())}else return null;const i=dPe(((u=t.schema)==null?void 0:u.properties)||t.schema,n);return Object.keys(i).length?i:null}const ULt=(e,t)=>e==null?void 0:e.filter(n=>["remove","sort"].filter(r=>t!=null&&t.get("layerControlDisable")?r!=="sort":!0).includes(n)),qLt=(e,t)=>e==null?void 0:e.filter(n=>{let r=!0;return["remove","sort"].includes(n)&&(r=!1),n==="info"&&(r=t.get("description")),n==="config"&&(r=t.get("layerConfig")),n==="datetime"&&(r=t.get("layerDatetime")),n==="legend"&&(r=t.get("layerLegend")),r}),HLt=(e,t)=>Ke`
  <button slot="${e}-icon" class="icon">${t?e:qr}</button>
`,GLt=e=>Ke`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:t}=e;t==null||t.set("layerControlOptional",!0),t==null||t.setVisible(!1),e.dispatchEvent(new CustomEvent("changed",{detail:t,bubbles:!0}))}}
  >
    ${e.unstyled?"x":qr}
  </button>
`,VLt=e=>Ke`
  <span class="button sort-icon icon drag-handle">
    ${e?"":qr}
  </span>
`,hPe=e=>{var n;const t=["layerControlHide","layerControlOptional"];return(n=e==null?void 0:e.getArray())==null?void 0:n.filter(r=>t.every(i=>!r.get(i)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pPe=tE(class extends fD{constructor(e){if(super(e),e.type!==sp.PROPERTY&&e.type!==sp.ATTRIBUTE&&e.type!==sp.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!nze(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===fv||t===qr)return t;const n=e.element,r=e.name;if(e.type===sp.PROPERTY){if(t===n[r])return fv}else if(e.type===sp.BOOLEAN_ATTRIBUTE){if(!!t===n.hasAttribute(r))return fv}else if(e.type===sp.ATTRIBUTE&&n.getAttribute(r)===t+"")return fv;return dI(e),t}});var yM,JEe;function WLt(){if(JEe)return yM;JEe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Xi=="object"&&Xi&&Xi.Object===Object&&Xi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,g=function(){return f.Date.now()};function v(T,D,k){var R,O,B,K,L,$,I=0,U=!1,q=!1,Y=!0;if(typeof T!="function")throw new TypeError(e);D=A(D)||0,y(k)&&(U=!!k.leading,q="maxWait"in k,B=q?h(A(k.maxWait)||0,D):B,Y="trailing"in k?!!k.trailing:Y);function X(je){var we=R,Ie=O;return R=O=void 0,I=je,K=T.apply(Ie,we),K}function te(je){return I=je,L=setTimeout(z,D),U?X(je):K}function le(je){var we=je-$,Ie=je-I,qe=D-we;return q?p(qe,B-Ie):qe}function ee(je){var we=je-$,Ie=je-I;return $===void 0||we>=D||we<0||q&&Ie>=B}function z(){var je=g();if(ee(je))return he(je);L=setTimeout(z,le(je))}function he(je){return L=void 0,Y&&R?X(je):(R=O=void 0,K)}function de(){L!==void 0&&clearTimeout(L),I=0,R=$=O=L=void 0}function ze(){return L===void 0?K:he(g())}function He(){var je=g(),we=ee(je);if(R=arguments,O=this,$=je,we){if(L===void 0)return te($);if(q)return L=setTimeout(z,D),X($)}return L===void 0&&(L=setTimeout(z,D)),K}return He.cancel=de,He.flush=ze,He}function x(T,D,k){var R=!0,O=!0;if(typeof T!="function")throw new TypeError(e);return y(k)&&(R="leading"in k?!!k.leading:R,O="trailing"in k?!!k.trailing:O),v(T,D,{leading:R,maxWait:D,trailing:O})}function y(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function w(T){return!!T&&typeof T=="object"}function _(T){return typeof T=="symbol"||w(T)&&d.call(T)==n}function A(T){if(typeof T=="number")return T;if(_(T))return t;if(y(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=y(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=s.test(T);return k||o.test(T)?a(T.slice(2),k?2:8):i.test(T)?t:+T}return yM=x,yM}var YLt=WLt();const QEe=sa(YLt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const aC=e=>e??qr;var Eu,NT,BT;class mPe extends Zr{constructor(){super();gn(this,Eu,[]);gn(this,NT,hI`
    .separator {
      margin: 0 0 24px 0;
    }
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      --cle-padding: 0;
    }
  `);gn(this,BT,"");this.unstyled=!1,this.noShadow=!1,this.layer=null}get layerLegend(){return $t(this,Eu)?$t(this,Eu).length>1?$t(this,Eu):$t(this,Eu)[0]:null}set layerLegend(n){var r;Array.isArray(n)?Ui(this,Eu,n.map((i,s)=>{var o;return{id:(((o=this.layer)==null?void 0:o.get("id"))??"")+s,...i}})):Ui(this,Eu,[{id:(((r=this.layer)==null?void 0:r.get("id"))??"")+0,...n}])}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){this.layerLegend&&new ResizeObserver(()=>{var n;Ui(this,Eu,(n=$t(this,Eu))==null?void 0:n.map(r=>(this.offsetWidth!==r.width&&(r.width=this.offsetWidth),{...r}))),this.requestUpdate()}).observe(this.renderRoot.querySelector(".legend-container"))}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),Ke`
      <style>
        ${$t(this,NT)}
        ${!this.unstyled&&$t(this,BT)}
      </style>
      ${Un(this.layerLegend,()=>Ke`
          <div class="legend-container">
            <!-- Render color-legend-->
            ${$t(this,Eu).map((n,r,i)=>Ke`
                <color-legend
                  id="${n.id}"
                  width=${n.width??325}
                  scaleType="${aC(n.scaleType)}"
                  markType="${aC(n.markType)}"
                  titleText="${aC(n.title)}"
                  .range=${n.range}
                  .domain=${n.domain}
                  tickFormat="${aC(n.tickFormat)}"
                  .ticks=${n.ticks??5}
                  .tickValues=${n.tickValues}
                  .marginLeft=${0}
                  .marginRight=${0}
                >
                </color-legend>
                ${r!==i.length-1?Ke`<div class="separator"></div>`:qr}
              `)}
          </div>
        `)}
    `}}Eu=new WeakMap,NT=new WeakMap,BT=new WeakMap,tn(mPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",mPe);var Id,Yv,K2,J2,V$,zT,jT;class gPe extends Zr{constructor(){super();gn(this,J2);gn(this,Id,{});gn(this,Yv,null);gn(this,K2);gn(this,zT,hI`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);gn(this,jT,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=QEe(dn(this,J2,V$),1e3)}updated(n){if(n.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=QEe(dn(this,J2,V$),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){Ui(this,Yv,jLt(this.layer,this.layerConfig)),Object.keys($t(this,Id)).length!==0&&Ui(this,Yv,$t(this,Id)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const n={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return Ke`
      <style>
        ${$t(this,zT)}
        ${!this.unstyled&&$t(this,jT)}
      </style>
      ${Un(this.layerConfig,()=>Ke`
          ${Un(this.layerConfig.legend,()=>Ke`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${zLt(this.layerConfig.legend,$t(this,Id))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${$t(this,Yv)}
            .options=${n}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}Id=new WeakMap,Yv=new WeakMap,K2=new WeakMap,J2=new WeakSet,V$=function(n){Ui(this,Id,n.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?NLt($t(this,Id),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):Ui(this,K2,PLt($t(this,Id),$t(this,K2),this)),this.dispatchEvent(new CustomEvent("layerConfig:change",{bubbles:!0,detail:{jsonformValue:n.detail,layer:this.layer}})),this.requestUpdate()},zT=new WeakMap,jT=new WeakMap,tn(gPe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",gPe);var UT,vPe,qT,HT;class yPe extends Zr{constructor(){super();gn(this,UT);gn(this,qT,"");gn(this,HT,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),Ke`
      <style>
        ${$t(this,qT)}
        ${!this.unstyled&&$t(this,HT)}
      </style>
      ${Un(this.layerDatetime,()=>Ke`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .navigation=${this.layerDatetime.navigation??!1}
            .slider=${this.layerDatetime.slider??!1}
            .play=${this.layerDatetime.play??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            .displayFormat=${this.layerDatetime.displayFormat}
            @stepchange=${dn(this,UT,vPe)}
          ></eox-timecontrol>
        `)}
    `}}UT=new WeakSet,vPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:n.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=n.detail.currentStep,this.requestUpdate()},qT=new WeakMap,HT=new WeakMap,tn(yPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",yPe);var Q2,GT,VT;class bPe extends Zr{constructor(){super();gn(this,Q2,n=>(this.selectedTab===n||this.toolsAsList)&&"highlighted");gn(this,GT,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
  `);gn(this,VT,`
    .listed label {
      display: flex;
      justify-content: start;
      align-items: center;
      background: var(--background-color) !important;
    }
    .listed label:not(:first-of-type) {
      margin-top: 10px;
    }
    .listed label span {
      text-transform: capitalize;
      font-weight: 300;
    }
    .tabbed, .listed {
      font-size: small;
    }
    .tabbed label.highlighted {
      border: 1px solid #0041701a;
      border-radius: 2px;
      border-bottom: none;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: var(--background-color);
      border: 1px solid #0041701a;
      border-radius: 2px;
      padding: var(--padding-vertical) var(--padding);
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.tabs,r=this.actions,i=r.length+n.length>1;return Ke`
      <style>
        ${$t(this,GT)}
        ${!this.unstyled&&$t(this,VT)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${Un(i,()=>Ke`
            <nav>
              ${Un(!this.toolsAsList,()=>Ke`
                  <div>
                    <!-- Labels for tabs -->
                    ${su(n,(s,o)=>Ke`
                        <label
                          class=${$t(this,Q2).call(this,o)}
                          @click=${()=>this.selectedTab=o}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${su(r,s=>Ke`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${su(n,(s,o)=>Ke`
              ${Un(this.toolsAsList,()=>Ke`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${s}-icon`}>${s}</slot>
                    <span>${s}</span>
                  </label>
                `)}
              <div class="tab ${$t(this,Q2).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}Q2=new WeakMap,GT=new WeakMap,VT=new WeakMap,tn(bPe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",bPe);const qB=':root,:host { --range-slider-height: 6px; --range-slider-thumb-size: 15px; --range-slider-thumb-border-radius: 50%; --range-slider-color: #004170; --range-slider-track-color: #d7dcdf; --range-slider-track-border-radius: 0;}input[type="range"] { -webkit-appearance: none; border: none; color: var(--range-slider-color); overflow: hidden; padding-left: 0; margin-left: 7px;}/*webkit*/input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; margin-top: calc( var(--range-slider-height) * 0.5 - var(--range-slider-thumb-size) * 0.5 );}input[type="range"]::-webkit-slider-runnable-track { height: var(--range-slider-height); border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-webkit-slider-thumb { cursor: grab; --clip-edges: 4px; --clip-top: calc( (var(--range-slider-thumb-size) - var(--range-slider-height)) * 0.5 ); --clip-bottom: calc(var(--range-slider-thumb-size) - var(--clip-top)); --clip-further: calc(100% + 1px); --box-fill: calc( -100vmax - var(--range-slider-thumb-size, var(--range-slider-thumb-size)) + 1px ) 0 0 100vmax currentColor; background: linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--range-slider-height) + 1px); background-color: currentColor; box-shadow: var(--box-fill); border-radius: var(--range-slider-thumb-size, var(--range-slider-thumb-size)); filter: brightness(100%); clip-path: polygon( 100% -1px, var(--clip-edges) -1px, 0 var(--clip-top), -100vmax var(--clip-top), -100vmax var(--clip-bottom), 0 var(--clip-bottom), var(--clip-edges) 100%, var(--clip-further) var(--clip-further) );}/*mozilla*/input[type="range"]::-moz-range-thumb { width: var(--range-slider-thumb-size); height: var(--range-slider-thumb-size); border-radius: var(--range-slider-thumb-border-radius); background: var(--range-slider-color); border: none; box-shadow: none; cursor: grab;}input[type="range"]::-moz-range-track { border: none; border-radius: var(--range-slider-track-border-radius); background: var(--range-slider-track-color); box-shadow: none;}input[type="range"]::-moz-range-progress { appearance: none; background: currentColor; transition-delay: 30ms;}input[type="range"]::-moz-range-track,input[type="range"]::-moz-range-progress { height: calc(var(--range-slider-height)); border-radius: var(--range-slider-track-border-radius);}/*toolcool slider*/tc-range-slider { --height: var(--range-slider-height); --panel-bg: var(--range-slider-track-color); --panel-bg-hover: var(--range-slider-track-color); --panel-bg-fill: var(--range-slider-color); --panel-bg-border-radius: var(--range-slider-track-border-radius); --pointer-bg: var(--range-slider-color); --pointer-bg-hover: var(--range-slider-color); --pointer-bg-focus: var(--range-slider-color); --pointer-width: var(--range-slider-thumb-size); --pointer-height: var(--range-slider-thumb-size); --pointer-shadow: none; --pointer-shadow-hover: none; --pointer-shadow-focus: none; --pointer-border: none; --pointer-border-hover: 0; --pointer-border-focus: 0; --pointer-border-radius: var(--range-slider-thumb-border-radius);}';var WT,YT;class xPe extends Zr{constructor(){super();tn(this,"_removeButton",()=>GLt(this));tn(this,"_sortButton",()=>VLt(this.unstyled));tn(this,"_button",n=>HLt(n,this.unstyled));tn(this,"_getDefaultTools",()=>{var n;return Ke`
      <div slot="info-content">
        ${Cc(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <!-- Input for opacity -->
        <input
          type="range"
          min="0"
          max="1"
          step="0.01"
          value=${pPe((n=this.layer)==null?void 0:n.getOpacity())}
          @input=${r=>this.layer.setOpacity(parseFloat(r.target.value))}
        />
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${Un(this.layer.get("layerConfig"),()=>Ke`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${Un(this.layer.get("layerDatetime"),()=>Ke`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${Un(this.layer.get("layerLegend"),()=>Ke`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton()}</div>
      <div slot="sort-icon">${this._sortButton()}</div>
    `});gn(this,WT,"");gn(this,YT,`
    ${iS}  
    ${MB}
    ${IR}
    ${qB}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tools-items button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tools-items button.icon {
      opacity: .7;
    }
    eox-layercontrol-tools-items.tools-list button.icon {
      cursor: auto;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tools-items button.icon:hover {
      opacity: 1;
    }
    eox-layercontrol-tools-items.tools-list button.icon:hover {
      opacity: .7;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
      margin-right: var(--padding);
    }
    eox-layercontrol-tools-items button.icon,
    eox-layercontrol-tools-items .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tools-items.tools-list button.icon,
    eox-layercontrol-tools-items.tools-list .button.icon {
      margin-left: -6px;
    }
    eox-layercontrol-tools-items button.icon::before,
    eox-layercontrol-tools-items .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    details.tools summary .datetime-icon,
    button.icon[slot=datetime-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eclock-outline%3C/title%3E%3Cpath d='M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z' /%3E%3C/svg%3E");
    }
    details.tools summary .legend-icon,
    button.icon[slot=legend-icon]::before {
      content: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Ctitle%3Emap-legend%3C%2Ftitle%3E%3Cpath%20d%3D%22M9%2C3L3.36%2C4.9C3.15%2C4.97%203%2C5.15%203%2C5.38V20.5A0.5%2C0.5%200%200%2C0%203.5%2C21L3.66%2C20.97L9%2C18.9L15%2C21L20.64%2C19.1C20.85%2C19.03%2021%2C18.85%2021%2C18.62V3.5A0.5%2C0.5%200%200%2C0%2020.5%2C3L20.34%2C3.03L15%2C5.1L9%2C3M8%2C5.45V17.15L5%2C18.31V6.46L8%2C5.45M10%2C5.47L14%2C6.87V18.53L10%2C17.13V5.47M19%2C5.7V17.54L16%2C18.55V6.86L19%2C5.7M7.46%2C6.3L5.57%2C6.97V9.12L7.46%2C8.45V6.3M7.46%2C9.05L5.57%2C9.72V11.87L7.46%2C11.2V9.05M7.46%2C11.8L5.57%2C12.47V14.62L7.46%2C13.95V11.8M7.46%2C14.55L5.57%2C15.22V17.37L7.46%2C16.7V14.55Z%22%20%2F%3E%3C%2Fsvg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
    [slot=info-content] * {
      max-width: 100%;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const n=ULt(this.tools,this.layer),r=qLt(this.tools,this.layer),i=this[`_${n==null?void 0:n[0]}Button`]?this[`_${n==null?void 0:n[0]}Button`]():qr,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=n==null?void 0:n.length,a=r==null?void 0:r.length;return Ke`
      <style>
        ${$t(this,WT)}
        ${!this.unstyled&&$t(this,YT)}
      </style>
      ${Un(o+a>0,()=>Ke`
          ${Un(o===1&&a===0,()=>Ke`
              <div class="single-action-container">
                <div class="single-action">${i}</div>
              </div>
            `,()=>Ke`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||qr}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${n}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${su(r,u=>this._button(u))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools()}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}WT=new WeakMap,YT=new WeakMap,tn(xPe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",xPe);const XLt=e=>{const t=()=>{const n=$Lt(e.layer,e.map,e.showLayerZoomState);let r=!1;!n&&e.currLayerVisibilityBasedOnZoom?(e.currLayerVisibilityBasedOnZoom=!1,r=!0):n&&!e.currLayerVisibilityBasedOnZoom&&(e.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(e.requestUpdate(),e.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};fPe(e.layer,e.showLayerZoomState)&&(t(),e.map.getView().on("change:resolution",()=>t()))},ZLt=(e,t)=>{const n=t.layer;n.setVisible(e.target.checked),e.target.checked&&n.get("layerControlExclusive")&&t.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(i=>{var s;i.layer!==n&&((s=i.layer)!=null&&s.get("layerControlExclusive"))&&(i.layer.setVisible(!1),i.requestUpdate())}),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:n})),t.requestUpdate()};var _f,av,_Pe,XT,ZT;class wPe extends Zr{constructor(){super();gn(this,_f);tn(this,"currLayerVisibilityBasedOnZoom",!0);gn(this,XT,"");gn(this,ZT,`
    ${IR}
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: var(--padding-vertical) 0;
      display: var(--layer-visibility);
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .title {
      display: var(--layer-title-visibility);
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
      display: var(--layer-type-visibility);
    }
    [data-type] .title.color-swatch::before {
      background: var(--layer-color);
      border-radius: 3px;
      content: "" !important;
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){XLt(this)}render(){var l;const n=this.layer.getVisible(),r=n?"visible":"",i=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=dn(this,_f,av).call(this,"layerControlDisable")?"disabled":"",o=dn(this,_f,av).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return Ke`
      <style>
        ${$t(this,XT)}
        ${!this.unstyled&&$t(this,ZT)}
      </style>
      ${Un(this.layer,()=>Ke`
          <!-- Render the layer -->
          <div class="layer ${r} ${i}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${pPe(n)}
                @click=${dn(this,_f,_Pe)}
              />

              <!-- Layer title -->
              <span
                class="title ${dn(this,_f,av).call(this,"color")?"color-swatch":""}"
                style="--layer-color: ${dn(this,_f,av).call(this,"color")}"
              >
                ${dn(this,_f,av).call(this,this.titleProperty)}
              </span>
              ${Un(a,()=>Ke`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}_f=new WeakSet,av=function(n){var r;return(r=this.layer)==null?void 0:r.get(n)},_Pe=function(n){ZLt(n,this)},XT=new WeakMap,ZT=new WeakMap,tn(wPe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer",wPe);var KT,JT;class EPe extends Zr{constructor(){super();gn(this,KT,"");gn(this,JT,`
    details summary {
      cursor: pointer;
      display: var(--layer-summary-visibility);
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: var(--layer-visibility);
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var i,s;const n=!!((i=this.group)!=null&&i.get("layerControlExpand")),r=(s=hPe(this.group.getLayers()))==null?void 0:s.length;return Ke`
      <style>
        ${$t(this,KT)}
        ${!this.unstyled&&$t(this,JT)}
      </style>
      ${Un(this.group,()=>Ke`
          <!-- Render the details element with the layer control -->
          <details
            open=${n||qr}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}KT=new WeakMap,JT=new WeakMap,tn(EPe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",EPe);const KLt=e=>{const{layers:t,idProperty:n,titleProperty:r,renderRoot:i}=e,s=Y0(()=>{e.requestUpdate(),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),o=()=>s();if(t&&(t.hasListener("change:length")&&(t==null||t.un("change:length",o)),t.on("change:length",o),t)){const a=i.querySelector("ul");MLt(t,n,r,e),OLt(a,t,n,e)}};var QT,eD;class SPe extends Zr{constructor(){super();gn(this,QT,"");gn(this,eD,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: var(--list-padding);
    }
    li:not(li li) {
      padding-left: var(--padding);
    }
    li {
      list-style: none;
      border-bottom: 1px solid #0041703a;
      border: var(--layer-visibility);
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}firstUpdated(){KLt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.layers?hPe(this.layers).reverse():[];return Ke`
      <style>
        ${$t(this,QT)}
        ${!this.unstyled&&$t(this,eD)}
      </style>
      <ul>
        ${Un(this.layers,()=>Ke`
            ${AIe(n,r=>r,r=>Ke`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${ILt(r,this.map)}"
                >
                  ${r.getLayers?Ke`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:Ke`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}QT=new WeakMap,eD=new WeakMap,tn(SPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",SPe);const JLt=e=>{const t=e.querySelector("select[name=optional]"),n=t?t.value:null,r=jB(e.layers.getArray(),"layerControlOptional",!0).find(i=>(i.get(e.idProperty)||i.ol_uid)===n);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),e.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(i=>i.requestUpdate()),e.requestUpdate()};var tD,CPe;class APe extends Zr{constructor(){super();gn(this,tD);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=jB(this.layers.getArray(),"layerControlOptional",!0);return Ke`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${n.map(r=>{const i=r.get(this.idProperty)||r.ol_uid,s=r.get(this.titleProperty),o=`layer ${r.get(this.idProperty)}`;return Ke` <option value="${i}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${dn(this,tD,CPe)}">add</button>
    `}}tD=new WeakSet,CPe=function(){JLt(this)},tn(APe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",APe);const QLt=(e,t)=>{t.jsonInput=e.target.value,t.requestUpdate()},eSe=e=>{const t=JSON.parse(`{"data":${ZIe(e.jsonInput)}}`);Array.isArray(t.data)?t.data.forEach(n=>{e.eoxMap.addOrUpdateLayer(n)}):e.eoxMap.addOrUpdateLayer(t.data),e.jsonInput=null,e.requestUpdate()},eRt=(e,t)=>{t.urlInput=e.target.value,t.requestUpdate()};async function tRt(e){const t=e.urlInput;if(e.wmsCapabilities=null,e.searchLoad=!0,e.requestUpdate(),!t)return!1;if(IB(t)==="XYZ")return{Name:t};try{const n=await nLt(t);e.wmsCapabilities=n}catch{}finally{e.searchLoad=!1,e.requestUpdate()}return!1}const nRt=(e,t)=>{const{Name:n}=e,r=IB(t.urlInput)||"XYZ",i={type:"Tile",properties:{id:n,title:n},source:{type:r,url:t.urlInput,params:{LAYERS:n}}};t.jsonInput=JSON.stringify(i)},rRt=(e,t)=>{t.open=e||null,t.urlInput=null,t.jsonInput=null,t.wmsCapabilities=null,t.requestUpdate()};var ra,TPe,DPe,W$,LPe,RPe,n3,nD,rD;class kPe extends Zr{constructor(){super();gn(this,ra);tn(this,"urlInput",null);tn(this,"jsonInput",null);tn(this,"open",null);tn(this,"searchLoad",!1);tn(this,"wmsCapabilities",null);gn(this,nD,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);gn(this,rD,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.open?"open":"close",r=this.open==="url",i=this.open==="json",s=!rLt(this.urlInput)||this.searchLoad?!0:qr;return Ke`
      <style>
        ${$t(this,nD)}
        ${!this.unstyled&&$t(this,rD)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${n}">
            <li
              @click=${()=>dn(this,ra,n3).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>dn(this,ra,n3).call(this,"json")}
              class="${i?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>dn(this,ra,n3).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${n}">
          ${r?Ke`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${dn(this,ra,TPe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${dn(this,ra,DPe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?Ke`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return Ke`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>dn(this,ra,W$).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:qr}
            `:Ke`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${dn(this,ra,RPe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${iLt(this.jsonInput)?qr:!0}
                  @click=${dn(this,ra,LPe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}ra=new WeakSet,TPe=function(n){eRt(n,this)},DPe=async function(){const n=await tRt(this);n&&dn(this,ra,W$).call(this,n)},W$=function(n){nRt(n,this),eSe(this)},LPe=function(){eSe(this)},RPe=function(n){QLt(n,this)},n3=function(n){rRt(n,this)},nD=new WeakMap,rD=new WeakMap,tn(kPe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",kPe);const iRt=(e,t)=>{if(t.requestUpdate(),e.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const n=t.renderRoot.querySelector("eox-layercontrol-optional-list");n==null||n.requestUpdate()}},tSe=e=>{const t=e2(e.for);return t&&t.map!==e.map&&(e.map=t.map),t};var yp,lm,OPe,MPe,$Pe,iD;class FPe extends Zr{constructor(){super();gn(this,lm);gn(this,yp);gn(this,iD,`
    :host, :root {
      font-family: Roboto, sans-serif;
      --padding: 0.5rem;
      --padding-vertical: .2rem;
      --list-padding: 48px;
      --layer-input-visibility: flex;
      --layer-summary-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: flex;
      --layer-visibility: block;
      --layer-tools-button-visibility: flex;

      display: block;
      padding: var(--padding) 0;
      --background-color: var(--eox-background-color, transparent);
      background-color: var(--background-color, transparent);
    }
    select {
      background-color: var(--background-color);
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1}firstUpdated(){this.eoxMap=tSe(this)}updated(n){n.has("for")&&(this.eoxMap=tSe(this))}get eoxMap(){return $t(this,yp)}set eoxMap(n){const r=$t(this,yp);Ui(this,yp,n),this.requestUpdate("eoxMap",r)}render(){var i,s,o;const n=(i=this.map)==null?void 0:i.getLayers().getArray(),r=n&&((s=jB(n,"layerControlOptional",!0))==null?void 0:s.length)>0;return Ke`
      <style>
        ${!this.unstyled&&$t(this,iD)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${Un(this.addExternalLayers&&((o=$t(this,yp))==null?void 0:o.addOrUpdateLayer),()=>Ke`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${$t(this,yp)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Un(this.map,()=>Ke`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            @changed=${dn(this,lm,OPe)}
            @datetime:updated=${dn(this,lm,MPe)}
            @layerConfig:change=${dn(this,lm,$Pe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Un(r,()=>Ke`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}yp=new WeakMap,lm=new WeakSet,OPe=function(n){iRt(n,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:n.detail}))},MPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{detail:n.detail}))},$Pe=function(n){this.dispatchEvent(new CustomEvent("layerConfig:change",{detail:n.detail}))},iD=new WeakMap,tn(FPe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol",FPe);class sRt extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}class oRt extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;

          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(t,n,r){n!==r&&(this[t]=r),this.render()}}customElements.define("eox-layout",sRt);customElements.define("eox-layout-item",oRt);window.eoxMapAdvancedOlFormats=rYe;var Ya=(e,t,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(e,t)).next())}),Zl=Uint8Array,B_=Uint16Array,aRt=Int32Array,IPe=new Zl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),PPe=new Zl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lRt=new Zl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NPe=function(e,t){for(var n=new B_(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new aRt(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},BPe=NPe(IPe,2),zPe=BPe.b,uRt=BPe.r;zPe[28]=258,uRt[258]=28;var cRt=NPe(PPe,0),fRt=cRt.b,jPe=new B_(32768);for(gi=0;gi<32768;++gi)Dd=(gi&43690)>>1|(gi&21845)<<1,Dd=(Dd&52428)>>2|(Dd&13107)<<2,Dd=(Dd&61680)>>4|(Dd&3855)<<4,jPe[gi]=((Dd&65280)>>8|(Dd&255)<<8)>>1;var Dd,gi,z_=function(e,t,n){for(var r=e.length,i=0,s=new B_(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new B_(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var a;{a=new B_(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],f=t-e[i],c=o[e[i]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)a[jPe[c]>>l]=u}return a},uS=new Zl(288);for(gi=0;gi<144;++gi)uS[gi]=8;var gi;for(gi=144;gi<256;++gi)uS[gi]=9;var gi;for(gi=256;gi<280;++gi)uS[gi]=7;var gi;for(gi=280;gi<288;++gi)uS[gi]=8;var gi,UPe=new Zl(32);for(gi=0;gi<32;++gi)UPe[gi]=5;var gi,dRt=z_(uS,9),hRt=z_(UPe,5),vM=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},sc=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},bM=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},pRt=function(e){return(e+7)/8|0},mRt=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new Zl(n-t);return r.set(e.subarray(t,n)),r},gRt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vl=function(e,t,n){var r=new Error(t||gRt[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Vl),!n)throw r;return r},HB=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Zl(0);var o=!n||t.i!=2,a=t.i;n||(n=new Zl(i*3));var l=function(Ie){var qe=n.length;if(Ie>qe){var Pe=new Zl(Math.max(qe*2,Ie));Pe.set(n),n=Pe}},u=t.f||0,f=t.p||0,c=t.b||0,d=t.l,h=t.d,p=t.m,g=t.n,v=i*8;do{if(!d){u=sc(e,f,1);var x=sc(e,f+1,3);if(f+=3,x)if(x==1)d=dRt,h=hRt,p=9,g=5;else if(x==2){var A=sc(e,f,31)+257,T=sc(e,f+10,15)+4,D=A+sc(e,f+5,31)+1;f+=14;for(var k=new Zl(D),R=new Zl(19),O=0;O<T;++O)R[lRt[O]]=sc(e,f+O*3,7);f+=T*3;for(var B=vM(R),K=(1<<B)-1,L=z_(R,B),O=0;O<D;){var $=L[sc(e,f,K)];f+=$&15;var y=$>>4;if(y<16)k[O++]=y;else{var I=0,U=0;for(y==16?(U=3+sc(e,f,3),f+=2,I=k[O-1]):y==17?(U=3+sc(e,f,7),f+=3):y==18&&(U=11+sc(e,f,127),f+=7);U--;)k[O++]=I}}var q=k.subarray(0,A),Y=k.subarray(A);p=vM(q),g=vM(Y),d=z_(q,p),h=z_(Y,g)}else Vl(1);else{var y=pRt(f)+4,w=e[y-4]|e[y-3]<<8,_=y+w;if(_>i){a&&Vl(0);break}o&&l(c+w),n.set(e.subarray(y,_),c),t.b=c+=w,t.p=f=_*8,t.f=u;continue}if(f>v){a&&Vl(0);break}}o&&l(c+131072);for(var X=(1<<p)-1,te=(1<<g)-1,le=f;;le=f){var I=d[bM(e,f)&X],ee=I>>4;if(f+=I&15,f>v){a&&Vl(0);break}if(I||Vl(2),ee<256)n[c++]=ee;else if(ee==256){le=f,d=null;break}else{var z=ee-254;if(ee>264){var O=ee-257,he=IPe[O];z=sc(e,f,(1<<he)-1)+zPe[O],f+=he}var de=h[bM(e,f)&te],ze=de>>4;de||Vl(3),f+=de&15;var Y=fRt[ze];if(ze>3){var he=PPe[ze];Y+=bM(e,f)&(1<<he)-1,f+=he}if(f>v){a&&Vl(0);break}o&&l(c+131072);var He=c+z;if(c<Y){var je=s-Y,we=Math.min(Y,He);for(je+c<0&&Vl(3);c<we;++c)n[c]=r[je+c]}for(;c<He;c+=4)n[c]=n[c-Y],n[c+1]=n[c+1-Y],n[c+2]=n[c+2-Y],n[c+3]=n[c+3-Y];c=He}}t.l=d,t.p=le,t.b=c,t.f=u,d&&(u=1,t.m=p,t.d=h,t.n=g)}while(!u);return c==n.length?n:mRt(n,0,c)},yRt=new Zl(0),vRt=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Vl(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},bRt=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},xRt=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Vl(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Vl(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function wRt(e,t){return HB(e,{i:2},t,t)}function _Rt(e,t){var n=vRt(e);return n+8>e.length&&Vl(6,"invalid gzip data"),HB(e.subarray(n,-8),{i:2},new Zl(bRt(e)),t)}function ERt(e,t){return HB(e.subarray(xRt(e,t),-4),{i:2},t,t)}function Y$(e,t){return e[0]==31&&e[1]==139&&e[2]==8?_Rt(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?wRt(e,t):ERt(e,t)}var SRt=typeof TextDecoder<"u"&&new TextDecoder,ARt=0;try{SRt.decode(yRt,{stream:!0}),ARt=1}catch{}var qPe=(e,t)=>e*Math.pow(2,t),Fw=(e,t)=>Math.floor(e/Math.pow(2,t)),yT=(e,t)=>qPe(e.getUint16(t+1,!0),8)+e.getUint8(t),HPe=(e,t)=>qPe(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),CRt=(e,t,n,r,i)=>{if(e!=r.getUint8(i))return e-r.getUint8(i);const s=yT(r,i+1);if(t!=s)return t-s;const o=yT(r,i+4);return n!=o?n-o:0},kRt=(e,t,n,r)=>{const i=GPe(e,t|128,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null},nSe=(e,t,n,r)=>{const i=GPe(e,t,n,r);return i?{z:t,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},GPe=(e,t,n,r)=>{let i=0,s=e.byteLength/17-1;for(;i<=s;){const o=s+i>>1,a=CRt(t,n,r,e,o*17);if(a>0)i=o+1;else if(a<0)s=o-1;else return[HPe(e,o*17+7),e.getUint32(o*17+13,!0)]}return null},TRt=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,VPe=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:yT(e,t*17+1),y:yT(e,t*17+4),offset:HPe(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:n>>7===1}},rSe=e=>{const t=[],n=new DataView(e);for(let r=0;r<n.byteLength/17;r++)t.push(VPe(n,r));return DRt(t)},DRt=e=>{e.sort(TRt);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++){const i=e[r];let s=i.z;i.is_dir&&(s=s|128),n[r*17]=s,n[r*17+1]=i.x&255,n[r*17+2]=i.x>>8&255,n[r*17+3]=i.x>>16&255,n[r*17+4]=i.y&255,n[r*17+5]=i.y>>8&255,n[r*17+6]=i.y>>16&255,n[r*17+7]=i.offset&255,n[r*17+8]=Fw(i.offset,8)&255,n[r*17+9]=Fw(i.offset,16)&255,n[r*17+10]=Fw(i.offset,24)&255,n[r*17+11]=Fw(i.offset,32)&255,n[r*17+12]=Fw(i.offset,48)&255,n[r*17+13]=i.length&255,n[r*17+14]=i.length>>8&255,n[r*17+15]=i.length>>16&255,n[r*17+16]=i.length>>24&255}return t},LRt=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,r=VPe(e,n-1);if(r.is_dir){const i=r.z,s=t.z-i,o=Math.trunc(t.x/(1<<s)),a=Math.trunc(t.y/(1<<s));return{z:i,x:o,y:a}}return null};function RRt(e){return Ya(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(t.data,10,r)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let f=0,c=0,d=0,h=-180,p=-85,g=180,v=85;if(o.bounds){const y=o.bounds.split(",");h=+y[0],p=+y[1],g=+y[2],v=+y[3]}if(o.center){const y=o.center.split(",");f=+y[0],c=+y[1],d=+y[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:h,minLat:p,maxLon:g,maxLat:v,centerZoom:d,centerLon:f,centerLat:c,etag:t.etag}})}function FRt(e,t,n,r,i,s,o){return Ya(this,null,function*(){let a=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=rSe(a));const l=nSe(new DataView(a),r,i,s);if(l){let c=(yield t.getBytes(l.offset,l.length,o)).data;const d=new DataView(c);return d.getUint8(0)==31&&d.getUint8(1)==139&&(c=Y$(new Uint8Array(c))),{data:c}}const u=LRt(new DataView(a),{z:r,x:i,y:s});if(u){const f=kRt(new DataView(a),u.z,u.x,u.y);if(f){let c=yield n.getArrayBuffer(t,f.offset,f.length,e);e.specVersion===1&&(c=rSe(c));const d=nSe(new DataView(c),r,i,s);if(d){let p=(yield t.getBytes(d.offset,d.length,o)).data;const g=new DataView(p);return g.getUint8(0)==31&&g.getUint8(1)==139&&(p=Y$(new Uint8Array(p))),{data:p}}}}})}var WPe={getHeader:RRt,getZxy:FRt};function Ky(e,t){return(t>>>0)*4294967296+(e>>>0)}function ORt(e,t){const n=t.buf;let r,i;if(i=n[t.pos++],r=(i&112)>>4,i<128||(i=n[t.pos++],r|=(i&127)<<3,i<128)||(i=n[t.pos++],r|=(i&127)<<10,i<128)||(i=n[t.pos++],r|=(i&127)<<17,i<128)||(i=n[t.pos++],r|=(i&127)<<24,i<128)||(i=n[t.pos++],r|=(i&1)<<31,i<128))return Ky(e,r);throw new Error("Expected varint not more than 10 bytes")}function Ow(e){const t=e.buf;let n,r;return r=t[e.pos++],n=r&127,r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,ORt(n,e))}function MRt(e,t,n,r){if(r==0){n==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var $Rt=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function IRt(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||n>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const r=$Rt[e],i=Math.pow(2,e);let s=0,o=0,a=0;const l=[t,n];let u=i/2;for(;u>0;)s=(l[0]&u)>0?1:0,o=(l[1]&u)>0?1:0,a+=u*u*(3*s^o),MRt(u,l,s,o),u=u/2;return r+a}function YPe(e,t){return Ya(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return Y$(new Uint8Array(e));{let r=new Response(e).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var lv=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(lv||{}),PRt=127;function NRt(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=r+n>>1,s=t-e[i].tileId;if(s>0)n=i+1;else if(s<0)r=i-1;else return e[i]}return r>=0&&(e[r].runLength===0||t-e[r].tileId<e[r].runLength)?e[r]:null}var BRt=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n){return Ya(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);const i=new Headers(this.customHeaders);i.set("Range","bytes="+e+"-"+(e+t-1));let s=yield fetch(this.url,{signal:n,headers:i});if(s.status===416&&e===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);s=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(u-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>t))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function oc(e,t){const n=e.getUint32(t+4,!0),r=e.getUint32(t+0,!0);return n*Math.pow(2,32)+r}function zRt(e,t){const n=new DataView(e),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:oc(n,8),rootDirectoryLength:oc(n,16),jsonMetadataOffset:oc(n,24),jsonMetadataLength:oc(n,32),leafDirectoryOffset:oc(n,40),leafDirectoryLength:oc(n,48),tileDataOffset:oc(n,56),tileDataLength:oc(n,64),numAddressedTiles:oc(n,72),numTileEntries:oc(n,80),numTileContents:oc(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function XPe(e){const t={buf:new Uint8Array(e),pos:0},n=Ow(t),r=[];let i=0;for(let s=0;s<n;s++){const o=Ow(t);r.push({tileId:i+o,offset:0,length:0,runLength:1}),i+=o}for(let s=0;s<n;s++)r[s].runLength=Ow(t);for(let s=0;s<n;s++)r[s].length=Ow(t);for(let s=0;s<n;s++){const o=Ow(t);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}function jRt(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Sv=class extends Error{};function URt(e,t,n,r){return Ya(this,null,function*(){const i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(jRt(i.data)<3)return[yield WPe.getHeader(e)];const o=i.data.slice(0,PRt);let a=i.etag;r&&i.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),a=void 0);const l=zRt(o,a);if(n){const u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),f=e.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=XPe(yield t(u,l.internalCompression));return[l,[f,c.length,c]]}return[l,void 0]})}function qRt(e,t,n,r,i){return Ya(this,null,function*(){const s=yield e.getBytes(n,r);if(i.etag&&i.etag!==s.etag)throw new Sv(s.etag);const o=yield t(s.data,i.internalCompression),a=XPe(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var HRt=class{constructor(e=100,t=!0,n=YPe){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.prefetch=t,this.decompress=n}getHeader(e,t){return Ya(this,null,function*(){const n=e.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((i,s)=>{URt(e,this.decompress,this.prefetch,t).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),i(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{qRt(e,this.decompress,t,n,r).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(e,t,n,r){return Ya(this,null,function*(){const i=e.getKey()+"|"+(r.etag||"")+"|"+t+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{e.getBytes(t,n).then(l=>{if(r.etag&&r.etag!==l.etag)throw new Sv(l.etag);o(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,r)=>{n.lastUsed<e&&(e=n.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e,t){return Ya(this,null,function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,t)})}},GB=class{constructor(e,t,n){typeof e=="string"?this.source=new BRt(e):this.source=e,n?this.decompress=n:this.decompress=YPe,t?this.cache=t:this.cache=new HRt}getHeader(){return Ya(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,r){return Ya(this,null,function*(){const i=IRt(e,t,n),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return WPe.getZxy(s,this.source,this.cache,e,t,n,r);if(e<s.minZoom||e>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,o,a,s),f=NRt(u,i);if(f)if(f.runLength>0){const c=yield this.source.getBytes(s.tileDataOffset+f.offset,f.length,r);if(s.etag&&s.etag!==c.etag)throw new Sv(c.etag);return{data:yield this.decompress(c.data,s.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else o=s.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,r){return Ya(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,r)}catch(i){if(i instanceof Sv)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(e,t,n,r);throw i}})}getMetadataAttempt(){return Ya(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength);if(e.etag&&e.etag!==t.etag)throw new Sv(t.etag);const n=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return Ya(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Sv)return this.cache.invalidate(this.source,e.message),yield this.getMetadataAttempt();throw e}})}};class GRt extends t3e{constructor(t){super(Cl.ERROR),this.error=t}}class is{constructor(t){this.name=t}toString(){return this.name}}is.GeoTIFF=new is("GeoTIFF");is.ImageStatic=new is("ImageStatic");is.PMTilesRaster=new is("PMTilesRaster");is.PMTilesVector=new is("PMTilesVector");is.TileJSON=new is("TileJSON");is.TileWMS=new is("TileWMS");is.WMTS=new is("WMTS");is.XYZ=new is("XYZ");class iSe extends dE{constructor(n){super({...n,state:"loading"});tn(this,"loadImage",n=>new Promise((r,i)=>{const s=new Image;s.addEventListener("load",()=>r(s)),s.addEventListener("error",()=>i(new Error("load failed"))),s.src=n}));const r=new GB(n.url);r.getHeader().then(i=>{this.tileGrid.minZoom=i.minZoom,this.tileGrid.maxZoom=i.maxZoom,this.setLoader(async(s,o,a)=>{const l=await r.getZxy(s,o,a),u=URL.createObjectURL(new Blob([l.data])),f=await this.loadImage(u);return URL.revokeObjectURL(u),f}),this.setState("ready")})}}class VRt extends wD{constructor(n){super({...n,state:"loading",url:"pmtiles://"+n.url+"/{z}/{x}/{y}",format:new UCe});tn(this,"tileLoadFunction",(n,r)=>{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=r.match(i),o=+s[2],a=+s[3],l=+s[4];n.setLoader((u,f,c)=>{n.setState(Ts.LOADING),this.pmtiles_.getZxy(o,a,l).then(d=>{if(d){const h=n.getFormat();n.setFeatures(h.readFeatures(d.data,{extent:u,featureProjection:c})),n.setState(Ts.LOADED)}else n.setFeatures([]),n.setState(Ts.EMPTY)}).catch(d=>{n.setFeatures([]),n.setState(Ts.ERROR)})})});this.pmtiles_=new GB(n.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}var r3={exports:{}},WRt=r3.exports,sSe;function YRt(){return sSe||(sSe=1,function(e,t){(function(n,r){e.exports=r()})(WRt,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(c,d){return c.indexOf(d)===-1?c.length:c.indexOf(d)}function i(c){var d=c.replace(/^v/,"").replace(/\+.*$/,""),h=r(d,"-"),p=d.substring(0,h).split(".");return p.push(d.substring(h+1)),p}function s(c){return isNaN(Number(c))?c:Number(c)}function o(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function a(c,d){[c,d].forEach(o);for(var h=i(c),p=i(d),g=0;g<Math.max(h.length-1,p.length-1);g++){var v=parseInt(h[g]||0,10),x=parseInt(p[g]||0,10);if(v>x)return 1;if(x>v)return-1}var y=h[h.length-1],w=p[p.length-1];if(y&&w){var _=y.split(".").map(s),A=w.split(".").map(s);for(g=0;g<Math.max(_.length,A.length);g++){if(_[g]===void 0||typeof A[g]=="string"&&typeof _[g]=="number")return-1;if(A[g]===void 0||typeof _[g]=="string"&&typeof A[g]=="number"||_[g]>A[g])return 1;if(A[g]>_[g])return-1}}else if(y||w)return y?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function f(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(l.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(c){return typeof c=="string"&&n.test(c)},a.compare=function(c,d,h){f(h);var p=a(c,d);return u[h].indexOf(p)>-1},a})}(r3)),r3.exports}var xM,oSe;function XRt(){if(oSe)return xM;oSe=1;var e=YRt();const t="1.1.0",n=!0,r={classification:"https://stac-extensions.github.io/classification/v2.0.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.2.0/schema.json",eo:"https://stac-extensions.github.io/eo/v2.0.0/schema.json",file:"https://stac-extensions.github.io/file/v2.1.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.2.0/schema.json",projection:"https://stac-extensions.github.io/projection/v2.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v2.0.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.1.0/schema.json",version:"https://stac-extensions.github.io/version/v1.2.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},i={itemAndCollection:{"classification:":r.classification,"cube:":r.datacube,"eo:":r.eo,"file:":r.file,"label:":r.label,"pc:":r.pointcloud,"processing:":r.processing,"proj:":r.projection,"raster:":r.raster,"sar:":r.sar,"sat:":r.sat,"sci:":r.scientific,"view:":r.view,version:r.version,deprecated:r.version,published:r.timestamps,expires:r.timestamps,unpublished:r.timestamps},catalog:{},collection:{},item:{}};i.collection=Object.assign(i.collection,i.itemAndCollection),i.item=Object.assign(i.item,i.itemAndCollection);var s={parseExtension(y){let w=y.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(w)return{id:w[1],version:w[2]};let _=y.match(/(\d+\.\d+(\.\d+)([a-z_.-][\w.-]+)?)/i);if(_)return{id:y,version:_[1]};if(y in r)return{id:y,version:"0.0.0"}}},o={version:t,extensions:{},set(y){if(typeof y.stac_version!="string"?o.version="0.6.0":o.version=y.stac_version,Array.isArray(y.stac_extensions))for(let w of y.stac_extensions){let _=s.parseExtension(w);_&&(o.extensions[_.id]=_.version)}},before(y,w=null){return o.compare("<",y,w)},compare(y,w,_=null){let A=_?o.extensions[_]:o.version;return typeof A>"u"?!1:e.compare(A,w,y)}},a={type(y){let w=typeof y;if(w==="object"){if(y===null)return"null";if(Array.isArray(y))return"array"}return w},is(y,w){return Array.isArray(w)?w.includes(a.type(y)):a.type(y)===w},isDefined(y){return typeof y<"u"},isObject(y){return typeof y=="object"&&y===Object(y)&&!Array.isArray(y)},rename(y,w,_){return typeof y[w]<"u"&&typeof y[_]>"u"?(y[_]=y[w],delete y[w],!0):!1},copy(y,w,_){return typeof y[w]<"u"&&typeof y[_]>"u"?(y[_]=y[w],!0):!1},forAll(y,w,_){if(y[w]&&typeof y[w]=="object")for(let A in y[w])_(y[w][A])},toArray(y,w){return typeof y[w]<"u"&&!Array.isArray(y[w])?(y[w]=[y[w]],!0):!1},flattenArray(y,w,_,A=!1){if(Array.isArray(y[w])){for(let T in y[w])if(typeof _[T]=="string"){let D=y[w][T];y[_[T]]=A?[D]:D}return delete y[w],!0}return!1},flattenOneElementArray(y,w,_=!1){return!_&&Array.isArray(y[w])?y[w].length===1?(y[w]=y[w][0],!0):!1:!0},removeFromArray(y,w,_){if(Array.isArray(y[w])){let A=y[w].indexOf(_);return A>-1&&y[w].splice(A,1),!0}return!1},pickFirst(y,w){return Array.isArray(y[w])&&y[w].length>0?(y[w]=y[w][0],!0):(delete y[w],!1)},ensure(y,w,_){return a.type(_)!==a.type(y[w])&&(y[w]=_),!0},upgradeExtension(y,w){let{id:_,version:A}=s.parseExtension(w),T=y.stac_extensions.findIndex(D=>{let k=s.parseExtension(D);return k&&k.id===_&&e.compare(k.version,A,"<")});return T!==-1?(y.stac_extensions[T]=w,!0):!1},addExtension(y,w){let{id:_,version:A}=s.parseExtension(w),T=y.stac_extensions.findIndex(D=>{if(D===w)return!0;let k=s.parseExtension(D);return!!(k&&k.id===_&&e.compare(k.version,A,"<"))});return T===-1?y.stac_extensions.push(w):y.stac_extensions[T]=w,y.stac_extensions.sort(),!0},removeExtension(y,w){return a.removeFromArray(y,"stac_extensions",w)},migrateExtensionShortnames(y){let w=Object.keys(r),_=Object.values(r);return a.mapValues(y,"stac_extensions",w,_)},populateExtensions(y,w){let _=[];(w=="catalog"||w=="collection")&&_.push(y),(w=="item"||w=="collection")&&a.isObject(y.assets)&&(_=_.concat(Object.values(y.assets))),w=="collection"&&a.isObject(y.item_assets)&&(_=_.concat(Object.values(y.item_assets))),w=="collection"&&a.isObject(y.summaries)&&_.push(y.summaries),w=="item"&&a.isObject(y.properties)&&_.push(y.properties),_.push(y.links);let A;for(;A=_.pop();)Object.keys(A).forEach(T=>{Array.isArray(A.bands)&&(_=_.concat(A.bands));let D=T.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(D)){let k=i[w][D[0]];a.is(k,"string")&&a.addExtension(y,k)}})},mapValues(y,w,_,A){let T=D=>{let k=_.indexOf(D);return k>=0?A[k]:D};return Array.isArray(y[w])?y[w]=y[w].map(T):typeof y[w]<"u"&&(y[w]=T(y[w])),!0},mapObject(y,w){for(let _ in y)y[_]=w(y[_],_)},moveTo(y,w,_,A=!1,T=!1){let D;return A?T?D=k=>Array.isArray(k):D=k=>Array.isArray(k)&&k.length===1:D=a.isDefined,D(y[w])?(_[w]=A&&!T?y[w][0]:y[w],delete y[w],!0):!1},runAll(y,w,_,A){for(let T in y)T.startsWith("migrate")||y[T](w,_,A)},toUTC(y,w){if(a.is(y[w],"string"))try{return y[w]=this.toISOString(y[w]),!0}catch{}return delete y[w],!1},toISOString(y){return y instanceof Date||(y=new Date(y)),y.toISOString().replace(/\.0+/,"")},formatString(y,w,_){const A=T=>a.is(T,["string","number"])?_.replaceAll("{}",T):T;Array.isArray(y[w])?y[w]=y[w].map(A):y[w]=A(y[w])}},l={multihash:null,hexToUint8(y){if(y.length===0||y.length%2!==0)throw new Error(`The string "${y}" is not valid hex.`);return new Uint8Array(y.match(/.{1,2}/g).map(w=>parseInt(w,16)))},uint8ToHex(y){return y.reduce((w,_)=>w+_.toString(16).padStart(2,"0"),"")},toMultihash(y,w,_){if(!l.multihash||!a.is(y[w],"string"))return!1;try{const A=l.multihash.encode(l.hexToUint8(y[w]),_);return y[w]=l.uint8ToHex(A),!0}catch(A){return console.warn(A),!1}}},u={migrate(y,w=!0){return o.set(y),w&&(y.stac_version=t),y.type="Catalog",a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"description",""),a.ensure(y,"links",[]),a.runAll(u,y,y),o.before("0.8.0")&&a.populateExtensions(y,"catalog"),y}},f={migrate(y,w=!0){return u.migrate(y,w),y.type="Collection",o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"license","other"),a.ensure(y,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),a.runAll(f,y,y),a.isObject(y.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),delete y.properties),o.before("0.8.0")&&a.populateExtensions(y,"collection"),o.before("1.0.0-beta.1")&&a.mapValues(y,"stac_extensions",["assets"],["item-assets"]),y},extent(y){if(a.ensure(y,"extent",{}),o.before("0.8.0")&&(Array.isArray(y.extent.spatial)&&(y.extent.spatial={bbox:[y.extent.spatial]}),Array.isArray(y.extent.temporal)&&(y.extent.temporal={interval:[y.extent.temporal]})),a.ensure(y.extent,"spatial",{}),a.ensure(y.extent.spatial,"bbox",[]),a.ensure(y.extent,"temporal",{}),a.ensure(y.extent.temporal,"interval",[]),o.before("1.0.0-rc.3")){if(y.extent.temporal.interval.length>1){let w,_;for(let A of y.extent.temporal.interval){if(A[0]===null)w=null;else if(typeof A[0]=="string"&&w!==null)try{let T=new Date(A[0]);(typeof w>"u"||T<w)&&(w=T)}catch{}if(A[1]===null)_=null;else if(typeof A[1]=="string"&&_!==null)try{let T=new Date(A[1]);(typeof _>"u"||T>_)&&(_=T)}catch{}}y.extent.temporal.interval.unshift([w?a.toISOString(w):null,_?a.toISOString(_):null])}if(y.extent.spatial.bbox.length>1){let w=y.extent.spatial.bbox.reduce((_,A)=>Array.isArray(A)?Math.max(A.length,_):_,4);if(w>=4){let _=new Array(w).fill(null),A=w/2;for(let T of y.extent.spatial.bbox){if(!Array.isArray(T)||T.length<4)break;for(let D in T){let k=T[D];_[D]===null?_[D]=k:D<A?_[D]=Math.min(k,_[D]):_[D]=Math.max(k,_[D])}}_.findIndex(T=>T===null)===-1&&y.extent.spatial.bbox.unshift(_)}}}},collectionAssets(y){o.before("1.0.0-rc.1")&&a.removeExtension(y,"collection-assets"),p.migrateAll(y)},itemAsset(y){o.before("1.0.0-beta.2")&&a.rename(y,"item_assets","assets"),a.removeExtension(y,r["item-assets"]),p.migrateAll(y,"item_assets")},summaries(y){if(a.ensure(y,"summaries",{}),o.before("0.8.0")&&a.isObject(y.other_properties)){for(let w in y.other_properties){let _=y.other_properties[w];Array.isArray(_.extent)&&_.extent.length===2?y.summaries[w]={minimum:_.extent[0],maximum:_.extent[1]}:Array.isArray(_.values)&&(_.values.filter(A=>Array.isArray(A)).length===_.values.length?y.summaries[w]=_.values.reduce((A,T)=>A.concat(T),[]):y.summaries[w]=_.values)}delete y.other_properties}if(o.before("1.0.0-beta.1")&&a.isObject(y.properties)&&!y.links.find(w=>["child","item"].includes(w.rel)))for(let w in y.properties){let _=y.properties[w];Array.isArray(_)||(_=[_]),y.summaries[w]=_}o.before("1.0.0-rc.1")&&a.mapObject(y.summaries,w=>(a.rename(w,"min","minimum"),a.rename(w,"max","maximum"),w)),v.migrate(y.summaries,y,!0),a.moveTo(y.summaries,"sci:doi",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:publications",y,!0,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:citation",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"cube:dimensions",y,!0)&&a.addExtension(y,r.datacube),Object.keys(y.summaries).length===0&&delete y.summaries}},c={migrate(y,w=null,_=!0){o.set(y),_&&(y.stac_version=t),a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"type","Feature"),a.isObject(y.geometry)||(y.geometry=null),y.geometry!==null&&a.ensure(y,"bbox",[]),a.ensure(y,"properties",{}),a.ensure(y,"links",[]),a.ensure(y,"assets",{});let A=!1;return a.isObject(w)&&a.isObject(w.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),y.properties=Object.assign({},w.properties,y.properties),A=!0),a.runAll(c,y,y),v.migrate(y.properties,y),p.migrateAll(y),(o.before("0.8.0")||A)&&a.populateExtensions(y,"item"),y}},d={migrate(y,w=!0){return a.ensure(y,"collections",[]),a.ensure(y,"links",[]),a.runAll(d,y,y),y.collections=y.collections.map(_=>f.migrate(_,w)),y}},h={migrate(y,w=!0){return a.ensure(y,"type","FeatureCollection"),a.ensure(y,"features",[]),a.ensure(y,"links",[]),a.runAll(h,y,y),y.features=y.features.map(_=>c.migrate(_,null,w)),y}},p={migrateAll(y,w="assets"){for(let _ in y[w])p.migrate(y[w][_],y)},migrate(y,w){return a.runAll(p,y,w),v.migrate(y,w),y},mediaTypes(y){a.is(y.type,"string")&&a.mapValues(y,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])}},g={migrateAll(y,w){if(o.before("1.0.0")){const _=a.isObject(w.properties)&&Array.isArray(w.properties.bands)?w.properties.bands:[];if(Array.isArray(y["eo:bands"]))for(let A in y["eo:bands"]){let T=y["eo:bands"][A];a.is(T,"number")&&a.isObject(_[T])&&(T=_[T]),a.isObject(T)||(T={}),y["eo:bands"][A]=T}}if(o.before("1.1.0-beta.1")&&(Array.isArray(y["raster:bands"])||Array.isArray(y["eo:bands"]))){a.ensure(y,"bands",[]);const _=y["raster:bands"]||[],A=y["eo:bands"]||[],T=Math.max(_.length,A.length);for(let D=0;D<T;D++)a.ensure(y.bands,D,{}),Object.assign(y.bands[D],_[D],A[D]),y.bands[D]=g.migrate(y.bands[D],w);delete y["raster:bands"],delete y["eo:bands"]}},migrate(y,w){return a.runAll(g,y,w),v.migrate(y,w),y},eo(y){o.before("2.0.0-beta.1","eo")&&(a.rename(y,"common_name","eo:common_name"),a.rename(y,"center_wavelength","eo:center_wavelength"),a.rename(y,"full_width_half_max","eo:full_width_half_max"),a.rename(y,"solar_illumination","eo:solar_illumination"))},raster(y){o.before("2.0.0-beta.1","raster")&&(a.rename(y,"sampling","raster:sampling"),a.rename(y,"bits_per_sample","raster:bits_per_sample"),a.rename(y,"spatial_resolution","raster:spatial_resolution"),a.rename(y,"scale","raster:scale"),a.rename(y,"offset","raster:offset"),a.rename(y,"histogram","raster:histogram"))}},v={migrate(y,w,_=!1){return a.runAll(v,y,w,_),y},_commonMetadata(y,w){o.before("1.0.0-rc.3")&&(a.toUTC(y,"created"),a.toUTC(y,"updated")),g.migrateAll(y,w)},_timestamps(y,w){a.toUTC(y,"published"),a.toUTC(y,"expires"),a.toUTC(y,"unpublished"),a.upgradeExtension(w,r.timestamps)},_versioningIndicator(y,w){a.upgradeExtension(w,r.version)},checksum(y,w){o.before("0.9.0")&&l.multihash&&(a.rename(y,"checksum:md5","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","md5"),a.rename(y,"checksum:sha1","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha1"),a.rename(y,"checksum:sha2","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha2-256"),a.rename(y,"checksum:sha3","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha3-256")),o.before("1.0.0-rc.1")&&a.rename(y,"checksum:multihash","file:checksum")&&a.addExtension(w,r.file),a.removeExtension(w,"checksum")},classification(y,w){o.before("1.1.0","classification")&&a.forAll(y,"classification:classes",_=>a.rename(_,"color-hint","color_hint")),o.before("2.0.0","classification")&&a.forAll(y,"classification:classes",_=>a.ensure(_,"name",_.description)),a.upgradeExtension(w,r.classification)},cube(y,w){a.upgradeExtension(w,r.datacube)},dtr(y,w){o.before("0.9.0")&&(a.rename(y,"dtr:start_datetime","start_datetime"),a.rename(y,"dtr:end_datetime","end_datetime"),a.removeExtension(w,"datetime-range"))},eo(y,w){o.before("0.9.0")&&(a.rename(y,"eo:epsg","proj:epsg")&&a.addExtension(w,r.projection),a.rename(y,"eo:platform","platform"),a.rename(y,"eo:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"eo:constellation","constellation"),a.rename(y,"eo:off_nadir","view:off_nadir")&&a.addExtension(w,r.view),a.rename(y,"eo:azimuth","view:azimuth")&&a.addExtension(w,r.view),a.rename(y,"eo:incidence_angle","view:incidence_angle")&&a.addExtension(w,r.view),a.rename(y,"eo:sun_azimuth","view:sun_azimuth")&&a.addExtension(w,r.view),a.rename(y,"eo:sun_elevation","view:sun_elevation")&&a.addExtension(w,r.view)),o.before("1.0.0-beta.1")&&a.rename(y,"eo:gsd","gsd"),a.upgradeExtension(w,r.eo)},file(y,w,_){a.rename(y,"file:bits_per_sample","raster:bits_per_sample")&&a.addExtension(w,r.raster),a.rename(y,"file:data_type","data_type"),a.rename(y,"file:unit","unit"),Array.isArray(y["file:nodata"])&&y["file:nodata"].length>1&&a.copy(y,"file:nodata","nodata:values"),a.rename(y,"file:nodata","nodata")&&!_&&a.pickFirst(y,"nodata"),a.upgradeExtension(w,r.file)},label(y,w){o.before("0.8.0")&&(a.rename(y,"label:property","label:properties"),a.rename(y,"label:task","label:tasks"),a.rename(y,"label:overview","label:overviews")&&a.toArray(y,"label:overviews"),a.rename(y,"label:method","label:methods"),a.toArray(y,"label:classes")),a.upgradeExtension(w,r.label)},pc(y,w){o.before("0.8.0")&&a.rename(y,"pc:schema","pc:schemas"),a.upgradeExtension(w,r.pointcloud)},processing(y,w){a.upgradeExtension(w,r.processing)},proj(y,w){a.rename(y,"proj:epsg","proj:code")&&a.formatString(y,"proj:code","EPSG:{}"),a.upgradeExtension(w,r.projection)},raster(y,w){a.upgradeExtension(w,r.raster)},sar(y,w,_){a.rename(y,"sar:incidence_angle","view:incidence_angle")&&a.addExtension(w,r.view),a.rename(y,"sar:pass_direction","sat:orbit_state")&&a.mapValues(y,"sat:orbit_state",[null],["geostationary"])&&a.addExtension(w,r.sat),o.before("0.7.0")&&(a.flattenArray(y,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],_),a.flattenArray(y,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],_),a.flattenArray(y,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],_),a.rename(y,"sar:off_nadir","view:off_nadir")&&a.addExtension(w,r.view)),o.before("0.9.0")&&(a.rename(y,"sar:platform","platform"),a.rename(y,"sar:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"sar:constellation","constellation"),a.rename(y,"sar:type","sar:product_type"),a.rename(y,"sar:polarization","sar:polarizations"),a.flattenOneElementArray(y,"sar:absolute_orbit",_)&&a.rename(y,"sar:absolute_orbit","sat:absolute_orbit")&&a.addExtension(w,r.sat),a.flattenOneElementArray(y,"sar:relative_orbit",_)&&a.rename(y,"sar:relative_orbit","sat:relative_orbit")&&a.addExtension(w,r.sat)),a.upgradeExtension(w,r.sar)},sat(y,w){o.before("0.9.0")&&(a.rename(y,"sat:off_nadir_angle","sat:off_nadir"),a.rename(y,"sat:azimuth_angle","sat:azimuth"),a.rename(y,"sat:sun_azimuth_angle","sat:sun_azimuth"),a.rename(y,"sat:sun_elevation_angle","sat:sun_elevation")),a.upgradeExtension(w,r.sat)},sci(y,w){a.upgradeExtension(w,r.scientific)},item(y){o.before("0.8.0")&&(a.rename(y,"item:license","license"),a.rename(y,"item:providers","providers"))},table(y,w){a.upgradeExtension(w,r.table)},view(y,w){a.upgradeExtension(w,r.view)}},x={item(y,w=null,_=!0){return c.migrate(y,w,_)},catalog(y,w=!0){return u.migrate(y,w)},collection(y,w=!0){return f.migrate(y,w)},collectionCollection(y,w=!0){return d.migrate(y,w)},itemCollection(y,w=!0){return h.migrate(y,w)},stac(y,w=!0){return y.type==="Feature"?x.item(y,null,w):y.type==="FeatureCollection"?x.itemCollection(y,w):y.type==="Collection"||!y.type&&a.isDefined(y.extent)&&a.isDefined(y.license)?x.collection(y,w):!y.type&&Array.isArray(y.collections)?x.collectionCollection(y,w):x.catalog(y,w)},enableMultihash(y){l.multihash=y}};return xM=x,xM}var ZRt=XRt();const KRt=sa(ZRt);function Al(e){return typeof e=="string"&&e.length>0}function Av(e,t,n,r=1e-8){if(typeof e!="number")return null;const i=t-r,s=n+r;return e<i||e>s?null:Math.min(Math.max(e,t),n)}function Tl(e){return typeof e=="object"&&e===Object(e)&&!Array.isArray(e)}function JRt(e){switch(e){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return e.startsWith("u")?0:null}function QRt(e){switch(e){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}function ZPe(e){const t={minimum:null,maximum:null},n=l=>l.minimum!==null&&l.maximum!==null,r=e.getMetadata("statistics");if(Tl(r)&&(typeof r.minimum=="number"&&(t.minimum=r.minimum),typeof r.maximum=="number"&&(t.maximum=r.maximum),n(t)))return t;const i=e.getMetadata("raster:histogram");if(Tl(i)&&(typeof i.min=="number"&&(t.minimum=i.min),typeof i.max=="number"&&(t.maximum=i.max),n(t)))return t;const s=e.getMetadata("classification:classes");if(Array.isArray(s)&&(s.reduce((l,u)=>(l.minimum=Math.min(l.minimum,u.value),l.maximum=Math.max(l.maximum,u.value),l),t),n(t)))return t;const o=e.getMetadata("file:values");if(Array.isArray(o)&&(o.reduce((l,u)=>(l.minimum=Math.min(l.minimum,...u.values),l.maximum=Math.max(l.maximum,...u.values),l),t),n(t)))return t;const a=e.getMetadata("data_type");return a&&(t.minimum=JRt(a),t.maximum=QRt(a)),t}function KPe(e){let t=[];const n=e.getMetadata("nodata");if(typeof n<"u")t.push(n);else{const r=e.getMetadata("file:nodata");if(typeof r<"u")t=r;else{const i=e.getMetadata("classification:classes");Array.isArray(i)&&(t=i.filter(s=>!!s.nodata).map(s=>s.value))}}return t.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}function Sb(e){let t=e.length>=6,n=e[0],r=e[t?3:2],i=e[1],s=e[t?4:3],o={west:n,east:r,south:i,north:s};return t&&(o.base=e[2],o.height=e[5]),o}function wM(e){let{west:t,east:n,south:r,north:i}=Sb(e);return[[[t,i],[t,r],[n,r],[n,i],[t,i]]]}function eFt(e){if(e=Tc(e,!0),!e)return null;let t=Sb(e),n=[];if(e8e(e)){let r=(t.west+360+t.east)/2;r>180&&(r-=360),n.push(r)}else n.push((t.west+t.east)/2);return n.push((t.south+t.north)/2),typeof t.base<"u"&&n.push((t.base+t.height)/2),n}function JPe(e){if(Array.isArray(e[0]))return e.map(JPe);const[t,n]=e;return[Av(t,-180,180),Av(n,-90,90)]}function i3(e){return Tl(e)&&(e.bbox&&(e.bbox=Tc(e.bbox)),e.type==="FeatureCollection"?e.features.forEach(t=>i3(t)):e.type==="Feature"?e.geometry=i3(e.geometry):e.type==="GeometryCollection"?e.geometries.forEach(t=>i3(t)):e.coordinates&&(e.coordinates=JPe(e.coordinates))),e}function QPe(e){const t=Tc(e);if(t?e=[t]:Array.isArray(e)&&(e=e.map(i=>Tc(i)).filter(i=>i!==null)),!Array.isArray(e)||e.length===0)return null;let n=e.reduce((i,s)=>{if(e8e(s)){let{west:o,east:a,south:l,north:u}=Sb(s);i.push(wM([-180,l,a,u])),i.push(wM([o,l,180,u]))}else i.push(wM(s));return i},[]),r=null;if(n.length===1?r={type:"Polygon",coordinates:n[0]}:n.length>1&&(r={type:"MultiPolygon",coordinates:n}),r)return{type:"Feature",geometry:r,properties:{}}}function Tc(e,t=!1){if(!Array.isArray(e)||![4,6].includes(e.length))return null;let{west:n,east:r,south:i,north:s,base:o,height:a}=Sb(e);return n=Av(n,-180,180),i=Av(i,-90,90),r=Av(r,-180,180),s=Av(s,-90,90),t&&e.length===6?e=[n,i,o,r,s,a]:e=[n,i,r,s],e.some(l=>l===null)?null:e}function e8e(e){if(e=Tc(e),!e)return!1;let{west:t,east:n}=Sb(e);return t>n}function t8e(e){if(!Array.isArray(e)||e.length===0)return null;let t={west:180,south:90,east:-180,north:-90};e.forEach(r=>{if(r=Tc(r),!r)return;let i=Sb(r),s=["west","south"];for(let o in i){let a=s.includes(o)?Math.min:Math.max;t[o]=a(t[o],i[o])}});let n=[t.west,t.south,t.east,t.north];return Tc(n)}class cS{constructor(t,n={},r=[]){if(!Tl(t))throw new Error("Given data is not an object");if(t instanceof cS){for(let i of r)this[i]=t[i];t=t.toJSON()}this._keyMap=n,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in t)typeof this[i]>"u"&&(i in n?this[i]=n[i](t[i],this):this[i]=t[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}isBand(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(t){return this[t]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return eFt(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let t={};return Object.keys(this).forEach(n=>{if(typeof this[n]=="function"||this._privateKeys.includes(n))return;let r=this[n];if(n in this._keyMap){let i=Array.isArray(r)?[]:{};for(let s in r)i[s]=r[s].toJSON();r=i}t[n]=r}),t}}var s3={exports:{}},h_={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var tFt=h_.exports,aSe;function nFt(){return aSe||(aSe=1,function(e,t){(function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Xi=="object"&&Xi;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,u=1,f=26,c=38,d=700,h=72,p=128,g="-",v=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,A=Math.floor,T=String.fromCharCode,D;function k(te){throw new RangeError(w[te])}function R(te,le){for(var ee=te.length,z=[];ee--;)z[ee]=le(te[ee]);return z}function O(te,le){var ee=te.split("@"),z="";ee.length>1&&(z=ee[0]+"@",te=ee[1]),te=te.replace(y,".");var he=te.split("."),de=R(he,le).join(".");return z+de}function B(te){for(var le=[],ee=0,z=te.length,he,de;ee<z;)he=te.charCodeAt(ee++),he>=55296&&he<=56319&&ee<z?(de=te.charCodeAt(ee++),(de&64512)==56320?le.push(((he&1023)<<10)+(de&1023)+65536):(le.push(he),ee--)):le.push(he);return le}function K(te){return R(te,function(le){var ee="";return le>65535&&(le-=65536,ee+=T(le>>>10&1023|55296),le=56320|le&1023),ee+=T(le),ee}).join("")}function L(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:l}function $(te,le){return te+22+75*(te<26)-((le!=0)<<5)}function I(te,le,ee){var z=0;for(te=ee?A(te/d):te>>1,te+=A(te/le);te>_*f>>1;z+=l)te=A(te/_);return A(z+(_+1)*te/(te+c))}function U(te){var le=[],ee=te.length,z,he=0,de=p,ze=h,He,je,we,Ie,qe,Pe,At,dt,nn;for(He=te.lastIndexOf(g),He<0&&(He=0),je=0;je<He;++je)te.charCodeAt(je)>=128&&k("not-basic"),le.push(te.charCodeAt(je));for(we=He>0?He+1:0;we<ee;){for(Ie=he,qe=1,Pe=l;we>=ee&&k("invalid-input"),At=L(te.charCodeAt(we++)),(At>=l||At>A((a-he)/qe))&&k("overflow"),he+=At*qe,dt=Pe<=ze?u:Pe>=ze+f?f:Pe-ze,!(At<dt);Pe+=l)nn=l-dt,qe>A(a/nn)&&k("overflow"),qe*=nn;z=le.length+1,ze=I(he-Ie,z,Ie==0),A(he/z)>a-de&&k("overflow"),de+=A(he/z),he%=z,le.splice(he++,0,de)}return K(le)}function q(te){var le,ee,z,he,de,ze,He,je,we,Ie,qe,Pe=[],At,dt,nn,Wt;for(te=B(te),At=te.length,le=p,ee=0,de=h,ze=0;ze<At;++ze)qe=te[ze],qe<128&&Pe.push(T(qe));for(z=he=Pe.length,he&&Pe.push(g);z<At;){for(He=a,ze=0;ze<At;++ze)qe=te[ze],qe>=le&&qe<He&&(He=qe);for(dt=z+1,He-le>A((a-ee)/dt)&&k("overflow"),ee+=(He-le)*dt,le=He,ze=0;ze<At;++ze)if(qe=te[ze],qe<le&&++ee>a&&k("overflow"),qe==le){for(je=ee,we=l;Ie=we<=de?u:we>=de+f?f:we-de,!(je<Ie);we+=l)Wt=je-Ie,nn=l-Ie,Pe.push(T($(Ie+Wt%nn,0))),je=A(Wt/nn);Pe.push(T($(je,0))),de=I(ee,dt,z==he),ee=0,++z}++ee,++le}return Pe.join("")}function Y(te){return O(te,function(le){return v.test(le)?U(le.slice(4).toLowerCase()):le})}function X(te){return O(te,function(le){return x.test(le)?"xn--"+q(le):le})}if(o={version:"1.3.2",ucs2:{decode:B,encode:K},decode:U,encode:q,toASCII:X,toUnicode:Y},r&&i)if(e.exports==r)i.exports=o;else for(D in o)o.hasOwnProperty(D)&&(r[D]=o[D]);else n.punycode=o})(tFt)}(h_,h_.exports)),h_.exports}var o3={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var rFt=o3.exports,lSe;function iFt(){return lSe||(lSe=1,function(e){(function(t,n){e.exports?e.exports=n():t.IPv6=n(t)})(rFt,function(t){var n=t&&t.IPv6;function r(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var f;for(f=0;f<l&&a[f]!=="";f++);if(f<u)for(a.splice(f,1,"0000");a.length<u;)a.splice(f,0,"0000");for(var c,d=0;d<u;d++){c=a[d].split("");for(var h=0;h<3&&(c[0]==="0"&&c.length>1);h++)c.splice(0,1);a[d]=c.join("")}var p=-1,g=0,v=0,x=-1,y=!1;for(d=0;d<u;d++)y?a[d]==="0"?v+=1:(y=!1,v>g&&(p=x,g=v)):a[d]==="0"&&(y=!0,x=d,v=1);v>g&&(p=x,g=v),g>1&&a.splice(p,g,""),l=a.length;var w="";for(a[0]===""&&(w=":"),d=0;d<l&&(w+=a[d],d!==l-1);d++)w+=":";return a[l-1]===""&&(w+=":"),w}function i(){return t.IPv6===this&&(t.IPv6=n),this}return{best:r,noConflict:i}})}(o3)),o3.exports}var a3={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var sFt=a3.exports,uSe;function oFt(){return uSe||(uSe=1,function(e){(function(t,n){e.exports?e.exports=n():t.SecondLevelDomains=n(t)})(sFt,function(t){var n=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(o+1,s)+" ")>=0:!1},is:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o>=0)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(0,s)+" ")>=0:!1},get:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return null;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=r.list[i.slice(s+1)];return!a||a.indexOf(" "+i.slice(o+1,s)+" ")<0?null:i.slice(o+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=n),this}};return r})}(a3)),a3.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var aFt=s3.exports,cSe;function lFt(){return cSe||(cSe=1,function(e){(function(t,n){e.exports?e.exports=n(nFt(),iFt(),oFt()):t.URI=n(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(aFt,function(t,n,r,i){var s=i&&i.URI;function o(L,$){var I=arguments.length>=1,U=arguments.length>=2;if(!(this instanceof o))return I?U?new o(L,$):new o(L):new o;if(L===void 0){if(I)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?L=location.href+"":L=""}if(L===null&&I)throw new TypeError("null is not a valid argument for URI");return this.href(L),$!==void 0?this.absoluteTo($):this}function a(L){return/^[0-9]+$/.test(L)}o.version="1.19.11";var l=o.prototype,u=Object.prototype.hasOwnProperty;function f(L){return L.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(L){return L===void 0?"Undefined":String(Object.prototype.toString.call(L)).slice(8,-1)}function d(L){return c(L)==="Array"}function h(L,$){var I={},U,q;if(c($)==="RegExp")I=null;else if(d($))for(U=0,q=$.length;U<q;U++)I[$[U]]=!0;else I[$]=!0;for(U=0,q=L.length;U<q;U++){var Y=I&&I[L[U]]!==void 0||!I&&$.test(L[U]);Y&&(L.splice(U,1),q--,U--)}return L}function p(L,$){var I,U;if(d($)){for(I=0,U=$.length;I<U;I++)if(!p(L,$[I]))return!1;return!0}var q=c($);for(I=0,U=L.length;I<U;I++)if(q==="RegExp"){if(typeof L[I]=="string"&&L[I].match($))return!0}else if(L[I]===$)return!0;return!1}function g(L,$){if(!d(L)||!d($)||L.length!==$.length)return!1;L.sort(),$.sort();for(var I=0,U=L.length;I<U;I++)if(L[I]!==$[I])return!1;return!0}function v(L){var $=/^\/+|\/+$/g;return L.replace($,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(L){if(!(!L||!L.nodeName)){var $=L.nodeName.toLowerCase();if(!($==="input"&&L.type!=="image"))return o.domAttributes[$]}};function x(L){return escape(L)}function y(L){return encodeURIComponent(L).replace(/[!'()*]/g,x).replace(/\*/g,"%2A")}o.encode=y,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=y,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(L,$){var I=o.encode(L+"");return $===void 0&&($=o.escapeQuerySpace),$?I.replace(/%20/g,"+"):I},o.decodeQuery=function(L,$){L+="",$===void 0&&($=o.escapeQuerySpace);try{return o.decode($?L.replace(/\+/g,"%20"):L)}catch{return L}};var w={encode:"encode",decode:"decode"},_,A=function(L,$){return function(I){try{return o[$](I+"").replace(o.characters[L][$].expression,function(U){return o.characters[L][$].map[U]})}catch{return I}}};for(_ in w)o[_+"PathSegment"]=A("pathname",w[_]),o[_+"UrnPathSegment"]=A("urnpath",w[_]);var T=function(L,$,I){return function(U){var q;I?q=function(le){return o[$](o[I](le))}:q=o[$];for(var Y=(U+"").split(L),X=0,te=Y.length;X<te;X++)Y[X]=q(Y[X]);return Y.join(L)}};o.decodePath=T("/","decodePathSegment"),o.decodeUrnPath=T(":","decodeUrnPathSegment"),o.recodePath=T("/","encodePathSegment","decode"),o.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),o.encodeReserved=A("reserved","encode"),o.parse=function(L,$){var I;return $||($={preventInvalidHostname:o.preventInvalidHostname}),L=L.replace(o.leading_whitespace_expression,""),L=L.replace(o.ascii_tab_whitespace,""),I=L.indexOf("#"),I>-1&&($.fragment=L.substring(I+1)||null,L=L.substring(0,I)),I=L.indexOf("?"),I>-1&&($.query=L.substring(I+1)||null,L=L.substring(0,I)),L=L.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),L=L.replace(/^[/\\]{2,}/i,"//"),L.substring(0,2)==="//"?($.protocol=null,L=L.substring(2),L=o.parseAuthority(L,$)):(I=L.indexOf(":"),I>-1&&($.protocol=L.substring(0,I)||null,$.protocol&&!$.protocol.match(o.protocol_expression)?$.protocol=void 0:L.substring(I+1,I+3).replace(/\\/g,"/")==="//"?(L=L.substring(I+3),L=o.parseAuthority(L,$)):(L=L.substring(I+1),$.urn=!0))),$.path=L,$},o.parseHost=function(L,$){L||(L=""),L=L.replace(/\\/g,"/");var I=L.indexOf("/"),U,q;if(I===-1&&(I=L.length),L.charAt(0)==="[")U=L.indexOf("]"),$.hostname=L.substring(1,U)||null,$.port=L.substring(U+2,I)||null,$.port==="/"&&($.port=null);else{var Y=L.indexOf(":"),X=L.indexOf("/"),te=L.indexOf(":",Y+1);te!==-1&&(X===-1||te<X)?($.hostname=L.substring(0,I)||null,$.port=null):(q=L.substring(0,I).split(":"),$.hostname=q[0]||null,$.port=q[1]||null)}return $.hostname&&L.substring(I).charAt(0)!=="/"&&(I++,L="/"+L),$.preventInvalidHostname&&o.ensureValidHostname($.hostname,$.protocol),$.port&&o.ensureValidPort($.port),L.substring(I)||"/"},o.parseAuthority=function(L,$){return L=o.parseUserinfo(L,$),o.parseHost(L,$)},o.parseUserinfo=function(L,$){var I=L,U=L.indexOf("\\");U!==-1&&(L=L.replace(/\\/g,"/"));var q=L.indexOf("/"),Y=L.lastIndexOf("@",q>-1?q:L.length-1),X;return Y>-1&&(q===-1||Y<q)?(X=L.substring(0,Y).split(":"),$.username=X[0]?o.decode(X[0]):null,X.shift(),$.password=X[0]?o.decode(X.join(":")):null,L=I.substring(Y+1)):($.username=null,$.password=null),L},o.parseQuery=function(L,$){if(!L)return{};if(L=L.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!L)return{};for(var I={},U=L.split("&"),q=U.length,Y,X,te,le=0;le<q;le++)Y=U[le].split("="),X=o.decodeQuery(Y.shift(),$),te=Y.length?o.decodeQuery(Y.join("="),$):null,X!=="__proto__"&&(u.call(I,X)?((typeof I[X]=="string"||I[X]===null)&&(I[X]=[I[X]]),I[X].push(te)):I[X]=te);return I},o.build=function(L){var $="",I=!1;return L.protocol&&($+=L.protocol+":"),!L.urn&&($||L.hostname)&&($+="//",I=!0),$+=o.buildAuthority(L)||"",typeof L.path=="string"&&(L.path.charAt(0)!=="/"&&I&&($+="/"),$+=L.path),typeof L.query=="string"&&L.query&&($+="?"+L.query),typeof L.fragment=="string"&&L.fragment&&($+="#"+L.fragment),$},o.buildHost=function(L){var $="";if(L.hostname)o.ip6_expression.test(L.hostname)?$+="["+L.hostname+"]":$+=L.hostname;else return"";return L.port&&($+=":"+L.port),$},o.buildAuthority=function(L){return o.buildUserinfo(L)+o.buildHost(L)},o.buildUserinfo=function(L){var $="";return L.username&&($+=o.encode(L.username)),L.password&&($+=":"+o.encode(L.password)),$&&($+="@"),$},o.buildQuery=function(L,$,I){var U="",q,Y,X,te;for(Y in L)if(Y!=="__proto__"&&u.call(L,Y))if(d(L[Y]))for(q={},X=0,te=L[Y].length;X<te;X++)L[Y][X]!==void 0&&q[L[Y][X]+""]===void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y][X],I),$!==!0&&(q[L[Y][X]+""]=!0));else L[Y]!==void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y],I));return U.substring(1)},o.buildQueryParameter=function(L,$,I){return o.encodeQuery(L,I)+($!==null?"="+o.encodeQuery($,I):"")},o.addQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&o.addQuery(L,U,$[U]);else if(typeof $=="string"){if(L[$]===void 0){L[$]=I;return}else typeof L[$]=="string"&&(L[$]=[L[$]]);d(I)||(I=[I]),L[$]=(L[$]||[]).concat(I)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(L,$,I){if(typeof $=="object")for(var U in $)u.call($,U)&&o.setQuery(L,U,$[U]);else if(typeof $=="string")L[$]=I===void 0?null:I;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(L,$,I){var U,q,Y;if(d($))for(U=0,q=$.length;U<q;U++)L[$[U]]=void 0;else if(c($)==="RegExp")for(Y in L)$.test(Y)&&(L[Y]=void 0);else if(typeof $=="object")for(Y in $)u.call($,Y)&&o.removeQuery(L,Y,$[Y]);else if(typeof $=="string")I!==void 0?c(I)==="RegExp"?!d(L[$])&&I.test(L[$])?L[$]=void 0:L[$]=h(L[$],I):L[$]===String(I)&&(!d(I)||I.length===1)?L[$]=void 0:d(L[$])&&(L[$]=h(L[$],I)):L[$]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(L,$,I,U){switch(c($)){case"String":break;case"RegExp":for(var q in L)if(u.call(L,q)&&$.test(q)&&(I===void 0||o.hasQuery(L,q,I)))return!0;return!1;case"Object":for(var Y in $)if(u.call($,Y)&&!o.hasQuery(L,Y,$[Y]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(I)){case"Undefined":return $ in L;case"Boolean":var X=!!(d(L[$])?L[$].length:L[$]);return I===X;case"Function":return!!I(L[$],$,L);case"Array":if(!d(L[$]))return!1;var te=U?p:g;return te(L[$],I);case"RegExp":return d(L[$])?U?p(L[$],I):!1:!!(L[$]&&L[$].match(I));case"Number":I=String(I);case"String":return d(L[$])?U?p(L[$],I):!1:L[$]===I;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var L=[],$=[],I=0,U=0;U<arguments.length;U++){var q=new o(arguments[U]);L.push(q);for(var Y=q.segment(),X=0;X<Y.length;X++)typeof Y[X]=="string"&&$.push(Y[X]),Y[X]&&I++}if(!$.length||!I)return new o("");var te=new o("").segment($);return(L[0].path()===""||L[0].path().slice(0,1)==="/")&&te.path("/"+te.path()),te.normalize()},o.commonPath=function(L,$){var I=Math.min(L.length,$.length),U;for(U=0;U<I;U++)if(L.charAt(U)!==$.charAt(U)){U--;break}return U<1?L.charAt(0)===$.charAt(0)&&L.charAt(0)==="/"?"/":"":((L.charAt(U)!=="/"||$.charAt(U)!=="/")&&(U=L.substring(0,U).lastIndexOf("/")),L.substring(0,U+1))},o.withinString=function(L,$,I){I||(I={});var U=I.start||o.findUri.start,q=I.end||o.findUri.end,Y=I.trim||o.findUri.trim,X=I.parens||o.findUri.parens,te=/[a-z0-9-]=["']?$/i;for(U.lastIndex=0;;){var le=U.exec(L);if(!le)break;var ee=le.index;if(I.ignoreHtml){var z=L.slice(Math.max(ee-3,0),ee);if(z&&te.test(z))continue}for(var he=ee+L.slice(ee).search(q),de=L.slice(ee,he),ze=-1;;){var He=X.exec(de);if(!He)break;var je=He.index+He[0].length;ze=Math.max(ze,je)}if(ze>-1?de=de.slice(0,ze)+de.slice(ze).replace(Y,""):de=de.replace(Y,""),!(de.length<=le[0].length)&&!(I.ignore&&I.ignore.test(de))){he=ee+de.length;var we=$(de,ee,he,L);if(we===void 0){U.lastIndex=he;continue}we=String(we),L=L.slice(0,ee)+we+L.slice(he),U.lastIndex=ee+we.length}}return U.lastIndex=0,L},o.ensureValidHostname=function(L,$){var I=!!L,U=!!$,q=!1;if(U&&(q=p(o.hostProtocols,$)),q&&!I)throw new TypeError("Hostname cannot be empty, if protocol is "+$);if(L&&L.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(L).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(L){if(L){var $=Number(L);if(!(a($)&&$>0&&$<65536))throw new TypeError('Port "'+L+'" is not a valid port')}},o.noConflict=function(L){if(L){var $={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&($.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&($.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&($.SecondLevelDomains=i.SecondLevelDomains.noConflict()),$}else i.URI===this&&(i.URI=s);return this},l.build=function(L){return L===!0?this._deferred_build=!0:(L===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function D(L){return function($,I){return $===void 0?this._parts[L]||"":(this._parts[L]=$||null,this.build(!I),this)}}function k(L,$){return function(I,U){return I===void 0?this._parts[L]||"":(I!==null&&(I=I+"",I.charAt(0)===$&&(I=I.substring(1))),this._parts[L]=I,this.build(!U),this)}}l.protocol=D("protocol"),l.username=D("username"),l.password=D("password"),l.hostname=D("hostname"),l.port=D("port"),l.query=k("query","?"),l.fragment=k("fragment","#"),l.search=function(L,$){var I=this.query(L,$);return typeof I=="string"&&I.length?"?"+I:I},l.hash=function(L,$){var I=this.fragment(L,$);return typeof I=="string"&&I.length?"#"+I:I},l.pathname=function(L,$){if(L===void 0||L===!0){var I=this._parts.path||(this._parts.hostname?"/":"");return L?(this._parts.urn?o.decodeUrnPath:o.decodePath)(I):I}else return this._parts.urn?this._parts.path=L?o.recodeUrnPath(L):"":this._parts.path=L?o.recodePath(L):"/",this.build(!$),this},l.path=l.pathname,l.href=function(L,$){var I;if(L===void 0)return this.toString();this._string="",this._parts=o._parts();var U=L instanceof o,q=typeof L=="object"&&(L.hostname||L.path||L.pathname);if(L.nodeName){var Y=o.getDomAttribute(L);L=L[Y]||"",q=!1}if(!U&&q&&L.pathname!==void 0&&(L=L.toString()),typeof L=="string"||L instanceof String)this._parts=o.parse(String(L),this._parts);else if(U||q){var X=U?L._parts:L;for(I in X)I!=="query"&&u.call(this._parts,I)&&(this._parts[I]=X[I]);X.query&&this.query(X.query,!1)}else throw new TypeError("invalid input");return this.build(!$),this},l.is=function(L){var $=!1,I=!1,U=!1,q=!1,Y=!1,X=!1,te=!1,le=!this._parts.urn;switch(this._parts.hostname&&(le=!1,I=o.ip4_expression.test(this._parts.hostname),U=o.ip6_expression.test(this._parts.hostname),$=I||U,q=!$,Y=q&&r&&r.has(this._parts.hostname),X=q&&o.idn_expression.test(this._parts.hostname),te=q&&o.punycode_expression.test(this._parts.hostname)),L.toLowerCase()){case"relative":return le;case"absolute":return!le;case"domain":case"name":return q;case"sld":return Y;case"ip":return $;case"ip4":case"ipv4":case"inet4":return I;case"ip6":case"ipv6":case"inet6":return U;case"idn":return X;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return te}return null};var R=l.protocol,O=l.port,B=l.hostname;l.protocol=function(L,$){if(L&&(L=L.replace(/:(\/\/)?$/,""),!L.match(o.protocol_expression)))throw new TypeError('Protocol "'+L+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return R.call(this,L,$)},l.scheme=l.protocol,l.port=function(L,$){return this._parts.urn?L===void 0?"":this:(L!==void 0&&(L===0&&(L=null),L&&(L+="",L.charAt(0)===":"&&(L=L.substring(1)),o.ensureValidPort(L))),O.call(this,L,$))},l.hostname=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L!==void 0){var I={preventInvalidHostname:this._parts.preventInvalidHostname},U=o.parseHost(L,I);if(U!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');L=I.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(L,this._parts.protocol)}return B.call(this,L,$)},l.origin=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=this.protocol(),U=this.authority();return U?(I?I+"://":"")+this.authority():""}else{var q=o(L);return this.protocol(q.protocol()).authority(q.authority()).build(!$),this}},l.host=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var I=o.parseHost(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.authority=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var I=o.parseAuthority(L,this._parts);if(I!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},l.userinfo=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var I=o.buildUserinfo(this._parts);return I&&I.substring(0,I.length-1)}else return L[L.length-1]!=="@"&&(L+="@"),o.parseUserinfo(L,this._parts),this.build(!$),this},l.resource=function(L,$){var I;return L===void 0?this.path()+this.search()+this.hash():(I=o.parse(L),this._parts.path=I.path,this._parts.query=I.query,this._parts.fragment=I.fragment,this.build(!$),this)},l.subdomain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,I)||""}else{var U=this._parts.hostname.length-this.domain().length,q=this._parts.hostname.substring(0,U),Y=new RegExp("^"+f(q));if(L&&L.charAt(L.length-1)!=="."&&(L+="."),L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return L&&o.ensureValidHostname(L,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Y,L),this.build(!$),this}},l.domain=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.match(/\./g);if(I&&I.length<2)return this._parts.hostname;var U=this._parts.hostname.length-this.tld($).length-1;return U=this._parts.hostname.lastIndexOf(".",U-1)+1,this._parts.hostname.substring(U)||""}else{if(!L)throw new TypeError("cannot set domain empty");if(L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(L,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=L;else{var q=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(q,L)}return this.build(!$),this}},l.tld=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&($=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var I=this._parts.hostname.lastIndexOf("."),U=this._parts.hostname.substring(I+1);return $!==!0&&r&&r.list[U.toLowerCase()]&&r.get(this._parts.hostname)||U}else{var q;if(L)if(L.match(/[^a-zA-Z0-9-]/))if(r&&r.is(L))q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L);else throw new TypeError('TLD "'+L+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");q=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L)}else throw new TypeError("cannot set TLD empty");return this.build(!$),this}},l.directory=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var I=this._parts.path.length-this.filename().length-1,U=this._parts.path.substring(0,I)||(this._parts.hostname?"/":"");return L?o.decodePath(U):U}else{var q=this._parts.path.length-this.filename().length,Y=this._parts.path.substring(0,q),X=new RegExp("^"+f(Y));return this.is("relative")||(L||(L="/"),L.charAt(0)!=="/"&&(L="/"+L)),L&&L.charAt(L.length-1)!=="/"&&(L+="/"),L=o.recodePath(L),this._parts.path=this._parts.path.replace(X,L),this.build(!$),this}},l.filename=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(typeof L!="string"){if(!this._parts.path||this._parts.path==="/")return"";var I=this._parts.path.lastIndexOf("/"),U=this._parts.path.substring(I+1);return L?o.decodePathSegment(U):U}else{var q=!1;L.charAt(0)==="/"&&(L=L.substring(1)),L.match(/\.?\//)&&(q=!0);var Y=new RegExp(f(this.filename())+"$");return L=o.recodePath(L),this._parts.path=this._parts.path.replace(Y,L),q?this.normalizePath($):this.build(!$),this}},l.suffix=function(L,$){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path||this._parts.path==="/")return"";var I=this.filename(),U=I.lastIndexOf("."),q,Y;return U===-1?"":(q=I.substring(U+1),Y=/^[a-z0-9%]+$/i.test(q)?q:"",L?o.decodePathSegment(Y):Y)}else{L.charAt(0)==="."&&(L=L.substring(1));var X=this.suffix(),te;if(X)L?te=new RegExp(f(X)+"$"):te=new RegExp(f("."+X)+"$");else{if(!L)return this;this._parts.path+="."+o.recodePath(L)}return te&&(L=o.recodePath(L),this._parts.path=this._parts.path.replace(te,L)),this.build(!$),this}},l.segment=function(L,$,I){var U=this._parts.urn?":":"/",q=this.path(),Y=q.substring(0,1)==="/",X=q.split(U);if(L!==void 0&&typeof L!="number"&&(I=$,$=L,L=void 0),L!==void 0&&typeof L!="number")throw new Error('Bad segment "'+L+'", must be 0-based integer');if(Y&&X.shift(),L<0&&(L=Math.max(X.length+L,0)),$===void 0)return L===void 0?X:X[L];if(L===null||X[L]===void 0)if(d($)){X=[];for(var te=0,le=$.length;te<le;te++)!$[te].length&&(!X.length||!X[X.length-1].length)||(X.length&&!X[X.length-1].length&&X.pop(),X.push(v($[te])))}else($||typeof $=="string")&&($=v($),X[X.length-1]===""?X[X.length-1]=$:X.push($));else $?X[L]=v($):X.splice(L,1);return Y&&X.unshift(""),this.path(X.join(U),I)},l.segmentCoded=function(L,$,I){var U,q,Y;if(typeof L!="number"&&(I=$,$=L,L=void 0),$===void 0){if(U=this.segment(L,$,I),!d(U))U=U!==void 0?o.decode(U):void 0;else for(q=0,Y=U.length;q<Y;q++)U[q]=o.decode(U[q]);return U}if(!d($))$=typeof $=="string"||$ instanceof String?o.encode($):$;else for(q=0,Y=$.length;q<Y;q++)$[q]=o.encode($[q]);return this.segment(L,$,I)};var K=l.query;return l.query=function(L,$){if(L===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="function"){var I=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),U=L.call(this,I);return this._parts.query=o.buildQuery(U||I,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this}else return L!==void 0&&typeof L!="string"?(this._parts.query=o.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this):K.call(this,L,$)},l.setQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="string"||L instanceof String)U[L]=$!==void 0?$:null;else if(typeof L=="object")for(var q in L)u.call(L,q)&&(U[q]=L[q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.addQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(U,L,$===void 0?null:$),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.removeQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(U,L,$),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&(I=$),this.build(!I),this},l.hasQuery=function(L,$,I){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(U,L,$,I)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(L){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!L)),this},l.normalizeHostname=function(L){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!L)),this},l.normalizePort=function(L){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!L)),this},l.normalizePath=function(L){var $=this._parts.path;if(!$)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!L),this;if(this._parts.path==="/")return this;$=o.recodePath($);var I,U="",q,Y;for($.charAt(0)!=="/"&&(I=!0,$="/"+$),($.slice(-3)==="/.."||$.slice(-2)==="/.")&&($+="/"),$=$.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),I&&(U=$.substring(1).match(/^(\.\.\/)+/)||"",U&&(U=U[0]));q=$.search(/\/\.\.(\/|$)/),q!==-1;){if(q===0){$=$.substring(3);continue}Y=$.substring(0,q).lastIndexOf("/"),Y===-1&&(Y=q),$=$.substring(0,Y)+$.substring(q+3)}return I&&this.is("relative")&&($=U+$.substring(1)),this._parts.path=$,this.build(!L),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(L){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!L)),this},l.normalizeFragment=function(L){return this._parts.fragment||(this._parts.fragment=null,this.build(!L)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var L=o.encode,$=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=L,o.decode=$}return this},l.unicode=function(){var L=o.encode,$=o.decode;o.encode=y,o.decode=unescape;try{this.normalize()}finally{o.encode=L,o.decode=$}return this},l.readable=function(){var L=this.clone();L.username("").password("").normalize();var $="";if(L._parts.protocol&&($+=L._parts.protocol+"://"),L._parts.hostname&&(L.is("punycode")&&t?($+=t.toUnicode(L._parts.hostname),L._parts.port&&($+=":"+L._parts.port)):$+=L.host()),L._parts.hostname&&L._parts.path&&L._parts.path.charAt(0)!=="/"&&($+="/"),$+=L.path(!0),L._parts.query){for(var I="",U=0,q=L._parts.query.split("&"),Y=q.length;U<Y;U++){var X=(q[U]||"").split("=");I+="&"+o.decodeQuery(X[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),X[1]!==void 0&&(I+="="+o.decodeQuery(X[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}$+="?"+I.substring(1)}return $+=o.decodeQuery(L.hash(),!0),$},l.absoluteTo=function(L){var $=this.clone(),I=["protocol","username","password","hostname","port"],U,q,Y;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L instanceof o||(L=new o(L)),$._parts.protocol||($._parts.protocol=L._parts.protocol,this._parts.hostname))return $;for(q=0;Y=I[q];q++)$._parts[Y]=L._parts[Y];return $._parts.path?($._parts.path.substring(-2)===".."&&($._parts.path+="/"),$.path().charAt(0)!=="/"&&(U=L.directory(),U=U||(L.path().indexOf("/")===0?"/":""),$._parts.path=(U?U+"/":"")+$._parts.path,$.normalizePath())):($._parts.path=L._parts.path,$._parts.query||($._parts.query=L._parts.query)),$.build(),$},l.relativeTo=function(L){var $=this.clone().normalize(),I,U,q,Y,X;if($._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L=new o(L).normalize(),I=$._parts,U=L._parts,Y=$.path(),X=L.path(),Y.charAt(0)!=="/")throw new Error("URI is already relative");if(X.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(I.protocol===U.protocol&&(I.protocol=null),I.username!==U.username||I.password!==U.password||I.protocol!==null||I.username!==null||I.password!==null)return $.build();if(I.hostname===U.hostname&&I.port===U.port)I.hostname=null,I.port=null;else return $.build();if(Y===X)return I.path="",$.build();if(q=o.commonPath(Y,X),!q)return $.build();var te=U.path.substring(q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return I.path=te+I.path.substring(q.length)||"./",$.build()},l.equals=function(L){var $=this.clone(),I=new o(L),U={},q={},Y={},X,te,le;if($.normalize(),I.normalize(),$.toString()===I.toString())return!0;if(X=$.query(),te=I.query(),$.query(""),I.query(""),$.toString()!==I.toString()||X.length!==te.length)return!1;U=o.parseQuery(X,this._parts.escapeQuerySpace),q=o.parseQuery(te,this._parts.escapeQuerySpace);for(le in U)if(u.call(U,le)){if(d(U[le])){if(!g(U[le],q[le]))return!1}else if(U[le]!==q[le])return!1;Y[le]=!0}for(le in q)if(u.call(q,le)&&!Y[le])return!1;return!0},l.preventInvalidHostname=function(L){return this._parts.preventInvalidHostname=!!L,this},l.duplicateQueryParameters=function(L){return this._parts.duplicateQueryParameters=!!L,this},l.escapeQuerySpace=function(L){return this._parts.escapeQuerySpace=!!L,this},o})}(s3)),s3.exports}var uFt=lFt();const X$=sa(uFt),fSe=["http","https"];function cFt(e,t,n=!0){return fFt(e,t,!1,n)}function fFt(e,t=null,n=!1,r=!0){let i=X$(e);if(t&&i.is("relative")){let s=X$(t),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),i=i.absoluteTo(s)}return i.normalize(),n&&(i.query(""),i.fragment("")),r?i.toString():i}const Z$="application/geo+json",dFt=["application/json",Z$,"text/json"],dSe=["image/gif","image/jpeg","image/apng","image/png","image/webp"],n8e=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],r8e=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(n8e);function VB(e,t,n=!1){return Array.isArray(t)||(t=[t]),n&&typeof e>"u"?!0:typeof e!="string"?!1:(t=t.map(r=>r.toLowerCase()),t.includes(e.toLowerCase()))}function hFt(e,t=!1){return VB(e,dFt,t)}class i8e extends cS{constructor(t,n=null,r={},i=[]){super(t,r,["_context"].concat(i)),this._context||(this._context=n)}getAbsoluteUrl(t=!0){return this._context?cFt(this.href,this._context.getAbsoluteUrl(),t):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(t=!1){if(typeof this.href!="string")return!1;if(!t&&typeof this.type>"u")return!1;let n=new X$(this.href),r=n.protocol().toLowerCase(),i=n.suffix().toLowerCase();return Al(r)&&!fSe.includes(r)?!1:Al(this.type)&&dSe.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Al(i)&&(i==="jpg"||dSe.includes("image/"+i)))}isType(t){return Al(this.type)&&VB(this.type,t)}isGeoTIFF(){return this.isType(r8e)}isCOG(){return this.isType(n8e)}isHTTP(){let n=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Al(n)&&fSe.includes(n)}isPreview(){return!1}}class WB extends i8e{constructor(t,n=null){super(t,n)}isLink(){return!0}getObjectType(){return"Link"}isPreview(){return this.rel==="preview"}static fromLinks(t,n=null){return Array.isArray(t)?t.map(r=>Tl(r)?new WB(r,n):r):[]}}class s8e extends cS{constructor(t,n=null,r={},i=[]){if(super(t,Object.assign({links:WB.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=n,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(t){this._url=t}getStacLinksWithRel(t,n=!0){return this.getLinksWithRels([t]).filter(r=>hFt(r.type,n))}getStacLinkWithRel(t,n=!0){const r=this.getStacLinksWithRel(t,n);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(t=>Tl(t)&&Al(t.href)):[]}getLinkWithRel(t){return this.getLinks().find(n=>n.rel===t)||null}getLinksWithRels(t){return this.getLinks().filter(n=>t.includes(n.rel))}getLinksWithOtherRels(t){return this.getLinks().filter(n=>!t.includes(n.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class YB extends s8e{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getAll(){return[]}}class fS extends cS{constructor(t,n=null,r=null){super(t,{},["_index","_context"]),typeof this._index!="number"&&(this._index=typeof n=="string"?parseInt(n,10):n),this._context||(this._context=r)}getContext(){return this._context}getObjectType(){return"Band"}isBand(){return!0}getIndex(){return this._index}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context)return this._context.getMetadata(t)}getMinMaxValues(){return ZPe(this)}getNoDataValues(){return KPe(this)}static fromBands(t,n=null){let r=[];if(Array.isArray(t))for(let i in t)r[i]=new fS(t[i],i,n);return r}}const pFt=["created","updated","published","expires","unpublished","bands"];class _c extends i8e{constructor(t,n=null,r=null){const i={bands:fS.fromBands,alternate:_c.fromAssets};super(t,r,i,["_key"]),this._key||(this._key=n)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(t=!0){return this.isDefinition()?null:super.getAbsoluteUrl(t)}getKey(){return this._key}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context instanceof _c)return this._context.getMetadata(t);if(this._context&&!pFt.includes(t))return this._context.getMetadata(t)}getBands(){return this.bands||[]}findVisualBands(){const t={red:null,green:null,blue:null},n=this.getBands();for(const i in n){const s=parseInt(i,10),o=n[s];Tl(o)&&Al(o["eo:common_name"])&&o["eo:common_name"]in t&&(t[o["eo:common_name"]]=o)}return Object.values(t).every(i=>i!==null)?t:null}findBand(t,n="name"){Array.isArray(t)||(t=[t]);const r=this.getBands(),i=r.findIndex(s=>Tl(s)&&t.includes(s[n]));return i>=0?r[i]:null}getBand(t){return Tl(t)||t===null?t:this.getBands()[t]||null}getMinMaxValues(){return ZPe(this)}getNoDataValues(){return KPe(this)}isDefinition(){return!Al(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}isPreview(){const t=["thumbnail","overview"];return t.includes(this.getKey())?!0:Array.isArray(this.roles)&&this.roles.some(n=>t.includes(n))}hasRole(t,n=!1){return Array.isArray(t)||(t=[t]),n&&t.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>t.includes(r))}static fromAssets(t,n=null){let r={};if(Tl(t))for(let i in t)r[i]=new _c(t[i],i,n);return r}}class vf extends s8e{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(t=!0){return this.getLinksWithRels(["icon"]).filter(n=>n.canBrowserDisplayImage(t))}getThumbnails(t=!0,n=null){let r=this.getAssets().filter(i=>i.isPreview());if(r.length===0&&(r=this.getLinks().filter(i=>i.isPreview())),t&&(r=r.filter(i=>i.canBrowserDisplayImage())),n&&r.length>1){let i=s=>Array.isArray(s.roles)&&s.roles.includes(n)||s.getKey()===n;r=r.filter(i).concat(r.filter(s=>!i(s)))}return r}getDefaultGeoTIFF(t=!0,n=!1){var i;return(i=this.rankGeoTIFFs(t,n)[0])==null?void 0:i.asset}rankGeoTIFFs(t=!0,n=!1,r=null,i=null){Tl(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(r8e);t&&(o=o.filter(l=>l.isHTTP()&&(!n||l.isCOG())));let a=Object.entries(r);for(let l of o){let u=0;if(a.length>0){let f=a.filter(([c])=>l.hasRole(c,!0)).map(([,c])=>c);f.length>0&&(u+=Math.max(...f))}!n&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof i=="function"&&(u+=i(l)),s.push({asset:l,score:u})}return s.sort((l,u)=>u.score-l.score),s}findVisualAssets(){let t={red:null,green:null,blue:null},n=Object.keys(t),r=this.getAssets();for(let s of r){let o=s.findBand(n,"eo:common_name");o&&(t[o["eo:common_name"]]=s)}return Object.values(t).every(s=>s!==null)?t:null}getAsset(t){return Tl(this.assets)&&this.assets[t]||null}getAssets(){return Tl(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(t,n=!1){return this.getAssets().filter(r=>r.hasRole(t,n))}getAssetWithRole(t,n=!1){return this.getAssetsWithRoles([t],n)[0]||null}getAssetsByTypes(t){return this.getAssets().filter(n=>VB(n.type,t))}equals(t){return this===t?!0:!(t instanceof vf)||this.getObjectType()!==t.getObjectType()?!1:!!(this.id&&this.id===t.id)}supportsExtension(t){if(!Array.isArray(this.stac_extensions))return!1;let n=new RegExp("^"+t.replaceAll("*","[^/]+")+"$");return this.stac_extensions.some(r=>n.test(r))}}class o8e extends vf{constructor(t,n=null,r={},i=[]){super(t,n,r,i)}getObjectType(){return this.type}getSearchLink(t=null){let n=this.getStacLinksWithRel("search");return t?n[0]||null:n.find(r=>r.method===t||!t&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class mFt extends o8e{constructor(t,n=null){super(t,n)}}function p_(e){if(Al(e)&&e.length>=10)try{let n=e.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5],n[6]||0))}catch{return null}return null}function gFt(e,t){return new Date(e.valueOf()+(t-e)/2)}function a8e(e){if(!Array.isArray(e)||e.length===0)return null;let t,n;const r=(i,s,o)=>typeof i>"u"?s:i===null||s===null?null:o(i,s);return e.forEach(([i,s])=>{t=r(t,i,Math.min),n=r(n,s,Math.max)}),[t===null?null:new Date(t),n===null?null:new Date(n)]}class l8e extends o8e{constructor(t,n=null){const r={assets:_c.fromAssets,item_assets:_c.fromAssets};super(t,n,r)}toGeoJSON(){let t=QPe(this.getBoundingBoxes());return t&&(t.id=this.id),t}getBoundingBox(){let t=this.getRawBoundingBoxes();return t.length>0?Tc(t[0]):null}getBoundingBoxes(){let t=this.getRawBoundingBoxes();return t.length===1?[Tc(t[0])]:t.length>1?t.slice(1).map(Tc):null}getRawBoundingBoxes(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.spatial)==null?void 0:r.bbox;return Array.isArray(t)&&t.length>0?t:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var n,r;let t=(r=(n=this.extent)==null?void 0:n.temporal)==null?void 0:r.interval;return Array.isArray(t)&&t.length>0?t.filter(i=>Array.isArray(i)&&(Al(i[0])||Al(i[1]))).map(i=>i.map(s=>p_(s))):[]}getSummary(t){return this.summaries[t]}getBands(){let t=this.getMetadata("bands");return Array.isArray(t)||(t=this.getSummary("bands")),Array.isArray(t)?fS.fromBands(t,this):[]}}class yFt extends YB{constructor(t,n=null){const r={collections:i=>i.map(s=>new l8e(s))};super(t,n,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(n=>n.toGeoJSON()).filter(n=>n!==null)}}getBoundingBox(){return t8e(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(t=>t.getBoundingBox())}getTemporalExtent(){return a8e(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(t=>t.getTemporalExtent())}}class XB extends vf{constructor(t,n=null){super(t,n,{assets:_c.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Tc(this.bbox)}getBoundingBoxes(){const t=this.getBoundingBox();return t?[t]:[]}getDateTime(){let t=p_(this.properties.datetime);if(!t){let n=p_(this.properties.start_datetime),r=p_(this.properties.end_datetime);return n&&r?gFt(n,r):n||r}return t}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let t=[];return Al(this.properties.start_datetime)||Al(this.properties.end_datetime)?t=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Al(this.properties.datetime)&&(t=[[this.properties.datetime,this.properties.datetime]]),t.map(n=>n.map(r=>p_(r)))}getMetadata(t){return this.properties[t]}getBands(){const t=this.getMetadata("bands");return Array.isArray(t)?fS.fromBands(t,this):[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class u8e extends YB{constructor(t,n=null){const r={features:i=>i.map(s=>new XB(s))};super(t,n,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return t8e(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(t=>t.getBoundingBox())}getTemporalExtent(){return a8e(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(t=>t.getTemporalExtent())}}function lC(e,t=!0,n=!1){return t&&(e=KRt.stac(e,n)),e.type==="Feature"?new XB(e):e.type==="FeatureCollection"?new u8e(e):e.type==="Collection"||!e.type&&typeof e.extent<"u"&&typeof e.license<"u"?new l8e(e):!e.type&&Array.isArray(e.collections)?new yFt(e):new mFt(e)}const vFt="https://stac-extensions.github.io/label/v1.*/schema.json",bFt=new y_({fill:new Y4({color:"rgba(255,255,255,0.4)"}),stroke:new V_({color:"#3399CC",width:3})}),hSe=new y_({stroke:new V_({color:"#ff9933",width:2})});function xFt(e,t){const n={url:e.getAbsoluteUrl()};let r=e;e.getBands().length===1&&(r=e.getBand(0));const{minimum:i,maximum:s}=r.getMinMaxValues();typeof i=="number"&&(n.min=i),typeof s=="number"&&(n.max=s);const o=r.getNoDataValues();return o.length>0&&(n.nodata=o[0]),t.length>0&&(n.bands=t),n}async function pSe(e,t=void 0){let n=t;if(pUe()){const r=e.getMetadata("proj:code");if(r)try{if(r.startsWith("EPSG:")){const i=parseInt(r.replace("EPSG:",""),10);n=await mUe(i)}}catch{}}return n}function mSe(e,t){const n=e.clone();return t.hasOnlyBounds()||n.setFill(null),n}function wFt(e){let t=e.href;if(t.includes("{s}"))if(Array.isArray(e["href:servers"])&&e["href:servers"].length>0){const n=Math.random()*e["href:servers"].length|0;t=t.replace("{s}",e["href:servers"][n])}else return null;return t}class ZB extends w3{constructor(t){const n={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>n[r]=t[r]),super(n),this.getSourceOptions_=t.getSourceOptions,this.children_=null,this.childrenOptions_=t.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=t.crossOrigin||null,this.displayFootprint_=t.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!t.displayGeoTiffByDefault,this.displayPreview_=!!t.displayPreview,this.displayOverview_=t.displayOverview!==!1,this.displayWebMapLink_=t.displayWebMapLink||!1,this.buildTileUrlTemplate_=t.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=t.useTileLayerAsFallback||!1,this.boundsStyle_=t.boundsStyle||bFt,this.collectionStyle_=t.collectionStyle||hSe,this.boundsLayer_=null,this.disableMigration_=t.disableMigration||!1,this.map_=null,this.eventQueue_=[],t.httpRequestFn&&(this.fetch_=t.httpRequestFn),t.data){try{this.configure_(t.data,t.url,t.children,t.assets,t.bands)}catch(r){this.handleError_(r)}return}if(!t.url)throw new Error("Either url or data must be provided");this.fetch_(t.url).then(r=>this.configure_(r,t.url,t.children,t.assets,t.bands)).catch(r=>this.handleError_(r))}async fetch_(t,n="json"){const r=await fetch(t);if(!r.ok)throw new Error(`Unexpected response from ${t}: ${r.status}`);return n==="json"?await r.json():n==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var t;if(this.getLayers().getLength()>1)return!1;const r=(t=this.getData())===null||t===void 0?void 0:t.getBoundingBox();return!r||dD(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(t){this.dispatch_(new GRt(t))}configure_(t,n=null,r=null,i=null,s=[]){let o;t instanceof _c||t instanceof vf?o=t:o=lC(t,!this.disableMigration_),n&&n.includes("://")&&o instanceof vf&&o.setAbsoluteUrl(n),this.set("stac",o),this.bands_=s,this.boundsLayer_=this.addFootprint_();const a=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(mSe(this.boundsStyle_,this))};this.getLayers().on("add",a),this.getLayers().on("remove",a);const l=c=>this.handleError_(c),u=this.setChildren(r).catch(l),f=this.setAssets(i).catch(l);Promise.all([u,f]).then(()=>this.dispatch_("layersready")),this.dispatch_("sourceready")}dispatch_(t){this.eventQueue_.push(t),this.flush_()}flush_(){if(this.map_){for(const t of this.eventQueue_)this.dispatchEvent(t);this.eventQueue_=[]}}setMap_(t){this.map_!==t&&(this.map_=t,this.flush_())}async addChildren_(t,n={}){const r=t.map(i=>{const s={data:i,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_},o=new ZB(Object.assign(s,n));return this.addLayer_(o,null),o});return await Promise.all(r)}async addPreviewImage_(t){const n=await pSe(t,"EPSG:4326"),r=t.getContext().getBoundingBoxes();if(r.length!==1)return;const i=r[0];let s={url:t.getAbsoluteUrl(),projection:n,imageExtent:e6(i,"EPSG:4326",n),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(s=await this.getSourceOptions_(is.ImageStatic,s,t));const o=new RI({source:new jke(s)});return this.addLayer_(o,t),o}async addLayerForLink(t){const n=wFt(t);if(!n)return;const r={attributions:t.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:n},i=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,t)),a),s=[];switch(t.rel){case"pmtiles":const a=await new GB(r.url).getHeader();let l;switch(a.tileType){case lv.Mvt:l=new VRt(await i(is.PMTilesVector,r));break;case lv.Avif:case lv.Jpeg:case lv.Png:case lv.Webp:l=new iSe(await i(is.PMTilesRaster,r));break;default:return}s.push(l);break;case"tilejson":s.push(new Zke(await i(is.TileJSON,r)));break;case"wms":if(!Array.isArray(t["wms:layers"]))break;for(const c in t["wms:layers"]){const d=t["wms:layers"][c]||"";let h="";Array.isArray(t["wms:styles"])&&typeof t["wms:styles"][c]=="string"&&(h=t["wms:styles"][c]);const p=Object.assign({LAYERS:d,STYLES:h},t["wms:dimensions"]);typeof t["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(t["wms:transparent"])),typeof t.type=="string"&&t.type.startsWith("image/")&&(p.FORMAT=t.type);const g=await i(is.TileWMS,Object.assign({},r,{params:p}));s.push(new r3e(g))}break;case"wmts":const u=await this.getWmtsCapabilities_(n);if(!u)return;const f=Array.isArray(t["wmts:layer"])?t["wmts:layer"]:[t["wmts:layer"]];for(const c of f){let d=Object.assign({},r,{layer:c});typeof t.type=="string"&&t.type.startsWith("image/")&&(d.format=t.type),d=await i(is.WMTS,d),s.push(new i3e(s3e(u,d)))}break;case"xyz":s.push(new J_(await i(is.XYZ,r)));break;default:return}return s.map(o=>{let a;return o instanceof wD?a=new KCe({source:o,declutter:!0}):o instanceof iSe?a=new L3({source:o}):a=new _3({source:o}),this.addLayer_(a,t),a})}async addGeoTiff_(t){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);let r={sources:[xFt(t,this.bands_)]};const i=await pSe(t);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(is.GeoTIFF,r,t));const s=new _P(r),o=new Promise((a,l)=>{s.on("error",l),s.on("change",()=>{s.getState()==="error"?l(s.getError()):a()})});try{await o;const a=new L3({source:s});return this.addLayer_(a,t),a}catch(a){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);this.handleError_(a)}}async addTileLayerForImagery_(t){let n={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(t)};this.getSourceOptions_&&(n=await this.getSourceOptions_(is.XYZ,n,t));const r=new _3({source:new J_(n)});return this.addLayer_(r,t),r}addLayer_(t,n=null,r=0){n&&t.set("stac",n),t.setZIndex(r),this.getLayers().push(t)}addFootprint_(){let t=null;const n=this.getData();if(n.isItemCollection()||n.isCollectionCollection()?t=QPe(n.getBoundingBox()):t=n.toGeoJSON(),t){const r=this.createGeoJsonLayer_(t,mSe(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,n,1),r}return null}async addGeoJson_(t){try{const n=await this.fetch_(t.getAbsoluteUrl()),r=this.createGeoJsonLayer_(n);return this.addLayer_(r,t),r}catch(n){this.handleError_(n)}}createGeoJsonLayer_(t,n=null,r=!0){const i=new gD,s=new nE({format:i,loader:(o,a,l)=>{t=i3(t);const u=i.readFeatures(t,{featureProjection:l});s.addFeatures(u)}});return n||(n=hSe),new bI({source:s,style:n,visible:r})}async addLabelExtension_(){const t=this.getData();if(!(t instanceof XB))return;let n=t.getAssetsWithRoles(["labels","labels-vector"],!0),r;n.length>1&&(r=n.find(s=>s.roles.includes("labels-vector"))),r||(r=t.getAsset("vector_labels")),r||(n=t.getAssets().filter(s=>s.type===Z$&&!s.roles),n.length===1&&(r=n[0]));const i=t.getLinksWithRels(["source"]);if(r&&i.length>0){const s=i.map(async a=>{try{const l=await this.fetch_(a.getAbsoluteUrl());return lC(l)}catch(l){return this.handleError_(l),null}}),o=(await Promise.all(s)).filter(a=>a instanceof vf);await this.addChildren_(o,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(s){this.handleError_(s)}}async updateLayers_(){const t=this.getLayers();for(let i=t.getLength()-1;i>=0;i--){const s=t.item(i);s.get("stac")&&!s.get("bounds")&&t.removeAt(i)}const n=this.getData();if(Array.isArray(this.displayWebMapLink_)){const i=this.getWebMapLinks().map(async s=>await this.addLayerForLink(s));await Promise.all(i)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const r=this.getAssets();if(r){const i=r.map(async s=>{if(s){if(s.type===Z$)return await this.addGeoJson_(s);if(s.isGeoTIFF())return await this.addGeoTiff_(s);if(s.canBrowserDisplayImage())return await this.addPreviewImage_(s)}});await Promise.all(i)}if(this.hasOnlyBounds()){if(n instanceof YB)await this.addChildren_(n.getAll(),this.childrenOptions_);else if(n instanceof vf){if(n.isItem()&&n.supportsExtension(vFt)&&n.getMetadata("label:type")==="vector"){await this.addLabelExtension_();return}const i=this.getWebMapLinks();if(i.length>0)await this.addLayerForLink(i[0]);else{const s=n.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let o;if(s&&this.displayOverview_&&(o=await this.addGeoTiff_(s)),this.displayPreview_&&(!s||!o)){const a=n.getThumbnails(!0,"overview");a.length>0&&await this.addPreviewImage_(a[0])}}}}}hasOnlyBounds(){const t=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==t)>"u"}getWebMapLinks(){const t=this.getData();if(t instanceof _c)return[];let n=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(n=[this.displayWebMapLink_]);let r=t.getLinksWithRels(n);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){const s=r.find(o=>o.id===i);return s||null}return i}).filter(i=>!!i):r.sort((i,s)=>{const o=n.indexOf(i.rel),a=n.indexOf(s.rel);return o-a}),r}async setAssets(t){if(Array.isArray(t)){const n=this.getData();this.assets_=t.map(r=>n instanceof vf&&typeof r=="string"?n.getAsset(r):r instanceof _c?r:new _c(r))}else this.assets_=null;await this.updateLayers_()}async setChildren(t,n={}){if(!t){this.children_=null,this.childrenOptions_={};return}t instanceof u8e?this.children_=t.getAll():Tl(t)&&t.type==="FeatureCollection"?t=lC(t).getAll():Array.isArray(t)?(t=t.map(r=>r instanceof vf?r:lC(r)),this.children_=t):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.childrenOptions_=n,await this.updateLayers_()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const t=this.map_.getView();if(!t)return;const n=this.getData();if(!n)return;const r=n.getBoundingBox();if(r)return e6(r,"EPSG:4326",t.getProjection())}getAttributions(){const t=[],n=this.getData();if(n){const r=n.getMetadata("attribution");r&&r.push(r)}return t}getSource(){return null}async getWmtsCapabilities_(t){try{const n=new URL(t);n.searchParams.set("service","wmts"),n.searchParams.set("request","GetCapabilities");const r=await this.fetch_(n.toString(),"text");return new rP().read(r)}catch{return null}}}gUe(Q4);window.eoxMapAdvancedOlLayers={...rXe,STAC:ZB};class _Ft extends gh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,tilePixelRatio:t.tilePixelRatio,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection,wrapX:t.wrapX}),this.version_=t.version!==void 0?t.version:"1.0.0",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,fetch(t.url).then(n=>n.text()).then(n=>new window.DOMParser().parseFromString(n,"application/xml")).then(n=>{this.handleCapabilitiesResponse(n,t)})}handleCapabilitiesResponse(t,n){const i=new rP().read(t),s=s3e(i,n);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=FI(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(t){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=n==="KVP"?E3(t,r):t.replace(/\{(\w+?)\}/g,(o,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:o);const i=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:i.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=t;return n==="KVP"?l=E3(l,a):l=l.replace(/\{(\w+?)\}/g,(u,f)=>a[f]),l}}}var Tr,wa=((Tr={})[Tr.Unknown=0]="Unknown",Tr[Tr.Point=1]="Point",Tr[Tr.LineString=2]="LineString",Tr[Tr.Polygon=3]="Polygon",Tr[Tr.MultiPoint=4]="MultiPoint",Tr[Tr.MultiLineString=5]="MultiLineString",Tr[Tr.MultiPolygon=6]="MultiPolygon",Tr[Tr.GeometryCollection=7]="GeometryCollection",Tr[Tr.CircularString=8]="CircularString",Tr[Tr.CompoundCurve=9]="CompoundCurve",Tr[Tr.CurvePolygon=10]="CurvePolygon",Tr[Tr.MultiCurve=11]="MultiCurve",Tr[Tr.MultiSurface=12]="MultiSurface",Tr[Tr.Curve=13]="Curve",Tr[Tr.Surface=14]="Surface",Tr[Tr.PolyhedralSurface=15]="PolyhedralSurface",Tr[Tr.TIN=16]="TIN",Tr[Tr.Triangle=17]="Triangle",Tr);const Mw=4,$w=4,dS=4,dp=new Int32Array(2),gSe=new Float32Array(dp.buffer),ySe=new Float64Array(dp.buffer),uC=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var K$;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(K$||(K$={}));class ph{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new ph(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return dp[0]=this.readInt32(t),gSe[0]}readFloat64(t){return dp[uC?0:1]=this.readInt32(t),dp[uC?1:0]=this.readInt32(t+4),ySe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){gSe[0]=n,this.writeInt32(t,dp[0])}writeFloat64(t,n){ySe[0]=n,this.writeInt32(t,dp[uC?0:1]),this.writeInt32(t+4,dp[uC?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Mw+$w)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<$w;n++)t+=String.fromCharCode(this.readInt8(this.position_+Mw+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Mw;const i=this.bytes_.subarray(t,t+r);return n===K$.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Mw}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=$w)throw new Error("FlatBuffers: file identifier must be length "+$w);for(let n=0;n<$w;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Mw+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}}class za{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsGeometry(t,n){return(n||new za).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,n){return t.setPosition(t.position()+dS),(n||new za).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb.__vector(this.bb_pos+n)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readUint64(this.bb.__vector(this.bb_pos+n)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}parts(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new za).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,n){t.addFieldOffset(0,n,0)}static createEndsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startEndsVector(t,n){t.startVector(4,n,4)}static addXy(t,n){t.addFieldOffset(1,n,0)}static createXyVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startXyVector(t,n){t.startVector(8,n,8)}static addZ(t,n){t.addFieldOffset(2,n,0)}static createZVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startZVector(t,n){t.startVector(8,n,8)}static addM(t,n){t.addFieldOffset(3,n,0)}static createMVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startMVector(t,n){t.startVector(8,n,8)}static addT(t,n){t.addFieldOffset(4,n,0)}static createTVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startTVector(t,n){t.startVector(8,n,8)}static addTm(t,n){t.addFieldOffset(5,n,0)}static createTmVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startTmVector(t,n){t.startVector(8,n,8)}static addType(t,n){t.addFieldInt8(6,n,wa.Unknown)}static addParts(t,n){t.addFieldOffset(7,n,0)}static createPartsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startPartsVector(t,n){t.startVector(4,n,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,n,r,i,s,o,a,l,u){return za.startGeometry(t),za.addEnds(t,n),za.addXy(t,r),za.addZ(t,i),za.addM(t,s),za.addT(t,o),za.addTm(t,a),za.addType(t,l),za.addParts(t,u),za.endGeometry(t)}}function _M(e,t){let n=[];for(let r=0;r<e.length;r+=2){let i=[e[r],e[r+1]];t&&i.push(t[r>>1]),n.push(i)}return n}function J$(e,t){let n=t;if(n===wa.Unknown&&(n=e.type()),n===wa.GeometryCollection){let i=[];for(let s=0;s<e.partsLength();s++){let o=e.parts(s),a=o.type();i.push(J$(o,a))}return{type:wa[n],geometries:i}}if(n===wa.MultiPolygon){let i=[];for(let s=0;s<e.partsLength();s++)i.push(J$(e.parts(s),wa.Polygon));return{type:wa[n],coordinates:i.map(s=>s.coordinates)}}let r=function(i,s){let o=i.xyArray(),a=i.zArray();switch(s){case wa.Point:{let l=Array.from(o);return a&&l.push(a[0]),l}case wa.MultiPoint:case wa.LineString:return _M(o,a);case wa.MultiLineString:case wa.Polygon:return function(l,u,f){let c;if(!f||f.length===0)return[_M(l,u)];let d=0,h=Array.from(f).map(p=>l.slice(d,d=p<<1));return u&&(d=0,c=Array.from(f).map(p=>u.slice(d,d=p))),h.map((p,g)=>_M(p,c?c[g]:void 0))}(o,a,i.endsArray())}}(e,n);return{type:wa[n],coordinates:r}}var hi,Vo=((hi={})[hi.Byte=0]="Byte",hi[hi.UByte=1]="UByte",hi[hi.Bool=2]="Bool",hi[hi.Short=3]="Short",hi[hi.UShort=4]="UShort",hi[hi.Int=5]="Int",hi[hi.UInt=6]="UInt",hi[hi.Long=7]="Long",hi[hi.ULong=8]="ULong",hi[hi.Float=9]="Float",hi[hi.Double=10]="Double",hi[hi.String=11]="String",hi[hi.Json=12]="Json",hi[hi.DateTime=13]="DateTime",hi[hi.Binary=14]="Binary",hi);class Co{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsColumn(t,n){return(n||new Co).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,n){return t.setPosition(t.position()+dS),(n||new Co).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vo.Byte}title(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb_pos+n,t):null}static startColumn(t){t.startObject(11)}static addName(t,n){t.addFieldOffset(0,n,0)}static addType(t,n){t.addFieldInt8(1,n,Vo.Byte)}static addTitle(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWidth(t,n){t.addFieldInt32(4,n,-1)}static addPrecision(t,n){t.addFieldInt32(5,n,-1)}static addScale(t,n){t.addFieldInt32(6,n,-1)}static addNullable(t,n){t.addFieldInt8(7,+n,1)}static addUnique(t,n){t.addFieldInt8(8,+n,0)}static addPrimaryKey(t,n){t.addFieldInt8(9,+n,0)}static addMetadata(t,n){t.addFieldOffset(10,n,0)}static endColumn(t){let n=t.endObject();return t.requiredField(n,4),n}static createColumn(t,n,r,i,s,o,a,l,u,f,c,d){return Co.startColumn(t),Co.addName(t,n),Co.addType(t,r),Co.addTitle(t,i),Co.addDescription(t,s),Co.addWidth(t,o),Co.addPrecision(t,a),Co.addScale(t,l),Co.addNullable(t,u),Co.addUnique(t,f),Co.addPrimaryKey(t,c),Co.addMetadata(t,d),Co.endColumn(t)}}class hc{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFeature(t,n){return(n||new hc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,n){return t.setPosition(t.position()+dS),(n||new hc).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let n=this.bb.__offset(this.bb_pos,4);return n?(t||new za).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}properties(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb.__vector(this.bb_pos+n)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new Co).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,n){t.addFieldOffset(0,n,0)}static addProperties(t,n){t.addFieldOffset(1,n,0)}static createPropertiesVector(t,n){t.startVector(1,n.length,1);for(let r=n.length-1;r>=0;r--)t.addInt8(n[r]);return t.endVector()}static startPropertiesVector(t,n){t.startVector(1,n,1)}static addColumns(t,n){t.addFieldOffset(2,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,n){t.finish(n)}static finishSizePrefixedFeatureBuffer(t,n){t.finish(n,void 0,!0)}static createFeature(t,n,r,i){return hc.startFeature(t),hc.addGeometry(t,n),hc.addProperties(t,r),hc.addColumns(t,i),hc.endFeature(t)}}new TextEncoder;let vSe=new TextDecoder;function EFt(e,t){let n={};if(!t||t.length===0)return n;let r=e.propertiesArray();if(!r)return n;let i=new DataView(r.buffer,r.byteOffset),s=e.propertiesLength(),o=0;for(;o<s;){let a=i.getUint16(o,!0);o+=2;let l=t[a],u=l.name;switch(l.type){case Vo.Bool:n[u]=!!i.getUint8(o),o+=1;break;case Vo.Byte:n[u]=i.getInt8(o),o+=1;break;case Vo.UByte:n[u]=i.getUint8(o),o+=1;break;case Vo.Short:n[u]=i.getInt16(o,!0),o+=2;break;case Vo.UShort:n[u]=i.getUint16(o,!0),o+=2;break;case Vo.Int:n[u]=i.getInt32(o,!0),o+=4;break;case Vo.UInt:n[u]=i.getUint32(o,!0),o+=4;break;case Vo.Long:n[u]=Number(i.getBigInt64(o,!0)),o+=8;break;case Vo.ULong:n[u]=Number(i.getBigUint64(o,!0)),o+=8;break;case Vo.Float:n[u]=i.getFloat32(o,!0),o+=4;break;case Vo.Double:n[u]=i.getFloat64(o,!0),o+=8;break;case Vo.DateTime:case Vo.String:{let f=i.getUint32(o,!0);o+=4,n[u]=vSe.decode(r.subarray(o,o+f)),o+=f;break}case Vo.Json:{let f=i.getUint32(o,!0);o+=4;let c=vSe.decode(r.subarray(o,o+f));n[u]=JSON.parse(c),o+=f;break}case Vo.Binary:{let f=i.getUint32(o,!0);o+=4,n[u]=r.subarray(o,o+f),o+=f;break}default:throw Error("Unknown type "+l.type)}}return n}function KB(e,t,n){let r=n.columns;return{type:"Feature",id:e,geometry:J$(t.geometry(),n.geometryType),properties:EFt(t,r)}}const JB=new Uint8Array(0);function SFt(){return this._source.cancel()}function AFt(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function CFt(){var e=this,t=e._array.subarray(e._index);return e._source.read().then(function(n){return e._array=JB,e._index=0,n.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:AFt(t,n.value)}})}function kFt(e){if((e|=0)<0)throw new Error("invalid length");var t=this,n=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var r=new Uint8Array(e);return r.set(this._array.subarray(this._index)),function i(){return t._source.read().then(function(s){return s.done?(t._array=JB,t._index=0,n>0?r.subarray(0,n):null):n+s.value.length>=e?(t._array=s.value,t._index=e-n,r.set(s.value.subarray(0,e-n),n),r):(r.set(s.value,n),n+=s.value.length,i())})}()}function TFt(e){return typeof e.slice=="function"?e:new BR(typeof e.read=="function"?e:e.getReader())}function BR(e){this._source=e,this._array=JB,this._index=0}BR.prototype.read=CFt;BR.prototype.slice=kFt;BR.prototype.cancel=SFt;class xu{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsCrs(t,n){return(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,n){return t.setPosition(t.position()+dS),(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}org(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,t):null}wkt(t){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__string(this.bb_pos+n,t):null}codeString(t){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb_pos+n,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,n){t.addFieldOffset(0,n,0)}static addCode(t,n){t.addFieldInt32(1,n,0)}static addName(t,n){t.addFieldOffset(2,n,0)}static addDescription(t,n){t.addFieldOffset(3,n,0)}static addWkt(t,n){t.addFieldOffset(4,n,0)}static addCodeString(t,n){t.addFieldOffset(5,n,0)}static endCrs(t){return t.endObject()}static createCrs(t,n,r,i,s,o,a){return xu.startCrs(t),xu.addOrg(t,n),xu.addCode(t,r),xu.addName(t,i),xu.addDescription(t,s),xu.addWkt(t,o),xu.addCodeString(t,a),xu.endCrs(t)}}class vT{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsHeader(t,n){return(n||new vT).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,n){return t.setPosition(t.position()+dS),(n||new vT).__init(t.readInt32(t.position())+t.position(),t)}name(t){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}envelope(t){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wa.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new Co).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let n=this.bb.__offset(this.bb_pos,24);return n?(t||new xu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}title(t){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__string(this.bb_pos+n,t):null}description(t){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb_pos+n,t):null}metadata(t){let n=this.bb.__offset(this.bb_pos,30);return n?this.bb.__string(this.bb_pos+n,t):null}static startHeader(t){t.startObject(14)}static addName(t,n){t.addFieldOffset(0,n,0)}static addEnvelope(t,n){t.addFieldOffset(1,n,0)}static createEnvelopeVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addFloat64(n[r]);return t.endVector()}static startEnvelopeVector(t,n){t.startVector(8,n,8)}static addGeometryType(t,n){t.addFieldInt8(2,n,wa.Unknown)}static addHasZ(t,n){t.addFieldInt8(3,+n,0)}static addHasM(t,n){t.addFieldInt8(4,+n,0)}static addHasT(t,n){t.addFieldInt8(5,+n,0)}static addHasTm(t,n){t.addFieldInt8(6,+n,0)}static addColumns(t,n){t.addFieldOffset(7,n,0)}static createColumnsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startColumnsVector(t,n){t.startVector(4,n,4)}static addFeaturesCount(t,n){t.addFieldInt64(8,n,BigInt("0"))}static addIndexNodeSize(t,n){t.addFieldInt16(9,n,16)}static addCrs(t,n){t.addFieldOffset(10,n,0)}static addTitle(t,n){t.addFieldOffset(11,n,0)}static addDescription(t,n){t.addFieldOffset(12,n,0)}static addMetadata(t,n){t.addFieldOffset(13,n,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,n){t.finish(n)}static finishSizePrefixedHeaderBuffer(t,n){t.finish(n,void 0,!0)}}function QB(e){let t=vT.getRootAsHeader(e),n=t.featuresCount(),r=t.indexNodeSize(),i=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");i.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let s=t.crs(),o=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:o,title:t.title(),description:t.description(),metadata:t.metadata()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q$=function(e,t){return Q$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Q$(e,t)};function DFt(e,t){Q$(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function P1(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{u(r.next(f))}catch(c){o(c)}}function l(f){try{u(r.throw(f))}catch(c){o(c)}}function u(f){f.done?s(f.value):i(f.value).then(a,l)}u((r=r.apply(e,[])).next())})}function im(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ab(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $2(e){return this instanceof $2?(this.v=e,this):new $2(e)}function LFt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){c(s[0][3],p)}}function l(d){d.value instanceof $2?Promise.resolve(d.value.v).then(u,f):c(s[0][2],d)}function u(d){a("next",d)}function f(d){a("throw",d)}function c(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}var c8e=function(e){DFt(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function e(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();(function(){function e(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e})();function eI(e){e!=null&&typeof e.then=="function"&&e.then(wT,wT)}var EM=0,bSe=1,A0=2,bT=3,tI=4,xT=1024,wT=function(){};function jv(e){var t=e.err,n=Promise.resolve(e.execution).then(function(r){if(t!=null)throw t;return r});return e.err=void 0,e.execution=n.then(function(){},function(){}),e.pending===void 0?n:e.pending.then(function(){return n})}function $g(e,t){var n=e.state>=bT;return Promise.resolve(t).then(function(r){return!n&&e.state>=tI?jv(e).then(function(i){return{value:i,done:!0}}):{value:r,done:n}})}function ez(e,t){var n,r;if(!(e.state>=A0))if(e.state=A0,e.onnext(),e.onstop(),e.err==null&&(e.err=t),e.pushes.length===0&&(typeof e.buffer>"u"||e.buffer.empty))j_(e);else try{for(var i=Ab(e.pushes),s=i.next();!s.done;s=i.next()){var o=s.value;o.resolve()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function j_(e){var t,n;if(!(e.state>=bT)){e.state<A0&&ez(e),e.state=bT,e.buffer=void 0;try{for(var r=Ab(e.nexts),i=r.next();!i.done;i=r.next()){var s=i.value,o=e.pending===void 0?jv(e):e.pending.then(function(){return jv(e)});s.resolve($g(e,o))}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function xSe(e){e.state>=tI||(e.state<bT&&j_(e),e.state=tI)}function RFt(e,t){if(eI(t),e.pushes.length>=xT)throw new c8e("No more than "+xT+" pending calls to push are allowed on a single repeater.");if(e.state>=A0)return Promise.resolve(void 0);var n=e.pending===void 0?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(l){e.state<A0&&(e.err=l),xSe(e)});var r;if(e.nexts.length){var i=e.nexts.shift();i.resolve($g(e,n)),e.nexts.length?r=Promise.resolve(e.nexts[0].value):typeof e.buffer<"u"&&!e.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return e.onnext=l})}else typeof e.buffer<"u"&&!e.buffer.full?(e.buffer.add(n),r=Promise.resolve(void 0)):r=new Promise(function(l){return e.pushes.push({resolve:l,value:n})});var s=!0,o={},a=r.catch(function(l){if(s)throw l});return o.then=function(l,u){return s=!1,Promise.prototype.then.call(r,l,u)},o.catch=function(l){return s=!1,Promise.prototype.catch.call(r,l)},o.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(l){e.err=l,xSe(e)}),o}function FFt(e){var t=ez.bind(null,e),n=new Promise(function(r){return e.onstop=r});return t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),t}function OFt(e){if(!(e.state>=bSe)){e.state=bSe;var t=RFt.bind(null,e),n=FFt(e);e.execution=new Promise(function(r){return r(e.executor(t,n))}),e.execution.catch(function(){return ez(e)})}}var cC=new WeakMap,hS=function(){function e(t,n){cC.set(this,{executor:t,buffer:n,err:void 0,state:EM,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:wT,onstop:wT})}return e.prototype.next=function(t){eI(t);var n=cC.get(this);if(n===void 0)throw new Error("WeakMap error");if(n.nexts.length>=xT)throw new c8e("No more than "+xT+" pending calls to next are allowed on a single repeater.");if(n.state<=EM&&OFt(n),n.onnext(t),typeof n.buffer<"u"&&!n.buffer.empty){var r=$g(n,n.buffer.remove());if(n.pushes.length){var i=n.pushes.shift();n.buffer.add(i.value),n.onnext=i.resolve}return r}else if(n.pushes.length){var s=n.pushes.shift();return n.onnext=s.resolve,$g(n,s.value)}else if(n.state>=A0)return j_(n),$g(n,jv(n));return new Promise(function(o){return n.nexts.push({resolve:o,value:t})})},e.prototype.return=function(t){eI(t);var n=cC.get(this);if(n===void 0)throw new Error("WeakMap error");return j_(n),n.execution=Promise.resolve(n.execution).then(function(){return t}),$g(n,jv(n))},e.prototype.throw=function(t){var n=cC.get(this);if(n===void 0)throw new Error("WeakMap error");return n.state<=EM||n.state>=A0||typeof n.buffer<"u"&&!n.buffer.empty?(j_(n),n.err==null&&(n.err=t),$g(n,jv(n))):this.next(Promise.reject(t))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=MFt,e.merge=$Ft,e.zip=IFt,e.latest=PFt,e}();function zR(e,t){var n,r,i=[],s=function(u){u!=null&&typeof u[Symbol.asyncIterator]=="function"?i.push(u[Symbol.asyncIterator]()):u!=null&&typeof u[Symbol.iterator]=="function"?i.push(u[Symbol.iterator]()):i.push(function(){return LFt(this,arguments,function(){return im(this,function(d){switch(d.label){case 0:return t.yieldValues?[4,$2(u)]:[3,3];case 1:return[4,d.sent()];case 2:d.sent(),d.label=3;case 3:return t.returnValues?[4,$2(u)]:[3,5];case 4:return[2,d.sent()];case 5:return[2]}})})}())};try{for(var o=Ab(e),a=o.next();!a.done;a=o.next()){var l=a.value;s(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function MFt(e){var t=this,n=zR(e,{returnValues:!0});return new hS(function(r,i){return P1(t,void 0,void 0,function(){var s,o,a,l,u,f;return im(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2];o=!1,i.then(function(){s(),o=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),l=void 0,u=0,f=function(){var d,h,p,g,v,x;return im(this,function(y){switch(y.label){case 0:d=u;try{for(h=(v=void 0,Ab(n)),p=h.next();!p.done;p=h.next())g=p.value,Promise.resolve(g.next()).then(function(w){w.done?(i(),a===void 0&&(a=w)):u===d&&(u++,s(w))},function(w){return i(w)})}catch(w){v={error:w}}finally{try{p&&!p.done&&(x=h.return)&&x.call(h)}finally{if(v)throw v.error}}return[4,new Promise(function(w){return s=w})];case 1:return l=y.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:y.sent(),y.label=3;case 3:return[2]}})},c.label=2;case 2:return o?[3,4]:[5,f()];case 3:return c.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return i(),[4,Promise.race(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function $Ft(e){var t=this,n=zR(e,{yieldValues:!0});return new hS(function(r,i){return P1(t,void 0,void 0,function(){var s,o,a,l=this;return im(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2];s=[],o=!1,i.then(function(){var f,c;o=!0;try{for(var d=Ab(s),h=d.next();!h.done;h=d.next()){var p=h.value;p()}}catch(g){f={error:g}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error}}}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map(function(f,c){return P1(l,void 0,void 0,function(){var d,h;return im(this,function(p){switch(p.label){case 0:p.trys.push([0,,6,9]),p.label=1;case 1:return o?[3,5]:(Promise.resolve(f.next()).then(function(g){return s[c](g)},function(g){return i(g)}),[4,new Promise(function(g){s[c]=g})]);case 2:return d=p.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:p.sent(),p.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=f.return,h?[4,f.return()]:[3,8];case 7:h=p.sent(),p.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return u.sent(),[2,a&&a.value];case 3:return i(),[7];case 4:return[2]}})})})}function IFt(e){var t=this,n=zR(e,{returnValues:!0});return new hS(function(r,i){return P1(t,void 0,void 0,function(){var s,o,a,l;return im(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2,[]];o=!1,i.then(function(){s(),o=!0}),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return o?[3,5]:(Promise.all(n.map(function(f){return f.next()})).then(function(f){return s(f)},function(f){return i(f)}),[4,new Promise(function(f){return s=f})]);case 3:return a=u.sent(),a===void 0?[2]:(l=a.map(function(f){return f.value}),a.some(function(f){return f.done})?[2,l]:[4,r(l)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(f){return f.return&&f.return()}))];case 7:return u.sent(),[7];case 8:return[2]}})})})}function PFt(e){var t=this,n=zR(e,{yieldValues:!0,returnValues:!0});return new hS(function(r,i){return P1(t,void 0,void 0,function(){var s,o,a,l,u,f=this;return im(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2,[]];o=[],a=!1,i.then(function(){var d,h;s();try{for(var p=Ab(o),g=p.next();!g.done;g=p.next()){var v=g.value;v()}}catch(x){d={error:x}}finally{try{g&&!g.done&&(h=p.return)&&h.call(p)}finally{if(d)throw d.error}}a=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map(function(d){return d.next()})).then(function(d){return s(d)},function(d){return i(d)}),[4,new Promise(function(d){return s=d})];case 2:return l=c.sent(),l===void 0?[2]:(u=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,u]:[4,r(u.slice())]);case 3:return c.sent(),[4,Promise.all(n.map(function(d,h){return P1(f,void 0,void 0,function(){var p;return im(this,function(g){switch(g.label){case 0:if(l[h].done)return[2,l[h].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(v){return o[h](v)},function(v){return i(v)}),[4,new Promise(function(v){return o[h]=v})]);case 2:return p=g.sent(),p===void 0?[2,l[h].value]:p.done?[2,p.value]:(u[h]=p.value,[4,r(u.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return i(),[4,Promise.all(n.map(function(d){return d.return&&d.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}const sD=class sD{constructor(){tn(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};tn(sD,"global",new sD);let _T=sD;const NFt=40,BFt=16;function tz(e,t){t=Math.min(Math.max(+t,2),65535);let n=e,r=n;do r+=n=Math.ceil(n/t);while(n!==1);return 40*r}function zFt(e,t){if(t<2)throw Error("Node size must be at least 2");if(e===0)throw Error("Number of items must be greater than 0");let n=e,r=n,i=[n];do r+=n=Math.ceil(n/t),i.push(n);while(n!==1);let s=[];for(let a of(n=r,i))s.push(n-a),n-=a;let o=[];for(let a=0;a<i.length;a++)o.push([s[a],s[a]+i[a]]);return o}async function*jFt(e,t,n,r){class i{constructor(h,p){tn(this,"_level");tn(this,"nodes");this._level=p,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:s,minY:o,maxX:a,maxY:l}=n,u=zFt(e,t),f=u[0][0],c=[new i([0,1],u.length-1)];for(;c.length!=0;){let d=c.shift(),h=d.startNodeIdx(),p=h>=f,g=(()=>{let[,y]=u[d.level()],w=Math.min(d.endNodeIdx()+t,y);return p&&w<y?w+1:w})(),v=g-h,x=new DataView(await r(40*h,40*v));for(let y=h;y<g;y++){let w=y-h,_=40*w;if(a<x.getFloat64(_+0,!0)||l<x.getFloat64(_+8,!0)||s>x.getFloat64(_+16,!0)||o>x.getFloat64(_+24,!0))continue;let A=x.getBigUint64(_+32,!0);if(p){let R=(()=>{if(!(y<e-1))return null;{let B=(w+1)*40;return x.getBigUint64(B+32,!0)-A}})(),O=y-f;yield[Number(A),O,Number(R)];continue}let T=_T.global.extraRequestThreshold()/40,D=c[c.length-1];if(D!==void 0&&D.level()==d.level()-1&&A<D.endNodeIdx()+T){D.extendEndNodeIdx(Number(A));continue}let k=(()=>{let R=d.level()-1;return new i([Number(A),Number(A)+1],R)})();D!==void 0&&(D.level(),k.level()),c.push(k)}}}const Bg=new Uint8Array([102,103,98,3,102,103,98,0]),Gd=4;class nz{constructor(t,n,r,i,s){tn(this,"headerClient");tn(this,"header");tn(this,"headerLength");tn(this,"indexLength");tn(this,"nocache");this.headerClient=t,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=s}static async open(t,n){let r,i=new wSe(t,n),s=2024+(()=>{let u,f=0;for(u=0;u<3;u++)f+=BFt**u*NFt;return f})();if(!new Uint8Array(await i.getRange(0,8,s,"header")).subarray(0,3).every((u,f)=>Bg[f]===u))throw Error("Not a FlatGeobuf file");if((r=new DataView(await i.getRange(8,4,s,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let o=await i.getRange(12,r,s,"header"),a=QB(new ph(new Uint8Array(o))),l=tz(a.featuresCount,a.indexNodeSize);return new nz(i,a,r,l,n)}async*selectBbox(t){let n=this.lengthBeforeTree(),r=this.headerClient,i=async function(l,u){return r.getRange(n+l,u,0,"index")},s=[],o=[];for await(let l of jFt(this.header.featuresCount,this.header.indexNodeSize,t,i)){let[u,f]=l,[,,c]=l;if(c||(c=4),o.length==0){o.push([u,c,f]);continue}let d=o[o.length-1];u-(d[0]+d[1])>_T.global.extraRequestThreshold()&&(s.push(o),o=[]),o.push([u,c,f])}this.headerClient.logUsage("header+index"),o.length>0&&s.push(o);let a=s.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*hS.merge(a)}lengthBeforeTree(){return Bg.length+Gd+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new wSe(this.headerClient.httpClient,t)}async*readFeatureBatch(t,n){let[r]=t[0],[i,s]=t[t.length-1],o=this.buildFeatureClient(n),a=i+s-r;for(let[l,,u]of t){let f=await this.readFeature(o,l,a);yield{id:u,feature:f},a=0}o.logUsage("feature")}async readFeature(t,n,r){let i,s=n+this.lengthBeforeFeatures();i=new DataView(await t.getRange(s,4,r,"feature length")).getUint32(0,!0);let o=new Uint8Array(await t.getRange(s+4,i,r,"feature data")),a=new Uint8Array(i+Gd);a.set(o,Gd);let l=new ph(a);return l.setPosition(Gd),hc.getRootAsFeature(l)}}let wSe=class{constructor(t,n){tn(this,"httpClient");tn(this,"bytesEverUsed",0);tn(this,"bytesEverFetched",0);tn(this,"buffer",new ArrayBuffer(0));tn(this,"head",0);if(typeof t=="string")this.httpClient=new _Se(t,n);else if(t instanceof _Se)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,n,r,i){this.bytesEverUsed+=n;let s=t-this.head,o=s+n;if(s>=0&&o<=this.buffer.byteLength)return this.buffer.slice(s,o);let a=Math.max(n,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,i),this.head=t,this.buffer.slice(0,n)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}};class _Se{constructor(t,n){tn(this,"url");tn(this,"nocache");tn(this,"requestsEverMade",0);tn(this,"bytesEverRequested",0);this.url=t,this.nocache=n}async getRange(t,n,r){this.requestsEverMade+=1,this.bytesEverRequested+=n;let i={Range:`bytes=${t}-${t+n-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function UFt(e,t,n){if(!e.subarray(0,3).every((f,c)=>Bg[c]===f))throw Error("Not a FlatGeobuf file");let r=new ph(e),i=r.readUint32(Bg.length);r.setPosition(Bg.length+Gd);let s=QB(r),o=Bg.length+Gd+i,{indexNodeSize:a,featuresCount:l}=s;a>0&&(o+=tz(l,a));let u=[];for(;o<r.capacity();){let f=r.readUint32(o);r.setPosition(o+Gd);let c=hc.getRootAsFeature(r);u.push(t(u.length,c,s)),o+=Gd+f}return u}async function*qFt(e,t,n){let r,i=TFt(e),s=async h=>await i.slice(h),o=new Uint8Array(await s(8));if(!o.subarray(0,3).every((h,p)=>Bg[p]===h))throw Error("Not a FlatGeobuf file");o=new Uint8Array(await s(4));let a=new ph(o),l=a.readUint32(0);o=new Uint8Array(await s(l));let u=QB(a=new ph(o)),{indexNodeSize:f,featuresCount:c}=u;if(f>0){let h=tz(c,f);await s(h)}let d=0;for(;r=await GFt(s,u,t,d++);)yield r}async function*HFt(e,t,n,r,i=!1){let s=await nz.open(e,i);for await(let o of s.selectBbox(t))yield n(o.id,o.feature,s.header)}async function GFt(e,t,n,r){let i=new Uint8Array(await e(4,"feature length"));if(i.byteLength===0)return;let s=new ph(i),o=s.readUint32(0);i=new Uint8Array(await e(o,"feature data"));let a=new Uint8Array(o+4);return a.set(i,4),(s=new ph(a)).setPosition(Gd),n(r,hc.getRootAsFeature(s),t)}function VFt(e,t){return{type:"FeatureCollection",features:UFt(e,KB)}}function WFt(e,t){return qFt(e,KB)}function YFt(e,t,n,r=!1){return HFt(e,t,KB,n,r)}function XFt(e,t,n,r=!1){return e instanceof Uint8Array?VFt(e):e instanceof ReadableStream?WFt(e):YFt(e,t,n,r)}const ESe=new gD({featureProjection:"EPSG:3857"});class ZFt extends nE{constructor(t){super({url:t.url,attributions:t.attributions,wrapX:t.wrapX,format:ESe,strategy:yUe}),this.ressourceURL=t.url,super.setLoader(this.loader)}fgbBoundingBox(t,n){const r=e6(t,n.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(t,n,r,i,s){const o=this.fgbBoundingBox(t,r);try{if(o.minX!==-1/0){const a=[],l=XFt(this.ressourceURL,o);for await(const u of l){const f=ESe.readFeature(u);a.push(f)}super.clear(),super.addFeatures(a),i(a)}}catch{s()}}}window.eoxMapAdvancedOlSources={...PKe,WMTSCapabilities:_Ft,FlatGeoBuf:ZFt};function KFt(e,t="property"){return e.map(([n,r])=>{var s,o;if(n==="extent"&&((o=(s=r.value)==null?void 0:s.temporal)==null?void 0:o.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replace(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const i=a=>Object.entries(a).filter(([l,u])=>{let f=!0;return u.roles&&(f=u.roles.includes("metadata")),u.rel&&(f=u.rel==="example"),f});return(n==="assets"||n==="links"||n==="providers")&&(t==="property"?r.formatted=`<ul>${i(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:t==="featured"&&(r.formatted=i(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(n)&&(r.length=i(r.value).length),[n,r]})}function JFt(e){e.stacInfo.length&&(e.stacProperties=e.stacInfo.reduce((t,n)=>({...t,...n.properties}),{}),e.requestUpdate())}var SM,SSe;function Cb(){if(SSe)return SM;SSe=1;const e={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return SM={locales:[],collator:new Intl.Collator(e.collatorOptions),dateFormatter:new Intl.DateTimeFormat(e.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(e.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(e.numberFormatterOptions),translate:null,getDefaults(){return e},setLocales(n,r={},i={},s={},o={}){this.locales=n,o=Object.assign({},e.collatorOptions,o),this.collator=new Intl.Collator(n,o),r=Object.assign({},e.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(n,r),i=Object.assign({},e.dateTimeFormatterOptions,i),this.dateTimeFormatter=new Intl.DateTimeFormat(n,i),s=Object.assign({},e.numberFormatterOptions,s),this.numberFormatter=new Intl.NumberFormat(n,s)},setTranslator(n){this.translate=n},format(n,r=null){if(r)for(let i in r)n=n.replaceAll(`{${i}}`,r[i]);return n}},SM}var AM,ASe;function pS(){if(ASe)return AM;ASe=1;const e=Cb(),t={e(n){return typeof n!="string"&&(n=String(n)),n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(n,r=null){return typeof e.translate=="function"?e.translate(n,r):e.format(n,r)},toNothing(n=null){return n===null&&(n=t.t("n/a")),`<i class="null">${n}</i>`},toList(n,r=!1,i=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(n)||(n=[n]),r&&(n=n.slice(0),typeof r=="function"?n.sort(r):n.sort(),s===null&&(o="ol")),typeof i=="function"&&(n=n.map(i)),n.length===0?t.toNothing():n.length===1?n[0]:`<${o}><li>${n.join("</li><li>")}</li></${o}>`},toLink(n,r="",i="",s="_blank"){return r||(n.length>50?r=n.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"/[]/"+o[4]:o[1]}):r=n.replace(/^\w+:\/\//i,"")),`<a href="${t.e(n)}" rel="${t.e(i)}" target="${t.e(s)}">${t.e(r)}</a>`},toObject(n,r=null,i=null,s=[],o=null,a=[]){let l="<dl>",u=Array.isArray(s)&&s.length>=2?s:Object.keys(n);for(let f of u){if(!(f in n)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([f])))continue;let c;typeof i=="function"?c=i(f,n):c=t.formatKey(f,!0);let d=n[f];typeof r=="function"&&(d=r(d,f,n)),l+=`<dt>${c}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(n,r){return`<abbr title="${t.e(r)}">${t.e(n)}</abbr>`},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},formatKey(n,r=!1){if(n.includes("/"))return t.e(t.t(n));r===!1&&(n=n.replace(/^[\w-]+:/i,""));let i=n.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return t.e(t.t(i))},hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(n){return n.reduce((r,i)=>r+i.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(n){return n.reduce((r,i)=>Object.keys(i).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),r),[])},unit(n,r=""){return typeof r=="string"&&r.length>0?(r=t.t(r),`${n}&nbsp;<span class="unit">${r}</unit>`):n}};return AM=t,AM}var CM,CSe;function QFt(){if(CSe)return CM;CSe=1;const e=pS(),t=Cb(),n={fields(r){let i=["extensions","metadata","links","assets"];for(let s of i)for(let o in r[s])r[s][o]=n.field(r[s][o],r[s],r);return r},field(r,i={},s={}){if(typeof r=="string")return{label:r};if(typeof r.alias=="string"){let o=i[r.alias]||s.metadata[r.alias];if(!o)throw new Error("Alias is invalid: "+r.alias);return Object.assign(r,n.field(o,i,s))}if(e.isObject(r.items)){let o=[];for(let a in r.items)r.items[a]=n.field(r.items[a],i,s),o.push(Object.assign({key:a},r.items[a]));r.itemOrder=o.sort((a,l)=>a.id===!0?-1:l.id===!0?1:typeof a.order=="number"&&typeof l.order=="number"?a.order-l.order:t.collator.compare(e.t(a.label),e.t(l.label))).map(a=>a.key)}if(e.isObject(r.properties))for(let o in r.properties)r.properties[o]=n.field(r.properties[o],i,s);return r}};return CM=n,CM}var kM,kSe;function rz(){if(kSe)return kM;kSe=1;const e=QFt(),t={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(n){n=e.fields(n);for(let r in this.fields)Object.assign(this.fields[r],n[r])},getDependency(n){return this.dependencies[n]||console.warn(`Dependency '${n}' not registered.`),this.dependencies[n]},addDependency(n,r){this.dependencies[n]=r},addExtension(n,r){this.fields.extensions[n]=e.field(r,this.fields.extensions)},addMetadataField(n,r){this.fields.metadata[n]=e.field(r,this.fields.metadata)},addLinkField(n,r){this.fields.links[n]=e.field(r,this.fields.links)},addAssetField(n,r){this.fields.assets[n]=e.field(r,this.fields.assets)},addMetadataFields(n){for(var r in n)t.addMetadataField(r,n[r])},getExtension(n){return this.fields.extensions[n]?this.fields.extensions[n]:{}},getSpecification(n,r=null){let i={};return r==="assets"&&this.fields.assets[n]?i=this.fields.assets[n]:r==="links"&&this.fields.links[n]?i=this.fields.links[n]:this.fields.metadata[n]&&(i=this.fields.metadata[n]),i}};return kM=t,kM}const eOt={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},tOt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},method:"HTTP Method",headers:"HTTP Headers",body:"Request Body"},nOt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},rOt=JSON.parse('{"id":"Identifier","keywords":"Keywords","datetime":{"label":"Time of Data","format":"Timestamp","summary":false},"title":{"label":"Title","summary":false},"description":{"label":"Description","format":"CommonMark","summary":false},"roles":"Purpose","start_datetime":{"label":"Time of Data begins","format":"Timestamp","summary":false},"end_datetime":{"label":"Time of Data ends","format":"Timestamp","summary":false},"created":{"label":"Created","format":"Timestamp","summary":"r"},"updated":{"label":"Updated","format":"Timestamp","summary":"r"},"published":{"label":"Published","format":"Timestamp","summary":"r"},"expires":{"label":"Expires","format":"Timestamp","summary":"r"},"unpublished":{"label":"Unpublished","format":"Timestamp","summary":"r"},"license":{"label":"License","format":"License","summary":false},"providers":{"label":"Providers","format":"Providers","summary":false},"platform":"Platform","instruments":{"label":"Instruments","format":"CSV"},"constellation":"Constellation","mission":"Mission","gsd":{"label":"GSD","explain":"Ground Sample Distance","unit":"m"},"bands":{"label":"Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"alias":"description","order":2},"gsd":{"alias":"gsd","sortable":true},"nodata":{"alias":"nodata"},"data_type":{"alias":"data_type","sortable":true},"statistics":{"alias":"statistics"},"eo:common_name":{"alias":"eo:common_name","sortable":true,"order":1},"eo:center_wavelength":{"alias":"eo:center_wavelength","sortable":true},"eo:full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true},"eo:solar_illumination":{"alias":"eo:solar_illumination","sortable":true},"raster:sampling":{"alias":"raster:sampling","sortable":true},"unit":{"alias":"unit","sortable":true},"raster:bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"raster:spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"raster:scale":{"alias":"raster:scale","sortable":true},"raster:offset":{"alias":"raster:offset","sortable":true},"raster:histogram":{"alias":"raster:histogram"},"classification:classes":{"alias":"classification:classes"},"classification:bitfields":{"alias":"classification:bitfields"}}},"nodata":{"label":"No-Data Values","format":"CSV","summary":false},"data_type":{"label":"Data Type of Values","format":"FileDataType"},"unit":"Unit of Values","statistics":{"label":"Statistics","listWithKeys":true,"items":{"mean":"Average","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stdev":{"label":"Std. Dev.","explain":"Standard Deviation"},"count":{"label":"Count","explain":"Total number of values"},"valid_percent":{"label":"Valid","explain":"Percentage of valid values","unit":"%"}}},"version":{"label":"Data Version","summary":false},"deprecated":{"label":"Deprecated","summary":false},"experimental":{"label":"Experimental","summary":false},"language":{"label":"Current Language","ext":"language","summary":"v","properties":{"name":{"label":"Name"},"alternate":{"label":"Alternate Name"},"code":{"label":"Code"},"dir":{"label":"Direction","explain":"Reading and writing direction","mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"languages":{"label":"Available Languages","ext":"language","summary":false,"items":{"name":{"label":"Name","sortable":true,"order":0},"alternate":{"label":"Alternate Name","sortable":true,"order":1},"code":{"label":"Code","sortable":true,"order":2},"dir":{"label":"Direction","explain":"Reading and writing direction","sortable":true,"order":3,"mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"contacts":{"label":"Contacts","ext":"contacts","summary":"v","items":{"name":{"label":"Name"},"identifier":{"label":"Identifier"},"position":{"label":"Position"},"organization":{"label":"Organization"},"logo":{"label":"Logo","format":"Image"},"phones":{"label":"Phone","items":{"value":{"label":"Number","format":"Phone","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal","fax":"Fax"}}}},"emails":{"label":"Email","items":{"value":{"label":"Address","format":"Email","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal"}}}},"addresses":{"label":"Postal Addresses","format":"Address","items":{"deliveryPoint":{"label":"Street / House","order":0},"city":{"label":"City","order":1},"administrativeArea":{"label":"State / Province","order":2},"postalCode":{"label":"Postal Code","order":3},"country":{"label":"Country","order":4}}},"links":{"label":"Additional Resources","format":"Link"},"contactInstructions":"Further Instructions","roles":{"label":"Types","format":"CSV"}}},"themes":{"label":"Themes","ext":"themes","summary":false,"items":{"scheme":{"label":"Vocabulary","order":0,"format":"Url"},"concepts":{"label":"Terms","order":1,"format":"Concepts","items":{"id":{"label":"Identifier","order":0},"title":{"label":"Title","order":1},"description":{"label":"Description","order":2},"url":{"label":"URL","order":3,"format":"Url"}}}}},"crs":{"label":"CRS","format":"CRS","explain":"Coordinate Reference System"},"anon:size":{"label":"Uncertainty","unit":"","explain":"The size of one side of the anonymized bounding box"},"anon:warning":{"label":"Warning","summary":false},"classification:classes":{"summary":false,"label":"Classes","items":{"color_hint":{"label":"Color","order":0,"format":"HexColor"},"value":{"label":"Value","sortable":true,"order":1},"title":{"label":"Title","sortable":true,"order":2},"name":{"label":"Identifier","sortable":true,"order":3},"description":{"label":"Description","order":4,"format":"CommonMark"},"percentage":{"label":"Percentage of samples","sortable":true,"order":5,"unit":"%"},"count":{"label":"Number of samples","sortable":true,"order":6},"nodata":{"label":"No-data value","order":7,"default":false}}},"classification:bitfields":{"summary":false,"label":"Bit Mask","items":{"name":{"label":"Name","sortable":true,"order":0},"offset":{"label":"Offset","explain":"Offset to the first bit","order":1},"length":{"label":"Number of bits","order":2},"description":{"label":"Description","order":3,"format":"CommonMark"},"classes":{"alias":"classification:classes"},"roles":{"label":"Purpose"}}},"cube:dimensions":{"label":"Dimensions","summary":false,"listWithKeys":true,"items":{"type":{"label":"Type","order":0},"axis":{"label":"Axis","order":1},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"bbox":{"alias":"proj:bbox","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":5},"geometry_types":{"label":"Geometry Types","order":5},"reference_system":{"label":"Reference System","explain":"Coordinate / Temporal / Other Reference System","order":6}}},"cube:variables":{"label":"Variables","summary":false,"listWithKeys":true,"items":{"dimensions":{"label":"Dimensions","order":0},"type":{"label":"Type","order":1,"mapping":{"data":"Measured values","auxiliary":"Coordinate data"}},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":6}}},"eo:bands":{"label":"Spectral Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"common_name":{"alias":"eo:common_name","sortable":true,"order":1},"center_wavelength":{"alias":"eo:center_wavelength","sortable":true,"order":2},"full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true,"order":3},"solar_illumination":{"alias":"eo:solar_illumination","sortable":true,"order":7},"description":{"alias":"description"},"gsd":{"alias":"gsd","sortable":true},"cloud_cover":{"alias":"eo:cloud_cover","sortable":true}}},"eo:cloud_cover":{"label":"Cloud Cover","unit":"%"},"eo:snow_cover":{"label":"Snow/Ice Cover","unit":"%"},"eo:common_name":"Common Name","eo:center_wavelength":{"label":"Wavelength","explain":"The center wavelength of the band","unit":"m"},"eo:full_width_half_max":{"label":"FWHM","explain":"Full Width Half Max","unit":"m"},"eo:solar_illumination":{"label":"Solar Illumination","unit":"W/m/m"},"forecast:reference_datetime":{"label":"Reference Time","format":"Timestamp","summary":"r"},"forecast:horizon":{"label":"Forecast Horizon","explain":"The time between the reference time and the forecast time","format":"Duration"},"forecast:duration":{"label":"Forecast Length","format":"Duration"},"file:bits_per_sample":{"alias":"raster:bits_per_sample"},"file:byte_order":"Byte Order","file:checksum":{"label":"Checksum","format":"Checksum","summary":false},"file:data_type":{"alias":"data_type"},"file:header_size":{"label":"Header Size","format":"FileSize","summary":false},"file:nodata":{"alias":"nodata"},"file:size":{"label":"Size","format":"FileSize","summary":false},"file:unit":{"alias":"unit"},"file:values":{"label":"Map of Values","summary":false,"items":{"values":{"label":"Values","format":"CSV","order":1},"summary":{"label":"Summary","order":0}}},"file:local_path":{"label":"Local Path","summary":false},"nodata:values":{"alias":"nodata"},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{"label":"System Environment","mapping":{"OR":"Operational system, real-time data","OT":"Operational system, test data","IR":"Test system, real-time data","IT":"Test system, test data","IP":"Test system, playback data","IS":"Test system, simulated data"}},"goes:image_type":{"label":"Area","mapping":{"FULL DISK":"The Americas (full disk)","CONUS":"North America (continental US)","MESOSCALE":"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{"label":"Area in Central/South America","mapping":{"1":"Region 1","2":"Region 2"}},"goes:mode":{"label":"Capture Mode","mapping":{"3":"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)","4":"4: 1x full disk (every 5 minutes)","6":"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{"label":"Time Threshold in a Group","explain":"Lightning group maximum time difference among lightning events in a group","unit":"s"},"goes:flash_time_threshold":{"label":"Time Threshold in a Flash","explain":"Lightning flash maximum time difference among lightning events in a flash","unit":"s"},"goes:lightning_wavelength":{"label":"Central Wavelength","unit":"nm"},"goes:yaw_flip_flag":{"label":"Yaw Flip Configuration","explain":"Flag indicating that the spacecraft is operating in yaw flip configuration.","mapping":{"0":"Upright","1":"Neither","2":"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{"label":"Satellite Subpoint Latitude","unit":"N"},"goes:nominal_satellite_subpoint_lon":{"label":"Satellite Subpoint Longitude","unit":"E"},"goes:nominal_satellite_height":{"label":"Satellite Height","explain":"Nominal satellite height above GRS 80 ellipsoid","unit":"km"},"goes:percent_navigated_L1b_events":{"label":"Events navigated by Instrument","format":"Percent0to1","unit":"%"},"goes:percent_uncorrectable_L0_errors":{"label":"Data Lost","format":"Percent0to1","unit":"%"},"grid:code":{"label":"Grid","format":"GridCode"},"raster:bands":{"label":"Layers","items":{"nodata":{"alias":"nodata"},"sampling":{"alias":"raster:sampling","sortable":true},"data_type":{"alias":"data_type","sortable":true},"bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"statistics":{"alias":"statistics"},"unit":{"alias":"unit","sortable":true},"scale":{"alias":"raster:scale","sortable":true},"offset":{"alias":"raster:offset","sortable":true},"histogram":{"alias":"raster:histogram"}}},"raster:sampling":{"label":"Sampling","mapping":{"area":"Area","point":"Point (at pixel center)"}},"raster:bits_per_sample":"Bits per Sample","raster:spatial_resolution":{"label":"Resolution","explain":"Average spatial resolution","unit":"m"},"raster:scale":"Scale","raster:offset":"Offset","raster:histogram":{"label":"Histogram","custom":true},"label:properties":{"label":"Properties","null":"raster data"},"label:classes":{"label":"Classes","items":{"name":{"label":"Name","null":"raster-formatted","sortable":true,"id":true},"classes":"Classes"}},"label:description":{"label":"Description","format":"CommonMark","summary":false},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{"label":"Overviews","summary":false,"items":{"property_key":{"label":"Property Key","id":true},"counts":{"label":"Counts","custom":true},"statistics":{"label":"Statistics","custom":true}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{"label":"Pass Number","mapping":{"1":"1 (less latency / less gauges)","2":"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{"label":"Accumulation Period","unit":"h"},"noaa_mrms_qpe:region":{"label":"Region","mapping":{"CONUS":"Continental US","HAWAII":"Hawaii","GUAM":"Guam","ALASKA":"Alaska","CARIB":"Caribbean Islands"}},"openeo:status":"Processing Status","api_version":{"label":"API Version","ext":"openeo"},"backend_version":{"label":"Back-End Version","ext":"openeo"},"production":{"label":"Production-Ready","ext":"openeo"},"endpoints":{"label":"Supported Endpoints","ext":"openeo","summary":false,"items":{"path":{"label":"Path Template","order":0},"methods":{"label":"HTTP Methods","order":1,"format":"CSV"}}},"billing":{"label":"Billing","ext":"openeo","custom":true,"summary":false},"order:status":{"label":"Status","mapping":{"orderable":"Orderable (data can be ordered)","ordered":"Ordered (preparing to deliver data)","pending":"Pending (waiting for activation)","shipping":"Shipping (data is getting processed)","succeeded":"Delivered (data is available)","failed":"Failed (unable to deliver)","canceled":"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{"label":"Submitted","format":"Timestamp","summary":"r"},"order:expiration_date":{"alias":"expires"},"pc:count":{"label":"Points","explain":"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{"label":"Schemas","summary":false,"items":{"name":{"label":"Name","sortable":true,"id":true},"size":{"label":"Size","unit":"bytes","sortable":true},"type":{"label":"Type","sortable":true}}},"pc:density":"Density","pc:statistics":{"label":"Statistics","summary":"s","items":{"name":{"label":"Name","id":true},"position":"Position","average":"Average","count":"Count","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stddev":{"label":"Std. Dev.","explain":"Standard Deviation"},"variance":"Variance"}},"processing:expression":{"label":"Processing Instructions","summary":false},"processing:lineage":{"label":"Lineage","format":"CommonMark","summary":false},"processing:level":"Level","processing:facility":"Facility","processing:software":{"label":"Software","format":"Software","summary":false},"processing:version":"Processor Version","processing:datetime":{"label":"Processing Time","format":"Timestamp","summary":"r"},"product:type":"Product Type","product:timeliness":{"label":"Timeliness","format":"Duration"},"product:timeliness_category":"Timeliness Category","product:acquisition_type":{"label":"Acquisition Type","mapping":{"nominal":"Nominal","calibration":"Calibration","other":"Other"}},"proj:epsg":{"label":"EPSG Code","format":"EPSG","summary":"v"},"proj:code":{"label":"Code","format":"CrsCode","summary":"v"},"proj:wkt2":{"label":"WKT2","explain":"Well-Known Text, version 2","format":"WKT2","summary":false},"proj:projjson":{"label":"PROJJSON","explain":"JSON encoding of WKT2","format":"PROJJSON","summary":false},"proj:geometry":{"label":"Footprint","custom":true,"summary":false},"proj:bbox":{"label":"Bounding Box","custom":true,"summary":false},"proj:centroid":{"label":"Centroid","custom":true,"summary":false},"proj:shape":{"label":"Image Dimensions","format":"Shape","summary":false},"proj:transform":{"label":"Transformation Matrix","format":"Transform","summary":false},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{"label":"Center Frequency","unit":"GHz"},"sar:polarizations":{"label":"Polarizations","format":"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{"label":"Range Resolution","unit":"m"},"sar:resolution_azimuth":{"label":"Azimuth Resolution","unit":"m"},"sar:pixel_spacing_range":{"label":"Range Pixel Spacing","unit":"m"},"sar:pixel_spacing_azimuth":{"label":"Azimuth Pixel Spacing","unit":"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{"label":"ENL","explain":"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{"label":"Int. Designator","explain":"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{"label":"Abs. Orbit Number","explain":"Absolute Orbit Number"},"sat:relative_orbit":{"label":"Rel. Orbit Number","explain":"Relative Orbit Number"},"sat:anx_datetime":{"label":"ANX Time","format":"Timestamp","explain":"Ascending Node Crossing time","summary":"r"},"sci:doi":{"label":"DOI","format":"DOI"},"sci:citation":"Citation","sci:publications":{"label":"Publications","summary":false,"items":{"citation":{"label":"Publication","sortable":true,"order":0},"doi":{"label":"DOI","format":"DOI","sortable":true,"order":1}}},"ssys:targets":"Target Body","storage:platform":{"label":"Provider","mapping":{"ALIBABA":"Alibaba Cloud","AWS":"Amazon AWS","AZURE":"Microsoft Azure","GCP":"Google Cloud Platform","IBM":"IBM Cloud","ORACLE":"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{"label":"Columns","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"type":{"label":"Data Type","sortable":true,"order":1},"description":{"label":"Description","format":"CommonMark","order":2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{"label":"Tables","summary":false,"listWithKeys":true,"items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"label":"Description","format":"CommonMark","order":1}}},"tiles:tile_matrix_sets":{"label":"Tile Matrix Sets","custom":true,"summary":false},"tiles:tile_matrix_set_links":{"label":"Tile Matrix Set Links","custom":true,"summary":false},"view:off_nadir":{"label":"Off-Nadir Angle","unit":""},"view:incidence_angle":{"label":"Incidence Angle","unit":""},"view:azimuth":{"label":"Viewing Azimuth","unit":""},"view:sun_azimuth":{"label":"Sun Azimuth","unit":""},"view:sun_elevation":{"label":"Sun Elevation","unit":""},"pl:black_fill":{"label":"Unfilled Image Parts","unit":"%"},"pl:clear_percent":{"label":"Clear Sky","unit":"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{"label":"Spatial Resolution","unit":"m"},"pl:publishing_stage":{"label":"Publishing Stage","mapping":{"preview":"Preview","standard":"Standard","finalized":"Finalized"}},"pl:quality_category":{"label":"Quality Category","mapping":{"standard":"Standard","test":"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{"label":"Type","mapping":{"image":"Single image","image_collection":"Image collection","table":"Table"}},"gee:cadence":"Cadence","gee:schema":{"label":"Variables","items":{"name":"Name","description":"Description","type":"Data Type"},"summary":false},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{"label":"Terms of Use","format":"CommonMark","summary":false},"gee:visualizations":{"label":"Visualizations","custom":true,"summary":false},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{"label":"WRS Type","explain":"Worldwide Reference System Type"},"landsat:wrs_path":{"label":"WRS Path","explain":"Worldwide Reference System Path"},"landsat:wrs_row":{"label":"WRS Row","explain":"Worldwide Reference System Row"},"landsat:cloud_cover_land":{"label":"Land Cloud Cover","unit":"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{"label":"Summary","summary":false},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{"label":"Product ID","summary":"s"},"sentinel:data_coverage":{"label":"Data Coverage","unit":"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{"label":"Processing Level","explain":"Geolocation precision level","mapping":{"L2":"Geolocation using only satellite telemetry","L3":"Control points used to geolocate image, no terrain correction","L4":"Control points used to geolocate image, orthorectified"},"summary":"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{"label":"Specification","mapping":{"SR":"Surface Reflectance (Optical)","ST":"Surface Temperature (Optical)","NRB":"Normalized Radar Backscatter (SAR)","POL":"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{"label":"Platform Altitude","unit":"m"},"card4l:incidence_angle_near_range":{"label":"Incidence Angle (near)","unit":""},"card4l:incidence_angle_far_range":{"label":"Incidence Angle (far)","unit":""},"card4l:noise_equivalent_intensity":{"label":"Noise Equivalent Intensity","unit":"dB"},"card4l:mean_faraday_rotation_angle":{"label":"Mean Faraday Rotation","unit":""},"card4l:speckle_filtering":{"label":"Speckle Filtering","custom":true,"summary":false,"null":"not applied"},"card4l:relative_rtc_accuracy":{"label":"Rel. RTC Accuracy","explain":"Relative accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:absolute_rtc_accuracy":{"label":"Abs. RTC Accuracy","explain":"Absolute accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:northern_geometric_accuracy":{"label":"Northern Geometric Accuracy","unit":"m"},"card4l:eastern_geometric_accuracy":{"label":"Eastern Geometric Accuracy","unit":"m"},"card4l:ellipsoidal_height":{"label":"Ellipsoidal Height","unit":"m"},"geoadmin:variant":{"label":"Product Variant","mapping":{"krel":"RGB color with relief","komb":"RGB color without relief","kgrel":"Grayscale with relief","kgrs":"Grayscale without relief"}},"href:servers":{"label":"Servers","ext":"web-map-links"},"pmtiles:layers":{"label":"Layers","ext":"web-map-links"},"wms:layers":{"label":"Layers","ext":"web-map-links"},"wms:styles":{"label":"Styles","ext":"web-map-links"},"wms:dimensions":{"label":"Dimensions","ext":"web-map-links"},"wms:transparent":{"label":"Transparency","ext":"web-map-links"},"wmts:layer":{"label":"Layers","ext":"web-map-links"},"wmts:dimensions":{"label":"Dimensions","ext":"web-map-links"}}'),iOt={extensions:eOt,links:tOt,assets:nOt,metadata:rOt};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vd=function(){return Vd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Vd.apply(this,arguments)},Kg="\\d+(?:[\\.,]\\d+)?",sOt="("+Kg+"W)",oOt="("+Kg+"Y)?("+Kg+"M)?("+Kg+"D)?",aOt="T("+Kg+"H)?("+Kg+"M)?("+Kg+"S)?",lOt="^P(?:"+sOt+"|"+oOt+"(?:"+aOt+")?)$",uOt=new RegExp(lOt),f8e=["weeks","years","months","days","hours","minutes","seconds"],d8e={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},cOt=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),fOt=function(e){var t=e.match(uOt);if(!t)throw new Error("Invalid duration string");var n=t.slice(1).reduce(function(r,i,s){return r[f8e[s]]=parseFloat(i)||0,r},{});return n},dOt=function(e){return e.weeks&&e.weeks>0?Object.assign({},cOt,{weeks:e.weeks}):f8e.reduce(function(t,n){var r;return Vd(Vd({},t),(r={},r[n]=e[n]||0,r))},{})},iz={locales:{},options:{},setLocales:function(e,t){this.locales=Vd(Vd({},this.locales),e),t&&(this.options=Vd(Vd({},this.options),t))},getLangConfig:function(e){var t=this.locales[e];if(!t&&this.options.fallbackLocale&&(t=this.locales[this.options.fallbackLocale]),!t)throw new Error("isoDuration: Translations for language: "+e+" are not provided");return t}},hOt=function(e){for(var t=["years","months","days"],n="",r=0,i=t;r<i.length;r++){var s=i[r];e[s]&&(n+=""+e[s]+d8e[s])}return n},pOt=function(e){for(var t=["hours","minutes","seconds"],n="",r=0,i=t;r<i.length;r++){var s=i[r];e[s]&&(n+=""+e[s]+d8e[s])}return n},mOt=function(e){if(e.weeks>0)return"P"+e.weeks+"W";var t="P",n=hOt(e);n&&(t+=n);var r=pOt(e);return r&&(t+="T"+r),!n&&!r&&(t+="0D"),t},gOt=function(e,t){var n=iz.getLangConfig(t);return e.weeks+" "+n.weeks(e.weeks)},yOt=function(e,t,n){for(var r=iz.getLangConfig(t),i="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],u=e[l];if(u&&(i!==""&&(i+=" "),i+=u+" "+r[l](u),o++,n&&n.largest&&n.largest<=o))break}return i},vOt=function(e,t,n){return e.weeks>0?gOt(e,t):yOt(e,t,n)},TM=["seconds","minutes","hours","days","months"],fC=function(e){return function(t){return{nextUnitValue:Math.floor(t/e),value:t%e}}},TSe=function(e,t){return new Date(t,e+1,0).getDate()},bOt={seconds:fC(60),minutes:fC(60),hours:fC(24),days:function(e,t){for(var n=t?new Date(t.getTime()):new Date,r=e,i=0,s=TSe(n.getMonth(),n.getFullYear());r>s;)r=r-s,i++,n.setMonth(n.getMonth()+1),s=TSe(n.getMonth(),n.getFullYear());return{nextUnitValue:i,value:r}},months:fC(12)},xOt=function(e,t){for(var n=Vd({},e),r=0;r<TM.length;r++){var i=TM[r],s=n[i];if(s>0){var o=bOt[i](s,t);if(n[i]=o.value,o.nextUnitValue){var a=i==="months"?"years":TM[r+1];n[a]=n[a]+o.nextUnitValue}}}return n},DSe=function(){function e(t){this.durationObj=t}return e.prototype.parse=function(){return this.durationObj},e.prototype.toString=function(){return mOt(this.durationObj)},e.prototype.humanize=function(t,n){return vOt(this.durationObj,t,n)},e.prototype.normalize=function(t){return this.durationObj=xOt(this.durationObj,t),this},e.prototype.isEmpty=function(){var t=this;return Object.keys(this.durationObj).every(function(n){return t.durationObj[n]===0})},e}();function wOt(e){return e<=2?0:e>2&&e<11?1:0}var _Ot={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return["",""][wOt(e)]},seconds:function(e){return e===1?"":""},decimal:","};function Ps(e){return Math.floor(e)!==e?2:e%100>=5&&e%100<=20||e%10>=5&&e%10<=9||e%10===0?0:e%10===1?1:e>1?2:0}var EOt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},SOt={years:function(e){return"any"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"os")},weeks:function(e){return"setman"+(e===1?"a":"es")},days:function(e){return"di"+(e===1?"a":"es")},hours:function(e){return"hor"+(e===1?"a":"es")},minutes:function(e){return"minut"+(e===1?"":"s")},seconds:function(e){return"segon"+(e===1?"":"s")},decimal:","};function wl(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&e%100<10?2:3}var AOt={years:function(e){return["rok","roku","roky","let"][wl(e)]},months:function(e){return["msc","msce","msce","msc"][wl(e)]},weeks:function(e){return["tden","tdne","tdny","tdn"][wl(e)]},days:function(e){return["den","dne","dny","dn"][wl(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodin"][wl(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][wl(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][wl(e)]},decimal:","},COt={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uge"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"e")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minut"+(e===1?"":"ter")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},kOt={years:function(e){return"Jahr"+(e===1?"":"e")},months:function(e){return"Monat"+(e===1?"":"e")},weeks:function(e){return"Woche"+(e===1?"":"n")},days:function(e){return"Tag"+(e===1?"":"e")},hours:function(e){return"Stunde"+(e===1?"":"n")},minutes:function(e){return"Minute"+(e===1?"":"n")},seconds:function(e){return"Sekunde"+(e===1?"":"n")},decimal:","},TOt={years:function(e){return"year"+(e===1?"":"s")},months:function(e){return"month"+(e===1?"":"s")},weeks:function(e){return"week"+(e===1?"":"s")},days:function(e){return"day"+(e===1?"":"s")},hours:function(e){return"hour"+(e===1?"":"s")},minutes:function(e){return"minute"+(e===1?"":"s")},seconds:function(e){return"second"+(e===1?"":"s")},decimal:"."},DOt={years:function(e){return"ao"+(e===1?"":"s")},months:function(e){return"mes"+(e===1?"":"es")},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"da"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},LOt={years:function(e){return"aasta"+(e===1?"":"t")},months:function(e){return"kuu"+(e===1?"":"d")},weeks:function(e){return"ndal"+(e===1?"":"at")},days:function(e){return"pev"+(e===1?"":"a")},hours:function(e){return"tund"+(e===1?"":"i")},minutes:function(e){return"minut"+(e===1?"":"it")},seconds:function(e){return"sekund"+(e===1?"":"it")},decimal:","},ROt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},FOt={years:function(e){return e===1?"vuosi":"vuotta"},months:function(e){return e===1?"kuukausi":"kuukautta"},weeks:function(e){return"viikko"+(e===1?"":"a")},days:function(e){return"piv"+(e===1?"":"")},hours:function(e){return"tunti"+(e===1?"":"a")},minutes:function(e){return"minuutti"+(e===1?"":"a")},seconds:function(e){return"sekunti"+(e===1?"":"a")},decimal:","},OOt={years:function(){return"r"},months:function(e){return e===1?"mnaur":"mnair"},weeks:function(e){return e===1?"vika":"vikur"},days:function(e){return e===1?"dagur":"dagar"},hours:function(e){return e===1?"tmi":"tmar"},minutes:function(e){return e===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},MOt={years:function(e){return"an"+(e>=2?"s":"")},months:function(){return"mois"},weeks:function(e){return"semaine"+(e>=2?"s":"")},days:function(e){return"jour"+(e>=2?"s":"")},hours:function(e){return"heure"+(e>=2?"s":"")},minutes:function(e){return"minute"+(e>=2?"s":"")},seconds:function(e){return"seconde"+(e>=2?"s":"")},decimal:","},$Ot={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:","},IOt={years:function(e){return e===1?"":""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(e){return e===1?"":""},hours:function(e){return e===1?"":""},minutes:function(e){return e===1?"":""},seconds:function(e){return e===1?"":""},decimal:"."},POt={years:function(e){return e%10===2||e%10===3||e%10===4?"godine":"godina"},months:function(e){return e===1?"mjesec":e===2||e===3||e===4?"mjeseca":"mjeseci"},weeks:function(e){return e%10===1&&e!==11?"tjedan":"tjedna"},days:function(e){return e===1?"dan":"dana"},hours:function(e){return e===1?"sat":e===2||e===3||e===4?"sata":"sati"},minutes:function(e){var t=e%10;return(t===2||t===3||t===4)&&(e<10||e>14)?"minute":"minuta"},seconds:function(e){return e===10||e===11||e===12||e===13||e===14||e===16||e===17||e===18||e===19||e%10===5?"sekundi":e%10===1?"sekunda":e%10===2||e%10===3||e%10===4?"sekunde":"sekundi"},decimal:","},NOt={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},BOt={years:function(){return"r"},months:function(e){return"mnu"+(e===1?"ur":"ir")},weeks:function(e){return"vik"+(e===1?"a":"ur")},days:function(e){return"dag"+(e===1?"ur":"ar")},hours:function(e){return"klukkutm"+(e===1?"i":"ar")},minutes:function(e){return"mnt"+(e===1?"a":"ur")},seconds:function(e){return"seknd"+(e===1?"a":"ur")},decimal:"."},zOt={years:function(e){return"ann"+(e===1?"o":"i")},months:function(e){return"mes"+(e===1?"e":"i")},weeks:function(e){return"settiman"+(e===1?"a":"e")},days:function(e){return"giorn"+(e===1?"o":"i")},hours:function(e){return"or"+(e===1?"a":"e")},minutes:function(e){return"minut"+(e===1?"o":"i")},seconds:function(e){return"second"+(e===1?"o":"i")},decimal:","},jOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},UOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},qOt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function Jy(e){return e===1||e%10===1&&e%100>20?0:Math.floor(e)!==e||e%10>=2&&e%100>20||e%10>=2&&e%100<10?1:2}var HOt={years:function(e){return e%10===0||e%100>=10&&e%100<=20?"met":"metai"},months:function(e){return["mnuo","mnesiai","mnesi"][Jy(e)]},weeks:function(e){return["savait","savaits","savaii"][Jy(e)]},days:function(e){return["diena","dienos","dien"][Jy(e)]},hours:function(e){return["valanda","valandos","valand"][Jy(e)]},minutes:function(e){return["minut","minuts","minui"][Jy(e)]},seconds:function(e){return["sekund","sekunds","sekundi"][Jy(e)]},decimal:","};function vg(e){return e===1||e%10===1&&e%100!==11?0:1}var GOt={years:function(e){return["gads","gadi"][vg(e)]},months:function(e){return["mnesis","mnei"][vg(e)]},weeks:function(e){return["neda","nedas"][vg(e)]},days:function(e){return["diena","dienas"][vg(e)]},hours:function(e){return["stunda","stundas"][vg(e)]},minutes:function(e){return["minte","mintes"][vg(e)]},seconds:function(e){return["sekunde","sekundes"][vg(e)]},decimal:","},VOt={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},WOt={years:function(){return"jaar"},months:function(e){return e===1?"maand":"maanden"},weeks:function(e){return e===1?"week":"weken"},days:function(e){return e===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(e){return e===1?"minuut":"minuten"},seconds:function(e){return e===1?"seconde":"seconden"},decimal:","},YOt={years:function(){return"r"},months:function(e){return"mned"+(e===1?"":"er")},weeks:function(e){return"uke"+(e===1?"":"r")},days:function(e){return"dag"+(e===1?"":"er")},hours:function(e){return"time"+(e===1?"":"r")},minutes:function(e){return"minutt"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","};function bg(e){return e===1?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&!(e%100>10&&e%100<20)?2:3}var XOt={years:function(e){return["rok","roku","lata","lat"][bg(e)]},months:function(e){return["miesic","miesica","miesice","miesicy"][bg(e)]},weeks:function(e){return["tydzie","tygodnia","tygodnie","tygodni"][bg(e)]},days:function(e){return["dzie","dnia","dni","dni"][bg(e)]},hours:function(e){return["godzina","godziny","godziny","godzin"][bg(e)]},minutes:function(e){return["minuta","minuty","minuty","minut"][bg(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","sekund"][bg(e)]},decimal:","},ZOt={years:function(e){return"ano"+(e===1?"":"s")},months:function(e){return e===1?"ms":"meses"},weeks:function(e){return"semana"+(e===1?"":"s")},days:function(e){return"dia"+(e===1?"":"s")},hours:function(e){return"hora"+(e===1?"":"s")},minutes:function(e){return"minuto"+(e===1?"":"s")},seconds:function(e){return"segundo"+(e===1?"":"s")},decimal:","},KOt={years:function(e){return e===1?"an":"ani"},months:function(e){return e===1?"lun":"luni"},weeks:function(e){return e===1?"sptmn":"sptmni"},days:function(e){return e===1?"zi":"zile"},hours:function(e){return e===1?"or":"ore"},minutes:function(e){return e===1?"minut":"minute"},seconds:function(e){return e===1?"secund":"secunde"},decimal:","},JOt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},QOt={years:function(e){return["rok","roky","roky","rokov"][wl(e)]},months:function(e){return["mesiac","mesiace","mesiace","mesiacov"][wl(e)]},weeks:function(e){return["tde","tdne","tdne","tdov"][wl(e)]},days:function(e){return["de","dni","dni","dn"][wl(e)]},hours:function(e){return["hodina","hodiny","hodiny","hodn"][wl(e)]},minutes:function(e){return["minta","minty","minty","mint"][wl(e)]},seconds:function(e){return["sekunda","sekundy","sekundy","seknd"][wl(e)]},decimal:","},eMt={years:function(){return"r"},months:function(e){return"mnad"+(e===1?"":"er")},weeks:function(e){return"veck"+(e===1?"a":"or")},days:function(e){return"dag"+(e===1?"":"ar")},hours:function(e){return"timm"+(e===1?"e":"ar")},minutes:function(e){return"minut"+(e===1?"":"er")},seconds:function(e){return"sekund"+(e===1?"":"er")},decimal:","},tMt={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},nMt={years:function(e){return["","",""][Ps(e)]},months:function(e){return["","",""][Ps(e)]},weeks:function(e){return["","",""][Ps(e)]},days:function(e){return["","",""][Ps(e)]},hours:function(e){return["","",""][Ps(e)]},minutes:function(e){return["","",""][Ps(e)]},seconds:function(e){return["","",""][Ps(e)]},decimal:","},rMt={years:function(){return""},months:function(e){return e===1?"":""},weeks:function(e){return e===1?"":""},days:function(){return""},hours:function(e){return e===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},iMt={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},sMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},oMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function h8e(e){return typeof e=="string"?new DSe(fOt(e)):new DSe(dOt(e))}h8e.setLocales=function(e,t){iz.setLocales(e,t)};const aMt=Object.freeze(Object.defineProperty({__proto__:null,ar:_Ot,bg:EOt,ca:SOt,cs:AOt,da:COt,de:kOt,en:TOt,es:DOt,et:LOt,fa:ROt,fi:FOt,fo:OOt,fr:MOt,gr:$Ot,he:IOt,hr:POt,hu:NOt,is:BOt,isoDuration:h8e,it:zOt,ja:jOt,ko:UOt,lo:qOt,lt:HOt,lv:GOt,ms:VOt,nl:WOt,no:YOt,pl:XOt,pt:ZOt,ro:KOt,ru:JOt,sk:QOt,sv:eMt,tr:tMt,uk:nMt,ur:rMt,vi:iMt,zhCN:sMt,zhTW:oMt},Symbol.toStringTag,{value:"Module"})),lMt=LCe(aMt);var dC={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var LSe;function uMt(){if(LSe)return dC;LSe=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;dC.format=o,dC.parse=a;function o(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var d=c.parameters,h=c.type;if(!h||!s.test(h))throw new TypeError("invalid type");var p=h;if(d&&typeof d=="object")for(var g,v=Object.keys(d).sort(),x=0;x<v.length;x++){if(g=v[x],!n.test(g))throw new TypeError("invalid parameter name");p+="; "+g+"="+u(d[g])}return p}function a(c){if(!c)throw new TypeError("argument string is required");var d=typeof c=="object"?l(c):c;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var h=d.indexOf(";"),p=h!==-1?d.slice(0,h).trim():d.trim();if(!s.test(p))throw new TypeError("invalid media type");var g=new f(p.toLowerCase());if(h!==-1){var v,x,y;for(e.lastIndex=h;x=e.exec(d);){if(x.index!==h)throw new TypeError("invalid parameter format");h+=x[0].length,v=x[1].toLowerCase(),y=x[2],y.charCodeAt(0)===34&&(y=y.slice(1,-1),y.indexOf("\\")!==-1&&(y=y.replace(r,"$1"))),g.parameters[v]=y}if(h!==d.length)throw new TypeError("invalid parameter format")}return g}function l(c){var d;if(typeof c.getHeader=="function"?d=c.getHeader("content-type"):typeof c.headers=="object"&&(d=c.headers&&c.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(c){var d=String(c);if(n.test(d))return d;if(d.length>0&&!t.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(i,"\\$1")+'"'}function f(c){this.parameters=Object.create(null),this.type=c}return dC}var m_={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var cMt=m_.exports,RSe;function fMt(){return RSe||(RSe=1,function(e,t){(function(n,r){r(t)})(cMt,function(n){function r(G){switch(G._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(G,ue){this.current=G,this.entering=ue===!0},s=function(){var G=this.current,ue=this.entering;if(G===null)return null;var Ae=r(G);return ue&&Ae?G._firstChild?(this.current=G._firstChild,this.entering=!0):this.entering=!1:G===this.root?this.current=null:G._next===null?(this.current=G._parent,this.entering=!1):(this.current=G._next,this.entering=!0),{entering:ue,node:G}},o=function(G){return{current:G,root:G,entering:!0,next:s,resumeAt:i}},a=function(G,ue){this._type=G,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ue,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(G){this._literal=G}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(G){this._destination=G}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(G){this._title=G}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(G){this._info=G}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(G){this._level=G}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(G){this._listData.type=G}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(G){this._listData.tight=G}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(G){this._listData.start=G}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(G){this._listData.delimiter=G}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(G){this._onEnter=G}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(G){this._onExit=G}}),a.prototype.appendChild=function(G){G.unlink(),G._parent=this,this._lastChild?(this._lastChild._next=G,G._prev=this._lastChild,this._lastChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.prependChild=function(G){G.unlink(),G._parent=this,this._firstChild?(this._firstChild._prev=G,G._next=this._firstChild,this._firstChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(G){G.unlink(),G._next=this._next,G._next&&(G._next._prev=G),G._prev=this,this._next=G,G._parent=this._parent,G._next||(G._parent._lastChild=G)},a.prototype.insertBefore=function(G){G.unlink(),G._prev=this._prev,G._prev&&(G._prev._next=G),G._next=this,this._prev=G,G._parent=this._parent,G._prev||(G._parent._firstChild=G)},a.prototype.walker=function(){var G=new o(this);return G};var u={};function f(G){var ue,Ae,Fe=u[G];if(Fe)return Fe;for(Fe=u[G]=[],ue=0;ue<128;ue++)Ae=String.fromCharCode(ue),/^[0-9a-z]$/i.test(Ae)?Fe.push(Ae):Fe.push("%"+("0"+ue.toString(16).toUpperCase()).slice(-2));for(ue=0;ue<G.length;ue++)Fe[G.charCodeAt(ue)]=G[ue];return Fe}function c(G,ue,Ae){var Fe,ft,lt,xn,jt,On="";for(typeof ue!="string"&&(Ae=ue,ue=c.defaultChars),typeof Ae>"u"&&(Ae=!0),jt=f(ue),Fe=0,ft=G.length;Fe<ft;Fe++){if(lt=G.charCodeAt(Fe),Ae&&lt===37&&Fe+2<ft&&/^[0-9a-f]{2}$/i.test(G.slice(Fe+1,Fe+3))){On+=G.slice(Fe,Fe+3),Fe+=2;continue}if(lt<128){On+=jt[lt];continue}if(lt>=55296&&lt<=57343){if(lt>=55296&&lt<=56319&&Fe+1<ft&&(xn=G.charCodeAt(Fe+1),xn>=56320&&xn<=57343)){On+=encodeURIComponent(G[Fe]+G[Fe+1]),Fe++;continue}On+="%EF%BF%BD";continue}On+=encodeURIComponent(G[Fe])}return On}c.defaultChars=";/?:@&=+$,-_.!~*'()#",c.componentChars="-_.!~*'()";var d=c,h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Xi<"u"?Xi:typeof self<"u"?self:{};function p(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}function g(G,ue){return ue={exports:{}},G(ue,ue.exports),ue.exports}function v(G){return G&&G.default||G}var x="",y="",w="",_="",A="",T="",D="",k="",R="",O="",B="",K="",L="",$="",I="",U="",q="",Y="",X="",te="",le="",ee="",z="",he="",de="",ze="",He="&",je="&",we="",Ie="",qe="",Pe="",At="",dt="",nn="",Wt="",Mn="",Ze="",pe="",se="",oe="",be="",F="",H="",J="",re="",ye="",xe="",Re="",P="",Q="",ie="",ae="",ke="",Ce="",Ee="",De="",Oe="",We="",tt="",bt="",Pt="'",_t="",Kt="",sn="",rn="",on="",vn="",Er="",Ji="",ds="*",Gi="",No="",qn="",Mr="",Lr="",yn="",Kr="",ir="",Ni="",tr="",$r="",to="",ge="",Le="",it="",Je="",Et="",an="",en="",xt="",et="",pn="",Cn="",Ut="",qt="",Sr="",ci="",Jt="",Xe="",ht="",Xn="",ni="",Ar="",Rr="",nr="",Gt="",vi="",Qi="",bi="",js="",xo="",no="",Bo="",bs="",Fs="",zo="",hs="",ol="",al="",Cr="",es="",ro="",Os="",Us="",fa="",qs="",ll="",Vi="",Wi="",io="",ps="",jo="",Hs="",fi="=",Ma="",so="",Yi="",oo="",ul="",Vt="",Z="",me="",Be="",gt="",mn="",Nt="",In="",dr="",kr="",Ln="",Ai="",Jr="",sr="",di="",xs="",Gs="",Bi="",zi="",wo="",Gr="",da="",Vu="",cl="",fl="",Yc="",Wu="",ne="",_e="",Ye="",yt="",Qt="",Ht="",An="",pr="",Ir="",ts="",ws="",xi="",Li="",Te="",ut="",Yt="",Vn="",mr="",Pn="",ji="",$a="",Tb="",xS="",Db="",Lb="",kh="",Rb="",Fb="",Z0="",Am="",Ob="\\",Cm="",dl="",Mb="",K0="",J0="",$b="",Ib="",Q0="",wS="",_S="",ES="",ud="",cd="",ey="",ty="",Pb="",ny="",Xc="",Zc="",_o="",Yu="",Xu="",km="",Nb="",Th="",Bb="",ry="",Tm="",SS="",iy="",zb="",sy="",oy="",fd="",Dm="",jb="",Lm="",ay="",ly="",dd="",Dh="",Rm="",Ub="",Lh="",qb="",Kc="",Rh="",Jc="",Fh="",hd="",Hb="",Gb="",Vb="",AS="",Qc="",ef="",CS="",kS="",TS="",DS="",LS="",Uo="",_s="",ao="",Es="",Oh="",RS="",Fm="",FS="",uy="",Wb="",cy="",fy=":",dy="",Yb="",Xb="",hy="",Zb=",",Mh="@",OS="",Om="",hu="",Kb="",MS="",Jb="",ha="",Pr="",hl="",Zu="",Ku="",Qb="",py="",ex="",my="",$h="",tx="",gy="",Ju="",nx="",rx="",Mm="",yy="",ix="",sx="",$S="",$m="",ox="",IS="",ax="",pd="",vy="",Im="",lx="",by="",ux="",cx="",Vs="",Pm="",fx="",dx="",hx="",md="",Nm="",px="",mx="",gx="",gd="",yx="",Bm="",vx="",Ih="",yd="",bx="",xx="",wx="",Ph="",Nh="",Bh="",zh="",_x="",Ex="",Qu="",vd="",jh="",Sx="",PS="",NS="",Eo="",Ax="",BS="",Cx="",kx="",Tx="",zS="",jS="",ec="",Uh="",zm="",qh="",pu="",US="",qS="",bd="",Dx="",Lx="",Rx="",jm="",xd="",xy="",wy="",_y="",Hh="`",Fx="",Ox="",Um="",HS="",Gh="",Mx="",$x="",Ey="",Ix="",Px="",Nx="",Vh="",Wh="",Sy="",Bx="",zx="",jx="",Ay="",Ux="$",qx="",wd="",Hx="",qm="",GS="",VS="",Ri="",Cy="",Yh="",pl="",Hm="",ky="",Gx="",Vx="",Wx="",Yx="",Xx="",Ty="",Zx="",Qr="",Kx="",_d="",Gm="",WS="",ns="",YS="",Vm="",m="",b="",S="",E="",C="",M="",N="",j="",V="",W="",ce="",fe="",Se="",ve="",$e="",Ne="",Me="",Ve="",nt="",Qe="",pt="",ct="",mt="",bn="",Mt="",Hn="",fn="",or="",Nr="",ar="",Zn="",lr="",$n="",Br="",Fn="",Jn="",Nn="",vr="",lo="",zr="",Ws="",Ys="",Ci="",uo="",Ia="",Ms="",ml="",Wm="",Jx="",tf="",qo="",tc="",XS="",Ed="",Dy="",Xh="",Ym="",Zh="",Ly="",Qx="",Ry="",ew="",tw="",nw="",Tz="",Dz="",Lz="",Rz="",Fz="",Oz="",Mz="",$z="",Iz="",Pz="",Nz="",Bz="",zz="",jz="",Uz="",qz="",Hz="",Gz="",Vz="",Wz="",Yz="",Xz="",Zz="",Kz="",Jz="",Qz="",ej="",tj="",nj="",rj="",ij="",sj="",oj="=",aj="",lj="",uj="",cj="",fj="",dj="",hj="",pj="",mj="",gj="",yj="",vj="",bj="",xj="",wj="",_j="",Ej="",Sj="",Aj="",Cj="",kj="!",Tj="",Dj="",Lj="",Rj="",Fj="",Oj="",Mj="",$j="",Ij="",Pj="",Nj="",Bj="",zj="",jj="",Uj="",qj="",Hj="",Gj="fj",Vj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",eU="",tU="",nU="",rU="",iU="",sU="",oU="",aU="",lU="",uU="",cU="",fU="",dU="",hU="",pU="",mU="",gU="",yU="",vU="",bU="",xU="",wU="",_U="",EU="",SU="",AU="",CU="",kU="",TU="",DU="",LU="",RU="",FU="",OU="",MU="",$U="",IU="",PU="",NU="",BU="",zU="",jU="",UU="",qU="",HU="",GU="",VU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",eq="",tq="",nq="",rq="",iq="",sq="",oq="",aq="",lq="",uq="",cq="",fq="",dq="",hq="",pq="",mq="",gq="",yq="",vq="",bq="`",xq="",wq="",_q="",Eq="",Sq="",Aq="",Cq="",kq="",Tq="",Dq="",Lq="",Rq="",Fq="",Oq="",Mq=">",$q=">",Iq="",Pq="",Nq="",Bq="",zq="",jq="",Uq="",qq="",Hq="",Gq="",Vq="",Wq="",Yq="",Xq="",Zq="",Kq="",Jq="",Qq="",eH="",tH="",nH="",rH="",iH="",sH="^",oH="",aH="",lH="",uH="",cH="",fH="",dH="",hH="",pH="",mH="",gH="",yH="",vH="",bH="",xH="",wH="",_H="",EH="",SH="",AH="",CH="",kH="",TH="",DH="",LH="",RH="",FH="",OH="",MH="",$H="",IH="",PH="",NH="",BH="",zH="",jH="",UH="",qH="",HH="",GH="",VH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eG="",tG="",nG="",rG="",iG="",sG="",oG="",aG="",lG="",uG="",cG="",fG="",dG="",hG="",pG="",mG="",gG="",yG="",vG="",bG="",xG="",wG="",_G="",EG="",SG="",AG="",CG="",kG="",TG="",DG="",LG="",RG="",FG="",OG="",MG="",$G="",IG="",PG="",NG="",BG="",zG="",jG="",UG="",qG="",HG="",GG="",VG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eV="",tV="",nV="",rV="",iV="",sV="",oV="",aV="",lV="",uV="",cV="",fV="",dV="",hV="",pV="",mV="",gV="",yV="",vV="",bV="",xV="",wV="",_V="",EV="",SV="",AV="",CV="",kV="",TV="",DV="",LV="",RV="",FV="",OV="",MV="",$V="",IV="",PV="",NV="",BV="",zV="",jV="",UV="",qV="",HV="",GV="",VV="",WV="",YV="",XV="",ZV="",KV="",JV="",QV="",eW="",tW="",nW="",rW="",iW="",sW="",oW="",aW="",lW="",uW="",cW="",fW="",dW="",hW="{",pW="[",mW="",gW="",yW="",vW="",bW="",xW="",wW="",_W="",EW="{",SW="",AW="",CW="",kW="",TW="",DW="",LW="",RW="",FW="",OW="",MW="",$W="",IW="",PW="",NW="",BW="",zW="",jW="",UW="",qW="",HW="",GW="",VW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",eY="",tY="",nY="",rY="",iY="",sY="",oY="",aY="",lY="",uY="",cY="",fY="",dY="",hY="",pY="",mY="",gY="",yY="",vY="",bY="",xY="",wY="",_Y="",EY="",SY="",AY="",CY="",kY="",TY="",DY="",LY="",RY="",FY="",OY="",MY="",$Y="",IY="",PY="",NY="",BY="",zY="",jY="",UY="",qY="",HY="",GY="",VY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",nX="",rX="",iX="",sX="",oX="",aX="",lX="",uX="",cX="",fX="",dX="",hX="",pX="",mX="",gX="",yX="",vX="",bX="",xX="",wX="",_X="",EX="",SX="",AX="",CX="",kX="",TX="",DX="",LX="",RX="",FX="",OX="",MX="",$X="",IX="",PX="",NX="_",BX="",zX="",jX="",UX="",qX="",HX="(",GX="",VX="",WX="",YX="",XX="",ZX="",KX="",JX="",QX="",eZ="",tZ="",nZ="",rZ="",iZ="",sZ="",oZ="[",aZ="",lZ="",uZ="",cZ="",fZ="",dZ="",hZ="<",pZ="<",mZ="",gZ="",yZ="",vZ="",bZ="",xZ="",wZ="",_Z="",EZ="",SZ="",AZ="",CZ="",kZ="",TZ="",DZ="",LZ="",RZ="",FZ="",OZ="",MZ="",$Z="",IZ="",PZ="",NZ="",BZ="",zZ="",jZ="",UZ="",qZ="",HZ="",GZ="",VZ="",WZ="",YZ="",XZ="",ZZ="",KZ="*",JZ="",QZ="",eK="",tK="",nK="",rK="",iK="",sK="",oK="",aK="",lK="",uK="",cK="",fK="",dK="",hK="",pK="",mK="",gK="",yK="",vK="",bK="",xK="",wK="",_K="",EK="",SK="",AK="",CK="",kK="",TK="",DK="",LK="",RK="",FK="",OK="",MK="",$K="",IK="",PK="",NK="",BK="",zK="",jK="",UK="",qK="",HK="",GK="",VK="",WK="",YK="",XK="",ZK="",KK="",JK="",QK="",eJ="",tJ="",nJ="",rJ="",iJ="",sJ="",oJ="",aJ=`
`,lJ="",uJ="",cJ="",fJ="",dJ="",hJ="",pJ="",mJ="",gJ="",yJ="",vJ="",bJ="",xJ="",wJ="",_J="",EJ="",SJ="",AJ="",CJ="",kJ="",TJ="",DJ="",LJ="",RJ="",FJ="",OJ="",MJ="",$J="",IJ="",PJ="",NJ="",BJ="",zJ="",jJ="",UJ="",qJ="",HJ="",GJ="",VJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",nQ="",rQ="",iQ="",sQ="",oQ="",aQ="",lQ="",uQ="",cQ="",fQ="",dQ="",hQ="",pQ="",mQ="",gQ="",yQ="",vQ="",bQ="",xQ="",wQ="",_Q="",EQ="",SQ="",AQ="",CQ="",kQ="",TQ="",DQ="",LQ="",RQ="",FQ="",OQ="",MQ="",$Q="",IQ="",PQ="",NQ="",BQ="",zQ="",jQ="",UQ="",qQ="",HQ="",GQ="",VQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",nee="",ree="",iee="",see="",oee="",aee="",lee="",uee="",cee="",fee="",dee="",hee="",pee="",mee="",gee="",yee="",vee="",bee="",xee="",wee="",_ee="",Eee="",See="",Aee="",Cee="",kee="",Tee="",Dee="",Lee="",Ree="",Fee="",Oee="",Mee="",$ee="",Iee="",Pee="",Nee="",Bee="",zee="",jee="",Uee="",qee="",Hee="",Gee="",Vee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="",tte="",nte="",rte="",ite="",ste="",ote="",ate="",lte="",ute="",cte="",fte="",dte="",hte="",pte="",mte="",gte="#",yte="",vte="",bte="",xte="",wte="",_te="",Ete="",Ste="",Ate=">",Cte="",kte="",Tte="",Dte="",Lte="<",Rte="",Fte="",Ote="",Mte="",$te="",Ite="",Pte="",Nte="",Bte="",zte="",jte="",Ute="",qte="",Hte="",Gte="",Vte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",ene="",tne="",nne="",rne="",ine="",sne="",one="",ane="",lne="",une="",cne="",fne="",dne="",hne="",pne="",mne="",gne="",yne="",vne="",bne="",xne="",wne="",_ne="",Ene="",Sne="",Ane="",Cne="",kne="",Tne="",Dne="",Lne="",Rne="",Fne="",One="",Mne="",$ne="",Ine="",Pne="",Nne="",Bne="",zne="",jne="",Une="",qne="",Hne="",Gne="",Vne="",Wne="",Yne="",Xne="",Zne="",Kne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="",sre="",ore="",are="",lre="",ure="",cre="",fre="",dre="",hre="",pre="",mre="",gre="",yre="%",vre=".",bre="",xre="",wre="",_re="",Ere="",Sre="",Are="",Cre="",kre="",Tre="",Dre="",Lre="",Rre="",Fre="",Ore="",Mre="",$re="",Ire="",Pre="",Nre="",Bre="+",zre="",jre="",Ure="",qre="",Hre="",Gre="",Vre="",Wre="",Yre="",Xre="",Zre="",Kre="",Jre="",Qre="",eie="",tie="",nie="",rie="",iie="",sie="",oie="",aie="",lie="",uie="",cie="",fie="",die="",hie="",pie="",mie="",gie="",yie="",vie="",bie="",xie="",wie="",_ie="",Eie="",Sie="",Aie="",Cie="",kie="",Tie="",Die="",Lie="",Rie="",Fie="",Oie="",Mie="",$ie="",Iie="",Pie="",Nie="",Bie="",zie="",jie="",Uie="",qie="",Hie="",Gie="",Vie="",Wie="",Yie="",Xie="?",Zie="",Kie='"',Jie='"',Qie="",ese="",tse="",nse="",rse="",ise="",sse="",ose="",ase="",lse="",use="",cse="",fse="",dse="",hse="",pse="",mse="",gse="",yse="",vse="",bse="",xse="",wse="",_se="",Ese="",Sse="",Ase="",Cse="",kse="",Tse="",Dse="",Lse="",Rse="",Fse="",Ose="",Mse="}",$se="]",Ise="",Pse="",Nse="",Bse="",zse="",jse="",Use="",qse="",Hse="}",Gse="",Vse="",Wse="",Yse="",Xse="",Zse="",Kse="",Jse="",Qse="",eoe="",toe="",noe="",roe="",ioe="",soe="",ooe="",aoe="",loe="",uoe="",coe="",foe="",doe="",hoe="",poe="",moe="",goe="",yoe="",voe="",boe="",xoe="",woe="",_oe="",Eoe="",Soe="",Aoe="",Coe="",koe="",Toe="",Doe="",Loe="",Roe="",Foe="",Ooe="",Moe="",$oe="",Ioe="",Poe="",Noe="",Boe="",zoe="",joe="",Uoe="",qoe="",Hoe="",Goe="",Voe="",Woe="",Yoe="",Xoe="",Zoe="",Koe="",Joe="",Qoe="",eae="",tae="",nae="",rae="",iae="",sae="",oae="",aae="",lae="",uae="",cae="",fae="",dae="",hae="",pae="",mae=")",gae="",yae="",vae="",bae="",xae="",wae="",_ae="",Eae="",Sae="",Aae="]",Cae="",kae="",Tae="",Dae="",Lae="",Rae="",Fae="",Oae="",Mae="",$ae="",Iae="",Pae="",Nae="",Bae="",zae="",jae="",Uae="",qae="",Hae="",Gae="",Vae="",Wae="",Yae="",Xae="",Zae="",Kae="",Jae="",Qae="",ele="",tle="",nle="",rle="",ile="",sle="",ole="",ale="",lle="",ule="",cle="",fle="",dle="",hle=";",ple="",mle="",gle="",yle="",vle="",ble="",xle="",wle="",_le="",Ele="",Sle="",Ale="",Cle="",kle="",Tle="",Dle="",Lle="",Rle="",Fle="",Ole="",Mle="",$le="",Ile="",Ple="",Nle="",Ble="",zle="",jle="",Ule="",qle="",Hle="",Gle="",Vle="",Wle="",Yle="",Xle="",Zle="",Kle="",Jle="",Qle="",eue="",tue="",nue="",rue="",iue="",sue="",oue="",aue="",lue="/",uue="",cue="",fue="",due="",hue="",pue="",mue="",gue="",yue="",vue="",bue="",xue="",wue="",_ue="",Eue="",Sue="",Aue="",Cue="",kue="",Tue="",Due="",Lue="",Rue="",Fue="",Oue="",Mue="",$ue="",Iue="",Pue="",Nue="",Bue="",zue="",jue="",Uue="",que="",Hue="",Gue="",Vue="",Wue="",Yue="",Xue="",Zue="",Kue="",Jue="",Que="",ece="",tce="",nce="",rce="",ice="",sce="",oce="",ace="",lce="",uce="",cce="",fce="",dce="",hce="",pce="",mce="",gce="",yce="",vce="",bce="",xce="",wce="",_ce="",Ece="",Sce="",Ace="",Cce="",kce="",Tce="",Dce="",Lce="",Rce="",Fce="",Oce="",Mce="",$ce="",Ice="",Pce="",Nce="",Bce="",zce="",jce="",Uce="",qce="",Hce="",Gce="",Vce="",Wce="",Yce="",Xce="",Zce="",Kce="",Jce="",Qce="",efe="",tfe="",nfe="",rfe="",ife="",sfe="",ofe="",afe="",lfe="",ufe="",cfe="",ffe="",dfe="",hfe="	",pfe="",mfe="",gfe="",yfe="",vfe="",bfe="",xfe="",wfe="",_fe="",Efe="",Sfe="",Afe="",Cfe="",kfe="",Tfe="",Dfe="",Lfe="",Rfe="",Ffe="",Ofe="",Mfe="",$fe="",Ife="",Pfe="",Nfe="",Bfe="",zfe="",jfe="",Ufe="",qfe="",Hfe="",Gfe="",Vfe="",Wfe="",Yfe="",Xfe="",Zfe="",Kfe="",Jfe="",Qfe="",ede="",tde="",nde="",rde="",ide="",sde="",ode="",ade="",lde="",ude="",cde="",fde="",dde="",hde="",pde="",mde="",gde="",yde="",vde="",bde="",xde="",wde="",_de="",Ede="",Sde="",Ade="",Cde="",kde="",Tde="",Dde="",Lde="",Rde="",Fde="",Ode="",Mde="",$de="",Ide="",Pde="",Nde="",Bde="",zde="",jde="",Ude="",qde="",Hde="",Gde="",Vde="",Wde="",Yde="",Xde="",Zde="",Kde="",Jde="",Qde="",ehe="",the="",nhe="",rhe="",ihe="",she="",ohe="",ahe="",lhe="",uhe="",che="",fhe="",dhe="",hhe="",phe="",mhe="",ghe="",yhe="_",vhe="",bhe="",xhe="",whe="",_he="",Ehe="",She="",Ahe="",Che="",khe="",The="",Dhe="",Lhe="",Rhe="",Fhe="",Ohe="",Mhe="",$he="",Ihe="",Phe="",Nhe="",Bhe="",zhe="",jhe="",Uhe="",qhe="",Hhe="",Ghe="",Vhe="",Whe="",Yhe="",Xhe="",Zhe="",Khe="",Jhe="",Qhe="",epe="",tpe="",npe="",rpe="",ipe="",spe="",ope="",ape="",lpe="",upe="",cpe="",fpe="",dpe="",hpe="",ppe="",mpe="",gpe="",ype="",vpe="",bpe="",xpe="",wpe="",_pe="",Epe="",Spe="",Ape="",Cpe="",kpe="",Tpe="",Dpe="",Lpe="",Rpe="",Fpe="",Ope="",Mpe="",$pe="",Ipe="",Ppe="",Npe="",Bpe="",zpe="",jpe="",Upe="",qpe="",Hpe="",Gpe="|",Vpe="",Wpe="|",Ype="",Xpe="",Zpe="|",Kpe="",Jpe="",Qpe="",eme="",tme="",nme="",rme="",ime="",sme="",ome="",ame="",lme="",ume="",cme="",fme="",dme="",hme="",pme="",mme="",gme="",yme="",vme="",bme="",xme="",wme="",_me="",Eme="",Sme="",Ame="",Cme="",kme="",Tme="",Dme="",Lme="",Rme="",Fme="",Ome="",Mme="",$me="",Ime="",Pme="",Nme="",Bme="",zme="",jme="",Ume="",qme="",Hme="",Gme="",Vme="",Wme="",Yme="",Xme="",Zme="",Kme="",Jme="",Qme="",ege="",tge="",nge="",rge="",ige="",sge="",oge="",age="",lge="",uge="",cge="",fge="",dge="",hge="",pge="",mge="",gge="",yge="",vge="",bge="",xge="",wge="",_ge="",Ege="",Sge="",Age="",Cge="",kge="",Tge="",Dge="",Lge="",Rge="",Fge="",Oge="",Mge="",$ge="",Ige="",Pge="",Nge="",Bge="",zge="",jge="",Uge="",qge="",Hge="",Gge="",Vge="",Wge="",Yge="",Xge="",Zge="",g9e={Aacute:x,aacute:y,Abreve:w,abreve:_,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:dt,ang:nn,ange:Wt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:se,angmsdad:oe,angmsdae:be,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:ie,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:bt,apos:Pt,ApplyFunction:_t,approx:Kt,approxeq:sn,Aring:rn,aring:on,Ascr:vn,ascr:Er,Assign:Ji,ast:ds,asymp:Gi,asympeq:No,Atilde:qn,atilde:Mr,Auml:Lr,auml:yn,awconint:Kr,awint:ir,backcong:Ni,backepsilon:tr,backprime:$r,backsim:to,backsimeq:ge,Backslash:Le,Barv:it,barvee:Je,barwed:Et,Barwed:an,barwedge:en,bbrk:xt,bbrktbrk:et,bcong:pn,Bcy:Cn,bcy:Ut,bdquo:qt,becaus:Sr,because:ci,Because:Jt,bemptyv:Xe,bepsi:ht,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:Gt,Bfr:vi,bfr:Qi,bigcap:bi,bigcirc:js,bigcup:xo,bigodot:no,bigoplus:Bo,bigotimes:bs,bigsqcup:Fs,bigstar:zo,bigtriangledown:hs,bigtriangleup:ol,biguplus:al,bigvee:Cr,bigwedge:es,bkarow:ro,blacklozenge:Os,blacksquare:Us,blacktriangle:fa,blacktriangledown:qs,blacktriangleleft:ll,blacktriangleright:Vi,blank:Wi,blk12:io,blk14:ps,blk34:jo,block:Hs,bne:fi,bnequiv:Ma,bNot:so,bnot:Yi,Bopf:oo,bopf:ul,bot:Vt,bottom:Z,bowtie:me,boxbox:Be,boxdl:gt,boxdL:mn,boxDl:Nt,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:sr,boxhd:di,boxHd:xs,boxhD:Gs,boxHD:Bi,boxhu:zi,boxHu:wo,boxhU:Gr,boxHU:da,boxminus:Vu,boxplus:cl,boxtimes:fl,boxul:Yc,boxuL:Wu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:yt,boxUr:Qt,boxUR:Ht,boxv:An,boxV:pr,boxvh:Ir,boxvH:ts,boxVh:ws,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Yt,boxvr:Vn,boxvR:mr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Tb,Breve:xS,brvbar:Db,bscr:Lb,Bscr:kh,bsemi:Rb,bsim:Fb,bsime:Z0,bsolb:Am,bsol:Ob,bsolhsub:Cm,bull:dl,bullet:Mb,bump:K0,bumpE:J0,bumpe:$b,Bumpeq:Ib,bumpeq:Q0,Cacute:wS,cacute:_S,capand:ES,capbrcup:ud,capcap:cd,cap:ey,Cap:ty,capcup:Pb,capdot:ny,CapitalDifferentialD:Xc,caps:Zc,caret:_o,caron:Yu,Cayleys:Xu,ccaps:km,Ccaron:Nb,ccaron:Th,Ccedil:Bb,ccedil:ry,Ccirc:Tm,ccirc:SS,Cconint:iy,ccups:zb,ccupssm:sy,Cdot:oy,cdot:fd,cedil:Dm,Cedilla:jb,cemptyv:Lm,cent:ay,centerdot:ly,CenterDot:dd,cfr:Dh,Cfr:Rm,CHcy:Ub,chcy:Lh,check:qb,checkmark:Kc,Chi:Rh,chi:Jc,circ:Fh,circeq:hd,circlearrowleft:Hb,circlearrowright:Gb,circledast:Vb,circledcirc:AS,circleddash:Qc,CircleDot:ef,circledR:CS,circledS:kS,CircleMinus:TS,CirclePlus:DS,CircleTimes:LS,cir:Uo,cirE:_s,cire:ao,cirfnint:Es,cirmid:Oh,cirscir:RS,ClockwiseContourIntegral:Fm,CloseCurlyDoubleQuote:FS,CloseCurlyQuote:uy,clubs:Wb,clubsuit:cy,colon:fy,Colon:dy,Colone:Yb,colone:Xb,coloneq:hy,comma:Zb,commat:Mh,comp:OS,compfn:Om,complement:hu,complexes:Kb,cong:MS,congdot:Jb,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Zu,copf:Ku,Copf:Qb,coprod:py,Coproduct:ex,copy:my,COPY:$h,copysr:tx,CounterClockwiseContourIntegral:gy,crarr:Ju,cross:nx,Cross:rx,Cscr:Mm,cscr:yy,csub:ix,csube:sx,csup:$S,csupe:$m,ctdot:ox,cudarrl:IS,cudarrr:ax,cuepr:pd,cuesc:vy,cularr:Im,cularrp:lx,cupbrcap:by,cupcap:ux,CupCap:cx,cup:Vs,Cup:Pm,cupcup:fx,cupdot:dx,cupor:hx,cups:md,curarr:Nm,curarrm:px,curlyeqprec:mx,curlyeqsucc:gx,curlyvee:gd,curlywedge:yx,curren:Bm,curvearrowleft:vx,curvearrowright:Ih,cuvee:yd,cuwed:bx,cwconint:xx,cwint:wx,cylcty:Ph,dagger:Nh,Dagger:Bh,daleth:zh,darr:_x,Darr:Ex,dArr:Qu,dash:vd,Dashv:jh,dashv:Sx,dbkarow:PS,dblac:NS,Dcaron:Eo,dcaron:Ax,Dcy:BS,dcy:Cx,ddagger:kx,ddarr:Tx,DD:zS,dd:jS,DDotrahd:ec,ddotseq:Uh,deg:zm,Del:qh,Delta:pu,delta:US,demptyv:qS,dfisht:bd,Dfr:Dx,dfr:Lx,dHar:Rx,dharl:jm,dharr:xd,DiacriticalAcute:xy,DiacriticalDot:wy,DiacriticalDoubleAcute:_y,DiacriticalGrave:Hh,DiacriticalTilde:Fx,diam:Ox,diamond:Um,Diamond:HS,diamondsuit:Gh,diams:Mx,die:$x,DifferentialD:Ey,digamma:Ix,disin:Px,div:Nx,divide:Vh,divideontimes:Wh,divonx:Sy,DJcy:Bx,djcy:zx,dlcorn:jx,dlcrop:Ay,dollar:Ux,Dopf:qx,dopf:wd,Dot:Hx,dot:qm,DotDot:GS,doteq:VS,doteqdot:Ri,DotEqual:Cy,dotminus:Yh,dotplus:pl,dotsquare:Hm,doublebarwedge:ky,DoubleContourIntegral:Gx,DoubleDot:Vx,DoubleDownArrow:Wx,DoubleLeftArrow:Yx,DoubleLeftRightArrow:Xx,DoubleLeftTee:Ty,DoubleLongLeftArrow:Zx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Kx,DoubleRightArrow:_d,DoubleRightTee:Gm,DoubleUpArrow:WS,DoubleUpDownArrow:ns,DoubleVerticalBar:YS,DownArrowBar:Vm,downarrow:m,DownArrow:b,Downarrow:S,DownArrowUpArrow:E,DownBreve:C,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:ve,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Qe,Dscr:pt,dscr:ct,DScy:mt,dscy:bn,dsol:Mt,Dstrok:Hn,dstrok:fn,dtdot:or,dtri:Nr,dtrif:ar,duarr:Zn,duhar:lr,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:vr,easter:lo,Ecaron:zr,ecaron:Ws,Ecirc:Ys,ecirc:Ci,ecir:uo,ecolon:Ia,Ecy:Ms,ecy:ml,eDDot:Wm,Edot:Jx,edot:tf,eDot:qo,ee:tc,efDot:XS,Efr:Ed,efr:Dy,eg:Xh,Egrave:Ym,egrave:Zh,egs:Ly,egsdot:Qx,el:Ry,Element:ew,elinters:tw,ell:nw,els:Tz,elsdot:Dz,Emacr:Lz,emacr:Rz,empty:Fz,emptyset:Oz,EmptySmallSquare:Mz,emptyv:$z,EmptyVerySmallSquare:Iz,emsp13:Pz,emsp14:Nz,emsp:Bz,ENG:zz,eng:jz,ensp:Uz,Eogon:qz,eogon:Hz,Eopf:Gz,eopf:Vz,epar:Wz,eparsl:Yz,eplus:Xz,epsi:Zz,Epsilon:Kz,epsilon:Jz,epsiv:Qz,eqcirc:ej,eqcolon:tj,eqsim:nj,eqslantgtr:rj,eqslantless:ij,Equal:sj,equals:oj,EqualTilde:aj,equest:lj,Equilibrium:uj,equiv:cj,equivDD:fj,eqvparsl:dj,erarr:hj,erDot:pj,escr:mj,Escr:gj,esdot:yj,Esim:vj,esim:bj,Eta:xj,eta:wj,ETH:_j,eth:Ej,Euml:Sj,euml:Aj,euro:Cj,excl:kj,exist:Tj,Exists:Dj,expectation:Lj,exponentiale:Rj,ExponentialE:Fj,fallingdotseq:Oj,Fcy:Mj,fcy:$j,female:Ij,ffilig:Pj,fflig:Nj,ffllig:Bj,Ffr:zj,ffr:jj,filig:Uj,FilledSmallSquare:qj,FilledVerySmallSquare:Hj,fjlig:Gj,flat:Vj,fllig:Wj,fltns:Yj,fnof:Xj,Fopf:Zj,fopf:Kj,forall:Jj,ForAll:Qj,fork:eU,forkv:tU,Fouriertrf:nU,fpartint:rU,frac12:iU,frac13:sU,frac14:oU,frac15:aU,frac16:lU,frac18:uU,frac23:cU,frac25:fU,frac34:dU,frac35:hU,frac38:pU,frac45:mU,frac56:gU,frac58:yU,frac78:vU,frasl:bU,frown:xU,fscr:wU,Fscr:_U,gacute:EU,Gamma:SU,gamma:AU,Gammad:CU,gammad:kU,gap:TU,Gbreve:DU,gbreve:LU,Gcedil:RU,Gcirc:FU,gcirc:OU,Gcy:MU,gcy:$U,Gdot:IU,gdot:PU,ge:NU,gE:BU,gEl:zU,gel:jU,geq:UU,geqq:qU,geqslant:HU,gescc:GU,ges:VU,gesdot:WU,gesdoto:YU,gesdotol:XU,gesl:ZU,gesles:KU,Gfr:JU,gfr:QU,gg:eq,Gg:tq,ggg:nq,gimel:rq,GJcy:iq,gjcy:sq,gla:oq,gl:aq,glE:lq,glj:uq,gnap:cq,gnapprox:fq,gne:dq,gnE:hq,gneq:pq,gneqq:mq,gnsim:gq,Gopf:yq,gopf:vq,grave:bq,GreaterEqual:xq,GreaterEqualLess:wq,GreaterFullEqual:_q,GreaterGreater:Eq,GreaterLess:Sq,GreaterSlantEqual:Aq,GreaterTilde:Cq,Gscr:kq,gscr:Tq,gsim:Dq,gsime:Lq,gsiml:Rq,gtcc:Fq,gtcir:Oq,gt:Mq,GT:$q,Gt:Iq,gtdot:Pq,gtlPar:Nq,gtquest:Bq,gtrapprox:zq,gtrarr:jq,gtrdot:Uq,gtreqless:qq,gtreqqless:Hq,gtrless:Gq,gtrsim:Vq,gvertneqq:Wq,gvnE:Yq,Hacek:Xq,hairsp:Zq,half:Kq,hamilt:Jq,HARDcy:Qq,hardcy:eH,harrcir:tH,harr:nH,hArr:rH,harrw:iH,Hat:sH,hbar:oH,Hcirc:aH,hcirc:lH,hearts:uH,heartsuit:cH,hellip:fH,hercon:dH,hfr:hH,Hfr:pH,HilbertSpace:mH,hksearow:gH,hkswarow:yH,hoarr:vH,homtht:bH,hookleftarrow:xH,hookrightarrow:wH,hopf:_H,Hopf:EH,horbar:SH,HorizontalLine:AH,hscr:CH,Hscr:kH,hslash:TH,Hstrok:DH,hstrok:LH,HumpDownHump:RH,HumpEqual:FH,hybull:OH,hyphen:MH,Iacute:$H,iacute:IH,ic:PH,Icirc:NH,icirc:BH,Icy:zH,icy:jH,Idot:UH,IEcy:qH,iecy:HH,iexcl:GH,iff:VH,ifr:WH,Ifr:YH,Igrave:XH,igrave:ZH,ii:KH,iiiint:JH,iiint:QH,iinfin:eG,iiota:tG,IJlig:nG,ijlig:rG,Imacr:iG,imacr:sG,image:oG,ImaginaryI:aG,imagline:lG,imagpart:uG,imath:cG,Im:fG,imof:dG,imped:hG,Implies:pG,incare:mG,in:"",infin:gG,infintie:yG,inodot:vG,intcal:bG,int:xG,Int:wG,integers:_G,Integral:EG,intercal:SG,Intersection:AG,intlarhk:CG,intprod:kG,InvisibleComma:TG,InvisibleTimes:DG,IOcy:LG,iocy:RG,Iogon:FG,iogon:OG,Iopf:MG,iopf:$G,Iota:IG,iota:PG,iprod:NG,iquest:BG,iscr:zG,Iscr:jG,isin:UG,isindot:qG,isinE:HG,isins:GG,isinsv:VG,isinv:WG,it:YG,Itilde:XG,itilde:ZG,Iukcy:KG,iukcy:JG,Iuml:QG,iuml:eV,Jcirc:tV,jcirc:nV,Jcy:rV,jcy:iV,Jfr:sV,jfr:oV,jmath:aV,Jopf:lV,jopf:uV,Jscr:cV,jscr:fV,Jsercy:dV,jsercy:hV,Jukcy:pV,jukcy:mV,Kappa:gV,kappa:yV,kappav:vV,Kcedil:bV,kcedil:xV,Kcy:wV,kcy:_V,Kfr:EV,kfr:SV,kgreen:AV,KHcy:CV,khcy:kV,KJcy:TV,kjcy:DV,Kopf:LV,kopf:RV,Kscr:FV,kscr:OV,lAarr:MV,Lacute:$V,lacute:IV,laemptyv:PV,lagran:NV,Lambda:BV,lambda:zV,lang:jV,Lang:UV,langd:qV,langle:HV,lap:GV,Laplacetrf:VV,laquo:WV,larrb:YV,larrbfs:XV,larr:ZV,Larr:KV,lArr:JV,larrfs:QV,larrhk:eW,larrlp:tW,larrpl:nW,larrsim:rW,larrtl:iW,latail:sW,lAtail:oW,lat:aW,late:lW,lates:uW,lbarr:cW,lBarr:fW,lbbrk:dW,lbrace:hW,lbrack:pW,lbrke:mW,lbrksld:gW,lbrkslu:yW,Lcaron:vW,lcaron:bW,Lcedil:xW,lcedil:wW,lceil:_W,lcub:EW,Lcy:SW,lcy:AW,ldca:CW,ldquo:kW,ldquor:TW,ldrdhar:DW,ldrushar:LW,ldsh:RW,le:FW,lE:OW,LeftAngleBracket:MW,LeftArrowBar:$W,leftarrow:IW,LeftArrow:PW,Leftarrow:NW,LeftArrowRightArrow:BW,leftarrowtail:zW,LeftCeiling:jW,LeftDoubleBracket:UW,LeftDownTeeVector:qW,LeftDownVectorBar:HW,LeftDownVector:GW,LeftFloor:VW,leftharpoondown:WW,leftharpoonup:YW,leftleftarrows:XW,leftrightarrow:ZW,LeftRightArrow:KW,Leftrightarrow:JW,leftrightarrows:QW,leftrightharpoons:eY,leftrightsquigarrow:tY,LeftRightVector:nY,LeftTeeArrow:rY,LeftTee:iY,LeftTeeVector:sY,leftthreetimes:oY,LeftTriangleBar:aY,LeftTriangle:lY,LeftTriangleEqual:uY,LeftUpDownVector:cY,LeftUpTeeVector:fY,LeftUpVectorBar:dY,LeftUpVector:hY,LeftVectorBar:pY,LeftVector:mY,lEg:gY,leg:yY,leq:vY,leqq:bY,leqslant:xY,lescc:wY,les:_Y,lesdot:EY,lesdoto:SY,lesdotor:AY,lesg:CY,lesges:kY,lessapprox:TY,lessdot:DY,lesseqgtr:LY,lesseqqgtr:RY,LessEqualGreater:FY,LessFullEqual:OY,LessGreater:MY,lessgtr:$Y,LessLess:IY,lesssim:PY,LessSlantEqual:NY,LessTilde:BY,lfisht:zY,lfloor:jY,Lfr:UY,lfr:qY,lg:HY,lgE:GY,lHar:VY,lhard:WY,lharu:YY,lharul:XY,lhblk:ZY,LJcy:KY,ljcy:JY,llarr:QY,ll:eX,Ll:tX,llcorner:nX,Lleftarrow:rX,llhard:iX,lltri:sX,Lmidot:oX,lmidot:aX,lmoustache:lX,lmoust:uX,lnap:cX,lnapprox:fX,lne:dX,lnE:hX,lneq:pX,lneqq:mX,lnsim:gX,loang:yX,loarr:vX,lobrk:bX,longleftarrow:xX,LongLeftArrow:wX,Longleftarrow:_X,longleftrightarrow:EX,LongLeftRightArrow:SX,Longleftrightarrow:AX,longmapsto:CX,longrightarrow:kX,LongRightArrow:TX,Longrightarrow:DX,looparrowleft:LX,looparrowright:RX,lopar:FX,Lopf:OX,lopf:MX,loplus:$X,lotimes:IX,lowast:PX,lowbar:NX,LowerLeftArrow:BX,LowerRightArrow:zX,loz:jX,lozenge:UX,lozf:qX,lpar:HX,lparlt:GX,lrarr:VX,lrcorner:WX,lrhar:YX,lrhard:XX,lrm:ZX,lrtri:KX,lsaquo:JX,lscr:QX,Lscr:eZ,lsh:tZ,Lsh:nZ,lsim:rZ,lsime:iZ,lsimg:sZ,lsqb:oZ,lsquo:aZ,lsquor:lZ,Lstrok:uZ,lstrok:cZ,ltcc:fZ,ltcir:dZ,lt:hZ,LT:pZ,Lt:mZ,ltdot:gZ,lthree:yZ,ltimes:vZ,ltlarr:bZ,ltquest:xZ,ltri:wZ,ltrie:_Z,ltrif:EZ,ltrPar:SZ,lurdshar:AZ,luruhar:CZ,lvertneqq:kZ,lvnE:TZ,macr:DZ,male:LZ,malt:RZ,maltese:FZ,Map:"",map:OZ,mapsto:MZ,mapstodown:$Z,mapstoleft:IZ,mapstoup:PZ,marker:NZ,mcomma:BZ,Mcy:zZ,mcy:jZ,mdash:UZ,mDDot:qZ,measuredangle:HZ,MediumSpace:GZ,Mellintrf:VZ,Mfr:WZ,mfr:YZ,mho:XZ,micro:ZZ,midast:KZ,midcir:JZ,mid:QZ,middot:eK,minusb:tK,minus:nK,minusd:rK,minusdu:iK,MinusPlus:sK,mlcp:oK,mldr:aK,mnplus:lK,models:uK,Mopf:cK,mopf:fK,mp:dK,mscr:hK,Mscr:pK,mstpos:mK,Mu:gK,mu:yK,multimap:vK,mumap:bK,nabla:xK,Nacute:wK,nacute:_K,nang:EK,nap:SK,napE:AK,napid:CK,napos:kK,napprox:TK,natural:DK,naturals:LK,natur:RK,nbsp:FK,nbump:OK,nbumpe:MK,ncap:$K,Ncaron:IK,ncaron:PK,Ncedil:NK,ncedil:BK,ncong:zK,ncongdot:jK,ncup:UK,Ncy:qK,ncy:HK,ndash:GK,nearhk:VK,nearr:WK,neArr:YK,nearrow:XK,ne:ZK,nedot:KK,NegativeMediumSpace:JK,NegativeThickSpace:QK,NegativeThinSpace:eJ,NegativeVeryThinSpace:tJ,nequiv:nJ,nesear:rJ,nesim:iJ,NestedGreaterGreater:sJ,NestedLessLess:oJ,NewLine:aJ,nexist:lJ,nexists:uJ,Nfr:cJ,nfr:fJ,ngE:dJ,nge:hJ,ngeq:pJ,ngeqq:mJ,ngeqslant:gJ,nges:yJ,nGg:vJ,ngsim:bJ,nGt:xJ,ngt:wJ,ngtr:_J,nGtv:EJ,nharr:SJ,nhArr:AJ,nhpar:CJ,ni:kJ,nis:TJ,nisd:DJ,niv:LJ,NJcy:RJ,njcy:FJ,nlarr:OJ,nlArr:MJ,nldr:$J,nlE:IJ,nle:PJ,nleftarrow:NJ,nLeftarrow:BJ,nleftrightarrow:zJ,nLeftrightarrow:jJ,nleq:UJ,nleqq:qJ,nleqslant:HJ,nles:GJ,nless:VJ,nLl:WJ,nlsim:YJ,nLt:XJ,nlt:ZJ,nltri:KJ,nltrie:JJ,nLtv:QJ,nmid:eQ,NoBreak:tQ,NonBreakingSpace:nQ,nopf:rQ,Nopf:iQ,Not:sQ,not:oQ,NotCongruent:aQ,NotCupCap:lQ,NotDoubleVerticalBar:uQ,NotElement:cQ,NotEqual:fQ,NotEqualTilde:dQ,NotExists:hQ,NotGreater:pQ,NotGreaterEqual:mQ,NotGreaterFullEqual:gQ,NotGreaterGreater:yQ,NotGreaterLess:vQ,NotGreaterSlantEqual:bQ,NotGreaterTilde:xQ,NotHumpDownHump:wQ,NotHumpEqual:_Q,notin:EQ,notindot:SQ,notinE:AQ,notinva:CQ,notinvb:kQ,notinvc:TQ,NotLeftTriangleBar:DQ,NotLeftTriangle:LQ,NotLeftTriangleEqual:RQ,NotLess:FQ,NotLessEqual:OQ,NotLessGreater:MQ,NotLessLess:$Q,NotLessSlantEqual:IQ,NotLessTilde:PQ,NotNestedGreaterGreater:NQ,NotNestedLessLess:BQ,notni:zQ,notniva:jQ,notnivb:UQ,notnivc:qQ,NotPrecedes:HQ,NotPrecedesEqual:GQ,NotPrecedesSlantEqual:VQ,NotReverseElement:WQ,NotRightTriangleBar:YQ,NotRightTriangle:XQ,NotRightTriangleEqual:ZQ,NotSquareSubset:KQ,NotSquareSubsetEqual:JQ,NotSquareSuperset:QQ,NotSquareSupersetEqual:eee,NotSubset:tee,NotSubsetEqual:nee,NotSucceeds:ree,NotSucceedsEqual:iee,NotSucceedsSlantEqual:see,NotSucceedsTilde:oee,NotSuperset:aee,NotSupersetEqual:lee,NotTilde:uee,NotTildeEqual:cee,NotTildeFullEqual:fee,NotTildeTilde:dee,NotVerticalBar:hee,nparallel:pee,npar:mee,nparsl:gee,npart:yee,npolint:vee,npr:bee,nprcue:xee,nprec:wee,npreceq:_ee,npre:Eee,nrarrc:See,nrarr:Aee,nrArr:Cee,nrarrw:kee,nrightarrow:Tee,nRightarrow:Dee,nrtri:Lee,nrtrie:Ree,nsc:Fee,nsccue:Oee,nsce:Mee,Nscr:$ee,nscr:Iee,nshortmid:Pee,nshortparallel:Nee,nsim:Bee,nsime:zee,nsimeq:jee,nsmid:Uee,nspar:qee,nsqsube:Hee,nsqsupe:Gee,nsub:Vee,nsubE:Wee,nsube:Yee,nsubset:Xee,nsubseteq:Zee,nsubseteqq:Kee,nsucc:Jee,nsucceq:Qee,nsup:ete,nsupE:tte,nsupe:nte,nsupset:rte,nsupseteq:ite,nsupseteqq:ste,ntgl:ote,Ntilde:ate,ntilde:lte,ntlg:ute,ntriangleleft:cte,ntrianglelefteq:fte,ntriangleright:dte,ntrianglerighteq:hte,Nu:pte,nu:mte,num:gte,numero:yte,numsp:vte,nvap:bte,nvdash:xte,nvDash:wte,nVdash:_te,nVDash:Ete,nvge:Ste,nvgt:Ate,nvHarr:Cte,nvinfin:kte,nvlArr:Tte,nvle:Dte,nvlt:Lte,nvltrie:Rte,nvrArr:Fte,nvrtrie:Ote,nvsim:Mte,nwarhk:$te,nwarr:Ite,nwArr:Pte,nwarrow:Nte,nwnear:Bte,Oacute:zte,oacute:jte,oast:Ute,Ocirc:qte,ocirc:Hte,ocir:Gte,Ocy:Vte,ocy:Wte,odash:Yte,Odblac:Xte,odblac:Zte,odiv:Kte,odot:Jte,odsold:Qte,OElig:ene,oelig:tne,ofcir:nne,Ofr:rne,ofr:ine,ogon:sne,Ograve:one,ograve:ane,ogt:lne,ohbar:une,ohm:cne,oint:fne,olarr:dne,olcir:hne,olcross:pne,oline:mne,olt:gne,Omacr:yne,omacr:vne,Omega:bne,omega:xne,Omicron:wne,omicron:_ne,omid:Ene,ominus:Sne,Oopf:Ane,oopf:Cne,opar:kne,OpenCurlyDoubleQuote:Tne,OpenCurlyQuote:Dne,operp:Lne,oplus:Rne,orarr:Fne,Or:One,or:Mne,ord:$ne,order:Ine,orderof:Pne,ordf:Nne,ordm:Bne,origof:zne,oror:jne,orslope:Une,orv:qne,oS:Hne,Oscr:Gne,oscr:Vne,Oslash:Wne,oslash:Yne,osol:Xne,Otilde:Zne,otilde:Kne,otimesas:Jne,Otimes:Qne,otimes:ere,Ouml:tre,ouml:nre,ovbar:rre,OverBar:ire,OverBrace:sre,OverBracket:ore,OverParenthesis:are,para:lre,parallel:ure,par:cre,parsim:fre,parsl:dre,part:hre,PartialD:pre,Pcy:mre,pcy:gre,percnt:yre,period:vre,permil:bre,perp:xre,pertenk:wre,Pfr:_re,pfr:Ere,Phi:Sre,phi:Are,phiv:Cre,phmmat:kre,phone:Tre,Pi:Dre,pi:Lre,pitchfork:Rre,piv:Fre,planck:Ore,planckh:Mre,plankv:$re,plusacir:Ire,plusb:Pre,pluscir:Nre,plus:Bre,plusdo:zre,plusdu:jre,pluse:Ure,PlusMinus:qre,plusmn:Hre,plussim:Gre,plustwo:Vre,pm:Wre,Poincareplane:Yre,pointint:Xre,popf:Zre,Popf:Kre,pound:Jre,prap:Qre,Pr:eie,pr:tie,prcue:nie,precapprox:rie,prec:iie,preccurlyeq:sie,Precedes:oie,PrecedesEqual:aie,PrecedesSlantEqual:lie,PrecedesTilde:uie,preceq:cie,precnapprox:fie,precneqq:die,precnsim:hie,pre:pie,prE:mie,precsim:gie,prime:yie,Prime:vie,primes:bie,prnap:xie,prnE:wie,prnsim:_ie,prod:Eie,Product:Sie,profalar:Aie,profline:Cie,profsurf:kie,prop:Tie,Proportional:Die,Proportion:Lie,propto:Rie,prsim:Fie,prurel:Oie,Pscr:Mie,pscr:$ie,Psi:Iie,psi:Pie,puncsp:Nie,Qfr:Bie,qfr:zie,qint:jie,qopf:Uie,Qopf:qie,qprime:Hie,Qscr:Gie,qscr:Vie,quaternions:Wie,quatint:Yie,quest:Xie,questeq:Zie,quot:Kie,QUOT:Jie,rAarr:Qie,race:ese,Racute:tse,racute:nse,radic:rse,raemptyv:ise,rang:sse,Rang:ose,rangd:ase,range:lse,rangle:use,raquo:cse,rarrap:fse,rarrb:dse,rarrbfs:hse,rarrc:pse,rarr:mse,Rarr:gse,rArr:yse,rarrfs:vse,rarrhk:bse,rarrlp:xse,rarrpl:wse,rarrsim:_se,Rarrtl:Ese,rarrtl:Sse,rarrw:Ase,ratail:Cse,rAtail:kse,ratio:Tse,rationals:Dse,rbarr:Lse,rBarr:Rse,RBarr:Fse,rbbrk:Ose,rbrace:Mse,rbrack:$se,rbrke:Ise,rbrksld:Pse,rbrkslu:Nse,Rcaron:Bse,rcaron:zse,Rcedil:jse,rcedil:Use,rceil:qse,rcub:Hse,Rcy:Gse,rcy:Vse,rdca:Wse,rdldhar:Yse,rdquo:Xse,rdquor:Zse,rdsh:Kse,real:Jse,realine:Qse,realpart:eoe,reals:toe,Re:noe,rect:roe,reg:ioe,REG:soe,ReverseElement:ooe,ReverseEquilibrium:aoe,ReverseUpEquilibrium:loe,rfisht:uoe,rfloor:coe,rfr:foe,Rfr:doe,rHar:hoe,rhard:poe,rharu:moe,rharul:goe,Rho:yoe,rho:voe,rhov:boe,RightAngleBracket:xoe,RightArrowBar:woe,rightarrow:_oe,RightArrow:Eoe,Rightarrow:Soe,RightArrowLeftArrow:Aoe,rightarrowtail:Coe,RightCeiling:koe,RightDoubleBracket:Toe,RightDownTeeVector:Doe,RightDownVectorBar:Loe,RightDownVector:Roe,RightFloor:Foe,rightharpoondown:Ooe,rightharpoonup:Moe,rightleftarrows:$oe,rightleftharpoons:Ioe,rightrightarrows:Poe,rightsquigarrow:Noe,RightTeeArrow:Boe,RightTee:zoe,RightTeeVector:joe,rightthreetimes:Uoe,RightTriangleBar:qoe,RightTriangle:Hoe,RightTriangleEqual:Goe,RightUpDownVector:Voe,RightUpTeeVector:Woe,RightUpVectorBar:Yoe,RightUpVector:Xoe,RightVectorBar:Zoe,RightVector:Koe,ring:Joe,risingdotseq:Qoe,rlarr:eae,rlhar:tae,rlm:nae,rmoustache:rae,rmoust:iae,rnmid:sae,roang:oae,roarr:aae,robrk:lae,ropar:uae,ropf:cae,Ropf:fae,roplus:dae,rotimes:hae,RoundImplies:pae,rpar:mae,rpargt:gae,rppolint:yae,rrarr:vae,Rrightarrow:bae,rsaquo:xae,rscr:wae,Rscr:_ae,rsh:Eae,Rsh:Sae,rsqb:Aae,rsquo:Cae,rsquor:kae,rthree:Tae,rtimes:Dae,rtri:Lae,rtrie:Rae,rtrif:Fae,rtriltri:Oae,RuleDelayed:Mae,ruluhar:$ae,rx:Iae,Sacute:Pae,sacute:Nae,sbquo:Bae,scap:zae,Scaron:jae,scaron:Uae,Sc:qae,sc:Hae,sccue:Gae,sce:Vae,scE:Wae,Scedil:Yae,scedil:Xae,Scirc:Zae,scirc:Kae,scnap:Jae,scnE:Qae,scnsim:ele,scpolint:tle,scsim:nle,Scy:rle,scy:ile,sdotb:sle,sdot:ole,sdote:ale,searhk:lle,searr:ule,seArr:cle,searrow:fle,sect:dle,semi:hle,seswar:ple,setminus:mle,setmn:gle,sext:yle,Sfr:vle,sfr:ble,sfrown:xle,sharp:wle,SHCHcy:_le,shchcy:Ele,SHcy:Sle,shcy:Ale,ShortDownArrow:Cle,ShortLeftArrow:kle,shortmid:Tle,shortparallel:Dle,ShortRightArrow:Lle,ShortUpArrow:Rle,shy:Fle,Sigma:Ole,sigma:Mle,sigmaf:$le,sigmav:Ile,sim:Ple,simdot:Nle,sime:Ble,simeq:zle,simg:jle,simgE:Ule,siml:qle,simlE:Hle,simne:Gle,simplus:Vle,simrarr:Wle,slarr:Yle,SmallCircle:Xle,smallsetminus:Zle,smashp:Kle,smeparsl:Jle,smid:Qle,smile:eue,smt:tue,smte:nue,smtes:rue,SOFTcy:iue,softcy:sue,solbar:oue,solb:aue,sol:lue,Sopf:uue,sopf:cue,spades:fue,spadesuit:due,spar:hue,sqcap:pue,sqcaps:mue,sqcup:gue,sqcups:yue,Sqrt:vue,sqsub:bue,sqsube:xue,sqsubset:wue,sqsubseteq:_ue,sqsup:Eue,sqsupe:Sue,sqsupset:Aue,sqsupseteq:Cue,square:kue,Square:Tue,SquareIntersection:Due,SquareSubset:Lue,SquareSubsetEqual:Rue,SquareSuperset:Fue,SquareSupersetEqual:Oue,SquareUnion:Mue,squarf:$ue,squ:Iue,squf:Pue,srarr:Nue,Sscr:Bue,sscr:zue,ssetmn:jue,ssmile:Uue,sstarf:que,Star:Hue,star:Gue,starf:Vue,straightepsilon:Wue,straightphi:Yue,strns:Xue,sub:Zue,Sub:Kue,subdot:Jue,subE:Que,sube:ece,subedot:tce,submult:nce,subnE:rce,subne:ice,subplus:sce,subrarr:oce,subset:ace,Subset:lce,subseteq:uce,subseteqq:cce,SubsetEqual:fce,subsetneq:dce,subsetneqq:hce,subsim:pce,subsub:mce,subsup:gce,succapprox:yce,succ:vce,succcurlyeq:bce,Succeeds:xce,SucceedsEqual:wce,SucceedsSlantEqual:_ce,SucceedsTilde:Ece,succeq:Sce,succnapprox:Ace,succneqq:Cce,succnsim:kce,succsim:Tce,SuchThat:Dce,sum:Lce,Sum:Rce,sung:Fce,sup1:Oce,sup2:Mce,sup3:$ce,sup:Ice,Sup:Pce,supdot:Nce,supdsub:Bce,supE:zce,supe:jce,supedot:Uce,Superset:qce,SupersetEqual:Hce,suphsol:Gce,suphsub:Vce,suplarr:Wce,supmult:Yce,supnE:Xce,supne:Zce,supplus:Kce,supset:Jce,Supset:Qce,supseteq:efe,supseteqq:tfe,supsetneq:nfe,supsetneqq:rfe,supsim:ife,supsub:sfe,supsup:ofe,swarhk:afe,swarr:lfe,swArr:ufe,swarrow:cfe,swnwar:ffe,szlig:dfe,Tab:hfe,target:pfe,Tau:mfe,tau:gfe,tbrk:yfe,Tcaron:vfe,tcaron:bfe,Tcedil:xfe,tcedil:wfe,Tcy:_fe,tcy:Efe,tdot:Sfe,telrec:Afe,Tfr:Cfe,tfr:kfe,there4:Tfe,therefore:Dfe,Therefore:Lfe,Theta:Rfe,theta:Ffe,thetasym:Ofe,thetav:Mfe,thickapprox:$fe,thicksim:Ife,ThickSpace:Pfe,ThinSpace:Nfe,thinsp:Bfe,thkap:zfe,thksim:jfe,THORN:Ufe,thorn:qfe,tilde:Hfe,Tilde:Gfe,TildeEqual:Vfe,TildeFullEqual:Wfe,TildeTilde:Yfe,timesbar:Xfe,timesb:Zfe,times:Kfe,timesd:Jfe,tint:Qfe,toea:ede,topbot:tde,topcir:nde,top:rde,Topf:ide,topf:sde,topfork:ode,tosa:ade,tprime:lde,trade:ude,TRADE:cde,triangle:fde,triangledown:dde,triangleleft:hde,trianglelefteq:pde,triangleq:mde,triangleright:gde,trianglerighteq:yde,tridot:vde,trie:bde,triminus:xde,TripleDot:wde,triplus:_de,trisb:Ede,tritime:Sde,trpezium:Ade,Tscr:Cde,tscr:kde,TScy:Tde,tscy:Dde,TSHcy:Lde,tshcy:Rde,Tstrok:Fde,tstrok:Ode,twixt:Mde,twoheadleftarrow:$de,twoheadrightarrow:Ide,Uacute:Pde,uacute:Nde,uarr:Bde,Uarr:zde,uArr:jde,Uarrocir:Ude,Ubrcy:qde,ubrcy:Hde,Ubreve:Gde,ubreve:Vde,Ucirc:Wde,ucirc:Yde,Ucy:Xde,ucy:Zde,udarr:Kde,Udblac:Jde,udblac:Qde,udhar:ehe,ufisht:the,Ufr:nhe,ufr:rhe,Ugrave:ihe,ugrave:she,uHar:ohe,uharl:ahe,uharr:lhe,uhblk:uhe,ulcorn:che,ulcorner:fhe,ulcrop:dhe,ultri:hhe,Umacr:phe,umacr:mhe,uml:ghe,UnderBar:yhe,UnderBrace:vhe,UnderBracket:bhe,UnderParenthesis:xhe,Union:whe,UnionPlus:_he,Uogon:Ehe,uogon:She,Uopf:Ahe,uopf:Che,UpArrowBar:khe,uparrow:The,UpArrow:Dhe,Uparrow:Lhe,UpArrowDownArrow:Rhe,updownarrow:Fhe,UpDownArrow:Ohe,Updownarrow:Mhe,UpEquilibrium:$he,upharpoonleft:Ihe,upharpoonright:Phe,uplus:Nhe,UpperLeftArrow:Bhe,UpperRightArrow:zhe,upsi:jhe,Upsi:Uhe,upsih:qhe,Upsilon:Hhe,upsilon:Ghe,UpTeeArrow:Vhe,UpTee:Whe,upuparrows:Yhe,urcorn:Xhe,urcorner:Zhe,urcrop:Khe,Uring:Jhe,uring:Qhe,urtri:epe,Uscr:tpe,uscr:npe,utdot:rpe,Utilde:ipe,utilde:spe,utri:ope,utrif:ape,uuarr:lpe,Uuml:upe,uuml:cpe,uwangle:fpe,vangrt:dpe,varepsilon:hpe,varkappa:ppe,varnothing:mpe,varphi:gpe,varpi:ype,varpropto:vpe,varr:bpe,vArr:xpe,varrho:wpe,varsigma:_pe,varsubsetneq:Epe,varsubsetneqq:Spe,varsupsetneq:Ape,varsupsetneqq:Cpe,vartheta:kpe,vartriangleleft:Tpe,vartriangleright:Dpe,vBar:Lpe,Vbar:Rpe,vBarv:Fpe,Vcy:Ope,vcy:Mpe,vdash:$pe,vDash:Ipe,Vdash:Ppe,VDash:Npe,Vdashl:Bpe,veebar:zpe,vee:jpe,Vee:Upe,veeeq:qpe,vellip:Hpe,verbar:Gpe,Verbar:Vpe,vert:Wpe,Vert:Ype,VerticalBar:Xpe,VerticalLine:Zpe,VerticalSeparator:Kpe,VerticalTilde:Jpe,VeryThinSpace:Qpe,Vfr:eme,vfr:tme,vltri:nme,vnsub:rme,vnsup:ime,Vopf:sme,vopf:ome,vprop:ame,vrtri:lme,Vscr:ume,vscr:cme,vsubnE:fme,vsubne:dme,vsupnE:hme,vsupne:pme,Vvdash:mme,vzigzag:gme,Wcirc:yme,wcirc:vme,wedbar:bme,wedge:xme,Wedge:wme,wedgeq:_me,weierp:Eme,Wfr:Sme,wfr:Ame,Wopf:Cme,wopf:kme,wp:Tme,wr:Dme,wreath:Lme,Wscr:Rme,wscr:Fme,xcap:Ome,xcirc:Mme,xcup:$me,xdtri:Ime,Xfr:Pme,xfr:Nme,xharr:Bme,xhArr:zme,Xi:jme,xi:Ume,xlarr:qme,xlArr:Hme,xmap:Gme,xnis:Vme,xodot:Wme,Xopf:Yme,xopf:Xme,xoplus:Zme,xotime:Kme,xrarr:Jme,xrArr:Qme,Xscr:ege,xscr:tge,xsqcup:nge,xuplus:rge,xutri:ige,xvee:sge,xwedge:oge,Yacute:age,yacute:lge,YAcy:uge,yacy:cge,Ycirc:fge,ycirc:dge,Ycy:hge,ycy:pge,yen:mge,Yfr:gge,yfr:yge,YIcy:vge,yicy:bge,Yopf:xge,yopf:wge,Yscr:_ge,yscr:Ege,YUcy:Sge,yucy:Age,yuml:Cge,Yuml:kge,Zacute:Tge,zacute:Dge,Zcaron:Lge,zcaron:Rge,Zcy:Fge,zcy:Oge,Zdot:Mge,zdot:$ge,zeetrf:Ige,ZeroWidthSpace:Pge,Zeta:Nge,zeta:Bge,zfr:zge,Zfr:jge,ZHcy:Uge,zhcy:qge,zigrarr:Hge,zopf:Gge,Zopf:Vge,Zscr:Wge,zscr:Yge,zwj:Xge,zwnj:Zge},y9e=Object.freeze({__proto__:null,Aacute:x,aacute:y,Abreve:w,abreve:_,ac:A,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:$,af:I,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:de,amalg:ze,amp:He,AMP:je,andand:we,And:Ie,and:qe,andd:Pe,andslope:At,andv:dt,ang:nn,ange:Wt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:se,angmsdad:oe,angmsdae:be,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:ie,Aogon:ae,aogon:ke,Aopf:Ce,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:bt,apos:Pt,ApplyFunction:_t,approx:Kt,approxeq:sn,Aring:rn,aring:on,Ascr:vn,ascr:Er,Assign:Ji,ast:ds,asymp:Gi,asympeq:No,Atilde:qn,atilde:Mr,Auml:Lr,auml:yn,awconint:Kr,awint:ir,backcong:Ni,backepsilon:tr,backprime:$r,backsim:to,backsimeq:ge,Backslash:Le,Barv:it,barvee:Je,barwed:Et,Barwed:an,barwedge:en,bbrk:xt,bbrktbrk:et,bcong:pn,Bcy:Cn,bcy:Ut,bdquo:qt,becaus:Sr,because:ci,Because:Jt,bemptyv:Xe,bepsi:ht,bernou:Xn,Bernoullis:ni,Beta:Ar,beta:Rr,beth:nr,between:Gt,Bfr:vi,bfr:Qi,bigcap:bi,bigcirc:js,bigcup:xo,bigodot:no,bigoplus:Bo,bigotimes:bs,bigsqcup:Fs,bigstar:zo,bigtriangledown:hs,bigtriangleup:ol,biguplus:al,bigvee:Cr,bigwedge:es,bkarow:ro,blacklozenge:Os,blacksquare:Us,blacktriangle:fa,blacktriangledown:qs,blacktriangleleft:ll,blacktriangleright:Vi,blank:Wi,blk12:io,blk14:ps,blk34:jo,block:Hs,bne:fi,bnequiv:Ma,bNot:so,bnot:Yi,Bopf:oo,bopf:ul,bot:Vt,bottom:Z,bowtie:me,boxbox:Be,boxdl:gt,boxdL:mn,boxDl:Nt,boxDL:In,boxdr:dr,boxdR:kr,boxDr:Ln,boxDR:Ai,boxh:Jr,boxH:sr,boxhd:di,boxHd:xs,boxhD:Gs,boxHD:Bi,boxhu:zi,boxHu:wo,boxhU:Gr,boxHU:da,boxminus:Vu,boxplus:cl,boxtimes:fl,boxul:Yc,boxuL:Wu,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:yt,boxUr:Qt,boxUR:Ht,boxv:An,boxV:pr,boxvh:Ir,boxvH:ts,boxVh:ws,boxVH:xi,boxvl:Li,boxvL:Te,boxVl:ut,boxVL:Yt,boxvr:Vn,boxvR:mr,boxVr:Pn,boxVR:ji,bprime:$a,breve:Tb,Breve:xS,brvbar:Db,bscr:Lb,Bscr:kh,bsemi:Rb,bsim:Fb,bsime:Z0,bsolb:Am,bsol:Ob,bsolhsub:Cm,bull:dl,bullet:Mb,bump:K0,bumpE:J0,bumpe:$b,Bumpeq:Ib,bumpeq:Q0,Cacute:wS,cacute:_S,capand:ES,capbrcup:ud,capcap:cd,cap:ey,Cap:ty,capcup:Pb,capdot:ny,CapitalDifferentialD:Xc,caps:Zc,caret:_o,caron:Yu,Cayleys:Xu,ccaps:km,Ccaron:Nb,ccaron:Th,Ccedil:Bb,ccedil:ry,Ccirc:Tm,ccirc:SS,Cconint:iy,ccups:zb,ccupssm:sy,Cdot:oy,cdot:fd,cedil:Dm,Cedilla:jb,cemptyv:Lm,cent:ay,centerdot:ly,CenterDot:dd,cfr:Dh,Cfr:Rm,CHcy:Ub,chcy:Lh,check:qb,checkmark:Kc,Chi:Rh,chi:Jc,circ:Fh,circeq:hd,circlearrowleft:Hb,circlearrowright:Gb,circledast:Vb,circledcirc:AS,circleddash:Qc,CircleDot:ef,circledR:CS,circledS:kS,CircleMinus:TS,CirclePlus:DS,CircleTimes:LS,cir:Uo,cirE:_s,cire:ao,cirfnint:Es,cirmid:Oh,cirscir:RS,ClockwiseContourIntegral:Fm,CloseCurlyDoubleQuote:FS,CloseCurlyQuote:uy,clubs:Wb,clubsuit:cy,colon:fy,Colon:dy,Colone:Yb,colone:Xb,coloneq:hy,comma:Zb,commat:Mh,comp:OS,compfn:Om,complement:hu,complexes:Kb,cong:MS,congdot:Jb,Congruent:ha,conint:Pr,Conint:hl,ContourIntegral:Zu,copf:Ku,Copf:Qb,coprod:py,Coproduct:ex,copy:my,COPY:$h,copysr:tx,CounterClockwiseContourIntegral:gy,crarr:Ju,cross:nx,Cross:rx,Cscr:Mm,cscr:yy,csub:ix,csube:sx,csup:$S,csupe:$m,ctdot:ox,cudarrl:IS,cudarrr:ax,cuepr:pd,cuesc:vy,cularr:Im,cularrp:lx,cupbrcap:by,cupcap:ux,CupCap:cx,cup:Vs,Cup:Pm,cupcup:fx,cupdot:dx,cupor:hx,cups:md,curarr:Nm,curarrm:px,curlyeqprec:mx,curlyeqsucc:gx,curlyvee:gd,curlywedge:yx,curren:Bm,curvearrowleft:vx,curvearrowright:Ih,cuvee:yd,cuwed:bx,cwconint:xx,cwint:wx,cylcty:Ph,dagger:Nh,Dagger:Bh,daleth:zh,darr:_x,Darr:Ex,dArr:Qu,dash:vd,Dashv:jh,dashv:Sx,dbkarow:PS,dblac:NS,Dcaron:Eo,dcaron:Ax,Dcy:BS,dcy:Cx,ddagger:kx,ddarr:Tx,DD:zS,dd:jS,DDotrahd:ec,ddotseq:Uh,deg:zm,Del:qh,Delta:pu,delta:US,demptyv:qS,dfisht:bd,Dfr:Dx,dfr:Lx,dHar:Rx,dharl:jm,dharr:xd,DiacriticalAcute:xy,DiacriticalDot:wy,DiacriticalDoubleAcute:_y,DiacriticalGrave:Hh,DiacriticalTilde:Fx,diam:Ox,diamond:Um,Diamond:HS,diamondsuit:Gh,diams:Mx,die:$x,DifferentialD:Ey,digamma:Ix,disin:Px,div:Nx,divide:Vh,divideontimes:Wh,divonx:Sy,DJcy:Bx,djcy:zx,dlcorn:jx,dlcrop:Ay,dollar:Ux,Dopf:qx,dopf:wd,Dot:Hx,dot:qm,DotDot:GS,doteq:VS,doteqdot:Ri,DotEqual:Cy,dotminus:Yh,dotplus:pl,dotsquare:Hm,doublebarwedge:ky,DoubleContourIntegral:Gx,DoubleDot:Vx,DoubleDownArrow:Wx,DoubleLeftArrow:Yx,DoubleLeftRightArrow:Xx,DoubleLeftTee:Ty,DoubleLongLeftArrow:Zx,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:Kx,DoubleRightArrow:_d,DoubleRightTee:Gm,DoubleUpArrow:WS,DoubleUpDownArrow:ns,DoubleVerticalBar:YS,DownArrowBar:Vm,downarrow:m,DownArrow:b,Downarrow:S,DownArrowUpArrow:E,DownBreve:C,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:fe,DownRightTeeVector:Se,DownRightVectorBar:ve,DownRightVector:$e,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Qe,Dscr:pt,dscr:ct,DScy:mt,dscy:bn,dsol:Mt,Dstrok:Hn,dstrok:fn,dtdot:or,dtri:Nr,dtrif:ar,duarr:Zn,duhar:lr,dwangle:$n,DZcy:Br,dzcy:Fn,dzigrarr:Jn,Eacute:Nn,eacute:vr,easter:lo,Ecaron:zr,ecaron:Ws,Ecirc:Ys,ecirc:Ci,ecir:uo,ecolon:Ia,Ecy:Ms,ecy:ml,eDDot:Wm,Edot:Jx,edot:tf,eDot:qo,ee:tc,efDot:XS,Efr:Ed,efr:Dy,eg:Xh,Egrave:Ym,egrave:Zh,egs:Ly,egsdot:Qx,el:Ry,Element:ew,elinters:tw,ell:nw,els:Tz,elsdot:Dz,Emacr:Lz,emacr:Rz,empty:Fz,emptyset:Oz,EmptySmallSquare:Mz,emptyv:$z,EmptyVerySmallSquare:Iz,emsp13:Pz,emsp14:Nz,emsp:Bz,ENG:zz,eng:jz,ensp:Uz,Eogon:qz,eogon:Hz,Eopf:Gz,eopf:Vz,epar:Wz,eparsl:Yz,eplus:Xz,epsi:Zz,Epsilon:Kz,epsilon:Jz,epsiv:Qz,eqcirc:ej,eqcolon:tj,eqsim:nj,eqslantgtr:rj,eqslantless:ij,Equal:sj,equals:oj,EqualTilde:aj,equest:lj,Equilibrium:uj,equiv:cj,equivDD:fj,eqvparsl:dj,erarr:hj,erDot:pj,escr:mj,Escr:gj,esdot:yj,Esim:vj,esim:bj,Eta:xj,eta:wj,ETH:_j,eth:Ej,Euml:Sj,euml:Aj,euro:Cj,excl:kj,exist:Tj,Exists:Dj,expectation:Lj,exponentiale:Rj,ExponentialE:Fj,fallingdotseq:Oj,Fcy:Mj,fcy:$j,female:Ij,ffilig:Pj,fflig:Nj,ffllig:Bj,Ffr:zj,ffr:jj,filig:Uj,FilledSmallSquare:qj,FilledVerySmallSquare:Hj,fjlig:Gj,flat:Vj,fllig:Wj,fltns:Yj,fnof:Xj,Fopf:Zj,fopf:Kj,forall:Jj,ForAll:Qj,fork:eU,forkv:tU,Fouriertrf:nU,fpartint:rU,frac12:iU,frac13:sU,frac14:oU,frac15:aU,frac16:lU,frac18:uU,frac23:cU,frac25:fU,frac34:dU,frac35:hU,frac38:pU,frac45:mU,frac56:gU,frac58:yU,frac78:vU,frasl:bU,frown:xU,fscr:wU,Fscr:_U,gacute:EU,Gamma:SU,gamma:AU,Gammad:CU,gammad:kU,gap:TU,Gbreve:DU,gbreve:LU,Gcedil:RU,Gcirc:FU,gcirc:OU,Gcy:MU,gcy:$U,Gdot:IU,gdot:PU,ge:NU,gE:BU,gEl:zU,gel:jU,geq:UU,geqq:qU,geqslant:HU,gescc:GU,ges:VU,gesdot:WU,gesdoto:YU,gesdotol:XU,gesl:ZU,gesles:KU,Gfr:JU,gfr:QU,gg:eq,Gg:tq,ggg:nq,gimel:rq,GJcy:iq,gjcy:sq,gla:oq,gl:aq,glE:lq,glj:uq,gnap:cq,gnapprox:fq,gne:dq,gnE:hq,gneq:pq,gneqq:mq,gnsim:gq,Gopf:yq,gopf:vq,grave:bq,GreaterEqual:xq,GreaterEqualLess:wq,GreaterFullEqual:_q,GreaterGreater:Eq,GreaterLess:Sq,GreaterSlantEqual:Aq,GreaterTilde:Cq,Gscr:kq,gscr:Tq,gsim:Dq,gsime:Lq,gsiml:Rq,gtcc:Fq,gtcir:Oq,gt:Mq,GT:$q,Gt:Iq,gtdot:Pq,gtlPar:Nq,gtquest:Bq,gtrapprox:zq,gtrarr:jq,gtrdot:Uq,gtreqless:qq,gtreqqless:Hq,gtrless:Gq,gtrsim:Vq,gvertneqq:Wq,gvnE:Yq,Hacek:Xq,hairsp:Zq,half:Kq,hamilt:Jq,HARDcy:Qq,hardcy:eH,harrcir:tH,harr:nH,hArr:rH,harrw:iH,Hat:sH,hbar:oH,Hcirc:aH,hcirc:lH,hearts:uH,heartsuit:cH,hellip:fH,hercon:dH,hfr:hH,Hfr:pH,HilbertSpace:mH,hksearow:gH,hkswarow:yH,hoarr:vH,homtht:bH,hookleftarrow:xH,hookrightarrow:wH,hopf:_H,Hopf:EH,horbar:SH,HorizontalLine:AH,hscr:CH,Hscr:kH,hslash:TH,Hstrok:DH,hstrok:LH,HumpDownHump:RH,HumpEqual:FH,hybull:OH,hyphen:MH,Iacute:$H,iacute:IH,ic:PH,Icirc:NH,icirc:BH,Icy:zH,icy:jH,Idot:UH,IEcy:qH,iecy:HH,iexcl:GH,iff:VH,ifr:WH,Ifr:YH,Igrave:XH,igrave:ZH,ii:KH,iiiint:JH,iiint:QH,iinfin:eG,iiota:tG,IJlig:nG,ijlig:rG,Imacr:iG,imacr:sG,image:oG,ImaginaryI:aG,imagline:lG,imagpart:uG,imath:cG,Im:fG,imof:dG,imped:hG,Implies:pG,incare:mG,infin:gG,infintie:yG,inodot:vG,intcal:bG,int:xG,Int:wG,integers:_G,Integral:EG,intercal:SG,Intersection:AG,intlarhk:CG,intprod:kG,InvisibleComma:TG,InvisibleTimes:DG,IOcy:LG,iocy:RG,Iogon:FG,iogon:OG,Iopf:MG,iopf:$G,Iota:IG,iota:PG,iprod:NG,iquest:BG,iscr:zG,Iscr:jG,isin:UG,isindot:qG,isinE:HG,isins:GG,isinsv:VG,isinv:WG,it:YG,Itilde:XG,itilde:ZG,Iukcy:KG,iukcy:JG,Iuml:QG,iuml:eV,Jcirc:tV,jcirc:nV,Jcy:rV,jcy:iV,Jfr:sV,jfr:oV,jmath:aV,Jopf:lV,jopf:uV,Jscr:cV,jscr:fV,Jsercy:dV,jsercy:hV,Jukcy:pV,jukcy:mV,Kappa:gV,kappa:yV,kappav:vV,Kcedil:bV,kcedil:xV,Kcy:wV,kcy:_V,Kfr:EV,kfr:SV,kgreen:AV,KHcy:CV,khcy:kV,KJcy:TV,kjcy:DV,Kopf:LV,kopf:RV,Kscr:FV,kscr:OV,lAarr:MV,Lacute:$V,lacute:IV,laemptyv:PV,lagran:NV,Lambda:BV,lambda:zV,lang:jV,Lang:UV,langd:qV,langle:HV,lap:GV,Laplacetrf:VV,laquo:WV,larrb:YV,larrbfs:XV,larr:ZV,Larr:KV,lArr:JV,larrfs:QV,larrhk:eW,larrlp:tW,larrpl:nW,larrsim:rW,larrtl:iW,latail:sW,lAtail:oW,lat:aW,late:lW,lates:uW,lbarr:cW,lBarr:fW,lbbrk:dW,lbrace:hW,lbrack:pW,lbrke:mW,lbrksld:gW,lbrkslu:yW,Lcaron:vW,lcaron:bW,Lcedil:xW,lcedil:wW,lceil:_W,lcub:EW,Lcy:SW,lcy:AW,ldca:CW,ldquo:kW,ldquor:TW,ldrdhar:DW,ldrushar:LW,ldsh:RW,le:FW,lE:OW,LeftAngleBracket:MW,LeftArrowBar:$W,leftarrow:IW,LeftArrow:PW,Leftarrow:NW,LeftArrowRightArrow:BW,leftarrowtail:zW,LeftCeiling:jW,LeftDoubleBracket:UW,LeftDownTeeVector:qW,LeftDownVectorBar:HW,LeftDownVector:GW,LeftFloor:VW,leftharpoondown:WW,leftharpoonup:YW,leftleftarrows:XW,leftrightarrow:ZW,LeftRightArrow:KW,Leftrightarrow:JW,leftrightarrows:QW,leftrightharpoons:eY,leftrightsquigarrow:tY,LeftRightVector:nY,LeftTeeArrow:rY,LeftTee:iY,LeftTeeVector:sY,leftthreetimes:oY,LeftTriangleBar:aY,LeftTriangle:lY,LeftTriangleEqual:uY,LeftUpDownVector:cY,LeftUpTeeVector:fY,LeftUpVectorBar:dY,LeftUpVector:hY,LeftVectorBar:pY,LeftVector:mY,lEg:gY,leg:yY,leq:vY,leqq:bY,leqslant:xY,lescc:wY,les:_Y,lesdot:EY,lesdoto:SY,lesdotor:AY,lesg:CY,lesges:kY,lessapprox:TY,lessdot:DY,lesseqgtr:LY,lesseqqgtr:RY,LessEqualGreater:FY,LessFullEqual:OY,LessGreater:MY,lessgtr:$Y,LessLess:IY,lesssim:PY,LessSlantEqual:NY,LessTilde:BY,lfisht:zY,lfloor:jY,Lfr:UY,lfr:qY,lg:HY,lgE:GY,lHar:VY,lhard:WY,lharu:YY,lharul:XY,lhblk:ZY,LJcy:KY,ljcy:JY,llarr:QY,ll:eX,Ll:tX,llcorner:nX,Lleftarrow:rX,llhard:iX,lltri:sX,Lmidot:oX,lmidot:aX,lmoustache:lX,lmoust:uX,lnap:cX,lnapprox:fX,lne:dX,lnE:hX,lneq:pX,lneqq:mX,lnsim:gX,loang:yX,loarr:vX,lobrk:bX,longleftarrow:xX,LongLeftArrow:wX,Longleftarrow:_X,longleftrightarrow:EX,LongLeftRightArrow:SX,Longleftrightarrow:AX,longmapsto:CX,longrightarrow:kX,LongRightArrow:TX,Longrightarrow:DX,looparrowleft:LX,looparrowright:RX,lopar:FX,Lopf:OX,lopf:MX,loplus:$X,lotimes:IX,lowast:PX,lowbar:NX,LowerLeftArrow:BX,LowerRightArrow:zX,loz:jX,lozenge:UX,lozf:qX,lpar:HX,lparlt:GX,lrarr:VX,lrcorner:WX,lrhar:YX,lrhard:XX,lrm:ZX,lrtri:KX,lsaquo:JX,lscr:QX,Lscr:eZ,lsh:tZ,Lsh:nZ,lsim:rZ,lsime:iZ,lsimg:sZ,lsqb:oZ,lsquo:aZ,lsquor:lZ,Lstrok:uZ,lstrok:cZ,ltcc:fZ,ltcir:dZ,lt:hZ,LT:pZ,Lt:mZ,ltdot:gZ,lthree:yZ,ltimes:vZ,ltlarr:bZ,ltquest:xZ,ltri:wZ,ltrie:_Z,ltrif:EZ,ltrPar:SZ,lurdshar:AZ,luruhar:CZ,lvertneqq:kZ,lvnE:TZ,macr:DZ,male:LZ,malt:RZ,maltese:FZ,map:OZ,mapsto:MZ,mapstodown:$Z,mapstoleft:IZ,mapstoup:PZ,marker:NZ,mcomma:BZ,Mcy:zZ,mcy:jZ,mdash:UZ,mDDot:qZ,measuredangle:HZ,MediumSpace:GZ,Mellintrf:VZ,Mfr:WZ,mfr:YZ,mho:XZ,micro:ZZ,midast:KZ,midcir:JZ,mid:QZ,middot:eK,minusb:tK,minus:nK,minusd:rK,minusdu:iK,MinusPlus:sK,mlcp:oK,mldr:aK,mnplus:lK,models:uK,Mopf:cK,mopf:fK,mp:dK,mscr:hK,Mscr:pK,mstpos:mK,Mu:gK,mu:yK,multimap:vK,mumap:bK,nabla:xK,Nacute:wK,nacute:_K,nang:EK,nap:SK,napE:AK,napid:CK,napos:kK,napprox:TK,natural:DK,naturals:LK,natur:RK,nbsp:FK,nbump:OK,nbumpe:MK,ncap:$K,Ncaron:IK,ncaron:PK,Ncedil:NK,ncedil:BK,ncong:zK,ncongdot:jK,ncup:UK,Ncy:qK,ncy:HK,ndash:GK,nearhk:VK,nearr:WK,neArr:YK,nearrow:XK,ne:ZK,nedot:KK,NegativeMediumSpace:JK,NegativeThickSpace:QK,NegativeThinSpace:eJ,NegativeVeryThinSpace:tJ,nequiv:nJ,nesear:rJ,nesim:iJ,NestedGreaterGreater:sJ,NestedLessLess:oJ,NewLine:aJ,nexist:lJ,nexists:uJ,Nfr:cJ,nfr:fJ,ngE:dJ,nge:hJ,ngeq:pJ,ngeqq:mJ,ngeqslant:gJ,nges:yJ,nGg:vJ,ngsim:bJ,nGt:xJ,ngt:wJ,ngtr:_J,nGtv:EJ,nharr:SJ,nhArr:AJ,nhpar:CJ,ni:kJ,nis:TJ,nisd:DJ,niv:LJ,NJcy:RJ,njcy:FJ,nlarr:OJ,nlArr:MJ,nldr:$J,nlE:IJ,nle:PJ,nleftarrow:NJ,nLeftarrow:BJ,nleftrightarrow:zJ,nLeftrightarrow:jJ,nleq:UJ,nleqq:qJ,nleqslant:HJ,nles:GJ,nless:VJ,nLl:WJ,nlsim:YJ,nLt:XJ,nlt:ZJ,nltri:KJ,nltrie:JJ,nLtv:QJ,nmid:eQ,NoBreak:tQ,NonBreakingSpace:nQ,nopf:rQ,Nopf:iQ,Not:sQ,not:oQ,NotCongruent:aQ,NotCupCap:lQ,NotDoubleVerticalBar:uQ,NotElement:cQ,NotEqual:fQ,NotEqualTilde:dQ,NotExists:hQ,NotGreater:pQ,NotGreaterEqual:mQ,NotGreaterFullEqual:gQ,NotGreaterGreater:yQ,NotGreaterLess:vQ,NotGreaterSlantEqual:bQ,NotGreaterTilde:xQ,NotHumpDownHump:wQ,NotHumpEqual:_Q,notin:EQ,notindot:SQ,notinE:AQ,notinva:CQ,notinvb:kQ,notinvc:TQ,NotLeftTriangleBar:DQ,NotLeftTriangle:LQ,NotLeftTriangleEqual:RQ,NotLess:FQ,NotLessEqual:OQ,NotLessGreater:MQ,NotLessLess:$Q,NotLessSlantEqual:IQ,NotLessTilde:PQ,NotNestedGreaterGreater:NQ,NotNestedLessLess:BQ,notni:zQ,notniva:jQ,notnivb:UQ,notnivc:qQ,NotPrecedes:HQ,NotPrecedesEqual:GQ,NotPrecedesSlantEqual:VQ,NotReverseElement:WQ,NotRightTriangleBar:YQ,NotRightTriangle:XQ,NotRightTriangleEqual:ZQ,NotSquareSubset:KQ,NotSquareSubsetEqual:JQ,NotSquareSuperset:QQ,NotSquareSupersetEqual:eee,NotSubset:tee,NotSubsetEqual:nee,NotSucceeds:ree,NotSucceedsEqual:iee,NotSucceedsSlantEqual:see,NotSucceedsTilde:oee,NotSuperset:aee,NotSupersetEqual:lee,NotTilde:uee,NotTildeEqual:cee,NotTildeFullEqual:fee,NotTildeTilde:dee,NotVerticalBar:hee,nparallel:pee,npar:mee,nparsl:gee,npart:yee,npolint:vee,npr:bee,nprcue:xee,nprec:wee,npreceq:_ee,npre:Eee,nrarrc:See,nrarr:Aee,nrArr:Cee,nrarrw:kee,nrightarrow:Tee,nRightarrow:Dee,nrtri:Lee,nrtrie:Ree,nsc:Fee,nsccue:Oee,nsce:Mee,Nscr:$ee,nscr:Iee,nshortmid:Pee,nshortparallel:Nee,nsim:Bee,nsime:zee,nsimeq:jee,nsmid:Uee,nspar:qee,nsqsube:Hee,nsqsupe:Gee,nsub:Vee,nsubE:Wee,nsube:Yee,nsubset:Xee,nsubseteq:Zee,nsubseteqq:Kee,nsucc:Jee,nsucceq:Qee,nsup:ete,nsupE:tte,nsupe:nte,nsupset:rte,nsupseteq:ite,nsupseteqq:ste,ntgl:ote,Ntilde:ate,ntilde:lte,ntlg:ute,ntriangleleft:cte,ntrianglelefteq:fte,ntriangleright:dte,ntrianglerighteq:hte,Nu:pte,nu:mte,num:gte,numero:yte,numsp:vte,nvap:bte,nvdash:xte,nvDash:wte,nVdash:_te,nVDash:Ete,nvge:Ste,nvgt:Ate,nvHarr:Cte,nvinfin:kte,nvlArr:Tte,nvle:Dte,nvlt:Lte,nvltrie:Rte,nvrArr:Fte,nvrtrie:Ote,nvsim:Mte,nwarhk:$te,nwarr:Ite,nwArr:Pte,nwarrow:Nte,nwnear:Bte,Oacute:zte,oacute:jte,oast:Ute,Ocirc:qte,ocirc:Hte,ocir:Gte,Ocy:Vte,ocy:Wte,odash:Yte,Odblac:Xte,odblac:Zte,odiv:Kte,odot:Jte,odsold:Qte,OElig:ene,oelig:tne,ofcir:nne,Ofr:rne,ofr:ine,ogon:sne,Ograve:one,ograve:ane,ogt:lne,ohbar:une,ohm:cne,oint:fne,olarr:dne,olcir:hne,olcross:pne,oline:mne,olt:gne,Omacr:yne,omacr:vne,Omega:bne,omega:xne,Omicron:wne,omicron:_ne,omid:Ene,ominus:Sne,Oopf:Ane,oopf:Cne,opar:kne,OpenCurlyDoubleQuote:Tne,OpenCurlyQuote:Dne,operp:Lne,oplus:Rne,orarr:Fne,Or:One,or:Mne,ord:$ne,order:Ine,orderof:Pne,ordf:Nne,ordm:Bne,origof:zne,oror:jne,orslope:Une,orv:qne,oS:Hne,Oscr:Gne,oscr:Vne,Oslash:Wne,oslash:Yne,osol:Xne,Otilde:Zne,otilde:Kne,otimesas:Jne,Otimes:Qne,otimes:ere,Ouml:tre,ouml:nre,ovbar:rre,OverBar:ire,OverBrace:sre,OverBracket:ore,OverParenthesis:are,para:lre,parallel:ure,par:cre,parsim:fre,parsl:dre,part:hre,PartialD:pre,Pcy:mre,pcy:gre,percnt:yre,period:vre,permil:bre,perp:xre,pertenk:wre,Pfr:_re,pfr:Ere,Phi:Sre,phi:Are,phiv:Cre,phmmat:kre,phone:Tre,Pi:Dre,pi:Lre,pitchfork:Rre,piv:Fre,planck:Ore,planckh:Mre,plankv:$re,plusacir:Ire,plusb:Pre,pluscir:Nre,plus:Bre,plusdo:zre,plusdu:jre,pluse:Ure,PlusMinus:qre,plusmn:Hre,plussim:Gre,plustwo:Vre,pm:Wre,Poincareplane:Yre,pointint:Xre,popf:Zre,Popf:Kre,pound:Jre,prap:Qre,Pr:eie,pr:tie,prcue:nie,precapprox:rie,prec:iie,preccurlyeq:sie,Precedes:oie,PrecedesEqual:aie,PrecedesSlantEqual:lie,PrecedesTilde:uie,preceq:cie,precnapprox:fie,precneqq:die,precnsim:hie,pre:pie,prE:mie,precsim:gie,prime:yie,Prime:vie,primes:bie,prnap:xie,prnE:wie,prnsim:_ie,prod:Eie,Product:Sie,profalar:Aie,profline:Cie,profsurf:kie,prop:Tie,Proportional:Die,Proportion:Lie,propto:Rie,prsim:Fie,prurel:Oie,Pscr:Mie,pscr:$ie,Psi:Iie,psi:Pie,puncsp:Nie,Qfr:Bie,qfr:zie,qint:jie,qopf:Uie,Qopf:qie,qprime:Hie,Qscr:Gie,qscr:Vie,quaternions:Wie,quatint:Yie,quest:Xie,questeq:Zie,quot:Kie,QUOT:Jie,rAarr:Qie,race:ese,Racute:tse,racute:nse,radic:rse,raemptyv:ise,rang:sse,Rang:ose,rangd:ase,range:lse,rangle:use,raquo:cse,rarrap:fse,rarrb:dse,rarrbfs:hse,rarrc:pse,rarr:mse,Rarr:gse,rArr:yse,rarrfs:vse,rarrhk:bse,rarrlp:xse,rarrpl:wse,rarrsim:_se,Rarrtl:Ese,rarrtl:Sse,rarrw:Ase,ratail:Cse,rAtail:kse,ratio:Tse,rationals:Dse,rbarr:Lse,rBarr:Rse,RBarr:Fse,rbbrk:Ose,rbrace:Mse,rbrack:$se,rbrke:Ise,rbrksld:Pse,rbrkslu:Nse,Rcaron:Bse,rcaron:zse,Rcedil:jse,rcedil:Use,rceil:qse,rcub:Hse,Rcy:Gse,rcy:Vse,rdca:Wse,rdldhar:Yse,rdquo:Xse,rdquor:Zse,rdsh:Kse,real:Jse,realine:Qse,realpart:eoe,reals:toe,Re:noe,rect:roe,reg:ioe,REG:soe,ReverseElement:ooe,ReverseEquilibrium:aoe,ReverseUpEquilibrium:loe,rfisht:uoe,rfloor:coe,rfr:foe,Rfr:doe,rHar:hoe,rhard:poe,rharu:moe,rharul:goe,Rho:yoe,rho:voe,rhov:boe,RightAngleBracket:xoe,RightArrowBar:woe,rightarrow:_oe,RightArrow:Eoe,Rightarrow:Soe,RightArrowLeftArrow:Aoe,rightarrowtail:Coe,RightCeiling:koe,RightDoubleBracket:Toe,RightDownTeeVector:Doe,RightDownVectorBar:Loe,RightDownVector:Roe,RightFloor:Foe,rightharpoondown:Ooe,rightharpoonup:Moe,rightleftarrows:$oe,rightleftharpoons:Ioe,rightrightarrows:Poe,rightsquigarrow:Noe,RightTeeArrow:Boe,RightTee:zoe,RightTeeVector:joe,rightthreetimes:Uoe,RightTriangleBar:qoe,RightTriangle:Hoe,RightTriangleEqual:Goe,RightUpDownVector:Voe,RightUpTeeVector:Woe,RightUpVectorBar:Yoe,RightUpVector:Xoe,RightVectorBar:Zoe,RightVector:Koe,ring:Joe,risingdotseq:Qoe,rlarr:eae,rlhar:tae,rlm:nae,rmoustache:rae,rmoust:iae,rnmid:sae,roang:oae,roarr:aae,robrk:lae,ropar:uae,ropf:cae,Ropf:fae,roplus:dae,rotimes:hae,RoundImplies:pae,rpar:mae,rpargt:gae,rppolint:yae,rrarr:vae,Rrightarrow:bae,rsaquo:xae,rscr:wae,Rscr:_ae,rsh:Eae,Rsh:Sae,rsqb:Aae,rsquo:Cae,rsquor:kae,rthree:Tae,rtimes:Dae,rtri:Lae,rtrie:Rae,rtrif:Fae,rtriltri:Oae,RuleDelayed:Mae,ruluhar:$ae,rx:Iae,Sacute:Pae,sacute:Nae,sbquo:Bae,scap:zae,Scaron:jae,scaron:Uae,Sc:qae,sc:Hae,sccue:Gae,sce:Vae,scE:Wae,Scedil:Yae,scedil:Xae,Scirc:Zae,scirc:Kae,scnap:Jae,scnE:Qae,scnsim:ele,scpolint:tle,scsim:nle,Scy:rle,scy:ile,sdotb:sle,sdot:ole,sdote:ale,searhk:lle,searr:ule,seArr:cle,searrow:fle,sect:dle,semi:hle,seswar:ple,setminus:mle,setmn:gle,sext:yle,Sfr:vle,sfr:ble,sfrown:xle,sharp:wle,SHCHcy:_le,shchcy:Ele,SHcy:Sle,shcy:Ale,ShortDownArrow:Cle,ShortLeftArrow:kle,shortmid:Tle,shortparallel:Dle,ShortRightArrow:Lle,ShortUpArrow:Rle,shy:Fle,Sigma:Ole,sigma:Mle,sigmaf:$le,sigmav:Ile,sim:Ple,simdot:Nle,sime:Ble,simeq:zle,simg:jle,simgE:Ule,siml:qle,simlE:Hle,simne:Gle,simplus:Vle,simrarr:Wle,slarr:Yle,SmallCircle:Xle,smallsetminus:Zle,smashp:Kle,smeparsl:Jle,smid:Qle,smile:eue,smt:tue,smte:nue,smtes:rue,SOFTcy:iue,softcy:sue,solbar:oue,solb:aue,sol:lue,Sopf:uue,sopf:cue,spades:fue,spadesuit:due,spar:hue,sqcap:pue,sqcaps:mue,sqcup:gue,sqcups:yue,Sqrt:vue,sqsub:bue,sqsube:xue,sqsubset:wue,sqsubseteq:_ue,sqsup:Eue,sqsupe:Sue,sqsupset:Aue,sqsupseteq:Cue,square:kue,Square:Tue,SquareIntersection:Due,SquareSubset:Lue,SquareSubsetEqual:Rue,SquareSuperset:Fue,SquareSupersetEqual:Oue,SquareUnion:Mue,squarf:$ue,squ:Iue,squf:Pue,srarr:Nue,Sscr:Bue,sscr:zue,ssetmn:jue,ssmile:Uue,sstarf:que,Star:Hue,star:Gue,starf:Vue,straightepsilon:Wue,straightphi:Yue,strns:Xue,sub:Zue,Sub:Kue,subdot:Jue,subE:Que,sube:ece,subedot:tce,submult:nce,subnE:rce,subne:ice,subplus:sce,subrarr:oce,subset:ace,Subset:lce,subseteq:uce,subseteqq:cce,SubsetEqual:fce,subsetneq:dce,subsetneqq:hce,subsim:pce,subsub:mce,subsup:gce,succapprox:yce,succ:vce,succcurlyeq:bce,Succeeds:xce,SucceedsEqual:wce,SucceedsSlantEqual:_ce,SucceedsTilde:Ece,succeq:Sce,succnapprox:Ace,succneqq:Cce,succnsim:kce,succsim:Tce,SuchThat:Dce,sum:Lce,Sum:Rce,sung:Fce,sup1:Oce,sup2:Mce,sup3:$ce,sup:Ice,Sup:Pce,supdot:Nce,supdsub:Bce,supE:zce,supe:jce,supedot:Uce,Superset:qce,SupersetEqual:Hce,suphsol:Gce,suphsub:Vce,suplarr:Wce,supmult:Yce,supnE:Xce,supne:Zce,supplus:Kce,supset:Jce,Supset:Qce,supseteq:efe,supseteqq:tfe,supsetneq:nfe,supsetneqq:rfe,supsim:ife,supsub:sfe,supsup:ofe,swarhk:afe,swarr:lfe,swArr:ufe,swarrow:cfe,swnwar:ffe,szlig:dfe,Tab:hfe,target:pfe,Tau:mfe,tau:gfe,tbrk:yfe,Tcaron:vfe,tcaron:bfe,Tcedil:xfe,tcedil:wfe,Tcy:_fe,tcy:Efe,tdot:Sfe,telrec:Afe,Tfr:Cfe,tfr:kfe,there4:Tfe,therefore:Dfe,Therefore:Lfe,Theta:Rfe,theta:Ffe,thetasym:Ofe,thetav:Mfe,thickapprox:$fe,thicksim:Ife,ThickSpace:Pfe,ThinSpace:Nfe,thinsp:Bfe,thkap:zfe,thksim:jfe,THORN:Ufe,thorn:qfe,tilde:Hfe,Tilde:Gfe,TildeEqual:Vfe,TildeFullEqual:Wfe,TildeTilde:Yfe,timesbar:Xfe,timesb:Zfe,times:Kfe,timesd:Jfe,tint:Qfe,toea:ede,topbot:tde,topcir:nde,top:rde,Topf:ide,topf:sde,topfork:ode,tosa:ade,tprime:lde,trade:ude,TRADE:cde,triangle:fde,triangledown:dde,triangleleft:hde,trianglelefteq:pde,triangleq:mde,triangleright:gde,trianglerighteq:yde,tridot:vde,trie:bde,triminus:xde,TripleDot:wde,triplus:_de,trisb:Ede,tritime:Sde,trpezium:Ade,Tscr:Cde,tscr:kde,TScy:Tde,tscy:Dde,TSHcy:Lde,tshcy:Rde,Tstrok:Fde,tstrok:Ode,twixt:Mde,twoheadleftarrow:$de,twoheadrightarrow:Ide,Uacute:Pde,uacute:Nde,uarr:Bde,Uarr:zde,uArr:jde,Uarrocir:Ude,Ubrcy:qde,ubrcy:Hde,Ubreve:Gde,ubreve:Vde,Ucirc:Wde,ucirc:Yde,Ucy:Xde,ucy:Zde,udarr:Kde,Udblac:Jde,udblac:Qde,udhar:ehe,ufisht:the,Ufr:nhe,ufr:rhe,Ugrave:ihe,ugrave:she,uHar:ohe,uharl:ahe,uharr:lhe,uhblk:uhe,ulcorn:che,ulcorner:fhe,ulcrop:dhe,ultri:hhe,Umacr:phe,umacr:mhe,uml:ghe,UnderBar:yhe,UnderBrace:vhe,UnderBracket:bhe,UnderParenthesis:xhe,Union:whe,UnionPlus:_he,Uogon:Ehe,uogon:She,Uopf:Ahe,uopf:Che,UpArrowBar:khe,uparrow:The,UpArrow:Dhe,Uparrow:Lhe,UpArrowDownArrow:Rhe,updownarrow:Fhe,UpDownArrow:Ohe,Updownarrow:Mhe,UpEquilibrium:$he,upharpoonleft:Ihe,upharpoonright:Phe,uplus:Nhe,UpperLeftArrow:Bhe,UpperRightArrow:zhe,upsi:jhe,Upsi:Uhe,upsih:qhe,Upsilon:Hhe,upsilon:Ghe,UpTeeArrow:Vhe,UpTee:Whe,upuparrows:Yhe,urcorn:Xhe,urcorner:Zhe,urcrop:Khe,Uring:Jhe,uring:Qhe,urtri:epe,Uscr:tpe,uscr:npe,utdot:rpe,Utilde:ipe,utilde:spe,utri:ope,utrif:ape,uuarr:lpe,Uuml:upe,uuml:cpe,uwangle:fpe,vangrt:dpe,varepsilon:hpe,varkappa:ppe,varnothing:mpe,varphi:gpe,varpi:ype,varpropto:vpe,varr:bpe,vArr:xpe,varrho:wpe,varsigma:_pe,varsubsetneq:Epe,varsubsetneqq:Spe,varsupsetneq:Ape,varsupsetneqq:Cpe,vartheta:kpe,vartriangleleft:Tpe,vartriangleright:Dpe,vBar:Lpe,Vbar:Rpe,vBarv:Fpe,Vcy:Ope,vcy:Mpe,vdash:$pe,vDash:Ipe,Vdash:Ppe,VDash:Npe,Vdashl:Bpe,veebar:zpe,vee:jpe,Vee:Upe,veeeq:qpe,vellip:Hpe,verbar:Gpe,Verbar:Vpe,vert:Wpe,Vert:Ype,VerticalBar:Xpe,VerticalLine:Zpe,VerticalSeparator:Kpe,VerticalTilde:Jpe,VeryThinSpace:Qpe,Vfr:eme,vfr:tme,vltri:nme,vnsub:rme,vnsup:ime,Vopf:sme,vopf:ome,vprop:ame,vrtri:lme,Vscr:ume,vscr:cme,vsubnE:fme,vsubne:dme,vsupnE:hme,vsupne:pme,Vvdash:mme,vzigzag:gme,Wcirc:yme,wcirc:vme,wedbar:bme,wedge:xme,Wedge:wme,wedgeq:_me,weierp:Eme,Wfr:Sme,wfr:Ame,Wopf:Cme,wopf:kme,wp:Tme,wr:Dme,wreath:Lme,Wscr:Rme,wscr:Fme,xcap:Ome,xcirc:Mme,xcup:$me,xdtri:Ime,Xfr:Pme,xfr:Nme,xharr:Bme,xhArr:zme,Xi:jme,xi:Ume,xlarr:qme,xlArr:Hme,xmap:Gme,xnis:Vme,xodot:Wme,Xopf:Yme,xopf:Xme,xoplus:Zme,xotime:Kme,xrarr:Jme,xrArr:Qme,Xscr:ege,xscr:tge,xsqcup:nge,xuplus:rge,xutri:ige,xvee:sge,xwedge:oge,Yacute:age,yacute:lge,YAcy:uge,yacy:cge,Ycirc:fge,ycirc:dge,Ycy:hge,ycy:pge,yen:mge,Yfr:gge,yfr:yge,YIcy:vge,yicy:bge,Yopf:xge,yopf:wge,Yscr:_ge,yscr:Ege,YUcy:Sge,yucy:Age,yuml:Cge,Yuml:kge,Zacute:Tge,zacute:Dge,Zcaron:Lge,zcaron:Rge,Zcy:Fge,zcy:Oge,Zdot:Mge,zdot:$ge,zeetrf:Ige,ZeroWidthSpace:Pge,Zeta:Nge,zeta:Bge,zfr:zge,Zfr:jge,ZHcy:Uge,zhcy:qge,zigrarr:Hge,zopf:Gge,Zopf:Vge,Zscr:Wge,zscr:Yge,zwj:Xge,zwnj:Zge,default:g9e}),Kge="",Jge="",Qge="",e0e="",t0e="",n0e="",r0e="",i0e="",s0e="",o0e="&",a0e="&",l0e="",u0e="",c0e="",f0e="",d0e="",h0e="",p0e="",m0e="",g0e="",y0e="",v0e="",b0e="",x0e="",w0e="",_0e="",E0e="",S0e="",A0e="",C0e="",k0e="",T0e="",D0e="",L0e="",R0e="",F0e="",O0e="",M0e="",$0e="",I0e="",P0e=">",N0e=">",B0e="",z0e="",j0e="",U0e="",q0e="",H0e="",G0e="",V0e="",W0e="",Y0e="",X0e="",Z0e="<",K0e="<",J0e="",Q0e="",eye="",tye="",nye="",rye="",iye="",sye="",oye="",aye="",lye="",uye="",cye="",fye="",dye="",hye="",pye="",mye="",gye="",yye="",vye="",bye="",xye="",wye="",_ye='"',Eye='"',Sye="",Aye="",Cye="",kye="",Tye="",Dye="",Lye="",Rye="",Fye="",Oye="",Mye="",$ye="",Iye="",Pye="",Nye="",Bye="",zye="",jye="",Uye="",qye="",Hye="",Gye="",Vye="",Wye="",Yye="",v9e={Aacute:Kge,aacute:Jge,Acirc:Qge,acirc:e0e,acute:t0e,AElig:n0e,aelig:r0e,Agrave:i0e,agrave:s0e,amp:o0e,AMP:a0e,Aring:l0e,aring:u0e,Atilde:c0e,atilde:f0e,Auml:d0e,auml:h0e,brvbar:p0e,Ccedil:m0e,ccedil:g0e,cedil:y0e,cent:v0e,copy:b0e,COPY:x0e,curren:w0e,deg:_0e,divide:E0e,Eacute:S0e,eacute:A0e,Ecirc:C0e,ecirc:k0e,Egrave:T0e,egrave:D0e,ETH:L0e,eth:R0e,Euml:F0e,euml:O0e,frac12:M0e,frac14:$0e,frac34:I0e,gt:P0e,GT:N0e,Iacute:B0e,iacute:z0e,Icirc:j0e,icirc:U0e,iexcl:q0e,Igrave:H0e,igrave:G0e,iquest:V0e,Iuml:W0e,iuml:Y0e,laquo:X0e,lt:Z0e,LT:K0e,macr:J0e,micro:Q0e,middot:eye,nbsp:tye,not:nye,Ntilde:rye,ntilde:iye,Oacute:sye,oacute:oye,Ocirc:aye,ocirc:lye,Ograve:uye,ograve:cye,ordf:fye,ordm:dye,Oslash:hye,oslash:pye,Otilde:mye,otilde:gye,Ouml:yye,ouml:vye,para:bye,plusmn:xye,pound:wye,quot:_ye,QUOT:Eye,raquo:Sye,reg:Aye,REG:Cye,sect:kye,shy:Tye,sup1:Dye,sup2:Lye,sup3:Rye,szlig:Fye,THORN:Oye,thorn:Mye,times:$ye,Uacute:Iye,uacute:Pye,Ucirc:Nye,ucirc:Bye,Ugrave:zye,ugrave:jye,uml:Uye,Uuml:qye,uuml:Hye,Yacute:Gye,yacute:Vye,yen:Wye,yuml:Yye},b9e=Object.freeze({__proto__:null,Aacute:Kge,aacute:Jge,Acirc:Qge,acirc:e0e,acute:t0e,AElig:n0e,aelig:r0e,Agrave:i0e,agrave:s0e,amp:o0e,AMP:a0e,Aring:l0e,aring:u0e,Atilde:c0e,atilde:f0e,Auml:d0e,auml:h0e,brvbar:p0e,Ccedil:m0e,ccedil:g0e,cedil:y0e,cent:v0e,copy:b0e,COPY:x0e,curren:w0e,deg:_0e,divide:E0e,Eacute:S0e,eacute:A0e,Ecirc:C0e,ecirc:k0e,Egrave:T0e,egrave:D0e,ETH:L0e,eth:R0e,Euml:F0e,euml:O0e,frac12:M0e,frac14:$0e,frac34:I0e,gt:P0e,GT:N0e,Iacute:B0e,iacute:z0e,Icirc:j0e,icirc:U0e,iexcl:q0e,Igrave:H0e,igrave:G0e,iquest:V0e,Iuml:W0e,iuml:Y0e,laquo:X0e,lt:Z0e,LT:K0e,macr:J0e,micro:Q0e,middot:eye,nbsp:tye,not:nye,Ntilde:rye,ntilde:iye,Oacute:sye,oacute:oye,Ocirc:aye,ocirc:lye,Ograve:uye,ograve:cye,ordf:fye,ordm:dye,Oslash:hye,oslash:pye,Otilde:mye,otilde:gye,Ouml:yye,ouml:vye,para:bye,plusmn:xye,pound:wye,quot:_ye,QUOT:Eye,raquo:Sye,reg:Aye,REG:Cye,sect:kye,shy:Tye,sup1:Dye,sup2:Lye,sup3:Rye,szlig:Fye,THORN:Oye,thorn:Mye,times:$ye,Uacute:Iye,uacute:Pye,Ucirc:Nye,ucirc:Bye,Ugrave:zye,ugrave:jye,uml:Uye,Uuml:qye,uuml:Hye,Yacute:Gye,yacute:Vye,yen:Wye,yuml:Yye,default:v9e}),Xye="&",Zye="'",Kye=">",Jye="<",Qye='"',x9e={amp:Xye,apos:Zye,gt:Kye,lt:Jye,quot:Qye},w9e=Object.freeze({__proto__:null,amp:Xye,apos:Zye,gt:Kye,lt:Jye,quot:Qye,default:x9e}),_9e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},E9e=Object.freeze({__proto__:null,default:_9e}),S9e=v(E9e),eve=g(function(G,ue){var Ae=h&&h.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(S9e);function ft(lt){if(lt>=55296&&lt<=57343||lt>1114111)return"";lt in Fe.default&&(lt=Fe.default[lt]);var xn="";return lt>65535&&(lt-=65536,xn+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|lt&1023),xn+=String.fromCharCode(lt),xn}ue.default=ft});p(eve);var tve=v(y9e),A9e=v(b9e),nve=v(w9e),Sd=g(function(G,ue){var Ae=h&&h.__importDefault||function(br){return br&&br.__esModule?br:{default:br}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(tve),ft=Ae(A9e),lt=Ae(nve),xn=Ae(eve);ue.decodeXML=jt(lt.default),ue.decodeHTMLStrict=jt(Fe.default);function jt(br){var xr=Object.keys(br).join("|"),ei=Vr(br);xr+="|#[xX][\\da-fA-F]+|#\\d+";var ti=new RegExp("&(?:"+xr+");","g");return function(co){return String(co).replace(ti,ei)}}var On=function(br,xr){return br<xr?1:-1};ue.decodeHTML=function(){for(var br=Object.keys(ft.default).sort(On),xr=Object.keys(Fe.default).sort(On),ei=0,ti=0;ei<xr.length;ei++)br[ti]===xr[ei]?(xr[ei]+=";?",ti++):xr[ei]+=";";var co=new RegExp("&(?:"+xr.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Qm=Vr(Fe.default);function tF(eg){return eg.substr(-1)!==";"&&(eg+=";"),Qm(eg)}return function(eg){return String(eg).replace(co,tF)}}();function Vr(br){return function(ei){return ei.charAt(1)==="#"?ei.charAt(2)==="X"||ei.charAt(2)==="x"?xn.default(parseInt(ei.substr(3),16)):xn.default(parseInt(ei.substr(2),10)):br[ei.slice(1,-1)]}}});p(Sd),Sd.decodeXML,Sd.decodeHTMLStrict,Sd.decodeHTML;var Xm=g(function(G,ue){var Ae=h&&h.__importDefault||function(So){return So&&So.__esModule?So:{default:So}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Ae(nve),ft=Vr(Fe.default),lt=br(ft);ue.encodeXML=Qm(ft,lt);var xn=Ae(tve),jt=Vr(xn.default),On=br(jt);ue.encodeHTML=Qm(jt,On);function Vr(So){return Object.keys(So).sort().reduce(function(Jh,nf){return Jh[So[nf]]="&"+nf+";",Jh},{})}function br(So){var Jh=[],nf=[];return Object.keys(So).forEach(function(tg){return tg.length===1?Jh.push("\\"+tg):nf.push(tg)}),nf.unshift("["+Jh.join("")+"]"),new RegExp(nf.join("|"),"g")}var xr=/[^\0-\x7F]/g,ei=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function ti(So){return"&#x"+So.charCodeAt(0).toString(16).toUpperCase()+";"}function co(So,Jh){var nf=So.charCodeAt(0),tg=So.charCodeAt(1),KBe=(nf-55296)*1024+tg-56320+65536;return"&#x"+KBe.toString(16).toUpperCase()+";"}function Qm(So,Jh){return function(nf){return nf.replace(Jh,function(tg){return So[tg]}).replace(ei,co).replace(xr,ti)}}var tF=br(ft);function eg(So){return So.replace(tF,ti).replace(ei,co).replace(xr,ti)}ue.escape=eg});p(Xm),Xm.encodeXML,Xm.encodeHTML,Xm.escape;var Ho=g(function(G,ue){Object.defineProperty(ue,"__esModule",{value:!0});function Ae(jt,On){return(!On||On<=0?Sd.decodeXML:Sd.decodeHTML)(jt)}ue.decode=Ae;function Fe(jt,On){return(!On||On<=0?Sd.decodeXML:Sd.decodeHTMLStrict)(jt)}ue.decodeStrict=Fe;function ft(jt,On){return(!On||On<=0?Xm.encodeXML:Xm.encodeHTML)(jt)}ue.encode=ft;var lt=Xm;ue.encodeXML=lt.encodeXML,ue.encodeHTML=lt.encodeHTML,ue.escape=lt.escape,ue.encodeHTML4=lt.encodeHTML,ue.encodeHTML5=lt.encodeHTML;var xn=Sd;ue.decodeXML=xn.decodeXML,ue.decodeHTML=xn.decodeHTML,ue.decodeHTMLStrict=xn.decodeHTMLStrict,ue.decodeHTML4=xn.decodeHTML,ue.decodeHTML5=xn.decodeHTML,ue.decodeHTML4Strict=xn.decodeHTMLStrict,ue.decodeHTML5Strict=xn.decodeHTMLStrict,ue.decodeXMLStrict=xn.decodeXML});p(Ho),Ho.decode,Ho.decodeStrict,Ho.encode,Ho.encodeXML,Ho.encodeHTML,Ho.escape,Ho.encodeHTML4,Ho.encodeHTML5,Ho.decodeXML;var rve=Ho.decodeHTML;Ho.decodeHTMLStrict,Ho.decodeHTML4,Ho.decodeHTML5,Ho.decodeHTML4Strict,Ho.decodeHTML5Strict,Ho.decodeXMLStrict;var C9e=92,ive="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",sve="[A-Za-z][A-Za-z0-9-]*",k9e="[a-zA-Z_:][a-zA-Z0-9:._-]*",T9e="[^\"'=<>`\\x00-\\x20]+",D9e="'[^']*'",L9e='"[^"]*"',R9e="(?:"+T9e+"|"+D9e+"|"+L9e+")",F9e="(?:\\s*=\\s*"+R9e+")",O9e="(?:\\s+"+k9e+F9e+"?)",ove="<"+sve+O9e+"*\\s*/?>",ave="</"+sve+"\\s*[>]",M9e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",$9e="[<][?][\\s\\S]*?[?][>]",I9e="<![A-Z]+\\s+[^>]*>",P9e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",N9e="(?:"+ove+"|"+ave+"|"+M9e+"|"+$9e+"|"+I9e+"|"+P9e+")",B9e=new RegExp("^"+N9e),z9e=/[\\&]/,lve="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",j9e=new RegExp("\\\\"+lve+"|"+ive,"gi"),U9e='[&<>"]',uve=new RegExp(U9e,"g"),q9e=function(G){return G.charCodeAt(0)===C9e?G.charAt(1):rve(G)},cve=function(G){return z9e.test(G)?G.replace(j9e,q9e):G},H9e=function(G){try{return d(G)}catch{return G}},G9e=function(G){switch(G){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return G}},fve=function(G){return uve.test(G)?G.replace(uve,G9e):G};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var XR;function ZR(G){return XR(G)}if(String.fromCodePoint)XR=function(G){try{return String.fromCodePoint(G)}catch(ue){if(ue instanceof RangeError)return"";throw ue}};else{var V9e=String.fromCharCode,W9e=Math.floor;XR=function(){var G=16384,ue=[],Ae,Fe,ft=-1,lt=arguments.length;if(!lt)return"";for(var xn="";++ft<lt;){var jt=Number(arguments[ft]);if(!isFinite(jt)||jt<0||jt>1114111||W9e(jt)!==jt)return"";jt<=65535?ue.push(jt):(jt-=65536,Ae=(jt>>10)+55296,Fe=jt%1024+56320,ue.push(Ae,Fe)),(ft+1===lt||ue.length>G)&&(xn+=V9e.apply(null,ue),ue.length=0)}return xn}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var G=function(){try{var Ae={},Fe=Object.defineProperty,ft=Fe(Ae,Ae,Ae)&&Fe}catch{}return ft}(),ue=function(Ae){if(this==null)throw TypeError();var Fe=String(this),ft=Ae?Number(Ae):0;if(ft!=ft&&(ft=0),ft<0||ft==1/0)throw RangeError();for(var lt="";ft;)ft%2==1&&(lt+=Fe),ft>1&&(Fe+=Fe),ft>>=1;return lt};G?G(String.prototype,"repeat",{value:ue,configurable:!0,writable:!0}):String.prototype.repeat=ue}();var ZS=H9e,KR=cve,dve=10,JR=42,KS=95,Y9e=96,hve=91,X9e=93,pve=60,Z9e=33,mve=92,K9e=38,gve=40,QR=41,J9e=58,Zm=39,Km=34,yve=lve,eF="\\\\"+yve,Q9e=ive,e7e=B9e,vve=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),t7e=new RegExp('^(?:"('+eF+`|[^"\\x00])*"|'(`+eF+"|[^'\\x00])*'|\\(("+eF+"|[^()\\x00])*\\))"),n7e=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,bve=new RegExp("^"+yve),r7e=new RegExp("^"+Q9e,"i"),i7e=/`+/,s7e=/^`+/,o7e=/\.\.\./g,a7e=/--+/g,l7e=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,u7e=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,c7e=/^ *(?:\n *)?/,xve=/^[ \t\n\x0b\x0c\x0d]/,wve=/^\s/,f7e=/ *$/,d7e=/^ */,_ve=/^ *(?:\n|$)/,h7e=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,p7e=/^[^\n`\[\]\\!<&*_'"]+/m,pa=function(G){var ue=new a("text");return ue._literal=G,ue},Eve=function(G){return G.slice(1,G.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},m7e=function(G){var ue=G.exec(this.subject.slice(this.pos));return ue===null?null:(this.pos+=ue.index+ue[0].length,ue[0])},g7e=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},y7e=function(){return this.match(c7e),!0},v7e=function(G){var ue=this.match(s7e);if(ue===null)return!1;for(var Ae=this.pos,Fe,ft,lt;(Fe=this.match(i7e))!==null;)if(Fe===ue)return ft=new a("code"),lt=this.subject.slice(Ae,this.pos-ue.length).replace(/\n/gm," "),lt.length>0&&lt.match(/[^ ]/)!==null&&lt[0]==" "&&lt[lt.length-1]==" "?ft._literal=lt.slice(1,lt.length-1):ft._literal=lt,G.appendChild(ft),!0;return this.pos=Ae,G.appendChild(pa(ue)),!0},b7e=function(G){var ue=this.subject,Ae;return this.pos+=1,this.peek()===dve?(this.pos+=1,Ae=new a("linebreak"),G.appendChild(Ae)):bve.test(ue.charAt(this.pos))?(G.appendChild(pa(ue.charAt(this.pos))),this.pos+=1):G.appendChild(pa("\\")),!0},x7e=function(G){var ue,Ae,Fe;return(ue=this.match(l7e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=ZS("mailto:"+Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):(ue=this.match(u7e))?(Ae=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=ZS(Ae),Fe._title="",Fe.appendChild(pa(Ae)),G.appendChild(Fe),!0):!1},w7e=function(G){var ue=this.match(e7e);if(ue===null)return!1;var Ae=new a("html_inline");return Ae._literal=ue,G.appendChild(Ae),!0},_7e=function(G){var ue=0,Ae,Fe,ft,lt=this.pos,xn,jt,On,Vr,br,xr,ei,ti;if(G===Zm||G===Km)ue++,this.pos++;else for(;this.peek()===G;)ue++,this.pos++;return ue===0?null:(Ae=lt===0?`
`:this.subject.charAt(lt-1),ft=this.peek(),ft===-1?Fe=`
`:Fe=ZR(ft),br=wve.test(Fe),xr=vve.test(Fe),ei=wve.test(Ae),ti=vve.test(Ae),xn=!br&&(!xr||ei||ti),jt=!ei&&(!ti||br||xr),G===KS?(On=xn&&(!jt||ti),Vr=jt&&(!xn||xr)):G===Zm||G===Km?(On=xn&&!jt,Vr=jt):(On=xn,Vr=jt),this.pos=lt,{numdelims:ue,can_open:On,can_close:Vr})},E7e=function(G,ue){var Ae=this.scanDelims(G);if(!Ae)return!1;var Fe=Ae.numdelims,ft=this.pos,lt;this.pos+=Fe,G===Zm?lt="":G===Km?lt="":lt=this.subject.slice(ft,this.pos);var xn=pa(lt);return ue.appendChild(xn),(Ae.can_open||Ae.can_close)&&(this.options.smart||G!==Zm&&G!==Km)&&(this.delimiters={cc:G,numdelims:Fe,origdelims:Fe,node:xn,previous:this.delimiters,next:null,can_open:Ae.can_open,can_close:Ae.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},S7e=function(G){G.previous!==null&&(G.previous.next=G.next),G.next===null?this.delimiters=G.previous:G.next.previous=G.previous},A7e=function(G,ue){G.next!==ue&&(G.next=ue,ue.previous=G)},C7e=function(G){for(var ue,Ae,Fe,ft,lt,xn,jt,On,Vr,br,xr=[[],[],[]],ei=!1,ti=0;ti<3;ti++)xr[ti][KS]=G,xr[ti][JR]=G,xr[ti][Zm]=G,xr[ti][Km]=G;for(Ae=this.delimiters;Ae!==null&&Ae.previous!==G;)Ae=Ae.previous;for(;Ae!==null;){var co=Ae.cc;if(!Ae.can_close)Ae=Ae.next;else{for(ue=Ae.previous,br=!1;ue!==null&&ue!==G&&ue!==xr[Ae.origdelims%3][co];){if(ei=(Ae.can_open||ue.can_close)&&Ae.origdelims%3!==0&&(ue.origdelims+Ae.origdelims)%3===0,ue.cc===Ae.cc&&ue.can_open&&!ei){br=!0;break}ue=ue.previous}if(Fe=Ae,co===JR||co===KS)if(!br)Ae=Ae.next;else{jt=Ae.numdelims>=2&&ue.numdelims>=2?2:1,ft=ue.node,lt=Ae.node,ue.numdelims-=jt,Ae.numdelims-=jt,ft._literal=ft._literal.slice(0,ft._literal.length-jt),lt._literal=lt._literal.slice(0,lt._literal.length-jt);var Qm=new a(jt===1?"emph":"strong");for(On=ft._next;On&&On!==lt;)Vr=On._next,On.unlink(),Qm.appendChild(On),On=Vr;ft.insertAfter(Qm),A7e(ue,Ae),ue.numdelims===0&&(ft.unlink(),this.removeDelimiter(ue)),Ae.numdelims===0&&(lt.unlink(),xn=Ae.next,this.removeDelimiter(Ae),Ae=xn)}else co===Zm?(Ae.node._literal="",br&&(ue.node._literal=""),Ae=Ae.next):co===Km&&(Ae.node._literal="",br&&(ue.node.literal=""),Ae=Ae.next);br||(xr[Fe.origdelims%3][co]=Fe.previous,Fe.can_open||this.removeDelimiter(Fe))}}for(;this.delimiters!==null&&this.delimiters!==G;)this.removeDelimiter(this.delimiters)},k7e=function(){var G=this.match(t7e);return G===null?null:KR(G.substr(1,G.length-2))},T7e=function(){var G=this.match(n7e);if(G===null){if(this.peek()===pve)return null;for(var ue=this.pos,Ae=0,Fe;(Fe=this.peek())!==-1;)if(Fe===mve&&bve.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Fe===gve)this.pos+=1,Ae+=1;else if(Fe===QR){if(Ae<1)break;this.pos+=1,Ae-=1}else{if(xve.exec(ZR(Fe))!==null)break;this.pos+=1}return this.pos===ue&&Fe!==QR||Ae!==0?null:(G=this.subject.substr(ue,this.pos-ue),ZS(KR(G)))}else return ZS(KR(G.substr(1,G.length-2)))},D7e=function(){var G=this.match(h7e);return G===null||G.length>1001?0:G.length},L7e=function(G){var ue=this.pos;this.pos+=1;var Ae=pa("[");return G.appendChild(Ae),this.addBracket(Ae,ue,!1),!0},R7e=function(G){var ue=this.pos;if(this.pos+=1,this.peek()===hve){this.pos+=1;var Ae=pa("![");G.appendChild(Ae),this.addBracket(Ae,ue+1,!0)}else G.appendChild(pa("!"));return!0},F7e=function(G){var ue,Ae,Fe,ft,lt=!1,xn,jt;if(this.pos+=1,ue=this.pos,jt=this.brackets,jt===null)return G.appendChild(pa("]")),!0;if(!jt.active)return G.appendChild(pa("]")),this.removeBracket(),!0;Ae=jt.image;var On=this.pos;if(this.peek()===gve&&(this.pos++,this.spnl()&&(Fe=this.parseLinkDestination())!==null&&this.spnl()&&(xve.test(this.subject.charAt(this.pos-1))&&(ft=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===QR?(this.pos+=1,lt=!0):this.pos=On),!lt){var Vr=this.pos,br=this.parseLinkLabel();if(br>2?xn=this.subject.slice(Vr,Vr+br):jt.bracketAfter||(xn=this.subject.slice(jt.index,ue)),br===0&&(this.pos=On),xn){var xr=this.refmap[Eve(xn)];xr&&(Fe=xr.destination,ft=xr.title,lt=!0)}}if(lt){var ei=new a(Ae?"image":"link");ei._destination=Fe,ei._title=ft||"";var ti,co;for(ti=jt.node._next;ti;)co=ti._next,ti.unlink(),ei.appendChild(ti),ti=co;if(G.appendChild(ei),this.processEmphasis(jt.previousDelimiter),this.removeBracket(),jt.node.unlink(),!Ae)for(jt=this.brackets;jt!==null;)jt.image||(jt.active=!1),jt=jt.previous;return!0}else return this.removeBracket(),this.pos=ue,G.appendChild(pa("]")),!0},O7e=function(G,ue,Ae){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:G,previous:this.brackets,previousDelimiter:this.delimiters,index:ue,image:Ae,active:!0}},M7e=function(){this.brackets=this.brackets.previous},$7e=function(G){var ue;return(ue=this.match(r7e))?(G.appendChild(pa(rve(ue))),!0):!1},I7e=function(G){var ue;return(ue=this.match(p7e))?(this.options.smart?G.appendChild(pa(ue.replace(o7e,"").replace(a7e,function(Ae){var Fe=0,ft=0;return Ae.length%3===0?ft=Ae.length/3:Ae.length%2===0?Fe=Ae.length/2:Ae.length%3===2?(Fe=1,ft=(Ae.length-2)/3):(Fe=2,ft=(Ae.length-4)/3),"".repeat(ft)+"".repeat(Fe)}))):G.appendChild(pa(ue)),!0):!1},P7e=function(G){this.pos+=1;var ue=G._lastChild;if(ue&&ue.type==="text"&&ue._literal[ue._literal.length-1]===" "){var Ae=ue._literal[ue._literal.length-2]===" ";ue._literal=ue._literal.replace(f7e,""),G.appendChild(new a(Ae?"linebreak":"softbreak"))}else G.appendChild(new a("softbreak"));return this.match(d7e),!0},N7e=function(G,ue){this.subject=G,this.pos=0;var Ae,Fe,ft,lt,xn=this.pos;if(lt=this.parseLinkLabel(),lt===0)return 0;if(Ae=this.subject.substr(0,lt),this.peek()===J9e)this.pos++;else return this.pos=xn,0;if(this.spnl(),Fe=this.parseLinkDestination(),Fe===null)return this.pos=xn,0;var jt=this.pos;this.spnl(),this.pos!==jt&&(ft=this.parseLinkTitle()),ft===null&&(ft="",this.pos=jt);var On=!0;if(this.match(_ve)===null&&(ft===""?On=!1:(ft="",this.pos=jt,On=this.match(_ve)!==null)),!On)return this.pos=xn,0;var Vr=Eve(Ae);return Vr===""?(this.pos=xn,0):(ue[Vr]||(ue[Vr]={destination:Fe,title:ft}),this.pos-xn)},B7e=function(G){var ue=!1,Ae=this.peek();if(Ae===-1)return!1;switch(Ae){case dve:ue=this.parseNewline(G);break;case mve:ue=this.parseBackslash(G);break;case Y9e:ue=this.parseBackticks(G);break;case JR:case KS:ue=this.handleDelim(Ae,G);break;case Zm:case Km:ue=this.options.smart&&this.handleDelim(Ae,G);break;case hve:ue=this.parseOpenBracket(G);break;case Z9e:ue=this.parseBang(G);break;case X9e:ue=this.parseCloseBracket(G);break;case pve:ue=this.parseAutolink(G)||this.parseHtmlTag(G);break;case K9e:ue=this.parseEntity(G);break;default:ue=this.parseString(G);break}return ue||(this.pos+=1,G.appendChild(pa(ZR(Ae)))),!0},z7e=function(G){for(this.subject=G._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(G););G._string_content=null,this.processEmphasis(null)};function j7e(G){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:m7e,peek:g7e,spnl:y7e,parseBackticks:v7e,parseBackslash:b7e,parseAutolink:x7e,parseHtmlTag:w7e,scanDelims:_7e,handleDelim:E7e,parseLinkTitle:k7e,parseLinkDestination:T7e,parseLinkLabel:D7e,parseOpenBracket:L7e,parseBang:R7e,parseCloseBracket:F7e,addBracket:O7e,removeBracket:M7e,parseEntity:$7e,parseString:I7e,parseNewline:P7e,parseReference:N7e,parseInline:B7e,processEmphasis:C7e,removeDelimiter:S7e,options:G||{},parse:z7e}}var JS=4,Sve=9,U7e=10,Ave=62,q7e=60,Cve=32,kve=91,H7e=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+ove+"|"+ave+")\\s*$","i")],G7e=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],V7e=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,W7e=/^[#`~*+_=<>0-9-]/,Tve=/[^ \t\f\v\r\n]/,Y7e=/^[*+-]/,X7e=/^(\d{1,9})([.)])/,Z7e=/^#{1,6}(?:[ \t]+|$)/,K7e=/^`{3,}(?!.*`)|^~{3,}/,J7e=/^(?:`{3,}|~{3,})(?= *$)/,Q7e=/^(?:=+|-+)[ \t]*$/,eBe=/\r\n|\n|\r/,tBe=function(G){return!Tve.test(G)},rw=function(G){return G===Cve||G===Sve},mu=function(G,ue){return ue<G.length?G.charCodeAt(ue):-1},Dve=function(G){for(;G;){if(G._lastLineBlank)return!0;var ue=G.type;if(!G._lastLineChecked&&(ue==="list"||ue==="item"))G._lastLineChecked=!0,G=G._lastChild;else{G._lastLineChecked=!0;break}}return!1},nBe=function(){if(this.partiallyConsumedTab){this.offset+=1;var G=4-this.column%4;this.tip._string_content+=" ".repeat(G)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},rBe=function(G,ue){for(;!this.blocks[this.tip.type].canContain(G);)this.finalize(this.tip,this.lineNumber-1);var Ae=ue+1,Fe=new a(G,[[this.lineNumber,Ae],[0,0]]);return Fe._string_content="",this.tip.appendChild(Fe),this.tip=Fe,Fe},iBe=function(G,ue){var Ae=G.currentLine.slice(G.nextNonspace),Fe,ft,lt,xn,jt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:G.indent};if(G.indent>=4)return null;if(Fe=Ae.match(Y7e))jt.type="bullet",jt.bulletChar=Fe[0][0];else if((Fe=Ae.match(X7e))&&(ue.type!=="paragraph"||Fe[1]==="1"))jt.type="ordered",jt.start=parseInt(Fe[1]),jt.delimiter=Fe[2];else return null;if(ft=mu(G.currentLine,G.nextNonspace+Fe[0].length),!(ft===-1||ft===Sve||ft===Cve)||ue.type==="paragraph"&&!G.currentLine.slice(G.nextNonspace+Fe[0].length).match(Tve))return null;G.advanceNextNonspace(),G.advanceOffset(Fe[0].length,!0),lt=G.column,xn=G.offset;do G.advanceOffset(1,!0),ft=mu(G.currentLine,G.offset);while(G.column-lt<5&&rw(ft));var On=mu(G.currentLine,G.offset)===-1,Vr=G.column-lt;return Vr>=5||Vr<1||On?(jt.padding=Fe[0].length+1,G.column=lt,G.offset=xn,rw(mu(G.currentLine,G.offset))&&G.advanceOffset(1,!0)):jt.padding=Fe[0].length+Vr,jt},sBe=function(G,ue){return G.type===ue.type&&G.delimiter===ue.delimiter&&G.bulletChar===ue.bulletChar},oBe=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var G=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=G}this.allClosed=!0}},Lve={document:{continue:function(){return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(G,ue){for(var Ae=ue._firstChild;Ae;){if(Dve(Ae)&&Ae._next){ue._listData.tight=!1;break}for(var Fe=Ae._firstChild;Fe;){if(Dve(Fe)&&(Ae._next||Fe._next)){ue._listData.tight=!1;break}Fe=Fe._next}Ae=Ae._next}},canContain:function(G){return G==="item"},acceptsLines:!1},block_quote:{continue:function(G){var ue=G.currentLine;if(!G.indented&&mu(ue,G.nextNonspace)===Ave)G.advanceNextNonspace(),G.advanceOffset(1,!1),rw(mu(ue,G.offset))&&G.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},item:{continue:function(G,ue){if(G.blank){if(ue._firstChild==null)return 1;G.advanceNextNonspace()}else if(G.indent>=ue._listData.markerOffset+ue._listData.padding)G.advanceOffset(ue._listData.markerOffset+ue._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(G,ue){var Ae=G.currentLine,Fe=G.indent;if(ue._isFenced){var ft=Fe<=3&&Ae.charAt(G.nextNonspace)===ue._fenceChar&&Ae.slice(G.nextNonspace).match(J7e);if(ft&&ft[0].length>=ue._fenceLength)return G.lastLineLength=G.offset+Fe+ft[0].length,G.finalize(ue,G.lineNumber),2;for(var lt=ue._fenceOffset;lt>0&&rw(mu(Ae,G.offset));)G.advanceOffset(1,!0),lt--}else if(Fe>=JS)G.advanceOffset(JS,!0);else if(G.blank)G.advanceNextNonspace();else return 1;return 0},finalize:function(G,ue){if(ue._isFenced){var Ae=ue._string_content,Fe=Ae.indexOf(`
`),ft=Ae.slice(0,Fe),lt=Ae.slice(Fe+1);ue.info=cve(ft.trim()),ue._literal=lt}else ue._literal=ue._string_content.replace(/(\n *)+$/,`
`);ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(G,ue){return G.blank&&(ue._htmlBlockType===6||ue._htmlBlockType===7)?1:0},finalize:function(G,ue){ue._literal=ue._string_content.replace(/(\n *)+$/,""),ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(G){return G.blank?1:0},finalize:function(G,ue){for(var Ae,Fe=!1;mu(ue._string_content,0)===kve&&(Ae=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Ae),Fe=!0;Fe&&tBe(ue._string_content)&&ue.unlink()},canContain:function(){return!1},acceptsLines:!0}},aBe=[function(G){return!G.indented&&mu(G.currentLine,G.nextNonspace)===Ave?(G.advanceNextNonspace(),G.advanceOffset(1,!1),rw(mu(G.currentLine,G.offset))&&G.advanceOffset(1,!0),G.closeUnmatchedBlocks(),G.addChild("block_quote",G.nextNonspace),1):0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(Z7e))){G.advanceNextNonspace(),G.advanceOffset(ue[0].length,!1),G.closeUnmatchedBlocks();var Ae=G.addChild("heading",G.nextNonspace);return Ae.level=ue[0].trim().length,Ae._string_content=G.currentLine.slice(G.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),G.advanceOffset(G.currentLine.length-G.offset),2}else return 0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(K7e))){var Ae=ue[0].length;G.closeUnmatchedBlocks();var Fe=G.addChild("code_block",G.nextNonspace);return Fe._isFenced=!0,Fe._fenceLength=Ae,Fe._fenceChar=ue[0][0],Fe._fenceOffset=G.indent,G.advanceNextNonspace(),G.advanceOffset(Ae,!1),2}else return 0},function(G,ue){if(!G.indented&&mu(G.currentLine,G.nextNonspace)===q7e){var Ae=G.currentLine.slice(G.nextNonspace),Fe;for(Fe=1;Fe<=7;Fe++)if(H7e[Fe].test(Ae)&&(Fe<7||ue.type!=="paragraph")){G.closeUnmatchedBlocks();var ft=G.addChild("html_block",G.offset);return ft._htmlBlockType=Fe,2}}return 0},function(G,ue){var Ae;if(!G.indented&&ue.type==="paragraph"&&(Ae=G.currentLine.slice(G.nextNonspace).match(Q7e))){G.closeUnmatchedBlocks();for(var Fe;mu(ue._string_content,0)===kve&&(Fe=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Fe);if(ue._string_content.length>0){var ft=new a("heading",ue.sourcepos);return ft.level=Ae[0][0]==="="?1:2,ft._string_content=ue._string_content,ue.insertAfter(ft),ue.unlink(),G.tip=ft,G.advanceOffset(G.currentLine.length-G.offset,!1),2}else return 0}else return 0},function(G){return!G.indented&&V7e.test(G.currentLine.slice(G.nextNonspace))?(G.closeUnmatchedBlocks(),G.addChild("thematic_break",G.nextNonspace),G.advanceOffset(G.currentLine.length-G.offset,!1),2):0},function(G,ue){var Ae;return(!G.indented||ue.type==="list")&&(Ae=iBe(G,ue))?(G.closeUnmatchedBlocks(),(G.tip.type!=="list"||!sBe(ue._listData,Ae))&&(ue=G.addChild("list",G.nextNonspace),ue._listData=Ae),ue=G.addChild("item",G.nextNonspace),ue._listData=Ae,1):0},function(G){return G.indented&&G.tip.type!=="paragraph"&&!G.blank?(G.advanceOffset(JS,!0),G.closeUnmatchedBlocks(),G.addChild("code_block",G.offset),2):0}],lBe=function(G,ue){for(var Ae=this.currentLine,Fe,ft,lt;G>0&&(lt=Ae[this.offset]);)lt==="	"?(Fe=4-this.column%4,ue?(this.partiallyConsumedTab=Fe>G,ft=Fe>G?G:Fe,this.column+=ft,this.offset+=this.partiallyConsumedTab?0:1,G-=ft):(this.partiallyConsumedTab=!1,this.column+=Fe,this.offset+=1,G-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,G-=1)},uBe=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},cBe=function(){for(var G=this.currentLine,ue=this.offset,Ae=this.column,Fe;(Fe=G.charAt(ue))!=="";)if(Fe===" ")ue++,Ae++;else if(Fe==="	")ue++,Ae+=4-Ae%4;else break;this.blank=Fe===`
`||Fe==="\r"||Fe==="",this.nextNonspace=ue,this.nextNonspaceColumn=Ae,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=JS},fBe=function(G){var ue=!0,Ae,Fe=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,G.indexOf("\0")!==-1&&(G=G.replace(/\0/g,"")),this.currentLine=G;for(var ft;(ft=Fe._lastChild)&&ft._open;){switch(Fe=ft,this.findNextNonspace(),this.blocks[Fe.type].continue(this,Fe)){case 0:break;case 1:ue=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ue){Fe=Fe._parent;break}}this.allClosed=Fe===this.oldtip,this.lastMatchedContainer=Fe;for(var lt=Fe.type!=="paragraph"&&Lve[Fe.type].acceptsLines,xn=this.blockStarts,jt=xn.length;!lt;){if(this.findNextNonspace(),!this.indented&&!W7e.test(G.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var On=0;On<jt;){var Vr=xn[On](this,Fe);if(Vr===1){Fe=this.tip;break}else if(Vr===2){Fe=this.tip,lt=!0;break}else On++}if(On===jt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Fe.lastChild&&(Fe.lastChild._lastLineBlank=!0),Ae=Fe.type;for(var br=this.blank&&!(Ae==="block_quote"||Ae==="code_block"&&Fe._isFenced||Ae==="item"&&!Fe._firstChild&&Fe.sourcepos[0][0]===this.lineNumber),xr=Fe;xr;)xr._lastLineBlank=br,xr=xr._parent;this.blocks[Ae].acceptsLines?(this.addLine(),Ae==="html_block"&&Fe._htmlBlockType>=1&&Fe._htmlBlockType<=5&&G7e[Fe._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=G.length,this.finalize(Fe,this.lineNumber))):this.offset<G.length&&!this.blank&&(Fe=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=G.length},dBe=function(G,ue){var Ae=G._parent;G._open=!1,G.sourcepos[1]=[ue,this.lastLineLength],this.blocks[G.type].finalize(this,G),this.tip=Ae},hBe=function(G){var ue,Ae,Fe,ft=G.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Ae=ft.next();)ue=Ae.node,Fe=ue.type,!Ae.entering&&(Fe==="paragraph"||Fe==="heading")&&this.inlineParser.parse(ue)},Rve=function(){var G=new a("document",[[1,1],[0,0]]);return G},pBe=function(G){this.doc=new Rve,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ue=G.split(eBe),Ae=ue.length;G.charCodeAt(G.length-1)===U7e&&(Ae-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Fe=0;Fe<Ae;Fe++)this.incorporateLine(ue[Fe]);for(;this.tip;)this.finalize(this.tip,Ae);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function mBe(G){return{doc:new Rve,blocks:Lve,blockStarts:aBe,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new j7e(G),findNextNonspace:cBe,advanceOffset:lBe,advanceNextNonspace:uBe,addLine:nBe,addChild:rBe,incorporateLine:fBe,finalize:dBe,processInlines:hBe,closeUnmatchedBlocks:oBe,parse:pBe,options:G||{}}}function Kh(){}function gBe(G){var ue=G.walker(),Ae,Fe;for(this.buffer="",this.lastOut=`
`;Ae=ue.next();)Fe=Ae.node.type,this[Fe]&&this[Fe](Ae.node,Ae.entering);return this.buffer}function yBe(G){this.buffer+=G,this.lastOut=G}function vBe(){this.lastOut!==`
`&&this.lit(`
`)}function bBe(G){this.lit(G)}function xBe(G){return G}Kh.prototype.render=gBe,Kh.prototype.out=bBe,Kh.prototype.lit=yBe,Kh.prototype.cr=vBe,Kh.prototype.esc=xBe;var wBe=/^javascript:|vbscript:|file:|data:/i,_Be=/^data:image\/(?:png|gif|jpeg|webp)/i,Fve=function(G){return wBe.test(G)&&!_Be.test(G)};function EBe(G,ue,Ae){if(!(this.disableTags>0)){if(this.buffer+="<"+G,ue&&ue.length>0)for(var Fe=0,ft;(ft=ue[Fe])!==void 0;)this.buffer+=" "+ft[0]+'="'+ft[1]+'"',Fe++;Ae&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function rs(G){G=G||{},G.softbreak=G.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=G}function SBe(G){this.out(G.literal)}function ABe(){this.lit(this.options.softbreak)}function CBe(){this.tag("br",[],!0),this.cr()}function kBe(G,ue){var Ae=this.attrs(G);ue?(this.options.safe&&Fve(G.destination)||Ae.push(["href",this.esc(G.destination)]),G.title&&Ae.push(["title",this.esc(G.title)]),this.tag("a",Ae)):this.tag("/a")}function TBe(G,ue){ue?(this.disableTags===0&&(this.options.safe&&Fve(G.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(G.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(G.title&&this.lit('" title="'+this.esc(G.title)),this.lit('" />')))}function DBe(G,ue){this.tag(ue?"em":"/em")}function LBe(G,ue){this.tag(ue?"strong":"/strong")}function RBe(G,ue){var Ae=G.parent.parent,Fe=this.attrs(G);Ae!==null&&Ae.type==="list"&&Ae.listTight||(ue?(this.cr(),this.tag("p",Fe)):(this.tag("/p"),this.cr()))}function FBe(G,ue){var Ae="h"+G.level,Fe=this.attrs(G);ue?(this.cr(),this.tag(Ae,Fe)):(this.tag("/"+Ae),this.cr())}function OBe(G){this.tag("code"),this.out(G.literal),this.tag("/code")}function MBe(G){var ue=G.info?G.info.split(/\s+/):[],Ae=this.attrs(G);ue.length>0&&ue[0].length>0&&Ae.push(["class","language-"+this.esc(ue[0])]),this.cr(),this.tag("pre"),this.tag("code",Ae),this.out(G.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function $Be(G){var ue=this.attrs(G);this.cr(),this.tag("hr",ue,!0),this.cr()}function IBe(G,ue){var Ae=this.attrs(G);ue?(this.cr(),this.tag("blockquote",Ae),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function PBe(G,ue){var Ae=G.listType==="bullet"?"ul":"ol",Fe=this.attrs(G);if(ue){var ft=G.listStart;ft!==null&&ft!==1&&Fe.push(["start",ft.toString()]),this.cr(),this.tag(Ae,Fe),this.cr()}else this.cr(),this.tag("/"+Ae),this.cr()}function NBe(G,ue){var Ae=this.attrs(G);ue?this.tag("li",Ae):(this.tag("/li"),this.cr())}function BBe(G){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal)}function zBe(G){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal),this.cr()}function jBe(G,ue){ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit)}function UBe(G,ue){this.cr(),ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit),this.cr()}function qBe(G){this.lit(this.esc(G))}function HBe(G){var ue=[];if(this.options.sourcepos){var Ae=G.sourcepos;Ae&&ue.push(["data-sourcepos",String(Ae[0][0])+":"+String(Ae[0][1])+"-"+String(Ae[1][0])+":"+String(Ae[1][1])])}return ue}rs.prototype=Object.create(Kh.prototype),rs.prototype.text=SBe,rs.prototype.html_inline=BBe,rs.prototype.html_block=zBe,rs.prototype.softbreak=ABe,rs.prototype.linebreak=CBe,rs.prototype.link=kBe,rs.prototype.image=TBe,rs.prototype.emph=DBe,rs.prototype.strong=LBe,rs.prototype.paragraph=RBe,rs.prototype.heading=FBe,rs.prototype.code=OBe,rs.prototype.code_block=MBe,rs.prototype.thematic_break=$Be,rs.prototype.block_quote=IBe,rs.prototype.list=PBe,rs.prototype.item=NBe,rs.prototype.custom_inline=jBe,rs.prototype.custom_block=UBe,rs.prototype.esc=fve,rs.prototype.out=qBe,rs.prototype.tag=EBe,rs.prototype.attrs=HBe;var GBe=/\<[^>]*\>/;function VBe(G){return G.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function Jm(G){G=G||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=G}function WBe(G){this.buffer="";var ue,Ae,Fe=G.walker(),ft,lt,xn,jt,On,Vr,br=this.options;for(br.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;ft=Fe.next();)if(xn=ft.entering,lt=ft.node,Vr=lt.type,jt=lt.isContainer,On=Vr==="thematic_break"||Vr==="linebreak"||Vr==="softbreak",Ae=VBe(Vr),xn){switch(ue=[],Vr){case"document":ue.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":lt.listType!==null&&ue.push(["type",lt.listType.toLowerCase()]),lt.listStart!==null&&ue.push(["start",String(lt.listStart)]),lt.listTight!==null&&ue.push(["tight",lt.listTight?"true":"false"]);var xr=lt.listDelimiter;if(xr!==null){var ei="";xr==="."?ei="period":ei="paren",ue.push(["delimiter",ei])}break;case"code_block":lt.info&&ue.push(["info",lt.info]);break;case"heading":ue.push(["level",String(lt.level)]);break;case"link":case"image":ue.push(["destination",lt.destination]),ue.push(["title",lt.title]);break;case"custom_inline":case"custom_block":ue.push(["on_enter",lt.onEnter]),ue.push(["on_exit",lt.onExit]);break}if(br.sourcepos){var ti=lt.sourcepos;ti&&ue.push(["sourcepos",String(ti[0][0])+":"+String(ti[0][1])+"-"+String(ti[1][0])+":"+String(ti[1][1])])}if(this.cr(),this.out(this.tag(Ae,ue,On)),jt)this.indentLevel+=1;else if(!jt&&!On){var co=lt.literal;co&&this.out(this.esc(co)),this.out(this.tag("/"+Ae))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Ae));return br.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function YBe(G){this.disableTags>0?this.buffer+=G.replace(GBe,""):this.buffer+=G,this.lastOut=G}function XBe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var G=this.indentLevel;G>0;G--)this.buffer+=this.indent}}function ZBe(G,ue,Ae){var Fe="<"+G;if(ue&&ue.length>0)for(var ft=0,lt;(lt=ue[ft])!==void 0;)Fe+=" "+lt[0]+'="'+this.esc(lt[1])+'"',ft++;return Ae&&(Fe+=" /"),Fe+=">",Fe}Jm.prototype=Object.create(Kh.prototype),Jm.prototype.render=WBe,Jm.prototype.out=YBe,Jm.prototype.cr=XBe,Jm.prototype.tag=ZBe,Jm.prototype.esc=fve,n.HtmlRenderer=rs,n.Node=a,n.Parser=mBe,n.Renderer=Kh,n.XmlRenderer=Jm,Object.defineProperty(n,"__esModule",{value:!0})})}(m_,m_.exports)),m_.exports}var hC={exports:{}},DM,FSe;function dMt(){if(FSe)return DM;FSe=1;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,x=0,y=p.length;x!==y&&p[x]===0;)x++,g++;for(var w=(y-x)*f+1>>>0,_=new Uint8Array(w);x!==y;){for(var A=p[x],T=0,D=w-1;(A!==0||T<v)&&D!==-1;D--,T++)A+=256*_[D]>>>0,_[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");v=T,x++}for(var k=w-v;k!==w&&_[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=t.charAt(_[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,x=0;p[g]===l;)v++,g++;for(var y=(p.length-g)*u+1>>>0,w=new Uint8Array(y);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=y-1;(_!==0||A<x)&&T!==-1;T--,A++)_+=a*w[T]>>>0,w[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=A,g++}if(p[g]!==" "){for(var D=y-x;D!==y&&w[D]===0;)D++;for(var k=new Uint8Array(v+(y-D)),R=v;D!==y;)k[R++]=w[D++];return k}}}function h(p){var g=d(p);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:d,decode:h}}return DM=e,DM}var pC={},LM={},RM={},FM,OSe;function p8e(){return OSe||(OSe=1,FM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),FM}var OM,MSe;function sz(){if(MSe)return OM;MSe=1;var e=p8e();return OM=function(){return e()&&!!Symbol.toStringTag},OM}var MM,$Se;function hMt(){return $Se||($Se=1,MM=Error),MM}var $M,ISe;function pMt(){return ISe||(ISe=1,$M=EvalError),$M}var IM,PSe;function mMt(){return PSe||(PSe=1,IM=RangeError),IM}var PM,NSe;function gMt(){return NSe||(NSe=1,PM=ReferenceError),PM}var NM,BSe;function m8e(){return BSe||(BSe=1,NM=SyntaxError),NM}var BM,zSe;function jR(){return zSe||(zSe=1,BM=TypeError),BM}var zM,jSe;function yMt(){return jSe||(jSe=1,zM=URIError),zM}var jM,USe;function vMt(){if(USe)return jM;USe=1;var e=typeof Symbol<"u"&&Symbol,t=p8e();return jM=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},jM}var UM,qSe;function bMt(){if(qSe)return UM;qSe=1;var e={__proto__:null,foo:{}},t=Object;return UM=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)},UM}var qM,HSe;function xMt(){if(HSe)return qM;HSe=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,u){for(var f=[],c=0;c<l.length;c+=1)f[c]=l[c];for(var d=0;d<u.length;d+=1)f[d+l.length]=u[d];return f},s=function(l,u){for(var f=[],c=u,d=0;c<l.length;c+=1,d+=1)f[d]=l[c];return f},o=function(a,l){for(var u="",f=0;f<a.length;f+=1)u+=a[f],f+1<a.length&&(u+=l);return u};return qM=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==r)throw new TypeError(e+u);for(var f=s(arguments,1),c,d=function(){if(this instanceof c){var x=u.apply(this,i(f,arguments));return Object(x)===x?x:this}return u.apply(l,i(f,arguments))},h=n(0,u.length-f.length),p=[],g=0;g<h;g++)p[g]="$"+g;if(c=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var v=function(){};v.prototype=u.prototype,c.prototype=new v,v.prototype=null}return c},qM}var HM,GSe;function oz(){if(GSe)return HM;GSe=1;var e=xMt();return HM=Function.prototype.bind||e,HM}var GM,VSe;function wMt(){if(VSe)return GM;VSe=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=oz();return GM=n.call(e,t),GM}var VM,WSe;function mS(){if(WSe)return VM;WSe=1;var e,t=hMt(),n=pMt(),r=mMt(),i=gMt(),s=m8e(),o=jR(),a=yMt(),l=Function,u=function(q){try{return l('"use strict"; return ('+q+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var c=function(){throw new o},d=f?function(){try{return arguments.callee,c}catch{try{return f(arguments,"callee").get}catch{return c}}}():c,h=vMt()(),p=bMt()(),g=Object.getPrototypeOf||(p?function(q){return q.__proto__}:null),v={},x=typeof Uint8Array>"u"||!g?e:g(Uint8Array),y={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":h&&g?g([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&g?g(g([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!g?e:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!g?e:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&g?g(""[Symbol.iterator]()):e,"%Symbol%":h?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":d,"%TypedArray%":x,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(g)try{null.error}catch(q){var w=g(g(q));y["%Error.prototype%"]=w}var _=function q(Y){var X;if(Y==="%AsyncFunction%")X=u("async function () {}");else if(Y==="%GeneratorFunction%")X=u("function* () {}");else if(Y==="%AsyncGeneratorFunction%")X=u("async function* () {}");else if(Y==="%AsyncGenerator%"){var te=q("%AsyncGeneratorFunction%");te&&(X=te.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var le=q("%AsyncGenerator%");le&&g&&(X=g(le.prototype))}return y[Y]=X,X},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=oz(),D=wMt(),k=T.call(Function.call,Array.prototype.concat),R=T.call(Function.apply,Array.prototype.splice),O=T.call(Function.call,String.prototype.replace),B=T.call(Function.call,String.prototype.slice),K=T.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,I=function(Y){var X=B(Y,0,1),te=B(Y,-1);if(X==="%"&&te!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&X!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var le=[];return O(Y,L,function(ee,z,he,de){le[le.length]=he?O(de,$,"$1"):z||ee}),le},U=function(Y,X){var te=Y,le;if(D(A,te)&&(le=A[te],te="%"+le[0]+"%"),D(y,te)){var ee=y[te];if(ee===v&&(ee=_(te)),typeof ee>"u"&&!X)throw new o("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:le,name:te,value:ee}}throw new s("intrinsic "+Y+" does not exist!")};return VM=function(Y,X){if(typeof Y!="string"||Y.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof X!="boolean")throw new o('"allowMissing" argument must be a boolean');if(K(/^%?[^%]*%?$/,Y)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var te=I(Y),le=te.length>0?te[0]:"",ee=U("%"+le+"%",X),z=ee.name,he=ee.value,de=!1,ze=ee.alias;ze&&(le=ze[0],R(te,k([0,1],ze)));for(var He=1,je=!0;He<te.length;He+=1){var we=te[He],Ie=B(we,0,1),qe=B(we,-1);if((Ie==='"'||Ie==="'"||Ie==="`"||qe==='"'||qe==="'"||qe==="`")&&Ie!==qe)throw new s("property names with quotes must have matching quotes");if((we==="constructor"||!je)&&(de=!0),le+="."+we,z="%"+le+"%",D(y,z))he=y[z];else if(he!=null){if(!(we in he)){if(!X)throw new o("base intrinsic for "+Y+" exists, but the property is not available.");return}if(f&&He+1>=te.length){var Pe=f(he,we);je=!!Pe,je&&"get"in Pe&&!("originalValue"in Pe.get)?he=Pe.get:he=he[we]}else je=D(he,we),he=he[we];je&&!de&&(y[z]=he)}}return he},VM}var WM={exports:{}},YM,YSe;function az(){if(YSe)return YM;YSe=1;var e=mS(),t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return YM=t,YM}var XM,XSe;function lz(){if(XSe)return XM;XSe=1;var e=mS(),t=e("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return XM=t,XM}var ZM,ZSe;function _Mt(){if(ZSe)return ZM;ZSe=1;var e=az(),t=m8e(),n=jR(),r=lz();return ZM=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!r&&r(s,o);if(e)e(s,o,{configurable:f===null&&d?d.configurable:!f,enumerable:l===null&&d?d.enumerable:!l,value:a,writable:u===null&&d?d.writable:!u});else if(c||!l&&!u&&!f)s[o]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ZM}var KM,KSe;function EMt(){if(KSe)return KM;KSe=1;var e=az(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},KM=t,KM}var JM,JSe;function SMt(){if(JSe)return JM;JSe=1;var e=mS(),t=_Mt(),n=EMt()(),r=lz(),i=jR(),s=e("%Math.floor%");return JM=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,c=!0;if("length"in a&&r){var d=r(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(c=!1)}return(f||c||!u)&&(n?t(a,"length",l,!0,!0):t(a,"length",l)),a},JM}var QSe;function g8e(){return QSe||(QSe=1,function(e){var t=oz(),n=mS(),r=SMt(),i=jR(),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(o,s),l=az(),u=n("%Math.max%");e.exports=function(d){if(typeof d!="function")throw new i("a function is required");var h=a(t,o,arguments);return r(h,1+u(0,d.length-(arguments.length-1)),!0)};var f=function(){return a(t,s,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f}(WM)),WM.exports}var QM,eAe;function y8e(){if(eAe)return QM;eAe=1;var e=mS(),t=g8e(),n=t(e("String.prototype.indexOf"));return QM=function(i,s){var o=e(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?t(o):o},QM}var e4,tAe;function AMt(){if(tAe)return e4;tAe=1;var e=sz()(),t=y8e(),n=t("Object.prototype.toString"),r=function(a){return e&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=i,e4=s?r:i,e4}var t4,nAe;function CMt(){if(nAe)return t4;nAe=1;var e=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,r=sz()(),i=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return t4=function(l){if(typeof l!="function")return!1;if(n.test(t.call(l)))return!0;if(!r){var u=e.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof o>"u"){var f=s();o=f?i(f):!1}return i(l)===o},t4}var n4,rAe;function kMt(){if(rAe)return n4;rAe=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},t(function(){throw 42},null,n)}catch(y){y!==r&&(t=null)}else t=null;var i=/^\s*class\b/,s=function(w){try{var _=e.call(w);return i.test(_)}catch{return!1}},o=function(w){try{return s(w)?!1:(e.call(w),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",f="[object GeneratorFunction]",c="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),v=function(){return!1};if(typeof document=="object"){var x=document.all;a.call(x)===a.call(document.all)&&(v=function(w){if((g||!w)&&(typeof w>"u"||typeof w=="object"))try{var _=a.call(w);return(_===c||_===d||_===h||_===l)&&w("")==null}catch{}return!1})}return n4=t?function(w){if(v(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{t(w,null,n)}catch(_){if(_!==r)return!1}return!s(w)&&o(w)}:function(w){if(v(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(p)return o(w);if(s(w))return!1;var _=a.call(w);return _!==u&&_!==f&&!/^\[object HTML/.test(_)?!1:o(w)},n4}var r4,iAe;function TMt(){if(iAe)return r4;iAe=1;var e=kMt(),t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,u,f){for(var c=0,d=l.length;c<d;c++)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},i=function(l,u,f){for(var c=0,d=l.length;c<d;c++)f==null?u(l.charAt(c),c,l):u.call(f,l.charAt(c),c,l)},s=function(l,u,f){for(var c in l)n.call(l,c)&&(f==null?u(l[c],c,l):u.call(f,l[c],c,l))},o=function(l,u,f){if(!e(u))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=f),t.call(l)==="[object Array]"?r(l,u,c):typeof l=="string"?i(l,u,c):s(l,u,c)};return r4=o,r4}var i4,sAe;function DMt(){return sAe||(sAe=1,i4=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),i4}var s4,oAe;function LMt(){if(oAe)return s4;oAe=1;var e=DMt(),t=typeof globalThis>"u"?Xi:globalThis;return s4=function(){for(var r=[],i=0;i<e.length;i++)typeof t[e[i]]=="function"&&(r[r.length]=e[i]);return r},s4}var o4,aAe;function v8e(){if(aAe)return o4;aAe=1;var e=TMt(),t=LMt(),n=g8e(),r=y8e(),i=lz(),s=r("Object.prototype.toString"),o=sz()(),a=typeof globalThis>"u"?Xi:globalThis,l=t(),u=r("String.prototype.slice"),f=Object.getPrototypeOf,c=r("Array.prototype.indexOf",!0)||function(v,x){for(var y=0;y<v.length;y+=1)if(v[y]===x)return y;return-1},d={__proto__:null};o&&i&&f?e(l,function(g){var v=new a[g];if(Symbol.toStringTag in v){var x=f(v),y=i(x,Symbol.toStringTag);if(!y){var w=f(x);y=i(w,Symbol.toStringTag)}d["$"+g]=n(y.get)}}):e(l,function(g){var v=new a[g],x=v.slice||v.set;x&&(d["$"+g]=n(x))});var h=function(v){var x=!1;return e(d,function(y,w){if(!x)try{"$"+y(v)===w&&(x=u(w,1))}catch{}}),x},p=function(v){var x=!1;return e(d,function(y,w){if(!x)try{y(v),x=u(w,1)}catch{}}),x};return o4=function(v){if(!v||typeof v!="object")return!1;if(!o){var x=u(s(v),8,-1);return c(l,x)>-1?x:x!=="Object"?!1:p(v)}return i?h(v):null},o4}var a4,lAe;function RMt(){if(lAe)return a4;lAe=1;var e=v8e();return a4=function(n){return!!e(n)},a4}var uAe;function FMt(){return uAe||(uAe=1,function(e){var t=AMt(),n=CMt(),r=v8e(),i=RMt();function s(pe){return pe.call.bind(pe)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),c=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var h=s(Symbol.prototype.valueOf);function p(pe,se){if(typeof pe!="object")return!1;try{return se(pe),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=n,e.isTypedArray=i;function g(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}e.isPromise=g;function v(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):i(pe)||z(pe)}e.isArrayBufferView=v;function x(pe){return r(pe)==="Uint8Array"}e.isUint8Array=x;function y(pe){return r(pe)==="Uint8ClampedArray"}e.isUint8ClampedArray=y;function w(pe){return r(pe)==="Uint16Array"}e.isUint16Array=w;function _(pe){return r(pe)==="Uint32Array"}e.isUint32Array=_;function A(pe){return r(pe)==="Int8Array"}e.isInt8Array=A;function T(pe){return r(pe)==="Int16Array"}e.isInt16Array=T;function D(pe){return r(pe)==="Int32Array"}e.isInt32Array=D;function k(pe){return r(pe)==="Float32Array"}e.isFloat32Array=k;function R(pe){return r(pe)==="Float64Array"}e.isFloat64Array=R;function O(pe){return r(pe)==="BigInt64Array"}e.isBigInt64Array=O;function B(pe){return r(pe)==="BigUint64Array"}e.isBigUint64Array=B;function K(pe){return l(pe)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function L(pe){return typeof Map>"u"?!1:K.working?K(pe):pe instanceof Map}e.isMap=L;function $(pe){return l(pe)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function I(pe){return typeof Set>"u"?!1:$.working?$(pe):pe instanceof Set}e.isSet=I;function U(pe){return l(pe)==="[object WeakMap]"}U.working=typeof WeakMap<"u"&&U(new WeakMap);function q(pe){return typeof WeakMap>"u"?!1:U.working?U(pe):pe instanceof WeakMap}e.isWeakMap=q;function Y(pe){return l(pe)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function X(pe){return Y(pe)}e.isWeakSet=X;function te(pe){return l(pe)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function le(pe){return typeof ArrayBuffer>"u"?!1:te.working?te(pe):pe instanceof ArrayBuffer}e.isArrayBuffer=le;function ee(pe){return l(pe)==="[object DataView]"}ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ee(new DataView(new ArrayBuffer(1),0,1));function z(pe){return typeof DataView>"u"?!1:ee.working?ee(pe):pe instanceof DataView}e.isDataView=z;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function de(pe){return l(pe)==="[object SharedArrayBuffer]"}function ze(pe){return typeof he>"u"?!1:(typeof de.working>"u"&&(de.working=de(new he)),de.working?de(pe):pe instanceof he)}e.isSharedArrayBuffer=ze;function He(pe){return l(pe)==="[object AsyncFunction]"}e.isAsyncFunction=He;function je(pe){return l(pe)==="[object Map Iterator]"}e.isMapIterator=je;function we(pe){return l(pe)==="[object Set Iterator]"}e.isSetIterator=we;function Ie(pe){return l(pe)==="[object Generator]"}e.isGeneratorObject=Ie;function qe(pe){return l(pe)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=qe;function Pe(pe){return p(pe,u)}e.isNumberObject=Pe;function At(pe){return p(pe,f)}e.isStringObject=At;function dt(pe){return p(pe,c)}e.isBooleanObject=dt;function nn(pe){return o&&p(pe,d)}e.isBigIntObject=nn;function Wt(pe){return a&&p(pe,h)}e.isSymbolObject=Wt;function Mn(pe){return Pe(pe)||At(pe)||dt(pe)||nn(pe)||Wt(pe)}e.isBoxedPrimitive=Mn;function Ze(pe){return typeof Uint8Array<"u"&&(le(pe)||ze(pe))}e.isAnyArrayBuffer=Ze,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(e,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})})}(RM)),RM}var l4,cAe;function OMt(){return cAe||(cAe=1,l4=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),l4}var mC={exports:{}},fAe;function MMt(){return fAe||(fAe=1,typeof Object.create=="function"?mC.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:mC.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),mC.exports}var dAe;function hAe(){return dAe||(dAe=1,function(e){var t={},n=Object.getOwnPropertyDescriptors||function(he){for(var de=Object.keys(he),ze={},He=0;He<de.length;He++)ze[de[He]]=Object.getOwnPropertyDescriptor(he,de[He]);return ze},r=/%[sdj%]/g;e.format=function(z){if(!T(z)){for(var he=[],de=0;de<arguments.length;de++)he.push(a(arguments[de]));return he.join(" ")}for(var de=1,ze=arguments,He=ze.length,je=String(z).replace(r,function(Ie){if(Ie==="%%")return"%";if(de>=He)return Ie;switch(Ie){case"%s":return String(ze[de++]);case"%d":return Number(ze[de++]);case"%j":try{return JSON.stringify(ze[de++])}catch{return"[Circular]"}default:return Ie}}),we=ze[de];de<He;we=ze[++de])w(we)||!O(we)?je+=" "+we:je+=" "+a(we);return je},e.deprecate=function(z,he){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return e.deprecate(z,he).apply(this,arguments)};var de=!1;function ze(){if(!de){if(process.throwDeprecation)throw new Error(he);process.traceDeprecation?console.trace(he):console.error(he),de=!0}return z.apply(this,arguments)}return ze};var i={},s=/^$/;if(t.NODE_DEBUG){var o=t.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}e.debuglog=function(z){if(z=z.toUpperCase(),!i[z])if(s.test(z)){var he=process.pid;i[z]=function(){var de=e.format.apply(e,arguments);console.error("%s %d: %s",z,he,de)}}else i[z]=function(){};return i[z]};function a(z,he){var de={seen:[],stylize:u};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),y(he)?de.showHidden=he:he&&e._extend(de,he),k(de.showHidden)&&(de.showHidden=!1),k(de.depth)&&(de.depth=2),k(de.colors)&&(de.colors=!1),k(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=l),c(de,z,de.depth)}e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,he){var de=a.styles[he];return de?"\x1B["+a.colors[de][0]+"m"+z+"\x1B["+a.colors[de][1]+"m":z}function u(z,he){return z}function f(z){var he={};return z.forEach(function(de,ze){he[de]=!0}),he}function c(z,he,de){if(z.customInspect&&he&&L(he.inspect)&&he.inspect!==e.inspect&&!(he.constructor&&he.constructor.prototype===he)){var ze=he.inspect(de,z);return T(ze)||(ze=c(z,ze,de)),ze}var He=d(z,he);if(He)return He;var je=Object.keys(he),we=f(je);if(z.showHidden&&(je=Object.getOwnPropertyNames(he)),K(he)&&(je.indexOf("message")>=0||je.indexOf("description")>=0))return h(he);if(je.length===0){if(L(he)){var Ie=he.name?": "+he.name:"";return z.stylize("[Function"+Ie+"]","special")}if(R(he))return z.stylize(RegExp.prototype.toString.call(he),"regexp");if(B(he))return z.stylize(Date.prototype.toString.call(he),"date");if(K(he))return h(he)}var qe="",Pe=!1,At=["{","}"];if(x(he)&&(Pe=!0,At=["[","]"]),L(he)){var dt=he.name?": "+he.name:"";qe=" [Function"+dt+"]"}if(R(he)&&(qe=" "+RegExp.prototype.toString.call(he)),B(he)&&(qe=" "+Date.prototype.toUTCString.call(he)),K(he)&&(qe=" "+h(he)),je.length===0&&(!Pe||he.length==0))return At[0]+qe+At[1];if(de<0)return R(he)?z.stylize(RegExp.prototype.toString.call(he),"regexp"):z.stylize("[Object]","special");z.seen.push(he);var nn;return Pe?nn=p(z,he,de,we,je):nn=je.map(function(Wt){return g(z,he,de,we,Wt,Pe)}),z.seen.pop(),v(nn,qe,At)}function d(z,he){if(k(he))return z.stylize("undefined","undefined");if(T(he)){var de="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(de,"string")}if(A(he))return z.stylize(""+he,"number");if(y(he))return z.stylize(""+he,"boolean");if(w(he))return z.stylize("null","null")}function h(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,he,de,ze,He){for(var je=[],we=0,Ie=he.length;we<Ie;++we)X(he,String(we))?je.push(g(z,he,de,ze,String(we),!0)):je.push("");return He.forEach(function(qe){qe.match(/^\d+$/)||je.push(g(z,he,de,ze,qe,!0))}),je}function g(z,he,de,ze,He,je){var we,Ie,qe;if(qe=Object.getOwnPropertyDescriptor(he,He)||{value:he[He]},qe.get?qe.set?Ie=z.stylize("[Getter/Setter]","special"):Ie=z.stylize("[Getter]","special"):qe.set&&(Ie=z.stylize("[Setter]","special")),X(ze,He)||(we="["+He+"]"),Ie||(z.seen.indexOf(qe.value)<0?(w(de)?Ie=c(z,qe.value,null):Ie=c(z,qe.value,de-1),Ie.indexOf(`
`)>-1&&(je?Ie=Ie.split(`
`).map(function(Pe){return"  "+Pe}).join(`
`).slice(2):Ie=`
`+Ie.split(`
`).map(function(Pe){return"   "+Pe}).join(`
`))):Ie=z.stylize("[Circular]","special")),k(we)){if(je&&He.match(/^\d+$/))return Ie;we=JSON.stringify(""+He),we.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(we=we.slice(1,-1),we=z.stylize(we,"name")):(we=we.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),we=z.stylize(we,"string"))}return we+": "+Ie}function v(z,he,de){var ze=z.reduce(function(He,je){return je.indexOf(`
`)>=0,He+je.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ze>60?de[0]+(he===""?"":he+`
 `)+" "+z.join(`,
  `)+" "+de[1]:de[0]+he+" "+z.join(", ")+" "+de[1]}e.types=FMt();function x(z){return Array.isArray(z)}e.isArray=x;function y(z){return typeof z=="boolean"}e.isBoolean=y;function w(z){return z===null}e.isNull=w;function _(z){return z==null}e.isNullOrUndefined=_;function A(z){return typeof z=="number"}e.isNumber=A;function T(z){return typeof z=="string"}e.isString=T;function D(z){return typeof z=="symbol"}e.isSymbol=D;function k(z){return z===void 0}e.isUndefined=k;function R(z){return O(z)&&I(z)==="[object RegExp]"}e.isRegExp=R,e.types.isRegExp=R;function O(z){return typeof z=="object"&&z!==null}e.isObject=O;function B(z){return O(z)&&I(z)==="[object Date]"}e.isDate=B,e.types.isDate=B;function K(z){return O(z)&&(I(z)==="[object Error]"||z instanceof Error)}e.isError=K,e.types.isNativeError=K;function L(z){return typeof z=="function"}e.isFunction=L;function $(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}e.isPrimitive=$,e.isBuffer=OMt();function I(z){return Object.prototype.toString.call(z)}function U(z){return z<10?"0"+z.toString(10):z.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var z=new Date,he=[U(z.getHours()),U(z.getMinutes()),U(z.getSeconds())].join(":");return[z.getDate(),q[z.getMonth()],he].join(" ")}e.log=function(){console.log("%s - %s",Y(),e.format.apply(e,arguments))},e.inherits=MMt(),e._extend=function(z,he){if(!he||!O(he))return z;for(var de=Object.keys(he),ze=de.length;ze--;)z[de[ze]]=he[de[ze]];return z};function X(z,he){return Object.prototype.hasOwnProperty.call(z,he)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(he){if(typeof he!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&he[te]){var de=he[te];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var ze,He,je=new Promise(function(qe,Pe){ze=qe,He=Pe}),we=[],Ie=0;Ie<arguments.length;Ie++)we.push(arguments[Ie]);we.push(function(qe,Pe){qe?He(qe):ze(Pe)});try{he.apply(this,we)}catch(qe){He(qe)}return je}return Object.setPrototypeOf(de,Object.getPrototypeOf(he)),te&&Object.defineProperty(de,te,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,n(he))},e.promisify.custom=te;function le(z,he){if(!z){var de=new Error("Promise was rejected with a falsy value");de.reason=z,z=de}return he(z)}function ee(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function he(){for(var de=[],ze=0;ze<arguments.length;ze++)de.push(arguments[ze]);var He=de.pop();if(typeof He!="function")throw new TypeError("The last argument must be of type Function");var je=this,we=function(){return He.apply(je,arguments)};z.apply(this,de).then(function(Ie){process.nextTick(we.bind(null,null,Ie))},function(Ie){process.nextTick(le.bind(null,Ie,we))})}return Object.setPrototypeOf(he,Object.getPrototypeOf(z)),Object.defineProperties(he,n(z)),he}e.callbackify=ee}(LM)),LM}var pAe;function $Mt(){return pAe||(pAe=1,pC.TextEncoder=typeof TextEncoder<"u"?TextEncoder:hAe().TextEncoder,pC.TextDecoder=typeof TextDecoder<"u"?TextDecoder:hAe().TextDecoder),pC}var u4,mAe;function uz(){if(mAe)return u4;mAe=1;const{TextEncoder:e,TextDecoder:t}=$Mt(),n=new t,r=a=>n.decode(a),i=new e,s=a=>i.encode(a);function o(a,l){const u=new Uint8Array(l);let f=0;for(const c of a)u.set(c,f),f+=c.length;return u}return u4={decodeText:r,encodeText:s,concat:o},u4}var c4,gAe;function IMt(){if(gAe)return c4;gAe=1;const{encodeText:e}=uz();class t{constructor(r,i,s,o){this.name=r,this.code=i,this.codeBuf=e(this.code),this.alphabet=o,this.codec=s(o)}encode(r){return this.codec.encode(r)}decode(r){for(const i of r)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${r}'`);return this.codec.decode(r)}}return c4=t,c4}var f4,yAe;function PMt(){if(yAe)return f4;yAe=1;const e=(r,i,s)=>{const o={};for(let d=0;d<i.length;++d)o[i[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let u=0,f=0,c=0;for(let d=0;d<a;++d){const h=o[r[d]];if(h===void 0)throw new SyntaxError("Invalid character "+r[d]);f=f<<s|h,u+=s,u>=8&&(u-=8,l[c++]=255&f>>u)}if(u>=s||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return l},t=(r,i,s)=>{const o=i[i.length-1]==="=",a=(1<<s)-1;let l="",u=0,f=0;for(let c=0;c<r.length;++c)for(f=f<<8|r[c],u+=8;u>s;)u-=s,l+=i[a&f>>u];if(u&&(l+=i[a&f<<s-u]),o)for(;l.length*s&7;)l+="=";return l};return f4={rfc4648:r=>i=>({encode(s){return t(s,i,r)},decode(s){return e(s,i,r)}})},f4}var d4,vAe;function NMt(){if(vAe)return d4;vAe=1;const e=dMt(),t=IMt(),{rfc4648:n}=PMt(),{decodeText:r,encodeText:i}=uz(),o=[["identity","\0",()=>({encode:r,decode:i}),""],["base2","0",n(1),"01"],["base8","7",n(3),"01234567"],["base10","9",e,"0123456789"],["base16","f",n(4),"0123456789abcdef"],["base16upper","F",n(4),"0123456789ABCDEF"],["base32hex","v",n(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",n(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",n(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",n(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",n(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",e,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",e,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((u,f)=>(u[f[0]]=new t(f[0],f[1],f[2],f[3]),u),{}),l=o.reduce((u,f)=>(u[f[1]]=a[f[0]],u),{});return d4={names:a,codes:l},d4}var bAe;function BMt(){return bAe||(bAe=1,function(e,t){const n=NMt(),{encodeText:r,decodeText:i,concat:s}=uz();function o(h,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:v}=c(h);return f(g,p),s([v,p],v.length+p.length)}function a(h,p){const g=c(h),v=r(g.encode(p));return s([g.codeBuf,v],g.codeBuf.length+v.length)}function l(h){h instanceof Uint8Array&&(h=i(h));const p=h[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(h=h.toLowerCase()),c(h[0]).decode(h.substring(1))}function u(h){if(h instanceof Uint8Array&&(h=i(h)),Object.prototype.toString.call(h)!=="[object String]")return!1;try{return c(h[0]).name}catch{return!1}}function f(h,p){c(h).decode(i(p))}function c(h){if(Object.prototype.hasOwnProperty.call(n.names,h))return n.names[h];if(Object.prototype.hasOwnProperty.call(n.codes,h))return n.codes[h];throw new Error(`Unsupported encoding: ${h}`)}function d(h){return h instanceof Uint8Array&&(h=i(h)),c(h[0])}t=e.exports=o,t.encode=a,t.decode=l,t.isEncoded=u,t.encoding=c,t.encodingFromData=d,t.names=Object.freeze(n.names),t.codes=Object.freeze(n.codes)}(hC,hC.exports)),hC.exports}var h4,xAe;function zMt(){if(xAe)return h4;xAe=1,h4=i;var e=128,t=127,n=~t,r=Math.pow(2,31);function i(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw i.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=r;)o[a++]=s&255|e,s/=128;for(;s&n;)o[a++]=s&255|e,s>>>=7;return o[a]=s|0,i.bytes=a-l+1,o}return h4}var p4,wAe;function jMt(){if(wAe)return p4;wAe=1,p4=n;var e=128,t=127;function n(r,o){var s=0,o=o||0,a=0,l=o,u,f=r.length;do{if(l>=f||a>49)throw n.bytes=0,new RangeError("Could not decode varint");u=r[l++],s+=a<28?(u&t)<<a:(u&t)*Math.pow(2,a),a+=7}while(u>=e);return n.bytes=l-o,s}return p4}var m4,_Ae;function UMt(){if(_Ae)return m4;_Ae=1;var e=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return m4=function(u){return u<e?1:u<t?2:u<n?3:u<r?4:u<i?5:u<s?6:u<o?7:u<a?8:u<l?9:10},m4}var g4,EAe;function qMt(){return EAe||(EAe=1,g4={encode:zMt(),decode:jMt(),encodingLength:UMt()}),g4}var y4,SAe;function HMt(){return SAe||(SAe=1,y4={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),y4}function GMt(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,x=0,y=p.length;x!==y&&p[x]===0;)x++,g++;for(var w=(y-x)*f+1>>>0,_=new Uint8Array(w);x!==y;){for(var A=p[x],T=0,D=w-1;(A!==0||T<v)&&D!==-1;D--,T++)A+=256*_[D]>>>0,_[D]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");v=T,x++}for(var k=w-v;k!==w&&_[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=e.charAt(_[k]);return R}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,x=0;p[g]===l;)v++,g++;for(var y=(p.length-g)*u+1>>>0,w=new Uint8Array(y);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=y-1;(_!==0||A<x)&&T!==-1;T--,A++)_+=a*w[T]>>>0,w[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=A,g++}if(p[g]!==" "){for(var D=y-x;D!==y&&w[D]===0;)D++;for(var k=new Uint8Array(v+(y-D)),R=v;D!==y;)k[R++]=w[D++];return k}}}function h(p){var g=d(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:c,decodeUnsafe:d,decode:h}}var VMt=GMt,WMt=VMt;const b8e=new Uint8Array(0),YMt=e=>e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),""),XMt=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map(n=>parseInt(n,16))):b8e},x8e=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},X0=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ZMt=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),w8e=e=>new TextEncoder().encode(e),_8e=e=>new TextDecoder().decode(e),KMt=Object.freeze(Object.defineProperty({__proto__:null,coerce:X0,empty:b8e,equals:x8e,fromHex:XMt,fromString:w8e,isBinary:ZMt,toHex:YMt,toString:_8e},Symbol.toStringTag,{value:"Module"}));class JMt{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class QMt{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return E8e(this,t)}}class e4t{constructor(t){this.decoders=t}or(t){return E8e(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const E8e=(e,t)=>new e4t({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class t4t{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new JMt(t,n,r),this.decoder=new QMt(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const UR=({name:e,prefix:t,encode:n,decode:r})=>new t4t(e,t,n,r),gS=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=WMt(n,t);return UR({prefix:e,name:t,encode:r,decode:s=>X0(i(s))})},n4t=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,l=0,u=0;for(let f=0;f<s;++f){const c=i[e[f]];if(c===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|c,a+=n,a>=8&&(a-=8,o[u++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},r4t=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let l=0;l<e.length;++l)for(a=a<<8|e[l],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ca=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>UR({prefix:t,name:e,encode(i){return r4t(i,r,n)},decode(i){return n4t(i,r,n,e)}}),i4t=UR({prefix:"\0",name:"identity",encode:e=>_8e(e),decode:e=>w8e(e)}),s4t=Object.freeze(Object.defineProperty({__proto__:null,identity:i4t},Symbol.toStringTag,{value:"Module"})),o4t=ca({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),a4t=Object.freeze(Object.defineProperty({__proto__:null,base2:o4t},Symbol.toStringTag,{value:"Module"})),l4t=ca({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),u4t=Object.freeze(Object.defineProperty({__proto__:null,base8:l4t},Symbol.toStringTag,{value:"Module"})),c4t=gS({prefix:"9",name:"base10",alphabet:"0123456789"}),f4t=Object.freeze(Object.defineProperty({__proto__:null,base10:c4t},Symbol.toStringTag,{value:"Module"})),d4t=ca({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),h4t=ca({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),p4t=Object.freeze(Object.defineProperty({__proto__:null,base16:d4t,base16upper:h4t},Symbol.toStringTag,{value:"Module"})),U_=ca({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),m4t=ca({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),g4t=ca({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),y4t=ca({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v4t=ca({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),b4t=ca({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),x4t=ca({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),w4t=ca({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_4t=ca({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),E4t=Object.freeze(Object.defineProperty({__proto__:null,base32:U_,base32hex:v4t,base32hexpad:x4t,base32hexpadupper:w4t,base32hexupper:b4t,base32pad:g4t,base32padupper:y4t,base32upper:m4t,base32z:_4t},Symbol.toStringTag,{value:"Module"})),S4t=gS({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),A4t=gS({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),C4t=Object.freeze(Object.defineProperty({__proto__:null,base36:S4t,base36upper:A4t},Symbol.toStringTag,{value:"Module"})),$d=gS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),k4t=gS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),T4t=Object.freeze(Object.defineProperty({__proto__:null,base58btc:$d,base58flickr:k4t},Symbol.toStringTag,{value:"Module"})),D4t=ca({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),L4t=ca({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),R4t=ca({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),F4t=ca({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),O4t=Object.freeze(Object.defineProperty({__proto__:null,base64:D4t,base64pad:L4t,base64url:R4t,base64urlpad:F4t},Symbol.toStringTag,{value:"Module"})),S8e=Array.from(""),M4t=S8e.reduce((e,t,n)=>(e[n]=t,e),[]),$4t=S8e.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function I4t(e){return e.reduce((t,n)=>(t+=M4t[n],t),"")}function P4t(e){const t=[];for(const n of e){const r=$4t[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const N4t=UR({prefix:"",name:"base256emoji",encode:I4t,decode:P4t}),B4t=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:N4t},Symbol.toStringTag,{value:"Module"}));var z4t=A8e,AAe=128,j4t=127,U4t=~j4t,q4t=Math.pow(2,31);function A8e(e,t,n){t=t||[],n=n||0;for(var r=n;e>=q4t;)t[n++]=e&255|AAe,e/=128;for(;e&U4t;)t[n++]=e&255|AAe,e>>>=7;return t[n]=e|0,A8e.bytes=n-r+1,t}var H4t=nI,G4t=128,CAe=127;function nI(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw nI.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&CAe)<<i:(o&CAe)*Math.pow(2,i),i+=7}while(o>=G4t);return nI.bytes=s-r,n}var V4t=Math.pow(2,7),W4t=Math.pow(2,14),Y4t=Math.pow(2,21),X4t=Math.pow(2,28),Z4t=Math.pow(2,35),K4t=Math.pow(2,42),J4t=Math.pow(2,49),Q4t=Math.pow(2,56),e6t=Math.pow(2,63),t6t=function(e){return e<V4t?1:e<W4t?2:e<Y4t?3:e<X4t?4:e<Z4t?5:e<K4t?6:e<J4t?7:e<Q4t?8:e<e6t?9:10},n6t={encode:z4t,decode:H4t,encodingLength:t6t},ET=n6t;const ST=(e,t=0)=>[ET.decode(e,t),ET.decode.bytes],I2=(e,t,n=0)=>(ET.encode(e,t,n),t),P2=e=>ET.encodingLength(e),r6t=Object.freeze(Object.defineProperty({__proto__:null,decode:ST,encodeTo:I2,encodingLength:P2},Symbol.toStringTag,{value:"Module"})),N2=(e,t)=>{const n=t.byteLength,r=P2(e),i=r+P2(n),s=new Uint8Array(i+n);return I2(e,s,0),I2(n,s,r),s.set(t,i),new qR(e,n,t,s)},C8e=e=>{const t=X0(e),[n,r]=ST(t),[i,s]=ST(t.subarray(r)),o=t.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new qR(n,i,o,t)},k8e=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&x8e(e.bytes,t.bytes);class qR{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const i6t=Object.freeze(Object.defineProperty({__proto__:null,Digest:qR,create:N2,decode:C8e,equals:k8e},Symbol.toStringTag,{value:"Module"})),cz=({name:e,code:t,encode:n})=>new T8e(e,t,n);class T8e{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?N2(this.code,n):n.then(r=>N2(this.code,r))}else throw Error("Unknown type, must be binary type")}}const s6t=Object.freeze(Object.defineProperty({__proto__:null,Hasher:T8e,from:cz},Symbol.toStringTag,{value:"Module"})),D8e=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),o6t=cz({name:"sha2-256",code:18,encode:D8e("SHA-256")}),a6t=cz({name:"sha2-512",code:19,encode:D8e("SHA-512")}),l6t=Object.freeze(Object.defineProperty({__proto__:null,sha256:o6t,sha512:a6t},Symbol.toStringTag,{value:"Module"})),L8e=0,u6t="identity",R8e=X0,c6t=e=>N2(L8e,R8e(e)),f6t={code:L8e,name:u6t,encode:R8e,digest:c6t},d6t=Object.freeze(Object.defineProperty({__proto__:null,identity:f6t},Symbol.toStringTag,{value:"Module"})),h6t="raw",p6t=85,m6t=e=>X0(e),g6t=e=>X0(e),y6t=Object.freeze(Object.defineProperty({__proto__:null,code:p6t,decode:g6t,encode:m6t,name:h6t},Symbol.toStringTag,{value:"Module"})),v6t=new TextEncoder,b6t=new TextDecoder,x6t="json",w6t=512,_6t=e=>v6t.encode(JSON.stringify(e)),E6t=e=>JSON.parse(b6t.decode(e)),S6t=Object.freeze(Object.defineProperty({__proto__:null,code:w6t,decode:E6t,encode:_6t,name:x6t},Symbol.toStringTag,{value:"Module"}));class va{constructor(t,n,r,i){this.code=n,this.version=t,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:yC,byteLength:yC,code:gC,version:gC,multihash:gC,bytes:gC,_baseCache:yC,asCID:yC})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:n}=this;if(t!==Iw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==T6t)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return va.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=N2(t,n);return va.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&k8e(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return C6t(n,i,t||$d.encoder);default:return k6t(n,i,t||U_.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return L6t(/^0\.0/,R6t),!!(t&&(t[TAe]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof va)return t;if(t!=null&&t.asCID===t){const{version:n,code:r,multihash:i,bytes:s}=t;return new va(n,r,i,s||kAe(n,r,i.bytes))}else if(t!=null&&t[TAe]===!0){const{version:n,multihash:r,code:i}=t,s=C8e(r);return va.create(n,i,s)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(n!==Iw)throw new Error(`Version 0 CID must use dag-pb (code: ${Iw}) block encoding`);return new va(t,n,r,r.bytes)}case 1:{const i=kAe(t,n,r.bytes);return new va(t,n,r,i)}default:throw new Error("Invalid version")}}static createV0(t){return va.create(0,Iw,t)}static createV1(t,n){return va.create(1,t,n)}static decode(t){const[n,r]=va.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=va.inspectBytes(t),r=n.size-n.multihashSize,i=X0(t.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=i.subarray(n.multihashSize-n.digestSize),o=new qR(n.multihashCode,n.digestSize,s,i);return[n.version===0?va.createV0(o):va.createV1(n.codec,o),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[c,d]=ST(t.subarray(n));return n+=d,c};let i=r(),s=Iw;if(i===18?(i=0,n=0):i===1&&(s=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=n,a=r(),l=r(),u=n+l,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:l,multihashSize:f,size:u}}static parse(t,n){const[r,i]=A6t(t,n),s=va.decode(i);return s._baseCache.set(r,t),s}}const A6t=(e,t)=>{switch(e[0]){case"Q":{const n=t||$d;return[$d.prefix,n.decode(`${$d.prefix}${e}`)]}case $d.prefix:{const n=t||$d;return[$d.prefix,n.decode(e)]}case U_.prefix:{const n=t||U_;return[U_.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},C6t=(e,t,n)=>{const{prefix:r}=n;if(r!==$d.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=t.get(r);if(i==null){const s=n.encode(e).slice(1);return t.set(r,s),s}else return i},k6t=(e,t,n)=>{const{prefix:r}=n,i=t.get(r);if(i==null){const s=n.encode(e);return t.set(r,s),s}else return i},Iw=112,T6t=18,kAe=(e,t,n)=>{const r=P2(e),i=r+P2(t),s=new Uint8Array(i+n.byteLength);return I2(e,s,0),I2(t,s,r),s.set(n,i),s},TAe=Symbol.for("@ipld/js-cid/CID"),gC={writable:!1,configurable:!1,enumerable:!0},yC={writable:!1,enumerable:!1,configurable:!1},D6t="0.0.0-dev",L6t=(e,t)=>{if(e.test(D6t))console.warn(t);else throw new Error(t)},R6t=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,F6t={...s4t,...a4t,...u4t,...f4t,...p4t,...E4t,...C4t,...T4t,...O4t,...B4t},O6t={...l6t,...d6t},M6t={raw:y6t,json:S6t},$6t=Object.freeze(Object.defineProperty({__proto__:null,CID:va,bases:F6t,bytes:KMt,codecs:M6t,digest:i6t,hasher:s6t,hashes:O6t,varint:r6t},Symbol.toStringTag,{value:"Module"})),I6t=LCe($6t);var v4,DAe;function F8e(){if(DAe)return v4;DAe=1;const{bases:e}=I6t;function t(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const n=t("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),r=t("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return v4={utf8:n,"utf-8":n,hex:e.base16,latin1:r,ascii:r,binary:r,...e},v4}var b4,LAe;function P6t(){if(LAe)return b4;LAe=1;const e=F8e();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.encoder.encode(n).substring(1)}return b4=t,b4}var x4,RAe;function N6t(){if(RAe)return x4;RAe=1;const e=F8e();function t(n,r="utf8"){const i=e[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.decoder.decode(`${i.prefix}${n}`)}return x4=t,x4}var w4,FAe;function B6t(){if(FAe)return w4;FAe=1;function e(t,n){n||(n=t.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(n);let i=0;for(const s of t)r.set(s,i),i+=s.length;return r}return w4=e,w4}var _4,OAe;function z6t(){if(OAe)return _4;OAe=1;const e=BMt(),t=qMt(),{names:n}=HMt(),r=P6t(),i=N6t(),s=B6t(),o={};for(const y in n){const w=y;o[n[w]]=w}function a(y){if(!(y instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(y,"base16")}function l(y){return i(y,"base16")}function u(y){if(!(y instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(e.encode("base58btc",y)).slice(1)}function f(y){const w=y instanceof Uint8Array?r(y):y;return e.decode("z"+w)}function c(y){if(!(y instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(y.length<2)throw new Error("multihash too short. must be > 2 bytes.");const w=t.decode(y);if(!g(w))throw new Error(`multihash unknown function code: 0x${w.toString(16)}`);y=y.slice(t.decode.bytes);const _=t.decode(y);if(_<0)throw new Error(`multihash invalid length: ${_}`);if(y=y.slice(t.decode.bytes),y.length!==_)throw new Error(`multihash length inconsistent: 0x${r(y,"base16")}`);return{code:w,name:o[w],length:_,digest:y}}function d(y,w,_){if(!y||w===void 0)throw new Error("multihash encode requires at least two args: digest, code");const A=h(w);if(!(y instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(_==null&&(_=y.length),_&&y.length!==_)throw new Error("digest length should be equal to specified length.");const T=t.encode(A),D=t.encode(_);return s([T,D,y],T.length+D.length+y.length)}function h(y){let w=y;if(typeof y=="string"){if(n[y]===void 0)throw new Error(`Unrecognized hash function named: ${y}`);w=n[y]}if(typeof w!="number")throw new Error(`Hash function code should be a number. Got: ${w}`);if(o[w]===void 0&&!p(w))throw new Error(`Unrecognized function code: ${w}`);return w}function p(y){return y>0&&y<16}function g(y){return!!(p(y)||o[y])}function v(y){c(y)}function x(y){return v(y),y.subarray(0,2)}return _4={names:n,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:u,fromB58String:f,decode:c,encode:d,coerceCode:h,isAppCode:p,validate:v,prefix:x,isValidCode:g},_4}var E4,MAe;function fz(){if(MAe)return E4;MAe=1;const e=pS(),t=Cb(),n={array(r,i=!1,s=""){return e.toList(r,i,o=>n.format(o,s))},object(r){return e.toObject(r,i=>n.format(i))},null(r=null){return r===null&&(r=e.t("n/a")),e.toNothing(r)},number(r,i=""){return typeof r!="number"&&(r=parseFloat(r)),e.unit(t.numberFormatter.format(r),i)},string(r,i=""){return e.unit(e.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),i)},boolean(r){return r?"":""},format(r,i=""){return typeof r=="boolean"?n.boolean(r):typeof r=="number"?n.number(r,i):typeof r=="string"?n.string(r,i):Array.isArray(r)?n.array(r,i):e.isObject(r)?n.object(r):n.null()}};return E4=n,E4}const j6t="Afar",U6t="Abkhazian",q6t="Afrikaans",H6t="Akan",G6t="Amharic",V6t="Aragonese",W6t="Arabic",Y6t="Assamese",X6t="Avar",Z6t="Aymara",K6t="Azerbaijani",J6t="Bashkir",Q6t="Belarusian",e5t="Bulgarian",t5t="Bihari",n5t="Bislama",r5t="Bambara",i5t="Bengali",s5t="Tibetan",o5t="Breton",a5t="Bosnian",l5t="Catalan",u5t="Chechen",c5t="Chamorro",f5t="Corsican",d5t="Cree",h5t="Czech",p5t="Old Bulgarian",m5t="Chuvash",g5t="Welsh",y5t="Danish",v5t="German",b5t="Divehi",x5t="Dzongkha",w5t="Ewe",_5t="Greek",E5t="English",S5t="Esperanto",A5t="Spanish",C5t="Estonian",k5t="Basque",T5t="Persian",D5t="Peul",L5t="Finnish",R5t="Fijian",F5t="Faroese",O5t="French",M5t="West Frisian",$5t="Irish",I5t="Scottish Gaelic",P5t="Galician",N5t="Guarani",B5t="Gujarati",z5t="Manx",j5t="Hausa",U5t="Hebrew",q5t="Hindi",H5t="Hiri Motu",G5t="Croatian",V5t="Haitian",W5t="Hungarian",Y5t="Armenian",X5t="Herero",Z5t="Interlingua",K5t="Indonesian",J5t="Interlingue",Q5t="Igbo",e$t="Sichuan Yi",t$t="Inupiak",n$t="Ido",r$t="Icelandic",i$t="Italian",s$t="Inuktitut",o$t="Japanese",a$t="Javanese",l$t="Georgian",u$t="Kongo",c$t="Kikuyu",f$t="Kuanyama",d$t="Kazakh",h$t="Greenlandic",p$t="Cambodian",m$t="Kannada",g$t="Korean",y$t="Kanuri",v$t="Kashmiri",b$t="Kurdish",x$t="Komi",w$t="Cornish",_$t="Kirghiz",E$t="Latin",S$t="Luxembourgish",A$t="Ganda",C$t="Limburgian",k$t="Lingala",T$t="Laotian",D$t="Lithuanian",L$t="Latvian",R$t="Malagasy",F$t="Marshallese",O$t="Maori",M$t="Macedonian",$$t="Malayalam",I$t="Mongolian",P$t="Moldovan",N$t="Marathi",B$t="Malay",z$t="Maltese",j$t="Burmese",U$t="Nauruan",q$t="North Ndebele",H$t="Nepali",G$t="Ndonga",V$t="Dutch",W$t="Norwegian Nynorsk",Y$t="Norwegian",X$t="South Ndebele",Z$t="Navajo",K$t="Chichewa",J$t="Occitan",Q$t="Ojibwa",eIt="Oromo",tIt="Oriya",nIt="Ossetian",rIt="Punjabi",iIt="Pali",sIt="Polish",oIt="Pashto",aIt="Portuguese",lIt="Quechua",uIt="Raeto Romance",cIt="Kirundi",fIt="Romanian",dIt="Russian",hIt="Rwandi",pIt="Sanskrit",mIt="Sardinian",gIt="Sindhi",yIt="Sango",vIt="Serbo-Croatian",bIt="Sinhalese",xIt="Slovak",wIt="Slovenian",_It="Samoan",EIt="Shona",SIt="Somalia",AIt="Albanian",CIt="Serbian",kIt="Swati",TIt="Southern Sotho",DIt="Sundanese",LIt="Swedish",RIt="Swahili",FIt="Tamil",OIt="Telugu",MIt="Tajik",$It="Thai",IIt="Tigrinya",PIt="Turkmen",NIt="Tagalog",BIt="Tswana",zIt="Tonga",jIt="Turkish",UIt="Tsonga",qIt="Tatar",HIt="Twi",GIt="Tahitian",VIt="Uyghur",WIt="Ukrainian",YIt="Urdu",XIt="Venda",ZIt="Vietnamese",KIt="Volapk",JIt="Walloon",QIt="Wolof",ePt="Xhosa",tPt="Yiddish",nPt="Yoruba",rPt="Zhuang",iPt="Chinese",sPt="Zulu",oPt={aa:j6t,ab:U6t,af:q6t,ak:H6t,am:G6t,an:V6t,ar:W6t,as:Y6t,av:X6t,ay:Z6t,az:K6t,ba:J6t,be:Q6t,bg:e5t,bh:t5t,bi:n5t,bm:r5t,bn:i5t,bo:s5t,br:o5t,bs:a5t,ca:l5t,ce:u5t,ch:c5t,co:f5t,cr:d5t,cs:h5t,cu:p5t,cv:m5t,cy:g5t,da:y5t,de:v5t,dv:b5t,dz:x5t,ee:w5t,el:_5t,en:E5t,eo:S5t,es:A5t,et:C5t,eu:k5t,fa:T5t,ff:D5t,fi:L5t,fj:R5t,fo:F5t,fr:O5t,fy:M5t,ga:$5t,gd:I5t,gl:P5t,gn:N5t,gu:B5t,gv:z5t,ha:j5t,he:U5t,hi:q5t,ho:H5t,hr:G5t,ht:V5t,hu:W5t,hy:Y5t,hz:X5t,ia:Z5t,id:K5t,ie:J5t,ig:Q5t,ii:e$t,ik:t$t,io:n$t,is:r$t,it:i$t,iu:s$t,ja:o$t,jv:a$t,ka:l$t,kg:u$t,ki:c$t,kj:f$t,kk:d$t,kl:h$t,km:p$t,kn:m$t,ko:g$t,kr:y$t,ks:v$t,ku:b$t,kv:x$t,kw:w$t,ky:_$t,la:E$t,lb:S$t,lg:A$t,li:C$t,ln:k$t,lo:T$t,lt:D$t,lv:L$t,mg:R$t,mh:F$t,mi:O$t,mk:M$t,ml:$$t,mn:I$t,mo:P$t,mr:N$t,ms:B$t,mt:z$t,my:j$t,na:U$t,nd:q$t,ne:H$t,ng:G$t,nl:V$t,nn:W$t,no:Y$t,nr:X$t,nv:Z$t,ny:K$t,oc:J$t,oj:Q$t,om:eIt,or:tIt,os:nIt,pa:rIt,pi:iIt,pl:sIt,ps:oIt,pt:aIt,qu:lIt,rm:uIt,rn:cIt,ro:fIt,ru:dIt,rw:hIt,sa:pIt,sc:mIt,sd:gIt,sg:yIt,sh:vIt,si:bIt,sk:xIt,sl:wIt,sm:_It,sn:EIt,so:SIt,sq:AIt,sr:CIt,ss:kIt,st:TIt,su:DIt,sv:LIt,sw:RIt,ta:FIt,te:OIt,tg:MIt,th:$It,ti:IIt,tk:PIt,tl:NIt,tn:BIt,to:zIt,tr:jIt,ts:UIt,tt:qIt,tw:HIt,ty:GIt,ug:VIt,uk:WIt,ur:YIt,ve:XIt,vi:ZIt,vo:KIt,wa:JIt,wo:QIt,xh:ePt,yi:tPt,yo:nPt,za:rPt,zh:iPt,zu:sPt};var S4,$Ae;function O8e(){if($Ae)return S4;$Ae=1;const e=pS(),t=fz(),n=Cb(),r=rz(),i={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,u=null){let f=e.isObject(u)&&typeof u=="string"?u.title:s;return e.toLink(s,f,u.rel||"")},formatLink(s){return e.toList(s,!1,o=>e.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return e.e(e.t(i._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":e.e(s);let f;try{f=u.parse(s)}catch(c){return console.warn(c),l?"":e.e(s)}switch(f.type){case"image/tiff":return f.parameters.application==="geotiff"?f.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB 2";case"application/grib":return`GRIB ${f.parameters.edition||""}`.trim();case"application/bufr":return`BUFR ${f.parameters.edition||""}`.trim();case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";case"application/x-filegdb":return l?"Geodatabase":"Esri File Geodatabase";case"application/vnd.nitf":return l?"NITF":"National Imagery Transmission Format";case"application/3dtiles+json":return"3D Tiles";default:{let[c,d]=f.type.split("/");if(d=e.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(c){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return n.dateTimeFormatter.format(new Date(s))}catch{}return t.null()},formatPercent0to1(s,o,a={}){return t.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return n.dateFormatter.format(new Date(s))}catch{}return t.null()},formatDuration(s){if(typeof s=="string"){const o=r.getDependency("@musement/iso-duration");if(!o)return e.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(s).humanize("en");return u.length===0?e.e(e.t("none")):e.e(u)}return t.null()},formatLanguageCode(s){if(Array.isArray(s))return e.toList(s,!0,i.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return t.null();const o=oPt,[a,...l]=s.split("-");if(a in o){const u=o[a];return l.length>0?e.e(e.t(`${u} (${l.join(" ")})`)):e.e(e.t(u))}return e.e(e.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return t.null();if(s!=="other"&&s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return e.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let u=Array.isArray(l.links)?l.links.filter(f=>e.isObject(f)&&typeof f.href=="string"&&f.rel==="license"):[];return u.length>0?e.toList(u,!1,f=>e.toLink(f.href,f.title||s,"license")):t.string(s)},formatProviders(s){return e.toList(s,!1,o=>{let a=o.name,l="",u="";return typeof o.url=="string"&&o.url.length>0&&(a=e.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(f=>t.format(f)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(u=i.formatCommonMark(o.description)),`${a}${l}${u}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return t.null();const o=r.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!i.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else i.allowHtmlInCommonMark?a=s:a=e.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!e.isObject(s))return t.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return e.toList(o,!0,null,!1)},formatDOI(s){return s=t.format(s),e.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return e.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return e.toLink(o,a)}return t.format(o)})},formatCrsCode(s){if(typeof s=="string"){const[o,a]=s.split(":",2);switch(o.toUpperCase()){case"EPSG":case"ESRI":case"IAU_2015":case"IGNF":case"MKG":case"OGC":return e.toLink(`https://spatialreference.org/ref/${o.toLowerCase()}/${a}/`,s);default:return t.string(s)}}return t.null()},formatEPSG(s){return typeof s=="number"?i.formatCrsCode(`EPSG:${s}`):typeof s=="string"?i.formatCrsCode(s):t.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?t.null():s[0]===s[1]?t.format(s[0],a.unit):s[0]===null?`< ${t.format(s[1],a.unit)}`:s[1]===null?`> ${t.format(s[0],a.unit)}`:s.map(l=>t.format(l,a.unit)).join("  ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?t.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return e.isObject(s)?e.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+i.formatEPSG(s):typeof s.name=="string"?t.string(s.name):t.object(s):t.null()},formatTemporalExtent(s,o,a={}){if(!Array.isArray(s)||s.length!==2)return t.null();s=s.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=s;if(l||u){const f=a.shorten?n.dateFormatter:n.dateTimeFormatter;return l?u?f.formatRange(l,u):e.t("{0} until present",[f.format(l)]):e.t("Until {0}",[f.format(u)])}}catch{}return t.null()},formatTemporalExtents(s,o,a={}){let l=(u,f)=>u[0]===null?-1:n.collator.compare(u[0],f[0]);return e.toList(s,l,u=>i.formatTemporalExtent(u,o,a))},formatWKT2(s){if(typeof s!="string")return t.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${u}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return t.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return e.unit((s/Math.pow(1024,o)).toFixed(2)*1,i.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return t.null();const o=r.getDependency("multihashes");if(!o)return e.e(s);try{const a=o.decode(e.hexToUint8(s)),l=e.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${e.e(e.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${e.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return t.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?e.t("non-standard"):typeof s=="string"&&s in i.fileDataTypes?e.abbrev(e.t(s),e.t(i.fileDataTypes[s])):t.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${i.formatCSV(l)}]`)}return o.join("<br>")}else return i.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>t.format(l,a.unit)).join("  "):t.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(t.format).join(o?"; ":", ")}else return t.format(s)},formatImage(s,o){let a="",l=null;if(e.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return t.format(l);return`<img src="${e.e(l)}" title="${e.e(a)}" class="${e.e(o.replace(":","_"))}">`},formatPhone(s){return e.toLink(`tel:${s}`,s)},formatEmail(s){return e.toLink(`mailto:${s}`,s)},formatConcepts(s){return e.toList(s,!1,o=>{if(!e.isObject(o))return t.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=e.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${e.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=e.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${e.e(o.description)}</small>`),a})},formatAddress(s){return e.toList(s,!1,o=>{if(!e.isObject(o))return t.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return t.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return t.format(s);let o=function(f,c,d,h){let p=c.length;if(p%2===1)f.push(`Code: ${c}`);else{let g=p/2,v=c.substring(0,g);f.push(`${d}: ${v}`);let x=c.substring(g,p);f.push(`${h}: ${x}`)}},[a,l]=s.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(e.abbrev(e.t(a),e.t("Military Grid Reference System")));let[,f,c,d,h]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${e.t("UTM Zone")}: ${f}`),u.push(`${e.t("Latitude Band")}: ${c}`),u.push(`${e.t("Square Identifier")}: ${d}`),h&&o(u,h,e.t("Easting"),e.t("Northing"));break;case"MSIN":u.push(e.t("MODIS Sinusoidal Tile Grid")),o(u,l,e.t("Horizontal"),e.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);u.push(e.abbrev(e.t("WRS-"+p),e.t("Worldwide Reference System "+p))),o(u,l,e.t("Path"),e.t("Row"));break;case"DOQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quadrangle"))),u.push(`${e.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(e.t(a),e.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);u.push(`${e.t("Quadrangle")}: ${g}`);let v=l.substr(-2),x=v[0]==="N"?e.t("North"):e.t("South"),y=v[1]==="E"?e.t("East"):e.t("West");u.push(`${e.t("Quarter")}: ${x} ${y}`);break;case"MXRA":u.push(e.t("Maxar ARD Tile Grid"));let[w,_]=l.split(/-(.*)/);w.startsWith("Z")&&(w=w.substring(1)),u.push(`${e.t("UTM Zone")}: ${w}`),u.push(`${e.t("Quadkey")}: ${_}`);break;case"EASE":let[A,T]=l.split("-");if(A==="DGGS"){u.push(e.t("EASE-DGGS"));let[R,O,...B]=T.split(".");if(u.push(`${e.t("Level")}: ${R}`),O.length===6){u.push(`${e.t("Level 0 row cell")}: ${O.substring(0,3)}`),u.push(`${e.t("Level 0 column cell")}: ${O.substring(3,6)}`);for(let K in B){let L=B[K];L.length===2&&(u.push(`${e.t("Fraction of level {i} row cell",{i:K})}: ${L[0]}`),u.push(`${e.t("Fraction of level {i} column cell",{i:K})}: ${L[1]}`))}}break}case"CDEM":let[,D,k]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(e.t("Copernicus Digital Elevation Model Grid")),u.push(`${e.t("Easting")}: ${k}`),u.push(`${e.t("Northing")}: ${D}`);default:u.push(s)}return u.join("<br>")}};return S4=i,S4}var A4,IAe;function aPt(){if(IAe)return A4;IAe=1;const e=rz(),t=pS(),n=Cb(),r=fz(),i=O8e();function s(v,x,y,w,_){let A={};for(let T in x){let D;try{let k=T.split(/:(.*)/);k.length===1&&k.unshift(_);let R=k[0];if(typeof w=="function"&&!w(T,[T]))continue;D=x[T];let O=e.getSpecification(T,y);O.ext&&(R=O.ext);let B=!1;y==="summaries"&&O.listWithKeys&&Array.isArray(D)&&D.length>0&&(D=D[0],B=!0);let K=null,L=[];if(t.isObject(O.items)){let I=D;O.listWithKeys&&(I=Object.values(I));let U=[];Array.isArray(I)?U=t.keysFromListOfObjects(I):t.isObject(I)&&(U=Object.keys(I)),K={},L=O.itemOrder.filter(q=>U.includes(q)),U.forEach(q=>{typeof O.items[q]>"u"?(K[q]={label:t.formatKey(q),explain:q},L.push(q)):(K[q]=Object.assign({},O.items[q]),K[q].label=p(q,O.items[q]))})}let $;if(y==="summaries")if(!B&&t.isObject(D))if(typeof D.minimum<"u"&&typeof D.maximum<"u"){const I=U=>h(U,T,v,x,O,w,[T]);D.minimum===D.maximum?$=I(D.minimum):D.minimum===null?$=`< ${I(D.maximum)}`:D.maximum===null?$=`> ${I(D.minimum)}`:$=`${I(D.minimum)}  ${I(D.maximum)}`}else $=r.object(D);else if(e.externalRenderer&&K){let I=B?Object.assign({},D):D.slice(0);for(let U in I){let q=t.isObject(I[U])?{}:[];for(let Y in K)q[Y]=h(I[U][Y],Y,v,x,K[Y]);I[U]=q}}else Array.isArray(D)?$=t.toList(D,!O.custom&&!O.items,I=>h(I,T,v,x,O)):console.warn(`Invalid summary value: ${D}`);typeof $>"u"&&($=h(D,T,v,x,O,w,[T])),t.isObject(A[R])||(A[R]={extension:R,label:g(R),properties:{}}),A[R].properties[T]={label:p(T,O),value:D,formatted:$,items:K,itemOrder:L,spec:O}}catch(k){console.error(`Field '${T}' with value '${D}' resulted in an error`,k)}}return Object.values(A).sort((T,D)=>n.collator.compare(T.extension,D.extension))}function o(v,x,y=null,w=""){return s(x,v,"assets",y,w)}function a(v,x,y=null,w=""){return s(x,v,"links",y,w)}function l(v,x,y=null,w=""){return s(x,v,"providers",y,w)}function u(v,x=null,y=""){return s(v,v.summaries,"summaries",x,y)}function f(v,x=null,y=""){return s(v,v,"collection",x,y)}function c(v,x=null,y=""){return s(v,v,"catalog",x,y)}function d(v,x=null,y=""){return s(v,v.properties,"metadata",x,y)}function h(v,x,y=null,w=null,_=null,A=null,T=[]){if(t.isObject(_)||(_=e.getSpecification(x)),typeof _.format=="string"){let D=i[`format${_.format}`];return D||console.warn(`Formatter '${_.format}' not available.`),D(v,x,_,y,w)}else{if(typeof _.formatter=="function")return _.formatter(v,x,_,y,w);if(t.isObject(_.mapping)){let D=String(v);return typeof _.mapping[D]<"u"?v=_.mapping[D]:typeof _.mapping[D.toLowerCase()]<"u"?v=_.mapping[D.toLowerCase()]:typeof _.mapping[D.toUpperCase()]<"u"&&(v=_.mapping[D.toUpperCase()]),r.format(t.t(v),_.unit)}else{if(v===null&&_.null)return r.null(_.null);if(Array.isArray(v)){let D=(k,R)=>h(k,x,y,w,_,A,T.concat([R]));return typeof A=="function"&&T.length>0&&(v=v.filter((k,R)=>A(T[0],T.concat([R])))),e.externalRenderer&&(_.custom||_.items)?v.map(D):t.toList(v,!1,D)}else if(t.isObject(v)){let D=R=>t.isObject(_.items)?_.listWithKeys?{items:_.items,itemOrder:_.itemOrder}:_.items[R]:t.isObject(_.properties)?_.properties[R]:{},k=(R,O,B)=>h(R,O,y,B,D(O),A,T.concat([O]));if(e.externalRenderer&&(_.custom||_.items||_.properties)){let R={};for(let O in v)typeof A=="function"&&T.length>0&&!A(T[0],T.concat([O]))||(R[O]=k(v[O],O,v));return R}else{let R=B=>p(B,D(B)),O=_.listWithKeys?[]:_.itemOrder;return t.toObject(v,k,R,O,A,T)}}else return r.format(v,_.unit)}}}function p(v,x=null){if(t.isObject(x)||(x=e.getSpecification(v)),t.isObject(x)&&typeof x.label=="string"){if(typeof x.explain=="string")return x.explain.match(/^https?:\/\//i)?t.toLink(x.explain,t.t(x.label),"about"):t.abbrev(t.t(x.label),t.t(x.explain));if(typeof x.label=="string")return t.t(x.label)}return t.formatKey(v)}function g(v){return p(v,e.getExtension(v))}return A4={format:h,label:p,extension:g,formatCatalog:c,formatCollection:f,formatSummaries:u,formatItemProperties:d,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},A4}var C4,PAe;function lPt(){if(PAe)return C4;PAe=1;const e=rz();return e.importFields(iOt),e.addDependency("@musement/iso-duration",lMt),e.addDependency("content-type",uMt()),e.addDependency("commonmark",fMt()),e.addDependency("multihashes",z6t()),C4={...aPt(),Fields:e.exportFields(),Registry:e,Helper:pS(),DataTypes:fz(),Formatters:O8e(),I18N:Cb()},C4}var M8e=lPt();const k4=sa(M8e);function uPt(e){if(e.type==="Catalog")return k4.formatCatalog(e);if(e.type==="Collection")return k4.formatCollection(e);if(e.type==="Feature")return k4.formatItemProperties(e)}async function cPt(e){const n=await(await fetch(`${e.for}?ts=${Date.now()}`)).json();e.stacInfo=uPt(n),e.dispatchEvent(new CustomEvent("loaded"))}function xg(e,t,n){return KFt(Object.entries(t.stacProperties).filter(([r])=>e==null?void 0:e.includes(r)).reverse().sort(([r],[i])=>(e==null?void 0:e.indexOf(r))>(e==null?void 0:e.indexOf(i))?1:-1),n)}const fPt=`
:host {
  --color-primary-lighter: color-mix(in srgb, var(--primary-color), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
h1 {
  margin-block-start: 0.67em;
  margin-block-end: 0.67em;
  line-height: 1.5;
}
header h1 {
  font-size: 24px;
  color: var(--primary-color);
}
header h2 {
  font-size: 22px;
  color: var(--primary-color);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#body ul {
  padding: 0;
}
section#body > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#body li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#body .value li {
  margin-bottom: 0px;    
}
section#body slot:not([name=description]) ul li {
  list-style: none;
}
section#body .colon {
  margin-right: 4px;
}
section#body .label {
  font-weight: bold;
}
section#body ul li,
section#body ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#body ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--primary-color);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a,
footer h1 {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;function dPt(e=[]){return Ke`
    <section id="body" part="body">
      <ul class=${e.length===1?"single-property":qr}>
        ${su(e,([,t])=>Ke`
            <slot name=${t.label.toLowerCase()}>
              <li>
                ${Un(e.length>1,()=>Ke` <span class="label"> ${t.label}</span
                      ><span class="colon">:</span>`)}
                <span class="value">
                  ${Un(t.label.toLowerCase()==="description",()=>Ke`
                      <eox-stacinfo-shadow .content=${t.formatted}>
                      </eox-stacinfo-shadow>
                    `,()=>Ke`${Cc(t.formatted)}`)}
                </span>
              </li>
            </slot>
          `)}
      </ul>
    </section>
  `}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $8e=Symbol.for(""),hPt=e=>{if((e==null?void 0:e.r)===$8e)return e==null?void 0:e._$litStatic$},AT=e=>({_$litStatic$:e,r:$8e}),NAe=new Map,pPt=e=>(t,...n)=>{const r=n.length;let i,s;const o=[],a=[];let l,u=0,f=!1;for(;u<r;){for(l=t[u];u<r&&(s=n[u],(i=hPt(s))!==void 0);)l+=i+t[++u],f=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(t[r]),f){const c=o.join("$$lit$$");(t=NAe.get(c))===void 0&&(o.raw=o,NAe.set(c,t=o)),n=a}return e(t,...n)},I8e=pPt(Ke);function mPt(e=[]){return Ke`
    ${e.length>0?Ke`
          <header part="header">
            <slot name="header">
              ${su(e,([,t],n)=>I8e`
              <h${AT((n+1).toString())}>${Cc(t.formatted)}</h${AT((n+1).toString())}>
              `)}
            </slot>
          </header>
        `:qr}
  `}function gPt(e=[]){return Ke`
    <section id="tags" part="tags">
      <ul>
        ${su(e,([,t])=>Ke`<slot name=${t.label.toLowerCase()}
              ><li>
                <span class="label">${Cc(t.formatted)}</span>
              </li></slot
            >`)}
      </ul>
    </section>
  `}function yPt(e=[]){return Ke`
    ${Un(e.length>0,()=>Ke`
        <section id="featured" part="featured">
          ${su(e,([,t])=>Ke`
              <details>
                <summary>
                  <slot
                    name="featured-${t.label.toLowerCase()}-summary"
                    class="title"
                  >
                    ${t.label}
                    ${Un(t.length,()=>Ke` <span class="count">${t.length}</span> `)}
                  </slot>
                </summary>
                <div class="featured-container">
                  <slot name="featured-${t.label.toLowerCase()}">
                    ${Un(t.label.toLowerCase()==="description",()=>Ke`
                        <eox-stacinfo-shadow .content=${t.formatted}>
                        </eox-stacinfo-shadow>
                      `,()=>Ke`${Cc(t.formatted)}`)}
                  </slot>
                </div>
              </details>
            `)}
        </section>
      `)}
  `}function vPt(e=[]){return Ke`
    ${Un(e.length>0,()=>Ke`
        <footer part="footer">
          <slot name="footer">
            ${su(e,([t,n],r)=>I8e`
                  <div class="footer-container">
                    <h${AT((r+1).toString())}>
                      ${Cc(n.label)}
                    </h${AT((r+1).toString())}>
                    <small>${Cc(n.formatted)}</small>
                  </div>
                  ${Un(t==="sci:citation",()=>Ke`
                      <button
                        class="copy icon"
                        @click=${()=>navigator.clipboard.writeText(n.formatted)}
                      >
                        copy
                      </button>
                    `)}
                `)}
          </slot>
        </footer>
      `)}
  `}class bPt extends Zr{static get properties(){return{content:{type:String}}}constructor(){super(),this.content=null}render(){return Ke`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${Cc(this.content)}</div>`}}customElements.define("eox-stacinfo-shadow",bPt);class xPt extends Zr{static get properties(){return{allowHtml:{attribute:"allow-html",type:Boolean},unstyled:{attribute:"unstyled",type:Boolean},for:{attribute:"for",type:String},header:{attribute:!1,type:Array},tags:{attribute:!1,type:Array},body:{attribute:!1,type:Array},featured:{attribute:!1,type:Array},footer:{attribute:!1,type:Array},stacInfo:{attribute:!1,state:!0,type:Array},stacProperties:{attribute:!1,state:!0,type:Array}}}constructor(){super(),this.allowHtml=!1,this.unstyled=!1,this.for="",this.header=[],this.tags=[],this.body=[],this.featured=[],this.footer=[],this.stacInfo=[],this.stacProperties=[]}updated(t){t.has("for")&&cPt(this),t.has("stacInfo")&&(M8e.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0,JFt(this))}render(){return Ke`
      <style>
        :host {
          display: block;
        }
        ${!this.unstyled&&$D}
        ${!this.unstyled&&fPt}
      </style>
      <slot></slot>
      ${Un(this.stacInfo.length,()=>Ke`
          <!-- Header Component-->
          ${mPt(xg(this.header,this))}
          <main>
            ${xg(this.tags,this).length+xg(this.body,this).length>0?Ke`
                  <!-- Tags Component-->
                  ${gPt(xg(this.tags,this))}

                  <!-- Body Component-->
                  ${dPt(xg(this.body,this))}
                `:qr}

            <!-- Featured Component-->
            ${yPt(xg(this.featured,this,"featured"))}
          </main>

          <!-- Footer Component-->
          ${vPt(xg(this.footer,this))}
        `,()=>Ke`${qr}`)}
    `}}customElements.define("eox-stacinfo",xPt);const BAe={};function wPt(e){let t=BAe[e];if(t)return t;t=BAe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function N1(e,t){typeof t!="string"&&(t=N1.defaultChars);const n=wPt(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const f=a<<12&61440|l<<6&4032|u&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),f=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(f&192)===128){let c=a<<18&1835008|l<<12&258048|u<<6&4032|f&63;c<65536||c>1114111?i+="":(c-=65536,i+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),s+=9;continue}}i+=""}return i})}N1.defaultChars=";/?:@&=+$,#";N1.componentChars="";const zAe={};function _Pt(e){let t=zAe[e];if(t)return t;t=zAe[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function yS(e,t,n){typeof t!="string"&&(n=t,t=yS.defaultChars),typeof n>"u"&&(n=!0);const r=_Pt(t);let i="";for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=e.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}yS.defaultChars=";/?:@&=+$,-_.!~*'()#";yS.componentChars="-_.!~*'()";function dz(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function CT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const EPt=/^([a-z0-9.+-]+:)/i,SPt=/:[0-9]*$/,APt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,CPt=["<",">",'"',"`"," ","\r",`
`,"	"],kPt=["{","}","|","\\","^","`"].concat(CPt),TPt=["'"].concat(kPt),jAe=["%","/","?",";","#"].concat(TPt),UAe=["/","?","#"],DPt=255,qAe=/^[+a-z0-9A-Z_-]{0,63}$/,LPt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,HAe={javascript:!0,"javascript:":!0},GAe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function hz(e,t){if(e&&e instanceof CT)return e;const n=new CT;return n.parse(e,t),n}CT.prototype.parse=function(e,t){let n,r,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const u=APt.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=EPt.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(t||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&HAe[o])&&(s=s.substr(2),this.slashes=!0)),!HAe[o]&&(i||o&&!GAe[o])){let u=-1;for(let p=0;p<UAe.length;p++)r=s.indexOf(UAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);let f,c;u===-1?c=s.lastIndexOf("@"):c=s.lastIndexOf("@",u),c!==-1&&(f=s.slice(0,c),s=s.slice(c+1),this.auth=f),u=-1;for(let p=0;p<jAe.length;p++)r=s.indexOf(jAe[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const d=s.slice(0,u);s=s.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let g=0,v=p.length;g<v;g++){const x=p[g];if(x&&!x.match(qAe)){let y="";for(let w=0,_=x.length;w<_;w++)x.charCodeAt(w)>127?y+="x":y+=x[w];if(!y.match(qAe)){const w=p.slice(0,g),_=p.slice(g+1),A=x.match(LPt);A&&(w.push(A[1]),_.unshift(A[2])),_.length&&(s=_.join(".")+s),this.hostname=w.join(".");break}}}}this.hostname.length>DPt&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),GAe[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};CT.prototype.parseHost=function(e){let t=SPt.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const RPt=Object.freeze(Object.defineProperty({__proto__:null,decode:N1,encode:yS,format:dz,parse:hz},Symbol.toStringTag,{value:"Module"})),P8e=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,N8e=/[\0-\x1F\x7F-\x9F]/,FPt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,pz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,B8e=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,z8e=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,OPt=Object.freeze(Object.defineProperty({__proto__:null,Any:P8e,Cc:N8e,Cf:FPt,P:pz,S:B8e,Z:z8e},Symbol.toStringTag,{value:"Module"})),MPt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),$Pt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var T4;const IPt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),PPt=(T4=String.fromCodePoint)!==null&&T4!==void 0?T4:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function NPt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=IPt.get(e))!==null&&t!==void 0?t:e}var To;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(To||(To={}));const BPt=32;var Rp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Rp||(Rp={}));function rI(e){return e>=To.ZERO&&e<=To.NINE}function zPt(e){return e>=To.UPPER_A&&e<=To.UPPER_F||e>=To.LOWER_A&&e<=To.LOWER_F}function jPt(e){return e>=To.UPPER_A&&e<=To.UPPER_Z||e>=To.LOWER_A&&e<=To.LOWER_Z||rI(e)}function UPt(e){return e===To.EQUALS||jPt(e)}var Ao;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ao||(Ao={}));var gp;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(gp||(gp={}));class qPt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ao.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=gp.Strict}startEntity(t){this.decodeMode=t,this.state=Ao.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ao.EntityStart:return t.charCodeAt(n)===To.NUM?(this.state=Ao.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ao.NamedEntity,this.stateNamedEntity(t,n));case Ao.NumericStart:return this.stateNumericStart(t,n);case Ao.NumericDecimal:return this.stateNumericDecimal(t,n);case Ao.NumericHex:return this.stateNumericHex(t,n);case Ao.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|BPt)===To.LOWER_X?(this.state=Ao.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ao.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rI(i)||zPt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rI(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===To.SEMI)this.consumed+=1;else if(this.decodeMode===gp.Strict)return 0;return this.emitCodePoint(NPt(this.result),this.consumed),this.errors&&(t!==To.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Rp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=HPt(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===gp.Attribute&&(s===0||UPt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Rp.VALUE_LENGTH)>>14,s!==0){if(o===To.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==gp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Rp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Rp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ao.NamedEntity:return this.result!==0&&(this.decodeMode!==gp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ao.NumericDecimal:return this.emitNumericEntity(0,2);case Ao.NumericHex:return this.emitNumericEntity(0,3);case Ao.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ao.EntityStart:return 0}}}function j8e(e){let t="";const n=new qPt(e,r=>t+=PPt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function HPt(e,t,n,r){const i=(t&Rp.BRANCH_LENGTH)>>7,s=t&Rp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}const GPt=j8e(MPt);j8e($Pt);function U8e(e,t=gp.Legacy){return GPt(e,t)}function VPt(e){return Object.prototype.toString.call(e)}function mz(e){return VPt(e)==="[object String]"}const WPt=Object.prototype.hasOwnProperty;function YPt(e,t){return WPt.call(e,t)}function HR(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function q8e(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function gz(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function kT(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const H8e=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,XPt=/&([a-z#][a-z0-9]{1,31});/gi,ZPt=new RegExp(H8e.source+"|"+XPt.source,"gi"),KPt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function JPt(e,t){if(t.charCodeAt(0)===35&&KPt.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return gz(r)?kT(r):e}const n=U8e(e);return n!==e?n:e}function QPt(e){return e.indexOf("\\")<0?e:e.replace(H8e,"$1")}function B1(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(ZPt,function(t,n,r){return n||JPt(t,r)})}const e8t=/[&<>"]/,t8t=/[&<>"]/g,n8t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function r8t(e){return n8t[e]}function sm(e){return e8t.test(e)?e.replace(t8t,r8t):e}const i8t=/[.?*+^$[\]\\(){}|-]/g;function s8t(e){return e.replace(i8t,"\\$&")}function Zi(e){switch(e){case 9:case 32:return!0}return!1}function B2(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function z2(e){return pz.test(e)||B8e.test(e)}function j2(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function GR(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const o8t={mdurl:RPt,ucmicro:OPt},a8t=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:q8e,assign:HR,escapeHtml:sm,escapeRE:s8t,fromCodePoint:kT,has:YPt,isMdAsciiPunct:j2,isPunctChar:z2,isSpace:Zi,isString:mz,isValidEntityCode:gz,isWhiteSpace:B2,lib:o8t,normalizeReference:GR,unescapeAll:B1,unescapeMd:QPt},Symbol.toStringTag,{value:"Module"}));function l8t(e,t,n){let r,i,s,o;const a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(s=e.src.charCodeAt(e.pos),s===93&&(r--,r===0)){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),s===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}function u8t(e,t,n){let r,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=B1(e.slice(t+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return t===i||o!==0||(s.str=B1(e.slice(t,i)),s.pos=i,s.ok=!0),s}function c8t(e,t,n,r){let i,s=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=e.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;t++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=e.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=B1(e.slice(t,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=B1(e.slice(t,s)),o}const f8t=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:u8t,parseLinkLabel:l8t,parseLinkTitle:c8t},Symbol.toStringTag,{value:"Module"})),ad={};ad.code_inline=function(e,t,n,r,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+sm(s.content)+"</code>"};ad.code_block=function(e,t,n,r,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+sm(e[t].content)+`</code></pre>
`};ad.fence=function(e,t,n,r,i){const s=e[t],o=s.info?B1(s.info).trim():"";let a="",l="";if(o){const f=o.split(/(\s+)/g);a=f[0],l=f.slice(2).join("")}let u;if(n.highlight?u=n.highlight(s.content,a,l)||sm(s.content):u=sm(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const f=s.attrIndex("class"),c=s.attrs?s.attrs.slice():[];f<0?c.push(["class",n.langPrefix+a]):(c[f]=c[f].slice(),c[f][1]+=" "+n.langPrefix+a);const d={attrs:c};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${u}</code></pre>
`};ad.image=function(e,t,n,r,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(e,t,n)};ad.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};ad.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};ad.text=function(e,t){return sm(e[t].content)};ad.html_block=function(e,t){return e[t].content};ad.html_inline=function(e,t){return e[t].content};function kb(){this.rules=HR({},ad)}kb.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+sm(t.attrs[n][0])+'="'+sm(t.attrs[n][1])+'"';return i};kb.prototype.renderToken=function(t,n,r){const i=t[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<t.length)){const a=t[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};kb.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t)}return r};kb.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};kb.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;a==="inline"?r+=this.renderInline(e[s].children,t,n):typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t,n)}return r};function Nl(){this.__rules__=[],this.__cache__=null}Nl.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Nl.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Nl.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Nl.prototype.before=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Nl.prototype.after=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Nl.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Nl.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Nl.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Nl.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Nl.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Wc(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Wc.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Wc.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Wc.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Wc.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Wc.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function G8e(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}G8e.prototype.Token=Wc;const d8t=/\r\n?|\n/g,h8t=/\0/g;function p8t(e){let t;t=e.src.replace(d8t,`
`),t=t.replace(h8t,""),e.src=t}function m8t(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function g8t(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function y8t(e){return/^<a[>\s]/i.test(e)}function v8t(e){return/^<\/a\s*>/i.test(e)}function b8t(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(y8t(a.content)&&s>0&&s--,v8t(a.content)&&s++),!(s>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const l=a.content;let u=e.md.linkify.match(l);const f=[];let c=a.level,d=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,g=e.md.normalizeLink(p);if(!e.md.validateLink(g))continue;let v=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const x=u[h].index;if(x>d){const A=new e.Token("text","",0);A.content=l.slice(d,x),A.level=c,f.push(A)}const y=new e.Token("link_open","a",1);y.attrs=[["href",g]],y.level=c++,y.markup="linkify",y.info="auto",f.push(y);const w=new e.Token("text","",0);w.content=v,w.level=c,f.push(w);const _=new e.Token("link_close","a",-1);_.level=--c,_.markup="linkify",_.info="auto",f.push(_),d=u[h].lastIndex}if(d<l.length){const h=new e.Token("text","",0);h.content=l.slice(d),h.level=c,f.push(h)}t[n].children=i=q8e(i,o,f)}}}}const V8e=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,x8t=/\((c|tm|r)\)/i,w8t=/\((c|tm|r)\)/ig,_8t={c:"",r:"",tm:""};function E8t(e,t){return _8t[t.toLowerCase()]}function S8t(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(w8t,E8t)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function A8t(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&V8e.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function C8t(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(x8t.test(e.tokens[t].content)&&S8t(e.tokens[t].children),V8e.test(e.tokens[t].content)&&A8t(e.tokens[t].children))}const k8t=/['"]/,VAe=/['"]/g,WAe="";function vC(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function T8t(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const s=e[i],o=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){VAe.lastIndex=l;const f=VAe.exec(a);if(!f)break;let c=!0,d=!0;l=f.index+1;const h=f[0]==="'";let p=32;if(f.index-1>=0)p=a.charCodeAt(f.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let g=32;if(l<u)g=a.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){g=e[n].content.charCodeAt(0);break}const v=j2(p)||z2(String.fromCharCode(p)),x=j2(g)||z2(String.fromCharCode(g)),y=B2(p),w=B2(g);if(w?c=!1:x&&(y||v||(c=!1)),y?d=!1:v&&(w||x||(d=!1)),g===34&&f[0]==='"'&&p>=48&&p<=57&&(d=c=!1),c&&d&&(c=v,d=x),!c&&!d){h&&(s.content=vC(s.content,f.index,WAe));continue}if(d)for(n=r.length-1;n>=0;n--){let _=r[n];if(r[n].level<o)break;if(_.single===h&&r[n].level===o){_=r[n];let A,T;h?(A=t.md.options.quotes[2],T=t.md.options.quotes[3]):(A=t.md.options.quotes[0],T=t.md.options.quotes[1]),s.content=vC(s.content,f.index,T),e[_.token].content=vC(e[_.token].content,_.pos,A),l+=T.length-1,_.token===i&&(l+=A.length-1),a=s.content,u=a.length,r.length=n;continue e}}c?r.push({token:i,pos:f.index,single:h,level:o}):d&&h&&(s.content=vC(s.content,f.index,WAe))}}}function D8t(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!k8t.test(e.tokens[t].content)||T8t(e.tokens[t].children,e)}function L8t(e){let t,n;const r=e.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(t=0;t<a;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<a;t++)o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const D4=[["normalize",p8t],["block",m8t],["inline",g8t],["linkify",b8t],["replacements",C8t],["smartquotes",D8t],["text_join",L8t]];function yz(){this.ruler=new Nl;for(let e=0;e<D4.length;e++)this.ruler.push(D4[e][0],D4[e][1])}yz.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};yz.prototype.State=G8e;function ld(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,u=i.length,f=!1;o<u;o++){const c=i.charCodeAt(o);if(!f)if(Zi(c)){a++,c===9?l+=4-l%4:l++;continue}else f=!0;(c===10||o===u-1)&&(c!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),f=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ld.prototype.push=function(e,t,n){const r=new Wc(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};ld.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ld.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ld.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Zi(r))break}return t};ld.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Zi(this.src.charCodeAt(--t)))return t+1;return t};ld.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};ld.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};ld.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const s=new Array(n-t);for(let o=0,a=t;a<n;a++,o++){let l=0;const u=this.bMarks[a];let f=u,c;for(a+1<n||i?c=this.eMarks[a]+1:c=this.eMarks[a];f<c&&l<r;){const d=this.src.charCodeAt(f);if(Zi(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(f-u<this.tShift[a])l++;else break;f++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(f,c):s[o]=this.src.slice(f,c)}return s.join("")};ld.prototype.Token=Wc;const R8t=65536;function L4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function YAe(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=e.substring(o,r-1),o=r):(t.push(a+e.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(o)),t}function F8t(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Zi(a)||o===45&&Zi(a))return!1;for(;s<e.eMarks[i];){const _=e.src.charCodeAt(s);if(_!==124&&_!==45&&_!==58&&!Zi(_))return!1;s++}let l=L4(e,t+1),u=l.split("|");const f=[];for(let _=0;_<u.length;_++){const A=u[_].trim();if(!A){if(_===0||_===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=L4(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=YAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const c=u.length;if(c===0||c!==f.length)return!1;if(r)return!0;const d=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),g=[t,0];p.map=g;const v=e.push("thead_open","thead",1);v.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let _=0;_<u.length;_++){const A=e.push("th_open","th",1);f[_]&&(A.attrs=[["style","text-align:"+f[_]]]);const T=e.push("inline","",0);T.content=u[_].trim(),T.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let y,w=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let _=!1;for(let T=0,D=h.length;T<D;T++)if(h[T](e,i,n,!0)){_=!0;break}if(_||(l=L4(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(u=YAe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=c-u.length,w>R8t))break;if(i===t+2){const T=e.push("tbody_open","tbody",1);T.map=y=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[i,i+1];for(let T=0;T<c;T++){const D=e.push("td_open","td",1);f[T]&&(D.attrs=[["style","text-align:"+f[T]]]);const k=e.push("inline","",0);k.content=u[T]?u[T].trim():"",k.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return y&&(e.push("tbody_close","tbody",-1),y[1]=i),e.push("table_close","table",-1),g[1]=i,e.parentType=d,e.line=i,!0}function O8t(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function M8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const o=e.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=e.skipChars(i,o);let l=i-a;if(l<3)return!1;const u=e.src.slice(a,i),f=e.src.slice(i,s);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let c=t,d=!1;for(;c++,!(c>=n||(i=a=e.bMarks[c]+e.tShift[c],s=e.eMarks[c],i<s&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(i)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(i=e.skipChars(i,o),!(i-a<l)&&(i=e.skipSpaces(i),!(i<s)))){d=!0;break}l=e.sCount[t],e.line=c+(d?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,c,l,!0),h.markup=u,h.map=[t,e.line],!0}function $8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],f=[],c=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const w=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],s=e.eMarks[p],i>=s)break;if(e.src.charCodeAt(i++)===62&&!w){let A=e.sCount[p]+1,T,D;e.src.charCodeAt(i)===32?(i++,A++,D=!1,T=!0):e.src.charCodeAt(i)===9?(T=!0,(e.bsCount[p]+A)%4===3?(i++,A++,D=!1):D=!0):T=!1;let k=A;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<s;){const R=e.src.charCodeAt(i);if(Zi(R))R===9?k+=4-(k+e.bsCount[p]+(D?1:0))%4:k++;else break;i++}h=i>=s,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(T?1:0),u.push(e.sCount[p]),e.sCount[p]=k-A,f.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(h)break;let _=!1;for(let A=0,T=c.length;A<T;A++)if(c[A](e,p,n,!0)){_=!0;break}if(_){e.lineMax=p,e.blkIndent!==0&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]=-1}const g=e.blkIndent;e.blkIndent=0;const v=e.push("blockquote_open","blockquote",1);v.markup=">";const x=[t,0];v.map=x,e.md.block.tokenize(e,t,p);const y=e.push("blockquote_close","blockquote",-1);y.markup=">",e.lineMax=o,e.parentType=d,x[1]=e.line;for(let w=0;w<f.length;w++)e.bMarks[w+t]=a[w],e.tShift[w+t]=f[w],e.sCount[w+t]=u[w],e.bsCount[w+t]=l[w];return e.blkIndent=g,!0}function I8t(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const u=e.src.charCodeAt(s++);if(u!==o&&!Zi(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function XAe(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=e.src.charCodeAt(r);if(!Zi(s))return-1}return r}function ZAe(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=e.src.charCodeAt(i),!Zi(s))?-1:i}function P8t(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function N8t(e,t,n,r){let i,s,o,a,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let c,d,h;if((h=ZAe(e,l))>=0){if(c=!0,o=e.bMarks[l]+e.tShift[l],d=Number(e.src.slice(o,h-1)),f&&d!==1)return!1}else if((h=XAe(e,l))>=0)c=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),g=e.tokens.length;c?(a=e.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=e.push("bullet_list_open","ul",1);const v=[l,0];a.map=v,a.markup=String.fromCharCode(p);let x=!1;const y=e.md.block.ruler.getRules("list"),w=e.parentType;for(e.parentType="list";l<n;){s=h,i=e.eMarks[l];const _=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let A=_;for(;s<i;){const I=e.src.charCodeAt(s);if(I===9)A+=4-(A+e.bsCount[l])%4;else if(I===32)A++;else break;s++}const T=s;let D;T>=i?D=1:D=A-_,D>4&&(D=1);const k=_+D;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const R=[l,0];a.map=R,c&&(a.info=e.src.slice(o,h-1));const O=e.tight,B=e.tShift[l],K=e.sCount[l],L=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=k,e.tight=!0,e.tShift[l]=T-e.bMarks[l],e.sCount[l]=A,T>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=L,e.tShift[l]=B,e.sCount[l]=K,e.tight=O,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=e.line,R[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let $=!1;for(let I=0,U=y.length;I<U;I++)if(y[I](e,l,n,!0)){$=!0;break}if($)break;if(c){if(h=ZAe(e,l),h<0)break;o=e.bMarks[l]+e.tShift[l]}else if(h=XAe(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return c?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),v[1]=l,e.line=l,e.parentType=w,u&&P8t(e,g),!0}function B8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(y){const w=e.lineMax;if(y>=w||e.isEmpty(y))return null;let _=!1;if(e.sCount[y]-e.blkIndent>3&&(_=!0),e.sCount[y]<0&&(_=!0),!_){const D=e.md.block.ruler.getRules("reference"),k=e.parentType;e.parentType="reference";let R=!1;for(let O=0,B=D.length;O<B;O++)if(D[O](e,y,w,!0)){R=!0;break}if(e.parentType=k,R)return null}const A=e.bMarks[y]+e.tShift[y],T=e.eMarks[y];return e.src.slice(A,T+1)}let l=e.src.slice(i,s+1);s=l.length;let u=-1;for(i=1;i<s;i++){const y=l.charCodeAt(i);if(y===91)return!1;if(y===93){u=i;break}else if(y===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(y===92&&(i++,i<s&&l.charCodeAt(i)===10)){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<s;i++){const y=l.charCodeAt(i);if(y===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Zi(y))break}const f=e.md.helpers.parseLinkDestination(l,i,s);if(!f.ok)return!1;const c=e.md.normalizeLink(f.str);if(!e.md.validateLink(c))return!1;i=f.pos;const d=i,h=o,p=i;for(;i<s;i++){const y=l.charCodeAt(i);if(y===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Zi(y))break}let g=e.md.helpers.parseLinkTitle(l,i,s);for(;g.can_continue;){const y=a(o);if(y===null)break;l+=y,i=s,s=l.length,o++,g=e.md.helpers.parseLinkTitle(l,i,s,g)}let v;for(i<s&&p!==i&&g.ok?(v=g.str,i=g.pos):(v="",i=d,o=h);i<s;){const y=l.charCodeAt(i);if(!Zi(y))break;i++}if(i<s&&l.charCodeAt(i)!==10&&v)for(v="",i=d,o=h;i<s;){const y=l.charCodeAt(i);if(!Zi(y))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const x=GR(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:v,href:c}),e.line=o),!0):!1}const z8t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],j8t="[a-zA-Z_:][a-zA-Z0-9:._-]*",U8t="[^\"'=<>`\\x00-\\x20]+",q8t="'[^']*'",H8t='"[^"]*"',G8t="(?:"+U8t+"|"+q8t+"|"+H8t+")",V8t="(?:\\s+"+j8t+"(?:\\s*=\\s*"+G8t+")?)",W8e="<[A-Za-z][A-Za-z0-9\\-]*"+V8t+"*\\s*\\/?>",Y8e="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",W8t="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Y8t="<[?][\\s\\S]*?[?]>",X8t="<![A-Za-z][^>]*>",Z8t="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",K8t=new RegExp("^(?:"+W8e+"|"+Y8e+"|"+W8t+"|"+Y8t+"|"+X8t+"|"+Z8t+")"),J8t=new RegExp("^(?:"+W8e+"|"+Y8e+")"),Qy=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+z8t.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(J8t.source+"\\s*$"),/^$/,!1]];function Q8t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let o=e.src.slice(i,s),a=0;for(;a<Qy.length&&!Qy[a][0].test(o);a++);if(a===Qy.length)return!1;if(r)return Qy[a][2];let l=t+1;if(!Qy[a][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],o=e.src.slice(i,s),Qy[a][1].test(o)){o.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function eNt(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=e.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=e.src.charCodeAt(++i);if(a>6||i<s&&!Zi(o))return!1;if(r)return!0;s=e.skipSpacesBack(s,i);const l=e.skipCharsBack(s,35,i);l>i&&Zi(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;const u=e.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(i,s).trim(),f.map=[t,e.line],f.children=[];const c=e.push("heading_close","h"+String(a),-1);return c.markup="########".slice(0,a),!0}function tNt(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,o,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let h=e.bMarks[a]+e.tShift[a];const p=e.eMarks[a];if(h<p&&(o=e.src.charCodeAt(h),(o===45||o===61)&&(h=e.skipChars(h,o),h=e.skipSpaces(h),h>=p))){s=o===61?1:2;break}}if(e.sCount[a]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,a,n,!0)){d=!0;break}if(d)break}if(!s)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const u=e.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const c=e.push("heading_close","h"+String(s),-1);return c.markup=String.fromCharCode(o),e.parentType=i,!0}function nNt(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let u=!1;for(let f=0,c=r.length;f<c;f++)if(r[f](e,s,n,!0)){u=!0;break}if(u)break}const o=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const bC=[["table",F8t,["paragraph","reference"]],["code",O8t],["fence",M8t,["paragraph","reference","blockquote","list"]],["blockquote",$8t,["paragraph","reference","blockquote","list"]],["hr",I8t,["paragraph","reference","blockquote","list"]],["list",N8t,["paragraph","reference","blockquote"]],["reference",B8t],["html_block",Q8t,["paragraph","reference","blockquote"]],["heading",eNt,["paragraph","reference","blockquote"]],["lheading",tNt],["paragraph",nNt]];function VR(){this.ruler=new Nl;for(let e=0;e<bC.length;e++)this.ruler.push(bC[e][0],bC[e][1],{alt:(bC[e][2]||[]).slice()})}VR.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,s=e.md.options.maxNesting;let o=t,a=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=s){e.line=n;break}const l=e.line;let u=!1;for(let f=0;f<i;f++)if(u=r[f](e,o,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),o=e.line,o<n&&e.isEmpty(o)&&(a=!0,o++,e.line=o)}};VR.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};VR.prototype.State=ld;function vS(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}vS.prototype.pushPending=function(){const e=new Wc("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};vS.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Wc(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};vS.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-e,a=s<n?this.src.charCodeAt(s):32,l=j2(i)||z2(String.fromCharCode(i)),u=j2(a)||z2(String.fromCharCode(a)),f=B2(i),c=B2(a),d=!c&&(!u||f||l),h=!f&&(!l||c||u);return{can_open:d&&(t||!h||l),can_close:h&&(t||!d||u),length:o}};vS.prototype.Token=Wc;function rNt(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function iNt(e,t){let n=e.pos;for(;n<e.posMax&&!rNt(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const sNt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function oNt(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(sNt);if(!i)return!1;const s=i[1],o=e.md.linkify.matchAtStart(e.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=e.md.normalizeLink(a);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="linkify",c.info="auto"}return e.pos+=a.length-s.length,!0}function aNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Zi(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const vz=[];for(let e=0;e<256;e++)vz.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){vz[e.charCodeAt(0)]=1});function lNt(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Zi(i));)n++;return e.pos=n,!0}let s=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=e.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=e.src[n+1],n++)}const o="\\"+s;if(!t){const a=e.push("text_special","",0);i<256&&vz[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return e.pos=n+1,!0}function uNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=e.posMax;for(;n<s&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(i,n),a=o.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=o),e.pos+=a,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&e.src.charCodeAt(l)===96;)l++;const f=l-u;if(f===a){if(!t){const c=e.push("code_inline","code",0);c.markup=o,c.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=u}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=a,!0}function cNt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=e.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=e.push("text","",0),a.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function KAe(e,t){let n;const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o.marker!==126||o.end===-1)continue;const a=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[s],e.tokens[s]=n)}}function fNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;KAe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&KAe(e,t[r].delimiters)}const X8e={tokenize:cNt,postProcess:fNt};function dNt(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let s=0;s<i.length;s++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function JAe(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],o=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=e.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function hNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;JAe(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&JAe(e,t[r].delimiters)}const Z8e={tokenize:dNt,postProcess:hNt};function pNt(e,t){let n,r,i,s,o="",a="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,c=e.posMax,d=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<c&&e.src.charCodeAt(p)===40){for(u=!1,p++;p<c&&(n=e.src.charCodeAt(p),!(!Zi(n)&&n!==10));p++);if(p>=c)return!1;if(l=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(o=e.md.normalizeLink(i.str),e.md.validateLink(o)?p=i.pos:o="",l=p;p<c&&(n=e.src.charCodeAt(p),!(!Zi(n)&&n!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<c&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<c&&(n=e.src.charCodeAt(p),!(!Zi(n)&&n!==10));p++);}(p>=c||e.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof e.env.references>"u")return!1;if(p<c&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(d,h)),s=e.env.references[GR(r)],!s)return e.pos=f,!1;o=s.href,a=s.title}if(!t){e.pos=d,e.posMax=h;const g=e.push("link_open","a",1),v=[["href",o]];g.attrs=v,a&&v.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=c,!0}function mNt(e,t){let n,r,i,s,o,a,l,u,f="";const c=e.pos,d=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(s=p+1,s<d&&e.src.charCodeAt(s)===40){for(s++;s<d&&(n=e.src.charCodeAt(s),!(!Zi(n)&&n!==10));s++);if(s>=d)return!1;for(u=s,a=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),a.ok&&(f=e.md.normalizeLink(a.str),e.md.validateLink(f)?s=a.pos:f=""),u=s;s<d&&(n=e.src.charCodeAt(s),!(!Zi(n)&&n!==10));s++);if(a=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<d&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<d&&(n=e.src.charCodeAt(s),!(!Zi(n)&&n!==10));s++);else l="";if(s>=d||e.src.charCodeAt(s)!==41)return e.pos=c,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<d&&e.src.charCodeAt(s)===91?(u=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(u,s++):s=p+1):s=p+1,i||(i=e.src.slice(h,p)),o=e.env.references[GR(i)],!o)return e.pos=c,!1;f=o.href,l=o.title}if(!t){r=e.src.slice(h,p);const g=[];e.md.inline.parse(r,e.md,e.env,g);const v=e.push("image","img",0),x=[["src",f],["alt",""]];v.attrs=x,v.children=g,v.content=r,l&&x.push(["title",l])}return e.pos=s,e.posMax=d,!0}const gNt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,yNt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function vNt(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=e.src.slice(r+1,n);if(yNt.test(s)){const o=e.md.normalizeLink(s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}if(gNt.test(s)){const o=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}return!1}function bNt(e){return/^<a[>\s]/i.test(e)}function xNt(e){return/^<\/a\s*>/i.test(e)}function wNt(e){const t=e|32;return t>=97&&t<=122}function _Nt(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!wNt(i))return!1;const s=e.src.slice(r).match(K8t);if(!s)return!1;if(!t){const o=e.push("html_inline","",0);o.content=s[0],bNt(o.content)&&e.linkLevel++,xNt(o.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const ENt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,SNt=/^&([a-z][a-z0-9]{1,31});/i;function ANt(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const s=e.src.slice(n).match(ENt);if(s){if(!t){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=e.push("text_special","",0);a.content=gz(o)?kT(o):kT(65533),a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(SNt);if(s){const o=U8e(s[0]);if(o!==s[0]){if(!t){const a=e.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function QAe(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=e[o];if(s.push(0),(e[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,f=u;for(;u>l;u-=s[u]+1){const c=e[u];if(c.marker===a.marker&&c.open&&c.end<0){let d=!1;if((c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(d=!0),!d){const h=u>0&&!e[u-1].open?s[u-1]+1:0;s[o]=o-u+h,s[u]=h,a.open=!1,c.end=o,c.close=!1,f=-1,i=-2;break}}}f!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function CNt(e){const t=e.tokens_meta,n=e.tokens_meta.length;QAe(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&QAe(t[r].delimiters)}function kNt(e){let t,n,r=0;const i=e.tokens,s=e.tokens.length;for(t=n=0;t<s;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const R4=[["text",iNt],["linkify",oNt],["newline",aNt],["escape",lNt],["backticks",uNt],["strikethrough",X8e.tokenize],["emphasis",Z8e.tokenize],["link",pNt],["image",mNt],["autolink",vNt],["html_inline",_Nt],["entity",ANt]],F4=[["balance_pairs",CNt],["strikethrough",X8e.postProcess],["emphasis",Z8e.postProcess],["fragments_join",kNt]];function bS(){this.ruler=new Nl;for(let e=0;e<R4.length;e++)this.ruler.push(R4[e][0],R4[e][1]);this.ruler2=new Nl;for(let e=0;e<F4.length;e++)this.ruler2.push(F4[e][0],F4[e][1])}bS.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let o=!1;if(e.level<i){for(let a=0;a<r;a++)if(e.level++,o=n[a](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,s[t]=e.pos};bS.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const s=e.pos;let o=!1;if(e.level<i){for(let a=0;a<n;a++)if(o=t[a](e,!1),o){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};bS.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};bS.prototype.State=vS;function TNt(e){const t={};e=e||{},t.src_Any=P8e.source,t.src_Cc=N8e.source,t.src_Z=z8e.source,t.src_P=pz.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function iI(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function WR(e){return Object.prototype.toString.call(e)}function DNt(e){return WR(e)==="[object String]"}function LNt(e){return WR(e)==="[object Object]"}function RNt(e){return WR(e)==="[object RegExp]"}function eCe(e){return WR(e)==="[object Function]"}function FNt(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const K8e={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function ONt(e){return Object.keys(e||{}).reduce(function(t,n){return t||K8e.hasOwnProperty(n)},!1)}const MNt={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},$Nt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",INt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function PNt(e){e.__index__=-1,e.__text_cache__=""}function NNt(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function tCe(){return function(e,t){t.normalize(e)}}function TT(e){const t=e.re=TNt(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push($Nt),n.push(t.src_xn),t.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){const l=e.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[a]=u,LNt(l)){RNt(l.validate)?u.validate=NNt(l.validate):eCe(l.validate)?u.validate=l.validate:s(a,l),eCe(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=tCe();return}if(DNt(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:tCe()};const o=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(FNt).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),PNt(e)}function BNt(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function sI(e,t){const n=new BNt(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function du(e,t){if(!(this instanceof du))return new du(e,t);t||ONt(e)&&(t=e,e={}),this.__opts__=iI({},K8e,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=iI({},MNt,e),this.__compiled__={},this.__tlds__=INt,this.__tlds_replaced__=!1,this.re={},TT(this)}du.prototype.add=function(t,n){return this.__schemas__[t]=n,TT(this),this};du.prototype.set=function(t){return this.__opts__=iI(this.__opts__,t),this};du.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,s,o,a,l,u,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(s=this.testSchemaAt(t,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};du.prototype.pretest=function(t){return this.re.pretest.test(t)};du.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};du.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(sI(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(sI(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};du.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,sI(this,0)):null};du.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),TT(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,TT(this),this)};du.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};du.prototype.onCompile=function(){};const Uv=2147483647,Cf=36,bz=1,U2=26,zNt=38,jNt=700,J8e=72,Q8e=128,eNe="-",UNt=/^xn--/,qNt=/[^\0-\x7F]/,HNt=/[\x2E\u3002\uFF0E\uFF61]/g,GNt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O4=Cf-bz,kf=Math.floor,M4=String.fromCharCode;function hp(e){throw new RangeError(GNt[e])}function VNt(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function tNe(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(HNt,".");const i=e.split("."),s=VNt(i,t).join(".");return r+s}function nNe(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const WNt=e=>String.fromCodePoint(...e),YNt=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Cf},nCe=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},rNe=function(e,t,n){let r=0;for(e=n?kf(e/jNt):e>>1,e+=kf(e/t);e>O4*U2>>1;r+=Cf)e=kf(e/O4);return kf(r+(O4+1)*e/(e+zNt))},iNe=function(e){const t=[],n=e.length;let r=0,i=Q8e,s=J8e,o=e.lastIndexOf(eNe);o<0&&(o=0);for(let a=0;a<o;++a)e.charCodeAt(a)>=128&&hp("not-basic"),t.push(e.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let f=1,c=Cf;;c+=Cf){a>=n&&hp("invalid-input");const d=YNt(e.charCodeAt(a++));d>=Cf&&hp("invalid-input"),d>kf((Uv-r)/f)&&hp("overflow"),r+=d*f;const h=c<=s?bz:c>=s+U2?U2:c-s;if(d<h)break;const p=Cf-h;f>kf(Uv/p)&&hp("overflow"),f*=p}const u=t.length+1;s=rNe(r-l,u,l==0),kf(r/u)>Uv-i&&hp("overflow"),i+=kf(r/u),r%=u,t.splice(r++,0,i)}return String.fromCodePoint(...t)},sNe=function(e){const t=[];e=nNe(e);const n=e.length;let r=Q8e,i=0,s=J8e;for(const l of e)l<128&&t.push(M4(l));const o=t.length;let a=o;for(o&&t.push(eNe);a<n;){let l=Uv;for(const f of e)f>=r&&f<l&&(l=f);const u=a+1;l-r>kf((Uv-i)/u)&&hp("overflow"),i+=(l-r)*u,r=l;for(const f of e)if(f<r&&++i>Uv&&hp("overflow"),f===r){let c=i;for(let d=Cf;;d+=Cf){const h=d<=s?bz:d>=s+U2?U2:d-s;if(c<h)break;const p=c-h,g=Cf-h;t.push(M4(nCe(h+p%g,0))),c=kf(p/g)}t.push(M4(nCe(c,0))),s=rNe(i,u,a===o),i=0,++a}++i,++r}return t.join("")},XNt=function(e){return tNe(e,function(t){return UNt.test(t)?iNe(t.slice(4).toLowerCase()):t})},ZNt=function(e){return tNe(e,function(t){return qNt.test(t)?"xn--"+sNe(t):t})},oNe={version:"2.3.1",ucs2:{decode:nNe,encode:WNt},decode:iNe,encode:sNe,toASCII:ZNt,toUnicode:XNt},KNt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},JNt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},QNt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},e9t={default:KNt,zero:JNt,commonmark:QNt},t9t=/^(vbscript|javascript|file|data):/,n9t=/^data:image\/(gif|png|jpeg|webp);/;function r9t(e){const t=e.trim().toLowerCase();return t9t.test(t)?n9t.test(t):!0}const aNe=["http:","https:","mailto:"];function i9t(e){const t=hz(e,!0);if(t.hostname&&(!t.protocol||aNe.indexOf(t.protocol)>=0))try{t.hostname=oNe.toASCII(t.hostname)}catch{}return yS(dz(t))}function s9t(e){const t=hz(e,!0);if(t.hostname&&(!t.protocol||aNe.indexOf(t.protocol)>=0))try{t.hostname=oNe.toUnicode(t.hostname)}catch{}return N1(dz(t),N1.defaultChars+"%")}function Uu(e,t){if(!(this instanceof Uu))return new Uu(e,t);t||mz(e)||(t=e||{},e="default"),this.inline=new bS,this.block=new VR,this.core=new yz,this.renderer=new kb,this.linkify=new du,this.validateLink=r9t,this.normalizeLink=i9t,this.normalizeLinkText=s9t,this.utils=a8t,this.helpers=HR({},f8t),this.options={},this.configure(e),t&&this.set(t)}Uu.prototype.set=function(e){return HR(this.options,e),this};Uu.prototype.configure=function(e){const t=this;if(mz(e)){const n=e;if(e=e9t[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Uu.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Uu.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Uu.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Uu.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Uu.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Uu.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Uu.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};async function o9t(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");return await t.text()}catch(t){return console.error("There has been a problem with your fetch operation:",t),null}}const lNe=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,a9t={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},uNe={hr:!0,image:!0},l9t={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},u9t=["img","video"],$4={1:["0.0.0"]},c9t=["tour"],f9t=["iframe"];function cNe(){document.body.style.userSelect="none"}function d9t(){document.body.style.userSelect=""}function h9t(e,t,n){e.target===t&&(cNe(),n.dragging=!0,n.lastX=e.clientX,n.lastY=e.clientY)}function p9t(e,t,n){if(n.dragging){let r=e.clientX-n.lastX,i=e.clientY-n.lastY,{top:s,left:o}=t.getBoundingClientRect();t.style.top=`${s+i}px`,t.style.left=`${o+r}px`,n.lastX=e.clientX,n.lastY=e.clientY}if(n.dragging||n.resizing){let r=n.lastX-e.clientX,i=e.clientY-n.lastY,{width:s,height:o,left:a,top:l}=t.getBoundingClientRect();n.resizing&&(t.style.width=`${s+r}px`,t.style.height=`${o+i}px`,t.style.top=`${l}px`),t.style.left=`${a-r}px`,n.lastX=e.clientX,n.lastY=e.clientY}}function m9t(e){d9t(),e.dragging=!1,e.resizing=!1}function g9t(e,t){e.stopPropagation(),cNe(),t.resizing=!0,t.lastX=e.clientX,t.lastY=e.clientY}async function y9t(e,t,n){e.addEventListener("mousedown",r=>h9t(r,e,n)),window.addEventListener("mousemove",r=>p9t(r,e,n)),window.addEventListener("mouseup",()=>m9t(n)),t.addEventListener("mousedown",r=>g9t(r,n))}function v9t(e){const t=document.querySelector("eox-storytelling"),{y:n}=t.getBoundingClientRect(),r=e.querySelector(".editor-wrapper"),i=f=>Number(f.replace("px","")),s=window.getComputedStyle(r),o=i(s.bottom),a=i(s.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-n-o-a-l;r.style.height=`${u}px`}function b9t(e){const t=document.createElement("input");t.type="file",t.accept=".md",t.onchange=n=>{const r=n.target.files[0];if(!r)return;const i=new FileReader;i.onload=s=>{const o=s.target.result;e.value(o)},i.readAsText(r)},t.click()}function x9t(e){const t=e.value(),n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${document.title}.md`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function fNe(e){const t=[];return e.forEach((n,r)=>{(n.startsWith("## ")||n.startsWith("# ")&&t.length)&&t.push(r)}),t}function rCe(e,t,n,r,i,s){const o=e.split(`
`),a=s.shadowRoot||s,l=a.querySelector("eox-storytelling-editor"),f=fNe(o)[t];if(r)if(i){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(h=>{const p=d[h];n=n.replaceAll(`{${h}}`,p)}),s.selectedCustomElement=null}else{s.selectedCustomElement={markdown:n,fields:r},s.requestUpdate();return}f>=0?o.splice(f,0,n):o.push(n),l.editor.editor.editors["root.Story"].setValue(o.join(`
`)),setTimeout(()=>{const c=a.querySelector(`div[data-section="${t+1}"]`);c&&window.scrollTo(0,c.offsetTop)},200),s.addCustomSectionIndex=-1,s.requestUpdate()}function w9t(e,t,n){let r=null;n==null||n.codemirror.on("change",function(){const i=e.querySelector(".editor-saver");i.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{i.innerText="Saved";const s=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...s,[t||"default"]:n.value()})),r=null},2500)})}function _9t(e){var t;(t=(e.shadowRoot||e).querySelector(".CodeMirror-scroll"))==null||t.addEventListener("wheel",function(n){const r=n.deltaY,i=this.scrollHeight,s=this.clientHeight;(this.scrollTop===0&&r<0||this.scrollTop+s>=i&&r>0)&&n.preventDefault()},{passive:!1})}function E9t(e){if(e.showEditor!==void 0){let t=JSON.parse(localStorage.getItem("markdown")||"{}");const n=e.id||"default",r=t[n];r&&r!==e.markdown&&(confirm("Recover your Story from the last time you edited?")?e.markdown=r:(delete t[n],localStorage.setItem("markdown",JSON.stringify(t))))}}function dNe(e){var t,n;if((n=(t=e.editor.editor)==null?void 0:t.editors)!=null&&n["root.Story"]){const r=e.editor.editor.editors["root.Story"].simplemde_instance;if(!e.disableAutosave)w9t(e,e.storyId,r);else{const i=e.querySelector(".editor-saver");i.innerText=""}_9t(e)}else setTimeout(()=>dNe(e),100)}function hNe(e){var n;e.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),e.editor&&e.editor.editor&&e.editor.editor.ready&&((n=e.editor.editor)!=null&&n.editors["root.Story"].simplemde_instance)?e.querySelector(".switch-input").click():setTimeout(()=>hNe(e),100)}const I4=(e,t,n,r,i)=>({name:e,action:i||function({codemirror:o}){const a=o.getCursor("start"),l=o.getCursor("end");o.replaceRange(t,a,l)},className:n,title:r}),S9t={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",I4("import",null,"fa fa-upload","Import Markdown File",b9t),I4("export",null,"fa fa-download","Export Markdown File",x9t),"|",I4("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const e=document.querySelector("eox-storytelling"),t=e.markdown.split(`
`),n=fNe(t);e&&(e.addCustomSectionIndex=n.length,e.requestUpdate())})],spellChecker:!1}}}}},A9t=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,C9t=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,k9t=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,T9t=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,D9t={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},L9t=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,R9t={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},F9t=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,O9t={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},M9t=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,$9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},I9t=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,P9t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},N9t=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:A9t,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:C9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:k9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:T9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:D9t},{name:"Tour",id:"ele-map-tour",markdown:L9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:R9t}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:F9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:O9t},{name:"Hero Image",id:"ele-hero-image",markdown:M9t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:$9t},{name:"Hero Video",id:"ele-hero-video",markdown:I9t,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:P9t}]}];var l3={exports:{}},B9t=l3.exports,iCe;function z9t(){return iCe||(iCe=1,function(e,t){(function(n,r){e.exports=r()})(B9t,function(){function n(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}function r(F,H){for(var J=0;J<H.length;J++){var re=H[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(F,s(re.key),re)}}function i(F,H,J){return H&&r(F.prototype,H),Object.defineProperty(F,"prototype",{writable:!1}),F}function s(F){var H=function(J,re){if(typeof J!="object"||!J)return J;var ye=J[Symbol.toPrimitive];if(ye!==void 0){var xe=ye.call(J,re);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}(F,"string");return typeof H=="symbol"?H:H+""}function o(F){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(F)}var a=Date.now();function l(){var F={},H=!0,J=0,re=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(H=arguments[0],J++);for(var ye=function(Re){for(var P in Re)Object.prototype.hasOwnProperty.call(Re,P)&&(H&&Object.prototype.toString.call(Re[P])==="[object Object]"?F[P]=l(!0,F[P],Re[P]):F[P]=Re[P])};J<re;J++){var xe=arguments[J];ye(xe)}return F}function u(F,H){if((K(F)||F===window||F===document)&&(F=[F]),$(F)||I(F)||(F=[F]),Y(F)!=0){if($(F)&&!I(F))for(var J=F.length,re=0;re<J&&H.call(F[re],F[re],re,F)!==!1;re++);else if(I(F)){for(var ye in F)if(q(F,ye)&&H.call(F[ye],F[ye],ye,F)===!1)break}}}function f(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F[a]=F[a]||[],ye={all:re,evt:null,found:null};return H&&J&&Y(re)>0&&u(re,function(xe,Re){if(xe.eventName==H&&xe.fn.toString()==J.toString())return ye.found=!0,ye.evt=Re,!1}),ye}function c(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=H.onElement,re=H.withCallback,ye=H.avoidDuplicate,xe=ye===void 0||ye,Re=H.once,P=Re!==void 0&&Re,Q=H.useCapture,ie=Q!==void 0&&Q,ae=arguments.length>2?arguments[2]:void 0,ke=J||[];function Ce(Ee){O(re)&&re.call(ae,Ee,this),P&&Ce.destroy()}return B(ke)&&(ke=document.querySelectorAll(ke)),Ce.destroy=function(){u(ke,function(Ee){var De=f(Ee,F,Ce);De.found&&De.all.splice(De.evt,1),Ee.removeEventListener&&Ee.removeEventListener(F,Ce,ie)})},u(ke,function(Ee){var De=f(Ee,F,Ce);(Ee.addEventListener&&xe&&!De.found||!xe)&&(Ee.addEventListener(F,Ce,ie),De.all.push({eventName:F,fn:Ce}))}),Ce}function d(F,H){u(H.split(" "),function(J){return F.classList.add(J)})}function h(F,H){u(H.split(" "),function(J){return F.classList.remove(J)})}function p(F,H){return F.classList.contains(H)}function g(F,H){for(;F!==document.body;){if(!(F=F.parentElement))return!1;if(typeof F.matches=="function"?F.matches(H):F.msMatchesSelector(H))return F}}function v(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||H==="")return!1;if(H==="none")return O(J)&&J(),!1;var re=T(),ye=H.split(" ");u(ye,function(xe){d(F,"g"+xe)}),c(re,{onElement:F,avoidDuplicate:!1,once:!0,withCallback:function(xe,Re){u(ye,function(P){h(Re,"g"+P)}),O(J)&&J()}})}function x(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(H==="")return F.style.webkitTransform="",F.style.MozTransform="",F.style.msTransform="",F.style.OTransform="",F.style.transform="",!1;F.style.webkitTransform=H,F.style.MozTransform=H,F.style.msTransform=H,F.style.OTransform=H,F.style.transform=H}function y(F){F.style.display="block"}function w(F){F.style.display="none"}function _(F){var H=document.createDocumentFragment(),J=document.createElement("div");for(J.innerHTML=F;J.firstChild;)H.appendChild(J.firstChild);return H}function A(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function T(){var F,H=document.createElement("fakeelement"),J={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(F in J)if(H.style[F]!==void 0)return J[F]}function D(F,H,J,re){if(F())H();else{var ye;J||(J=100);var xe=setInterval(function(){F()&&(clearInterval(xe),ye&&clearTimeout(ye),H())},J)}}function k(F,H,J){if(U(F))console.error("Inject assets error");else if(O(H)&&(J=H,H=!1),B(H)&&H in window)O(J)&&J();else{var re;if(F.indexOf(".css")!==-1){if((re=document.querySelectorAll('link[href="'+F+'"]'))&&re.length>0)return void(O(J)&&J());var ye=document.getElementsByTagName("head")[0],xe=ye.querySelectorAll('link[rel="stylesheet"]'),Re=document.createElement("link");return Re.rel="stylesheet",Re.type="text/css",Re.href=F,Re.media="all",xe?ye.insertBefore(Re,xe[0]):ye.appendChild(Re),void(O(J)&&J())}if((re=document.querySelectorAll('script[src="'+F+'"]'))&&re.length>0){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}}else{var P=document.createElement("script");P.type="text/javascript",P.src=F,P.onload=function(){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}},document.body.appendChild(P)}}}function R(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function O(F){return typeof F=="function"}function B(F){return typeof F=="string"}function K(F){return!(!F||!F.nodeType||F.nodeType!=1)}function L(F){return Array.isArray(F)}function $(F){return F&&F.length&&isFinite(F.length)}function I(F){return o(F)==="object"&&F!=null&&!O(F)&&!L(F)}function U(F){return F==null}function q(F,H){return F!==null&&hasOwnProperty.call(F,H)}function Y(F){if(I(F)){if(F.keys)return F.keys().length;var H=0;for(var J in F)q(F,J)&&H++;return H}return F.length}function X(F){return!isNaN(parseFloat(F))&&isFinite(F)}function te(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,H=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!H.length)return!1;if(H.length==1)return H[0];typeof F=="string"&&(F=parseInt(F));var J=[];u(H,function(P){J.push(P.getAttribute("data-taborder"))});var re=Math.max.apply(Math,J.map(function(P){return parseInt(P)})),ye=F<0?1:F+1;ye>re&&(ye="1");var xe=J.filter(function(P){return P>=parseInt(ye)}),Re=xe.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(Re,'"]'))}function le(F){if(F.events.hasOwnProperty("keyboard"))return!1;F.events.keyboard=c("keydown",{onElement:window,withCallback:function(H,J){var re=(H=H||window.event).keyCode;if(re==9){var ye=document.querySelector(".gbtn.focused");if(!ye){var xe=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(xe=="input"||xe=="textarea"||xe=="button")return}H.preventDefault();var Re=document.querySelectorAll(".gbtn[data-taborder]");if(!Re||Re.length<=0)return;if(!ye){var P=te();return void(P&&(P.focus(),d(P,"focused")))}var Q=te(ye.getAttribute("data-taborder"));h(ye,"focused"),Q&&(Q.focus(),d(Q,"focused"))}re==39&&F.nextSlide(),re==37&&F.prevSlide(),re==27&&F.close()}})}var ee=i(function F(H,J){var re=this,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(n(this,F),this.img=H,this.slide=J,this.onclose=ye,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(xe){return re.dragStart(xe)},!1),this.img.addEventListener("mouseup",function(xe){return re.dragEnd(xe)},!1),this.img.addEventListener("mousemove",function(xe){return re.drag(xe)},!1),this.img.addEventListener("click",function(xe){return re.slide.classList.contains("dragging-nav")?(re.zoomOut(),!1):re.zoomedIn?void(re.zoomedIn&&!re.dragging&&re.zoomOut()):re.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var F=this.widowWidth();if(!(this.zoomedIn||F<=768)){var H=this.img;if(H.setAttribute("data-style",H.getAttribute("style")),H.style.maxWidth=H.naturalWidth+"px",H.style.maxHeight=H.naturalHeight+"px",H.naturalWidth>F){var J=F/2-H.naturalWidth/2;this.setTranslate(this.img.parentNode,J,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(F){F.preventDefault(),this.zoomedIn?(F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset),F.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(F){var H=this;F.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){H.dragging=!1,H.img.isDragging=!1,H.img.classList.remove("dragging")},100)}},{key:"drag",value:function(F){this.active&&(F.preventDefault(),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(F){if(this.zoomedIn){var H=F.clientX-this.img.naturalWidth/2,J=F.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,H,J)}}},{key:"setTranslate",value:function(F,H,J){F.style.transform="translate3d("+H+"px, "+J+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=i(function F(){var H=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,F);var re=J.dragEl,ye=J.toleranceX,xe=ye===void 0?40:ye,Re=J.toleranceY,P=Re===void 0?65:Re,Q=J.slide,ie=Q===void 0?null:Q,ae=J.instance,ke=ae===void 0?null:ae;this.el=re,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=xe,this.toleranceY=P,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=ie,this.instance=ke,this.el.addEventListener("mousedown",function(Ce){return H.dragStart(Ce)},!1),this.el.addEventListener("mouseup",function(Ce){return H.dragEnd(Ce)},!1),this.el.addEventListener("mousemove",function(Ce){return H.drag(Ce)},!1)},[{key:"dragStart",value:function(F){if(this.slide.classList.contains("zoomed"))this.active=!1;else{F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset);var H=F.target.nodeName.toLowerCase();F.target.classList.contains("nodrag")||g(F.target,".nodrag")||["input","select","textarea","button","a"].indexOf(H)!==-1?this.active=!1:(F.preventDefault(),(F.target===this.el||H!=="img"&&g(F.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=g(F.target,".ginner-container")))}}},{key:"dragEnd",value:function(F){var H=this;F&&F.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){H.instance.preventOutsideClick=!1,H.toleranceReached=!1,H.lastDirection=null,H.dragging=!1,H.el.isDragging=!1,H.el.classList.remove("dragging"),H.slide.classList.remove("dragging-nav"),H.dragContainer.style.transform="",H.dragContainer.style.transition=""},100)}},{key:"drag",value:function(F){if(this.active){F.preventDefault(),this.slide.classList.add("dragging-nav"),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var H=Math.abs(this.currentX),J=Math.abs(this.currentY);if(H>0&&H>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var re=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&re&&(this.doSlideChange=re),this.instance.settings.dragAutoSnap&&re)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),re=="right"&&this.instance.prevSlide(),void(re=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&J>0&&J>=H&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var ye=this.shouldClose();return!this.instance.settings.dragAutoSnap&&ye&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&ye&&this.instance.close())}}}},{key:"shouldChange",value:function(){var F=!1;if(Math.abs(this.currentX)>=this.toleranceX){var H=this.currentX>0?"right":"left";(H=="left"&&this.slide!==this.slide.parentNode.lastChild||H=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(F=H)}return F}},{key:"shouldClose",value:function(){var F=!1;return Math.abs(this.currentY)>=this.toleranceY&&(F=!0),F}},{key:"setTranslate",value:function(F,H,J){var re=arguments.length>3&&arguments[3]!==void 0&&arguments[3];F.style.transition=re?"all .2s ease":"",F.style.transform="translate3d(".concat(H,"px, ").concat(J,"px, 0)")}}]);function he(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=new Image,Re="gSlideTitle_"+J,P="gSlideDesc_"+J;xe.addEventListener("load",function(){O(re)&&re()},!1),xe.src=H.href,H.sizes!=""&&H.srcset!=""&&(xe.sizes=H.sizes,xe.srcset=H.srcset),xe.alt="",U(H.alt)||H.alt===""||(xe.alt=H.alt),H.title!==""&&xe.setAttribute("aria-labelledby",Re),H.description!==""&&xe.setAttribute("aria-describedby",P),H.hasOwnProperty("_hasCustomWidth")&&H._hasCustomWidth&&(xe.style.width=H.width),H.hasOwnProperty("_hasCustomHeight")&&H._hasCustomHeight&&(xe.style.height=H.height),ye.insertBefore(xe,ye.firstChild)}function de(F,H,J,re){var ye=this,xe=F.querySelector(".ginner-container"),Re="gvideo"+J,P=F.querySelector(".gslide-media"),Q=this.getAllPlayers();d(xe,"gvideo-container"),P.insertBefore(_('<div class="gvideo-wrapper"></div>'),P.firstChild);var ie=F.querySelector(".gvideo-wrapper");k(this.settings.plyr.css,"Plyr");var ae=H.href,ke=H==null?void 0:H.videoProvider,Ce=!1;P.style.maxWidth=H.width,k(this.settings.plyr.js,"Plyr",function(){if(!ke&&ae.match(/vimeo\.com\/([0-9]*)/)&&(ke="vimeo"),!ke&&(ae.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||ae.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(ke="youtube"),ke==="local"||!ke){ke="local";var Ee='<video id="'+Re+'" ';Ee+='style="background:#000; max-width: '.concat(H.width,';" '),Ee+='preload="metadata" ',Ee+='x-webkit-airplay="allow" ',Ee+="playsinline ",Ee+="controls ",Ee+='class="gvideo-local">',Ee+='<source src="'.concat(ae,'">'),Ce=_(Ee+="</video>")}var De=Ce||_('<div id="'.concat(Re,'" data-plyr-provider="').concat(ke,'" data-plyr-embed-id="').concat(ae,'"></div>'));d(ie,"".concat(ke,"-video gvideo")),ie.appendChild(De),ie.setAttribute("data-id",Re),ie.setAttribute("data-index",J);var Oe=q(ye.settings.plyr,"config")?ye.settings.plyr.config:{},We=new Plyr("#"+Re,Oe);We.on("ready",function(tt){Q[Re]=tt.detail.plyr,O(re)&&re()}),D(function(){return F.querySelector("iframe")&&F.querySelector("iframe").dataset.ready=="true"},function(){ye.resize(F)}),We.on("enterfullscreen",ze),We.on("exitfullscreen",ze)})}function ze(F){var H=g(F.target,".gslide-media");F.type==="enterfullscreen"&&d(H,"fullscreen"),F.type==="exitfullscreen"&&h(H,"fullscreen")}function He(F,H,J,re){var ye,xe=this,Re=F.querySelector(".gslide-media"),P=!(!q(H,"href")||!H.href)&&H.href.split("#").pop().trim(),Q=!(!q(H,"content")||!H.content)&&H.content;if(Q&&(B(Q)&&(ye=_('<div class="ginlined-content">'.concat(Q,"</div>"))),K(Q))){Q.style.display=="none"&&(Q.style.display="block");var ie=document.createElement("div");ie.className="ginlined-content",ie.appendChild(Q),ye=ie}if(P){var ae=document.getElementById(P);if(!ae)return!1;var ke=ae.cloneNode(!0);ke.style.height=H.height,ke.style.maxWidth=H.width,d(ke,"ginlined-content"),ye=ke}if(!ye)return console.error("Unable to append inline slide content",H),!1;Re.style.height=H.height,Re.style.width=H.width,Re.appendChild(ye),this.events["inlineclose"+P]=c("click",{onElement:Re.querySelectorAll(".gtrigger-close"),withCallback:function(Ce){Ce.preventDefault(),xe.close()}}),O(re)&&re()}function je(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=function(Re){var P=Re.url,Q=Re.allow,ie=Re.callback,ae=Re.appendTo,ke=document.createElement("iframe");return ke.className="vimeo-video gvideo",ke.src=P,ke.style.width="100%",ke.style.height="100%",Q&&ke.setAttribute("allow",Q),ke.onload=function(){ke.onload=null,d(ke,"node-ready"),O(ie)&&ie()},ae&&ae.appendChild(ke),ke}({url:H.href,callback:re});ye.parentNode.style.maxWidth=H.width,ye.parentNode.style.height=H.height,ye.appendChild(xe)}var we=i(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,F),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},I(H)&&(this.defaults=l(this.defaults,H))},[{key:"sourceType",value:function(F){var H=F;return(F=F.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":F.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||F.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||F.match(/vimeo\.com\/([0-9]*)/)||F.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":F.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":F.indexOf("#")>-1&&H.split("#").pop().trim()!==""?"inline":F.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(F,H){var J=this,re=l({descPosition:H.descPosition},this.defaults);if(I(F)&&!K(F)){q(F,"type")||(q(F,"content")&&F.content?F.type="inline":q(F,"href")&&(F.type=this.sourceType(F.href)));var ye=l(re,F);return this.setSize(ye,H),ye}var xe="",Re=F.getAttribute("data-glightbox"),P=F.nodeName.toLowerCase();if(P==="a"&&(xe=F.href),P==="img"&&(xe=F.src,re.alt=F.alt),re.href=xe,u(re,function(Ee,De){q(H,De)&&De!=="width"&&(re[De]=H[De]);var Oe=F.dataset[De];U(Oe)||(re[De]=J.sanitizeValue(Oe))}),re.content&&(re.type="inline"),!re.type&&xe&&(re.type=this.sourceType(xe)),U(Re)){if(!re.title&&P=="a"){var Q=F.title;U(Q)||Q===""||(re.title=Q)}if(!re.title&&P=="img"){var ie=F.alt;U(ie)||ie===""||(re.title=ie)}}else{var ae=[];u(re,function(Ee,De){ae.push(";\\s?"+De)}),ae=ae.join("\\s?:|"),Re.trim()!==""&&u(re,function(Ee,De){var Oe=Re,We=new RegExp("s?"+De+"s?:s?(.*?)("+ae+"s?:|$)"),tt=Oe.match(We);if(tt&&tt.length&&tt[1]){var bt=tt[1].trim().replace(/;\s*$/,"");re[De]=J.sanitizeValue(bt)}})}if(re.description&&re.description.substring(0,1)==="."){var ke;try{ke=document.querySelector(re.description).innerHTML}catch(Ee){if(!(Ee instanceof DOMException))throw Ee}ke&&(re.description=ke)}if(!re.description){var Ce=F.querySelector(".glightbox-desc");Ce&&(re.description=Ce.innerHTML)}return this.setSize(re,H,F),this.slideConfig=re,re}},{key:"setSize",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F.type=="video"?this.checkSize(H.videosWidth):this.checkSize(H.width),ye=this.checkSize(H.height);return F.width=q(F,"width")&&F.width!==""?this.checkSize(F.width):re,F.height=q(F,"height")&&F.height!==""?this.checkSize(F.height):ye,J&&F.type=="image"&&(F._hasCustomWidth=!!J.dataset.width,F._hasCustomHeight=!!J.dataset.height),F}},{key:"checkSize",value:function(F){return X(F)?"".concat(F,"px"):F}},{key:"sanitizeValue",value:function(F){return F!=="true"&&F!=="false"?F:F==="true"}}]),Ie=i(function F(H,J,re){n(this,F),this.element=H,this.instance=J,this.index=re},[{key:"setContent",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(p(H,"loaded"))return!1;var re=this.instance.settings,ye=this.slideConfig,xe=R();O(re.beforeSlideLoad)&&re.beforeSlideLoad({index:this.index,slide:H,player:!1});var Re=ye.type,P=ye.descPosition,Q=H.querySelector(".gslide-media"),ie=H.querySelector(".gslide-title"),ae=H.querySelector(".gslide-desc"),ke=H.querySelector(".gdesc-inner"),Ce=J,Ee="gSlideTitle_"+this.index,De="gSlideDesc_"+this.index;if(O(re.afterSlideLoad)&&(Ce=function(){O(J)&&J(),re.afterSlideLoad({index:F.index,slide:H,player:F.instance.getSlidePlayerInstance(F.index)})}),ye.title==""&&ye.description==""?ke&&ke.parentNode.parentNode.removeChild(ke.parentNode):(ie&&ye.title!==""?(ie.id=Ee,ie.innerHTML=ye.title):ie.parentNode.removeChild(ie),ae&&ye.description!==""?(ae.id=De,xe&&re.moreLength>0?(ye.smallDescription=this.slideShortDesc(ye.description,re.moreLength,re.moreText),ae.innerHTML=ye.smallDescription,this.descriptionEvents(ae,ye)):ae.innerHTML=ye.description):ae.parentNode.removeChild(ae),d(Q.parentNode,"desc-".concat(P)),d(ke.parentNode,"description-".concat(P))),d(Q,"gslide-".concat(Re)),d(H,"loaded"),Re!=="video"){if(Re!=="external")return Re==="inline"?(He.apply(this.instance,[H,ye,this.index,Ce]),void(ye.draggable&&new z({dragEl:H.querySelector(".gslide-inline"),toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:this.instance}))):void(Re!=="image"?O(Ce)&&Ce():he(H,ye,this.index,function(){var Oe=H.querySelector("img");ye.draggable&&new z({dragEl:Oe,toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:F.instance}),ye.zoomable&&Oe.naturalWidth>Oe.offsetWidth&&(d(Oe,"zoomable"),new ee(Oe,H,function(){F.instance.resize()})),O(Ce)&&Ce()}));je.apply(this,[H,ye,this.index,Ce])}else de.apply(this.instance,[H,ye,this.index,Ce])}},{key:"slideShortDesc",value:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,J=arguments.length>2&&arguments[2]!==void 0&&arguments[2],re=document.createElement("div");re.innerHTML=F;var ye=re.innerText,xe=J;if((F=ye.trim()).length<=H)return F;var Re=F.substr(0,H-1);return xe?(re=null,Re+'... <a href="#" class="desc-more">'+J+"</a>"):Re}},{key:"descriptionEvents",value:function(F,H){var J=this,re=F.querySelector(".desc-more");if(!re)return!1;c("click",{onElement:re,withCallback:function(ye,xe){ye.preventDefault();var Re=document.body,P=g(xe,".gslide-desc");if(!P)return!1;P.innerHTML=H.description,d(Re,"gdesc-open");var Q=c("click",{onElement:[Re,g(P,".gslide-description")],withCallback:function(ie,ae){ie.target.nodeName.toLowerCase()!=="a"&&(h(Re,"gdesc-open"),d(Re,"gdesc-closed"),P.innerHTML=H.smallDescription,J.descriptionEvents(P,H),setTimeout(function(){h(Re,"gdesc-closed")},400),Q.destroy())}})}})}},{key:"create",value:function(){return _(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var F=new we(this.instance.settings.slideExtraAttributes);return this.slideConfig=F.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function qe(F){return Math.sqrt(F.x*F.x+F.y*F.y)}function Pe(F,H){var J=function(re,ye){var xe=qe(re)*qe(ye);if(xe===0)return 0;var Re=function(P,Q){return P.x*Q.x+P.y*Q.y}(re,ye)/xe;return Re>1&&(Re=1),Math.acos(Re)}(F,H);return function(re,ye){return re.x*ye.y-ye.x*re.y}(F,H)>0&&(J*=-1),180*J/Math.PI}var At=i(function F(H){n(this,F),this.handlers=[],this.el=H},[{key:"add",value:function(F){this.handlers.push(F)}},{key:"del",value:function(F){F||(this.handlers=[]);for(var H=this.handlers.length;H>=0;H--)this.handlers[H]===F&&this.handlers.splice(H,1)}},{key:"dispatch",value:function(){for(var F=0,H=this.handlers.length;F<H;F++){var J=this.handlers[F];typeof J=="function"&&J.apply(this.el,arguments)}}}]);function dt(F,H){var J=new At(F);return J.add(H),J}var nn=i(function F(H,J){n(this,F),this.element=typeof H=="string"?document.querySelector(H):H,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var re=function(){};this.rotate=dt(this.element,J.rotate||re),this.touchStart=dt(this.element,J.touchStart||re),this.multipointStart=dt(this.element,J.multipointStart||re),this.multipointEnd=dt(this.element,J.multipointEnd||re),this.pinch=dt(this.element,J.pinch||re),this.swipe=dt(this.element,J.swipe||re),this.tap=dt(this.element,J.tap||re),this.doubleTap=dt(this.element,J.doubleTap||re),this.longTap=dt(this.element,J.longTap||re),this.singleTap=dt(this.element,J.singleTap||re),this.pressMove=dt(this.element,J.pressMove||re),this.twoFingerPressMove=dt(this.element,J.twoFingerPressMove||re),this.touchMove=dt(this.element,J.touchMove||re),this.touchEnd=dt(this.element,J.touchEnd||re),this.touchCancel=dt(this.element,J.touchCancel||re),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(F){if(F.touches)if(F.target&&F.target.nodeName&&["a","button","input"].indexOf(F.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",F.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=F.touches[0].pageX,this.y1=F.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(F,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var H=this.preV;if(F.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var J={x:F.touches[1].pageX-this.x1,y:F.touches[1].pageY-this.y1};H.x=J.x,H.y=J.y,this.pinchStartLen=qe(H),this.multipointStart.dispatch(F,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(F,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(F){if(F.touches){var H=this.preV,J=F.touches.length,re=F.touches[0].pageX,ye=F.touches[0].pageY;if(this.isDoubleTap=!1,J>1){var xe=F.touches[1].pageX,Re=F.touches[1].pageY,P={x:F.touches[1].pageX-re,y:F.touches[1].pageY-ye};H.x!==null&&(this.pinchStartLen>0&&(F.zoom=qe(P)/this.pinchStartLen,this.pinch.dispatch(F,this.element)),F.angle=Pe(P,H),this.rotate.dispatch(F,this.element)),H.x=P.x,H.y=P.y,this.x2!==null&&this.sx2!==null?(F.deltaX=(re-this.x2+xe-this.sx2)/2,F.deltaY=(ye-this.y2+Re-this.sy2)/2):(F.deltaX=0,F.deltaY=0),this.twoFingerPressMove.dispatch(F,this.element),this.sx2=xe,this.sy2=Re}else{if(this.x2!==null){F.deltaX=re-this.x2,F.deltaY=ye-this.y2;var Q=Math.abs(this.x1-this.x2),ie=Math.abs(this.y1-this.y2);(Q>10||ie>10)&&(this._preventTap=!0)}else F.deltaX=0,F.deltaY=0;this.pressMove.dispatch(F,this.element)}this.touchMove.dispatch(F,this.element),this._cancelLongTap(),this.x2=re,this.y2=ye,J>1&&F.preventDefault()}}},{key:"end",value:function(F){if(F.changedTouches){this._cancelLongTap();var H=this;F.touches.length<2&&(this.multipointEnd.dispatch(F,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(F.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){H.swipe.dispatch(F,H.element)},0)):(this.tapTimeout=setTimeout(function(){H._preventTap||H.tap.dispatch(F,H.element),H.isDoubleTap&&(H.doubleTap.dispatch(F,H.element),H.isDoubleTap=!1)},0),H.isDoubleTap||(H.singleTapTimeout=setTimeout(function(){H.singleTap.dispatch(F,H.element)},250))),this.touchEnd.dispatch(F,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(F){this.cancelAll(),this.touchCancel.dispatch(F,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(F,H,J,re){return Math.abs(F-H)>=Math.abs(J-re)?F-H>0?"Left":"Right":J-re>0?"Up":"Down"}},{key:"on",value:function(F,H){this[F]&&this[F].add(H)}},{key:"off",value:function(F,H){this[F]&&this[F].del(H)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function Wt(F){var H=function(){var Re,P=document.createElement("fakeelement"),Q={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(Re in Q)if(P.style[Re]!==void 0)return Q[Re]}(),J=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,re=p(F,"gslide-media")?F:F.querySelector(".gslide-media"),ye=g(re,".ginner-container"),xe=F.querySelector(".gslide-description");J>769&&(re=ye),d(re,"greset"),x(re,"translate3d(0, 0, 0)"),c(H,{onElement:re,once:!0,withCallback:function(Re,P){h(re,"greset")}}),re.style.opacity="",xe&&(xe.style.opacity="")}function Mn(F){if(F.events.hasOwnProperty("touch"))return!1;var H,J,re,ye=A(),xe=ye.width,Re=ye.height,P=!1,Q=null,ie=null,ae=null,ke=!1,Ce=1,Ee=1,De=!1,Oe=!1,We=null,tt=null,bt=null,Pt=null,_t=0,Kt=0,sn=!1,rn=!1,on={},vn={},Er=0,Ji=0,ds=document.getElementById("glightbox-slider"),Gi=document.querySelector(".goverlay"),No=new nn(ds,{touchStart:function(qn){if(P=!0,(p(qn.targetTouches[0].target,"ginner-container")||g(qn.targetTouches[0].target,".gslide-desc")||qn.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(P=!1),g(qn.targetTouches[0].target,".gslide-inline")&&!p(qn.targetTouches[0].target.parentNode,"gslide-inline")&&(P=!1),P){if(vn=qn.targetTouches[0],on.pageX=qn.targetTouches[0].pageX,on.pageY=qn.targetTouches[0].pageY,Er=qn.targetTouches[0].clientX,Ji=qn.targetTouches[0].clientY,Q=F.activeSlide,ie=Q.querySelector(".gslide-media"),re=Q.querySelector(".gslide-inline"),ae=null,p(ie,"gslide-image")&&(ae=ie.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(ie=Q.querySelector(".ginner-container")),h(Gi,"greset"),qn.pageX>20&&qn.pageX<window.innerWidth-20)return;qn.preventDefault()}},touchMove:function(qn){if(P&&(vn=qn.targetTouches[0],!De&&!Oe)){if(re&&re.offsetHeight>Re){var Mr=on.pageX-vn.pageX;if(Math.abs(Mr)<=13)return!1}ke=!0;var Lr,yn=qn.targetTouches[0].clientX,Kr=qn.targetTouches[0].clientY,ir=Er-yn,Ni=Ji-Kr;if(Math.abs(ir)>Math.abs(Ni)?(sn=!1,rn=!0):(rn=!1,sn=!0),H=vn.pageX-on.pageX,_t=100*H/xe,J=vn.pageY-on.pageY,Kt=100*J/Re,sn&&ae&&(Lr=1-Math.abs(J)/Re,Gi.style.opacity=Lr,F.settings.touchFollowAxis&&(_t=0)),rn&&(Lr=1-Math.abs(H)/xe,ie.style.opacity=Lr,F.settings.touchFollowAxis&&(Kt=0)),!ae)return x(ie,"translate3d(".concat(_t,"%, 0, 0)"));x(ie,"translate3d(".concat(_t,"%, ").concat(Kt,"%, 0)"))}},touchEnd:function(){if(P){if(ke=!1,Oe||De)return bt=We,void(Pt=tt);var qn=Math.abs(parseInt(Kt)),Mr=Math.abs(parseInt(_t));if(!(qn>29&&ae))return qn<29&&Mr<25?(d(Gi,"greset"),Gi.style.opacity=1,Wt(ie)):void 0;F.close()}},multipointEnd:function(){setTimeout(function(){De=!1},50)},multipointStart:function(){De=!0,Ce=Ee||1},pinch:function(qn){if(!ae||ke)return!1;De=!0,ae.scaleX=ae.scaleY=Ce*qn.zoom;var Mr=Ce*qn.zoom;if(Oe=!0,Mr<=1)return Oe=!1,Mr=1,Pt=null,bt=null,We=null,tt=null,void ae.setAttribute("style","");Mr>4.5&&(Mr=4.5),ae.style.transform="scale3d(".concat(Mr,", ").concat(Mr,", 1)"),Ee=Mr},pressMove:function(qn){if(Oe&&!De){var Mr=vn.pageX-on.pageX,Lr=vn.pageY-on.pageY;bt&&(Mr+=bt),Pt&&(Lr+=Pt),We=Mr,tt=Lr;var yn="translate3d(".concat(Mr,"px, ").concat(Lr,"px, 0)");Ee&&(yn+=" scale3d(".concat(Ee,", ").concat(Ee,", 1)")),x(ae,yn)}},swipe:function(qn){if(!Oe)if(De)De=!1;else{if(qn.direction=="Left"){if(F.index==F.elements.length-1)return Wt(ie);F.nextSlide()}if(qn.direction=="Right"){if(F.index==0)return Wt(ie);F.prevSlide()}}}});F.events.touch=No}var Ze=R(),pe=R()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,se=document.getElementsByTagName("html")[0],oe={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},be=i(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,F),this.customOptions=H,this.settings=l(oe,H),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var F=this,H=this.getSelector();H&&(this.baseEvents=c("click",{onElement:H,withCallback:function(J,re){J.preventDefault(),F.open(re)}})),this.elements=this.getElements()}},{key:"open",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var J=X(H)?H:this.settings.startAt;if(K(F)){var re=F.getAttribute("data-gallery");re&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,re)),U(J)&&(J=this.getElementIndex(F))<0&&(J=0)}X(J)||(J=0),this.build(),v(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var ye=document.body,xe=window.innerWidth-document.documentElement.clientWidth;if(xe>0){var Re=document.createElement("style");Re.type="text/css",Re.className="gcss-styles",Re.innerText=".gscrollbar-fixer {margin-right: ".concat(xe,"px}"),document.head.appendChild(Re),d(ye,"gscrollbar-fixer")}d(ye,"glightbox-open"),d(se,"glightbox-open"),Ze&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(J,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),O(this.settings.onOpen)&&this.settings.onOpen(),pe&&this.settings.touchNavigation&&Mn(this),this.settings.keyboardNavigation&&le(this)}},{key:"openAt",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,F)}},{key:"showSlide",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];y(this.loader),this.index=parseInt(H);var re=this.slidesContainer.querySelector(".current");re&&h(re,"current"),this.slideAnimateOut();var ye=this.slidesContainer.querySelectorAll(".gslide")[H];if(p(ye,"loaded"))this.slideAnimateIn(ye,J),w(this.loader);else{y(this.loader);var xe=this.elements[H],Re={index:this.index,slide:ye,slideNode:ye,slideConfig:xe.slideConfig,slideIndex:this.index,trigger:xe.node,player:null};this.trigger("slide_before_load",Re),xe.instance.setContent(ye,function(){w(F.loader),F.resize(),F.slideAnimateIn(ye,J),F.trigger("slide_after_load",Re)})}this.slideDescription=ye.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&p(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(H+1),this.preloadSlide(H-1)),this.updateNavigationClasses(),this.activeSlide=ye}},{key:"preloadSlide",value:function(F){var H=this;if(F<0||F>this.elements.length-1||U(this.elements[F]))return!1;var J=this.slidesContainer.querySelectorAll(".gslide")[F];if(p(J,"loaded"))return!1;var re=this.elements[F],ye=re.type,xe={index:F,slide:J,slideNode:J,slideConfig:re.slideConfig,slideIndex:F,trigger:re.node,player:null};this.trigger("slide_before_load",xe),ye==="video"||ye==="external"?setTimeout(function(){re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})},200):re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(F<0||F>this.elements.length-1))return!1;F<0?F=this.elements.length-1:F>=this.elements.length&&(F=0),this.showSlide(F)}},{key:"insertSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;H<0&&(H=this.elements.length);var J=new Ie(F,this,H),re=J.getConfig(),ye=l({},re),xe=J.create(),Re=this.elements.length-1;ye.index=H,ye.node=!1,ye.instance=J,ye.slideConfig=re,this.elements.splice(H,0,ye);var P=null,Q=null;if(this.slidesContainer){if(H>Re)this.slidesContainer.appendChild(xe);else{var ie=this.slidesContainer.querySelectorAll(".gslide")[H];this.slidesContainer.insertBefore(xe,ie)}(this.settings.preload&&this.index==0&&H==0||this.index-1==H||this.index+1==H)&&this.preloadSlide(H),this.index===0&&H===0&&(this.index=1),this.updateNavigationClasses(),P=this.slidesContainer.querySelectorAll(".gslide")[H],Q=this.getSlidePlayerInstance(H),ye.slideNode=P}this.trigger("slide_inserted",{index:H,slide:P,slideNode:P,slideConfig:re,slideIndex:H,trigger:null,player:Q}),O(this.settings.slideInserted)&&this.settings.slideInserted({index:H,slide:P,player:Q})}},{key:"removeSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(F<0||F>this.elements.length-1)return!1;var H=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[F];H&&(this.getActiveSlideIndex()==F&&(F==this.elements.length-1?this.prevSlide():this.nextSlide()),H.parentNode.removeChild(H)),this.elements.splice(F,1),this.trigger("slide_removed",F),O(this.settings.slideRemoved)&&this.settings.slideRemoved(F)}},{key:"slideAnimateIn",value:function(F,H){var J=this,re=F.querySelector(".gslide-media"),ye=F.querySelector(".gslide-description"),xe={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},Re={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(re.offsetWidth>0&&ye&&(w(ye),ye.style.display=""),h(F,this.effectsClasses),H)v(F,this.settings.cssEfects[this.settings.openEffect].in,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])});else{var P=this.settings.slideEffect,Q=P!=="none"?this.settings.cssEfects[P].in:P;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Q=this.settings.cssEfects.slideBack.in),v(F,Q,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])})}setTimeout(function(){J.resize(F)},100),d(F,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var F=this.prevActiveSlide;h(F,this.effectsClasses),d(F,"prev");var H=this.settings.slideEffect,J=H!=="none"?this.settings.cssEfects[H].out:H;this.slidePlayerPause(F),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),O(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(J=this.settings.cssEfects.slideBack.out),v(F,J,function(){var re=F.querySelector(".ginner-container"),ye=F.querySelector(".gslide-media"),xe=F.querySelector(".gslide-description");re.style.transform="",ye.style.transform="",h(ye,"greset"),ye.style.opacity="",xe&&(xe.style.opacity=""),h(F,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(F){var H="gvideo"+F,J=this.getAllPlayers();return!(!q(J,H)||!J[H])&&J[H]}},{key:"stopSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"slidePlayerPause",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"playSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var J=this.getSlidePlayerInstance(F);J&&!J.playing&&J.play()}},{key:"slidePlayerPlay",value:function(F){var H;if(!Ze||(H=this.settings.plyr.config)!==null&&H!==void 0&&H.muted){if(K(F)){var J=F.querySelector(".gvideo-wrapper");J&&(F=J.getAttribute("data-index"))}var re=this.getSlidePlayerInstance(F);re&&!re.playing&&(re.play(),this.settings.autofocusVideos&&re.elements.container.focus())}}},{key:"setElements",value:function(F){var H=this;this.settings.elements=!1;var J=[];F&&F.length&&u(F,function(re,ye){var xe=new Ie(re,H,ye),Re=xe.getConfig(),P=l({},Re);P.slideConfig=Re,P.instance=xe,P.index=ye,J.push(P)}),this.elements=J,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var re=_(H.settings.slideHTML);H.slidesContainer.appendChild(re)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(F){var H=!1;return u(this.elements,function(J,re){if(q(J,"node")&&J.node==F)return H=re,!0}),H}},{key:"getElements",value:function(){var F=this,H=[];this.elements=this.elements?this.elements:[],!U(this.settings.elements)&&L(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=!1,P.index=ye,P.instance=xe,P.slideConfig=Re,H.push(P)});var J=!1;return this.getSelector()&&(J=document.querySelectorAll(this.getSelector())),J&&u(J,function(re,ye){var xe=new Ie(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=re,P.index=ye,P.instance=xe,P.slideConfig=Re,P.gallery=re.getAttribute("data-gallery"),H.push(P)}),H}},{key:"getGalleryElements",value:function(F,H){return F.filter(function(J){return J.gallery==H})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var F=[];for(var H in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(H)){var J=this.settings.cssEfects[H];F.push("g".concat(J.in)),F.push("g".concat(J.out))}return F.join(" ")}},{key:"build",value:function(){var F=this;if(this.built)return!1;var H=document.body.childNodes,J=[];u(H,function(ie){ie.parentNode==document.body&&ie.nodeName.charAt(0)!=="#"&&ie.hasAttribute&&!ie.hasAttribute("aria-hidden")&&(J.push(ie),ie.setAttribute("aria-hidden","true"))});var re=q(this.settings.svg,"next")?this.settings.svg.next:"",ye=q(this.settings.svg,"prev")?this.settings.svg.prev:"",xe=q(this.settings.svg,"close")?this.settings.svg.close:"",Re=this.settings.lightboxHTML;Re=_(Re=(Re=(Re=Re.replace(/{nextSVG}/g,re)).replace(/{prevSVG}/g,ye)).replace(/{closeSVG}/g,xe)),document.body.appendChild(Re);var P=document.getElementById("glightbox-body");this.modal=P;var Q=P.querySelector(".gclose");this.prevButton=P.querySelector(".gprev"),this.nextButton=P.querySelector(".gnext"),this.overlay=P.querySelector(".goverlay"),this.loader=P.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=J,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&Q&&(this.events.close=c("click",{onElement:Q,withCallback:function(ie,ae){ie.preventDefault(),F.close()}})),Q&&!this.settings.closeButton&&Q.parentNode.removeChild(Q),this.nextButton&&(this.events.next=c("click",{onElement:this.nextButton,withCallback:function(ie,ae){ie.preventDefault(),F.nextSlide()}})),this.prevButton&&(this.events.prev=c("click",{onElement:this.prevButton,withCallback:function(ie,ae){ie.preventDefault(),F.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=c("click",{onElement:P,withCallback:function(ie,ae){F.preventOutsideClick||p(document.body,"glightbox-mobile")||g(ie.target,".ginner-container")||g(ie.target,".gbtn")||p(ie.target,"gnext")||p(ie.target,"gprev")||F.close()}})),u(this.elements,function(ie,ae){F.slidesContainer.appendChild(ie.instance.create()),ie.slideNode=F.slidesContainer.querySelectorAll(".gslide")[ae]}),pe&&d(document.body,"glightbox-touch"),this.events.resize=c("resize",{onElement:window,withCallback:function(){F.resize()}}),this.built=!0}},{key:"resize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((F=F||this.activeSlide)&&!p(F,"zoomed")){var H=A(),J=F.querySelector(".gvideo-wrapper"),re=F.querySelector(".gslide-image"),ye=this.slideDescription,xe=H.width,Re=H.height;if(xe<=768?d(document.body,"glightbox-mobile"):h(document.body,"glightbox-mobile"),J||re){var P=!1;if(ye&&(p(ye,"description-bottom")||p(ye,"description-top"))&&!p(ye,"gabsolute")&&(P=!0),re){if(xe<=768)re.querySelector("img");else if(P){var Q,ie,ae=ye.offsetHeight,ke=re.querySelector("img"),Ce=(Q=this.elements[this.index])===null||Q===void 0?void 0:Q.node,Ee="100vh";Ce&&(Ee=(ie=Ce.getAttribute("data-height"))!==null&&ie!==void 0?ie:Ee),ke.setAttribute("style","max-height: calc(".concat(Ee," - ").concat(ae,"px)")),ye.setAttribute("style","max-width: ".concat(ke.offsetWidth,"px;"))}}if(J){var De=q(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!De){var Oe=J.clientWidth,We=J.clientHeight,tt=Oe/We;De="".concat(Oe/tt,":").concat(We/tt)}var bt=De.split(":"),Pt=this.settings.videosWidth,_t=this.settings.videosWidth,Kt=(_t=X(Pt)||Pt.indexOf("px")!==-1?parseInt(Pt):Pt.indexOf("vw")!==-1?xe*parseInt(Pt)/100:Pt.indexOf("vh")!==-1?Re*parseInt(Pt)/100:Pt.indexOf("%")!==-1?xe*parseInt(Pt)/100:parseInt(J.clientWidth))/(parseInt(bt[0])/parseInt(bt[1]));if(Kt=Math.floor(Kt),P&&(Re-=ye.offsetHeight),_t>xe||Kt>Re||Re<Kt&&xe>_t){var sn=J.offsetWidth,rn=J.offsetHeight,on=Re/rn,vn={width:sn*on,height:rn*on};J.parentNode.setAttribute("style","max-width: ".concat(vn.width,"px")),P&&ye.setAttribute("style","max-width: ".concat(vn.width,"px;"))}else J.parentNode.style.maxWidth="".concat(Pt),P&&ye.setAttribute("style","max-width: ".concat(Pt,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var F=this.loop();h(this.nextButton,"disabled"),h(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||F?this.index!==this.elements.length-1||F||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var F=q(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return F=q(this.settings,"loop")?this.settings.loop:F,F}},{key:"close",value:function(){var F=this;if(!this.lightboxOpen){if(this.events){for(var H in this.events)this.events.hasOwnProperty(H)&&this.events[H].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(J){J.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),v(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),v(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(F.activeSlide=null,F.prevActiveSlideIndex=null,F.prevActiveSlide=null,F.built=!1,F.events){for(var J in F.events)F.events.hasOwnProperty(J)&&F.events[J].destroy();F.events=null}var re=document.body;h(se,"glightbox-open"),h(re,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),F.modal.parentNode.removeChild(F.modal),F.trigger("close"),O(F.settings.onClose)&&F.settings.onClose();var ye=document.querySelector(".gcss-styles");ye&&ye.parentNode.removeChild(ye),F.lightboxOpen=!1,F.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||!O(H))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:F,once:J,callback:H})}},{key:"once",value:function(F,H){this.on(F,H,!0)}},{key:"trigger",value:function(F){var H=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=[];u(this.apiEvents,function(ye,xe){var Re=ye.evt,P=ye.once,Q=ye.callback;Re==F&&(Q(J),P&&re.push(xe))}),re.length&&u(re,function(ye){return H.apiEvents.splice(ye,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.1"}}]);return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=new be(F);return H.init(),H}})}(l3)),l3.exports}var j9t=z9t();const U9t=sa(j9t);let P4=[],N4=[];function q9t(e,t,n,r){const s=new DOMParser().parseFromString(e,"text/html"),o=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);s.querySelectorAll("a").forEach(f=>f.target="_blank"),P4.forEach(f=>f==null?void 0:f.disconnect()),P4=[],N4.forEach(f=>f==null?void 0:f.disconnect()),N4=[],a&&r.nav.forEach(f=>{const c=new IntersectionObserver(d=>{d.forEach(h=>{const p=h.isIntersecting,g=h.target.getAttribute("id");p&&o.querySelectorAll(".navigation li").forEach(v=>{v.classList.contains(`nav-${g}`)?v.classList.add("active"):v.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const d=o.querySelector(`#${f.id}`);d&&(c.observe(d),P4.push(c))},200)}),Object.keys(t).forEach(f=>{const c=t[f];if(c9t.includes(c.mode)&&c.steps){const d=`${c.as}#${c.id}`,h=new IntersectionObserver(p=>{p.forEach(g=>{const v=g.isIntersecting,x=Number(g.target.getAttribute("key"));v&&sCe(c,x,d,o)})});setTimeout(()=>{if(!o.querySelector(`#${f}`))return;o.querySelectorAll(`#${f} section-step`).forEach((v,x)=>{v.setAttribute("key",`${x}`),h.observe(v)}),N4.push(h),sCe(c,0,d,o)},100)}});function u(){o.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(c){c.getAttribute("data-parallax")==="true"&&(c.style.transform="translateY("+c.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(s.body.childNodes).map(f=>H9t(f,n))}function sCe(e,t,n,r){const i=r.querySelector(n);Object.keys(e.steps[t]).forEach(s=>{i[s]=e.steps[t][s]})}function H9t(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.querySelectorAll("*").forEach(r=>{/^[a-z]+(-[a-z0-9]+)*$/.test(r.tagName.toLowerCase())&&e.classList.contains("section-custom")&&Array.from(r.attributes).forEach(i=>r[i.name]=xz(r,i.name)),setTimeout(()=>t(r),100)}),e.querySelectorAll){const n=U9t({autoplayVideos:!0}),r=[],i=e.querySelectorAll("img"),s=e.querySelectorAll("video");[...i,...s].forEach(o=>{const a=o.getAttribute("mode");if(o.parentNode.tagName!=="A"&&a!=="hero"){o.style.cursor="zoom-in",o.addEventListener("click",()=>{n.open()}),o.onerror=()=>{document.body.contains(o)&&o.getAttribute("data-fallback-src")?(o.src=o.getAttribute("data-fallback-src"),o.removeAttribute("data-fallback-src")):o.src="https://placehold.co/600x400?text=Media+not+found"};const l=()=>{document.body.contains(o)&&o.getAttribute("data-fallback-src")&&o.removeAttribute("data-fallback-src")};o.onload=l,o.onloadeddata=l,r.push({type:"image",href:o.src})}}),n.setElements(r)}return e}function xz(e,t=void 0){const n=t?e.getAttribute(t):e;return pNe(n)}function pNe(e){let t;try{t=JSON.parse(e)}catch{!isNaN(e)&&e.trim()!==""?t=Number(e):e==="true"?t=!0:e==="false"?t=!1:t=e}return t}function oCe(e,t,n,r){const i=n.getBoundingClientRect(),s=(i.right+i.left)/2,o=25/2,a=t?i.top-o:void 0,l=t?i.top+o:void 0,u=i.bottom-o,f=i.bottom+o,c=s-o,d=s+o,{clientX:h,clientY:p}=e;if(h>=c&&h<=d&&(p>=u||p>=a)&&(p<=f||p<=l)&&r.showEditor!=="closed"){const v=t?p>=a&&p<=l:!1,x=Number(n.getAttribute("data-section"));r.addCustomSectionIndex=v?x-1:x,r.requestUpdate()}}function G9t(e,t,n,r,i){const s=new DOMParser;let o=-1;if(n&&t.length&&e.length){o=0;const l=`
    <div class="navigation">
      <div class="container nav-container">
        <span class="hamburger-menu" aria-label="Toggle navigation">
        </span>
        <div class="nav-overlay"></div>
        <ul class="nav-list">
          ${t.map(({id:p,title:g,state:v})=>v?`<li class="nav-${p}"><a href="#${p}">${g}</a></li>`:"").join("")}
        </ul>
      </div>
    </div>
  `,u=s.parseFromString(l,"text/html").body.firstChild,f=u.querySelector(".hamburger-menu"),c=u.querySelector(".navigation .container ul"),d=u.querySelector(".nav-overlay"),h=u.querySelectorAll(".nav-list li");if(f&&c){const p=()=>{f.classList.toggle("active"),c.classList.toggle("show"),d.classList.toggle("show")};f.addEventListener("click",()=>p()),d.addEventListener("click",()=>p()),h.forEach(g=>{g.addEventListener("click",()=>p())})}e[0].classList.contains("hero")&&(o=1),e.splice(o,0,u)}let a=!1;if(e.length){const l=o+1;e[l].classList.add("section-start"),e.slice(l).forEach((u,f)=>{if(u.classList&&(u.classList.contains("section-wrap")&&(a=!0),u.classList.add("section-item"),u.setAttribute("data-section",`${f+1}`),r!==void 0)){const c=u.classList.contains("section-start");u.addEventListener("click",function(d){oCe(d,c,this,i)})}})}if(!a){let l=document.createElement("div");l.className="section-wrap container section-item",e.forEach(u=>{l.appendChild(u)}),l.addEventListener("click",function(u){oCe(u,!1,this,i)}),e=[l]}return e}const V9t="@eox/storytelling",W9t="1.5.0",Y9t="module",X9t={vite:"^6.0.3"},Z9t={npm:">=8.0.0",node:">=18.0.0"},K9t=["types","dist","src"],J9t="./src/main.js",Q9t="./types/src/main.d.ts",e7t={"*":{".":["./types/src/main.d.ts"],"src/*":["./types/src/*"]}},t7t={prepack:"tsc -p tsconfig.build.json || true",build:"vite build",watch:"vite build --watch"},n7t={"@eox/elements-utils":"^0.1.5","@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.2.0","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},r7t={"@eox/jsonform":"*"},xC={name:V9t,version:W9t,type:Y9t,devDependencies:X9t,engines:Z9t,files:K9t,main:J9t,types:Q9t,typesVersions:e7t,scripts:t7t,dependencies:n7t,peerDependencies:r7t};function i7t(e,t){(e.shadowRoot||e).querySelectorAll(t).forEach(n=>{n.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),mNe(e)})})}function mNe(e){const t=window.parent.location.hash,n=t?e.shadowRoot.querySelector(t):null;n&&n.scrollIntoView({behavior:"smooth"})}function s7t(e){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(e.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function o7t(){const e=document.createElement("style");e.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(e)}function B4(e){const t=e.split("-")[0].split(".").map(Number);let n=0;const r=1e3;for(let i=0;i<t.length;i++)n+=t[i]*Math.pow(r,t.length-i-1);return n}function a7t(e){const t=Number(Object.keys($4).find(r=>$4[r].length===1)),n=$4[e];if(!e||!n)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${t}).`),t;if(t===e)return e;{const r=[B4(n[0]),B4(n[1])],i=B4(xC.version);return i>=r[0]&&i<=r[1]||console.error(`You are using an older or newer version of ${xC.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${xC.name} package to (>=${n[0]} and <=${n[1]}) or change the markdown syntax version to ${xC.version}`),e}}var z4={exports:{}},aCe;function l7t(){return aCe||(aCe=1,function(e,t){(function(n,r){e.exports=r()})(self,()=>{return n={7629:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9474),f=o(1687),c=o(8652),d=o(8160),h=o(3292),p=o(6354),g=o(8901),v=o(9708),x=o(6914),y=o(2294),w=o(6133),_=o(1152),A=o(8863),T=o(2036),D={Base:class{constructor(k){this.type=k,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new y.Ids,this._preferences=null,this._refs=new w.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof v.describe=="function","Manifest functionality disabled"),v.describe(this)}allow(...k){return d.verifyFlat(k,"allow"),this._values(k,"_valids")}alter(k){a(k&&typeof k=="object"&&!Array.isArray(k),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const R=this.clone();R.$_terms.alterations=R.$_terms.alterations||[];for(const O in k){const B=k[O];a(typeof B=="function","Alteration adjuster for",O,"must be a function"),R.$_terms.alterations.push({target:O,adjuster:B})}return R.$_temp.ruleset=!1,R}artifact(k){return a(k!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",k)}cast(k){return a(k===!1||typeof k=="string","Invalid to value"),a(k===!1||this._definition.cast[k],"Type",this.type,"does not support casting to",k),this.$_setFlag("cast",k===!1?void 0:k)}default(k,R){return this._default("default",k,R)}description(k){return a(k&&typeof k=="string","Description must be a non-empty string"),this.$_setFlag("description",k)}empty(k){const R=this.clone();return k!==void 0&&(k=R.$_compile(k,{override:!1})),R.$_setFlag("empty",k,{clone:!1})}error(k){return a(k,"Missing error"),a(k instanceof Error||typeof k=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",k)}example(k,R={}){return a(k!==void 0,"Missing example"),d.assertOptions(R,["override"]),this._inner("examples",k,{single:!0,override:R.override})}external(k,R){return typeof k=="object"&&(a(!R,"Cannot combine options with description"),R=k.description,k=k.method),a(typeof k=="function","Method must be a function"),a(R===void 0||R&&typeof R=="string","Description must be a non-empty string"),this._inner("externals",{method:k,description:R},{single:!0})}failover(k,R){return this._default("failover",k,R)}forbidden(){return this.presence("forbidden")}id(k){return k?(a(typeof k=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(k),"id cannot contain period character"),this.$_setFlag("id",k)):this.$_setFlag("id",void 0)}invalid(...k){return this._values(k,"_invalids")}label(k){return a(k&&typeof k=="string","Label name must be a non-empty string"),this.$_setFlag("label",k)}meta(k){return a(k!==void 0,"Meta cannot be undefined"),this._inner("metas",k,{single:!0})}note(...k){a(k.length,"Missing notes");for(const R of k)a(R&&typeof R=="string","Notes must be non-empty strings");return this._inner("notes",k)}only(k=!0){return a(typeof k=="boolean","Invalid mode:",k),this.$_setFlag("only",k)}optional(){return this.presence("optional")}prefs(k){a(k,"Missing preferences"),a(k.context===void 0,"Cannot override context"),a(k.externals===void 0,"Cannot override externals"),a(k.warnings===void 0,"Cannot override warnings"),a(k.debug===void 0,"Cannot override debug"),d.checkPreferences(k);const R=this.clone();return R._preferences=d.preferences(R._preferences,k),R}presence(k){return a(["optional","required","forbidden"].includes(k),"Unknown presence mode",k),this.$_setFlag("presence",k)}raw(k=!0){return this.$_setFlag("result",k?"raw":void 0)}result(k){return a(["raw","strip"].includes(k),"Unknown result mode",k),this.$_setFlag("result",k)}required(){return this.presence("required")}strict(k){const R=this.clone(),O=k!==void 0&&!k;return R._preferences=d.preferences(R._preferences,{convert:O}),R}strip(k=!0){return this.$_setFlag("result",k?"strip":void 0)}tag(...k){a(k.length,"Missing tags");for(const R of k)a(R&&typeof R=="string","Tags must be non-empty strings");return this._inner("tags",k)}unit(k){return a(k&&typeof k=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",k)}valid(...k){d.verifyFlat(k,"valid");const R=this.allow(...k);return R.$_setFlag("only",!!R._valids,{clone:!1}),R}when(k,R){const O=this.clone();O.$_terms.whens||(O.$_terms.whens=[]);const B=h.when(O,k,R);if(!["any","link"].includes(O.type)){const K=B.is?[B]:B.switch;for(const L of K)a(!L.then||L.then.type==="any"||L.then.type===O.type,"Cannot combine",O.type,"with",L.then&&L.then.type),a(!L.otherwise||L.otherwise.type==="any"||L.otherwise.type===O.type,"Cannot combine",O.type,"with",L.otherwise&&L.otherwise.type)}return O.$_terms.whens.push(B),O.$_mutateRebuild()}cache(k){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const R=this.clone();return R._cache=k||c.provider.provision(),R.$_temp.ruleset=!1,R}clone(){const k=Object.create(Object.getPrototypeOf(this));return this._assign(k)}concat(k){a(d.isSchema(k),"Invalid schema object"),a(this.type==="any"||k.type==="any"||k.type===this.type,"Cannot merge type",this.type,"with another type:",k.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!k._inRuleset(),"Cannot concatenate a schema with open ruleset");let R=this.clone();if(this.type==="any"&&k.type!=="any"){const O=k.clone();for(const B of Object.keys(R))B!=="type"&&(O[B]=R[B]);R=O}R._ids.concat(k._ids),R._refs.register(k,w.toSibling),R._preferences=R._preferences?d.preferences(R._preferences,k._preferences):k._preferences,R._valids=T.merge(R._valids,k._valids,k._invalids),R._invalids=T.merge(R._invalids,k._invalids,k._valids);for(const O of k._singleRules.keys())R._singleRules.has(O)&&(R._rules=R._rules.filter(B=>B.keep||B.name!==O),R._singleRules.delete(O));for(const O of k._rules)k._definition.rules[O.method].multi||R._singleRules.set(O.name,O),R._rules.push(O);if(R._flags.empty&&k._flags.empty){R._flags.empty=R._flags.empty.concat(k._flags.empty);const O=Object.assign({},k._flags);delete O.empty,f(R._flags,O)}else if(k._flags.empty){R._flags.empty=k._flags.empty;const O=Object.assign({},k._flags);delete O.empty,f(R._flags,O)}else f(R._flags,k._flags);for(const O in k.$_terms){const B=k.$_terms[O];B?R.$_terms[O]?R.$_terms[O]=R.$_terms[O].concat(B):R.$_terms[O]=B.slice():R.$_terms[O]||(R.$_terms[O]=B)}return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,k]),R.$_mutateRebuild()}extend(k){return a(!k.base,"Cannot extend type with another base"),g.type(this,k)}extract(k){return k=Array.isArray(k)?k:k.split("."),this._ids.reach(k)}fork(k,R){a(!this._inRuleset(),"Cannot fork inside a ruleset");let O=this;for(let B of[].concat(k))B=Array.isArray(B)?B:B.split("."),O=O._ids.fork(B,R,O);return O.$_temp.ruleset=!1,O}rule(k){const R=this._definition;d.assertOptions(k,Object.keys(R.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const O=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(O>=0&&O<this._rules.length,"Cannot apply rules to empty ruleset");const B=this.clone();for(let K=O;K<B._rules.length;++K){const L=B._rules[K],$=l(L);for(const I in k)R.modifiers[I]($,k[I]),a($.name===L.name,"Cannot change rule name");B._rules[K]=$,B._singleRules.get($.name)===L&&B._singleRules.set($.name,$)}return B.$_temp.ruleset=!1,B.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const k=this.clone();return k.$_temp.ruleset=k._rules.length,k}get $(){return this.ruleset}tailor(k){k=[].concat(k),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let R=this;if(this.$_terms.alterations)for(const{target:O,adjuster:B}of this.$_terms.alterations)k.includes(O)&&(R=B(R),a(d.isSchema(R),"Alteration adjuster for",O,"failed to return a schema object"));return R=R.$_modify({each:O=>O.tailor(k),ref:!1}),R.$_temp.ruleset=!1,R.$_mutateRebuild()}tracer(){return _.location?_.location(this):this}validate(k,R){return A.entry(k,this,R)}validateAsync(k,R){return A.entryAsync(k,this,R)}$_addRule(k){typeof k=="string"&&(k={name:k}),a(k&&typeof k=="object","Invalid options"),a(k.name&&typeof k.name=="string","Invalid rule name");for(const L in k)a(L[0]!=="_","Cannot set private rule properties");const R=Object.assign({},k);R._resolve=[],R.method=R.method||R.name;const O=this._definition.rules[R.method],B=R.args;a(O,"Unknown rule",R.method);const K=this.clone();if(B){a(Object.keys(B).length===1||Object.keys(B).length===this._definition.rules[R.name].args.length,"Invalid rule definition for",this.type,R.name);for(const L in B){let $=B[L];if(O.argsByName){const I=O.argsByName.get(L);if(I.ref&&d.isResolvable($))R._resolve.push(L),K.$_mutateRegister($);else if(I.normalize&&($=I.normalize($),B[L]=$),I.assert){const U=d.validateArg($,L,I);a(!U,U,"or reference")}}$!==void 0?B[L]=$:delete B[L]}}return O.multi||(K._ruleRemove(R.name,{clone:!1}),K._singleRules.set(R.name,R)),K.$_temp.ruleset===!1&&(K.$_temp.ruleset=null),O.priority?K._rules.unshift(R):K._rules.push(R),K}$_compile(k,R){return h.schema(this.$_root,k,R)}$_createError(k,R,O,B,K,L={}){const $=L.flags!==!1?this._flags:{},I=L.messages?x.merge(this._definition.messages,L.messages):this._definition.messages;return new p.Report(k,R,O,$,I,B,K)}$_getFlag(k){return this._flags[k]}$_getRule(k){return this._singleRules.get(k)}$_mapLabels(k){return k=Array.isArray(k)?k:k.split("."),this._ids.labels(k)}$_match(k,R,O,B){(O=Object.assign({},O)).abortEarly=!0,O._externals=!1,R.snapshot();const K=!A.validate(k,this,R,O,B).errors;return R.restore(),K}$_modify(k){return d.assertOptions(k,["each","once","ref","schema"]),y.schema(this,k)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(k,{source:R,name:O,path:B,key:K})=>{const L=this._definition[R][O]&&this._definition[R][O].register;L!==!1&&this.$_mutateRegister(k,{family:L,key:K})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(k,{family:R,key:O}={}){this._refs.register(k,R),this._ids.register(k,{key:O})}$_property(k){return this._definition.properties[k]}$_reach(k){return this._ids.reach(k)}$_rootReferences(){return this._refs.roots()}$_setFlag(k,R,O={}){a(k[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const B=this._definition.flags[k]||{};if(u(R,B.default)&&(R=void 0),u(R,this._flags[k]))return this;const K=O.clone!==!1?this.clone():this;return R!==void 0?(K._flags[k]=R,K.$_mutateRegister(R)):delete K._flags[k],k[0]!=="_"&&(K.$_temp.ruleset=!1),K}$_parent(k,...R){return this[k][d.symbols.parent].call(this,...R)}$_validate(k,R,O){return A.validate(k,this,R,O)}_assign(k){k.type=this.type,k.$_root=this.$_root,k.$_temp=Object.assign({},this.$_temp),k.$_temp.whens={},k._ids=this._ids.clone(),k._preferences=this._preferences,k._valids=this._valids&&this._valids.clone(),k._invalids=this._invalids&&this._invalids.clone(),k._rules=this._rules.slice(),k._singleRules=l(this._singleRules,{shallow:!0}),k._refs=this._refs.clone(),k._flags=Object.assign({},this._flags),k._cache=null,k.$_terms={};for(const R in this.$_terms)k.$_terms[R]=this.$_terms[R]?this.$_terms[R].slice():null;k.$_super={};for(const R in this.$_super)k.$_super[R]=this._super[R].bind(k);return k}_bare(){const k=this.clone();k._reset();const R=k._definition.terms;for(const O in R){const B=R[O];k.$_terms[O]=B.init}return k.$_mutateRebuild()}_default(k,R,O={}){return d.assertOptions(O,"literal"),a(R!==void 0,"Missing",k,"value"),a(typeof R=="function"||!O.literal,"Only function value supports literal option"),typeof R=="function"&&O.literal&&(R={[d.symbols.literal]:!0,literal:R}),this.$_setFlag(k,R)}_generate(k,R,O){if(!this.$_terms.whens)return{schema:this};const B=[],K=[];for(let I=0;I<this.$_terms.whens.length;++I){const U=this.$_terms.whens[I];if(U.concat){B.push(U.concat),K.push(`${I}.concat`);continue}const q=U.ref?U.ref.resolve(k,R,O):k,Y=U.is?[U]:U.switch,X=K.length;for(let te=0;te<Y.length;++te){const{is:le,then:ee,otherwise:z}=Y[te],he=`${I}${U.switch?"."+te:""}`;if(le.$_match(q,R.nest(le,`${he}.is`),O)){if(ee){const de=R.localize([...R.path,`${he}.then`],R.ancestors,R.schemas),{schema:ze,id:He}=ee._generate(k,de,O);B.push(ze),K.push(`${he}.then${He?`(${He})`:""}`);break}}else if(z){const de=R.localize([...R.path,`${he}.otherwise`],R.ancestors,R.schemas),{schema:ze,id:He}=z._generate(k,de,O);B.push(ze),K.push(`${he}.otherwise${He?`(${He})`:""}`);break}}if(U.break&&K.length>X)break}const L=K.join(", ");if(R.mainstay.tracer.debug(R,"rule","when",L),!L)return{schema:this};if(!R.mainstay.tracer.active&&this.$_temp.whens[L])return{schema:this.$_temp.whens[L],id:L};let $=this;this._definition.generate&&($=this._definition.generate(this,k,R,O));for(const I of B)$=$.concat(I);return this.$_root._tracer&&this.$_root._tracer._combine($,[this,...B]),this.$_temp.whens[L]=$,{schema:$,id:L}}_inner(k,R,O={}){a(!this._inRuleset(),`Cannot set ${k} inside a ruleset`);const B=this.clone();return B.$_terms[k]&&!O.override||(B.$_terms[k]=[]),O.single?B.$_terms[k].push(R):B.$_terms[k].push(...R),B.$_temp.ruleset=!1,B}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(k,R={}){if(!this._singleRules.has(k))return this;const O=R.clone!==!1?this.clone():this;O._singleRules.delete(k);const B=[];for(let K=0;K<O._rules.length;++K){const L=O._rules[K];L.name!==k||L.keep?B.push(L):O._inRuleset()&&K<O.$_temp.ruleset&&--O.$_temp.ruleset}return O._rules=B,O}_values(k,R){d.verifyFlat(k,R.slice(1,-1));const O=this.clone(),B=k[0]===d.symbols.override;if(B&&(k=k.slice(1)),!O[R]&&k.length?O[R]=new T:B&&(O[R]=k.length?new T:null,O.$_mutateRebuild()),!O[R])return O;B&&O[R].override();for(const K of k){a(K!==void 0,"Cannot call allow/valid/invalid with undefined"),a(K!==d.symbols.override,"Override must be the first value");const L=R==="_invalids"?"_valids":"_invalids";O[L]&&(O[L].remove(K),O[L].length||(a(R==="_valids"||!O._flags.only,"Setting invalid value",K,"leaves schema rejecting all values due to previous valid rule"),O[L]=null)),O[R].add(K,O._refs)}return O}}};D.Base.prototype[d.symbols.any]={version:d.version,compile:h.compile,root:"$_root"},D.Base.prototype.isImmutable=!0,D.Base.prototype.deny=D.Base.prototype.invalid,D.Base.prototype.disallow=D.Base.prototype.invalid,D.Base.prototype.equal=D.Base.prototype.valid,D.Base.prototype.exist=D.Base.prototype.required,D.Base.prototype.not=D.Base.prototype.invalid,D.Base.prototype.options=D.Base.prototype.prefs,D.Base.prototype.preferences=D.Base.prototype.prefs,i.exports=new D.Base},8652:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),f={max:1e3,supported:new Set(["undefined","boolean","number","string"])};s.provider={provision:c=>new f.Cache(c)},f.Cache=class{constructor(c={}){u.assertOptions(c,["max"]),a(c.max===void 0||c.max&&c.max>0&&isFinite(c.max),"Invalid max cache size"),this._max=c.max||f.max,this._map=new Map,this._list=new f.List}get length(){return this._map.size}set(c,d){if(c!==null&&!f.supported.has(typeof c))return;let h=this._map.get(c);if(h)return h.value=d,void this._list.first(h);h=this._list.unshift({key:c,value:d}),this._map.set(c,h),this._compact()}get(c){const d=this._map.get(c);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const c=this._list.pop();this._map.delete(c.key)}}},f.List=class{constructor(){this.tail=null,this.head=null}unshift(c){return c.next=null,c.prev=this.head,this.head&&(this.head.next=c),this.head=c,this.tail||(this.tail=c),c}first(c){c!==this.head&&(this._remove(c),this.unshift(c))}pop(){return this._remove(this.tail)}_remove(c){const{next:d,prev:h}=c;return d.prev=h,h&&(h.next=d),c===this.tail&&(this.tail=d),c.prev=null,c.next=null,c}}},8160:(i,s,o)=>{const a=o(375),l=o(7916),u=o(5934);let f,c;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.version=u.version,s.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},s.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},s.assertOptions=function(h,p,g="Options"){a(h&&typeof h=="object"&&!Array.isArray(h),"Options must be of type object");const v=Object.keys(h).filter(x=>!p.includes(x));a(v.length===0,`${g} contain unknown keys: ${v}`)},s.checkPreferences=function(h){c=c||o(3378);const p=c.preferences.validate(h);if(p.error)throw new l([p.error.details[0].message])},s.compare=function(h,p,g){switch(g){case"=":return h===p;case">":return h>p;case"<":return h<p;case">=":return h>=p;case"<=":return h<=p}},s.default=function(h,p){return h===void 0?p:h},s.isIsoDate=function(h){return d.isoDate.test(h)},s.isNumber=function(h){return typeof h=="number"&&!isNaN(h)},s.isResolvable=function(h){return!!h&&(h[s.symbols.ref]||h[s.symbols.template])},s.isSchema=function(h,p={}){const g=h&&h[s.symbols.any];return!!g&&(a(p.legacy||g.version===s.version,"Cannot mix different versions of joi schemas"),!0)},s.isValues=function(h){return h[s.symbols.values]},s.limit=function(h){return Number.isSafeInteger(h)&&h>=0},s.preferences=function(h,p){f=f||o(6914),h=h||{},p=p||{};const g=Object.assign({},h,p);return p.errors&&h.errors&&(g.errors=Object.assign({},h.errors,p.errors),g.errors.wrap=Object.assign({},h.errors.wrap,p.errors.wrap)),p.messages&&(g.messages=f.compile(p.messages,h.messages)),delete g[s.symbols.prefs],g},s.tryWithPath=function(h,p,g={}){try{return h()}catch(v){throw v.path!==void 0?v.path=p+"."+v.path:v.path=p,g.append&&(v.message=`${v.message} (${v.path})`),v}},s.validateArg=function(h,p,{assert:g,message:v}){if(s.isSchema(g)){const x=g.validate(h);return x.error?x.error.message:void 0}if(!g(h))return p?`${p} ${v}`:v},s.verifyFlat=function(h,p){for(const g of h)a(!Array.isArray(g),"Method no longer accepts array arguments:",p)}},3292:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),f={};s.schema=function(c,d,h={}){l.assertOptions(h,["appendPath","override"]);try{return f.schema(c,d,h)}catch(p){throw h.appendPath&&p.path!==void 0&&(p.message=`${p.message} (${p.path})`),p}},f.schema=function(c,d,h){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const p=(g,...v)=>h.override!==!1?g.valid(c.override,...v):g.valid(...v);if(f.simple(d))return p(c,d);if(typeof d=="function")return c.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return p(c,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const g of d)if(!f.simple(g))return c.alternatives().try(...d);return p(c,...d)}return d instanceof RegExp?c.string().regex(d):d instanceof Date?p(c.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),c.object().keys(d))},s.ref=function(c,d){return u.isRef(c)?c:u.create(c,d)},s.compile=function(c,d,h={}){l.assertOptions(h,["legacy"]);const p=d&&d[l.symbols.any];if(p)return a(h.legacy||p.version===l.version,"Cannot mix different versions of joi schemas:",p.version,l.version),d;if(typeof d!="object"||!h.legacy)return s.schema(c,d,{appendPath:!0});const g=f.walk(d);return g?g.compile(g.root,d):s.schema(c,d,{appendPath:!0})},f.walk=function(c){if(typeof c!="object")return null;if(Array.isArray(c)){for(const h of c){const p=f.walk(h);if(p)return p}return null}const d=c[l.symbols.any];if(d)return{root:c[d.root],compile:d.compile};a(Object.getPrototypeOf(c)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const h in c){const p=f.walk(c[h]);if(p)return p}return null},f.simple=function(c){return c===null||["boolean","string","number"].includes(typeof c)},s.when=function(c,d,h){if(h===void 0&&(a(d&&typeof d=="object","Missing options"),h=d,d=u.create(".")),Array.isArray(h)&&(h={switch:h}),l.assertOptions(h,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(h.is===void 0,'"is" can not be used with a schema condition'),a(h.not===void 0,'"not" can not be used with a schema condition'),a(h.switch===void 0,'"switch" can not be used with a schema condition'),f.condition(c,{is:d,then:h.then,otherwise:h.otherwise,break:h.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(h.not===void 0||h.is===void 0,'Cannot combine "is" with "not"'),h.switch===void 0){let g=h;h.not!==void 0&&(g={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let v=g.is!==void 0?c.$_compile(g.is):c.$_root.invalid(null,!1,0,"").required();return a(g.then!==void 0||g.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(g.break===void 0||g.then===void 0||g.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),h.is===void 0||u.isRef(h.is)||l.isSchema(h.is)||(v=v.required()),f.condition(c,{ref:s.ref(d),is:v,then:g.then,otherwise:g.otherwise,break:g.break})}a(Array.isArray(h.switch),'"switch" must be an array'),a(h.is===void 0,'Cannot combine "switch" with "is"'),a(h.not===void 0,'Cannot combine "switch" with "not"'),a(h.then===void 0,'Cannot combine "switch" with "then"');const p={ref:s.ref(d),switch:[],break:h.break};for(let g=0;g<h.switch.length;++g){const v=h.switch[g],x=g===h.switch.length-1;l.assertOptions(v,x?["is","then","otherwise"]:["is","then"]),a(v.is!==void 0,'Switch statement missing "is"'),a(v.then!==void 0,'Switch statement missing "then"');const y={is:c.$_compile(v.is),then:c.$_compile(v.then)};if(u.isRef(v.is)||l.isSchema(v.is)||(y.is=y.is.required()),x){a(h.otherwise===void 0||v.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const w=h.otherwise!==void 0?h.otherwise:v.otherwise;w!==void 0&&(a(p.break===void 0,"Cannot specify both otherwise and break"),y.otherwise=c.$_compile(w))}p.switch.push(y)}return p},f.condition=function(c,d){for(const h of["then","otherwise"])d[h]===void 0?delete d[h]:d[h]=c.$_compile(d[h]);return d}},6354:(i,s,o)=>{const a=o(5688),l=o(8160),u=o(3328);s.Report=class{constructor(f,c,d,h,p,g,v){if(this.code=f,this.flags=h,this.messages=p,this.path=g.path,this.prefs=v,this.state=g,this.value=c,this.message=null,this.template=null,this.local=d||{},this.local.label=s.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const x=this.path[this.path.length-1];typeof x!="object"&&(this.local.key=x)}}_setTemplate(f){if(this.template=f,!this.flags.label&&this.path.length===0){const c=this._template(this.template,"root");c&&(this.local.label=c)}}toString(){if(this.message)return this.message;const f=this.code;if(!this.prefs.errors.render)return this.code;const c=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return c===void 0?`Error code "${f}" is not defined, your custom type is missing the correct messages definition`:(this.message=c.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(f,c){return s.template(this.value,f,c||this.code,this.state,this.prefs)}},s.path=function(f){let c="";for(const d of f)typeof d!="object"&&(typeof d=="string"?(c&&(c+="."),c+=d):c+=`[${d}]`);return c},s.template=function(f,c,d,h,p){if(!c)return;if(u.isTemplate(c))return d!=="root"?c:null;let g=p.errors.language;if(l.isResolvable(g)&&(g=g.resolve(f,h,p)),g&&c[g]){if(c[g][d]!==void 0)return c[g][d];if(c[g]["*"]!==void 0)return c[g]["*"]}return c[d]?c[d]:c["*"]},s.label=function(f,c,d,h){if(!d.errors.label)return"";if(f.label)return f.label;let p=c.path;return d.errors.label==="key"&&c.path.length>1&&(p=c.path.slice(-1)),s.path(p)||s.template(null,d.messages,"root",c,d)||h&&s.template(null,h,"root",c,d)||"value"},s.process=function(f,c,d){if(!f)return null;const{override:h,message:p,details:g}=s.details(f);if(h)return h;if(d.errors.stack)return new s.ValidationError(p,g,c);const v=Error.stackTraceLimit;Error.stackTraceLimit=0;const x=new s.ValidationError(p,g,c);return Error.stackTraceLimit=v,x},s.details=function(f,c={}){let d=[];const h=[];for(const p of f){if(p instanceof Error){if(c.override!==!1)return{override:p};const v=p.toString();d.push(v),h.push({message:v,type:"override",context:{error:p}});continue}const g=p.toString();d.push(g),h.push({message:g,path:p.path.filter(v=>typeof v!="object"),type:p.code,context:p.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:h}},s.ValidationError=class extends Error{constructor(f,c,d){super(f),this._original=d,this.details=c}static isError(f){return f instanceof s.ValidationError}},s.ValidationError.prototype.isJoi=!0,s.ValidationError.prototype.name="ValidationError",s.ValidationError.prototype.annotate=a.error},8901:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),f=o(6914),c={};s.type=function(d,h){const p=Object.getPrototypeOf(d),g=l(p),v=d._assign(Object.create(g)),x=Object.assign({},h);delete x.base,g._definition=x;const y=p._definition||{};x.messages=f.merge(y.messages,x.messages),x.properties=Object.assign({},y.properties,x.properties),v.type=x.type,x.flags=Object.assign({},y.flags,x.flags);const w=Object.assign({},y.terms);if(x.terms)for(const D in x.terms){const k=x.terms[D];a(v.$_terms[D]===void 0,"Invalid term override for",x.type,D),v.$_terms[D]=k.init,w[D]=k}x.terms=w,x.args||(x.args=y.args),x.prepare=c.prepare(x.prepare,y.prepare),x.coerce&&(typeof x.coerce=="function"&&(x.coerce={method:x.coerce}),x.coerce.from&&!Array.isArray(x.coerce.from)&&(x.coerce={method:x.coerce.method,from:[].concat(x.coerce.from)})),x.coerce=c.coerce(x.coerce,y.coerce),x.validate=c.validate(x.validate,y.validate);const _=Object.assign({},y.rules);if(x.rules)for(const D in x.rules){const k=x.rules[D];a(typeof k=="object","Invalid rule definition for",x.type,D);let R=k.method;if(R===void 0&&(R=function(){return this.$_addRule(D)}),R&&(a(!g[D],"Rule conflict in",x.type,D),g[D]=R),a(!_[D],"Rule conflict in",x.type,D),_[D]=k,k.alias){const O=[].concat(k.alias);for(const B of O)g[B]=k.method}k.args&&(k.argsByName=new Map,k.args=k.args.map(O=>(typeof O=="string"&&(O={name:O}),a(!k.argsByName.has(O.name),"Duplicated argument name",O.name),u.isSchema(O.assert)&&(O.assert=O.assert.strict().label(O.name)),k.argsByName.set(O.name,O),O)))}x.rules=_;const A=Object.assign({},y.modifiers);if(x.modifiers)for(const D in x.modifiers){a(!g[D],"Rule conflict in",x.type,D);const k=x.modifiers[D];a(typeof k=="function","Invalid modifier definition for",x.type,D);const R=function(O){return this.rule({[D]:O})};g[D]=R,A[D]=k}if(x.modifiers=A,x.overrides){g._super=p,v.$_super={};for(const D in x.overrides)a(p[D],"Cannot override missing",D),x.overrides[D][u.symbols.parent]=p[D],v.$_super[D]=p[D].bind(v);Object.assign(g,x.overrides)}x.cast=Object.assign({},y.cast,x.cast);const T=Object.assign({},y.manifest,x.manifest);return T.build=c.build(x.manifest&&x.manifest.build,y.manifest&&y.manifest.build),x.manifest=T,x.rebuild=c.rebuild(x.rebuild,y.rebuild),v},c.build=function(d,h){return d&&h?function(p,g){return h(d(p,g),g)}:d||h},c.coerce=function(d,h){return d&&h?{from:d.from&&h.from?[...new Set([...d.from,...h.from])]:null,method(p,g){let v;if((!h.from||h.from.includes(typeof p))&&(v=h.method(p,g),v)){if(v.errors||v.value===void 0)return v;p=v.value}if(!d.from||d.from.includes(typeof p)){const x=d.method(p,g);if(x)return x}return v}}:d||h},c.prepare=function(d,h){return d&&h?function(p,g){const v=d(p,g);if(v){if(v.errors||v.value===void 0)return v;p=v.value}return h(p,g)||v}:d||h},c.rebuild=function(d,h){return d&&h?function(p){h(p),d(p)}:d||h},c.validate=function(d,h){return d&&h?function(p,g){const v=h(p,g);if(v){if(v.errors&&(!Array.isArray(v.errors)||v.errors.length))return v;p=v.value}return d(p,g)||v}:d||h}},5107:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8652),f=o(8160),c=o(3292),d=o(6354),h=o(8901),p=o(9708),g=o(6133),v=o(3328),x=o(1152);let y;const w={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const _={_types:new Set(Object.keys(w.types))};for(const A of _._types)_[A]=function(...T){return a(!T.length||["alternatives","link","object"].includes(A),"The",A,"type does not allow arguments"),w.generate(this,w.types[A],T)};for(const A of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])_[A]=function(...T){return this.any()[A](...T)};Object.assign(_,w.methods);for(const A in w.aliases){const T=w.aliases[A];_[A]=_[T]}return _.x=_.expression,x.setup&&x.setup(_),_}};w.methods={ValidationError:d.ValidationError,version:f.version,cache:u.provider,assert(_,A,...T){w.assert(_,A,!0,T)},attempt:(_,A,...T)=>w.assert(_,A,!1,T),build(_){return a(typeof p.build=="function","Manifest functionality disabled"),p.build(this,_)},checkPreferences(_){f.checkPreferences(_)},compile(_,A){return c.compile(this,_,A)},defaults(_){a(typeof _=="function","modifier must be a function");const A=Object.assign({},this);for(const T of A._types){const D=_(A[T]());a(f.isSchema(D),"modifier must return a valid schema object"),A[T]=function(...k){return w.generate(this,D,k)}}return A},expression:(..._)=>new v(..._),extend(..._){f.verifyFlat(_,"extend"),y=y||o(3378),a(_.length,"You need to provide at least one extension"),this.assert(_,y.extensions);const A=Object.assign({},this);A._types=new Set(A._types);for(let T of _){typeof T=="function"&&(T=T(A)),this.assert(T,y.extension);const D=w.expandExtension(T,A);for(const k of D){a(A[k.type]===void 0||A._types.has(k.type),"Cannot override name",k.type);const R=k.base||this.any(),O=h.type(R,k);A._types.add(k.type),A[k.type]=function(...B){return w.generate(this,O,B)}}}return A},isError:d.ValidationError.isError,isExpression:v.isTemplate,isRef:g.isRef,isSchema:f.isSchema,in:(..._)=>g.in(..._),override:f.symbols.override,ref:(..._)=>g.create(..._),types(){const _={};for(const A of this._types)_[A]=this[A]();for(const A in w.aliases)_[A]=this[A]();return _}},w.assert=function(_,A,T,D){const k=D[0]instanceof Error||typeof D[0]=="string"?D[0]:null,R=k!==null?D[1]:D[0],O=A.validate(_,f.preferences({errors:{stack:!0}},R||{}));let B=O.error;if(!B)return O.value;if(k instanceof Error)throw k;const K=T&&typeof B.annotate=="function"?B.annotate():B.message;throw B instanceof d.ValidationError==0&&(B=l(B)),B.message=k?`${k} ${K}`:K,B},w.generate=function(_,A,T){return a(_,"Must be invoked on a Joi instance."),A.$_root=_,A._definition.args&&T.length?A._definition.args(A,...T):A},w.expandExtension=function(_,A){if(typeof _.type=="string")return[_];const T=[];for(const D of A._types)if(_.type.test(D)){const k=Object.assign({},_);k.type=D,k.base=A[D](),T.push(k)}return T},i.exports=w.root()},6914:(i,s,o)=>{const a=o(375),l=o(8571),u=o(3328);s.compile=function(f,c){if(typeof f=="string")return a(!c,"Cannot set single message string"),new u(f);if(u.isTemplate(f))return a(!c,"Cannot set single message template"),f;a(typeof f=="object"&&!Array.isArray(f),"Invalid message options"),c=c?l(c):{};for(let d in f){const h=f[d];if(d==="root"||u.isTemplate(h)){c[d]=h;continue}if(typeof h=="string"){c[d]=new u(h);continue}a(typeof h=="object"&&!Array.isArray(h),"Invalid message for",d);const p=d;for(d in c[p]=c[p]||{},h){const g=h[d];d==="root"||u.isTemplate(g)?c[p][d]=g:(a(typeof g=="string","Invalid message for",d,"in",p),c[p][d]=new u(g))}}return c},s.decompile=function(f){const c={};for(let d in f){const h=f[d];if(d==="root"){c.root=h;continue}if(u.isTemplate(h)){c[d]=h.describe({compact:!0});continue}const p=d;for(d in c[p]={},h){const g=h[d];d!=="root"?c[p][d]=g.describe({compact:!0}):c[p].root=g}}return c},s.merge=function(f,c){if(!f)return s.compile(c);if(!c)return f;if(typeof c=="string")return new u(c);if(u.isTemplate(c))return c;const d=l(f);for(let h in c){const p=c[h];if(h==="root"||u.isTemplate(p)){d[h]=p;continue}if(typeof p=="string"){d[h]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",h);const g=h;for(h in d[g]=d[g]||{},p){const v=p[h];h==="root"||u.isTemplate(v)?d[g][h]=v:(a(typeof v=="string","Invalid message for",h,"in",g),d[g][h]=new u(v))}}return d}},2294:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),f={};s.Ids=f.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const c=new f.Ids;return c._byId=new Map(this._byId),c._byKey=new Map(this._byKey),c._schemaChain=this._schemaChain,c}concat(c){c._schemaChain&&(this._schemaChain=!0);for(const[d,h]of c._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,h);for(const[d,h]of c._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,h)}fork(c,d,h){const p=this._collect(c);p.push({schema:h});const g=p.shift();let v={id:g.id,schema:d(g.schema)};a(l.isSchema(v.schema),"adjuster function failed to return a joi schema type");for(const x of p)v={id:x.id,schema:f.fork(x.schema,v.id,v.schema)};return v.schema}labels(c,d=[]){const h=c[0],p=this._get(h);if(!p)return[...d,...c].join(".");const g=c.slice(1);return d=[...d,p.schema._flags.label||h],g.length?p.schema._ids.labels(g,d):d.join(".")}reach(c,d=[]){const h=c[0],p=this._get(h);a(p,"Schema does not contain path",[...d,...c].join("."));const g=c.slice(1);return g.length?p.schema._ids.reach(g,[...d,h]):p.schema}register(c,{key:d}={}){if(!c||!l.isSchema(c))return;(c.$_property("schemaChain")||c._ids._schemaChain)&&(this._schemaChain=!0);const h=c._flags.id;if(h){const p=this._byId.get(h);a(!p||p.schema===c,"Cannot add different schemas with the same id:",h),a(!this._byKey.has(h),"Schema id conflicts with existing key:",h),this._byId.set(h,{schema:c,id:h})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:c,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(c,d=[],h=[]){const p=c[0],g=this._get(p);a(g,"Schema does not contain path",[...d,...c].join(".")),h=[g,...h];const v=c.slice(1);return v.length?g.schema._ids._collect(v,[...d,p],h):h}_get(c){return this._byId.get(c)||this._byKey.get(c)}},f.fork=function(c,d,h){const p=s.schema(c,{each:(g,{key:v})=>{if(d===(g._flags.id||v))return h},ref:!1});return p?p.$_mutateRebuild():c},s.schema=function(c,d){let h;for(const p in c._flags){if(p[0]==="_")continue;const g=f.scan(c._flags[p],{source:"flags",name:p},d);g!==void 0&&(h=h||c.clone(),h._flags[p]=g)}for(let p=0;p<c._rules.length;++p){const g=c._rules[p],v=f.scan(g.args,{source:"rules",name:g.name},d);if(v!==void 0){h=h||c.clone();const x=Object.assign({},g);x.args=v,h._rules[p]=x,h._singleRules.get(g.name)===g&&h._singleRules.set(g.name,x)}}for(const p in c.$_terms){if(p[0]==="_")continue;const g=f.scan(c.$_terms[p],{source:"terms",name:p},d);g!==void 0&&(h=h||c.clone(),h.$_terms[p]=g)}return h},f.scan=function(c,d,h,p,g){const v=p||[];if(c===null||typeof c!="object")return;let x;if(Array.isArray(c)){for(let y=0;y<c.length;++y){const w=d.source==="terms"&&d.name==="keys"&&c[y].key,_=f.scan(c[y],d,h,[y,...v],w);_!==void 0&&(x=x||c.slice(),x[y]=_)}return x}if(h.schema!==!1&&l.isSchema(c)||h.ref!==!1&&u.isRef(c)){const y=h.each(c,{...d,path:v,key:g});return y===c?void 0:y}for(const y in c){if(y[0]==="_")continue;const w=f.scan(c[y],d,h,[y,...v],g);w!==void 0&&(x=x||Object.assign({},c),x[y]=w)}return x}},6133:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9621),f=o(8160);let c;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};s.create=function(h,p={}){a(typeof h=="string","Invalid reference key:",h),f.assertOptions(p,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!p.prefix||typeof p.prefix=="object","options.prefix must be of type object");const g=Object.assign({},d.defaults,p);delete g.prefix;const v=g.separator,x=d.context(h,v,p.prefix);if(g.type=x.type,h=x.key,g.type==="value")if(x.root&&(a(!v||h[0]!==v,"Cannot specify relative path with root prefix"),g.ancestor="root",h||(h=null)),v&&v===h)h=null,g.ancestor=0;else if(g.ancestor!==void 0)a(!v||!h||h[0]!==v,"Cannot combine prefix with ancestor option");else{const[y,w]=d.ancestor(h,v);w&&(h=h.slice(w))===""&&(h=null),g.ancestor=y}return g.path=v?h===null?[]:h.split(v):[h],new d.Ref(g)},s.in=function(h,p={}){return s.create(h,{...p,in:!0})},s.isRef=function(h){return!!h&&!!h[f.symbols.ref]},d.Ref=class{constructor(h){a(typeof h=="object","Invalid reference construction"),f.assertOptions(h,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(h.separator)||typeof h.separator=="string"&&h.separator.length===1,"Invalid separator"),a(!h.adjust||typeof h.adjust=="function","options.adjust must be a function"),a(!h.map||Array.isArray(h.map),"options.map must be an array"),a(!h.map||!h.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,h),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(h,p,g,v,x={}){return a(!this.in||x.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(g.context,p,x):this.type==="local"?this._resolve(v,p,x):this.ancestor?this.ancestor==="root"?this._resolve(p.ancestors[p.ancestors.length-1],p,x):(a(this.ancestor<=p.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(p.ancestors[this.ancestor-1],p,x)):this._resolve(h,p,x)}_resolve(h,p,g){let v;if(this.type==="value"&&p.mainstay.shadow&&g.shadow!==!1&&(v=p.mainstay.shadow.get(this.absolute(p))),v===void 0&&(v=u(h,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(v=this.adjust(v)),this.map){const x=this.map.get(v);x!==void 0&&(v=x)}return p.mainstay&&p.mainstay.tracer.resolve(p,this,v),v}toString(){return this.display}absolute(h){return[...h.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const h={path:this.path};this.type!=="value"&&(h.type=this.type),this.separator!=="."&&(h.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(h.ancestor=this.ancestor),this.map&&(h.map=[...this.map]);for(const p of["adjust","iterables","render"])this[p]!==null&&this[p]!==void 0&&(h[p]=this[p]);return this.in!==!1&&(h.in=!0),{ref:h}}updateDisplay(){const h=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${h}`);if(!this.separator)return void(this.display=`ref:${h}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${h}`);if(this.ancestor==="root")return void(this.display=`ref:root:${h}`);if(this.ancestor===1)return void(this.display=`ref:${h||".."}`);const p=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${p}${h||""}`}},d.Ref.prototype[f.symbols.ref]=!0,s.build=function(h){return(h=Object.assign({},d.defaults,h)).type==="value"&&h.ancestor===void 0&&(h.ancestor=1),new d.Ref(h)},d.context=function(h,p,g={}){if(h=h.trim(),g){const v=g.global===void 0?"$":g.global;if(v!==p&&h.startsWith(v))return{key:h.slice(v.length),type:"global"};const x=g.local===void 0?"#":g.local;if(x!==p&&h.startsWith(x))return{key:h.slice(x.length),type:"local"};const y=g.root===void 0?"/":g.root;if(y!==p&&h.startsWith(y))return{key:h.slice(y.length),type:"value",root:!0}}return{key:h,type:"value"}},d.ancestor=function(h,p){if(!p)return[1,0];if(h[0]!==p)return[1,0];if(h[1]!==p)return[0,1];let g=2;for(;h[g]===p;)++g;return[g-1,g]},s.toSibling=0,s.toParent=1,s.Manager=class{constructor(){this.refs=[]}register(h,p){if(h)if(p=p===void 0?s.toParent:p,Array.isArray(h))for(const g of h)this.register(g,p);else if(f.isSchema(h))for(const g of h._refs.refs)g.ancestor-p>=0&&this.refs.push({ancestor:g.ancestor-p,root:g.root});else s.isRef(h)&&h.type==="value"&&h.ancestor-p>=0&&this.refs.push({ancestor:h.ancestor-p,root:h.root}),c=c||o(3328),c.isTemplate(h)&&this.register(h.refs(),p)}get length(){return this.refs.length}clone(){const h=new s.Manager;return h.refs=l(this.refs),h}reset(){this.refs=[]}roots(){return this.refs.filter(h=>!h.ancestor).map(h=>h.root)}}},3378:(i,s,o)=>{const a=o(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),s.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),s.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),s.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),s.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(i,s,o)=>{const a=o(8571),l=o(9621),u=o(8160),f={value:Symbol("value")};i.exports=f.State=class{constructor(c,d,h){this.path=c,this.ancestors=d,this.mainstay=h.mainstay,this.schemas=h.schemas,this.debug=null}localize(c,d=null,h=null){const p=new f.State(c,d,this);return h&&p.schemas&&(p.schemas=[f.schemas(h),...p.schemas]),p}nest(c,d){const h=new f.State(this.path,this.ancestors,this);return h.schemas=h.schemas&&[f.schemas(c),...h.schemas],h.debug=d,h}shadow(c,d){this.mainstay.shadow=this.mainstay.shadow||new f.Shadow,this.mainstay.shadow.set(this.path,c,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},f.schemas=function(c){return u.isSchema(c)?{schema:c}:c},f.Shadow=class{constructor(){this._values=null}set(c,d,h){if(!c.length||h==="strip"&&typeof c[c.length-1]=="number")return;this._values=this._values||new Map;let p=this._values;for(let g=0;g<c.length;++g){const v=c[g];let x=p.get(v);x||(x=new Map,p.set(v,x)),p=x}p[f.value]=d}get(c){const d=this.node(c);if(d)return d[f.value]}node(c){if(this._values)return l(this._values,c,{iterables:!0})}override(c,d){if(!this._values)return;const h=c.slice(0,-1),p=c[c.length-1],g=l(this._values,h,{iterables:!0});d?g.set(p,d):g&&g.delete(p)}}},3328:(i,s,o)=>{const a=o(375),l=o(8571),u=o(5277),f=o(1447),c=o(8160),d=o(6354),h=o(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};i.exports=p.Template=class{constructor(g,v){if(a(typeof g=="string","Template source must be a string"),a(!g.includes("\0")&&!g.includes(""),"Template source cannot contain reserved control characters"),this.source=g,this.rendered=g,this._template=null,v){const{functions:x,...y}=v;this._settings=Object.keys(y).length?l(y):void 0,this._functions=x,this._functions&&(a(Object.keys(this._functions).every(w=>typeof w=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(w=>typeof w=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const g=p.encode(this.source),v=p.split(g);let x=!1;const y=[],w=v.shift();w&&y.push(w);for(const _ of v){const A=_[0]!=="{",T=A?"}":"}}",D=_.indexOf(T);if(D===-1||_[1]==="{"){y.push(`{${p.decode(_)}`);continue}let k=_.slice(A?0:1,D);const R=k[0]===":";R&&(k=k.slice(1));const O=this._ref(p.decode(k),{raw:A,wrapped:R});y.push(O),typeof O!="string"&&(x=!0);const B=_.slice(D+T.length);B&&y.push(p.decode(B))}x?this._template=y:this.rendered=y.join("")}static date(g,v){return p.dateFormat[v.dateFormat].call(g)}describe(g={}){if(!this._settings&&g.compact)return this.source;const v={template:this.source};return this._settings&&(v.options=this._settings),this._functions&&(v.functions=this._functions),v}static build(g){return new p.Template(g.template,g.options||g.functions?{...g.options,functions:g.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(g){return!!g&&!!g[c.symbols.template]}refs(){if(!this._template)return;const g=[];for(const v of this._template)typeof v!="string"&&g.push(...v.refs);return g}resolve(g,v,x,y){return this._template&&this._template.length===1?this._part(this._template[0],g,v,x,y,{}):this.render(g,v,x,y)}_part(g,...v){return g.ref?g.ref.resolve(...v):g.formula.evaluate(v)}render(g,v,x,y,w={}){if(!this.isDynamic())return this.rendered;const _=[];for(const A of this._template)if(typeof A=="string")_.push(A);else{const T=this._part(A,g,v,x,y,w),D=p.stringify(T,g,v,x,y,w);if(D!==void 0){const k=A.raw||(w.errors&&w.errors.escapeHtml)===!1?D:u(D);_.push(p.wrap(k,A.wrapped&&x.errors.wrap.label))}}return _.join("")}_ref(g,{raw:v,wrapped:x}){const y=[],w=A=>{const T=h.create(A,this._settings);return y.push(T),D=>{const k=T.resolve(...D);return k!==void 0?k:null}};try{const A=this._functions?{...p.functions,...this._functions}:p.functions;var _=new f.Parser(g,{reference:w,functions:A,constants:p.constants})}catch(A){throw A.message=`Invalid template variable "${g}" fails due to: ${A.message}`,A}if(_.single){if(_.single.type==="reference"){const A=y[0];return{ref:A,raw:v,refs:y,wrapped:x||A.type==="local"&&A.key==="label"}}return p.stringify(_.single.value)}return{formula:_,raw:v,refs:y}}toString(){return this.source}},p.Template.prototype[c.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(g){return g.replace(/\\(\{+)/g,(v,x)=>p.opens.slice(0,x.length)).replace(/\\(\}+)/g,(v,x)=>p.closes.slice(0,x.length))},p.decode=function(g){return g.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(g){const v=[];let x="";for(let y=0;y<g.length;++y){const w=g[y];if(w==="{"){let _="";for(;y+1<g.length&&g[y+1]==="{";)_+="{",++y;v.push(x),x=_}else x+=w}return v.push(x),v},p.wrap=function(g,v){return v?v.length===1?`${v}${g}${v}`:`${v[0]}${g}${v[1]}`:g},p.stringify=function(g,v,x,y,w,_={}){const A=typeof g,T=y&&y.errors&&y.errors.wrap||{};let D=!1;if(h.isRef(g)&&g.render&&(D=g.in,g=g.resolve(v,x,y,w,{in:g.in,..._})),g===null)return"null";if(A==="string")return p.wrap(g,_.arrayItems&&T.string);if(A==="number"||A==="function"||A==="symbol")return g.toString();if(A!=="object")return JSON.stringify(g);if(g instanceof Date)return p.Template.date(g,y);if(g instanceof Map){const R=[];for(const[O,B]of g.entries())R.push(`${O.toString()} -> ${B.toString()}`);g=R}if(!Array.isArray(g))return g.toString();const k=[];for(const R of g)k.push(p.stringify(R,v,x,y,w,{arrayItems:!0,..._}));return p.wrap(k.join(", "),!D&&T.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(g,v,x)=>g?v:x,length:g=>typeof g=="string"?g.length:g&&typeof g=="object"?Array.isArray(g)?g.length:Object.keys(g).length:null,msg(g){const[v,x,y,w,_]=this,A=_.messages;if(!A)return"";const T=d.template(v,A[0],g,x,y)||d.template(v,A[1],g,x,y);return T?T.render(v,x,y,w,_):""},number:g=>typeof g=="number"?g:typeof g=="string"?parseFloat(g):typeof g=="boolean"?g?1:0:g instanceof Date?g.getTime():null}},4946:(i,s,o)=>{const a=o(375),l=o(1687),u=o(8068),f=o(8160),c=o(3292),d=o(6354),h=o(6133),p={};i.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:h.toSibling}},args:(g,...v)=>v.length===1&&Array.isArray(v[0])?g.try(...v[0]):g.try(...v),validate(g,v){const{schema:x,error:y,state:w,prefs:_}=v;if(x._flags.match){const T=[],D=[];for(let R=0;R<x.$_terms.matches.length;++R){const O=x.$_terms.matches[R],B=w.nest(O.schema,`match.${R}`);B.snapshot();const K=O.schema.$_validate(g,B,_);K.errors?(D.push(K.errors),B.restore()):(T.push(K.value),B.commit())}if(T.length===0)return{errors:y("alternatives.any",{details:D.map(R=>d.details(R,{override:!1}))})};if(x._flags.match==="one")return T.length===1?{value:T[0]}:{errors:y("alternatives.one")};if(T.length!==x.$_terms.matches.length)return{errors:y("alternatives.all",{details:D.map(R=>d.details(R,{override:!1}))})};const k=R=>R.$_terms.matches.some(O=>O.schema.type==="object"||O.schema.type==="alternatives"&&k(O.schema));return k(x)?{value:T.reduce((R,O)=>l(R,O,{mergeArrays:!1}))}:{value:T[T.length-1]}}const A=[];for(let T=0;T<x.$_terms.matches.length;++T){const D=x.$_terms.matches[T];if(D.schema){const O=w.nest(D.schema,`match.${T}`);O.snapshot();const B=D.schema.$_validate(g,O,_);if(!B.errors)return O.commit(),B;O.restore(),A.push({schema:D.schema,reports:B.errors});continue}const k=D.ref?D.ref.resolve(g,w,_):g,R=D.is?[D]:D.switch;for(let O=0;O<R.length;++O){const B=R[O],{is:K,then:L,otherwise:$}=B,I=`match.${T}${D.switch?"."+O:""}`;if(K.$_match(k,w.nest(K,`${I}.is`),_)){if(L)return L.$_validate(g,w.nest(L,`${I}.then`),_)}else if($)return $.$_validate(g,w.nest($,`${I}.otherwise`),_)}}return p.errors(A,v)},rules:{conditional:{method(g,v){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(v.break===void 0,"Cannot use break option with alternatives conditional");const x=this.clone(),y=c.when(x,g,v),w=y.is?[y]:y.switch;for(const _ of w)if(_.then&&_.otherwise){x.$_setFlag("_endedSwitch",!0,{clone:!1});break}return x.$_terms.matches.push(y),x.$_mutateRebuild()}},match:{method(g){if(a(["any","one","all"].includes(g),"Invalid alternatives match mode",g),g!=="any")for(const v of this.$_terms.matches)a(v.schema,"Cannot combine match mode",g,"with conditional rules");return this.$_setFlag("match",g)}},try:{method(...g){a(g.length,"Missing alternative schemas"),f.verifyFlat(g,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const v=this.clone();for(const x of g)v.$_terms.matches.push({schema:v.$_compile(x)});return v.$_mutateRebuild()}}},overrides:{label(g){return this.$_parent("label",g).$_modify({each:(v,x)=>x.path[0]!=="is"&&typeof v._flags.label!="string"?v.label(g):void 0,ref:!1})}},rebuild(g){g.$_modify({each:v=>{f.isSchema(v)&&v.type==="array"&&g.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(g,v){if(v.matches)for(const x of v.matches){const{schema:y,ref:w,is:_,not:A,then:T,otherwise:D}=x;g=y?g.try(y):w?g.conditional(w,{is:_,then:T,not:A,otherwise:D,switch:x.switch}):g.conditional(_,{then:T,otherwise:D})}return g}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(g,{error:v,state:x}){if(!g.length)return{errors:v("alternatives.any")};if(g.length===1)return{errors:g[0].reports};const y=new Set,w=[];for(const{reports:_,schema:A}of g){if(_.length>1)return p.unmatched(g,v);const T=_[0];if(T instanceof d.Report==0)return p.unmatched(g,v);if(T.state.path.length!==x.path.length){w.push({type:A.type,report:T});continue}if(T.code==="any.only"){for(const R of T.local.valids)y.add(R);continue}const[D,k]=T.code.split(".");k!=="base"?w.push({type:A.type,report:T}):T.code==="object.base"?y.add(T.local.type):y.add(D)}return w.length?w.length===1?{errors:w[0].report}:p.unmatched(g,v):{errors:v("alternatives.types",{types:[...y]})}},p.unmatched=function(g,v){const x=[];for(const y of g)x.push(...y.reports);return{errors:v("alternatives.match",d.details(x,{override:!1}))}}},8068:(i,s,o)=>{const a=o(375),l=o(7629),u=o(8160),f=o(6914);i.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(c,d){return a(typeof c=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:c,description:d}})},validate(c,d,{method:h}){try{return h(c,d)}catch(p){return d.error("any.custom",{error:p})}},args:["method","description"],multi:!0},messages:{method(c){return this.prefs({messages:c})}},shared:{method(c){a(u.isSchema(c)&&c._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(c),d.$_mutateRegister(c),d}},warning:{method(c,d){return a(c&&typeof c=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:c,local:d},warn:!0})},validate:(c,d,{code:h,local:p})=>d.error(h,p),args:["code","local"],multi:!0}},modifiers:{keep(c,d=!0){c.keep=d},message(c,d){c.message=f.compile(d)},warn(c,d=!0){c.warn=d}},manifest:{build(c,d){for(const h in d){const p=d[h];if(["examples","externals","metas","notes","tags"].includes(h))for(const g of p)c=c[h.slice(0,-1)](g);else if(h!=="alterations")if(h!=="whens"){if(h==="shared")for(const g of p)c=c.shared(g)}else for(const g of p){const{ref:v,is:x,not:y,then:w,otherwise:_,concat:A}=g;c=A?c.concat(A):v?c.when(v,{is:x,not:y,then:w,otherwise:_,switch:g.switch,break:g.break}):c.when(x,{then:w,otherwise:_,break:g.break})}else{const g={};for(const{target:v,adjuster:x}of p)g[v]=x;c=c.alter(g)}}return c}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(i,s,o)=>{const a=o(375),l=o(9474),u=o(9621),f=o(8068),c=o(8160),d=o(3292),h={};i.exports=f.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(p,{schema:g,state:v,prefs:x}){if(!Array.isArray(p))return;const y=g.$_getRule("sort");return y?h.sort(g,p,y.args.options,v,x):void 0}},validate(p,{schema:g,error:v}){if(!Array.isArray(p)){if(g._flags.single){const x=[p];return x[c.symbols.arraySingle]=!0,{value:x}}return{errors:v("array.base")}}if(g.$_getRule("items")||g.$_terms.externals)return{value:p.slice()}},rules:{has:{method(p){p=this.$_compile(p,{appendPath:!0});const g=this.$_addRule({name:"has",args:{schema:p}});return g.$_mutateRegister(p),g},validate(p,{state:g,prefs:v,error:x},{schema:y}){const w=[p,...g.ancestors];for(let A=0;A<p.length;++A){const T=g.localize([...g.path,A],w,y);if(y.$_match(p[A],T,v))return p}const _=y._flags.label;return _?x("array.hasKnown",{patternLabel:_}):x("array.hasUnknown",null)},multi:!0},items:{method(...p){c.verifyFlat(p,"items");const g=this.$_addRule("items");for(let v=0;v<p.length;++v){const x=c.tryWithPath(()=>this.$_compile(p[v]),v,{append:!0});g.$_terms.items.push(x)}return g.$_mutateRebuild()},validate(p,{schema:g,error:v,state:x,prefs:y,errorsArray:w}){const _=g.$_terms._requireds.slice(),A=g.$_terms.ordered.slice(),T=[...g.$_terms._inclusions,..._],D=!p[c.symbols.arraySingle];delete p[c.symbols.arraySingle];const k=w();let R=p.length;for(let O=0;O<R;++O){const B=p[O];let K=!1,L=!1;const $=D?O:new Number(O),I=[...x.path,$];if(!g._flags.sparse&&B===void 0){if(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},x.localize(I))),y.abortEarly)return k;A.shift();continue}const U=[p,...x.ancestors];for(const te of g.$_terms._exclusions)if(te.$_match(B,x.localize(I,U,te),y,{presence:"ignore"})){if(k.push(v("array.excludes",{pos:O,value:B},x.localize(I))),y.abortEarly)return k;K=!0,A.shift();break}if(K)continue;if(g.$_terms.ordered.length){if(A.length){const te=A.shift(),le=te.$_validate(B,x.localize(I,U,te),y);if(le.errors){if(k.push(...le.errors),y.abortEarly)return k}else if(te._flags.result==="strip")h.fastSplice(p,O),--O,--R;else{if(!g._flags.sparse&&le.value===void 0){if(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},x.localize(I))),y.abortEarly)return k;continue}p[O]=le.value}continue}if(!g.$_terms.items.length){if(k.push(v("array.orderedLength",{pos:O,limit:g.$_terms.ordered.length})),y.abortEarly)return k;break}}const q=[];let Y=_.length;for(let te=0;te<Y;++te){const le=x.localize(I,U,_[te]);le.snapshot();const ee=_[te].$_validate(B,le,y);if(q[te]=ee,!ee.errors){if(le.commit(),p[O]=ee.value,L=!0,h.fastSplice(_,te),--te,--Y,!g._flags.sparse&&ee.value===void 0&&(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},x.localize(I))),y.abortEarly))return k;break}le.restore()}if(L)continue;const X=y.stripUnknown&&!!y.stripUnknown.arrays||!1;Y=T.length;for(const te of T){let le;const ee=_.indexOf(te);if(ee!==-1)le=q[ee];else{const z=x.localize(I,U,te);if(z.snapshot(),le=te.$_validate(B,z,y),!le.errors){z.commit(),te._flags.result==="strip"?(h.fastSplice(p,O),--O,--R):g._flags.sparse||le.value!==void 0?p[O]=le.value:(k.push(v("array.sparse",{key:$,path:I,pos:O,value:void 0},x.localize(I))),K=!0),L=!0;break}z.restore()}if(Y===1){if(X){h.fastSplice(p,O),--O,--R,L=!0;break}if(k.push(...le.errors),y.abortEarly)return k;K=!0;break}}if(!K&&(g.$_terms._inclusions.length||g.$_terms._requireds.length)&&!L){if(X){h.fastSplice(p,O),--O,--R;continue}if(k.push(v("array.includes",{pos:O,value:B},x.localize(I))),y.abortEarly)return k}}return _.length&&h.fillMissedErrors(g,k,_,p,x,y),A.length&&(h.fillOrderedErrors(g,k,A,p,x,y),k.length||h.fillDefault(A,p,x,y)),k.length?k:p},priority:!0,manifest:!1},length:{method(p){return this.$_addRule({name:"length",args:{limit:p},operator:"="})},validate:(p,g,{limit:v},{name:x,operator:y,args:w})=>c.compare(p.length,v,y)?p:g.error("array."+x,{limit:w.limit,value:p}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(p){return this.$_addRule({name:"max",method:"length",args:{limit:p},operator:"<="})}},min:{method(p){return this.$_addRule({name:"min",method:"length",args:{limit:p},operator:">="})}},ordered:{method(...p){c.verifyFlat(p,"ordered");const g=this.$_addRule("items");for(let v=0;v<p.length;++v){const x=c.tryWithPath(()=>this.$_compile(p[v]),v,{append:!0});h.validateSingle(x,g),g.$_mutateRegister(x),g.$_terms.ordered.push(x)}return g.$_mutateRebuild()}},single:{method(p){const g=p===void 0||!!p;return a(!g||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",g)}},sort:{method(p={}){c.assertOptions(p,["by","order"]);const g={order:p.order||"ascending"};return p.by&&(g.by=d.ref(p.by,{ancestor:0}),a(!g.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:g}})},validate(p,{error:g,state:v,prefs:x,schema:y},{options:w}){const{value:_,errors:A}=h.sort(y,p,w,v,x);if(A)return A;for(let T=0;T<p.length;++T)if(p[T]!==_[T])return g("array.sort",{order:w.order,by:w.by?w.by.key:"value"});return p},convert:!0},sparse:{method(p){const g=p===void 0||!!p;return this._flags.sparse===g?this:(g?this.clone():this.$_addRule("items")).$_setFlag("sparse",g,{clone:!1})}},unique:{method(p,g={}){a(!p||typeof p=="function"||typeof p=="string","comparator must be a function or a string"),c.assertOptions(g,["ignoreUndefined","separator"]);const v={name:"unique",args:{options:g,comparator:p}};if(p)if(typeof p=="string"){const x=c.default(g.separator,".");v.path=x?p.split(x):[p]}else v.comparator=p;return this.$_addRule(v)},validate(p,{state:g,error:v,schema:x},{comparator:y,options:w},{comparator:_,path:A}){const T={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},D=_||l,k=w.ignoreUndefined;for(let R=0;R<p.length;++R){const O=A?u(p[R],A):p[R],B=_?T.custom:T[typeof O];if(a(B,"Failed to find unique map container for type",typeof O),B instanceof Map){const K=B.entries();let L;for(;!(L=K.next()).done;)if(D(L.value[0],O)){const $=g.localize([...g.path,R],[p,...g.ancestors]),I={pos:R,value:p[R],dupePos:L.value[1],dupeValue:p[L.value[1]]};return A&&(I.path=y),v("array.unique",I,$)}B.set(O,R)}else{if((!k||O!==void 0)&&B[O]!==void 0){const K={pos:R,value:p[R],dupePos:B[O],dupeValue:p[B[O]]};return A&&(K.path=y),v("array.unique",K,g.localize([...g.path,R],[p,...g.ancestors]))}B[O]=R}}return p},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(p,g)=>new Set(p)}},rebuild(p){p.$_terms._inclusions=[],p.$_terms._exclusions=[],p.$_terms._requireds=[];for(const g of p.$_terms.items)h.validateSingle(g,p),g._flags.presence==="required"?p.$_terms._requireds.push(g):g._flags.presence==="forbidden"?p.$_terms._exclusions.push(g):p.$_terms._inclusions.push(g);for(const g of p.$_terms.ordered)h.validateSingle(g,p)},manifest:{build:(p,g)=>(g.items&&(p=p.items(...g.items)),g.ordered&&(p=p.ordered(...g.ordered)),p)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),h.fillMissedErrors=function(p,g,v,x,y,w){const _=[];let A=0;for(const T of v){const D=T._flags.label;D?_.push(D):++A}_.length?A?g.push(p.$_createError("array.includesRequiredBoth",x,{knownMisses:_,unknownMisses:A},y,w)):g.push(p.$_createError("array.includesRequiredKnowns",x,{knownMisses:_},y,w)):g.push(p.$_createError("array.includesRequiredUnknowns",x,{unknownMisses:A},y,w))},h.fillOrderedErrors=function(p,g,v,x,y,w){const _=[];for(const A of v)A._flags.presence==="required"&&_.push(A);_.length&&h.fillMissedErrors(p,g,_,x,y,w)},h.fillDefault=function(p,g,v,x){const y=[];let w=!0;for(let _=p.length-1;_>=0;--_){const A=p[_],T=[g,...v.ancestors],D=A.$_validate(void 0,v.localize(v.path,T,A),x).value;if(w){if(D===void 0)continue;w=!1}y.unshift(D)}y.length&&g.push(...y)},h.fastSplice=function(p,g){let v=g;for(;v<p.length;)p[v++]=p[v];--p.length},h.validateSingle=function(p,g){(p.type==="array"||p._flags._arrayItems)&&(a(!g._flags.single,"Cannot specify array item with single rule enabled"),g.$_setFlag("_arrayItems",!0,{clone:!1}))},h.sort=function(p,g,v,x,y){const w=v.order==="ascending"?1:-1,_=-1*w,A=w,T=(D,k)=>{let R=h.compare(D,k,_,A);if(R!==null||(v.by&&(D=v.by.resolve(D,x,y),k=v.by.resolve(k,x,y)),R=h.compare(D,k,_,A),R!==null))return R;const O=typeof D;if(O!==typeof k)throw p.$_createError("array.sort.mismatching",g,null,x,y);if(O!=="number"&&O!=="string")throw p.$_createError("array.sort.unsupported",g,{type:O},x,y);return O==="number"?(D-k)*w:D<k?_:A};try{return{value:g.slice().sort(T)}}catch(D){return{errors:D}}},h.compare=function(p,g,v,x){return p===g?0:p===void 0?1:g===void 0?-1:p===null?x:g===null?v:null}},4937:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(2036),c={isBool:function(d){return typeof d=="boolean"}};i.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:h}){if(typeof d!="boolean"){if(typeof d=="string"){const p=h._flags.sensitive?d:d.toLowerCase();d=p==="true"||p!=="false"&&d}return typeof d!="boolean"&&(d=h.$_terms.truthy&&h.$_terms.truthy.has(d,null,null,!h._flags.sensitive)||(!h.$_terms.falsy||!h.$_terms.falsy.has(d,null,null,!h._flags.sensitive))&&d),{value:d}}},validate(d,{error:h}){if(typeof d!="boolean")return{value:d,errors:h("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const h=this.clone();h.$_terms.truthy=h.$_terms.truthy||new f;for(let p=0;p<d.length;++p){const g=d[p];a(g!==void 0,"Cannot call truthy with undefined"),h.$_terms.truthy.add(g)}return h}},falsy:{method(...d){u.verifyFlat(d,"falsy");const h=this.clone();h.$_terms.falsy=h.$_terms.falsy||new f;for(let p=0;p<d.length;++p){const g=d[p];a(g!==void 0,"Cannot call falsy with undefined"),h.$_terms.falsy.add(g)}return h}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:c.isBool,to:(d,h)=>d?1:0},string:{from:c.isBool,to:(d,h)=>d?"true":"false"}},manifest:{build:(d,h)=>(h.truthy&&(d=d.truthy(...h.truthy)),h.falsy&&(d=d.falsy(...h.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(3328),c={isDate:function(d){return d instanceof Date}};i.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:h})=>({value:c.parse(d,h._flags.format)||d})},validate(d,{schema:h,error:p,prefs:g}){if(d instanceof Date&&!isNaN(d.getTime()))return;const v=h._flags.format;return g.convert&&v&&typeof d=="string"?{value:d,errors:p("date.format",{format:v})}:{value:d,errors:p("date.base")}},rules:{compare:{method:!1,validate(d,h,{date:p},{name:g,operator:v,args:x}){const y=p==="now"?Date.now():p.getTime();return u.compare(d.getTime(),y,v)?d:h.error("date."+g,{limit:x.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:c.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:c.isDate,to:(d,h)=>d.getTime()},string:{from:c.isDate,to:(d,{prefs:h})=>f.date(d,h)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),c.parse=function(d,h){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(h==="iso")return u.isIsoDate(d)?c.date(d.toString()):null;const p=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),h){if(h==="javascript")return c.date(1*d);if(h==="unix")return c.date(1e3*d);if(typeof p=="string")return null}return c.date(d)},c.date=function(d){const h=new Date(d);return isNaN(h.getTime())?null:h}},390:(i,s,o)=>{const a=o(375),l=o(7824);i.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,f,{n:c})=>u.length===c?u:f.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(u,f)=>/^\s*class\s/.test(u.toString())?u:f.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length>=c?u:f.error("function.minArity",{n:c})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,f,{n:c})=>u.length<=c?u:f.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(i,s,o)=>{const a=o(978),l=o(375),u=o(8571),f=o(3652),c=o(8068),d=o(8160),h=o(3292),p=o(6354),g=o(6133),v=o(3328),x={renameDefaults:{alias:!1,multiple:!1,override:!1}};i.exports=c.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(y,w)=>y.keys(w),validate(y,{schema:w,error:_,state:A,prefs:T}){if(!y||typeof y!==w.$_property("typeof")||Array.isArray(y))return{value:y,errors:_("object.base",{type:w.$_property("typeof")})};if(!(w.$_terms.renames||w.$_terms.dependencies||w.$_terms.keys||w.$_terms.patterns||w.$_terms.externals))return;y=x.clone(y,T);const D=[];if(w.$_terms.renames&&!x.rename(w,y,A,T,D))return{value:y,errors:D};if(!w.$_terms.keys&&!w.$_terms.patterns&&!w.$_terms.dependencies)return{value:y,errors:D};const k=new Set(Object.keys(y));if(w.$_terms.keys){const R=[y,...A.ancestors];for(const O of w.$_terms.keys){const B=O.key,K=y[B];k.delete(B);const L=A.localize([...A.path,B],R,O),$=O.schema.$_validate(K,L,T);if($.errors){if(T.abortEarly)return{value:y,errors:$.errors};$.value!==void 0&&(y[B]=$.value),D.push(...$.errors)}else O.schema._flags.result==="strip"||$.value===void 0&&K!==void 0?delete y[B]:$.value!==void 0&&(y[B]=$.value)}}if(k.size||w._flags._hasPatternMatch){const R=x.unknown(w,y,k,D,A,T);if(R)return R}if(w.$_terms.dependencies)for(const R of w.$_terms.dependencies){if(R.key!==null&&x.isPresent(R.options)(R.key.resolve(y,A,T,null,{shadow:!1}))===!1)continue;const O=x.dependencies[R.rel](w,R,y,A,T);if(O){const B=w.$_createError(O.code,y,O.context,A,T);if(T.abortEarly)return{value:y,errors:B};D.push(B)}}return{value:y,errors:D}},rules:{and:{method(...y){return d.verifyFlat(y,"and"),x.dependency(this,"and",null,y)}},append:{method(y){return y==null||Object.keys(y).length===0?this:this.keys(y)}},assert:{method(y,w,_){v.isTemplate(y)||(y=h.ref(y)),l(_===void 0||typeof _=="string","Message must be a string"),w=this.$_compile(w,{appendPath:!0});const A=this.$_addRule({name:"assert",args:{subject:y,schema:w,message:_}});return A.$_mutateRegister(y),A.$_mutateRegister(w),A},validate(y,{error:w,prefs:_,state:A},{subject:T,schema:D,message:k}){const R=T.resolve(y,A,_),O=g.isRef(T)?T.absolute(A):[];return D.$_match(R,A.localize(O,[y,...A.ancestors],D),_)?y:w("object.assert",{subject:T,message:k})},args:["subject","schema","message"],multi:!0},instance:{method(y,w){return l(typeof y=="function","constructor must be a function"),w=w||y.name,this.$_addRule({name:"instance",args:{constructor:y,name:w}})},validate:(y,w,{constructor:_,name:A})=>y instanceof _?y:w.error("object.instance",{type:A,value:y}),args:["constructor","name"]},keys:{method(y){l(y===void 0||typeof y=="object","Object schema must be a valid object"),l(!d.isSchema(y),"Object schema cannot be a joi schema");const w=this.clone();if(y)if(Object.keys(y).length){w.$_terms.keys=w.$_terms.keys?w.$_terms.keys.filter(_=>!y.hasOwnProperty(_.key)):new x.Keys;for(const _ in y)d.tryWithPath(()=>w.$_terms.keys.push({key:_,schema:this.$_compile(y[_])}),_)}else w.$_terms.keys=new x.Keys;else w.$_terms.keys=null;return w.$_mutateRebuild()}},length:{method(y){return this.$_addRule({name:"length",args:{limit:y},operator:"="})},validate:(y,w,{limit:_},{name:A,operator:T,args:D})=>d.compare(Object.keys(y).length,_,T)?y:w.error("object."+A,{limit:D.limit,value:y}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(y){return this.$_addRule({name:"max",method:"length",args:{limit:y},operator:"<="})}},min:{method(y){return this.$_addRule({name:"min",method:"length",args:{limit:y},operator:">="})}},nand:{method(...y){return d.verifyFlat(y,"nand"),x.dependency(this,"nand",null,y)}},or:{method(...y){return d.verifyFlat(y,"or"),x.dependency(this,"or",null,y)}},oxor:{method(...y){return x.dependency(this,"oxor",null,y)}},pattern:{method(y,w,_={}){const A=y instanceof RegExp;A||(y=this.$_compile(y,{appendPath:!0})),l(w!==void 0,"Invalid rule"),d.assertOptions(_,["fallthrough","matches"]),A&&l(!y.flags.includes("g")&&!y.flags.includes("y"),"pattern should not use global or sticky mode"),w=this.$_compile(w,{appendPath:!0});const T=this.clone();T.$_terms.patterns=T.$_terms.patterns||[];const D={[A?"regex":"schema"]:y,rule:w};return _.matches&&(D.matches=this.$_compile(_.matches),D.matches.type!=="array"&&(D.matches=D.matches.$_root.array().items(D.matches)),T.$_mutateRegister(D.matches),T.$_setFlag("_hasPatternMatch",!0,{clone:!1})),_.fallthrough&&(D.fallthrough=!0),T.$_terms.patterns.push(D),T.$_mutateRegister(w),T}},ref:{method(){return this.$_addRule("ref")},validate:(y,w)=>g.isRef(y)?y:w.error("object.refType",{value:y})},regex:{method(){return this.$_addRule("regex")},validate:(y,w)=>y instanceof RegExp?y:w.error("object.regex",{value:y})},rename:{method(y,w,_={}){l(typeof y=="string"||y instanceof RegExp,"Rename missing the from argument"),l(typeof w=="string"||w instanceof v,"Invalid rename to argument"),l(w!==y,"Cannot rename key to same name:",y),d.assertOptions(_,["alias","ignoreUndefined","override","multiple"]);const A=this.clone();A.$_terms.renames=A.$_terms.renames||[];for(const T of A.$_terms.renames)l(T.from!==y,"Cannot rename the same key multiple times");return w instanceof v&&A.$_mutateRegister(w),A.$_terms.renames.push({from:y,to:w,options:a(x.renameDefaults,_)}),A}},schema:{method(y="any"){return this.$_addRule({name:"schema",args:{type:y}})},validate:(y,w,{type:_})=>!d.isSchema(y)||_!=="any"&&y.type!==_?w.error("object.schema",{type:_}):y},unknown:{method(y){return this.$_setFlag("unknown",y!==!1)}},with:{method(y,w,_={}){return x.dependency(this,"with",y,w,_)}},without:{method(y,w,_={}){return x.dependency(this,"without",y,w,_)}},xor:{method(...y){return d.verifyFlat(y,"xor"),x.dependency(this,"xor",null,y)}}},overrides:{default(y,w){return y===void 0&&(y=d.symbols.deepDefault),this.$_parent("default",y,w)}},rebuild(y){if(y.$_terms.keys){const w=new f.Sorter;for(const _ of y.$_terms.keys)d.tryWithPath(()=>w.add(_,{after:_.schema.$_rootReferences(),group:_.key}),_.key);y.$_terms.keys=new x.Keys(...w.nodes)}},manifest:{build(y,w){if(w.keys&&(y=y.keys(w.keys)),w.dependencies)for(const{rel:_,key:A=null,peers:T,options:D}of w.dependencies)y=x.dependency(y,_,A,T,D);if(w.patterns)for(const{regex:_,schema:A,rule:T,fallthrough:D,matches:k}of w.patterns)y=y.pattern(_||A,T,{fallthrough:D,matches:k});if(w.renames)for(const{from:_,to:A,options:T}of w.renames)y=y.rename(_,A,T);return y}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),x.clone=function(y,w){if(typeof y=="object"){if(w.nonEnumerables)return u(y,{shallow:!0});const A=Object.create(Object.getPrototypeOf(y));return Object.assign(A,y),A}const _=function(...A){return y.apply(this,A)};return _.prototype=u(y.prototype),Object.defineProperty(_,"name",{value:y.name,writable:!1}),Object.defineProperty(_,"length",{value:y.length,writable:!1}),Object.assign(_,y),_},x.dependency=function(y,w,_,A,T){l(_===null||typeof _=="string",w,"key must be a strings"),T||(T=A.length>1&&typeof A[A.length-1]=="object"?A.pop():{}),d.assertOptions(T,["separator","isPresent"]),A=[].concat(A);const D=d.default(T.separator,"."),k=[];for(const O of A)l(typeof O=="string",w,"peers must be strings"),k.push(h.ref(O,{separator:D,ancestor:0,prefix:!1}));_!==null&&(_=h.ref(_,{separator:D,ancestor:0,prefix:!1}));const R=y.clone();return R.$_terms.dependencies=R.$_terms.dependencies||[],R.$_terms.dependencies.push(new x.Dependency(w,_,k,A,T)),R},x.dependencies={and(y,w,_,A,T){const D=[],k=[],R=w.peers.length,O=x.isPresent(w.options);for(const B of w.peers)O(B.resolve(_,A,T,null,{shadow:!1}))===!1?D.push(B.key):k.push(B.key);if(D.length!==R&&k.length!==R)return{code:"object.and",context:{present:k,presentWithLabels:x.keysToLabels(y,k),missing:D,missingWithLabels:x.keysToLabels(y,D)}}},nand(y,w,_,A,T){const D=[],k=x.isPresent(w.options);for(const B of w.peers)k(B.resolve(_,A,T,null,{shadow:!1}))&&D.push(B.key);if(D.length!==w.peers.length)return;const R=w.paths[0],O=w.paths.slice(1);return{code:"object.nand",context:{main:R,mainWithLabel:x.keysToLabels(y,R),peers:O,peersWithLabels:x.keysToLabels(y,O)}}},or(y,w,_,A,T){const D=x.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(_,A,T,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:w.paths,peersWithLabels:x.keysToLabels(y,w.paths)}}},oxor(y,w,_,A,T){const D=[],k=x.isPresent(w.options);for(const O of w.peers)k(O.resolve(_,A,T,null,{shadow:!1}))&&D.push(O.key);if(!D.length||D.length===1)return;const R={peers:w.paths,peersWithLabels:x.keysToLabels(y,w.paths)};return R.present=D,R.presentWithLabels=x.keysToLabels(y,D),{code:"object.oxor",context:R}},with(y,w,_,A,T){const D=x.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(_,A,T,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:w.key.key,mainWithLabel:x.keysToLabels(y,w.key.key),peer:k.key,peerWithLabel:x.keysToLabels(y,k.key)}}},without(y,w,_,A,T){const D=x.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(_,A,T,null,{shadow:!1})))return{code:"object.without",context:{main:w.key.key,mainWithLabel:x.keysToLabels(y,w.key.key),peer:k.key,peerWithLabel:x.keysToLabels(y,k.key)}}},xor(y,w,_,A,T){const D=[],k=x.isPresent(w.options);for(const O of w.peers)k(O.resolve(_,A,T,null,{shadow:!1}))&&D.push(O.key);if(D.length===1)return;const R={peers:w.paths,peersWithLabels:x.keysToLabels(y,w.paths)};return D.length===0?{code:"object.missing",context:R}:(R.present=D,R.presentWithLabels=x.keysToLabels(y,D),{code:"object.xor",context:R})}},x.keysToLabels=function(y,w){return Array.isArray(w)?w.map(_=>y.$_mapLabels(_)):y.$_mapLabels(w)},x.isPresent=function(y){return typeof y.isPresent=="function"?y.isPresent:w=>w!==void 0},x.rename=function(y,w,_,A,T){const D={};for(const k of y.$_terms.renames){const R=[],O=typeof k.from!="string";if(O)for(const B in w){if(w[B]===void 0&&k.options.ignoreUndefined||B===k.to)continue;const K=k.from.exec(B);K&&R.push({from:B,to:k.to,match:K})}else!Object.prototype.hasOwnProperty.call(w,k.from)||w[k.from]===void 0&&k.options.ignoreUndefined||R.push(k);for(const B of R){const K=B.from;let L=B.to;if(L instanceof v&&(L=L.render(w,_,A,B.match)),K!==L){if(!k.options.multiple&&D[L]&&(T.push(y.$_createError("object.rename.multiple",w,{from:K,to:L,pattern:O},_,A)),A.abortEarly)||Object.prototype.hasOwnProperty.call(w,L)&&!k.options.override&&!D[L]&&(T.push(y.$_createError("object.rename.override",w,{from:K,to:L,pattern:O},_,A)),A.abortEarly))return!1;w[K]===void 0?delete w[L]:w[L]=w[K],D[L]=!0,k.options.alias||delete w[K]}}}return!0},x.unknown=function(y,w,_,A,T,D){if(y.$_terms.patterns){let k=!1;const R=y.$_terms.patterns.map(B=>{if(B.matches)return k=!0,[]}),O=[w,...T.ancestors];for(const B of _){const K=w[B],L=[...T.path,B];for(let $=0;$<y.$_terms.patterns.length;++$){const I=y.$_terms.patterns[$];if(I.regex){const Y=I.regex.test(B);if(T.mainstay.tracer.debug(T,"rule",`pattern.${$}`,Y?"pass":"error"),!Y)continue}else if(!I.schema.$_match(B,T.nest(I.schema,`pattern.${$}`),D))continue;_.delete(B);const U=T.localize(L,O,{schema:I.rule,key:B}),q=I.rule.$_validate(K,U,D);if(q.errors){if(D.abortEarly)return{value:w,errors:q.errors};A.push(...q.errors)}if(I.matches&&R[$].push(B),w[B]=q.value,!I.fallthrough)break}}if(k)for(let B=0;B<R.length;++B){const K=R[B];if(!K)continue;const L=y.$_terms.patterns[B].matches,$=T.localize(T.path,O,L),I=L.$_validate(K,$,D);if(I.errors){const U=p.details(I.errors,{override:!1});U.matches=K;const q=y.$_createError("object.pattern.match",w,U,T,D);if(D.abortEarly)return{value:w,errors:q};A.push(q)}}}if(_.size&&(y.$_terms.keys||y.$_terms.patterns)){if(D.stripUnknown&&y._flags.unknown===void 0||D.skipFunctions){const k=!(!D.stripUnknown||D.stripUnknown!==!0&&!D.stripUnknown.objects);for(const R of _)k?(delete w[R],_.delete(R)):typeof w[R]=="function"&&_.delete(R)}if(!d.default(y._flags.unknown,D.allowUnknown))for(const k of _){const R=T.localize([...T.path,k],[]),O=y.$_createError("object.unknown",w[k],{child:k},R,D,{flags:!1});if(D.abortEarly)return{value:w,errors:O};A.push(O)}}},x.Dependency=class{constructor(y,w,_,A,T){this.rel=y,this.key=w,this.peers=_,this.paths=A,this.options=T}describe(){const y={rel:this.rel,peers:this.paths};return this.key!==null&&(y.key=this.key.key),this.peers[0].separator!=="."&&(y.options={...y.options,separator:this.peers[0].separator}),this.options.isPresent&&(y.options={...y.options,isPresent:this.options.isPresent}),y}},x.Keys=class extends Array{concat(y){const w=this.slice(),_=new Map;for(let A=0;A<w.length;++A)_.set(w[A].key,A);for(const A of y){const T=A.key,D=_.get(T);D!==void 0?w[D]={key:T,schema:w[D].schema.concat(A.schema)}:w.push(A)}return w}}},8785:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f=o(3292),c=o(6354),d={};i.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(h,p)=>h.ref(p),validate(h,{schema:p,state:g,prefs:v}){a(p.$_terms.link,"Uninitialized link schema");const x=d.generate(p,h,g,v),y=p.$_terms.link[0].ref;return x.$_validate(h,g.nest(x,`link:${y.display}:${x.type}`),v)},generate:(h,p,g,v)=>d.generate(h,p,g,v),rules:{ref:{method(h){a(!this.$_terms.link,"Cannot reinitialize schema"),h=f.ref(h),a(h.type==="value"||h.type==="local","Invalid reference type:",h.type),a(h.type==="local"||h.ancestor==="root"||h.ancestor>0,"Link cannot reference itself");const p=this.clone();return p.$_terms.link=[{ref:h}],p}},relative:{method(h=!0){return this.$_setFlag("relative",h)}}},overrides:{concat(h){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(h),"Invalid schema object"),a(h.type!=="link","Cannot merge type link with another link");const p=this.clone();return p.$_terms.whens||(p.$_terms.whens=[]),p.$_terms.whens.push({concat:h}),p.$_mutateRebuild()}},manifest:{build:(h,p)=>(a(p.link,"Invalid link description missing link"),h.ref(p.link))}}),d.generate=function(h,p,g,v){let x=g.mainstay.links.get(h);if(x)return x._generate(p,g,v).schema;const y=h.$_terms.link[0].ref,{perspective:w,path:_}=d.perspective(y,g);d.assert(w,"which is outside of schema boundaries",y,h,g,v);try{x=_.length?w.$_reach(_):w}catch{d.assert(!1,"to non-existing schema",y,h,g,v)}return d.assert(x.type!=="link","which is another link",y,h,g,v),h._flags.relative||g.mainstay.links.set(h,x),x._generate(p,g,v).schema},d.perspective=function(h,p){if(h.type==="local"){for(const{schema:g,key:v}of p.schemas){if((g._flags.id||v)===h.path[0])return{perspective:g,path:h.path.slice(1)};if(g.$_terms.shared){for(const x of g.$_terms.shared)if(x._flags.id===h.path[0])return{perspective:x,path:h.path.slice(1)}}}return{perspective:null,path:null}}return h.ancestor==="root"?{perspective:p.schemas[p.schemas.length-1].schema,path:h.path}:{perspective:p.schemas[h.ancestor]&&p.schemas[h.ancestor].schema,path:h.path}},d.assert=function(h,p,g,v,x,y){h||a(!1,`"${c.label(v._flags,x,y)}" contains link reference "${g.display}" ${p}`)}},3832:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),f={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(c){const d=c.toString(),h=d.indexOf("."),p=d.indexOf("e");return(h<0?0:(p<0?d.length:p)-h-1)+(p<0?0:Math.max(0,-parseInt(d.slice(p+1))))}};i.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(c,{schema:d,error:h}){if(!c.match(f.numberRx))return;c=c.trim();const p={value:parseFloat(c)};if(p.value===0&&(p.value=0),!d._flags.unsafe)if(c.match(/e/i)){if(f.extractSignificantDigits(c)!==f.extractSignificantDigits(String(p.value)))return p.errors=h("number.unsafe"),p}else{const g=p.value.toString();if(g.match(/e/i))return p;if(g!==f.normalizeDecimal(c))return p.errors=h("number.unsafe"),p}return p}},validate(c,{schema:d,error:h,prefs:p}){if(c===1/0||c===-1/0)return{value:c,errors:h("number.infinity")};if(!u.isNumber(c))return{value:c,errors:h("number.base")};const g={value:c};if(p.convert){const v=d.$_getRule("precision");if(v){const x=Math.pow(10,v.args.limit);g.value=Math.round(g.value*x)/x}}return g.value===0&&(g.value=0),!d._flags.unsafe&&(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&(g.errors=h("number.unsafe")),g},rules:{compare:{method:!1,validate:(c,d,{limit:h},{name:p,operator:g,args:v})=>u.compare(c,h,g)?c:d.error("number."+p,{limit:v.limit,value:c}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(c){return this.$_addRule({name:"greater",method:"compare",args:{limit:c},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(c,d)=>Math.trunc(c)-c==0?c:d.error("number.integer")},less:{method(c){return this.$_addRule({name:"less",method:"compare",args:{limit:c},operator:"<"})}},max:{method(c){return this.$_addRule({name:"max",method:"compare",args:{limit:c},operator:"<="})}},min:{method(c){return this.$_addRule({name:"min",method:"compare",args:{limit:c},operator:">="})}},multiple:{method(c){const d=typeof c=="number"?f.decimalPlaces(c):null,h=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:c,baseDecimalPlace:d,pfactor:h}})},validate:(c,d,{base:h,baseDecimalPlace:p,pfactor:g},v)=>f.decimalPlaces(c)>p?d.error("number.multiple",{multiple:v.args.base,value:c}):Math.round(g*c)%Math.round(g*h)==0?c:d.error("number.multiple",{multiple:v.args.base,value:c}),args:[{name:"base",ref:!0,assert:c=>typeof c=="number"&&isFinite(c)&&c>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(c,d)=>Number.isSafeInteger(c)&&c>=0&&c<=65535?c:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(c){return a(Number.isSafeInteger(c),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:c}})},validate(c,d,{limit:h}){const p=c.toString().match(f.precisionRx);return Math.max((p[1]?p[1].length:0)-(p[2]?parseInt(p[2],10):0),0)<=h?c:d.error("number.precision",{limit:h,value:c})},convert:!0},sign:{method(c){return a(["negative","positive"].includes(c),"Invalid sign",c),this.$_addRule({name:"sign",args:{sign:c}})},validate:(c,d,{sign:h})=>h==="negative"&&c<0||h==="positive"&&c>0?c:d.error(`number.${h}`)},unsafe:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",c)}}},cast:{string:{from:c=>typeof c=="number",to:(c,d)=>c.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),f.extractSignificantDigits=function(c){return c.replace(f.exponentialPartRegex,"").replace(f.dotRegex,"").replace(f.trailingZerosRegex,"").replace(f.leadingSignAndZerosRegex,"")},f.normalizeDecimal=function(c){return(c=c.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&c.endsWith("0")&&(c=c.replace(/0+$/,"")),c==="-0"?"0":c}},8966:(i,s,o)=>{const a=o(7824);i.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(i,s,o)=>{const a=o(375),l=o(5380),u=o(1745),f=o(9959),c=o(6064),d=o(9926),h=o(5752),p=o(8068),g=o(8160),v={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:f.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};i.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(x,{schema:y,state:w,prefs:_}){const A=y.$_getRule("normalize");A&&(x=x.normalize(A.args.form));const T=y.$_getRule("case");T&&(x=T.args.direction==="upper"?x.toLocaleUpperCase():x.toLocaleLowerCase());const D=y.$_getRule("trim");if(D&&D.args.enabled&&(x=x.trim()),y.$_terms.replacements)for(const R of y.$_terms.replacements)x=x.replace(R.pattern,R.replacement);const k=y.$_getRule("hex");if(k&&k.args.options.byteAligned&&x.length%2!=0&&(x=`0${x}`),y.$_getRule("isoDate")){const R=v.isoDate(x);R&&(x=R)}if(y._flags.truncate){const R=y.$_getRule("max");if(R){let O=R.args.limit;if(g.isResolvable(O)&&(O=O.resolve(x,w,_),!g.limit(O)))return{value:x,errors:y.$_createError("any.ref",O,{ref:R.args.limit,arg:"limit",reason:"must be a positive integer"},w,_)};x=x.slice(0,O)}}return{value:x}}},validate(x,{schema:y,error:w}){if(typeof x!="string")return{value:x,errors:w("string.base")};if(x===""){const _=y.$_getRule("min");return _&&_.args.limit===0?void 0:{value:x,errors:w("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(x,y)=>/^[a-zA-Z0-9]+$/.test(x)?x:y.error("string.alphanum")},base64:{method(x={}){return g.assertOptions(x,["paddingRequired","urlSafe"]),x={urlSafe:!1,paddingRequired:!0,...x},a(typeof x.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof x.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:x}})},validate:(x,y,{options:w})=>v.base64Regex[w.paddingRequired][w.urlSafe].test(x)?x:y.error("string.base64")},case:{method(x){return a(["lower","upper"].includes(x),"Invalid case:",x),this.$_addRule({name:"case",args:{direction:x}})},validate:(x,y,{direction:w})=>w==="lower"&&x===x.toLocaleLowerCase()||w==="upper"&&x===x.toLocaleUpperCase()?x:y.error(`string.${w}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(x,y){let w=x.length,_=0,A=1;for(;w--;){const T=x.charAt(w)*A;_+=T-9*(T>9),A^=3}return _>0&&_%10==0?x:y.error("string.creditCard")}},dataUri:{method(x={}){return g.assertOptions(x,["paddingRequired"]),x={paddingRequired:!0,...x},a(typeof x.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:x}})},validate(x,y,{options:w}){const _=x.match(v.dataUriRegex);return _&&(!_[2]||_[2]!=="base64"||v.base64Regex[w.paddingRequired].false.test(_[3]))?x:y.error("string.dataUri")}},domain:{method(x){x&&g.assertOptions(x,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const y=v.addressOptions(x);return this.$_addRule({name:"domain",args:{options:x},address:y})},validate:(x,y,w,{address:_})=>l.isValid(x,_)?x:y.error("string.domain")},email:{method(x={}){g.assertOptions(x,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(x.multiple===void 0||typeof x.multiple=="boolean","multiple option must be an boolean");const y=v.addressOptions(x),w=new RegExp(`\\s*[${x.separator?c(x.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:x},regex:w,address:y})},validate(x,y,{options:w},{regex:_,address:A}){const T=w.multiple?x.split(_):[x],D=[];for(const k of T)u.isValid(k,A)||D.push(k);return D.length?y.error("string.email",{value:x,invalids:D}):x}},guid:{alias:"uuid",method(x={}){g.assertOptions(x,["version","separator"]);let y="";if(x.version){const A=[].concat(x.version);a(A.length>=1,"version must have at least 1 valid version specified");const T=new Set;for(let D=0;D<A.length;++D){const k=A[D];a(typeof k=="string","version at position "+D+" must be a string");const R=v.guidVersions[k.toLowerCase()];a(R,"version at position "+D+" must be one of "+Object.keys(v.guidVersions).join(", ")),a(!T.has(R),"version at position "+D+" must not be a duplicate"),y+=R,T.add(R)}}a(v.guidSeparators.has(x.separator),'separator must be one of true, false, "-", or ":"');const w=x.separator===void 0?"[:-]?":x.separator===!0?"[:-]":x.separator===!1?"[]?":`\\${x.separator}`,_=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${w})[0-9A-F]{4}\\2?[${y||"0-9A-F"}][0-9A-F]{3}\\2?[${y?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:x},regex:_})},validate(x,y,w,{regex:_}){const A=_.exec(x);return A?v.guidBrackets[A[1]]!==A[A.length-1]?y.error("string.guid"):x:y.error("string.guid")}},hex:{method(x={}){return g.assertOptions(x,["byteAligned","prefix"]),x={byteAligned:!1,prefix:!1,...x},a(typeof x.byteAligned=="boolean","byteAligned must be boolean"),a(typeof x.prefix=="boolean"||x.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:x}})},validate:(x,y,{options:w})=>(w.prefix==="optional"?v.hexRegex.withOptionalPrefix:w.prefix===!0?v.hexRegex.withPrefix:v.hexRegex.withoutPrefix).test(x)?w.byteAligned&&x.length%2!=0?y.error("string.hexAlign"):x:y.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(x,y)=>l.isValid(x,{minDomainSegments:1})||v.ipRegex.test(x)?x:y.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(x={}){g.assertOptions(x,["cidr","version"]);const{cidr:y,versions:w,regex:_}=f.regex(x),A=x.version?w:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:y,version:A}},regex:_})},validate:(x,y,{options:w},{regex:_})=>_.test(x)?x:w.version?y.error("string.ipVersion",{value:x,cidr:w.cidr,version:w.version}):y.error("string.ip",{value:x,cidr:w.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(x,{error:y})=>v.isoDate(x)?x:y("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(x,y)=>v.isoDurationRegex.test(x)?x:y.error("string.isoDuration")},length:{method(x,y){return v.length(this,"length",x,"=",y)},validate(x,y,{limit:w,encoding:_},{name:A,operator:T,args:D}){const k=!_&&x.length;return g.compare(k,w,T)?x:y.error("string."+A,{limit:D.limit,value:x,encoding:_})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(x,y){return v.length(this,"max",x,"<=",y)},args:["limit","encoding"]},min:{method(x,y){return v.length(this,"min",x,">=",y)},args:["limit","encoding"]},normalize:{method(x="NFC"){return a(v.normalizationForms.includes(x),"normalization form must be one of "+v.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:x}})},validate:(x,{error:y},{form:w})=>x===x.normalize(w)?x:y("string.normalize",{value:x,form:w}),convert:!0},pattern:{alias:"regex",method(x,y={}){a(x instanceof RegExp,"regex must be a RegExp"),a(!x.flags.includes("g")&&!x.flags.includes("y"),"regex should not use global or sticky mode"),typeof y=="string"&&(y={name:y}),g.assertOptions(y,["invert","name"]);const w=["string.pattern",y.invert?".invert":"",y.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:x,options:y},errorCode:w})},validate:(x,y,{regex:w,options:_},{errorCode:A})=>w.test(x)^_.invert?x:y.error(A,{name:_.name,regex:w,value:x}),args:["regex","options"],multi:!0},replace:{method(x,y){typeof x=="string"&&(x=new RegExp(c(x),"g")),a(x instanceof RegExp,"pattern must be a RegExp"),a(typeof y=="string","replacement must be a String");const w=this.clone();return w.$_terms.replacements||(w.$_terms.replacements=[]),w.$_terms.replacements.push({pattern:x,replacement:y}),w}},token:{method(){return this.$_addRule("token")},validate:(x,y)=>/^\w+$/.test(x)?x:y.error("string.token")},trim:{method(x=!0){return a(typeof x=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:x}})},validate:(x,y,{enabled:w})=>w&&x!==x.trim()?y.error("string.trim"):x,convert:!0},truncate:{method(x=!0){return a(typeof x=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",x)}},uppercase:{method(){return this.case("upper")}},uri:{method(x={}){g.assertOptions(x,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),x.domain&&g.assertOptions(x.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:y,scheme:w}=h.regex(x),_=x.domain?v.addressOptions(x.domain):null;return this.$_addRule({name:"uri",args:{options:x},regex:y,domain:_,scheme:w})},validate(x,y,{options:w},{regex:_,domain:A,scheme:T}){if(["http:/","https:/"].includes(x))return y.error("string.uri");let D=_.exec(x);if(!D&&y.prefs.convert&&w.encodeUri){const k=encodeURI(x);D=_.exec(k),D&&(x=k)}if(D){const k=D[1]||D[2];return!A||w.allowRelative&&!k||l.isValid(k,A)?x:y.error("string.domain",{value:k})}return w.relativeOnly?y.error("string.uriRelativeOnly"):w.scheme?y.error("string.uriCustomScheme",{scheme:T,value:x}):y.error("string.uri")}}},manifest:{build(x,y){if(y.replacements)for(const{pattern:w,replacement:_}of y.replacements)x=x.replace(w,_);return x}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),v.addressOptions=function(x){if(!x)return v.tlds||x;if(a(x.minDomainSegments===void 0||Number.isSafeInteger(x.minDomainSegments)&&x.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(x.maxDomainSegments===void 0||Number.isSafeInteger(x.maxDomainSegments)&&x.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),x.tlds===!1)return x;if(x.tlds===!0||x.tlds===void 0)return a(v.tlds,"Built-in TLD list disabled"),Object.assign({},x,v.tlds);a(typeof x.tlds=="object","tlds must be true, false, or an object");const y=x.tlds.deny;if(y)return Array.isArray(y)&&(x=Object.assign({},x,{tlds:{deny:new Set(y)}})),a(x.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!x.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),v.validateTlds(x.tlds.deny,"tlds.deny"),x;const w=x.tlds.allow;return w?w===!0?(a(v.tlds,"Built-in TLD list disabled"),Object.assign({},x,v.tlds)):(Array.isArray(w)&&(x=Object.assign({},x,{tlds:{allow:new Set(w)}})),a(x.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),v.validateTlds(x.tlds.allow,"tlds.allow"),x):x},v.validateTlds=function(x,y){for(const w of x)a(l.isValid(w,{minDomainSegments:1,maxDomainSegments:1}),`${y} must contain valid top level domain names`)},v.isoDate=function(x){if(!g.isIsoDate(x))return null;/.*T.*[+-]\d\d$/.test(x)&&(x+="00");const y=new Date(x);return isNaN(y.getTime())?null:y.toISOString()},v.length=function(x,y,w,_,A){return a(!A||!1,"Invalid encoding:",A),x.$_addRule({name:y,method:"length",args:{limit:w,encoding:A},operator:_})}},8826:(i,s,o)=>{const a=o(375),l=o(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},i.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(f,{schema:c,error:d}){const h=c.$_terms.map.get(f);return h&&(f=h),c._flags.only&&typeof f!="symbol"?{value:f,errors:d("symbol.map",{map:c.$_terms.map})}:{value:f}}},validate(f,{error:c}){if(typeof f!="symbol")return{value:f,errors:c("symbol.base")}},rules:{map:{method(f){f&&!f[Symbol.iterator]&&typeof f=="object"&&(f=Object.entries(f)),a(f&&f[Symbol.iterator],"Iterable must be an iterable or object");const c=this.clone(),d=[];for(const h of f){a(h&&h[Symbol.iterator],"Entry must be an iterable");const[p,g]=h;a(typeof p!="object"&&typeof p!="function"&&typeof p!="symbol","Key must not be of type object, function, or Symbol"),a(typeof g=="symbol","Value must be a Symbol"),c.$_terms.map.set(p,g),d.push(g)}return c.valid(...d)}}},manifest:{build:(f,c)=>(c.map&&(f=f.map(c.map)),f)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(i,s,o)=>{const a=o(375),l=o(8571),u=o(738),f=o(9621),c=o(8160),d=o(6354),h=o(493),p={result:Symbol("result")};s.entry=function(g,v,x){let y=c.defaults;x&&(a(x.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(x.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),y=c.preferences(c.defaults,x));const w=p.entry(g,v,y);a(!w.mainstay.externals.length,"Schema with external rules must use validateAsync()");const _={value:w.value};return w.error&&(_.error=w.error),w.mainstay.warnings.length&&(_.warning=d.details(w.mainstay.warnings)),w.mainstay.debug&&(_.debug=w.mainstay.debug),w.mainstay.artifacts&&(_.artifacts=w.mainstay.artifacts),_},s.entryAsync=async function(g,v,x){let y=c.defaults;x&&(y=c.preferences(c.defaults,x));const w=p.entry(g,v,y),_=w.mainstay;if(w.error)throw _.debug&&(w.error.debug=_.debug),w.error;if(_.externals.length){let T=w.value;const D=[];for(const k of _.externals){const R=k.state.path,O=k.schema.type==="link"?_.links.get(k.schema):null;let B,K,L=T;const $=R.length?[T]:[],I=R.length?f(g,R):g;if(R.length){B=R[R.length-1];let U=T;for(const q of R.slice(0,-1))U=U[q],$.unshift(U);K=$[0],L=K[B]}try{const U=(Y,X)=>(O||k.schema).$_createError(Y,L,X,k.state,y),q=await k.method(L,{schema:k.schema,linked:O,state:k.state,prefs:x,original:I,error:U,errorsArray:p.errorsArray,warn:(Y,X)=>_.warnings.push((O||k.schema).$_createError(Y,L,X,k.state,y)),message:(Y,X)=>(O||k.schema).$_createError("external",L,X,k.state,y,{messages:Y})});if(q===void 0||q===L)continue;if(q instanceof d.Report){if(_.tracer.log(k.schema,k.state,"rule","external","error"),D.push(q),y.abortEarly)break;continue}if(Array.isArray(q)&&q[c.symbols.errors]){if(_.tracer.log(k.schema,k.state,"rule","external","error"),D.push(...q),y.abortEarly)break;continue}K?(_.tracer.value(k.state,"rule",L,q,"external"),K[B]=q):(_.tracer.value(k.state,"rule",T,q,"external"),T=q)}catch(U){throw y.errors.label&&(U.message+=` (${k.label})`),U}}if(w.value=T,D.length)throw w.error=d.process(D,g,y),_.debug&&(w.error.debug=_.debug),w.error}if(!y.warnings&&!y.debug&&!y.artifacts)return w.value;const A={value:w.value};return _.warnings.length&&(A.warning=d.details(_.warnings)),_.debug&&(A.debug=_.debug),_.artifacts&&(A.artifacts=_.artifacts),A},p.Mainstay=class{constructor(g,v,x){this.externals=[],this.warnings=[],this.tracer=g,this.debug=v,this.links=x,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const g=this._snapshots.pop();this.externals=g.externals,this.warnings=g.warnings}commit(){this._snapshots.pop()}},p.entry=function(g,v,x){const{tracer:y,cleanup:w}=p.tracer(v,x),_=x.debug?[]:null,A=v._ids._schemaChain?new Map:null,T=new p.Mainstay(y,_,A),D=v._ids._schemaChain?[{schema:v}]:null,k=new h([],[],{mainstay:T,schemas:D}),R=s.validate(g,v,k,x);w&&v.$_root.untrace();const O=d.process(R.errors,g,x);return{value:R.value,error:O,mainstay:T}},p.tracer=function(g,v){return g.$_root._tracer?{tracer:g.$_root._tracer._register(g)}:v.debug?(a(g.$_root.trace,"Debug mode not supported"),{tracer:g.$_root.trace()._register(g),cleanup:!0}):{tracer:p.ignore}},s.validate=function(g,v,x,y,w={}){if(v.$_terms.whens&&(v=v._generate(g,x,y).schema),v._preferences&&(y=p.prefs(v,y)),v._cache&&y.cache){const O=v._cache.get(g);if(x.mainstay.tracer.debug(x,"validate","cached",!!O),O)return O}const _=(O,B,K)=>v.$_createError(O,g,B,K||x,y),A={original:g,prefs:y,schema:v,state:x,error:_,errorsArray:p.errorsArray,warn:(O,B,K)=>x.mainstay.warnings.push(_(O,B,K)),message:(O,B)=>v.$_createError("custom",g,B,x,y,{messages:O})};x.mainstay.tracer.entry(v,x);const T=v._definition;if(T.prepare&&g!==void 0&&y.convert){const O=T.prepare(g,A);if(O){if(x.mainstay.tracer.value(x,"prepare",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),A);g=O.value}}if(T.coerce&&g!==void 0&&y.convert&&(!T.coerce.from||T.coerce.from.includes(typeof g))){const O=T.coerce.method(g,A);if(O){if(x.mainstay.tracer.value(x,"coerced",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),A);g=O.value}}const D=v._flags.empty;D&&D.$_match(p.trim(g,v),x.nest(D),c.defaults)&&(x.mainstay.tracer.value(x,"empty",g,void 0),g=void 0);const k=w.presence||v._flags.presence||(v._flags._endedSwitch?null:y.presence);if(g===void 0){if(k==="forbidden")return p.finalize(g,null,A);if(k==="required")return p.finalize(g,[v.$_createError("any.required",g,null,x,y)],A);if(k==="optional"){if(v._flags.default!==c.symbols.deepDefault)return p.finalize(g,null,A);x.mainstay.tracer.value(x,"default",g,{}),g={}}}else if(k==="forbidden")return p.finalize(g,[v.$_createError("any.unknown",g,null,x,y)],A);const R=[];if(v._valids){const O=v._valids.get(g,x,y,v._flags.insensitive);if(O)return y.convert&&(x.mainstay.tracer.value(x,"valids",g,O.value),g=O.value),x.mainstay.tracer.filter(v,x,"valid",O),p.finalize(g,null,A);if(v._flags.only){const B=v.$_createError("any.only",g,{valids:v._valids.values({display:!0})},x,y);if(y.abortEarly)return p.finalize(g,[B],A);R.push(B)}}if(v._invalids){const O=v._invalids.get(g,x,y,v._flags.insensitive);if(O){x.mainstay.tracer.filter(v,x,"invalid",O);const B=v.$_createError("any.invalid",g,{invalids:v._invalids.values({display:!0})},x,y);if(y.abortEarly)return p.finalize(g,[B],A);R.push(B)}}if(T.validate){const O=T.validate(g,A);if(O&&(x.mainstay.tracer.value(x,"base",g,O.value),g=O.value,O.errors)){if(!Array.isArray(O.errors))return R.push(O.errors),p.finalize(g,R,A);if(O.errors.length)return R.push(...O.errors),p.finalize(g,R,A)}}return v._rules.length?p.rules(g,R,A):p.finalize(g,R,A)},p.rules=function(g,v,x){const{schema:y,state:w,prefs:_}=x;for(const A of y._rules){const T=y._definition.rules[A.method];if(T.convert&&_.convert){w.mainstay.tracer.log(y,w,"rule",A.name,"full");continue}let D,k=A.args;if(A._resolve.length){k=Object.assign({},k);for(const O of A._resolve){const B=T.argsByName.get(O),K=k[O].resolve(g,w,_),L=B.normalize?B.normalize(K):K,$=c.validateArg(L,null,B);if($){D=y.$_createError("any.ref",K,{arg:O,ref:k[O],reason:$},w,_);break}k[O]=L}}D=D||T.validate(g,x,k,A);const R=p.rule(D,A);if(R.errors){if(w.mainstay.tracer.log(y,w,"rule",A.name,"error"),A.warn){w.mainstay.warnings.push(...R.errors);continue}if(_.abortEarly)return p.finalize(g,R.errors,x);v.push(...R.errors)}else w.mainstay.tracer.log(y,w,"rule",A.name,"pass"),w.mainstay.tracer.value(w,"rule",g,R.value,A.name),g=R.value}return p.finalize(g,v,x)},p.rule=function(g,v){return g instanceof d.Report?(p.error(g,v),{errors:[g],value:null}):Array.isArray(g)&&g[c.symbols.errors]?(g.forEach(x=>p.error(x,v)),{errors:g,value:null}):{errors:null,value:g}},p.error=function(g,v){return v.message&&g._setTemplate(v.message),g},p.finalize=function(g,v,x){v=v||[];const{schema:y,state:w,prefs:_}=x;if(v.length){const T=p.default("failover",void 0,v,x);T!==void 0&&(w.mainstay.tracer.value(w,"failover",g,T),g=T,v=[])}if(v.length&&y._flags.error)if(typeof y._flags.error=="function"){v=y._flags.error(v),Array.isArray(v)||(v=[v]);for(const T of v)a(T instanceof Error||T instanceof d.Report,"error() must return an Error object")}else v=[y._flags.error];if(g===void 0){const T=p.default("default",g,v,x);w.mainstay.tracer.value(w,"default",g,T),g=T}if(y._flags.cast&&g!==void 0){const T=y._definition.cast[y._flags.cast];if(T.from(g)){const D=T.to(g,x);w.mainstay.tracer.value(w,"cast",g,D,y._flags.cast),g=D}}if(y.$_terms.externals&&_.externals&&_._externals!==!1)for(const{method:T}of y.$_terms.externals)w.mainstay.externals.push({method:T,schema:y,state:w,label:d.label(y._flags,w,_)});const A={value:g,errors:v.length?v:null};return y._flags.result&&(A.value=y._flags.result==="strip"?void 0:x.original,w.mainstay.tracer.value(w,y._flags.result,g,A.value),w.shadow(g,y._flags.result)),y._cache&&_.cache!==!1&&!y._refs.length&&y._cache.set(x.original,A),g===void 0||A.errors||y._flags.artifact===void 0||(w.mainstay.artifacts=w.mainstay.artifacts||new Map,w.mainstay.artifacts.has(y._flags.artifact)||w.mainstay.artifacts.set(y._flags.artifact,[]),w.mainstay.artifacts.get(y._flags.artifact).push(w.path)),A},p.prefs=function(g,v){const x=v===c.defaults;return x&&g._preferences[c.symbols.prefs]?g._preferences[c.symbols.prefs]:(v=c.preferences(v,g._preferences),x&&(g._preferences[c.symbols.prefs]=v),v)},p.default=function(g,v,x,y){const{schema:w,state:_,prefs:A}=y,T=w._flags[g];if(A.noDefaults||T===void 0)return v;if(_.mainstay.tracer.log(w,_,"rule",g,"full"),!T)return T;if(typeof T=="function"){const D=T.length?[l(_.ancestors[0]),y]:[];try{return T(...D)}catch(k){return void x.push(w.$_createError(`any.${g}`,null,{error:k},_,A))}}return typeof T!="object"?T:T[c.symbols.literal]?T.literal:c.isResolvable(T)?T.resolve(v,_,A):l(T)},p.trim=function(g,v){if(typeof g!="string")return g;const x=v.$_getRule("trim");return x&&x.args.enabled?g.trim():g},p.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},p.errorsArray=function(){const g=[];return g[c.symbols.errors]=!0,g}},2036:(i,s,o)=>{const a=o(375),l=o(9474),u=o(8160),f={};i.exports=f.Values=class{constructor(c,d){this._values=new Set(c),this._refs=new Set(d),this._lowercase=f.lowercases(c),this._override=!1}get length(){return this._values.size+this._refs.size}add(c,d){u.isResolvable(c)?this._refs.has(c)||(this._refs.add(c),d&&d.register(c)):this.has(c,null,null,!1)||(this._values.add(c),typeof c=="string"&&this._lowercase.set(c.toLowerCase(),c))}static merge(c,d,h){if(c=c||new f.Values,d){if(d._override)return d.clone();for(const p of[...d._values,...d._refs])c.add(p)}if(h)for(const p of[...h._values,...h._refs])c.remove(p);return c.length?c:null}remove(c){u.isResolvable(c)?this._refs.delete(c):(this._values.delete(c),typeof c=="string"&&this._lowercase.delete(c.toLowerCase()))}has(c,d,h,p){return!!this.get(c,d,h,p)}get(c,d,h,p){if(!this.length)return!1;if(this._values.has(c))return{value:c};if(typeof c=="string"&&c&&p){const g=this._lowercase.get(c.toLowerCase());if(g)return{value:g}}if(!this._refs.size&&typeof c!="object")return!1;if(typeof c=="object"){for(const g of this._values)if(l(g,c))return{value:g}}if(d)for(const g of this._refs){const v=g.resolve(c,d,h,null,{in:!0});if(v===void 0)continue;const x=g.in&&typeof v=="object"?Array.isArray(v)?v:Object.keys(v):[v];for(const y of x)if(typeof y==typeof c){if(p&&c&&typeof c=="string"){if(y.toLowerCase()===c.toLowerCase())return{value:y,ref:g}}else if(l(y,c))return{value:y,ref:g}}}return!1}override(){this._override=!0}values(c){if(c&&c.display){const d=[];for(const h of[...this._values,...this._refs])h!==void 0&&d.push(h);return d}return Array.from([...this._values,...this._refs])}clone(){const c=new f.Values(this._values,this._refs);return c._override=this._override,c}concat(c){a(!c._override,"Cannot concat override set of values");const d=new f.Values([...this._values,...c._values],[...this._refs,...c._refs]);return d._override=this._override,d}describe(){const c=[];this._override&&c.push({override:!0});for(const d of this._values.values())c.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())c.push(d.describe());return c}},f.Values.prototype[u.symbols.values]=!0,f.Values.prototype.slice=f.Values.prototype.clone,f.lowercases=function(c){const d=new Map;if(c)for(const h of c)typeof h=="string"&&d.set(h.toLowerCase(),h);return d}},978:(i,s,o)=>{const a=o(375),l=o(8571),u=o(1687),f=o(9621),c={};i.exports=function(d,h,p={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!h||h===!0||typeof h=="object","Invalid source value: must be true, falsy or an object"),a(typeof p=="object","Invalid options: must be an object"),!h)return null;if(p.shallow)return c.applyToDefaultsWithShallow(d,h,p);const g=l(d);if(h===!0)return g;const v=p.nullOverride!==void 0&&p.nullOverride;return u(g,h,{nullOverride:v,mergeArrays:!1})},c.applyToDefaultsWithShallow=function(d,h,p){const g=p.shallow;a(Array.isArray(g),"Invalid keys");const v=new Map,x=h===!0?null:new Set;for(let _ of g){_=Array.isArray(_)?_:_.split(".");const A=f(d,_);A&&typeof A=="object"?v.set(A,x&&f(h,_)||A):x&&x.add(_)}const y=l(d,{},v);if(!x)return y;for(const _ of x)c.reachCopy(y,h,_);const w=p.nullOverride!==void 0&&p.nullOverride;return u(y,h,{nullOverride:w,mergeArrays:!1})},c.reachCopy=function(d,h,p){for(const x of p){if(!(x in h))return;const y=h[x];if(typeof y!="object"||y===null)return;h=y}const g=h;let v=d;for(let x=0;x<p.length-1;++x){const y=p[x];typeof v[y]!="object"&&(v[y]={}),v=v[y]}v[p[p.length-1]]=g}},375:(i,s,o)=>{const a=o(7916);i.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(i,s,o)=>{const a=o(9621),l=o(4277),u=o(7043),f={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};i.exports=f.clone=function(c,d={},h=null){if(typeof c!="object"||c===null)return c;let p=f.clone,g=h;if(d.shallow){if(d.shallow!==!0)return f.cloneWithShallow(c,d);p=w=>w}else if(g){const w=g.get(c);if(w)return w}else g=new Map;const v=l.getInternalProto(c);if(v===l.buffer)return!1;if(v===l.date)return new Date(c.getTime());if(v===l.regex)return new RegExp(c);const x=f.base(c,v,d);if(x===c)return c;if(g&&g.set(c,x),v===l.set)for(const w of c)x.add(p(w,d,g));else if(v===l.map)for(const[w,_]of c)x.set(w,p(_,d,g));const y=u.keys(c,d);for(const w of y){if(w==="__proto__")continue;if(v===l.array&&w==="length"){x.length=c.length;continue}const _=Object.getOwnPropertyDescriptor(c,w);_?_.get||_.set?Object.defineProperty(x,w,_):_.enumerable?x[w]=p(c[w],d,g):Object.defineProperty(x,w,{enumerable:!1,writable:!0,configurable:!0,value:p(c[w],d,g)}):Object.defineProperty(x,w,{enumerable:!0,writable:!0,configurable:!0,value:p(c[w],d,g)})}return x},f.cloneWithShallow=function(c,d){const h=d.shallow;(d=Object.assign({},d)).shallow=!1;const p=new Map;for(const g of h){const v=a(c,g);typeof v!="object"&&typeof v!="function"||p.set(v,v)}return f.clone(c,d,p)},f.base=function(c,d,h){if(h.prototype===!1)return f.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const p=Object.getPrototypeOf(c);if(p&&p.isImmutable)return c;if(d===l.array){const g=[];return p!==d&&Object.setPrototypeOf(g,p),g}if(f.needsProtoHack.has(d)){const g=new p.constructor;return p!==d&&Object.setPrototypeOf(g,p),g}return Object.create(p)}},9474:(i,s,o)=>{const a=o(4277),l={mismatched:null};i.exports=function(u,f,c){return c=Object.assign({prototype:!0},c),!!l.isDeepEqual(u,f,c,[])},l.isDeepEqual=function(u,f,c,d){if(u===f)return u!==0||1/u==1/f;const h=typeof u;if(h!==typeof f||u===null||f===null)return!1;if(h==="function"){if(!c.deepFunction||u.toString()!==f.toString())return!1}else if(h!=="object")return u!=u&&f!=f;const p=l.getSharedType(u,f,!!c.prototype);switch(p){case a.buffer:return!1;case a.promise:return u===f;case a.regex:return u.toString()===f.toString();case l.mismatched:return!1}for(let g=d.length-1;g>=0;--g)if(d[g].isSame(u,f))return!0;d.push(new l.SeenEntry(u,f));try{return!!l.isDeepEqualObj(p,u,f,c,d)}finally{d.pop()}},l.getSharedType=function(u,f,c){if(c)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(f)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(f)?l.mismatched:d},l.valueOf=function(u){const f=u.valueOf;if(f===void 0)return u;try{return f.call(u)}catch(c){return c}},l.hasOwnEnumerableProperty=function(u,f){return Object.prototype.propertyIsEnumerable.call(u,f)},l.isSetSimpleEqual=function(u,f){for(const c of Set.prototype.values.call(u))if(!Set.prototype.has.call(f,c))return!1;return!0},l.isDeepEqualObj=function(u,f,c,d,h){const{isDeepEqual:p,valueOf:g,hasOwnEnumerableProperty:v}=l,{keys:x,getOwnPropertySymbols:y}=Object;if(u===a.array){if(!d.part){if(f.length!==c.length)return!1;for(let D=0;D<f.length;++D)if(!p(f[D],c[D],d,h))return!1;return!0}for(const D of f)for(const k of c)if(p(D,k,d,h))return!0}else if(u===a.set){if(f.size!==c.size)return!1;if(!l.isSetSimpleEqual(f,c)){const D=new Set(Set.prototype.values.call(c));for(const k of Set.prototype.values.call(f)){if(D.delete(k))continue;let R=!1;for(const O of D)if(p(k,O,d,h)){D.delete(O),R=!0;break}if(!R)return!1}}}else if(u===a.map){if(f.size!==c.size)return!1;for(const[D,k]of Map.prototype.entries.call(f))if(k===void 0&&!Map.prototype.has.call(c,D)||!p(k,Map.prototype.get.call(c,D),d,h))return!1}else if(u===a.error&&(f.name!==c.name||f.message!==c.message))return!1;const w=g(f),_=g(c);if((f!==w||c!==_)&&!p(w,_,d,h))return!1;const A=x(f);if(!d.part&&A.length!==x(c).length&&!d.skip)return!1;let T=0;for(const D of A)if(d.skip&&d.skip.includes(D))c[D]===void 0&&++T;else if(!v(c,D)||!p(f[D],c[D],d,h))return!1;if(!d.part&&A.length-T!==x(c).length)return!1;if(d.symbols!==!1){const D=y(f),k=new Set(y(c));for(const R of D){if(!d.skip||!d.skip.includes(R)){if(v(f,R)){if(!v(c,R)||!p(f[R],c[R],d,h))return!1}else if(v(c,R))return!1}k.delete(R)}for(const R of k)if(v(c,R))return!1}return!0},l.SeenEntry=class{constructor(u,f){this.obj=u,this.ref=f}isSame(u,f){return this.obj===u&&this.ref===f}}},7916:(i,s,o)=>{const a=o(8761);i.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s.assert)}}},5277:i=>{const s={};i.exports=function(o){if(!o)return"";let a="";for(let l=0;l<o.length;++l){const u=o.charCodeAt(l);s.isSafe(u)?a+=o[l]:a+=s.escapeHtmlChar(u)}return a},s.escapeHtmlChar=function(o){return s.namedHtml.get(o)||(o>=256?"&#"+o+";":`&#x${o.toString(16).padStart(2,"0")};`)},s.isSafe=function(o){return s.safeCharCodes.has(o)},s.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),s.safeCharCodes=function(){const o=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&o.add(a);return o}()},6064:i=>{i.exports=function(s){return s.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:i=>{i.exports=function(){}},1687:(i,s,o)=>{const a=o(375),l=o(8571),u=o(7043),f={};i.exports=f.merge=function(c,d,h){if(a(c&&typeof c=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return c;if(h=Object.assign({nullOverride:!0,mergeArrays:!0},h),Array.isArray(d)){a(Array.isArray(c),"Cannot merge array onto an object"),h.mergeArrays||(c.length=0);for(let g=0;g<d.length;++g)c.push(l(d[g],{symbols:h.symbols}));return c}const p=u.keys(d,h);for(let g=0;g<p.length;++g){const v=p[g];if(v==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,v))continue;const x=d[v];if(x&&typeof x=="object"){if(c[v]===x)continue;!c[v]||typeof c[v]!="object"||Array.isArray(c[v])!==Array.isArray(x)||x instanceof Date||x instanceof RegExp?c[v]=l(x,{symbols:h.symbols}):f.merge(c[v],x,h)}else(x!=null||h.nullOverride)&&(c[v]=x)}return c}},9621:(i,s,o)=>{const a=o(375),l={};i.exports=function(u,f,c){if(f===!1||f==null)return u;typeof(c=c||{})=="string"&&(c={separator:c});const d=Array.isArray(f);a(!d||!c.separator,"Separator option is not valid for array-based chain");const h=d?f:f.split(c.separator||".");let p=u;for(let g=0;g<h.length;++g){let v=h[g];const x=c.iterables&&l.iterables(p);if(Array.isArray(p)||x==="set"){const y=Number(v);Number.isInteger(y)&&(v=y<0?p.length+y:y)}if(!p||typeof p=="function"&&c.functions===!1||!x&&p[v]===void 0){a(!c.strict||g+1===h.length,"Missing segment",v,"in reach path ",f),a(typeof p=="object"||c.functions===!0||typeof p!="function","Invalid segment",v,"in reach path ",f),p=c.default;break}p=x?x==="set"?[...p][v]:p.get(v):p[v]}return p},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:i=>{i.exports=function(...s){try{return JSON.stringify(...s)}catch(o){return"[Cannot display object: "+o.message+"]"}}},4277:(i,s)=>{const o={};s=i.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",s.error],["[object Map]",s.map],["[object Promise]",s.promise],["[object Set]",s.set],["[object WeakMap]",s.weakMap],["[object WeakSet]",s.weakSet]]),s.getInternalProto=function(a){if(Array.isArray(a))return s.array;if(a instanceof Date)return s.date;if(a instanceof RegExp)return s.regex;if(a instanceof Error)return s.error;const l=Object.prototype.toString.call(a);return o.typeMap.get(l)||s.generic}},7043:(i,s)=>{s.keys=function(o,a={}){return a.symbols!==!1?Reflect.ownKeys(o):Object.getOwnPropertyNames(o)}},3652:(i,s,o)=>{const a=o(375),l={};s.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,f){const c=[].concat((f=f||{}).before||[]),d=[].concat(f.after||[]),h=f.group||"?",p=f.sort||0;a(!c.includes(h),`Item cannot come before itself: ${h}`),a(!c.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(h),`Item cannot come after itself: ${h}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const g of u){const v={seq:this._items.length,sort:p,before:c,after:d,group:h,node:g};this._items.push(v)}if(!f.manual){const g=this._sort();a(g,"item",h!=="?"?`added into group ${h}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const c of u)if(c)for(const d of c._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let c=0;c<this._items.length;++c)this._items[c].seq=c;const f=this._sort();return a(f,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},f=Object.create(null),c=Object.create(null);for(const v of this._items){const x=v.seq,y=v.group;c[y]=c[y]||[],c[y].push(x),u[x]=v.before;for(const w of v.after)f[w]=f[w]||[],f[w].push(x)}for(const v in u){const x=[];for(const y in u[v]){const w=u[v][y];c[w]=c[w]||[],x.push(...c[w])}u[v]=x}for(const v in f)if(c[v])for(const x of c[v])u[x].push(...f[v]);const d={};for(const v in u){const x=u[v];for(const y of x)d[y]=d[y]||[],d[y].push(v)}const h={},p=[];for(let v=0;v<this._items.length;++v){let x=v;if(d[v]){x=null;for(let y=0;y<this._items.length;++y){if(h[y]===!0)continue;d[y]||(d[y]=[]);const w=d[y].length;let _=0;for(let A=0;A<w;++A)h[d[y][A]]&&++_;if(_===w){x=y;break}}}x!==null&&(h[x]=!0,p.push(x))}if(p.length!==this._items.length)return!1;const g={};for(const v of this._items)g[v.seq]=v;this._items=[],this.nodes=[];for(const v of p){const x=g[v];this.nodes.push(x.node),this._items.push(x)}return!0}},l.mergeSort=(u,f)=>u.sort===f.sort?0:u.sort<f.sort?-1:1},5380:(i,s,o)=>{const a=o(443),l=o(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};s.analyze=function(f,c={}){if(!f)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof f!="string")throw new Error("Invalid input: domain must be a string");if(f.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(f)){if(c.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");f=f.normalize("NFC")}if(u.domainControlRx.test(f))return l.code("DOMAIN_INVALID_CHARS");f=u.punycode(f),c.allowFullyQualified&&f[f.length-1]==="."&&(f=f.slice(0,-1));const d=c.minDomainSegments||u.minDomainSegments,h=f.split(".");if(h.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(c.maxDomainSegments&&h.length>c.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const p=c.tlds;if(p){const g=h[h.length-1].toLowerCase();if(p.deny&&p.deny.has(g)||p.allow&&!p.allow.has(g))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let g=0;g<h.length;++g){const v=h[g];if(!v.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(v.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(g<h.length-1){if(!u.domainSegmentRx.test(v))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(v))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},s.isValid=function(f,c){return!s.analyze(f,c)},u.punycode=function(f){f.includes("%")&&(f=f.replace(/%/g,"%25"));try{return new u.URL(`http://${f}`).host}catch{return f}}},1745:(i,s,o)=>{const a=o(9848),l=o(5380),u=o(2178),f={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};s.analyze=function(c,d){return f.email(c,d)},s.isValid=function(c,d){return!f.email(c,d)},f.email=function(c,d={}){if(typeof c!="string")throw new Error("Invalid input: email must be a string");if(!c)return u.code("EMPTY_STRING");const h=!f.nonAsciiRx.test(c);if(!h){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");c=c.normalize("NFC")}const p=c.split("@");if(p.length!==2)return p.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[g,v]=p;if(!g)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(c.length>254)return u.code("ADDRESS_TOO_LONG");if(f.encoder.encode(g).length>64)return u.code("LOCAL_TOO_LONG")}return f.local(g,h)||l.analyze(v,d)},f.local=function(c,d){const h=c.split(".");for(const p of h){if(!p.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!f.atextRx.test(p))return u.code("INVALID_LOCAL_CHARS")}else for(const g of p){if(f.atextRx.test(g))continue;const v=f.binary(g);if(!f.atomRx.test(v))return u.code("INVALID_LOCAL_CHARS")}}},f.binary=function(c){return Array.from(f.encoder.encode(c)).map(d=>String.fromCharCode(d)).join("")},f.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,f.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(i,s)=>{s.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},s.code=function(o){return{code:o,error:s.codes[o]}}},9959:(i,s,o)=>{const a=o(375),l=o(5752);s.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const f=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(f),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let c=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),a(c.length>=1,"options.version must have at least 1 version specified");for(let p=0;p<c.length;++p)a(typeof c[p]=="string","options.version must only contain strings"),c[p]=c[p].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(c[p]),"options.version contains unknown version "+c[p]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));const d=`(?:${c.map(p=>{if(f==="forbidden")return l.ip[p];const g=`\\/${p==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return f==="required"?`${l.ip[p]}${g}`:`${l.ip[p]}(?:${g})?`}).join("|")})`,h=new RegExp(`^${d}$`);return{cidr:f,versions:c,regex:h,raw:d}}},5752:(i,s,o)=>{const a=o(375),l=o(6064),u={generate:function(){const f={},c="\\dA-Fa-f",d="["+c+"]",h="\\w-\\.~",p="!\\$&'\\(\\)\\*\\+,;=",g="%"+c,v=h+g+p+":@",x="["+v+"]",y="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";f.ipv4address="(?:"+y+"\\.){3}"+y;const w=d+"{1,4}",_="(?:"+w+":"+w+"|"+f.ipv4address+")",A="(?:"+w+":){6}"+_,T="::(?:"+w+":){5}"+_,D="(?:"+w+")?::(?:"+w+":){4}"+_,k="(?:(?:"+w+":){0,1}"+w+")?::(?:"+w+":){3}"+_,R="(?:(?:"+w+":){0,2}"+w+")?::(?:"+w+":){2}"+_,O="(?:(?:"+w+":){0,3}"+w+")?::"+w+":"+_,B="(?:(?:"+w+":){0,4}"+w+")?::"+_,K="(?:(?:"+w+":){0,5}"+w+")?::"+w,L="(?:(?:"+w+":){0,6}"+w+")?::";f.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",f.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",f.ipv6address="(?:"+A+"|"+T+"|"+D+"|"+k+"|"+R+"|"+O+"|"+B+"|"+K+"|"+L+")",f.ipvFuture="v"+d+"+\\.["+h+p+":]+",f.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",f.schemeRegex=new RegExp(f.scheme);const $="["+h+g+p+":]*",I="["+h+g+p+"]{1,255}",U="(?:\\[(?:"+f.ipv6address+"|"+f.ipvFuture+")\\]|"+f.ipv4address+"|"+I+")",q="(?:"+$+"@)?"+U+"(?::\\d*)?",Y="(?:"+$+"@)?("+U+")(?::\\d*)?",X=x+"*",te=x+"+",le="(?:\\/"+X+")*",ee="\\/(?:"+te+le+")?",z=te+le,he="["+h+g+p+"@]+"+le,de="(?:\\/\\/\\/"+X+le+")";return f.hierPart="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+z+"|"+de+")",f.hierPartCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+z+")",f.relativeRef="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+he+"|)",f.relativeRefCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+he+"|)",f.query="["+v+"\\/\\?]*(?=#|$)",f.queryWithSquareBrackets="["+v+"\\[\\]\\/\\?]*(?=#|$)",f.fragment="["+v+"\\/\\?]*",f}};u.rfc3986=u.generate(),s.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(f){const c=u.rfc3986,d="(?:\\?"+(f.allowQuerySquareBrackets?c.queryWithSquareBrackets:c.query)+")?(?:#"+c.fragment+")?",h=f.domain?c.relativeRefCapture:c.relativeRef;if(f.relativeOnly)return u.wrap(h+d);let p="";if(f.scheme){a(f.scheme instanceof RegExp||typeof f.scheme=="string"||Array.isArray(f.scheme),"scheme must be a RegExp, String, or Array");const x=[].concat(f.scheme);a(x.length>=1,"scheme must have at least 1 scheme specified");const y=[];for(let w=0;w<x.length;++w){const _=x[w];a(_ instanceof RegExp||typeof _=="string","scheme at position "+w+" must be a RegExp or String"),_ instanceof RegExp?y.push(_.source.toString()):(a(c.schemeRegex.test(_),"scheme at position "+w+" must be a valid scheme"),y.push(l(_)))}p=y.join("|")}const g="(?:"+(p?"(?:"+p+")":c.scheme)+":"+(f.domain?c.hierPartCapture:c.hierPart)+")",v=f.allowRelative?"(?:"+g+"|"+h+")":g;return u.wrap(v+d,p)},u.wrap=function(f,c){return{raw:f=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${f}`,regex:new RegExp(`^${f}$`),scheme:c}},u.uriRegex=u.createRegex({}),s.regex=function(f={}){return f.scheme||f.allowRelative||f.relativeOnly||f.allowQuerySquareBrackets||f.domain?u.createRegex(f):u.uriRegex}},1447:(i,s)=>{const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};s.Parser=class{constructor(a,l={}){if(!l[o.settings]&&l.constants)for(const u in l.constants){const f=l.constants[u];if(f!==null&&!["boolean","number","string"].includes(typeof f))throw new Error(`Formula constant ${u} contains invalid ${typeof f} value type`)}this.settings=l[o.settings]?l:Object.assign({[o.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",f=0,c=!1;const d=p=>{if(f)throw new Error("Formula missing closing parenthesis");const g=l.length?l[l.length-1]:null;if(c||u||p){if(g&&g.type==="reference"&&p===")")return g.type="function",g.value=this._subFormula(u,g.value),void(u="");if(p===")"){const v=new s.Parser(u,this.settings);l.push({type:"segment",value:v})}else if(c){if(c==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(o.operatorCharacters.includes(u))g&&g.type==="operator"&&o.operators.includes(g.value+u)?g.value+=u:l.push({type:"operator",value:u});else if(u.match(o.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const p of a)c?p===c?(d(),c=!1):u+=p:f?p==="("?(u+=p,++f):p===")"?(--f,f?u+=p:d(p)):u+=p:p in o.literals?c=o.literals[p]:p==="("?(d(),++f):o.operatorCharacters.includes(p)?(d(),u=p,d()):p!==" "?u+=p:d();d(),l=l.map((p,g)=>p.type!=="operator"||p.value!=="-"||g&&l[g-1].type!=="operator"?p:{type:"operator",value:"n"});let h=!1;for(const p of l){if(p.type==="operator"){if(o.operatorsPrefix.includes(p.value))continue;if(!h)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(p.value))throw new Error(`Formula contains an unknown operator ${p.value}`)}else if(h)throw new Error("Formula missing expected operator");h=!h}if(!h)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(p=>{if(p.type==="operator")return o.operatorsPrefix.includes(p.value)?p:p.value;if(p.type!=="reference")return p.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(p.value))throw new Error(`Formula contains invalid reference ${p.value}`);return this.settings.reference?this.settings.reference(p.value):o.reference(p.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let f=[];if(a){let c="",d=0,h=!1;const p=()=>{if(!c)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);f.push(c),c=""};for(let g=0;g<a.length;++g){const v=a[g];h?(c+=v,v===h&&(h=!1)):v in o.literals&&!d?(c+=v,h=o.literals[v]):v!==","||d?(c+=v,v==="("?++d:v===")"&&--d):p()}p()}return f=f.map(c=>new s.Parser(c,this.settings)),function(c){const d=[];for(const h of f)d.push(h.evaluate(c));return u.call(c,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const f=l[u];if(f&&f.type==="operator"){const c=l[u+1];l.splice(u+1,1);const d=o.evaluate(c,a);l[u]=o.single(f.value,d)}}return o.operatorsOrder.forEach(u=>{for(let f=1;f<l.length-1;)if(u.includes(l[f])){const c=l[f],d=o.evaluate(l[f-1],a),h=o.evaluate(l[f+1],a);l.splice(f,2);const p=o.calculate(c,d,h);l[f-1]=p===0?0:p}else f+=2}),o.evaluate(l[0],a)}},s.Parser.prototype[o.symbol]=!0,o.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},o.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[o.symbol]?a.evaluate(l):a},o.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},o.calculate=function(a,l,u){if(a==="??")return o.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=o.exists(l)?l:"")+(o.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},o.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:i=>{i.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function i(s){var o=r[s];if(o!==void 0)return o.exports;var a=r[s]={exports:{}};return n[s](a,a.exports,i),a.exports}(5107);var n,r})}(z4)),z4.exports}var u7t=l7t();const Wr=sa(u7t),gNe={id:Wr.string().required()},lCe={...gNe,as:Wr.string().valid("img","video").required(),src:Wr.string().uri().required(),position:Wr.string().valid("center","left","right"),"data-parallax":Wr.boolean().required()},yNe=Wr.object({type:Wr.string().required(),url:Wr.string().when("type",{is:"STAC",then:Wr.string().required(),otherwise:Wr.string().optional()}),properties:Wr.object({id:Wr.string().required()}).unknown().required(),source:Wr.object({type:Wr.string().required()}).unknown().when("type",{is:"STAC",then:Wr.optional(),otherwise:Wr.required()})}).pattern(Wr.string(),Wr.any()),c7t=Wr.object({type:Wr.string().valid("group","Group"),properties:Wr.object({id:Wr.string().required()}).unknown().required(),layers:Wr.array().items(yNe)}),wz={layers:Wr.array().items(Wr.object().keys({type:Wr.string().required()}).unknown().custom((e,t)=>{const{error:n}=e.type==="Group"?c7t.validate(e):yNe.validate(e);return n?t.message(n.message):e},"Custom validator for map schema.")).optional(),center:Wr.array().items(Wr.number()).min(2).max(2).optional(),zoom:Wr.number().optional()},vNe={config:Wr.object({...wz}).unknown().optional()},bNe={"eox-map":Wr.object({...gNe,...wz,...vNe}).unknown()},f7t={hero:{img:Wr.object({...lCe}).unknown(),video:Wr.object({...lCe}).unknown()},tour:{"eox-map":bNe["eox-map"],"section-step":Wr.object({...wz,...vNe}).unknown()}};function d7t(e,t){var i,s;let n=[];for(const o of Object.keys(e)){const a=e[o];if(a.as){const l=a.mode?(i=f7t[a.mode])==null?void 0:i[a.as]:bNe[a.as];l&&((s=l.validate(a,{abortEarly:!1}).error)==null||s.details.forEach(f=>{n.push({ref:`#${o}`,message:f.message}),console.error(`#${o}`,f.message)}))}}const r=(t.shadowRoot||t).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(n),300)}/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */var j4,uCe;function cCe(){if(uCe)return j4;uCe=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:o,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;s||(s=function(oe){return oe}),o||(o=function(oe){return oe}),l||(l=function(oe,be,F){return oe.apply(be,F)}),u||(u=function(oe,be){return new oe(...be)});const f=T(Array.prototype.forEach),c=T(Array.prototype.pop),d=T(Array.prototype.push),h=T(String.prototype.toLowerCase),p=T(String.prototype.toString),g=T(String.prototype.match),v=T(String.prototype.replace),x=T(String.prototype.indexOf),y=T(String.prototype.trim),w=T(Object.prototype.hasOwnProperty),_=T(RegExp.prototype.test),A=D(TypeError);function T(se){return function(oe){for(var be=arguments.length,F=new Array(be>1?be-1:0),H=1;H<be;H++)F[H-1]=arguments[H];return l(se,oe,F)}}function D(se){return function(){for(var oe=arguments.length,be=new Array(oe),F=0;F<oe;F++)be[F]=arguments[F];return u(se,be)}}function k(se,oe){let be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h;t&&t(se,null);let F=oe.length;for(;F--;){let H=oe[F];if(typeof H=="string"){const J=be(H);J!==H&&(n(oe)||(oe[F]=J),H=J)}se[H]=!0}return se}function R(se){for(let oe=0;oe<se.length;oe++)w(se,oe)||(se[oe]=null);return se}function O(se){const oe=a(null);for(const[be,F]of e(se))w(se,be)&&(Array.isArray(F)?oe[be]=R(F):F&&typeof F=="object"&&F.constructor===Object?oe[be]=O(F):oe[be]=F);return oe}function B(se,oe){for(;se!==null;){const F=i(se,oe);if(F){if(F.get)return T(F.get);if(typeof F.value=="function")return T(F.value)}se=r(se)}function be(){return null}return be}const K=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Y=s(["#text"]),X=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ee=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),he=o(/<%[\w\W]*|[\w\W]*%>/gm),de=o(/\$\{[\w\W]*}/gm),ze=o(/^data-[\-\w.\u00B7-\uFFFF]+$/),He=o(/^aria-[\-\w]+$/),je=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),we=o(/^(?:\w+script|data):/i),Ie=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qe=o(/^html$/i),Pe=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var At=Object.freeze({__proto__:null,ARIA_ATTR:He,ATTR_WHITESPACE:Ie,CUSTOM_ELEMENT:Pe,DATA_ATTR:ze,DOCTYPE_NAME:qe,ERB_EXPR:he,IS_ALLOWED_URI:je,IS_SCRIPT_OR_DATA:we,MUSTACHE_EXPR:z,TMPLIT_EXPR:de});const dt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},nn=function(){return typeof window>"u"?null:window},Wt=function(oe,be){if(typeof oe!="object"||typeof oe.createPolicy!="function")return null;let F=null;const H="data-tt-policy-suffix";be&&be.hasAttribute(H)&&(F=be.getAttribute(H));const J="dompurify"+(F?"#"+F:"");try{return oe.createPolicy(J,{createHTML(re){return re},createScriptURL(re){return re}})}catch{return console.warn("TrustedTypes policy "+J+" could not be created."),null}},Mn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ze(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn();const oe=Vt=>Ze(Vt);if(oe.version="3.2.3",oe.removed=[],!se||!se.document||se.document.nodeType!==dt.document)return oe.isSupported=!1,oe;let{document:be}=se;const F=be,H=F.currentScript,{DocumentFragment:J,HTMLTemplateElement:re,Node:ye,Element:xe,NodeFilter:Re,NamedNodeMap:P=se.NamedNodeMap||se.MozNamedAttrMap,HTMLFormElement:Q,DOMParser:ie,trustedTypes:ae}=se,ke=xe.prototype,Ce=B(ke,"cloneNode"),Ee=B(ke,"remove"),De=B(ke,"nextSibling"),Oe=B(ke,"childNodes"),We=B(ke,"parentNode");if(typeof re=="function"){const Vt=be.createElement("template");Vt.content&&Vt.content.ownerDocument&&(be=Vt.content.ownerDocument)}let tt,bt="";const{implementation:Pt,createNodeIterator:_t,createDocumentFragment:Kt,getElementsByTagName:sn}=be,{importNode:rn}=F;let on=Mn();oe.isSupported=typeof e=="function"&&typeof We=="function"&&Pt&&Pt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:vn,ERB_EXPR:Er,TMPLIT_EXPR:Ji,DATA_ATTR:ds,ARIA_ATTR:Gi,IS_SCRIPT_OR_DATA:No,ATTR_WHITESPACE:qn,CUSTOM_ELEMENT:Mr}=At;let{IS_ALLOWED_URI:Lr}=At,yn=null;const Kr=k({},[...K,...L,...$,...U,...Y]);let ir=null;const Ni=k({},[...X,...te,...le,...ee]);let tr=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$r=null,to=null,ge=!0,Le=!0,it=!1,Je=!0,Et=!1,an=!0,en=!1,xt=!1,et=!1,pn=!1,Cn=!1,Ut=!1,qt=!0,Sr=!1;const ci="user-content-";let Jt=!0,Xe=!1,ht={},Xn=null;const ni=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const Rr=k({},["audio","video","img","source","image","track"]);let nr=null;const Gt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vi="http://www.w3.org/1998/Math/MathML",Qi="http://www.w3.org/2000/svg",bi="http://www.w3.org/1999/xhtml";let js=bi,xo=!1,no=null;const Bo=k({},[vi,Qi,bi],p);let bs=k({},["mi","mo","mn","ms","mtext"]),Fs=k({},["annotation-xml"]);const zo=k({},["title","style","font","a","script"]);let hs=null;const ol=["application/xhtml+xml","text/html"],al="text/html";let Cr=null,es=null;const ro=be.createElement("form"),Os=function(Z){return Z instanceof RegExp||Z instanceof Function},Us=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(es&&es===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=O(Z),hs=ol.indexOf(Z.PARSER_MEDIA_TYPE)===-1?al:Z.PARSER_MEDIA_TYPE,Cr=hs==="application/xhtml+xml"?p:h,yn=w(Z,"ALLOWED_TAGS")?k({},Z.ALLOWED_TAGS,Cr):Kr,ir=w(Z,"ALLOWED_ATTR")?k({},Z.ALLOWED_ATTR,Cr):Ni,no=w(Z,"ALLOWED_NAMESPACES")?k({},Z.ALLOWED_NAMESPACES,p):Bo,nr=w(Z,"ADD_URI_SAFE_ATTR")?k(O(Gt),Z.ADD_URI_SAFE_ATTR,Cr):Gt,Ar=w(Z,"ADD_DATA_URI_TAGS")?k(O(Rr),Z.ADD_DATA_URI_TAGS,Cr):Rr,Xn=w(Z,"FORBID_CONTENTS")?k({},Z.FORBID_CONTENTS,Cr):ni,$r=w(Z,"FORBID_TAGS")?k({},Z.FORBID_TAGS,Cr):{},to=w(Z,"FORBID_ATTR")?k({},Z.FORBID_ATTR,Cr):{},ht=w(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,ge=Z.ALLOW_ARIA_ATTR!==!1,Le=Z.ALLOW_DATA_ATTR!==!1,it=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Je=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=Z.SAFE_FOR_TEMPLATES||!1,an=Z.SAFE_FOR_XML!==!1,en=Z.WHOLE_DOCUMENT||!1,pn=Z.RETURN_DOM||!1,Cn=Z.RETURN_DOM_FRAGMENT||!1,Ut=Z.RETURN_TRUSTED_TYPE||!1,et=Z.FORCE_BODY||!1,qt=Z.SANITIZE_DOM!==!1,Sr=Z.SANITIZE_NAMED_PROPS||!1,Jt=Z.KEEP_CONTENT!==!1,Xe=Z.IN_PLACE||!1,Lr=Z.ALLOWED_URI_REGEXP||je,js=Z.NAMESPACE||bi,bs=Z.MATHML_TEXT_INTEGRATION_POINTS||bs,Fs=Z.HTML_INTEGRATION_POINTS||Fs,tr=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Os(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tr.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Os(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tr.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tr.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(Le=!1),Cn&&(pn=!0),ht&&(yn=k({},Y),ir=[],ht.html===!0&&(k(yn,K),k(ir,X)),ht.svg===!0&&(k(yn,L),k(ir,te),k(ir,ee)),ht.svgFilters===!0&&(k(yn,$),k(ir,te),k(ir,ee)),ht.mathMl===!0&&(k(yn,U),k(ir,le),k(ir,ee))),Z.ADD_TAGS&&(yn===Kr&&(yn=O(yn)),k(yn,Z.ADD_TAGS,Cr)),Z.ADD_ATTR&&(ir===Ni&&(ir=O(ir)),k(ir,Z.ADD_ATTR,Cr)),Z.ADD_URI_SAFE_ATTR&&k(nr,Z.ADD_URI_SAFE_ATTR,Cr),Z.FORBID_CONTENTS&&(Xn===ni&&(Xn=O(Xn)),k(Xn,Z.FORBID_CONTENTS,Cr)),Jt&&(yn["#text"]=!0),en&&k(yn,["html","head","body"]),yn.table&&(k(yn,["tbody"]),delete $r.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=Z.TRUSTED_TYPES_POLICY,bt=tt.createHTML("")}else tt===void 0&&(tt=Wt(ae,H)),tt!==null&&typeof bt=="string"&&(bt=tt.createHTML(""));s&&s(Z),es=Z}},fa=k({},[...L,...$,...I]),qs=k({},[...U,...q]),ll=function(Z){let me=We(Z);(!me||!me.tagName)&&(me={namespaceURI:js,tagName:"template"});const Be=h(Z.tagName),gt=h(me.tagName);return no[Z.namespaceURI]?Z.namespaceURI===Qi?me.namespaceURI===bi?Be==="svg":me.namespaceURI===vi?Be==="svg"&&(gt==="annotation-xml"||bs[gt]):!!fa[Be]:Z.namespaceURI===vi?me.namespaceURI===bi?Be==="math":me.namespaceURI===Qi?Be==="math"&&Fs[gt]:!!qs[Be]:Z.namespaceURI===bi?me.namespaceURI===Qi&&!Fs[gt]||me.namespaceURI===vi&&!bs[gt]?!1:!qs[Be]&&(zo[Be]||!fa[Be]):!!(hs==="application/xhtml+xml"&&no[Z.namespaceURI]):!1},Vi=function(Z){d(oe.removed,{element:Z});try{We(Z).removeChild(Z)}catch{Ee(Z)}},Wi=function(Z,me){try{d(oe.removed,{attribute:me.getAttributeNode(Z),from:me})}catch{d(oe.removed,{attribute:null,from:me})}if(me.removeAttribute(Z),Z==="is")if(pn||Cn)try{Vi(me)}catch{}else try{me.setAttribute(Z,"")}catch{}},io=function(Z){let me=null,Be=null;if(et)Z="<remove></remove>"+Z;else{const Nt=g(Z,/^[\r\n\t ]+/);Be=Nt&&Nt[0]}hs==="application/xhtml+xml"&&js===bi&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const gt=tt?tt.createHTML(Z):Z;if(js===bi)try{me=new ie().parseFromString(gt,hs)}catch{}if(!me||!me.documentElement){me=Pt.createDocument(js,"template",null);try{me.documentElement.innerHTML=xo?bt:gt}catch{}}const mn=me.body||me.documentElement;return Z&&Be&&mn.insertBefore(be.createTextNode(Be),mn.childNodes[0]||null),js===bi?sn.call(me,en?"html":"body")[0]:en?me.documentElement:mn},ps=function(Z){return _t.call(Z.ownerDocument||Z,Z,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT|Re.SHOW_PROCESSING_INSTRUCTION|Re.SHOW_CDATA_SECTION,null)},jo=function(Z){return Z instanceof Q&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof P)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Hs=function(Z){return typeof ye=="function"&&Z instanceof ye};function fi(Vt,Z,me){f(Vt,Be=>{Be.call(oe,Z,me,es)})}const Ma=function(Z){let me=null;if(fi(on.beforeSanitizeElements,Z,null),jo(Z))return Vi(Z),!0;const Be=Cr(Z.nodeName);if(fi(on.uponSanitizeElement,Z,{tagName:Be,allowedTags:yn}),Z.hasChildNodes()&&!Hs(Z.firstElementChild)&&_(/<[/\w]/g,Z.innerHTML)&&_(/<[/\w]/g,Z.textContent)||Z.nodeType===dt.progressingInstruction||an&&Z.nodeType===dt.comment&&_(/<[/\w]/g,Z.data))return Vi(Z),!0;if(!yn[Be]||$r[Be]){if(!$r[Be]&&Yi(Be)&&(tr.tagNameCheck instanceof RegExp&&_(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be)))return!1;if(Jt&&!Xn[Be]){const gt=We(Z)||Z.parentNode,mn=Oe(Z)||Z.childNodes;if(mn&&gt){const Nt=mn.length;for(let In=Nt-1;In>=0;--In){const dr=Ce(mn[In],!0);dr.__removalCount=(Z.__removalCount||0)+1,gt.insertBefore(dr,De(Z))}}}return Vi(Z),!0}return Z instanceof xe&&!ll(Z)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&_(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Vi(Z),!0):(Et&&Z.nodeType===dt.text&&(me=Z.textContent,f([vn,Er,Ji],gt=>{me=v(me,gt," ")}),Z.textContent!==me&&(d(oe.removed,{element:Z.cloneNode()}),Z.textContent=me)),fi(on.afterSanitizeElements,Z,null),!1)},so=function(Z,me,Be){if(qt&&(me==="id"||me==="name")&&(Be in be||Be in ro))return!1;if(!(Le&&!to[me]&&_(ds,me))){if(!(ge&&_(Gi,me))){if(!ir[me]||to[me]){if(!(Yi(Z)&&(tr.tagNameCheck instanceof RegExp&&_(tr.tagNameCheck,Z)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Z))&&(tr.attributeNameCheck instanceof RegExp&&_(tr.attributeNameCheck,me)||tr.attributeNameCheck instanceof Function&&tr.attributeNameCheck(me))||me==="is"&&tr.allowCustomizedBuiltInElements&&(tr.tagNameCheck instanceof RegExp&&_(tr.tagNameCheck,Be)||tr.tagNameCheck instanceof Function&&tr.tagNameCheck(Be))))return!1}else if(!nr[me]){if(!_(Lr,v(Be,qn,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&Z!=="script"&&x(Be,"data:")===0&&Ar[Z])){if(!(it&&!_(No,v(Be,qn,"")))){if(Be)return!1}}}}}}return!0},Yi=function(Z){return Z!=="annotation-xml"&&g(Z,Mr)},oo=function(Z){fi(on.beforeSanitizeAttributes,Z,null);const{attributes:me}=Z;if(!me||jo(Z))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ir,forceKeepAttr:void 0};let gt=me.length;for(;gt--;){const mn=me[gt],{name:Nt,namespaceURI:In,value:dr}=mn,kr=Cr(Nt);let Ln=Nt==="value"?dr:y(dr);if(Be.attrName=kr,Be.attrValue=Ln,Be.keepAttr=!0,Be.forceKeepAttr=void 0,fi(on.uponSanitizeAttribute,Z,Be),Ln=Be.attrValue,Sr&&(kr==="id"||kr==="name")&&(Wi(Nt,Z),Ln=ci+Ln),an&&_(/((--!?|])>)|<\/(style|title)/i,Ln)){Wi(Nt,Z);continue}if(Be.forceKeepAttr||(Wi(Nt,Z),!Be.keepAttr))continue;if(!Je&&_(/\/>/i,Ln)){Wi(Nt,Z);continue}Et&&f([vn,Er,Ji],Jr=>{Ln=v(Ln,Jr," ")});const Ai=Cr(Z.nodeName);if(so(Ai,kr,Ln)){if(tt&&typeof ae=="object"&&typeof ae.getAttributeType=="function"&&!In)switch(ae.getAttributeType(Ai,kr)){case"TrustedHTML":{Ln=tt.createHTML(Ln);break}case"TrustedScriptURL":{Ln=tt.createScriptURL(Ln);break}}try{In?Z.setAttributeNS(In,Nt,Ln):Z.setAttribute(Nt,Ln),jo(Z)?Vi(Z):c(oe.removed)}catch{}}}fi(on.afterSanitizeAttributes,Z,null)},ul=function Vt(Z){let me=null;const Be=ps(Z);for(fi(on.beforeSanitizeShadowDOM,Z,null);me=Be.nextNode();)fi(on.uponSanitizeShadowNode,me,null),Ma(me),oo(me),me.content instanceof J&&Vt(me.content);fi(on.afterSanitizeShadowDOM,Z,null)};return oe.sanitize=function(Vt){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Be=null,gt=null,mn=null;if(xo=!Vt,xo&&(Vt="<!-->"),typeof Vt!="string"&&!Hs(Vt))if(typeof Vt.toString=="function"){if(Vt=Vt.toString(),typeof Vt!="string")throw A("dirty is not a string, aborting")}else throw A("toString is not a function");if(!oe.isSupported)return Vt;if(xt||Us(Z),oe.removed=[],typeof Vt=="string"&&(Xe=!1),Xe){if(Vt.nodeName){const dr=Cr(Vt.nodeName);if(!yn[dr]||$r[dr])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(Vt instanceof ye)me=io("<!---->"),Be=me.ownerDocument.importNode(Vt,!0),Be.nodeType===dt.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?me=Be:me.appendChild(Be);else{if(!pn&&!Et&&!en&&Vt.indexOf("<")===-1)return tt&&Ut?tt.createHTML(Vt):Vt;if(me=io(Vt),!me)return pn?null:Ut?bt:""}me&&et&&Vi(me.firstChild);const Nt=ps(Xe?Vt:me);for(;gt=Nt.nextNode();)Ma(gt),oo(gt),gt.content instanceof J&&ul(gt.content);if(Xe)return Vt;if(pn){if(Cn)for(mn=Kt.call(me.ownerDocument);me.firstChild;)mn.appendChild(me.firstChild);else mn=me;return(ir.shadowroot||ir.shadowrootmode)&&(mn=rn.call(F,mn,!0)),mn}let In=en?me.outerHTML:me.innerHTML;return en&&yn["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&_(qe,me.ownerDocument.doctype.name)&&(In="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+In),Et&&f([vn,Er,Ji],dr=>{In=v(In,dr," ")}),tt&&Ut?tt.createHTML(In):In},oe.setConfig=function(){let Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Us(Vt),xt=!0},oe.clearConfig=function(){es=null,xt=!1},oe.isValidAttribute=function(Vt,Z,me){es||Us({});const Be=Cr(Vt),gt=Cr(Z);return so(Be,gt,me)},oe.addHook=function(Vt,Z){typeof Z=="function"&&d(on[Vt],Z)},oe.removeHook=function(Vt){return c(on[Vt])},oe.removeHooks=function(Vt){on[Vt]=[]},oe.removeAllHooks=function(){on=Mn()},oe}var pe=Ze();return j4=pe,j4}var U4,fCe;function h7t(){return fCe||(fCe=1,U4=window.DOMPurify||(window.DOMPurify=cCe().default||cCe())),U4}var p7t=h7t();const m7t=sa(p7t);function xNe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function g7t(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const y7t=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],v7t=(e,t)=>{for(const[n,r]of t)e=e.replace(new RegExp(g7t(n),"g"),r);return e};function b7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const n=new Map([...y7t,...t.customReplacements]);return e=e.normalize(),e=v7t(e,n),e=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),e}const x7t=[["&"," and "],[""," unicorn "],[""," love "]],w7t=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),_7t=(e,t)=>{const n=xNe(t);return e.replace(new RegExp(`${n}{2,}`,"g"),t).replace(new RegExp(`^${n}|${n}$`,"g"),"")},E7t=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const n of e.preserveCharacters){if(n===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=xNe(n)}return new RegExp(`[^${t}]+`,"g")};function S7t(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t};const n=t.preserveLeadingUnderscore&&e.startsWith("_"),r=t.preserveTrailingDash&&e.endsWith("-"),i=new Map([...x7t,...t.customReplacements]);e=b7t(e,{customReplacements:i}),t.decamelize&&(e=w7t(e));const s=E7t(t);return t.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(s,t.separator),e=e.replace(/\\/g,""),t.separator&&(e=_7t(e,t.separator)),n&&(e=`_${e}`),r&&(e=`${e}-`),e}function A7t(e){e.core.ruler.push("curly_attributes",C7t)}function C7t(e){e.md.nav=[],e.md.attrs={keys:[],sections:{}},e.md.sections={};const t=e.tokens,n=[];let r;const i={len:0,contents:[],types:{}},s=[];let o=[],a=!1,l=0,u=!1,f=0;for(let c=0;c<t.length;c++){const d=t[c];if(d.tag==="p"){const{shouldContinue:p}=k7t(t,t[c+1]);if(p){c=c+2;continue}}if((wNe(d.type)||uNe[d.type])&&SNe(i,d),d.tag==="h1"||d.tag==="h2"){const p=D7t(c,t,o,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.tag==="h3"){const p=L7t(c,t,o,a,l,u,f,e,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,f=p.sectionStepsIndex}if(d.type==="html_block"){const p=d.content.match(lNe);if(!p){d.level=d.level+1,o.push(d);continue}r=ENe(i,p[1],p[2]),r&&uv(r,p[3])&&n.unshift(c)}d.type==="inline"&&(o=T7t(d,i,s,o,l,f,u)),d.level=d.level+1,o.push(d);const h=Cu(i.last.attrs,"as");i.last.markup==="#"&&u9t.includes(h)&&(o=R7t(o,e,i),c++)}a&&(_Ne(o,l),oI(o,l,e)),u&&oI(o,f,e),O7t(o,e.md),n.forEach(c=>t.splice(c,1)),e.tokens=o,e.md.nav=s||[]}function Wd(e,t,n,r,i,s=null){const o=new e.Token(i,t,n);return o.attrs=s,o.nesting=r,o}function wNe(e){return e.match(/_(open|start)$/)||e==="fence"||e==="code_block"}function k7t(e,t){const n=/\r\n|\r|\n/,r=/mode\s*=\s*(['"])fallback\1/g;let i=!1;if(r.test((t==null?void 0:t.content)||""))if(n.test(t.content)){const s=t.content.split(n);s.shift(),t.content=s.join(/\n/),t.children[0].type==="text"&&t.children.shift(),t.children.shift()}else i=!0;return{shouldContinue:i}}function T7t(e,t,n,r,i,s,o){let a;const l=[];if(e.children.forEach((u,f)=>{(wNe(u.type)||uNe[u.type]||u.type==="code_inline")&&SNe(t,u);const c=u.content.match(lNe);if(c){const d=ENe(t,c[1],c[2]);d&&uv(d,c[3])&&(l.unshift(f),a&&F7t(a,"content"))}u.type==="text"&&(a=u)}),t.last.tag==="h3"&&o&&s!==-1){const u=r[s];u.section=r[i].id,uv(u,t.last.attrStr)}if(t.last.tag==="h1"||t.last.tag==="h2"){const u=a&&a.content,f=Cu(t.last.attrs,"id"),c=Cu(t.last.attrs,"as"),d=Cu(t.last.attrs,"mode")||"container",h=Cu(t.last.attrs,"position")||"left",p=S7t(u||""),g=f||p,v=`section-${g}`,y=Cu(t.last.attrs,"nav")!=="false";t.last.tag==="h2"&&u&&n.push({title:u,id:v,state:y});const w=r[i],_=r[r.length-1],A=`.${d} .${h}`;w.attrs.push(["id",v]),w.id=v,c&&(_.tag=c,_.type="html_open",_.as=c,_.section=v,e.type="html_inline",e.content="",e.children=null,uv(_,`${a?`title='${a.content}'`:""}${t.last.attrStr} #${g}`),w.mode=d,w.position=h,uv(w,`#${v} .${w.attrs[0][1]} .section-custom`)),uv(w,A)}return e.children&&l.forEach(u=>e.children.splice(u,1)),r}function D7t(e,t,n,r,i,s,o,a,l){const u=t[e];if(u.type==="heading_close"&&(u.tag=n[n.length-2].tag,u.type=n[n.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){s&&(oI(n,o,a),s=!1,o=-1);const f=n[i].tag;_Ne(n,i),n.push(Wd(a,f,-1,-1,"html_close")),r=!1,i=-1}r||(n.push(Wd(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,i=n.length-1,l.last.as=!!t[e+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function L7t(e,t,n,r,i,s,o,a,l){return t[e].type==="heading_open"&&r&&n[i].mode==="tour"&&(s&&(n.push(Wd(a,"section-step",-1,-1,"html_close")),s=!1,o=-1),s||(n.push(Wd(a,"section-step",0,1,"html_open")),s=!0,o=n.length-1,l.last.as=!!t[e+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function R7t(e,t,n){return e.push(Wd(t,n.last.tag,1,-1,"html_close",null)),e.push(Wd(t,"h1",1,1,"html_open",null)),e.push(Wd(t,"h1",2,0,"html_inline",null)),e[e.length-1].content=Cu(n.last.attrs,"title"),e.push(Wd(t,"h1",1,-1,"html_close",null)),e}function _Ne(e,t){const n=e[t+1],r=Cu(n.attrs,"as"),i=Cu(n.attrs,"mode");r&&!i&&(e.splice(t+2,1),e.slice(t+3).forEach(s=>{s.level=1}),e.push(e[t+2]),e.splice(t+2,1))}function oI(e,t,n){const r=e[t].tag;e.push(Wd(n,r,-1,-1,"html_close"))}function Cu(e,t){var n;return((n=(e||[]).find(r=>r[0]===t))==null?void 0:n[1])||null}function ENe(e,t,n){if(!t)return e.last;n==="^"?n=1:typeof n=="string"?n=+n.slice(1):n=0;const i=(a9t[t.toLowerCase()]||[t.toLowerCase()]).find(o=>e.types[o]),s=e.types[i];if(s)return s[s.length-1-n]}function uv(e,t=""){var s,o;let n;for(e.attrStr=t;t.length>0;)if(n=t.match(/^\s*\.([a-zA-Z0-9\-_]+)/))ep(e,"class",n[1],{append:!0}),t=t.slice(n[0].length);else if(n=t.match(/^\s*#([a-zA-Z0-9\-_]+)/))ep(e,"id",n[1]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))ep(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))ep(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))ep(e,n[1],n[2]),t=t.slice(n[0].length);else if(n=t.match(/^\s*([a-zA-Z0-9\-_]+)/))ep(e,n[1],""),t=t.slice(n[0].length);else if(n=t.match(/^\s+/))t=t.slice(n[0].length);else if(n=t.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))ep(e,"as",n[1]),t=t.slice(n[0].length);else break;const r=Cu(e.attrs,"as"),i=Cu(e.attrs,"mode");return(o=(s=l9t[r])==null?void 0:s[i])==null||o.forEach(a=>{Cu(e.attrs,a[0])||(ep(e,a[0],a[1]),t=t.slice(a[0].length))}),!0}function ep(e,t,n,r={}){const i=e.attrIndex(t);t==="class"&&r.append&&i!==-1?e.attrs[i][1].includes(n)||(e.attrs[i][1]+=` ${n}`):i===-1?e.attrPush([t,n]):r.append?e.attrs[i][1]+=` ${n}`:e.attrs[i][1]=n}function SNe(e,t){const n=t.type.replace(/_(open|start)$/,"");e.types[n]||(e.types[n]=[]),e.types[n].push(t),e.last=t}function F7t(e,t){e[t]=e[t].replace(/\s*$/,"")}function O7t(e,t){e.forEach(n=>{const r=n.attrs||[];let i={};if(M7t(n,t),r.forEach(s=>{t.attrs.keys.includes(s[0])||t.attrs.keys.push(s[0]),i={...i,[s[0]]:pNe(s[1])},n.section&&($7t(n,s,t),I7t(n,s,t))}),r.length&&n.section){const s=n.tag==="section-step",o=s?` ${n.tag} `:"",a=n.section+o,l=Object.keys(t.attrs.sections).filter(c=>!!c.startsWith(a)).length+1,f=a+(s?l:"");t.attrs.sections={...t.attrs.sections,[f]:{...i,...s?{as:n.tag,mode:"tour"}:{}}}}})}function M7t(e,t){var n,r;e.section&&(e.tag==="section-step"&&!t.sections[e.section].steps&&(t.sections[e.section].steps=[]),(e.markup==="#"||e.markup==="##")&&(t.sections[e.section]=t.sections[e.section]||{}),(r=(n=t.sections[e.section])==null?void 0:n.steps)==null||r.push({}))}function $7t(e,t,n){e.markup==="##"&&(n.sections[e.section]={[t[0]]:xz(t[1]),...n.sections[e.section]})}function I7t(e,t,n){if(e.tag==="section-step"){const r=n.sections[e.section].steps,i=r.length-1,s=r[i];r[i]={[t[0]]:xz(t[1]),...s}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ANe(e){return typeof e>"u"||e===null}function P7t(e){return typeof e=="object"&&e!==null}function N7t(e){return Array.isArray(e)?e:ANe(e)?[]:[e]}function B7t(e,t){var n,r,i,s;if(t)for(s=Object.keys(t),n=0,r=s.length;n<r;n+=1)i=s[n],e[i]=t[i];return e}function z7t(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function j7t(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var U7t=ANe,q7t=P7t,H7t=N7t,G7t=z7t,V7t=j7t,W7t=B7t,po={isNothing:U7t,isObject:q7t,toArray:H7t,repeat:G7t,isNegativeZero:V7t,extend:W7t};function CNe(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function q2(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=CNe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}q2.prototype=Object.create(Error.prototype);q2.prototype.constructor=q2;q2.prototype.toString=function(t){return this.name+": "+CNe(this,t)};var Xa=q2;function q4(e,t,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-t>a&&(s=" ... ",t=r-a+s.length),n-r>a&&(o=" ...",n=r+a-o.length),{str:s+e.slice(t,n).replace(/\t/g,"")+o,pos:r-t+s.length}}function H4(e,t){return po.repeat(" ",t-e.length)+e}function Y7t(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(e.buffer);)i.push(s.index),r.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,u,f=Math.min(e.line+t.linesAfter,i.length).toString().length,c=t.maxLength-(t.indent+f+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)u=q4(e.buffer,r[o-l],i[o-l],e.position-(r[o]-r[o-l]),c),a=po.repeat(" ",t.indent)+H4((e.line-l+1).toString(),f)+" | "+u.str+`
`+a;for(u=q4(e.buffer,r[o],i[o],e.position,c),a+=po.repeat(" ",t.indent)+H4((e.line+1).toString(),f)+" | "+u.str+`
`,a+=po.repeat("-",t.indent+f+3+u.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)u=q4(e.buffer,r[o+l],i[o+l],e.position-(r[o]-r[o+l]),c),a+=po.repeat(" ",t.indent)+H4((e.line+l+1).toString(),f)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var X7t=Y7t,Z7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],K7t=["scalar","sequence","mapping"];function J7t(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function Q7t(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Z7t.indexOf(n)===-1)throw new Xa('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=J7t(t.styleAliases||null),K7t.indexOf(this.kind)===-1)throw new Xa('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var na=Q7t;function dCe(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}function eBt(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function aI(e){return this.extend(e)}aI.prototype.extend=function(t){var n=[],r=[];if(t instanceof na)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Xa("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Xa("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Xa("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof na))throw new Xa("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(aI.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=dCe(i,"implicit"),i.compiledExplicit=dCe(i,"explicit"),i.compiledTypeMap=eBt(i.compiledImplicit,i.compiledExplicit),i};var kNe=aI,TNe=new na("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),DNe=new na("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),LNe=new na("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),RNe=new kNe({explicit:[TNe,DNe,LNe]});function tBt(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function nBt(){return null}function rBt(e){return e===null}var FNe=new na("tag:yaml.org,2002:null",{kind:"scalar",resolve:tBt,construct:nBt,predicate:rBt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iBt(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function sBt(e){return e==="true"||e==="True"||e==="TRUE"}function oBt(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var ONe=new na("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iBt,construct:sBt,predicate:oBt,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function aBt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function lBt(e){return 48<=e&&e<=55}function uBt(e){return 48<=e&&e<=57}function cBt(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!aBt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!lBt(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!uBt(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function fBt(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function dBt(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!po.isNegativeZero(e)}var MNe=new na("tag:yaml.org,2002:int",{kind:"scalar",resolve:cBt,construct:fBt,predicate:dBt,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hBt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function pBt(e){return!(e===null||!hBt.test(e)||e[e.length-1]==="_")}function mBt(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var gBt=/^[-+]?[0-9]+e/;function yBt(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(po.isNegativeZero(e))return"-0.0";return n=e.toString(10),gBt.test(n)?n.replace("e",".e"):n}function vBt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||po.isNegativeZero(e))}var $Ne=new na("tag:yaml.org,2002:float",{kind:"scalar",resolve:pBt,construct:mBt,predicate:vBt,represent:yBt,defaultStyle:"lowercase"}),INe=RNe.extend({implicit:[FNe,ONe,MNe,$Ne]}),PNe=INe,NNe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),BNe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function bBt(e){return e===null?!1:NNe.exec(e)!==null||BNe.exec(e)!==null}function xBt(e){var t,n,r,i,s,o,a,l=0,u=null,f,c,d;if(t=NNe.exec(e),t===null&&(t=BNe.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(f=+t[10],c=+(t[11]||0),u=(f*60+c)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,r,i,s,o,a,l)),u&&d.setTime(d.getTime()-u),d}function wBt(e){return e.toISOString()}var zNe=new na("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:bBt,construct:xBt,instanceOf:Date,represent:wBt});function _Bt(e){return e==="<<"||e===null}var jNe=new na("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_Bt}),_z=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function EBt(e){if(e===null)return!1;var t,n,r=0,i=e.length,s=_z;for(n=0;n<i;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function SBt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,s=_z,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}function ABt(e){var t="",n=0,r,i,s=e.length,o=_z;for(r=0;r<s;r++)r%3===0&&r&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[r];return i=s%3,i===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):i===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):i===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function CBt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var UNe=new na("tag:yaml.org,2002:binary",{kind:"scalar",resolve:EBt,construct:SBt,predicate:CBt,represent:ABt}),kBt=Object.prototype.hasOwnProperty,TBt=Object.prototype.toString;function DBt(e){if(e===null)return!0;var t=[],n,r,i,s,o,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],o=!1,TBt.call(i)!=="[object Object]")return!1;for(s in i)if(kBt.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function LBt(e){return e!==null?e:[]}var qNe=new na("tag:yaml.org,2002:omap",{kind:"sequence",resolve:DBt,construct:LBt}),RBt=Object.prototype.toString;function FBt(e){if(e===null)return!0;var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],RBt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[t]=[i[0],r[i[0]]]}return!0}function OBt(e){if(e===null)return[];var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],i=Object.keys(r),s[t]=[i[0],r[i[0]]];return s}var HNe=new na("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:FBt,construct:OBt}),MBt=Object.prototype.hasOwnProperty;function $Bt(e){if(e===null)return!0;var t,n=e;for(t in n)if(MBt.call(n,t)&&n[t]!==null)return!1;return!0}function IBt(e){return e!==null?e:{}}var GNe=new na("tag:yaml.org,2002:set",{kind:"mapping",resolve:$Bt,construct:IBt}),Ez=PNe.extend({implicit:[zNe,jNe],explicit:[UNe,qNe,HNe,GNe]}),om=Object.prototype.hasOwnProperty,DT=1,VNe=2,WNe=3,LT=4,G4=1,PBt=2,hCe=3,NBt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,BBt=/[\x85\u2028\u2029]/,zBt=/[,\[\]\{\}]/,YNe=/^(?:!|!!|![a-z\-]+!)$/i,XNe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function pCe(e){return Object.prototype.toString.call(e)}function Mf(e){return e===10||e===13}function Jg(e){return e===9||e===32}function Dl(e){return e===9||e===32||e===10||e===13}function Cv(e){return e===44||e===91||e===93||e===123||e===125}function jBt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function UBt(e){return e===120?2:e===117?4:e===85?8:0}function qBt(e){return 48<=e&&e<=57?e-48:-1}function mCe(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function HBt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var ZNe=new Array(256),KNe=new Array(256);for(var ev=0;ev<256;ev++)ZNe[ev]=mCe(ev)?1:0,KNe[ev]=mCe(ev);function GBt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ez,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function JNe(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=X7t(n),new Xa(t,n)}function En(e,t){throw JNe(e,t)}function RT(e,t){e.onWarning&&e.onWarning.call(null,JNe(e,t))}var gCe={YAML:function(t,n,r){var i,s,o;t.version!==null&&En(t,"duplication of %YAML directive"),r.length!==1&&En(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&En(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&En(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&RT(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,s;r.length!==2&&En(t,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],YNe.test(i)||En(t,"ill-formed tag handle (first argument) of the TAG directive"),om.call(t.tagMap,i)&&En(t,'there is a previously declared suffix for "'+i+'" tag handle'),XNe.test(s)||En(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{En(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function zp(e,t,n,r){var i,s,o,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||En(e,"expected valid JSON character");else NBt.test(a)&&En(e,"the stream contains non-printable characters");e.result+=a}}function yCe(e,t,n,r){var i,s,o,a;for(po.isObject(n)||En(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;o<a;o+=1)s=i[o],om.call(t,s)||(t[s]=n[s],r[s]=!0)}function kv(e,t,n,r,i,s,o,a,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&En(e,"nested arrays are not supported inside keys"),typeof i=="object"&&pCe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&pCe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,f=s.length;u<f;u+=1)yCe(e,t,s[u],n);else yCe(e,t,s,n);else!e.json&&!om.call(n,i)&&om.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,En(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete n[i];return t}function Sz(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):En(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Js(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Jg(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Mf(i))for(Sz(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&RT(e,"deficient indentation"),r}function YR(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Dl(n)))}function Az(e,t){t===1?e.result+=" ":t>1&&(e.result+=po.repeat(`
`,t-1))}function VBt(e,t,n){var r,i,s,o,a,l,u,f,c=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),Dl(h)||Cv(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&Cv(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),Dl(i)||n&&Cv(i))break}else if(h===35){if(r=e.input.charCodeAt(e.position-1),Dl(r))break}else{if(e.position===e.lineStart&&YR(e)||n&&Cv(h))break;if(Mf(h))if(l=e.line,u=e.lineStart,f=e.lineIndent,Js(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=u,e.lineIndent=f;break}}a&&(zp(e,s,o,!1),Az(e,e.line-l),s=o=e.position,a=!1),Jg(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return zp(e,s,o,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function WBt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(zp(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Mf(n)?(zp(e,r,i,!0),Az(e,Js(e,!1,t)),r=i=e.position):e.position===e.lineStart&&YR(e)?En(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);En(e,"unexpected end of the stream within a single quoted scalar")}function YBt(e,t){var n,r,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return zp(e,n,e.position,!0),e.position++,!0;if(a===92){if(zp(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Mf(a))Js(e,!1,t);else if(a<256&&ZNe[a])e.result+=KNe[a],e.position++;else if((o=UBt(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=jBt(a))>=0?s=(s<<4)+o:En(e,"expected hexadecimal character");e.result+=HBt(s),e.position++}else En(e,"unknown escape sequence");n=r=e.position}else Mf(a)?(zp(e,n,r,!0),Az(e,Js(e,!1,t)),n=r=e.position):e.position===e.lineStart&&YR(e)?En(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}En(e,"unexpected end of the stream within a double quoted scalar")}function XBt(e,t){var n=!0,r,i,s,o=e.tag,a,l=e.anchor,u,f,c,d,h,p=Object.create(null),g,v,x,y;if(y=e.input.charCodeAt(e.position),y===91)f=93,h=!1,a=[];else if(y===123)f=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(Js(e,!0,t),y=e.input.charCodeAt(e.position),y===f)return e.position++,e.tag=o,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?y===44&&En(e,"expected the node content, but found ','"):En(e,"missed comma between flow collection entries"),v=g=x=null,c=d=!1,y===63&&(u=e.input.charCodeAt(e.position+1),Dl(u)&&(c=d=!0,e.position++,Js(e,!0,t))),r=e.line,i=e.lineStart,s=e.position,z1(e,t,DT,!1,!0),v=e.tag,g=e.result,Js(e,!0,t),y=e.input.charCodeAt(e.position),(d||e.line===r)&&y===58&&(c=!0,y=e.input.charCodeAt(++e.position),Js(e,!0,t),z1(e,t,DT,!1,!0),x=e.result),h?kv(e,a,p,v,g,x,r,i,s):c?a.push(kv(e,null,p,v,g,x,r,i,s)):a.push(g),Js(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(n=!0,y=e.input.charCodeAt(++e.position)):n=!1}En(e,"unexpected end of the stream within a flow collection")}function ZBt(e,t){var n,r,i=G4,s=!1,o=!1,a=t,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)r=!1;else if(c===62)r=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)G4===i?i=c===43?hCe:PBt:En(e,"repeat of a chomping mode identifier");else if((f=qBt(c))>=0)f===0?En(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?En(e,"repeat of an indentation width identifier"):(a=t+f-1,o=!0);else break;if(Jg(c)){do c=e.input.charCodeAt(++e.position);while(Jg(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!Mf(c)&&c!==0)}for(;c!==0;){for(Sz(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Mf(c)){l++;continue}if(e.lineIndent<a){i===hCe?e.result+=po.repeat(`
`,s?1+l:l):i===G4&&s&&(e.result+=`
`);break}for(r?Jg(c)?(u=!0,e.result+=po.repeat(`
`,s?1+l:l)):u?(u=!1,e.result+=po.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=po.repeat(`
`,l):e.result+=po.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,n=e.position;!Mf(c)&&c!==0;)c=e.input.charCodeAt(++e.position);zp(e,n,e.position,!1)}return!0}function vCe(e,t){var n,r=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,En(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Dl(o))));){if(a=!0,e.position++,Js(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,z1(e,t,WNe,!1,!0),s.push(e.result),Js(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)En(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function KBt(e,t,n){var r,i,s,o,a,l,u=e.tag,f=e.anchor,c={},d=Object.create(null),h=null,p=null,g=null,v=!1,x=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),y=e.input.charCodeAt(e.position);y!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,En(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&Dl(r))y===63?(v&&(kv(e,c,d,h,p,null,o,a,l),h=p=g=null),x=!0,v=!0,i=!0):v?(v=!1,i=!0):En(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=r;else{if(o=e.line,a=e.lineStart,l=e.position,!z1(e,n,VNe,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);Jg(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),Dl(y)||En(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(kv(e,c,d,h,p,null,o,a,l),h=p=g=null),x=!0,v=!1,i=!1,h=e.tag,p=e.result;else if(x)En(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=f,!0}else if(x)En(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=f,!0}if((e.line===s||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,l=e.position),z1(e,t,LT,!0,i)&&(v?p=e.result:g=e.result),v||(kv(e,c,d,h,p,g,o,a,l),h=p=g=null),Js(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)En(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&kv(e,c,d,h,p,null,o,a,l),x&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=c),x}function JBt(e){var t,n=!1,r=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&En(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):En(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Dl(o);)o===33&&(r?En(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),YNe.test(i)||En(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),zBt.test(s)&&En(e,"tag suffix cannot contain flow indicator characters")}s&&!XNe.test(s)&&En(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{En(e,"tag name is malformed: "+s)}return n?e.tag=s:om.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:En(e,'undeclared tag handle "'+i+'"'),!0}function QBt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&En(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Dl(n)&&!Cv(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&En(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ezt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Dl(r)&&!Cv(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&En(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),om.call(e.anchorMap,n)||En(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Js(e,!0,-1),!0}function z1(e,t,n,r,i){var s,o,a,l=1,u=!1,f=!1,c,d,h,p,g,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=LT===n||WNe===n,r&&Js(e,!0,-1)&&(u=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;JBt(e)||QBt(e);)Js(e,!0,-1)?(u=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||LT===n)&&(DT===n||VNe===n?g=t:g=t+1,v=e.position-e.lineStart,l===1?a&&(vCe(e,v)||KBt(e,v,g))||XBt(e,g)?f=!0:(o&&ZBt(e,g)||WBt(e,g)||YBt(e,g)?f=!0:ezt(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&En(e,"alias node should not have any properties")):VBt(e,g,DT===n)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=a&&vCe(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&En(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,d=e.implicitTypes.length;c<d;c+=1)if(p=e.implicitTypes[c],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(om.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,h=e.typeMap.multi[e.kind||"fallback"],c=0,d=h.length;c<d;c+=1)if(e.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||En(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&En(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):En(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function tzt(e){var t=e.position,n,r,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Js(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!Dl(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&En(e,"directive name must not be less than one character in length");o!==0;){for(;Jg(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Mf(o));break}if(Mf(o))break;for(n=e.position;o!==0&&!Dl(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}o!==0&&Sz(e),om.call(gCe,r)?gCe[r](e,r,i):RT(e,'unknown document directive "'+r+'"')}if(Js(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Js(e,!0,-1)):s&&En(e,"directives end mark is expected"),z1(e,e.lineIndent-1,LT,!1,!0),Js(e,!0,-1),e.checkLineBreaks&&BBt.test(e.input.slice(t,e.position))&&RT(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&YR(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Js(e,!0,-1));return}if(e.position<e.length-1)En(e,"end of the stream or a document separator is expected");else return}function QNe(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new GBt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,En(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)tzt(n);return n.documents}function nzt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=QNe(e,n);if(typeof t!="function")return r;for(var i=0,s=r.length;i<s;i+=1)t(r[i])}function rzt(e,t){var n=QNe(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Xa("expected a single document in the stream, but found more")}}var izt=nzt,szt=rzt,e9e={loadAll:izt,load:szt},t9e=Object.prototype.toString,n9e=Object.prototype.hasOwnProperty,Cz=65279,ozt=9,H2=10,azt=13,lzt=32,uzt=33,czt=34,lI=35,fzt=37,dzt=38,hzt=39,pzt=42,r9e=44,mzt=45,FT=58,gzt=61,yzt=62,vzt=63,bzt=64,i9e=91,s9e=93,xzt=96,o9e=123,wzt=124,a9e=125,Oa={};Oa[0]="\\0";Oa[7]="\\a";Oa[8]="\\b";Oa[9]="\\t";Oa[10]="\\n";Oa[11]="\\v";Oa[12]="\\f";Oa[13]="\\r";Oa[27]="\\e";Oa[34]='\\"';Oa[92]="\\\\";Oa[133]="\\N";Oa[160]="\\_";Oa[8232]="\\L";Oa[8233]="\\P";var _zt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ezt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Szt(e,t){var n,r,i,s,o,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&n9e.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[o]=a;return n}function Azt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Xa("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+po.repeat("0",r-t.length)+t}var Czt=1,G2=2;function kzt(e){this.schema=e.schema||Ez,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=po.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Szt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?G2:Czt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function bCe(e,t){for(var n=po.repeat(" ",t),r=0,i=-1,s="",o,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(o=e.slice(r),r=a):(o=e.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function uI(e,t){return`
`+po.repeat(" ",e.indent*t)}function Tzt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function OT(e){return e===lzt||e===ozt}function V2(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Cz||65536<=e&&e<=1114111}function xCe(e){return V2(e)&&e!==Cz&&e!==azt&&e!==H2}function wCe(e,t,n){var r=xCe(e),i=r&&!OT(e);return(n?r:r&&e!==r9e&&e!==i9e&&e!==s9e&&e!==o9e&&e!==a9e)&&e!==lI&&!(t===FT&&!i)||xCe(t)&&!OT(t)&&e===lI||t===FT&&i}function Dzt(e){return V2(e)&&e!==Cz&&!OT(e)&&e!==mzt&&e!==vzt&&e!==FT&&e!==r9e&&e!==i9e&&e!==s9e&&e!==o9e&&e!==a9e&&e!==lI&&e!==dzt&&e!==pzt&&e!==uzt&&e!==wzt&&e!==gzt&&e!==yzt&&e!==hzt&&e!==czt&&e!==fzt&&e!==bzt&&e!==xzt}function Lzt(e){return!OT(e)&&e!==FT}function g_(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function l9e(e){var t=/^\n* /;return t.test(e)}var u9e=1,cI=2,c9e=3,f9e=4,cv=5;function Rzt(e,t,n,r,i,s,o,a){var l,u=0,f=null,c=!1,d=!1,h=r!==-1,p=-1,g=Dzt(g_(e,0))&&Lzt(g_(e,e.length-1));if(t||o)for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=g_(e,l),!V2(u))return cv;g=g&&wCe(u,f,a),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(u=g_(e,l),u===H2)c=!0,h&&(d=d||l-p-1>r&&e[p+1]!==" ",p=l);else if(!V2(u))return cv;g=g&&wCe(u,f,a),f=u}d=d||h&&l-p-1>r&&e[p+1]!==" "}return!c&&!d?g&&!o&&!i(e)?u9e:s===G2?cv:cI:n>9&&l9e(e)?cv:o?s===G2?cv:cI:d?f9e:c9e}function Fzt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===G2?'""':"''";if(!e.noCompatMode&&(_zt.indexOf(t)!==-1||Ezt.test(t)))return e.quotingType===G2?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(u){return Tzt(e,u)}switch(Rzt(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!r,i)){case u9e:return t;case cI:return"'"+t.replace(/'/g,"''")+"'";case c9e:return"|"+_Ce(t,e.indent)+ECe(bCe(t,s));case f9e:return">"+_Ce(t,e.indent)+ECe(bCe(Ozt(t,o),s));case cv:return'"'+Mzt(t)+'"';default:throw new Xa("impossible error: invalid scalar style")}}()}function _Ce(e,t){var n=l9e(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),s=i?"+":r?"":"-";return n+s+`
`}function ECe(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Ozt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,n.lastIndex=u,SCe(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=n.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+SCe(l,t),i=s}return r}function SCe(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function Mzt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=g_(e,i),r=Oa[n],!r&&V2(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Azt(n);return t}function $zt(e,t,n){var r="",i=e.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],e.replacer&&(a=e.replacer.call(n,String(s),a)),(mh(e,t,a,!1,!1)||typeof a>"u"&&mh(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function ACe(e,t,n,r){var i="",s=e.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],e.replacer&&(l=e.replacer.call(n,String(o),l)),(mh(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&mh(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=uI(e,t)),e.dump&&H2===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function Izt(e,t,n){var r="",i=e.tag,s=Object.keys(n),o,a,l,u,f;for(o=0,a=s.length;o<a;o+=1)f="",r!==""&&(f+=", "),e.condenseFlow&&(f+='"'),l=s[o],u=n[l],e.replacer&&(u=e.replacer.call(n,l,u)),mh(e,t,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),mh(e,t,u,!1,!1)&&(f+=e.dump,r+=f));e.tag=i,e.dump="{"+r+"}"}function Pzt(e,t,n,r){var i="",s=e.tag,o=Object.keys(n),a,l,u,f,c,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Xa("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!r||i!=="")&&(d+=uI(e,t)),u=o[a],f=n[u],e.replacer&&(f=e.replacer.call(n,u,f)),mh(e,t+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&H2===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=uI(e,t)),mh(e,t+1,f,!0,c)&&(e.dump&&H2===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=s,e.dump=i||"{}"}function CCe(e,t,n){var r,i,s,o,a,l;for(i=n?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,t9e.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(n9e.call(a.represent,l))r=a.represent[l](t,l);else throw new Xa("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function mh(e,t,n,r,i,s,o){e.tag=null,e.dump=n,CCe(e,n,!1)||CCe(e,n,!0);var a=t9e.call(e.dump),l=r,u;r&&(r=e.flowLevel<0||e.flowLevel>t);var f=a==="[object Object]"||a==="[object Array]",c,d;if(f&&(c=e.duplicates.indexOf(n),d=c!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(f&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(Pzt(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(Izt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?ACe(e,t-1,e.dump,i):ACe(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):($zt(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Fzt(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Xa("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function Nzt(e,t){var n=[],r=[],i,s;for(fI(e,n,r),i=0,s=r.length;i<s;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(s)}function fI(e,t,n){var r,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)fI(e[i],t,n);else for(r=Object.keys(e),i=0,s=r.length;i<s;i+=1)fI(e[r[i]],t,n)}function Bzt(e,t){t=t||{};var n=new kzt(t);n.noRefs||Nzt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),mh(n,0,r,!0,!0)?n.dump+`
`:""}var zzt=Bzt,jzt={dump:zzt};function kz(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Uzt=na,qzt=kNe,Hzt=RNe,Gzt=INe,Vzt=PNe,Wzt=Ez,Yzt=e9e.load,Xzt=e9e.loadAll,Zzt=jzt.dump,Kzt=Xa,Jzt={binary:UNe,float:$Ne,map:LNe,null:FNe,pairs:HNe,set:GNe,timestamp:zNe,bool:ONe,int:MNe,merge:jNe,omap:qNe,seq:DNe,str:TNe},Qzt=kz("safeLoad","load"),ejt=kz("safeLoadAll","loadAll"),tjt=kz("safeDump","dump"),njt={Type:Uzt,Schema:qzt,FAILSAFE_SCHEMA:Hzt,JSON_SCHEMA:Gzt,CORE_SCHEMA:Vzt,DEFAULT_SCHEMA:Wzt,load:Yzt,loadAll:Xzt,dump:Zzt,YAMLException:Kzt,types:Jzt,safeLoad:Qzt,safeLoadAll:ejt,safeDump:tjt};function rjt(e){e.core.ruler.before("normalize","extract-config",t=>{var i;const n=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=t.src.match(n);if(e.config={versionCheck:((i=e.config)==null?void 0:i.versionCheck)||!1},r)try{e.config=njt.load(r[1]),t.src=t.src.replace(r[0],"")}catch(s){return console.error("Error parsing frontmatter:",s),null}e.config.versionCheck||(e.config.version=Number(a7t(e.config.version)),e.config.versionCheck=!0)})}const ijt=`
${iS}
${IR}
${MB}
${qB}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .hamburger-menu {
    display: none;
    cursor: pointer;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTUsOS41TDcuNSwxNEgyLjVMNSw5LjVNMyw0SDdWOEgzVjRNNSwyMEEyLDIgMCAwLDAgNywxOEEyLDIgMCAwLDAgNSwxNkEyLDIgMCAwLDAgMywxOEEyLDIgMCAwLDAgNSwyME05LDVWN0gyMVY1SDlNOSwxOUgyMVYxN0g5VjE5TTksMTNIMjFWMTFIOVYxM1oiIC8+PC9zdmc+");
    background-repeat: no-repeat;
    background-size: contain;
    width: 30px;
    height: 30px;
  }
  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .nav-overlay {
    display: none;
  }
  @media (max-width: 768px) {
    .navigation {
      padding: 0px;
      height: 50px;
    }
    .navigation .container {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    .hamburger-menu {
      display: flex;
    }
    .navigation .container ul {
      position: absolute;
      top: 50px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 99999999;
      display: none;
      flex-direction: column;
    }
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99999998;
      cursor: pointer;
    }
    .navigation .container ul.show, .nav-overlay.show {
      display: flex !important;
    }
    .nav-list li {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    .navigation .container ul li {
      width: 100%;
      text-align: center;
    } 
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p,
  .story-telling code {
    --font-size: 1.1rem;
  }
  .story-telling p {
    display: block;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map,
  .story-telling .tour img,
  .story-telling .tour video {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
    object-fit: cover;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var oD,h9e;class d9e extends Zr{constructor(){super();gn(this,oD);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableAutosave=!1,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const n=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&hNe(this),v9t(this),dNe(this),y9t(n,r,this)}updateErrors(n){const r=this.renderRoot.querySelector(".editor-error");r&&(n.length?(r.style.display="block",r.querySelector("ul").innerHTML=n.map(i=>`<li><strong>${i.ref}</strong>: ${i.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const n=this.isNavigation?"partial-height":"";return Ke`
      <div class="editor-wrapper ${n}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${S9t}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${dn(this,oD,h9e)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}oD=new WeakSet,h9e=function(n){const r=this.renderRoot.querySelector(".editor-wrapper"),i=this.storyId?`#${this.storyId}`:"",s=document.querySelector(`eox-storytelling${i}`);n.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),s.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),s.setAttribute("show-editor","close"))},tn(d9e,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean}});customElements.define("eox-storytelling-editor",d9e);const Tg=Uu({html:!0});Tg.use(A7t).use(rjt);var uc,Xv,eE,aD,p9e;class sjt extends Zr{constructor(){super();gn(this,aD);gn(this,uc);gn(this,Xv,{});gn(this,eE,null);Ui(this,uc,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.disableAutosave=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(n){if(n.has("markdownURL")&&this.markdownURL&&(this.markdown=await o9t(this.markdownURL)||this.markdown,this.requestUpdate()),n.has("markdown")){this.markdown&&this.dispatchEvent(new CustomEvent("changed",{detail:this.markdown}));const r=Tg.render(this.markdown);if(d7t(Tg.attrs.sections,this),Ui(this,Xv,Tg.config),typeof $t(this,Xv).nav=="boolean"&&(this.showNav=$t(this,Xv).nav),this.showNav&&(this.nav=Tg.nav),Ui(this,uc,q9t(m7t.sanitize(r,{CUSTOM_ELEMENT_HANDLING:s7t(Tg),ADD_TAGS:f9t}),Tg.sections,dn(this,aD,p9e).bind(this),this)),Ui(this,uc,G9t($t(this,uc),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const s=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),o=s.querySelector("eox-jsonform");this.markdown!==(o==null?void 0:o.value.Story)&&(s.markdown=this.markdown)}this.requestUpdate()}n.has("nav")&&i7t(this,".navigation a")}handleSlotChange(){const n=this.shadowRoot.querySelector("slot");if(n){const r=n.assignedNodes({flatten:!0});this.markdown=r.map(i=>i.textContent?i.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){Ui(this,eE,Y0(n=>{n.detail&&(this.markdown=n.detail.Story,this.requestUpdate())},1e3)),this.disableAutosave||E9t(this),o7t(),$t(this,uc)===void 0&&await this.waitForHtmlInitialization(),mNe(this)}async waitForHtmlInitialization(){const n=r=>new Promise(i=>setTimeout(i,r));for(;$t(this,uc)===void 0;)await n(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return Ke`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&ijt}
        ${!this.unstyled&&RR}
      </style>

      <div class="story-telling ${n}">
        <div>${Un($t(this,uc),()=>Ke`${$t(this,uc)}`)}</div>
        ${Un(this.showEditor!==void 0,()=>Ke`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${$t(this,eE)}
              .markdown=${this.markdown}
              .disableAutosave=${this.disableAutosave}
            ></eox-storytelling-editor>
          `)}
      </div>

      ${Un(this.addCustomSectionIndex>-1,()=>Ke`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${Un(this.selectedCustomElement,()=>Ke`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>rCe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${N9t.map(r=>Ke`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(i=>Ke`<div
                            @click=${()=>rCe(this.markdown,this.addCustomSectionIndex,i.markdown,i.fields,!1,this)}
                            class="grid-item"
                          >
                            <icon id="${i.id}"></icon>
                            <p>${i.name}</p>
                            <style>
                              icon#${i.id}::before {
                                content: url("${i.icon}");
                              }
                            </style>
                          </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}uc=new WeakMap,Xv=new WeakMap,eE=new WeakMap,aD=new WeakSet,p9e=function(n){this.dispatchEvent(new CustomEvent("init",{detail:n}))};customElements.define("eox-storytelling",sjt);const ojt=`
:host {
  display: block;
}
`,ajt=`
:host, :root {
  --navigation-button-display: inline-flex;
}

* {
  font-family: Roboto, sans-serif;
}

${iS}
${qB}

[part=controls] {
  display: flex;
  align-items: center;
  gap: 8px;
}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous,
button.icon.next {
  display: var(--navigation-button-display);
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right-circle%3C/title%3E%3Cpath fill='%23004170' d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z' /%3E%3C/svg%3E");
}
`;class ljt extends Zr{static get properties(){return{width:{type:Number},steps:{type:Array}}}constructor(){super(),this.width=0,this.steps=[],this.height=6,this.svgWidth=0,this._yearMarks=[],this._years=[],this._sliderTicks=[]}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize()}updated(t){t.has("steps")&&(this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize())}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}groupDatesByYear(){const t=[];return this.steps.forEach(n=>{const i=kc(n).year();let s=t.find(o=>o.year===i);s||(s={year:i,dates:[]},t.push(s)),s.dates.push(n)}),t}preprocessDates(){const t=[];this.steps.forEach(n=>{const i=kc(n).year();let s=t.find(o=>o.year===i);s||(s={year:i,ratio:0,dates:[]},t.push(s)),s.dates.push({date:n,isYearMarker:s.dates.length===0})});for(let n of t)n.ratio=n.dates.length/this.steps.length;return t}get sliderTicks(){return this._sliderTicks}set sliderTicks(t){this._sliderTicks=t,this.requestUpdate()}calculateYearBars(){return this._years.flatMap((r,i)=>{const s=this.steps.indexOf(r.dates[0].date)/(this.steps.length-1)*this.width,o=this.steps.indexOf(r.dates[r.dates.length-1].date)/(this.steps.length-1)*this.width,a=Math.max(0,o-s-2),l=[];return l.push(Fy`
            <rect
              key=${i}
              x=${s+2/2} // Add half the spacing to the start position
              y="0"
              width=${a}
              height="6"
              fill="#7596A2"
            ></rect>
        `),a>=30&&l.push(Fy`
                <text
                  key=${`label-${i}`}
                  x=${s+16}
                  y="26"
                  fill="#555"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${r.year}
                </text>
            `),l})}calculateIndividualTicks(){return this._years.flatMap((t,n)=>{const r=this.steps.length,i=Math.max(1,Math.floor(r/this.width));return t.dates.filter((s,o)=>o%i===0).map((s,o)=>{const l=this.steps.indexOf(s.date)/(this.steps.length-1)*this.width,u=[];return u.push(Fy`
                <line
                  key=${n}-${o}
                  x1=${l}
                  y1="0"
                  x2=${l}
                  y2=${s.isYearMarker?12:6}
                  stroke=${s.isYearMarker?"#222":"#7596A2"}
                  stroke-width="1"
                ></line>
              `),s.isYearMarker&&this.density>.03&&this.density<.5&&n%2==0&&u.push(Fy`
                  <text
                    key=${`label-${n}`}
                    x=${l+16}
                    y="30"
                    fill="#555"
                    font-size="14"
                    text-anchor="middle"
                  >
                    ${t.year}
                  </text>
                `),u})})}get density(){return this.steps.length/this.width}calculateSliderTicks(){if(this.density<=.5)return this.calculateIndividualTicks();if(this.density>.5&&this.density<10)return this.calculateYearBars();if(this.density>=10)return this.calculateDecadeBars()}calculateDecadeBars(){const r=this._years.reduce((s,o)=>{const a=Math.floor(o.year/10)*10;return s[a]||(s[a]=[]),s[a].push(...o.dates),s},{});return Object.keys(r).flatMap((s,o)=>{const a=this.steps.indexOf(r[s][0].date)/(this.steps.length-1)*this.width,l=this.steps.indexOf(r[s][r[s].length-1].date)/(this.steps.length-1)*this.width,u=Math.max(0,l-a-2),f=[];return f.push(Fy`
            <rect
              key=${`decade-${o}`}
              x=${a+2/2}
              y="0"
              width=${u}
              height="6"
              fill="#555"
            ></rect>
        `),u>=30&&f.push(Fy`
                <text
                  key=${`decade-label-${o}`}
                  x=${a+18}
                  y="26"
                  fill="#333"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${s}
                </text>
            `),f})}get lines(){const t=this.numLines>this.width/2?this.width/2:this.numLines,n=this.width/(t-1);return Array.from({length:this.numLines},(r,i)=>i*n)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){return this._yearMarks}set yearMarks(t){this._yearMarks=t,this.requestUpdate()}get years(){return this._years}set years(t){this._years=t,this.requestUpdate()}calculateYearMarks(){this._years=this.preprocessDates(),this.lines.forEach((t,n)=>{kc(this.steps[n]).year()})}isYearLine(t){return this._yearMarks.some(r=>Math.abs(r.position-t)<1)}render(){return Ke`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.sliderTicks}
        </svg>
      </div>
    `}}customElements.define("eox-sliderticks",ljt);var u3={exports:{}},ujt=u3.exports,kCe;function cjt(){return kCe||(kCe=1,function(e,t){(function(n,r){e.exports=r()})(ujt,function(){return function(n,r,i){r.prototype.dayOfYear=function(s){var o=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})}(u3)),u3.exports}var fjt=cjt();const djt=sa(fjt);var c3={exports:{}},hjt=c3.exports,TCe;function pjt(){return TCe||(TCe=1,function(e,t){(function(n,r){e.exports=r()})(hjt,function(){var n="day";return function(r,i,s){var o=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var f,c,d,h,p=o(this),g=(f=this.isoWeekYear(),c=this.$u,d=(c?s.utc:s)().year(f).startOf("year"),h=4-d.isoWeekday(),d.isoWeekday()>4&&(h+=7),d.add(h,n));return p.diff(g,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,f){var c=this.$utils(),d=!!c.u(f)||f;return c.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,f)}}})}(c3)),c3.exports}var mjt=pjt();const gjt=sa(mjt);kc.extend(djt);kc.extend(gjt);class yjt extends Zr{static get properties(){return{controlProperty:{type:String,attribute:"control-property"},controlValues:{type:Array,attribute:"control-values"},for:{type:String},layer:{type:String},slider:{type:Boolean},navigation:{type:Boolean},_originalParams:{type:Object},play:{type:Boolean,attribute:"play"},displayFormat:{type:String,attribute:"display-format"},currentStep:{type:String,attribute:"current-step"},_animationInterval:{state:!0},_controlSource:{state:!0},_isAnimationPlaying:{state:!0},_newStepIndex:{state:!0},_eoxMap:{state:!0},_width:{state:!0},unstyled:{type:Boolean}}}constructor(){super(),this.controlValues=[],this._newStepIndex=0,this.unstyled=!1,this.play=!1,this.navigation=!0,this.slider=!1,this.for="eox-map",this.layer="",this.controlProperty=void 0,this._eoxMap=void 0,this._width=300,window.addEventListener("resize",()=>{this._width=this.clientWidth}),this.displayFormat=void 0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(t){t?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=t,this.requestUpdate()}setConfig(t){this.layer=t.layer??this.layer,this.controlProperty=t.controlProperty??this.controlProperty,this.controlValues=t.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(t){const n=this.controlValues.findIndex(r=>r===t);n>-1?this._newStepIndex=n:console.error(`Unable to find step "${t}" in available times!`)}firstUpdated(){this.updateMap()}updated(t){t.has("for")&&this.updateMap()}updateMap(){const t=e2(this.for);if(t){const n=t;this.eoxMap=n}}get eoxMap(){return this._eoxMap}set eoxMap(t){const n=this._eoxMap;this._eoxMap=t,this.requestUpdate("eoxMap",n)}_updateStep(t=1){var n;t&&(this._newStepIndex=this._newStepIndex+t,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),this.layer&&this.for&&((n=this._controlSource)==null||n.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]})),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}})))}getFlatLayersArray(t){const n=[];n.push(...t);let r=n.filter(i=>i instanceof w3);for(;r.length;){const i=[];for(let s=0,o=r.length;s<o;s++){const a=r[s].getLayers().getArray();n.push(...a),i.push(...a.filter(l=>l instanceof w3))}r=i}return n}render(){if(this.layer&&this.for){const n=e2(this.for).map;n.once("loadend",()=>{if(!this._originalParams){const i=this.getFlatLayersArray(n.getLayers().getArray()).find(s=>s.get("id")===this.layer);this._controlSource=i.getSource(),this._originalParams=this._controlSource.getParams()}})}return Ke`
      <style>
        ${ojt}
        ${!this.unstyled&&ajt}
      </style>
      <main>
        <div id="controls" part="controls">
          ${this.navigation?Ke`
                <button
                  part="previous"
                  class="icon previous"
                  @click="${()=>this.previous()}"
                >
                  <
                </button>
              `:qr}
          <span part="current">
            ${this.displayFormat?kc(this.controlValues[this._newStepIndex]).format(this.displayFormat):this.controlValues[this._newStepIndex]}
          </span>
          ${this.navigation?Ke`
                <button
                  part="next"
                  class="icon next"
                  @click="${()=>this.next()}"
                >
                  >
                </button>
              `:qr}
          ${this.play?Ke`
                <button
                  part="play"
                  class="small icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `:qr}
        </div>
        <div>
          ${this.slider?Ke`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(n=>n===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    .width="${this._width}"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}
        </div>
      </main>
    `}}customElements.define("eox-timecontrol",yjt);const m9e=(e,t)=>{var r;let{privateFields:n=!0}=t;return n||(r=e==null?void 0:e.modules)==null||r.forEach(i=>{var s;(s=i==null?void 0:i.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),eze(e)};m9e(jKe,{privateFields:!1});const vjt={parameters:{docs:{toc:!0,page:UKe,source:{transform:(e,t)=>{const n=t.undecoratedStoryFn(t);let r;const i={};return n.strings.map((s,o)=>{var f,c;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(c=(f=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:f[0])==null?void 0:c.replaceAll(" ",""),u=n.values[o];l&&u&&(i[r]||(i[r]={}),i[r][l]=u)}).filter(s=>s),Object.keys(i).forEach(s=>{e=e.replace(`<${s}`,`<${s}
  ${Object.keys(i[s]).map((o,a)=>`.${o}='\${${typeof i[s][o]=="string"?i[s][o]:JSON.stringify(i[s][o])}}'`).join(`
  `)}
  `)}),e}}}}},IUt=Object.freeze(Object.defineProperty({__proto__:null,default:vjt,setCustomElementsManifestWithOptions:m9e},Symbol.toStringTag,{value:"Module"}));export{Gjt as L,Vjt as a,IUt as p};
