function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-Cs6P20-W.js","./_commonjsHelpers-BosuxZz1.js","./chunk-GKNNPQCW-BkHQSocK.js","./jsx-runtime-CKrituN3.js","./index-CBqU2yxZ.js","./index-DSz_1G2r.js","./index-CH-n_DJY.js","./iframe-DDDlZ-7W.js","./index-DiFAUXR8.js","./index-DrFu-skq.js","./lit-element-Bq1Y8_dt.js","./directive-helpers-CJWBCwlQ.js","./main-Ds0twqWE.js","./index-CBTDJjUK.js","./webimage-BcnuJlio.js","./decoder-Ddo2r026.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Gwe=Object.defineProperty;var Uwe=(i,e,t)=>e in i?Gwe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ee=(i,e,t)=>(Uwe(i,typeof e!="symbol"?e+"":e,t),t),qx=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var wt=(i,e,t)=>(qx(i,e,"read from private field"),t?t.call(i):e.get(i)),Et=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},go=(i,e,t,r)=>(qx(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t);var _r=(i,e,t)=>(qx(i,e,"access private method"),t);import{s as Vwe}from"./chunk-GKNNPQCW-BkHQSocK.js";import{j as zs}from"./jsx-runtime-CKrituN3.js";import{useMDXComponents as $ue}from"./index-DSz_1G2r.js";import{e as qwe,f as Hwe,h as Wwe,P as Ywe,i as Xwe,j as Zwe,k as Kwe}from"./index-CH-n_DJY.js";import{g as no,c as xr,a as Df}from"./_commonjsHelpers-BosuxZz1.js";import{T as It,s as hi,x as ae,u as Jwe,f as Qwe,w as wd,j as e1e,b as ase}from"./lit-element-Bq1Y8_dt.js";import{m as nC,p as t1e,v as lh,r as $p,h as Hx,f as i1e}from"./directive-helpers-CJWBCwlQ.js";import{n as bt,s as r1e}from"./main-Ds0twqWE.js";import{n as lse}from"./index-CBTDJjUK.js";import{_ as Rc}from"./iframe-DDDlZ-7W.js";const cse={duration:750},hse={type:"FeatureCollection",features:[]},n1e="1.0.0",s1e="",o1e=[{kind:"javascript-module",path:"elements/drawtools/src/main.js",declarations:[{kind:"class",description:"Manage drawn features on a map",name:"EOxDrawTools",members:[{kind:"field",name:"#eoxMap",privacy:"private",type:{text:"EOxMap"}},{kind:"field",name:"#olMap",privacy:"private",type:{text:"Map"}},{kind:"field",name:"#geoJSON",privacy:"private",type:{text:"string"}},{kind:"method",name:"handleStartDrawing"},{kind:"method",name:"handleDiscardDrawing"},{kind:"method",name:"handleFeatureChange",parameters:[{name:"text",description:"The string representation of the features to be parsed.",type:{text:"string"}},{name:"replaceFeatures",default:"false",description:"A boolean flag indicating whether to replace the existing features.",type:{text:"boolean"}}]},{kind:"method",name:"handleFilesChange",parameters:[{name:"evt",description:"The event object from the file input interaction.",type:{text:"DragEvent | Event"}}]},{kind:"method",name:"onModifyEnd"},{kind:"method",name:"updateGeoJSON",description:"Update #geoJSON with stringify feature."},{kind:"method",name:"emitDrawnFeatures",description:"Triggers different events when the drawing of a shape is completed."},{kind:"method",name:"createRenderRoot",description:"Overrides createRenderRoot to handle shadow DOM creation based on the noShadow property."},{kind:"field",name:"allowModify",privacy:"public",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",attribute:"allow-modify"},{kind:"field",name:"for",privacy:"public",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',attribute:"for"},{kind:"field",name:"currentlyDrawing",privacy:"public",type:{text:"boolean"},description:"Whether the user is currently in the process of drawing or not",default:"false"},{kind:"field",name:"draw",privacy:"public",type:{text:"Draw"},description:"The current native OpenLayers `draw` interaction",default:"null"},{kind:"field",name:"drawLayer",privacy:"public",type:{text:"Vector<Vector>"},description:"The current native OpenLayers draw `layer`",default:"null"},{kind:"field",name:"drawnFeatures",privacy:"public",type:{text:"Array<Feature>"},description:"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.",default:"[]"},{kind:"field",name:"modify",privacy:"public",type:{text:"Modify"},description:"The current native OpenLayers `modify` interaction",default:"null"},{kind:"field",name:"multipleFeatures",privacy:"public",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",attribute:"multiple-features"},{kind:"field",name:"importFeatures",privacy:"public",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",attribute:"import-features"},{kind:"field",name:"showEditor",privacy:"public",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",attribute:"show-editor"},{kind:"field",name:"showList",privacy:"public",type:{text:"boolean"},description:"Show list of features",default:"false",attribute:"show-list"},{kind:"field",name:"type",privacy:"public",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',attribute:"type"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"noShadow"}],events:[{name:"drawupdate",type:{text:"Array<Feature>"},description:"Fires whenever features are added, modified or discarded, where the event detail\nis the `drawnFeatures` array"}],attributes:[{name:"allow-modify",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",fieldName:"allowModify"},{name:"for",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',fieldName:"for"},{name:"multiple-features",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",fieldName:"multipleFeatures"},{name:"import-features",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",fieldName:"importFeatures"},{name:"show-editor",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",fieldName:"showEditor"},{name:"show-list",type:{text:"boolean"},description:"Show list of features",default:"false",fieldName:"showList"},{name:"noShadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"type",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',fieldName:"type"},{name:"unstyled",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-drawtools",customElement:!0}],exports:[{kind:"js",name:"EOxDrawTools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}},{kind:"custom-element-definition",name:"eox-drawtools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}}]},{kind:"javascript-module",path:"elements/jsonform/src/main.js",declarations:[{kind:"class",description:"",name:"EOxJSONForm",members:[{kind:"field",name:"#editor",privacy:"private",type:{text:"{[key: string]: any}"},default:"null",description:"editor instance generated through - JSONEditor"},{kind:"method",name:"parseProperty",parameters:[{name:"property",type:{text:"JsonSchema | String"}}]},{kind:"field",name:"editor",description:"The JSONEditor instance",readonly:!0},{kind:"field",name:"schema",privacy:"public",type:{text:"object"},description:"JSON schema used to render the form",parameters:[{name:"newSchema",type:{text:"JsonSchema"}}]},{kind:"field",name:"value",privacy:"public",type:{text:"object"},description:"Default values to fill the form",parameters:[{name:"newVal",type:{text:"JsonSchema"}}]},{kind:"method",name:"#emitValue",description:"Value object has been changed"},{kind:"method",name:"#dispatchEvent",description:"Dispatch same function for multiple event type"},{kind:"method",name:"createRenderRoot",description:"Overrides createRenderRoot to handle shadow DOM creation based on the noShadow property."},{kind:"field",name:"options",privacy:"public",type:{text:"object"},description:"Default values for the form editor",default:`{
      show_opt_in: false,
      disable_collapse: true,
      disable_edit_json: true,
      disable_properties: true,
      disable_array_delete_all_rows: true,
      disable_array_delete_last_row: true,
      array_controls_top: true,
    }`},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"}],events:[{name:"change",type:{text:"CustomEvent"}}],attributes:[{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-jsonform",customElement:!0}],exports:[{kind:"js",name:"EOxJSONForm",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}},{kind:"custom-element-definition",name:"eox-jsonform",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}}]},{kind:"javascript-module",path:"elements/layercontrol/src/main.js",declarations:[{kind:"class",description:`Display layers and groups of a connected OpenLayers map

## Layer properties
In order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. \`layer.set(property, value)\`).

#### \`id?: string\`
The layer id. Not required but recommended. Can also be any other layer property (defined via the \`idProperty\` property or \`id-property\`attribute - see API).

#### \`title?: string\`
The title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the \`titleProperty\` property or \`title-property\`attribute - see API).

#### \`layerControlHide?: Boolean\`
Completely hide a layer from the layer control.

#### \`layerControlOptional?: Boolean\`
Initially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.

#### \`layerControlExclusive?: Boolean\`
Make layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.

#### \`layerControlExpand?: Boolean\`
Pre-expand a layer dropdown so that it is always open when the component initializes.

#### \`layerControlToolsExpand?: Boolean\`
Pre-expand the layer tools so they are visible when the component initializes.

#### \`layerConfig?: Object\`
Configuration options for the layer (displayed in the layer tools' "config" tab)`,name:"EOxLayerControl",members:[{kind:"field",name:"#eoxMap",privacy:"private",description:"Instance of `eox-map` which is a wrapper for the OL",type:{text:"EOxMap"}},{kind:"method",name:"#handleLayerControlLayerListChange",parameters:[{name:"evt",type:{text:"CustomEvent & {target: Element}"}}],description:"Event handler for changes in the layer list"},{kind:"field",name:"#styleEOX",privacy:"private",default:"`* { font-family: Roboto, sans-serif; }`"},{kind:"field",name:"for",privacy:"public",type:{text:"String"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',attribute:"for"},{kind:"field",name:"idProperty",privacy:"public",type:{text:"String"},description:"Layer id property",default:'"id"',attribute:"id-property"},{kind:"field",name:"map",privacy:"public",type:{text:"Map"},description:"The native OL map instance",default:"null"},{kind:"field",name:"titleProperty",privacy:"public",type:{text:"String"},description:"Layer title property",default:'"title"',attribute:"title-property"},{kind:"field",name:"showLayerZoomState",privacy:"public",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",attribute:"show-layer-zoom-state"},{kind:"field",name:"tools",privacy:"public",type:{text:"Array<String>"},description:"Layer tools",default:'["info", "opacity", "config", "remove", "sort"]'},{kind:"field",name:"addExternalLayers",privacy:"public",type:{text:"Boolean"},description:"Enable-disable external layer",default:"false"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"styleOverride",privacy:"public",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',attribute:"styleOverride"}],events:[{name:"layerchange",type:{text:"CustomEvent"},description:"A generic layer change event; could be a layer visibility, group length updates and others.\nPasses the changed layer in the `detail`."}],attributes:[{name:"for",type:{text:"String"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',fieldName:"for"},{name:"id-property",type:{text:"String"},description:"Layer id property",default:'"id"',fieldName:"idProperty"},{name:"title-property",type:{text:"String"},description:"Layer title property",default:'"title"',fieldName:"titleProperty"},{name:"show-layer-zoom-state",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",fieldName:"showLayerZoomState"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"},{name:"styleOverride",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-layercontrol",customElement:!0}],exports:[{kind:"js",name:"EOxLayerControl",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}},{kind:"custom-element-definition",name:"eox-layercontrol",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}}]},{kind:"javascript-module",path:"elements/layout/src/main.js",declarations:[{kind:"class",description:"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\n- `eox-layout`: the container holding all the items\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)",name:"EOxLayout",members:[],attributes:[{name:"gap"}],superclass:{name:"HTMLElement"},tagName:"eox-layout",customElement:!0},{kind:"class",description:"",name:"EOxLayoutItem",members:[],attributes:[{name:"x"},{name:"y"},{name:"w"},{name:"h"}],superclass:{name:"HTMLElement"},tagName:"eox-layout-item",customElement:!0}],exports:[{kind:"js",name:"EOxLayout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"js",name:"EOxLayoutItem",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout-item",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}}]},{kind:"javascript-module",path:"elements/storytelling/src/main.js",declarations:[{kind:"class",description:"",name:"EOxStoryTelling",members:[{kind:"field",name:"#html",privacy:"private",description:"Generated HTML string using markdown",type:{text:"String"},default:"undefined"},{kind:"field",name:"#config",privacy:"private",type:{text:"Object"},default:"{}",description:"Basic config"},{kind:"method",name:"handleSlotChange",description:"Handles changes to the slot's content, updating the component's internal state."},{kind:"method",name:"waitForHtmlInitialization"},{kind:"method",name:"createRenderRoot",description:"Overrides createRenderRoot to handle shadow DOM creation based on the noShadow property."},{kind:"field",name:"markdown",privacy:"public",type:{text:"String"},description:"Markdown Content",default:'""',attribute:"markdown"},{kind:"field",name:"markdownURL",privacy:"public",type:{text:"String"},description:"Markdown Content URL",default:"null",attribute:"markdown-url"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"showEditor",privacy:"public",type:{text:"Boolean"},description:"Enable or disable editor",default:"false",attribute:"show-editor"},{kind:"field",name:"showNav",privacy:"public",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",attribute:"show-nav"},{kind:"field",name:"nav",privacy:"public",type:{text:"Array<Object>"},description:"List of items in navigation",default:"[]"}],attributes:[{name:"markdown",type:{text:"String"},description:"Markdown Content",default:'""',fieldName:"markdown"},{name:"markdown-url",type:{text:"String"},description:"Markdown Content URL",default:"null",fieldName:"markdownURL"},{name:"show-nav",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",fieldName:"showNav"},{name:"show-editor",type:{text:"Boolean"},description:"Enable or disable editor",default:"false",fieldName:"showEditor"},{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-storytelling",customElement:!0}],exports:[{kind:"js",name:"EOxStoryTelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}},{kind:"custom-element-definition",name:"eox-storytelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}}]},{kind:"javascript-module",path:"elements/map/main.ts",declarations:[{kind:"class",description:'The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\n\nBasic usage:\n\n```\nimport "@eox/map"\n\n<eox-map [...]></eox-map>\n```\n\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\nrequired to import the `advanced-layers-and-sources` plugin.\n\nIncluded in the base bundle:\n- Formats: `GeoJSON`, `MVT`\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\n\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\n\n```\nimport "@eox/map/dist/eox-map-advanced-layers-and-sources.js"\nimport "@eox/map/dist/eox-map.js"\n\n<eox-map [...]></eox-map>\n```\nIncluded in the advanced plugin bundle:\n- Layers:\n  - All OpenLayers layer types\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\n- Sources:\n  - All OpenLayers source types\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)',name:"EOxMap",members:[{kind:"field",name:"_center",type:{text:"Coordinate"},privacy:"private",default:"[0, 0]"},{kind:"field",name:"center",description:`Map center, always in the same projection as the view.
when setting the map center,`},{kind:"field",name:"_controls",type:{text:"controlDictionary"},privacy:"private"},{kind:"field",name:"controls",description:"Map controls, in JSON format"},{kind:"field",name:"_layers",type:{text:"Array<EoxLayer>"},privacy:"private"},{kind:"field",name:"layers",description:"The map layers, in eox-map JSON format!",type:{text:"Array<EoxLayer>"}},{kind:"field",name:"_preventScroll",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"preventScroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},attribute:"prevent-scroll"},{kind:"field",name:"_config",type:{text:"ConfigObject"},privacy:"private"},{kind:"field",name:"config",description:"Config object, including `controls`, `layers` and `view`.\nAlternative way of defining the map config."},{kind:"field",name:"_projection",type:{text:"ProjectionLike"},privacy:"private"},{kind:"field",name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",attribute:"projection"},{kind:"field",name:"zoom",type:{text:"number"},default:"0",description:"Map zoom"},{kind:"field",name:"sync",type:{text:"string"},description:"Sync map with another map view by providing its query selector",attribute:"sync"},{kind:"field",name:"map",type:{text:"Map"},default:`new Map({
    controls: [],
    layers: [],
    view: new View({
      center: [0, 0],
      zoom: 0,
      projection: this.projection,
    }),
  })`,description:`The native OpenLayers map object.
See [https://openlayers.org/en/latest/apidoc/](https://openlayers.org/en/latest/apidoc/)`},{kind:"field",name:"interactions",type:{text:"{ [index: string]: Draw | Modify }"},default:"{}",description:"Dictionary of ol interactions associated with the map."},{kind:"field",name:"selectInteractions",type:{text:"{ [index: string]: EOxSelectInteraction }"},default:"{}",description:"Dictionary of select interactions."},{kind:"field",name:"mapControls",type:{text:"{ [index: string]: Control }"},default:"{}",description:"Dictionary of ol controls associated with the map."},{kind:"field",name:"addOrUpdateLayer",description:`Creates or updates an existing layer
will update an layer if the ID already exists`,parameters:[{description:"EoxLayer JSON definition",name:"json"}],return:{type:{text:""}}},{kind:"field",name:"removeInteraction",description:"Removes a given ol-interaction from the map. Layer have to be removed seperately",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeSelect",description:"Removes a given EOxSelectInteraction from the map.",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeControl",description:"Removes a given control from the map.",parameters:[{description:"id of the control element",name:"id"}]},{kind:"field",name:"getLayerById",description:'Gets an OpenLayers-Layer by its "id"',parameters:[{description:"id of the layer",name:"id"}]},{kind:"field",name:"parseFeature",description:`Converts an array of OpenLayers Feature objects into a GeoJSON object.
This function utilizes the OpenLayers GeoJSON format writer to serialize`,parameters:[{description:"The array of features to be serialized.",name:"features"}],return:{type:{text:""}}},{kind:"field",name:"parseTextToFeature",description:"Parses a text representation of geographic features and adds them to a vector layer.",parameters:[{description:"The string representation of the features to be parsed.",name:"text"},{description:"The vector layer to which the parsed features will be added.",name:"vectorLayer"},{description:"A boolean flag indicating whether to replace the existing features in the vector layer.",name:"replaceFeatures"}]},{kind:"field",name:"registerProjectionFromCode",default:"registerProjectionFromCode"},{kind:"field",name:"registerProjection",default:"registerProjection"},{kind:"field",name:"getFlatLayersArray",default:"getFlatLayersArray",description:`Gets all map layers (including groups and nested layers)
as flat array`},{kind:"method",name:"buffer",parameters:[{name:"extent",type:{text:"Extent"}},{name:"value",type:{text:"number"}}],description:"Return extent increased by the provided value.",return:{type:{text:"Extent"}}}],events:[{name:"loadend",type:{text:"CustomEvent"},description:`OpenLayers map has finished loading, passes the map instance as detail.
For all other native events, attach an event listener to the map instance directly`}],attributes:[{name:"prevent-scroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},fieldName:"preventScroll"},{name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",fieldName:"projection"},{name:"sync",type:{text:"string"},description:"Sync map with another map view by providing its query selector",fieldName:"sync"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-map",customElement:!0}],exports:[{kind:"js",name:"EOxMap",declaration:{name:"EOxMap",module:"elements/map/main.ts"}},{kind:"custom-element-definition",name:"eox-map",declaration:{name:"EOxMap",module:"elements/map/main.ts"}}]},{kind:"javascript-module",path:"elements/chart/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxChart",members:[{kind:"field",name:"shadowRoot",type:{text:"ShadowRoot"}},{kind:"field",name:"chart",type:{text:"Chart"},description:`The native chart.js object.
See [https://www.chartjs.org/docs/latest/developers/api.html](https://www.chartjs.org/docs/latest/developers/api.html)`},{kind:"field",name:"setData",type:{text:"(body: { datasets: ChartDataset[] }) => void"},description:"Set chart data, TODO description"},{kind:"field",name:"setOptions",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsData",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}},{kind:"field",name:"setSignalsGeometry",type:{text:"(geometry: object) => void"}},{kind:"field",name:"setGeoDBEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}}],superclass:{name:"HTMLElement"},tagName:"eox-chart",customElement:!0}],exports:[{kind:"js",name:"EOxChart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}},{kind:"custom-element-definition",name:"eox-chart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}}]},{kind:"javascript-module",path:"elements/itemfilter/src/main.ts",declarations:[{kind:"class",description:"",name:"ElementConfig",members:[{kind:"field",name:"aggregateResults",type:{text:"string | undefined"},privacy:"public",default:"undefined",description:"Aggregate results by a property key"},{kind:"field",name:"autoSpreadSingle",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Automatically spread single item summaries
removing the summary header`},{kind:"field",name:"enableHighlighting",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:"Highlighting of search result character matches"},{kind:"field",name:"externalFilter",type:{text:"(input: string, filters: object[]) => string | undefined"},privacy:"public",description:`Use an external search endpoint instead of fuse search.
Passed properties: input string, filters object`},{kind:"field",name:"filterProperties",type:{text:"Array<FilterObject> | undefined"},privacy:"public",default:"[]",description:"The filter properties.",parameters:[{name:"filterProperties"}]},{kind:"field",name:"fuseConfig",type:{text:"object | undefined"},privacy:"public",description:"Native fuse.js config override"},{kind:"field",name:"inlineMode",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Inline mode, for rendering the itemfilter in avery condensed space.
Expexts showResults to be false`},{kind:"field",name:"matchAllWhenEmpty",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Show all result items if nothing is input by the user"},{kind:"field",name:"onFilter",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item search",return:{type:{text:""}}},{kind:"field",name:"onSelect",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item selection",return:{type:{text:""}}},{kind:"field",name:"showResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Display results list"},{kind:"field",name:"titleProperty",type:{text:"string"},privacy:"public",default:'"title"',description:"The property of the result items used for display"},{kind:"field",name:"expandMultipleFilters",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple filter accordeons in parallel"},{kind:"field",name:"expandResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Initialize result accordeons expanded"},{kind:"field",name:"expandMultipleResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple result accordeons in parallel"}]},{kind:"class",description:"",name:"EOxItemFilter",members:[{kind:"field",name:"_resultAggregation",type:{text:"Array<string>"},default:"[]"},{kind:"field",name:"_items",type:{text:"Record<string, unknown>[]"},default:"[]"},{kind:"field",name:"filters",type:{text:"{ [key: string]: FilterObject }"},privacy:"public",default:"{}"},{kind:"field",name:"results",type:{text:"Record<string, unknown>[]"},privacy:"public"},{kind:"field",name:"selectedResult",type:{text:"Item"},privacy:"public"},{kind:"field",name:"items"},{kind:"field",name:"config"},{kind:"field",name:"_config",privacy:"private",default:"new ElementConfig()"},{kind:"field",name:"apply",attribute:"apply"},{kind:"field",name:"styleOverride",type:{text:"string"}},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"search",privacy:"private"},{kind:"method",name:"aggregateResults",parameters:[{name:"items",type:{text:"FilterObject[]"}},{name:"property",type:{text:"string"}}]},{kind:"method",name:"createItemList",parameters:[{name:"aggregationProperty",type:{text:"string"}}]},{kind:"method",name:"sortResults",parameters:[{name:"items",type:{text:"Record<string, unknown>[]"}}]},{kind:"method",name:"resetFilters"},{kind:"method",name:"toggleAccordion",parameters:[{name:"event",type:{text:"CustomEvent"}}]}],attributes:[{name:"apply",fieldName:"apply"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"TemplateElement",module:"/utils/templateElement"},tagName:"eox-itemfilter",customElement:!0}],exports:[{kind:"js",name:"ElementConfig",declaration:{name:"ElementConfig",module:"elements/itemfilter/src/main.ts"}},{kind:"js",name:"EOxItemFilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}},{kind:"custom-element-definition",name:"eox-itemfilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}}]},{kind:"javascript-module",path:"elements/stacinfo/src/main.ts",declarations:[{kind:"class",description:`### Introduction
Working with STAC catalogs, collections and items often times requires
to fetch a JSON file, parse its contents and display some of its fields
in some formatted way. To make these steps reusable, the \`eox-stacinfo\`
element offers a set of functionalities:
- **automatically fetch a STAC file** as soon as the element loads
- offer a **property whitelist** functionality to choose which properties to display
- display the properties in **configurable sections** (header, featured, footer)
- allow to **override** any property display for application-specific custom needs

The use case for this element is alongside a map which displays STAC files
or in a catalog browsing scenario where a quick look at the most important properties
is needed.

#### Technology
Under the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.`,name:"EOxStacInfo",members:[{kind:"field",name:"allowHtml",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",attribute:"allow-html"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"field",name:"for",type:{text:"string"},attribute:"for"},{kind:"field",name:"header",type:{text:"Array<string>"},default:"[]",attribute:"header"},{kind:"field",name:"tags",type:{text:"Array<string>"},default:"[]",attribute:"tags"},{kind:"field",name:"featured",type:{text:"Array<string>"},default:"[]",attribute:"featured"},{kind:"field",name:"footer",type:{text:"Array<string>"},default:"[]",attribute:"footer"},{kind:"field",name:"styleOverride",type:{text:"string"},default:'""',attribute:"style-override"},{kind:"field",name:"stacInfo",type:{text:"Array<typeof STAC>"},default:"[]"},{kind:"field",name:"stacProperties",type:{text:"Array<typeof STAC>"},privacy:"public"},{kind:"field",name:"fetchStac"},{kind:"field",name:"parseStac"},{kind:"method",name:"buildProperties",parameters:[{name:"stacArray",type:{text:"Array<typeof STAC>"}}]}],attributes:[{name:"allow-html",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",fieldName:"allowHtml"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"},{name:"for",type:{text:"string"},fieldName:"for"},{name:"header",type:{text:"Array<string>"},default:"[]",fieldName:"header"},{name:"tags",type:{text:"Array<string>"},default:"[]",fieldName:"tags"},{name:"properties",type:{text:"Array<string>"},default:"[]",fieldName:"properties"},{name:"featured",type:{text:"Array<string>"},default:"[]",fieldName:"featured"},{name:"footer",type:{text:"Array<string>"},default:"[]",fieldName:"footer"},{name:"style-override",type:{text:"string"},default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-stacinfo",customElement:!0}],exports:[{kind:"js",name:"EOxStacInfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}},{kind:"custom-element-definition",name:"eox-stacinfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}}]},{kind:"javascript-module",path:"elements/timecontrol/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxTimeControl",members:[{kind:"field",name:"controlProperty",type:{text:"string | undefined"},description:"The WMS parameter to update",attribute:"control-property"},{kind:"field",name:"controlValues",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",attribute:"control-values"},{kind:"field",name:"for",type:{text:"string"},description:"The query selector for the map",attribute:"for"},{kind:"field",name:"layer",type:{text:"string"},description:"The layerid of the animated layer",attribute:"layer"},{kind:"field",name:"slider",type:{text:"boolean"},description:"Display a slider for the values",attribute:"slider"},{kind:"field",name:"_originalParams",type:{text:"object"},privacy:"private",description:"Original params of layer source",attribute:"_originalParams"},{kind:"field",name:"disablePlay",type:{text:"boolean"},description:"Hides the play button if set",attribute:"disable-play"},{kind:"method",name:"next",description:"Go to next step"},{kind:"method",name:"previous",description:"Go to previous step"},{kind:"method",name:"playAnimation",parameters:[{name:"on",type:{text:"boolean"},description:"animation on/off"}],description:"Toggle play animation"},{kind:"method",name:"setConfig",parameters:[{name:"config",type:{text:`{
    layer: string;
    controlProperty: string;
    controlValues: Array<string>;
  }`}}],description:"Set the config at a later point"},{kind:"field",name:"currentStep",description:"The currently selected step",type:{text:"string"},attribute:"current-step"},{kind:"field",name:"_animationInterval",type:{text:"ReturnType<typeof setInterval>"},privacy:"private"},{kind:"field",name:"_controlSource",type:{text:"UrlTile"},privacy:"private"},{kind:"field",name:"_isAnimationPlaying",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"_newStepIndex",type:{text:"number"},privacy:"private",default:"0"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"_updateStep",privacy:"private",parameters:[{name:"step",default:"1"}]},{kind:"method",name:"getFlatLayersArray",parameters:[{name:"layers",type:{text:"Array<Layer>"},description:"layers Array"}],description:`TEMP / TO-DO, this is a copy of the function defined in the eox-map:
https://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25
Consider a way to properly export that function and use it here`}],events:[{name:"stepchange",type:{text:"CustomEvent"},description:"Triggers when *currentStep* is updated.\n`event.detail.currentStep` returns the new *currentStep* value."}],attributes:[{name:"control-property",type:{text:"string | undefined"},description:"The WMS parameter to update",fieldName:"controlProperty"},{name:"control-values",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",fieldName:"controlValues"},{name:"for",type:{text:"string"},description:"The query selector for the map",fieldName:"for"},{name:"layer",type:{text:"string"},description:"The layerid of the animated layer",fieldName:"layer"},{name:"slider",type:{text:"boolean"},description:"Display a slider for the values",fieldName:"slider"},{name:"_originalParams",type:{text:"object"},description:"Original params of layer source",fieldName:"_originalParams"},{name:"disable-play",type:{text:"boolean"},description:"Hides the play button if set",fieldName:"disablePlay"},{name:"current-step",description:"The currently selected step",type:{text:"string"},fieldName:"currentStep"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-timecontrol",customElement:!0},{kind:"class",description:"",name:"SliderTicks",members:[{kind:"field",name:"width",type:{text:"number"},default:"0",attribute:"width"},{kind:"field",name:"steps",type:{text:"string[]"},default:"[]",attribute:"steps"},{kind:"field",name:"height",type:{text:"number"},default:"6"},{kind:"field",name:"svgWidth",type:{text:"number"},default:"0"},{kind:"method",name:"handleResize"},{kind:"field",name:"lines",readonly:!0},{kind:"field",name:"numLines",readonly:!0},{kind:"field",name:"yearMarks",type:{text:"{ label: number; position: number }[]"},readonly:!0},{kind:"method",name:"isYearLine",return:{type:{text:"boolean"}},parameters:[{name:"line",type:{text:"number"}}]}],attributes:[{name:"width",type:{text:"number"},default:"0",fieldName:"width"},{name:"steps",type:{text:"string[]"},default:"[]",fieldName:"steps"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-sliderticks",customElement:!0}],exports:[{kind:"js",name:"EOxTimeControl",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-timecontrol",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"js",name:"SliderTicks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-sliderticks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}}]}],a1e={schemaVersion:n1e,readme:s1e,modules:o1e};function use(i){const e={h3:"h3",...$ue(),...i.components};return zs.jsxs(zs.Fragment,{children:[`
`,`
`,zs.jsx(qwe,{isTemplate:!0}),`
`,zs.jsx(Hwe,{}),`
`,zs.jsx(Wwe,{}),`
`,zs.jsx(Ywe,{}),`
`,zs.jsx(Xwe,{}),`
`,zs.jsx(e.h3,{id:"api",children:"API"}),`
`,zs.jsx(Zwe,{}),`
`,zs.jsx(Kwe,{includePrimary:!1})]})}function l1e(i={}){const{wrapper:e}={...$ue(),...i.components};return e?zs.jsx(e,{...i,children:zs.jsx(use,{...i})}):use(i)}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Wm(i){return i+.5|0}const ic=(i,e,t)=>Math.max(Math.min(i,t),e);function ng(i){return ic(Wm(i*2.55),0,255)}function dc(i){return ic(Wm(i*255),0,255)}function Ga(i){return ic(Wm(i/2.55)/100,0,1)}function dse(i){return ic(Wm(i*100),0,100)}const $s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},SE=[..."0123456789ABCDEF"],c1e=i=>SE[i&15],h1e=i=>SE[(i&240)>>4]+SE[i&15],t0=i=>(i&240)>>4===(i&15),u1e=i=>t0(i.r)&&t0(i.g)&&t0(i.b)&&t0(i.a);function d1e(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&$s[i[1]]*17,g:255&$s[i[2]]*17,b:255&$s[i[3]]*17,a:e===5?$s[i[4]]*17:255}:(e===7||e===9)&&(t={r:$s[i[1]]<<4|$s[i[2]],g:$s[i[3]]<<4|$s[i[4]],b:$s[i[5]]<<4|$s[i[6]],a:e===9?$s[i[7]]<<4|$s[i[8]]:255})),t}const f1e=(i,e)=>i<255?e(i):"";function p1e(i){var e=u1e(i)?c1e:h1e;return i?"#"+e(i.r)+e(i.g)+e(i.b)+f1e(i.a,e):void 0}const g1e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Bue(i,e,t){const r=e*Math.min(t,1-t),n=(s,o=(s+i/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function m1e(i,e,t){const r=(n,s=(n+i/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function y1e(i,e,t){const r=Bue(i,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)r[n]*=1-e-t,r[n]+=e;return r}function _1e(i,e,t,r,n){return i===n?(e-t)/r+(e<t?6:0):e===n?(t-i)/r+2:(i-e)/r+4}function sC(i){const t=i.r/255,r=i.g/255,n=i.b/255,s=Math.max(t,r,n),o=Math.min(t,r,n),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=_1e(t,r,n,h,s),l=l*60+.5),[l|0,c||0,a]}function oC(i,e,t,r){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,r)).map(dc)}function aC(i,e,t){return oC(Bue,i,e,t)}function v1e(i,e,t){return oC(y1e,i,e,t)}function b1e(i,e,t){return oC(m1e,i,e,t)}function jue(i){return(i%360+360)%360}function x1e(i){const e=g1e.exec(i);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?ng(+e[5]):dc(+e[5]));const n=jue(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=v1e(n,s,o):e[1]==="hsv"?r=b1e(n,s,o):r=aC(n,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function w1e(i,e){var t=sC(i);t[0]=jue(t[0]+e),t=aC(t),i.r=t[0],i.g=t[1],i.b=t[2]}function E1e(i){if(!i)return;const e=sC(i),t=e[0],r=dse(e[1]),n=dse(e[2]);return i.a<255?`hsla(${t}, ${r}%, ${n}%, ${Ga(i.a)})`:`hsl(${t}, ${r}%, ${n}%)`}const fse={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pse={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function S1e(){const i={},e=Object.keys(pse),t=Object.keys(fse);let r,n,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],n=0;n<t.length;n++)s=t[n],a=a.replace(s,fse[s]);s=parseInt(pse[o],16),i[a]=[s>>16&255,s>>8&255,s&255]}return i}let i0;function C1e(i){i0||(i0=S1e(),i0.transparent=[0,0,0,0]);const e=i0[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const T1e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function A1e(i){const e=T1e.exec(i);let t=255,r,n,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?ng(o):ic(o*255,0,255)}return r=+e[1],n=+e[3],s=+e[5],r=255&(e[2]?ng(r):ic(r,0,255)),n=255&(e[4]?ng(n):ic(n,0,255)),s=255&(e[6]?ng(s):ic(s,0,255)),{r,g:n,b:s,a:t}}}function M1e(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Ga(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Wx=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Wu=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function R1e(i,e,t){const r=Wu(Ga(i.r)),n=Wu(Ga(i.g)),s=Wu(Ga(i.b));return{r:dc(Wx(r+t*(Wu(Ga(e.r))-r))),g:dc(Wx(n+t*(Wu(Ga(e.g))-n))),b:dc(Wx(s+t*(Wu(Ga(e.b))-s))),a:i.a+t*(e.a-i.a)}}function r0(i,e,t){if(i){let r=sC(i);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=aC(r),i.r=r[0],i.g=r[1],i.b=r[2]}}function zue(i,e){return i&&Object.assign(e||{},i)}function gse(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=dc(i[3]))):(e=zue(i,{r:0,g:0,b:0,a:1}),e.a=dc(e.a)),e}function L1e(i){return i.charAt(0)==="r"?A1e(i):x1e(i)}class Zg{constructor(e){if(e instanceof Zg)return e;const t=typeof e;let r;t==="object"?r=gse(e):t==="string"&&(r=d1e(e)||C1e(e)||L1e(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=zue(this._rgb);return e&&(e.a=Ga(e.a)),e}set rgb(e){this._rgb=gse(e)}rgbString(){return this._valid?M1e(this._rgb):void 0}hexString(){return this._valid?p1e(this._rgb):void 0}hslString(){return this._valid?E1e(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*n.r+.5,r.g=255&c*r.g+s*n.g+.5,r.b=255&c*r.b+s*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=R1e(this._rgb,e._rgb,t)),this}clone(){return new Zg(this.rgb)}alpha(e){return this._rgb.a=dc(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Wm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return r0(this._rgb,2,e),this}darken(e){return r0(this._rgb,2,-e),this}saturate(e){return r0(this._rgb,1,e),this}desaturate(e){return r0(this._rgb,1,-e),this}rotate(e){return w1e(this._rgb,e),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Pa(){}const I1e=(()=>{let i=0;return()=>i++})();function qt(i){return i===null||typeof i>"u"}function Ti(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function kt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Qi(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function _s(i,e){return Qi(i)?i:e}function yt(i,e){return typeof i>"u"?e:i}const P1e=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,Gue=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function wi(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function di(i,e,t,r){let n,s,o;if(Ti(i))if(s=i.length,r)for(n=s-1;n>=0;n--)e.call(t,i[n],n);else for(n=0;n<s;n++)e.call(t,i[n],n);else if(kt(i))for(o=Object.keys(i),s=o.length,n=0;n<s;n++)e.call(t,i[o[n]],o[n])}function P_(i,e){let t,r,n,s;if(!i||!e||i.length!==e.length)return!1;for(t=0,r=i.length;t<r;++t)if(n=i[t],s=e[t],n.datasetIndex!==s.datasetIndex||n.index!==s.index)return!1;return!0}function k_(i){if(Ti(i))return i.map(k_);if(kt(i)){const e=Object.create(null),t=Object.keys(i),r=t.length;let n=0;for(;n<r;++n)e[t[n]]=k_(i[t[n]]);return e}return i}function Uue(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function k1e(i,e,t,r){if(!Uue(i))return;const n=e[i],s=t[i];kt(n)&&kt(s)?Ps(n,s,r):e[i]=k_(s)}function Ps(i,e,t){const r=Ti(e)?e:[e],n=r.length;if(!kt(i))return i;t=t||{};const s=t.merger||k1e;let o;for(let a=0;a<n;++a){if(o=r[a],!kt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],i,o,t)}return i}function Eg(i,e){return Ps(i,e,{merger:O1e})}function O1e(i,e,t){if(!Uue(i))return;const r=e[i],n=t[i];kt(r)&&kt(n)?Eg(r,n):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=k_(n))}const mse={"":i=>i,x:i=>i.x,y:i=>i.y};function D1e(i){const e=i.split("."),t=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function F1e(i){const e=D1e(i);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function yc(i,e){return(mse[e]||(mse[e]=F1e(e)))(i)}function lC(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Kg=i=>typeof i<"u",_c=i=>typeof i=="function",yse=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function N1e(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Li=Math.PI,Ai=2*Li,$1e=Ai+Li,O_=Number.POSITIVE_INFINITY,B1e=Li/180,lr=Li/2,ch=Li/4,_se=Li*2/3,rc=Math.log10,ha=Math.sign;function Sg(i,e,t){return Math.abs(i-e)<t}function vse(i){const e=Math.round(i);i=Sg(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(rc(i))),r=i/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function j1e(i){const e=[],t=Math.sqrt(i);let r;for(r=1;r<t;r++)i%r===0&&(e.push(r),e.push(i/r));return t===(t|0)&&e.push(t),e.sort((n,s)=>n-s).pop(),e}function nf(i){return!isNaN(parseFloat(i))&&isFinite(i)}function z1e(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function Vue(i,e,t){let r,n,s;for(r=0,n=i.length;r<n;r++)s=i[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Eo(i){return i*(Li/180)}function cC(i){return i*(180/Li)}function bse(i){if(!Qi(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function que(i,e){const t=e.x-i.x,r=e.y-i.y,n=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Li&&(s+=Ai),{angle:s,distance:n}}function CE(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function G1e(i,e){return(i-e+$1e)%Ai-Li}function xs(i){return(i%Ai+Ai)%Ai}function Jg(i,e,t,r){const n=xs(i),s=xs(e),o=xs(t),a=xs(s-n),l=xs(o-n),c=xs(n-s),h=xs(n-o);return n===s||n===o||r&&s===o||a>l&&c<h}function Pr(i,e,t){return Math.max(e,Math.min(t,i))}function U1e(i){return Pr(i,-32768,32767)}function Ya(i,e,t,r=1e-6){return i>=Math.min(e,t)-r&&i<=Math.max(e,t)+r}function hC(i,e,t){t=t||(o=>i[o]<e);let r=i.length-1,n=0,s;for(;r-n>1;)s=n+r>>1,t(s)?n=s:r=s;return{lo:n,hi:r}}const Xa=(i,e,t,r)=>hC(i,t,r?n=>{const s=i[n][e];return s<t||s===t&&i[n+1][e]===t}:n=>i[n][e]<t),V1e=(i,e,t)=>hC(i,t,r=>i[r][e]>=t);function q1e(i,e,t){let r=0,n=i.length;for(;r<n&&i[r]<e;)r++;for(;n>r&&i[n-1]>t;)n--;return r>0||n<i.length?i.slice(r,n):i}const Hue=["push","pop","shift","splice","unshift"];function H1e(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Hue.forEach(t=>{const r="_onData"+lC(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...s){const o=n.apply(this,s);return i._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function xse(i,e){const t=i._chartjs;if(!t)return;const r=t.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(Hue.forEach(s=>{delete i[s]}),delete i._chartjs)}function Wue(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const Yue=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function Xue(i,e){let t=[],r=!1;return function(...n){t=n,r||(r=!0,Yue.call(window,()=>{r=!1,i.apply(e,t)}))}}function W1e(i,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(i,e,r)):i.apply(this,r),e}}const uC=i=>i==="start"?"left":i==="end"?"right":"center",cn=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,Y1e=(i,e,t,r)=>i===(r?"left":"right")?t:i==="center"?(e+t)/2:e;function Zue(i,e,t){const r=e.length;let n=0,s=r;if(i._sorted){const{iScale:o,_parsed:a}=i,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(n=Pr(Math.min(Xa(a,l,c).lo,t?r:Xa(e,l,o.getPixelForValue(c)).lo),0,r-1)),d?s=Pr(Math.max(Xa(a,o.axis,h,!0).hi+1,t?0:Xa(e,l,o.getPixelForValue(h),!0).hi+1),n,r)-n:s=r-n}return{start:n,count:s}}function Kue(i){const{xScale:e,yScale:t,_scaleRanges:r}=i,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return i._scaleRanges=n,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,n),s}const n0=i=>i===0||i===1,wse=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*Ai/t)),Ese=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*Ai/t)+1,Cg={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*lr)+1,easeOutSine:i=>Math.sin(i*lr),easeInOutSine:i=>-.5*(Math.cos(Li*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>n0(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>n0(i)?i:wse(i,.075,.3),easeOutElastic:i=>n0(i)?i:Ese(i,.075,.3),easeInOutElastic(i){return n0(i)?i:i<.5?.5*wse(i*2,.1125,.45):.5+.5*Ese(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-Cg.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Cg.easeInBounce(i*2)*.5:Cg.easeOutBounce(i*2-1)*.5+.5};function dC(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function D_(i){return dC(i)?i:new Zg(i)}function Yx(i){return dC(i)?i:new Zg(i).saturate(.5).darken(.1).hexString()}const X1e=["x","y","borderWidth","radius","tension"],Z1e=["color","borderColor","backgroundColor"];function K1e(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Z1e},numbers:{type:"number",properties:X1e}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function J1e(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Sse=new Map;function Q1e(i,e){e=e||{};const t=i+JSON.stringify(e);let r=Sse.get(t);return r||(r=new Intl.NumberFormat(i,e),Sse.set(t,r)),r}function Ym(i,e,t){return Q1e(e,t).format(i)}const Jue={values(i){return Ti(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const r=this.chart.options.locale;let n,s=i;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),s=eEe(i,t)}const o=rc(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ym(i,r,l)},logarithmic(i,e,t){if(i===0)return"0";const r=t[e].significand||i/Math.pow(10,Math.floor(rc(i)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?Jue.numeric.call(this,i,e,t):""}};function eEe(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var xb={formatters:Jue};function tEe(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Hh=Object.create(null),TE=Object.create(null);function Tg(i,e){if(!e)return i;const t=e.split(".");for(let r=0,n=t.length;r<n;++r){const s=t[r];i=i[s]||(i[s]=Object.create(null))}return i}function Xx(i,e,t){return typeof e=="string"?Ps(Tg(i,e),t):Ps(Tg(i,""),e)}class iEe{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>Yx(n.backgroundColor),this.hoverBorderColor=(r,n)=>Yx(n.borderColor),this.hoverColor=(r,n)=>Yx(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Xx(this,e,t)}get(e){return Tg(this,e)}describe(e,t){return Xx(TE,e,t)}override(e,t){return Xx(Hh,e,t)}route(e,t,r,n){const s=Tg(this,e),o=Tg(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[n];return kt(l)?Object.assign({},c,l):yt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var er=new iEe({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[K1e,J1e,tEe]);function rEe(i){return!i||qt(i.size)||qt(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function F_(i,e,t,r,n){let s=e[n];return s||(s=e[n]=i.measureText(n).width,t.push(n)),s>r&&(r=s),r}function nEe(i,e,t,r){r=r||{};let n=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(n=r.data={},s=r.garbageCollect=[],r.font=e),i.save(),i.font=e;let o=0;const a=t.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=t[l],u!=null&&!Ti(u))o=F_(i,n,s,o,u);else if(Ti(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!Ti(d)&&(o=F_(i,n,s,o,d));i.restore();const f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete n[s[l]];s.splice(0,f)}return o}function hh(i,e,t){const r=i.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*r)/r+n}function Cse(i,e){e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore()}function AE(i,e,t,r){Que(i,e,t,r,null)}function Que(i,e,t,r,n){let s,o,a,l,c,h,u,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*B1e;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(t,r),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(t,r,n/2,g,0,0,Ai):i.arc(t,r,g,0,Ai),i.closePath();break;case"triangle":h=n?n/2:g,i.moveTo(t+Math.sin(m)*h,r-Math.cos(m)*g),m+=_se,i.lineTo(t+Math.sin(m)*h,r-Math.cos(m)*g),m+=_se,i.lineTo(t+Math.sin(m)*h,r-Math.cos(m)*g),i.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+ch)*l,u=Math.cos(m+ch)*(n?n/2-c:l),a=Math.sin(m+ch)*l,d=Math.sin(m+ch)*(n?n/2-c:l),i.arc(t-u,r-a,c,m-Li,m-lr),i.arc(t+d,r-o,c,m-lr,m),i.arc(t+u,r+a,c,m,m+lr),i.arc(t-d,r+o,c,m+lr,m+Li),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,i.rect(t-h,r-l,2*h,2*l);break}m+=ch;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(t-u,r-a),i.lineTo(t+d,r-o),i.lineTo(t+u,r+a),i.lineTo(t-d,r+o),i.closePath();break;case"crossRot":m+=ch;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(t-u,r-a),i.lineTo(t+u,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(t-u,r-a),i.lineTo(t+u,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o),m+=ch,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(t-u,r-a),i.lineTo(t+u,r+a),i.moveTo(t+d,r-o),i.lineTo(t-d,r+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,i.moveTo(t-o,r-a),i.lineTo(t+o,r+a);break;case"dash":i.moveTo(t,r),i.lineTo(t+Math.cos(m)*(n?n/2:g),r+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function Za(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function wb(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Eb(i){i.restore()}function sEe(i,e,t,r,n){if(!e)return i.lineTo(t.x,t.y);if(n==="middle"){const s=(e.x+t.x)/2;i.lineTo(s,e.y),i.lineTo(s,t.y)}else n==="after"!=!!r?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function oEe(i,e,t,r){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function aEe(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),qt(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function lEe(i,e,t,r,n){if(n.strikethrough||n.underline){const s=i.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,h),i.lineTo(a,h),i.stroke()}}function cEe(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function Wh(i,e,t,r,n,s={}){const o=Ti(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(i.save(),i.font=n.string,aEe(i,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&cEe(i,s.backdrop),a&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),qt(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(c,t,r,s.maxWidth)),i.fillText(c,t,r,s.maxWidth),lEe(i,t,r,c,s),r+=Number(n.lineHeight);i.restore()}function Qg(i,e){const{x:t,y:r,w:n,h:s,radius:o}=e;i.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Li,Li,!0),i.lineTo(t,r+s-o.bottomLeft),i.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Li,lr,!0),i.lineTo(t+n-o.bottomRight,r+s),i.arc(t+n-o.bottomRight,r+s-o.bottomRight,o.bottomRight,lr,0,!0),i.lineTo(t+n,r+o.topRight),i.arc(t+n-o.topRight,r+o.topRight,o.topRight,0,-lr,!0),i.lineTo(t+o.topLeft,r)}const hEe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uEe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dEe(i,e){const t=(""+i).match(hEe);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const fEe=i=>+i||0;function fC(i,e){const t={},r=kt(e),n=r?Object.keys(e):e,s=kt(i)?r?o=>yt(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of n)t[o]=fEe(s(o));return t}function ede(i){return fC(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Dh(i){return fC(i,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(i){const e=ede(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wr(i,e){i=i||{},e=e||er.font;let t=yt(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=yt(i.style,e.style);r&&!(""+r).match(uEe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:yt(i.family,e.family),lineHeight:dEe(yt(i.lineHeight,e.lineHeight),t),size:t,style:r,weight:yt(i.weight,e.weight),string:""};return n.string=rEe(n),n}function sg(i,e,t,r){let n=!0,s,o,a;for(s=0,o=i.length;s<o;++s)if(a=i[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),n=!1),t!==void 0&&Ti(a)&&(a=a[t%a.length],n=!1),a!==void 0))return r&&!n&&(r.cacheable=!1),a}function pEe(i,e,t){const{min:r,max:n}=i,s=Gue(e,(n-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(n,s)}}function Lc(i,e){return Object.assign(Object.create(i),e)}function pC(i,e=[""],t,r,n=()=>i[0]){const s=t||i;typeof r>"u"&&(r=nde("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:r,_getTarget:n,override:a=>pC([a,...i],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return ide(a,l,()=>wEe(l,e,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return Ase(a).includes(l)},ownKeys(a){return Ase(a)},set(a,l,c){const h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function sf(i,e,t,r){const n={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:tde(i,r),setContext:s=>sf(i,s,t,r),override:s=>sf(i.override(s),e,t,r)};return new Proxy(n,{deleteProperty(s,o){return delete s[o],delete i[o],!0},get(s,o,a){return ide(s,o,()=>mEe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(s,o,a){return i[o]=a,delete s[o],!0}})}function tde(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=i;return{allKeys:n,scriptable:t,indexable:r,isScriptable:_c(t)?t:()=>t,isIndexable:_c(r)?r:()=>r}}const gEe=(i,e)=>i?i+lC(e):e,gC=(i,e)=>kt(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ide(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e))return i[e];const r=t();return i[e]=r,r}function mEe(i,e,t){const{_proxy:r,_context:n,_subProxy:s,_descriptors:o}=i;let a=r[e];return _c(a)&&o.isScriptable(e)&&(a=yEe(e,a,i,t)),Ti(a)&&a.length&&(a=_Ee(e,a,i,o.isIndexable)),gC(e,a)&&(a=sf(a,n,s&&s[e],o)),a}function yEe(i,e,t,r){const{_proxy:n,_context:s,_subProxy:o,_stack:a}=t;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=e(s,o||r);return a.delete(i),gC(i,l)&&(l=mC(n._scopes,n,i,l)),l}function _Ee(i,e,t,r){const{_proxy:n,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(i))return e[s.index%e.length];if(kt(e[0])){const l=e,c=n._scopes.filter(h=>h!==l);e=[];for(const h of l){const u=mC(c,n,i,h);e.push(sf(u,s,o&&o[i],a))}}return e}function rde(i,e,t){return _c(i)?i(e,t):i}const vEe=(i,e)=>i===!0?e:typeof i=="string"?yc(e,i):void 0;function bEe(i,e,t,r,n){for(const s of e){const o=vEe(t,s);if(o){i.add(o);const a=rde(o._fallback,t,n);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function mC(i,e,t,r){const n=e._rootScopes,s=rde(e._fallback,t,r),o=[...i,...n],a=new Set;a.add(r);let l=Tse(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=Tse(a,o,s,l,r),l===null)?!1:pC(Array.from(a),[""],n,s,()=>xEe(e,t,r))}function Tse(i,e,t,r,n){for(;t;)t=bEe(i,e,t,r,n);return t}function xEe(i,e,t){const r=i._getTarget();e in r||(r[e]={});const n=r[e];return Ti(n)&&kt(t)?t:n||{}}function wEe(i,e,t,r){let n;for(const s of e)if(n=nde(gEe(s,i),t),typeof n<"u")return gC(i,n)?mC(t,r,i,n):n}function nde(i,e){for(const t of e){if(!t)continue;const r=t[i];if(typeof r<"u")return r}}function Ase(i){let e=i._keys;return e||(e=i._keys=EEe(i._scopes)),e}function EEe(i){const e=new Set;for(const t of i)for(const r of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}function sde(i,e,t,r){const{iScale:n}=i,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+t,h=e[c],o[a]={r:n.parse(yc(h,s),c)};return o}const SEe=Number.EPSILON||1e-14,of=(i,e)=>e<i.length&&!i[e].skip&&i[e],ode=i=>i==="x"?"y":"x";function CEe(i,e,t,r){const n=i.skip?e:i,s=e,o=t.skip?e:t,a=CE(s,n),l=CE(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=r*c,d=r*h;return{previous:{x:s.x-u*(o.x-n.x),y:s.y-u*(o.y-n.y)},next:{x:s.x+d*(o.x-n.x),y:s.y+d*(o.y-n.y)}}}function TEe(i,e,t){const r=i.length;let n,s,o,a,l,c=of(i,0);for(let h=0;h<r-1;++h)if(l=c,c=of(i,h+1),!(!l||!c)){if(Sg(e[h],0,SEe)){t[h]=t[h+1]=0;continue}n=t[h]/e[h],s=t[h+1]/e[h],a=Math.pow(n,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=n*o*e[h],t[h+1]=s*o*e[h])}}function AEe(i,e,t="x"){const r=ode(t),n=i.length;let s,o,a,l=of(i,0);for(let c=0;c<n;++c){if(o=a,a=l,l=of(i,c+1),!a)continue;const h=a[t],u=a[r];o&&(s=(h-o[t])/3,a[`cp1${t}`]=h-s,a[`cp1${r}`]=u-s*e[c]),l&&(s=(l[t]-h)/3,a[`cp2${t}`]=h+s,a[`cp2${r}`]=u+s*e[c])}}function MEe(i,e="x"){const t=ode(e),r=i.length,n=Array(r).fill(0),s=Array(r);let o,a,l,c=of(i,0);for(o=0;o<r;++o)if(a=l,l=c,c=of(i,o+1),!!l){if(c){const h=c[e]-l[e];n[o]=h!==0?(c[t]-l[t])/h:0}s[o]=a?c?ha(n[o-1])!==ha(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}TEe(i,n,s),AEe(i,s,e)}function s0(i,e,t){return Math.max(Math.min(i,t),e)}function REe(i,e){let t,r,n,s,o,a=Za(i[0],e);for(t=0,r=i.length;t<r;++t)o=s,s=a,a=t<r-1&&Za(i[t+1],e),s&&(n=i[t],o&&(n.cp1x=s0(n.cp1x,e.left,e.right),n.cp1y=s0(n.cp1y,e.top,e.bottom)),a&&(n.cp2x=s0(n.cp2x,e.left,e.right),n.cp2y=s0(n.cp2y,e.top,e.bottom)))}function LEe(i,e,t,r,n){let s,o,a,l;if(e.spanGaps&&(i=i.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")MEe(i,n);else{let c=r?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)a=i[s],l=CEe(c,a,i[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&REe(i,t)}function yC(){return typeof window<"u"&&typeof document<"u"}function _C(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function N_(i,e,t){let r;return typeof i=="string"?(r=parseInt(i,10),i.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=i,r}const Sb=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function IEe(i,e){return Sb(i).getPropertyValue(e)}const PEe=["top","right","bottom","left"];function Fh(i,e,t){const r={};t=t?"-"+t:"";for(let n=0;n<4;n++){const s=PEe[n];r[s]=parseFloat(i[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const kEe=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function OEe(i,e){const t=i.touches,r=t&&t.length?t[0]:i,{offsetX:n,offsetY:s}=r;let o=!1,a,l;if(kEe(n,s,i.target))a=n,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function wh(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:r}=e,n=Sb(t),s=n.boxSizing==="border-box",o=Fh(n,"padding"),a=Fh(n,"border","width"),{x:l,y:c,box:h}=OEe(i,t),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*t.width/r),y:Math.round((c-d)/p*t.height/r)}}function DEe(i,e,t){let r,n;if(e===void 0||t===void 0){const s=_C(i);if(!s)e=i.clientWidth,t=i.clientHeight;else{const o=s.getBoundingClientRect(),a=Sb(s),l=Fh(a,"border","width"),c=Fh(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,r=N_(a.maxWidth,s,"clientWidth"),n=N_(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||O_,maxHeight:n||O_}}const o0=i=>Math.round(i*10)/10;function FEe(i,e,t,r){const n=Sb(i),s=Fh(n,"margin"),o=N_(n.maxWidth,i,"clientWidth")||O_,a=N_(n.maxHeight,i,"clientHeight")||O_,l=DEe(i,e,t);let{width:c,height:h}=l;if(n.boxSizing==="content-box"){const d=Fh(n,"border","width"),f=Fh(n,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=o0(Math.min(c,o,l.maxWidth)),h=o0(Math.min(h,a,l.maxHeight)),c&&!h&&(h=o0(c/2)),(e!==void 0||t!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=o0(Math.floor(h*r))),{width:c,height:h}}function Mse(i,e,t){const r=e||1,n=Math.floor(i.height*r),s=Math.floor(i.width*r);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==r||o.height!==n||o.width!==s?(i.currentDevicePixelRatio=r,o.height=n,o.width=s,i.ctx.setTransform(r,0,0,r,0,0),!0):!1}const NEe=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};yC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Rse(i,e){const t=IEe(i,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Eh(i,e,t,r){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function $Ee(i,e,t,r){return{x:i.x+t*(e.x-i.x),y:r==="middle"?t<.5?i.y:e.y:r==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function BEe(i,e,t,r){const n={x:i.cp2x,y:i.cp2y},s={x:e.cp1x,y:e.cp1y},o=Eh(i,n,t),a=Eh(n,s,t),l=Eh(s,e,t),c=Eh(o,a,t),h=Eh(a,l,t);return Eh(c,h,t)}const jEe=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},zEe=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function $d(i,e,t){return i?jEe(e,t):zEe()}function ade(i,e){let t,r;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=r)}function lde(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function cde(i){return i==="angle"?{between:Jg,compare:G1e,normalize:xs}:{between:Ya,compare:(e,t)=>e-t,normalize:e=>e}}function Lse({start:i,end:e,count:t,loop:r,style:n}){return{start:i%t,end:e%t,loop:r&&(e-i+1)%t===0,style:n}}function GEe(i,e,t){const{property:r,start:n,end:s}=t,{between:o,normalize:a}=cde(r),l=e.length;let{start:c,end:h,loop:u}=i,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),n,s);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:i.style}}function hde(i,e,t){if(!t)return[i];const{property:r,start:n,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=cde(r),{start:h,end:u,loop:d,style:f}=GEe(i,e,t),p=[];let g=!1,m=null,y,_,v;const x=()=>l(n,v,y)&&a(n,v)!==0,w=()=>a(s,y)===0||l(s,v,y),T=()=>g||x(),A=()=>!g||w();for(let R=h,L=h;R<=u;++R)_=e[R%o],!_.skip&&(y=c(_[r]),y!==v&&(g=l(y,n,s),m===null&&T()&&(m=a(y,n)===0?R:L),m!==null&&A()&&(p.push(Lse({start:m,end:R,loop:d,count:o,style:f})),m=null),L=R,v=y));return m!==null&&p.push(Lse({start:m,end:u,loop:d,count:o,style:f})),p}function ude(i,e){const t=[],r=i.segments;for(let n=0;n<r.length;n++){const s=hde(r[n],i.points,e);s.length&&t.push(...s)}return t}function UEe(i,e,t,r){let n=0,s=e-1;if(t&&!r)for(;n<e&&!i[n].skip;)n++;for(;n<e&&i[n].skip;)n++;for(n%=e,t&&(s+=n);s>n&&i[s%e].skip;)s--;return s%=e,{start:n,end:s}}function VEe(i,e,t,r){const n=i.length,s=[];let o=e,a=i[e],l;for(l=e+1;l<=t;++l){const c=i[l%n];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%n,end:(l-1)%n,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%n,end:o%n,loop:r}),s}function qEe(i,e){const t=i.points,r=i.options.spanGaps,n=t.length;if(!n)return[];const s=!!i._loop,{start:o,end:a}=UEe(t,n,s,r);if(r===!0)return Ise(i,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+n:a,c=!!i._fullLoop&&o===0&&a===n-1;return Ise(i,VEe(t,o,l,c),t,e)}function Ise(i,e,t,r){return!r||!r.setContext||!t?e:HEe(i,e,t,r)}function HEe(i,e,t,r){const n=i._chart.getContext(),s=Pse(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=t.length,c=[];let h=s,u=e[0].start,d=u;function f(p,g,m,y){const _=a?-1:1;if(p!==g){for(p+=l;t[p%l].skip;)p-=_;for(;t[g%l].skip;)g+=_;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:y}),h=y,u=g%l)}}for(const p of e){u=a?u:p.start;let g=t[u%l],m;for(d=u+1;d<=p.end;d++){const y=t[d%l];m=Pse(r.setContext(Lc(n,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),WEe(m,h)&&f(u,d-1,p.loop,h),g=y,h=m}u<d-1&&f(u,d-1,p.loop,h)}return c}function Pse(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function WEe(i,e){if(!e)return!1;const t=[],r=function(n,s){return dC(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(i,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class YEe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const s=t.listeners[n],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Yue.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(n.draw(),this._notify(n,r,e,"progress")),s.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Na=new YEe;const kse="transparent",XEe={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const r=D_(i||kse),n=r.valid&&D_(e||kse);return n&&n.valid?n.mix(r,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class ZEe{constructor(e,t,r,n){const s=t[r];n=sg([e.to,n,s,e.from]);const o=sg([e.from,s,n]);this._active=!0,this._fn=e.fn||XEe[e.type||typeof o],this._easing=Cg[e.easing]||Cg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=sg([e.to,t,n,e.from]),this._from=sg([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[n]=a,this._notify(!0);return}if(t<0){this._target[n]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class dde{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!kt(e))return;const t=Object.keys(er.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const s=e[n];if(!kt(s))return;const o={};for(const a of t)o[a]=s[a];(Ti(s.properties)&&s.properties||[n]).forEach(a=>{(a===n||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,n=JEe(e,r);if(!n)return[];const s=this._createAnimations(n,r);return r.$shared&&KEe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,n=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(e,t));continue}const h=t[c];let u=s[c];const d=r.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){e[c]=h;continue}s[c]=u=new ZEe(d,e,c,h),n.push(u)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Na.add(this._chart,r),!0}}function KEe(i,e){const t=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const s=i[r[n]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function JEe(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Ose(i,e){const t=i&&i.options||{},r=t.reverse,n=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:n,end:r?n:s}}function QEe(i,e,t){if(t===!1)return!1;const r=Ose(i,t),n=Ose(e,t);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function eSe(i){let e,t,r,n;return kt(i)?(e=i.top,t=i.right,r=i.bottom,n=i.left):e=t=r=n=i,{top:e,right:t,bottom:r,left:n,disabled:i===!1}}function fde(i,e){const t=[],r=i._getSortedDatasetMetas(e);let n,s;for(n=0,s=r.length;n<s;++n)t.push(r[n].index);return t}function Dse(i,e,t,r={}){const n=i.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===t){if(r.all)continue;break}c=i.values[l],Qi(c)&&(s||e===0||ha(e)===ha(c))&&(e+=c)}return e}}function tSe(i){const e=Object.keys(i),t=new Array(e.length);let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],t[r]={x:s,y:i[s]};return t}function Fse(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function iSe(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function rSe(i){const{min:e,max:t,minDefined:r,maxDefined:n}=i.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function nSe(i,e,t){const r=i[e]||(i[e]={});return r[t]||(r[t]={})}function Nse(i,e,t,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const s=i[n.index];if(t&&s>0||!t&&s<0)return n.index}return null}function $se(i,e){const{chart:t,_cachedMeta:r}=i,n=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=iSe(s,o,r),u=e.length;let d;for(let f=0;f<u;++f){const p=e[f],{[l]:g,[c]:m}=p,y=p._stacks||(p._stacks={});d=y[c]=nSe(n,h,g),d[a]=m,d._top=Nse(d,o,!0,r.type),d._bottom=Nse(d,o,!1,r.type);const _=d._visualValues||(d._visualValues={});_[a]=m}}function Zx(i,e){const t=i.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function sSe(i,e){return Lc(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oSe(i,e,t){return Lc(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Bp(i,e){const t=i.controller.index,r=i.vScale&&i.vScale.axis;if(r){e=e||i._parsed;for(const n of e){const s=n._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const Kx=i=>i==="reset"||i==="none",Bse=(i,e)=>e?i:Object.assign({},i),aSe=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:fde(t,!0),values:null};class To{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Fse(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Bp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(u,d,f,p)=>u==="x"?d:u==="r"?p:f,s=t.xAxisID=yt(r.xAxisID,Zx(e,"x")),o=t.yAxisID=yt(r.yAxisID,Zx(e,"y")),a=t.rAxisID=yt(r.rAxisID,Zx(e,"r")),l=t.indexAxis,c=t.iAxisID=n(l,s,o,a),h=t.vAxisID=n(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&xse(this._data,this),e._stacked&&Bp(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(kt(t))this._data=tSe(t);else if(r!==t){if(r){xse(r,this);const n=this._cachedMeta;Bp(n),n._parsed=[]}t&&Object.isExtensible(t)&&H1e(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const s=t._stacked;t._stacked=Fse(t.vScale,t),t.stack!==r.stack&&(n=!0,Bp(t),t.stack=r.stack),this._resyncElements(e),(n||s!==t._stacked)&&$se(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===n.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,u,d;if(this._parsing===!1)r._parsed=n,r._sorted=!0,d=n;else{Ti(n[e])?d=this.parseArrayData(r,n,e,t):kt(n[e])?d=this.parseObjectData(r,n,e,t):d=this.parsePrimitiveData(r,n,e,t);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<t;++h)r._parsed[h+e]=u=d[h],l&&(f()&&(l=!1),c=u);r._sorted=l}o&&$se(this,d)}parsePrimitiveData(e,t,r,n){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,u=new Array(n);let d,f,p;for(d=0,f=n;d<f;++d)p=d+r,u[d]={[a]:h||s.parse(c[p],p),[l]:o.parse(t[p],p)};return u}parseArrayData(e,t,r,n){const{xScale:s,yScale:o}=e,a=new Array(n);let l,c,h,u;for(l=0,c=n;l<c;++l)h=l+r,u=t[h],a[l]={x:s.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(e,t,r,n){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let h,u,d,f;for(h=0,u=n;h<u;++h)d=h+r,f=t[d],c[h]={x:s.parse(yc(f,a),d),y:o.parse(yc(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:fde(n,!0),values:t._stacks[e.axis]._visualValues};return Dse(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const s=r[t.axis];let o=s===null?NaN:s;const a=n&&r._stacks[t.axis];n&&a&&(n.values=a,o=Dse(n,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,s=r._sorted&&e===r.iScale,o=n.length,a=this._getOtherScale(e),l=aSe(t,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=rSe(a);let d,f;function p(){f=n[d];const g=f[a.axis];return!Qi(f[e.axis])||h>g||u<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n][e.axis],Qi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=eSe(yt(this.options.clip,QEe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const u=n[h];u.hidden||(u.active&&c?o.push(u):u.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=oSe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=n.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=sSe(this.chart.getContext(),this.index)),s.dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const n=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&Kg(r);if(a)return Bse(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),u=n?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(er.elements[e]),p=()=>this.getContext(r,n,t),g=c.resolveNamedOptions(d,f,p,u);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(Bse(g,l))),g}_resolveAnimations(e,t,r){const n=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(n.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,t),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(e,r,t))}const c=new dde(n,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Kx(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==n;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,n){Kx(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!Kx(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const s=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=r.length,s=t.length,o=Math.min(s,n);o&&this.parse(0,o),s>n?this._insertElements(n,s-n,e):s<n&&this._removeElements(s,n-s)}_insertElements(e,t,r=!0){const n=this._cachedMeta,s=n.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Bp(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ee(To,"defaults",{}),ee(To,"datasetElementType",null),ee(To,"dataElementType",null);function lSe(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let r=[];for(let n=0,s=t.length;n<s;n++)r=r.concat(t[n].controller.getAllParsedValues(i));i._cache.$bar=Wue(r.sort((n,s)=>n-s))}return i._cache.$bar}function cSe(i){const e=i.iScale,t=lSe(e,i.type);let r=e._length,n,s,o,a;const l=()=>{o===32767||o===-32768||(Kg(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(n=0,s=t.length;n<s;++n)o=e.getPixelForValue(t[n]),l();for(a=void 0,n=0,s=e.ticks.length;n<s;++n)o=e.getPixelForTick(n),l();return r}function hSe(i,e,t,r){const n=t.barThickness;let s,o;return qt(n)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=n*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[i]-s/2}}function uSe(i,e,t,r){const n=e.pixels,s=n[i];let o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:c}}function dSe(i,e,t,r){const n=t.parse(i[0],r),s=t.parse(i[1],r),o=Math.min(n,s),a=Math.max(n,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:n,end:s,min:o,max:a}}function pde(i,e,t,r){return Ti(i)?dSe(i,e,t,r):e[t.axis]=t.parse(i,r),e}function jse(i,e,t,r){const n=i.iScale,s=i.vScale,o=n.getLabels(),a=n===s,l=[];let c,h,u,d;for(c=t,h=t+r;c<h;++c)d=e[c],u={},u[n.axis]=a||n.parse(o[c],c),l.push(pde(d,u,s,c));return l}function Jx(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function fSe(i,e,t){return i!==0?ha(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function pSe(i){let e,t,r,n,s;return i.horizontal?(e=i.base>i.x,t="left",r="right"):(e=i.base<i.y,t="bottom",r="top"),e?(n="end",s="start"):(n="start",s="end"),{start:t,end:r,reverse:e,top:n,bottom:s}}function gSe(i,e,t,r){let n=e.borderSkipped;const s={};if(!n){i.borderSkipped=s;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=pSe(i);n==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===r?n=c:(t._bottom||0)===r?n=h:(s[zse(h,o,a,l)]=!0,n=c)),s[zse(n,o,a,l)]=!0,i.borderSkipped=s}function zse(i,e,t,r){return r?(i=mSe(i,e,t),i=Gse(i,t,e)):i=Gse(i,e,t),i}function mSe(i,e,t){return i===e?t:i===t?e:i}function Gse(i,e,t){return i==="start"?e:i==="end"?t:i}function ySe(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class fc extends To{parsePrimitiveData(e,t,r,n){return jse(e,t,r,n)}parseArrayData(e,t,r,n){return jse(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,p,g;for(d=r,f=r+n;d<f;++d)g=t[d],p={},p[s.axis]=s.parse(yc(g,c),d),u.push(pde(yc(g,h),p,o,d));return u}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,s=this.getParsed(e),o=s._custom,a=Jx(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(s[n.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const s=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,n);for(let f=t;f<t+r;f++){const p=this.getParsed(f),g=s||qt(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,h),y=(p._stacks||{})[a.axis],_={horizontal:c,base:g.base,enableBorderRadius:!y||Jx(p._custom)||o===y._top||o===y._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};d&&(_.options=u||this.resolveDataElementOptions(f,e[f].active?"active":n));const v=_.options||e[f].options;gSe(_,v,y,o),ySe(_,v,h.ratio),this.updateElement(e[f],f,_,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(t),h=c&&c[l.vScale.axis];if(qt(h)||isNaN(h))return!0};for(const l of n)if(!(t!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const n=this._getStacks(e,r),s=t!==void 0?n.indexOf(t):-1;return s===-1?n.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let s,o;for(s=0,o=t.data.length;s<o;++s)n.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||cSe(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=Jx(c);let u=l[t.axis],d=0,f=r?this.applyStack(t,l,r):u,p,g;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&ha(u)!==ha(c.barEnd)&&(d=0),d+=u);const m=!qt(s)&&!h?s:d;let y=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(d+f):p=y,g=p-y,Math.abs(g)<o){g=fSe(g,t,a)*o,u===a&&(y-=g/2);const _=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),x=Math.min(_,v),w=Math.max(_,v);y=Math.max(Math.min(y,w),x),p=y+g,r&&!h&&(l._stacks[t.axis]._visualValues[n]=t.getValueForPixel(p)-t.getValueForPixel(y))}if(y===t.getPixelForValue(a)){const _=ha(g)*t.getLineWidthForValue(a)/2;y+=_,g-=_}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,s=n.skipNull,o=yt(n.maxBarThickness,1/0);let a,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,h=n.barThickness==="flex"?uSe(e,t,n,c):hSe(e,t,n,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let s=0;for(;s<n;++s)this.getParsed(s)[t.axis]!==null&&r[s].draw(this._ctx)}}ee(fc,"id","bar"),ee(fc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ee(fc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class d_ extends To{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,n){const s=super.parseArrayData(e,t,r,n);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=yt(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=yt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=t,o=this.getParsed(e),a=n.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,n),h=o.axis,u=a.axis;for(let d=t;d<t+r;d++){const f=e[d],p=!s&&this.getParsed(d),g={},m=g[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[h]),y=g[u]=s?a.getBasePixel():a.getPixelForValue(p[u]);g.skip=isNaN(m)||isNaN(y),c&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":n),s&&(g.options.radius=0)),this.updateElement(f,d,g,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const s=n.radius;return t!=="active"&&(n.radius=0),n.radius+=yt(r&&r._custom,s),n}}ee(d_,"id","bubble"),ee(d_,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ee(d_,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function _Se(i,e,t){let r=1,n=1,s=0,o=0;if(e<Ai){const a=i,l=a+e,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(v,x,w)=>Jg(v,a,l,!0)?1:Math.max(x,x*t,w,w*t),p=(v,x,w)=>Jg(v,a,l,!0)?-1:Math.min(x,x*t,w,w*t),g=f(0,c,u),m=f(lr,h,d),y=p(Li,c,u),_=p(Li+lr,h,d);r=(g-y)/2,n=(m-_)/2,s=-(g+y)/2,o=-(m+_)/2}return{ratioX:r,ratioY:n,offsetX:s,offsetY:o}}class Rh extends To{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let s=l=>+r[l];if(kt(r[e])){const{key:l="value"}=this._parsing;s=c=>+yc(r[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)n._parsed[o]=s(o)}}_getRotation(){return Eo(this.options.rotation-90)}_getCircumference(){return Eo(this.options.circumference)}_getRotationExtents(){let e=Ai,t=-Ai;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,s=n._getRotation(),o=n._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,s=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(P1e(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=_Se(u,h,l),m=(r.width-o)/d,y=(r.height-o)/f,_=Math.max(Math.min(m,y)/2,0),v=Gue(this.options.radius,_),x=Math.max(v*l,0),w=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,n.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*s/Ai)}updateElements(e,t,r,n){const s=n==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(t,n);let y=this._getRotation(),_;for(_=0;_<t;++_)y+=this._circumference(_,s);for(_=t;_<t+r;++_){const v=this._circumference(_,s),x=e[_],w={x:h+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:p,innerRadius:f};m&&(w.options=g||this.resolveDataElementOptions(_,x.active?"active":n)),y+=v,this.updateElement(x,_,w,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,n;for(n=0;n<t.length;n++){const s=e._parsed[n];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ai*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Ym(t._parsed[e],r.options.locale);return{label:n[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,s,o,a,l;if(!e){for(n=0,s=r.data.datasets.length;n<s;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),e=o.data,a=o.controller;break}}if(!e)return 0;for(n=0,s=e.length;n<s;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(yt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ee(Rh,"id","doughnut"),ee(Rh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ee(Rh,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ee(Rh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class il extends To{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=Zue(t,n,o);this._drawStart=a,this._drawCount=l,Kue(t)&&(a=0,l=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(n,a,l,e)}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,n),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=nf(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||n==="none",_=t+r,v=e.length;let x=t>0&&this.getParsed(t-1);for(let w=0;w<v;++w){const T=e[w],A=y?T:{};if(w<t||w>=_){A.skip=!0;continue}const R=this.getParsed(w),L=qt(R[f]),P=A[d]=o.getPixelForValue(R[d],w),F=A[f]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,R,l):R[f],w);A.skip=isNaN(P)||isNaN(F)||L,A.stop=w>0&&Math.abs(R[d]-x[d])>m,g&&(A.parsed=R,A.raw=c.data[w]),u&&(A.options=h||this.resolveDataElementOptions(w,T.active?"active":n)),y||this.updateElement(T,w,A,n),x=R}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ee(il,"id","line"),ee(il,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ee(il,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ua extends To{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Ym(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:s}}parseObjectData(e,t,r,n){return sde.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,n)=>{const s=this.getParsed(n).r;!isNaN(s)&&this.chart.getDataVisibility(n)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(n/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,r,n){const s=n==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*Li;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<t;++p)f+=this._computeAngle(p,n,g);for(p=t;p<t+r;p++){const m=e[p];let y=f,_=f+this._computeAngle(p,n,g),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=_,s&&(l.animateScale&&(v=0),l.animateRotate&&(y=_=d));const x={x:h,y:u,innerRadius:0,outerRadius:v,startAngle:y,endAngle:_,options:this.resolveDataElementOptions(p,m.active?"active":n)};this.updateElement(m,p,x,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Eo(this.resolveDataElementOptions(e,t).angle||r):0}}ee(ua,"id","polarArea"),ee(ua,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ee(ua,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ME extends Rh{}ee(ME,"id","pie"),ee(ME,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class f_ extends To{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return sde.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],s=t.iScale.getLabels();if(r.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===n.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const s=this._cachedMeta.rScale,o=n==="reset";for(let a=t;a<t+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":n),h=s.getPointPositionForValue(a,this.getParsed(a).r),u=o?s.xCenter:h.x,d=o?s.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,n)}}}ee(f_,"id","radar"),ee(f_,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ee(f_,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Nh extends To{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=t,o=this.getParsed(e),a=n.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:s,count:o}=Zue(t,r,n);if(this._drawStart=s,this._drawCount=o,Kue(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const s=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(t,n),u=this.getSharedOptions(h),d=this.includeOptions(n,u),f=o.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,y=nf(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||n==="none";let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+r;++x){const w=e[x],T=this.getParsed(x),A=_?w:{},R=qt(T[p]),L=A[f]=o.getPixelForValue(T[f],x),P=A[p]=s||R?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],x);A.skip=isNaN(L)||isNaN(P)||R,A.stop=x>0&&Math.abs(T[f]-v[f])>y,m&&(A.parsed=T,A.raw=c.data[x]),d&&(A.options=u||this.resolveDataElementOptions(x,w.active?"active":n)),_||this.updateElement(w,x,A,n),v=T}this.updateSharedOptions(u,n,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,s,o)/2}}ee(Nh,"id","scatter"),ee(Nh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ee(Nh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var vSe=Object.freeze({__proto__:null,BarController:fc,BubbleController:d_,DoughnutController:Rh,LineController:il,PieController:ME,PolarAreaController:ua,RadarController:f_,ScatterController:Nh});function uh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vC{constructor(e){ee(this,"options");this.options=e||{}}static override(e){Object.assign(vC.prototype,e)}init(){}formats(){return uh()}parse(){return uh()}format(){return uh()}add(){return uh()}diff(){return uh()}startOf(){return uh()}endOf(){return uh()}}var gde={_date:vC};function bSe(i,e,t,r){const{controller:n,data:s,_sorted:o}=i,a=n._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?V1e:Xa;if(r){if(n._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const u=l(s,e,t-h),d=l(s,e,t+h);return{lo:u.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function Xm(i,e,t,r,n){const s=i.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:u,hi:d}=bSe(s[a],e,o,n);for(let f=u;f<=d;++f){const p=h[f];p.skip||r(p,c,f)}}}function xSe(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(r,n){const s=e?Math.abs(r.x-n.x):0,o=t?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Qx(i,e,t,r,n){const s=[];return!n&&!i.isPointInArea(e)||Xm(i,t,e,function(a,l,c){!n&&!Za(a,i.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function wSe(i,e,t,r){let n=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:u}=que(o,{x:e.x,y:e.y});Jg(u,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return Xm(i,t,e,s),n}function ESe(i,e,t,r,n,s){let o=[];const a=xSe(t);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(e.x,e.y,n);if(r&&!f)return;const p=h.getCenterPoint(n);if(!(!!s||i.isPointInArea(p))&&!f)return;const m=a(e,p);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return Xm(i,t,e,c),o}function ew(i,e,t,r,n,s){return!s&&!i.isPointInArea(e)?[]:t==="r"&&!r?wSe(i,e,t,n):ESe(i,e,t,r,n,s)}function Use(i,e,t,r,n){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Xm(i,t,e,(l,c,h)=>{l[o](e[t],n)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,n))}),r&&!a?[]:s}var SSe={evaluateInteractionItems:Xm,modes:{index(i,e,t,r){const n=wh(e,i),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Qx(i,n,s,r,o):ew(i,n,s,!1,r,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(i,e,t,r){const n=wh(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Qx(i,n,s,r,o):ew(i,n,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(i,e,t,r){const n=wh(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return Qx(i,n,s,r,o)},nearest(i,e,t,r){const n=wh(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return ew(i,n,s,t.intersect,r,o)},x(i,e,t,r){const n=wh(e,i);return Use(i,n,"x",t.intersect,r)},y(i,e,t,r){const n=wh(e,i);return Use(i,n,"y",t.intersect,r)}}};const mde=["left","top","right","bottom"];function jp(i,e){return i.filter(t=>t.pos===e)}function Vse(i,e){return i.filter(t=>mde.indexOf(t.pos)===-1&&t.box.axis===e)}function zp(i,e){return i.sort((t,r)=>{const n=e?r:t,s=e?t:r;return n.weight===s.weight?n.index-s.index:n.weight-s.weight})}function CSe(i){const e=[];let t,r,n,s,o,a;for(t=0,r=(i||[]).length;t<r;++t)n=i[t],{position:s,options:{stack:o,stackWeight:a=1}}=n,e.push({index:t,box:n,pos:s,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&s+o,stackWeight:a});return e}function TSe(i){const e={};for(const t of i){const{stack:r,pos:n,stackWeight:s}=t;if(!r||!mde.includes(n))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function ASe(i,e){const t=TSe(i),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let s,o,a;for(s=0,o=i.length;s<o;++s){a=i[s];const{fullSize:l}=a.box,c=t[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=n):(a.width=r,a.height=h?h*n:l&&e.availableHeight)}return t}function MSe(i){const e=CSe(i),t=zp(e.filter(c=>c.box.fullSize),!0),r=zp(jp(e,"left"),!0),n=zp(jp(e,"right")),s=zp(jp(e,"top"),!0),o=zp(jp(e,"bottom")),a=Vse(e,"x"),l=Vse(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:jp(e,"chartArea"),vertical:r.concat(n).concat(l),horizontal:s.concat(o).concat(a)}}function qse(i,e,t,r){return Math.max(i[t],e[t])+Math.max(i[r],e[r])}function yde(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function RSe(i,e,t,r){const{pos:n,box:s}=t,o=i.maxPadding;if(!kt(n)){t.size&&(i[n]-=t.size);const u=r[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?s.height:s.width),t.size=u.size/u.count,i[n]+=t.size}s.getPadding&&yde(o,s.getPadding());const a=Math.max(0,e.outerWidth-qse(o,i,"left","right")),l=Math.max(0,e.outerHeight-qse(o,i,"top","bottom")),c=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,t.horizontal?{same:c,other:h}:{same:h,other:c}}function LSe(i){const e=i.maxPadding;function t(r){const n=Math.max(e[r]-i[r],0);return i[r]+=n,n}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function ISe(i,e){const t=e.maxPadding;function r(n){const s={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(i?["left","right"]:["top","bottom"])}function og(i,e,t,r){const n=[];let s,o,a,l,c,h;for(s=0,o=i.length,c=0;s<o;++s){a=i[s],l=a.box,l.update(a.width||e.w,a.height||e.h,ISe(a.horizontal,e));const{same:u,other:d}=RSe(e,t,a,r);c|=u&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&og(n,e,t,r)||h}function a0(i,e,t,r,n){i.top=t,i.left=e,i.right=e+r,i.bottom=t+n,i.width=r,i.height=n}function Hse(i,e,t,r){const n=t.padding;let{x:s,y:o}=e;for(const a of i){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=e.w*h,d=c.size||l.height;Kg(c.start)&&(o=c.start),l.fullSize?a0(l,n.left,o,t.outerWidth-n.right-n.left,d):a0(l,e.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=e.h*h,d=c.size||l.width;Kg(c.start)&&(s=c.start),l.fullSize?a0(l,s,n.top,d,t.outerHeight-n.bottom-n.top):a0(l,s,e.top+c.placed,d,u),c.start=s,c.placed+=u,s=l.right}}e.x=s,e.y=o}var pn={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,r){if(!i)return;const n=yn(i.options.layout.padding),s=Math.max(e-n.width,0),o=Math.max(t-n.height,0),a=MSe(i.boxes),l=a.vertical,c=a.horizontal;di(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const h=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},n);yde(d,yn(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:n.left,y:n.top},n),p=ASe(l.concat(c),u);og(a.fullSize,f,u,p),og(l,f,u,p),og(c,f,u,p)&&og(l,f,u,p),LSe(f),Hse(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Hse(a.rightAndBottom,f,u,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},di(a.chartArea,g=>{const m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class _de{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class PSe extends _de{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const p_="$chartjs",kSe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wse=i=>i===null||i==="";function OSe(i,e){const t=i.style,r=i.getAttribute("height"),n=i.getAttribute("width");if(i[p_]={initial:{height:r,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Wse(n)){const s=Rse(i,"width");s!==void 0&&(i.width=s)}if(Wse(r))if(i.style.height==="")i.height=i.width/(e||2);else{const s=Rse(i,"height");s!==void 0&&(i.height=s)}return i}const vde=NEe?{passive:!0}:!1;function DSe(i,e,t){i&&i.addEventListener(e,t,vde)}function FSe(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,vde)}function NSe(i,e){const t=kSe[i.type]||i.type,{x:r,y:n}=wh(i,e);return{type:t,chart:e,native:i,x:r!==void 0?r:null,y:n!==void 0?n:null}}function $_(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function $Se(i,e,t){const r=i.canvas,n=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||$_(a.addedNodes,r),o=o&&!$_(a.removedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function BSe(i,e,t){const r=i.canvas,n=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||$_(a.removedNodes,r),o=o&&!$_(a.addedNodes,r);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const em=new Map;let Yse=0;function bde(){const i=window.devicePixelRatio;i!==Yse&&(Yse=i,em.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function jSe(i,e){em.size||window.addEventListener("resize",bde),em.set(i,e)}function zSe(i){em.delete(i),em.size||window.removeEventListener("resize",bde)}function GSe(i,e,t){const r=i.canvas,n=r&&_C(r);if(!n)return;const s=Xue((a,l)=>{const c=n.clientWidth;t(a,l),c<n.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(n),jSe(i,s),o}function tw(i,e,t){t&&t.disconnect(),e==="resize"&&zSe(i)}function USe(i,e,t){const r=i.canvas,n=Xue(s=>{i.ctx!==null&&t(NSe(s,i))},i);return DSe(r,e,n),n}class VSe extends _de{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(OSe(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[p_])return!1;const r=t[p_].initial;["height","width"].forEach(s=>{const o=r[s];qt(o)?t.removeAttribute(s):t.setAttribute(s,o)});const n=r.style||{};return Object.keys(n).forEach(s=>{t.style[s]=n[s]}),t.width=t.width,delete t[p_],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:$Se,detach:BSe,resize:GSe}[t]||USe;n[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:tw,detach:tw,resize:tw}[t]||FSe)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return FEe(e,t,r,n)}isAttached(e){const t=_C(e);return!!(t&&t.isConnected)}}function qSe(i){return!yC()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?PSe:VSe}var u_;let _l=(u_=class{constructor(){ee(this,"x");ee(this,"y");ee(this,"active",!1);ee(this,"options");ee(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return nf(this.x)&&nf(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(s=>{n[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),n}},ee(u_,"defaults",{}),ee(u_,"defaultRoutes"),u_);function HSe(i,e){const t=i.options.ticks,r=WSe(i),n=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?XSe(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>n)return ZSe(e,c,s,o/n),c;const h=YSe(s,e,n);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(l0(e,c,h,qt(f)?0:a-f,a),u=0,d=o-1;u<d;u++)l0(e,c,h,s[u],s[u+1]);return l0(e,c,h,l,qt(f)?e.length:l+f),c}return l0(e,c,h),c}function WSe(i){const e=i.options.offset,t=i._tickSize(),r=i._length/t+(e?0:1),n=i._maxLength/t;return Math.floor(Math.min(r,n))}function YSe(i,e,t){const r=KSe(i),n=e.length/t;if(!r)return Math.max(n,1);const s=j1e(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>n)return l}return Math.max(n,1)}function XSe(i){const e=[];let t,r;for(t=0,r=i.length;t<r;t++)i[t].major&&e.push(t);return e}function ZSe(i,e,t,r){let n=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<i.length;o++)o===s&&(e.push(i[o]),n++,s=t[n*r])}function l0(i,e,t,r,n){const s=yt(r,0),o=Math.min(yt(n,i.length),i.length);let a=0,l,c,h;for(t=Math.ceil(t),n&&(l=n-r,t=l/Math.floor(l/t)),h=s;h<0;)a++,h=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(i[c]),a++,h=Math.round(s+a*t))}function KSe(i){const e=i.length;let t,r;if(e<2)return!1;for(r=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==r)return!1;return r}const JSe=i=>i==="left"?"right":i==="right"?"left":i,Xse=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Zse=(i,e)=>Math.min(e||i,i);function Kse(i,e){const t=[],r=i.length/e,n=i.length;let s=0;for(;s<n;s+=r)t.push(i[Math.floor(s)]);return t}function QSe(i,e,t){const r=i.ticks.length,n=Math.min(e,r-1),s=i._startPixel,o=i._endPixel,a=1e-6;let l=i.getPixelForTick(n),c;if(!(t&&(r===1?c=Math.max(l-s,o-l):e===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(n-1))/2,l+=n<e?c:-c,l<s-a||l>o+a)))return l}function eCe(i,e){di(i,t=>{const r=t.gc,n=r.length/2;let s;if(n>e){for(s=0;s<n;++s)delete t.data[r[s]];r.splice(0,n)}})}function Gp(i){return i.drawTicks?i.tickLength:0}function Jse(i,e){if(!i.display)return 0;const t=wr(i.font,e),r=yn(i.padding);return(Ti(i.text)?i.text.length:1)*t.lineHeight+r.height}function tCe(i,e){return Lc(i,{scale:e,type:"scale"})}function iCe(i,e,t){return Lc(i,{tick:t,index:e,type:"tick"})}function rCe(i,e,t){let r=uC(i);return(t&&e!=="right"||!t&&e==="right")&&(r=JSe(r)),r}function nCe(i,e,t,r){const{top:n,left:s,bottom:o,right:a,chart:l}=i,{chartArea:c,scales:h}=l;let u=0,d,f,p;const g=o-n,m=a-s;if(i.isHorizontal()){if(f=cn(r,s,a),kt(t)){const y=Object.keys(t)[0],_=t[y];p=h[y].getPixelForValue(_)+g-e}else t==="center"?p=(c.bottom+c.top)/2+g-e:p=Xse(i,t,e);d=a-s}else{if(kt(t)){const y=Object.keys(t)[0],_=t[y];f=h[y].getPixelForValue(_)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=Xse(i,t,e);p=cn(r,o,n),u=t==="left"?-lr:lr}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}class cu extends _l{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=_s(e,Number.POSITIVE_INFINITY),t=_s(t,Number.NEGATIVE_INFINITY),r=_s(r,Number.POSITIVE_INFINITY),n=_s(n,Number.NEGATIVE_INFINITY),{min:_s(e,r),max:_s(t,n),minDefined:Qi(e),maxDefined:Qi(t)}}getMinMax(e){let{min:t,max:r,minDefined:n,maxDefined:s}=this.getUserBounds(),o;if(n&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=n&&t>r?t:r,{min:_s(t,_s(r,t)),max:_s(r,_s(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wi(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pEe(this,s,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Kse(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HSe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wi(this.options.afterUpdate,[this])}beforeSetDimensions(){wi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,s;for(r=0,n=e.length;r<n;r++)s=e[r],s.label=wi(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){wi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Zse(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,s=t.maxRotation;let o=n,a,l,c;if(!this._isVisible()||!t.display||n>=s||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=Pr(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),u+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-Gp(e.grid)-t.padding-Jse(e.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=cC(Math.min(Math.asin(Pr((h.highest.height+6)/a,-1,1)),Math.asin(Pr(l/c,-1,1))-Math.asin(Pr(d/c,-1,1)))),o=Math.max(n,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){wi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Jse(n,t.options.font);if(a?(e.width=this.maxWidth,e.height=Gp(s)+l):(e.height=this.maxHeight,e.width=Gp(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=r.padding*2,p=Eo(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const y=r.mirror?0:m*u.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:g*u.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,h,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=n*e.width,f=r*t.height):(d=r*e.height,f=n*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=t.height/2,u=e.height/2;s==="start"?(h=0,u=e.height):s==="end"&&(h=t.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)qt(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Kse(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/Zse(t,r));let c=0,h=0,u,d,f,p,g,m,y,_,v,x,w;for(u=0;u<t;u+=l){if(p=e[u].label,g=this._resolveTickFontOptions(u),n.font=m=g.string,y=s[m]=s[m]||{data:{},gc:[]},_=g.lineHeight,v=x=0,!qt(p)&&!Ti(p))v=F_(n,y.data,y.gc,v,p),x=_;else if(Ti(p))for(d=0,f=p.length;d<f;++d)w=p[d],!qt(w)&&!Ti(w)&&(v=F_(n,y.data,y.gc,v,w),x+=_);o.push(v),a.push(x),c=Math.max(v,c),h=Math.max(x,h)}eCe(s,t);const T=o.indexOf(c),A=a.indexOf(h),R=L=>({width:o[L]||0,height:a[L]||0});return{first:R(0),last:R(t-1),widest:R(T),highest:R(A),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return U1e(this._alignToPixels?hh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=iCe(this.getContext(),e,r))}return this.$context||(this.$context=tCe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Eo(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*n?a/r:l/n:l*n<a*r?l/r:a/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:s,position:o,border:a}=n,l=s.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Gp(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(M){return hh(r,M,g)};let _,v,x,w,T,A,R,L,P,F,B,b;if(o==="top")_=y(this.bottom),A=this.bottom-d,L=_-m,F=y(e.top)+m,b=e.bottom;else if(o==="bottom")_=y(this.top),F=e.top,b=y(e.bottom)-m,A=_+m,L=this.top+d;else if(o==="left")_=y(this.right),T=this.right-d,R=_-m,P=y(e.left)+m,B=e.right;else if(o==="right")_=y(this.left),P=e.left,B=y(e.right)-m,T=_+m,R=this.left+d;else if(t==="x"){if(o==="center")_=y((e.top+e.bottom)/2+.5);else if(kt(o)){const M=Object.keys(o)[0],O=o[M];_=y(this.chart.scales[M].getPixelForValue(O))}F=e.top,b=e.bottom,A=_+m,L=A+d}else if(t==="y"){if(o==="center")_=y((e.left+e.right)/2);else if(kt(o)){const M=Object.keys(o)[0],O=o[M];_=y(this.chart.scales[M].getPixelForValue(O))}T=_-m,R=T-d,P=e.left,B=e.right}const E=yt(n.ticks.maxTicksLimit,u),C=Math.max(1,Math.ceil(u/E));for(v=0;v<u;v+=C){const M=this.getContext(v),O=s.setContext(M),D=a.setContext(M),U=O.lineWidth,z=O.color,Z=D.dash||[],Q=D.dashOffset,V=O.tickWidth,N=O.tickColor,X=O.tickBorderDash||[],ne=O.tickBorderDashOffset;x=QSe(this,v,l),x!==void 0&&(w=hh(r,x,U),c?T=R=P=B=w:A=L=F=b=w,f.push({tx1:T,ty1:A,tx2:R,ty2:L,x1:P,y1:F,x2:B,y2:b,width:U,color:z,borderDash:Z,borderDashOffset:Q,tickWidth:V,tickColor:N,tickBorderDash:X,tickBorderDashOffset:ne}))}return this._ticksLength=u,this._borderValue=_,f}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=s,d=Gp(r.grid),f=d+h,p=u?-h:f,g=-Eo(this.labelRotation),m=[];let y,_,v,x,w,T,A,R,L,P,F,B,b="middle";if(n==="top")T=this.bottom-p,A=this._getXAxisLabelAlignment();else if(n==="bottom")T=this.top+p,A=this._getXAxisLabelAlignment();else if(n==="left"){const C=this._getYAxisLabelAlignment(d);A=C.textAlign,w=C.x}else if(n==="right"){const C=this._getYAxisLabelAlignment(d);A=C.textAlign,w=C.x}else if(t==="x"){if(n==="center")T=(e.top+e.bottom)/2+f;else if(kt(n)){const C=Object.keys(n)[0],M=n[C];T=this.chart.scales[C].getPixelForValue(M)+f}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")w=(e.left+e.right)/2-f;else if(kt(n)){const C=Object.keys(n)[0],M=n[C];w=this.chart.scales[C].getPixelForValue(M)}A=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?b="top":l==="end"&&(b="bottom"));const E=this._getLabelSizes();for(y=0,_=a.length;y<_;++y){v=a[y],x=v.label;const C=s.setContext(this.getContext(y));R=this.getPixelForTick(y)+s.labelOffset,L=this._resolveTickFontOptions(y),P=L.lineHeight,F=Ti(x)?x.length:1;const M=F/2,O=C.color,D=C.textStrokeColor,U=C.textStrokeWidth;let z=A;o?(w=R,A==="inner"&&(y===_-1?z=this.options.reverse?"left":"right":y===0?z=this.options.reverse?"right":"left":z="center"),n==="top"?c==="near"||g!==0?B=-F*P+P/2:c==="center"?B=-E.highest.height/2-M*P+P:B=-E.highest.height+P/2:c==="near"||g!==0?B=P/2:c==="center"?B=E.highest.height/2-M*P:B=E.highest.height-F*P,u&&(B*=-1),g!==0&&!C.showLabelBackdrop&&(w+=P/2*Math.sin(g))):(T=R,B=(1-F)*P/2);let Z;if(C.showLabelBackdrop){const Q=yn(C.backdropPadding),V=E.heights[y],N=E.widths[y];let X=B-Q.top,ne=0-Q.left;switch(b){case"middle":X-=V/2;break;case"bottom":X-=V;break}switch(A){case"center":ne-=N/2;break;case"right":ne-=N;break;case"inner":y===_-1?ne-=N:y>0&&(ne-=N/2);break}Z={left:ne,top:X,width:N+Q.width,height:V+Q.height,color:C.backdropColor}}m.push({label:x,font:L,textOffset:B,options:{rotation:g,color:O,strokeColor:D,strokeWidth:U,textAlign:z,textBaseline:b,translation:[w,T],backdrop:Z}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Eo(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return t==="left"?n?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):t==="right"?n?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(s=>s.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=n.length;s<o;++s){const l=n[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=hh(e,this.left,o)-o/2,h=hh(e,this.right,a)+a/2,u=d=l):(u=hh(e,this.top,o)-o/2,d=hh(e,this.bottom,a)+a/2,c=h=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,u),t.lineTo(h,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&wb(r,n);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Wh(r,c,0,h,l,a)}n&&Eb(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const s=wr(r.font),o=yn(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||kt(t)?(l+=o.bottom,Ti(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=nCe(this,l,t,a);Wh(e,r.text,0,0,s,{color:r.color,maxWidth:u,rotation:d,textAlign:rCe(a,t,n),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=yt(e.grid&&e.grid.z,-1),n=yt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==cu.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&n.push(a)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return wr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class c0{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;aCe(t)&&(r=this.register(t));const n=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in n||(n[s]=e,sCe(e,o,r),this.override&&er.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in er[n]&&(delete er[n][r],this.override&&delete Hh[r])}}function sCe(i,e,t){const r=Ps(Object.create(null),[t?er.get(t):{},er.get(e),i.defaults]);er.set(e,r),i.defaultRoutes&&oCe(e,i.defaultRoutes),i.descriptors&&er.describe(e,i.descriptors)}function oCe(i,e){Object.keys(e).forEach(t=>{const r=t.split("."),n=r.pop(),s=[i].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");er.route(s,n,l,a)})}function aCe(i){return"id"in i&&"defaults"in i}let lCe=class{constructor(){this.controllers=new c0(To,"datasets",!0),this.elements=new c0(_l,"elements"),this.plugins=new c0(Object,"plugins"),this.scales=new c0(cu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(n=>{const s=r||this._getRegistryForType(n);r||s.isForType(n)||s===this.plugins&&n.id?this._exec(e,s,n):di(n,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const n=lC(e);wi(r["before"+n],[],r),t[e](r),wi(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}};var Mn=new lCe;class cCe{constructor(){this._init=[]}notify(e,t,r,n){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,n){n=n||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,n,s.options];if(wi(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=yt(r.options&&r.options.plugins,{}),s=hCe(r);return n===!1&&!t?[]:dCe(e,s,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function hCe(i){const e={},t=[],r=Object.keys(Mn.plugins.items);for(let s=0;s<r.length;s++)t.push(Mn.getPlugin(r[s]));const n=i.plugins||[];for(let s=0;s<n.length;s++){const o=n[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function uCe(i,e){return!e&&i===!1?null:i===!0?{}:i}function dCe(i,{plugins:e,localIds:t},r,n){const s=[],o=i.getContext();for(const a of e){const l=a.id,c=uCe(r[l],n);c!==null&&s.push({plugin:a,options:fCe(i.config,{plugin:a,local:t[l]},c,o)})}return s}function fCe(i,{plugin:e,local:t},r,n){const s=i.pluginScopeKeys(e),o=i.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function RE(i,e){const t=er.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function pCe(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function gCe(i,e){return i===e?"_index_":"_value_"}function Qse(i){if(i==="x"||i==="y"||i==="r")return i}function mCe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function LE(i,...e){if(Qse(i))return i;for(const t of e){const r=t.axis||mCe(t.position)||i.length>1&&Qse(i[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function eoe(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function yCe(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===i||r.yAxisID===i);if(t.length)return eoe(i,"x",t[0])||eoe(i,"y",t[0])}return{}}function _Ce(i,e){const t=Hh[i.type]||{scales:{}},r=e.scales||{},n=RE(i.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!kt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=LE(o,a,yCe(o,i),er.scales[a.type]),c=gCe(l,n),h=t.scales||{};s[o]=Eg(Object.create(null),[{axis:l},a,h[l],h[c]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,l=o.indexAxis||RE(a,e),h=(Hh[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=pCe(u,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Eg(s[f],[{axis:d},r[f],h[u]])})}),Object.keys(s).forEach(o=>{const a=s[o];Eg(a,[er.scales[a.type],er.scale])}),s}function xde(i){const e=i.options||(i.options={});e.plugins=yt(e.plugins,{}),e.scales=_Ce(i,e)}function wde(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function vCe(i){return i=i||{},i.data=wde(i.data),xde(i),i}const toe=new Map,Ede=new Set;function h0(i,e){let t=toe.get(i);return t||(t=e(),toe.set(i,t),Ede.add(t)),t}const Up=(i,e,t)=>{const r=yc(e,t);r!==void 0&&i.add(r)};let bCe=class{constructor(e){this._config=vCe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=wde(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),xde(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return h0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return h0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return h0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return h0(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return(!n||t)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(u=>Up(l,e,u))),h.forEach(u=>Up(l,n,u)),h.forEach(u=>Up(l,Hh[s]||{},u)),h.forEach(u=>Up(l,er,u)),h.forEach(u=>Up(l,TE,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ede.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Hh[t]||{},er.datasets[t]||{},{type:t},er,TE]}resolveNamedOptions(e,t,r,n=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=ioe(this._resolverCache,e,n);let l=o;if(wCe(o,t)){s.$shared=!1,r=_c(r)?r():r;const c=this.createResolver(e,r,a);l=sf(o,r,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,r=[""],n){const{resolver:s}=ioe(this._resolverCache,e,r);return kt(t)?sf(s,t,void 0,n):s}};function ioe(i,e,t){let r=i.get(e);r||(r=new Map,i.set(e,r));const n=t.join();let s=r.get(n);return s||(s={resolver:pC(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(n,s)),s}const xCe=i=>kt(i)&&Object.getOwnPropertyNames(i).some(e=>_c(i[e]));function wCe(i,e){const{isScriptable:t,isIndexable:r}=tde(i);for(const n of e){const s=t(n),o=r(n),a=(o||s)&&i[n];if(s&&(_c(a)||xCe(a))||o&&Ti(a))return!0}return!1}var ECe="4.4.2";const SCe=["top","bottom","left","right","chartArea"];function roe(i,e){return i==="top"||i==="bottom"||SCe.indexOf(i)===-1&&e==="x"}function noe(i,e){return function(t,r){return t[i]===r[i]?t[e]-r[e]:t[i]-r[i]}}function soe(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),wi(t&&t.onComplete,[i],e)}function CCe(i){const e=i.chart,t=e.options.animation;wi(t&&t.onProgress,[i],e)}function Sde(i){return yC()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const g_={},ooe=i=>{const e=Sde(i);return Object.values(g_).filter(t=>t.canvas===e).pop()};function TCe(i,e,t){const r=Object.keys(i);for(const n of r){const s=+n;if(s>=e){const o=i[n];delete i[n],(t>0||s>e)&&(i[s+t]=o)}}}function ACe(i,e,t,r){return!t||i.type==="mouseout"?null:r?e:i}function u0(i,e,t){return i.options.clip?i[t]:e[t]}function MCe(i,e){const{xScale:t,yScale:r}=i;return t&&r?{left:u0(t,e,"left"),right:u0(t,e,"right"),top:u0(r,e,"top"),bottom:u0(r,e,"bottom")}:e}class Xn{static register(...e){Mn.add(...e),aoe()}static unregister(...e){Mn.remove(...e),aoe()}constructor(e,t){const r=this.config=new bCe(t),n=Sde(e),s=ooe(n);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||qSe(n)),this.platform.updateConfig(r);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=I1e(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cCe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=W1e(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],g_[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Na.listen(this,"complete",soe),Na.listen(this,"progress",CCe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:s}=this;return qt(e)?t&&s?s:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Mn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mse(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Cse(this.canvas,this.ctx),this}stop(){return Na.stop(this),this}resize(e,t){Na.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mse(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),wi(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};di(t,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=LE(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),di(s,o=>{const a=o.options,l=a.id,c=LE(l,a),h=yt(a.type,o.dtype);(a.position===void 0||roe(a.position,c)!==roe(o.dposition))&&(a.position=o.dposition),n[l]=!0;let u=null;if(l in r&&r[l].type===h)u=r[l];else{const d=Mn.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),r[u.id]=u}u.init(a,e)}),di(n,(o,a)=>{o||delete r[a]}),di(r,o=>{pn.configure(this,o,o.options),pn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((n,s)=>n.index-s.index),r>t){for(let n=t;n<r;++n)this._destroyDatasetMeta(n);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(noe("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,n)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||RE(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Mn.getController(a),{datasetElementType:c,dataElementType:h}=er.datasets[a];Object.assign(l,{dataElementType:Mn.getElement(h),datasetElementType:c&&Mn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){di(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!n&&s.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||di(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(noe("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){di(this.scales,e=>{pn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!yse(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:s}of t){const o=r==="_removeElements"?-s:s;TCe(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),n=r(0);for(let s=1;s<t;s++)if(!yse(n,r(s)))return;return Array.from(n).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pn.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],di(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,s)=>{n._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,_c(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Na.has(this)?this.attached&&!Na.running(this)&&Na.start(this):(this.draw(),soe({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resize(r,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,s;for(n=0,s=t.length;n<s;++n){const o=t[n];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,n=!r.disabled,s=MCe(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&wb(t,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),n&&Eb(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Za(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const s=SSe.modes[t];return typeof s=="function"?s(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(s=>s&&s._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Lc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,n);Kg(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Na.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Cse(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete g_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},n=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};di(this.options.events,s=>r(s,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},n=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){di(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},di(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!P_(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const n=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:s}=this,o=t,a=this._getActiveElements(e,n,r,o),l=N1e(e),c=ACe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,wi(s.onHover,[e,a,this],this),l&&wi(s.onClick,[e,a,this],this));const h=!P_(a,n);return(h||t)&&(this._active=a,this._updateHoverStyles(a,n,t)),this._lastEvent=c,h}_getActiveElements(e,t,r,n){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,n)}}ee(Xn,"defaults",er),ee(Xn,"instances",g_),ee(Xn,"overrides",Hh),ee(Xn,"registry",Mn),ee(Xn,"version",ECe),ee(Xn,"getChart",ooe);function aoe(){return di(Xn.instances,i=>i._plugins.invalidate())}function RCe(i,e,t){const{startAngle:r,pixelMargin:n,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=n/a;i.beginPath(),i.arc(s,o,a,r-c,t+c),l>n?(c=n/l,i.arc(s,o,l,t+c,r-c,!0)):i.arc(s,o,n,t+lr,r-lr),i.closePath(),i.clip()}function LCe(i){return fC(i,["outerStart","outerEnd","innerStart","innerEnd"])}function ICe(i,e,t,r){const n=LCe(i.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(t-Math.min(s,l))*r/2;return Pr(l,0,Math.min(s,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Pr(n.innerStart,0,o),innerEnd:Pr(n.innerEnd,0,o)}}function Yu(i,e,t,r){return{x:t+i*Math.cos(e),y:r+i*Math.sin(e)}}function B_(i,e,t,r,n,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+r+t-c,0),d=h>0?h+r+t+c:0;let f=0;const p=n-l;if(r){const C=h>0?h-r:0,M=u>0?u-r:0,O=(C+M)/2,D=O!==0?p*O/(O+r):p;f=(p-D)/2}const g=Math.max(.001,p*u-t/Li)/u,m=(p-g)/2,y=l+m+f,_=n-m-f,{outerStart:v,outerEnd:x,innerStart:w,innerEnd:T}=ICe(e,d,u,_-y),A=u-v,R=u-x,L=y+v/A,P=_-x/R,F=d+w,B=d+T,b=y+w/F,E=_-T/B;if(i.beginPath(),s){const C=(L+P)/2;if(i.arc(o,a,u,L,C),i.arc(o,a,u,C,P),x>0){const U=Yu(R,P,o,a);i.arc(U.x,U.y,x,P,_+lr)}const M=Yu(B,_,o,a);if(i.lineTo(M.x,M.y),T>0){const U=Yu(B,E,o,a);i.arc(U.x,U.y,T,_+lr,E+Math.PI)}const O=(_-T/d+(y+w/d))/2;if(i.arc(o,a,d,_-T/d,O,!0),i.arc(o,a,d,O,y+w/d,!0),w>0){const U=Yu(F,b,o,a);i.arc(U.x,U.y,w,b+Math.PI,y-lr)}const D=Yu(A,y,o,a);if(i.lineTo(D.x,D.y),v>0){const U=Yu(A,L,o,a);i.arc(U.x,U.y,v,y-lr,L)}}else{i.moveTo(o,a);const C=Math.cos(L)*u+o,M=Math.sin(L)*u+a;i.lineTo(C,M);const O=Math.cos(P)*u+o,D=Math.sin(P)*u+a;i.lineTo(O,D)}i.closePath()}function PCe(i,e,t,r,n){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){B_(i,e,t,r,l,n);for(let c=0;c<s;++c)i.fill();isNaN(a)||(l=o+(a%Ai||Ai))}return B_(i,e,t,r,l,n),i.fill(),l}function kCe(i,e,t,r,n){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;i.setLineDash(u||[]),i.lineDashOffset=d,f?(i.lineWidth=c*2,i.lineJoin=h||"round"):(i.lineWidth=c,i.lineJoin=h||"bevel");let p=e.endAngle;if(s){B_(i,e,t,r,p,n);for(let g=0;g<s;++g)i.stroke();isNaN(a)||(p=o+(a%Ai||Ai))}f&&RCe(i,e,p),s||(B_(i,e,t,r,p,n),i.stroke())}class nc extends _l{constructor(t){super();ee(this,"circumference");ee(this,"endAngle");ee(this,"fullCircles");ee(this,"innerRadius");ee(this,"outerRadius");ee(this,"pixelMargin");ee(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,n){const s=this.getProps(["x","y"],n),{angle:o,distance:a}=que(s,{x:t,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,g=yt(d,c-l)>=Ai||Jg(o,l,c),m=Ya(a,h+f,u+f);return g&&m}getCenterPoint(t){const{x:r,y:n,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:h}=this.options,u=(s+o)/2,d=(a+l+h+c)/2;return{x:r+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:n}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>Ai?Math.floor(n/Ai):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Li,n||0)),h=s*c;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,PCe(t,this,h,o,a),kCe(t,this,h,o,a),t.restore()}}ee(nc,"id","arc"),ee(nc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ee(nc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ee(nc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function Cde(i,e,t=e){i.lineCap=yt(t.borderCapStyle,e.borderCapStyle),i.setLineDash(yt(t.borderDash,e.borderDash)),i.lineDashOffset=yt(t.borderDashOffset,e.borderDashOffset),i.lineJoin=yt(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=yt(t.borderWidth,e.borderWidth),i.strokeStyle=yt(t.borderColor,e.borderColor)}function OCe(i,e,t){i.lineTo(t.x,t.y)}function DCe(i){return i.stepped?sEe:i.tension||i.cubicInterpolationMode==="monotone"?oEe:OCe}function Tde(i,e,t={}){const r=i.length,{start:n=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(n,o),c=Math.min(s,a),h=n<o&&s<o||n>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function FCe(i,e,t,r){const{points:n,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Tde(n,t,r),h=DCe(s);let{move:u=!0,reverse:d}=r||{},f,p,g;for(f=0;f<=c;++f)p=n[(a+(d?c-f:f))%o],!p.skip&&(u?(i.moveTo(p.x,p.y),u=!1):h(i,g,p,d,s.stepped),g=p);return l&&(p=n[(a+(d?c:0))%o],h(i,g,p,d,s.stepped)),!!l}function NCe(i,e,t,r){const n=e.points,{count:s,start:o,ilen:a}=Tde(n,t,r),{move:l=!0,reverse:c}=r||{};let h=0,u=0,d,f,p,g,m,y;const _=x=>(o+(c?a-x:x))%s,v=()=>{g!==m&&(i.lineTo(h,m),i.lineTo(h,g),i.lineTo(h,y))};for(l&&(f=n[_(0)],i.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[_(d)],f.skip)continue;const x=f.x,w=f.y,T=x|0;T===p?(w<g?g=w:w>m&&(m=w),h=(u*h+x)/++u):(v(),i.lineTo(x,w),p=T,u=0,g=m=w),y=w}v()}function IE(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?NCe:FCe}function $Ce(i){return i.stepped?$Ee:i.tension||i.cubicInterpolationMode==="monotone"?BEe:Eh}function BCe(i,e,t,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,r)&&n.closePath()),Cde(i,e.options),i.stroke(n)}function jCe(i,e,t,r){const{segments:n,options:s}=e,o=IE(e);for(const a of n)Cde(i,s,a.style),i.beginPath(),o(i,e,a,{start:t,end:t+r-1})&&i.closePath(),i.stroke()}const zCe=typeof Path2D=="function";function GCe(i,e,t,r){zCe&&!e.options.segment?BCe(i,e,t,r):jCe(i,e,t,r)}class sc extends _l{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;LEe(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qEe(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],s=this.points,o=ude(this,{property:t,start:n,end:n});if(!o.length)return;const a=[],l=$Ce(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=s[u],p=s[d];if(f===p){a.push(f);continue}const g=Math.abs((n-f[t])/(p[t]-f[t])),m=l(f,p,g,r.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,r){return IE(this)(e,this,t,r)}path(e,t,r){const n=this.segments,s=IE(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of n)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,n){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),GCe(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ee(sc,"id","line"),ee(sc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ee(sc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ee(sc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function loe(i,e,t,r){const n=i.options,{[t]:s}=i.getProps([t],r);return Math.abs(e-s)<n.radius+n.hitRadius}class $h extends _l{constructor(t){super();ee(this,"parsed");ee(this,"skip");ee(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,n){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return loe(this,t,"x",r)}inYRange(t,r){return loe(this,t,"y",r)}getCenterPoint(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const n=r&&t.borderWidth||0;return(r+n)*2}draw(t,r){const n=this.options;this.skip||n.radius<.1||!Za(this,r,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,AE(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ee($h,"id","point"),ee($h,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ee($h,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ade(i,e){const{x:t,y:r,base:n,width:s,height:o}=i.getProps(["x","y","base","width","height"],e);let a,l,c,h,u;return i.horizontal?(u=o/2,a=Math.min(t,n),l=Math.max(t,n),c=r-u,h=r+u):(u=s/2,a=t-u,l=t+u,c=Math.min(r,n),h=Math.max(r,n)),{left:a,top:c,right:l,bottom:h}}function oc(i,e,t,r){return i?0:Pr(e,t,r)}function UCe(i,e,t){const r=i.options.borderWidth,n=i.borderSkipped,s=ede(r);return{t:oc(n.top,s.top,0,t),r:oc(n.right,s.right,0,e),b:oc(n.bottom,s.bottom,0,t),l:oc(n.left,s.left,0,e)}}function VCe(i,e,t){const{enableBorderRadius:r}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,s=Dh(n),o=Math.min(e,t),a=i.borderSkipped,l=r||kt(n);return{topLeft:oc(!l||a.top||a.left,s.topLeft,0,o),topRight:oc(!l||a.top||a.right,s.topRight,0,o),bottomLeft:oc(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:oc(!l||a.bottom||a.right,s.bottomRight,0,o)}}function qCe(i){const e=Ade(i),t=e.right-e.left,r=e.bottom-e.top,n=UCe(i,t/2,r/2),s=VCe(i,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,s.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(n.b,n.r))}}}}function iw(i,e,t,r){const n=e===null,s=t===null,a=i&&!(n&&s)&&Ade(i,r);return a&&(n||Ya(e,a.left,a.right))&&(s||Ya(t,a.top,a.bottom))}function HCe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function WCe(i,e){i.rect(e.x,e.y,e.w,e.h)}function rw(i,e,t={}){const r=i.x!==t.x?-e:0,n=i.y!==t.y?-e:0,s=(i.x+i.w!==t.x+t.w?e:0)-r,o=(i.y+i.h!==t.y+t.h?e:0)-n;return{x:i.x+r,y:i.y+n,w:i.w+s,h:i.h+o,radius:i.radius}}class Bh extends _l{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:s,outer:o}=qCe(this),a=HCe(o.radius)?Qg:WCe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,rw(o,t,s)),e.clip(),a(e,rw(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,rw(s,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return iw(this,e,t,r)}inXRange(e,t){return iw(this,e,null,t)}inYRange(e,t){return iw(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+n)/2:t,y:s?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ee(Bh,"id","bar"),ee(Bh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ee(Bh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var YCe=Object.freeze({__proto__:null,ArcElement:nc,BarElement:Bh,LineElement:sc,PointElement:$h});const PE=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],coe=PE.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function Mde(i){return PE[i%PE.length]}function Rde(i){return coe[i%coe.length]}function XCe(i,e){return i.borderColor=Mde(e),i.backgroundColor=Rde(e),++e}function ZCe(i,e){return i.backgroundColor=i.data.map(()=>Mde(e++)),e}function KCe(i,e){return i.backgroundColor=i.data.map(()=>Rde(e++)),e}function JCe(i){let e=0;return(t,r)=>{const n=i.getDatasetMeta(r).controller;n instanceof Rh?e=ZCe(t,e):n instanceof ua?e=KCe(t,e):n&&(e=XCe(t,e))}}function hoe(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function QCe(i){return i&&(i.borderColor||i.backgroundColor)}var eTe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:r},options:n}=i.config,{elements:s}=n;if(!t.forceOverride&&(hoe(r)||QCe(n)||s&&hoe(s)))return;const o=JCe(i);r.forEach(o)}};function tTe(i,e,t,r,n){const s=n.samples||r;if(s>=t)return i.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const c=e+t-1;let h=e,u,d,f,p,g;for(o[l++]=i[h],u=0;u<s-2;u++){let m=0,y=0,_;const v=Math.floor((u+1)*a)+1+e,x=Math.min(Math.floor((u+2)*a)+1,t)+e,w=x-v;for(_=v;_<x;_++)m+=i[_].x,y+=i[_].y;m/=w,y/=w;const T=Math.floor(u*a)+1+e,A=Math.min(Math.floor((u+1)*a)+1,t)+e,{x:R,y:L}=i[h];for(f=p=-1,_=T;_<A;_++)p=.5*Math.abs((R-m)*(i[_].y-L)-(R-i[_].x)*(y-L)),p>f&&(f=p,d=i[_],g=_);o[l++]=d,h=g}return o[l++]=i[c],o}function iTe(i,e,t,r){let n=0,s=0,o,a,l,c,h,u,d,f,p,g;const m=[],y=e+t-1,_=i[e].x,x=i[y].x-_;for(o=e;o<e+t;++o){a=i[o],l=(a.x-_)/x*r,c=a.y;const w=l|0;if(w===h)c<p?(p=c,u=o):c>g&&(g=c,d=o),n=(s*n+a.x)/++s;else{const T=o-1;if(!qt(u)&&!qt(d)){const A=Math.min(u,d),R=Math.max(u,d);A!==f&&A!==T&&m.push({...i[A],x:n}),R!==f&&R!==T&&m.push({...i[R],x:n})}o>0&&T!==f&&m.push(i[T]),m.push(a),h=w,s=0,p=g=c,u=d=f=o}}return m}function Lde(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function uoe(i){i.data.datasets.forEach(e=>{Lde(e)})}function rTe(i,e){const t=e.length;let r=0,n;const{iScale:s}=i,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Pr(Xa(e,s.axis,o).lo,0,t-1)),c?n=Pr(Xa(e,s.axis,a).hi+1,r,t)-r:n=t-r,{start:r,count:n}}var nTe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){uoe(i);return}const r=i.width;i.data.datasets.forEach((n,s)=>{const{_data:o,indexAxis:a}=n,l=i.getDatasetMeta(s),c=o||n.data;if(sg([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=i.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||i.options.parsing)return;let{start:u,count:d}=rTe(l,c);const f=t.threshold||4*r;if(d<=f){Lde(n);return}qt(o)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=tTe(c,u,d,r,t);break;case"min-max":p=iTe(c,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=p})},destroy(i){uoe(i)}};function sTe(i,e,t){const r=i.segments,n=i.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=bC(l,c,n);const h=kE(t,n[l],n[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:n[l],end:n[c]});continue}const u=ude(e,h);for(const d of u){const f=kE(t,s[d.start],s[d.end],d.loop),p=hde(a,n,f);for(const g of p)o.push({source:g,target:d,start:{[t]:doe(h,f,"start",Math.max)},end:{[t]:doe(h,f,"end",Math.min)}})}}return o}function kE(i,e,t,r){if(r)return;let n=e[i],s=t[i];return i==="angle"&&(n=xs(n),s=xs(s)),{property:i,start:n,end:s}}function oTe(i,e){const{x:t=null,y:r=null}=i||{},n=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=bC(o,a,n);const l=n[o],c=n[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function bC(i,e,t){for(;e>i;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function doe(i,e,t,r){return i&&e?r(i[t],e[t]):i?i[t]:e?e[t]:0}function Ide(i,e){let t=[],r=!1;return Ti(i)?(r=!0,t=i):t=oTe(i,e),t.length?new sc({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function foe(i){return i&&i.fill!==!1}function aTe(i,e,t){let n=i[e].fill;const s=[e];let o;if(!t)return n;for(;n!==!1&&s.indexOf(n)===-1;){if(!Qi(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;s.push(n),n=o.fill}return!1}function lTe(i,e,t){const r=dTe(i);if(kt(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return Qi(n)&&Math.floor(n)===n?cTe(r[0],e,n,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function cTe(i,e,t,r){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function hTe(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:kt(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function uTe(i,e,t){let r;return i==="start"?r=t:i==="end"?r=e.options.reverse?e.min:e.max:kt(i)?r=i.value:r=e.getBaseValue(),r}function dTe(i){const e=i.options,t=e.fill;let r=yt(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function fTe(i){const{scale:e,index:t,line:r}=i,n=[],s=r.segments,o=r.points,a=pTe(e,t);a.push(Ide({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)gTe(n,o[h],a)}return new sc({points:n,options:{}})}function pTe(i,e){const t=[],r=i.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const s=r[n];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function gTe(i,e,t){const r=[];for(let n=0;n<t.length;n++){const s=t[n],{first:o,last:a,point:l}=mTe(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(i.push(l),!a)break}}i.push(...r)}function mTe(i,e,t){const r=i.interpolate(e,t);if(!r)return{};const n=r[t],s=i.segments,o=i.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],u=o[h.start][t],d=o[h.end][t];if(Ya(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:r}}class Pde{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:s,radius:o}=this;return t=t||{start:0,end:Ai},e.arc(n,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,s=e.angle;return{x:t+Math.cos(s)*n,y:r+Math.sin(s)*n,angle:s}}}function yTe(i){const{chart:e,fill:t,line:r}=i;if(Qi(t))return _Te(e,t);if(t==="stack")return fTe(i);if(t==="shape")return!0;const n=vTe(i);return n instanceof Pde?n:Ide(n,r)}function _Te(i,e){const t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function vTe(i){return(i.scale||{}).getPointPositionForValue?xTe(i):bTe(i)}function bTe(i){const{scale:e={},fill:t}=i,r=hTe(t,e);if(Qi(r)){const n=e.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function xTe(i){const{scale:e,fill:t}=i,r=e.options,n=e.getLabels().length,s=r.reverse?e.max:e.min,o=uTe(t,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new Pde({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(e.getPointPositionForValue(l,o));return a}function nw(i,e,t){const r=yTe(e),{line:n,scale:s,axis:o}=e,a=n.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};r&&n.points.length&&(wb(i,t),wTe(i,{line:n,target:r,above:h,below:u,area:t,scale:s,axis:o}),Eb(i))}function wTe(i,e){const{line:t,target:r,above:n,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;i.save(),l==="x"&&s!==n&&(poe(i,r,o.top),goe(i,{line:t,target:r,color:n,scale:a,property:l}),i.restore(),i.save(),poe(i,r,o.bottom)),goe(i,{line:t,target:r,color:s,scale:a,property:l}),i.restore()}function poe(i,e,t){const{segments:r,points:n}=e;let s=!0,o=!1;i.beginPath();for(const a of r){const{start:l,end:c}=a,h=n[l],u=n[bC(l,c,n)];s?(i.moveTo(h.x,h.y),s=!1):(i.lineTo(h.x,t),i.lineTo(h.x,h.y)),o=!!e.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function goe(i,e){const{line:t,target:r,property:n,color:s,scale:o}=e,a=sTe(t,r,n);for(const{source:l,target:c,start:h,end:u}of a){const{style:{backgroundColor:d=s}={}}=l,f=r!==!0;i.save(),i.fillStyle=d,ETe(i,o,f&&kE(n,h,u)),i.beginPath();const p=!!t.pathSegment(i,l);let g;if(f){p?i.closePath():moe(i,r,u,n);const m=!!r.pathSegment(i,c,{move:p,reverse:!0});g=p&&m,g||moe(i,r,h,n)}i.closePath(),i.fill(g?"evenodd":"nonzero"),i.restore()}}function ETe(i,e,t){const{top:r,bottom:n}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(i.beginPath(),i.rect(o,r,a-o,n-r),i.clip())}function moe(i,e,t,r){const n=e.interpolate(t,r);n&&i.lineTo(n.x,n.y)}var STe={id:"filler",afterDatasetsUpdate(i,e,t){const r=(i.data.datasets||[]).length,n=[];let s,o,a,l;for(o=0;o<r;++o)s=i.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof sc&&(l={visible:i.isDatasetVisible(o),index:o,fill:lTe(a,o,r),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,n.push(l);for(o=0;o<r;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=aTe(n,o,t.propagate))},beforeDraw(i,e,t){const r=t.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&nw(i.ctx,a,s))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=i.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const s=r[n].$filler;foe(s)&&nw(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,e,t){const r=e.meta.$filler;!foe(r)||t.drawTime!=="beforeDatasetDraw"||nw(i.ctx,r,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const yoe=(i,e)=>{let{boxHeight:t=e,boxWidth:r=e}=i;return i.usePointStyle&&(t=Math.min(t,e),r=i.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},CTe=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class _oe extends _l{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=wi(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=wr(r.font),s=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=yoe(r,s);let c,h;t.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a;let u=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,g)=>{const m=r+t/2+s.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(g>0?0:1)]=0,f+=h,d++),l[g]={left:0,top:f,row:d,width:m,height:n},c[c.length-1]+=m+a}),u}_fitCols(e,t,r,n){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:_,itemHeight:v}=TTe(r,t,s,m,n);y>0&&f+v+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:_,height:v},d=Math.max(d,_),f+=v+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:s}}=this,o=$d(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=cn(r,this.left+n,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=cn(r,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+e+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=cn(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=cn(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;wb(e,this),this._draw(),Eb(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:s,labels:o}=e,a=er.color,l=$d(e.rtl,this.left,this.width),c=wr(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=yoe(o,u),y=function(T,A,R){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const L=yt(R.lineWidth,1);if(n.fillStyle=yt(R.fillStyle,a),n.lineCap=yt(R.lineCap,"butt"),n.lineDashOffset=yt(R.lineDashOffset,0),n.lineJoin=yt(R.lineJoin,"miter"),n.lineWidth=L,n.strokeStyle=yt(R.strokeStyle,a),n.setLineDash(yt(R.lineDash,[])),o.usePointStyle){const P={radius:g*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:L},F=l.xPlus(T,p/2),B=A+d;Que(n,P,F,B,o.pointStyleWidth&&p)}else{const P=A+Math.max((u-g)/2,0),F=l.leftForLtr(T,p),B=Dh(R.borderRadius);n.beginPath(),Object.values(B).some(b=>b!==0)?Qg(n,{x:F,y:P,w:p,h:g,radius:B}):n.rect(F,P,p,g),n.fill(),L!==0&&n.stroke()}n.restore()},_=function(T,A,R){Wh(n,R.text,T,A+m/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:cn(s,this.left+h,this.right-r[0]),y:this.top+h+x,line:0}:f={x:this.left+h,y:cn(s,this.top+x+h,this.bottom-t[0].height),line:0},ade(this.ctx,e.textDirection);const w=m+h;this.legendItems.forEach((T,A)=>{n.strokeStyle=T.fontColor,n.fillStyle=T.fontColor;const R=n.measureText(T.text).width,L=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),P=p+d+R;let F=f.x,B=f.y;l.setWidth(this.width),v?A>0&&F+P+h>this.right&&(B=f.y+=w,f.line++,F=f.x=cn(s,this.left+h,this.right-r[f.line])):A>0&&B+w>this.bottom&&(F=f.x=F+t[f.line].width+h,f.line++,B=f.y=cn(s,this.top+x+h,this.bottom-t[f.line].height));const b=l.x(F);if(y(b,B,T),F=Y1e(L,F+p+d,v?F+P:this.right,e.rtl),_(l.x(F),B,T),v)f.x+=P+h;else if(typeof T.text!="string"){const E=c.lineHeight;f.y+=kde(T,E)+h}else f.y+=w}),lde(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=wr(t.font),n=yn(t.padding);if(!t.display)return;const s=$d(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,c=n.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=cn(e.align,u,this.right-d);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);h=c+cn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=cn(a,u,u+d);o.textAlign=s.textAlign(uC(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Wh(o,t.text,f,h,r)}_computeTitleHeight(){const e=this.options.title,t=wr(e.font),r=yn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,s;if(Ya(e,this.left,this.right)&&Ya(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(n=s[r],Ya(e,n.left,n.left+n.width)&&Ya(t,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!RTe(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,s=CTe(n,r);n&&!s&&wi(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!s&&wi(t.onHover,[e,r,this],this)}else r&&wi(t.onClick,[e,r,this],this)}}function TTe(i,e,t,r,n){const s=ATe(r,i,e,t),o=MTe(n,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function ATe(i,e,t,r){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(n).width}function MTe(i,e,t){let r=i;return typeof e.text!="string"&&(r=kde(e,t)),r}function kde(i,e){const t=i.text?i.text.length:0;return e*t}function RTe(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var LTe={id:"legend",_element:_oe,start(i,e,t){const r=i.legend=new _oe({ctx:i.ctx,options:t,chart:i});pn.configure(i,r,t),pn.addBox(i,r)},stop(i){pn.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const r=i.legend;pn.configure(i,r,t),r.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const r=e.datasetIndex,n=t.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:n,color:s,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),h=yn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class xC extends _l{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=Ti(r.text)?r.text.length:1;this._padding=yn(r.padding);const s=n*wr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:n,right:s,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=cn(a,r,s),u=t+e,c=s-r):(o.position==="left"?(h=r+e,u=cn(a,n,t),l=Li*-.5):(h=s-e,u=cn(a,t,n),l=Li*.5),c=n-t),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=wr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Wh(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:c,textAlign:uC(t.align),textBaseline:"middle",translation:[o,a]})}}function ITe(i,e){const t=new xC({ctx:i.ctx,options:e,chart:i});pn.configure(i,t,e),pn.addBox(i,t),i.titleBlock=t}var PTe={id:"title",_element:xC,start(i,e,t){ITe(i,t)},stop(i){const e=i.titleBlock;pn.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const r=i.titleBlock;pn.configure(i,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const d0=new WeakMap;var kTe={id:"subtitle",start(i,e,t){const r=new xC({ctx:i.ctx,options:t,chart:i});pn.configure(i,r,t),pn.addBox(i,r),d0.set(i,r)},stop(i){pn.removeBox(i,d0.get(i)),d0.delete(i)},beforeUpdate(i,e,t){const r=d0.get(i);pn.configure(i,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ag={average(i){if(!i.length)return!1;let e,t,r=new Set,n=0,s=0;for(e=0,t=i.length;e<t;++e){const a=i[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),n+=l.y,++s}}return{x:[...r].reduce((a,l)=>a+l)/r.size,y:n/s}},nearest(i,e){if(!i.length)return!1;let t=e.x,r=e.y,n=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=i.length;s<o;++s){const l=i[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=CE(e,c);h<n&&(n=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function Ko(i,e){return e&&(Ti(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function $a(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function OTe(i,e){const{element:t,datasetIndex:r,index:n}=e,s=i.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(n);return{chart:i,label:o,parsed:s.getParsed(n),raw:i.data.datasets[r].data[n],formattedValue:a,dataset:s.getDataset(),dataIndex:n,datasetIndex:r,element:t}}function voe(i,e){const t=i.chart.ctx,{body:r,footer:n,title:s}=i,{boxWidth:o,boxHeight:a}=e,l=wr(e.bodyFont),c=wr(e.titleFont),h=wr(e.footerFont),u=s.length,d=n.length,f=r.length,p=yn(e.padding);let g=p.height,m=0,y=r.reduce((x,w)=>x+w.before.length+w.lines.length+w.after.length,0);if(y+=i.beforeBody.length+i.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),y){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*x+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let _=0;const v=function(x){m=Math.max(m,t.measureText(x).width+_)};return t.save(),t.font=c.string,di(i.title,v),t.font=l.string,di(i.beforeBody.concat(i.afterBody),v),_=e.displayColors?o+2+e.boxPadding:0,di(r,x=>{di(x.before,v),di(x.lines,v),di(x.after,v)}),_=0,t.font=h.string,di(i.footer,v),t.restore(),m+=p.width,{width:m,height:g}}function DTe(i,e){const{y:t,height:r}=e;return t<r/2?"top":t>i.height-r/2?"bottom":"center"}function FTe(i,e,t,r){const{x:n,width:s}=r,o=t.caretSize+t.caretPadding;if(i==="left"&&n+s+o>e.width||i==="right"&&n-s-o<0)return!0}function NTe(i,e,t,r){const{x:n,width:s}=t,{width:o,chartArea:{left:a,right:l}}=i;let c="center";return r==="center"?c=n<=(a+l)/2?"left":"right":n<=s/2?c="left":n>=o-s/2&&(c="right"),FTe(c,i,e,t)&&(c="center"),c}function boe(i,e,t){const r=t.yAlign||e.yAlign||DTe(i,t);return{xAlign:t.xAlign||e.xAlign||NTe(i,e,t,r),yAlign:r}}function $Te(i,e){let{x:t,width:r}=i;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function BTe(i,e,t){let{y:r,height:n}=i;return e==="top"?r+=t:e==="bottom"?r-=n+t:r-=n/2,r}function xoe(i,e,t,r){const{caretSize:n,caretPadding:s,cornerRadius:o}=i,{xAlign:a,yAlign:l}=t,c=n+s,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Dh(o);let p=$Te(e,a);const g=BTe(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:Pr(p,0,r.width-e.width),y:Pr(g,0,r.height-e.height)}}function f0(i,e,t){const r=yn(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-r.right:i.x+r.left}function woe(i){return Ko([],$a(i))}function jTe(i,e,t){return Lc(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Eoe(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const Ode={beforeTitle:Pa,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Pa,beforeBody:Pa,beforeLabel:Pa,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return qt(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pa,afterBody:Pa,beforeFooter:Pa,footer:Pa,afterFooter:Pa};function zn(i,e,t,r){const n=i[e].call(t,r);return typeof n>"u"?Ode[e].call(t,r):n}class OE extends _l{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,s=new dde(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=jTe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,n=zn(r,"beforeTitle",this,e),s=zn(r,"title",this,e),o=zn(r,"afterTitle",this,e);let a=[];return a=Ko(a,$a(n)),a=Ko(a,$a(s)),a=Ko(a,$a(o)),a}getBeforeBody(e,t){return woe(zn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return di(e,s=>{const o={before:[],lines:[],after:[]},a=Eoe(r,s);Ko(o.before,$a(zn(a,"beforeLabel",this,s))),Ko(o.lines,zn(a,"label",this,s)),Ko(o.after,$a(zn(a,"afterLabel",this,s))),n.push(o)}),n}getAfterBody(e,t){return woe(zn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=zn(r,"beforeFooter",this,e),s=zn(r,"footer",this,e),o=zn(r,"afterFooter",this,e);let a=[];return a=Ko(a,$a(n)),a=Ko(a,$a(s)),a=Ko(a,$a(o)),a}_createItems(e){const t=this._active,r=this.chart.data,n=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(OTe(this.chart,t[l]));return e.filter&&(a=a.filter((h,u,d)=>e.filter(h,u,d,r))),e.itemSort&&(a=a.sort((h,u)=>e.itemSort(h,u,r))),di(a,h=>{const u=Eoe(e.callbacks,h);n.push(zn(u,"labelColor",this,h)),s.push(zn(u,"labelPointStyle",this,h)),o.push(zn(u,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let s,o=[];if(!n.length)this.opacity!==0&&(s={opacity:0});else{const a=ag[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=voe(this,r),c=Object.assign({},a,l),h=boe(this.chart,r,c),u=xoe(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const s=this.getCaretPosition(e,r,n);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=Dh(a),{x:d,y:f}=e,{width:p,height:g}=t;let m,y,_,v,x,w;return s==="center"?(x=f+g/2,n==="left"?(m=d,y=m-o,v=x+o,w=x-o):(m=d+p,y=m+o,v=x-o,w=x+o),_=m):(n==="left"?y=d+Math.max(l,h)+o:n==="right"?y=d+p-Math.max(c,u)-o:y=this.caretX,s==="top"?(v=f,x=v-o,m=y-o,_=y+o):(v=f+g,x=v+o,m=y+o,_=y-o),w=v),{x1:m,x2:y,x3:_,y1:v,y2:x,y3:w}}drawTitle(e,t,r){const n=this.title,s=n.length;let o,a,l;if(s){const c=$d(r.rtl,this.x,this.width);for(e.x=f0(this,r.titleAlign,r),t.textAlign=c.textAlign(r.titleAlign),t.textBaseline="middle",o=wr(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,n,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=wr(s.bodyFont),u=f0(this,"left",s),d=n.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,p=t.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=n.leftForLtr(d,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,AE(e,g,m,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,AE(e,g,m,y)}else{e.lineWidth=kt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=n.leftForLtr(d,c),m=n.leftForLtr(n.xPlus(d,1),c-2),y=Dh(o.borderRadius);Object.values(y).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Qg(e,{x:g,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qg(e,{x:m,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,u=wr(r.bodyFont);let d=u.lineHeight,f=0;const p=$d(r.rtl,this.x,this.width),g=function(R){t.fillText(R,p.x(e.x+f),e.y+d/2),e.y+=d+s},m=p.textAlign(o);let y,_,v,x,w,T,A;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=f0(this,m,r),t.fillStyle=r.bodyColor,di(this.beforeBody,g),f=a&&m!=="right"?o==="center"?c/2+h:c+2+h:0,x=0,T=n.length;x<T;++x){for(y=n[x],_=this.labelTextColors[x],t.fillStyle=_,di(y.before,g),v=y.lines,a&&v.length&&(this._drawColorBox(t,e,x,p,r),d=Math.max(u.lineHeight,l)),w=0,A=v.length;w<A;++w)g(v[w]),d=u.lineHeight;di(y.after,g)}f=0,d=u.lineHeight,di(this.afterBody,g),e.y-=s}drawFooter(e,t,r){const n=this.footer,s=n.length;let o,a;if(s){const l=$d(r.rtl,this.x,this.width);for(e.x=f0(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=wr(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(n[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Dh(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(a+u,l),o==="top"&&this.drawCaret(e,t,r,n),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,r,n),t.lineTo(a+c,l+h-p),t.quadraticCurveTo(a+c,l+h,a+c-p,l+h),o==="bottom"&&this.drawCaret(e,t,r,n),t.lineTo(a+f,l+h),t.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&s==="left"&&this.drawCaret(e,t,r,n),t.lineTo(a,l+u),t.quadraticCurveTo(a,l,a+u,l),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,s=r&&r.y;if(n||s){const o=ag[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=voe(this,e),l=Object.assign({},o,this._size),c=boe(t,e,l),h=xoe(e,l,c,t);(n._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yn(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,n,t),ade(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),lde(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!P_(r,n),o=this._positionChanged(n,t);(s||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!P_(o,s)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,n){const s=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:n,options:s}=this,o=ag[s.position].call(this,e,t);return o!==!1&&(r!==o.x||n!==o.y)}}ee(OE,"positioners",ag);var Dde={id:"tooltip",_element:OE,positioners:ag,afterInit(i,e,t){t&&(i.tooltip=new OE({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ode},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zTe=Object.freeze({__proto__:null,Colors:eTe,Decimation:nTe,Filler:STe,Legend:LTe,SubTitle:kTe,Title:PTe,Tooltip:Dde});const GTe=(i,e,t,r)=>(typeof e=="string"?(t=i.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function UTe(i,e,t,r){const n=i.indexOf(e);if(n===-1)return GTe(i,e,t,r);const s=i.lastIndexOf(e);return n!==s?t:n}const VTe=(i,e)=>i===null?null:Pr(Math.round(i),0,e);function Soe(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class af extends cu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:n,label:s}of t)r[n]===s&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qt(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:UTe(r,e,yt(t,e),this._addedLabels),VTe(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return Soe.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ee(af,"id","category"),ee(af,"defaults",{ticks:{callback:Soe}});function qTe(i,e){const t=[],{bounds:n,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=i,f=s||1,p=h-1,{min:g,max:m}=e,y=!qt(o),_=!qt(a),v=!qt(c),x=(m-g)/(u+1);let w=vse((m-g)/p/f)*f,T,A,R,L;if(w<1e-14&&!y&&!_)return[{value:g},{value:m}];L=Math.ceil(m/w)-Math.floor(g/w),L>p&&(w=vse(L*w/p/f)*f),qt(l)||(T=Math.pow(10,l),w=Math.ceil(w*T)/T),n==="ticks"?(A=Math.floor(g/w)*w,R=Math.ceil(m/w)*w):(A=g,R=m),y&&_&&s&&z1e((a-o)/s,w/1e3)?(L=Math.round(Math.min((a-o)/w,h)),w=(a-o)/L,A=o,R=a):v?(A=y?o:A,R=_?a:R,L=c-1,w=(R-A)/L):(L=(R-A)/w,Sg(L,Math.round(L),w/1e3)?L=Math.round(L):L=Math.ceil(L));const P=Math.max(bse(w),bse(A));T=Math.pow(10,qt(l)?P:l),A=Math.round(A*T)/T,R=Math.round(R*T)/T;let F=0;for(y&&(d&&A!==o?(t.push({value:o}),A<o&&F++,Sg(Math.round((A+F*w)*T)/T,o,Coe(o,x,i))&&F++):A<o&&F++);F<L;++F){const B=Math.round((A+F*w)*T)/T;if(_&&B>a)break;t.push({value:B})}return _&&d&&R!==a?t.length&&Sg(t[t.length-1].value,a,Coe(a,x,i))?t[t.length-1].value=a:t.push({value:a}):(!_||R===a)&&t.push({value:R}),t}function Coe(i,e,{horizontal:t,minRotation:r}){const n=Eo(r),s=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+i).length;return Math.min(e/s,o)}class j_ extends cu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this;const o=l=>n=t?n:l,a=l=>s=r?s:l;if(e){const l=ha(n),c=ha(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(n-l)}this.min=n,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=qTe(n,s);return e.bounds==="ticks"&&Vue(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Ym(e,this.chart.options.locale,this.options.ticks.format)}}class Yh extends j_{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Qi(e)?e:0,this.max=Qi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Eo(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ee(Yh,"id","linear"),ee(Yh,"defaults",{ticks:{callback:xb.formatters.numeric}});const tm=i=>Math.floor(rc(i)),dh=(i,e)=>Math.pow(10,tm(i)+e);function Toe(i){return i/Math.pow(10,tm(i))===1}function Aoe(i,e,t){const r=Math.pow(10,t),n=Math.floor(i/r);return Math.ceil(e/r)-n}function HTe(i,e){const t=e-i;let r=tm(t);for(;Aoe(i,e,r)>10;)r++;for(;Aoe(i,e,r)<10;)r--;return Math.min(r,tm(i))}function WTe(i,{min:e,max:t}){e=_s(i.min,e);const r=[],n=tm(e);let s=HTe(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=n>s?Math.pow(10,n):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,s)),d=_s(i.min,Math.round((l+h+u*Math.pow(10,s))*o)/o);for(;d<t;)r.push({value:d,major:Toe(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,o=s>=0?1:o),d=Math.round((l+h+u*Math.pow(10,s))*o)/o;const f=_s(i.max,d);return r.push({value:f,major:Toe(f),significand:u}),r}class DE extends cu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=j_.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Qi(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Qi(e)?Math.max(0,e):null,this.max=Qi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qi(this._userMin)&&(this.min=e===dh(this.min,0)?dh(this.min,-1):dh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const s=a=>r=e?r:a,o=a=>n=t?n:a;r===n&&(r<=0?(s(1),o(10)):(s(dh(r,-1)),o(dh(n,1)))),r<=0&&s(dh(n,-1)),n<=0&&o(dh(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=WTe(t,this);return e.bounds==="ticks"&&Vue(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Ym(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=rc(e),this._valueRange=rc(this.max)-rc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(rc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}ee(DE,"id","logarithmic"),ee(DE,"defaults",{ticks:{callback:xb.formatters.logarithmic,major:{enabled:!0}}});function FE(i){const e=i.ticks;if(e.display&&i.display){const t=yn(e.backdropPadding);return yt(e.font&&e.font.size,er.font.size)+t.height}return 0}function YTe(i,e,t){return t=Ti(t)?t:[t],{w:nEe(i,e.string,t),h:t.length*e.lineHeight}}function Moe(i,e,t,r,n){return i===r||i===n?{start:e-t/2,end:e+t/2}:i<r||i>n?{start:e-t,end:e}:{start:e,end:e+t}}function XTe(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),r=[],n=[],s=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?Li/s:0;for(let l=0;l<s;l++){const c=o.setContext(i.getPointLabelContext(l));n[l]=c.padding;const h=i.getPointPosition(l,i.drawingArea+n[l],a),u=wr(c.font),d=YTe(i.ctx,u,i._pointLabels[l]);r[l]=d;const f=xs(i.getIndexAngle(l)+a),p=Math.round(cC(f)),g=Moe(p,h.x,d.w,0,180),m=Moe(p,h.y,d.h,90,270);ZTe(t,e,f,g,m)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=QTe(i,r,n)}function ZTe(i,e,t,r,n){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,i.l=Math.min(i.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,i.r=Math.max(i.r,e.r+a)),n.start<e.t?(l=(e.t-n.start)/o,i.t=Math.min(i.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/o,i.b=Math.max(i.b,e.b+l))}function KTe(i,e,t){const r=i.drawingArea,{extra:n,additionalAngle:s,padding:o,size:a}=t,l=i.getPointPosition(e,r+n+o,s),c=Math.round(cC(xs(l.angle+lr))),h=i2e(l.y,a.h,c),u=e2e(c),d=t2e(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function JTe(i,e){if(!e)return!0;const{left:t,top:r,right:n,bottom:s}=i;return!(Za({x:t,y:r},e)||Za({x:t,y:s},e)||Za({x:n,y:r},e)||Za({x:n,y:s},e))}function QTe(i,e,t){const r=[],n=i._pointLabels.length,s=i.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:FE(s)/2,additionalAngle:o?Li/n:0};let c;for(let h=0;h<n;h++){l.padding=t[h],l.size=e[h];const u=KTe(i,h,l);r.push(u),a==="auto"&&(u.visible=JTe(u,c),u.visible&&(c=u))}return r}function e2e(i){return i===0||i===180?"center":i<180?"left":"right"}function t2e(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function i2e(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function r2e(i,e,t){const{left:r,top:n,right:s,bottom:o}=t,{backdropColor:a}=e;if(!qt(a)){const l=Dh(e.borderRadius),c=yn(e.backdropPadding);i.fillStyle=a;const h=r-c.left,u=n-c.top,d=s-r+c.width,f=o-n+c.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),Qg(i,{x:h,y:u,w:d,h:f,radius:l}),i.fill()):i.fillRect(h,u,d,f)}}function n2e(i,e){const{ctx:t,options:{pointLabels:r}}=i;for(let n=e-1;n>=0;n--){const s=i._pointLabelItems[n];if(!s.visible)continue;const o=r.setContext(i.getPointLabelContext(n));r2e(t,o,s);const a=wr(o.font),{x:l,y:c,textAlign:h}=s;Wh(t,i._pointLabels[n],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Fde(i,e,t,r){const{ctx:n}=i;if(t)n.arc(i.xCenter,i.yCenter,e,0,Ai);else{let s=i.getPointPosition(0,e);n.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=i.getPointPosition(o,e),n.lineTo(s.x,s.y)}}function s2e(i,e,t,r,n){const s=i.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(n.dash),s.lineDashOffset=n.dashOffset,s.beginPath(),Fde(i,t,o,r),s.closePath(),s.stroke(),s.restore())}function o2e(i,e,t){return Lc(i,{label:t,index:e,type:"pointLabel"})}class Ed extends j_{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=yn(FE(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Qi(e)&&!isNaN(e)?e:0,this.max=Qi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FE(this.options))}generateTickLabels(e){j_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const n=wi(this.options.pointLabels.callback,[t,r],this);return n||n===0?n:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?XTe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){const t=Ai/(this._pointLabels.length||1),r=this.options.startAngle||0;return xs(e*t+Eo(r))}getDistanceFromCenterForValue(e){if(qt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(qt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return o2e(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const n=this.getIndexAngle(e)-lr+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),Fde(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:s}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&n2e(this,o),n.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=n.setContext(d),p=s.setContext(d);s2e(this,f,l,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(e.lineWidth=d,e.strokeStyle=u,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=r.setContext(this.getContext(l)),h=wr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const u=yn(c.backdropPadding);e.fillRect(-o/2-u.left,-s-h.size/2-u.top,o+u.width,h.size+u.height)}Wh(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}ee(Ed,"id","radialLinear"),ee(Ed,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xb.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ee(Ed,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ee(Ed,"descriptors",{angleLines:{_fallback:"grid"}});const Cb={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(Cb);function Roe(i,e){return i-e}function Loe(i,e){if(qt(e))return null;const t=i._adapter,{parser:r,round:n,isoWeekday:s}=i._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Qi(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(nf(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,n)),+o)}function Ioe(i,e,t,r){const n=Jn.length;for(let s=Jn.indexOf(i);s<n-1;++s){const o=Cb[Jn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return Jn[s]}return Jn[n-1]}function a2e(i,e,t,r,n){for(let s=Jn.length-1;s>=Jn.indexOf(t);s--){const o=Jn[s];if(Cb[o].common&&i._adapter.diff(n,r,o)>=e-1)return o}return Jn[t?Jn.indexOf(t):0]}function l2e(i){for(let e=Jn.indexOf(i)+1,t=Jn.length;e<t;++e)if(Cb[Jn[e]].common)return Jn[e]}function Poe(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:r,hi:n}=hC(t,e),s=t[r]>=e?t[r]:t[n];i[s]=!0}}function c2e(i,e,t,r){const n=i._adapter,s=+n.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+n.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function koe(i,e,t){const r=[],n={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],n[a]=o,r.push({value:a,major:!1});return s===0||!t?r:c2e(i,r,n,t)}class im extends cu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),n=this._adapter=new gde._date(e.adapters.date);n.init(t),Eg(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Loe(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=Qi(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),s=Qi(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,s-1),this.max=Math.max(n+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const s=this.min,o=this.max,a=q1e(n,s,o);return this._unit=t.unit||(r.autoSkip?Ioe(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):a2e(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:l2e(this._unit),this.initOffsets(n),e.reverse&&a.reverse(),koe(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,n,s;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Pr(t,0,o),r=Pr(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,s=n.time,o=s.unit||Ioe(s.minUnit,t,r,this._getLabelCapacity(t)),a=yt(n.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=nf(l)||l===!0,h={};let u=t,d,f;if(c&&(u=+e.startOf(u,"isoWeek",l)),u=+e.startOf(u,c?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<r;d=+e.add(d,a,o),f++)Poe(h,d,p);return(d===r||n.bounds==="ticks"||f===1)&&Poe(h,d,p),Object.keys(h).sort(Roe).map(g=>+g)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,s=this._unit,o=t||n[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,n){const s=this.options,o=s.ticks.callback;if(o)return wi(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=r[t],f=c&&u&&d&&d.major;return this._adapter.format(e,n||(f?u:h))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=Eo(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,koe(this,[e],this._majorUnit),n),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,r=n.length;t<r;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(Loe(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Wue(e.sort(Roe))}}ee(im,"id","time"),ee(im,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function p0(i,e,t){let r=0,n=i.length-1,s,o,a,l;t?(e>=i[r].pos&&e<=i[n].pos&&({lo:r,hi:n}=Xa(i,"pos",e)),{pos:s,time:a}=i[r],{pos:o,time:l}=i[n]):(e>=i[r].time&&e<=i[n].time&&({lo:r,hi:n}=Xa(i,"time",e)),{time:s,pos:a}=i[r],{time:o,pos:l}=i[n]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class NE extends im{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=p0(t,this.min),this._tableRange=p0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=r&&n.push(c);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((n,s)=>n-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(p0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return p0(this._table,r*this._tableRange+this._minPos,!0)}}ee(NE,"id","timeseries"),ee(NE,"defaults",im.defaults);var h2e=Object.freeze({__proto__:null,CategoryScale:af,LinearScale:Yh,LogarithmicScale:DE,RadialLinearScale:Ed,TimeScale:im,TimeSeriesScale:NE});const u2e=[vSe,YCe,zTe,h2e];Xn.register(...u2e);class hu extends Error{}class d2e extends hu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class f2e extends hu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class p2e extends hu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Sd extends hu{}class Nde extends hu{constructor(e){super(`Invalid unit ${e}`)}}class Zn extends hu{}class jl extends hu{constructor(){super("Zone is an abstract class")}}const Ee="numeric",Po="short",Rs="long",z_={year:Ee,month:Ee,day:Ee},$de={year:Ee,month:Po,day:Ee},g2e={year:Ee,month:Po,day:Ee,weekday:Po},Bde={year:Ee,month:Rs,day:Ee},jde={year:Ee,month:Rs,day:Ee,weekday:Rs},zde={hour:Ee,minute:Ee},Gde={hour:Ee,minute:Ee,second:Ee},Ude={hour:Ee,minute:Ee,second:Ee,timeZoneName:Po},Vde={hour:Ee,minute:Ee,second:Ee,timeZoneName:Rs},qde={hour:Ee,minute:Ee,hourCycle:"h23"},Hde={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23"},Wde={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:Po},Yde={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:Rs},Xde={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee},Zde={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee,second:Ee},Kde={year:Ee,month:Po,day:Ee,hour:Ee,minute:Ee},Jde={year:Ee,month:Po,day:Ee,hour:Ee,minute:Ee,second:Ee},m2e={year:Ee,month:Po,day:Ee,weekday:Po,hour:Ee,minute:Ee},Qde={year:Ee,month:Rs,day:Ee,hour:Ee,minute:Ee,timeZoneName:Po},efe={year:Ee,month:Rs,day:Ee,hour:Ee,minute:Ee,second:Ee,timeZoneName:Po},tfe={year:Ee,month:Rs,day:Ee,weekday:Rs,hour:Ee,minute:Ee,timeZoneName:Rs},ife={year:Ee,month:Rs,day:Ee,weekday:Rs,hour:Ee,minute:Ee,second:Ee,timeZoneName:Rs};class Zm{get type(){throw new jl}get name(){throw new jl}get ianaName(){return this.name}get isUniversal(){throw new jl}offsetName(e,t){throw new jl}formatOffset(e,t){throw new jl}offset(e){throw new jl}equals(e){throw new jl}get isValid(){throw new jl}}let sw=null;class Tb extends Zm{static get instance(){return sw===null&&(sw=new Tb),sw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return ufe(e,t,r)}formatOffset(e,t){return Ag(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let m_={};function y2e(i){return m_[i]||(m_[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),m_[i]}const _2e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function v2e(i,e){const t=i.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,s,o,a,l,c,h]=r;return[o,n,s,a,l,c,h]}function b2e(i,e){const t=i.formatToParts(e),r=[];for(let n=0;n<t.length;n++){const{type:s,value:o}=t[n],a=_2e[s];s==="era"?r[a]=o:ft(a)||(r[a]=parseInt(o,10))}return r}let g0={};class cl extends Zm{static create(e){return g0[e]||(g0[e]=new cl(e)),g0[e]}static resetCache(){g0={},m_={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=cl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return ufe(e,t,r,this.name)}formatOffset(e,t){return Ag(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=y2e(this.name);let[n,s,o,a,l,c,h]=r.formatToParts?b2e(r,t):v2e(r,t);a==="BC"&&(n=-Math.abs(n)+1);const d=Mb({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let f=+t;const p=f%1e3;return f-=p>=0?p:1e3+p,(d-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Ooe={};function x2e(i,e={}){const t=JSON.stringify([i,e]);let r=Ooe[t];return r||(r=new Intl.ListFormat(i,e),Ooe[t]=r),r}let $E={};function BE(i,e={}){const t=JSON.stringify([i,e]);let r=$E[t];return r||(r=new Intl.DateTimeFormat(i,e),$E[t]=r),r}let jE={};function w2e(i,e={}){const t=JSON.stringify([i,e]);let r=jE[t];return r||(r=new Intl.NumberFormat(i,e),jE[t]=r),r}let zE={};function E2e(i,e={}){const{base:t,...r}=e,n=JSON.stringify([i,r]);let s=zE[n];return s||(s=new Intl.RelativeTimeFormat(i,e),zE[n]=s),s}let lg=null;function S2e(){return lg||(lg=new Intl.DateTimeFormat().resolvedOptions().locale,lg)}let Doe={};function C2e(i){let e=Doe[i];if(!e){const t=new Intl.Locale(i);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,Doe[i]=e}return e}function T2e(i){const e=i.indexOf("-x-");e!==-1&&(i=i.substring(0,e));const t=i.indexOf("-u-");if(t===-1)return[i];{let r,n;try{r=BE(i).resolvedOptions(),n=i}catch{const l=i.substring(0,t);r=BE(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function A2e(i,e,t){return(t||e)&&(i.includes("-u-")||(i+="-u"),t&&(i+=`-ca-${t}`),e&&(i+=`-nu-${e}`)),i}function M2e(i){const e=[];for(let t=1;t<=12;t++){const r=Oe.utc(2009,t,1);e.push(i(r))}return e}function R2e(i){const e=[];for(let t=1;t<=7;t++){const r=Oe.utc(2016,11,13+t);e.push(i(r))}return e}function m0(i,e,t,r){const n=i.listingMode();return n==="error"?null:n==="en"?t(e):r(e)}function L2e(i){return i.numberingSystem&&i.numberingSystem!=="latn"?!1:i.numberingSystem==="latn"||!i.locale||i.locale.startsWith("en")||new Intl.DateTimeFormat(i.intl).resolvedOptions().numberingSystem==="latn"}class I2e{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=w2e(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):CC(e,3);return fr(t,this.padTo)}}}class P2e{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&cl.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=BE(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class k2e{constructor(e,t,r){this.opts={style:"long",...r},!t&&cfe()&&(this.rtf=E2e(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):Q2e(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const O2e={firstDay:1,minimalDays:4,weekend:[6,7]};class pi{static fromOpts(e){return pi.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,n,s=!1){const o=e||sr.defaultLocale,a=o||(s?"en-US":S2e()),l=t||sr.defaultNumberingSystem,c=r||sr.defaultOutputCalendar,h=GE(n)||sr.defaultWeekSettings;return new pi(a,l,c,h,o)}static resetCache(){lg=null,$E={},jE={},zE={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:n}={}){return pi.create(e,t,r,n)}constructor(e,t,r,n,s){const[o,a,l]=T2e(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=A2e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=L2e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:pi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,GE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return m0(this,e,pfe,()=>{const r=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=M2e(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,t=!1){return m0(this,e,yfe,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=R2e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return m0(this,void 0,()=>_fe,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Oe.utc(2016,11,13,9),Oe.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return m0(this,e,vfe,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Oe.utc(-40,1,1),Oe.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const n=this.dtFormatter(e,t),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new I2e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new P2e(e,this.intl,t)}relFormatter(e={}){return new k2e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return x2e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hfe()?C2e(this.locale):O2e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let ow=null;class Ln extends Zm{static get utcInstance(){return ow===null&&(ow=new Ln(0)),ow}static instance(e){return e===0?Ln.utcInstance:new Ln(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Ln(Rb(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ag(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ag(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Ag(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class D2e extends Zm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Jl(i,e){if(ft(i)||i===null)return e;if(i instanceof Zm)return i;if($2e(i)){const t=i.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Tb.instance:t==="utc"||t==="gmt"?Ln.utcInstance:Ln.parseSpecifier(t)||cl.create(i)}else return jh(i)?Ln.instance(i):typeof i=="object"&&"offset"in i&&typeof i.offset=="function"?i:new D2e(i)}let Foe=()=>Date.now(),Noe="system",$oe=null,Boe=null,joe=null,zoe=60,Goe,Uoe=null;class sr{static get now(){return Foe}static set now(e){Foe=e}static set defaultZone(e){Noe=e}static get defaultZone(){return Jl(Noe,Tb.instance)}static get defaultLocale(){return $oe}static set defaultLocale(e){$oe=e}static get defaultNumberingSystem(){return Boe}static set defaultNumberingSystem(e){Boe=e}static get defaultOutputCalendar(){return joe}static set defaultOutputCalendar(e){joe=e}static get defaultWeekSettings(){return Uoe}static set defaultWeekSettings(e){Uoe=GE(e)}static get twoDigitCutoffYear(){return zoe}static set twoDigitCutoffYear(e){zoe=e%100}static get throwOnInvalid(){return Goe}static set throwOnInvalid(e){Goe=e}static resetCaches(){pi.resetCache(),cl.resetCache()}}class So{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const rfe=[0,31,59,90,120,151,181,212,243,273,304,334],nfe=[0,31,60,91,121,152,182,213,244,274,305,335];function Ws(i,e){return new So("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${i}, which is invalid`)}function wC(i,e,t){const r=new Date(Date.UTC(i,e-1,t));i<100&&i>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function sfe(i,e,t){return t+(Km(i)?nfe:rfe)[e-1]}function ofe(i,e){const t=Km(i)?nfe:rfe,r=t.findIndex(s=>s<e),n=e-t[r];return{month:r+1,day:n}}function EC(i,e){return(i-e+7)%7+1}function G_(i,e=4,t=1){const{year:r,month:n,day:s}=i,o=sfe(r,n,s),a=EC(wC(r,n,s),t);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=rm(c,e,t)):l>rm(r,e,t)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...Lb(i)}}function Voe(i,e=4,t=1){const{weekYear:r,weekNumber:n,weekday:s}=i,o=EC(wC(r,1,e),t),a=Bd(r);let l=n*7+s-o-7+e,c;l<1?(c=r-1,l+=Bd(c)):l>a?(c=r+1,l-=Bd(r)):c=r;const{month:h,day:u}=ofe(c,l);return{year:c,month:h,day:u,...Lb(i)}}function aw(i){const{year:e,month:t,day:r}=i,n=sfe(e,t,r);return{year:e,ordinal:n,...Lb(i)}}function qoe(i){const{year:e,ordinal:t}=i,{month:r,day:n}=ofe(e,t);return{year:e,month:r,day:n,...Lb(i)}}function Hoe(i,e){if(!ft(i.localWeekday)||!ft(i.localWeekNumber)||!ft(i.localWeekYear)){if(!ft(i.weekday)||!ft(i.weekNumber)||!ft(i.weekYear))throw new Sd("Cannot mix locale-based week fields with ISO-based week fields");return ft(i.localWeekday)||(i.weekday=i.localWeekday),ft(i.localWeekNumber)||(i.weekNumber=i.localWeekNumber),ft(i.localWeekYear)||(i.weekYear=i.localWeekYear),delete i.localWeekday,delete i.localWeekNumber,delete i.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function F2e(i,e=4,t=1){const r=Ab(i.weekYear),n=Ys(i.weekNumber,1,rm(i.weekYear,e,t)),s=Ys(i.weekday,1,7);return r?n?s?!1:Ws("weekday",i.weekday):Ws("week",i.weekNumber):Ws("weekYear",i.weekYear)}function N2e(i){const e=Ab(i.year),t=Ys(i.ordinal,1,Bd(i.year));return e?t?!1:Ws("ordinal",i.ordinal):Ws("year",i.year)}function afe(i){const e=Ab(i.year),t=Ys(i.month,1,12),r=Ys(i.day,1,U_(i.year,i.month));return e?t?r?!1:Ws("day",i.day):Ws("month",i.month):Ws("year",i.year)}function lfe(i){const{hour:e,minute:t,second:r,millisecond:n}=i,s=Ys(e,0,23)||e===24&&t===0&&r===0&&n===0,o=Ys(t,0,59),a=Ys(r,0,59),l=Ys(n,0,999);return s?o?a?l?!1:Ws("millisecond",n):Ws("second",r):Ws("minute",t):Ws("hour",e)}function ft(i){return typeof i>"u"}function jh(i){return typeof i=="number"}function Ab(i){return typeof i=="number"&&i%1===0}function $2e(i){return typeof i=="string"}function B2e(i){return Object.prototype.toString.call(i)==="[object Date]"}function cfe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hfe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function j2e(i){return Array.isArray(i)?i:[i]}function Woe(i,e,t){if(i.length!==0)return i.reduce((r,n)=>{const s=[e(n),n];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function z2e(i,e){return e.reduce((t,r)=>(t[r]=i[r],t),{})}function lf(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function GE(i){if(i==null)return null;if(typeof i!="object")throw new Zn("Week settings must be an object");if(!Ys(i.firstDay,1,7)||!Ys(i.minimalDays,1,7)||!Array.isArray(i.weekend)||i.weekend.some(e=>!Ys(e,1,7)))throw new Zn("Invalid week settings");return{firstDay:i.firstDay,minimalDays:i.minimalDays,weekend:Array.from(i.weekend)}}function Ys(i,e,t){return Ab(i)&&i>=e&&i<=t}function G2e(i,e){return i-e*Math.floor(i/e)}function fr(i,e=2){const t=i<0;let r;return t?r="-"+(""+-i).padStart(e,"0"):r=(""+i).padStart(e,"0"),r}function Yl(i){if(!(ft(i)||i===null||i===""))return parseInt(i,10)}function fh(i){if(!(ft(i)||i===null||i===""))return parseFloat(i)}function SC(i){if(!(ft(i)||i===null||i==="")){const e=parseFloat("0."+i)*1e3;return Math.floor(e)}}function CC(i,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(i*r)/r}function Km(i){return i%4===0&&(i%100!==0||i%400===0)}function Bd(i){return Km(i)?366:365}function U_(i,e){const t=G2e(e-1,12)+1,r=i+(e-t)/12;return t===2?Km(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Mb(i){let e=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond);return i.year<100&&i.year>=0&&(e=new Date(e),e.setUTCFullYear(i.year,i.month-1,i.day)),+e}function Yoe(i,e,t){return-EC(wC(i,1,e),t)+e-1}function rm(i,e=4,t=1){const r=Yoe(i,e,t),n=Yoe(i+1,e,t);return(Bd(i)-r+n)/7}function UE(i){return i>99?i:i>sr.twoDigitCutoffYear?1900+i:2e3+i}function ufe(i,e,t,r=null){const n=new Date(i),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Rb(i,e){let t=parseInt(i,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-r:r;return t*60+n}function dfe(i){const e=Number(i);if(typeof i=="boolean"||i===""||Number.isNaN(e))throw new Zn(`Invalid unit value ${i}`);return e}function V_(i,e){const t={};for(const r in i)if(lf(i,r)){const n=i[r];if(n==null)continue;t[e(r)]=dfe(n)}return t}function Ag(i,e){const t=Math.trunc(Math.abs(i/60)),r=Math.trunc(Math.abs(i%60)),n=i>=0?"+":"-";switch(e){case"short":return`${n}${fr(t,2)}:${fr(r,2)}`;case"narrow":return`${n}${t}${r>0?`:${r}`:""}`;case"techie":return`${n}${fr(t,2)}${fr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Lb(i){return z2e(i,["hour","minute","second","millisecond"])}const U2e=["January","February","March","April","May","June","July","August","September","October","November","December"],ffe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],V2e=["J","F","M","A","M","J","J","A","S","O","N","D"];function pfe(i){switch(i){case"narrow":return[...V2e];case"short":return[...ffe];case"long":return[...U2e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const gfe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],mfe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],q2e=["M","T","W","T","F","S","S"];function yfe(i){switch(i){case"narrow":return[...q2e];case"short":return[...mfe];case"long":return[...gfe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const _fe=["AM","PM"],H2e=["Before Christ","Anno Domini"],W2e=["BC","AD"],Y2e=["B","A"];function vfe(i){switch(i){case"narrow":return[...Y2e];case"short":return[...W2e];case"long":return[...H2e];default:return null}}function X2e(i){return _fe[i.hour<12?0:1]}function Z2e(i,e){return yfe(e)[i.weekday-1]}function K2e(i,e){return pfe(e)[i.month-1]}function J2e(i,e){return vfe(e)[i.year<0?0:1]}function Q2e(i,e,t="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(i)===-1;if(t==="auto"&&s){const u=i==="days";switch(e){case 1:return u?"tomorrow":`next ${n[i][0]}`;case-1:return u?"yesterday":`last ${n[i][0]}`;case 0:return u?"today":`this ${n[i][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=n[i],h=r?l?c[1]:c[2]||c[1]:l?n[i][0]:i;return o?`${a} ${h} ago`:`in ${a} ${h}`}function Xoe(i,e){let t="";for(const r of i)r.literal?t+=r.val:t+=e(r.val);return t}const eAe={D:z_,DD:$de,DDD:Bde,DDDD:jde,t:zde,tt:Gde,ttt:Ude,tttt:Vde,T:qde,TT:Hde,TTT:Wde,TTTT:Yde,f:Xde,ff:Kde,fff:Qde,ffff:tfe,F:Zde,FF:Jde,FFF:efe,FFFF:ife};class fn{static create(e,t={}){return new fn(e,t)}static parseFormat(e){let t=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),t=null,r="",n=!n):n||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return eAe[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return fr(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,p)=>this.loc.extract(e,f,p),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>r?X2e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,p)=>r?K2e(e,f):s(p?{month:f}:{month:f,day:"numeric"},"month"),c=(f,p)=>r?Z2e(e,f):s(p?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),h=f=>{const p=fn.macroTokenToFormatOpts(f);return p?this.formatWithSystemDefault(e,p):f},u=f=>r?J2e(e,f):s({era:f},"era"),d=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(f)}};return Xoe(fn.parseFormat(t),d)}formatDurationFromString(e,t){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=r(c);return h?this.num(l.get(h),c.length):c},s=fn.parseFormat(t),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return Xoe(s,n(a))}}const bfe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ff(...i){const e=i.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function Nf(...i){return e=>i.reduce(([t,r,n],s)=>{const[o,a,l]=s(e,n);return[{...t,...o},a||r,l]},[{},null,1]).slice(0,2)}function $f(i,...e){if(i==null)return[null,null];for(const[t,r]of e){const n=t.exec(i);if(n)return r(n)}return[null,null]}function xfe(...i){return(e,t)=>{const r={};let n;for(n=0;n<i.length;n++)r[i[n]]=Yl(e[t+n]);return[r,null,t+n]}}const wfe=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,tAe=`(?:${wfe.source}?(?:\\[(${bfe.source})\\])?)?`,TC=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Efe=RegExp(`${TC.source}${tAe}`),AC=RegExp(`(?:T${Efe.source})?`),iAe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,rAe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nAe=/(\d{4})-?(\d{3})/,sAe=xfe("weekYear","weekNumber","weekDay"),oAe=xfe("year","ordinal"),aAe=/(\d{4})-(\d\d)-(\d\d)/,Sfe=RegExp(`${TC.source} ?(?:${wfe.source}|(${bfe.source}))?`),lAe=RegExp(`(?: ${Sfe.source})?`);function jd(i,e,t){const r=i[e];return ft(r)?t:Yl(r)}function cAe(i,e){return[{year:jd(i,e),month:jd(i,e+1,1),day:jd(i,e+2,1)},null,e+3]}function Bf(i,e){return[{hours:jd(i,e,0),minutes:jd(i,e+1,0),seconds:jd(i,e+2,0),milliseconds:SC(i[e+3])},null,e+4]}function Jm(i,e){const t=!i[e]&&!i[e+1],r=Rb(i[e+1],i[e+2]),n=t?null:Ln.instance(r);return[{},n,e+3]}function Qm(i,e){const t=i[e]?cl.create(i[e]):null;return[{},t,e+1]}const hAe=RegExp(`^T?${TC.source}$`),uAe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function dAe(i){const[e,t,r,n,s,o,a,l,c]=i,h=e[0]==="-",u=l&&l[0]==="-",d=(f,p=!1)=>f!==void 0&&(p||f&&h)?-f:f;return[{years:d(fh(t)),months:d(fh(r)),weeks:d(fh(n)),days:d(fh(s)),hours:d(fh(o)),minutes:d(fh(a)),seconds:d(fh(l),l==="-0"),milliseconds:d(SC(c),u)}]}const fAe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function MC(i,e,t,r,n,s,o){const a={year:e.length===2?UE(Yl(e)):Yl(e),month:ffe.indexOf(t)+1,day:Yl(r),hour:Yl(n),minute:Yl(s)};return o&&(a.second=Yl(o)),i&&(a.weekday=i.length>3?gfe.indexOf(i)+1:mfe.indexOf(i)+1),a}const pAe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function gAe(i){const[,e,t,r,n,s,o,a,l,c,h,u]=i,d=MC(e,n,r,t,s,o,a);let f;return l?f=fAe[l]:c?f=0:f=Rb(h,u),[d,new Ln(f)]}function mAe(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const yAe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,_Ae=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,vAe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Zoe(i){const[,e,t,r,n,s,o,a]=i;return[MC(e,n,r,t,s,o,a),Ln.utcInstance]}function bAe(i){const[,e,t,r,n,s,o,a]=i;return[MC(e,a,t,r,n,s,o),Ln.utcInstance]}const xAe=Ff(iAe,AC),wAe=Ff(rAe,AC),EAe=Ff(nAe,AC),SAe=Ff(Efe),Cfe=Nf(cAe,Bf,Jm,Qm),CAe=Nf(sAe,Bf,Jm,Qm),TAe=Nf(oAe,Bf,Jm,Qm),AAe=Nf(Bf,Jm,Qm);function MAe(i){return $f(i,[xAe,Cfe],[wAe,CAe],[EAe,TAe],[SAe,AAe])}function RAe(i){return $f(mAe(i),[pAe,gAe])}function LAe(i){return $f(i,[yAe,Zoe],[_Ae,Zoe],[vAe,bAe])}function IAe(i){return $f(i,[uAe,dAe])}const PAe=Nf(Bf);function kAe(i){return $f(i,[hAe,PAe])}const OAe=Ff(aAe,lAe),DAe=Ff(Sfe),FAe=Nf(Bf,Jm,Qm);function NAe(i){return $f(i,[OAe,Cfe],[DAe,FAe])}const Koe="Invalid Duration",Tfe={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},$Ae={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Tfe},Bs=146097/400,Xu=146097/4800,BAe={years:{quarters:4,months:12,weeks:Bs/7,days:Bs,hours:Bs*24,minutes:Bs*24*60,seconds:Bs*24*60*60,milliseconds:Bs*24*60*60*1e3},quarters:{months:3,weeks:Bs/28,days:Bs/4,hours:Bs*24/4,minutes:Bs*24*60/4,seconds:Bs*24*60*60/4,milliseconds:Bs*24*60*60*1e3/4},months:{weeks:Xu/7,days:Xu,hours:Xu*24,minutes:Xu*24*60,seconds:Xu*24*60*60,milliseconds:Xu*24*60*60*1e3},...Tfe},Lh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],jAe=Lh.slice(0).reverse();function zl(i,e,t=!1){const r={values:t?e.values:{...i.values,...e.values||{}},loc:i.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||i.conversionAccuracy,matrix:e.matrix||i.matrix};return new Vt(r)}function Afe(i,e){let t=e.milliseconds??0;for(const r of jAe.slice(1))e[r]&&(t+=e[r]*i[r].milliseconds);return t}function Joe(i,e){const t=Afe(i,e)<0?-1:1;Lh.reduceRight((r,n)=>{if(ft(e[n]))return r;if(r){const s=e[r]*t,o=i[n][r],a=Math.floor(s/o);e[n]+=a*t,e[r]-=a*o*t}return n},null),Lh.reduce((r,n)=>{if(ft(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*i[r][n]}return n},null)}function zAe(i){const e={};for(const[t,r]of Object.entries(i))r!==0&&(e[t]=r);return e}class Vt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?BAe:$Ae;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||pi.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return Vt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Zn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Vt({values:V_(e,Vt.normalizeUnit),loc:pi.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(jh(e))return Vt.fromMillis(e);if(Vt.isDuration(e))return e;if(typeof e=="object")return Vt.fromObject(e);throw new Zn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=IAe(e);return r?Vt.fromObject(r,t):Vt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=kAe(e);return r?Vt.fromObject(r,t):Vt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Zn("need to specify a reason the Duration is invalid");const r=e instanceof So?e:new So(e,t);if(sr.throwOnInvalid)throw new p2e(r);return new Vt({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Nde(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?fn.create(this.loc,r).formatDurationFromString(this,e):Koe}toHuman(e={}){if(!this.isValid)return Koe;const t=Lh.map(r=>{const n=this.values[r];return ft(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=CC(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Oe.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Afe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e),r={};for(const n of Lh)(lf(t.values,n)||lf(this.values,n))&&(r[n]=t.get(n)+this.get(n));return zl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=dfe(e(this.values[r],r));return zl(this,{values:t},!0)}get(e){return this[Vt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...V_(e,Vt.normalizeUnit)};return zl(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:r};return zl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Joe(this.matrix,e),zl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=zAe(this.normalize().shiftToAll().toObject());return zl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Vt.normalizeUnit(o));const t={},r={},n=this.toObject();let s;for(const o of Lh)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;jh(n[o])&&(a+=n[o]);const l=Math.trunc(a);t[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else jh(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Joe(this.matrix,t),zl(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return zl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Lh)if(!t(this.values[r],e.values[r]))return!1;return!0}}const Zu="Invalid Interval";function GAe(i,e){return!i||!i.isValid?Zi.invalid("missing or invalid start"):!e||!e.isValid?Zi.invalid("missing or invalid end"):e<i?Zi.invalid("end before start",`The end of an interval must be after its start, but you had start=${i.toISO()} and end=${e.toISO()}`):null}class Zi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Zn("need to specify a reason the Interval is invalid");const r=e instanceof So?e:new So(e,t);if(sr.throwOnInvalid)throw new f2e(r);return new Zi({invalid:r})}static fromDateTimes(e,t){const r=qp(e),n=qp(t),s=GAe(r,n);return s??new Zi({start:r,end:n})}static after(e,t){const r=Vt.fromDurationLike(t),n=qp(e);return Zi.fromDateTimes(n,n.plus(r))}static before(e,t){const r=Vt.fromDurationLike(t),n=qp(e);return Zi.fromDateTimes(n.minus(r),n)}static fromISO(e,t){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=Oe.fromISO(r,t),o=s.isValid}catch{o=!1}let a,l;try{a=Oe.fromISO(n,t),l=a.isValid}catch{l=!1}if(o&&l)return Zi.fromDateTimes(s,a);if(o){const c=Vt.fromISO(n,t);if(c.isValid)return Zi.after(s,c)}else if(l){const c=Vt.fromISO(r,t);if(c.isValid)return Zi.before(a,c)}}return Zi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let n;return t!=null&&t.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Zi.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(qp).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(Zi.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const t=Vt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Zi.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Zi.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Zi.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?t=l.time:(t&&+t!=+l.time&&n.push(Zi.fromDateTimes(t,l.time)),t=null);return Zi.merge(n)}difference(...e){return Zi.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Zu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=z_,t={}){return this.isValid?fn.create(this.s.loc.clone(t),e).formatInterval(this):Zu}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Zu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Zu}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Zu}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Zu}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Vt.invalid(this.invalidReason)}mapEndpoints(e){return Zi.fromDateTimes(e(this.s),e(this.e))}}class y0{static hasDST(e=sr.defaultZone){const t=Oe.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return cl.isValidZone(e)}static normalizeZone(e){return Jl(e,sr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||pi.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||pi.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||pi.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||pi.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||pi.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null}={}){return(n||pi.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:n=null}={}){return(n||pi.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return pi.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return pi.create(t,null,"gregory").eras(e)}static features(){return{relative:cfe(),localeWeek:hfe()}}}function Qoe(i,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(i);return Math.floor(Vt.fromMillis(r).as("days"))}function UAe(i,e,t){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=Qoe(l,c);return(h-h%7)/7}],["days",Qoe]],n={},s=i;let o,a;for(const[l,c]of r)t.indexOf(l)>=0&&(o=l,n[l]=c(i,e),a=s.plus(n),a>e?(n[l]--,i=s.plus(n),i>e&&(a=i,n[l]--,i=s.plus(n))):i=a);return[i,n,a,o]}function VAe(i,e,t,r){let[n,s,o,a]=UAe(i,e,t);const l=e-n,c=t.filter(u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0);c.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=Vt.fromObject(s,r);return c.length>0?Vt.fromMillis(l,r).shiftTo(...c).plus(h):h}const RC={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},eae={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},qAe=RC.hanidec.replace(/[\[|\]]/g,"").split("");function HAe(i){let e=parseInt(i,10);if(isNaN(e)){e="";for(let t=0;t<i.length;t++){const r=i.charCodeAt(t);if(i[t].search(RC.hanidec)!==-1)e+=qAe.indexOf(i[t]);else for(const n in eae){const[s,o]=eae[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}function mo({numberingSystem:i},e=""){return new RegExp(`${RC[i||"latn"]}${e}`)}const WAe="missing Intl.DateTimeFormat.formatToParts support";function Kt(i,e=t=>t){return{regex:i,deser:([t])=>e(HAe(t))}}const YAe="",Mfe=`[ ${YAe}]`,Rfe=new RegExp(Mfe,"g");function XAe(i){return i.replace(/\./g,"\\.?").replace(Rfe,Mfe)}function tae(i){return i.replace(/\./g,"").replace(Rfe," ").toLowerCase()}function yo(i,e){return i===null?null:{regex:RegExp(i.map(XAe).join("|")),deser:([t])=>i.findIndex(r=>tae(t)===tae(r))+e}}function iae(i,e){return{regex:i,deser:([,t,r])=>Rb(t,r),groups:e}}function _0(i){return{regex:i,deser:([e])=>e}}function ZAe(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function KAe(i,e){const t=mo(e),r=mo(e,"{2}"),n=mo(e,"{3}"),s=mo(e,"{4}"),o=mo(e,"{6}"),a=mo(e,"{1,2}"),l=mo(e,"{1,3}"),c=mo(e,"{1,6}"),h=mo(e,"{1,9}"),u=mo(e,"{2,4}"),d=mo(e,"{4,6}"),f=m=>({regex:RegExp(ZAe(m.val)),deser:([y])=>y,literal:!0}),g=(m=>{if(i.literal)return f(m);switch(m.val){case"G":return yo(e.eras("short"),0);case"GG":return yo(e.eras("long"),0);case"y":return Kt(c);case"yy":return Kt(u,UE);case"yyyy":return Kt(s);case"yyyyy":return Kt(d);case"yyyyyy":return Kt(o);case"M":return Kt(a);case"MM":return Kt(r);case"MMM":return yo(e.months("short",!0),1);case"MMMM":return yo(e.months("long",!0),1);case"L":return Kt(a);case"LL":return Kt(r);case"LLL":return yo(e.months("short",!1),1);case"LLLL":return yo(e.months("long",!1),1);case"d":return Kt(a);case"dd":return Kt(r);case"o":return Kt(l);case"ooo":return Kt(n);case"HH":return Kt(r);case"H":return Kt(a);case"hh":return Kt(r);case"h":return Kt(a);case"mm":return Kt(r);case"m":return Kt(a);case"q":return Kt(a);case"qq":return Kt(r);case"s":return Kt(a);case"ss":return Kt(r);case"S":return Kt(l);case"SSS":return Kt(n);case"u":return _0(h);case"uu":return _0(a);case"uuu":return Kt(t);case"a":return yo(e.meridiems(),0);case"kkkk":return Kt(s);case"kk":return Kt(u,UE);case"W":return Kt(a);case"WW":return Kt(r);case"E":case"c":return Kt(t);case"EEE":return yo(e.weekdays("short",!1),1);case"EEEE":return yo(e.weekdays("long",!1),1);case"ccc":return yo(e.weekdays("short",!0),1);case"cccc":return yo(e.weekdays("long",!0),1);case"Z":case"ZZ":return iae(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return iae(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return _0(/[a-z_+-/]{1,256}?/i);case" ":return _0(/[^\S\n\r]/);default:return f(m)}})(i)||{invalidReason:WAe};return g.token=i,g}const JAe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function QAe(i,e,t){const{type:r,value:n}=i;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=JAe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function eMe(i){return[`^${i.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,i]}function tMe(i,e,t){const r=i.match(e);if(r){const n={};let s=1;for(const o in t)if(lf(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function iMe(i){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return ft(i.z)||(t=cl.create(i.z)),ft(i.Z)||(t||(t=new Ln(i.Z)),r=i.Z),ft(i.q)||(i.M=(i.q-1)*3+1),ft(i.h)||(i.h<12&&i.a===1?i.h+=12:i.h===12&&i.a===0&&(i.h=0)),i.G===0&&i.y&&(i.y=-i.y),ft(i.u)||(i.S=SC(i.u)),[Object.keys(i).reduce((s,o)=>{const a=e(o);return a&&(s[a]=i[o]),s},{}),t,r]}let lw=null;function rMe(){return lw||(lw=Oe.fromMillis(1555555555555)),lw}function nMe(i,e){if(i.literal)return i;const t=fn.macroTokenToFormatOpts(i.val),r=Pfe(t,e);return r==null||r.includes(void 0)?i:r}function Lfe(i,e){return Array.prototype.concat(...i.map(t=>nMe(t,e)))}function Ife(i,e,t){const r=Lfe(fn.parseFormat(t),i),n=r.map(o=>KAe(o,i)),s=n.find(o=>o.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{const[o,a]=eMe(n),l=RegExp(o,"i"),[c,h]=tMe(e,l,a),[u,d,f]=h?iMe(h):[null,null,void 0];if(lf(h,"a")&&lf(h,"H"))throw new Sd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:c,matches:h,result:u,zone:d,specificOffset:f}}}function sMe(i,e,t){const{result:r,zone:n,specificOffset:s,invalidReason:o}=Ife(i,e,t);return[r,n,s,o]}function Pfe(i,e){if(!i)return null;const r=fn.create(e,i).dtFormatter(rMe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>QAe(o,i,s))}const cw="Invalid DateTime",rae=864e13;function v0(i){return new So("unsupported zone",`the zone "${i.name}" is not supported`)}function hw(i){return i.weekData===null&&(i.weekData=G_(i.c)),i.weekData}function uw(i){return i.localWeekData===null&&(i.localWeekData=G_(i.c,i.loc.getMinDaysInFirstWeek(),i.loc.getStartOfWeek())),i.localWeekData}function ph(i,e){const t={ts:i.ts,zone:i.zone,c:i.c,o:i.o,loc:i.loc,invalid:i.invalid};return new Oe({...t,...e,old:t})}function kfe(i,e,t){let r=i-e*60*1e3;const n=t.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=t.offset(r);return n===s?[r,n]:[i-Math.min(n,s)*60*1e3,Math.max(n,s)]}function b0(i,e){i+=e*60*1e3;const t=new Date(i);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function y_(i,e,t){return kfe(Mb(i),e,t)}function nae(i,e){const t=i.o,r=i.c.year+Math.trunc(e.years),n=i.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...i.c,year:r,month:n,day:Math.min(i.c.day,U_(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Vt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Mb(s);let[l,c]=kfe(a,t,i.zone);return o!==0&&(l+=o,c=i.zone.offset(l)),{ts:l,o:c}}function Vp(i,e,t,r,n,s){const{setZone:o,zone:a}=t;if(i&&Object.keys(i).length!==0||e){const l=e||a,c=Oe.fromObject(i,{...t,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Oe.invalid(new So("unparsable",`the input "${n}" can't be parsed as ${r}`))}function x0(i,e,t=!0){return i.isValid?fn.create(pi.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(i,e):null}function dw(i,e){const t=i.c.year>9999||i.c.year<0;let r="";return t&&i.c.year>=0&&(r+="+"),r+=fr(i.c.year,t?6:4),e?(r+="-",r+=fr(i.c.month),r+="-",r+=fr(i.c.day)):(r+=fr(i.c.month),r+=fr(i.c.day)),r}function sae(i,e,t,r,n,s){let o=fr(i.c.hour);return e?(o+=":",o+=fr(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=":")):o+=fr(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=fr(i.c.second),(i.c.millisecond!==0||!r)&&(o+=".",o+=fr(i.c.millisecond,3))),n&&(i.isOffsetFixed&&i.offset===0&&!s?o+="Z":i.o<0?(o+="-",o+=fr(Math.trunc(-i.o/60)),o+=":",o+=fr(Math.trunc(-i.o%60))):(o+="+",o+=fr(Math.trunc(i.o/60)),o+=":",o+=fr(Math.trunc(i.o%60)))),s&&(o+="["+i.zone.ianaName+"]"),o}const Ofe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},oMe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},aMe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Dfe=["year","month","day","hour","minute","second","millisecond"],lMe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],cMe=["year","ordinal","hour","minute","second","millisecond"];function hMe(i){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[i.toLowerCase()];if(!e)throw new Nde(i);return e}function oae(i){switch(i.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hMe(i)}}function aae(i,e){const t=Jl(e.zone,sr.defaultZone),r=pi.fromObject(e),n=sr.now();let s,o;if(ft(i.year))s=n;else{for(const c of Dfe)ft(i[c])&&(i[c]=Ofe[c]);const a=afe(i)||lfe(i);if(a)return Oe.invalid(a);const l=t.offset(n);[s,o]=y_(i,l,t)}return new Oe({ts:s,zone:t,loc:r,o})}function lae(i,e,t){const r=ft(t.round)?!0:t.round,n=(o,a)=>(o=CC(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(i,o)?0:e.startOf(o).diff(i.startOf(o),o).get(o):e.diff(i,o).get(o);if(t.unit)return n(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(i>e?-0:0,t.units[t.units.length-1])}function cae(i){let e={},t;return i.length>0&&typeof i[i.length-1]=="object"?(e=i[i.length-1],t=Array.from(i).slice(0,i.length-1)):t=Array.from(i),[e,t]}class Oe{constructor(e){const t=e.zone||sr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new So("invalid input"):null)||(t.isValid?null:v0(t));this.ts=ft(e.ts)?sr.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,s]=[e.old.c,e.old.o];else{const a=t.offset(this.ts);n=b0(this.ts,a),r=Number.isNaN(n.year)?new So("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=t,this.loc=e.loc||pi.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Oe({})}static local(){const[e,t]=cae(arguments),[r,n,s,o,a,l,c]=t;return aae({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,t]=cae(arguments),[r,n,s,o,a,l,c]=t;return e.zone=Ln.utcInstance,aae({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const r=B2e(e)?e.valueOf():NaN;if(Number.isNaN(r))return Oe.invalid("invalid input");const n=Jl(t.zone,sr.defaultZone);return n.isValid?new Oe({ts:r,zone:n,loc:pi.fromObject(t)}):Oe.invalid(v0(n))}static fromMillis(e,t={}){if(jh(e))return e<-rae||e>rae?Oe.invalid("Timestamp out of range"):new Oe({ts:e,zone:Jl(t.zone,sr.defaultZone),loc:pi.fromObject(t)});throw new Zn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(jh(e))return new Oe({ts:e*1e3,zone:Jl(t.zone,sr.defaultZone),loc:pi.fromObject(t)});throw new Zn("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=Jl(t.zone,sr.defaultZone);if(!r.isValid)return Oe.invalid(v0(r));const n=pi.fromObject(t),s=V_(e,oae),{minDaysInFirstWeek:o,startOfWeek:a}=Hoe(s,n),l=sr.now(),c=ft(t.specificOffset)?r.offset(l):t.specificOffset,h=!ft(s.ordinal),u=!ft(s.year),d=!ft(s.month)||!ft(s.day),f=u||d,p=s.weekYear||s.weekNumber;if((f||h)&&p)throw new Sd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&h)throw new Sd("Can't mix ordinal dates with month/day");const g=p||s.weekday&&!f;let m,y,_=b0(l,c);g?(m=lMe,y=oMe,_=G_(_,o,a)):h?(m=cMe,y=aMe,_=aw(_)):(m=Dfe,y=Ofe);let v=!1;for(const P of m){const F=s[P];ft(F)?v?s[P]=y[P]:s[P]=_[P]:v=!0}const x=g?F2e(s,o,a):h?N2e(s):afe(s),w=x||lfe(s);if(w)return Oe.invalid(w);const T=g?Voe(s,o,a):h?qoe(s):s,[A,R]=y_(T,c,r),L=new Oe({ts:A,zone:r,o:R,loc:n});return s.weekday&&f&&e.weekday!==L.weekday?Oe.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${L.toISO()}`):L}static fromISO(e,t={}){const[r,n]=MAe(e);return Vp(r,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,n]=RAe(e);return Vp(r,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,n]=LAe(e);return Vp(r,n,t,"HTTP",t)}static fromFormat(e,t,r={}){if(ft(e)||ft(t))throw new Zn("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=pi.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=sMe(o,e,t);return h?Oe.invalid(h):Vp(a,l,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return Oe.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,n]=NAe(e);return Vp(r,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Zn("need to specify a reason the DateTime is invalid");const r=e instanceof So?e:new So(e,t);if(sr.throwOnInvalid)throw new d2e(r);return new Oe({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=Pfe(e,pi.fromObject(t));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return Lfe(fn.parseFormat(e),pi.fromObject(t)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?hw(this).weekYear:NaN}get weekNumber(){return this.isValid?hw(this).weekNumber:NaN}get weekday(){return this.isValid?hw(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?uw(this).weekday:NaN}get localWeekNumber(){return this.isValid?uw(this).weekNumber:NaN}get localWeekYear(){return this.isValid?uw(this).weekYear:NaN}get ordinal(){return this.isValid?aw(this.c).ordinal:NaN}get monthShort(){return this.isValid?y0.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?y0.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?y0.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?y0.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Mb(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const l=r-o*t,c=r-a*t,h=b0(l,o),u=b0(c,a);return h.hour===u.hour&&h.minute===u.minute&&h.second===u.second&&h.millisecond===u.millisecond?[ph(this,{ts:l}),ph(this,{ts:c})]:[this]}get isInLeapYear(){return Km(this.year)}get daysInMonth(){return U_(this.year,this.month)}get daysInYear(){return this.isValid?Bd(this.year):NaN}get weeksInWeekYear(){return this.isValid?rm(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?rm(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:n}=fn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(Ln.instance(e),t)}toLocal(){return this.setZone(sr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=Jl(e,sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[n]=y_(o,s,e)}return ph(this,{ts:n,zone:e})}else return Oe.invalid(v0(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return ph(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=V_(e,oae),{minDaysInFirstWeek:r,startOfWeek:n}=Hoe(t,this.loc),s=!ft(t.weekYear)||!ft(t.weekNumber)||!ft(t.weekday),o=!ft(t.ordinal),a=!ft(t.year),l=!ft(t.month)||!ft(t.day),c=a||l,h=t.weekYear||t.weekNumber;if((c||o)&&h)throw new Sd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Sd("Can't mix ordinal dates with month/day");let u;s?u=Voe({...G_(this.c,r,n),...t},r,n):ft(t.ordinal)?(u={...this.toObject(),...t},ft(t.day)&&(u.day=Math.min(U_(u.year,u.month),u.day))):u=qoe({...aw(this.c),...t});const[d,f]=y_(u,this.o,this.zone);return ph(this,{ts:d,o:f})}plus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e);return ph(this,nae(this,t))}minus(e){if(!this.isValid)return this;const t=Vt.fromDurationLike(e).negate();return ph(this,nae(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},n=Vt.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?fn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):cw}toLocaleString(e=z_,t={}){return this.isValid?fn.create(this.loc.clone(t),e).formatDateTime(this):cw}toLocaleParts(e={}){return this.isValid?fn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=dw(this,o);return a+="T",a+=sae(this,o,t,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?dw(this,e==="extended"):null}toISOWeekDate(){return x0(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+sae(this,o==="extended",t,e,r,s):null}toRFC2822(){return x0(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return x0(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?dw(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(r&&(n+=" "),t?n+="z":e&&(n+="ZZ")),x0(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():cw}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return Vt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=j2e(t).map(Vt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=VAe(a,l,s,n);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(Oe.now(),e,t)}until(e){return this.isValid?Zi.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=n&&n<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Oe.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),lae(t,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?lae(e.base||Oe.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Oe.isDateTime))throw new Zn("min requires all arguments be DateTimes");return Woe(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Oe.isDateTime))throw new Zn("max requires all arguments be DateTimes");return Woe(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=pi.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return Ife(o,e,t)}static fromStringExplain(e,t,r={}){return Oe.fromFormatExplain(e,t,r)}static get DATE_SHORT(){return z_}static get DATE_MED(){return $de}static get DATE_MED_WITH_WEEKDAY(){return g2e}static get DATE_FULL(){return Bde}static get DATE_HUGE(){return jde}static get TIME_SIMPLE(){return zde}static get TIME_WITH_SECONDS(){return Gde}static get TIME_WITH_SHORT_OFFSET(){return Ude}static get TIME_WITH_LONG_OFFSET(){return Vde}static get TIME_24_SIMPLE(){return qde}static get TIME_24_WITH_SECONDS(){return Hde}static get TIME_24_WITH_SHORT_OFFSET(){return Wde}static get TIME_24_WITH_LONG_OFFSET(){return Yde}static get DATETIME_SHORT(){return Xde}static get DATETIME_SHORT_WITH_SECONDS(){return Zde}static get DATETIME_MED(){return Kde}static get DATETIME_MED_WITH_SECONDS(){return Jde}static get DATETIME_MED_WITH_WEEKDAY(){return m2e}static get DATETIME_FULL(){return Qde}static get DATETIME_FULL_WITH_SECONDS(){return efe}static get DATETIME_HUGE(){return tfe}static get DATETIME_HUGE_WITH_SECONDS(){return ife}}function qp(i){if(Oe.isDateTime(i))return i;if(i&&i.valueOf&&jh(i.valueOf()))return Oe.fromJSDate(i);if(i&&typeof i=="object")return Oe.fromObject(i);throw new Zn(`Unknown datetime argument: ${i}, of type ${typeof i}`)}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const uMe={datetime:Oe.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:Oe.TIME_WITH_SECONDS,minute:Oe.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};gde._date.override({_id:"luxon",_create:function(i){return Oe.fromMillis(i,this.options)},init(i){this.options.locale||(this.options.locale=i.locale)},formats:function(){return uMe},parse:function(i,e){const t=this.options,r=typeof i;return i===null||r==="undefined"?null:(r==="number"?i=this._create(i):r==="string"?typeof e=="string"?i=Oe.fromFormat(i,e,t):i=Oe.fromISO(i,t):i instanceof Date?i=Oe.fromJSDate(i,t):r==="object"&&!(i instanceof Oe)&&(i=Oe.fromObject(i,t)),i.isValid?i.valueOf():null)},format:function(i,e){const t=this._create(i);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(i,e,t){const r={};return r[t]=e,this._create(i).plus(r).valueOf()},diff:function(i,e,t){return this._create(i).diff(this._create(e)).as(t).valueOf()},startOf:function(i,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const r=this._create(i);return r.minus({days:(r.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(i).startOf(e).valueOf():i},endOf:function(i,e){return this._create(i).endOf(e).valueOf()}});const Ib={errorBarLineWidth:{v:[1,3]},errorBarColor:{v:["#2c2c2c","#1f1f1f"]},errorBarWhiskerLineWidth:{v:[1,3]},errorBarWhiskerRatio:{v:[.2,.25]},errorBarWhiskerSize:{v:[20,24]},errorBarWhiskerColor:{v:["#2c2c2c","#1f1f1f"]}},LC={_scriptable:!0,_indexable:i=>i!=="v"},hae=Object.keys(Ib);function IC(i,e){const t=Array.isArray(i)?i:[i],r=Array.isArray(e)?e:[e];if(t.length===r.length)return t.map((s,o)=>[s,r[o]]);const n=Math.max(t.length,r.length);return Array(n).map((s,o)=>[t[o%t.length],r[o%r.length]])}function is(i,e){if(typeof i=="string"||typeof i=="number")return i;const t=Array.isArray(i)?i:i.v;return t[e%t.length]}function PC(i,e,t){const r=is(e.errorBarWhiskerRatio,t);return i!=null&&r>0?i*r*.5:is(e.errorBarWhiskerSize,t)*.5}function dMe(i,e,t,r,n){n.save(),n.translate(i.x,0);const s=IC(e??i.y,t??i.y);s.reverse().forEach(([o,a],l)=>{const c=s.length-l-1,h=PC(i.width,r,c);n.lineWidth=is(r.errorBarLineWidth,c),n.strokeStyle=is(r.errorBarColor,c),n.beginPath(),n.moveTo(0,o),n.lineTo(0,a),n.stroke(),n.lineWidth=is(r.errorBarWhiskerLineWidth,c),n.strokeStyle=is(r.errorBarWhiskerColor,c),n.beginPath(),n.moveTo(-h,o),n.lineTo(h,o),n.moveTo(-h,a),n.lineTo(h,a),n.stroke()}),n.restore()}function fMe(i,e,t,r,n){n.save(),n.translate(0,i.y);const s=IC(e??i.x,t??i.x);s.reverse().forEach(([o,a],l)=>{const c=s.length-l-1,h=PC(i.height,r,c);n.lineWidth=is(r.errorBarLineWidth,c),n.strokeStyle=is(r.errorBarColor,c),n.beginPath(),n.moveTo(o,0),n.lineTo(a,0),n.stroke(),n.lineWidth=is(r.errorBarWhiskerLineWidth,c),n.strokeStyle=is(r.errorBarWhiskerColor,c),n.beginPath(),n.moveTo(o,-h),n.lineTo(o,h),n.moveTo(a,-h),n.lineTo(a,h),n.stroke()}),n.restore()}function Ffe(i,e){var t,r,n,s;const o=i.getProps(["x","y","width","height","xMin","xMax","yMin","yMax"]);(o.xMin!=null||o.xMax!=null)&&fMe(o,(t=o.xMin)!==null&&t!==void 0?t:null,(r=o.xMax)!==null&&r!==void 0?r:null,i.options,e),(o.yMin!=null||o.yMax!=null)&&dMe(o,(n=o.yMin)!==null&&n!==void 0?n:null,(s=o.yMax)!==null&&s!==void 0?s:null,i.options,e)}function pMe(i,e,t,r,n){n.save(),n.translate(i.x,i.y);const s=(i.startAngle+i.endAngle)/2,o=Math.cos(s),a=Math.sin(s),l={x:-a,y:o},c=Math.sqrt(l.x*l.x+l.y*l.y);l.x/=c,l.y/=c;const h=IC(e??i.outerRadius,t??i.outerRadius);h.reverse().forEach(([u,d],f)=>{const p=h.length-f-1,g=u*o,m=u*a,y=d*o,_=d*a,v=PC(null,r,p),x=l.x*v,w=l.y*v;n.lineWidth=is(r.errorBarLineWidth,p),n.strokeStyle=is(r.errorBarColor,p),n.beginPath(),n.moveTo(g,m),n.lineTo(y,_),n.stroke(),n.lineWidth=is(r.errorBarWhiskerLineWidth,p),n.strokeStyle=is(r.errorBarWhiskerColor,p),n.beginPath(),n.moveTo(g+x,m+w),n.lineTo(g-x,m-w),n.moveTo(y+x,_+w),n.lineTo(y-x,_-w),n.stroke()}),n.restore()}function gMe(i,e){const t=i.getProps(["x","y","startAngle","endAngle","rMin","rMax","outerRadius"]);(t.rMin!=null||t.rMax!=null)&&pMe(t,t.rMin,t.rMax,i.options,e)}class jf extends Bh{draw(e){super.draw(e),Ffe(this,e)}}jf.id="barWithErrorBar";jf.defaults={...Bh.defaults,...Ib};jf.defaultRoutes=Bh.defaultRoutes;jf.descriptors=LC;class ks extends $h{draw(e,t){super.draw.call(this,e,t),Ffe(this,e)}}ks.id="pointWithErrorBar";ks.defaults={...$h.defaults,...Ib};ks.defaultRoutes=$h.defaultRoutes;ks.descriptors=LC;class zf extends nc{draw(e){super.draw(e),gMe(this,e)}}zf.id="arcWithErrorBar";zf.defaults={...nc.defaults,...Ib};zf.defaultRoutes=nc.defaultRoutes;zf.descriptors=LC;const VE=["xMin","xMax","yMin","yMax"];function Nfe(i){return i?VE.slice(0,2):VE.slice(2)}function nm(i,e,t,r,n){const s=[`${r.axis}Min`,`${r.axis}Max`],o=r.getBasePixel();for(const a of s){const l=e[a];Array.isArray(l)?i[a]=l.map(c=>n?o:r.getPixelForValue(c,t)):typeof l=="number"?i[a]=n?o:r.getPixelForValue(l,t):i[a]=null}}function mMe(i,e,t,r,n){const s=n.animation,o=[`${t.axis}Min`,`${t.axis}Max`],a=l=>{const c=t.getDistanceFromCenterForValue(l),h=s.animateScale?0:c;return r?h:c};for(const l of o){const c=e[l];Array.isArray(c)?i[l]=c.map(a):typeof c=="number"?i[l]=a(c):i[l]=null}}const yMe=["linear","logarithmic","time","timeseries"];function qE(i){return yMe.includes(i.type)}function kC(i){return Array.isArray(i)?i.slice().reverse():i}function $fe(i){const e=Nfe(i.element.horizontal),t=Dde.defaults.callbacks.label.call(this,i),r=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex];return r==null||e.every(n=>r[n]==null)?t:`${t} (${kC(r[e[0]])} .. ${r[e[1]]})`}function _Me(i){const e=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],t=(r,n)=>{const s=Nfe(n);return e==null||s.every(o=>e[o]==null)?r:`${r} [${kC(e[s[0]])} .. ${e[s[1]]}]`};return`(${t(i.label,!0)}, ${t(i.parsed.y,!1)})`}function vMe(i){const e=ua.overrides.plugins.tooltip.callbacks.label.call(this,i),t=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],r=["rMin","rMax"];return t==null||r.every(n=>t[n]==null)?e:`${e} [${kC(t[r[0]])} .. ${t[r[1]]}]`}const Bfe={color(i,e,t){const r=i||"transparent",n=e||"transparent";if(r===n)return e;const s=D_(r),o=s.valid&&D_(n);return o&&o.valid?o.mix(s,t).hexString():e},number(i,e,t){return i===e?e:i+(e-i)*t}};function jfe(i,e,t,r,n){if(typeof i===r&&typeof e===r)return n(i,e,t);if(Array.isArray(i)&&Array.isArray(e))return i.map((o,a)=>n(o,e[a],t));const s=o=>o&&Array.isArray(o.v);return s(i)&&s(e)?{v:i.v.map((o,a)=>n(o,e.v[a],t))}:e}function bMe(i,e,t){return jfe(i,e,t,"number",Bfe.number)}function xMe(i,e,t){return jfe(i,e,t,"string",Bfe.color)}const Pb={animations:{numberArray:{fn:bMe,properties:VE.concat(hae.filter(i=>!i.endsWith("Color")),["rMin","rMax"])},colorArray:{fn:xMe,properties:hae.filter(i=>i.endsWith("Color"))}}};function kb(i,e){const{axis:t}=i;i.axis=`${t}MinMin`;const{min:r}=e(i);i.axis=`${t}MaxMax`;const{max:n}=e(i);return i.axis=t,{min:r,max:n}}function uae(i,e,t){return Array.isArray(e)?t(i,...e):typeof e=="number"?t(i,e):i}function Xh(i,e,t,r,n){const s=typeof e=="string"?e:e.axis,o=`${s}Min`,a=`${s}Max`,l=`${s}MinMin`,c=`${s}MaxMax`;for(let h=0;h<n;h+=1){const u=h+r,d=i[h];d[o]=typeof t[u]=="object"?t[u][o]:null,d[a]=typeof t[u]=="object"?t[u][a]:null,d[l]=uae(d[s],d[o],Math.min),d[c]=uae(d[s],d[a],Math.max)}}function zfe(i,e,t,r){const{axis:n}=e,s=e.getLabels();for(let o=0;o<r;o+=1){const a=o+t,l=i[o];l[n]=e.parse(s[a],a)}}function Ob(i,e,t,r=[],n=[]){Mn.addControllers(t),Array.isArray(r)?Mn.addElements(...r):Mn.addElements(r),Array.isArray(n)?Mn.addScales(...n):Mn.addScales(n);const s=e;return s.type=i,s}class Gf extends fc{getMinMax(e,t){return kb(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){Xh(e,t.vScale,r,n,s);const o=t.iScale;qE(o)?Xh(e,t.iScale,r,n,s):zfe(e,t.iScale,n,s)}updateElement(e,t,r,n){typeof t=="number"&&nm(r,this.getParsed(t),t,this._cachedMeta.vScale,n==="reset"),super.updateElement(e,t,r,n)}}Gf.id="barWithErrorBars";Gf.defaults=Ps({},[fc.defaults,Pb,{dataElementType:jf.id}]);Gf.overrides=Ps({},[fc.overrides,{plugins:{tooltip:{callbacks:{label:$fe}}}}]);Gf.defaultRoutes=fc.defaultRoutes;class wMe extends Xn{constructor(e,t){super(e,Ob("barWithErrorBars",t,Gf,jf,[Yh,af]))}}wMe.id=Gf.id;class uu extends il{getMinMax(e,t){return kb(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){Xh(e,t.vScale,r,n,s);const o=t.iScale;qE(o)?Xh(e,t.iScale,r,n,s):zfe(e,t.iScale,n,s)}updateElement(e,t,r,n){e instanceof ks&&typeof t=="number"&&this.updateElementScale(t,r,n),super.updateElement(e,t,r,n)}updateElementScale(e,t,r){nm(t,this.getParsed(e),e,this._cachedMeta.vScale,r==="reset");const n=this._cachedMeta.iScale;qE(n)&&nm(t,this.getParsed(e),e,this._cachedMeta.iScale,r==="reset")}updateElements(e,t,r,n){const s=n==="reset",a=this.chart._animationsDisabled||s||n==="none";if(super.updateElements(e,t,r,n),!!a)for(let l=t;l<t+r;++l){const c=e[l];c instanceof ks&&this.updateElementScale(l,c,n)}}}uu.id="lineWithErrorBars";uu.defaults=Ps({},[il.defaults,Pb,{dataElementType:ks.id}]);uu.overrides=Ps({},[il.overrides,{plugins:{tooltip:{callbacks:{label:$fe}}}}]);uu.defaultRoutes=il.defaultRoutes;class Gfe extends Xn{constructor(e,t){super(e,Ob("lineWithErrorBars",t,uu,ks,[Yh,af]))}}Gfe.id=uu.id;class du extends Nh{getMinMax(e,t){return kb(e,r=>super.getMinMax(r,t))}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){Xh(e,t.xScale,r,n,s),Xh(e,t.yScale,r,n,s)}updateElement(e,t,r,n){e instanceof ks&&typeof t=="number"&&this.updateElementScale(t,r,n),super.updateElement(e,t,r,n)}updateElementScale(e,t,r){nm(t,this.getParsed(e),e,this._cachedMeta.xScale,r==="reset"),nm(t,this.getParsed(e),e,this._cachedMeta.yScale,r==="reset")}updateElements(e,t,r,n){const s=n==="reset",a=this.chart._animationsDisabled||s||n==="none";if(super.updateElements(e,t,r,n),!!a)for(let l=t;l<t+r;++l){const c=e[l];c instanceof ks&&this.updateElementScale(l,c,n)}}}du.id="scatterWithErrorBars";du.defaults=Ps({},[Nh.defaults,Pb,{dataElementType:ks.id}]);du.overrides=Ps({},[Nh.overrides,{plugins:{tooltip:{callbacks:{label:_Me}}}}]);du.defaultRoutes=il.defaultRoutes;class Ufe extends Xn{constructor(e,t){super(e,Ob("scatterWithErrorBars",t,du,ks,[Yh]))}}Ufe.id=du.id;class Uf extends ua{getMinMaxImpl(e){const t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{const o=this.getParsed(s)[e.axis];Number.isNaN(o)||!this.chart.getDataVisibility(s)||(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}getMinMax(e){return kb(e,t=>this.getMinMaxImpl(t))}countVisibleElements(){const e=this._cachedMeta;return e.data.reduce((t,r,n)=>!Number.isNaN(e._parsed[n].r)&&this.chart.getDataVisibility(n)?t+1:t,0)}parsePrimitiveData(e,t,r,n){const s=super.parsePrimitiveData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseObjectData(e,t,r,n){const s=super.parseObjectData(e,t,r,n);return this.parseErrorData(s,e,t,r,n),s}parseErrorData(e,t,r,n,s){const o=t.rScale;for(let a=0;a<s;a+=1){const l=a+n,c=r[l],h=o.parse(c[o.axis],l);e[a]={[o.axis]:h}}Xh(e,o,r,n,s)}updateElement(e,t,r,n){typeof t=="number"&&mMe(r,this.getParsed(t),this._cachedMeta.rScale,n==="reset",this.chart.options),super.updateElement(e,t,r,n)}updateElements(e,t,r,n){const s=this.chart.scales.r,o=s.getDistanceFromCenterForValue;s.getDistanceFromCenterForValue=function(l){return typeof l=="number"?o.call(this,l):o.call(this,l.r)},super.updateElements(e,t,r,n),s.getDistanceFromCenterForValue=o}}Uf.id="polarAreaWithErrorBars";Uf.defaults=Ps({},[ua.defaults,Pb,{dataElementType:zf.id}]);Uf.overrides=Ps({},[ua.overrides,{plugins:{tooltip:{callbacks:{label:vMe}}}}]);Uf.defaultRoutes=ua.defaultRoutes;class EMe extends Xn{constructor(e,t){super(e,Ob("polarAreaWithErrorBars",t,Uf,zf,[Ed]))}}EMe.id=Uf.id;var Vfe={};function Js(i,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(i)),this._timeouts=i,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var SMe=Js;Js.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Js.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Js.prototype.retry=function(i){if(this._timeout&&clearTimeout(this._timeout),!i)return!1;var e=new Date().getTime();if(i&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(i),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(i);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t),this._options.unref&&this._timer.unref(),!0};Js.prototype.attempt=function(i,e){this._fn=i,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Js.prototype.try=function(i){console.log("Using RetryOperation.try() is deprecated"),this.attempt(i)};Js.prototype.start=function(i){console.log("Using RetryOperation.start() is deprecated"),this.attempt(i)};Js.prototype.start=Js.prototype.try;Js.prototype.errors=function(){return this._errors};Js.prototype.attempts=function(){return this._attempts};Js.prototype.mainError=function(){if(this._errors.length===0)return null;for(var i={},e=null,t=0,r=0;r<this._errors.length;r++){var n=this._errors[r],s=n.message,o=(i[s]||0)+1;i[s]=o,o>=t&&(e=n,t=o)}return e};(function(i){var e=SMe;i.operation=function(t){var r=i.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},i.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in t)r[n]=t[n];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<r.retries;o++)s.push(this.createTimeout(o,r));return t&&t.forever&&!s.length&&s.push(this.createTimeout(o,r)),s.sort(function(a,l){return a-l}),s},i.createTimeout=function(t,r){var n=r.randomize?Math.random()+1:1,s=Math.round(n*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return s=Math.min(s,r.maxTimeout),s},i.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n){n=[];for(var s in t)typeof t[s]=="function"&&n.push(s)}for(var o=0;o<n.length;o++){var a=n[o],l=t[a];t[a]=(function(h){var u=i.operation(r),d=Array.prototype.slice.call(arguments,1),f=d.pop();d.push(function(p){u.retry(p)||(p&&(arguments[0]=u.mainError()),f.apply(this,arguments))}),u.attempt(function(){h.apply(t,d)})}).bind(t,l),t[a].options=r}}})(Vfe);var CMe=Vfe;const TMe=no(CMe),AMe=Object.prototype.toString,MMe=i=>AMe.call(i)==="[object Error]",RMe=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function LMe(i){return i&&MMe(i)&&i.name==="TypeError"&&typeof i.message=="string"?i.message==="Load failed"?i.stack===void 0:RMe.has(i.message):!1}let HE=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};const dae=(i,e,t)=>{const r=t.retries-(e-1);return i.attemptNumber=e,i.retriesLeft=r,i};async function fae(i,e){return new Promise((t,r)=>{e={onFailedAttempt(){},retries:10,shouldRetry:()=>!0,...e};const n=TMe.operation(e),s=()=>{var a;n.stop(),r((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",s,{once:!0});const o=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",s),n.stop()};n.attempt(async a=>{try{const l=await i(a);o(),t(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof HE)throw l.originalError;if(l instanceof TypeError&&!LMe(l))throw l;if(dae(l,a,e),await e.shouldRetry(l)||(n.stop(),r(l)),await e.onFailedAttempt(l),!n.retry(l))throw n.mainError()}catch(c){dae(c,a,e),o(),r(c)}}})})}class IMe{constructor(e,t,r,n,s,o,a,l){ee(this,"type");ee(this,"endpoint");ee(this,"parameters");ee(this,"retries");ee(this,"source");ee(this,"table");ee(this,"geometry");ee(this,"timeParameter");this.type=e,this.endpoint=t,this.parameters=r,this.retries=n,this.source=s,this.table=o,this.geometry=a,this.timeParameter=l}fetchData(e,t,r){switch(this.type){case"signals":return this.fetchSignals(e,t,r);case"geodb":return this.fetchGeoDBData(e,t,r);default:return null}}fetchGeoDBData(e,t,r){const n=this.parameters[e].join(","),s=`and=(${this.timeParameter}.gte.${t.toISODate()},${this.timeParameter}.lte.${r.toISODate()})`,o=`${this.endpoint}/${this.source}_${this.table}?${s}&select=${n},${this.timeParameter}`;async function a(){const l=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"GET",mode:"cors"});if(l.status===404)throw new HE(l.statusText);if(l.status!==200)throw Error(l.statusText);return l}return fae(a,{onFailedAttempt:l=>{console.log(`Attempt ${l.attemptNumber} failed. There are ${l.retriesLeft} retries left.`)},retries:this.retries}).then(function(l){return l.json()})}fetchSignals(e,t,r){const n=this.parameters[e].map(c=>`feature=${c}`).join("&"),s=`${t?"&start_date="+t.toISODate():""}${r?"&end_date="+r.toISODate():""}`,o=`${this.endpoint}?source=${this.source}&${n}${s}`,a=this.geometry;async function l(){const c=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",mode:"cors",body:JSON.stringify({geometry:a})});if(c.status===404)throw new HE(c.statusText);if(c.status!==200)throw Error(c.statusText);return c}return fae(l,{onFailedAttempt:c=>{console.log(`Attempt ${c.attemptNumber} failed. There are ${c.retriesLeft} retries left.`)},retries:this.retries}).then(function(c){return c.json()}).catch(c=>{console.error(c),document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="flex",setTimeout(()=>{document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="none"})})}convertData(e){switch(this.type){case"signals":return this.convertSignals(e);case"geodb":return this.convertGeoDBData(e);default:return null}}convertSignals(e){let t={};const r=e.basicStats;return e&&e.date!=="missing"&&(t={x:Oe.fromISO(e.date).setZone("UTC"),y:r.mean,yMin:r.min,yMax:r.max}),t}convertGeoDBData(e){let t={};return e&&e.date!=="missing"&&(t={x:Oe.fromISO(e.date).setZone("UTC"),y:e.basicStats.mean,yMin:null,yMax:null}),t}setGeometry(e){this.geometry=e}}Xn.register(uu,Gfe,ks,Ufe,du,Yh,af);class pae{constructor(e,t,r){ee(this,"type");ee(this,"chart");ee(this,"startTime");ee(this,"endTime");ee(this,"timeAggregation");ee(this,"options");ee(this,"chartOptions");ee(this,"dataStorage");ee(this,"status");ee(this,"activeFields");ee(this,"requestHandler");ee(this,"additionalYAxis");if(this.type=e,this.chart=t,this.options=r,this.startTime=Oe.now().minus(r.timeInterval),this.endTime=Oe.now(),r.startTime&&r.endTime&&(this.startTime=Oe.fromISO(r.startTime).setZone("UTC"),this.endTime=Oe.fromISO(r.endTime).setZone("UTC")),this.options.timeAggregation&&(this.timeAggregation=this.options.timeAggregation),this.options.retries=this.options.retries?this.options.retries:5,this.options.normalize=this.options.normalize?this.options.normalize:!1,this.options.showMinMax=this.options.showMinMax?this.options.showMinMax:!1,this.additionalYAxis=this.options.additionalYAxis?this.options.additionalYAxis:null,this.dataStorage={},this.options.features.forEach((n,s)=>this.dataStorage[s]={}),this.requestHandler=new IMe(e,this.options.endpoint,this.options.features,this.options.retries,this.options.source,this.options.table,this.options.geometry,this.options.timeParameter),this.status="ready",this.chartOptions={responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:60,left:10,bottom:10}},scales:{x:{type:"time",min:this.startTime.toISODate(),max:this.endTime.toISODate(),ticks:{minRotation:0,maxRotation:0}}},interaction:{axis:"x",mode:"nearest",intersect:!1},plugins:{htmlLegend:{containerID:"legend-container",onClick:(n,s)=>{if(s.hidden)this.setActiveFields([...this.activeFields,s.text]);else{const o=this.activeFields.indexOf(s.text),a=this.activeFields;a.splice(o,1),this.setActiveFields(a)}}},legend:{display:!1},tooltip:{callbacks:{title:n=>{var o;return((o=n[0])==null?void 0:o.raw).x.toISODate()},label:n=>{const s=n.raw,o=s.yMin!==null?`;  ${s.yMin.toPrecision(3)}`:"",a=s.yMax!==null?`,  ${s.yMax.toPrecision(3)}`:"";return`${n.dataset.label}:  ${s.y.toPrecision(3)}${o}${a}`}}}}},this.additionalYAxis!==null)for(let n=0;n<this.additionalYAxis.length;n++){const s=this.additionalYAxis[n];this.chartOptions.scales[s.id]={type:"linear",position:"right"}}}checkLoadingStatus(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#loadingIndicator");let t=!1;Object.keys(this.dataStorage).forEach((r,n)=>{Object.keys(this.dataStorage[n]).forEach(s=>{this.dataStorage[n][s].status==="fetching"&&(t=!0)})}),e.className=t?"loader":"loader hidden"}updateChart(){this.checkLoadingStatus(),this.chart.options=this.chartOptions;const e=[];this.options.features.flat().forEach((t,r)=>{let n=-1;if(this.options.features.forEach((s,o)=>{s.includes(t)&&(n=o)}),n!==-1){const s=[];let o=Number.MAX_VALUE,a=Number.MIN_VALUE;Object.keys(this.dataStorage[n]).forEach(u=>{const d=this.dataStorage[n][u];if(d.status==="finished"){if(this.type==="signals"&&Object.keys(d.data).length!==0&&Object.keys(d.data).includes(t)&&(d.data[t].forEach(f=>{const p=f.basicStats;this.options.showMinMax?(o=p.min<o?p.min:o,a=p.max>a?p.max:a):(o=p.mean<o?p.mean:o,a=p.mean>a?p.mean:a)}),s.push(...d.data[t])),this.type==="geodb"&&Object.keys(d.data).length!==0){const f=d.data.map(p=>(p[t]!==null&&(o=p[t]<o?p[t]:o,a=p[t]>a?p[t]:a),{date:p[this.options.timeParameter],basicStats:{mean:p[t]}}));s.push(...f)}}else s.push({date:"missing"})});let l=!1,c=s.map(u=>this.requestHandler.convertData(u));if(c.sort((u,d)=>u.x-d.x),c.length>0&&(l=!0),l&&this.timeAggregation){let u=Number.MIN_VALUE,d=Number.MAX_VALUE;o=Number.MAX_VALUE,a=Number.MIN_VALUE;const f=[];let p=0,g=Oe.fromObject({year:this.startTime.year,month:this.startTime.month,day:this.startTime.day});for(;g<this.endTime;){let m=0,y=!1;for(;p<c.length&&(Object.keys(c[p]).length===0||c[p].x<g);)p++;const _=p;for(;p<c.length&&(Object.keys(c[p]).length===0||c[p].x<g.plus(this.timeAggregation));){const w=c[p];m+=w.y,u=w.y!==null&&w.y>u?w.y:u,u=w.yMax!==null&&w.yMax>u?w.yMax:u,d=w.y!==null&&w.y<d?w.y:d,d=w.yMin!==null&&w.yMin<d?w.yMin:d,p++,y=!0}const x=p-_;if(x>0&&y){const w=m/x;this.options.showMinMax?(o=d<o?d:o,a=u>a?u:a):(o=w<o?w:o,a=w>a?w:a),f.push({x:g,y:w,yMin:d,yMax:u}),u=Number.MIN_VALUE,d=Number.MAX_VALUE}g=g.plus(this.timeAggregation)}c=f}if(l&&this.options.normalize){const u=a-o;c=c.map(d=>(d.y!==null?d.y=(d.y-o)/u:d.y=null,d.yMin=(d.yMin-o)/u,d.yMax=(d.yMax-o)/u,d))}let h={type:"line",label:t,data:c,hidden:!this.activeFields.includes(t)};if(this.options.showMinMax&&(h={type:"lineWithErrorBars",label:t,data:c,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000"}),this.options.colors&&this.options.colors.length>=r){const u=this.options.colors[r];h.backgroundColor=u,h.borderColor=u,this.options.showMinMax&&(h={type:"lineWithErrorBars",label:t,data:c,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000",errorBarWhiskerColor:u,errorBarWhiskerSize:10,backgroundColor:u,borderColor:u})}if(this.additionalYAxis!==null)for(let u=0;u<this.additionalYAxis.length;u++){const d=this.additionalYAxis[u];d.containedSignals.includes(t)&&(h.yAxisID=d.id)}e.push(h)}}),this.chart.data={datasets:e},this.chart.update("none")}retrieveMissingData(){const e=[];this.activeFields.forEach(n=>{this.options.features.forEach((s,o)=>{s.includes(n)&&!e.includes(o)&&e.push(o)})});let t=Oe.fromObject({year:this.endTime.year,month:this.endTime.month}).plus({month:1}).minus({second:1});const r=Oe.fromObject({year:this.startTime.year,month:this.startTime.month}).plus({month:1}).minus({second:1});for(;t>r;){const n=t.toFormat("yyyyMM");e.forEach(s=>{if(!(n in this.dataStorage[s])){const o=this.requestHandler.fetchData(s,Oe.fromObject({year:t.year,month:t.month}),Oe.fromObject({year:t.year,month:t.month}).plus({month:1}).minus({second:1})).then(a=>{this.dataStorage[s][n].data=a,this.dataStorage[s][n].status="finished",this.updateChart()}).catch(()=>{this.dataStorage[s][n].status="failed",this.updateChart()});this.dataStorage[s][n]={request:o,status:"fetching"}}}),t=t.minus({months:1})}}triggerCSVDownload(){const e=[],t=[],r=this.activeFields;r.forEach((l,c)=>{let h=-1;if(this.options.features.forEach((u,d)=>{u.includes(l)&&(h=d)}),h!==-1){const u=[];Object.keys(this.dataStorage[h]).forEach(d=>{const f=this.dataStorage[h][d];f.status==="finished"&&Object.keys(f.data).length!==0&&Object.keys(f.data).includes(l)&&u.push(...f.data[l])}),u.length>0&&(t.push(r[c]),e.push(u))}});const n={};t.forEach((l,c)=>{e[c].forEach(h=>{n[h.date]||(n[h.date]={}),n[h.date][l]=h.basicStats})});let s="time,";const o=t.map(l=>[l,`${l}_max`,`${l}_min`]);s+=o.flat().join(","),s+=`
`,Object.keys(n).forEach(l=>{const c=[l];t.forEach(h=>{const u=n[l][h]?n[l][h]:null;u!=null?c.push(u.mean,u.max,u.min):c.push("","","")}),s+=c.join(","),s+=`
`});const a=document.createElement("a");a.href="data:text/csv;charset=utf-8,"+encodeURI(s),a.target="_blank",a.download="chart_data.csv",a.click()}setGeometry(e){this.dataStorage={},this.options.features.forEach((t,r)=>this.dataStorage[r]={}),this.options.geometry=e,this.requestHandler.setGeometry(e),this.retrieveMissingData(),this.updateChart()}setActiveFields(e){this.activeFields=e,this.retrieveMissingData(),this.updateChart()}setTimeInterval(e,t){this.startTime=e,this.endTime=t,this.chartOptions.scales.x.min=e.toISODate(),this.chartOptions.scales.x.max=t.toISODate(),this.retrieveMissingData(),this.updateChart()}setNormalize(e){this.options.normalize=e,this.updateChart()}setShowMinMax(e){this.options.showMinMax=e,this.updateChart()}setTimeAggregation(e){this.timeAggregation=e,this.updateChart()}}class gae{constructor(e,t,r,n){ee(this,"element");ee(this,"sdm");ee(this,"sdmOptions");ee(this,"options");this.element=e,this.sdm=t,this.options=n,this.sdmOptions=r,this.generateTimeAggregationOptions(),this.addNormalizeCheckbox(),this.addShowMinMax(),this.addCSVDownload(),this.generateTimeSelectionOptions(),document.querySelector("eox-chart").shadowRoot.querySelector("#controls").style.display="flex",document.querySelector("eox-chart").shadowRoot.querySelector("#legend-container").style.display="block",document.querySelector("eox-chart").shadowRoot.querySelector("#chart-container").classList.add("controls")}removeStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput"),t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput"),r=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");e&&t&&r&&(e.style.display="none",t.style.display="none",r.style.display="none")}addStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput");e.value=this.sdm.startTime.toISODate(),e.style.display="inline";const t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput");t.value=this.sdm.endTime.toISODate(),t.style.display="inline";const r=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");r.style.display="inline",r.addEventListener("click",()=>{const n=Oe.fromISO(e.value),s=Oe.fromISO(t.value);n.isValid&&s.isValid?this.sdm.setTimeInterval(n,s):(e.className=n.isValid?"":"parsingError",t.className=s.isValid?"":"parsingError")})}addNormalizeCheckbox(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#normalize");e.checked=this.sdmOptions.normalize,e.addEventListener("change",()=>{this.sdm.setNormalize(e.checked)})}addShowMinMax(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#showMinMax");e.checked=this.sdmOptions.showMinMax,e.addEventListener("change",()=>{this.sdm.setShowMinMax(e.checked)})}addCSVDownload(){document.querySelector("eox-chart").shadowRoot.querySelector("#csvDownload").addEventListener("click",()=>{this.sdm.triggerCSVDownload()})}generateTimeSelectionOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#dateSelect").addEventListener("change",t=>{const r=Oe.now(),[n,s]=t.target.value.split("-");switch(this.removeStartEndInputs(),n){case"month":this.sdm.setTimeInterval(r.minus({month:Number(s)}),r);break;case"year":this.sdm.setTimeInterval(r.minus({year:Number(s)}),r);break;case"custom":this.addStartEndInputs();break}})}generateTimeAggregationOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#aggregationSelect").addEventListener("change",t=>{const[r,n]=t.target.value.split("-");switch(r){case"none":this.sdm.setTimeAggregation(null);break;case"week":this.sdm.setTimeAggregation({week:Number(n)});break;case"month":this.sdm.setTimeAggregation({month:Number(n)});break;case"year":this.sdm.setTimeAggregation({year:Number(n)});break}})}}const PMe=(i,e)=>{const t=document.querySelector("eox-chart").shadowRoot.getElementById(e);if(!t)return;t.style.overflowY="auto";let r=t.querySelector("ul");return r||(r=document.createElement("ul"),r.style.display="flex",r.style.flexDirection="column",r.style.margin=0,r.style.padding="10px",t.appendChild(r)),r},kMe={id:"htmlLegend",afterUpdate(i,e,t){const r=PMe(i,t.containerID);if(!r)return;for(;r.firstChild;)r.firstChild.remove();i.options.plugins.legend.labels.generateLabels(i).sort((s,o)=>s.text<o.text?-1:1).forEach(s=>{const o=document.createElement("li");o.style.alignItems="center",o.style.cursor="pointer",o.style.display="flex",o.style.flexDirection="row",o.style.marginLeft="10px";const a=()=>{t.onClick(null,s)};o.onclick=a;const l=document.createElement("span");l.style.background=s.fillStyle,l.style.borderColor=s.strokeStyle,l.style.borderWidth=s.lineWidth+"px",l.style.display="inline-block",l.style.height="10px",l.style.marginRight="10px",l.style.width="10px";const c=document.createElement("p");c.style.color=s.fontColor,c.style.margin=0,c.style.padding=0,c.style.opacity=s.hidden?"0.5":"1",c.style.fontWeight=s.hidden?"300":"900";const h=document.createTextNode(s.text);c.appendChild(h),o.appendChild(l),o.appendChild(c),r.appendChild(o)})}},OMe=`
<style>
:host {
  font-size: small;
}
.hidden {
  visibility: hidden;
}
.loader {
  width: 20px;
  height: 20px;
  border: 2px solid #004170;
  border-bottom-color: transparent;
  border-radius: 50%;
  display: inline-block;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% {
      transform: rotate(0deg);
  }
  100% {
      transform: rotate(360deg);
  }
}
#controls {
  position: absolute;
  width: 100%;
  max-width: 100%;
  display: none;
  gap: 5px;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  z-index: 1;
}
select {
  font-size: 11px;
  padding: 3px;
}
#csvDownload {
  border: none;
  background: none;
  cursor: pointer;
  margin-left: 7px;
  padding: 0;
  display: flex;
  align-items: center;
}
#csvDownload svg {
  width: 24px;
  height: 24px;
}
.parsingError {
  background-color: #ff6d6d;
}
#chart-container {
  width: 100%;
  height: 100%;
  position: relative;
}
#chart-container.controls {
  flex-basis: 80%;
  max-width: 80%;
  width: unset;
}
#legend-container {
  flex-basis: 20%;
  margin-top: 50px;
}
#legend-container ul {
  padding-top: 0 !important;
}
</style>
<div style="display: flex; width: 100%; height: 100%; max-width: 100%;">
  <div id="controls" class="controls" data-cy="controls">
    <div style="display: flex; align-items: center; padding: 10px;">
      <select id="dateSelect" style="margin-right: 7px;">
          <option value="month-3">3 months back</option>
          <option value="month-6">6 months back</option>
          <option value="year-1">1 year back</option>
          <option value="year-2">2 years back</option>
          <option value="year-3">3 years back</option>
          <option value="custom">custom</option>
      </select>
      <input id="startInput" size="8" style="display: none">
      <input id="endInput" size="8" style="display: none">
      <button id="setTime" style="display: none; margin-right: 7px;">ok</button>
      <select id="aggregationSelect" style="margin-right: 7px;">
          <option value="none">no aggregation</option>
          <option value="week-1">1 week</option>
          <option value="week-2">2 weeks</option>
          <option value="month-1">1 month</option>
          <option value="month-3">3 months</option>
          <option value="month-6">6 months</option>
      </select>
      <label for="normalize">normalize</label>
      <input type="checkbox" id="normalize" value="normalize" style="margin-right: 7px;">
      <label for="showMinMax">show min/max</label>
      <input type="checkbox" id="showMinMax" value="showMinMax" style="margin-right: 7px;">
      <span id="error" style="color: red; display: none;">Retrieving of signals timed out. Please try again.</span>
    </div>
    <div style="display: flex; align-items: center; padding: 10px;">
      <span id="loadingIndicator" class="loader hidden"></span>
      <button id="csvDownload" title="CSV download">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>download</title><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" /></svg>
      </button>
    </div>
  </div>
  <div id="chart-container">
    <canvas id="chart" class="chart" data-cy="chart"></canvas>
  </div>
  <div id="legend-container" style="display: none"></div>
</div>
`,qfe=document.createElement("template");qfe.innerHTML=OMe;class DMe extends HTMLElement{constructor(){super();ee(this,"shadowRoot");ee(this,"chart");ee(this,"setData");ee(this,"setOptions");ee(this,"setSignalsData");ee(this,"setSignalsEndpoint");ee(this,"setSignalsGeometry");ee(this,"setGeoDBEndpoint");this.shadowRoot=this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(qfe.content.cloneNode(!0))}connectedCallback(){this.chart=new Xn(this.shadowRoot.querySelector("canvas"),{options:{maintainAspectRatio:!1,responsive:!0},data:{labels:[],datasets:[]},plugins:[kMe,{id:"selectionLineHighlight",afterDraw:r=>{if(r&&r.tooltip){const n=r.tooltip.getActiveElements();if(n!=null&&n.length){const s=n[0].element.x,o=r.scales.y,a=r.ctx;a.save(),a.beginPath(),a.moveTo(s,o.top),a.lineTo(s,o.bottom),a.lineWidth=1,a.strokeStyle="rgba(0, 0, 255, 0.4)",a.stroke(),a.restore()}}}}]}),this.setData=r=>{this.chart.data=r||{datasets:[]},this.chart.update("none")},this.setOptions=r=>{this.chart.options=r,this.chart.update("none")},this.setSignalsData=r=>{this.chart.data={datasets:Object.entries(r).map(([n,s])=>({type:"line",label:n,data:s}))},this.chart.update("none")},this.setSignalsGeometry=r=>{t&&t.setGeometry(r)};let t=null;this.setSignalsEndpoint=r=>{t=new pae("signals",this.chart,r),new gae(document.getElementById("controls"),t,r),t.setActiveFields(r.active)},this.setGeoDBEndpoint=r=>{t=new pae("geodb",this.chart,r),new gae(document.getElementById("controls"),t,r),t.setActiveFields(r.active)}}}customElements.define("eox-chart",DMe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xl={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Db=i=>(...e)=>({_$litDirective$:i,values:e});let Fb=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const FMe=Db(class extends Fb{constructor(){super(...arguments),this.key=It}render(i,e){return this.key=i,e}update(i,[e,t]){return e!==this.key&&(nC(i),this.key=e),t}}),NMe=i=>{i.hoverInteraction=i.eoxMap.selectInteractions.selectHover,i.clickInteraction=i.eoxMap.selectInteractions.selectClick;const e=()=>{i.requestUpdate()};i.hoverInteraction.selectStyleLayer.on("change",e),i.clickInteraction.selectStyleLayer.on("change",e)},$Me=(i,e,t)=>{if(i.clickId===e)return;const r=t?[]:[e];i.hoverInteraction.highlightById(r)},BMe=(i,e)=>{i.stopPropagation();const t=Number(i.target.getAttribute("index")),r=e.drawnFeatures[t];e.drawLayer.getSource().removeFeature(r),e.drawnFeatures.splice(t,1),e.requestUpdate()},jMe=(i,e)=>{const t=i.get("id"),{clickId:r,drawLayer:n,olMap:s,clickInteraction:o}=e,a=r===t,l=i.getGeometry();if(a){const c=n.getSource().getExtent();s.getView().fit(c,cse),o.highlightById([])}else{const c=l.getExtent();o.highlightById([t]),s.getView().fit(c,cse)}e.requestUpdate()},zMe="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class Hfe extends hi{constructor(){super();ee(this,"hoverInteraction");ee(this,"clickInteraction");ee(this,"hoverId");ee(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(t){BMe(t,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(t){jMe(t,this)}_handleHoverFeature(t,r=!1){$Me(this,t,r)}firstUpdated(){NMe(this)}createRenderRoot(){return this}render(){var t,r;return this.hoverId=(t=this.hoverInteraction)==null?void 0:t.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],ae`
      <style>
        ${!this.unstyled&&zMe}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((n,s)=>{const o=s+1,a=n.get("id"),l=this.hoverId===a,c=this.clickId===a;return FMe(o,ae`
              <li
                class="${l||c?"selected":It}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(n)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}ee(Hfe,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",Hfe);const GMe=i=>{const{multipleFeatures:e,drawnFeatures:t,currentlyDrawing:r}=i,n=!e&&(t==null?void 0:t.length)>0||r,s=!(t!=null&&t.length)&&!r;return{drawDisabled:n,discardDisabled:s}},UMe="button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0px;}",VMe="textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}";function qMe(i){navigator.clipboard.writeText(i).then(function(){},function(e){console.error("Could not copy text: ",e)})}var $m,Bm;class Wfe extends hi{constructor(){super();Et(this,$m,!0);Et(this,Bm,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1}updateButtonStates(){const{drawDisabled:t,discardDisabled:r}=GMe(this);go(this,$m,t),go(this,Bm,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const t=this.currentlyDrawing?"drawing":"draw";return ae`
      <style>
        ${!this.unstyled&&UMe}
        ${!this.unstyled&&VMe}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="polygon icon"
            ?disabled="${wt(this,$m)||It}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${t}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${wt(this,Bm)||It}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${bt(this.importFeatures,()=>ae`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${bt(this.showEditor,()=>ae`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>qMe(this.geoJSON)}
            >
              ${this.unstyled?"copy":It}
            </button>
          </div>
        `)}
    `}}$m=new WeakMap,Bm=new WeakMap,ee(Wfe,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",Wfe);const HMe=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,WMe=i=>{(()=>{i.emitDrawnFeatures(),i.multipleFeatures||(i.draw.setActive(!1),i.currentlyDrawing=!1)})(),i.requestUpdate()},YMe=i=>{const e=()=>{i.drawLayer.set("isDrawingEnabled",!0),i.draw.setActive(!0)},t=()=>{i.currentlyDrawing=!0,i.requestUpdate()};e(),t()},XMe=(i,e)=>{var s;const r=document.querySelector(i.for),n=r.map;return i.drawLayer=r.addOrUpdateLayer({type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:e},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:i.type,modify:i.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),i.draw=r.interactions.drawInteraction,i.modify=r.interactions.drawInteractionmodify,(s=i.modify)==null||s.on("modifyend",()=>i.onModifyEnd()),r.addEventListener("addfeatures",()=>WMe(i)),{EoxMap:r,OlMap:n}},ZMe=i=>{const e=()=>{i.drawnFeatures=[],i.draw.setActive(!1),i.drawLayer.getSource().clear(),i.geoJSON=null},t=()=>{i.emitDrawnFeatures(),i.currentlyDrawing=!1,i.requestUpdate()};e(),t()},KMe=(i,e)=>{setTimeout(()=>{i.drawnFeatures=i.drawLayer.getSource().getFeatures(),i.updateGeoJSON(),i.requestUpdate(),e()},0)};function JMe(i,e){function t(s){s.preventDefault(),s.stopPropagation()}function r(s){s.srcElement.style.opacity="0.4"}function n(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{e.addEventListener(s,t,!1),["dragenter","dragover"].includes(s)?e.addEventListener(s,r,!1):e.addEventListener(s,n,!1)}),e.addEventListener("drop",s=>Yfe(s,i),!1)}function QMe(i){i.preventDefault(),i.stopPropagation()}function Yfe(i,e){QMe(i);const t=i.dataTransfer?i.dataTransfer.files:i.target.files;Array.from(t).forEach(r=>eRe(r,e))}function eRe(i,e){const t=new FileReader;t.readAsText(i),t.onloadend=function(){typeof t.result=="string"&&e.handleFeatureChange(t.result)}}var tc,jm,zm;class tRe extends hi{constructor(){super();Et(this,tc,void 0);Et(this,jm,void 0);Et(this,zm,void 0);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.type="Polygon",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},noShadow:{type:Boolean},type:{type:String},unstyled:{type:Boolean}}}handleStartDrawing(){YMe(this)}handleDiscardDrawing(){ZMe(this)}handleFeatureChange(t,r=!1){wt(this,tc).parseTextToFeature(t||JSON.stringify(hse),this.drawLayer,r)}handleFilesChange(t){Yfe(t,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){go(this,zm,JSON.stringify(wt(this,tc).parseFeature(this.drawnFeatures)||hse,void 0,2))}emitDrawnFeatures(){KMe(this,()=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:this.drawnFeatures}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:t,OlMap:r}=XMe(this,this.multipleFeatures);go(this,tc,t),go(this,jm,r),this.importFeatures&&JMe(this,wt(this,tc)),this.updateGeoJSON(),this.requestUpdate()}render(){var t;return ae`
      <style>
        :host { display: block; }
        ${!this.unstyled&&r1e}
        ${!this.unstyled&&HMe}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.handleStartDrawing(),discard:()=>this.handleDiscardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${wt(this,zm)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((t=this.drawnFeatures)!=null&&t.length)?ae`<eox-drawtools-list
            .eoxMap=${wt(this,tc)}
            .olMap=${wt(this,jm)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:It}
    `}}tc=new WeakMap,jm=new WeakMap,zm=new WeakMap;customElements.define("eox-drawtools",tRe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xr=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iRe={attribute:!0,type:String,converter:Jwe,reflect:!1,hasChanged:Qwe},rRe=(i=iRe,e,t)=>{const{kind:r,metadata:n}=t;let s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(t.name,i),r==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(r==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+r)};function Me(i){return(e,t)=>typeof t=="object"?rRe(i,e,t):((r,n,s)=>{const o=n.hasOwnProperty(s);return n.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function hr(i){return Me({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Qn(i,e){if(i!==void 0){let t=0;for(const r of i)yield e(r,t++)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mae=(i,e,t)=>{const r=new Map;for(let n=e;n<=t;n++)r.set(i[n],n);return r},OC=Db(class extends Fb{constructor(i){if(super(i),i.type!==Xl.CHILD)throw Error("repeat() can only be used in text expressions")}dt(i,e,t){let r;t===void 0?t=e:e!==void 0&&(r=e);const n=[],s=[];let o=0;for(const a of i)n[o]=r?r(a,o):o,s[o]=t(a,o),o++;return{values:s,keys:n}}render(i,e,t){return this.dt(i,e,t).values}update(i,[e,t,r]){const n=t1e(i),{values:s,keys:o}=this.dt(e,t,r);if(!Array.isArray(n))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let c,h,u=0,d=n.length-1,f=0,p=s.length-1;for(;u<=d&&f<=p;)if(n[u]===null)u++;else if(n[d]===null)d--;else if(a[u]===o[f])l[f]=lh(n[u],s[f]),u++,f++;else if(a[d]===o[p])l[p]=lh(n[d],s[p]),d--,p--;else if(a[u]===o[p])l[p]=lh(n[u],s[p]),$p(i,l[p+1],n[u]),u++,p--;else if(a[d]===o[f])l[f]=lh(n[d],s[f]),$p(i,n[u],n[d]),d--,f++;else if(c===void 0&&(c=mae(o,f,p),h=mae(a,u,d)),c.has(a[u]))if(c.has(a[d])){const g=h.get(o[f]),m=g!==void 0?n[g]:null;if(m===null){const y=$p(i,n[u]);lh(y,s[f]),l[f]=y}else l[f]=lh(m,s[f]),$p(i,n[u],m),n[g]=null;f++}else Hx(n[d]),d--;else Hx(n[u]),u++;for(;f<=p;){const g=$p(i,l[p+1]);lh(g,s[f]),l[f++]=g}for(;u<=d;){const g=n[u++];g!==null&&Hx(g)}return this.ut=o,nC(i,l),wd}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let WE=class extends Fb{constructor(e){if(super(e),this.it=It,e.type!==Xl.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===It||e==null)return this._t=void 0,this.it=e;if(e===wd)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}};WE.directiveName="unsafeHTML",WE.resultType=1;const Ua=Db(WE);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xfe=Symbol.for(""),nRe=i=>{if((i==null?void 0:i.r)===Xfe)return i==null?void 0:i._$litStatic$},na=i=>({_$litStatic$:i,r:Xfe}),yae=new Map,sRe=i=>(e,...t)=>{const r=t.length;let n,s;const o=[],a=[];let l,c=0,h=!1;for(;c<r;){for(l=e[c];c<r&&(s=t[c],(n=nRe(s))!==void 0);)l+=n+e[++c],h=!0;c!==r&&a.push(s),o.push(l),c++}if(c===r&&o.push(e[r]),h){const u=o.join("$$lit$$");(e=yae.get(u))===void 0&&(o.raw=o,yae.set(u,e=o)),t=a}return i(e,...t)},zd=sRe(ae);(()=>{var i=Object.defineProperty,e=Math.pow,t=($,Y,le)=>Y in $?i($,Y,{enumerable:!0,configurable:!0,writable:!0,value:le}):$[Y]=le,r=($,Y,le)=>(t($,typeof Y!="symbol"?Y+"":Y,le),le),n=($,Y)=>` ${Y&&Y.length>0?Y.map(le=>`<link rel="stylesheet" href="${le}" />`).join(""):""} <style> ${$} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",c="range-dragging",h="data",u="min",d="max",f="step",p="round",g="type",m="theme",y="rtl",_="btt",v="disabled",x="keyboard-disabled",w="mousewheel-disabled",T="slider-width",A="slider-height",R="slider-radius",L="slider-bg",P="slider-bg-hover",F="slider-bg-fill",B="pointer-width",b="pointer-height",E="pointer-radius",C="pointer-bg",M="pointer-bg-hover",O="pointer-bg-focus",D="pointer-shadow",U="pointer-shadow-hover",z="pointer-shadow-focus",Z="pointer-border",Q="pointer-border-hover",V="pointer-border-focus",N="animate-onclick",X="css-links",ne="vertical",fe="horizontal",ve=($,Y,le,te,Te)=>{let Xe=Y-$;return Xe===0?le:(te-le)*(Te-$)/Xe+le},ge=$=>!isNaN(parseFloat($))&&isFinite($),he=($,Y)=>ge($)?Number($):Y,Ce=($,Y)=>Y===0?0:Math.round($/Y)*Y,Ue=($,Y=1/0)=>{if(Y===1/0)return $;let le=e(10,Y);return Math.round($*le)/le},Je=$=>$==null?!1:typeof $=="boolean"?$:$.trim().toLowerCase()==="true",Bi=($,Y)=>{$.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Y}}))},ki=($,Y)=>{$.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Y}}))},bi=($,Y)=>{$.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Y}}))},hs=($,Y)=>{$.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Y}}))},co=($,Y)=>{if(!Y||Y.length<=0)return;let le=Y.map(Te=>ge(Te)?he(Te,Te):Te),te={values:le||[]};te.value=le[0],te.value0=le[0],te.value1=le[0];for(let Te=1;Te<le.length;Te++)te[`value${Te+1}`]=le[Te];$.dispatchEvent(new CustomEvent("change",{detail:te}))},oe=($,Y,le)=>{let te=0,Te,Xe,mt,Re,Pe=!1,xt=(et,ui,rr,Yi,Oi,Di)=>{let $r=te;rr!==void 0&&et>rr&&(et=rr),ui!==void 0&&et<ui&&(et=ui),te=et;let Br=te;return(Yi===ne&&Di||Yi===fe&&Oi)&&(Br=100-Br),Yi===ne?Y.style.top=`${Br}%`:Y.style.left=`${Br}%`,$r!==te},Mt=et=>et===Y||Y.contains(et),qe=(et,ui,rr,Yi)=>{Te=et,Xe=ui,mt=rr,Re=Yi},Bt=et=>{Pe=et,Y.classList.toggle("disabled",Pe),Pe?Y.setAttribute("aria-disabled","true"):Y.hasAttribute("aria-disabled")&&Y.removeAttribute("aria-disabled")},Cn=(et,ui)=>{ui==null?Y.removeAttribute(et):Y.setAttribute(et,ui)},mr=et=>Y.getAttribute(et),Qe=et=>{if(!Pe){switch(et.key){case"ArrowLeft":{et.preventDefault(),typeof Te=="function"&&Te(le);break}case"ArrowRight":{et.preventDefault(),typeof Xe=="function"&&Xe(le);break}case"ArrowUp":{et.preventDefault(),typeof mt=="function"&&mt(le);break}case"ArrowDown":{et.preventDefault(),typeof Re=="function"&&Re(le);break}}hs($,et)}},Tt=()=>{Pe||Bi($,Y)};return Y.className=`pointer pointer-${le}`,Y.addEventListener("keydown",Qe),Y.addEventListener("click",Tt),{$pointer:Y,get percent(){return te},get disabled(){return Pe},set disabled(et){Bt(et)},updatePosition:xt,isClicked:Mt,setCallbacks:qe,setAttr:Cn,getAttr:mr,destroy:()=>{Y.removeEventListener("keydown",Qe),Y.removeEventListener("click",Tt),Y.remove()}}},ho=$=>{if($==null)return;if(Array.isArray($))return $;if($.trim()==="")return;let Y=$.split(","),le=[],te=!0;for(let Te=0;Te<Y.length;Te++){let Xe=Y[Te].trim();Xe!==""&&(le.push(Xe),ge(Xe)||(te=!1))}return te?le.map(Te=>Number(Te)):le},jo=($,Y)=>Y?Y.findIndex(le=>le===$||le.toString().trim()===$.toString().trim()):-1,Ar=$=>({updatePosition:(Y,le,te,Te)=>{if(le.length<=0)return;let Xe=le.length===1,mt=le[0],Re=le[le.length-1];Y===ne?($.style.removeProperty("width"),$.style.removeProperty("right"),$.style.removeProperty("left"),Xe?$.style.height=`${mt}%`:$.style.height=`${Math.abs(mt-Re)}%`,Te?($.style.bottom="0%",Xe?$.style.top="auto":$.style.top=`${Math.min(100-Re,100-mt)}%`):($.style.bottom="auto",Xe?$.style.top="0%":$.style.top=`${Math.min(mt,Re)}%`)):($.style.removeProperty("height"),$.style.removeProperty("top"),$.style.removeProperty("bottom"),Xe?$.style.width=`${mt}%`:$.style.width=`${Math.abs(mt-Re)}%`,te?($.style.right="0%",Xe?$.style.left="auto":$.style.left=`${Math.min(100-Re,100-mt)}%`):($.style.right="auto",Xe?$.style.left="0%":$.style.left=`${Math.min(mt,Re)}%`))}}),Fr="--animate-onclick",wn="--width",tn="--height",uo="--panel-bg-border-radius",fo="--panel-bg",us="--panel-bg-hover",Nn="--panel-bg-fill",Rl="--pointer-width",ur="--pointer-height",Bc="--pointer-border-radius",Ll="--pointer-bg",wu="--pointer-bg-hover",Eu="--pointer-bg-focus",jc="--pointer-shadow",zc="--pointer-shadow-hover",Il="--pointer-shadow-focus",Gc="--pointer-border",Pl="--pointer-border-hover",zo="--pointer-border-focus",ds=($,Y,le)=>{let te=new Map;for(let Te of $.attributes){let Xe=Te.nodeName.trim().toLowerCase();if(!Y.test(Xe))continue;let mt=Xe.replace(/\D/g,"").trim(),Re=mt===""||mt==="0"||mt==="1"?0:he(mt,0)-1,Pe=le&&typeof le=="function"?le(Te.value):Te.value;te.set(Re,Pe)}return te},Go=$=>{if(!$)return null;let Y=$.getAttribute(X);if(!Y)return null;let le=Y.split(";"),te=[];for(let Te of le)Te.trim()!==""&&te.push(Te.trim());return te},kl=[[wn,T,"sliderWidth",null],[tn,A,"sliderHeight",null],[uo,R,"sliderRadius",null],[fo,L,"sliderBg",null],[us,P,"sliderBgHover",null],[Nn,F,"sliderBgFill",null],[Rl,B,"pointer#Width",/^pointer([0-9]*)-width$/],[ur,b,"pointer#Height",/^pointer([0-9]*)-height$/],[Bc,E,"pointer#Radius",/^pointer([0-9]*)-radius$/],[Ll,C,"pointer#Bg",/^pointer([0-9]*)-bg$/],[wu,M,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Eu,O,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[jc,D,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[zc,U,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Il,z,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[Gc,Z,"pointer#Border",/^pointer([0-9]*)-border$/],[Pl,Q,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[zo,V,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],Uc=($,Y,le)=>{let te=null,Te=[],Xe=new Map,mt=(Qe,Tt=Y)=>{let et=[...Tt.classList];for(let ui of et)ui.startsWith(Qe)&&Y.classList.remove(ui)},Re=()=>{mt("shape");let Qe=Y.querySelectorAll(".pointer");for(let Tt of Qe)mt("shape",Tt)},Pe=Qe=>{te=Qe,mt("theme-"),typeof Qe=="string"&&Y.classList.add(`theme-${Qe}`)},xt=()=>{if(Re(),!(Te.length<=0)){Y.classList.add("shape",`shape-${Te[0]}`);for(let Qe=1;Qe<Te.length;Qe++){let Tt=Te[Qe];if(!Tt)continue;let et=Y.querySelector(`.pointer-${Qe}`);!et||et.classList.add("shape",`shape-${Tt}`)}}},Mt=(Qe,Tt)=>{Te[Qe]=Tt,xt()},qe=()=>{Re();let Qe=ds($,/^pointer([0-9]*)-shape$/);if(!(Qe.size<=0)){for(let Tt of Qe){let et=Tt[0];Te[et]=Tt[1]}xt()}},Bt=(Qe,Tt)=>`${Qe}-${Tt}`,Cn=(Qe,Tt,et)=>{let ui=le[et];if(!ui)return;let rr=et===0?Y:ui.$pointer;if(Tt==null){Xe.has(Bt(Qe,et))&&Xe.delete(Bt(Qe,et)),rr.style.removeProperty(Qe);return}Xe.set(Bt(Qe,et),Tt),rr.style.setProperty(Qe,Tt)},mr=(Qe,Tt)=>Xe.get(Bt(Qe,Tt));return(()=>{for(let Qe of kl){let[Tt,et,ui,rr]=Qe;if(rr){let Oi=ds($,rr);for(let Di of Oi){let $r=Di[0],Br=Di[1];Cn(Tt,Br,$r)}}else{let Oi=$.getAttribute(et);Cn(Tt,Oi,0)}let Yi=[];if(ui.indexOf("#")===-1)Yi.push([ui,0]);else{Yi.push([ui.replace("#",""),0]),Yi.push([ui.replace("#","0"),0]),Yi.push([ui.replace("#","1"),0]);for(let Oi=1;Oi<le.length;Oi++)Yi.push([ui.replace("#",(Oi+1).toString()),Oi])}for(let Oi of Yi)try{let Di=Oi[0],$r=Oi[1];Object.prototype.hasOwnProperty.call($,Di)||Object.defineProperty($,Di,{get(){return mr(Tt,$r)},set:Br=>{Cn(Tt,Br,$r)}})}catch(Di){console.error(Di)}}Pe($.getAttribute(m)),qe()})(),{setStyle:Cn,getStyle:mr,get theme(){return te},set theme(Qe){Pe(Qe)},get pointerShapes(){return Te},setPointerShape:Mt}},Wi="animate-on-click",fs="range-dragging",Nr=($,Y,le,te)=>{let Te=[],Xe=Mt=>{for(let qe of Te)qe.update&&typeof qe.update=="function"&&qe.update(Mt)},mt=()=>{for(let Mt of Te)Mt.destroy&&typeof Mt.destroy=="function"&&Mt.destroy()},Re=(Mt,qe)=>{for(let Bt of Te)Bt.onAttrChange&&typeof Bt.onAttrChange=="function"&&Bt.onAttrChange(Mt,qe)},Pe=Mt=>{if(Mt.gettersAndSetters){for(let qe of Mt.gettersAndSetters)if(!(!qe.name||!qe.attributes))try{Object.prototype.hasOwnProperty.call($,qe.name)||Object.defineProperty($,qe.name,qe.attributes)}catch(Bt){console.error("defineSettersGetters error:",Bt)}}},xt=Mt=>{var qe;if(!Mt.css)return;let Bt=(qe=$.shadowRoot)==null?void 0:qe.querySelector("style");!Bt||(Bt.innerHTML+=Mt.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let Mt of window.tcRangeSliderPlugins){let qe=Mt();Te.push(qe),qe.init&&typeof qe.init=="function"&&(qe.init($,Y,le,te),Pe(qe),xt(qe))}},update:Xe,onAttrChange:Re,destroy:mt}},En=10,Mr=20,$n=($,Y)=>{let le=new Map,te=/^value([0-9]*)$/;for(let Re of $.attributes){let Pe=Re.nodeName.trim().toLowerCase();if(!te.test(Pe))continue;let xt=Pe.replace("value","").trim(),Mt=xt===""||xt==="0"||xt==="1"?0:he(xt,0)-1,qe=ge(Re.value)?he(Re.value,0):Re.value;le.set(Mt,qe)}let Te=Math.max(...Array.from(le.keys())),Xe=[];Xe.push([oe($,Y,0),le.get(0)]);let mt=Y;for(let Re=1;Re<=Te;Re++){let Pe=Y.cloneNode(!0);mt.after(Pe),mt=Pe,Xe.push([oe($,Pe,Re),le.get(Re)])}return Xe},Sn=($,Y,le,te,Te,Xe,mt)=>{try{Object.defineProperty($,te,{configurable:!0,get(){if(!Y)return;let Re=Y.pointers[le];if(!Re)return;let Pe=Y.getTextValue(Re.percent);return ge(Pe)?he(Pe,Pe):Pe},set:Re=>{Y.pointers[le]?Y==null||Y.setValue(Re,le):Y==null||Y.addPointer(Re)}}),Object.defineProperty($,Te,{configurable:!0,get(){var Re,Pe;return(Pe=(Re=Y==null?void 0:Y.pointers[le])==null?void 0:Re.getAttr("aria-label"))!=null?Pe:void 0},set:Re=>{!Y||Y.setAriaLabel(le,Re)}}),Object.defineProperty($,Xe,{configurable:!0,get(){var Re,Pe;return(Pe=(Re=Y==null?void 0:Y.styles)==null?void 0:Re.pointerShapes[le])!=null?Pe:null},set:Re=>{!Y||!Y.styles||Y.styles.setPointerShape(le,Re)}}),Object.defineProperty($,mt,{configurable:!0,get(){var Re;return(Re=Y==null?void 0:Y.pointers[le].disabled)!=null?Re:!1},set:Re=>{if(!Y)return;let Pe=Y==null?void 0:Y.pointers[le];!Pe||(Pe.disabled=Re)}})}catch(Re){console.error(Re)}},yi=($,Y)=>{let le=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let te=2;te<En;te++)le.push([`value${te}`,`ariaLabel${te}`,`pointer${te}Shape`,`pointer${te}Disabled`,te-1]);for(let te of le)Sn($,Y,te[4],te[0],te[1],te[2],te[3])},ir=($,Y,le)=>{var te;let Te=(te=le.shadowRoot)==null?void 0:te.querySelector(".container");if(Te)for(let Xe of $)Y?Te.prepend(Xe.$pointer):Te.append(Xe.$pointer)},Bn=($,Y)=>{if(!(!Y||$.length<=1)){for(let le of $)le.$pointer.style.zIndex=Mr.toString();Y.$pointer.style.zIndex=(Mr*2).toString()}},Ol=0,Dl=100,Ra=2,vp="0.3s",Oy=($,Y,le)=>{let te=le.map(W=>W[0]),Te=null,Xe=null,mt=null,Re=null,Pe=Ol,xt=Dl,Mt,qe,Bt=fe,Cn=Ra,mr=!1,Qe=!1,Tt=!1,et=0,ui=1/0,rr=!1,Yi,Oi,Di=!1,$r=!1,Br=!1,po=vp,bp=[],xp=W=>{Di||(W.preventDefault&&W.preventDefault(),Uo(W),window.addEventListener("mousemove",Uo),window.addEventListener("mouseup",Vc),ki($,W))},Vc=W=>{Di||(Yi=void 0,Oi=void 0,window.removeEventListener("mousemove",Uo),window.removeEventListener("mouseup",Vc),po&&Y.classList.add(Wi),bi($,W))},Ny=(W,pe)=>{if(te.length<=0)return;if(te.length===1)return te[0].isClicked(W)&&po&&Y.classList.remove(Wi),te[0];let Be=By(W);if(rr){let Ft=pe,jn=Hc(Ft);jn!==void 0&&(Ft=Ce(Ft,jn)),Be?(Yi=Ft,Oi=0,po&&Y.classList.remove(Wi)):Yi!==void 0&&(Oi=Ft-Yi,Yi=Ft)}if(!$y(W)&&!Be){for(let Ft of te)if(!(!Ft.isClicked(W)||Ft.disabled))return po&&Y.classList.remove(Wi),Ft;for(let Ft of te)if(Te===Ft)return Ft}let Ht=1/0,Fi=null;for(let Ft of te){if(Ft.disabled)continue;let jn=Math.abs(pe-Ft.percent);jn<Ht&&(Ht=jn,Fi=Ft)}return Fi},wp=()=>te.findIndex(W=>Te===W&&!W.disabled),Uo=W=>{let pe;if(Bt===ne){let{height:Ht,top:Fi}=Y.getBoundingClientRect(),Ft=W.type.indexOf("mouse")!==-1?W.clientY:W.touches[0].clientY;pe=Math.min(Math.max(0,Ft-Fi),Ht)*100/Ht}else{let{width:Ht,left:Fi}=Y.getBoundingClientRect(),Ft=W.type.indexOf("mouse")!==-1?W.clientX:W.touches[0].clientX;pe=Math.min(Math.max(0,Ft-Fi),Ht)*100/Ht}if((mr||Qe)&&(pe=100-pe),Te=Ny(W.target,pe),Te&&Bn(te,Te),rr&&te.length>1&&Oi!==void 0){let Ht=te[0],Fi=te[te.length-1],Ft=Ht.percent+Oi<0,jn=Fi.percent+Oi>100;if(Ft||jn)return;for(let eh=0;eh<te.length;eh++)jr(eh,te[eh].percent+Oi);return}let Be=wp();Be!==-1&&(jr(Be,pe),Te==null||Te.$pointer.focus())},qc=W=>{if(Di||document.activeElement!==$||Te!=null&&Te.disabled)return;W.stopPropagation(),W.preventDefault();let pe=W.deltaY<0,Be=mr||Qe,Ht=pe?!Be:Be,Fi=wp();Fi!==-1&&(Ht?Fl(Fi,te[Fi].percent):Nl(Fi,te[Fi].percent))},Ep=W=>{Di||$r||(Bt===ne?Qe?jr(W,100):jr(W,0):mr?Nl(W,te[W].percent):Fl(W,te[W].percent))},Sp=W=>{Di||$r||(Bt===ne?Qe?jr(W,0):jr(W,100):mr?Fl(W,te[W].percent):Nl(W,te[W].percent))},Cp=W=>{Di||$r||(Bt===ne?Qe?Nl(W,te[W].percent):Fl(W,te[W].percent):mr?jr(W,100):jr(W,0))},Tp=W=>{Di||$r||(Bt===ne?Qe?Fl(W,te[W].percent):Nl(W,te[W].percent):mr?jr(W,0):jr(W,100))},$y=W=>W.classList.contains("panel"),By=W=>W.classList.contains("panel-fill"),Fl=(W,pe)=>{if(pe===void 0)return;let Be=Hc(pe);Be==null&&(Be=1),pe-=Be,pe<0&&(pe=0),jr(W,pe)},Nl=(W,pe)=>{if(pe===void 0)return;let Be=Hc(pe);Be==null&&(Be=1),pe+=Be,pe>100&&(pe=100),jr(W,pe)},Vo=()=>{!Re||Re.update({percents:Ap(),values:Mp(),$pointers:Rp(),min:Lp(),max:Ip(),data:Tu(),step:Cu(),round:Mu(),type:Au(),textMin:Wc(),textMax:Yc(),rightToLeft:Iu(),bottomToTop:Pu(),pointersOverlap:Fu(),pointersMinDistance:Ru(),pointersMaxDistance:Lu(),rangeDragging:Nu(),disabled:ku(),keyboardDisabled:Ou(),mousewheelDisabled:Du()})},jy=()=>{Vo()},zy=W=>{if(!(Tt||te.length<=1||xt===Pe))if(W===0){let pe=ui*100/(xt-Pe);return Math.max(0,te[W+1].percent-pe)}else{let pe=et*100/(xt-Pe);return Math.min(te[W-1].percent+pe,100)}},Gy=W=>{if(!(Tt||te.length<=1||xt===Pe))if(W===te.length-1){let pe=ui*100/(xt-Pe);return Math.min(te[W-1].percent+pe,100)}else{let pe=et*100/(xt-Pe);return Math.max(0,te[W+1].percent-pe)}},Hc=W=>{let pe;if(typeof Mt=="function"){let Be=ve(0,100,Pe,xt,W);pe=Mt(Be,W)}else pe=Mt;if(ge(pe)){let Be=xt-Pe;return pe=Be===0?0:pe*100/Be,pe}},La=W=>{if(W===void 0)return;let pe=ve(0,100,Pe,xt,W);return qe!==void 0?qe[Math.round(pe)]:Ue(pe,Cn)},Wc=()=>qe!==void 0?qe[Pe]:Pe,Yc=()=>qe!==void 0?qe[xt]:xt,Cu=()=>Mt,Uy=W=>{var pe;return W<=0||Tt?Wc():(pe=La(te[W-1].percent))!=null?pe:""},Vy=W=>{var pe;return te.length<=1||W>=te.length-1||Tt?Yc():(pe=La(te[W+1].percent))!=null?pe:""},Ap=()=>te.map(W=>W.percent),Mp=()=>te.map(W=>La(W.percent)),Rp=()=>te.map(W=>W.$pointer),Lp=()=>Pe,Ip=()=>xt,Tu=()=>qe,Au=()=>Bt,Mu=()=>Cn,Ru=()=>et,Lu=()=>ui,qy=W=>bp[W],Iu=()=>mr,Pu=()=>Qe,ku=()=>Di,Ou=()=>$r,Du=()=>Br,Fu=()=>Tt,Nu=()=>rr,jr=(W,pe)=>{if(pe===void 0)return;let Be=Hc(pe);Be!==void 0&&(pe=Ce(pe,Be));let Ht=te[W];if(!Ht)return;let Fi=Ht.updatePosition(pe,zy(W),Gy(W),Bt,mr,Qe);Xe==null||Xe.updatePosition(Bt,te.map(Ft=>Ft.percent),mr,Qe),Vo();for(let Ft of te){let jn=La(Ft.percent);jn!==void 0&&(Ft.setAttr("aria-valuenow",jn.toString()),Ft.setAttr("aria-valuetext",jn.toString()))}Wy(),Fi&&co($,te.map(Ft=>La(Ft.percent)))},ps=()=>{for(let W=0;W<te.length;W++)jr(W,te[W].percent)},Hy=(W,pe)=>{Pe=qe!==void 0?0:he(W,Ol),xt=qe!==void 0?qe.length-1:he(pe,Dl),Xc(Pe),Zc(xt)},Wy=()=>{var W,pe;for(let Be=0;Be<te.length;Be++){let Ht=te[Be];Ht.setAttr("aria-valuemin",((W=Uy(Be))!=null?W:"").toString()),Ht.setAttr("aria-valuemax",((pe=Vy(Be))!=null?pe:"").toString())}},Xc=W=>{Pe=he(W,Ol),Pe>xt&&(xt=Pe+Dl),ps()},Zc=W=>{xt=he(W,Dl),xt<Pe&&(xt=Pe+Dl),ps()},Pp=W=>{Tt=!0;for(let pe=0;pe<W.length;pe++)Kc(W[pe],pe);Tt=!1;for(let pe=0;pe<W.length;pe++)Kc(W[pe],pe)},Kc=(W,pe)=>{let Be;qe!==void 0?(Be=W==null?0:jo(W,qe),Be===-1&&(Be=0)):(Be=he(W,Pe),Be<Pe&&(Be=Pe),Be>xt&&(Be=xt));let Ht=ve(Pe,xt,0,100,Be);jr(pe,Ht)},Jc=W=>{if(W==null){Mt=void 0;return}if(typeof W=="function"){Mt=W,ps();return}if(ge(W)){Mt=he(W,1);let pe=Math.abs(xt-Pe);Mt>pe&&(Mt=void 0),ps();return}Mt=void 0},$u=W=>{Tt=W,ps()},Bu=W=>{(!ge(W)||W<0)&&(W=0),et=W},ju=W=>{(!ge(W)||W<0)&&(W=1/0),ui=W},zu=W=>{Di=W,Y.classList.toggle("disabled",Di),Di?Y.setAttribute("aria-disabled","true"):Y.hasAttribute("aria-disabled")&&Y.removeAttribute("aria-disabled")},kp=W=>{$r=W},Op=W=>{Br=W,Br?document.removeEventListener("wheel",qc):document.addEventListener("wheel",qc,{passive:!1})},Gu=W=>{if(W==null){qe=void 0;return}if(qe=ho(W),qe===void 0||qe.length<=0){qe=void 0;return}Xc(0),Zc(qe.length-1),Mt===void 0&&Jc(1)},Uu=W=>{var pe;typeof W=="string"?Bt=W.trim().toLowerCase()===ne?ne:fe:Bt=fe;let Be=(pe=$.shadowRoot)==null?void 0:pe.querySelector(".range-slider-box");if(!Be)return;Be.className=`range-slider-box type-${Bt}`,ps();let Ht=Bt===ne?"vertical":"horizontal";for(let Fi of te)Fi.setAttr("aria-orientation",Ht)},Vu=W=>{mr=W,te.length>1&&ir(te,mr,$),ps(),Vo()},qu=W=>{Qe=W,te.length>1&&ir(te,Qe,$),ps(),Vo()},Hu=W=>{Cn=he(W,Ra),Cn<0&&(Cn=Ra),Vo()},Dp=W=>{W==null||W.toString().trim().toLowerCase()==="false"?(po=void 0,Y.style.removeProperty(Fr),Y.classList.remove(Wi)):(po=W.toString(),Y.style.setProperty(Fr,po),Y.classList.add(Wi))},Fp=(W,pe)=>{let Be=te[W];!Be||(Be.setAttr("aria-label",pe),bp[W]=pe)},Qc=W=>{if(Yi=void 0,te.length<=1){rr=!1,Y.classList.remove(fs);return}rr=W,Y.classList.toggle(fs,rr)},Yy=()=>{zu(Je($.getAttribute(v))),$r=Je($.getAttribute(x)),Br=Je($.getAttribute(w));let W=ds($,/^pointer([0-9]*)-disabled$/,pe=>Je(pe));for(let pe of W){let Be=pe[0];!te[Be]||(te[Be].disabled=pe[1])}},Xy=()=>{let W=ds($,/^aria-label([0-9]*)$/);for(let pe of W){let Be=pe[0];Fp(Be,pe[1])}},Zy=W=>{let pe=te.length,Be=te[pe-1].$pointer,Ht=Be.cloneNode(!0);Be.after(Ht);let Fi=oe($,Ht,pe);return Fi.setCallbacks(Ep,Sp,Cp,Tp),te.push(Fi),Kc(W,pe),ps(),Vo(),pe},Ky=()=>{let W=te.length,pe=te[W-1];return pe?(pe.destroy(),te.pop(),te.length<=1&&Qc(!1),ps(),Vo(),W-1):-1};return(()=>{var W,pe;for(let Ht of te)Ht.setCallbacks(Ep,Sp,Cp,Tp);let Be=(W=$.shadowRoot)==null?void 0:W.querySelector(".panel-fill");Be&&(Xe=Ar(Be)),Uu($.getAttribute(g)),Vu(Je($.getAttribute(y))),qu(Je($.getAttribute(_))),Hy($.getAttribute(u),$.getAttribute(d)),Jc($.getAttribute(f)),Gu($.getAttribute(h)),Pp(le.map(Ht=>Ht[1])),$u(Je($.getAttribute(o))),Bu(he($.getAttribute(a),0)),ju(he($.getAttribute(l),1/0)),Qc(Je($.getAttribute(c))),Hu(he($.getAttribute(p),Ra)),Yy(),Xy(),mt=Uc($,Y,te),Dp((pe=$.getAttribute(N))!=null?pe:vp),Y.addEventListener("mousedown",xp),Y.addEventListener("mouseup",Vc),Y.addEventListener("touchmove",Uo),Y.addEventListener("touchstart",Uo),Br||document.addEventListener("wheel",qc,{passive:!1}),Re=Nr($,jy,{setValues:Pp,setMin:Xc,setMax:Zc,setStep:Jc,setPointersOverlap:$u,setPointersMinDistance:Bu,setPointersMaxDistance:ju,setDisabled:zu,setType:Uu,setRightToLeft:Vu,setBottomToTop:qu,setRound:Hu,setKeyboardDisabled:kp,setMousewheelDisabled:Op,setRangeDragging:Qc,setData:Gu},{getPercents:Ap,getValues:Mp,getPointerElements:Rp,getMin:Lp,getMax:Ip,getStep:Cu,getData:Tu,getType:Au,getRound:Mu,getTextMin:Wc,getTextMax:Yc,isRightToLeft:Iu,isBottomToTop:Pu,isDisabled:ku,isKeyboardDisabled:Ou,isMousewheelDisabled:Du,isPointersOverlap:Fu,isRangeDraggingEnabled:Nu,getPointersMinDistance:Ru,getPointersMaxDistance:Lu}),Re.init()})(),{get pointers(){return te},get styles(){return mt},get pluginsManager(){return Re},get min(){return Wc()},get max(){return Yc()},get step(){return Cu()},get pointersOverlap(){return Fu()},set pointersOverlap(W){$u(W)},get pointersMinDistance(){return Ru()},set pointersMinDistance(W){Bu(W)},get pointersMaxDistance(){return Lu()},set pointersMaxDistance(W){ju(W)},get disabled(){return ku()},set disabled(W){zu(W)},get data(){return Tu()},get type(){return Au()},set type(W){Uu(W)},get rightToLeft(){return Iu()},set rightToLeft(W){Vu(W)},get bottomToTop(){return Pu()},set bottomToTop(W){qu(W)},get round(){return Mu()},set round(W){Hu(W)},get animateOnClick(){return po},set animateOnClick(W){Dp(W)},get keyboardDisabled(){return Ou()},set keyboardDisabled(W){kp(W)},get mousewheelDisabled(){return Du()},set mousewheelDisabled(W){Op(W)},get rangeDragging(){return Nu()},set rangeDragging(W){Qc(W)},setMin:Xc,setMax:Zc,setValue:Kc,setStep:Jc,setData:Gu,getTextValue:La,setAriaLabel:Fp,getAriaLabel:qy,addPointer:Zy,removePointer:Ky,destroy:()=>{Y.removeEventListener("mousedown",xp),Y.removeEventListener("mouseup",Vc),Y.removeEventListener("touchmove",Uo),Y.removeEventListener("touchstart",Uo),document.removeEventListener("wheel",qc);for(let W of te)W.destroy();Re==null||Re.destroy()}}},Dy=($,Y,le)=>{let te=kl.find(([Re,Pe,xt,Mt])=>Pe.replace("#","")===Y.replace(/\d+/g,""));if(te&&$.styles){let[Re,Pe,xt,Mt]=te,qe=Y.replace(/\D/g,"").trim(),Bt=qe===""||qe==="0"||qe==="1"?0:he(qe,0)-1;$.styles.setStyle(Re,le,Bt);return}switch($&&$.pluginsManager&&$.pluginsManager.onAttrChange(Y,le),Y){case u:{$.setMin(le);break}case d:{$.setMax(le);break}case f:{$.setStep(le);break}case o:{$.pointersOverlap=Je(le);break}case a:{$.pointersMinDistance=he(le,0);break}case c:{$.rangeDragging=Je(le);break}case l:{$.pointersMaxDistance=he(le,1/0);break}case v:{$.disabled=Je(le);break}case x:{$.keyboardDisabled=Je(le);break}case w:{$.mousewheelDisabled=Je(le);break}case h:{$.setData(le);break}case g:{$.type=le;break}case y:{$.rightToLeft=Je(le);break}case _:{$.bottomToTop=Je(le);break}case p:{$.round=he(le,Ra);break}case m:{$.styles&&($.styles.theme=le);break}case N:{$.animateOnClick=le;break}}let Te=null;if(/^value([0-9]*)$/.test(Y)&&(Te="value"),/^pointer([0-9]*)-disabled$/.test(Y)&&(Te="pointer-disabled"),/^aria-label([0-9]*)$/.test(Y)&&(Te="aria-label"),/^pointer([0-9]*)-shape$/.test(Y)&&(Te="pointer-shape"),!Te)return;let Xe=Y.replace(/\D/g,"").trim(),mt=Xe===""||Xe==="0"||Xe==="1"?0:he(Xe,0)-1;switch(Te){case"value":{$.setValue(le,mt);break}case"pointer-disabled":{let Re=$==null?void 0:$.pointers[mt];if(!Re)return;Re.disabled=Je(le);break}case"aria-label":{$.setAriaLabel(mt,le);break}case"pointer-shape":{$.styles&&$.styles.setPointerShape(mt,le);break}}},Fy=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step($){this.slider&&this.slider.setStep($)}get step(){var $;return($=this.slider)==null?void 0:$.step}set disabled($){this.slider&&(this.slider.disabled=$)}get disabled(){var $,Y;return(Y=($=this.slider)==null?void 0:$.disabled)!=null?Y:!1}set data($){var Y;(Y=this.slider)==null||Y.setData($)}get data(){var $;return($=this.slider)==null?void 0:$.data}set min($){var Y;(Y=this.slider)==null||Y.setMin($)}get min(){var $;return($=this.slider)==null?void 0:$.min}set max($){var Y;(Y=this.slider)==null||Y.setMax($)}get max(){var $;return($=this.slider)==null?void 0:$.max}set round($){!this.slider||(this.slider.round=$)}get round(){var $,Y;return(Y=($=this.slider)==null?void 0:$.round)!=null?Y:Ra}set type($){!this.slider||(this.slider.type=$??fe)}get type(){var $;return(($=this.slider)==null?void 0:$.type)||fe}set pointersOverlap($){!this.slider||(this.slider.pointersOverlap=$)}get pointersOverlap(){var $,Y;return(Y=($=this.slider)==null?void 0:$.pointersOverlap)!=null?Y:!1}set pointersMinDistance($){!this.slider||(this.slider.pointersMinDistance=$)}get pointersMinDistance(){var $,Y;return(Y=($=this.slider)==null?void 0:$.pointersMinDistance)!=null?Y:0}set pointersMaxDistance($){!this.slider||(this.slider.pointersMaxDistance=$)}get pointersMaxDistance(){var $,Y;return(Y=($=this.slider)==null?void 0:$.pointersMaxDistance)!=null?Y:1/0}set theme($){!this.slider||!this.slider.styles||(this.slider.styles.theme=$)}get theme(){var $,Y,le;return(le=(Y=($=this.slider)==null?void 0:$.styles)==null?void 0:Y.theme)!=null?le:null}set rtl($){!this.slider||(this.slider.rightToLeft=$)}get rtl(){var $,Y;return(Y=($=this.slider)==null?void 0:$.rightToLeft)!=null?Y:!1}set btt($){!this.slider||(this.slider.bottomToTop=$)}get btt(){var $,Y;return(Y=($=this.slider)==null?void 0:$.bottomToTop)!=null?Y:!1}set keyboardDisabled($){!this.slider||(this.slider.keyboardDisabled=$)}get keyboardDisabled(){var $,Y;return(Y=($=this.slider)==null?void 0:$.keyboardDisabled)!=null?Y:!1}set mousewheelDisabled($){!this.slider||(this.slider.mousewheelDisabled=$)}get mousewheelDisabled(){var $,Y;return(Y=($=this.slider)==null?void 0:$.mousewheelDisabled)!=null?Y:!1}set animateOnClick($){!this.slider||(this.slider.animateOnClick=$)}get animateOnClick(){var $;return($=this.slider)==null?void 0:$.animateOnClick}get rangeDragging(){var $,Y;return(Y=($=this.slider)==null?void 0:$.rangeDragging)!=null?Y:!1}set rangeDragging($){this.slider&&(this.slider.rangeDragging=Je($))}get externalCSSList(){return this._externalCSSList}addPointer($){var Y,le;if(!this.slider)return;let te=(le=(Y=this.slider)==null?void 0:Y.addPointer($))!=null?le:0;Sn(this,this.slider,te,`value${te+1}`,`ariaLabel${te+1}`,`pointerShape${te+1}`,`pointer${te+1}Disabled`)}removePointer(){var $;!this.slider||($=this.slider)==null||$.removePointer()}addCSS($){if(!this.shadowRoot)return;let Y=document.createElement("style");Y.textContent=$,this.shadowRoot.appendChild(Y)}connectedCallback(){var $,Y;if(!this.shadowRoot)return;this._externalCSSList=Go(this),this.shadowRoot.innerHTML=n(s,this._externalCSSList);let le=($=this.shadowRoot)==null?void 0:$.querySelector(".pointer");if(!le)return;let te=(Y=this.shadowRoot)==null?void 0:Y.getElementById("range-slider");if(!te)return;let Te=$n(this,le);this.slider=Oy(this,te,Te),yi(this,this.slider),this._observer=new MutationObserver(Xe=>{Xe.forEach(mt=>{var Re;if(!this.slider||mt.type!=="attributes")return;let Pe=mt.attributeName;!Pe||Dy(this.slider,Pe,(Re=this.getAttribute(Pe))!=null?Re:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},Su=Fy;window.tcRangeSlider=Su,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",Su),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends Su{})})();var Zfe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(xr,function(){var t=1e3,r=6e4,n=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",d="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var C=["th","st","nd","rd"],M=E%100;return"["+E+(C[(M-20)%10]||C[M]||C[0])+"]"}},v=function(E,C,M){var O=String(E);return!O||O.length>=C?E:""+Array(C+1-O.length).join(M)+E},x={s:v,z:function(E){var C=-E.utcOffset(),M=Math.abs(C),O=Math.floor(M/60),D=M%60;return(C<=0?"+":"-")+v(O,2,"0")+":"+v(D,2,"0")},m:function E(C,M){if(C.date()<M.date())return-E(M,C);var O=12*(M.year()-C.year())+(M.month()-C.month()),D=C.clone().add(O,u),U=M-D<0,z=C.clone().add(O+(U?-1:1),u);return+(-(O+(M-D)/(U?D-z:z-D))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:u,y:f,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},w="en",T={};T[w]=_;var A="$isDayjsObject",R=function(E){return E instanceof B||!(!E||!E[A])},L=function E(C,M,O){var D;if(!C)return w;if(typeof C=="string"){var U=C.toLowerCase();T[U]&&(D=U),M&&(T[U]=M,D=U);var z=C.split("-");if(!D&&z.length>1)return E(z[0])}else{var Z=C.name;T[Z]=C,D=Z}return!O&&D&&(w=D),D||!O&&w},P=function(E,C){if(R(E))return E.clone();var M=typeof C=="object"?C:{};return M.date=E,M.args=arguments,new B(M)},F=x;F.l=L,F.i=R,F.w=function(E,C){return P(E,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var B=function(){function E(M){this.$L=L(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[A]=!0}var C=E.prototype;return C.parse=function(M){this.$d=function(O){var D=O.date,U=O.utc;if(D===null)return new Date(NaN);if(F.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var z=D.match(m);if(z){var Z=z[2]-1||0,Q=(z[7]||"0").substring(0,3);return U?new Date(Date.UTC(z[1],Z,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Q)):new Date(z[1],Z,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Q)}}return new Date(D)}(M),this.init()},C.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},C.$utils=function(){return F},C.isValid=function(){return this.$d.toString()!==g},C.isSame=function(M,O){var D=P(M);return this.startOf(O)<=D&&D<=this.endOf(O)},C.isAfter=function(M,O){return P(M)<this.startOf(O)},C.isBefore=function(M,O){return this.endOf(O)<P(M)},C.$g=function(M,O,D){return F.u(M)?this[O]:this.set(D,M)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(M,O){var D=this,U=!!F.u(O)||O,z=F.p(M),Z=function(ge,he){var Ce=F.w(D.$u?Date.UTC(D.$y,he,ge):new Date(D.$y,he,ge),D);return U?Ce:Ce.endOf(c)},Q=function(ge,he){return F.w(D.toDate()[ge].apply(D.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(he)),D)},V=this.$W,N=this.$M,X=this.$D,ne="set"+(this.$u?"UTC":"");switch(z){case f:return U?Z(1,0):Z(31,11);case u:return U?Z(1,N):Z(0,N+1);case h:var fe=this.$locale().weekStart||0,ve=(V<fe?V+7:V)-fe;return Z(U?X-ve:X+(6-ve),N);case c:case p:return Q(ne+"Hours",0);case l:return Q(ne+"Minutes",1);case a:return Q(ne+"Seconds",2);case o:return Q(ne+"Milliseconds",3);default:return this.clone()}},C.endOf=function(M){return this.startOf(M,!1)},C.$set=function(M,O){var D,U=F.p(M),z="set"+(this.$u?"UTC":""),Z=(D={},D[c]=z+"Date",D[p]=z+"Date",D[u]=z+"Month",D[f]=z+"FullYear",D[l]=z+"Hours",D[a]=z+"Minutes",D[o]=z+"Seconds",D[s]=z+"Milliseconds",D)[U],Q=U===c?this.$D+(O-this.$W):O;if(U===u||U===f){var V=this.clone().set(p,1);V.$d[Z](Q),V.init(),this.$d=V.set(p,Math.min(this.$D,V.daysInMonth())).$d}else Z&&this.$d[Z](Q);return this.init(),this},C.set=function(M,O){return this.clone().$set(M,O)},C.get=function(M){return this[F.p(M)]()},C.add=function(M,O){var D,U=this;M=Number(M);var z=F.p(O),Z=function(N){var X=P(U);return F.w(X.date(X.date()+Math.round(N*M)),U)};if(z===u)return this.set(u,this.$M+M);if(z===f)return this.set(f,this.$y+M);if(z===c)return Z(1);if(z===h)return Z(7);var Q=(D={},D[a]=r,D[l]=n,D[o]=t,D)[z]||1,V=this.$d.getTime()+M*Q;return F.w(V,this)},C.subtract=function(M,O){return this.add(-1*M,O)},C.format=function(M){var O=this,D=this.$locale();if(!this.isValid())return D.invalidDate||g;var U=M||"YYYY-MM-DDTHH:mm:ssZ",z=F.z(this),Z=this.$H,Q=this.$m,V=this.$M,N=D.weekdays,X=D.months,ne=D.meridiem,fe=function(he,Ce,Ue,Je){return he&&(he[Ce]||he(O,U))||Ue[Ce].slice(0,Je)},ve=function(he){return F.s(Z%12||12,he,"0")},ge=ne||function(he,Ce,Ue){var Je=he<12?"AM":"PM";return Ue?Je.toLowerCase():Je};return U.replace(y,function(he,Ce){return Ce||function(Ue){switch(Ue){case"YY":return String(O.$y).slice(-2);case"YYYY":return F.s(O.$y,4,"0");case"M":return V+1;case"MM":return F.s(V+1,2,"0");case"MMM":return fe(D.monthsShort,V,X,3);case"MMMM":return fe(X,V);case"D":return O.$D;case"DD":return F.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return fe(D.weekdaysMin,O.$W,N,2);case"ddd":return fe(D.weekdaysShort,O.$W,N,3);case"dddd":return N[O.$W];case"H":return String(Z);case"HH":return F.s(Z,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return ge(Z,Q,!0);case"A":return ge(Z,Q,!1);case"m":return String(Q);case"mm":return F.s(Q,2,"0");case"s":return String(O.$s);case"ss":return F.s(O.$s,2,"0");case"SSS":return F.s(O.$ms,3,"0");case"Z":return z}return null}(he)||z.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(M,O,D){var U,z=this,Z=F.p(O),Q=P(M),V=(Q.utcOffset()-this.utcOffset())*r,N=this-Q,X=function(){return F.m(z,Q)};switch(Z){case f:U=X()/12;break;case u:U=X();break;case d:U=X()/3;break;case h:U=(N-V)/6048e5;break;case c:U=(N-V)/864e5;break;case l:U=N/n;break;case a:U=N/r;break;case o:U=N/t;break;default:U=N}return D?U:F.a(U)},C.daysInMonth=function(){return this.endOf(u).$D},C.$locale=function(){return T[this.$L]},C.locale=function(M,O){if(!M)return this.$L;var D=this.clone(),U=L(M,O,!0);return U&&(D.$L=U),D},C.clone=function(){return F.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},E}(),b=B.prototype;return P.prototype=b,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",p]].forEach(function(E){b[E[1]]=function(C){return this.$g(C,E[0],E[1])}}),P.extend=function(E,C){return E.$i||(E(C,B,P),E.$i=!0),P},P.locale=L,P.isDayjs=R,P.unix=function(E){return P(1e3*E)},P.en=T[w],P.Ls=T,P.p={},P})})(Zfe);var oRe=Zfe.exports;const Ka=no(oRe);class DC extends hi{constructor(){super(...arguments),this.templates={},this._renderedTemplates={}}setBindingSyntax(e,t){this._startExpression=e,this._endExpression=t;const r=this.escapeRegex(this._startExpression),n=this.escapeRegex(this._endExpression);this._expression=new RegExp(`${r}\\s*([$\\w\\.,'"\\s()\\[\\]]+)\\s*${n}`,"g")}hasTemplate(e){return this.templates&&!!this.templates[e]}renderTemplate(e,t,r){if(!this.hasTemplate(e))return null;r=r||e;const n=ae` <slot name=${r}></slot> `,s={[e]:{...t}};if(this._renderedTemplates.hasOwnProperty(r)){const{slot:a}=this._renderedTemplates[r];this.contains(a)&&this.removeChild(a)}const o=document.createElement("div");return o.slot=r,o.dataset.generated="template",this._renderTemplate(o,this.templates[e],s),this.appendChild(o),this._renderedTemplates[r]={context:s,slot:o},n}getTemplates(){const e={};for(let t=0;t<this.children.length;t++){const r=this.children[t];if(r.nodeName==="RENDER-TEMPLATE"){const n=r;n.dataset.type?e[n.dataset.type]=n:e.default=n,n.templateOrder=t}}return e}_renderTemplate(e,t,r){let n;if(t&&t.childNodes.length){const s=t.cloneNode(!0);n=this.renderNode(s,e,r)}n&&e.appendChild(n)}expandExpressionsAsString(e,t){return e.replace(this.expression,(r,n)=>{const s=this.evalInContext(n||this.trimExpression(r),t);return s?typeof s=="object"?JSON.stringify(s):s.toString():""})}get expression(){return this._expression||this.setBindingSyntax("{{","}}"),this._expression}escapeRegex(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}evalInContext(e,t){t={...t};const r=new Function("with(this) { return "+e+";}");let n;try{n=r.call(t)}catch{}return n}trimExpression(e){return e=e.trim(),e.startsWith(this._startExpression)&&e.endsWith(this._endExpression)&&(e=e.substr(this._startExpression.length,e.length-this._startExpression.length-this._endExpression.length),e=e.trim()),e}renderNode(e,t,r){if(e.nodeName==="#text")return e.textContent=this.expandExpressionsAsString(e.textContent,r),e;if(e.nodeName==="TEMPLATE")return e.$parentTemplateContext=r,e;for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes[n];this.renderNode(s,t,r)}return e}firstUpdated(){this.templates=this.getTemplates()}}const FC=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
details {
  width: 100%;
}
`,Vf=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,Nb=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,NC=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,$C=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`,BC=`
* {
  font-family: Roboto, sans-serif;
}

${Vf}
${Nb}
${NC}
${$C}

ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  position: absolute;
  right: 8px;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
}
[data-type=filter] .title,
details summary {
  text-transform: capitalize;
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid #0004;
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul li {
  padding: 5px 10px;
}
li.highlighted {
  background: #00417011;
}
section {
  position: relative;
}
button#filter-reset {
  position: absolute;
  top: 4px;
  right: 0;
}
.scroll {
  max-height: calc(100% - 30px);
  overflow-x: hidden;
  overflow-y: auto;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range {
  display: flex;
  align-items: center;
  padding: .5rem 0;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before {
  margin-right: .5rem;
}
.range-after {
  margin-left: .5rem;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: 1px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 16px;
  width: 16px;
}
  `;var aRe=Object.defineProperty,lRe=Object.getOwnPropertyDescriptor,jC=(i,e,t,r)=>{for(var n=r>1?void 0:r?lRe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&aRe(e,t,n),n};let q_=class extends hi{handleDetailsToggle(i){this.dispatchEvent(new CustomEvent("details-toggled",{detail:i,bubbles:!0,composed:!0}))}_resetFilter(){this.querySelector("[slot='filter']").reset()}render(){return ae`
      <style>
        ${FC}
        ${!this.unstyled&&BC}
      </style>
      <details
        @toggle="${this.handleDetailsToggle}"
        class="details-filter"
        part="details-filter"
        ?open=${this.filterObject.expanded||It}
      >
        <summary>
          <span
            class="title"
            style="${!this.filterObject.title&&"text-transform: capitalize"}"
          >
            ${this.filterObject.title||this.filterObject.key||"Filter"}
            <slot name="reset-button"></slot>
          </span>
        </summary>
        <div class="scroll">
          <slot name="filter"></slot>
        </div>
      </details>
    `}};jC([Me({attribute:!1})],q_.prototype,"filterObject",2);jC([Me()],q_.prototype,"unstyled",2);q_=jC([Xr("eox-itemfilter-expandcontainer")],q_);const qf=i=>{if(!i.dirty)return null;switch(i.type){case"multiselect":for(const t in i.state)i.state[t]=!1;break;case"range":i.state.min=i.min,i.state.max=i.max;break;case"select":for(const t in i.state)i.state[t]=!1;break;case"spatial":i.state.geometry=void 0;break;case"text":i.keys.forEach(t=>{i.state[t]=void 0});break}return delete i.stringifiedState,delete i.dirty,i},YE=Math.min,Gd=Math.max,H_=Math.round,w0=Math.floor,vc=i=>({x:i,y:i});function Kfe(i){return i.split("-")[0]}function cRe(i){return i.split("-")[1]}function hRe(i){return i==="x"?"y":"x"}function uRe(i){return i==="y"?"height":"width"}function Jfe(i){return["top","bottom"].includes(Kfe(i))?"y":"x"}function dRe(i){return hRe(Jfe(i))}function Qfe(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}function _ae(i,e,t){let{reference:r,floating:n}=i;const s=Jfe(e),o=dRe(e),a=uRe(o),l=Kfe(e),c=s==="y",h=r.x+r.width/2-n.width/2,u=r.y+r.height/2-n.height/2,d=r[a]/2-n[a]/2;let f;switch(l){case"top":f={x:h,y:r.y-n.height};break;case"bottom":f={x:h,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:u};break;case"left":f={x:r.x-n.width,y:u};break;default:f={x:r.x,y:r.y}}switch(cRe(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const fRe=async(i,e,t)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:i,floating:e,strategy:n}),{x:h,y:u}=_ae(c,r,l),d=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:y}=a[g],{x:_,y:v,data:x,reset:w}=await y({x:h,y:u,initialPlacement:r,placement:d,strategy:n,middlewareData:f,rects:c,platform:o,elements:{reference:i,floating:e}});h=_??h,u=v??u,f={...f,[m]:{...f[m],...x}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:n}):w.rects),{x:h,y:u}=_ae(c,d,l)),g=-1)}return{x:h,y:u,placement:d,strategy:n,middlewareData:f}};function bc(i){return epe(i)?(i.nodeName||"").toLowerCase():"#document"}function Ls(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function vl(i){var e;return(e=(epe(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function epe(i){return i instanceof Node||i instanceof Ls(i).Node}function hl(i){return i instanceof Element||i instanceof Ls(i).Element}function ma(i){return i instanceof HTMLElement||i instanceof Ls(i).HTMLElement}function vae(i){return typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Ls(i).ShadowRoot}function ey(i){const{overflow:e,overflowX:t,overflowY:r,display:n}=Qs(i);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(n)}function pRe(i){return["table","td","th"].includes(bc(i))}function zC(i){const e=GC(),t=Qs(i);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function gRe(i){let e=cf(i);for(;ma(e)&&!$b(e);){if(zC(e))return e;e=cf(e)}return null}function GC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $b(i){return["html","body","#document"].includes(bc(i))}function Qs(i){return Ls(i).getComputedStyle(i)}function Bb(i){return hl(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function cf(i){if(bc(i)==="html")return i;const e=i.assignedSlot||i.parentNode||vae(i)&&i.host||vl(i);return vae(e)?e.host:e}function tpe(i){const e=cf(i);return $b(e)?i.ownerDocument?i.ownerDocument.body:i.body:ma(e)&&ey(e)?e:tpe(e)}function sm(i,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=tpe(i),s=n===((r=i.ownerDocument)==null?void 0:r.body),o=Ls(n);return s?e.concat(o,o.visualViewport||[],ey(n)?n:[],o.frameElement&&t?sm(o.frameElement):[]):e.concat(n,sm(n,[],t))}function ipe(i){const e=Qs(i);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=ma(i),s=n?i.offsetWidth:t,o=n?i.offsetHeight:r,a=H_(t)!==s||H_(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function UC(i){return hl(i)?i:i.contextElement}function Ud(i){const e=UC(i);if(!ma(e))return vc(1);const t=e.getBoundingClientRect(),{width:r,height:n,$:s}=ipe(e);let o=(s?H_(t.width):t.width)/r,a=(s?H_(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const mRe=vc(0);function rpe(i){const e=Ls(i);return!GC()||!e.visualViewport?mRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yRe(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ls(i)?!1:e}function Zh(i,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=i.getBoundingClientRect(),s=UC(i);let o=vc(1);e&&(r?hl(r)&&(o=Ud(r)):o=Ud(i));const a=yRe(s,t,r)?rpe(s):vc(0);let l=(n.left+a.x)/o.x,c=(n.top+a.y)/o.y,h=n.width/o.x,u=n.height/o.y;if(s){const d=Ls(s),f=r&&hl(r)?Ls(r):r;let p=d,g=p.frameElement;for(;g&&r&&f!==p;){const m=Ud(g),y=g.getBoundingClientRect(),_=Qs(g),v=y.left+(g.clientLeft+parseFloat(_.paddingLeft))*m.x,x=y.top+(g.clientTop+parseFloat(_.paddingTop))*m.y;l*=m.x,c*=m.y,h*=m.x,u*=m.y,l+=v,c+=x,p=Ls(g),g=p.frameElement}}return Qfe({width:h,height:u,x:l,y:c})}const _Re=[":popover-open",":modal"];function npe(i){return _Re.some(e=>{try{return i.matches(e)}catch{return!1}})}function vRe(i){let{elements:e,rect:t,offsetParent:r,strategy:n}=i;const s=n==="fixed",o=vl(r),a=e?npe(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=vc(1);const h=vc(0),u=ma(r);if((u||!u&&!s)&&((bc(r)!=="body"||ey(o))&&(l=Bb(r)),ma(r))){const d=Zh(r);c=Ud(r),h.x=d.x+r.clientLeft,h.y=d.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+h.x,y:t.y*c.y-l.scrollTop*c.y+h.y}}function bRe(i){return Array.from(i.getClientRects())}function spe(i){return Zh(vl(i)).left+Bb(i).scrollLeft}function xRe(i){const e=vl(i),t=Bb(i),r=i.ownerDocument.body,n=Gd(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Gd(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+spe(i);const a=-t.scrollTop;return Qs(r).direction==="rtl"&&(o+=Gd(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}function wRe(i,e){const t=Ls(i),r=vl(i),n=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const c=GC();(!c||c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a,y:l}}function ERe(i,e){const t=Zh(i,!0,e==="fixed"),r=t.top+i.clientTop,n=t.left+i.clientLeft,s=ma(i)?Ud(i):vc(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function bae(i,e,t){let r;if(e==="viewport")r=wRe(i,t);else if(e==="document")r=xRe(vl(i));else if(hl(e))r=ERe(e,t);else{const n=rpe(i);r={...e,x:e.x-n.x,y:e.y-n.y}}return Qfe(r)}function ope(i,e){const t=cf(i);return t===e||!hl(t)||$b(t)?!1:Qs(t).position==="fixed"||ope(t,e)}function SRe(i,e){const t=e.get(i);if(t)return t;let r=sm(i,[],!1).filter(a=>hl(a)&&bc(a)!=="body"),n=null;const s=Qs(i).position==="fixed";let o=s?cf(i):i;for(;hl(o)&&!$b(o);){const a=Qs(o),l=zC(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||ey(o)&&!l&&ope(i,o))?r=r.filter(h=>h!==o):n=a,o=cf(o)}return e.set(i,r),r}function CRe(i){let{element:e,boundary:t,rootBoundary:r,strategy:n}=i;const o=[...t==="clippingAncestors"?SRe(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,h)=>{const u=bae(e,h,n);return c.top=Gd(u.top,c.top),c.right=YE(u.right,c.right),c.bottom=YE(u.bottom,c.bottom),c.left=Gd(u.left,c.left),c},bae(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function TRe(i){const{width:e,height:t}=ipe(i);return{width:e,height:t}}function ARe(i,e,t){const r=ma(e),n=vl(e),s=t==="fixed",o=Zh(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=vc(0);if(r||!r&&!s)if((bc(e)!=="body"||ey(n))&&(a=Bb(e)),r){const u=Zh(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else n&&(l.x=spe(n));const c=o.left+a.scrollLeft-l.x,h=o.top+a.scrollTop-l.y;return{x:c,y:h,width:o.width,height:o.height}}function xae(i,e){return!ma(i)||Qs(i).position==="fixed"?null:e?e(i):i.offsetParent}function ape(i,e){const t=Ls(i);if(!ma(i)||npe(i))return t;let r=xae(i,e);for(;r&&pRe(r)&&Qs(r).position==="static";)r=xae(r,e);return r&&(bc(r)==="html"||bc(r)==="body"&&Qs(r).position==="static"&&!zC(r))?t:r||gRe(i)||t}const MRe=async function(i){const e=this.getOffsetParent||ape,t=this.getDimensions;return{reference:ARe(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,...await t(i.floating)}}};function RRe(i){return Qs(i).direction==="rtl"}const LRe={convertOffsetParentRelativeRectToViewportRelativeRect:vRe,getDocumentElement:vl,getClippingRect:CRe,getOffsetParent:ape,getElementRects:MRe,getClientRects:bRe,getDimensions:TRe,getScale:Ud,isElement:hl,isRTL:RRe};function IRe(i,e){let t=null,r;const n=vl(i);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:h,width:u,height:d}=i.getBoundingClientRect();if(a||e(),!u||!d)return;const f=w0(h),p=w0(n.clientWidth-(c+u)),g=w0(n.clientHeight-(h+d)),m=w0(c),_={rootMargin:-f+"px "+-p+"px "+-g+"px "+-m+"px",threshold:Gd(0,YE(1,l))||1};let v=!0;function x(w){const T=w[0].intersectionRatio;if(T!==l){if(!v)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}v=!1}try{t=new IntersectionObserver(x,{..._,root:n.ownerDocument})}catch{t=new IntersectionObserver(x,_)}t.observe(i)}return o(!0),s}function PRe(i,e,t,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=UC(i),h=n||s?[...c?sm(c):[],...sm(e)]:[];h.forEach(y=>{n&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const u=c&&a?IRe(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(y=>{let[_]=y;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,g=l?Zh(i):null;l&&m();function m(){const y=Zh(i);g&&(y.x!==g.x||y.y!==g.y||y.width!==g.width||y.height!==g.height)&&t(),g=y,p=requestAnimationFrame(m)}return t(),()=>{var y;h.forEach(_=>{n&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),u==null||u(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const kRe=(i,e,t)=>{const r=new Map,n={platform:LRe,...t},s={...n.platform,_c:r};return fRe(i,e,{...n,platform:s})};var ORe=Object.defineProperty,DRe=Object.getOwnPropertyDescriptor,jb=(i,e,t,r)=>{for(var n=r>1?void 0:r?DRe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&ORe(e,t,n),n};let om=class extends hi{constructor(){super(...arguments),this.open=!1,this.parent=null,this.unstyled=!1,this._clickEventListener=()=>{this.open=!1},this._keyboardEventListener=i=>{const{code:e}=i;["Escape"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){this.clientHeight}_overlayCleanup(){}connectedCallback(){super.connectedCallback(),this.unstyled||setTimeout(()=>{const i=this.parent||this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0],e=this.renderRoot.querySelector("#dropdown"),t=()=>{e.classList.contains("open")&&kRe(i,e,{strategy:"fixed"}).then(({x:r,y:n})=>{Object.assign(e.style,{left:`${r}px`,top:`${n}px`,width:`${i.getBoundingClientRect().width}px`})})};this._overlayCleanup=PRe(i,e,t)})}disconnectedCallback(){super.disconnectedCallback(),this._overlayCleanup(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickEventListener)}render(){return ae`
      <style>
        #dropdown {
          display: none;
        }
        #dropdown.open {
          display: block;
        }
        ${this.unstyled?It:ae`
              eox-dropdown { height: 100%;} #dropdown { position: fixed; top:
              0px; left: 0; width: 100%; margin: 0; padding: 0; background:
              white; border-bottom-left-radius: 4px; border-bottom-right-radius:
              4px; box-shadow: 0 4px 4px #0007; cursor: default; max-height:
              200px; overflow-y: auto; z-index: 99;}
            `}
      </style>
      <slot name="trigger"></slot>
      <div id="dropdown">
        <slot name="content"></slot>
      </div>
    `}updated(i){if(i.has("open")){const e=this.renderRoot.querySelector("#dropdown");this.open?e.classList.add("open"):e.classList.remove("open"),this.requestUpdate()}}firstUpdated(){window.addEventListener("click",this._clickEventListener),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0].addEventListener("focus",()=>{this.open=!0})}};jb([Me({type:Boolean})],om.prototype,"open",2);jb([Me()],om.prototype,"parent",2);jb([Me({type:Boolean})],om.prototype,"unstyled",2);om=jb([Xr("eox-dropdown")],om);var FRe=Object.defineProperty,NRe=Object.getOwnPropertyDescriptor,zb=(i,e,t,r)=>{for(var n=r>1?void 0:r?NRe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&FRe(e,t,n),n};let am=class extends hi{constructor(){super(...arguments),this.items=[],this.titleProperty="title",this.unstyled=!1,this._keyboardEventListener=i=>{const{code:e}=i;this.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(e)||(e==="Space"&&i.preventDefault(),["Escape","Space","Enter"].includes(e)||i.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(e)&&this._handleKeyboard(e,i.target.value??""))}}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}_handleKeyboard(i,e){const t=this.renderRoot.querySelector(".chip.highlighted");if((i==="Escape"||e)&&t&&t.classList.remove("highlighted"),i==="Backspace"&&!e){if(this.items.length){t&&this.items.splice(Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(t),1);const r=this.renderRoot.querySelectorAll(".chip")[this.renderRoot.querySelectorAll(".chip").length-1];r.classList.contains("highlighted")||r.classList.add("highlighted"),this.requestUpdate()}this._dispatchEvent()}if((i==="ArrowLeft"||i==="ArrowRight")&&!e){if(this.renderRoot.querySelectorAll(".chip").length<1)return;let r=0;const n=this.renderRoot.querySelector(".chip.highlighted");n&&(r=Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(n),n.classList.remove("highlighted")),r=r+(i==="ArrowLeft"?-1:1),i==="ArrowLeft"&&r<0&&(r=this.renderRoot.querySelectorAll(".chip").length-1),i==="ArrowRight"&&r>this.renderRoot.querySelectorAll(".chip").length-1&&(r=0),Array.from(this.renderRoot.querySelectorAll(".chip"))[r].classList.add("highlighted")}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}render(){return ae`
      <style>
        .chip.highlighted {
          background: lightgrey;
        }
        .chip-title {
          pointer-events: none;
        }
        ${this.unstyled?It:ae`
              .chip-container { display: flex; flex: 0; } .chip { display: flex;
              align-items: center; background: #00417022; border-radius: 4px;
              margin-right: 4px; padding: 5px 10px; font-size: small; cursor:
              default; white-space: nowrap; } .chip.highlighted { background:
              #004170; color: white; } .chip-close { cursor: pointer;
              margin-left: 4px; }
            `}
      </style>
      <span class="chip-container">
        ${Qn(this.items,i=>ae`
            <span
              class="chip"
              @click=${e=>{this.renderRoot.querySelectorAll(".chip").forEach(t=>{t.classList.remove("highlighted")}),e.target.classList.add("highlighted"),this.requestUpdate()}}
            >
              <span class="chip-title"
                >${i[this.titleProperty]}</span
              >
              ${bt(i._inProgress,()=>i.stringifiedState?"":ae` ... `)}
              ${bt(i.stringifiedState,()=>ae`: ${i.stringifiedState}`)}
              <span
                class="chip-close"
                @click=${e=>{e.stopPropagation(),this.items.splice(this.items.indexOf(i),1),this._dispatchEvent(),this.requestUpdate()}}
                ></span
              >
            </span>
          `)}
      </span>
    `}};zb([Me({type:Array})],am.prototype,"items",2);zb([Me()],am.prototype,"titleProperty",2);zb([Me({type:Boolean})],am.prototype,"unstyled",2);am=zb([Xr("eox-itemfilter-chips")],am);var $Re=Object.defineProperty,BRe=Object.getOwnPropertyDescriptor,Sa=(i,e,t,r)=>{for(var n=r>1?void 0:r?BRe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&$Re(e,t,n),n};let ko=class extends hi{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.itemTitleProperty=this.titleProperty,this.multiple=!1,this.unstyled=!1,this.multiStep=!1,this.inputText="",this.selectedItems=[],this._keyboardEventListener=i=>{const{code:e}=i;["ArrowUp","ArrowDown","Escape","Backspace"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){var e,t,r,n;if(this.clientHeight!==0){if(i==="Escape"){if(this.selectedItems.length<1||this.multiple){this.renderRoot.querySelector("input").value!==""?this.renderRoot.querySelector("input").value="":this.renderRoot.querySelector("eox-dropdown").open=!1;return}this.multiple||(this.renderRoot.querySelector("input").value!==this.selectedItems[0][this.titleProperty]?this.renderRoot.querySelector("input").value=this.selectedItems[0][this.titleProperty]:this.renderRoot.querySelector("eox-dropdown").open=!1);return}(i==="ArrowDown"||i==="ArrowUp")&&(this.renderRoot.querySelector("eox-dropdown").open=!0,(e=this.parentElement)!=null&&e.inline&&this.renderRoot.querySelector("eox-selectionlist")._handleKeyboard(i)),this.renderRoot.querySelector("input").select(),(t=this.parentElement)!=null&&t.inline&&(["ArrowUp","ArrowDown"].includes(i)||((n=(r=this.parentElement.parentElement)==null?void 0:r.parentElement)==null?void 0:n.querySelector("#inline-input")).focus())}}_handleHighlight(i){i[0]._inProgress||(this.renderRoot.querySelector("input").value=i[0][this.titleProperty]||"",this.renderRoot.querySelector("input").select())}_handleSelect(i){var e;i.length>0&&this.multiStep&&i.forEach(t=>{this.selectedItems.includes(t)||(t._inProgress=!0)}),this.selectedItems=i,i.length>0?this.multiple?(this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()):(this.renderRoot.querySelector("input").value=i[0][this.titleProperty],i[0]._inProgress||(this.renderRoot.querySelector("eox-dropdown").open=!1)):(this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus()),this._dispatchEvent(),this.requestUpdate(),(e=this.renderRoot.querySelector("eox-itemfilter-chips"))==null||e.requestUpdate()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("selectedItems")&&this._handleSelect(this.selectedItems)}render(){return ae`
      <style>
        :host,
        .container {
          display: flex;
        }
        #dropdown {
          display: none;
        }
        ${this.unstyled?It:ae`
              ${Vf} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; overflow-x: auto; } .container:hover
              { border: 1px solid #004170; } .input-container { display: flex;
              flex: 1; align-items: center; } input, input:focus { height: 100%;
              border: none; outline: none; } .button-container { display: flex;
              align-items: center; justify-content: center; position: absolute;
              right: 1px; top: 5px; height: calc(100% - 10px); width: 34px;
              background: white; } button.icon { color: #004170; height: 24px;
              font-size: large; width: unset; } .container::-webkit-scrollbar {
              height: 2px; } .container::-webkit-scrollbar-thumb { background:
              lightgrey; border-radius: 2px;} .hidden {height: 1px; padding: 0;
              border: none;} .hidden:hover {border: none} .hidden input {
              opacity: 0% }
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{i.stopPropagation(),this.renderRoot.querySelector("input[type=text]").focus()}}
      >
        ${bt(this.multiple,()=>ae`
            <eox-itemfilter-chips
              .items=${this.selectedItems}
              .titleProperty=${this.titleProperty}
              .unstyled=${this.unstyled}
            ></eox-itemfilter-chips>
          `)}
        <div class="input-container">
          <eox-dropdown
            .parent=${this.parentNode.parentNode}
            .unstyled=${this.unstyled}
          >
            <input
              slot="trigger"
              type="text"
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{this.inputText=i.target.value.toLowerCase()}}
            />
            ${bt(this.items.length>0,()=>ae`
                <eox-selectionlist
                  slot="content"
                  .filter=${this.inputText}
                  .idProperty=${this.idProperty}
                  .titleProperty=${this.titleProperty}
                  .items=${this.items.filter(i=>this.multiStep?!i.stringifiedState:!0).filter(i=>this.inputText?i[this.titleProperty].toLowerCase().includes(this.inputText.toLowerCase()):!0)}
                  .multiple=${this.multiStep?!0:this.multiple}
                  .disableKeyboardEvents=${this.multiStep}
                  .selectedItems=${this.multiStep?this.selectedItems.filter(i=>i.stringifiedState):this.selectedItems}
                  .unstyled=${this.unstyled}
                  @items-highlighted=${i=>{this._handleHighlight(i.detail)}}
                  @items-selected=${i=>{this._handleSelect(i.detail)}}
                >
                </eox-selectionlist>
              `)}
          </eox-dropdown>
        </div>
      </div>
      ${bt(this.selectedItems.length>0,()=>ae`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleSelect([])}}
            >
              
            </button>
          </div>
        `)}
    `}};Sa([Me()],ko.prototype,"idProperty",2);Sa([Me()],ko.prototype,"items",2);Sa([Me()],ko.prototype,"titleProperty",2);Sa([Me()],ko.prototype,"itemTitleProperty",2);Sa([Me({type:Boolean})],ko.prototype,"multiple",2);Sa([Me({type:Boolean})],ko.prototype,"unstyled",2);Sa([Me({type:Boolean})],ko.prototype,"multiStep",2);Sa([hr()],ko.prototype,"inputText",2);Sa([hr()],ko.prototype,"selectedItems",2);ko=Sa([Xr("eox-autocomplete")],ko);var jRe=Object.defineProperty,zRe=Object.getOwnPropertyDescriptor,Ca=(i,e,t,r)=>{for(var n=r>1?void 0:r?zRe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&jRe(e,t,n),n};let Oo=class extends hi{constructor(){super(...arguments),this.filter="",this.idProperty="id",this.items=[],this.titleProperty="title",this.multiple=!1,this.selectedItems=[],this.unstyled=!1,this.noShadow=!1,this._currentHighlight=null,this._keyboardEventListener=i=>{["ArrowDown","ArrowUp","Enter","Escape"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){if(this.clientHeight===0)return;const e=this.renderRoot.querySelector("li.highlighted");if(i==="Escape"){this._currentHighlight&&(this._currentHighlight=null);return}if(i==="Enter"){if(e){const s=this.items.find(o=>o[this.idProperty]===e.dataset.identifier);this._handleSelect(s),this.requestUpdate()}return}const t=this.renderRoot.querySelectorAll("li");let r=-1;e&&(delete e.dataset.highlighted,r=Array.from(t).indexOf(e)),i==="ArrowDown"&&(r++,r>t.length-1&&(r=0)),i==="ArrowUp"&&(r--,r<0&&(r=t.length-1));const n=Array.from(t)[r];n&&(this._currentHighlight=this.items.find(s=>s[this.idProperty]===n.dataset.identifier)),this.dispatchEvent(new CustomEvent("items-highlighted",{detail:[this._currentHighlight]}))}_handleSelect(i){if(i)if(this.multiple){const e=this.selectedItems.find(t=>t[this.idProperty]===i[this.idProperty]);e?this.selectedItems.splice(this.selectedItems.indexOf(e),1):this.selectedItems.push(i)}else this.selectedItems=[i];else this.selectedItems=[],this._currentHighlight=null;this._dispatchEvent()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("filter")&&(this.filter.length>0?setTimeout(()=>{const e=this.renderRoot.querySelectorAll("li")[0];e&&(this._currentHighlight=this.items.find(t=>t[this.idProperty]===e.dataset.identifier))}):this._currentHighlight=null)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return ae`
      <style>
        ${FC}
        :host {
          height: auto;
        }
        ul {
          width: 100%;
        }
        li.highlighted {
          background: lightgrey;
        }
        ${!this.unstyled&&BC}
      </style>
      <ul>
        ${OC(this.items.filter(i=>this.filter?i[this.titleProperty].toLowerCase().includes(this.filter.toLowerCase()):!0),i=>i[this.idProperty],i=>ae`
            <li
              class=${this._currentHighlight===i?"highlighted":It}
              data-identifier=${i[this.idProperty]}
              data-title=${i[this.titleProperty]}
              @mouseenter=${()=>{this._currentHighlight=i}}
              @mouseleave=${()=>{this._currentHighlight=null}}
            >
              <label>
                <input
                  type="${this.multiple?"checkbox":"radio"}"
                  .checked=${!!this.selectedItems.find(e=>e[this.idProperty]===i[this.idProperty])||It}
                  @change=${()=>this._handleSelect(i)}
                />
                <span class="title"
                  >${i[this.titleProperty]}</span
                >
              </label>
            </li>
          `)}
      </ul>
    `}};Ca([Me()],Oo.prototype,"filter",2);Ca([Me()],Oo.prototype,"idProperty",2);Ca([Me()],Oo.prototype,"items",2);Ca([Me()],Oo.prototype,"titleProperty",2);Ca([Me({type:Boolean})],Oo.prototype,"multiple",2);Ca([Me()],Oo.prototype,"selectedItems",2);Ca([Me({type:Boolean})],Oo.prototype,"unstyled",2);Ca([Me({type:Boolean})],Oo.prototype,"noShadow",2);Ca([hr()],Oo.prototype,"_currentHighlight",2);Oo=Ca([Xr("eox-selectionlist")],Oo);var GRe=Object.defineProperty,URe=Object.getOwnPropertyDescriptor,Gb=(i,e,t,r)=>{for(var n=r>1?void 0:r?URe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&GRe(e,t,n),n};let lm=class extends hi{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='checkbox']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),qf(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.map(r=>r.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t]).join(", "),((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return bt(this.filterObject,()=>ae`
        ${bt(this.inline||Object.keys(this.filterObject.state).length>10,()=>ae`
            <eox-autocomplete
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            >
            </eox-autocomplete>
          `,()=>ae`
            <eox-selectionlist
              .noShadow=${!this.inline}
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            ></eox-selectionlist>
          `)}
      `)}};Gb([Me()],lm.prototype,"filterObject",2);Gb([Me({type:Boolean})],lm.prototype,"inline",2);Gb([Me({type:Boolean})],lm.prototype,"unstyled",2);lm=Gb([Xr("eox-itemfilter-multiselect")],lm);var VRe="Expected a function",wae=NaN,qRe="[object Symbol]",HRe=/^\s+|\s+$/g,WRe=/^[-+]0x[0-9a-f]+$/i,YRe=/^0b[01]+$/i,XRe=/^0o[0-7]+$/i,ZRe=parseInt,KRe=typeof xr=="object"&&xr&&xr.Object===Object&&xr,JRe=typeof self=="object"&&self&&self.Object===Object&&self,QRe=KRe||JRe||Function("return this")(),eLe=Object.prototype,tLe=eLe.toString,iLe=Math.max,rLe=Math.min,fw=function(){return QRe.Date.now()};function nLe(i,e,t){var r,n,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof i!="function")throw new TypeError(VRe);e=Eae(e)||0,XE(t)&&(h=!!t.leading,u="maxWait"in t,s=u?iLe(Eae(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function f(T){var A=r,R=n;return r=n=void 0,c=T,o=i.apply(R,A),o}function p(T){return c=T,a=setTimeout(y,e),h?f(T):o}function g(T){var A=T-l,R=T-c,L=e-A;return u?rLe(L,s-R):L}function m(T){var A=T-l,R=T-c;return l===void 0||A>=e||A<0||u&&R>=s}function y(){var T=fw();if(m(T))return _(T);a=setTimeout(y,g(T))}function _(T){return a=void 0,d&&r?f(T):(r=n=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=n=a=void 0}function x(){return a===void 0?o:_(fw())}function w(){var T=fw(),A=m(T);if(r=arguments,n=this,l=T,A){if(a===void 0)return p(l);if(u)return a=setTimeout(y,e),f(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=v,w.flush=x,w}function XE(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function sLe(i){return!!i&&typeof i=="object"}function oLe(i){return typeof i=="symbol"||sLe(i)&&tLe.call(i)==qRe}function Eae(i){if(typeof i=="number")return i;if(oLe(i))return wae;if(XE(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=XE(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(HRe,"");var t=YRe.test(i);return t||XRe.test(i)?ZRe(i.slice(2),t?2:8):WRe.test(i)?wae:+i}var aLe=nLe;const Ub=no(aLe);var lLe=Object.defineProperty,cLe=Object.getOwnPropertyDescriptor,lpe=(i,e,t,r)=>{for(var n=r>1?void 0:r?cLe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&lLe(e,t,n),n};let ZE=class extends hi{constructor(){super(...arguments),this.inputHandler=i=>{const[e,t]=i.detail.values;(e!==this.filterObject.state.min||t!=this.filterObject.state.max)&&([this.filterObject.state.min,this.filterObject.state.max]=[e,t],this.filterObject.dirty=!0),this.filterObject.dirty&&(this.filterObject.stringifiedState=`${Ka(e)} - ${Ka(t)}`),this.dispatchEvent(new CustomEvent("filter")),this.requestUpdate()},this.debouncedInputHandler=Ub(this.inputHandler,0,{leading:!0})}reset(){qf(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}render(){return bt(this.filterObject,()=>ae`
        <div class="range-before">
          ${this.filterObject.format==="date"?Ka.unix(this.filterObject.state.min):this.filterObject.state.min}
        </div>
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min}"
          value2="${this.filterObject.state.max}"
          step="1"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        <div class="range-after">
          ${this.filterObject.format==="date"?Ka.unix(this.filterObject.state.max):this.filterObject.state.max}
        </div>
      `)}};lpe([Me()],ZE.prototype,"filterObject",2);ZE=lpe([Xr("eox-itemfilter-range")],ZE);var hLe=Object.defineProperty,uLe=Object.getOwnPropertyDescriptor,Vb=(i,e,t,r)=>{for(var n=r>1?void 0:r?uLe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&hLe(e,t,n),n};let cm=class extends hi{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='radio']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),qf(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.detail.map(r=>r.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t])[0],((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return bt(this.filterObject,()=>ae`
        ${bt(this.inline||Object.keys(this.filterObject.state).length>10,()=>ae`
            <eox-autocomplete
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            >
            </eox-autocomplete>
          `,()=>ae`
            <eox-selectionlist
              .noShadow=${!this.inline}
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            ></eox-selectionlist>
          `)}
      `)}};Vb([Me()],cm.prototype,"filterObject",2);Vb([Me({type:Boolean})],cm.prototype,"inline",2);Vb([Me({type:Boolean})],cm.prototype,"unstyled",2);cm=Vb([Xr("eox-itemfilter-select")],cm);var on=63710088e-1,VC={centimeters:on*100,centimetres:on*100,degrees:on/111325,feet:on*3.28084,inches:on*39.37,kilometers:on/1e3,kilometres:on/1e3,meters:on,metres:on,miles:on/1609.344,millimeters:on*1e3,millimetres:on*1e3,nauticalmiles:on/1852,radians:1,yards:on*1.0936},dLe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/on,yards:1.0936133},KE={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function eo(i,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=i,r}function fLe(i,e,t){switch(i){case"Point":return ea(e).geometry;case"LineString":return Co(e).geometry;case"Polygon":return qC(e).geometry;case"MultiPoint":return cpe(e).geometry;case"MultiLineString":return HC(e).geometry;case"MultiPolygon":return hpe(e).geometry;default:throw new Error(i+" is invalid")}}function ea(i,e,t){if(t===void 0&&(t={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!W_(i[0])||!W_(i[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:i};return eo(r,e,t)}function pLe(i,e,t){return t===void 0&&(t={}),xc(i.map(function(r){return ea(r,e)}),t)}function qC(i,e,t){t===void 0&&(t={});for(var r=0,n=i;r<n.length;r++){var s=n[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:i};return eo(a,e,t)}function gLe(i,e,t){return t===void 0&&(t={}),xc(i.map(function(r){return qC(r,e)}),t)}function Co(i,e,t){if(t===void 0&&(t={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:i};return eo(r,e,t)}function mLe(i,e,t){return t===void 0&&(t={}),xc(i.map(function(r){return Co(r,e)}),t)}function xc(i,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}function HC(i,e,t){t===void 0&&(t={});var r={type:"MultiLineString",coordinates:i};return eo(r,e,t)}function cpe(i,e,t){t===void 0&&(t={});var r={type:"MultiPoint",coordinates:i};return eo(r,e,t)}function hpe(i,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:i};return eo(r,e,t)}function yLe(i,e,t){t===void 0&&(t={});var r={type:"GeometryCollection",geometries:i};return eo(r,e,t)}function _Le(i,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(i*t)/t}function upe(i,e){e===void 0&&(e="kilometers");var t=VC[e];if(!t)throw new Error(e+" units is invalid");return i*t}function WC(i,e){e===void 0&&(e="kilometers");var t=VC[e];if(!t)throw new Error(e+" units is invalid");return i/t}function vLe(i,e){return dpe(WC(i,e))}function bLe(i){var e=i%360;return e<0&&(e+=360),e}function dpe(i){var e=i%(2*Math.PI);return e*180/Math.PI}function xLe(i){var e=i%360;return e*Math.PI/180}function wLe(i,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(i>=0))throw new Error("length must be a positive number");return upe(WC(i,e),t)}function ELe(i,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(i>=0))throw new Error("area must be a positive number");var r=KE[e];if(!r)throw new Error("invalid original units");var n=KE[t];if(!n)throw new Error("invalid final units");return i/r*n}function W_(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function YC(i){return!!i&&i.constructor===Object}function SLe(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(e){if(!W_(e))throw new Error("bbox must only contain numbers")})}function CLe(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")}const TLe=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:KE,bearingToAzimuth:bLe,convertArea:ELe,convertLength:wLe,degreesToRadians:xLe,earthRadius:on,factors:VC,feature:eo,featureCollection:xc,geometry:fLe,geometryCollection:yLe,isNumber:W_,isObject:YC,lengthToDegrees:vLe,lengthToRadians:WC,lineString:Co,lineStrings:mLe,multiLineString:HC,multiPoint:cpe,multiPolygon:hpe,point:ea,points:pLe,polygon:qC,polygons:gLe,radiansToDegrees:dpe,radiansToLength:upe,round:_Le,unitsFactors:dLe,validateBBox:SLe,validateId:CLe},Symbol.toStringTag,{value:"Module"}));function fpe(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hf(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function uf(i){return i.type==="Feature"?i.geometry:i}function Ks(i,e,t){if(t===void 0&&(t={}),!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=fpe(i),n=uf(e),s=n.type,o=e.bbox,a=n.coordinates;if(o&&ALe(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);for(var l=!1,c=0;c<a.length&&!l;c++)if(Sae(r,a[c][0],t.ignoreBoundary)){for(var h=!1,u=1;u<a[c].length&&!h;)Sae(r,a[c][u],!t.ignoreBoundary)&&(h=!0),u++;h||(l=!0)}return l}function Sae(i,e,t){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,s=e.length-1;n<e.length;s=n++){var o=e[n][0],a=e[n][1],l=e[s][0],c=e[s][1],h=i[1]*(o-l)+a*(l-i[0])+c*(i[0]-o)===0&&(o-i[0])*(l-i[0])<=0&&(a-i[1])*(c-i[1])<=0;if(h)return!t;var u=a>i[1]!=c>i[1]&&i[0]<(l-o)*(i[1]-a)/(c-a)+o;u&&(r=!r)}return r}function ALe(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}function Hf(i,e,t){if(i!==null)for(var r,n,s,o,a,l,c,h=0,u=0,d,f=i.type,p=f==="FeatureCollection",g=f==="Feature",m=p?i.features.length:1,y=0;y<m;y++){c=p?i.features[y].geometry:g?i.geometry:i,d=c?c.type==="GeometryCollection":!1,a=d?c.geometries.length:1;for(var _=0;_<a;_++){var v=0,x=0;if(o=d?c.geometries[_]:c,o!==null){l=o.coordinates;var w=o.type;switch(h=t&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(e(l,u,y,v,x)===!1)return!1;u++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],u,y,v,x)===!1)return!1;u++,w==="MultiPoint"&&v++}w==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-h;n++){if(e(l[r][n],u,y,v,x)===!1)return!1;u++}w==="MultiLineString"&&v++,w==="Polygon"&&x++}w==="Polygon"&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(x=0,n=0;n<l[r].length;n++){for(s=0;s<l[r][n].length-h;s++){if(e(l[r][n][s],u,y,v,x)===!1)return!1;u++}x++}v++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(Hf(o.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function MLe(i,e,t,r){var n=t;return Hf(i,function(s,o,a,l,c){o===0&&t===void 0?n=s:n=e(n,s,o,a,l,c)},r),n}function ppe(i,e){var t;switch(i.type){case"FeatureCollection":for(t=0;t<i.features.length&&e(i.features[t].properties,t)!==!1;t++);break;case"Feature":e(i.properties,0);break}}function RLe(i,e,t){var r=t;return ppe(i,function(n,s){s===0&&t===void 0?r=n:r=e(r,n,s)}),r}function Y_(i,e){if(i.type==="Feature")e(i,0);else if(i.type==="FeatureCollection")for(var t=0;t<i.features.length&&e(i.features[t],t)!==!1;t++);}function LLe(i,e,t){var r=t;return Y_(i,function(n,s){s===0&&t===void 0?r=n:r=e(r,n,s)}),r}function ILe(i){var e=[];return Hf(i,function(t){e.push(t)}),e}function XC(i,e){var t,r,n,s,o,a,l,c,h,u,d=0,f=i.type==="FeatureCollection",p=i.type==="Feature",g=f?i.features.length:1;for(t=0;t<g;t++){for(a=f?i.features[t].geometry:p?i.geometry:i,c=f?i.features[t].properties:p?i.properties:{},h=f?i.features[t].bbox:p?i.bbox:void 0,u=f?i.features[t].id:p?i.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,n=0;n<o;n++){if(s=l?a.geometries[n]:a,s===null){if(e(null,d,c,h,u)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,d,c,h,u)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],d,c,h,u)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function PLe(i,e,t){var r=t;return XC(i,function(n,s,o,a,l){s===0&&t===void 0?r=n:r=e(r,n,s,o,a,l)}),r}function ul(i,e){XC(i,function(t,r,n,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(eo(t,n,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var h=t.coordinates[c],u={type:l,coordinates:h};if(e(eo(u,n),r,c)===!1)return!1}})}function kLe(i,e,t){var r=t;return ul(i,function(n,s,o){s===0&&o===0&&t===void 0?r=n:r=e(r,n,s,o)}),r}function gpe(i,e){ul(i,function(t,r,n){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(Hf(t,function(u,d,f,p,g){if(a===void 0||r>l||p>c||g>h){a=u,l=r,c=p,h=g,s=0;return}var m=Co([a,u],t.properties);if(e(m,r,n,g,s)===!1)return!1;s++,a=u})===!1)return!1}}})}function OLe(i,e,t){var r=t,n=!1;return gpe(i,function(s,o,a,l,c){n===!1&&t===void 0?r=s:r=e(r,s,o,a,l,c),n=!0}),r}function mpe(i,e){if(!i)throw new Error("geojson is required");ul(i,function(t,r,n){if(t.geometry!==null){var s=t.geometry.type,o=t.geometry.coordinates;switch(s){case"LineString":if(e(t,r,n,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(e(Co(o[a],t.properties),r,n,a)===!1)return!1;break}}})}function DLe(i,e,t){var r=t;return mpe(i,function(n,s,o,a){s===0&&t===void 0?r=n:r=e(r,n,s,o,a)}),r}function FLe(i,e){if(e=e||{},!YC(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,n=e.geometryIndex||0,s=e.segmentIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),Co([l[s],l[s+1]],o,e);case"Polygon":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s-1),Co([l[n][s],l[n][s+1]],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),Co([l[r][s],l[r][s+1]],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),n<0&&(n=l[r].length+n),s<0&&(s=l[r][n].length-s-1),Co([l[r][n][s],l[r][n][s+1]],o,e)}throw new Error("geojson is invalid")}function NLe(i,e){if(e=e||{},!YC(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,n=e.geometryIndex||0,s=e.coordIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":return ea(l,o,e);case"MultiPoint":return r<0&&(r=l.length+r),ea(l[r],o,e);case"LineString":return s<0&&(s=l.length+s),ea(l[s],o,e);case"Polygon":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s),ea(l[n][s],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),ea(l[r][s],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),n<0&&(n=l[r].length+n),s<0&&(s=l[r][n].length-s),ea(l[r][n][s],o,e)}throw new Error("geojson is invalid")}const $Le=Object.freeze(Object.defineProperty({__proto__:null,coordAll:ILe,coordEach:Hf,coordReduce:MLe,featureEach:Y_,featureReduce:LLe,findPoint:NLe,findSegment:FLe,flattenEach:ul,flattenReduce:kLe,geomEach:XC,geomReduce:PLe,lineEach:mpe,lineReduce:DLe,propEach:ppe,propReduce:RLe,segmentEach:gpe,segmentReduce:OLe},Symbol.toStringTag,{value:"Module"}));function Cae(i){if(!i)throw new Error("geojson is required");var e=[];return ul(i,function(t){BLe(t,e)}),xc(e)}function BLe(i,e){var t=[],r=i.geometry;if(r!==null){switch(r.type){case"Polygon":t=hf(r);break;case"LineString":t=[hf(r)]}t.forEach(function(n){var s=jLe(n,i.properties);s.forEach(function(o){o.id=e.length,e.push(o)})})}}function jLe(i,e){var t=[];return i.reduce(function(r,n){var s=Co([r,n],e);return s.bbox=zLe(r,n),t.push(s),n}),t}function zLe(i,e){var t=i[0],r=i[1],n=e[0],s=e[1],o=t<n?t:n,a=r<s?r:s,l=t>n?t:n,c=r>s?r:s;return[o,a,l,c]}var ZC={exports:{}};function GLe(i,e,t,r,n){ype(i,e,t||0,r||i.length-1,n||ULe)}function ype(i,e,t,r,n){for(;r>t;){if(r-t>600){var s=r-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),h=Math.max(t,Math.floor(e-o*l/s+c)),u=Math.min(r,Math.floor(e+(s-o)*l/s+c));ype(i,e,h,u,n)}var d=i[e],f=t,p=r;for(Hp(i,t,e),n(i[r],d)>0&&Hp(i,t,r);f<p;){for(Hp(i,f,p),f++,p--;n(i[f],d)<0;)f++;for(;n(i[p],d)>0;)p--}n(i[t],d)===0?Hp(i,t,p):(p++,Hp(i,p,r)),p<=e&&(t=p+1),e<=p&&(r=p-1)}}function Hp(i,e,t){var r=i[e];i[e]=i[t],i[t]=r}function ULe(i,e){return i<e?-1:i>e?1:0}let qb=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!S0(e,t))return r;const n=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?n(a):a;S0(e,l)&&(t.leaf?r.push(a):gw(e,l)?this._all(a,r):s.push(a))}t=s.pop()}return r}collides(e){let t=this.data;if(!S0(e,t))return!1;const r=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],o=t.leaf?this.toBBox(s):s;if(S0(e,o)){if(t.leaf||gw(e,o))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=fd([]),this}remove(e,t){if(!e)return this;let r=this.data;const n=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const h=VLe(e,r.children,t);if(h!==-1)return r.children.splice(h,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&gw(r,n)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,n){const s=r-t+1;let o=this._maxEntries,a;if(s<=o)return a=fd(e.slice(t,r+1)),Ku(a,this.toBBox),a;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),a=fd([]),a.leaf=!1,a.height=n;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Tae(e,t,r,c,this.compareMinX);for(let h=t;h<=r;h+=c){const u=Math.min(h+c-1,r);Tae(e,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(e,d,f,n-1))}}return Ku(a,this.toBBox),a}_chooseSubtree(e,t,r,n){for(;n.push(t),!(t.leaf||n.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=pw(c),u=WLe(e,c)-h;u<o?(o=u,s=h<s?h:s,a=c):u===o&&h<s&&(s=h,a=c)}t=a||t.children[0]}return t}_insert(e,t,r){const n=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),hg(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const r=e[t],n=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,n);const o=this._chooseSplitIndex(r,s,n),a=fd(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,Ku(r,this.toBBox),Ku(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=fd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ku(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let n,s=1/0,o=1/0;for(let a=t;a<=r-t;a++){const l=cg(e,0,a,this.toBBox),c=cg(e,a,r,this.toBBox),h=YLe(l,c),u=pw(l)+pw(c);h<s?(s=h,n=a,o=u<o?u:o):h===s&&u<o&&(o=u,n=a)}return n||r-t}_chooseSplitAxis(e,t,r){const n=e.leaf?this.compareMinX:qLe,s=e.leaf?this.compareMinY:HLe,o=this._allDistMargin(e,t,r,n),a=this._allDistMargin(e,t,r,s);o<a&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);const s=this.toBBox,o=cg(e,0,t,s),a=cg(e,r-t,r,s);let l=E0(o)+E0(a);for(let c=t;c<r-t;c++){const h=e.children[c];hg(o,e.leaf?s(h):h),l+=E0(o)}for(let c=r-t-1;c>=t;c--){const h=e.children[c];hg(a,e.leaf?s(h):h),l+=E0(a)}return l}_adjustParentBBoxes(e,t,r){for(let n=r;n>=0;n--)hg(t[n],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Ku(e[t],this.toBBox)}};function VLe(i,e,t){if(!t)return e.indexOf(i);for(let r=0;r<e.length;r++)if(t(i,e[r]))return r;return-1}function Ku(i,e){cg(i,0,i.children.length,e,i)}function cg(i,e,t,r,n){n||(n=fd(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];hg(n,i.leaf?r(o):o)}return n}function hg(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function qLe(i,e){return i.minX-e.minX}function HLe(i,e){return i.minY-e.minY}function pw(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function E0(i){return i.maxX-i.minX+(i.maxY-i.minY)}function WLe(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function YLe(i,e){const t=Math.max(i.minX,e.minX),r=Math.max(i.minY,e.minY),n=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-r)}function gw(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function S0(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function fd(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Tae(i,e,t,r,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const o=e+Math.ceil((t-e)/r/2)*r;GLe(i,o,e,t,n),s.push(e,o,o,t)}}const XLe=Object.freeze(Object.defineProperty({__proto__:null,default:qb},Symbol.toStringTag,{value:"Module"})),ZLe=Df(XLe),KLe=Df(TLe),JLe=Df($Le);function Kh(i){var e=[1/0,1/0,-1/0,-1/0];return Hf(i,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Kh.default=Kh;const QLe=Object.freeze(Object.defineProperty({__proto__:null,default:Kh},Symbol.toStringTag,{value:"Module"})),eIe=Df(QLe);var Ho=ZLe,_pe=KLe,vpe=JLe,Ju=eIe.default,tIe=vpe.featureEach;vpe.coordEach;_pe.polygon;var Aae=_pe.featureCollection;function bpe(i){var e=new Ho(i);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Ju(t),Ho.prototype.insert.call(this,t)},e.load=function(t){var r=[];return Array.isArray(t)?t.forEach(function(n){if(n.type!=="Feature")throw new Error("invalid features");n.bbox=n.bbox?n.bbox:Ju(n),r.push(n)}):tIe(t,function(n){if(n.type!=="Feature")throw new Error("invalid features");n.bbox=n.bbox?n.bbox:Ju(n),r.push(n)}),Ho.prototype.load.call(this,r)},e.remove=function(t,r){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Ju(t),Ho.prototype.remove.call(this,t,r)},e.clear=function(){return Ho.prototype.clear.call(this)},e.search=function(t){var r=Ho.prototype.search.call(this,this.toBBox(t));return Aae(r)},e.collides=function(t){return Ho.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Ho.prototype.all.call(this);return Aae(t)},e.toJSON=function(){return Ho.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ho.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var r;if(t.bbox)r=t.bbox;else if(Array.isArray(t)&&t.length===4)r=t;else if(Array.isArray(t)&&t.length===6)r=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")r=Ju(t);else if(t.type==="FeatureCollection")r=Ju(t);else throw new Error("invalid geojson");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},e}ZC.exports=bpe;ZC.exports.default=bpe;var iIe=ZC.exports;const rIe=no(iIe);function KC(i,e){var t={},r=[];if(i.type==="LineString"&&(i=eo(i)),e.type==="LineString"&&(e=eo(e)),i.type==="Feature"&&e.type==="Feature"&&i.geometry!==null&&e.geometry!==null&&i.geometry.type==="LineString"&&e.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var n=Mae(i,e);return n&&r.push(n),xc(r)}var s=rIe();return s.load(Cae(e)),Y_(Cae(i),function(o){Y_(s.search(o),function(a){var l=Mae(o,a);if(l){var c=hf(l).join(",");t[c]||(t[c]=!0,r.push(l))}})}),xc(r)}function Mae(i,e){var t=hf(i),r=hf(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var n=t[0][0],s=t[0][1],o=t[1][0],a=t[1][1],l=r[0][0],c=r[0][1],h=r[1][0],u=r[1][1],d=(u-c)*(o-n)-(h-l)*(a-s),f=(h-l)*(s-c)-(u-c)*(n-l),p=(o-n)*(s-c)-(a-s)*(n-l);if(d===0)return null;var g=f/d,m=p/d;if(g>=0&&g<=1&&m>=0&&m<=1){var y=n+g*(o-n),_=s+g*(a-s);return ea([y,_])}return null}function JE(i,e){e===void 0&&(e={});var t=uf(i);switch(!e.properties&&i.type==="Feature"&&(e.properties=i.properties),t.type){case"Polygon":return nIe(t,e);case"MultiPolygon":return sIe(t,e);default:throw new Error("invalid poly")}}function nIe(i,e){e===void 0&&(e={});var t=uf(i),r=t.coordinates,n=e.properties?e.properties:i.type==="Feature"?i.properties:{};return xpe(r,n)}function sIe(i,e){e===void 0&&(e={});var t=uf(i),r=t.coordinates,n=e.properties?e.properties:i.type==="Feature"?i.properties:{},s=[];return r.forEach(function(o){s.push(xpe(o,n))}),xc(s)}function xpe(i,e){return i.length>1?HC(i,e):Co(i[0],e)}function oIe(i,e){var t=!0;return ul(i,function(r){ul(e,function(n){if(t===!1)return!1;t=aIe(r.geometry,n.geometry)})}),t}function aIe(i,e){switch(i.type){case"Point":switch(e.type){case"Point":return!uIe(i.coordinates,e.coordinates);case"LineString":return!Rae(e,i);case"Polygon":return!Ks(i,e)}break;case"LineString":switch(e.type){case"Point":return!Rae(i,e);case"LineString":return!lIe(i,e);case"Polygon":return!Lae(e,i)}break;case"Polygon":switch(e.type){case"Point":return!Ks(e,i);case"LineString":return!Lae(i,e);case"Polygon":return!cIe(e,i)}}return!1}function Rae(i,e){for(var t=0;t<i.coordinates.length-1;t++)if(hIe(i.coordinates[t],i.coordinates[t+1],e.coordinates))return!0;return!1}function lIe(i,e){var t=KC(i,e);return t.features.length>0}function Lae(i,e){for(var t=0,r=e.coordinates;t<r.length;t++){var n=r[t];if(Ks(n,i))return!0}var s=KC(e,JE(i));return s.features.length>0}function cIe(i,e){for(var t=0,r=i.coordinates[0];t<r.length;t++){var n=r[t];if(Ks(n,e))return!0}for(var s=0,o=e.coordinates[0];s<o.length;s++){var a=o[s];if(Ks(a,i))return!0}var l=KC(JE(i),JE(e));return l.features.length>0}function hIe(i,e,t){var r=t[0]-i[0],n=t[1]-i[1],s=e[0]-i[0],o=e[1]-i[1],a=r*o-n*s;return a!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?i[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=i[0]:o>0?i[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=i[1]}function uIe(i,e){return i[0]===e[0]&&i[1]===e[1]}function dIe(i,e){var t=!1;return ul(i,function(r){ul(e,function(n){if(t===!0)return!0;t=!oIe(r.geometry,n.geometry)})}),t}function X_(i,e,t){t===void 0&&(t={});for(var r=fpe(i),n=hf(e),s=0;s<n.length-1;s++){var o=!1;if(t.ignoreEndVertices&&(s===0&&(o="start"),s===n.length-2&&(o="end"),s===0&&s+1===n.length-1&&(o="both")),fIe(n[s],n[s+1],r,o,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}function fIe(i,e,t,r,n){var s=t[0],o=t[1],a=i[0],l=i[1],c=e[0],h=e[1],u=t[0]-a,d=t[1]-l,f=c-a,p=h-l,g=u*p-d*f;if(n!==null){if(Math.abs(g)>n)return!1}else if(g!==0)return!1;if(r){if(r==="start")return Math.abs(f)>=Math.abs(p)?f>0?a<s&&s<=c:c<=s&&s<a:p>0?l<o&&o<=h:h<=o&&o<l;if(r==="end")return Math.abs(f)>=Math.abs(p)?f>0?a<=s&&s<c:c<s&&s<=a:p>0?l<=o&&o<h:h<o&&o<=l;if(r==="both")return Math.abs(f)>=Math.abs(p)?f>0?a<s&&s<c:c<s&&s<a:p>0?l<o&&o<h:h<o&&o<l}else return Math.abs(f)>=Math.abs(p)?f>0?a<=s&&s<=c:c<=s&&s<=a:p>0?l<=o&&o<=h:h<=o&&o<=l;return!1}function pIe(i,e){var t=uf(i),r=uf(e),n=t.type,s=r.type;switch(n){case"Point":switch(s){case"MultiPoint":return gIe(t,r);case"LineString":return X_(t,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Ks(t,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return mIe(t,r);case"LineString":return yIe(t,r);case"Polygon":case"MultiPolygon":return _Ie(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return vIe(t,r);case"Polygon":case"MultiPolygon":return bIe(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return xIe(t,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function gIe(i,e){var t,r=!1;for(t=0;t<e.coordinates.length;t++)if(Epe(e.coordinates[t],i.coordinates)){r=!0;break}return r}function mIe(i,e){for(var t=0;t<i.coordinates.length;t++){for(var r=!1,n=0;n<e.coordinates.length;n++)Epe(i.coordinates[t],e.coordinates[n])&&(r=!0);if(!r)return!1}return!0}function yIe(i,e){for(var t=!1,r=0;r<i.coordinates.length;r++){if(!X_(i.coordinates[r],e))return!1;t||(t=X_(i.coordinates[r],e,{ignoreEndVertices:!0}))}return t}function _Ie(i,e){for(var t=!0,r=!1,n=0;n<i.coordinates.length;n++){if(r=Ks(i.coordinates[1],e),!r){t=!1;break}r=Ks(i.coordinates[1],e,{ignoreBoundary:!0})}return t&&r}function vIe(i,e){for(var t=0;t<i.coordinates.length;t++)if(!X_(i.coordinates[t],e))return!1;return!0}function bIe(i,e){var t=Kh(e),r=Kh(i);if(!wpe(t,r))return!1;for(var n=!1,s=0;s<i.coordinates.length-1;s++){if(!Ks(i.coordinates[s],e))return!1;if(n||(n=Ks(i.coordinates[s],e,{ignoreBoundary:!0})),!n){var o=wIe(i.coordinates[s],i.coordinates[s+1]);n=Ks(o,e,{ignoreBoundary:!0})}}return n}function xIe(i,e){var t=Kh(i),r=Kh(e);if(!wpe(r,t))return!1;for(var n=0;n<i.coordinates[0].length;n++)if(!Ks(i.coordinates[0][n],e))return!1;return!0}function wpe(i,e){return!(i[0]>e[0]||i[2]<e[2]||i[1]>e[1]||i[3]<e[3])}function Epe(i,e){return i[0]===e[0]&&i[1]===e[1]}function wIe(i,e){return[(i[0]+e[0])/2,(i[1]+e[1])/2]}var EIe=Object.defineProperty,SIe=Object.getOwnPropertyDescriptor,ty=(i,e,t,r)=>{for(var n=r>1?void 0:r?SIe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&EIe(e,t,n),n};const CIe=(i,e)=>e?dIe(i,e):!0,TIe=(i,e)=>e?pIe(i,e):!0;let QE=class extends hi{reset(){qf(this.filterObject),this.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),this.requestUpdate()}createRenderRoot(){return this}render(){return bt(this.filterObject,()=>{var i;return ae`
      <form style="display: inline">
      ${Qn(["intersects","within"],e=>ae`
          <label>
            <input
              type="radio"
              name="mode"
              .checked="${this.filterObject.state.mode===e||It}
              "
              value="${e}"
              @click="${()=>{this.filterObject.state.mode=e;const t=new CustomEvent("filter",{detail:{[this.filterObject.key]:{}}});this.dispatchEvent(t)}}"
            />
            <small>${e} filter geometry</small>
          </label>
        `)}
      </form>
      <eox-itemfilter-spatial-filter
        exportparts="map: spatial-filter-map"
        .geometry=${(i=this.filterObject.state)==null?void 0:i.geometry}
        @filter="${e=>{this.filterObject.state.geometry=e.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
      ></eox-itemfilter-spatial>
    `})}};ty([Me()],QE.prototype,"filterObject",2);QE=ty([Xr("eox-itemfilter-spatial")],QE);let Z_=class extends hi{render(){return ae`<eox-map part="map" style="height: 400px"></eox-map>`}firstUpdated(){this.setup()}setup(){const i=[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...this.geometry&&{format:"GeoJSON"},...this.geometry&&{url:this.createFeatureUrl(this.geometry)}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://s2maps-tiles.eu/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}];this.eoxMap=this.renderRoot.querySelector("eox-map"),setTimeout(()=>{this.eoxMap.layers=i;const e=t=>{const r=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:t.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});this.dispatchEvent(r)};this.eoxMap.interactions.drawInteraction.on("drawend",t=>{e(t.feature),this.eoxMap.removeInteraction("drawInteraction")}),this.eoxMap.interactions.drawInteraction_modify.on("modifyend",t=>{e(t.features.getArray()[0])})},1e3)}createFeatureUrl(i){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:i}]}))}`}reset(){var e;const i=this.eoxMap.getLayerById("draw").getSource();((e=i.getFeatures())==null?void 0:e.length)>0&&(i.clear(),this.eoxMap.removeInteraction("drawInteraction_modify"),this.setup())}};ty([Me()],Z_.prototype,"geometry",2);ty([hr()],Z_.prototype,"eoxMap",2);Z_=ty([Xr("eox-itemfilter-spatial-filter")],Z_);var AIe=Object.defineProperty,MIe=Object.getOwnPropertyDescriptor,Spe=(i,e,t,r)=>{for(var n=r>1?void 0:r?MIe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&AIe(e,t,n),n};let eS=class extends hi{constructor(){super(...arguments),this.inputHandler=()=>{const i=this.renderRoot.querySelector("input[type='text']");this.filterObject.keys.forEach(e=>{this.filterObject.state[e]=i.value}),this.filterObject.dirty=!0,this.filterObject.stringifiedState=i.value,this.dispatchEvent(new CustomEvent("filter"))},this.debouncedInputHandler=Ub(this.inputHandler,500,{leading:!0})}reset(){const i=this.renderRoot.querySelector("input[type='text']");i.value="",qf(this.filterObject),this.filterObject.dirty=!1,this.requestUpdate()}createRenderRoot(){return this}render(){return bt(this.filterObject,()=>ae`
        <style>
          input {
            max-height: 100%;
          }
        </style>
        <input
          type="text"
          placeholder="Type something..."
          data-cy="search"
          part="input-search"
          value="${Object.values(this.filterObject.state)[0]}"
          @input="${this.debouncedInputHandler}"
          @click=${i=>{i.stopPropagation()}}
        />
      `)}};Spe([Me()],eS.prototype,"filterObject",2);eS=Spe([Xr("eox-itemfilter-text")],eS);var RIe=Object.defineProperty,LIe=Object.getOwnPropertyDescriptor,fu=(i,e,t,r)=>{for(var n=r>1?void 0:r?LIe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&RIe(e,t,n),n};let wc=class extends hi{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.unstyled=!1,this.inputText="",this.replaceInput=null,this._clickOutsideListener=()=>{this.items.forEach(i=>{delete i._inProgress}),this.requestUpdate()},this._keyboardEventListener=i=>{["Enter","Escape","Space"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){var s,o,a,l,c,h;if(this.clientHeight===0)return;const e=this.items.find(u=>u._inProgress),t=(e==null?void 0:e.type)==="text"&&(e==null?void 0:e.dirty),r=this.renderRoot.querySelector("#inline-input"),n=(h=(c=(l=(a=(o=(s=this.renderRoot)==null?void 0:s.querySelector("[data-filter]"))==null?void 0:o.querySelector("eox-autocomplete"))==null?void 0:a.renderRoot)==null?void 0:l.querySelector("eox-selectionlist"))==null?void 0:c.renderRoot)==null?void 0:h.querySelector("li.highlighted");if(i=="Enter"&&n&&r.selectionStart&&(n.querySelector("input[type=checkbox]").dispatchEvent(new Event("change")),r.selectionStart=0,r.value="",r.focus()),["Escape","Space"].includes(i)||i=="Enter"&&t){e&&(delete e._inProgress,this.requestUpdate(),this.inputText="",this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden");return}}_handleReset(i){i.forEach(e=>{qf(e),delete e._inProgress,delete e.stringifiedState}),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden"),this.requestUpdate(),this.dispatchEvent(new CustomEvent("filter"))}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),window.addEventListener("click",this._clickOutsideListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickOutsideListener)}render(){return ae`
      <style>
        :host,
        .container {
          display: flex;
        }
        ${this.unstyled?It:ae`
              ${Vf} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; transition: all 0.2s ease-in-out;
              overflow-x: auto; } .container:hover { border: 1px solid #004170;
              } .input-container { display: flex; flex: 1; align-items: center;
              } input, input:focus { height: 100%; border: none; outline: none;
              } .button-container { display: flex; align-items: center;
              justify-content: center; position: absolute; right: 1px; top: 5px;
              height: calc(100% - 10px); width: 34px; background: white; }
              button.icon { color: #004170; height: 24px; font-size: large;
              width: unset; } .container::-webkit-scrollbar { height: 2px; }
              .container::-webkit-scrollbar-thumb { background: lightgrey;
              border-radius: 2px; } .hidden {height: 0; padding: 0; border:
              none;} .hidden:hover {border: none}
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{var e;i.stopPropagation(),(e=this.renderRoot.querySelector("input[type=text]"))==null||e.focus()}}
      >
        <eox-itemfilter-chips
          .items=${this.items.filter(i=>i._inProgress||i.stringifiedState)}
          .titleProperty=${this.titleProperty}
          .unstyled=${this.unstyled}
          @items-selected=${i=>{this.items.forEach(e=>{i.detail.find(t=>t.id===e.id)||this._handleReset([e])})}}
          @click=${i=>{i.stopPropagation()}}
        ></eox-itemfilter-chips>
        <div class="input-container">
          <eox-dropdown .parent=${this} .unstyled=${this.unstyled}>
            <input
              id="inline-input"
              slot="trigger"
              type="text"
              placeholder="Type something..."
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{if(this.inputText=i.target.value.toLowerCase(),this.replaceInput){const e=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("input")||this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete").renderRoot.querySelector("input");e&&(e.value=this.inputText,e.dispatchEvent(new Event("input")))}}}
            />
            <div slot="content">
              ${bt(!this.items.find(i=>i._inProgress),()=>ae`
                  <eox-selectionlist
                    .filter=${this.inputText}
                    .idProperty=${this.idProperty}
                    .titleProperty=${this.titleProperty}
                    .items=${this.items.filter(i=>!i.stringifiedState)}
                    .multiple=${!1}
                    .selectedItems=${this.items.filter(i=>i.stringifiedState)}
                    .unstyled=${this.unstyled}
                    @click=${i=>{i.stopPropagation()}}
                    @items-highlighted=${()=>{}}
                    @items-selected=${i=>{const e=i.detail;e.length>0&&(e[e.length-1]._inProgress=!0,this.renderRoot.querySelector("input[slot=trigger]").value="",this.inputText="",this.requestUpdate());const t=this.items.find(r=>r._inProgress);(t&&t.type==="text"||t.type==="multiselect"||t.type==="select")&&(this.replaceInput=!0),this.replaceInput&&(setTimeout(()=>{if(t.type==="text")this.renderRoot.querySelector("[slot=content]").classList.add("hidden");else if(t.type==="multiselect"||t.type==="select"){const r=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete");r.renderRoot.querySelector("eox-dropdown").open=!0,r.renderRoot.querySelector(".container").classList.add("hidden")}}),this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus())}}
                  >
                  </eox-selectionlist>
                `)}
              ${bt(this.items.find(i=>i._inProgress),()=>zd`
            <eox-itemfilter-${na(this.items.find(i=>i._inProgress).type)}
              data-filter=${this.items.find(i=>i._inProgress).id}
              slot="dropdown"
              .filterObject=${this.items.find(i=>i._inProgress)}
              .unstyled=${this.unstyled}
              .inline=${!0}
              @filter=${()=>{this.dispatchEvent(new CustomEvent("filter"))}}
              @click=${i=>{i.stopPropagation()}}
            ></eox-itemfilter-${na(this.items.find(i=>i._inProgress).type)}>
  `)}
            </div>
          </eox-dropdown>
        </div>
      </div>
      ${bt(this.items.filter(i=>i.stringifiedState||i._inProgress).length>0,()=>ae`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleReset(this.items.filter(i=>i.stringifiedState||i._inProgress))}}
            >
              
            </button>
          </div>
        `)}
    `}};fu([Me()],wc.prototype,"idProperty",2);fu([Me()],wc.prototype,"items",2);fu([Me()],wc.prototype,"titleProperty",2);fu([Me()],wc.prototype,"unstyled",2);fu([hr()],wc.prototype,"inputText",2);fu([hr()],wc.prototype,"replaceInput",2);wc=fu([Xr("eox-itemfilter-inline")],wc);function dl(i){return Array.isArray?Array.isArray(i):Ape(i)==="[object Array]"}const IIe=1/0;function PIe(i){if(typeof i=="string")return i;let e=i+"";return e=="0"&&1/i==-IIe?"-0":e}function kIe(i){return i==null?"":PIe(i)}function sa(i){return typeof i=="string"}function Cpe(i){return typeof i=="number"}function OIe(i){return i===!0||i===!1||DIe(i)&&Ape(i)=="[object Boolean]"}function Tpe(i){return typeof i=="object"}function DIe(i){return Tpe(i)&&i!==null}function ws(i){return i!=null}function mw(i){return!i.trim().length}function Ape(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const FIe="Incorrect 'index' type",NIe=i=>`Invalid value for key ${i}`,$Ie=i=>`Pattern length exceeds max of ${i}.`,BIe=i=>`Missing ${i} property in key`,jIe=i=>`Property 'weight' in key '${i}' must be a positive integer`,Iae=Object.prototype.hasOwnProperty;class zIe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let n=Mpe(r);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Mpe(i){let e=null,t=null,r=null,n=1,s=null;if(sa(i)||dl(i))r=i,e=Pae(i),t=tS(i);else{if(!Iae.call(i,"name"))throw new Error(BIe("name"));const o=i.name;if(r=o,Iae.call(i,"weight")&&(n=i.weight,n<=0))throw new Error(jIe(o));e=Pae(o),t=tS(o),s=i.getFn}return{path:e,id:t,weight:n,src:r,getFn:s}}function Pae(i){return dl(i)?i:i.split(".")}function tS(i){return dl(i)?i.join("."):i}function GIe(i,e){let t=[],r=!1;const n=(s,o,a)=>{if(ws(s))if(!o[a])t.push(s);else{let l=o[a];const c=s[l];if(!ws(c))return;if(a===o.length-1&&(sa(c)||Cpe(c)||OIe(c)))t.push(kIe(c));else if(dl(c)){r=!0;for(let h=0,u=c.length;h<u;h+=1)n(c[h],o,a+1)}else o.length&&n(c,o,a+1)}};return n(i,sa(e)?e.split("."):e,0),r?t:t[0]}const UIe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},VIe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,e)=>i.score===e.score?i.idx<e.idx?-1:1:i.score<e.score?-1:1},qIe={location:0,threshold:.6,distance:100},HIe={useExtendedSearch:!1,getFn:GIe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ht={...VIe,...UIe,...qIe,...HIe};const WIe=/[^ ]+/g;function YIe(i=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(n){const s=n.match(WIe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*i),a=parseFloat(Math.round(o*r)/r);return t.set(s,a),a},clear(){t.clear()}}}class JC{constructor({getFn:e=ht.getFn,fieldNormWeight:t=ht.fieldNormWeight}={}){this.norm=YIe(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,sa(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();sa(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ws(e)||mw(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((n,s)=>{let o=n.getFn?n.getFn(e):this.getFn(e,n.path);if(ws(o)){if(dl(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:h}=l.pop();if(ws(h))if(sa(h)&&!mw(h)){let u={v:h,i:c,n:this.norm.get(h)};a.push(u)}else dl(h)&&h.forEach((u,d)=>{l.push({nestedArrIndex:d,value:u})})}r.$[s]=a}else if(sa(o)&&!mw(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Rpe(i,e,{getFn:t=ht.getFn,fieldNormWeight:r=ht.fieldNormWeight}={}){const n=new JC({getFn:t,fieldNormWeight:r});return n.setKeys(i.map(Mpe)),n.setSources(e),n.create(),n}function XIe(i,{getFn:e=ht.getFn,fieldNormWeight:t=ht.fieldNormWeight}={}){const{keys:r,records:n}=i,s=new JC({getFn:e,fieldNormWeight:t});return s.setKeys(r),s.setIndexRecords(n),s}function C0(i,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:n=ht.distance,ignoreLocation:s=ht.ignoreLocation}={}){const o=e/i.length;if(s)return o;const a=Math.abs(r-t);return n?o+a/n:a?1:o}function ZIe(i=[],e=ht.minMatchCharLength){let t=[],r=-1,n=-1,s=0;for(let o=i.length;s<o;s+=1){let a=i[s];a&&r===-1?r=s:!a&&r!==-1&&(n=s-1,n-r+1>=e&&t.push([r,n]),r=-1)}return i[s-1]&&s-r>=e&&t.push([r,s-1]),t}const Ah=32;function KIe(i,e,t,{location:r=ht.location,distance:n=ht.distance,threshold:s=ht.threshold,findAllMatches:o=ht.findAllMatches,minMatchCharLength:a=ht.minMatchCharLength,includeMatches:l=ht.includeMatches,ignoreLocation:c=ht.ignoreLocation}={}){if(e.length>Ah)throw new Error($Ie(Ah));const h=e.length,u=i.length,d=Math.max(0,Math.min(r,u));let f=s,p=d;const g=a>1||l,m=g?Array(u):[];let y;for(;(y=i.indexOf(e,p))>-1;){let A=C0(e,{currentLocation:y,expectedLocation:d,distance:n,ignoreLocation:c});if(f=Math.min(A,f),p=y+h,g){let R=0;for(;R<h;)m[y+R]=1,R+=1}}p=-1;let _=[],v=1,x=h+u;const w=1<<h-1;for(let A=0;A<h;A+=1){let R=0,L=x;for(;R<L;)C0(e,{errors:A,currentLocation:d+L,expectedLocation:d,distance:n,ignoreLocation:c})<=f?R=L:x=L,L=Math.floor((x-R)/2+R);x=L;let P=Math.max(1,d-L+1),F=o?u:Math.min(d+L,u)+h,B=Array(F+2);B[F+1]=(1<<A)-1;for(let E=F;E>=P;E-=1){let C=E-1,M=t[i.charAt(C)];if(g&&(m[C]=+!!M),B[E]=(B[E+1]<<1|1)&M,A&&(B[E]|=(_[E+1]|_[E])<<1|1|_[E+1]),B[E]&w&&(v=C0(e,{errors:A,currentLocation:C,expectedLocation:d,distance:n,ignoreLocation:c}),v<=f)){if(f=v,p=C,p<=d)break;P=Math.max(1,2*d-p)}}if(C0(e,{errors:A+1,currentLocation:d,expectedLocation:d,distance:n,ignoreLocation:c})>f)break;_=B}const T={isMatch:p>=0,score:Math.max(.001,v)};if(g){const A=ZIe(m,a);A.length?l&&(T.indices=A):T.isMatch=!1}return T}function JIe(i){let e={};for(let t=0,r=i.length;t<r;t+=1){const n=i.charAt(t);e[n]=(e[n]||0)|1<<r-t-1}return e}class Lpe{constructor(e,{location:t=ht.location,threshold:r=ht.threshold,distance:n=ht.distance,includeMatches:s=ht.includeMatches,findAllMatches:o=ht.findAllMatches,minMatchCharLength:a=ht.minMatchCharLength,isCaseSensitive:l=ht.isCaseSensitive,ignoreLocation:c=ht.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(d,f)=>{this.chunks.push({pattern:d,alphabet:JIe(d),startIndex:f})},u=this.pattern.length;if(u>Ah){let d=0;const f=u%Ah,p=u-f;for(;d<p;)h(this.pattern.substr(d,Ah),d),d+=Ah;if(f){const g=u-Ah;h(this.pattern.substr(g),g)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,e.length-1]]),p}const{location:n,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let h=[],u=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:m})=>{const{isMatch:y,score:_,indices:v}=KIe(e,p,g,{location:n+m,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});y&&(d=!0),u+=_,y&&v&&(h=[...h,...v])});let f={isMatch:d,score:d?u/this.chunks.length:1};return d&&r&&(f.indices=h),f}}class Ic{constructor(e){this.pattern=e}static isMultiMatch(e){return kae(e,this.multiRegex)}static isSingleMatch(e){return kae(e,this.singleRegex)}search(){}}function kae(i,e){const t=i.match(e);return t?t[1]:null}class QIe extends Ic{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ePe extends Ic{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class tPe extends Ic{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class iPe extends Ic{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class rPe extends Ic{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class nPe extends Ic{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Ipe extends Ic{constructor(e,{location:t=ht.location,threshold:r=ht.threshold,distance:n=ht.distance,includeMatches:s=ht.includeMatches,findAllMatches:o=ht.findAllMatches,minMatchCharLength:a=ht.minMatchCharLength,isCaseSensitive:l=ht.isCaseSensitive,ignoreLocation:c=ht.ignoreLocation}={}){super(e),this._bitapSearch=new Lpe(e,{location:t,threshold:r,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ppe extends Ic{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r;const n=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+s,n.push([r,t-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const iS=[QIe,Ppe,tPe,iPe,nPe,rPe,ePe,Ipe],Oae=iS.length,sPe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,oPe="|";function aPe(i,e={}){return i.split(oPe).map(t=>{let r=t.trim().split(sPe).filter(s=>s&&!!s.trim()),n=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,c=-1;for(;!l&&++c<Oae;){const h=iS[c];let u=h.isMultiMatch(a);u&&(n.push(new h(u,e)),l=!0)}if(!l)for(c=-1;++c<Oae;){const h=iS[c];let u=h.isSingleMatch(a);if(u){n.push(new h(u,e));break}}}return n})}const lPe=new Set([Ipe.type,Ppe.type]);class cPe{constructor(e,{isCaseSensitive:t=ht.isCaseSensitive,includeMatches:r=ht.includeMatches,minMatchCharLength:n=ht.minMatchCharLength,ignoreLocation:s=ht.ignoreLocation,findAllMatches:o=ht.findAllMatches,location:a=ht.location,threshold:l=ht.threshold,distance:c=ht.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:n,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=aPe(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const h=t[l];o.length=0,s=0;for(let u=0,d=h.length;u<d;u+=1){const f=h[u],{isMatch:p,indices:g,score:m}=f.search(e);if(p){if(s+=1,a+=m,r){const y=f.constructor.type;lPe.has(y)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let u={isMatch:!0,score:a/s};return r&&(u.indices=o),u}}return{isMatch:!1,score:1}}}const rS=[];function hPe(...i){rS.push(...i)}function nS(i,e){for(let t=0,r=rS.length;t<r;t+=1){let n=rS[t];if(n.condition(i,e))return new n(i,e)}return new Lpe(i,e)}const K_={AND:"$and",OR:"$or"},sS={PATH:"$path",PATTERN:"$val"},oS=i=>!!(i[K_.AND]||i[K_.OR]),uPe=i=>!!i[sS.PATH],dPe=i=>!dl(i)&&Tpe(i)&&!oS(i),Dae=i=>({[K_.AND]:Object.keys(i).map(e=>({[e]:i[e]}))});function kpe(i,e,{auto:t=!0}={}){const r=n=>{let s=Object.keys(n);const o=uPe(n);if(!o&&s.length>1&&!oS(n))return r(Dae(n));if(dPe(n)){const l=o?n[sS.PATH]:s[0],c=o?n[sS.PATTERN]:n[l];if(!sa(c))throw new Error(NIe(l));const h={keyId:tS(l),pattern:c};return t&&(h.searcher=nS(c,e)),h}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=n[l];dl(c)&&c.forEach(h=>{a.children.push(r(h))})}),a};return oS(i)||(i=Dae(i)),r(i)}function fPe(i,{ignoreFieldNorm:e=ht.ignoreFieldNorm}){i.forEach(t=>{let r=1;t.matches.forEach(({key:n,norm:s,score:o})=>{const a=n?n.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=r})}function pPe(i,e){const t=i.matches;e.matches=[],ws(t)&&t.forEach(r=>{if(!ws(r.indices)||!r.indices.length)return;const{indices:n,value:s}=r;let o={indices:n,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function gPe(i,e){e.score=i.score}function mPe(i,e,{includeMatches:t=ht.includeMatches,includeScore:r=ht.includeScore}={}){const n=[];return t&&n.push(pPe),r&&n.push(gPe),i.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return n.length&&n.forEach(l=>{l(s,a)}),a})}class Wf{constructor(e,t={},r){this.options={...ht,...t},this.options.useExtendedSearch,this._keyStore=new zIe(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof JC))throw new Error(FIe);this._myIndex=t||Rpe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ws(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,n-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=sa(e)?sa(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return fPe(l,{ignoreFieldNorm:a}),s&&l.sort(o),Cpe(t)&&t>-1&&(l=l.slice(0,t)),mPe(l,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=nS(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:s,i:o,n:a})=>{if(!ws(s))return;const{isMatch:l,score:c,indices:h}=t.searchIn(s);l&&n.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:h}]})}),n}_searchLogical(e){const t=kpe(e,this.options),r=(a,l,c)=>{if(!a.children){const{keyId:u,searcher:d}=a,f=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(l,u),searcher:d});return f&&f.length?[{idx:c,item:l,matches:f}]:[]}const h=[];for(let u=0,d=a.children.length;u<d;u+=1){const f=a.children[u],p=r(f,l,c);if(p.length)h.push(...p);else if(a.operator===K_.AND)return[]}return h},n=this._myIndex.records,s={},o=[];return n.forEach(({$:a,i:l})=>{if(ws(a)){let c=r(t,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:h})=>{s[l].matches.push(...h)}))}}),o}_searchObjectList(e){const t=nS(e,this.options),{keys:r,records:n}=this._myIndex,s=[];return n.forEach(({$:o,i:a})=>{if(!ws(o))return;let l=[];r.forEach((c,h)=>{l.push(...this._findMatches({key:c,value:o[h],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:r}){if(!ws(t))return[];let n=[];if(dl(t))t.forEach(({v:s,i:o,n:a})=>{if(!ws(s))return;const{isMatch:l,score:c,indices:h}=r.searchIn(s);l&&n.push({score:c,key:e,value:s,idx:o,norm:a,indices:h})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:c}=r.searchIn(s);a&&n.push({score:l,key:e,value:s,norm:o,indices:c})}return n}}Wf.version="7.0.0";Wf.createIndex=Rpe;Wf.parseIndex=XIe;Wf.config=ht;Wf.parseQuery=kpe;hPe(cPe);const yPe=(i,e="highlight",t="title")=>{const r=(s,o,a)=>{const l=o.split(".");let c;for(c=0;c<l.length-1;c++)s=s[l[c]];s[l[c]]=a},n=(s,o=[])=>{let a="",l=0;return o.forEach(c=>{const h=c[1]+1;a+=[s.substring(l,c[0]),`<mark class="${e}">`,s.substring(c[0],h),"</mark>"].join(""),l=h}),a+=s.substring(l),a};return i.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={};for(const[l,c]of Object.entries(s))a[l]=c;return o.forEach(l=>{l.key===t&&r(a,l.key,n(l.value,l.indices))}),a})};let Ope;const _Pe=(i,e)=>{Ope=new Wf(i,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...e})},vPe=async(i,e,t)=>{const r=Object.entries(e).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,c])=>{const h="$or",u=[],d=(f,p)=>{const g={};c.type==="text"?g[f]=`${p}`:g[l]=`="${f}"`,u.push(g)};return Object.entries(c.state).filter(([,f])=>f).forEach(([f,p])=>d(f,p)),u.length>0&&a.push({[h]:u}),a},[]);let n;if(!(r.length>0)&&t.matchAllWhenEmpty!==!1)n=i;else{const a={$and:[...r]},l=Ope.search(a);n=t.enableHighlighting?yPe(l,"highlight",t.titleProperty):l.map(c=>c.item)}const s=Object.entries(e).filter(([,a])=>a.type==="range").reduce((a,[l,c])=>(a[l]={min:c.state.min,max:c.state.max,format:c.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<n.length;l++){const c={};for(const[h,u]of Object.entries(s)){const d=f=>u.format==="date"?Ka(f).unix():f;Object.prototype.hasOwnProperty.call(n[l],h)?Array.isArray(n[l][h])?c[h]=s[h].min<=d(n[l][h][1])&&d(n[l][h][0])<=s[h].max:d(n[l][h])>=s[h].min&&d(n[l][h])<=s[h].max?c[h]=!0:c[h]=!1:c[h]=!0}Object.values(c).every(h=>!!h)&&a.push(n[l])}n=[...a]}const o=Object.entries(e).filter(([,a])=>a.type==="spatial").reduce((a,[l,c])=>(a[l]={geometry:c.state.geometry,mode:c.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<n.length;l++){const c={};for(const h of Object.keys(o)){const u=o[h].mode||"within";Object.prototype.hasOwnProperty.call(n[l],h)&&(u==="within"?TIe(n[l][h],o[h].geometry):CIe(n[l][h],o[h].geometry))?c[h]=!0:c[h]=!1}Object.values(c).every(h=>!!h)&&a.push(n[l])}n=[...a]}return n},bPe=async(i,e,t)=>(await(await fetch(`${t.externalFilter(i,e)}`)).json()).features;var xPe=Object.defineProperty,wPe=Object.getOwnPropertyDescriptor,bl=(i,e,t,r)=>{for(var n=r>1?void 0:r?wPe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&xPe(e,t,n),n};class Fae{constructor(){this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.filterProperties=[],this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.onFilter=()=>{},this.onSelect=()=>{},this.showResults=!0,this.titleProperty="title",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0}}let ya=class extends DC{constructor(){super(...arguments),this._resultAggregation=[],this._items=[],this.filters={},this._config=new Fae,this.apply=i=>{this._items=i.map((t,r)=>({id:`item-${r}`,...t})),this._config.filterProperties.length&&this._config.filterProperties.forEach(t=>{const r={},n=s=>t.format==="date"?Ka(s).unix():parseInt(s);this._items.forEach(s=>{if(t.type==="range"){if(Array.isArray(s[t.key])){const o=[n(s[t.key][0]),n(s[t.key][1])];r.min=r.min!==void 0?Math.min(r.min,o[0]):o[0],r.max=r.max!==void 0?Math.max(r.max,o[1]):o[1]}else{const o=n(s[t.key]);r.min=r.min!==void 0?Math.min(r.min,o):o,r.max=r.max!==void 0?Math.max(r.max,o):o}return}Array.isArray(s[t.key])?s[t.key].forEach(o=>{r[o]=void 0}):t.type==="spatial"?(r.geometry=void 0,r.mode=t.mode||"intersects"):r[s[t.key]]=void 0}),this.filters[t.key||t.keys.join("|")]={...t,type:t.type||"multiselect",state:{...r,...t.state},...t.state&&{dirty:!1},...t.type==="range"&&{min:r.min,max:r.max,format:t.format}}}),this._config.matchAllWhenEmpty!==!1&&(this.results=this.sortResults(this._items),this.requestUpdate()),this._config.aggregateResults&&(this._resultAggregation=[...new Set(this._items.reduce((t,r)=>t.concat(r[this._config.aggregateResults]),[]))].sort((t,r)=>t.localeCompare(r)));const e=[];Object.values(this.filters).forEach(t=>{t.type==="text"?t.keys.forEach(r=>{e.includes(r)||e.push(r)}):(t.type==="select"||t.type==="multiselect")&&(e.includes(t.key)||e.push(t.key))}),_Pe(this._items,{keys:e,...this._config.fuseConfig}),this.search()}}set items(i){this.apply(i)}get items(){return this._items}set config(i){const e=this._config;this._config={...new Fae,...i},this.requestUpdate("config",e)}get config(){return this._config}async search(){let i;this.config.externalFilter?i=await bPe(this._items,this.filters,this._config):i=await vPe(this._items,this.filters,this._config),this.results=this.sortResults(i),this._config.onFilter(this.results,this.filters)}aggregateResults(i,e){return i.filter(t=>{const r=t[this._config.aggregateResults];let n;return this.filters[this._config.aggregateResults]&&(n=Object.keys(this.filters[this._config.aggregateResults]).filter(o=>this.filters[this._config.aggregateResults].state[o])),(n!=null&&n.length?n.includes(e):!0)&&Array.isArray(r)?r.includes(e):r===e})}createItemList(i){return ae`
      <ul>
        ${OC(this.aggregateResults(this.results,i),e=>e.id,e=>{var t,r;return ae`
            <li
              class=${((t=this.selectedResult)==null?void 0:t[this._config.titleProperty])===e[this._config.titleProperty]?"highlighted":It}
            >
              <label>
                <input
                  data-cy="result-radio"
                  type="radio"
                  class="result-radio"
                  name="result"
                  id="${e.id}"
                  ?checked=${((r=this.selectedResult)==null?void 0:r[this._config.titleProperty])===e[this._config.titleProperty]||It}
                  @click=${()=>{this.selectedResult=e,this._config.onSelect(e)}}
                />
                ${bt(this.hasTemplate("result"),()=>this.renderTemplate("result",e,`result-${e.id}`),()=>ae`
                    <span class="title"
                      >${Ua(e[this._config.titleProperty])}</span
                    >
                  `)}
              </label>
            </li>
          `})}
      </ul>
    `}sortResults(i){return[...i].sort((e,t)=>e[this._config.titleProperty].localeCompare(t[this._config.titleProperty]))}resetFilters(){this.renderRoot.querySelectorAll("[data-type='filter']").forEach(i=>{i.reset()}),this.search()}toggleAccordion(i){let e;if(i.detail?e=i.detail.target:e=i.target,e.classList.contains("details-filter")){if(!e.open||this.config.expandMultipleFilters)return;this.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(t=>{const r=t.shadowRoot.querySelector(".details-filter");r&&r!==e&&r.removeAttribute("open")})}else{if(!e.open||this.config.expandMultipleResults)return;this.shadowRoot.querySelectorAll("details").forEach(t=>{t!==e&&t.removeAttribute("open")})}}render(){return ae`
      <style>
        ${FC}
        ${!this.unstyled&&BC}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        @submit="${i=>i.preventDefault()}"
      >
        ${bt(this._config.inlineMode,()=>ae`
            <eox-itemfilter-inline
              .items=${Object.values(this.filters)}
              .unstyled=${this.unstyled}
              @filter=${()=>this.search()}
            >
            </eox-itemfilter-inline>
          `,()=>ae`
            ${bt(this._config.filterProperties.length,()=>ae`
                <section
                  class="${this.config.inlineMode?"inline":It}"
                >
                  ${bt(!this.config.inlineMode,()=>ae`
                        <slot name="filterstitle"
                          ><h4 style="margin-top: 8px">Filters</h4></slot
                        >
                      `)}
                  <ul id="filters">
                    ${Qn(Object.values(this.filters),i=>zd`
                    <li>
                      ${i.featured?zd`
                            <eox-itemfilter-${na(i.type)}
                              slot="filter"
                              data-type="filter"
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @filter="${()=>this.search()}"
                            ></eox-itemfilter-${na(i.type)}>
                          `:zd`
                            <eox-itemfilter-expandcontainer
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @details-toggled=${this.toggleAccordion}
                            >
                            ${bt(i.dirty,()=>ae`
                                <button
                                  slot="reset-button"
                                  class="reset-icon icon"
                                  @click=${e=>{e.target.parentElement.querySelector("[slot=filter]").reset(),this.search(),this.requestUpdate()}}
                                >
                                  ${this.unstyled?"Reset":It}
                                </button>
                              `)}
                              <eox-itemfilter-${na(i.type)}
                                slot="filter"
                                data-type="filter"
                                data-filter="${i.key}"
                                .filterObject=${i}
                                .unstyled=${this.unstyled}
                                @filter="${()=>this.search()}"
                              ></eox-itemfilter-${na(i.type)}>
                            </eox-itemfilter-expandcontainer>
                        `}
                    </li>
                  `)}
                  </ul>
                  ${bt(this._config.filterProperties&&Object.values(this.filters).map(i=>i.dirty).filter(i=>i).length>0,()=>ae`
                    <button
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
                </section>
              `)}
            ${bt(this.config.showResults&&this.results,()=>ae`
                <section id="section-results">
                  <div>
                    <slot name="resultstitle"
                      ><h4 style="margin-top: 8px">Results</h4></slot
                    >
                  </div>
                  <div id="container-results" class="scroll">
                    ${this.results.length<1?ae`
                          <small class="no-results">No matching items</small>
                        `:It}
                    <ul id="results" part="results">
                      ${this._config.aggregateResults?Qn(this._resultAggregation.filter(i=>this.aggregateResults(this.results,i).length),i=>ae` ${bt(this.aggregateResults(this.results,i).length===1&&this.config.autoSpreadSingle,()=>ae` <div style="margin-left: -8px">
                                  ${this.createItemList(i)}
                                </div>`,()=>ae`
                                  <details
                                    class="details-results"
                                    @toggle=${this.toggleAccordion}
                                    ?open=${this._config.expandResults||It}
                                  >
                                    <summary>
                                      <span class="title">
                                        ${i}
                                        <span class="count"
                                          >${this.aggregateResults(this.results,i).length}</span
                                        >
                                      </span>
                                    </summary>
                                    <div>
                                      ${this.createItemList(i)}
                                    </div>
                                  </details>
                                `)}`):Qn(this.results,i=>ae`<li part="result">
                                <label>
                                  <input
                                    type="radio"
                                    name="result"
                                    id="${i.id}"
                                    @click=${()=>{this.selectedResult=i,this._config.onSelect(i)}}
                                  />
                                  ${bt(this.hasTemplate("result"),()=>this.renderTemplate("result",i,`result-${i.id}`),()=>ae`
                                      <span class="title"
                                        >${Ua(i[this._config.titleProperty])}</span
                                      >
                                    `)}
                                </label>
                              </li>`)}
                    </ul>
                  </div>
                </section>
              `)}
          `)}
      </form>
    `}};bl([hr()],ya.prototype,"filters",2);bl([hr()],ya.prototype,"results",2);bl([hr()],ya.prototype,"selectedResult",2);bl([Me({attribute:!1})],ya.prototype,"items",1);bl([Me({attribute:!1})],ya.prototype,"config",1);bl([Me()],ya.prototype,"apply",2);bl([Me({attribute:!1})],ya.prototype,"styleOverride",2);bl([Me({type:Boolean})],ya.prototype,"unstyled",2);ya=bl([Xr("eox-itemfilter")],ya);const EPe=i=>typeof i.type!="string"&&"multiple",SPe=i=>typeof i.type=="string"&&"string",CPe=i=>!i.type&&i.properties&&"object",TPe=i=>typeof i.type=="string"&&["string","number","integer","boolean","null","array","object"].includes(i.type)&&i.type,APe=i=>i.type==="string"&&i.format==="signature"&&"signature",MPe=i=>{if(i.type==="boolean")return i.format==="checkbox"||i.options&&i.options.checkbox?"checkbox":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},RPe=i=>i.type==="any"&&"multiple",LPe=i=>i.type==="string"&&i.media&&i.media.binaryEncoding==="base64"&&"base64",IPe=i=>i.type==="string"&&i.format==="url"&&window.FileReader&&i.options&&i.options.upload===Object(i.options.upload)&&"upload",PPe=i=>i.type==="array"&&i.format==="table"&&"table",kPe=i=>{if(i.enumSource)return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},OPe=i=>{if(i.enum){if(i.type==="array"||i.type==="object")return"enum";if(i.type==="number"||i.type==="integer"||i.type==="string")return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"}},DPe=(i,e)=>{if(i.items&&(i.items=e.expandSchema(i.items)),i.type==="array"&&i.items&&!Array.isArray(i.items)&&["string","number","integer"].includes(i.items.type)){if(i.format==="choices")return"arrayChoices";if(i.uniqueItems){if(i.format==="selectize")return"arraySelectize";if(i.format==="select2")return"arraySelect2";if(i.items.enum)return"multiselect"}}},FPe=i=>(i.oneOf||i.anyOf)&&"multiple",NPe=i=>i.if&&"multiple",$Pe=i=>["string","integer"].includes(i.type)&&["date","time","datetime-local"].includes(i.format)&&"datetime",BPe=i=>["string","integer"].includes(i.type)&&["starrating","rating"].includes(i.format)&&"starrating",jPe=i=>{if(i.links){for(let e=0;e<i.links.length;e++)if(i.links[e].rel&&i.links[e].rel.toLowerCase()==="describedby")return"describedBy"}},zPe=i=>{if((i.type==="integer"||i.type==="number")&&i.format==="stepper")return"stepper"},GPe=i=>i.format==="button"&&"button",UPe=i=>i.format==="info"&&"info",VPe=i=>i.type==="string"&&i.format==="uuid"&&"uuid",qPe=i=>i.type==="string"&&i.format==="autocomplete"&&"autocomplete",HPe=i=>i.type==="string"&&i.format==="jodit"&&"jodit",WPe=i=>i.type==="string"&&i.format==="markdown"&&"simplemde",YPe=i=>i.type==="string"&&["xhtml","bbcode"].includes(i.format)&&"sceditor",XPe=["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","prql","r","ruby","rust","sass","scala","scss","sh","smarty","sql","sqlserver","stylus","svg","typescript","twig","vbscript","xml","yaml","zig"],ZPe=i=>i.type==="string"&&XPe.includes(i.format)&&"ace",KPe=i=>i.type==="string"&&["ip","ipv4","ipv6","hostname"].includes(i.format)&&"ip",JPe=i=>i.type==="string"&&i.format==="color"&&"colorpicker",QPe=[JPe,KPe,ZPe,YPe,WPe,HPe,qPe,VPe,UPe,GPe,zPe,jPe,BPe,$Pe,FPe,NPe,DPe,OPe,kPe,PPe,IPe,LPe,RPe,MPe,APe,TPe,CPe,EPe,SPe];function Dpe(i){return!(i===null||typeof i!="object"||i.nodeType||i===i.window||i.constructor&&!Is(i.constructor.prototype,"isPrototypeOf"))}function Fpe(i){return Dpe(i)?Ke({},i):Array.isArray(i)?i.map(Fpe):i}function Ke(i,...e){return e.forEach(t=>{t&&Object.keys(t).forEach(r=>{t[r]&&Dpe(t[r])?(Is(i,r)||(i[r]={}),Ke(i[r],t[r])):Array.isArray(t[r])?i[r]=Fpe(t[r]):i[r]=t[r]})}),i}function Ao(i,e){const t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),i.dispatchEvent(t)}function Npe(i){return i&&(i.toString()==="[object ShadowRoot]"?i:Npe(i.parentNode))}function Is(i,e){return i&&Object.prototype.hasOwnProperty.call(i,e)}const eke=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function tke(i){if(typeof i>"u"||i===null)return!1;const e=i.match(eke),t=parseFloat(i);return e!==null&&!isNaN(t)&&isFinite(t)}const ike=/^\s*(-|\+)?(\d+)\s*$/;function rke(i){if(typeof i>"u"||i===null)return!1;const e=i.match(ike),t=parseInt(i);return e!==null&&!isNaN(t)&&isFinite(t)}function hm(){let i=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(e==="x"?t:t&3|8).toString(16)})}function yw(i){return i&&typeof i=="object"&&!Array.isArray(i)}function J_(i,...e){if(!e.length)return i;const t=e.shift();if(yw(i)&&yw(t))for(const r in t)yw(t[r])?(i[r]||Object.assign(i,{[r]:{}}),J_(i[r],t[r])):Object.assign(i,{[r]:t[r]});return J_(i,...e)}function nke(i,e){return Object.keys(e).forEach(function(t){t in i&&(i[t]=e[t])}),i}class xn{constructor(e,t){this.defaults=t,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=Ke({},this.options||{},this.schema.options||{},e.schema.options||{},e),this.formname=this.jsoneditor.options.form_name_root||"root",!e.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=e.path||this.formname,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,e.container&&this.setContainer(e.container),this.registerDependencies()}onChildEditorChange(e){this.onChange(!0)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor&&this.jsoneditor.onChange()}onChange(e){this.notify(),this.watch_listener&&this.watch_listener(),e&&this.change()}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const e=this.getTitle()||this.formname;this.input.setAttribute("aria-label",e)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const e=this.options.dependencies;e&&Object.keys(e).forEach(t=>{let r;t.startsWith(this.jsoneditor.root.path)?r=t:(r=this.path.split("."),r[r.length-1]=t,r=r.join(".")),this.jsoneditor.watch(r,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const e=this.container||this.control;if(!e||this.jsoneditor===null)return;const t=this.options.dependencies;if(!t)return;const r=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(t).forEach(s=>{let o;s.startsWith(this.jsoneditor.root.path)?o=s:(o=this.path.split("."),o[o.length-1]=s,o=o.join("."));const l=t[s];this.checkDependency(o,l)}),this.dependenciesFulfilled!==r&&this.notify();let n=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(n="none"),e.tagName==="TD"?Object.keys(e.childNodes).forEach(s=>e.childNodes[s].style.display=n):e.style.display=n}checkDependency(e,t){if(this.path===e||this.jsoneditor===null)return;const r=this.jsoneditor.getEditor(e),n=r?r.getValue():void 0;!r||!r.dependenciesFulfilled?this.dependenciesFulfilled=!1:Array.isArray(t)?this.dependenciesFulfilled=t.some(s=>{if(JSON.stringify(n)===JSON.stringify(s))return!0}):typeof t=="object"?typeof n!="object"?this.dependenciesFulfilled=t===n:Object.keys(t).some(s=>{if(!Is(t,s))return!1;if(!Is(n,s)||t[s]!==n[s])return this.dependenciesFulfilled=!1,!0}):typeof t=="string"||typeof t=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&n===t:typeof t=="boolean"&&(t?this.dependenciesFulfilled=this.dependenciesFulfilled&&(n||n.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!n||n.length===0))}setContainer(e){this.container=e,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(e){this.optInLabel=this.theme.getHiddenLabel(this.formname+" opt-in"),this.optInLabel.setAttribute("for",this.formname+"-opt-in"),this.optInCheckbox=document.createElement("input"),this.optInCheckbox.setAttribute("type","checkbox"),this.optInCheckbox.setAttribute("style","margin: 0 10px 0 0;"),this.optInCheckbox.setAttribute("id",this.formname+"-opt-in"),this.optInCheckbox.classList.add("json-editor-opt-in"),this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const t=this.jsoneditor.options.show_opt_in,r=typeof this.parent.options.show_opt_in<"u",n=r&&this.parent.options.show_opt_in===!0,s=r&&this.parent.options.show_opt_in===!1;(n||!s&&t||!r&&t)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.appendChild(this.optInLabel),this.header.appendChild(this.optInCheckbox),this.header.insertBefore(this.optInCheckbox,this.header.firstChild))}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header))}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},Is(this.schema,"watch")){let e,t,r,n,s;const o=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(a=>{if(e=this.schema.watch[a],Array.isArray(e)){if(e.length<2)return;t=[e[0]].concat(e[1].split("."))}else t=e.split("."),this.theme.closest(this.container,`[data-schemaid="${t[0]}"]`)||t.unshift("#");if(r=t.shift(),r==="#"&&(r=this.jsoneditor.schema.id||this.jsoneditor.root.formname),n=this.theme.closest(this.container,`[data-schemaid="${r}"]`),!n)throw new Error(`Could not find ancestor node with id ${r}`);s=`${n.getAttribute("data-schemapath")}.${t.join(".")}`,o.startsWith(s)&&(this.watchLoop=!0),this.jsoneditor.watch(s,this.watch_listener),this.watched[a]=s})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))}onMove(){}getButton(e,t,r,n=[]){const s=`json-editor-btn-${t}`;this.iconlib?t=this.iconlib.getIcon(t):t=null,e=this.translate(e,n),r=this.translate(r,n),!t&&r&&(e=r,r=null);const o=this.theme.getButton(e,t,r);return o.classList.add(s),o}setButtonText(e,t,r,n,s=[]){return this.iconlib?r=this.iconlib.getIcon(r):r=null,t=this.translate(t,s),n=this.translate(n,s),!r&&n&&(t=n,n=null),this.theme.setButtonText(e,t,r,n)}addLink(e){this.link_holder&&this.link_holder.appendChild(e)}getLink(e){let t,r;const s=(e.mediaType||"application/javascript").split("/")[0],o=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine);let l=null;if(e.download&&(l=e.download),l&&l!==!0&&(l=this.jsoneditor.compileTemplate(l,this.template_engine)),s==="image"){t=this.theme.getBlockLinkHolder(),r=document.createElement("a"),r.setAttribute("target","_blank");const c=document.createElement("img");this.theme.createImageLink(t,r,c),this.link_watchers.push(h=>{const u=o(h),d=a(h);r.setAttribute("href",u),r.setAttribute("title",d||u),c.setAttribute("src",u)})}else if(["audio","video"].includes(s)){t=this.theme.getBlockLinkHolder(),r=this.theme.getBlockLink(),r.setAttribute("target","_blank");const c=document.createElement(s);c.setAttribute("controls","controls"),this.theme.createMediaLink(t,r,c),this.link_watchers.push(h=>{const u=o(h),d=a(h);r.setAttribute("href",u),r.textContent=d||u,c.setAttribute("src",u)})}else r=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,t.style.display="none",this.link_watchers.push(c=>{const h=o(c),u=a(c);h&&(t.style.display=""),t.setAttribute("href",h),t.textContent=u||h});return l&&r&&(l===!0?r.setAttribute("download",""):this.link_watchers.push(c=>{r.setAttribute("download",l(c))})),e.class&&r.classList.add(e.class),t}refreshWatchedFieldValues(){if(!this.watched_values)return;const e={};let t=!1;return this.watched&&Object.keys(this.watched).forEach(r=>{const n=this.jsoneditor.getEditor(this.watched[r]),s=n?n.getValue():null;this.watched_values[r]!==s&&(t=!0),e[r]=s}),e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const e=this.getHeaderText();if(this.header.children.length){for(let t=0;t<this.header.childNodes.length;t++)if(this.header.childNodes[t].nodeType===3){this.header.childNodes[t].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}}getHeaderText(e){return this.header_text?this.header_text:e?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}onWatchedFieldChange(){let e;if(this.header_template){e=Ke(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(e.properties={},Object.keys(this.editors).forEach(r=>{const n=this.editors[r];if(n.schema&&n.schema.enum&&n.schema.options&&n.schema.options.enum_titles){const s=n.schema.enum.indexOf(n.value),o=n.options.enum_titles[s];e.properties[r]={enumTitle:o}}}));const t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(let t=0;t<this.link_watchers.length;t++)this.link_watchers[t](e)}}setValue(e){this.value=e}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(e=>this.jsoneditor.unwatch(e,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&typeof e=="object"&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),typeof e=="string"){if(e==="number")return this.isDefaultRequired()?0:void 0;if(e==="boolean")return this.isDefaultRequired()?!1:void 0;if(e==="integer")return this.isDefaultRequired()?0:void 0;if(e==="string")return this.isDefaultRequired()?"":void 0;if(e==="null")return null;if(e==="object")return{};if(e==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(e){const t=[],r={};e.forEach(s=>{s.title&&(r[s.title]=r[s.title]||0,r[s.title]++),s.description&&(r[s.description]=r[s.description]||0,r[s.description]++),s.format&&(r[s.format]=r[s.format]||0,r[s.format]++),s.type&&(r[s.type]=r[s.type]||0,r[s.type]++)}),e.forEach(s=>{let o;typeof s=="string"?o=s:s.title&&r[s.title]<=1?o=s.title:s.format&&r[s.format]<=1?o=s.format:s.type&&r[s.type]<=1?o=s.type:s.description&&r[s.description]<=1?o=s.description:s.title?o=s.title:s.format?o=s.format:s.type?o=s.type:s.description?o=s.description:JSON.stringify(s).length<500?o=JSON.stringify(s):o="type",t.push(o)});const n={};return t.forEach((s,o)=>{n[s]=n[s]||0,n[s]++,r[s]>1&&(t[o]=`${s} ${n[s]}`)}),t}getValidId(e){return e=e===void 0?"":e.toString(),e.replace(/\s+/g,"-")}setInputAttributes(e){if(this.schema.options&&this.schema.options.inputAttributes){const t=this.schema.options.inputAttributes,r=["name","type"].concat(e);Object.keys(t).forEach(n=>{r.includes(n.toLowerCase())||this.input.setAttribute(n,t[n])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const e=this.schema.options.containerAttributes,t=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach(r=>{t.includes(r.toLowerCase())||this.container.setAttribute(r,e[r])})}}expandCallbacks(e,t){const r=this.defaults.callbacks[e];return Object.entries(t).forEach(([n,s])=>{s===Object(s)?t[n]=this.expandCallbacks(e,s):typeof s=="string"&&typeof r=="object"&&typeof r[s]=="function"&&(t[n]=r[s].bind(null,this))}),t}showValidationErrors(e){}}class Fs extends xn{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}setValue(e,t,r){if(this.template&&!r||(!this.shouldBeUnset()&&(e===null||typeof e>"u")?e="":typeof e=="object"?e=JSON.stringify(e):!this.shouldBeUnset()&&typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const n=this.sanitize(e);if(this.input.value===n)return;if(this.setValueToInputField(n),this.format==="range"){const o=this.control.querySelector("output");o&&(o.value=n)}const s=r||this.getValue()!==e;return this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),r||this.onChange(s),{changed:s,value:n}}setValueToInputField(e){this.input.value=e===void 0?"":e}getNumColumns(){const e=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);let t;return this.input_type==="textarea"?t=6:["text","email"].includes(this.input_type)?t=4:t=2,Math.min(12,Math.max(e,t))}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";let t=this.schema.minimum||0,r=this.schema.maximum||Math.max(100,t+1),n=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),r%this.schema.multipleOf&&(r=Math.floor(r/this.schema.multipleOf)*this.schema.multipleOf),n=this.schema.multipleOf),this.input=this.theme.getRangeInput(t,r,n,this.description,this.formname),this.input.setAttribute("id",this.formname)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].includes(this.format)&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength<"u"&&this.input.setAttribute("maxlength",this.schema.maxLength),typeof this.schema.pattern<"u"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength<"u"&&this.input.setAttribute("pattern",`.{${this.schema.minLength},}`),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",t=>{if(t.preventDefault(),t.stopPropagation(),this.schema.template){t.currentTarget.value=this.value;return}const r=t.currentTarget.value,n=this.sanitize(r);r!==n&&(t.currentTarget.value=n),this.is_dirty=!0,this.refreshValue(),this.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=t=>{if(!t)return;let r,n=t.offsetHeight;if(t.offsetHeight<t.scrollHeight)for(r=0;t.offsetHeight<t.scrollHeight+3&&!(r>100);)r++,n++,t.style.height=`${n}px`;else{for(r=0;t.offsetHeight>=t.scrollHeight+3&&!(r>100);)r++,n--,t.style.height=`${n}px`;t.style.height=`${n+1}px`}},this.input.addEventListener("keyup",t=>{this.adjust_height(t.currentTarget)}),this.input.addEventListener("change",t=>{this.adjust_height(t.currentTarget)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format);let{input:e}=this;if(this.format==="range"&&(e=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,e,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{if(this.input.parentNode&&this.afterInputReady(),this.adjust_height&&this.adjust_height(this.input),this.format==="range"){const t=this.control.querySelector("output");t.value=this.input.value}}),this.schema.template){const t=this.expandCallbacks("template",{template:this.schema.template});typeof t.template=="function"?this.template=t.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}setupCleave(e){const t=this.expandCallbacks("cleave",Ke({},this.defaults.options.cleave||{},this.options.cleave||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.cleave_instance=new window.Cleave(e,t))}setupImask(e){const t=this.expandCallbacks("imask",Ke({},this.defaults.options.imask||{},this.options.imask||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.imask_instance=window.IMask(e,this.ajustIMaskOptions(t)))}ajustIMaskOptions(e){return Object.keys(e).forEach(t=>{if(e[t]===Object(e[t]))e[t]=this.ajustIMaskOptions(e[t]);else if(t==="mask")if(e[t].substr(0,6)==="regex:"){const r=e[t].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(r!==null)try{e[t]=new RegExp(r[1],r[2])}catch{}}else e[t]=this.getGlobalPropertyFromString(e[t])}),e}getGlobalPropertyFromString(e){if(e.includes(".")){const t=e.split("."),r=t[0],n=t[1];if(typeof window[r]<"u"&&typeof window[r][n]<"u")return window[r][n]}else if(typeof window[e]<"u")return window[e];return e}shouldBeUnset(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}getValue(){const e=!!(this.input&&this.input.value);if(!(this.shouldBeUnset()&&!e))return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:super.getValue()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}afterInputReady(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}refreshValue(){this.input&&(this.value=this.input.value,typeof this.value!="string"&&!this.shouldBeUnset()&&(this.value=""),this.serialized=this.value)}destroy(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}showValidationErrors(e){if(this.jsoneditor.options.show_errors!=="always"){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return}this.previous_error_setting=this.jsoneditor.options.show_errors;const t=(n,s)=>(s.path===this.path&&n.push(s.message),n),r=e.reduce(t,[]);r.length?this.theme.addInputError(this.input,`${r.join(". ")}.`):this.theme.removeInputError(this.input)}}class ske extends Fs{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(n.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;if(window.ace){let t=this.input_type;(t==="cpp"||t==="c++"||t==="c")&&(t="c_cpp"),e=this.expandCallbacks("ace",Ke({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:`ace/mode/${t}`})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,e),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",()=>{this.input.value=this.ace_editor_instance.getValue(),this.refreshValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),super.enable()}disable(e){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),super.disable(e)}destroy(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),super.destroy()}}const oke={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};class QC extends xn{askConfirmation(){return!(this.jsoneditor.options.prompt_before_delete===!0&&window.confirm(this.translate("button_delete_node_warning"))===!1)}getDefault(){return this.schema.default||[]}register(){super.register(),this.rows&&this.rows.forEach(e=>e.register())}unregister(){super.unregister(),this.rows&&this.rows.forEach(e=>e.unregister())}getNumColumns(){const e=this.getItemInfo(0);return this.tabs_holder&&this.schema.format!=="tabs-top"?Math.max(Math.min(12,e.width+2),4):e.width}enable(){this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach(e=>{e.enable(),this.setAvailability(e,!1)}),super.enable())}disable(e){e&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach(t=>{t.disable(e),this.setAvailability(t,!0)}),super.disable()}setAvailability(e,t){e.add_row_button&&(e.add_row_button.disabled=t),e.remove_all_rows_button&&(e.remove_all_rows_button.disabled=t),e.delete_last_row_button&&(e.delete_last_row_button.disabled=t),e.copy_button&&(e.copy_button.disabled=t),e.delete_button&&(e.delete_button.disabled=t),e.moveup_button&&(e.moveup_button.disabled=t),e.movedown_button&&(e.movedown_button.disabled=t)}preBuild(){super.preBuild(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top}build(){this.options.compact?(this.title=this.theme.getHeader("",this.getPathDepth()),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs-top"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()}postBuild(){super.postBuild(),(this.schema.readOnly||this.schema.readonly)&&this.disable()}onChildEditorChange(e){this.refreshValue(),this.refreshTabs(!0),super.onChildEditorChange(e)}getItemTitle(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){const e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=this.translateProperty(e.title)||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)}getItemSchema(e){if(Array.isArray(this.schema.items))if(e>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return Ke({},this.schema.additionalItems)}else return Ke({},this.schema.items[e]);else return this.schema.items?Ke({},this.schema.items):{}}getItemInfo(e){let t=this.getItemSchema(e);this.item_info=this.item_info||{};const r=JSON.stringify(t);return typeof this.item_info[r]<"u"?this.item_info[r]:(t=this.jsoneditor.expandRefs(t),this.item_info[r]={title:this.translateProperty(t.title)||this.translate("default_array_item_title"),default:t.default,width:12,child_editors:t.properties||t.items},this.item_info[r])}getElementEditor(e){const t=this.getItemInfo(e);let r=this.getItemSchema(e);r=this.jsoneditor.expandRefs(r),r.title=`${t.title} ${e+1}`;const n=this.jsoneditor.getEditorClass(r);let s;this.tabs_holder?(this.schema.format==="tabs-top"?s=this.theme.getTopTabContent():s=this.theme.getTabContent(),s.id=`${this.path}.${e}`):t.child_editors?s=this.theme.getChildEditorHolder():s=this.theme.getIndentedPanel(),this.row_holder.appendChild(s);const o=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:s,path:`${this.path}.${e}`,parent:this,required:!0});return o.preBuild(),o.build(),o.postBuild(),o.title_controls||(o.array_controls=this.theme.getButtonHolder(),s.appendChild(o.array_controls)),o}checkParent(e){return e&&e.parentNode}destroy(){this.empty(!0),this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.controls)&&this.controls.parentNode.removeChild(this.controls),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,super.destroy()}empty(e){if(this.rows!==null){if(this.rows.forEach((t,r)=>{e&&(this.checkParent(t.tab)&&t.tab.parentNode.removeChild(t.tab),this.destroyRow(t,!0),this.row_cache[r]=null),this.rows[r]=null}),e)for(let t=this.rows.length;t<this.row_cache.length;t++)this.destroyRow(this.row_cache[t],!0),this.row_cache[t]=null;this.rows=[],e&&(this.row_cache=[])}}destroyRow(e,t){const r=e.container;t?(e.destroy(),r.parentNode&&r.parentNode.removeChild(r),this.checkParent(e.tab)&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),r.style.display="none",e.unregister())}getMax(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}refreshTabs(e){this.rows.forEach(t=>{t.tab&&(e?t.tab_text.textContent=t.getHeaderText():t.tab===this.active_tab?this.theme.markTabActive(t):this.theme.markTabInactive(t))})}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length).default);return this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax())),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized){t&&this.refreshValue(t);return}e.forEach((o,a)=>{if(this.rows[a])this.rows[a].setValue(o,t);else if(this.row_cache[a])this.rows[a]=this.row_cache[a],this.rows[a].setValue(o,t),this.rows[a].container.style.display="",this.rows[a].tab&&(this.rows[a].tab.style.display=""),this.rows[a].register(),this.jsoneditor.trigger("addRow",this.rows[a]);else{const l=this.addRow(o,t);this.jsoneditor.trigger("addRow",l)}});for(let o=e.length;o<this.rows.length;o++)this.destroyRow(this.rows[o]),this.rows[o]=null;this.rows=this.rows.slice(0,e.length);const n=this.rows.find(o=>o.tab===this.active_tab);let s=typeof n<"u"?n.tab:null;!s&&this.rows.length&&(s=this.rows[0].tab),this.active_tab=s,this.refreshValue(t),this.refreshTabs(!0),this.refreshTabs(),this.onChange()}setButtonState(e,t){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:e.style.display=t?"":"none";break;case 2:e.disabled=!t;break;default:e.style.display=t?"":"none"}}setupButtons(e){const t=[];if(!this.value.length)this.setButtonState(this.delete_last_row_button,!1),this.setButtonState(this.remove_all_rows_button,!1);else if(this.value.length===1){this.setButtonState(this.remove_all_rows_button,!1);const n=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),t.push(n)}else{const n=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),t.push(n);const s=!(e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,s),t.push(s)}const r=!(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button);return this.setButtonState(this.add_row_button,r),t.push(r),t.some(n=>n)}refreshValue(e){const t=this.value?this.value.length:0;if(this.value=this.rows.map(r=>r.getValue()),t!==this.value.length||e){const r=this.schema.minItems&&this.schema.minItems>=this.rows.length;this.rows.forEach((n,s)=>{if(n.movedown_button){const o=s!==this.rows.length-1;this.setButtonState(n.movedown_button,o)}n.delete_button&&this.setButtonState(n.delete_button,!r),this.value[s]=n.getValue()}),this.setupButtons(r)&&!this.collapsed?this.controls.style.display="inline-block":this.controls.style.display="none"}this.serialized=JSON.stringify(this.value)}addRow(e,t){const r=this.rows.length;this.rows[r]=this.getElementEditor(r),this.row_cache[r]=this.rows[r],this.tabs_holder&&(this.rows[r].tab_text=document.createElement("span"),this.rows[r].tab_text.textContent=this.rows[r].getHeaderText(),this.schema.format==="tabs-top"?(this.rows[r].tab=this.theme.getTopTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTopTab(this.tabs_holder,this.rows[r].tab)):(this.rows[r].tab=this.theme.getTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTab(this.tabs_holder,this.rows[r].tab)),this.rows[r].tab.addEventListener("click",s=>{this.active_tab=this.rows[r].tab,this.refreshTabs(),s.preventDefault(),s.stopPropagation()}));const n=this.rows[r].title_controls||this.rows[r].array_controls;return this.hide_delete_buttons||(this.rows[r].delete_button=this._createDeleteButton(r,n)),this.show_copy_button&&(this.rows[r].copy_button=this._createCopyButton(r,n)),r&&!this.hide_move_buttons&&(this.rows[r].moveup_button=this._createMoveUpButton(r,n)),this.hide_move_buttons||(this.rows[r].movedown_button=this._createMoveDownButton(r,n)),typeof e<"u"&&this.rows[r].setValue(e,t),this.refreshTabs(),this.rows[r]}_createDeleteButton(e,t){const r=this.getButton(this.getItemTitle(),"delete","button_delete_row_title",[this.getItemTitle()]);return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue().filter((h,u)=>u!==s);let a=null;const c=this.rows[s].getValue();this.setValue(o),this.rows[s]?a=this.rows[s].tab:this.rows[s-1]&&(a=this.rows[s-1].tab),a&&(this.active_tab=a,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",c)}),t&&t.appendChild(r),r}_createCopyButton(e,t){const r=this.getButton(this.getItemTitle(),"copy","button_copy_row_title",[this.getItemTitle()]),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{const o=this.getValue();s.preventDefault(),s.stopPropagation();const a=s.currentTarget.getAttribute("data-i")*1;o.forEach((l,c)=>{if(c===a){if(n.items.type==="string"&&n.items.format==="uuid")l=hm();else if(n.items.type==="object"&&n.items.properties)for(const h of Object.keys(l))n.items.properties&&n.items.properties[h]&&n.items.properties[h].format==="uuid"&&(l[h]=hm());o.push(l)}}),this.setValue(o),this.refreshValue(!0),this.onChange(!0)}),t.appendChild(r),r}_createMoveUpButton(e,t){const r=this.getButton("",this.schema.format==="tabs-top"?"moveleft":"moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1;if(s<=0)return;const o=this.getValue(),a=o[s-1];o[s-1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s-1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t&&t.appendChild(r),r}_createMoveDownButton(e,t){const r=this.getButton("",this.schema.format==="tabs-top"?"moveright":"movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();if(s>=o.length-1)return;const a=o[s+1];o[s+1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s+1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t&&t.appendChild(r),r}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.options.collapsed&&Ao(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton(),this.tabs&&(this.add_row_button.classList.add("je-array-control-btn"),this.delete_last_row_button.classList.add("je-array-control-btn"),this.remove_all_rows_button.classList.add("je-array-control-btn"))}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");e.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(e,this.title.childNodes[0]);const t=this.row_holder.style.display,r=this.controls.style.display;return e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.panel&&this.setButtonState(this.panel,this.collapsed),this.tabs_holder&&this.setButtonState(this.tabs_holder,this.collapsed),this.collapsed?(this.collapsed=!1,this.row_holder.style.display=t,this.controls.style.display=r,this.setButtonText(n.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.row_holder.style.display="none",this.controls.style.display="none",this.setButtonText(n.currentTarget,"","expand","button_expand"))}),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const r=this.rows.length;let n;this.row_cache[r]?(n=this.rows[r]=this.row_cache[r],this.rows[r].setValue(this.rows[r].getDefault(),!0),this.rows[r].container.style.display="",this.rows[r].tab&&(this.rows[r].tab.style.display=""),this.rows[r].register()):n=this.addRow(),this.active_tab=this.rows[r].tab,this.refreshTabs(),this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",n)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();let n=null;const s=r.pop();this.setValue(r),this.rows[this.rows.length-1]&&(n=this.rows[this.rows.length-1].tab),n&&(this.active_tab=n,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",s)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.empty(!0),this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}showValidationErrors(e){const t=[],r=[];e.forEach(n=>{n.path===this.path?t.push(n):r.push(n)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(n=>{this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.rows.forEach(n=>n.showValidationErrors(r))}}QC.rules=oke;class Hb extends xn{onInputChange(){this.value=this.input.value,this.onChange(!0)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){let e=this.getTitle().length;return Object.keys(this.select_values).forEach(t=>e=Math.max(e,`${this.select_values[t]}`.length+4)),Math.min(12,Math.max(e/7,2))}preBuild(){super.preBuild(),this.select_options={},this.select_values={},this.option_titles=[],this.option_keys=[],this.option_enum=[];let e;const t=this.jsoneditor.expandRefs(this.schema.items||{}),r=t.enum||[],n=t.options?t.options.enum||[]:[],s=t.options?t.options.enum_titles||[]:[];for(e=0;e<r.length;e++){if(this.sanitize(r[e])!==r[e])continue;const o=n[e]||{};"title"in o||(o.title=`${s[e]||r[e]}`),this.option_keys.push(`${r[e]}`),this.option_enum.push(o),this.select_values[`${r[e]}`]=r[e]}}build(){let e;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){const t=this.formname+e.toString();this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.inputs[this.option_keys[e]].id=t,this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];const r=this.theme.getCheckboxLabel(this.option_enum[e].title);if(r.htmlFor=t,this.option_enum[e].infoText){const n=this.theme.getInfoButton(this.translateProperty(this.option_enum[e].infoText));r.appendChild(n)}this.controls["_"+this.option_keys[e]]=this.theme.getFormControl(r,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_enum.map(t=>t.title)),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=t=>{const r=[];for(e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]&&(this.select_options[this.option_keys[e]].selected||this.select_options[this.option_keys[e]].checked)&&r.push(this.select_values[this.option_keys[e]]);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame(()=>{this.afterInputReady()})}postBuild(){super.postBuild()}afterInputReady(){this.theme.afterInputReady(this.input||this.inputs)}setValue(e,t){e=e||[],Array.isArray(e)||(e=[e]),e=e.map(r=>`${r}`),Object.keys(this.select_options).forEach(r=>{this.select_options[r][this.input_type==="select"?"selected":"checked"]=e.includes(r)}),this.updateValue(e),this.onChange(!0)}removeValue(e){e=[].concat(e),this.setValue(this.getValue().filter(t=>!e.includes(t)))}addValue(e){this.setValue(this.getValue().concat(e))}updateValue(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_options[`${e[n]}`]){t=!0;continue}const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}sanitize(e){return this.schema.items.type==="boolean"?!!e:this.schema.items.type==="number"?1*e||0:this.schema.items.type==="integer"?Math.floor(e*1||0):`${e}`}enable(){this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach(e=>this.inputs[e].disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach(t=>this.inputs[t].disabled=!0),super.disable()}destroy(){super.destroy()}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}showValidationErrors(e){const t=new RegExp(`^${this.escapeRegExp(this.path)}(\\.\\d+)?$`),r=(s,o)=>(o.path.match(t)&&s.push(o.message),s),n=e.reduce(r,[]);n.length?this.theme.addInputError(this.input||this.inputs,`${n.join(". ")}.`):this.theme.removeInputError(this.input||this.inputs)}}class ake extends Hb{setValue(e,t){this.choices_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",Ke({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1}));this.newEnumAllowed=!1,this.choices_instance=new window.Choices(this.input,e),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{const r=this.choices_instance.getValue(!0);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e),this.choices_instance.setChoices([{value:`${e}`,label:`${e}`}],"value","label",!1),!0}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}class lke extends Hb{setValue(e,t){this.select2_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(e=this.expandCallbacks("select2",Ke({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=e.tags=!!e.tags&&this.schema.items&&this.schema.items.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Is(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e);const t=this.input.querySelector(`option[value="${e}"]`);return t?t.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(e,e,!1,!1)).trigger("change"),!0}enable(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable()}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class cke extends Hb{setValue(e,t){this.selectize_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.selectize_instance.setValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){e=this.expandCallbacks("selectize",Ke({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=e.create=!!e.create&&this.schema.items&&this.schema.items.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=n=>{const s=this.selectize_instance.getValue();this.updateValue(s),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler);const t=this.theme.getHiddenLabel(this.formname);this.input.setAttribute("id",this.formname+"-hidden-input"),t.setAttribute("for",this.formname+"-hidden-input"),this.input.parentNode.insertBefore(t,this.input);const r=this.selectize_instance.$control[0];if(r){const n=this.theme.getHiddenLabel(this.formname);n.setAttribute("for",this.formname+"-selectized"),r.appendChild(n)}}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const r=[];for(let n=0;n<e.length;n++){if(!this.select_values[`${e[n]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[n]))continue}else continue;const s=this.sanitize(this.select_values[e[n]]);r.push(s),s!==e[n]&&(t=!0)}return this.value=r,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.selectize_instance.addOption({text:e,value:e}),!0}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class hke extends Fs{postBuild(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),super.postBuild()}afterInputReady(){let e;window.Autocomplete&&!this.autocomplete_instance&&(e=this.expandCallbacks("autocomplete",Ke({},{search:t=>(console.log(`No "search" callback defined for autocomplete in property "${t.key}"`),[]),onSubmit:()=>{this.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(e.baseClass),this.autocomplete_dropdown.classList.add(`${e.baseClass}-result-list`),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,e)),super.afterInputReady()}destroy(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),super.destroy()}}class uke extends xn{getNumColumns(){return 4}setFileReaderListener(e){e.addEventListener("load",t=>{if(this.count===this.current_item_index)this.value[this.count][this.key]=t.target.result;else{const r={};for(const n in this.parent.schema.properties)r[n]="";r[this.key]=t.target.result,this.value.splice(this.count,0,r)}this.count+=1,this.count===this.total+this.current_item_index&&this.arrayEditor.setValue(this.value)})}build(){if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",t=>{if(t.preventDefault(),t.stopPropagation(),t.currentTarget.files&&t.currentTarget.files.length)if(t.currentTarget.files.length>1&&this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"){this.arrayEditor=this.jsoneditor.getEditor(this.parent.parent.path),this.value=this.arrayEditor.getValue(),this.total=t.currentTarget.files.length,this.current_item_index=parseInt(this.parent.key),this.count=this.current_item_index;for(let r=0;r<this.total;r++){const n=new FileReader;this.setFileReaderListener(n),n.readAsDataURL(t.currentTarget.files[r])}}else{let r=new FileReader;r.onload=n=>{this.value=n.target.result,this.refreshPreview(),this.onChange(!0),r=null},r.readAsDataURL(t.currentTarget.files[0])}})}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control);const e=this.getButton("button_upload","upload","button_upload");e.addEventListener("click",()=>{this.uploader.click()}),this.control.appendChild(e)}refreshPreview(){if(this.last_preview===this.value||(this.last_preview=this.value,this.preview.innerHTML="",!this.value))return;let e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),!e)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML=`<strong>Type:</strong> ${e}, <strong>Size:</strong> ${Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)} bytes`,e.substr(0,5)==="image"){this.preview.innerHTML+="<br>";const t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(e)?this.value=this.schema.enum[0]:this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())}destroy(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),super.destroy()}}class $pe extends xn{constructor(e,t){super(e,t),this.active=!1,this.isUiOnly=!0,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key)||this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])}build(){this.options.compact=!0;const e=this.expandCallbacks("button",Ke({},{icon:"",validated:!1,align:"left",action:(r,n)=>{window.alert(`No button action defined for "${r.path}"`)}},this.defaults.options.button||{},this.options.button||{})),t=this.translateProperty(e.text||this.schema.title)||this.key;this.input=this.getButton(t,e.icon,t),typeof e.action!="function"?window.alert(`No button action defined for "${this.path}"`):this.input.addEventListener("click",e.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(e.align),this.control.appendChild(this.input),this.container.appendChild(this.control),this.changeHandler=()=>{this.jsoneditor.validate(this.jsoneditor.getValue()).length>0?this.disable():this.enable()},e.validated&&this.jsoneditor.on("change",this.changeHandler)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}getNumColumns(){return 2}activate(){this.active=!1,this.enable()}deactivate(){this.isRequired()||(this.active=!1,this.disable())}destroy(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,super.destroy()}}class dke extends xn{setValue(e,t){e=!!e;const r=this.getValue()!==e;this.value=e,this.input.checked=this.value,t||(this.is_dirty=!0),this.onChange(r)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){return Math.min(12,Math.max(this.getTitle().length/7,2))}build(){this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.value=e.currentTarget.checked,this.is_dirty=!0,this.onChange(!0)}),this.container.appendChild(this.control)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,r=t==="change"||t==="interaction";if(t==="never"||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);this.input.controlgroup=this.control,o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}class iy extends xn{setValue(e,t){let r=this.typecast(e);const n=!!this.jsoneditor.options.use_default_values||typeof this.schema.default<"u";(this.enum_options.length>0&&!this.enum_values.includes(r)||t&&!this.isRequired()&&!n)&&(r=this.enum_values[0]),this.value!==r&&(this.input.value=this.enum_options[this.enum_values.indexOf(r)],this.value=r,t||(this.is_dirty=!0),this.onChange(),this.change())}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){if(!this.enum_options)return 3;let e=this.getTitle().length;for(let t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))}typecast(e){return this.schema.type==="boolean"?e==="undefined"||e===void 0?void 0:!!e:this.schema.type==="number"?1*e||0:this.schema.type==="integer"?Math.floor(e*1||0):this.schema.enum&&e===void 0?void 0:`${e}`}getValue(){if(this.dependenciesFulfilled)return this.typecast(this.value)}preBuild(){this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];let e,t;if(this.schema.enum){const r=this.schema.options&&this.schema.options.enum_titles||[];this.schema.enum.forEach((n,s)=>{this.enum_options[s]=`${n}`,this.enum_display[s]=`${this.translateProperty(r[s])||n}`,this.enum_values[s]=this.typecast(n)})}else if(this.schema.type==="boolean")this.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];else for(e=0;e<this.schema.enumSource.length;e++)typeof this.schema.enumSource[e]=="string"?this.enumSource[e]={source:this.schema.enumSource[e]}:Array.isArray(this.schema.enumSource[e])?this.enumSource[e]=this.schema.enumSource[e]:this.enumSource[e]=Ke({},this.schema.enumSource[e]);for(e=0;e<this.enumSource.length;e++)this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].value}),typeof t.template=="function"?this.enumSource[e].value=t.template:this.enumSource[e].value=this.jsoneditor.compileTemplate(this.enumSource[e].value,this.template_engine)),this.enumSource[e].title&&(t=this.expandCallbacks("template",{template:this.enumSource[e].title}),typeof t.template=="function"?this.enumSource[e].title=t.template:this.enumSource[e].title=this.jsoneditor.compileTemplate(this.enumSource[e].title,this.template_engine)),this.enumSource[e].filter&&this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].filter}),typeof t.template=="function"?this.enumSource[e].filter=t.template:this.enumSource[e].filter=this.jsoneditor.compileTemplate(this.enumSource[e].filter,this.template_engine))}else throw new Error("'select' editor requires the enum property to be set.")}build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}afterInputReady(){this.theme.afterInputReady(this.input)}onInputChange(){const e=this.typecast(this.input.value);let t;this.enum_values.includes(e)?t=this.enum_values[this.enum_values.indexOf(e)]:t=this.enum_values[0],t!==this.value&&(this.is_dirty=!0,this.value=t,this.onChange(!0))}onWatchedFieldChange(){let e,t,r=[],n=[];if(this.enumSource){e=this.getWatchedFieldValues();for(let o=0;o<this.enumSource.length;o++)if(Array.isArray(this.enumSource[o]))r=r.concat(this.enumSource[o]),n=n.concat(this.enumSource[o]);else{let a=[];if(Array.isArray(this.enumSource[o].source)?a=this.enumSource[o].source:a=e[this.enumSource[o].source],a){if(this.enumSource[o].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[o].slice)),this.enumSource[o].filter){const h=[];for(t=0;t<a.length;t++)this.enumSource[o].filter({i:t,item:a[t],watched:e})&&h.push(a[t]);a=h}const l=[],c=[];for(t=0;t<a.length;t++){const h=a[t];this.enumSource[o].value?c[t]=this.typecast(this.enumSource[o].value({i:t,item:h})):c[t]=a[t],this.enumSource[o].title?l[t]=this.enumSource[o].title({i:t,item:h}):l[t]=c[t]}this.enumSource[o].sort&&((h,u,d)=>{h.map((f,p)=>({v:f,t:u[p]})).sort((f,p)=>f.v<p.v?-d:f.v===p.v?0:d).forEach((f,p)=>{h[p]=f.v,u[p]=f.t})}).bind(null,c,l,this.enumSource[o].sort==="desc"?1:-1)(),r=r.concat(c),n=n.concat(l)}}const s=this.value;this.theme.setSelectOptions(this.input,r,n),this.enum_options=r,this.enum_display=n,this.enum_values=r,r.includes(s)||this.jsoneditor.options.enum_source_value_auto_select!==!1?(this.input.value=s,this.value=s):(this.input.value=r[0],this.value=this.typecast(r[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}super.onWatchedFieldChange()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable(e)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,r=t==="change"||t==="interaction";if(t==="never"||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}const fke={".choices > *":"box-sizing:border-box"};class Bpe extends iy{setValue(e,t){if(this.choices_instance){let r=this.typecast(e||"");if(this.enum_values.includes(r)||(r=this.enum_values[0]),this.value===r)return;t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(r)],this.choices_instance.setChoiceByValue(this.input.value),this.value=r,this.onChange()}else super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",Ke({},this.defaults.options.choices||{},this.options.choices||{}));this.choices_instance=new window.Choices(this.input,e)}super.afterInputReady()}onWatchedFieldChange(){if(super.onWatchedFieldChange(),this.choices_instance){const e=this.enum_options.map((t,r)=>({value:t,label:this.enum_display[r]}));this.choices_instance.setChoices(e,"value","label",!0),this.choices_instance.setChoiceByValue(`${this.value}`)}}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}Bpe.rules=fke;class pke extends Fs{build(){if(super.build(),!!this.input&&(this.schema.max&&typeof this.schema.max=="string"&&this.input.setAttribute("max",this.schema.max),this.schema.min&&typeof this.schema.max=="string"&&this.input.setAttribute("min",this.schema.min),window.flatpickr&&typeof this.options.flatpickr=="object")){this.options.flatpickr.enableTime=this.schema.format!=="date",this.options.flatpickr.noCalendar=this.schema.format==="time",this.schema.type==="integer"&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");let{input:e}=this;if(this.options.flatpickr.wrap===!0){const t=[];if(this.options.flatpickr.showToggleButton!==!1){const o=this.getButton("",this.schema.format==="time"?"time":"calendar","flatpickr_toggle_button");o.setAttribute("data-toggle",""),t.push(o)}if(this.options.flatpickr.showClearButton!==!1){const o=this.getButton("","clear","flatpickr_clear_button");o.setAttribute("data-clear",""),t.push(o)}const{parentNode:r}=this.input,{nextSibling:n}=this.input,s=this.theme.getInputGroup(this.input,t);s!==void 0?(this.options.flatpickr.inline=!1,r.insertBefore(s,n),e=s):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(e,this.options.flatpickr),this.options.flatpickr.inline===!0&&this.options.flatpickr.inlineHideInput===!0&&this.input.setAttribute("type","hidden")}}getValue(){if(!this.dependenciesFulfilled)return;if(this.schema.type==="string")return this.value;if(this.value===""||this.value===void 0)return;const e=this.schema.format==="time"?`1970-01-01 ${this.value}`:this.value;return parseInt(new Date(e).getTime()/1e3)}setValue(e,t,r){if(this.schema.type==="string")super.setValue(e,t,r),this.flatpickr&&this.flatpickr.setDate(e);else if(e>0){const n=new Date(e*1e3),s=n.getFullYear(),o=this.zeroPad(n.getMonth()+1),a=this.zeroPad(n.getDate()),l=this.zeroPad(n.getHours()),c=this.zeroPad(n.getMinutes()),h=this.zeroPad(n.getSeconds()),u=[s,o,a].join("-"),d=[l,c,h].join(":");let f=`${u}T${d}`;this.schema.format==="date"?f=u:this.schema.format==="time"&&(f=d),this.input.value=f,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(f)}}destroy(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,super.destroy()}zeroPad(e){return`0${e}`.slice(-2)}}class gke extends xn{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}enable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();super.enable()}disable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();super.disable()}switchEditor(){const e=this.getWatchedFieldValues();if(!e)return;const t=document.location.origin+document.location.pathname+this.template(e);this.editors[this.refs[t]]||this.buildChildEditor(t),this.currentEditor=this.refs[t],this.register(),this.editors.forEach((r,n)=>{r&&(this.currentEditor===n?r.container.style.display="":r.container.style.display="none")}),this.refreshValue(),this.onChange(!0)}buildChildEditor(e){this.refs[e]=this.editors.length;const t=this.theme.getChildEditorHolder();this.editor_holder.appendChild(t);const r=Ke({},this.schema,this.jsoneditor.refs[e]),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:t,path:this.path,parent:this,required:!0});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()}preBuild(){this.refs={},this.editors=[],this.currentEditor="";let e;for(e=0;e<this.schema.links.length;e++)if(this.schema.links[e].rel.toLowerCase()==="describedby"){this.template=this.jsoneditor.compileTemplate(this.schema.links[e].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,e).concat(this.schema.links.slice(e+1)),this.schema.links.length===0&&delete this.schema.links,this.baseSchema=Ke({},this.schema)}build(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()}onWatchedFieldChange(){this.switchEditor()}onChildEditorChange(e){this.editors[this.currentEditor]&&this.refreshValue(),super.onChildEditorChange(e)}refreshValue(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}setValue(e,t){this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(e,t),this.refreshValue(),this.onChange())}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),super.destroy()}showValidationErrors(e){this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}}class mke extends xn{getNumColumns(){return 4}build(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(let e=0;e<this.enum.length;e++)this.select_options[e]=this.options.enum_titles[e]||`Value ${e+1}`,this.html_values[e]=this.getHTML(this.enum[e]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",e=>{this.selected=this.select_options.indexOf(e.currentTarget.value),this.value=this.enum[this.selected],this.refreshValue(),this.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),this.enum.length===1&&(this.switcher.style.display="none")}refreshValue(){this.selected=-1;const e=JSON.stringify(this.value);if(this.enum.forEach((t,r)=>{if(e===JSON.stringify(t))return this.selected=r,!1}),this.selected<0){this.setValue(this.enum[0]);return}this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]}enable(){this.always_disabled||(this.switcher.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.switcher.disabled=!0,super.disable()}getHTML(e){const t=(r,n)=>{Array.isArray(r)||typeof r.length=="number"&&r.length>0&&r.length-1 in r?Array.from(r).forEach((s,o)=>n(o,s)):Object.entries(r).forEach(([s,o])=>n(s,o))};if(e===null)return"<em>null</em>";if(typeof e=="object"){let r="";return t(e,(s,o)=>{let a=this.getHTML(o);Array.isArray(e)||(a=`<div><em>${s}</em>: ${a}</div>`),r+=`<li>${a}</li>`}),Array.isArray(e)?r=`<ol>${r}</ol>`:r=`<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>${r}</ul>`,r}else{if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return e}setValue(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())}destroy(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}}class yke extends xn{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}setValue(e,t,r){if(this.template&&!r||(e===null||typeof e>"u"?e="":typeof e=="object"?e=JSON.stringify(e):typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const n=this.sanitize(e);if(this.input.value===n)return;this.input.value=n;const s=r||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}getNumColumns(){return 2}enable(){super.enable()}disable(){super.disable()}refreshValue(){this.value=this.input.value,typeof this.value!="string"&&(this.value=""),this.serialized=this.value}destroy(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}build(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){const e=this.expandCallbacks("template",{template:this.schema.template});typeof e.template=="function"?this.template=e.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}class _ke extends $pe{build(){this.options.compact=!1,this.header=this.label=this.theme.getLabelLike(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)}getTitle(){return this.translateProperty(this.schema.title)}getNumColumns(){return 12}}class jpe extends Fs{build(){if(super.build(),typeof this.schema.minimum<"u"){let{minimum:e}=this.schema;typeof this.schema.exclusiveMinimum<"u"&&(e+=1),this.input.setAttribute("min",e)}if(typeof this.schema.maximum<"u"){let{maximum:e}=this.schema;typeof this.schema.exclusiveMaximum<"u"&&(e-=1),this.input.setAttribute("max",e)}if(typeof this.schema.step<"u"){const e=this.schema.step||1;this.input.setAttribute("step",e)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset()){this.input.value="";return}}else return tke(this.value)?parseFloat(this.value):this.value}}class zpe extends jpe{getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset())return}else return rke(this.value)?parseInt(this.value):this.value}}class vke extends Fs{preBuild(){if(super.preBuild(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0};break}this.options=Ke(this.options,this.schema.options||{})}}class bke extends Fs{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.Jodit?(e=this.expandCallbacks("jodit",Ke({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",()=>{this.value=this.jodit_instance.getEditorValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),super.enable()}disable(e){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),super.disable(e)}destroy(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),super.destroy()}}const xke=i=>{const e=i.split(".");if(e.length!==4)throw new Error("error_ipv4");e.forEach(t=>{if(isNaN(+t)||+t<0||+t>255)throw new Error("error_ipv4")})},wke=i=>{if(!i.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")},Eke=i=>{if(!i.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")};function Ske(i,e,t,r){try{switch(i.format){case"ipv4":xke(e);break;case"ipv6":wke(e);break;case"hostname":Eke(e);break}return[]}catch(n){return[{path:t,property:"format",message:r(n.message)}]}}class Gpe{constructor(e,t,r,n){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=r||{},this.translate=this.jsoneditor.translate||n.translate,this.translateProperty=this.jsoneditor.translateProperty||n.translateProperty,this.defaults=n,this._validateSubSchema={dependentRequired(s,o,a){const l=[];if(typeof s.dependentRequired<"u"){let c=[];Object.keys(s.dependentRequired).forEach(u=>{typeof o[u]<"u"&&(c=s.dependentRequired[u].filter(f=>!Is(o,f)))}),c.length>0&&l.push({message:"Must have the required properties: "+c.join(", "),path:a})}return l},dependentSchemas(s,o,a){let l=[];return Object.keys(s.dependentSchemas).forEach(c=>{if(typeof o[c]<"u"){const h=s.dependentSchemas[c],u=this._validateSchema(h,o,a);l=[...l,...u]}}),l},contains(s,o,a){const l=[];let c=0;o.forEach(u=>{this._validateSchema(s.contains,u,a).length===0&&c++});const h=c===0;return typeof s.minContains<"u"?c<s.minContains&&l.push({message:this.translate("error_minContains",[c,s.minContains],s),path:a}):h&&l.push({message:this.translate("error_contains",null,s),path:a}),typeof s.maxContains<"u"&&c>s.maxContains&&l.push({message:this.translate("error_maxContains",[c,s.maxContains],s),path:a}),l},if(s,o,a){if(typeof s.then>"u"&&typeof s.else>"u")return[];const l=this._validateSchema(s.if,o,a);let c=[],h=[];return typeof s.then<"u"&&(c=this._validateSchema(s.then,o,a)),typeof s.else<"u"&&(h=this._validateSchema(s.else,o,a)),s.if===!0?c:s.if===!1?h:l.length===0?c:l.length>0?h:[]},const(s,o,a){return JSON.stringify(s.const)===JSON.stringify(o)?[]:[{path:a,property:"const",message:this.translate("error_const",null,s)}]},enum(s,o,a){const l=JSON.stringify(o);return s.enum.some(h=>l===JSON.stringify(h))?[]:[{path:a,property:"enum",message:this.translate("error_enum",null,s)}]},extends(s,o,a){const l=(c,h)=>(c.push(...this._validateSchema(h,o,a)),c);return s.extends.reduce(l,[])},allOf(s,o,a){const l=(c,h)=>(c.push(...this._validateSchema(h,o,a)),c);return s.allOf.reduce(l,[])},anyOf(s,o,a){return s.anyOf.some(c=>!this._validateSchema(c,o,a).length)?[]:[{path:a,property:"anyOf",message:this.translate("error_anyOf",null,s)}]},oneOf(s,o,a){let l=0;const c=[];s.oneOf.forEach((u,d)=>{const f=this._validateSchema(u,o,a);f.length||l++,f.forEach(p=>{p.path=`${a}.oneOf[${d}]${p.path.substr(a.length)}`}),c.push(...f)});const h=[];return l!==1&&(h.push({path:a,property:"oneOf",message:this.translate("error_oneOf",[l],s)}),h.push(...c)),h},not(s,o,a){return this._validateSchema(s.not,o,a).length?[]:[{path:a,property:"not",message:this.translate("error_not",null,s)}]},type(s,o,a){if(Array.isArray(s.type)){if(!s.type.some(c=>this._checkType(c,o)))return[{path:a,property:"type",message:this.translate("error_type_union",null,s)}]}else if(["date","time","datetime-local"].includes(s.format)&&s.type==="integer"){if(!this._checkType("string",`${o}`))return[{path:a,property:"type",message:this.translate("error_type",[s.format],s)}]}else if(!this._checkType(s.type,o))return[{path:a,property:"type",message:this.translate("error_type",[s.type],s)}];return[]},disallow(s,o,a){if(Array.isArray(s.disallow)){if(s.disallow.some(c=>this._checkType(c,o)))return[{path:a,property:"disallow",message:this.translate("error_disallow_union",null,s)}]}else if(this._checkType(s.disallow,o))return[{path:a,property:"disallow",message:this.translate("error_disallow",[s.disallow],s)}];return[]}},this._validateNumberSubSchema={multipleOf(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},divisibleBy(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},maximum(s,o,a){let l=s.exclusiveMaximum?o<s.maximum:o<=s.maximum;return window.math?l=window.math[s.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(o),window.math.bignumber(s.maximum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMaximum?"lt":"lte"](new window.Decimal(s.maximum))),l?[]:[{path:a,property:"maximum",message:this.translate(s.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[s.maximum],s)}]},minimum(s,o,a){let l=s.exclusiveMinimum?o>s.minimum:o>=s.minimum;return window.math?l=window.math[s.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(o),window.math.bignumber(s.minimum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMinimum?"gt":"gte"](new window.Decimal(s.minimum))),l?[]:[{path:a,property:"minimum",message:this.translate(s.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[s.minimum],s)}]}},this._validateStringSubSchema={maxLength(s,o,a){const l=[];return`${o}`.length>s.maxLength&&l.push({path:a,property:"maxLength",message:this.translate("error_maxLength",[s.maxLength],s)}),l},minLength(s,o,a){return`${o}`.length<s.minLength?[{path:a,property:"minLength",message:this.translate(s.minLength===1?"error_notempty":"error_minLength",[s.minLength],s)}]:[]},pattern(s,o,a){return new RegExp(s.pattern).test(o)?[]:[{path:a,property:"pattern",message:s.options&&s.options.patternmessage?s.options.patternmessage:this.translate("error_pattern",[s.pattern],s)}]}},this._validateArraySubSchema={items(s,o,a){const l=[];if(Array.isArray(s.items))for(let c=0;c<o.length;c++)if(s.items[c])l.push(...this._validateSchema(s.items[c],o[c],`${a}.${c}`));else{if(s.additionalItems===!0)break;if(s.additionalItems)l.push(...this._validateSchema(s.additionalItems,o[c],`${a}.${c}`));else if(s.additionalItems===!1){l.push({path:a,property:"additionalItems",message:this.translate("error_additionalItems",null,s)});break}else break}else o.forEach((c,h)=>{l.push(...this._validateSchema(s.items,c,`${a}.${h}`))});return l},maxItems(s,o,a){return o.length>s.maxItems?[{path:a,property:"maxItems",message:this.translate("error_maxItems",[s.maxItems],s)}]:[]},minItems(s,o,a){return o.length<s.minItems?[{path:a,property:"minItems",message:this.translate("error_minItems",[s.minItems],s)}]:[]},uniqueItems(s,o,a){const l={};for(let c=0;c<o.length;c++){const h=JSON.stringify(o[c]);if(l[h])return[{path:a,property:"uniqueItems",message:this.translate("error_uniqueItems",null,s)}];l[h]=!0}return[]}},this._validateObjectSubSchema={maxProperties(s,o,a){return Object.keys(o).length>s.maxProperties?[{path:a,property:"maxProperties",message:this.translate("error_maxProperties",[s.maxProperties],s)}]:[]},minProperties(s,o,a){return Object.keys(o).length<s.minProperties?[{path:a,property:"minProperties",message:this.translate("error_minProperties",[s.minProperties],s)}]:[]},required(s,o,a){const l=[];return Array.isArray(s.required)&&s.required.forEach(c=>{if(typeof o[c]<"u")return;const h=this.jsoneditor.getEditor(`${a}.${c}`);h&&h.dependenciesFulfilled===!1||h&&["button","info"].includes(h.schema.format||h.schema.type)||l.push({path:a,property:"required",message:this.translate("error_required",[s&&s.properties&&s.properties[c]&&s.properties[c].title?s.properties[c].title:c],s)})}),l},properties(s,o,a,l){const c=[];return Object.entries(s.properties).forEach(([h,u])=>{l[h]=!0,c.push(...this._validateSchema(u,o[h],`${a}.${h}`))}),c},patternProperties(s,o,a,l){const c=[];return Object.entries(s.patternProperties).forEach(([h,u])=>{const d=new RegExp(h);Object.entries(o).forEach(([f,p])=>{d.test(f)&&(l[f]=!0,c.push(...this._validateSchema(u,p,`${a}.${f}`)))})}),c}},this._validateObjectSubSchema2={propertyNames(s,o,a,l){const c=[],h=Object.keys(o);let u=null;for(let d=0;d<h.length;d++){let f="",p=!1;if(u=h[d],typeof s.propertyNames=="boolean"){if(s.propertyNames===!0)continue;c.push({path:a,property:"propertyNames",message:this.translate("error_property_names_false",[u],s)});break}if(p=Object.entries(s.propertyNames).every(([g,m])=>{let y=!1,_=null;switch(g){case"maxLength":if(typeof m!="number"){f="error_property_names_maxlength";break}if(u.length>m){f="error_property_names_exceeds_maxlength";break}return!0;case"const":if(m!==u){f="error_property_names_const_mismatch";break}return!0;case"enum":if(!Array.isArray(m)){f="error_property_names_enum";break}if(m.forEach(v=>{v===u&&(y=!0)}),!y){f="error_property_names_enum_mismatch";break}return!0;case"pattern":if(typeof m!="string"){f="error_property_names_pattern";break}if(_=new RegExp(m),!_.test(u)){f="error_property_names_pattern_mismatch";break}return!0;default:return c.push({path:a,property:"propertyNames",message:this.translate("error_property_names_unsupported",[g],s)}),!1}return c.push({path:a,property:"propertyNames",message:this.translate(f,[u],s)}),!1}),!p)break}return c},additionalProperties(s,o,a,l){const c=[],h=Object.keys(o);for(let u=0;u<h.length;u++){const d=h[u];if(!l[d])if(s.additionalProperties){if(s.additionalProperties===!0)break;c.push(...this._validateSchema(s.additionalProperties,o[d],`${a}.${d}`))}else{c.push({path:a,property:"additionalProperties",message:this.translate("error_additional_properties",[d],s)});break}}return c},dependencies(s,o,a){const l=[];return Object.entries(s.dependencies).forEach(([c,h])=>{typeof o[c]>"u"||(Array.isArray(h)?h.forEach(u=>{typeof o[u]>"u"&&l.push({path:a,property:"dependencies",message:this.translate("error_dependency",[u],s)})}):l.push(...this._validateSchema(h,o,a)))}),l}}}fitTest(e,t,r=1e7){const n={match:0,extra:0};if(typeof e=="object"&&e!==null){const s=this._getSchema(t);if(s.anyOf){let o={...n};for(const a of s.anyOf){const l=this.fitTest(e,a,r);(l.match>o.match||l.match===o.match&&l.extra<o.extra)&&(o=l)}return o}else{const o=this._getSchema(t).properties;for(const a in o){if(!Is(o,a)){n.extra+=r;continue}if(typeof e[a]=="object"&&typeof o[a]=="object"&&typeof o[a].properties=="object"){const l=this.fitTest(e[a],o[a],r/100);n.match+=l.match,n.extra+=l.extra}typeof e[a]<"u"&&(n.match+=r)}}}return n}_getSchema(e){return typeof e>"u"?Ke({},this.jsoneditor.expandRefs(this.schema)):e}validate(e){return this._validateSchema(this.schema,e)}_validateSchema(e,t,r){const n=[];return r=r||this.jsoneditor.root.formname,e=Ke({},this.jsoneditor.expandRefs(e)),typeof t>"u"?this._validateV3Required(e,t,r):(Object.keys(e).forEach(s=>{this._validateSubSchema[s]&&n.push(...this._validateSubSchema[s].call(this,e,t,r))}),n.push(...this._validateByValueType(e,t,r)),e.links&&e.links.forEach((s,o)=>{s.rel&&s.rel.toLowerCase()==="describedby"&&(e=this._expandSchemaLink(e,o),n.push(...this._validateSchema(e,t,r,this.translate)))}),["date","time","datetime-local"].includes(e.format)&&n.push(...this._validateDateTimeSubSchema(e,t,r)),["uuid"].includes(e.format)&&n.push(...this._validateUUIDSchema(e,t,r)),n.push(...this._validateCustomValidator(e,t,r)),this._removeDuplicateErrors(n))}_expandSchemaLink(e,t){const r=e.links[t].href,n=this.jsoneditor.root.getValue(),s=this.jsoneditor.compileTemplate(r,this.jsoneditor.template),o=document.location.origin+document.location.pathname+s(n);return e.links=e.links.slice(0,t).concat(e.links.slice(t+1)),Ke({},e,this.jsoneditor.refs[o])}_validateV3Required(e,t,r){return(typeof e.required<"u"&&e.required===!0||typeof e.required>"u"&&this.jsoneditor.options.required_by_default===!0)&&e.type!=="info"?[{path:r,property:"required",message:this.translate("error_notset",null,e)}]:[]}_validateByValueType(e,t,r){const n=[];if(t===null)return n;if(typeof t=="number")Object.keys(e).forEach(s=>{this._validateNumberSubSchema[s]&&n.push(...this._validateNumberSubSchema[s].call(this,e,t,r))});else if(typeof t=="string")Object.keys(e).forEach(s=>{this._validateStringSubSchema[s]&&n.push(...this._validateStringSubSchema[s].call(this,e,t,r))});else if(Array.isArray(t))Object.keys(e).forEach(s=>{this._validateArraySubSchema[s]&&n.push(...this._validateArraySubSchema[s].call(this,e,t,r))});else if(typeof t=="object"){const s={};Object.keys(e).forEach(o=>{this._validateObjectSubSchema[o]&&n.push(...this._validateObjectSubSchema[o].call(this,e,t,r,s))}),typeof e.additionalProperties>"u"&&this.jsoneditor.options.no_additional_properties&&!e.oneOf&&!e.anyOf&&!e.allOf&&(e.additionalProperties=!1),Object.keys(e).forEach(o=>{typeof this._validateObjectSubSchema2[o]<"u"&&n.push(...this._validateObjectSubSchema2[o].call(this,e,t,r,s))})}return n}_validateUUIDSchema(e,t,r){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?[]:[{path:r,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],e)}]}_validateNumberSubSchemaMultipleDivisible(e,t,r){const n=e.multipleOf||e.divisibleBy;let s=t/n===Math.floor(t/n);return window.math?s=window.math.mod(window.math.bignumber(t),window.math.bignumber(n)).equals(0):window.Decimal&&(s=new window.Decimal(t).mod(new window.Decimal(n)).equals(0)),s?[]:[{path:r,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[n],e)}]}_validateDateTimeSubSchema(e,t,r){const n=(h,u,d)=>u*1<1?[{path:d,property:"format",message:this.translate("error_invalid_epoch",null,h)}]:u!==Math.abs(parseInt(u))?[{path:d,property:"format",message:this.translate(`error_${h.format.replace(/-/g,"_")}`,[c],h)}]:[],s=(h,u,d,f)=>{if(u!==""){let p;if(f.flatpickr.config.mode!=="single"){const g=f.flatpickr.config.mode==="range"?f.flatpickr.l10n.rangeSeparator:", ";p=f.flatpickr.selectedDates.map(y=>f.flatpickr.formatDate(y,f.flatpickr.config.dateFormat)).join(g)}try{if(p){if(p!==u)throw new Error(`${f.flatpickr.config.mode} mismatch`)}else if(f.flatpickr.formatDate(f.flatpickr.parseDate(u,f.flatpickr.config.dateFormat),f.flatpickr.config.dateFormat)!==u)throw new Error("mismatch")}catch{const m=f.flatpickr.config.errorDateFormat!==void 0?f.flatpickr.config.errorDateFormat:f.flatpickr.config.dateFormat;return[{path:d,property:"format",message:this.translate(`error_${f.format.replace(/-/g,"_")}`,[m],h)}]}}return[]},o={date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/},a={date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'},l=this.jsoneditor.getEditor(r),c=l&&l.flatpickr?l.flatpickr.config.dateFormat:a[e.format];if(e.type==="integer")return n(e,t,r);if(!l||!l.flatpickr){if(!o[e.format].test(t))return[{path:r,property:"format",message:this.translate(`error_${e.format.replace(/-/g,"_")}`,[c],e)}]}else if(l)return s(e,t,r,l);return[]}_validateCustomValidator(e,t,r){const n=[];n.push(...Ske.call(this,e,t,r,this.translate));const s=o=>{n.push(...o.call(this,e,t,r))};return this.defaults.custom_validators.forEach(s),this.options.custom_validators&&this.options.custom_validators.forEach(s),n}_removeDuplicateErrors(e){return e.reduce((t,r)=>{let n=!0;return t||(t=[]),t.forEach(s=>{s.message===r.message&&s.path===r.path&&s.property===r.property&&(s.errorcount++,n=!1)}),n&&(r.errorcount=1,t.push(r)),t},[])}_checkType(e,t){const r={string:n=>typeof n=="string",number:n=>typeof n=="number",integer:n=>typeof n=="number"&&n===Math.floor(n),boolean:n=>typeof n=="boolean",array:n=>Array.isArray(n),object:n=>n!==null&&!Array.isArray(n)&&typeof n=="object",null:n=>n===null};return typeof e=="string"?r[e]?r[e](t):!0:!this._validateSchema(e,t).length}}class Cke extends xn{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4}enable(){if(!this.always_disabled){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,super.enable()}}disable(e){if(e&&(this.always_disabled=!0),this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable(e);this.switcher.disabled=!0,super.disable()}switchEditor(e){this.lastType=this.type,this.editors[e]||this.buildChildEditor(e);let t=this.getValue();this.type=e,this.register(),this.editors.forEach((r,n)=>{r&&(this.type===n?(this.keep_only_existing_values&&(t=nke(r.getValue(),t)),(this.keep_values||this.if)&&r.setValue(t,!0),r.container.style.display=""):r.container.style.display="none")}),this.refreshValue(),this.refreshHeaderText()}buildChildEditor(e){var o;const t=this.types[e],r=this.theme.getChildEditorHolder();this.editor_holder.appendChild(r);let n;typeof t=="string"?(n=Ke({},this.schema),n.type=t):(n=Ke({},this.schema,t),n=this.jsoneditor.expandRefs(n),t&&t.required&&Array.isArray(t.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(n.required=this.schema.required.concat(t.required))),(o=n==null?void 0:n.options)!=null&&o.dependencies&&delete n.options.dependencies;const s=this.jsoneditor.getEditorClass(n);this.editors[e]=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:n,container:r,path:this.path,parent:this,required:!0}),this.editors[e].preBuild(),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].header&&this.theme.visuallyHidden(this.editors[e].header),this.editors[e].option=this.switcher_options[e],r.addEventListener("change_header_text",()=>{this.refreshHeaderText()}),e!==this.type&&(r.style.display="none")}preBuild(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,typeof this.jsoneditor.options.keep_oneof_values<"u"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),typeof this.options.keep_oneof_values<"u"&&(this.keep_values=this.options.keep_oneof_values),this.keep_only_existing_values=!1,typeof this.jsoneditor.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.jsoneditor.options.keep_only_existing_values),typeof this.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.options.keep_only_existing_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else if(this.schema.if)this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:"then"},this.elseSchema={title:"else"},this.types=[],this.schema.then&&J_(this.thenSchema,this.schema,this.schema.then),this.schema.else&&J_(this.elseSchema,this.schema,this.schema.else),this.types.push(this.thenSchema),this.types.push(this.elseSchema),this.types.forEach(e=>{delete e.if,delete e.then,delete e.else}),delete this.schema.if;else{if(!this.schema.type||this.schema.type==="any"){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){let{disallow:e}=this.schema;(typeof e!="object"||!Array.isArray(e))&&(e=[e]);const t=[];this.types.forEach(r=>{e.includes(r)||t.push(r)}),this.types=t}}else Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)}build(){const{container:e}=this;this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired()),this.switcher=this.theme.getSwitcher(this.display_text),this.switcher.setAttribute("id",this.formname+"switcher"),this.switcherLabel=this.theme.getHiddenLabel(this.formname+" switcher"),this.switcherLabel.setAttribute("for",this.formname+"switcher"),this.if||(this.container.appendChild(this.header),e.appendChild(this.switcherLabel),e.appendChild(this.switcher)),this.switcher.addEventListener("change",r=>{r.preventDefault(),r.stopPropagation(),this.switchEditor(this.display_text.indexOf(r.currentTarget.value)),this.onChange(!0)}),this.editor_holder=document.createElement("div"),e.appendChild(this.editor_holder);const t={};this.jsoneditor.options.custom_validators&&(t.custom_validators=this.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),this.types.forEach((r,n)=>{this.editors[n]=!1;let s;typeof r=="string"?(s=Ke({},this.schema),s.type=r):(s=Ke({},this.schema,r),r.required&&Array.isArray(r.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(s.required=this.schema.required.concat(r.required))),this.validators[n]=new Gpe(this.jsoneditor,s,t,this.defaults)}),this.jsoneditor.on("change",()=>{this.switchIf()}),this.switchEditor(0)}onChildEditorChange(e){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),super.onChildEditorChange()}refreshHeaderText(){const e=this.getDisplayText(this.types);Array.from(this.switcher_options).forEach((t,r)=>{t.textContent=e[r]})}refreshValue(){this.editors[this.type]&&(this.value=this.editors[this.type].getValue())}switchIf(){if(this.ifSchema&&this.value){const e=this.getIfType(this.value);this.lastType!==e&&(this.switchEditor(e),this.editors[this.type].setValue(this.value,!0)),this.switcher.value=this.display_text[this.type]}}getIfType(e){return this.jsoneditor.validator._validateSchema(this.ifSchema,e).length===0?0:1}setValue(e,t){const r=this.type;let n={match:0,extra:0,i:this.type};const s={match:0,i:null};this.validators.forEach((l,c)=>{let h=null;typeof this.anyOf<"u"&&this.anyOf&&(h=l.fitTest(e),(n.match<h.match||n.match===h.match&&n.extra>h.extra)&&(n=h,n.i=c)),!l.validate(e).length&&s.i===null?(s.i=c,h!==null&&(s.match=h.match)):n=s});let o=s.i;typeof this.anyOf<"u"&&this.anyOf&&s.match<n.match&&(o=n.i),this.if&&(o=this.getIfType(e)),o===null&&(o=this.type),this.type=o,this.switcher.value=this.display_text[o];const a=this.type!==r;a&&(this.switchEditor(this.type),this.editors[this.type].setValue(e,t)),typeof e<"u"&&this.editors[this.type].setValue(e,t),this.refreshValue(),this.onChange(a)}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}showValidationErrors(e){if(this.oneOf||this.anyOf){const t=this.oneOf?"oneOf":"anyOf";this.editors.forEach((r,n)=>{if(!r)return;const s=`${this.path}.${t}[${n}]`,o=(a,l)=>{if(l.path.startsWith(s)||l.path===s.substr(0,l.path.length)){const c=Ke({},l);l.path.startsWith(s)&&(c.path=this.path+c.path.substr(s.length)),a.push(c)}return a};r.showValidationErrors(e.reduce(o,[]))})}else this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}addLinks(){}}class Tke extends xn{getValue(){if(this.dependenciesFulfilled)return null}setValue(){this.onChange()}getNumColumns(){return 2}}const Ake={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block"};class Upe extends xn{constructor(e,t,r){super(e,t),this.currentDepth=r}getDefault(){return Ke({},this.schema.default||{})}getChildEditors(){return this.editors}register(){super.register(),this.editors&&Object.values(this.editors).forEach(e=>e.register())}unregister(){super.unregister(),this.editors&&Object.values(this.editors).forEach(e=>e.unregister())}getNumColumns(){return Math.max(Math.min(12,this.maxwidth),3)}enable(){this.always_disabled||(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),super.enable(),this.editors&&Object.values(this.editors).forEach(e=>{(e.isActive()||e.isUiOnly)&&e.enable(),e.optInCheckbox.disabled=!1}))}disable(e){e&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),super.disable(),this.editors&&Object.values(this.editors).forEach(t=>{(t.isActive()||t.isUiOnly)&&t.disable(e),t.optInCheckbox.disabled=!0})}layoutEditors(){let e,t;if(!this.row_container)return;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((c,h)=>{let u=this.editors[c].schema.propertyOrder,d=this.editors[h].schema.propertyOrder;return typeof u!="number"&&(u=1e3),typeof d!="number"&&(d=1e3),u-d});let r;const n=this.format==="categories",s=[];let o=null,a=null,l;if(this.format==="grid-strict"){let c=0;if(l=[],this.property_order.forEach(h=>{const u=this.editors[h];if(u.property_removed)return;const d=u.options.hidden?0:u.options.grid_columns||u.getNumColumns(),f=u.options.hidden?0:u.options.grid_offset||0,p=u.options.hidden?!1:u.options.grid_break||!1,g=u.options.hidden?0:u.container.offsetHeight,m={key:h,width:d,offset:f,height:g};l.push(m),s[c]=l,p&&(c++,l=[])}),this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),t=0;t<s[e].length;t++)o=s[e][t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e][t].width,s[e][t].offset),l.appendChild(a.container)}else if(this.format==="grid"){for(this.property_order.forEach(c=>{const h=this.editors[c];if(h.property_removed)return;let u=!1;const d=h.options.hidden?0:h.options.grid_columns||h.getNumColumns(),f=h.options.hidden?0:h.container.offsetHeight;for(let p=0;p<s.length;p++)s[p].width+d<=12&&(!f||s[p].minh*.5<f&&s[p].maxh*2>f)&&(u=p);u===!1&&(s.push({width:0,minh:999999,maxh:0,editors:[]}),u=s.length-1),s[u].editors.push({key:c,width:d,height:f}),s[u].width+=d,s[u].minh=Math.min(s[u].minh,f),s[u].maxh=Math.max(s[u].maxh,f)}),e=0;e<s.length;e++)if(s[e].width<12){let c=!1,h=0;for(t=0;t<s[e].editors.length;t++)(c===!1||s[e].editors[t].width>s[e].editors[c].width)&&(c=t),s[e].editors[t].width*=12/s[e].width,s[e].editors[t].width=Math.floor(s[e].editors[t].width),h+=s[e].editors[t].width;h<12&&(s[e].editors[c].width+=12-h),s[e].width=12}if(this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),t=0;t<s[e].editors.length;t++)o=s[e].editors[t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e].editors[t].width),l.appendChild(a.container)}else{if(r=document.createElement("div"),n){const c=document.createElement("div"),h=this.theme.getTopTabHolder(this.translateProperty(this.schema.title)),u=this.theme.getTopTabContentHolder(h);for(this.property_order.forEach(p=>{const g=this.editors[p];if(g.property_removed)return;const m=this.theme.getTabContent(),y=g.schema&&(g.schema.type==="object"||g.schema.type==="array");m.isObjOrArray=y;const _=this.theme.getGridRow();g.tab||(typeof this.basicPane>"u"?this.addRow(g,h,m):this.addRow(g,h,this.basicPane)),m.id=this.getValidId(g.tab_text.textContent),y?(m.appendChild(_),u.appendChild(m),this.theme.addTopTab(h,g.tab)):(c.appendChild(_),u.childElementCount>0?u.firstChild.isObjOrArray&&(m.appendChild(c),u.insertBefore(m,u.firstChild),this.theme.insertBasicTopTab(g.tab,h),g.basicPane=m):(m.appendChild(c),u.appendChild(m),this.theme.addTopTab(h,g.tab),g.basicPane=m)),g.options.hidden?g.container.style.display="none":this.theme.setGridColumnSize(g.container,12),_.appendChild(g.container),g.rowPane=m});this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);const d=this.tabs_holder.parentNode;d.removeChild(d.firstChild),d.appendChild(h),this.tabPanesContainer=u,this.tabs_holder=h;const f=this.theme.getFirstTab(this.tabs_holder);f&&Ao(f,"click");return}this.property_order.forEach(c=>{const h=this.editors[c];h.property_removed||(l=this.theme.getGridRow(),r.appendChild(l),h.options.hidden?h.container.style.display="none":this.theme.setGridColumnSize(h.container,12),l.appendChild(h.container))})}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(r)}getPropertySchema(e){let t=this.schema.properties[e]||{};t=Ke({},t);let r=!!this.schema.properties[e];return this.schema.patternProperties&&Object.keys(this.schema.patternProperties).forEach(n=>{new RegExp(n).test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[n]),r=!0)}),!r&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(t=Ke({},this.schema.additionalProperties)),t}preBuild(){if(super.preBuild(),this.editors={},this.cached_editors={},this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)Object.entries(this.schema.properties).forEach(([e,t])=>{const r=this.jsoneditor.getEditorClass(t);this.editors[e]=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:t,path:`${this.path}.${e}`,parent:this,compact:!0,required:!0},this.currentDepth+1),this.editors[e].preBuild();const n=this.editors[e].options.hidden?0:this.editors[e].options.grid_columns||this.editors[e].getNumColumns();this.minwidth+=n,this.maxwidth+=n}),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?this.schema.defaultProperties=Object.keys(this.schema.properties).filter(e=>this.isRequiredObject({key:e,schema:this.schema.properties[e]})):this.schema.defaultProperties=Object.keys(this.schema.properties)),this.maxwidth+=1,Array.isArray(this.schema.defaultProperties)&&this.schema.defaultProperties.forEach(e=>{this.addObjectProperty(e,!0),this.editors[e]&&(this.minwidth=Math.max(this.minwidth,this.editors[e].options.grid_columns||this.editors[e].getNumColumns()),this.maxwidth+=this.editors[e].options.grid_columns||this.editors[e].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((e,t)=>{let r=this.editors[e].schema.propertyOrder,n=this.editors[t].schema.propertyOrder;return typeof r!="number"&&(r=1e3),typeof n!="number"&&(n=1e3),r-n})}addTab(e){const t=this.rows[e].schema&&(this.rows[e].schema.type==="object"||this.rows[e].schema.type==="array");this.tabs_holder&&(this.rows[e].tab_text=document.createElement("span"),t?this.rows[e].tab_text.textContent=this.rows[e].getHeaderText():this.rows[e].tab_text.textContent=typeof this.schema.basicCategoryTitle>"u"?"Basic":this.schema.basicCategoryTitle,this.rows[e].tab=this.theme.getTopTab(this.rows[e].tab_text,this.getValidId(this.rows[e].tab_text.textContent)),this.rows[e].tab.addEventListener("click",r=>{this.active_tab=this.rows[e].tab,this.refreshTabs(),r.preventDefault(),r.stopPropagation()}))}addRow(e,t,r){const n=this.rows.length,s=e.schema.type==="object"||e.schema.type==="array";this.rows[n]=e,this.rows[n].rowPane=r,s?(this.addTab(n),this.theme.addTopTab(t,this.rows[n].tab)):typeof this.basicTab>"u"?(this.addTab(n),this.basicTab=n,this.basicPane=r,this.theme.addTopTab(t,this.rows[n].tab)):(this.rows[n].tab=this.rows[this.basicTab].tab,this.rows[n].tab_text=this.rows[this.basicTab].tab_text,this.rows[n].rowPane=this.rows[this.basicTab].rowPane)}refreshTabs(e){const t=typeof this.basicTab<"u";let r=!1;this.rows.forEach(n=>{!n.tab||!n.rowPane||!n.rowPane.parentNode||t&&n.tab===this.rows[this.basicTab].tab&&r||(e?n.tab_text.textContent=n.getHeaderText():(t&&n.tab===this.rows[this.basicTab].tab&&(r=!0),n.tab===this.active_tab?this.theme.markTabActive(n):this.theme.markTabInactive(n)))})}build(){const e=this.format==="categories";if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,Object.entries(this.editors).forEach(([t,r])=>{const n=this.theme.getTableCell();this.editor_holder.appendChild(n),r.setContainer(n),r.build(),r.postBuild(),r.setOptInCheckbox(r.header),r.setValue(r.getDefault(),!0),this.editors[t].options.hidden&&(n.style.display="none"),this.editors[t].options.input_width&&(n.style.width=this.editors[t].options.input_width)});else{if(this.options.table)throw new Error("Not supported yet");{this.header="",this.options.compact||(this.header=document.createElement("span"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.title.classList.add("je-object__title"),this.controls=this.theme.getButtonHolder(),this.controls.classList.add("je-object__controls"),this.container.appendChild(this.title),this.container.appendChild(this.controls),this.container.classList.add("je-object__container"),this.editjson_holder=this.theme.getModal(),this.editjson_textarea_label=this.theme.getHiddenLabel(this.translate("button_edit_json")),this.editjson_textarea_label.setAttribute("for",this.path+"-edit-json-textarea"),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.setAttribute("id",this.path+"-edit-json-textarea"),this.editjson_textarea.setAttribute("aria-labelledby",this.path+"-edit-json-textarea"),this.editjson_textarea.classList.add("je-edit-json--textarea"),this.editjson_save=this.getButton("button_save","save","button_save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.saveJSON()}),this.editjson_copy=this.getButton("button_copy","copy","button_copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.copyJSON()}),this.editjson_cancel=this.getButton("button_cancel","cancel","button_cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea_label),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.classList.add("property-selector"),this.addproperty_add=this.getButton("button_add","add","button_add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input_label=this.theme.getHiddenLabel(this.translate("button_properties")),this.addproperty_input_label.setAttribute("for",this.path+"-property-selector"),this.addproperty_input.classList.add("property-selector-input"),this.addproperty_input.setAttribute("id",this.path+"-property-selector"),this.addproperty_input.setAttribute("aria-labelledby",this.path+"-property-selector"),this.addproperty_add.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),this.addproperty_input.value){if(this.editors[this.addproperty_input.value]){window.alert("there is already a property with that name");return}this.addObjectProperty(this.addproperty_input.value),this.editors[this.addproperty_input.value]&&this.editors[this.addproperty_input.value].disable(),this.onChange(!0)}}),this.addproperty_input.addEventListener("input",r=>{r.target.previousSibling.previousSibling.childNodes.forEach(n=>{let s=n.innerText,o=r.target.value;this.options.case_sensitive_property_search||this.jsoneditor.options.case_sensitive_property_search||(s=s.toLowerCase(),o=o.toLowerCase()),s.includes(o)?n.style.display="":n.style.display="none"})}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input_label),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);const t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.onOutsideModalClickListener=this.onOutsideModalClick.bind(this),document.addEventListener("click",this.onOutsideModalClickListener,!0),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),e?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),Object.values(this.editors).forEach(r=>{const n=this.theme.getTabContent(),s=this.theme.getGridColumn(),o=!!(r.schema&&(r.schema.type==="object"||r.schema.type==="array"));if(n.isObjOrArray=o,e){if(o){const a=this.theme.getGridContainer();a.appendChild(s),n.appendChild(a),this.tabPanesContainer.appendChild(n),this.row_container=a}else typeof this.row_container_basic>"u"&&(this.row_container_basic=this.theme.getGridContainer(),n.appendChild(this.row_container_basic),this.tabPanesContainer.childElementCount===0?this.tabPanesContainer.appendChild(n):this.tabPanesContainer.insertBefore(n,this.tabPanesContainer.childNodes[1])),this.row_container_basic.appendChild(s);this.addRow(r,this.tabs_holder,n),n.id=this.getValidId(r.schema.title)}else this.row_container.appendChild(s);r.setContainer(s),r.build(),r.postBuild(),r.setOptInCheckbox(r.header)}),this.rows[0]&&Ao(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse","button_collapse"),this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.collapsed?(this.editor_holder.style.display="",this.collapsed=!1,this.setButtonText(this.collapse_control,"","collapse","button_collapse")):(this.editor_holder.style.display="none",this.collapsed=!0,this.setButtonText(this.collapse_control,"","expand","button_expand"))}),this.options.collapsed&&Ao(this.collapse_control,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","button_edit_json"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleEditJSON()}),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[0]),this.schema.options&&typeof this.schema.options.disable_edit_json<"u"?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("properties","edit_properties","button_object_properties"),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleAddProperty()}),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties()}}this.options.table_row?(this.editor_holder=this.container,this.property_order.forEach(t=>{this.editor_holder.appendChild(this.editors[t].container)})):(this.layoutEditors(),this.layoutEditors()),(this.schema.readOnly||this.schema.readonly)&&this.disable()}deactivateNonRequiredProperties(){const e=this.jsoneditor.options.show_opt_in,t=typeof this.options.show_opt_in<"u",r=t&&this.options.show_opt_in===!0,n=t&&this.options.show_opt_in===!1;(r||!n&&e||!t&&e)&&Object.entries(this.editors).forEach(([s,o])=>{this.isRequiredObject(o)||this.editors[s].deactivate()})}showEditJSON(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=`${this.editjson_control.offsetLeft}px`,this.editjson_holder.style.top=`${this.editjson_control.offsetTop+this.editjson_control.offsetHeight}px`,this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)}hideEditJSON(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)}copyJSON(){this.editjson_holder&&navigator.clipboard.writeText(this.editjson_textarea.value).catch(e=>window.alert(e))}saveJSON(){if(this.editjson_holder)try{const e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON(),this.onChange(!0)}catch(e){throw window.alert("invalid JSON"),e}}toggleEditJSON(){this.editing_json?this.hideEditJSON():this.showEditJSON()}insertPropertyControlUsingPropertyOrder(e,t,r){let n;this.schema.properties[e]&&(n=this.schema.properties[e].propertyOrder),typeof n!="number"&&(n=1e3),t.propertyOrder=n;for(let s=0;s<r.childNodes.length;s++){const o=r.childNodes[s];if(t.propertyOrder<o.propertyOrder){this.addproperty_list.insertBefore(t,o),t=null;break}}t&&this.addproperty_list.appendChild(t)}addPropertyCheckbox(e){let t;const r=this.theme.getCheckbox();this.schema.properties[e]&&this.schema.properties[e].title?t=this.schema.properties[e].title:t=e;const n=this.theme.getCheckboxLabel(t),s=this.theme.getFormControl(n,r,null,null,this.path+"-"+e);return s.style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),r.checked=e in this.editors,r.addEventListener("change",()=>{r.checked?this.addObjectProperty(e):this.removeObjectProperty(e),this.onChange(!0)}),this.addproperty_checkboxes[e]=r,r}showAddProperty(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=`${this.addproperty_button.offsetLeft}px`,this.addproperty_holder.style.top=`${this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight}px`,this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())}hideAddProperty(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)}toggleAddProperty(){this.adding_property?this.hideAddProperty():this.showAddProperty()}removeObjectProperty(e){this.editors[e]&&(this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors())}getSchemaOnMaxDepth(e){return Object.keys(e).reduce((t,r)=>{switch(r){case"$ref":return t;case"properties":case"items":return{...t,[r]:{}};case"additionalProperties":case"propertyNames":return{...t,[r]:!0};default:return{...t,[r]:e[r]}}},{})}addObjectProperty(e,t){if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[e])&&(!this.schema.patternProperties||!Object.keys(this.schema.patternProperties).find(o=>new RegExp(o).test(e))))return;const r=this.getPropertySchema(e);typeof r.propertyOrder!="number"&&(r.propertyOrder=Object.keys(this.editors).length+1e3);const n=this.jsoneditor.getEditorClass(r),{max_depth:s}=this.jsoneditor.options;if(this.editors[e]=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:s&&this.currentDepth>=s?this.getSchemaOnMaxDepth(r):r,path:`${this.path}.${e}`,parent:this},this.currentDepth+1),this.editors[e].preBuild(),!t){const o=this.theme.getChildEditorHolder();this.editor_holder.appendChild(o),this.editors[e].setContainer(o),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].setOptInCheckbox(n.header),this.editors[e].activate()}this.cached_editors[e]=this.editors[e]}t||(this.refreshValue(),this.layoutEditors())}}onOutsideModalClick(e){const t=e.path||e.composedPath&&e.composedPath();this.addproperty_holder&&!this.addproperty_holder.contains(t[0])&&this.adding_property&&(e.preventDefault(),e.stopPropagation(),this.toggleAddProperty())}onChildEditorChange(e){this.refreshValue(),super.onChildEditorChange(e)}canHaveAdditionalProperties(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:typeof this.schema.additionalProperties=="object"&&this.schema.additionalProperties!==null?!0:typeof this.options.no_additional_properties=="boolean"?!this.options.no_additional_properties:typeof this.jsoneditor.options.no_additional_properties=="boolean"?!this.jsoneditor.options.no_additional_properties:!0}destroy(){Object.values(this.cached_editors).forEach(e=>e.destroy()),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClickListener,!0),super.destroy()}getValue(){if(!this.dependenciesFulfilled)return;const e=super.getValue(),t=r=>typeof r>"u"||r===""||r===Object(r)&&Object.keys(r).length===0&&r.constructor===Object;return e&&(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)&&Object.keys(e).forEach(r=>{t(e[r])&&delete e[r]}),e}refreshValue(){this.value={},this.editors&&(Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&(this.editors[e].refreshValue(),this.value[e]=this.editors[e].getValue())}),Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&this.activateDependentRequired(this.editors[e].key)}),this.adding_property&&this.refreshAddProperties())}activateDependentRequired(e){this.getDependentRequired(e).forEach(r=>{let n;Object.entries(this.cached_editors).forEach(([s,o])=>{o.key===r&&(n=o)}),n&&!n.isActive()&&n.activate()})}getDependentRequired(e){return this.schema.dependentRequired&&Is(this.schema.dependentRequired,e)?this.schema.dependentRequired[e]:[]}refreshAddProperties(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_button.style.display="none";return}let e=!1,t=0,r=!1;Object.keys(this.editors).forEach(n=>t++),e=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties<"u"&&t>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},Object.keys(this.cached_editors).forEach(n=>{this.addPropertyCheckbox(n),this.isRequiredObject(this.cached_editors[n])&&n in this.editors&&(this.addproperty_checkboxes[n].disabled=!0),typeof this.schema.minProperties<"u"&&t<=this.schema.minProperties?(this.addproperty_checkboxes[n].disabled=this.addproperty_checkboxes[n].checked,this.addproperty_checkboxes[n].checked||(r=!0)):n in this.editors?r=!0:!e&&!Is(this.schema.properties,n)?this.addproperty_checkboxes[n].disabled=!0:(this.addproperty_checkboxes[n].disabled=!1,r=!0)}),this.canHaveAdditionalProperties()&&(r=!0),Object.keys(this.schema.properties).forEach(n=>{this.cached_editors[n]||(r=!0,this.addPropertyCheckbox(n))}),r?this.canHaveAdditionalProperties()?e?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}isRequiredObject(e){if(e)return typeof e.schema.required=="boolean"?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.includes(e.key):!!this.jsoneditor.options.required_by_default}setValue(e,t){e=e||{},(typeof e!="object"||Array.isArray(e))&&(e={}),Object.entries(this.cached_editors).forEach(([r,n])=>{typeof e[r]<"u"?(this.addObjectProperty(r),n.setValue(e[r],t),n.activate()):!t&&!this.isRequiredObject(n)?this.jsoneditor.options.show_opt_in||this.options.show_opt_in?n.deactivate():this.removeObjectProperty(r):n.setValue(n.getDefault(),t)}),Object.entries(e).forEach(([r,n])=>{this.cached_editors[r]||(this.addObjectProperty(r),this.editors[r]&&this.editors[r].setValue(n,t,!!this.editors[r].template))}),this.refreshValue(),this.layoutEditors(),this.onChange()}showValidationErrors(e){const t=[],r=[];e.forEach(n=>{n.path===this.path?t.push(n):r.push(n)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(n=>{n.errorcount&&n.errorcount>1&&(n.message+=` (${n.errorcount} errors)`),this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.options.table_row&&(t.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),Object.values(this.editors).forEach(n=>{n.showValidationErrors(r)})}}Upe.rules=Ake;class Mke extends iy{preBuild(){super.preBuild()}build(){this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];const e=r=>{this.setValue(r.currentTarget.value),this.onChange(!0),this.radioGroup.forEach(n=>{n.checked=n.value===this.getValue()})};for(let r=0;r<this.enum_values.length;r++){const n={id:`${this.formname}[${r}]`,value:this.enum_values[r]};this.jsoneditor.options.use_name_attributes&&(n.name=this.formname),this.input=this.theme.getFormRadio(n),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",e,!1),this.radioGroup.push(this.input);const s=this.theme.getFormRadioLabel(this.enum_display[r]);s.htmlFor=this.input.id;const o=this.theme.getFormRadioControl(s,this.input,!!(this.options.layout==="horizontal"||this.options.compact));this.radioContainer.appendChild(o)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.radioContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.radioContainer),t.dataset.containerFor="radio",this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.radioContainer.classList.remove("readonly"),super.enable()}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.radioContainer.classList.add("readonly"),super.disable()}destroy(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}setValue(e){typeof e!="string"&&(e=String(e));for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===e){this.radioGroup[t].checked=!0,this.value=e,this.onChange();break}}}class Rke extends Fs{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.sceditor_instance&&this.sceditor_instance.val(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){if(window.sceditor){const e=this.expandCallbacks("sceditor",Ke({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),t=window.sceditor.instance(this.input);t===void 0&&window.sceditor.create(this.input,e),this.sceditor_instance=t||window.sceditor.instance(this.input),this.sceditor_instance.blur(()=>{this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),super.enable()}disable(e){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),super.disable(e)}destroy(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),super.destroy()}}class Lke extends iy{setValue(e,t){if(this.select2_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.select2v4?this.select2_instance.val(r).trigger("change"):this.select2_instance.select2("val",r),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){const e=this.expandCallbacks("select2",Ke({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=e.tags=!!e.tags&&this.schema.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Is(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let r=!1,n;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),n=this.input.querySelector(`option[value="${t}"]`),n?n.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(t,t,!1,!1)).trigger("change"),r=!0),r}enable(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable(e)}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class Ike extends iy{setValue(e,t){if(this.selectize_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.selectize_instance.clear(!0),this.selectize_instance.setValue(r),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){const e=this.expandCallbacks("selectize",Ke({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=e.create=!!e.create&&this.schema.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{this.updateValue(t),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let r=!1;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),this.selectize_instance.addItem(t),this.selectize_instance.refreshOptions(!1),r=!0),r}onWatchedFieldChange(){super.onWatchedFieldChange(),this.selectize_instance&&(this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((e,t)=>{this.selectize_instance.addOption({value:e,text:this.enum_display[t]})}),this.selectize_instance.addItem(`${this.value}`,!0))}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class Pke extends Fs{build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)));const e=this.formname.replace(/\W/g,"");if(typeof SignaturePad=="function"){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);const t=document.createElement("div");t.classList.add("signature-container");const r=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&r.setAttribute("name",e),r.classList.add("signature"),t.appendChild(r),this.signaturePad=new window.SignaturePad(r),this.signaturePad.onEnd=()=>{this.signaturePad.isEmpty()?this.input.value="":this.input.value=this.signaturePad.toDataURL(),this.is_dirty=!0,this.refreshValue(),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()};const n=document.createElement("div"),s=document.createElement("button");s.classList.add("tiny","button"),s.innerHTML="Clear signature",n.appendChild(s),t.appendChild(n),this.options.compact&&this.container.setAttribute("class",`${this.container.getAttribute("class")} compact`),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach(o=>{r.setAttribute("readOnly","readOnly"),o.disabled=!0})),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.signaturePad.clear(),this.signaturePad.strokeEnd()}),this.control=this.theme.getFormControl(this.label,t,this.description),this.container.appendChild(this.control),this.refreshValue(),r.width=t.offsetWidth,this.options&&this.options.canvas_height?r.height=this.options.canvas_height:r.height="300"}else{const t=document.createElement("p");t.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(t)}}setValue(e){if(typeof SignaturePad=="function"){const t=this.sanitize(e);return this.value===t?void 0:(this.value=t,this.input.value=this.value,this.signaturePad.clear(),e&&e!==""&&this.signaturePad.fromDataURL(e),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1)}}destroy(){this.signaturePad.off(),delete this.signaturePad}}class Vpe extends Fs{setValue(e,t,r){const n=super.setValue(e,t,r);n!==void 0&&n.changed&&this.simplemde_instance&&this.simplemde_instance.value(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.SimpleMDE?(e=this.expandCallbacks("simplemde",Ke({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",()=>{this.value=this.simplemde_instance.value(),this.is_dirty=!0,this.onChange(!0)}),e.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),super.enable()}disable(e){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),super.disable(e)}destroy(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),super.destroy()}startListening(e,t){function r(){e.display.wrapper.offsetHeight?(this.stopListening(e,t),e.display.lastWrapHeight!==e.display.wrapper.clientHeight&&e.refresh()):t.timeout=window.setTimeout(r,t.delay)}t.timeout=window.setTimeout(r,t.delay),t.hurry=()=>{window.clearTimeout(t.timeout),t.timeout=window.setTimeout(r,50)},e.on(window,"mouseup",t.hurry),e.on(window,"keyup",t.hurry)}stopListening(e,t){window.clearTimeout(t.timeout),e.off(window,"mouseup",t.hurry),e.off(window,"keyup",t.hurry)}}const kke={".starrating":"direction:rtl;display:inline-block;white-space:nowrap",".starrating > input":"display:none",".starrating > label:before":"content:'%5C2606';margin:1px;font-size:18px;font-style:normal;font-weight:400;line-height:1;font-family:'Arial';display:inline-block",".starrating > label":"color:%23888;cursor:pointer;margin:8px%200%202px%200",".starrating > label.starrating-display-enabled":"margin:1px%200%200%200",".starrating > input:checked ~ label":"color:%23ffca08",".starrating:not(.readonly) > input:hover ~ label":"color:%23ffca08",".starrating > input:checked ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating:not(.readonly) > input:hover ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating .starrating-display":"position:relative;direction:rtl;text-align:center;font-size:10px;line-height:0px"};class qpe extends Fs{build(){if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.schema.enum===void 0){let r=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&r--,this.enum_values=[];for(let n=0;n<r;n++)this.enum_values.push(n+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];const e=r=>{r.preventDefault(),r.stopPropagation(),this.setValue(r.currentTarget.value),this.onChange(!0)};for(let r=this.enum_values.length-1;r>-1;r--){const n=this.formname+(r+1),s=this.theme.getFormInputField("radio");s.name=`${this.formname}[starrating]`,s.value=this.enum_values[r],s.id=n,s.addEventListener("change",e,!1),this.radioGroup.push(s);const o=document.createElement("label");o.htmlFor=n,o.title=this.enum_values[r],this.options.displayValue&&o.classList.add("starrating-display-enabled");const a=this.theme.getHiddenText("label");a.textContent=r,o.appendChild(a),this.ratingContainer.appendChild(s),this.ratingContainer.appendChild(o)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.ratingContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.ratingContainer),this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.ratingContainer.classList.remove("readonly"),this.disabled=!1}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.ratingContainer.classList.add("readonly"),this.disabled=!0}destroy(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)return this.schema.type==="integer"?this.value===""?void 0:this.value*1:this.value}setValue(e){for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===`${e}`){this.radioGroup[t].checked=!0,this.value=e,this.options.displayValue&&(this.displayRating.innerHTML=this.value),this.onChange(!0);break}}}qpe.rules=kke;class Oke extends zpe{build(){super.build(),this.input.setAttribute("type","number"),this.input.getAttribute("step")||this.input.setAttribute("step","1");const e=this.theme.getStepperButtons(this.input);this.control.appendChild(e),this.stepperDown=this.control.querySelector(".stepper-down"),this.stepperUp=this.control.querySelector(".stepper-up")}enable(){super.enable(),this.stepperDown.removeAttribute("disabled"),this.stepperUp.removeAttribute("disabled")}disable(){super.disable(),this.stepperDown.setAttribute("disabled",!0),this.stepperUp.setAttribute("disabled",!0)}}class Dke extends QC{register(){if(super.register(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].register()}unregister(){if(super.unregister(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].unregister()}getNumColumns(){return Math.max(Math.min(12,this.width),3)}preBuild(){const e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e.default||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top,super.preBuild()}build(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.tableContainer.appendChild(this.table),this.container.appendChild(this.tableContainer),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);const e=this.getElementEditor(0,!0);if(this.item_default=e.getDefault(),this.width=e.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.tableContainer),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls),this.item_has_child_editors){const t=e.getChildEditors(),r=e.property_order||Object.keys(t);for(let n=0;n<r.length;n++){const s=this.theme.getTableHeaderCell(t[r[n]].getTitle());t[r[n]].options.hidden&&(s.style.display="none"),this.header_row.appendChild(s)}}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));e.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.header_row.appendChild(this.controls_header_cell),this.addControls()}onChildEditorChange(e){this.refreshValue(),super.onChildEditorChange()}getItemDefault(){return Ke({},{default:this.item_default}).default}getItemTitle(){return this.item_title}getElementEditor(e,t){const r=Ke({},this.schema.items),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.row_holder.appendChild(this.theme.getTableRow());let o=s;this.item_has_child_editors||(o=this.theme.getTableCell(),s.appendChild(o));const a=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:o,path:`${this.path}.${e}`,parent:this,compact:!0,table_row:!0});return a.preBuild(),t||(a.build(),a.postBuild(),a.controls_cell=s.appendChild(this.theme.getTableCell()),a.row=s,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a}destroy(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,super.destroy()}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());return this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems)),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized)return;let n=!1;e.forEach((s,o)=>{this.rows[o]?this.rows[o].setValue(s):(this.addRow(s),n=!0)});for(let s=e.length;s<this.rows.length;s++){const o=this.rows[s].container;this.item_has_child_editors||this.rows[s].row.parentNode.removeChild(this.rows[s].row),this.rows[s].destroy(),o.parentNode&&o.parentNode.removeChild(o),this.rows[s]=null,n=!0}this.rows=this.rows.slice(0,e.length),this.refreshValue(),(n||t)&&this.refreshRowButtons(),this.onChange()}refreshRowButtons(){const e=this.schema.minItems&&this.schema.minItems>=this.rows.length,t=this.schema.maxItems&&this.schema.maxItems<=this.rows.length,r=[];this.rows.forEach((c,h)=>{if(c.delete_button){const u=!e;this.setButtonState(c.delete_button,u),r.push(u)}if(c.copy_button){const u=!t;this.setButtonState(c.copy_button,u),r.push(u)}if(c.moveup_button){const u=h!==0;this.setButtonState(c.moveup_button,u),r.push(u)}if(c.movedown_button){const u=h!==this.rows.length-1;this.setButtonState(c.movedown_button,u),r.push(u)}});const n=r.some(c=>c);this.rows.forEach(c=>this.setButtonState(c.controls_cell,n)),this.setButtonState(this.controls_header_cell,n),this.setButtonState(this.table,this.value.length);const s=!(t||this.hide_add_button);this.setButtonState(this.add_row_button,s);const o=!(!this.value.length||e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,o);const a=!(this.value.length<=1||e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,a);const l=s||o||a;this.setButtonState(this.controls,l)}refreshValue(){this.value=[],this.rows.forEach((e,t)=>{this.value[t]=e.getValue()}),this.serialized=JSON.stringify(this.value)}addRow(e){const t=this.rows.length;this.rows[t]=this.getElementEditor(t);const r=this.rows[t].table_controls;return this.hide_delete_buttons||(this.rows[t].delete_button=this._createDeleteButton(t,r)),this.show_copy_button&&(this.rows[t].copy_button=this._createCopyButton(t,r)),this.hide_move_buttons||(this.rows[t].moveup_button=this._createMoveUpButton(t,r)),this.hide_move_buttons||(this.rows[t].movedown_button=this._createMoveDownButton(t,r)),typeof e<"u"&&this.rows[t].setValue(e),this.rows[t]}_createDeleteButton(e,t){const r=this.getButton("","delete","button_delete_row_title_short");return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue(),l=this.getValue()[s];o.splice(s,1),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("deleteRow",l)}),t.appendChild(r),r}_createCopyButton(e,t){const r=this.getButton("","copy","button_copy_row_title_short"),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const o=s.currentTarget.getAttribute("data-i")*1,a=this.getValue();let l=a[o];n.items.type==="string"&&n.items.format==="uuid"?l=hm():n.items.type==="object"&&n.items.properties&&a.forEach((c,h)=>{if(o===h)for(const u of Object.keys(c))n.items.properties&&n.items.properties[u]&&n.items.properties[u].format==="uuid"&&(l=Object.assign({},a[o]),l[u]=hm())}),a.splice(o+1,0,l),this.setValue(a),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[o+1])}),t.appendChild(r),r}_createMoveUpButton(e,t){const r=this.getButton("","moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s-1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t.appendChild(r),r}_createMoveDownButton(e,t){const r=this.getButton("","movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=n.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s+1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t.appendChild(r),r}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.setButtonState(this.panel,this.collapsed),this.collapsed?(this.collapsed=!1,this.setButtonText(e.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.setButtonText(e.currentTarget,"","expand","button_expand"))}),this.options.collapsed&&Ao(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton()}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");return e.classList.add("json-editor-btntype-toggle"),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const r=this.addRow();this.refreshValue(),this.refreshRowButtons(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue(),n=r.pop();this.setValue(r),this.onChange(!0),this.jsoneditor.trigger("deleteRow",n)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}}class Fke extends xn{getNumColumns(){return 4}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",Ke({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:(r,n,s,o)=>{window.alert(`No upload_handler defined for "${r.path}". You must create your own handler to enable upload to server`)}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(typeof this.options.upload_handler!="function")throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),this.options.enable_drag_drop===!0&&this.options.hide_input===!0||(this.clickHandler=r=>{this.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),this.options.enable_drag_drop===!0){if(this.options.alt_drop_zone!=="")if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),this.altDropZone)this.dropZone=this.altDropZone;else throw new Error(`Error: alt_drop_zone selector "${this.options.alt_drop_zone}" not found!`);else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=r=>{r.preventDefault(),r.stopPropagation();const n=r.target.files||r.dataTransfer.files;if(n&&n.length)if(this.options.max_upload_size!==0&&n[0].size>this.options.max_upload_size)this.theme.addInputError(this.uploader,`${this.translate("upload_max_size")} ${this.options.max_upload_size}`);else if(this.options.mime_type.length!==0&&!this.isValidMimeType(n[0].type,this.options.mime_type))this.theme.addInputError(this.uploader,`${this.translate("upload_wrong_file_format")} ${this.options.mime_type.toString()}`);else{this.fileDisplay&&(this.fileDisplay.value=n[0].name);let s=new window.FileReader;s.onload=o=>{this.preview_value=o.target.result,this.refreshPreview(n),this.onChange(!0),s=null},s.readAsDataURL(n[0])}},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=r=>{const n=r.dataTransfer.items||r.dataTransfer.files,s=n&&n.length&&(this.options.mime_type.length===0||this.isValidMimeType(n[0].type,this.options.mime_type)),o=r.currentTarget.classList&&r.currentTarget.classList.contains("upload-dropzone")&&s;switch((r.currentTarget===window?"w_":"e_")+r.type){case"w_drop":case"w_dragover":o||(r.dataTransfer.dropEffect="none");break;case"e_dragenter":{o?(this.dropZone.classList.add("valid-dropzone"),r.dataTransfer.dropEffect="copy"):this.dropZone.classList.add("invalid-dropzone");break}case"e_dragover":{o&&(r.dataTransfer.dropEffect="copy");break}case"e_dragleave":this.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":{this.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),o&&this.uploadHandler(r);break}}o||r.preventDefault()},this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(r=>{window.addEventListener(r,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(r=>{this.dropZone.addEventListener(r,this.dragHandler,!0)}))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);const e=this.uploader||this.input,t=document.createElement("div");this.dropZone&&!this.altDropZone&&this.options.drop_zone_top===!0&&t.appendChild(this.dropZone),this.fileUploadGroup&&t.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&this.options.drop_zone_top!==!0&&t.appendChild(this.dropZone),t.appendChild(this.preview),e.parentNode.insertBefore(t,e.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.afterInputReady()})}afterInputReady(){if(this.value){const e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.onload=t=>{this.preview.appendChild(e)},e.onerror=t=>{console.error("upload error",t,t.currentTarget)},e.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}refreshPreview(e){if(this.last_preview===this.preview_value||(this.last_preview=this.preview_value,this.preview.innerHTML="",!this.preview_value))return;const t=e[0],r=this.preview_value.match(/^data:([^;,]+)[;,]/);if(t.mimeType=r?r[1]:"unknown",t.size>0){const s=Math.floor(Math.log(t.size)/Math.log(1024));t.formattedSize=`${parseFloat((t.size/1024**s).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}else t.formattedSize="0 Bytes";const n=this.getButton("button_upload","upload","button_upload");n.addEventListener("click",s=>{s.preventDefault(),n.setAttribute("disabled","disabled"),this.theme.removeInputError(this.uploader),this.theme.getProgressBar&&(this.progressBar=this.theme.getProgressBar(),this.preview.appendChild(this.progressBar)),this.options.upload_handler(this.path,t,{success:o=>{this.setValue(o),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},failure:o=>{this.theme.addInputError(this.uploader,o),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},updateProgress:o=>{this.progressBar&&(o?this.theme.updateProgressBar(this.progressBar,o):this.theme.updateProgressBarUnknown(this.progressBar))}})}),this.preview.appendChild(this.theme.getUploadPreview(t,n,this.preview_value)),this.options.auto_upload&&(n.dispatchEvent(new window.MouseEvent("click")),n.parentNode.removeChild(n))}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())}destroy(){this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(e=>{window.removeEventListener(e,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.removeEventListener(e,this.dragHandler,!0)}),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}isValidMimeType(e,t){return t.reduce((r,n)=>r||new RegExp(n.replace(/\*/g,".*"),"gi").test(e),!1)}}class Nke extends Fs{preBuild(){super.preBuild(),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}build(){super.build(),this.disable(!0),this.input.setAttribute("readonly","true")}sanitize(e){return this.testUuid(e)||(e=this.uuid),e}setValue(e,t,r){this.testUuid(e)||(e=this.uuid),this.uuid=e,super.setValue(e,t,r)}getUuid(){return hm()}testUuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class $ke extends Fs{postBuild(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}setValue(e,t,r){const n=super.setValue(e,t,r);return this.picker_instance&&this.picker_instance.domElement&&n&&n.changed&&this.picker_instance.setColor(n.value,!0),n}getNumColumns(){return 2}afterInputReady(){super.afterInputReady(),this.createPicker(!0)}disable(){if(super.disable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!0}}enable(){if(super.enable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!1}}destroy(){this.createPicker(!1),super.destroy()}createPicker(e){if(e){if(window.Picker&&!this.picker_instance){const t=this.expandCallbacks("colorpicker",Ke({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),r=n=>{const s=this.picker_instance.settings.editorFormat,o=this.picker_instance.settings.alpha;this.setValue(s==="hex"?o?n.hex:n.hex.slice(0,7):n[`${s+(o?"a":"")}String`])};!t.popup&&typeof t.onChange!="function"?t.onChange=r:t.popup&&typeof t.onDone!="function"&&(t.onDone=r),this.picker_instance=new window.Picker(t),t.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}const Q_={ace:ske,array:QC,arrayChoices:ake,arraySelect2:lke,arraySelectize:cke,autocomplete:hke,base64:uke,button:$pe,checkbox:dke,choices:Bpe,datetime:pke,describedBy:gke,enum:mke,hidden:yke,info:_ke,integer:zpe,ip:vke,jodit:bke,multiple:Cke,multiselect:Hb,null:Tke,number:jpe,object:Upe,radio:Mke,sceditor:Rke,select:iy,select2:Lke,selectize:Ike,signature:Pke,simplemde:Vpe,starrating:qpe,stepper:Oke,string:Fs,table:Dke,upload:Fke,uuid:Nke,colorpicker:$ke},Bke="html",jke="default",zke={},Gke={},Uke={},Vke={},Hpe={},qke=[],eT="en",Hke=eT;Hpe.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls"};Object.entries(Q_).forEach(([i,e])=>{Q_[i].options=e.options||{}});function Wke(i,e,t){console.log("Upload handler required for upload editor")}function Yke(i,e,t){let r={};t&&t.options&&t.options.error_messages&&t.options.error_messages[Sh.language]&&(r=t.options.error_messages[Sh.language]);const n=Sh.languages[Sh.language];if(!n)throw new Error(`Unknown language ${Sh.language}`);let s=r[i]||n[i]||Sh.languages[eT][i]||i;if(e)for(let o=0;o<e.length;o++)s=s.replace(new RegExp(`\\{\\{${o}}}`,"g"),e[o]);return s}function Xke(i,e){return i}const Zke={upload:Wke,use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction"},Sh={options:Zke,theme:Bke,template:jke,themes:Gke,callbacks:zke,templates:Uke,iconlibs:Vke,editors:Q_,languages:Hpe,resolvers:QPe,custom_validators:qke,default_language:eT,language:Hke,translate:Yke,translateProperty:Xke};class Kke{constructor(e){this.options=e||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type(t){typeof t.type=="object"&&(t.type=this._expandSubSchema(t.type))},disallow(t){typeof t.disallow=="object"&&(t.disallow=this._expandSubSchema(t.disallow))},anyOf(t){Object.entries(t.anyOf).forEach(([r,n])=>{t.anyOf[r]=this.expandSchema(n)})},dependencies(t){Object.entries(t.dependencies).forEach(([r,n])=>{typeof n=="object"&&!Array.isArray(n)&&(t.dependencies[r]=this.expandSchema(n))})},not(t){t.not=this.expandSchema(t.not)}},this._subSchema2={allOf(t,r){let n=Ke({},r);return Object.entries(t.allOf).forEach(([s,o])=>{t.allOf[s]=this.expandRefs(o,!0),n=this.extendSchemas(n,this.expandSchema(o))}),delete n.allOf,n},extends(t,r){let n;return Array.isArray(t.extends)?n=t.extends.reduce((s,o,a)=>this.extendSchemas(s,this.expandSchema(o)),r):n=this.extendSchemas(r,this.expandSchema(t.extends)),delete n.extends,n},oneOf(t,r){const n=Ke({},r);return delete n.oneOf,t.oneOf.reduce((s,o,a)=>(s.oneOf[a]=this.extendSchemas(this.expandSchema(o),n),s),r),r}}}async load(e,t,r){return this.schema=e,await this._asyncloadExternalRefs(e,t,this._getFileBase(r),!0),this.expandRefs(e)}expandRefs(e,t){const r=Ke({},e);if(!r.$ref)return r;const n=r.$ref.split("#");if(n.length===2&&!this.refs_with_info[r.$ref]){const l=this.expandRecursivePointer(this.schema,n[1]),c=this.extendSchemas(r,this.expandSchema(l));return delete c.$ref,c}const s=n.length>2?this.refs_with_info["#"+n[1]]:this.refs_with_info[r.$ref];delete r.$ref;const o=s.$ref.startsWith("#")?s.fetchUrl:"",a=this._getRef(o,s);if(!this.refs[a])console.warn(`reference:'${a}' not found!`);else if(t&&Is(this.refs[a],"allOf")){const l=this.refs[a].allOf;Object.keys(l).forEach(c=>{l[c]=this.expandRefs(l[c],!0)})}return n.length>2?this.extendSchemas(r,this.expandSchema(this.expandRecursivePointer(this.refs[a],n[2]))):this.extendSchemas(r,this.expandSchema(this.refs[a]))}expandRecursivePointer(e,t){let r=e;return t.split("/").slice(1).forEach(n=>{r[n]&&(r=r[n])}),r.$refs&&r.$refs.startsWith("#")?this.expandRecursivePointer(e,r.$refs):r}expandSchema(e){Object.entries(this._subSchema1).forEach(([r,n])=>{e[r]&&n.call(this,e)});let t=Ke({},e);return Object.entries(this._subSchema2).forEach(([r,n])=>{e[r]&&(t=n.call(this,e,t))}),this.expandRefs(t)}_getRef(e,t){const r=e+t;return this.refs[r]?r:e+decodeURIComponent(t.$ref)}_expandSubSchema(e){return Array.isArray(e)?e.map(t=>typeof t=="object"?this.expandSchema(t):t):this.expandSchema(e)}_manageRecursivePointer(e,t){Object.keys(e).forEach(r=>{e[r].$ref&&e[r].$ref.indexOf("#")===0&&(e[r].$ref=t+e[r].$ref)})}_getExternalRefs(e,t,r=!1){r||this._manageRecursivePointer(e,t);const n={},s=o=>Object.keys(o).forEach(a=>{n[a]=!0});if(e.$ref&&typeof e.$ref!="object"&&!(e.$ref.indexOf("#")===0&&r)){let o=e.$ref,a="";o.indexOf("#")>0&&(o=o.substr(0,o.indexOf("#"))),o!==e.$ref&&(a=e.$ref.substr(e.$ref.indexOf("#")));const l=this.refs_prefix+this.refs_counter++,c=l+a;e.$ref.substr(0,1)!=="#"&&!this.refs[e.$ref]&&(n[o]=!0),this.refs_with_info[l]={fetchUrl:t,$ref:o},e.$ref=c}return Object.values(e).forEach(o=>{!o||typeof o!="object"||(Array.isArray(o)?Object.values(o).forEach(a=>{a&&typeof a=="object"&&s(this._getExternalRefs(a,t,r))}):(!o.$ref||!(typeof o.$ref=="string"&&o.$ref.startsWith("#")))&&s(this._getExternalRefs(o,t,r)))}),e.id&&typeof e.id=="string"&&e.id.substr(0,4)==="urn:"?this.refs[e.id]=e:e.$id&&typeof e.$id=="string"&&e.$id.substr(0,4)==="urn:"&&(this.refs[e.$id]=e),n}_getFileBase(e){if(!e)return"/";const{ajaxBase:t}=this.options;return typeof t>"u"?this._getFileBaseFromFileLocation(e):t}_getFileBaseFromFileLocation(e){const t=e.split("/");return t.pop(),`${t.join("/")}/`}_joinUrl(e,t){var r=e;return e.substr(0,7)!=="http://"&&e.substr(0,8)!=="https://"&&e.substr(0,5)!=="blob:"&&e.substr(0,5)!=="data:"&&e.substr(0,1)!=="#"&&e.substr(0,1)!=="/"&&(r=t+e),r.indexOf("#")>0&&(r=r.substr(0,r.indexOf("#"))),r}_isUniformResourceName(e){return e.substr(0,4)==="urn:"}async _asyncloadExternalRefs(e,t,r,n=!1){const s=this._getExternalRefs(e,t,n);let o=0;for(const a of Object.keys(s)){if(typeof a>"u"||this.refs[a])continue;if(this._isUniformResourceName(a)){this.refs[a]="loading",o++;const u=this.options.urn_resolver;let d=a;if(typeof u!="function")throw console.log(`No "urn_resolver" callback defined to resolve "${d}"`),new Error(`Must set urn_resolver option to a callback to resolve ${d}`);d.indexOf("#")>0&&(d=d.substr(0,d.indexOf("#")));let f;try{let p;f=await u(d);try{p=JSON.parse(f)}catch(g){throw console.log(g),new Error(`Failed to parse external ref ${d}`)}if(!(typeof p=="boolean"||typeof p=="object")||p===null||Array.isArray(p))throw new Error(`External ref does not contain a valid schema - ${d}`);this.refs[a]=p,await this._asyncloadExternalRefs(p,a,r)}catch(p){throw console.log(p),new Error(`Failed to parse external ref ${d}`)}if(typeof f=="boolean")throw new Error(`External ref does not contain a valid schema - ${d}`);continue}if(!this.options.ajax)throw new Error(`Must set ajax option to true to load external ref ${a}`);o++;let l=this._joinUrl(a,r),c;if(this.options.ajax_cache_responses){const u=this.cacheGet(l);u&&(c=u)}if(!c){const u=await new Promise(d=>{const f=new XMLHttpRequest;this.options.ajaxCredentials&&(f.withCredentials=this.options.ajaxCredentials),f.overrideMimeType("application/json"),f.open("GET",l,!0),f.onload=()=>{d(f)},f.onerror=p=>{d(void 0)},f.send()});if(typeof u>"u")throw new Error(`Failed to fetch ref via ajax - ${a}`);try{c=JSON.parse(u.responseText),this.onSchemaLoaded({schema:c,schemaUrl:l}),this.options.ajax_cache_responses&&this.cacheSet(l,c)}catch(d){throw console.log(d),new Error(`Failed to parse external ref ${l}`)}}if(!(typeof c=="boolean"||typeof c=="object")||c===null||Array.isArray(c))throw new Error(`External ref does not contain a valid schema - ${l}`);this.refs[a]=c;const h=this._getFileBaseFromFileLocation(l);if(l!==a){const u=l.split("/");l=(a.substr(0,1)==="/"?"/":"")+u.pop()}await this._asyncloadExternalRefs(c,l,h)}if(!o)return!0;this.onAllSchemasLoaded()}onSchemaLoaded(e){}onAllSchemasLoaded(){}extendSchemas(e,t){e=Ke({},e),t=Ke({},t);const r={},n=(a,l)=>(a==="required"||a==="defaultProperties")&&typeof l=="object"&&Array.isArray(l),s=(a,l)=>{n(a,l)?r[a]=l.concat(t[a]).reduce((c,h)=>(c.includes(h)||c.push(h),c),[]):a==="type"&&(typeof l=="string"||Array.isArray(l))?o(l):typeof l=="object"&&!Array.isArray(l)&&l!==null?r[a]=this.extendSchemas(l,t[a]):r[a]=l},o=a=>{typeof a=="string"&&(a=[a]),typeof t.type=="string"&&(t.type=[t.type]),!t.type||!t.type.length?r.type=a:r.type=a.filter(l=>t.type.includes(l)),r.type.length===1&&typeof r.type[0]=="string"?r.type=r.type[0]:r.type.length===0&&delete r.type};return Object.entries(e).forEach(([a,l])=>{typeof t[a]<"u"?s(a,l):r[a]=l}),Object.entries(t).forEach(([a,l])=>{typeof e[a]>"u"&&(r[a]=l)}),r}getCacheKey(e){return["je-cache",e].join("::")}getCacheBuster(){return this.options.ajax_cache_buster||new Date().toISOString().slice(0,10)}cacheSet(e,t){try{window.localStorage.setItem(this.getCacheKey(e),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:t}))}catch(r){console.error(r)}}cacheGet(e){try{const t=window.localStorage.getItem(this.getCacheKey(e));if(t){const r=JSON.parse(t);if(r.cacheBuster&&r.schema&&r.cacheBuster===this.getCacheBuster())return r.schema;this.cacheDelete(e)}}catch(t){console.error(t)}}cacheDelete(e){window.localStorage.removeItem(this.getCacheKey(e))}}const Jke=()=>({compile(i){const e=i.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),t=e&&e.length;if(!t)return()=>i;const r=[],n=o=>{let a=e[o].replace(/[{}]+/g,"").trim().split(".");const l=a.length;let c;if(l>1){let h;c=u=>{for(h=u,o=0;o<l&&(h=h[a[o]],!!h);o++);return h}}else a=a[0],c=h=>h[a];r.push({s:e[o],r:c})};for(var s=0;s<t;s++)n(s);return o=>{let a=`${i}`,l;for(s=0;s<t;s++)l=r[s],a=a.replace(l.s,l.r(o));return a}}}),Qke=()=>window.EJS?{compile(i){const e=new window.EJS({text:i});return t=>e.render(t)}}:!1,eOe=()=>window.Handlebars,tOe=()=>window.Hogan?{compile(i){const e=window.Hogan.compile(i);return t=>e.render(t)}}:!1,iOe=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,rOe=()=>!window.Mark||!window.Mark.up?!1:{compile(i){return e=>window.Mark.up(i,e)}},nOe=()=>window.Mustache?{compile(i){return e=>window.Mustache.render(i,e)}}:!1,sOe=()=>window.swig,oOe=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,aOe={default:Jke,ejs:Qke,handlebars:eOe,hogan:tOe,lodash:iOe,markup:rOe,mustache:nOe,swig:sOe,underscore:oOe},lOe={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""};class xl{constructor(e="",t=lOe){this.mapping=t,this.icon_prefix=e}getIconClass(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:this.icon_prefix+e}getIcon(e){const t=this.getIconClass(e);if(!t)return null;const r=document.createElement("i");return r.classList.add(...t.split(" ")),r}}const cOe="glyphicon glyphicon-",hOe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class uOe extends xl{constructor(){super(cOe,hOe)}}const dOe="icon-",fOe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class pOe extends xl{constructor(){super(dOe,fOe)}}const gOe="fa fa-",mOe={collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"files-o",clear:"times-circle-o",time:"clock-o",calendar:"calendar",edit_properties:"list"};class yOe extends xl{constructor(){super(gOe,mOe)}}const _Oe="fas fa-",vOe={collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"};class bOe extends xl{constructor(){super(_Oe,vOe)}}const xOe="ui-icon ui-icon-",wOe={collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",subtract:"minusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",moveright:"arrowthick-1-e",movedown:"arrowthick-1-s",moveleft:"arrowthick-1-w",copy:"copy",clear:"circle-close",time:"time",calendar:"calendar",edit_properties:"note"};class EOe extends xl{constructor(){super(xOe,wOe)}}const SOe="oi oi-",COe={collapse:"collapse-down",expand:"expand-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"file",moveup:"arrow-thick-top",moveright:"arrow-thick-right",movedown:"arrow-thick-bottom",moveleft:"arrow-thick-left",copy:"clipboard",clear:"circle-x",time:"clock",calendar:"calendar",edit_properties:"list"};class TOe extends xl{constructor(){super(SOe,COe)}}const AOe="icon icon-",MOe={collapse:"arrow-down",expand:"arrow-right",delete:"delete",edit:"edit",add:"plus",subtract:"minus",cancel:"cross",save:"check",moveup:"upward",moveright:"forward",movedown:"downward",moveleft:"back",copy:"copy",clear:"close",time:"time",calendar:"bookmark",edit_properties:"menu"};class ROe extends xl{constructor(){super(AOe,MOe)}}const LOe="bi bi-",IOe={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"dash",cancel:"x-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"clipboard",clear:"x-circle",time:"clock",calendar:"calendar",edit_properties:"list-ul"};class POe extends xl{constructor(){super(LOe,IOe)}}const kOe={bootstrap:POe,bootstrap3:uOe,fontawesome3:pOe,fontawesome4:yOe,fontawesome5:bOe,jqueryui:EOe,openiconic:TOe,spectre:ROe},Nae=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(i=>i in document.documentElement);class wl{constructor(e,t={disable_theme_rules:!1}){this.jsoneditor=e,Object.keys(t).forEach(r=>{typeof e.options[r]<"u"&&(t[r]=e.options[r])}),this.options=t}getContainer(){return document.createElement("div")}getFloatRightLinkHolder(){const e=document.createElement("div");return e.classList.add("je-float-right-linkholder"),e}getModal(){const e=document.createElement("div");return e.style.display="none",e.classList.add("je-modal"),e}getGridContainer(){return document.createElement("div")}getGridRow(){const e=document.createElement("div");return e.classList.add("row"),e}getGridColumn(){return document.createElement("div")}setGridColumnSize(e,t){}getLink(e){const t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t}disableHeader(e){e.style.color="#ccc"}disableLabel(e){e.style.color="#ccc"}enableHeader(e){e.style.color=""}enableLabel(e){e.style.color=""}getInfoButton(e){const t=document.createElement("span");t.innerText="",t.classList.add("je-infobutton-icon");const r=document.createElement("span");return r.classList.add("je-infobutton-tooltip"),r.innerText=e,t.onmouseover=()=>{r.style.visibility="visible"},t.onmouseleave=()=>{r.style.visibility="hidden"},t.appendChild(r),t}getFormInputLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(e)),t&&r.classList.add("required"),r}getLabelLike(e,t){const r=document.createElement("b");return r.appendChild(document.createTextNode(e)),t&&r.classList.add("required"),r}getHeader(e,t){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.classList.add("je-header"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("je-checkbox"),e}getCheckboxLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),t&&r.classList.add("required"),r}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");return s.classList.add("control-group"),t&&(t.style.display="block",s.appendChild(t),n&&t.appendChild(n)),Object.values(e).forEach(o=>{o.style.display="inline-block",o.style.marginRight="20px",s.appendChild(o)}),r&&s.appendChild(r),s}getFormCheckboxControl(e,t,r){const n=document.createElement("div");return n.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),r&&n.classList.add("je-checkbox-control--compact"),n}getFormRadio(e){const t=this.getFormInputField("radio");return Object.keys(e).forEach(r=>t.setAttribute(r,e[r])),t.classList.add("je-radio"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),t&&r.classList.add("required"),r}getFormRadioControl(e,t,r,n){const s=document.createElement("div");return s.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),r&&s.classList.add("je-radio-control--compact"),t.tagName.toLowerCase()!=="div"&&n&&e&&t&&(t.setAttribute("id",n),t.setAttribute("aria-labelledby",n),e.setAttribute("for",n)),s}getSelectInput(e,t){const r=document.createElement("select");return e&&this.setSelectOptions(r,e),r}getSwitcher(e){const t=this.getSelectInput(e,!1);return t.classList.add("je-switcher"),t}getSwitcherOptions(e){return e.getElementsByTagName("option")}setSwitcherOptions(e,t,r){this.setSelectOptions(e,t,r)}setSelectOptions(e,t,r=[]){e.innerHTML="";for(let n=0;n<t.length;n++){const s=document.createElement("option");s.setAttribute("value",t[n]),s.textContent=r[n]||t[n],e.appendChild(s)}}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("je-textarea"),e}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}visuallyHidden(e){e&&e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}getRangeInput(e,t,r,n,s){const o=this.getFormInputField("range");return o.setAttribute("min",e),o.setAttribute("max",t),o.setAttribute("step",r),n&&(n.setAttribute("id",s+"-description"),o.setAttribute("aria-describedby",s+"-description")),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-down");const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const o=(c,h)=>{h?c.value=Number(h):c.value=Number(c.value),c.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Ao(e,"change")}),n.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Ao(e,"change")}),t.appendChild(r),t.appendChild(n),t}getRangeOutput(e){const t=document.createElement("output"),r=n=>{t.value=n.currentTarget.value};return e.addEventListener("change",r,!1),e.addEventListener("input",r,!1),t}getRangeControl(e,t){const r=document.createElement("div");return r.classList.add("je-range-control"),t&&r.appendChild(t),r.appendChild(e),r}getFormInputField(e){const t=document.createElement("input");return t.setAttribute("type",e),t}afterInputReady(e){}getFormControl(e,t,r,n,s){const o=document.createElement("div");return o.classList.add("form-control"),e&&(o.appendChild(e),s&&e.setAttribute("for",s)),(t.type==="checkbox"||t.type==="radio")&&e?(t.style.width="auto",e.insertBefore(t,e.firstChild),n&&e.appendChild(n)):(n&&e&&e.appendChild(n),o.appendChild(t)),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),r&&o.appendChild(r),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel--top"),e}getChildEditorHolder(){return document.createElement("div")}getDescription(e){const t=document.createElement("p");return window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getCheckboxDescription(e){return this.getDescription(e)}getFormInputDescription(e){return this.getDescription(e)}getButtonHolder(){return document.createElement("span")}getHeaderButtonHolder(){return this.getButtonHolder()}getFormButtonHolder(e){return this.getButtonHolder()}getButton(e,t,r){const n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,r),n}getFormButton(e,t,r){return this.getButton(e,t,r)}setButtonText(e,t,r,n){for(;e.firstChild;)e.removeChild(e.firstChild);if(r&&(e.appendChild(r),t=` ${t}`),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!r){const s=document.createElement("span");s.appendChild(document.createTextNode(t)),e.appendChild(s)}n&&e.setAttribute("title",n)}getTableContainer(){return document.createElement("div")}getTable(){return document.createElement("table")}getTableRow(){return document.createElement("tr")}getTableHead(){return document.createElement("thead")}getTableBody(){return document.createElement("tbody")}getTableHeaderCell(e){const t=document.createElement("th");return t.textContent=e,t}getTableCell(){return document.createElement("td")}getErrorMessage(e){const t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.errmsg.setAttribute("role","alert")}removeInputError(e){}addTableRowError(e){}removeTableRowError(e){}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='je-tabholder tabs'></div><div class='content' id='${t}'></div><div class='je-tabholder--clear'></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='${t}'></div>`,r}applyStyles(e,t){Object.keys(t).forEach(r=>e.style[r]=t[r])}closest(e,t){for(;e&&e!==document;)if(e[Nae]){if(e[Nae](t))return e;e=e.parentNode}else return!1;return!1}insertBasicTopTab(e,t){t.firstChild.insertBefore(e,t.firstChild.firstChild)}getTab(e,t){const r=document.createElement("div");return r.appendChild(e),r.id=t,r.classList.add("je-tab"),r}getTopTab(e,t){const r=document.createElement("div");return r.appendChild(e),r.id=t,r.classList.add("je-tab--top"),r}getTabContentHolder(e){return e.children[1]}getTopTabContentHolder(e){return e.children[1]}getTabContent(){return this.getIndentedPanel()}getTopTabContent(){return this.getTopIndentedPanel()}markTabActive(e){this.applyStyles(e.tab,{opacity:1,background:"white"}),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){this.applyStyles(e.tab,{opacity:.5,background:""}),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}addTab(e,t){e.children[0].appendChild(t)}addTopTab(e,t){e.children[0].appendChild(t)}getBlockLink(){const e=document.createElement("a");return e.classList.add("je-block-link"),e}getBlockLinkHolder(){return document.createElement("div")}getLinksHolder(){return document.createElement("div")}createMediaLink(e,t,r){e.appendChild(t),r.classList.add("je-media"),e.appendChild(r)}createImageLink(e,t,r){e.appendChild(t),t.appendChild(r)}getFirstTab(e){return e.firstChild.firstChild}getInputGroup(e,t){}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}getDropZone(e){const t=document.createElement("div");return t.setAttribute("data-text",e),t.classList.add("je-dropzone"),t}getUploadPreview(e,t,r){const n=document.createElement("div");if(n.classList.add("je-upload-preview"),e.mimeType.substr(0,5)==="image"){const a=document.createElement("img");a.src=r,n.appendChild(a)}const s=document.createElement("div");s.innerHTML+=`<strong>Name:</strong> ${e.name}<br><strong>Type:</strong> ${e.type}<br><strong>Size:</strong> ${e.formattedSize}`,n.appendChild(s),n.appendChild(t);const o=document.createElement("div");return o.style.clear="left",n.appendChild(o),n}getProgressBar(){const r=document.createElement("progress");return r.setAttribute("max",100),r.setAttribute("value",0),r}updateProgressBar(e,t){e&&e.setAttribute("value",t)}updateProgressBarUnknown(e){e&&e.removeAttribute("value")}}const OOe={".je-form-input-label":"display:block;margin-bottom:3px;font-weight:bold",".je-form-input-description":"display:inline-block;margin:0;font-size:0.8em;font-style:italic",".je-indented-panel":"padding:5px;margin:10px;border-radius:3px;border:1px%20solid%20%23ddd",".je-child-editor-holder":"margin-bottom:8px",".je-header-button-holder":"display:inline-block;margin-left:10px;font-size:0.8em;vertical-align:middle",".je-table":"margin-bottom:5px;border-bottom:1px%20solid%20%23ccc",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class Wpe extends wl{getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return r.classList.add("je-form-input-label"),r}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-form-input-label"),t}getIndentedPanel(){const e=super.getIndentedPanel();return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){return this.getIndentedPanel()}getChildEditorHolder(){const e=super.getChildEditorHolder();return e.classList.add("je-child-editor-holder"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("je-header-button-holder"),e}getTable(){const e=super.getTable();return e.classList.add("je-table"),e}addInputError(e,t){const r=this.closest(e,".form-control")||e.controlgroup;e.errmsg?e.errmsg.style.display="block":(e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",r.appendChild(e.errmsg)),e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}Wpe.rules=OOe;const DOe={};class Ype extends wl{getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),r}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`col-md-offset-${r}`)}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),e}getRangeInput(e,t,r,n,s){return super.getRangeInput(e,t,r,n,s)}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&t.classList.add("form-control"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");return e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),n&&e.appendChild(n),e.insertBefore(t,e.firstChild),o.appendChild(e)):(o.classList.add("form-group"),e&&(e.classList.add("control-label"),o.appendChild(e),n&&e.appendChild(n)),o.appendChild(t)),r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("well","well-sm"),e.style.paddingBottom=0,e}getInfoButton(e){const t=document.createElement("span");t.classList.add("glyphicon","glyphicon-info-sign","pull-right"),t.style.padding=".25rem",t.style.position="relative",t.style.display="inline-block";const r=document.createElement("span");return r.style["font-family"]="sans-serif",r.style.visibility="hidden",r.style["background-color"]="rgba(50, 50, 50, .75)",r.style.margin="0 .25rem",r.style.color="#FAFAFA",r.style.padding=".5rem 1rem",r.style["border-radius"]=".25rem",r.style.width="25rem",r.style.position="absolute",r.innerText=e,t.onmouseover=()=>{r.style.visibility="visible"},t.onmouseleave=()=>{r.style.visibility="hidden"},t.appendChild(r),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("help-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),typeof e=="string"?r.textContent=e:r.appendChild(e),r}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-default"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-bordered"),e.style.width="auto",e.style.maxWidth="none",e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("help-block","errormsg"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='col-md-2 nav nav-pills nav-stacked' id='${t}' role='tablist'></ul><div class='col-md-10 tab-content active well well-small'  id='${t}'></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav nav-tabs' id='${t}' role='tablist'></ul><div class='tab-content active well well-small'  id='${t}'></div>`,r}getTab(e,t){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),n.setAttribute("aria-controls",t),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),n.setAttribute("aria-controls",t),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const n=document.createElement("div");n.classList.add("input-group-btn"),r.appendChild(n);for(let s=0;s<t.length;s++)n.appendChild(t[s]);return r}}Ype.rules=DOe;const FOe={".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},NOe={disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class Xpe extends wl{constructor(e){super(e,NOe)}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),this.options.custom_forms===!1?(this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg")):(r.classList.remove("form-control"),r.classList.add("custom-select"),this.options.input_size==="small"&&r.classList.add("custom-select-sm"),this.options.input_size==="large"&&r.classList.add("custom-select-lg")),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return this.options.custom_forms===!0&&(o.classList.remove("form-control"),o.classList.add("custom-range")),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),s=document.createElement("button");s.setAttribute("type","button");const o=document.createElement("button");o.setAttribute("type","button"),t.appendChild(r),t.appendChild(e),t.appendChild(n),r.appendChild(s),n.appendChild(o),t.classList.add("input-group"),r.classList.add("input-group-prepend"),n.classList.add("input-group-append"),s.classList.add("btn"),s.classList.add("btn-secondary"),s.classList.add("stepper-down"),o.classList.add("btn"),o.classList.add("btn-secondary"),o.classList.add("stepper-up"),e.getAttribute("readonly")&&(s.setAttribute("disabled",!0),o.setAttribute("disabled",!0)),s.textContent="-",o.textContent="+";const l=(u,d)=>{d?u.value=Number(d):u.value=Number(u.value),u.setAttribute("initialized","1")},c=e.getAttribute("min"),h=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),s.addEventListener("click",()=>{e.getAttribute("initialized")?c?Number(e.value)>Number(c)&&e.stepDown():e.stepDown():l(e,c),Ao(e,"change")}),o.addEventListener("click",()=>{e.getAttribute("initialized")?h?Number(e.value)<Number(h)&&e.stepUp():e.stepUp():l(e,c),Ao(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&e!=="file"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),e==="file"&&t.classList.add("form-control-file"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");this.options.custom_forms===!1?(a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label")):(a.classList.add("custom-control"),t.classList.add("custom-control-input"),e.classList.add("custom-control-label"),t.type==="checkbox"?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(t),a.appendChild(e),n&&a.appendChild(n),o.appendChild(a)}else e&&(o.appendChild(e),n&&o.appendChild(n)),o.appendChild(t);return r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ml-3","jsoneditor-twbs4-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const r=document.createTextNode("");return t.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),n&&t.appendChild(n));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return this.options.custom_forms===!1?t.classList.add("form-check-input"):t.classList.add("custom-control-input"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return this.options.custom_forms===!1?r.classList.add("form-check-label"):r.classList.add("custom-control-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,t,r){const n=document.createElement("div");return this.options.custom_forms===!1?n.classList.add("form-check"):n.classList.add("custom-control","custom-radio"),n.appendChild(t),n.appendChild(e),r&&(this.options.custom_forms===!1?n.classList.add("form-check-inline"):n.classList.add("custom-control-inline")),n}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","mb-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+t),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-right"),t}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const n=document.createElement("div");n.classList.add("input-group-append"),r.appendChild(n);for(let s=0;s<t.length;s++)t[s].classList.remove("mr-2","btn-secondary"),t[s].classList.add("btn-outline-secondary"),n.appendChild(t[s]);return r}}Xpe.rules=FOe;const $Oe={".form-group":"margin-bottom:1rem",".form-text":"display:block",".jsoneditor-twbs5-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},BOe={disable_theme_rules:!1,input_size:"normal",object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class Zpe extends wl{constructor(e){super(e,BOe)}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-control"),r.classList.add("form-select"),this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg"),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,r){e.classList.add(`col-md-${t}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.classList.add("form-label"),r.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return o.classList.remove("form-control"),o.classList.add("form-range"),o}getStepperButtons(e){const t=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button");const n=document.createElement("button");n.setAttribute("type","button"),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.classList.add("input-group"),r.classList.add("btn"),r.classList.add("btn-secondary"),r.classList.add("stepper-down"),n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const o=(c,h)=>{h?c.value=Number(h):c.value=Number(c.value),c.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Ao(e,"change")}),n.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Ao(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),t}getFormControl(e,t,r,n,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label"),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),a.appendChild(t),a.appendChild(e),n&&a.appendChild(n),o.appendChild(a)}else e&&(e.classList.add("form-label"),o.appendChild(e),n&&o.appendChild(n)),o.appendChild(t);return r&&o.appendChild(r),o}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("visually-hidden"),t}visuallyHidden(e){e&&e.classList.add("visually-hidden")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ms-3","jsoneditor-twbs5-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const r=document.createTextNode("");return t.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,r,n){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),n&&t.appendChild(n));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return t.classList.add("form-check-input"),t}getFormRadioLabel(e,t){const r=document.createElement("label");return r.classList.add("form-check-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,t,r){const n=document.createElement("div");return n.classList.add("form-check"),n.appendChild(t),n.appendChild(e),r&&n.classList.add("form-check-inline"),n}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","my-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),t.classList.add("d-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+t),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-end"),t}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let n=0;n<t.length;n++)t[n].classList.remove("me-2","btn-secondary"),t[n].classList.add("btn-outline-secondary"),r.appendChild(t[n]);return r}}Zpe.rules=$Oe;class Kpe extends wl{getTable(){const e=super.getTable();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return t.classList.add("ui-state-active"),t.style.fontWeight="bold",t}getTableCell(){const e=super.getTableCell();return e.classList.add("ui-widget-content"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e}getFormInputDescription(e){const t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t}getFormControl(e,t,r,n){const s=super.getFormControl(e,t,r,n);return t.type==="checkbox"?(s.style.lineHeight="25px",s.style.padding="3px 0"):s.style.padding="4px 0 8px 0",s}getDescription(e){const t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getButtonHolder(){const e=document.createElement("div");return e.classList.add("ui-buttonset"),e.style.fontSize=".7em",e}getFormInputLabel(e,t){const r=document.createElement("label");return r.style.fontWeight="bold",r.style.display="block",r.textContent=e,t&&r.classList.add("required"),r}getButton(e,t,r){const n=document.createElement("button");n.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),t&&!e?(n.classList.add("ui-button-icon-only"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(t)):t?(n.classList.add("ui-button-text-icon-primary"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(t)):n.classList.add("ui-button-text-only");const s=document.createElement("span");return s.classList.add("ui-button-text"),s.textContent=e||r||".",n.appendChild(s),n.setAttribute("title",r),n}setButtonText(e,t,r,n){e.innerHTML="",e.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),r&&!t?(e.classList.add("ui-button-icon-only"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):r?(e.classList.add("ui-button-text-icon-primary"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):e.classList.add("ui-button-text-only");const s=document.createElement("span");s.classList.add("ui-button-text"),s.textContent=t||n||".",e.appendChild(s),e.setAttribute("title",n)}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("ui-widget-content","ui-corner-all"),e.style.padding="1em 1.4em",e.style.marginBottom="20px",e}afterInputReady(e){if(!e.controls&&(e.controls=this.closest(e,".form-control"),this.queuedInputErrorText)){const t=this.queuedInputErrorText;delete this.queuedInputErrorText,this.addInputError(e,t)}}addInputError(e,t){if(!e.controls){this.queuedInputErrorText=t;return}e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.classList.add("ui-state-error"),e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t}removeInputError(e){e.controls||delete this.queuedInputErrorText,e.errmsg&&(e.errmsg.style.display="none")}markTabActive(e){e.tab.classList.remove("ui-widget-header"),e.tab.classList.add("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.add("ui-widget-header"),e.tab.classList.remove("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}}Kpe.rules={'div[data-schemaid="root"]:after':'position:relative;color:red;margin:10px 0;font-weight:600;display:block;width:100%;text-align:center;content:"This is an old JSON-Editor 1.x Theme and might not display elements correctly when used with the 2.x version"'};const jOe={".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class Jpe extends wl{addInputError(e,t){if(e.errmsg)e.errmsg.style.display="block";else{const r=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),r.nodeName&&r.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}Jpe.rules=jOe;const zOe={"*":"--primary-color:%235755d9;--gray-color:%23bcc3ce;--light-color:%23fff",".slider:focus":"box-shadow:none","h4 > label + .btn-group":"margin-left:1rem",".text-right > button":"margin-right:0%20!important",".text-left > button":"margin-left:0%20!important",".property-selector":"font-size:0.7rem;font-weight:normal;max-height:260px%20!important;width:395px%20!important",".property-selector .form-checkbox":"margin:0",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"border-collapse:collapse",".table td":"padding:0.4rem%200.4rem",".mr-5":"margin-right:1rem%20!important","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23eee",".je-table-border td":"border:0.05rem%20solid%20%23dadee4%20!important",".btn-info":"font-size:0.5rem;font-weight:bold;height:0.8rem;padding:0.15rem%200;line-height:0.8;margin:0.3rem%200%200.3rem%200.1rem",".je-label + select":"min-width:5rem",".je-label":"font-weight:600",".btn-action.btn-info":"width:0.8rem",".je-border":"border:0.05rem%20solid%20%23dadee4",".je-panel":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit",".je-align-bottom":"margin-top:auto",".je-desc":"font-size:smaller;margin:0.2rem%200",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem;border:3px%20solid%20white;box-shadow:0px%200px%208px%20rgba(0%2C%200%2C%200%2C%200.3);box-sizing:border-box",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".columns .container.je-noindent":"padding-left:0;padding-right:0",".selectize-control.multi .item":"background:var(--primary-color)%20!important",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"display:none",".select2-container--default .select2-selection--single":"border:none",".select2-container .select2-selection--single .select2-selection__rendered":"padding:0",".select2-container .select2-search--inline .select2-search__field":"margin-top:0",".select2-container--default.select2-container--focus   .select2-selection--multiple":"border:0.05rem%20solid%20var(--gray-color)",".select2-container--default   .select2-selection--multiple   .select2-selection__choice":"margin:0.4rem%200.2rem%200.2rem%200;padding:2px%205px;background-color:var(--primary-color);color:var(--light-color)",".select2-container--default .select2-search--inline .select2-search__field":"line-height:normal",".choices":"margin-bottom:auto",".choices__list--multiple .choices__item":"border:none;background-color:var(--primary-color);color:var(--light-color)",".choices[data-type*='select-multiple'] .choices__button":"border-left:0.05rem%20solid%20%232826a6",".choices__inner":"font-size:inherit;min-height:20px;padding:4px%207.5px%204px%203.75px",".choices[data-type*='select-one'] .choices__inner":"padding-bottom:4px",".choices__list--dropdown .choices__item":"font-size:inherit"},GOe={disable_theme_rules:!1,label_bold:!0,align_bottom:!1,object_indent:!1,object_border:!1,table_border:!1,table_zebrastyle:!1,input_size:"normal"};class Qpe extends wl{constructor(e){super(e,GOe)}setGridColumnSize(e,t,r){e.classList.add(`col-${t}`),r&&e.classList.add("col-mx-auto")}getGridContainer(){const e=document.createElement("div");return e.classList.add("container"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("columns"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("column"),this.options.align_bottom&&e.classList.add("je-align-bottom"),e}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel-top"),this.options.object_border&&e.classList.add("je-border"),e}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=super.getButtonHolder();return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=super.getFormButtonHolder();return t.classList.remove("btn-group"),t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"?t.classList.add("text-right"):t.classList.add("text-left"),t}getFormButton(e,t,r){const n=super.getFormButton(e,t,r);return n.classList.add("btn","btn-primary","mx-2","my-1"),this.options.input_size!=="small"&&n.classList.remove("btn-sm"),this.options.input_size==="large"&&n.classList.add("btn-lg"),n}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("btn","btn-sm","btn-primary","mr-2","my-1"),n}getHeader(e,t){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-desc","hide-sm"),t}getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return this.options.label_bold&&r.classList.add("je-label"),r}getCheckbox(){return this.getFormInputField("checkbox")}getCheckboxLabel(e,t){const r=super.getCheckboxLabel(e,t),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-checkbox","pr-0"),r.insertBefore(n,r.firstChild),r}getFormCheckboxControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-inline"),e}getMultiCheckboxHolder(e,t,r,n){return super.getMultiCheckboxHolder(e,t,r,n)}getFormRadio(e){const t=this.getFormInputField("radio");for(const r in e)t.setAttribute(r,e[r]);return t}getFormRadioLabel(e,t){const r=super.getFormRadioLabel(e,t),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-radio"),r.insertBefore(n,r.firstChild),r}getFormRadioControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-inline"),e}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("form-input"),t}getRangeInput(e,t,r,n,s){const o=super.getRangeInput(e,t,r,n,s);return o.classList.add("slider"),o.classList.remove("form-input"),o.setAttribute("oninput",'this.setAttribute("value", this.value)'),o}getRangeControl(e,t){const r=super.getRangeControl(e,t);return r.classList.add("text-center"),r}getSelectInput(e,t){const r=super.getSelectInput(e);return r.classList.add("form-select"),r}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-input"),e}getFormControl(e,t,r,n,s){const o=document.createElement("div");return o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),n&&e.appendChild(n),e.insertBefore(t,e.firstChild),o.appendChild(e)):(e&&(e.classList.add("form-label"),o.appendChild(e),n&&e.appendChild(n)),o.appendChild(t)),this.options.input_size==="small"?t.classList.add("input-sm","select-sm"):this.options.input_size==="large"&&t.classList.add("input-lg","select-lg"),t.type!=="checkbox"&&o.appendChild(t),r&&o.appendChild(r),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&r&&(r.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let n=0;n<t.length;n++)t[n].classList.add("input-group-btn"),t[n].classList.remove("btn-sm","mr-2","my-1"),r.appendChild(t[n]);return r}getInfoButton(e){const t=document.createElement("div");t.classList.add("popover","popover-left","float-right");const r=document.createElement("button");r.classList.add("btn","btn-secondary","btn-info","btn-action","s-circle"),r.setAttribute("tabindex","-1"),t.appendChild(r);const n=document.createTextNode("I");r.appendChild(n);const s=document.createElement("div");s.classList.add("popover-container"),t.appendChild(s);const o=document.createElement("div");o.classList.add("card"),s.appendChild(o);const a=document.createElement("div");return a.classList.add("card-body"),a.innerHTML=e,o.appendChild(a),t}getTable(){const e=super.getTable();return e.classList.add("table","table-scroll"),this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getProgressBar(){const e=super.getProgressBar();return e.classList.add("progress"),e}getTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("columns"),r.innerHTML=`<div class="column col-2"></div><div class="column col-10 content" id="${t}"></div>`,r}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class="tab"></ul><div class="content" id="${t}"></div>`,r}getTab(e,t){const r=document.createElement("a");return r.classList.add("btn","btn-secondary","btn-block"),r.setAttribute("href",`#${t}`),r.appendChild(e),r}getTopTab(e,t){const r=document.createElement("li");r.id=t,r.classList.add("tab-item");const n=document.createElement("a");return n.setAttribute("href",`#${t}`),n.appendChild(e),r.appendChild(n),r}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}afterInputReady(e){if(e.localName==="select"){if(e.classList.contains("selectized")){const t=e.nextSibling;t&&(t.classList.remove("form-select"),Array.from(t.querySelectorAll(".form-select")).forEach(r=>{r.classList.remove("form-select")}))}else if(e.classList.contains("select2-hidden-accessible")){const t=e.nextSibling;t&&t.querySelector(".select2-selection--single")&&t.classList.add("form-select")}}e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("form-input-hint"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.classList.remove("d-hide"),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.classList.add("d-hide"),e.controlgroup.classList.remove("has-error"))}}Qpe.rules=zOe;const UOe={".slider":"-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;display:block;border:none;height:1.2rem;width:100%25",".slider:focus":"box-shadow:0%200%200%200%20rgba(87%2C%2085%2C%20217%2C%200.2);outline:none",".slider.tooltip:not([data-tooltip])::after":"content:attr(value)",".slider::-webkit-slider-thumb":"-webkit-appearance:none;background:%23f17405;border-radius:100%25;height:0.6rem;margin-top:-0.25rem;transition:transform%200.2s;width:0.6rem",".slider:active::-webkit-slider-thumb":"transform:scale(1.25);outline:none",".slider::-webkit-slider-runnable-track":"background:%23b2b4b6;border-radius:0.1rem;height:0.1rem;width:100%25","a.tooltips":"position:relative;display:inline","a.tooltips span":"position:absolute;white-space:nowrap;width:auto;padding-left:1rem;padding-right:1rem;color:%23ffffff;background:rgba(56%2C%2056%2C%2056%2C%200.85);height:1.5rem;line-height:1.5rem;text-align:center;visibility:hidden;border-radius:3px","a.tooltips span:after":"content:%22%22;position:absolute;top:50%25;left:100%25;margin-top:-5px;width:0;height:0;border-left:5px%20solid%20rgba(56%2C%2056%2C%2056%2C%200.85);border-top:5px%20solid%20transparent;border-bottom:5px%20solid%20transparent","a:hover.tooltips span":"visibility:visible;opacity:0.9;font-size:0.8rem;right:100%25;top:50%25;margin-top:-12px;margin-right:10px;z-index:999",".json-editor-btntype-properties + div":"font-size:0.8rem;font-weight:normal",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"width:100%25;border-collapse:collapse",".table td":"padding:0rem%200rem","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23e6f4fe","div[data-schemaid='root']":"position:relative;width:inherit;display:inherit;overflow-x:hidden;z-index:10","select[multiple]":"height:auto","select[multiple].from-select":"height:auto",".je-table-zebra:nth-child(even)":"background-color:%23f2f2f2",".je-table-border":"border:0.5px%20solid%20black",".je-table-hdiv":"border-bottom:1px%20solid%20black",".je-border":"border:0.05rem%20solid%20%233182ce",".je-panel":"width:inherit;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"width:100%25;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit;font-weight:bold",".je-desc":"font-size:smaller;margin:0.2rem%200",".container-xl.je-noindent":"padding-left:0;padding-right:0",".json-editor-btntype-add":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%234299e1;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deletelast":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23e53e3e;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deleteall":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23000000;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-save":"float:right;color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-back":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-delete":"color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btntype-move":"color:%23000000;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btn-collapse":"padding:0em%200.8rem;font-size:1.3rem;color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},VOe={disable_theme_rules:!1,label_bold:!1,object_panel_default:!0,object_indent:!0,object_border:!1,table_border:!1,table_hdiv:!1,table_zebrastyle:!1,input_size:"small",enable_compact:!1};class ege extends wl{constructor(e){super(e,VOe)}getGridContainer(){const e=document.createElement("div");return e.classList.add("flex","flex-col","w-full"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("flex","flex-wrap","w-full"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("flex","flex-col"),e}setGridColumnSize(e,t,r){t>0&&t<12?e.classList.add(`w-${t}/12`,"px-1"):e.classList.add("w-full","px-1"),r&&(e.style.marginLeft=`${100/12*r}%`)}getIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","p-1"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","m-2"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTitle(){return this.translateProperty(this.schema.title)}getSelectInput(e,t){const r=super.getSelectInput(e);return t?r.classList.add("form-multiselect","block","py-0","h-auto","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"):r.classList.add("form-select","block","py-0","h-6","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&r.classList.add("compact"),r}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=super.getTextareaInput();return e.classList.add("block","w-full","px-1","text-sm","leading-normal","bg-white","text-black","border","border-grey","rounded"),this.options.enable_compact&&e.classList.add("compact"),e.style.height=0,e}getRangeInput(e,t,r){const n=this.getFormInputField("range");return n.classList.add("slider"),this.options.enable_compact&&n.classList.add("compact"),n.setAttribute("oninput",'this.setAttribute("value", this.value)'),n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",r),n}getRangeControl(e,t){const r=super.getRangeControl(e,t);return r.classList.add("text-center","text-black"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("form-checkbox","text-red-600"),e}getCheckboxLabel(e,t){const r=super.getCheckboxLabel(e,t);return r.classList.add("inline-flex","items-center"),r}getFormCheckboxControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("inline-flex flex-row"),e}getMultiCheckboxHolder(e,t,r,n){const s=super.getMultiCheckboxHolder(e,t,r,n);return s.classList.add("inline-flex","flex-col"),s}getFormRadio(e){const t=this.getFormInputField("radio");t.classList.add("form-radio","text-red-600");for(const r in e)t.setAttribute(r,e[r]);return t}getFormRadioLabel(e,t){const r=super.getFormRadioLabel(e,t);return r.classList.add("inline-flex","items-center","mr-2"),r}getFormRadioControl(e,t,r){return e.insertBefore(t,e.firstChild),r&&e.classList.add("form-radio"),e}getRadioHolder(e,t,r,n,s){const o=super.getRadioHolder(t,r,n,s);return e.options.layout==="h"?o.classList.add("inline-flex","flex-row"):o.classList.add("inline-flex","flex-col"),o}getFormInputLabel(e,t){const r=super.getFormInputLabel(e,t);return this.options.label_bold?r.classList.add("font-bold"):r.classList.add("required"),r}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("block","w-full","px-1","text-black","text-sm","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&t.classList.add("compact"),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("block","mt-1","text-xs"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getFormControl(e,t,r,n){const s=document.createElement("div");return s.classList.add("form-group","mb-1","w-full"),e&&(e.classList.add("text-xs"),t.type==="checkbox"&&(t.classList.add("form-checkbox","text-xs","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormCheckboxControl(e,t,!1,n)),t.type==="radio"&&(t.classList.add("form-radio","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormRadioControl(e,t,!1,n)),s.appendChild(e),!["checkbox","radio"].includes(t.type)&&n&&s.appendChild(n)),["checkbox","radio"].includes(t.type)||(this.options.input_size==="small"?t.classList.add("text-xs"):this.options.input_size==="normal"?t.classList.add("text-base"):this.options.input_size==="large"&&t.classList.add("text-xl"),s.appendChild(t)),r&&s.appendChild(r),s}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("text-sm"),e}getButtonHolder(){const e=document.createElement("div");return e.classList.add("flex","relative","inline-flex","align-middle"),e}getButton(e,t,r){const n=super.getButton(e,t,r);return n.classList.add("inline-block","align-middle","text-center","text-sm","bg-blue-700","text-white","py-1","pr-1","m-2","shadow","select-none","whitespace-no-wrap","rounded"),n}getInfoButton(e){const t=document.createElement("a");t.classList.add("tooltips","float-right"),t.innerHTML="";const r=document.createElement("span");return r.innerHTML=e,t.appendChild(r),t}getTable(){const e=super.getTable();return this.options.table_border?e.classList.add("je-table-border"):e.classList.add("table","border","p-0"),e}getTableRow(){const e=super.getTableRow();return this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("je-table-zebra"),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return this.options.table_border?t.classList.add("je-table-border"):this.options.table_hdiv?t.classList.add("je-table-hdiv"):t.classList.add("text-xs","border","p-0","m-0"),t}getTableCell(){const e=super.getTableCell();return this.options.table_border?e.classList.add("je-table-border"):this.options.table_hdiv?e.classList.add("je-table-hdiv"):e.classList.add("border-0","p-0","m-0"),e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.controlgroup.classList.add("text-red-600"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("block","mt-1","text-xs","text-red"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("text-red-600"),e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=document.createElement("div"),r=typeof e>"u"?"":e;return t.innerHTML=`<div class='w-2/12' id='${r}'><ul class='list-reset pl-0 mb-0'></ul></div><div class='w-10/12' id='${r}'></div>`,t.classList.add("flex"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabHolder(e){const t=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav-tabs flex list-reset pl-0 mb-0 border-b border-grey-light' id='${t}'></ul><div class='p-6 block' id='${t}'></div>`,r}getTab(e,t){const r=document.createElement("li");r.classList.add("nav-item","flex-col","text-center","text-white","bg-blue-500","shadow-md","border","p-2","mb-2","mr-2","hover:bg-blue-400","rounded");const n=document.createElement("a");return n.classList.add("nav-link","text-center"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTopTab(e,t){const r=document.createElement("li");r.classList.add("nav-item","flex","border-l","border-t","border-r");const n=document.createElement("a");return n.classList.add("nav-link","-mb-px","flex-row","text-center","bg-white","p-2","hover:bg-blue-400","rounded-t"),n.setAttribute("href",`#${t}`),n.setAttribute("data-toggle","tab"),n.appendChild(e),r.appendChild(n),r}getTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("block"),e.tab.firstChild.classList.contains("border-b")===!0?(e.tab.firstChild.classList.add("border-b-0"),e.tab.firstChild.classList.remove("border-b")):e.tab.firstChild.classList.add("border-b-0"),e.container.classList.contains("hidden")===!0&&e.container.classList.remove("hidden"),e.container.classList.add("block")}markTabInactive(e){e.tab.firstChild.classList.contains("border-b-0")===!0?(e.tab.firstChild.classList.add("border-b"),e.tab.firstChild.classList.remove("border-b-0")):e.tab.firstChild.classList.add("border-b"),e.container.classList.contains("block")===!0&&(e.container.classList.remove("block"),e.container.classList.add("hidden"))}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const s=document.createElement("div");return s.classList.add("bg-blue","leading-none","py-1","text-xs","text-center","text-white"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",n.appendChild(s),n}updateProgressBar(e,t){if(!e)return;const r=e.firstChild,n=`${t}%`;r.setAttribute("aria-valuenow",t),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","bg-blue","leading-none","py-1","text-xs","text-center","text-white","block"),t.removeAttribute("aria-valuenow"),t.classList.add("w-full"),t.innerHTML=""}getInputGroup(e,t){if(!e)return;const r=document.createElement("div");r.classList.add("relative","items-stretch","w-full"),r.appendChild(e);const n=document.createElement("div");n.classList.add("-mr-1"),r.appendChild(n);for(let s=0;s<t.length;s++)n.appendChild(t[s]);return r}}ege.rules=UOe;const qOe={html:Wpe,bootstrap3:Ype,bootstrap4:Xpe,bootstrap5:Zpe,jqueryui:Kpe,barebones:Jpe,spectre:Qpe,tailwind:ege},HOe={".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding-left:10px;margin-left:10px;border-left:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};class oi{constructor(e,t={}){if(!(e instanceof Element))throw new Error("element should be an instance of Element");this.element=e,this.options=Ke({},oi.defaults.options,t),this.ready=!1,this.copyClipboard=null,this.schema=this.options.schema,this.template=this.options.template,this.translate=this.options.translate||oi.defaults.translate,this.translateProperty=this.options.translateProperty||oi.defaults.translateProperty,this.uuid=0,this.__data={};const r=this.options.theme||oi.defaults.theme,n=oi.defaults.themes[r];if(!n)throw new Error(`Unknown theme ${r}`);this.element.setAttribute("data-theme",r),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new n(this);const s=Ke(HOe,this.getEditorsRules()),o=(l,c,h)=>h?this.addNewStyleRulesToShadowRoot(l,c,h):this.addNewStyleRules(l,c);if(!this.theme.options.disable_theme_rules){const l=Npe(this.element);o("default",s,l),typeof n.rules<"u"&&o(r,n.rules,l)}const a=oi.defaults.iconlibs[this.options.iconlib||oi.defaults.iconlib];a&&(this.iconlib=new a),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.promise=this.load()}async load(){const e=document.location.origin+document.location.pathname.toString(),t=new Kke(this.options);t.onSchemaLoaded=a=>{this.trigger("schemaLoaded",a)},t.onAllSchemasLoaded=()=>{this.trigger("allSchemasLoaded")},this.expandSchema=a=>t.expandSchema(a),this.expandRefs=(a,l)=>t.expandRefs(a,l);const r=document.location.toString(),n=await t.load(this.schema,e,r),s=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{};this.validator=new Gpe(this,null,s,oi.defaults);const o=this.getEditorClass(n);this.root=this.createEditor(o,{jsoneditor:this,schema:n,required:!0,container:this.root_container}),this.root.preBuild(),this.root.build(),this.root.postBuild(),Is(this.options,"startval")&&this.root.setValue(this.options.startval),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame(()=>{this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.trigger("ready"),this.trigger("change"))})}getValue(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}setValue(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(e),this}validate(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return arguments.length===1?this.validator.validate(e):this.validation_results}destroy(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)}on(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this}off(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];const r=[];for(let n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n]!==t&&r.push(this.callbacks[e][n]);this.callbacks[e]=r}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this}trigger(e,t){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(let r=0;r<this.callbacks[e].length;r++)this.callbacks[e][r].apply(this,[t]);return this}setOption(e,t){if(e==="show_errors")this.options.show_errors=t,this.onChange();else throw new Error(`Option ${e} must be set during instantiation and cannot be changed later`);return this}getEditorsRules(){const e=(t,r)=>r.rules?Ke(t,r.rules):t;return Object.values(oi.defaults.editors).reduce(e,{})}getEditorClass(e){let t;if(e=this.expandSchema(e),oi.defaults.resolvers.find(r=>(t=r(e,this),t&&oi.defaults.editors[t])),!t)throw new Error(`Unknown editor for schema ${JSON.stringify(e)}`);if(!oi.defaults.editors[t])throw new Error(`Unknown editor ${t}`);return oi.defaults.editors[t]}createEditor(e,t,r=1){return t=Ke({},e.options||{},t),new e(t,oi.defaults,r)}onChange(){if(this.ready&&!this.firing_change)return this.firing_change=!0,window.requestAnimationFrame(()=>{this.firing_change=!1,this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.options.show_errors!=="never"?this.root.showValidationErrors(this.validation_results):this.root.showValidationErrors([]),this.trigger("change"))}),this}compileTemplate(e,t=oi.defaults.template){let r;if(typeof t=="string"){if(!oi.defaults.templates[t])throw new Error(`Unknown template engine ${t}`);if(r=oi.defaults.templates[t](),!r)throw new Error(`Template engine ${t} missing required library.`)}else r=t;if(!r)throw new Error("No template engine set");if(!r.compile)throw new Error("Invalid template engine set");return r.compile(e)}_data(e,t,r){if(arguments.length===3){let n;e.hasAttribute(`data-jsoneditor-${t}`)?n=e.getAttribute(`data-jsoneditor-${t}`):(n=this.uuid++,e.setAttribute(`data-jsoneditor-${t}`,n)),this.__data[n]=r}else return e.hasAttribute(`data-jsoneditor-${t}`)?this.__data[e.getAttribute(`data-jsoneditor-${t}`)]:null}registerEditor(e){return this.editors=this.editors||{},this.editors[e.path]=e,this}unregisterEditor(e){return this.editors=this.editors||{},this.editors[e.path]=null,this}getEditor(e){if(this.editors)return this.editors[e]}watch(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this}unwatch(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;const r=[];for(let n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]!==t&&r.push(this.watchlist[e][n]);return this.watchlist[e]=r.length?r:null,this}notifyWatchers(e){if(!this.watchlist||!this.watchlist[e])return this;for(let t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()}isEnabled(){return!this.root||this.root.isEnabled()}enable(){this.root.enable()}disable(){this.root.disable()}setCopyClipboardContents(e){this.copyClipboard=e}getCopyClipboardContents(){return this.copyClipboard}addNewStyleRules(e,t){let r=document.querySelector(`#theme-${e}`);r||(r=document.createElement("style"),r.setAttribute("id",`theme-${e}`),r.appendChild(document.createTextNode("")),document.head.appendChild(r));const n=r.sheet?r.sheet:r.styleSheet,s=this.element.nodeName.toLowerCase();for(;n.cssRules.length>0;)n.deleteRule(0);Object.keys(t).forEach(o=>{const a=e==="default"?o:`${s}[data-theme="${e}"] ${o}`;n.insertRule?n.insertRule(a+" {"+decodeURIComponent(t[o])+"}",0):n.addRule&&n.addRule(a,decodeURIComponent(t[o]),0)})}addNewStyleRulesToShadowRoot(e,t,r){const n=this.element.nodeName.toLowerCase();let s="";Object.keys(t).forEach(a=>{const l=e==="default"?a:`${n}[data-theme="${e}"] ${a}`;s+=l+" {"+decodeURIComponent(t[a])+`}
`});const o=new CSSStyleSheet;o.replaceSync(s),r.adoptedStyleSheets=[...r.adoptedStyleSheets,o]}}oi.defaults=Sh;oi.AbstractEditor=xn;oi.AbstractTheme=wl;oi.AbstractIconLib=xl;Object.assign(oi.defaults.themes,qOe);Object.assign(oi.defaults.editors,Q_);Object.assign(oi.defaults.templates,aOe);Object.assign(oi.defaults.iconlibs,kOe);(()=>{var i=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var e="min-label",t="max-label",r="#1E293B",n=()=>{let s=null,o=null,a=null,l,c=!1,h=r,u="",d,f=null,p=null,g=null,m=[],y=()=>{var P;let F=(P=s==null?void 0:s.shadowRoot)==null?void 0:P.querySelector(".range-slider-box");f=document.createElement("div"),f.classList.add("labels-row"),F.prepend(f)},_=P=>{let F=document.createElement("label");return F.className=P,F.setAttribute("for","range-slider"),F},v=()=>{p=_(e),p.textContent=L(a==null?void 0:a.getTextMin(),u),g=_(t),g.textContent=L(a==null?void 0:a.getTextMax(),u),o==null||o.before(p),o==null||o.after(g);let P=a==null?void 0:a.getValues();if(P)for(let F=0;F<P.length;F++){let B=_(`value${F+1}-label generated-label`);B.textContent=L(P[F],u),m.push(B),f==null||f.append(B)}},x=()=>{for(let P of m)!P||P.remove();p==null||p.remove(),g==null||g.remove(),f==null||f.remove(),m=[]},w=P=>{c=P,c?(y(),v()):x()},T=P=>{h=P;for(let F of m)!F||(F.style.color=h??r);p&&(p.style.color=h??r),g&&(g.style.color=h??r)},A=P=>{u=P,l&&l()},R=()=>{!a||!f||f.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},L=(P,F)=>{let B=`${(P??"").toString()}${F}`;return d&&typeof d=="function"?d(P):B};return{get name(){return"Generated Labels"},init:(P,F,B,b)=>{var E,C,M;s=P,a=b,o=(E=P.shadowRoot)==null?void 0:E.getElementById("range-slider"),l=F,h=(C=s.getAttribute("generate-labels-text-color"))!=null?C:r,u=(M=s.getAttribute("generate-labels-units"))!=null?M:"",w(i(s.getAttribute("generate-labels"))),R(),T(h)},update:P=>{if(!(!c||!P.values)){R();for(let F=0;F<P.values.length;F++){let B=P.values[F],b=m[F];if(B===void 0&&b){b.remove(),m[F]=void 0;continue}if(B!==void 0&&!b){let E=_(`value${F+1}-label generated-label`);if(E.textContent=L(B,u),m[F]=E,P.values.length<=0)f==null||f.append(E);else if(F===0)f==null||f.append(E);else{let C=m[F-1];C==null||C.after(E)}continue}!b||(b.textContent=L(B,u))}p&&(p.textContent=L(P.textMin,u)),g&&(g.textContent=L(P.textMax,u)),T(h)}},onAttrChange:(P,F)=>{P==="generate-labels"&&w(i(F)),P==="generate-labels-text-color"&&T(F),P==="generate-labels-units"&&A(F)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return c??!1},set:P=>{w(i(P))}}},{name:"textColor",attributes:{get(){return h??""},set:P=>{T(P)}}},{name:"generateLabelsTextColor",attributes:{get(){return h??""},set:P=>{T(P)}}},{name:"units",attributes:{get(){return u??""},set:P=>{A(P)}}},{name:"generateLabelsUnits",attributes:{get(){return u??""},set:P=>{A(P)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:P=>{d=P,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:x}};window.tcRangeSliderPlugins.push(n)})();function WOe(i,e){Object.keys(e).forEach(t=>{i.setAttribute(t,e[t])})}class YOe extends xn{register(){super.register()}unregister(){super.unregister()}build(){const e=this.schema.properties,t=this.options,r=this.schema.description,n=this.theme,s=this.defaults.startVals[this.key];t.compact||(this.header=this.label=n.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=n.getFormInputDescription(this.translateProperty(r))),t.infoText&&(this.infoButton=n.getInfoButton(this.translateProperty(t.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(e).find(h=>h.includes("min")),l=Object.keys(e).find(h=>h.includes("max")),c={min:e[a].minimum,max:e[l].maximum,value1:(s==null?void 0:s[a])||e[a].default,value2:(s==null?void 0:s[l])||e[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};WOe(o,c),this.input=o,this.input.id=this.formname,this.control=n.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",h=>{h.preventDefault(),h.stopPropagation(),this.value={[a]:h.detail.value1,[l]:h.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const XOe=[{type:"object",format:"minmax",func:YOe}],ZOe=i=>{XOe.map(({type:e,format:t,func:r})=>{oi.defaults.startVals=i,oi.defaults.editors[t]=r,oi.defaults.resolvers.unshift(n=>{if(n.type===e&&n.format===t)return t})})},KOe=i=>new Promise(e=>{ZOe(i.value||{});const t=i.renderRoot.querySelector("form"),r=()=>new oi(t,{schema:i.schema,...i.value?{startval:i.value}:{},theme:"html",ajax:!0,...i.options});let n=r();return n.on("ready",()=>{if(Object.values(n.editors).some(s=>s instanceof Vpe)){n.destroy();const s=document.createElement("style");s.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css");
        `,i.renderRoot.appendChild(s);const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js",o.addEventListener("load",()=>{n=r(),e(n)}),i.renderRoot.appendChild(o)}else e(n)}),n}),JOe=`
  * {
    font-family: Roboto, sans-serif;
  }
`,QOe=`
  ${Nb}
  ${NC}
  ${$C}

  [data-schemaid=root] > .je-header {
    display: none;
  }
  input[type="text"], select {
    box-sizing: border-box !important;
    width: 100% !important;
    margin: 0.5rem 0rem !important;
    padding: 5px 7px !important;
    border-radius: 4px !important;
    border: 1px solid #0004 !important;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
`;var vs,Zv,ige,Kv,rge;class tge extends hi{constructor(){super();Et(this,Zv);Et(this,Kv);Et(this,vs,null);this.schema,this.value,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1}async parseProperty(t){if(t&&typeof t!="object")try{const r=await fetch(t);if(r.ok)return await r.json();console.error("Failed to fetch schema from URL: ",r.status)}catch(r){console.error("Error fetching schema: ",r)}return t}get editor(){return wt(this,vs)}get schema(){return this._schema}set schema(t){this._schema=t,wt(this,vs)&&wt(this,vs).destroy()}get value(){return this._value}set value(t){this._value=t,wt(this,vs)&&wt(this,vs).ready&&wt(this,vs).setValue(this.value)}async updated(t){this._value=await this.parseProperty(this.value),t.has("schema")&&(this._schema=await this.parseProperty(this.schema),wt(this,vs)||(go(this,vs,await KOe(this)),_r(this,Kv,rge).call(this)))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return ae`
      <style>
        ${JOe}
        ${!this.unstyled&&QOe}
      </style>
      <form></form>
    `}}vs=new WeakMap,Zv=new WeakSet,ige=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},Kv=new WeakSet,rge=function(){["ready","change"].map(r=>{wt(this,vs).on(r,()=>{this._value=wt(this,vs).getValue(),_r(this,Zv,ige).call(this)})})},ee(tge,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",tge);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Pt=i=>i!==void 0,nge=(i,e,t)=>e in i?i[e]:i[e]=t;const um={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class eDe{constructor(e){this._parser=new e}toDocument(e){return this._parser.parseFromString(e,"application/xml")}getAllTextContent(e,t){return Wb(e,t).join("")}}function Wb(i,e){return sge(i,e,[]).join("")}function sge(i,e,t){if(i.nodeType===um.CDATA_SECTION||i.nodeType===um.TEXT)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{var r;for(r=i.firstChild;r;r=r.nextSibling)sge(r,e,t)}return t}function tDe(i,e,t,r){for(var n=iDe(e);n;n=rDe(n)){var s=n.namespaceURI||null,o=i[s];if(Pt(o)){var a=o[n.localName];Pt(a)&&a.call(r,n,t)}}}function iDe(i){let e=i.firstElementChild||i.firstChild;for(;e&&e.nodeType!==um.ELEMENT;)e=e.nextSibling;return e}function rDe(i){let e=i.nextElementSibling||i.nextSibling;for(;e&&e.nodeType!==um.ELEMENT;)e=e.nextSibling;return e}function Zr(i,e,t){return nDe(i,e,t)}function nDe(i,e,t){var r=Pt(t)?t:{},n,s;for(n=0,s=i.length;n<s;++n)r[i[n]]=e;return r}function oge(i,e){return function(t,r){var n=i.call(Pt(e)?e:this,t,r);if(Pt(n)){var s=r[r.length-1];s.push(n)}}}function Dr(i,e,t,r,n){return r.push(i),tDe(e,t,r,n),r.pop()}function je(i,e,t){return function(r,n){let s=i.call(Pt(t)?t:this,r,n);if(Pt(s)){var o=n[n.length-1],a=Pt(e)?e:r.localName;o[a]=s}}}function qn(i,e,t){return function(r,n){var s=i.call(Pt(t)?t:this,r,n);if(Pt(s)){var o=n[n.length-1],a=Pt(e)?e:r.localName,l=nge(o,a,[]);l.push(s)}}}const sDe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function oDe(i){return i.replace(sDe,"")}function zh(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return Pt(e[1])||!1}function Cd(i){return Ja(Wb(i,!1))}function Ja(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function _w(i){return ev(Wb(i,!1))}function ev(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function Yt(i){return oDe(Wb(i,!1))}const aDe="http://www.w3.org/1999/xlink";function tT(i){return i.getAttributeNS(aDe,"href")}function lDe(i,e){return Dr({},DDe,i,e)}function age(i){return[Ja(i.getAttribute("minx")),Ja(i.getAttribute("miny")),Ja(i.getAttribute("maxx")),Ja(i.getAttribute("maxy"))]}function cDe(i,e){const t=age(i),r=[Ja(i.getAttribute("resx")),Ja(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS")||i.getAttribute("SRS"),extent:t,res:r}}function hDe(i,e){const t=age(i);if(!(!Pt(t[0])||!Pt(t[1])||!Pt(t[2])||!Pt(t[3])))return t}function uDe(i,e){const t=parseFloat(i.getAttribute("min")),r=parseFloat(i.getAttribute("max"));return{min:t,max:r}}function dDe(i,e){const t=Dr({},FDe,i,e);if(!Pt(t))return;const r=t.westBoundLongitude,n=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(!Pt(r)||!Pt(n)||!Pt(s)||!Pt(o)))return[r,n,s,o]}function fDe(i,e){return Dr({},RDe,i,e)}function pDe(i,e){return Dr({},LDe,i,e)}function gDe(i,e){return Dr({},IDe,i,e)}function mDe(i,e){return Dr({},PDe,i,e)}function yDe(i,e){return Dr({},kDe,i,e)}function _De(i,e){return Dr([],ODe,i,e)}function vDe(i,e){const t=zh(i.getAttribute("queryable"));return Dr({queryable:Pt(t)?t:!1},hge,i,e)}function bDe(i,e){var t=e[e.length-1];const r=Dr({},hge,i,e);if(!Pt(r))return;let n=zh(i.getAttribute("queryable"));Pt(n)||(n=t.queryable),r.queryable=Pt(n)?n:!1;let s=ev(i.getAttribute("cascaded"));Pt(s)||(s=t.cascaded),r.cascaded=s;let o=zh(i.getAttribute("opaque"));Pt(o)||(o=t.opaque),r.opaque=Pt(o)?o:!1;let a=zh(i.getAttribute("noSubsets"));Pt(a)||(a=t.noSubsets),r.noSubsets=Pt(a)?a:!1;let l=Ja(i.getAttribute("fixedWidth"));Pt(l)||(l=t.fixedWidth),r.fixedWidth=l;let c=Ja(i.getAttribute("fixedHeight"));Pt(c)||(c=t.fixedHeight),r.fixedHeight=c;const h=["Style","CRS","AuthorityURL"];for(let d=0,f=h.length;d<f;d++){const p=h[d],g=t[p];if(Pt(g)){let m=nge(r,p,[]);m=m.concat(g),r[p]=m}}const u=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,f=u.length;d<f;d++){const p=u[d],g=r[p];if(!Pt(g)){const m=t[p];r[p]=m}}return r}function xDe(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:zh(i.getAttribute("multipleValues")),nearestValue:zh(i.getAttribute("nearestValue")),current:zh(i.getAttribute("current")),values:Yt(i)}}function fl(i,e){return Dr({},GDe,i,e)}function wDe(i,e){return Dr({},NDe,i,e)}function EDe(i,e){return Dr({},BDe,i,e)}function SDe(i,e){return Dr({},jDe,i,e)}function vw(i,e){return Dr({},$De,i,e)}function lge(i,e){var t=fl(i,e);if(Pt(t)){const r=[ev(i.getAttribute("width")),ev(i.getAttribute("height"))];return t.size=r,t}}function CDe(i,e){var t=fl(i,e);if(Pt(t))return t.name=i.getAttribute("name"),t}function TDe(i,e){var t=fl(i,e);if(Pt(t))return t.type=i.getAttribute("type"),t}function ADe(i,e){return Dr({},zDe,i,e)}function cge(i,e){return Dr([],UDe,i,e)}const Kr=[null,"http://www.opengis.net/wms"],MDe=Zr(Kr,{Service:je(pDe),Capability:je(fDe)}),RDe=Zr(Kr,{Request:je(wDe),Exception:je(_De),Layer:je(vDe)}),LDe=Zr(Kr,{Name:je(Yt),Title:je(Yt),Abstract:je(Yt),KeywordList:je(cge),OnlineResource:je(tT),ContactInformation:je(gDe),Fees:je(Yt),AccessConstraints:je(Yt),LayerLimit:je(_w),MaxWidth:je(_w),MaxHeight:je(_w)}),IDe=Zr(Kr,{ContactPersonPrimary:je(mDe),ContactPosition:je(Yt),ContactAddress:je(yDe),ContactVoiceTelephone:je(Yt),ContactFacsimileTelephone:je(Yt),ContactElectronicMailAddress:je(Yt)}),PDe=Zr(Kr,{ContactPerson:je(Yt),ContactOrganization:je(Yt)}),kDe=Zr(Kr,{AddressType:je(Yt),Address:je(Yt),City:je(Yt),StateOrProvince:je(Yt),PostCode:je(Yt),Country:je(Yt)}),ODe=Zr(Kr,{Format:oge(Yt)}),hge=Zr(Kr,{Name:je(Yt),Title:je(Yt),Abstract:je(Yt),KeywordList:je(cge),CRS:qn(Yt),SRS:qn(Yt),EX_GeographicBoundingBox:je(dDe),LatLonBoundingBox:je(hDe),BoundingBox:qn(cDe),Dimension:qn(xDe),Attribution:je(lDe),AuthorityURL:qn(CDe),Identifier:qn(Yt),MetadataURL:qn(TDe),DataURL:qn(fl),FeatureListURL:qn(fl),Style:qn(ADe),MinScaleDenominator:je(Cd),MaxScaleDenominator:je(Cd),ScaleHint:je(uDe),Layer:qn(bDe)}),DDe=Zr(Kr,{Title:je(Yt),OnlineResource:je(tT),LogoURL:je(lge)}),FDe=Zr(Kr,{westBoundLongitude:je(Cd),eastBoundLongitude:je(Cd),southBoundLatitude:je(Cd),northBoundLatitude:je(Cd)}),NDe=Zr(Kr,{GetCapabilities:je(vw),GetMap:je(vw),GetFeatureInfo:je(vw)}),$De=Zr(Kr,{Format:qn(Yt),DCPType:qn(EDe)}),BDe=Zr(Kr,{HTTP:je(SDe)}),jDe=Zr(Kr,{Get:je(fl),Post:je(fl)}),zDe=Zr(Kr,{Name:je(Yt),Title:je(Yt),Abstract:je(Yt),LegendURL:qn(lge),StyleSheetURL:je(fl),StyleURL:je(fl)}),GDe=Zr(Kr,{Format:je(Yt),OnlineResource:je(tT)}),UDe=Zr(Kr,{Keyword:oge(Yt)});class VDe{constructor(e,t){!t&&typeof window<"u"&&(t=window.DOMParser),this.version=void 0,this._parser=new eDe(t),this._data=e}data(e){return this._data=e,this}toJSON(e){return e=e||this._data,this.parse(e)}parse(e){return this.readFromDocument(this._parser.toDocument(e))}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==um.ELEMENT)return this.readFromNode(t);return null}readFromNode(e){return this.version=e.getAttribute("version"),Dr({version:this.version},MDe,e,[])||null}}async function qDe(i){let e=new URL(i),t=e.searchParams;t.set("SERVICE","WMS"),t.set("REQUEST","GetCapabilities");let r=e.toString();const n=await fetch(r);if(n.ok){const s=await n.text();return new VDe(s).toJSON()}else throw new Error(`Error: ${n.status}`)}function iT(i){const e=/\b(?:wms|ows)\b/i,t=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return e.test(i)?"TileWMS":t.test(i)?"XYZ":!1}function HDe(i){const t=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(i),r=iT(i);return!!(i&&t&&r)}function uge(i){return i.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function WDe(i){try{return JSON.parse(uge(i)),!!i}catch{return!1}}function YDe(i,e){const t=new URL(i).searchParams;Object.entries(e).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{t.set(l,a[l])}):t.set(o,a)});const r=i.split("?")[0],n=t.toString();return`${r}?${n}`}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function $ae(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function _a(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$ae(Object(t),!0).forEach(function(r){XDe(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):$ae(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function __(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?__=function(e){return typeof e}:__=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__(i)}function XDe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function pl(){return pl=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},pl.apply(this,arguments)}function ZDe(i,e){if(i==null)return{};var t={},r=Object.keys(i),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}function KDe(i,e){if(i==null)return{};var t=ZDe(i,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}var JDe="1.15.2";function rl(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var El=rl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ry=rl(/Edge/i),Bae=rl(/firefox/i),Mg=rl(/safari/i)&&!rl(/chrome/i)&&!rl(/android/i),dge=rl(/iP(ad|od|hone)/i),fge=rl(/chrome/i)&&rl(/android/i),pge={capture:!1,passive:!1};function ti(i,e,t){i.addEventListener(e,t,!El&&pge)}function Ut(i,e,t){i.removeEventListener(e,t,!El&&pge)}function tv(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function QDe(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function wo(i,e,t,r){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&tv(i,e):tv(i,e))||r&&i===t)return i;if(i===t)break}while(i=QDe(i))}return null}var jae=/\s+/g;function gs(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var r=(" "+i.className+" ").replace(jae," ").replace(" "+e+" "," ");i.className=(r+(t?" "+e:"")).replace(jae," ")}}function nt(i,e,t){var r=i&&i.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Vd(i,e){var t="";if(typeof i=="string")t=i;else do{var r=nt(i,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(i=i.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function gge(i,e,t){if(i){var r=i.getElementsByTagName(e),n=0,s=r.length;if(t)for(;n<s;n++)t(r[n],n);return r}return[]}function da(){var i=document.scrollingElement;return i||document.documentElement}function pr(i,e,t,r,n){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,a,l,c,h,u;if(i!==window&&i.parentNode&&i!==da()?(s=i.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,u=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||t)&&i!==window&&(n=n||i.parentNode,!El))do if(n&&n.getBoundingClientRect&&(nt(n,"transform")!=="none"||t&&nt(n,"position")!=="static")){var d=n.getBoundingClientRect();o-=d.top+parseInt(nt(n,"border-top-width")),a-=d.left+parseInt(nt(n,"border-left-width")),l=o+s.height,c=a+s.width;break}while(n=n.parentNode);if(r&&i!==window){var f=Vd(n||i),p=f&&f.a,g=f&&f.d;f&&(o/=g,a/=p,u/=p,h/=g,l=o+h,c=a+u)}return{top:o,left:a,bottom:l,right:c,width:u,height:h}}}function zae(i,e,t){for(var r=ac(i,!0),n=pr(i)[e];r;){var s=pr(r)[t],o=void 0;if(t==="top"||t==="left"?o=n>=s:o=n<=s,!o)return r;if(r===da())break;r=ac(r,!1)}return!1}function df(i,e,t,r){for(var n=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==st.ghost&&(r||o[s]!==st.dragged)&&wo(o[s],t.draggable,i,!1)){if(n===e)return o[s];n++}s++}return null}function rT(i,e){for(var t=i.lastElementChild;t&&(t===st.ghost||nt(t,"display")==="none"||e&&!tv(t,e));)t=t.previousElementSibling;return t||null}function Us(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==st.clone&&(!e||tv(i,e))&&t++;return t}function Gae(i){var e=0,t=0,r=da();if(i)do{var n=Vd(i),s=n.a,o=n.d;e+=i.scrollLeft*s,t+=i.scrollTop*o}while(i!==r&&(i=i.parentNode));return[e,t]}function eFe(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===i[t][r])return Number(t)}return-1}function ac(i,e){if(!i||!i.getBoundingClientRect)return da();var t=i,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=nt(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return da();if(r||e)return t;r=!0}}while(t=t.parentNode);return da()}function tFe(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function bw(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var Rg;function mge(i,e){return function(){if(!Rg){var t=arguments,r=this;t.length===1?i.call(r,t[0]):i.apply(r,t),Rg=setTimeout(function(){Rg=void 0},e)}}}function iFe(){clearTimeout(Rg),Rg=void 0}function yge(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function _ge(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function vge(i,e,t){var r={};return Array.from(i.children).forEach(function(n){var s,o,a,l;if(!(!wo(n,e.draggable,i,!1)||n.animated||n===t)){var c=pr(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Ss="Sortable"+new Date().getTime();function rFe(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(nt(n,"display")==="none"||n===st.ghost)){i.push({target:n,rect:pr(n)});var s=_a({},i[i.length-1].rect);if(n.thisAnimationDuration){var o=Vd(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){i.push(r)},removeAnimationState:function(r){i.splice(eFe(i,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;i.forEach(function(a){var l=0,c=a.target,h=c.fromRect,u=pr(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,g=Vd(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&bw(d,u)&&!bw(h,u)&&(p.top-u.top)/(p.left-u.left)===(h.top-u.top)/(h.left-u.left)&&(l=sFe(p,d,f,n.options)),bw(u,h)||(c.prevFromRect=h,c.prevToRect=u,l||(l=n.options.animation),n.animate(c,p,u,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),i=[]},animate:function(r,n,s,o){if(o){nt(r,"transition",""),nt(r,"transform","");var a=Vd(this.el),l=a&&a.a,c=a&&a.d,h=(n.left-s.left)/(l||1),u=(n.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!u,nt(r,"transform","translate3d("+h+"px,"+u+"px,0)"),this.forRepaintDummy=nFe(r),nt(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),nt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){nt(r,"transition",""),nt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function nFe(i){return i.offsetWidth}function sFe(i,e,t,r){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Qu=[],xw={initializeByDefault:!0},ny={mount:function(e){for(var t in xw)xw.hasOwnProperty(t)&&!(t in e)&&(e[t]=xw[t]);Qu.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Qu.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";Qu.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](_a({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](_a({sortable:t},r)))})},initializePlugins:function(e,t,r,n){Qu.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,pl(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return Qu.forEach(function(n){typeof n.eventProperties=="function"&&pl(r,n.eventProperties.call(t[n.pluginName],e))}),r},modifyOption:function(e,t,r){var n;return Qu.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(n=s.optionListeners[t].call(e[s.pluginName],r))}),n}};function oFe(i){var e=i.sortable,t=i.rootEl,r=i.name,n=i.targetEl,s=i.cloneEl,o=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,h=i.oldDraggableIndex,u=i.newDraggableIndex,d=i.originalEvent,f=i.putSortable,p=i.extraEventProperties;if(e=e||t&&t[Ss],!!e){var g,m=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!El&&!ry?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||t,g.from=a||t,g.item=n||t,g.clone=s,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=h,g.newDraggableIndex=u,g.originalEvent=d,g.pullMode=f?f.lastPutMode:void 0;var _=_a(_a({},p),ny.getEventProperties(r,e));for(var v in _)g[v]=_[v];t&&t.dispatchEvent(g),m[y]&&m[y].call(e,g)}}var aFe=["evt"],Gn=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=KDe(r,aFe);ny.pluginEvent.bind(st)(e,t,_a({dragEl:be,parentEl:Xi,ghostEl:dt,rootEl:Ni,nextEl:Ch,lastDownEl:v_,cloneEl:zi,cloneHidden:Ql,dragStarted:ug,putSortable:Gr,activeSortable:st.active,originalEvent:n,oldIndex:Td,oldDraggableIndex:Lg,newIndex:ms,newDraggableIndex:Zl,hideGhostForTarget:Ege,unhideGhostForTarget:Sge,cloneNowHidden:function(){Ql=!0},cloneNowShown:function(){Ql=!1},dispatchSortableEvent:function(a){Tn({sortable:t,name:a,originalEvent:n})}},s))};function Tn(i){oFe(_a({putSortable:Gr,cloneEl:zi,targetEl:be,rootEl:Ni,oldIndex:Td,oldDraggableIndex:Lg,newIndex:ms,newDraggableIndex:Zl},i))}var be,Xi,dt,Ni,Ch,v_,zi,Ql,Td,ms,Lg,Zl,T0,Gr,pd=!1,iv=!1,rv=[],gh,_o,ww,Ew,Uae,Vae,ug,ed,Ig,Pg=!1,A0=!1,b_,nn,Sw=[],aS=!1,nv=[],Yb=typeof document<"u",M0=dge,qae=ry||El?"cssFloat":"float",lFe=Yb&&!fge&&!dge&&"draggable"in document.createElement("div"),bge=function(){if(Yb){if(El)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),xge=function(e,t){var r=nt(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=df(e,0,t),o=df(e,1,t),a=s&&nt(s),l=o&&nt(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+pr(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+pr(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=n&&r[qae]==="none"||o&&r[qae]==="none"&&c+h>n)?"vertical":"horizontal"},cFe=function(e,t,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,c=r?t.width:t.height;return n===a||s===l||n+o/2===a+c/2},hFe=function(e,t){var r;return rv.some(function(n){var s=n[Ss].options.emptyInsertThreshold;if(!(!s||rT(n))){var o=pr(n),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=n}}),r},wge=function(e){function t(s,o){return function(a,l,c,h){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||u))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,c,h),o)(a,l,c,h);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},n=e.group;(!n||__(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=t(n.pull,!0),r.checkPut=t(n.put),r.revertClone=n.revertClone,e.group=r},Ege=function(){!bge&&dt&&nt(dt,"display","none")},Sge=function(){!bge&&dt&&nt(dt,"display","")};Yb&&!fge&&document.addEventListener("click",function(i){if(iv)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),iv=!1,!1},!0);var mh=function(e){if(be){e=e.touches?e.touches[0]:e;var t=hFe(e.clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Ss]._onDragOver(r)}}},uFe=function(e){be&&be.parentNode[Ss]._isOutsideThisEl(e.target)};function st(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=pl({},e),i[Ss]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xge(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:st.supportPointer!==!1&&"PointerEvent"in window&&!Mg,emptyInsertThreshold:5};ny.initializePlugins(this,i,t);for(var r in t)!(r in e)&&(e[r]=t[r]);wge(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:lFe,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ti(i,"pointerdown",this._onTapStart):(ti(i,"mousedown",this._onTapStart),ti(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(ti(i,"dragover",this),ti(i,"dragenter",this)),rv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),pl(this,rFe())}st.prototype={constructor:st,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ed=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,be):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=n.filter;if(vFe(r),!be&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Mg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=wo(l,n.draggable,r,!1),!(l&&l.animated)&&v_!==l)){if(Td=Us(l),Lg=Us(l,n.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Tn({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Gn("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(u){if(u=wo(c,u.trim(),r,!1),u)return Tn({sortable:t,rootEl:u,name:"filter",targetEl:l,fromEl:r,toEl:r}),Gn("filter",t,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}n.handle&&!wo(c,n.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!be&&r.parentNode===s){var c=pr(r);if(Ni=s,be=r,Xi=be.parentNode,Ch=be.nextSibling,v_=r,T0=o.group,st.dragged=be,gh={target:be,clientX:(t||e).clientX,clientY:(t||e).clientY},Uae=gh.clientX-c.left,Vae=gh.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,be.style["will-change"]="all",l=function(){if(Gn("delayEnded",n,{evt:e}),st.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Bae&&n.nativeDraggable&&(be.draggable=!0),n._triggerDragStart(e,t),Tn({sortable:n,name:"choose",originalEvent:e}),gs(be,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){gge(be,h.trim(),Cw)}),ti(a,"dragover",mh),ti(a,"mousemove",mh),ti(a,"touchmove",mh),ti(a,"mouseup",n._onDrop),ti(a,"touchend",n._onDrop),ti(a,"touchcancel",n._onDrop),Bae&&this.nativeDraggable&&(this.options.touchStartThreshold=4,be.draggable=!0),Gn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(ry||El))){if(st.eventCanceled){this._onDrop();return}ti(a,"mouseup",n._disableDelayedDrag),ti(a,"touchend",n._disableDelayedDrag),ti(a,"touchcancel",n._disableDelayedDrag),ti(a,"mousemove",n._delayedDragTouchMoveHandler),ti(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&ti(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){be&&Cw(be),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ut(e,"mouseup",this._disableDelayedDrag),Ut(e,"touchend",this._disableDelayedDrag),Ut(e,"touchcancel",this._disableDelayedDrag),Ut(e,"mousemove",this._delayedDragTouchMoveHandler),Ut(e,"touchmove",this._delayedDragTouchMoveHandler),Ut(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?ti(document,"pointermove",this._onTouchMove):t?ti(document,"touchmove",this._onTouchMove):ti(document,"mousemove",this._onTouchMove):(ti(be,"dragend",this),ti(Ni,"dragstart",this._onDragStart));try{document.selection?x_(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(pd=!1,Ni&&be){Gn("dragStarted",this,{evt:t}),this.nativeDraggable&&ti(document,"dragover",uFe);var r=this.options;!e&&gs(be,r.dragClass,!1),gs(be,r.ghostClass,!0),st.active=this,e&&this._appendGhost(),Tn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(_o){this._lastX=_o.clientX,this._lastY=_o.clientY,Ege();for(var e=document.elementFromPoint(_o.clientX,_o.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(_o.clientX,_o.clientY),e!==t);)t=e;if(be.parentNode[Ss]._isOutsideThisEl(e),t)do{if(t[Ss]){var r=void 0;if(r=t[Ss]._onDragOver({clientX:_o.clientX,clientY:_o.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Sge()}},_onTouchMove:function(e){if(gh){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=dt&&Vd(dt,!0),a=dt&&o&&o.a,l=dt&&o&&o.d,c=M0&&nn&&Gae(nn),h=(s.clientX-gh.clientX+n.x)/(a||1)+(c?c[0]-Sw[0]:0)/(a||1),u=(s.clientY-gh.clientY+n.y)/(l||1)+(c?c[1]-Sw[1]:0)/(l||1);if(!st.active&&!pd){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(dt){o?(o.e+=h-(ww||0),o.f+=u-(Ew||0)):o={a:1,b:0,c:0,d:1,e:h,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");nt(dt,"webkitTransform",d),nt(dt,"mozTransform",d),nt(dt,"msTransform",d),nt(dt,"transform",d),ww=h,Ew=u,_o=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!dt){var e=this.options.fallbackOnBody?document.body:Ni,t=pr(be,!0,M0,!0,e),r=this.options;if(M0){for(nn=e;nt(nn,"position")==="static"&&nt(nn,"transform")==="none"&&nn!==document;)nn=nn.parentNode;nn!==document.body&&nn!==document.documentElement?(nn===document&&(nn=da()),t.top+=nn.scrollTop,t.left+=nn.scrollLeft):nn=da(),Sw=Gae(nn)}dt=be.cloneNode(!0),gs(dt,r.ghostClass,!1),gs(dt,r.fallbackClass,!0),gs(dt,r.dragClass,!0),nt(dt,"transition",""),nt(dt,"transform",""),nt(dt,"box-sizing","border-box"),nt(dt,"margin",0),nt(dt,"top",t.top),nt(dt,"left",t.left),nt(dt,"width",t.width),nt(dt,"height",t.height),nt(dt,"opacity","0.8"),nt(dt,"position",M0?"absolute":"fixed"),nt(dt,"zIndex","100000"),nt(dt,"pointerEvents","none"),st.ghost=dt,e.appendChild(dt),nt(dt,"transform-origin",Uae/parseInt(dt.style.width)*100+"% "+Vae/parseInt(dt.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,s=r.options;if(Gn("dragStart",this,{evt:e}),st.eventCanceled){this._onDrop();return}Gn("setupClone",this),st.eventCanceled||(zi=_ge(be),zi.removeAttribute("id"),zi.draggable=!1,zi.style["will-change"]="",this._hideClone(),gs(zi,this.options.chosenClass,!1),st.clone=zi),r.cloneId=x_(function(){Gn("clone",r),!st.eventCanceled&&(r.options.removeCloneOnHide||Ni.insertBefore(zi,be),r._hideClone(),Tn({sortable:r,name:"clone"}))}),!t&&gs(be,s.dragClass,!0),t?(iv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ut(document,"mouseup",r._onDrop),Ut(document,"touchend",r._onDrop),Ut(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,be)),ti(document,"drop",r),nt(be,"transform","translateZ(0)")),pd=!0,r._dragStartId=x_(r._dragStarted.bind(r,t,e)),ti(document,"selectstart",r),ug=!0,Mg&&nt(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,n,s,o,a=this.options,l=a.group,c=st.active,h=T0===l,u=a.sort,d=Gr||c,f,p=this,g=!1;if(aS)return;function m(D,U){Gn(D,p,_a({evt:e,isOwner:h,axis:f?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:u,fromSortable:d,target:r,completed:_,onMove:function(Z,Q){return R0(Ni,t,be,n,Z,pr(Z),e,Q)},changed:v},U))}function y(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(D){return m("dragOverCompleted",{insertion:D}),D&&(h?c._hideClone():c._showClone(p),p!==d&&(gs(be,Gr?Gr.options.ghostClass:c.options.ghostClass,!1),gs(be,a.ghostClass,!0)),Gr!==p&&p!==st.active?Gr=p:p===st.active&&Gr&&(Gr=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===be&&!be.animated||r===t&&!r.animated)&&(ed=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(be.parentNode[Ss]._isOutsideThisEl(e.target),!D&&mh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function v(){ms=Us(be),Zl=Us(be,a.draggable),Tn({sortable:p,name:"change",toEl:t,newIndex:ms,newDraggableIndex:Zl,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=wo(r,a.draggable,t,!0),m("dragOver"),st.eventCanceled)return g;if(be.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(iv=!1,c&&!a.disabled&&(h?u||(o=Xi!==Ni):Gr===this||(this.lastPutMode=T0.checkPull(this,c,be,e))&&l.checkPut(this,c,be,e))){if(f=this._getDirection(e,r)==="vertical",n=pr(be),m("dragOverValid"),st.eventCanceled)return g;if(o)return Xi=Ni,y(),this._hideClone(),m("revert"),st.eventCanceled||(Ch?Ni.insertBefore(be,Ch):Ni.appendChild(be)),_(!0);var x=rT(t,a.draggable);if(!x||gFe(e,f,this)&&!x.animated){if(x===be)return _(!1);if(x&&t===e.target&&(r=x),r&&(s=pr(r)),R0(Ni,t,be,n,r,s,e,!!r)!==!1)return y(),x&&x.nextSibling?t.insertBefore(be,x.nextSibling):t.appendChild(be),Xi=t,v(),_(!0)}else if(x&&pFe(e,f,this)){var w=df(t,0,a,!0);if(w===be)return _(!1);if(r=w,s=pr(r),R0(Ni,t,be,n,r,s,e,!1)!==!1)return y(),t.insertBefore(be,w),Xi=t,v(),_(!0)}else if(r.parentNode===t){s=pr(r);var T=0,A,R=be.parentNode!==t,L=!cFe(be.animated&&be.toRect||n,r.animated&&r.toRect||s,f),P=f?"top":"left",F=zae(r,"top","top")||zae(be,"top","top"),B=F?F.scrollTop:void 0;ed!==r&&(A=s[P],Pg=!1,A0=!L&&a.invertSwap||R),T=mFe(e,r,s,f,L?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,A0,ed===r);var b;if(T!==0){var E=Us(be);do E-=T,b=Xi.children[E];while(b&&(nt(b,"display")==="none"||b===dt))}if(T===0||b===r)return _(!1);ed=r,Ig=T;var C=r.nextElementSibling,M=!1;M=T===1;var O=R0(Ni,t,be,n,r,s,e,M);if(O!==!1)return(O===1||O===-1)&&(M=O===1),aS=!0,setTimeout(fFe,30),y(),M&&!C?t.appendChild(be):r.parentNode.insertBefore(be,M?C:r),F&&yge(F,0,B-F.scrollTop),Xi=be.parentNode,A!==void 0&&!A0&&(b_=Math.abs(A-pr(r)[P])),v(),_(!0)}if(t.contains(be))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ut(document,"mousemove",this._onTouchMove),Ut(document,"touchmove",this._onTouchMove),Ut(document,"pointermove",this._onTouchMove),Ut(document,"dragover",mh),Ut(document,"mousemove",mh),Ut(document,"touchmove",mh)},_offUpEvents:function(){var e=this.el.ownerDocument;Ut(e,"mouseup",this._onDrop),Ut(e,"touchend",this._onDrop),Ut(e,"pointerup",this._onDrop),Ut(e,"touchcancel",this._onDrop),Ut(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(ms=Us(be),Zl=Us(be,r.draggable),Gn("drop",this,{evt:e}),Xi=be&&be.parentNode,ms=Us(be),Zl=Us(be,r.draggable),st.eventCanceled){this._nulling();return}pd=!1,A0=!1,Pg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),lS(this.cloneId),lS(this._dragStartId),this.nativeDraggable&&(Ut(document,"drop",this),Ut(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Mg&&nt(document.body,"user-select",""),nt(be,"transform",""),e&&(ug&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),dt&&dt.parentNode&&dt.parentNode.removeChild(dt),(Ni===Xi||Gr&&Gr.lastPutMode!=="clone")&&zi&&zi.parentNode&&zi.parentNode.removeChild(zi),be&&(this.nativeDraggable&&Ut(be,"dragend",this),Cw(be),be.style["will-change"]="",ug&&!pd&&gs(be,Gr?Gr.options.ghostClass:this.options.ghostClass,!1),gs(be,this.options.chosenClass,!1),Tn({sortable:this,name:"unchoose",toEl:Xi,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ni!==Xi?(ms>=0&&(Tn({rootEl:Xi,name:"add",toEl:Xi,fromEl:Ni,originalEvent:e}),Tn({sortable:this,name:"remove",toEl:Xi,originalEvent:e}),Tn({rootEl:Xi,name:"sort",toEl:Xi,fromEl:Ni,originalEvent:e}),Tn({sortable:this,name:"sort",toEl:Xi,originalEvent:e})),Gr&&Gr.save()):ms!==Td&&ms>=0&&(Tn({sortable:this,name:"update",toEl:Xi,originalEvent:e}),Tn({sortable:this,name:"sort",toEl:Xi,originalEvent:e})),st.active&&((ms==null||ms===-1)&&(ms=Td,Zl=Lg),Tn({sortable:this,name:"end",toEl:Xi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gn("nulling",this),Ni=be=Xi=dt=Ch=zi=v_=Ql=gh=_o=ug=ms=Zl=Td=Lg=ed=Ig=Gr=T0=st.dragged=st.ghost=st.clone=st.active=null,nv.forEach(function(e){e.checked=!0}),nv.length=ww=Ew=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":be&&(this._onDragOver(e),dFe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)t=r[n],wo(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||_Fe(t));return e},sort:function(e,t){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];wo(a,this.options.draggable,n,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return wo(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var n=ny.modifyOption(this,e,t);typeof n<"u"?r[e]=n:r[e]=t,e==="group"&&wge(r)},destroy:function(){Gn("destroy",this);var e=this.el;e[Ss]=null,Ut(e,"mousedown",this._onTapStart),Ut(e,"touchstart",this._onTapStart),Ut(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ut(e,"dragover",this),Ut(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),rv.splice(rv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ql){if(Gn("hideClone",this),st.eventCanceled)return;nt(zi,"display","none"),this.options.removeCloneOnHide&&zi.parentNode&&zi.parentNode.removeChild(zi),Ql=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ql){if(Gn("showClone",this),st.eventCanceled)return;be.parentNode==Ni&&!this.options.group.revertClone?Ni.insertBefore(zi,be):Ch?Ni.insertBefore(zi,Ch):Ni.appendChild(zi),this.options.group.revertClone&&this.animate(be,zi),nt(zi,"display",""),Ql=!1}}};function dFe(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function R0(i,e,t,r,n,s,o,a){var l,c=i[Ss],h=c.options.onMove,u;return window.CustomEvent&&!El&&!ry?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=i,l.dragged=t,l.draggedRect=r,l.related=n||e,l.relatedRect=s||pr(e),l.willInsertAfter=a,l.originalEvent=o,i.dispatchEvent(l),h&&(u=h.call(c,l,o)),u}function Cw(i){i.draggable=!1}function fFe(){aS=!1}function pFe(i,e,t){var r=pr(df(t.el,0,t.options,!0)),n=vge(t.el,t.options,dt),s=10;return e?i.clientX<n.left-s||i.clientY<r.top&&i.clientX<r.right:i.clientY<n.top-s||i.clientY<r.bottom&&i.clientX<r.left}function gFe(i,e,t){var r=pr(rT(t.el,t.options.draggable)),n=vge(t.el,t.options,dt),s=10;return e?i.clientX>n.right+s||i.clientY>r.bottom&&i.clientX>r.left:i.clientY>n.bottom+s||i.clientX>r.right&&i.clientY>r.top}function mFe(i,e,t,r,n,s,o,a){var l=r?i.clientY:i.clientX,c=r?t.height:t.width,h=r?t.top:t.left,u=r?t.bottom:t.right,d=!1;if(!o){if(a&&b_<c*n){if(!Pg&&(Ig===1?l>h+c*s/2:l<u-c*s/2)&&(Pg=!0),Pg)d=!0;else if(Ig===1?l<h+b_:l>u-b_)return-Ig}else if(l>h+c*(1-n)/2&&l<u-c*(1-n)/2)return yFe(e)}return d=d||o,d&&(l<h+c*s/2||l>u-c*s/2)?l>h+c/2?1:-1:0}function yFe(i){return Us(be)<Us(i)?1:-1}function _Fe(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function vFe(i){nv.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&nv.push(r)}}function x_(i){return setTimeout(i,0)}function lS(i){return clearTimeout(i)}Yb&&ti(document,"touchmove",function(i){(st.active||pd)&&i.cancelable&&i.preventDefault()});st.utils={on:ti,off:Ut,css:nt,find:gge,is:function(e,t){return!!wo(e,t,e,!1)},extend:tFe,throttle:mge,closest:wo,toggleClass:gs,clone:_ge,index:Us,nextTick:x_,cancelNextTick:lS,detectDirection:xge,getChild:df};st.get=function(i){return i[Ss]};st.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(st.utils=_a(_a({},st.utils),r.utils)),ny.mount(r)})};st.create=function(i,e){return new st(i,e)};st.version=JDe;var dr=[],dg,cS,hS=!1,Tw,Aw,sv,fg;function bFe(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?ti(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ti(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ti(document,"touchmove",this._handleFallbackAutoScroll):ti(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ut(document,"dragover",this._handleAutoScroll):(Ut(document,"pointermove",this._handleFallbackAutoScroll),Ut(document,"touchmove",this._handleFallbackAutoScroll),Ut(document,"mousemove",this._handleFallbackAutoScroll)),Hae(),w_(),iFe()},nulling:function(){sv=cS=dg=hS=fg=Tw=Aw=null,dr.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var n=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(sv=t,r||this.options.forceAutoScrollFallback||ry||El||Mg){Mw(t,this.options,a,r);var l=ac(a,!0);hS&&(!fg||s!==Tw||o!==Aw)&&(fg&&Hae(),fg=setInterval(function(){var c=ac(document.elementFromPoint(s,o),!0);c!==l&&(l=c,w_()),Mw(t,n.options,c,r)},10),Tw=s,Aw=o)}else{if(!this.options.bubbleScroll||ac(a,!0)===da()){w_();return}Mw(t,this.options,ac(a,!1),!1)}}},pl(i,{pluginName:"scroll",initializeByDefault:!0})}function w_(){dr.forEach(function(i){clearInterval(i.pid)}),dr=[]}function Hae(){clearInterval(fg)}var Mw=mge(function(i,e,t,r){if(e.scroll){var n=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=da(),c=!1,h;cS!==t&&(cS=t,w_(),dg=e.scroll,h=e.scrollFn,dg===!0&&(dg=ac(t,!0)));var u=0,d=dg;do{var f=d,p=pr(f),g=p.top,m=p.bottom,y=p.left,_=p.right,v=p.width,x=p.height,w=void 0,T=void 0,A=f.scrollWidth,R=f.scrollHeight,L=nt(f),P=f.scrollLeft,F=f.scrollTop;f===l?(w=v<A&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),T=x<R&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(w=v<A&&(L.overflowX==="auto"||L.overflowX==="scroll"),T=x<R&&(L.overflowY==="auto"||L.overflowY==="scroll"));var B=w&&(Math.abs(_-n)<=o&&P+v<A)-(Math.abs(y-n)<=o&&!!P),b=T&&(Math.abs(m-s)<=o&&F+x<R)-(Math.abs(g-s)<=o&&!!F);if(!dr[u])for(var E=0;E<=u;E++)dr[E]||(dr[E]={});(dr[u].vx!=B||dr[u].vy!=b||dr[u].el!==f)&&(dr[u].el=f,dr[u].vx=B,dr[u].vy=b,clearInterval(dr[u].pid),(B!=0||b!=0)&&(c=!0,dr[u].pid=setInterval((function(){r&&this.layer===0&&st.active._onTouchMove(sv);var C=dr[this.layer].vy?dr[this.layer].vy*a:0,M=dr[this.layer].vx?dr[this.layer].vx*a:0;typeof h=="function"&&h.call(st.dragged.parentNode[Ss],M,C,i,sv,dr[this.layer].el)!=="continue"||yge(dr[this.layer].el,M,C)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&d!==l&&(d=ac(d,!1)));hS=c}},30),Cge=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=r||s;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function nT(){}nT.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=df(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Cge};pl(nT,{pluginName:"revertOnSpill"});function sT(){}sT.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Cge};pl(sT,{pluginName:"removeOnSpill"});st.mount(new bFe);st.mount(sT,nT);const xFe=i=>{const e=i.item;let t=Array.prototype.slice.call(e.parentNode.childNodes);return t=t.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),t},wFe=(i,e,t,r,n,s)=>{const a=i.item.parentNode;for(const g of t)a.appendChild(g);if(i.oldIndex==i.newIndex)return;const l=r.getArray(),c=i.item.querySelector("eox-layercontrol-layer").layer.get(n),h=l.find(g=>g.get(n)===c),u=s.dataset.layer,d=l.find(g=>g.get(n)==u);let f,p;for(f=0;f<l.length;f++)if(l[f]==h){r.removeAt(f);break}for(p=0;p<l.length;p++)if(l[p]===d){f>p?r.insertAt(p,h):r.insertAt(p+1,h);break}e.requestUpdate()};function EFe(i,e,t,r){let n=[],s=null;i._sortable=st.create(i,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>n=xFe(o),onMove:o=>{s=o.related},onEnd:o=>wFe(o,r,n,e,t,s)})}function SFe(i,e,t,r){const n=i.getArray();let s=!1;n.forEach(o=>{const a=o.ol_uid;o.get(e)||(o.set(e,a),s=!0),o.get(t)||(o.set(t,`layer ${a}`),s=!0),s&&r.requestUpdate()})}function oT(i,e,t){let r=[];const n=(s,o,a)=>{r=[...r,...s.filter(c=>c.get(o)===a)];const l=s.filter(c=>c.getLayers);return l.length>0&&l.forEach(c=>n(c.getLayers().getArray(),o,a)),r};return n(i,e,t),r}function CFe(i,e,t){if(!i||!e)return!1;if(!Tge(i,t))return!0;const r=i.get("minZoom"),n=i.get("maxZoom"),s=e.getView().getZoom();return s>r&&s<n}function Tge(i,e){const t=i.get("minZoom"),r=i.get("maxZoom");return!!(e&&(t!==-1/0||r!==1/0))}function TFe(i,e){var n,s,o;return!i||!e?void 0:i.getLayers?"group":((o=(n=e.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:n.ol_uid)==null?void 0:o.includes(i.getSource?(s=i.getSource())==null?void 0:s.ol_uid:void 0))?"draw":i.declutter_!==void 0?"vector":"raster"}function Age(i,e){var r;let t={};for(const n in i){const s=i[n].type;if(s&&s!=="object")t[n]=s==="number"?Number(e[n]):e[n];else if(typeof i[n]=="object"&&((r=i[n])!=null&&r.properties)){const o=Age(i[n].properties,e);Object.keys(o).length>0&&(t[n]=o)}}return t}function AFe(i,e){var s;if(!e||!i.getSource().getTileUrlFunction())return null;const t=new URL(i.getSource().getTileUrlFunction()([0,0,0])),r=Object.fromEntries(t.searchParams.entries()),n=Age(((s=e.schema)==null?void 0:s.properties)||e.schema,r);return Object.keys(n).length?n:null}const MFe=(i,e)=>i==null?void 0:i.filter(t=>["remove","sort"].filter(r=>e!=null&&e.get("layerControlDisable")?r!=="sort":!0).includes(t)),RFe=(i,e)=>i==null?void 0:i.filter(t=>{let r=!0;return["remove","sort"].includes(t)&&(r=!1),t==="info"&&(r=e.get("description")),t==="config"&&(r=e.get("layerConfig")),r}),LFe=(i,e)=>ae`
  <button slot="${i}-icon" class="icon">${e?i:It}</button>
`,IFe=i=>ae`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:e}=i;e==null||e.set("layerControlOptional",!0),e==null||e.setVisible(!1),i.dispatchEvent(new CustomEvent("changed",{detail:e,bubbles:!0}))}}
  >
    ${i.unstyled?"x":It}
  </button>
`,PFe=i=>ae`
  <span class="button sort-icon icon drag-handle">
    ${i?"":It}
  </span>
`,Mge=i=>{var t;const e=["layerControlHide","layerControlOptional"];return(t=i==null?void 0:i.getArray())==null?void 0:t.filter(r=>e.every(n=>!r.get(n)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rge=Db(class extends Fb{constructor(i){if(super(i),i.type!==Xl.PROPERTY&&i.type!==Xl.ATTRIBUTE&&i.type!==Xl.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!i1e(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===wd||e===It)return e;const t=i.element,r=i.name;if(i.type===Xl.PROPERTY){if(e===t[r])return wd}else if(i.type===Xl.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(r))return wd}else if(i.type===Xl.ATTRIBUTE&&t.getAttribute(r)===e+"")return wd;return nC(i),e}}),kFe=(i,e,t)=>{let r=e;return t.layer.getSource().getTileUrlFunction()&&(r||(r=t.layer.getSource().getTileUrlFunction()),t.layer.getSource().setTileUrlFunction((...n)=>YDe(r(...n),i)),t.layer.getSource().setKey(new Date)),r};var Gm,Um,Vm,Jv,Ige,Qv,eb;class Lge extends hi{constructor(){super();Et(this,Jv);Et(this,Gm,{});Et(this,Um,null);Et(this,Vm,void 0);Et(this,Qv,"");Et(this,eb,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.debouncedDataChange=Ub(_r(this,Jv,Ige),1e3,{leading:!0})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){go(this,Um,AFe(this.layer,this.layerConfig)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const t={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return ae`
      <style>
        ${wt(this,Qv)}
        ${!this.unstyled&&wt(this,eb)}
      </style>
      ${bt(this.layerConfig,()=>ae`
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${wt(this,Um)}
            .options=${t}
            @change=${this.debouncedDataChange}
          ></eox-jsonform>
        `)}
    `}}Gm=new WeakMap,Um=new WeakMap,Vm=new WeakMap,Jv=new WeakSet,Ige=function(t){go(this,Gm,t.detail),go(this,Vm,kFe(wt(this,Gm),wt(this,Vm),this)),this.requestUpdate()},Qv=new WeakMap,eb=new WeakMap,ee(Lge,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",Lge);var qm,tb,ib;class Pge extends hi{constructor(){super();Et(this,qm,t=>this.selectedTab===t&&"highlighted");Et(this,tb,`
    .tabbed figure {
      margin: 0;
    }
    .tabbed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div {
      display: flex;
    }
    .tabbed .tab {
      display: none;
    }
    .tabbed .tab.highlighted {
      display: block;
    }
    .tabbed label.highlighted {
      background: lightgrey;
    }
  `);Et(this,ib,`
    .tabbed {
      font-size: small;
    }
    .tabbed label.highlighted {
      background: #00417011;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: #00417011;
      border-top: 1px solid #0041701a;
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.tabs,r=this.actions,n=r.length+t.length>1;return ae`
      <style>
        ${wt(this,tb)}
        ${!this.unstyled&&wt(this,ib)}
      </style>
      <div class="tabbed">
        <!-- Navigation for tabs and actions -->
        ${bt(n,()=>ae`
            <nav>
              <div>
                <!-- Labels for tabs -->
                ${Qn(t,(s,o)=>ae`
                      <label
                        class=${wt(this,qm).call(this,o)}
                        @click=${()=>this.selectedTab=o}
                      >
                        <!-- Customizable icon for each tab -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </label>
                    `)}
              </div>
              <div>
                <!-- Icons for actions -->
                ${Qn(r,s=>ae`
                      <span>
                        <!-- Customizable icon for each action -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </span>
                    `)}
              </div>
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${Qn(t,(s,o)=>ae`
              <div class="tab ${wt(this,qm).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}qm=new WeakMap,tb=new WeakMap,ib=new WeakMap,ee(Pge,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-tabs",Pge);var rb,nb;class kge extends hi{constructor(){super();ee(this,"_removeButton",()=>IFe(this));ee(this,"_sortButton",()=>PFe(this.unstyled));ee(this,"_button",t=>LFe(t,this.unstyled));Et(this,rb,"");Et(this,nb,`
    ${Vf}  
    ${NC}
    ${Nb}
    ${$C}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      display: flex;
      border-radius: 4px;
      cursor: pointer;
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tabs button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tabs button.icon {
      opacity: .7;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tabs button.icon:hover {
      opacity: 1;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
    }
    eox-layercontrol-tabs button.icon,
    eox-layercontrol-tabs .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tabs button.icon::before,
    eox-layercontrol-tabs .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content] {
      padding: 12px 6px;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const t=MFe(this.tools,this.layer),r=RFe(this.tools,this.layer),n=this[`_${t==null?void 0:t[0]}Button`]?this[`_${t==null?void 0:t[0]}Button`]():It,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=t==null?void 0:t.length,a=r==null?void 0:r.length;return ae`
      <style>
        ${wt(this,rb)}
        ${!this.unstyled&&wt(this,nb)}
      </style>
      ${bt(o+a>0,()=>ae`
          ${bt(o===1&&a===0,()=>ae`
              <div class="single-action-container">
                <div class="single-action">${n}</div>
              </div>
            `,()=>{var c;return ae`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||It}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tabs
                  .noShadow=${!1}
                  .actions=${t}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                >
                  <!-- Rendering tabs and content -->
                  ${Qn(r,h=>this._button(h))}

                  <div slot="info-content">
                    ${Ua(this.layer.get("description"))}
                  </div>
                  <div slot="opacity-content">
                    <!-- Input for opacity -->
                    <input
                      type="range"
                      min="0"
                      max="1"
                      step="0.01"
                      value=${Rge((c=this.layer)==null?void 0:c.getOpacity())}
                      @input=${h=>this.layer.setOpacity(parseFloat(h.target.value))}
                    />
                  </div>
                  <div slot="config-content">
                    <!-- Layer configuration -->
                    ${bt(this.layer.get("layerConfig"),()=>ae`
                        <eox-layercontrol-layerconfig
                          slot="config-content"
                          .layer=${this.layer}
                          .noShadow=${!0}
                          .layerConfig=${this.layer.get("layerConfig")}
                          .unstyled=${this.unstyled}
                          @changed=${()=>this.requestUpdate()}
                        ></eox-layercontrol-layerconfig>
                      `)}
                  </div>
                  <div slot="remove-icon">${this._removeButton()}</div>
                  <div slot="sort-icon">${this._sortButton()}</div>
                </eox-layercontrol-tabs>
              </details>
            `})}
        `)}
    `}}rb=new WeakMap,nb=new WeakMap,ee(kge,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",kge);const OFe=i=>{const e=()=>{const t=CFe(i.layer,i.map,i.showLayerZoomState);let r=!1;!t&&i.currLayerVisibilityBasedOnZoom?(i.currLayerVisibilityBasedOnZoom=!1,r=!0):t&&!i.currLayerVisibilityBasedOnZoom&&(i.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(i.requestUpdate(),i.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};Tge(i.layer,i.showLayerZoomState)&&(e(),i.map.getView().on("change:resolution",()=>e()))},DFe=(i,e)=>{const t=e.layer;t.setVisible(i.target.checked),i.target.checked&&t.get("layerControlExclusive")&&e.parentNode.parentNode.querySelectorAll("li > eox-layercontrol-layer").forEach(n=>{var s;n.layer!==t&&((s=n.layer)!=null&&s.get("layerControlExclusive"))&&(n.layer.setVisible(!1),n.requestUpdate())}),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:t})),e.requestUpdate()};var ef,E_,sb,Dge,ob,ab;class Oge extends hi{constructor(){super();Et(this,ef);Et(this,sb);ee(this,"currLayerVisibilityBasedOnZoom",!0);Et(this,ob,"");Et(this,ab,`
    ${Nb}
    eox-layercontrol-layer {
      width: 100%;
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){OFe(this)}render(){var l;const t=this.layer.getVisible(),r=t?"visible":"",n=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=_r(this,ef,E_).call(this,"layerControlDisable")?"disabled":"",o=_r(this,ef,E_).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return ae`
      <style>
        ${wt(this,ob)}
        ${!this.unstyled&&wt(this,ab)}
      </style>
      ${bt(this.layer,()=>ae`
          <!-- Render the layer -->
          <div class="layer ${r} ${n}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${Rge(t)}
                @click=${_r(this,sb,Dge)}
              />

              <!-- Layer title -->
              <span class="title">${_r(this,ef,E_).call(this,this.titleProperty)}</span>
              ${bt(a,()=>ae`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}ef=new WeakSet,E_=function(t){var r;return(r=this.layer)==null?void 0:r.get(t)},sb=new WeakSet,Dge=function(t){DFe(t,this)},ob=new WeakMap,ab=new WeakMap,ee(Oge,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer",Oge);var lb,cb;class Fge extends hi{constructor(){super();Et(this,lb,"");Et(this,cb,`
    details summary {
      cursor: pointer;
      display: flex;
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: block;
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var n,s;const t=!!((n=this.group)!=null&&n.get("layerControlExpand")),r=(s=Mge(this.group.getLayers()))==null?void 0:s.length;return ae`
      <style>
        ${wt(this,lb)}
        ${!this.unstyled&&wt(this,cb)}
      </style>
      ${bt(this.group,()=>ae`
          <!-- Render the details element with the layer control -->
          <details
            open=${t||It}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}lb=new WeakMap,cb=new WeakMap,ee(Fge,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",Fge);const FFe=i=>{const{layers:e,idProperty:t,titleProperty:r,renderRoot:n}=i;if(e){const s=n.querySelector("ul");SFe(e,t,r,i),EFe(s,e,t,i)}},NFe=i=>{const{layers:e}=i,t=Ub(()=>{i.requestUpdate(),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),r=()=>t();e&&(e.hasListener("change:length")&&(e==null||e.un("change:length",r)),e.on("change:length",r))};var hb,ub;class Nge extends hi{constructor(){super();Et(this,hb,"");Et(this,ub,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: 48px;
    }
    li {
      list-style: none;
    }
    li {
      border-bottom: 1px solid #0041703a;
    }
    li:first-child {
      border-top: 1px solid #0041703a;
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1}firstUpdated(){FFe(this)}updated(){NFe(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=Mge(this.layers).reverse();return ae`
      <style>
        ${wt(this,hb)}
        ${!this.unstyled&&wt(this,ub)}
      </style>
      <ul>
        ${bt(this.layers,()=>ae`
            ${OC(t,r=>r,r=>ae`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${TFe(r,this.map)}"
                >
                  ${r.getLayers?ae`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:ae`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}hb=new WeakMap,ub=new WeakMap,ee(Nge,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",Nge);const $Fe=i=>{const e=i.querySelector("select[name=optional]"),t=e?e.value:null,r=oT(i.layers.getArray(),"layerControlOptional",!0).find(n=>(n.get(i.idProperty)||n.ol_uid)===t);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),i.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(n=>n.requestUpdate()),i.requestUpdate()};var db,Bge;class $ge extends hi{constructor(){super();Et(this,db);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=oT(this.layers.getArray(),"layerControlOptional",!0);return ae`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${t.map(r=>{const n=r.get(this.idProperty)||r.ol_uid,s=r.get(this.titleProperty),o=`layer ${r.get(this.idProperty)}`;return ae` <option value="${n}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${_r(this,db,Bge)}">add</button>
    `}}db=new WeakSet,Bge=function(){$Fe(this)},ee($ge,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",$ge);const BFe=(i,e)=>{e.jsonInput=i.target.value,e.requestUpdate()},Wae=i=>{const e=JSON.parse(`{"data":${uge(i.jsonInput)}}`);Array.isArray(e.data)?e.data.forEach(t=>{i.eoxMap.addOrUpdateLayer(t)}):i.eoxMap.addOrUpdateLayer(e.data),i.jsonInput=null,i.requestUpdate()},jFe=(i,e)=>{e.urlInput=i.target.value,e.requestUpdate()};async function zFe(i){const e=i.urlInput;if(i.wmsCapabilities=null,i.searchLoad=!0,i.requestUpdate(),!e)return!1;if(iT(e)==="XYZ")return{Name:e};try{const t=await qDe(e);i.wmsCapabilities=t}catch{}finally{i.searchLoad=!1,i.requestUpdate()}return!1}const GFe=(i,e)=>{const{Name:t}=i,r=iT(e.urlInput)||"XYZ",n={type:"Tile",properties:{id:t,title:t},source:{type:r,url:e.urlInput,params:{LAYERS:t}}};e.jsonInput=JSON.stringify(n)},UFe=(i,e)=>{e.open=i||null,e.urlInput=null,e.jsonInput=null,e.wmsCapabilities=null,e.requestUpdate()};var fb,zge,pb,Gge,Hm,uS,gb,Uge,mb,Vge,tf,S_,yb,_b;class jge extends hi{constructor(){super();Et(this,fb);Et(this,pb);Et(this,Hm);Et(this,gb);Et(this,mb);Et(this,tf);ee(this,"urlInput",null);ee(this,"jsonInput",null);ee(this,"open",null);ee(this,"searchLoad",!1);ee(this,"wmsCapabilities",null);Et(this,yb,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);Et(this,_b,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.open?"open":"close",r=this.open==="url",n=this.open==="json",s=!HDe(this.urlInput)||this.searchLoad?!0:It;return ae`
      <style>
        ${wt(this,yb)}
        ${!this.unstyled&&wt(this,_b)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${t}">
            <li
              @click=${()=>_r(this,tf,S_).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>_r(this,tf,S_).call(this,"json")}
              class="${n?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>_r(this,tf,S_).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${t}">
          ${r?ae`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${_r(this,fb,zge)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${_r(this,pb,Gge)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?ae`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return ae`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>_r(this,Hm,uS).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:It}
            `:ae`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${_r(this,mb,Vge)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${WDe(this.jsonInput)?It:!0}
                  @click=${_r(this,gb,Uge)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}fb=new WeakSet,zge=function(t){jFe(t,this)},pb=new WeakSet,Gge=async function(){const t=await zFe(this);t&&_r(this,Hm,uS).call(this,t)},Hm=new WeakSet,uS=function(t){GFe(t,this),Wae(this)},gb=new WeakSet,Uge=function(){Wae(this)},mb=new WeakSet,Vge=function(t){BFe(t,this)},tf=new WeakSet,S_=function(t){UFe(t,this)},yb=new WeakMap,_b=new WeakMap,ee(jge,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",jge);const VFe=(i,e)=>{if(e.requestUpdate(),i.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const t=e.renderRoot.querySelector("eox-layercontrol-optional-list");t==null||t.requestUpdate()}},qFe=i=>{const e=i.for;return document.querySelector(e)},HFe=i=>{const e=document.querySelector(i.for);e&&e.map!==i.map&&(i.map=e.map)};var rf,vb,Hge,bb;class qge extends hi{constructor(){super();Et(this,vb);Et(this,rf,void 0);Et(this,bb,"* { font-family: Roboto, sans-serif; }");this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride=""}updated(){HFe(this)}firstUpdated(){go(this,rf,qFe(this))}render(){var n,s,o;const t=(n=this.map)==null?void 0:n.getLayers().getArray(),r=t&&((s=oT(t,"layerControlOptional",!0))==null?void 0:s.length)>0;return ae`
      <style>
        ${!this.unstyled&&wt(this,bb)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${bt(this.addExternalLayers&&((o=wt(this,rf))==null?void 0:o.addOrUpdateLayer),()=>ae`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${wt(this,rf)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${bt(this.map,()=>ae`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            @changed=${_r(this,vb,Hge)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${bt(r,()=>ae`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}rf=new WeakMap,vb=new WeakSet,Hge=function(t){VFe(t,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:t.detail}))},bb=new WeakMap,ee(qge,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String}});customElements.define("eox-layercontrol",qge);class WFe extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(e,t,r){t!==r&&(this[e]=r),this.render()}}class YFe extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          background: lightgrey;
          border: 1px solid darkgrey;
          border-radius: 4px;
          padding: 4px 8px;
          overflow: hidden;


          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(e,t,r){t!==r&&(this[e]=r),this.render()}}customElements.define("eox-layout",WFe);customElements.define("eox-layout-item",YFe);class Dn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function XFe(i){i.stopPropagation()}const Jh={PROPERTYCHANGE:"propertychange"};class sy{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ZFe(i,e,t){let r,n;t=t||fa;let s=0,o=i.length,a=!1;for(;s<o;)r=s+(o-s>>1),n=+t(i[r],e),n<0?s=r+1:(o=r,a=!n);return a?s:~s}function fa(i,e){return i>e?1:i<e?-1:0}function KFe(i,e){return i<e?1:i>e?-1:0}function Xb(i,e,t){if(i[0]<=e)return 0;const r=i.length;if(e<=i[r-1])return r-1;if(typeof t=="function"){for(let n=1;n<r;++n){const s=i[n];if(s===e)return n;if(s<e)return t(e,i[n-1],s)>0?n-1:n}return r-1}if(t>0){for(let n=1;n<r;++n)if(i[n]<e)return n-1;return r-1}if(t<0){for(let n=1;n<r;++n)if(i[n]<=e)return n;return r-1}for(let n=1;n<r;++n){if(i[n]==e)return n;if(i[n]<e)return i[n-1]-e<e-i[n]?n-1:n}return r-1}function JFe(i,e,t){for(;e<t;){const r=i[e];i[e]=i[t],i[t]=r,++e,--t}}function Ot(i,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let n=0;n<r;n++)i[i.length]=t[n]}function Ta(i,e){const t=i.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function QFe(i,e,t){const r=e||fa;return i.every(function(n,s){if(s===0)return!0;const o=r(i[s-1],n);return!(o>0||t&&o===0)})}function ff(){return!0}function Yf(){return!1}function pf(){}function Wge(i){let e=!1,t,r,n;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==n||!Ta(s,r))&&(e=!0,n=this,r=s,t=i.apply(this,arguments)),t}}function aT(i){function e(){let t;try{t=i()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Xf(i){for(const e in i)delete i[e]}function gl(i){let e;for(e in i)return!1;return!e}class Zf extends sy{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),n=r[e]||(r[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,n=this.listeners_&&this.listeners_[r];if(!n)return;const s=t?new Dn(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let c=0,h=n.length;c<h;++c)if("handleEvent"in n[c]?l=n[c].handleEvent(s):l=n[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,pf);delete o[r]}return l}disposeInternal(){this.listeners_&&Xf(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const n=r.indexOf(t);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[n]=pf,++this.pendingRemovals_[e]):(r.splice(n,1),r.length===0&&delete this.listeners_[e]))}}const Ie={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function lt(i,e,t,r,n){if(r&&r!==i&&(t=t.bind(r)),n){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function gf(i,e,t,r){return lt(i,e,t,r,!0)}function Xt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Xf(i))}class oy extends Zf{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ie.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=lt(this,e[s],t);return n}return lt(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const n=e.length;r=new Array(n);for(let s=0;s<n;++s)r[s]=gf(this,e[s],t)}else r=gf(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)eNe(r);else if(Array.isArray(e))for(let n=0,s=e.length;n<s;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}oy.prototype.on;oy.prototype.once;oy.prototype.un;function eNe(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)Xt(i[e]);else Xt(i)}function ze(){throw new Error("Unimplemented abstract method.")}let tNe=0;function Ae(i){return i.ol_uid||(i.ol_uid=String(++tNe))}class Yae extends Dn{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class so extends oy{constructor(e){super(),this.on,this.once,this.un,Ae(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Yae(r,e,t)),r=Jh.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Yae(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const n=this.values_||(this.values_={});if(r)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],gl(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const dn={ADD:"add",REMOVE:"remove"},Xae={LENGTH:"length"};class L0 extends Dn{constructor(e,t,r){super(e),this.element=t,this.index=r}}let gn=class extends so{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,n=t.length;r<n;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Xae.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new L0(dn.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,n=t.length;r<n;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new L0(dn.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new L0(dn.REMOVE,n,e)),this.dispatchEvent(new L0(dn.ADD,t,e))}updateLength_(){this.set(Xae.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}};const ei={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function pt(i,e){if(!i)throw new Error(e)}function tt(i,e,t){return Math.min(Math.max(i,e),t)}function Yge(i,e,t,r,n,s){const o=n-t,a=s-r;if(o!==0||a!==0){const l=((i-t)*o+(e-r)*a)/(o*o+a*a);l>1?(t=n,r=s):l>0&&(t+=o*l,r+=a*l)}return nl(i,e,t,r)}function nl(i,e,t,r){const n=t-i,s=r-e;return n*n+s*s}function iNe(i){const e=i.length;for(let r=0;r<e;r++){let n=r,s=Math.abs(i[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(i[a][r]);l>s&&(s=l,n=a)}if(s===0)return null;const o=i[n];i[n]=i[r],i[r]=o;for(let a=r+1;a<e;a++){const l=-i[a][r]/i[r][r];for(let c=r;c<e+1;c++)r==c?i[a][c]=0:i[a][c]+=l*i[r][c]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=i[r][e]/i[r][r];for(let n=r-1;n>=0;n--)i[n][e]-=i[n][r]*t[r]}return t}function Zae(i){return i*180/Math.PI}function Mo(i){return i*Math.PI/180}function pa(i,e){const t=i%e;return t*e<0?t+e:t}function Es(i,e,t){return i+t*(e-i)}function Kf(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function ov(i,e){return Math.round(Kf(i,e))}function Ad(i,e){return Math.floor(Kf(i,e))}function lc(i,e){return Math.ceil(Kf(i,e))}class Xge extends so{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ei.OPACITY]=e.opacity!==void 0?e.opacity:1,pt(typeof t[ei.OPACITY]=="number","Layer opacity must be a number"),t[ei.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ei.Z_INDEX]=e.zIndex,t[ei.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ei.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ei.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ei.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=tt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ze()}getLayerStatesArray(e){return ze()}getExtent(){return this.get(ei.EXTENT)}getMaxResolution(){return this.get(ei.MAX_RESOLUTION)}getMinResolution(){return this.get(ei.MIN_RESOLUTION)}getMinZoom(){return this.get(ei.MIN_ZOOM)}getMaxZoom(){return this.get(ei.MAX_ZOOM)}getOpacity(){return this.get(ei.OPACITY)}getSourceState(){return ze()}getVisible(){return this.get(ei.VISIBLE)}getZIndex(){return this.get(ei.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ei.EXTENT,e)}setMaxResolution(e){this.set(ei.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ei.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ei.MAX_ZOOM,e)}setMinZoom(e){this.set(ei.MIN_ZOOM,e)}setOpacity(e){pt(typeof e=="number","Layer opacity must be a number"),this.set(ei.OPACITY,e)}setVisible(e){this.set(ei.VISIBLE,e)}setZIndex(e){this.set(ei.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const vr={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ci={ANIMATING:0,INTERACTING:1},ys={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Zge=42,mf=256,rNe={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function Kae(i){return rNe[i]}const yf={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let _f=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||yf[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const ay=6378137,Md=Math.PI*ay,nNe=[-Md,-Md,Md,Md],sNe=[-180,-85,180,85],I0=ay*Math.log(Math.tan(Math.PI/2));class td extends _f{constructor(e){super({code:e,units:"m",extent:nNe,global:!0,worldExtent:sNe,getPointResolution:function(t,r){return t/Math.cosh(r[1]/ay)}})}}const Jae=[new td("EPSG:3857"),new td("EPSG:102100"),new td("EPSG:102113"),new td("EPSG:900913"),new td("http://www.opengis.net/def/crs/EPSG/0/3857"),new td("http://www.opengis.net/gml/srs/epsg.xml#3857")];function oNe(i,e,t){const r=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let n=0;n<r;n+=t){e[n]=Md*i[n]/180;let s=ay*Math.log(Math.tan(Math.PI*(+i[n+1]+90)/360));s>I0?s=I0:s<-I0&&(s=-I0),e[n+1]=s}return e}function aNe(i,e,t){const r=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let n=0;n<r;n+=t)e[n]=180*i[n]/Md,e[n+1]=360*Math.atan(Math.exp(i[n+1]/ay))/Math.PI-90;return e}const lNe=6378137,Qae=[-180,-90,180,90],cNe=Math.PI*lNe/180;class yh extends _f{constructor(e,t){super({code:e,units:"degrees",extent:Qae,axisOrientation:t,global:!0,metersPerUnit:cNe,worldExtent:Qae})}}const ele=[new yh("CRS:84"),new yh("EPSG:4326","neu"),new yh("urn:ogc:def:crs:OGC:1.3:CRS84"),new yh("urn:ogc:def:crs:OGC:2:84"),new yh("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new yh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new yh("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let dS={};function hNe(i){return dS[i]||dS[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function uNe(i,e){dS[i]=e}let qd={};function vf(i,e,t){const r=i.getCode(),n=e.getCode();r in qd||(qd[r]={}),qd[r][n]=t}function Kge(i,e){let t;return i in qd&&e in qd[i]&&(t=qd[i][e]),t}const Ir={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Vr(i){const e=_n();for(let t=0,r=i.length;t<r;++t)kg(e,i[t]);return e}function dNe(i,e,t){const r=Math.min.apply(null,i),n=Math.min.apply(null,e),s=Math.max.apply(null,i),o=Math.max.apply(null,e);return to(r,n,s,o,t)}function rs(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function Jge(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function pu(i,e,t){let r,n;return e<i[0]?r=i[0]-e:i[2]<e?r=e-i[2]:r=0,t<i[1]?n=i[1]-t:i[3]<t?n=t-i[3]:n=0,r*r+n*n}function As(i,e){return lT(i,e[0],e[1])}function Hr(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function lT(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function fS(i,e){const t=i[0],r=i[1],n=i[2],s=i[3],o=e[0],a=e[1];let l=Ir.UNKNOWN;return o<t?l=l|Ir.LEFT:o>n&&(l=l|Ir.RIGHT),a<r?l=l|Ir.BELOW:a>s&&(l=l|Ir.ABOVE),l===Ir.UNKNOWN&&(l=Ir.INTERSECTING),l}function _n(){return[1/0,1/0,-1/0,-1/0]}function to(i,e,t,r,n){return n?(n[0]=i,n[1]=e,n[2]=t,n[3]=r,n):[i,e,t,r]}function Jf(i){return to(1/0,1/0,-1/0,-1/0,i)}function Hd(i,e){const t=i[0],r=i[1];return to(t,r,t,r,e)}function cT(i,e,t,r,n){const s=Jf(n);return eme(s,i,e,t,r)}function io(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function fNe(i,e,t){return Math.abs(i[0]-e[0])<t&&Math.abs(i[2]-e[2])<t&&Math.abs(i[1]-e[1])<t&&Math.abs(i[3]-e[3])<t}function Qge(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function kg(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function eme(i,e,t,r,n){for(;t<r;t+=n)pNe(i,e[t],e[t+1]);return i}function pNe(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function hT(i,e){let t;return t=e(Qh(i)),t||(t=e(Qf(i)),t)||(t=e(ep(i)),t)||(t=e(No(i)),t)?t:!1}function dm(i){let e=0;return Aa(i)||(e=rt(i)*fi(i)),e}function Qh(i){return[i[0],i[1]]}function Qf(i){return[i[2],i[1]]}function kr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function gNe(i,e){let t;if(e==="bottom-left")t=Qh(i);else if(e==="bottom-right")t=Qf(i);else if(e==="top-left")t=No(i);else if(e==="top-right")t=ep(i);else throw new Error("Invalid corner");return t}function fm(i,e,t,r,n){const[s,o,a,l,c,h,u,d]=pS(i,e,t,r);return to(Math.min(s,a,c,u),Math.min(o,l,h,d),Math.max(s,a,c,u),Math.max(o,l,h,d),n)}function pS(i,e,t,r){const n=e*r[0]/2,s=e*r[1]/2,o=Math.cos(t),a=Math.sin(t),l=n*o,c=n*a,h=s*o,u=s*a,d=i[0],f=i[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function fi(i){return i[3]-i[1]}function Er(i,e,t){const r=t||_n();return gi(i,e)?(i[0]>e[0]?r[0]=i[0]:r[0]=e[0],i[1]>e[1]?r[1]=i[1]:r[1]=e[1],i[2]<e[2]?r[2]=i[2]:r[2]=e[2],i[3]<e[3]?r[3]=i[3]:r[3]=e[3]):Jf(r),r}function No(i){return[i[0],i[3]]}function ep(i){return[i[2],i[3]]}function rt(i){return i[2]-i[0]}function gi(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Aa(i){return i[2]<i[0]||i[3]<i[1]}function mNe(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function uT(i,e){const t=(i[2]-i[0])/2*(e-1),r=(i[3]-i[1])/2*(e-1);i[0]-=t,i[2]+=t,i[1]-=r,i[3]+=r}function yNe(i,e,t){let r=!1;const n=fS(i,e),s=fS(i,t);if(n===Ir.INTERSECTING||s===Ir.INTERSECTING)r=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],h=e[0],u=e[1],d=t[0],f=t[1],p=(f-u)/(d-h);let g,m;s&Ir.ABOVE&&!(n&Ir.ABOVE)&&(g=d-(f-c)/p,r=g>=o&&g<=l),!r&&s&Ir.RIGHT&&!(n&Ir.RIGHT)&&(m=f-(d-l)*p,r=m>=a&&m<=c),!r&&s&Ir.BELOW&&!(n&Ir.BELOW)&&(g=d-(f-a)/p,r=g>=o&&g<=l),!r&&s&Ir.LEFT&&!(n&Ir.LEFT)&&(m=f-(d-o)*p,r=m>=a&&m<=c)}return r}function bf(i,e,t,r){if(Aa(i))return Jf(t);let n=[];if(r>1){const a=i[2]-i[0],l=i[3]-i[1];for(let c=0;c<r;++c)n.push(i[0]+a*c/r,i[1],i[2],i[1]+l*c/r,i[2]-a*c/r,i[3],i[0],i[3]-l*c/r)}else n=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(n,n,2);const s=[],o=[];for(let a=0,l=n.length;a<l;a+=2)s.push(n[a]),o.push(n[a+1]);return dNe(s,o,t)}function dT(i,e){const t=e.getExtent(),r=kr(i);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const n=rt(t),o=Math.floor((r[0]-t[0])/n)*n;i[0]-=o,i[2]-=o}return i}function _Ne(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];dT(i,e);const r=rt(t);if(rt(i)>r)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+r,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-r,i[3]]]}return[i]}function Mh(i,e,t){const r=t!==void 0?i.toFixed(t):""+i;let n=r.indexOf(".");return n=n===-1?r.length:n,n>e?r:new Array(1+e-n).join("0")+r}function fT(i,e){const t=(""+i).split("."),r=(""+e).split(".");for(let n=0;n<Math.max(t.length,r.length);n++){const s=parseInt(t[n]||"0",10),o=parseInt(r[n]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function tme(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function ime(i,e){const t=i[0],r=i[1],n=e[0],s=e[1],o=n[0],a=n[1],l=s[0],c=s[1],h=l-o,u=c-a,d=h===0&&u===0?0:(h*(t-o)+u*(r-a))/(h*h+u*u||0);let f,p;return d<=0?(f=o,p=a):d>=1?(f=l,p=c):(f=o+d*h,p=a+d*u),[f,p]}function tle(i,e,t){const r=pa(e+180,360)-180,n=Math.abs(3600*r),s=t||0;let o=Math.floor(n/3600),a=Math.floor((n-o*3600)/60),l=Kf(n-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"";return(a!==0||l!==0)&&(c+=" "+Mh(a,2)+""),l!==0&&(c+=" "+Mh(l,2,s)+""),r!==0&&(c+=" "+i.charAt(r<0?1:0)),c}function Vs(i,e){let t=!0;for(let r=i.length-1;r>=0;--r)if(i[r]!=e[r]){t=!1;break}return t}function pT(i,e){const t=Math.cos(e),r=Math.sin(e),n=i[0]*t-i[1]*r,s=i[1]*t+i[0]*r;return i[0]=n,i[1]=s,i}function rme(i,e){return i[0]*=e,i[1]*=e,i}function xf(i,e){const t=i[0]-e[0],r=i[1]-e[1];return t*t+r*r}function av(i,e){return Math.sqrt(xf(i,e))}function vNe(i,e){return xf(i,ime(i,e))}function Zb(i,e){if(e.canWrapX()){const t=rt(e.getExtent()),r=nme(i,e,t);r&&(i[0]-=r*t)}return i}function nme(i,e,t){const r=e.getExtent();let n=0;return e.canWrapX()&&(i[0]<r[0]||i[0]>r[2])&&(t=t||rt(r),n=Math.floor((i[0]-r[0])/t)),n}const Kb=63710088e-1;function gS(i,e,t){t=t||Kb;const r=Mo(i[1]),n=Mo(e[1]),s=(n-r)/2,o=Mo(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Rw(i,e){let t=0;for(let r=0,n=i.length;r<n-1;++r)t+=gS(i[r],i[r+1],e);return t}function sme(i,e){e=e||{};const t=e.radius||Kb,r=e.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=i.getCoordinates(),s=Rw(o,t);break}case"MultiLineString":case"Polygon":{for(o=i.getCoordinates(),l=0,c=o.length;l<c;++l)s+=Rw(o[l],t);break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],h=0,u=a.length;h<u;++h)s+=Rw(a[h],t);break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,c=d.length;l<c;++l)s+=sme(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function P0(i,e){let t=0;const r=i.length;let n=i[r-1][0],s=i[r-1][1];for(let o=0;o<r;o++){const a=i[o][0],l=i[o][1];t+=Mo(a-n)*(2+Math.sin(Mo(s))+Math.sin(Mo(l))),n=a,s=l}return t*e*e/2}function ome(i,e){e=e||{};const t=e.radius||Kb,r=e.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),s=Math.abs(P0(o[0],t)),l=1,c=o.length;l<c;++l)s-=Math.abs(P0(o[l],t));break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(P0(a[0],t)),h=1,u=a.length;h<u;++h)s-=Math.abs(P0(a[h],t));break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,c=d.length;l<c;++l)s+=ome(d[l],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}function bNe(i,e,t,r){r=r||Kb;const n=Mo(i[1]),s=Mo(i[0]),o=e/r,a=Math.asin(Math.sin(n)*Math.cos(o)+Math.cos(n)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(n),Math.cos(o)-Math.sin(n)*Math.sin(a));return[Zae(l),Zae(a)]}function ame(...i){console.warn(...i)}function lv(...i){console.error(...i)}let mS=!0;function lme(i){mS=!(i===void 0?!0:i)}function gT(i,e){if(e!==void 0){for(let t=0,r=i.length;t<r;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Jb(i,e){if(e!==void 0&&i!==e){for(let t=0,r=i.length;t<r;++t)e[t]=i[t];i=e}return i}function cme(i){uNe(i.getCode(),i),vf(i,i,gT)}function xNe(i){i.forEach(cme)}function xe(i){return typeof i=="string"?hNe(i):i||null}function wf(i,e,t,r){i=xe(i);let n;const s=i.getPointResolutionFunc();if(s){if(n=s(e,t),r&&r!==i.getUnits()){const o=i.getMetersPerUnit();o&&(n=n*o/yf[r])}}else{const o=i.getUnits();if(o=="degrees"&&!r||r=="degrees")n=e;else{const a=Sl(i,xe("EPSG:4326"));if(a===Jb&&o!=="degrees")n=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const h=gS(c.slice(0,2),c.slice(2,4)),u=gS(c.slice(4,6),c.slice(6,8));n=(h+u)/2}const l=r?yf[r]:i.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function yS(i){xNe(i),i.forEach(function(e){i.forEach(function(t){e!==t&&vf(e,t,gT)})})}function wNe(i,e,t,r){i.forEach(function(n){e.forEach(function(s){vf(n,s,t),vf(s,n,r)})})}function mT(i,e){return i?typeof i=="string"?xe(i):i:xe(e)}function ile(i){return function(e,t,r){const n=e.length;r=r!==void 0?r:2,t=t!==void 0?t:new Array(n);for(let s=0;s<n;s+=r){const o=i(e.slice(s,s+r)),a=o.length;for(let l=0,c=r;l<c;++l)t[s+l]=l>=a?e[s+l]:o[l]}return t}}function ENe(i,e,t,r){const n=xe(i),s=xe(e);vf(n,s,ile(t)),vf(s,n,ile(r))}function SNe(i,e){return lme(),tp(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function rle(i,e){const t=tp(i,e!==void 0?e:"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=pa(r+180,360)-180),t}function qr(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Sl(i,e)===gT)&&t}function Sl(i,e){const t=i.getCode(),r=e.getCode();let n=Kge(t,r);return n||(n=Jb),n}function va(i,e){const t=xe(i),r=xe(e);return Sl(t,r)}function tp(i,e,t){return va(e,t)(i,void 0,i.length)}function yT(i,e,t,r){const n=va(e,t);return bf(i,n,void 0,r)}let CNe=null;function TNe(){return CNe}function eu(i,e){return i}function Ki(i,e){return mS&&!Vs(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(mS=!1,ame("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function ly(i,e){return i}function Ms(i,e){return i}function nle(i,e,t){return function(r){let n,s;if(i.canWrapX()){const o=i.getExtent(),a=rt(o);r=r.slice(0),s=nme(r,i,a),s&&(r[0]=r[0]-s*a),r[0]=tt(r[0],o[0],o[2]),r[1]=tt(r[1],o[1],o[3]),n=t(r)}else n=t(r);return s&&e.canWrapX()&&(n[0]+=s*rt(e.getExtent())),n}}function ANe(){yS(Jae),yS(ele),wNe(ele,Jae,oNe,aNe)}ANe();function sle(i,e,t){return function(r,n,s,o,a){if(!r)return;if(!n&&!e)return r;const l=e?0:s[0]*n,c=e?0:s[1]*n,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,f=i[2]-l/2+h,p=i[1]+c/2+u,g=i[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),p>g&&(p=(g+p)/2,g=p);let m=tt(r[0],d,f),y=tt(r[1],p,g);if(o&&t&&n){const _=30*n;m+=-_*Math.log(1+Math.max(0,d-r[0])/_)+_*Math.log(1+Math.max(0,r[0]-f)/_),y+=-_*Math.log(1+Math.max(0,p-r[1])/_)+_*Math.log(1+Math.max(0,r[1]-g)/_)}return[m,y]}}function MNe(i){return i}function _T(i,e,t,r){const n=rt(e)/t[0],s=fi(e)/t[1];return r?Math.min(i,Math.max(n,s)):Math.min(i,Math.min(n,s))}function vT(i,e,t){let r=Math.min(i,e);const n=50;return r*=Math.log(1+n*Math.max(0,i/e-1))/n+1,t&&(r=Math.max(r,t),r/=Math.log(1+n*Math.max(0,t/i-1))/n+1),tt(r,t/2,e*2)}function RNe(i,e,t,r){return e=e!==void 0?e:!0,function(n,s,o,a){if(n!==void 0){const l=i[0],c=i[i.length-1],h=t?_T(l,t,o,r):l;if(a)return e?vT(n,h,c):tt(n,c,h);const u=Math.min(h,n),d=Math.floor(Xb(i,u,s));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}function LNe(i,e,t,r,n,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const h=n?_T(e,n,l,s):e;if(c)return r?vT(o,h,t):tt(o,t,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(i)-u),f=-a*(.5-u)+.5,p=Math.min(h,o),g=Math.floor(Math.log(e/p)/Math.log(i)+f),m=Math.max(d,g),y=e/Math.pow(i,m);return tt(y,t,h)}}}function ole(i,e,t,r,n){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=r?_T(i,r,a,n):i;return!t||!l?tt(s,e,c):vT(s,c,e)}}}function bT(i){if(i!==void 0)return 0}function ale(i){if(i!==void 0)return i}function INe(i){const e=2*Math.PI/i;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function PNe(i){const e=i===void 0?Mo(5):i;return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function hme(i){return Math.pow(i,3)}function gu(i){return 1-hme(1-i)}function kNe(i){return 3*i*i-2*i*i*i}function ONe(i){return i}const xT=new Array(6);function Vi(){return[1,0,0,1,0,0]}function _S(i){return Qb(i,1,0,0,1,0,0)}function ip(i,e){const t=i[0],r=i[1],n=i[2],s=i[3],o=i[4],a=i[5],l=e[0],c=e[1],h=e[2],u=e[3],d=e[4],f=e[5];return i[0]=t*l+n*c,i[1]=r*l+s*c,i[2]=t*h+n*u,i[3]=r*h+s*u,i[4]=t*d+n*f+o,i[5]=r*d+s*f+a,i}function Qb(i,e,t,r,n,s,o){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i[4]=s,i[5]=o,i}function DNe(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Ci(i,e){const t=e[0],r=e[1];return e[0]=i[0]*t+i[2]*r+i[4],e[1]=i[1]*t+i[3]*r+i[5],e}function FNe(i,e){const t=Math.cos(e),r=Math.sin(e);return ip(i,Qb(xT,t,r,-r,t,0,0))}function Og(i,e,t){return ip(i,Qb(xT,e,0,0,t,0,0))}function wT(i,e,t){return ip(i,Qb(xT,1,0,0,1,e,t))}function Pn(i,e,t,r,n,s,o,a){const l=Math.sin(s),c=Math.cos(s);return i[0]=r*c,i[1]=n*l,i[2]=-r*l,i[3]=n*c,i[4]=o*r*c-a*r*l+e,i[5]=o*n*l+a*n*c+t,i}function cy(i,e){const t=NNe(e);pt(t!==0,"Transformation matrix cannot be inverted");const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-n/t,i[2]=-s/t,i[3]=r/t,i[4]=(s*l-o*a)/t,i[5]=-(r*l-n*a)/t,i}function NNe(i){return i[0]*i[3]-i[1]*i[2]}const lle=[1e6,1e6,1e6,1e6,2,2];function ET(i){return"matrix("+i.map((t,r)=>Math.round(t*lle[r])/lle[r]).join(", ")+")"}function pc(i,e,t,r,n,s){s=s||[];let o=0;for(let a=e;a<t;a+=r){const l=i[a],c=i[a+1];s[o++]=n[0]*l+n[2]*c+n[4],s[o++]=n[1]*l+n[3]*c+n[5]}return s&&s.length!=o&&(s.length=o),s}function ST(i,e,t,r,n,s,o){o=o||[];const a=Math.cos(n),l=Math.sin(n),c=s[0],h=s[1];let u=0;for(let d=e;d<t;d+=r){const f=i[d]-c,p=i[d+1]-h;o[u++]=c+f*a-p*l,o[u++]=h+f*l+p*a;for(let g=d+2;g<d+r;++g)o[u++]=i[g]}return o&&o.length!=u&&(o.length=u),o}function $Ne(i,e,t,r,n,s,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=e;u<t;u+=r){const d=i[u]-l,f=i[u+1]-c;a[h++]=l+n*d,a[h++]=c+s*f;for(let p=u+2;p<u+r;++p)a[h++]=i[p]}return a&&a.length!=h&&(a.length=h),a}function BNe(i,e,t,r,n,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=r){o[a++]=i[l]+n,o[a++]=i[l+1]+s;for(let c=l+2;c<l+r;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const cle=Vi();class CT extends so{constructor(){super(),this.extent_=_n(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Wge((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ze()}closestPointXY(e,t,r,n){return ze()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ze()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Jf(t),this.extentRevision_=this.getRevision()}return mNe(this.extent_,e)}rotate(e,t){ze()}scale(e,t,r){ze()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ze()}getType(){return ze()}applyTransform(e){ze()}intersectsExtent(e){return ze()}translate(e,t){ze()}transform(e,t){const r=xe(e),n=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),c=r.getWorldExtent(),h=fi(c)/fi(l);return Pn(cle,c[0],c[3],h,-h,0,0,0),pc(s,0,s.length,a,cle,o),va(r,t)(s,o,a)}:va(r,t);return this.applyTransform(n),this}}class jNe extends CT{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return cT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ze()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=pm(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ze()}setLayout(e,t,r){let n;if(e)n=pm(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=mu(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const n=this.getStride();ST(r,0,r.length,n,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=kr(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();$Ne(n,0,n.length,s,e,t,r,n),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const n=this.getStride();BNe(r,0,r.length,n,e,t,r),this.changed()}}}function mu(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function pm(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function zNe(i,e,t){const r=i.getFlatCoordinates();if(!r)return null;const n=i.getStride();return pc(r,0,r.length,n,e,t)}const ba=jNe;function hle(i,e,t,r,n,s,o){const a=i[e],l=i[e+1],c=i[t]-a,h=i[t+1]-l;let u;if(c===0&&h===0)u=e;else{const d=((n-a)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=t;else if(d>0){for(let f=0;f<r;++f)o[f]=Es(i[e+f],i[t+f],d);o.length=r;return}else u=e}for(let d=0;d<r;++d)o[d]=i[u+d];o.length=r}function TT(i,e,t,r,n){let s=i[e],o=i[e+1];for(e+=r;e<t;e+=r){const a=i[e],l=i[e+1],c=nl(s,o,a,l);c>n&&(n=c),s=a,o=l}return n}function AT(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=TT(i,e,a,r,n),e=a}return n}function GNe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];n=AT(i,e,a,r,n),e=a[a.length-1]}return n}function MT(i,e,t,r,n,s,o,a,l,c,h){if(e==t)return c;let u,d;if(n===0){if(d=nl(o,a,i[e],i[e+1]),d<c){for(u=0;u<r;++u)l[u]=i[e+u];return l.length=r,d}return c}h=h||[NaN,NaN];let f=e+r;for(;f<t;)if(hle(i,f-r,f,r,o,a,h),d=nl(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r,f+=r}else f+=r*Math.max((Math.sqrt(d)-Math.sqrt(c))/n|0,1);if(s&&(hle(i,t-r,e,r,o,a,h),d=nl(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r}return c}function RT(i,e,t,r,n,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const f=t[u];c=MT(i,e,f,r,n,s,o,a,l,c,h),e=f}return c}function UNe(i,e,t,r,n,s,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const f=t[u];c=RT(i,e,f,r,n,s,o,a,l,c,h),e=f[f.length-1]}return c}function ume(i,e,t,r){for(let n=0,s=t.length;n<s;++n)i[e++]=t[n];return e}function hy(i,e,t,r){for(let n=0,s=t.length;n<s;++n){const o=t[n];for(let a=0;a<r;++a)i[e++]=o[a]}return e}function uy(i,e,t,r,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=hy(i,e,t[o],r);n[s++]=l,e=l}return n.length=s,n}function dme(i,e,t,r,n){n=n||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=uy(i,e,t[o],r,n[s]);l.length===0&&(l[0]=e),n[s++]=l,e=l[l.length-1]}return n.length=s,n}function ex(i,e,t,r,n,s,o){const a=(t-e)/r;if(a<3){for(;e<t;e+=r)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-r];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const p=i[d],g=i[d+1],m=i[u],y=i[u+1];for(let _=d+r;_<u;_+=r){const v=i[_],x=i[_+1],w=Yge(v,x,p,g,m,y);w>f&&(h=_,f=w)}f>n&&(l[(h-e)/r]=1,d+r<h&&c.push(d,h),h+r<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(s[o++]=i[e+u*r],s[o++]=i[e+u*r+1]);return o}function fme(i,e,t,r,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=ex(i,e,h,r,n,s,o),a.push(o),e=h}return o}function Th(i,e){return e*Math.round(i/e)}function VNe(i,e,t,r,n,s,o){if(e==t)return o;let a=Th(i[e],n),l=Th(i[e+1],n);e+=r,s[o++]=a,s[o++]=l;let c,h;do if(c=Th(i[e],n),h=Th(i[e+1],n),e+=r,e==t)return s[o++]=c,s[o++]=h,o;while(c==a&&h==l);for(;e<t;){const u=Th(i[e],n),d=Th(i[e+1],n);if(e+=r,u==c&&d==h)continue;const f=c-a,p=h-l,g=u-a,m=d-l;if(f*m==p*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(p<0&&m<p||p==m||p>0&&m>p)){c=u,h=d;continue}s[o++]=c,s[o++]=h,a=c,l=h,c=u,h=d}return s[o++]=c,s[o++]=h,o}function LT(i,e,t,r,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=VNe(i,e,h,r,n,s,o),a.push(o),e=h}return o}function qNe(i,e,t,r,n,s,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l],u=[];o=LT(i,e,h,r,n,s,o,u),a.push(u),e=h[h.length-1]}return o}function Qa(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=e;o<t;o+=r)n[s++]=i.slice(o,o+r);return n.length=s,n}function gm(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=Qa(i,e,l,r,n[s]),e=l}return n.length=s,n}function vS(i,e,t,r,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];n[s++]=l.length===1&&l[0]===e?[]:gm(i,e,l,r,n[s]),e=l[l.length-1]}return n.length=s,n}function pme(i,e,t,r){let n=0,s=i[t-r],o=i[t-r+1];for(;e<t;e+=r){const a=i[e],l=i[e+1];n+=o*a-s*l,s=a,o=l}return n/2}function gme(i,e,t,r){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=pme(i,e,a,r),e=a}return n}function HNe(i,e,t,r){let n=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];n+=gme(i,e,a,r),e=a[a.length-1]}return n}class Ec extends ba{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Ec(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,n){return n<pu(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),MT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,n))}getArea(){return pme(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ex(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ec(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hy(this.flatCoordinates,0,e,this.stride),this.changed()}}let $i=class mme extends ba{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new mme(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){const s=this.flatCoordinates,o=nl(e,t,s[0],s[1]);if(o<n){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Hd(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return lT(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ume(this.flatCoordinates,0,e,this.stride),this.changed()}};function WNe(i,e,t,r,n){return!hT(n,function(o){return!Ih(i,e,t,r,o[0],o[1])})}function Ih(i,e,t,r,n,s){let o=0,a=i[t-r],l=i[t-r+1];for(;e<t;e+=r){const c=i[e],h=i[e+1];l<=s?h>s&&(c-a)*(s-l)-(n-a)*(h-l)>0&&o++:h<=s&&(c-a)*(s-l)-(n-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function IT(i,e,t,r,n,s){if(t.length===0||!Ih(i,e,t[0],r,n,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Ih(i,t[o-1],t[o],r,n,s))return!1;return!0}function YNe(i,e,t,r,n,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(IT(i,e,l,r,n,s))return!0;e=l[l.length-1]}return!1}function PT(i,e,t,r,n,s,o){let a,l,c,h,u,d,f;const p=n[s+1],g=[];for(let _=0,v=t.length;_<v;++_){const x=t[_];for(h=i[x-r],d=i[x-r+1],a=e;a<x;a+=r)u=i[a],f=i[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(c=(p-d)/(f-d)*(u-h)+h,g.push(c)),h=u,d=f}let m=NaN,y=-1/0;for(g.sort(fa),h=g[0],a=1,l=g.length;a<l;++a){u=g[a];const _=Math.abs(u-h);_>y&&(c=(h+u)/2,IT(i,e,t,r,c,p)&&(m=c,y=_)),h=u}return isNaN(m)&&(m=n[s]),o?(o.push(m,p,y),o):[m,p,y]}function yme(i,e,t,r,n){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=PT(i,e,l,r,n,2*o,s),e=l[l.length-1]}return s}function _me(i,e,t,r,n){let s;for(e+=r;e<t;e+=r)if(s=n(i.slice(e-r,e),i.slice(e,e+r)),s)return s;return!1}function tx(i,e,t,r,n){const s=eme(_n(),i,e,t,r);return gi(n,s)?Hr(n,s)||s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:_me(i,e,t,r,function(o,a){return yNe(n,o,a)}):!1}function XNe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){if(tx(i,e,t[s],r,n))return!0;e=t[s]}return!1}function vme(i,e,t,r,n){return!!(tx(i,e,t,r,n)||Ih(i,e,t,r,n[0],n[1])||Ih(i,e,t,r,n[0],n[3])||Ih(i,e,t,r,n[2],n[1])||Ih(i,e,t,r,n[2],n[3]))}function bme(i,e,t,r,n){if(!vme(i,e,t[0],r,n))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(WNe(i,t[s-1],t[s],r,n)&&!tx(i,t[s-1],t[s],r,n))return!1;return!0}function ZNe(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(bme(i,e,a,r,n))return!0;e=a[a.length-1]}return!1}function KNe(i,e,t,r){for(;e<t-r;){for(let n=0;n<r;++n){const s=i[e+n];i[e+n]=i[t-r+n],i[t-r+n]=s}e+=r,t-=r}}function ix(i,e,t,r){let n=0,s=i[t-r],o=i[t-r+1];for(;e<t;e+=r){const a=i[e],l=i[e+1];n+=(a-s)*(l+o),s=a,o=l}return n===0?void 0:n>0}function kT(i,e,t,r,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=ix(i,e,a,r);if(s===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;e=a}return!0}function xme(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!kT(i,e,a,r,n))return!1;a.length&&(e=a[a.length-1])}return!0}function cv(i,e,t,r,n){n=n!==void 0?n:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=ix(i,e,a,r);(s===0?n&&l||!n&&!l:n&&!l||!n&&l)&&KNe(i,e,a,r),e=a}return e}function bS(i,e,t,r,n){for(let s=0,o=t.length;s<o;++s)e=cv(i,e,t[s],r,n);return e}function wme(i,e){const t=[];let r=0,n=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=ix(i,r,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(n,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=o+1,r=l}return t}class tr extends ba{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ot(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new tr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<pu(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(AT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),RT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,n))}containsXY(e,t){return IT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return gme(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),cv(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,gm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=kr(this.getExtent());this.flatInteriorPoint_=PT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new $i(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ec(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,n=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new Ec(t.slice(s,l),e);n.push(c),s=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;kT(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=cv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=LT(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new tr(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return bme(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=uy(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function JNe(i,e,t,r){t=t||32;const n=[];for(let s=0;s<t;++s)Ot(n,bNe(i,e,2*Math.PI*s/t,r));return n.push(n[0],n[1]),new tr(n,"XY",[n.length])}function hv(i){if(Aa(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],r=i[2],n=i[3],s=[e,t,e,n,r,n,r,t,e,t];return new tr(s,"XY",[s.length])}const Lw=0;class qs extends so{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=mT(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&lme(),e.center&&(e.center=Ki(e.center,this.projection_)),e.extent&&(e.extent=Ms(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ys)delete t[a];this.setProperties(t,!0);const r=e3e(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const n=QNe(e),s=r.constraint,o=t3e(e);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-t[3]+t[1]-n[1]),a=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let n=arguments[r];n.center&&(n=Object.assign({},n),n.center=Ki(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Ki(n.anchor,this.getProjection())),t[r]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const h=arguments[n];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(n===t){r&&k0(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;n<t;++n){const h=arguments[n],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||kNe,callback:r};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=pa(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}i3e(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(ci.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ci.ANIMATING]>0}getInteracting(){return this.hints_[ci.INTERACTING]>0}cancelAnimations(){this.setHint(ci.ANIMATING,-this.hints_[ci.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const n=this.animations_[t];if(n[0].callback&&k0(n[0].callback,!1),!e)for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const n=this.animations_[r];let s=!0;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(p-d),y=f+u*(g-f);this.targetCenter_=[m,y]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?pa(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(ci.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&k0(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const n=this.getCenterInternal();return n!==void 0&&(r=[n[0]-t[0],n[1]-t[1]],pT(r,e-this.getRotation()),tme(r,t)),r}calculateCenterZoom(e,t){let r;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-n[0])/s,a=t[1]-e*(t[1]-n[1])/s;r=[o,a]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],n=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&eu(e,this.getProjection())}getCenterInternal(){return this.get(ys.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return ly(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();pt(t,"The view center is not defined");const r=this.getResolution();pt(r!==void 0,"The view resolution is not defined");const n=this.getRotation();return pt(n!==void 0,"The view rotation is not defined"),fm(t,r,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ys.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ms(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=rt(e)/t[0],n=fi(e)/t[1];return Math.max(r,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*n)}}getRotation(){return this.get(ys.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(r/n)/t;return function(o){return Math.log(r/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();n=Iw(n,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,r)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,n;if(this.resolutions_){const s=Xb(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=r/this.resolutions_[s+1]}else r=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(r/e)/Math.log(n)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=tt(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,tt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(pt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){pt(!Aa(e),"Cannot fit empty extent provided as `geometry`");const n=Ms(e,this.getProjection());r=hv(n)}else if(e.getType()==="Circle"){const n=Ms(e.getExtent(),this.getProjection());r=hv(n),r.rotate(this.getRotation(),kr(n))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=o){const f=s[u]*r-s[u+1]*n,p=s[u]*n+s[u+1]*r;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),h=Math.max(h,p)}return[a,l,c,h]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=kr(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const f=d[0]*u-d[1]*h,p=d[1]*u+d[0]*h,g=this.getConstrainedCenter([f,p],l),m=t.callback?t.callback:pf;t.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:t.duration,easing:t.easing},m):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),k0(m,!0))}centerOn(e,t,r){this.centerOnInternal(Ki(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(Iw(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,n){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=Iw(e,n,[a[0]/2+o[3],a[1]/2+o[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=eu(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ki(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ki(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ki(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(ys.ROTATION)!==n&&this.set(ys.ROTATION,n),this.get(ys.RESOLUTION)!==o&&(this.set(ys.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ys.CENTER)||!Vs(this.get(ys.CENTER),a))&&this.set(ys.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,n,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Vs(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:gu,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ci.INTERACTING,1)}endInteraction(e,t,r){r=r&&Ki(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ci.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function k0(i,e){setTimeout(function(){i(e)},0)}function QNe(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return sle(i.extent,i.constrainOnlyCenter,t)}const e=mT(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,sle(t,!1,!1)}return MNe}function e3e(i){let e,t,r,o=i.minZoom!==void 0?i.minZoom:Lw,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,u=i.showFullExtent!==void 0?i.showFullExtent:!1,d=mT(i.projection,"EPSG:3857"),f=d.getExtent();let p=i.constrainOnlyCenter,g=i.extent;if(!c&&!g&&d.isGlobal()&&(p=!1,g=f),i.resolutions!==void 0){const m=i.resolutions;t=m[o],r=m[a]!==void 0?m[a]:m[m.length-1],i.constrainResolution?e=RNe(m,h,!p&&g,u):e=ole(t,r,h,!p&&g,u)}else{const y=(f?Math.max(rt(f),fi(f)):360*yf.degrees/d.getMetersPerUnit())/mf/Math.pow(2,Lw),_=y/Math.pow(2,28-Lw);t=i.maxResolution,t!==void 0?o=0:t=y/Math.pow(l,o),r=i.minResolution,r===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?r=t/Math.pow(l,a):r=y/Math.pow(l,a):r=_),a=o+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,a-o),i.constrainResolution?e=LNe(l,t,r,h,!p&&g,u):e=ole(t,r,h,!p&&g,u)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:o,zoomFactor:l}}function t3e(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?PNe():t===!1?ale:typeof t=="number"?INe(t):ale}return bT}function i3e(i){return!(i.sourceCenter&&i.targetCenter&&!Vs(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Iw(i,e,t,r,n){const s=Math.cos(-n);let o=Math.sin(-n),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,o=-o;const c=a*s-l*o,h=l*s+a*o;return[c,h]}class r3e extends Xge{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ei.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ei.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Xt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=lt(e,Ie.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof qs?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let n;t.layerStatesArray?n=t.layerStatesArray.find(o=>o.layer===this):n=this.getLayerState();const s=this.getExtent();return OT(n,t.viewState)&&(!s||gi(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];const n=e instanceof qs?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ei.MAP,e)}getMapInternal(){return this.get(ei.MAP)}setMap(e){this.mapPrecomposeKey_&&(Xt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Xt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=lt(e,vr.PRECOMPOSE,function(t){const n=t.frameState.layerStatesArray,s=this.getLayerState(!1);pt(!n.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(s)},this),this.mapRenderKey_=lt(this,Ie.CHANGE,e.render,e),this.changed())}setSource(e){this.set(ei.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function OT(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const r=e.zoom;return r>i.minZoom&&r<=i.maxZoom}const yu=r3e,Le={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ule(i){return i[0]>0&&i[1]>0}function Eme(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Mi(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class rx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Mi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new rx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ze()}getImage(e){return ze()}getHitDetectionImage(){return ze()}getPixelRatio(e){return 1}getImageState(){return ze()}getImageSize(){return ze()}getOrigin(){return ze()}getSize(){return ze()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Mi(e)}listenImageChange(e){ze()}load(){ze()}unlistenImageChange(e){ze()}ready(){return Promise.resolve()}}const mm={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Wr={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Wr.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Wr.max=Wr.whitepoint[2].D65;Wr.rgb=function(i,e){e=e||Wr.whitepoint[2].E;var t=i[0]/e[0],r=i[1]/e[1],n=i[2]/e[2],s,o,a;return s=t*3.240969941904521+r*-1.537383177570093+n*-.498610760293,o=t*-.96924363628087+r*1.87596750150772+n*.041555057407175,a=t*.055630079696993+r*-.20397695888897+n*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};mm.xyz=function(i,e){var t=i[0]/255,r=i[1]/255,n=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.41239079926595+r*.35758433938387+n*.18048078840183,o=t*.21263900587151+r*.71516867876775+n*.072192315360733,a=t*.019330818715591+r*.11919477979462+n*.95053215224966;return e=e||Wr.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const DT={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var r,n,s,o,a,l,c,h,u,d,f,p,g;if(s=i[0],o=i[1],a=i[2],s===0)return[0,0,0];var m=.0011070564598794539;return e=e||"D65",t=t||2,u=Wr.whitepoint[t][e][0],d=Wr.whitepoint[t][e][1],f=Wr.whitepoint[t][e][2],p=4*u/(u+15*d+3*f),g=9*d/(u+15*d+3*f),r=o/(13*s)+p||0,n=a/(13*s)+g||0,c=s>8?d*Math.pow((s+16)/116,3):d*s*m,l=c*9*r/(4*n)||0,h=c*(12-3*r-20*n)/(4*n)||0,[l,c,h]}};Wr.luv=function(i,e,t){var r,n,s,o,a,l,c,h,u,d,f,p,g,m=.008856451679035631,y=903.2962962962961;e=e||"D65",t=t||2,u=Wr.whitepoint[t][e][0],d=Wr.whitepoint[t][e][1],f=Wr.whitepoint[t][e][2],p=4*u/(u+15*d+3*f),g=9*d/(u+15*d+3*f),l=i[0],c=i[1],h=i[2],r=4*l/(l+15*c+3*h)||0,n=9*c/(l+15*c+3*h)||0;var _=c/d;return s=_<=m?y*_:116*Math.pow(_,1/3)-16,o=13*s*(r-p),a=13*s*(n-g),[s,o,a]};var Sme={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],r=i[2],n,s,o;return o=r/360*2*Math.PI,n=t*Math.cos(o),s=t*Math.sin(o),[e,n,s]},xyz:function(i){return DT.xyz(Sme.luv(i))}};DT.lchuv=function(i){var e=i[0],t=i[1],r=i[2],n=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,n,o]};Wr.lchuv=function(i){return DT.lchuv(Wr.luv(i))};var dle={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function n3e(i){var h,u;var e,t=[],r=1,n;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),lse[i])t=lse[i].slice(),n="rgb";else if(i==="transparent")r=0,n="rgb",t=[0,0,0];else if(i[0]==="#"){var s=i.slice(1),o=s.length,a=o<=4;r=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var l=e[1];n=l.replace(/a$/,"");var c=n==="cmyk"?4:n==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),n==="color"&&(n=t.shift()),t=t.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:n==="rgb"?d*255:n[0]==="h"||n[0]==="l"&&!f?d*100:n==="lab"?d*125:n==="lch"?f<2?d*150:d*360:n[0]==="o"&&!f?d:n==="oklab"?d*.4:n==="oklch"?f<2?d*.4:d*360:d;if(n[f]==="h"||f===2&&n[n.length-1]==="h"){if(dle[d]!==void 0)return dle[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),r=t.length>c?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),n=((u=(h=i.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:u.toLowerCase())||"rgb");return{space:n,values:t,alpha:r}}const Pw={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,r=i[2]/100,n,s,o,a,l,c=0;if(t===0)return l=r*255,[l,l,l];for(s=r<.5?r*(1+t):r+t-r*t,n=2*r-s,a=[0,0,0];c<3;)o=e+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?n+(s-n)*6*o:2*o<1?s:3*o<2?n+(s-n)*(2/3-o)*6:n,a[c++]=l*255;return a}};mm.hsl=function(i){var e=i[0]/255,t=i[1]/255,r=i[2]/255,n=Math.min(e,t,r),s=Math.max(e,t,r),o=s-n,a,l,c;return s===n?a=0:e===s?a=(t-r)/o:t===s?a=2+(r-e)/o:r===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(n+s)/2,s===n?l=0:c<=.5?l=o/(s+n):l=o/(2-s-n),[a,l*100,c*100]};function s3e(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=n3e(i);if(!t.space)return[];const r=t.space[0]==="h"?Pw.min:mm.min,n=t.space[0]==="h"?Pw.max:mm.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),n[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),n[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),n[2]),t.space[0]==="h"&&(e=Pw.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function o3e(i){return typeof i=="string"?i:NT(i)}const a3e=1024,Wp={};let kw=0;function l3e(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function fle(i){const e=Wr.lchuv(mm.xyz(i));return e[3]=i[3],e}function c3e(i){const e=Wr.rgb(Sme.xyz(i));return e[3]=i[3],e}function FT(i){if(Wp.hasOwnProperty(i))return Wp[i];if(kw>=a3e){let t=0;for(const r in Wp)t++&3||(delete Wp[r],--kw)}const e=s3e(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+i+'" as color');return Cme(e),Wp[i]=e,++kw,e}function Do(i){return Array.isArray(i)?i:FT(i)}function Cme(i){return i[0]=tt(i[0]+.5|0,0,255),i[1]=tt(i[1]+.5|0,0,255),i[2]=tt(i[2]+.5|0,0,255),i[3]=tt(i[3],0,1),i}function NT(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let r=i[2];r!=(r|0)&&(r=r+.5|0);const n=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+n+")"}function h3e(i){try{return FT(i),!0}catch{return!1}}const Sc=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",u3e=Sc.includes("firefox"),d3e=Sc.includes("safari")&&!Sc.includes("chrom"),f3e=d3e&&(Sc.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Sc)),p3e=Sc.includes("webkit")&&!Sc.includes("edge"),$T=Sc.includes("macintosh"),Tme=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ame=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,BT=typeof Image<"u"&&Image.prototype.decode,g3e=typeof createImageBitmap=="function",Mme=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function vi(i,e,t,r){let n;return t&&t.length?n=t.shift():Ame?n=new OffscreenCanvas(i||300,e||300):n=document.createElement("canvas"),i&&(n.width=i),e&&(n.height=e),n.getContext("2d",r)}let Ow;function xS(){return Ow||(Ow=vi(1,1)),Ow}function tu(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function m3e(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function y3e(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Ef(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function uv(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Rme(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function _3e(i,e){const t=i.childNodes;for(let r=0;;++r){const n=t[r],s=e[r];if(!n&&!s)break;if(n!==s){if(!n){i.appendChild(s);continue}if(!s){i.removeChild(n),--r;continue}i.insertBefore(s,n)}}}class nx extends Zf{constructor(e,t,r,n){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof n=="function"?Le.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(Ie.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Le.IDLE&&this.loader){this.state=Le.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;aT(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=Le.LOADED}).catch(r=>{this.state=Le.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function v3e(i,e,t){const r=i;let n=!0,s=!1,o=!1;const a=[gf(r,Ie.LOAD,function(){o=!0,s||e()})];return r.src&&BT?(s=!0,r.decode().then(function(){n&&e()}).catch(function(l){n&&(o?e():t())})):a.push(gf(r,Ie.ERROR,t)),function(){n=!1,a.forEach(Xt)}}function b3e(i,e){return new Promise((t,r)=>{function n(){o(),t(i)}function s(){o(),r(new Error("Image load error"))}function o(){i.removeEventListener("load",n),i.removeEventListener("error",s)}i.addEventListener("load",n),i.addEventListener("error",s),e&&(i.src=e)})}function Lme(i,e){return e&&(i.src=e),i.src&&BT?new Promise((t,r)=>i.decode().then(()=>t(i)).catch(n=>i.complete&&i.width?t(i):r(n))):b3e(i)}function Pc(i,e){return e&&(i.src=e),i.src&&BT&&g3e?i.decode().then(()=>createImageBitmap(i)).catch(t=>{if(i.complete&&i.width)return i;throw t}):Lme(i)}class x3e{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const n=Dw(e,t,r);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,r){const n=Dw(e,t,r);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,r,n,s){const o=Dw(e,t,r),a=o in this.cache_;this.cache_[o]=n,s&&(n.getImageState()===Le.IDLE&&n.load(),n.getImageState()===Le.LOADING?n.ready().then(()=>{this.patternCache_[o]=xS().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=xS().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Dw(i,e,t){const r=t?Do(t):"null";return e+":"+i+":"+r}const oa=new x3e;let Yp=null;class w3e extends Zf{constructor(e,t,r,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=n===void 0?Le.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Le.LOADED){Yp||(Yp=vi(1,1,void 0,{willReadFrequently:!0})),Yp.drawImage(this.image_,0,0);try{Yp.getImageData(0,0,1,1),this.tainted_=!1}catch{Yp=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ie.CHANGE)}handleImageError_(){this.imageState_=Le.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Le.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=vi(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Le.IDLE){this.image_||this.initializeImage_(),this.imageState_=Le.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Lme(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Le.LOADED)return;const t=this.image_,r=document.createElement("canvas");r.width=Math.ceil(t.width*e),r.height=Math.ceil(t.height*e);const n=r.getContext("2d");n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=o3e(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===Le.LOADED||this.imageState_===Le.ERROR?e():this.addEventListener(Ie.CHANGE,function t(){(this.imageState_===Le.LOADED||this.imageState_===Le.ERROR)&&(this.removeEventListener(Ie.CHANGE,t),e())})})),this.ready_}}function jT(i,e,t,r,n,s){let o=e===void 0?void 0:oa.get(e,t,n);return o||(o=new w3e(i,i instanceof HTMLImageElement?i.src||void 0:e,t,r,n),oa.set(e,t,n,o,s)),s&&o&&!oa.getPattern(e,t,n)&&oa.set(e,t,n,o,s),o}function aa(i){return i?Array.isArray(i)?NT(i):typeof i=="object"&&"src"in i?E3e(i):i:null}function E3e(i){if(!i.offset||!i.size)return oa.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=oa.getPattern(e,void 0,i.color);if(t)return t;const r=oa.get(i.src,"anonymous",null);if(r.getImageState()!==Le.LOADED)return null;const n=vi(i.size[0],i.size[1]);return n.drawImage(r.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),jT(n.canvas,e,void 0,Le.LOADED,i.color,!0),oa.getPattern(e,void 0,i.color)}const O0="ol-hidden",S3e="ol-selectable",xa="ol-unselectable",ple="ol-unsupported",_u="ol-control",dv="ol-collapsed",C3e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),gle=["style","variant","weight","size","lineHeight","family"],Ime=function(i){const e=i.match(C3e);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,n=gle.length;r<n;++r){const s=e[r+1];s!==void 0&&(t[gle[r]]=s)}return t.families=t.family.split(/,\s?/),t},Pme="10px sans-serif",Kn="#000",Sf="round",sl=[],ol=0,Cf="round",ym=10,_m="#000",vm="center",fv="middle",Ph=[0,0,0,0],bm=1,Ba=new so;let gd=null,wS;const ES={},T3e=function(){const e="32px ",t=["monospace","serif"],r=t.length,n="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,h,u){let d=!0;for(let f=0;f<r;++f){const p=t[f];if(o=pv(c+" "+h+" "+e+p,n),u!=p){const g=pv(c+" "+h+" "+e+u+","+p,n);d=d&&g!=o}}return!!d}function l(){let c=!0;const h=Ba.getKeys();for(let u=0,d=h.length;u<d;++u){const f=h[u];Ba.get(f)<100&&(a.apply(this,f.split(`
`))?(Xf(ES),gd=null,wS=void 0,Ba.set(f,100)):(Ba.set(f,Ba.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const h=Ime(c);if(!h)return;const u=h.families;for(let d=0,f=u.length;d<f;++d){const p=u[d],g=h.style+`
`+h.weight+`
`+p;Ba.get(g)===void 0&&(Ba.set(g,100,!0),a(h.style,h.weight,p)||(Ba.set(g,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),A3e=function(){let i;return function(e){let t=ES[e];if(t==null){if(Ame){const r=Ime(e),n=kme(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);ES[e]=t}return t}}();function kme(i,e){return gd||(gd=vi(1,1)),i!=wS&&(gd.font=i,wS=gd.font),gd.measureText(e)}function pv(i,e){return kme(i,e).width}function mle(i,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((n,s)=>Math.max(n,pv(i,s)),0);return t[e]=r,r}function M3e(i,e){const t=[],r=[],n=[];let s=0,o=0,a=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const u=e[c];if(u===`
`||c===h){s=Math.max(s,o),n.push(o),o=0,a+=l;continue}const d=e[c+1]||i.font,f=pv(d,u);t.push(f),o+=f;const p=A3e(d);r.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:r,lineWidths:n}}function R3e(i,e,t,r,n,s,o,a,l,c,h){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=u=>u.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),r.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),L3e(r,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(r,n,s,o,a,0,0,o,a)):i.drawImage(r,n,s,o,a,l,c,o*h[0],a*h[1]),i.restore()}function L3e(i,e){const t=i.contextInstructions;for(let r=0,n=t.length;r<n;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class sx extends rx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Le.LOADING:Le.LOADED,this.imageState_===Le.LOADING&&this.ready().then(()=>this.imageState_=Le.LOADED),this.render()}clone(){const e=this.getScale(),t=new sx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const r=this.renderOptions_,n=vi(r.size*e,r.size*e);this.draw_(r,n,e),t=n.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius_,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const T=n;n=s,s=T}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),h=n-c,u=Math.sqrt(l*l+h*h),d=u/l;if(e==="miter"&&d<=r)return d*t;const f=t/2/d,p=t/2*(h/u),m=Math.sqrt((n+f)*(n+f)+p*p)-n;if(this.radius2_===void 0||e==="bevel")return m*2;const y=n*Math.sin(a),_=Math.sqrt(n*n-y*y),v=s-_,w=Math.sqrt(y*y+v*v)/y;if(w<=r){const T=w*t/2-s-n;return 2*Math.max(m,T)}return m*2}createRenderOptions(){let e=Sf,t=Cf,r=0,n=null,s=0,o,a=0;this.stroke_&&(o=aa(this.stroke_.getColor()??_m),a=this.stroke_.getWidth()??bm,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Cf,e=this.stroke_.getLineCap()??Sf,r=this.stroke_.getMiterLimit()??ym);const l=this.calculateLineJoinSize_(t,a,r),c=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=Kn),t.fillStyle=aa(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=Do(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(t=vi(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius_;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const n=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?r:n;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Kn,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class dy extends sx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new dy({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class ss{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ss({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=jT(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Le.IDLE&&t.load(),t.getImageState()===Le.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class mn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new mn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class qi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=yle,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new qi({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=yle,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function I3e(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(pt(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let Fw=null;function P3e(i,e){if(!Fw){const t=new ss({color:"rgba(255,255,255,0.4)"}),r=new mn({color:"#3399CC",width:1.25});Fw=[new qi({image:new dy({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return Fw}function Ome(){const i={},e=[255,255,255,1],t=[0,153,255,1],r=3;return i.Polygon=[new qi({fill:new ss({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new qi({stroke:new mn({color:e,width:r+2})}),new qi({stroke:new mn({color:t,width:r})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new qi({image:new dy({radius:r*2,fill:new ss({color:t}),stroke:new mn({color:e,width:r/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function yle(i){return i.getGeometry()}function _le(i,e,t,r){return t!==void 0&&r!==void 0?[t/i,r/e]:t!==void 0?t/i:r!==void 0?r/e:1}class zT extends rx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;pt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Ae(o)),pt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),pt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Le.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Le.LOADED:Le.IDLE:l=Le.LOADING:l=Le.LOADED),this.color_=e.color!==void 0?Do(e.color):null,this.iconImage_=jT(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,h;if(e.size)[c,h]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(_le(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(_le(c,h,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new zT({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Le.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Le.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ie.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ie.CHANGE,e)}ready(){return this.iconImage_.ready()}}const ox=zT,k3e="#333";class iu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Mi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ss({color:k3e}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new iu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Mi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let rp=0;const vu=0,xi=1<<rp++,ye=1<<rp++,br=1<<rp++,ri=1<<rp++,cr=1<<rp++,an=Math.pow(2,rp)-1,Dme={[xi]:"boolean",[ye]:"number",[br]:"string",[ri]:"color",[cr]:"number[]"},O3e=Object.keys(Dme).map(Number).sort(fa);function Sr(i){const e=[];for(const t of O3e)D3e(i,t)&&e.push(Dme[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function D3e(i,e){return(i&e)===e}function Ro(i,e){return!!(i&e)}function fy(i,e){return i===e}class cc{constructor(e,t){this.type=e,this.value=t}}class Fme{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function GT(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function F3e(i){switch(i){case"string":return br;case"color":return ri;case"number":return ye;case"boolean":return xi;case"number[]":return cr;default:throw new Error(`Unrecognized type hint: ${i}`)}}function ii(i,e,t){switch(typeof i){case"boolean":return new cc(xi,i);case"number":return new cc(ye,i);case"string":{let n=br;return h3e(i)&&(n|=ri),fy(n&t,vu)||(n&=t),new cc(n,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return Y3e(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("Expected an array of numbers");let r=cr;return(i.length===3||i.length===4)&&(r|=ri),t&&(r&=t),new cc(r,i)}const J={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},N3e={[J.Get]:ct(([i,e])=>e!==void 0?F3e(e.value):an,St(1,2),$3e),[J.Var]:ct(([i])=>i.type,St(1,1),B3e),[J.Id]:ct(ye|br,Xp,j3e),[J.Concat]:ct(br,St(2,1/0),Gt(an)),[J.GeometryType]:ct(br,Xp,z3e),[J.Resolution]:ct(ye,Xp),[J.Zoom]:ct(ye,Xp),[J.Time]:ct(ye,Xp),[J.Any]:ct(xi,St(2,1/0),Gt(xi)),[J.All]:ct(xi,St(2,1/0),Gt(xi)),[J.Not]:ct(xi,St(1,1),Gt(xi)),[J.Equal]:ct(xi,St(2,2),Gt(an),Gl),[J.NotEqual]:ct(xi,St(2,2),Gt(an),Gl),[J.GreaterThan]:ct(xi,St(2,2),Gt(an),Gl),[J.GreaterThanOrEqualTo]:ct(xi,St(2,2),Gt(an),Gl),[J.LessThan]:ct(xi,St(2,2),Gt(an),Gl),[J.LessThanOrEqualTo]:ct(xi,St(2,2),Gt(an),Gl),[J.Multiply]:ct(i=>{let e=ye|ri;for(let t=0;t<i.length;t++)e&=i[t].type;return e},St(2,1/0),Gt(ye|ri),Gl),[J.Coalesce]:ct(i=>{let e=an;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},St(2,1/0),Gt(an),Gl),[J.Divide]:ct(ye,St(2,2),Gt(ye)),[J.Add]:ct(ye,St(2,1/0),Gt(ye)),[J.Subtract]:ct(ye,St(2,2),Gt(ye)),[J.Clamp]:ct(ye,St(3,3),Gt(ye)),[J.Mod]:ct(ye,St(2,2),Gt(ye)),[J.Pow]:ct(ye,St(2,2),Gt(ye)),[J.Abs]:ct(ye,St(1,1),Gt(ye)),[J.Floor]:ct(ye,St(1,1),Gt(ye)),[J.Ceil]:ct(ye,St(1,1),Gt(ye)),[J.Round]:ct(ye,St(1,1),Gt(ye)),[J.Sin]:ct(ye,St(1,1),Gt(ye)),[J.Cos]:ct(ye,St(1,1),Gt(ye)),[J.Atan]:ct(ye,St(1,2),Gt(ye)),[J.Sqrt]:ct(ye,St(1,1),Gt(ye)),[J.Match]:ct(i=>{let e=an;for(let t=2;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},St(4,1/0),vle,U3e),[J.Between]:ct(xi,St(3,3),Gt(ye)),[J.Interpolate]:ct(i=>{let e=ri|ye;for(let t=3;t<i.length;t+=2)e&=i[t].type;return e},St(6,1/0),vle,V3e),[J.Case]:ct(i=>{let e=an;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},St(3,1/0),G3e,q3e),[J.In]:ct(xi,St(2,2),H3e),[J.Number]:ct(ye,St(1,1/0),Gt(an)),[J.String]:ct(br,St(1,1/0),Gt(an)),[J.Array]:ct(i=>i.length===3||i.length===4?cr|ri:cr,St(1,1/0),Gt(ye)),[J.Color]:ct(ri,St(1,4),Gt(ye)),[J.Band]:ct(ye,St(1,3),Gt(ye)),[J.Palette]:ct(ri,St(2,2),W3e),[J.ToString]:ct(br,St(1,1),Gt(xi|ye|br|ri))};function $3e(i,e){const t=ii(i[1],e);if(!(t instanceof cc))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),i.length===3){const r=ii(i[2],e);return[t,r]}return[t]}function B3e(i,e,t,r){const n=i[1];if(typeof n!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(n),!("variables"in e.style)||e.style.variables[n]===void 0)return[new cc(an,n)];const s=e.style.variables[n],o=ii(s,e);if(o.value=n,r&&!Ro(r,o.type))throw new Error(`The variable ${n} has type ${Sr(o.type)} but the following type was expected: ${Sr(r)}`);return[o]}function j3e(i,e){e.featureId=!0}function z3e(i,e){e.geometryType=!0}function Xp(i,e){const t=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function St(i,e){return function(t,r){const n=t[0],s=t.length-1;if(i===e){if(s!==i){const o=i===1?"":"s";throw new Error(`Expected ${i} argument${o} for ${n}, got ${s}`)}}else if(s<i||s>e){const o=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${o} arguments for ${n}, got ${s}`)}}}function Gt(i){return function(e,t){const r=e[0],n=e.length-1,s=new Array(n);for(let o=0;o<n;++o){const a=ii(e[o+1],t);if(!Ro(i,a.type)){const l=Sr(i),c=Sr(a.type);throw new Error(`Unexpected type for argument ${o} of ${r} operation, got ${l} but expected ${c}`)}a.type&=i,s[o]=a}return s}}function Gl(i,e,t){const r=i[0],n=i.length-1;let s=an;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===vu)throw new Error(`No common type could be found for arguments of ${r} operation`);const o=new Array(n);for(let a=0;a<n;++a)o[a]=ii(i[a+1],e,s);return o}function G3e(i,e){const t=i[0],r=i.length-1;if(r%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function vle(i,e){const t=i[0],r=i.length-1;if(r%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function U3e(i,e,t,r){const n=i.length-1;let o=ii(i[1],e).type;const a=ii(i[i.length-1],e);let l=r!==void 0?r&a.type:a.type;const c=new Array(n-2);for(let u=0;u<n-2;u+=2){const d=ii(i[u+2],e),f=ii(i[u+3],e);o&=d.type,l&=f.type,c[u]=d,c[u+1]=f}const h=br|ye|xi;if(!Ro(h,o))throw new Error(`Expected an input of type ${Sr(h)} for the interpolate operation, got ${Sr(o)} instead`);if(fy(l,vu))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let u=0;u<n-2;u+=2){const d=ii(i[u+2],e,o),f=ii(i[u+3],e,l);c[u]=d,c[u+1]=f}return[ii(i[1],e,o),...c,ii(i[i.length-1],e,l)]}function V3e(i,e,t,r){const n=i[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":if(s=n[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(n)}`);s=ii(s,e);let o=ii(i[2],e);if(!Ro(ye,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Sr(o.type)} instead`);o=ii(i[2],e,ye);const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){let c=ii(i[l+3],e);if(!Ro(ye,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Sr(c.type)} at position ${l+2} instead`);let h=ii(i[l+4],e);if(!Ro(ye|ri,h.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Sr(h.type)} at position ${l+3} instead`);c=ii(i[l+3],e,ye),h=ii(i[l+4],e,ye|ri),a[l]=c,a[l+1]=h}return[s,o,...a]}function q3e(i,e,t,r){const n=ii(i[i.length-1],e);let s=r!==void 0?r&n.type:n.type;const o=new Array(i.length-1);for(let a=0;a<o.length-1;a+=2){const l=ii(i[a+1],e),c=ii(i[a+2],e);if(!Ro(xi,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Sr(l.type)} at position ${a} instead`);s&=c.type,o[a]=l,o[a+1]=c}if(fy(s,vu))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let a=0;a<o.length-1;a+=2)o[a+1]=ii(i[a+2],e,s);return o[o.length-1]=ii(i[i.length-1],e,s),o}function H3e(i,e){let t=i[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let r=br|ye;const n=new Array(t.length);for(let o=0;o<n.length;o++){const a=ii(t[o],e);r&=a.type,n[o]=a}if(fy(r,vu))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[ii(i[1],e,r),...n]}function W3e(i,e){const t=ii(i[1],e,ye);if(t.type!==ye)throw new Error(`The first argument of palette must be an number, got ${Sr(t.type)} instead`);const r=i[2];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const n=new Array(r.length);for(let s=0;s<n.length;s++){const o=ii(r[s],e,ri);if(!(o instanceof cc))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Ro(o.type,ri))throw new Error(`The palette color at index ${s} should be of type color, got ${Sr(o.type)} instead`);n[s]=o}return[t,...n]}function ct(i,...e){return function(t,r,n){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,r,o,n)||o;let a=typeof i=="function"?i(o):i;if(n!==void 0){if(!Ro(a,n))throw new Error(`The following expression was expected to return ${Sr(n)}, but returns ${Sr(a)} instead: ${JSON.stringify(t)}`);a&=n}if(a===vu)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new Fme(a,s,...o)}}function Y3e(i,e,t){const r=i[0],n=N3e[r];if(!n)throw new Error(`Unknown operator: ${r}`);return n(i,e,t)}function UT(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return UT(i.getGeometries()[0]);default:return""}}function Nme(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Cl(i,e,t){const r=ii(i,t);if(!Ro(e,r.type)){const n=Sr(e),s=Sr(r.type);throw new Error(`Expected expression to be of type ${n}, got ${s}`)}return Fo(r)}function Fo(i,e){if(i instanceof cc){if(i.type===ri&&typeof i.value=="string"){const r=FT(i.value);return function(){return r}}return function(){return i.value}}const t=i.operator;switch(t){case J.Number:case J.String:case J.Coalesce:return X3e(i);case J.Get:case J.Var:return Z3e(i);case J.Id:return r=>r.featureId;case J.GeometryType:return r=>r.geometryType;case J.Concat:{const r=i.args.map(n=>Fo(n));return n=>"".concat(...r.map(s=>s(n).toString()))}case J.Resolution:return r=>r.resolution;case J.Any:case J.All:case J.Between:case J.In:case J.Not:return J3e(i);case J.Equal:case J.NotEqual:case J.LessThan:case J.LessThanOrEqualTo:case J.GreaterThan:case J.GreaterThanOrEqualTo:return K3e(i);case J.Multiply:case J.Divide:case J.Add:case J.Subtract:case J.Clamp:case J.Mod:case J.Pow:case J.Abs:case J.Floor:case J.Ceil:case J.Round:case J.Sin:case J.Cos:case J.Atan:case J.Sqrt:return Q3e(i);case J.Case:return e$e(i);case J.Match:return t$e(i);case J.Interpolate:return i$e(i);case J.ToString:return r$e(i);default:throw new Error(`Unsupported operator ${t}`)}}function X3e(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Fo(i.args[s]);switch(t){case J.Coalesce:return s=>{for(let o=0;o<r;++o){const a=n[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case J.Number:case J.String:return s=>{for(let o=0;o<r;++o){const a=n[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Z3e(i,e){const r=i.args[0].value;switch(i.operator){case J.Get:return n=>n.properties[r];case J.Var:return n=>n.variables[r];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function K3e(i,e){const t=i.operator,r=Fo(i.args[0]),n=Fo(i.args[1]);switch(t){case J.Equal:return s=>r(s)===n(s);case J.NotEqual:return s=>r(s)!==n(s);case J.LessThan:return s=>r(s)<n(s);case J.LessThanOrEqualTo:return s=>r(s)<=n(s);case J.GreaterThan:return s=>r(s)>n(s);case J.GreaterThanOrEqualTo:return s=>r(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function J3e(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Fo(i.args[s]);switch(t){case J.Any:return s=>{for(let o=0;o<r;++o)if(n[o](s))return!0;return!1};case J.All:return s=>{for(let o=0;o<r;++o)if(!n[o](s))return!1;return!0};case J.Between:return s=>{const o=n[0](s),a=n[1](s),l=n[2](s);return o>=a&&o<=l};case J.In:return s=>{const o=n[0](s);for(let a=1;a<r;++a)if(o===n[a](s))return!0;return!1};case J.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Q3e(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Fo(i.args[s]);switch(t){case J.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=n[a](s);return o};case J.Divide:return s=>n[0](s)/n[1](s);case J.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=n[a](s);return o};case J.Subtract:return s=>n[0](s)-n[1](s);case J.Clamp:return s=>{const o=n[0](s),a=n[1](s);if(o<a)return a;const l=n[2](s);return o>l?l:o};case J.Mod:return s=>n[0](s)%n[1](s);case J.Pow:return s=>Math.pow(n[0](s),n[1](s));case J.Abs:return s=>Math.abs(n[0](s));case J.Floor:return s=>Math.floor(n[0](s));case J.Ceil:return s=>Math.ceil(n[0](s));case J.Round:return s=>Math.round(n[0](s));case J.Sin:return s=>Math.sin(n[0](s));case J.Cos:return s=>Math.cos(n[0](s));case J.Atan:return r===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case J.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function e$e(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Fo(i.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(r[s](n))return r[s+1](n);return r[t-1](n)}}function t$e(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Fo(i.args[n]);return n=>{const s=r[0](n);for(let o=1;o<t;o+=2)if(s===r[o](n))return r[o+1](n);return r[t-1](n)}}function i$e(i,e){const t=i.args.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=Fo(i.args[n]);return n=>{const s=r[0](n),o=r[1](n);let a,l;for(let c=2;c<t;c+=2){const h=r[c](n);let u=r[c+1](n);const d=Array.isArray(u);if(d&&(u=l3e(u)),h>=o)return c===2?u:d?n$e(s,o,a,l,h,u):pg(s,o,a,l,h,u);a=h,l=u}return l}}function r$e(i,e){const t=i.operator,r=i.args.length,n=new Array(r);for(let s=0;s<r;++s)n[s]=Fo(i.args[s]);switch(t){case J.ToString:return s=>{const o=n[0](s);return i.args[0].type===ri?NT(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function pg(i,e,t,r,n,s){const o=n-t;if(o===0)return r;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return r+l*(s-r)}function n$e(i,e,t,r,n,s){if(n-t===0)return r;const a=fle(r),l=fle(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[pg(i,e,t,a[0],n,l[0]),pg(i,e,t,a[1],n,l[1]),a[2]+pg(i,e,t,0,n,c),pg(i,e,t,r[3],n,s[3])];return Cme(c3e(h))}function s$e(i){return!0}function o$e(i){const e=GT(),t=a$e(i,e),r=Nme();return function(n,s){if(r.properties=n.getPropertiesInternal(),r.resolution=s,e.featureId){const o=n.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=UT(n.getGeometry())),t(r)}}function ble(i){const e=GT(),t=i.length,r=new Array(t);for(let o=0;o<t;++o)r[o]=SS(i[o],e);const n=Nme(),s=new Array(t);return function(o,a){if(n.properties=o.getPropertiesInternal(),n.resolution=a,e.featureId){const c=o.getId();c!==void 0?n.featureId=c:n.featureId=null}let l=0;for(let c=0;c<t;++c){const h=r[c](n);h&&(s[l]=h,l+=1)}return s.length=l,s}}function a$e(i,e){const t=i.length,r=new Array(t);for(let n=0;n<t;++n){const s=i[n],o="filter"in s?Cl(s.filter,xi,e):s$e;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=SS(s.style[c],e)}else a=[SS(s.style,e)];r[n]={filter:o,styles:a}}return function(n){const s=[];let o=!1;for(let a=0;a<t;++a){const l=r[a].filter;if(l(n)&&!(i[a].else&&o)){o=!0;for(const c of r[a].styles){const h=c(n);h&&s.push(h)}}}return s}}function SS(i,e){const t=xm(i,"",e),r=wm(i,"",e),n=l$e(i,e),s=c$e(i,e),o=es(i,"z-index",e);if(!t&&!r&&!n&&!s&&!gl(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new qi;return function(l){let c=!0;if(t){const h=t(l);h&&(c=!1),a.setFill(h)}if(r){const h=r(l);h&&(c=!1),a.setStroke(h)}if(n){const h=n(l);h&&(c=!1),a.setText(h)}if(s){const h=s(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function xm(i,e,t){let r;if(e+"fill-pattern-src"in i?r=f$e(i,e+"fill-",t):r=VT(i,e+"fill-color",t),!r)return null;const n=new ss;return function(s){const o=r(s);return o==="none"?null:(n.setColor(o),n)}}function wm(i,e,t){const r=es(i,e+"stroke-width",t),n=VT(i,e+"stroke-color",t);if(!r&&!n)return null;const s=Va(i,e+"stroke-line-cap",t),o=Va(i,e+"stroke-line-join",t),a=$me(i,e+"stroke-line-dash",t),l=es(i,e+"stroke-line-dash-offset",t),c=es(i,e+"stroke-miter-limit",t),h=new mn;return function(u){if(n){const d=n(u);if(d==="none")return null;h.setColor(d)}if(r&&h.setWidth(r(u)),s){const d=s(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function l$e(i,e){const t="text-",r=Va(i,t+"value",e);if(!r)return null;const n=xm(i,t,e),s=xm(i,t+"background-",e),o=wm(i,t,e),a=wm(i,t+"background-",e),l=Va(i,t+"font",e),c=es(i,t+"max-angle",e),h=es(i,t+"offset-x",e),u=es(i,t+"offset-y",e),d=Em(i,t+"overflow",e),f=Va(i,t+"placement",e),p=es(i,t+"repeat",e),g=ax(i,t+"scale",e),m=Em(i,t+"rotate-with-view",e),y=es(i,t+"rotation",e),_=Va(i,t+"align",e),v=Va(i,t+"justify",e),x=Va(i,t+"baseline",e),w=$me(i,t+"padding",e),T=lx(i,t+"declutter-mode"),A=new iu({declutterMode:T});return function(R){if(A.setText(r(R)),n&&A.setFill(n(R)),s&&A.setBackgroundFill(s(R)),o&&A.setStroke(o(R)),a&&A.setBackgroundStroke(a(R)),l&&A.setFont(l(R)),c&&A.setMaxAngle(c(R)),h&&A.setOffsetX(h(R)),u&&A.setOffsetY(u(R)),d&&A.setOverflow(d(R)),f){const L=f(R);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");A.setPlacement(L)}if(p&&A.setRepeat(p(R)),g&&A.setScale(g(R)),m&&A.setRotateWithView(m(R)),y&&A.setRotation(y(R)),_){const L=_(R);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");A.setTextAlign(L)}if(v){const L=v(R);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");A.setJustify(L)}if(x){const L=x(R);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");A.setTextBaseline(L)}return w&&A.setPadding(w(R)),A}}function c$e(i,e){return"icon-src"in i?h$e(i,e):"shape-points"in i?u$e(i,e):"circle-radius"in i?d$e(i,e):null}function h$e(i,e){const t="icon-",r=t+"src",n=Bme(i[r],r),s=gv(i,t+"anchor",e),o=ax(i,t+"scale",e),a=es(i,t+"opacity",e),l=gv(i,t+"displacement",e),c=es(i,t+"rotation",e),h=Em(i,t+"rotate-with-view",e),u=wle(i,t+"anchor-origin"),d=Ele(i,t+"anchor-x-units"),f=Ele(i,t+"anchor-y-units"),p=y$e(i,t+"color"),g=g$e(i,t+"cross-origin"),m=m$e(i,t+"offset"),y=wle(i,t+"offset-origin"),_=mv(i,t+"width"),v=mv(i,t+"height"),x=p$e(i,t+"size"),w=lx(i,t+"declutter-mode"),T=new ox({src:n,anchorOrigin:u,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:g,offset:m,offsetOrigin:y,height:v,width:_,size:x,declutterMode:w});return function(A){return a&&T.setOpacity(a(A)),l&&T.setDisplacement(l(A)),c&&T.setRotation(c(A)),h&&T.setRotateWithView(h(A)),o&&T.setScale(o(A)),s&&T.setAnchor(s(A)),T}}function u$e(i,e){const t="shape-",r=t+"points",n=t+"radius",s=CS(i[r],r),o=CS(i[n],n),a=xm(i,t,e),l=wm(i,t,e),c=ax(i,t+"scale",e),h=gv(i,t+"displacement",e),u=es(i,t+"rotation",e),d=Em(i,t+"rotate-with-view",e),f=mv(i,t+"radius2"),p=mv(i,t+"angle"),g=lx(i,t+"declutter-mode"),m=new sx({points:s,radius:o,radius2:f,angle:p,declutterMode:g});return function(y){return a&&m.setFill(a(y)),l&&m.setStroke(l(y)),h&&m.setDisplacement(h(y)),u&&m.setRotation(u(y)),d&&m.setRotateWithView(d(y)),c&&m.setScale(c(y)),m}}function d$e(i,e){const t="circle-",r=xm(i,t,e),n=wm(i,t,e),s=es(i,t+"radius",e),o=ax(i,t+"scale",e),a=gv(i,t+"displacement",e),l=es(i,t+"rotation",e),c=Em(i,t+"rotate-with-view",e),h=lx(i,t+"declutter-mode"),u=new dy({radius:5,declutterMode:h});return function(d){return s&&u.setRadius(s(d)),r&&u.setFill(r(d)),n&&u.setStroke(n(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}function es(i,e,t){if(!(e in i))return;const r=Cl(i[e],ye,t);return function(n){return CS(r(n),e)}}function Va(i,e,t){if(!(e in i))return null;const r=Cl(i[e],br,t);return function(n){return Bme(r(n),e)}}function f$e(i,e,t){const r=Va(i,e+"pattern-src",t),n=xle(i,e+"pattern-offset",t),s=xle(i,e+"pattern-size",t),o=VT(i,e+"color",t);return function(a){return{src:r(a),offset:n&&n(a),size:s&&s(a),color:o&&o(a)}}}function Em(i,e,t){if(!(e in i))return null;const r=Cl(i[e],xi,t);return function(n){const s=r(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function VT(i,e,t){if(!(e in i))return null;const r=Cl(i[e],ri|br,t);return function(n){return jme(r(n),e)}}function $me(i,e,t){if(!(e in i))return null;const r=Cl(i[e],cr,t);return function(n){return py(r(n),e)}}function gv(i,e,t){if(!(e in i))return null;const r=Cl(i[e],cr,t);return function(n){const s=py(r(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function xle(i,e,t){if(!(e in i))return null;const r=Cl(i[e],cr,t);return function(n){return zme(r(n),e)}}function ax(i,e,t){if(!(e in i))return null;const r=Cl(i[e],cr|ye,t);return function(n){return _$e(r(n),e)}}function mv(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function p$e(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Mi(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function g$e(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function wle(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Ele(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function m$e(i,e){const t=i[e];if(t!==void 0)return py(t,e)}function lx(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function y$e(i,e){const t=i[e];if(t!==void 0)return jme(t,e)}function py(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let r=0;r<t;++r)if(typeof i[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function Bme(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function CS(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function jme(i,e){if(typeof i=="string")return i;const t=py(i,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function zme(i,e){const t=py(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function _$e(i,e){return typeof i=="number"?i:zme(i,e)}const Sle={RENDER_ORDER:"renderOrder"};class np extends yu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Sle.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new qb(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Sle.RENDER_ORDER,e)}setStyle(e){this.style_=v$e(e),this.styleFunction_=e===null?void 0:I3e(this.style_),this.changed()}}function v$e(i){if(i===void 0)return P3e;if(!i)return null;if(typeof i=="function"||i instanceof qi)return i;if(!Array.isArray(i))return ble([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof qi){const n=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof qi))throw new Error("Expected a list of style instances");n[s]=o}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");n[s]=o}return o$e(n)}return ble(i)}class b$e extends sy{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ze()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;Pn(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),cy(n,r)}forEachFeatureAtCoordinate(e,t,r,n,s,o,a,l){let c;const h=t.viewState;function u(x,w,T,A){return s.call(o,w,x?T:null,A)}const d=h.projection,f=Zb(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&n){const x=d.getExtent(),w=rt(x);p.push([-w,0],[w,0])}const g=t.layerStatesArray,m=g.length,y=[],_=[];for(let x=0;x<p.length;x++)for(let w=m-1;w>=0;--w){const T=g[w],A=T.layer;if(A.hasRenderer()&&OT(T,h)&&a.call(l,A)){const R=A.getRenderer(),L=A.getSource();if(R&&L){const P=L.getWrapX()?f:e,F=u.bind(null,T.managed);_[0]=P[0]+p[x][0],_[1]=P[1]+p[x][1],c=R.forEachFeatureAtCoordinate(_,t,r,F,y)}if(c)return c}}if(y.length===0)return;const v=1/y.length;return y.forEach((x,w)=>x.distanceSq+=w*v),y.sort((x,w)=>x.distanceSq-w.distanceSq),y.some(x=>c=x.callback(x.feature,x.layer,x.geometry)),c}hasFeatureAtCoordinate(e,t,r,n,s,o){return this.forEachFeatureAtCoordinate(e,t,r,n,ff,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ze()}scheduleExpireIconCache(e){oa.canExpireCache()&&e.postRenderFunctions.push(x$e)}}function x$e(i,e){oa.expire()}class Dg extends Dn{constructor(e,t,r,n){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=n}}class w$e extends b$e{constructor(e){super(e),this.fontChangeListenerKey_=lt(Ba,Jh.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=xa+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const n=new Dg(e,void 0,t);r.dispatchEvent(n)}}disposeInternal(){Xt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(vr.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});t.some(a=>a.layer instanceof np&&a.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const c=t[a];e.layerIndex=a;const h=c.layer,u=h.getSourceState();if(!OT(c,n)||u!="ready"&&u!="undefined"){h.unrender();continue}const d=h.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(c))}this.declutter(e,s),_3e(this.element_,this.children_),this.dispatchRenderEvent(vr.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){for(let r=t.length-1;r>=0;--r){const n=t[r],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(r=>r.layer.renderDeferred(e))}}class Kl extends Dn{constructor(e,t){super(e),this.layer=t}}const Nw={LAYERS:"layers"};class Os extends Xge{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Nw.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new gn(r.slice(),{unique:!0}):pt(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new gn(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(lt(e,dn.ADD,this.handleLayersAdd_,this),lt(e,dn.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Xt);Xf(this.listenerKeys_);const t=e.getArray();for(let r=0,n=t.length;r<n;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Kl("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[lt(e,Jh.PROPERTYCHANGE,this.handleLayerChange_,this),lt(e,Ie.CHANGE,this.handleLayerChange_,this)];e instanceof Os&&t.push(lt(e,"addlayer",this.handleLayerGroupAdd_,this),lt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ae(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Kl("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Kl("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Kl("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Ae(t);this.listenerKeys_[r].forEach(Xt),delete this.listenerKeys_[r],this.dispatchEvent(new Kl("removelayer",t)),this.changed()}getLayers(){return this.get(Nw.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let n=0,s=r.length;n<s;++n)this.dispatchEvent(new Kl("removelayer",r[n]))}this.set(Nw.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const n=this.getLayerState();let s=n.zIndex;!e&&n.zIndex===void 0&&(s=0);for(let o=r,a=t.length;o<a;o++){const l=t[o];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=Er(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class md extends Dn{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class za extends md{constructor(e,t,r,n,s,o){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Dt={SINGLECLICK:"singleclick",CLICK:Ie.CLICK,DBLCLICK:Ie.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ta={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class E$e extends Zf{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=lt(r,ta.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=lt(r,ta.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ie.TOUCHMOVE,this.boundHandleTouchMove_,Mme?{passive:!1}:!1)}emulateClick_(e){let t=new za(Dt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new za(Dt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new za(Dt.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Dt.POINTERUP||t.type==Dt.POINTERCANCEL){delete this.trackedTouches_[r];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Dt.POINTERDOWN||t.type==Dt.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new za(Dt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Xt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new za(Dt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(lt(r,Dt.POINTERMOVE,this.handlePointerMove_,this),lt(r,Dt.POINTERUP,this.handlePointerUp_,this),lt(this.element_,Dt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(lt(this.element_.getRootNode(),Dt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new za(Dt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new za(Dt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Xt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ie.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Xt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Qo={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},nr={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},yv=1/0;class S$e{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Xf(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(r);return delete this.queuedElements_[n],r}enqueue(e){pt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=yv?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,n=t.length,s=t[e],o=r[e],a=e;for(;e<n>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<n&&r[c]<r[l]?c:l;t[e]=t[h],r[e]=r[h],e=h}t[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const r=this.elements_,n=this.priorities_,s=r[t],o=n[t];for(;t>e;){const a=this.getParentIndex_(t);if(n[a]>o)r[t]=r[a],n[t]=n[a],t=a;else break}r[t]=s,n[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let n=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==yv?delete this.queuedElements_[this.keyFunction_(o)]:(r[n]=l,t[n++]=o);t.length=n,r.length=n,this.heapify_()}}const ie={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Gme extends S$e{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ie.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===ie.LOADED||r===ie.ERROR||r===ie.EMPTY){r!==ie.ERROR&&t.removeEventListener(Ie.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0,n,s,o;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),n=s.getState(),n===ie.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,s.load())}}function C$e(i,e,t,r,n){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return yv;const s=i.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n}class $o extends so{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){uv(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&uv(this.element);for(let t=0,r=this.listenerKeys.length;t<r;++t)Xt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==pf&&this.listenerKeys.push(lt(e,Qo.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class T$e extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ie.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+xa+" "+_u+(this.collapsed_&&this.collapsible_?" "+dv:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(n=>n.getAttributions(e)))),r=!this.getMap().getAllLayers().some(n=>n.getSource()&&n.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(r),t}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>aT(()=>n))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Ta(t,this.renderedAttributions_)){Rme(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const o=document.createElement("li");o.innerHTML=t[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(dv),this.collapsed_?Ef(this.collapseLabel_,this.label_):Ef(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const Ume=T$e;class A$e extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Ie.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+xa+" "+_u,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(O0)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:gu}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const n="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(O0);!s&&r===0?this.element.classList.add(O0):s&&r!==0&&this.element.classList.remove(O0)}this.label_.style.transform=n}this.rotation_=r}}const Vme=A$e;class M$e extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(Ie.CLICK,this.handleClick_.bind(this,r),!1);const u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(Ie.CLICK,this.handleClick_.bind(this,-r),!1);const d=t+" "+xa+" "+_u,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const n=r.getZoom();if(n!==void 0){const s=r.getConstrainedZoom(n+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:gu})):r.setZoom(s)}}}const qme=M$e;function Hme(i){i=i||{};const e=new gn;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new qme(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new Vme(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new Ume(i.attributionOptions)),e}const TS={ACTIVE:"active"};class gy extends so{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(TS.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(TS.ACTIVE,e)}setMap(e){this.map_=e}}function R$e(i,e,t){const r=i.getCenterInternal();if(r){const n=[r[0]+e[0],r[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:ONe,center:i.getConstrainedCenter(n)})}}function qT(i,e,t,r){const n=i.getZoom();if(n===void 0)return;const s=i.getConstrainedZoom(n+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:r!==void 0?r:250,easing:gu})}class L$e extends gy{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Dt.DBLCLICK){const r=e.originalEvent,n=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=n.getView();qT(a,o,s,this.duration_),r.preventDefault(),t=!0}return!t}}const I$e=L$e;class bu extends gy{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Dt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Dt.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Dt.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Dt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function HT(i){const e=i.length;let t=0,r=0;for(let n=0;n<e;n++)t+=i[n].clientX,r+=i[n].clientY;return{clientX:t/e,clientY:r/e}}function AS(i){const e=arguments;return function(t){let r=!0;for(let n=0,s=e.length;n<s&&(r=r&&e[n](t),!!r);++n);return r}}const P$e=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},k$e=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},O$e=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},Wme=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?O$e(i):!0},_v=ff,Yme=function(i){const e=i.originalEvent;return e.button==0&&!(p3e&&$T&&e.ctrlKey)},D$e=Yf,F$e=function(i){return i.type==Dt.SINGLECLICK},WT=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Cle=function(i){const e=i.originalEvent;return!e.altKey&&($T?e.metaKey:e.ctrlKey)&&!e.shiftKey},N$e=function(i){const e=i.originalEvent;return $T?e.metaKey:e.ctrlKey},Xme=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zme=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},$w=function(i){const e=i.originalEvent;return pt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Kme=function(i){const e=i.originalEvent;return pt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Fg extends bu{constructor(e){super({stopDown:Yf}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:AS(WT,Kme);this.condition_=e.onFocusOnly?AS(Wme,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,n=t.getEventPixel(HT(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=e.map.getView();rme(s,a.getResolution()),pT(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-n*Math.cos(s),a[1]-n*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:gu})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class $$e extends bu{constructor(e){e=e||{},super({stopDown:Yf}),this.condition_=e.condition?e.condition:k$e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!$w(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===bT)return;const n=t.getSize(),s=e.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return $w(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return $w(e)&&Yme(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class B$e extends sy{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+r,n.top=Math.min(e[1],t[1])+r,n.width=Math.abs(t[0]-e[0])+r,n.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new tr([n])}getGeometry(){return this.geometry_}}const D0={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Bw extends Dn{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class j$e extends bu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new B$e(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Yme,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const n=r[0]-t[0],s=r[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Bw(D0.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Bw(t?D0.BOXEND:D0.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bw(D0.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class z$e extends j$e{constructor(e){e=e||{};const t=e.condition?e.condition:Xme;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(n),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;n=n.clone(),n.scale(a*a)}r.fitInternal(n,{duration:this.duration_,easing:gu})}}const G$e=z$e,_h={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class U$e extends gy{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return WT(t)&&Zme(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ie.KEYDOWN){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==_h.DOWN||n==_h.LEFT||n==_h.RIGHT||n==_h.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;n==_h.DOWN?c=-a:n==_h.LEFT?l=-a:n==_h.RIGHT?l=a:c=a;const h=[l,c];pT(h,o.getRotation()),R$e(o,h,this.duration_),r.preventDefault(),t=!0}}return!t}}class V$e extends gy{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!N$e(t)&&Zme(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ie.KEYDOWN||e.type==Ie.KEYPRESS){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,o=n==="+"?this.delta_:-this.delta_,a=s.getView();qT(a,o,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const q$e=V$e;class H$e{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const n=this.points_[t+2]-this.points_[r+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class vv extends gy{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:_v;this.condition_=e.onFocusOnly?AS(Wme,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Ie.WHEEL)return!0;const r=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==Ie.WHEEL&&(s=n.deltaY,u3e&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Tme),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-tt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),qT(t,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class W$e extends bu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Yf),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==bT&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(HT(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Y$e extends bu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Yf),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],n=this.targetPointers[1],s=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(HT(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const X$e=Y$e;function Z$e(i){i=i||{};const e=new gn,t=new H$e(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new $$e),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new I$e({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new Fg({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new W$e),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new X$e({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new U$e),e.push(new q$e({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new vv({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new G$e({duration:i.zoomDuration})),e}function Jme(i){if(i instanceof yu){i.setMapInternal(null);return}i instanceof Os&&i.getLayers().forEach(Jme)}function Qme(i,e){if(i instanceof yu){i.setMapInternal(e);return}if(i instanceof Os){const t=i.getLayers().getArray();for(let r=0,n=t.length;r<n;++r)Qme(t[r],e)}}let eye=class extends so{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=K$e(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Tme,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Vi(),this.pixelToCoordinateTransform_=Vi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Hme(),this.interactions=t.interactions||Z$e({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Gme(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(nr.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(nr.VIEW,this.handleViewChanged_),this.addChangeListener(nr.SIZE,this.handleSizeChanged_),this.addChangeListener(nr.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof qs)&&e.view.then(function(n){r.setView(new qs(n))}),this.controls.addEventListener(dn.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(dn.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(dn.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(dn.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(dn.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(dn.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Qme(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:ff,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(n){r.push(n)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(n){n instanceof Os?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:ff,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=r.width/n[0],o=r.height/n[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(nr.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return eu(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ci(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(nr.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof gn){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ki(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ci(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(nr.SIZE)}getView(){return this.get(nr.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,n){return C$e(this.frameState_,e,t,r,n)}handleBrowserEvent(e,t){t=t||e.type;const r=new za(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===ta.POINTERDOWN||r===Ie.WHEEL||r===Ie.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===n?n.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const o=e.viewHints;if(o[ci.ANIMATING]||o[ci.INTERACTING]){const a=Date.now()-e.time>8;n=a?0:8,s=a?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(vr.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(vr.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new md(Qo.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new md(Qo.LOADSTART,this,e))));const r=this.postRenderFunctions_;for(let n=0,s=r.length;n<s;++n)r[n](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)Xt(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ie.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ie.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,uv(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new w$e(this)),this.mapBrowserEventHandler_=new E$e(this,this.moveTolerance_);for(const s in Dt)this.mapBrowserEventHandler_.addEventListener(Dt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ie.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ie.WHEEL,this.boundHandleBrowserEvent_,Mme?{passive:!1}:!1);const r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[lt(r,Ie.KEYDOWN,this.handleBrowserEvent,this),lt(r,Ie.KEYPRESS,this.handleBrowserEvent,this)];const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Xt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Xt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=lt(e,Jh.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=lt(e,Ie.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Kl("addlayer",e)),this.layerGroupPropertyListenerKeys_=[lt(e,Jh.PROPERTYCHANGE,this.render,this),lt(e,Ie.CHANGE,this.render,this),lt(e,"addlayer",this.handleLayerAdd_,this),lt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Jme(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&ule(t)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:fm(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Ae(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=fm(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!Aa(this.previousExtent_)&&!io(s.extent,this.previousExtent_))&&(this.dispatchEvent(new md(Qo.MOVESTART,this,n)),this.previousExtent_=Jf(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ci.ANIMATING]&&!s.viewHints[ci.INTERACTING]&&!io(s.extent,this.previousExtent_)&&(this.dispatchEvent(new md(Qo.MOVEEND,this,s)),Jge(s.extent,this.previousExtent_))),this.dispatchEvent(new md(Qo.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Qo.LOADSTART)||this.hasListener(Qo.LOADEND)||this.hasListener(vr.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Kl("removelayer",t)),this.set(nr.LAYERGROUP,e)}setSize(e){this.set(nr.SIZE,e)}setTarget(e){this.set(nr.TARGET,e)}setView(e){if(!e||e instanceof qs){this.set(nr.VIEW,e);return}this.set(nr.VIEW,new qs);const t=this;e.then(function(r){t.setView(new qs(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const n=getComputedStyle(e),s=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!ule(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&ame("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Ta(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function K$e(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},r=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Os({layers:i.layers});t[nr.LAYERGROUP]=r,t[nr.TARGET]=i.target,t[nr.VIEW]=i.view instanceof qs?i.view:new qs;let n;i.controls!==void 0&&(Array.isArray(i.controls)?n=new gn(i.controls.slice()):(pt(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new gn(i.interactions.slice()):(pt(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new gn(i.overlays.slice()):(pt(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new gn,{controls:n,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const J$e=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}',Q$e=".geolocation{top:65px;left:.5em}.ol-touch .geolocation{top:80px}";class mi extends so{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new mi(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Xt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=lt(e,Ie.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?eBe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function eBe(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(pt(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}class cx extends ba{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){const e=new cx(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<n){if(l===0)for(let c=0;c<this.stride;++c)r[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=s[0]+c*o,r[1]=s[1]+c*a;for(let h=2;h<this.stride;++h)r[h]=s[h]}return r.length=this.stride,l}return n}containsXY(e,t){const r=this.flatCoordinates,n=e-r[0],s=t-r[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,r=t[this.stride]-t[0];return to(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(gi(e,t)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:hT(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+r;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=ume(n,0,e,this.stride);n[s++]=n[0]+t;for(let o=1,a=this.stride;o<a;++o)n[s++]=n[o];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const r=this.getCenter(),n=this.getStride();this.setCenter(ST(r,0,r.length,n,e,t,r)),this.changed()}}cx.prototype.transform;class bv extends CT{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Xt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(lt(e[t],Ie.CHANGE,this.changed,this))}clone(){const e=new bv(jw(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,n){if(n<pu(this.getExtent(),e,t))return n;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)n=s[o].closestPointXY(e,t,r,n);return n}containsXY(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)if(r[n].containsXY(e,t))return!0;return!1}computeExtent(e){Jf(e);const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)Qge(e,t[r].getExtent());return e}getGeometries(){return jw(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let n=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(n=!0)}return n?new bv(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)r[n].rotate(e,t);this.changed()}scale(e,t,r){r||(r=kr(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(jw(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let n=0,s=r.length;n<s;++n)r[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function jw(i){return i.map(e=>e.clone())}const Yr=bv;function xv(i,e,t,r,n,s,o){let a,l;const c=(t-e)/r;if(c===1)a=e;else if(c===2)a=e,l=n;else if(c!==0){let h=i[e],u=i[e+1],d=0;const f=[0];for(let m=e+r;m<t;m+=r){const y=i[m],_=i[m+1];d+=Math.sqrt((y-h)*(y-h)+(_-u)*(_-u)),f.push(d),h=y,u=_}const p=n*d,g=ZFe(f,p);g<0?(l=(p-f[-g-2])/(f[-g-1]-f[-g-2]),a=e+(-g-2)*r):a=e+g*r}o=o>1?o:2,s=s||new Array(o);for(let h=0;h<o;++h)s[h]=a===void 0?NaN:l===void 0?i[a+h]:Es(i[a+h],i[a+r+h],l);return s}function MS(i,e,t,r,n,s){if(t==e)return null;let o;if(n<i[e+r-1])return s?(o=i.slice(e,e+r),o[r-1]=n,o):null;if(i[t-1]<n)return s?(o=i.slice(t-r,t),o[r-1]=n,o):null;if(n==i[e+r-1])return i.slice(e,e+r);let a=e/r,l=t/r;for(;a<l;){const d=a+l>>1;n<i[(d+1)*r-1]?l=d:a=d+1}const c=i[a*r-1];if(n==c)return i.slice((a-1)*r,(a-1)*r+r);const h=i[(a+1)*r-1],u=(n-c)/(h-c);o=[];for(let d=0;d<r-1;++d)o.push(Es(i[(a-1)*r+d],i[a*r+d],u));return o.push(n),o}function tBe(i,e,t,r,n,s,o){if(o)return MS(i,e,t[t.length-1],r,n,s);let a;if(n<i[r-1])return s?(a=i.slice(0,r),a[r-1]=n,a):null;if(i[i.length-1]<n)return s?(a=i.slice(i.length-r),a[r-1]=n,a):null;for(let l=0,c=t.length;l<c;++l){const h=t[l];if(e!=h){if(n<i[e+r-1])return null;if(n<=i[h-1])return MS(i,e,h,r,n,!1);e=h}}return null}function tye(i,e,t,r){let n=i[e],s=i[e+1],o=0;for(let a=e+r;a<t;a+=r){const l=i[a],c=i[a+1];o+=Math.sqrt((l-n)*(l-n)+(c-s)*(c-s)),n=l,s=c}return o}class Ii extends ba{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Ot(this.flatCoordinates,e),this.changed()}clone(){const e=new Ii(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<pu(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),MT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,n))}forEachSegment(e){return _me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,MS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return xv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return tye(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=ex(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ii(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return tx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hy(this.flatCoordinates,0,e,this.stride),this.changed()}}class vn extends ba{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const n=e,s=[],o=[];for(let l=0,c=n.length;l<c;++l){const h=n[l];Ot(s,h.getFlatCoordinates()),o.push(s.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Ot(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new vn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,n){return n<pu(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(AT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),RT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,n))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,tBe(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return gm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ii(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,n=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new Ii(e.slice(s,l),r);n.push(c),s=l}return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const n=this.ends_,s=this.stride;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=xv(t,r,l,s,.5);Ot(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=fme(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new vn(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return XNe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=uy(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class oo extends ba{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Ot(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new oo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,n){if(n<pu(this.getExtent(),e,t))return n;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=nl(e,t,s[a],s[a+1]);if(c<n){n=c;for(let h=0;h<o;++h)r[h]=s[a+h];r.length=o}}return n}getCoordinates(){return Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new $i(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,n=[];for(let s=0,o=e.length;s<o;s+=r){const a=new $i(e.slice(s,s+r),t);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let n=0,s=t.length;n<s;n+=r){const o=t[n],a=t[n+1];if(lT(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hy(this.flatCoordinates,0,e,this.stride),this.changed()}}function iye(i,e,t,r){const n=[];let s=_n();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=cT(i,e,l[0],r),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return n}class os extends ba{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const n=e,s=[],o=[];for(let a=0,l=n.length;a<l;++a){const c=n[a],h=s.length,u=c.getEnds();for(let d=0,f=u.length;d<f;++d)u[d]+=h;Ot(s,c.getFlatCoordinates()),o.push(u)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,r=o}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Ot(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const r=new os(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,n){return n<pu(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GNe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),UNe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,n))}containsXY(e,t){return YNe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return HNe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),bS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,vS(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=iye(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=yme(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new oo(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;xme(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=bS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=qNe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new os(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),n=r[r.length-1];if(t!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=t;return new tr(this.flatCoordinates.slice(t,n),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,n=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(s!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=s;const h=new tr(t.slice(s,c),e,l);n.push(h),s=c}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return ZNe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=dme(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const n=r[r.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const Tle=Vi();class un{constructor(e,t,r,n,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Hd(this.flatCoordinates_):cT(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=kr(this.getExtent());this.flatInteriorPoints_=PT(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=wme(this.flatCoordinates_,this.ends_),t=iye(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=yme(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=xv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let n=0,s=r.length;n<s;++n){const o=r[n],a=xv(e,t,o,2,.5);Ot(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=xe(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const n=fi(r)/fi(t);Pn(Tle,r[0],r[3],n,-n,0,0,0),pc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Tle,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new un(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Wge((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":r.length=ex(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=fme(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,n);break;case"Polygon":n=[],r.length=LT(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,n);break}return n&&(this.simplifiedGeometry_=new un(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}un.prototype.getFlatCoordinates=un.prototype.getOrientedFlatCoordinates;class iBe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=mi,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?xe(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=xe(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ze()}readFeature(e,t){return ze()}readFeatures(e,t){return ze()}readGeometry(e,t){return ze()}readProjection(e){return ze()}writeFeature(e,t){return ze()}writeFeatures(e,t){return ze()}writeGeometry(e,t){return ze()}}const my=iBe;function Pi(i,e,t){const r=t?xe(t.featureProjection):null,n=t?xe(t.dataProjection):null;let s=i;if(r&&n&&!qr(r,n)){e&&(s=i.clone());const o=e?r:n,a=e?n:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(va(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}function YT(i,e){const t=e?xe(e.featureProjection):null,r=e?xe(e.dataProjection):null;return t&&r&&!qr(t,r)?yT(i,r,t):i}const rBe={Point:$i,LineString:Ii,Polygon:tr,MultiPoint:oo,MultiLineString:vn,MultiPolygon:os};function nBe(i,e,t){return Array.isArray(e[0])?(xme(i,0,e,t)||(i=i.slice(),bS(i,0,e,t)),i):(kT(i,0,e,t)||(i=i.slice(),cv(i,0,e,t)),i)}function rye(i,e){var s;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>rye({...i,geometry:o})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const n=t.layout.length;return Pi(new un(r,r==="Polygon"?nBe(t.flatCoordinates,t.ends,n):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),n,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function XT(i,e){if(!i)return null;if(Array.isArray(i)){const r=i.map(n=>XT(n,e));return new Yr(r)}const t=rBe[i.type];return Pi(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}class ZT extends my{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(F0(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(F0(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ze()}readFeaturesFromObject(e,t){return ze()}readGeometry(e,t){return this.readGeometryFromObject(F0(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ze()}readProjection(e){return this.readProjectionFromObject(F0(e))}readProjectionFromObject(e){return ze()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ze()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ze()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ze()}}function F0(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}const sBe={Point:cBe,LineString:hBe,Polygon:pBe,MultiPoint:dBe,MultiLineString:uBe,MultiPolygon:fBe},oBe={Point:gBe,LineString:mBe,Polygon:yBe,MultiPoint:vBe,MultiLineString:_Be,MultiPolygon:bBe};class aBe extends ZT{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,r){const n=e,s=Ale(n.geometry,t),o=new mi;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),n.attributes){o.setProperties(n.attributes,!0);const a=n.attributes[r];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,t){if(t=t||{},e.features){const r=e,n=[],s=r.features;for(let o=0,a=s.length;o<a;++o)n.push(this.readFeatureFromObject(s[o],t,e.objectIdFieldName));return n}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return Ale(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const r=e.spatialReference.wkid;return xe("EPSG:"+r)}return null}writeGeometryObject(e,t){return Mle(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={};if(!e.hasProperties())return r.attributes={},r;const n=e.getProperties(),s=e.getGeometry();if(s){r.geometry=Mle(s,t);const o=t&&(t.dataProjection||t.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(xe(o).getCode().split(":").pop())}),delete n[e.getGeometryName()]}return gl(n)?r.attributes={}:r.attributes=n,r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let n=0,s=e.length;n<s;++n)r.push(this.writeFeatureObject(e[n],t));return{features:r}}}function Ale(i,e){if(!i)return null;let t;if(typeof i.x=="number"&&typeof i.y=="number")t="Point";else if(i.points)t="MultiPoint";else if(i.paths)i.paths.length===1?t="LineString":t="MultiLineString";else if(i.rings){const n=i,s=sp(n),o=lBe(n.rings,s);o.length===1?(t="Polygon",i=Object.assign({},i,{rings:o[0]})):(t="MultiPolygon",i=Object.assign({},i,{rings:o}))}const r=sBe[t];return Pi(r(i),!1,e)}function lBe(i,e){const t=[],r=[],n=[];let s,o;for(s=0,o=i.length;s<o;++s)t.length=0,hy(t,0,i[s],e.length),ix(t,0,t.length,e.length)?r.push([i[s]]):n.push(i[s]);for(;n.length;){const a=n.shift();let l=!1;for(s=r.length-1;s>=0;s--){const c=r[s][0];if(Hr(new Ec(c).getExtent(),new Ec(a).getExtent())){r[s].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function cBe(i){let e;return i.m!==void 0&&i.z!==void 0?e=new $i([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?e=new $i([i.x,i.y,i.z],"XYZ"):i.m!==void 0?e=new $i([i.x,i.y,i.m],"XYM"):e=new $i([i.x,i.y]),e}function hBe(i){const e=sp(i);return new Ii(i.paths[0],e)}function uBe(i){const e=sp(i);return new vn(i.paths,e)}function sp(i){let e="XY";return i.hasZ===!0&&i.hasM===!0?e="XYZM":i.hasZ===!0?e="XYZ":i.hasM===!0&&(e="XYM"),e}function dBe(i){const e=sp(i);return new oo(i.points,e)}function fBe(i){const e=sp(i);return new os(i.rings,e)}function pBe(i){const e=sp(i);return new tr(i.rings,e)}function gBe(i,e){const t=i.getCoordinates();let r;const n=i.getLayout();if(n==="XYZ")r={x:t[0],y:t[1],z:t[2]};else if(n==="XYM")r={x:t[0],y:t[1],m:t[2]};else if(n==="XYZM")r={x:t[0],y:t[1],z:t[2],m:t[3]};else if(n==="XY")r={x:t[0],y:t[1]};else throw new Error("Invalid geometry layout");return r}function yy(i){const e=i.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function mBe(i,e){const t=yy(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:[i.getCoordinates()]}}function yBe(i,e){const t=yy(i);return{hasZ:t.hasZ,hasM:t.hasM,rings:i.getCoordinates(!1)}}function _Be(i,e){const t=yy(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:i.getCoordinates()}}function vBe(i,e){const t=yy(i);return{hasZ:t.hasZ,hasM:t.hasM,points:i.getCoordinates()}}function bBe(i,e){const t=yy(i),r=i.getCoordinates(!1),n=[];for(let s=0;s<r.length;s++)for(let o=r[s].length-1;o>=0;o--)n.push(r[s][o]);return{hasZ:t.hasZ,hasM:t.hasM,rings:n}}function Mle(i,e){const t=oBe[i.getType()];return t(Pi(i,!0,e),e)}const xBe=aBe;class op extends ZT{constructor(e){e=e||{},super(),this.dataProjection=xe(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=xe(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const n=KT(r.geometry);if(this.featureClass===un)return rye({geometry:n,id:r.id,properties:r.properties},t);const s=new mi;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(XT(n,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let n=null;if(r.type==="FeatureCollection"){const s=e;n=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],t);c&&n.push(c)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return wBe(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=xe(t.properties.name);else if(t.type==="EPSG")r=xe("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(r.id=n),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=RS(o,t),delete s[e.getGeometryName()]),gl(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let n=0,s=e.length;n<s;++n)r.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return RS(e,this.adaptOptions(t))}}function KT(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=SBe(i);break}case"LineString":{t=CBe(i);break}case"Polygon":{t=RBe(i);break}case"MultiPoint":{t=ABe(i);break}case"MultiLineString":{t=TBe(i);break}case"MultiPolygon":{t=MBe(i);break}case"GeometryCollection":{t=EBe(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function wBe(i,e){const t=KT(i);return XT(t,e)}function EBe(i,e){return i.geometries.map(function(r){return KT(r)})}function SBe(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:mu(e.length)}}function CBe(i){var r;const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:mu(((r=e[0])==null?void 0:r.length)||2)}}function TBe(i){var s,o;const e=i.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,r=[],n=uy(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:n,layout:mu(t)}}function ABe(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:mu(((t=e[0])==null?void 0:t.length)||2)}}function MBe(i){var s,o;const e=i.coordinates,t=[],r=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,n=dme(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:mu(r)}}function RBe(i){var s,o;const e=i.coordinates,t=[],r=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,n=uy(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:n,layout:mu(r)}}function RS(i,e){i=Pi(i,!0,e);const t=i.getType();let r;switch(t){case"Point":{r=DBe(i);break}case"LineString":{r=IBe(i);break}case"Polygon":{r=FBe(i,e);break}case"MultiPoint":{r=kBe(i);break}case"MultiLineString":{r=PBe(i);break}case"MultiPolygon":{r=OBe(i,e);break}case"GeometryCollection":{r=LBe(i,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function LBe(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(r){return RS(r,e)})}}function IBe(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function PBe(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function kBe(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function OBe(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function DBe(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function FBe(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const ru="http://www.w3.org/2001/XMLSchema-instance";function ot(i,e){return ap().createElementNS(i,e)}function kn(i,e){return nye(i,e,[]).join("")}function nye(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{let r;for(r=i.firstChild;r;r=r.nextSibling)nye(r,e,t)}return t}function Xs(i){return"documentElement"in i}function NBe(i,e,t){return i.getAttributeNS(e,t)||""}function Zs(i){return new DOMParser().parseFromString(i,"application/xml")}function wv(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);if(n!==void 0){const s=r[r.length-1];Ot(s,n)}}}function Fe(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);n!==void 0&&r[r.length-1].push(n)}}function Ve(i,e){return function(t,r){const n=i.call(e!==void 0?e:this,t,r);n!==void 0&&(r[r.length-1]=n)}}function _i(i,e,t){return function(r,n){const s=i.call(t!==void 0?t:this,r,n);if(s!==void 0){const o=n[n.length-1],a=e!==void 0?e:r.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function G(i,e,t){return function(r,n){const s=i.call(t!==void 0?t:this,r,n);if(s!==void 0){const o=n[n.length-1],a=e!==void 0?e:r.localName;o[a]=s}}}function q(i,e){return function(t,r,n){i.call(e!==void 0?e:this,t,r,n),n[n.length-1].node.appendChild(t)}}function sye(i,e){let t,r;return function(n,s,o){if(t===void 0){t={};const a={};a[n.localName]=i,t[n.namespaceURI]=a,r=Hi(n.localName)}oye(t,r,s,o)}}function Hi(i,e){return function(t,r,n){const o=r[r.length-1].node;let a=i;a===void 0&&(a=n);const l=e!==void 0?e:o.namespaceURI;return ot(l,a)}}const Or=Hi();function as(i,e){const t=e.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=i[e[n]];return r}function re(i,e,t){t=t!==void 0?t:{};let r,n;for(r=0,n=i.length;r<n;++r)t[i[r]]=e;return t}function ns(i,e,t,r){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=i[n.namespaceURI];if(s!==void 0){const o=s[n.localName];o!==void 0&&o.call(r,n,t)}}}function ce(i,e,t,r,n){return r.push(i),ns(e,t,r,n),r.pop()}function oye(i,e,t,r,n,s){const o=(n!==void 0?n:t).length;let a,l;for(let c=0;c<o;++c)a=t[c],a!==void 0&&(l=e.call(s!==void 0?s:this,a,r,n!==void 0?n[c]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(s,l,a,r))}function it(i,e,t,r,n,s,o){return n.push(i),oye(e,t,r,n,s,o),n.pop()}let zw;function $Be(){return zw===void 0&&typeof XMLSerializer<"u"&&(zw=new XMLSerializer),zw}let Gw;function ap(){return Gw===void 0&&typeof document<"u"&&(Gw=document.implementation.createDocument("","",null)),Gw}class _y extends my{constructor(){super(),this.xmlSerializer_=$Be()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=Zs(e);return this.readFeatureFromDocument(r,t)}return Xs(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=Zs(e);return this.readFeaturesFromDocument(r,t)}return Xs(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Ot(r,this.readFeaturesFromNode(n,t));return r}readFeaturesFromNode(e,t){return ze()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=Zs(e);return this.readGeometryFromDocument(r,t)}return Xs(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Zs(e);return this.readProjectionFromDocument(t)}return Xs(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}const al="http://www.opengis.net/gml",BBe=/^\s*$/;class De extends _y{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Fe(this.readFeaturesInternal),featureMembers:Ve(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,t){const r=e.localName;let n=null;if(r=="FeatureCollection")n=ce([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=t[0];let o=s.featureType,a=s.featureNS;const l="p",c="p0";if(!o&&e.childNodes){o=[],a={};for(let d=0,f=e.childNodes.length;d<f;++d){const p=e.childNodes[d];if(p.nodeType===1){const g=p.nodeName.split(":").pop();if(!o.includes(g)){let m="",y=0;const _=p.namespaceURI;for(const v in a){if(a[v]===_){m=v;break}++y}m||(m=l+y,a[m]=_),o.push(m+":"+g)}}}r!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[c]=d}const h={},u=Array.isArray(o)?o:[o];for(const d in a){const f={};for(let p=0,g=u.length;p<g;++p)(u[p].includes(":")?u[p].split(":")[0]:c)===d&&(f[u[p].split(":").pop()]=r=="featureMembers"?Fe(this.readFeatureElement,this):Ve(this.readFeatureElement,this));h[a[d]]=f}r=="featureMember"||r=="member"?n=ce(void 0,h,e,t):n=ce([],h,e,t)}return n===null&&(n=[]),n}readGeometryOrExtent(e,t){const r=t[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),ce(null,this.GEOMETRY_PARSERS,e,t,this)}readExtentElement(e,t){const r=t[0],n=this.readGeometryOrExtent(e,t);return n?YT(n,r):void 0}readGeometryElement(e,t){const r=t[0],n=this.readGeometryOrExtent(e,t);return n?Pi(n,!1,r):void 0}readFeatureElementInternal(e,t,r){let n;const s={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let c;const h=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(c=kn(l,!1),BBe.test(c)&&(c=void 0)):(r&&(c=h==="boundedBy"?this.readExtentElement(l,t):this.readGeometryElement(l,t)),c?h!=="boundedBy"&&(n=h):c=this.readFeatureElementInternal(l,t,!1));const u=l.attributes.length;if(u>0&&!(c instanceof CT)){c={_content_:c};for(let d=0;d<u;d++){const f=l.attributes[d].name;c[f]=l.attributes[d].value}}s[h]?(s[h]instanceof Array||(s[h]=[s[h]]),s[h].push(c)):s[h]=c}if(!r)return s;const o=new mi(s);n&&o.setGeometryName(n);const a=e.getAttribute("fid")||NBe(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,t){return this.readFeatureElementInternal(e,t,!0)}readPoint(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new $i(r,"XYZ")}readMultiPoint(e,t){const r=ce([],this.MULTIPOINT_PARSERS,e,t,this);if(r)return new oo(r)}readMultiLineString(e,t){const r=ce([],this.MULTILINESTRING_PARSERS,e,t,this);if(r)return new vn(r)}readMultiPolygon(e,t){const r=ce([],this.MULTIPOLYGON_PARSERS,e,t,this);if(r)return new os(r)}pointMemberParser(e,t){ns(this.POINTMEMBER_PARSERS,e,t,this)}lineStringMemberParser(e,t){ns(this.LINESTRINGMEMBER_PARSERS,e,t,this)}polygonMemberParser(e,t){ns(this.POLYGONMEMBER_PARSERS,e,t,this)}readLineString(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Ii(r,"XYZ")}readFlatLinearRing(e,t){const r=ce(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(r)return r}readLinearRing(e,t){const r=this.readFlatCoordinatesFromNode(e,t);if(r)return new Ec(r,"XYZ")}readPolygon(e,t){const r=ce([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(r&&r[0]){const n=r[0],s=[n.length];let o,a;for(o=1,a=r.length;o<a;++o)Ot(n,r[o]),s.push(n.length);return new tr(n,"XYZ",s)}}readFlatCoordinatesFromNode(e,t){return ce(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}readGeometryFromNode(e,t){const r=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return r||null}readFeaturesFromNode(e,t){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return xe(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}De.prototype.namespace=al;De.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};De.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};De.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};De.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Fe(De.prototype.pointMemberParser),pointMembers:Fe(De.prototype.pointMemberParser)}};De.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Fe(De.prototype.lineStringMemberParser),lineStringMembers:Fe(De.prototype.lineStringMemberParser)}};De.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Fe(De.prototype.polygonMemberParser),polygonMembers:Fe(De.prototype.polygonMemberParser)}};De.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Fe(De.prototype.readFlatCoordinatesFromNode)}};De.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Fe(De.prototype.readLineString)}};De.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Fe(De.prototype.readPolygon)}};De.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Ve(De.prototype.readFlatLinearRing)}};function Cc(i){const e=kn(i,!1);return Gh(e)}function Gh(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return e[1]!==void 0||!1}function hx(i){const e=kn(i,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function At(i){const e=kn(i,!1);return qa(e)}function qa(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function Ji(i){const e=kn(i,!1);return el(e)}function el(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function de(i){return kn(i,!1).trim()}function Tf(i,e){Ze(i,e?"1":"0")}function jBe(i,e){i.appendChild(ap().createCDATASection(e))}function zBe(i,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Mh(t.getUTCMonth()+1,2)+"-"+Mh(t.getUTCDate(),2)+"T"+Mh(t.getUTCHours(),2)+":"+Mh(t.getUTCMinutes(),2)+":"+Mh(t.getUTCSeconds(),2)+"Z";i.appendChild(ap().createTextNode(r))}function Wn(i,e){const t=e.toPrecision();i.appendChild(ap().createTextNode(t))}function Ev(i,e){const t=e.toString();i.appendChild(ap().createTextNode(t))}function Ze(i,e){i.appendChild(ap().createTextNode(e))}const GBe=al+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",UBe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Ct extends De{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[al].featureMember=Fe(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:GBe}readFlatCoordinates(e,t){const r=kn(e,!1).replace(/^\s*|\s*$/g,""),s=t[0].srsName;let o="enu";if(s){const c=xe(s);c&&(o=c.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let c=0,h=a.length;c<h;c++){const u=a[c].split(/,+/),d=parseFloat(u[0]),f=parseFloat(u[1]),p=u.length===3?parseFloat(u[2]):0;o.substr(0,2)==="en"?l.push(d,f,p):l.push(f,d,p)}return l}readBox(e,t){const r=ce([null],this.BOX_PARSERS_,e,t,this);return to(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,t){const r=ce(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}outerBoundaryIsParser(e,t){const r=ce(void 0,this.RING_PARSERS,e,t,this);if(r){const n=t[t.length-1];n[0]=r}}GEOMETRY_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),ot("http://www.opengis.net/gml",r)}writeFeatureElement(e,t,r){const n=t.getId();n&&e.setAttribute("fid",n);const s=r[r.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],c=[];if(t.hasProperties()){const u=t.getProperties();for(const d in u){const f=u[d];f!==null&&(l.push(d),c.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=q(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=q(Ze)))}}const h=Object.assign({},s);h.node=e,it(h,s.serializers,Hi(void 0,o),c,r,l)}writeCurveOrLineString(e,t,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,r)}else if(e.nodeName==="Curve"){const o=ot(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,r)}}writeLineStringOrCurveMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}writeMultiCurveOrLineString(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();it({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(e,t,r){const n=r[r.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=YT(t,n):o=Pi(t,!0,n),it(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(e){const t=ot(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}writeCoordinates_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=t.getCoordinates(),l=a.length,c=new Array(l);for(let h=0;h<l;++h){const u=a[h];c[h]=this.getCoords_(u,o,s)}Ze(e,c.join(" "))}writeCurveSegments_(e,t,r){const n=ot(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}writeSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();it({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=ot(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,r)}}RING_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),ot(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,t,r){const n=ot(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}writeRing(e,t,r){const n=ot(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}getCoords_(e,t,r){let n="enu";t&&(n=xe(t).getAxisOrientation());let s=n.substr(0,2)==="en"?e[0]+","+e[1]:e[1]+","+e[0];if(r){const o=e[2]||0;s+=","+o}return s}writePoint(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=t.getCoordinates(),c=this.getCoords_(l,o,s);Ze(a,c)}writeMultiPoint(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);const a=t.getPoints();it({node:e,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,Hi("pointMember"),a,r,void 0,this)}writePointMember(e,t,r){const n=ot(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}writeLinearRing(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,r)}writeMultiSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();it({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}writeEnvelope(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];it({node:e},this.ENVELOPE_SERIALIZERS,Or,a,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const n=t[t.length-1].node;return ot("http://www.opengis.net/gml",UBe[n.nodeName])}}Ct.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Ve(Ct.prototype.readFlatCoordinates)}};Ct.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Ct.prototype.innerBoundaryIsParser,outerBoundaryIs:Ct.prototype.outerBoundaryIsParser}};Ct.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Fe(Ct.prototype.readFlatCoordinates)}};Ct.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Ve(De.prototype.readPoint),MultiPoint:Ve(De.prototype.readMultiPoint),LineString:Ve(De.prototype.readLineString),MultiLineString:Ve(De.prototype.readMultiLineString),LinearRing:Ve(De.prototype.readLinearRing),Polygon:Ve(De.prototype.readPolygon),MultiPolygon:Ve(De.prototype.readMultiPolygon),Box:Ve(Ct.prototype.readBox)}};Ct.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:q(Ct.prototype.writeCurveOrLineString),MultiCurve:q(Ct.prototype.writeMultiCurveOrLineString),Point:q(Ct.prototype.writePoint),MultiPoint:q(Ct.prototype.writeMultiPoint),LineString:q(Ct.prototype.writeCurveOrLineString),MultiLineString:q(Ct.prototype.writeMultiCurveOrLineString),LinearRing:q(Ct.prototype.writeLinearRing),Polygon:q(Ct.prototype.writeSurfaceOrPolygon),MultiPolygon:q(Ct.prototype.writeMultiSurfaceOrPolygon),Surface:q(Ct.prototype.writeSurfaceOrPolygon),MultiSurface:q(Ct.prototype.writeMultiSurfaceOrPolygon),Envelope:q(Ct.prototype.writeEnvelope)}};Ct.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:q(Ct.prototype.writeLineStringOrCurveMember),curveMember:q(Ct.prototype.writeLineStringOrCurveMember)}};Ct.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:q(Ct.prototype.writeRing),innerBoundaryIs:q(Ct.prototype.writeRing)}};Ct.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:q(Ct.prototype.writePointMember)}};Ct.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:q(Ct.prototype.writeSurfaceOrPolygonMember),polygonMember:q(Ct.prototype.writeSurfaceOrPolygonMember)}};Ct.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:q(Ze),upperCorner:q(Ze)}};const VBe=al+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",qBe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Ne extends De{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:VBe,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,t){const r=ce([],this.MULTICURVE_PARSERS,e,t,this);if(r)return new vn(r)}readFlatCurveRing(e,t){const r=ce([],this.MULTICURVE_PARSERS,e,t,this),n=[];for(let s=0,o=r.length;s<o;++s)Ot(n,r[s].getFlatCoordinates());return n}readMultiSurface(e,t){const r=ce([],this.MULTISURFACE_PARSERS,e,t,this);if(r)return new os(r)}curveMemberParser(e,t){ns(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){ns(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return ce([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return ce([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return ce([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return ce([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){const r=ce(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}exteriorParser(e,t){const r=ce(void 0,this.RING_PARSERS,e,t,this);if(r){const n=t[t.length-1];n[0]=r}}readSurface(e,t){const r=ce([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){const n=r[0],s=[n.length];let o,a;for(o=1,a=r.length;o<a;++o)Ot(n,r[o]),s.push(n.length);return new tr(n,"XYZ",s)}}readCurve(e,t){const r=ce([null],this.CURVE_PARSERS,e,t,this);if(r)return new Ii(r,"XYZ")}readEnvelope(e,t){const r=ce([null],this.ENVELOPE_PARSERS,e,t,this);return to(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,t){let r=kn(e,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=n.exec(r);)s.push(parseFloat(o[1])),r=r.substr(o[0].length);if(r!=="")return;const l=t[0].srsName;let c="enu";if(l&&(c=xe(l).getAxisOrientation()),c==="neu"){let u,d;for(u=0,d=s.length;u<d;u+=3){const f=s[u],p=s[u+1];s[u]=p,s[u+1]=f}}const h=s.length;if(h==2&&s.push(0),h!==0)return s}readFlatPosList(e,t){const r=kn(e,!1).replace(/^\s*|\s*$/g,""),n=t[0],s=n.srsName,o=n.srsDimension;let a="enu";s&&(a=xe(s).getAxisOrientation());const l=r.split(/\s+/);let c=2;e.getAttribute("srsDimension")?c=el(e.getAttribute("srsDimension")):e.getAttribute("dimension")?c=el(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?c=el(e.parentNode.getAttribute("srsDimension")):o&&(c=el(o));let h,u,d;const f=[];for(let p=0,g=l.length;p<g;p+=c)h=parseFloat(l[p]),u=parseFloat(l[p+1]),d=c===3?parseFloat(l[p+2]):0,a.substr(0,2)==="en"?f.push(h,u,d):f.push(u,h,d);return f}writePos_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName;let l="enu";a&&(l=xe(a).getAxisOrientation());const c=t.getCoordinates();let h;if(l.substr(0,2)==="en"?h=c[0]+" "+c[1]:h=c[1]+" "+c[0],s){const u=c[2]||0;h+=" "+u}Ze(e,h)}getCoords_(e,t,r){let n="enu";t&&(n=xe(t).getAxisOrientation());let s=n.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){const o=e[2]||0;s+=" "+o}return s}writePosList_(e,t,r){const n=r[r.length-1],s=n.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=n.srsName,l=t.getCoordinates(),c=l.length,h=new Array(c);let u;for(let d=0;d<c;++d)u=l[d],h[d]=this.getCoords_(u,a,s);Ze(e,h.join(" "))}writePoint(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=ot(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,t,r)}writeEnvelope(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];it({node:e},this.ENVELOPE_SERIALIZERS,Or,a,r,o,this)}writeLinearRing(e,t,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=ot(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,r)}RING_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.node,o=n.exteriorWritten;return o===void 0&&(n.exteriorWritten=!0),ot(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();it({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=ot(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,r)}}writeCurveOrLineString(e,t,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=ot(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,r)}else if(e.nodeName==="Curve"){const o=ot(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,r)}}writeMultiSurfaceOrPolygon(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();it({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(e,t,r){const n=r[r.length-1],s=n.srsName,o=n.hasZ;s&&e.setAttribute("srsName",s);const a=t.getPoints();it({node:e,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,Hi("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(e,t,r){const n=r[r.length-1],s=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();it({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(e,t,r){const n=ot(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}writeSurfaceOrPolygonMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}writePointMember(e,t,r){const n=ot(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}writeLineStringOrCurveMember(e,t,r){const n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}writeSurfacePatches_(e,t,r){const n=ot(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}writeCurveSegments_(e,t,r){const n=ot(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}writeGeometryElement(e,t,r){const n=r[r.length-1],s=Object.assign({},n);s.node=e;let o;Array.isArray(t)?o=YT(t,n):o=Pi(t,!0,n),it(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(e,t,r){const n=t.getId();n&&e.setAttribute("fid",n);const s=r[r.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],c=[];if(t.hasProperties()){const u=t.getProperties();for(const d in u){const f=u[d];f!==null&&(l.push(d),c.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=q(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=q(Ze)))}}const h=Object.assign({},s);h.node=e,it(h,s.serializers,Hi(void 0,o),c,r,l)}writeFeatureMembers_(e,t,r){const n=r[r.length-1],s=n.featureType,o=n.featureNS,a={};a[o]={},a[o][s]=q(this.writeFeatureElement,this);const l=Object.assign({},n);l.node=e,it(l,a,Hi(s,o),t,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){const n=t[t.length-1].node;return ot(this.namespace,qBe[n.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,r){const n=t[t.length-1],s=n.multiSurface,o=n.surface,a=n.curve,l=n.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),ot(this.namespace,r)}writeGeometryNode(e,t){t=this.adaptOptions(t);const r=ot(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(n,t),this.writeGeometryElement(r,e,[n]),r}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ot(this.namespace,"featureMembers");r.setAttributeNS(ru,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(n,t),this.writeFeatureMembers_(r,e,[n]),r}}Ne.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Ve(Ne.prototype.readFlatPos),posList:Ve(Ne.prototype.readFlatPosList),coordinates:Ve(Ct.prototype.readFlatCoordinates)}};Ne.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Ne.prototype.interiorParser,exterior:Ne.prototype.exteriorParser}};Ne.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Ve(De.prototype.readPoint),MultiPoint:Ve(De.prototype.readMultiPoint),LineString:Ve(De.prototype.readLineString),MultiLineString:Ve(De.prototype.readMultiLineString),LinearRing:Ve(De.prototype.readLinearRing),Polygon:Ve(De.prototype.readPolygon),MultiPolygon:Ve(De.prototype.readMultiPolygon),Surface:Ve(Ne.prototype.readSurface),MultiSurface:Ve(Ne.prototype.readMultiSurface),Curve:Ve(Ne.prototype.readCurve),MultiCurve:Ve(Ne.prototype.readMultiCurve),Envelope:Ve(Ne.prototype.readEnvelope)}};Ne.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Fe(Ne.prototype.curveMemberParser),curveMembers:Fe(Ne.prototype.curveMemberParser)}};Ne.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Fe(Ne.prototype.surfaceMemberParser),surfaceMembers:Fe(Ne.prototype.surfaceMemberParser)}};Ne.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Fe(De.prototype.readLineString),Curve:Fe(Ne.prototype.readCurve)}};Ne.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Fe(De.prototype.readPolygon),Surface:Fe(Ne.prototype.readSurface)}};Ne.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Ve(Ne.prototype.readPatch)}};Ne.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Ve(Ne.prototype.readSegment)}};Ne.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Fe(Ne.prototype.readFlatPosList),upperCorner:Fe(Ne.prototype.readFlatPosList)}};Ne.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Ve(Ne.prototype.readPolygonPatch)}};Ne.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:wv(Ne.prototype.readLineStringSegment)}};De.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Ve(De.prototype.readFlatLinearRing),Ring:Ve(Ne.prototype.readFlatCurveRing)}};Ne.prototype.writeFeatures;Ne.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:q(Ne.prototype.writeRing),interior:q(Ne.prototype.writeRing)}};Ne.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:q(Ze),upperCorner:q(Ze)}};Ne.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:q(Ne.prototype.writeSurfaceOrPolygonMember),polygonMember:q(Ne.prototype.writeSurfaceOrPolygonMember)}};Ne.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:q(Ne.prototype.writePointMember)}};Ne.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:q(Ne.prototype.writeLineStringOrCurveMember),curveMember:q(Ne.prototype.writeLineStringOrCurveMember)}};Ne.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:q(Ne.prototype.writeCurveOrLineString),MultiCurve:q(Ne.prototype.writeMultiCurveOrLineString),Point:q(Ne.prototype.writePoint),MultiPoint:q(Ne.prototype.writeMultiPoint),LineString:q(Ne.prototype.writeCurveOrLineString),MultiLineString:q(Ne.prototype.writeMultiCurveOrLineString),LinearRing:q(Ne.prototype.writeLinearRing),Polygon:q(Ne.prototype.writeSurfaceOrPolygon),MultiPolygon:q(Ne.prototype.writeMultiSurfaceOrPolygon),Surface:q(Ne.prototype.writeSurfaceOrPolygon),MultiSurface:q(Ne.prototype.writeMultiSurfaceOrPolygon),Envelope:q(Ne.prototype.writeEnvelope)}};const vt=Ne,JT=vt;JT.prototype.writeFeatures;JT.prototype.writeFeaturesNode;const HBe=JT,Ri=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],WBe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",YBe={rte:aye,trk:lye,wpt:cye},XBe=re(Ri,{rte:Fe(aye),trk:Fe(lye),wpt:Fe(cye)}),ZBe=re(Ri,{text:G(de,"linkText"),type:G(de,"linkType")}),KBe=re(Ri,{name:G(de),email:S5e,link:vy}),JBe=re(Ri,{name:G(de),desc:G(de),author:G(x5e),copyright:G(w5e),link:vy,time:G(hx),keywords:G(de),bounds:E5e,extensions:ux}),QBe=re(Ri,{year:G(Ji),license:G(de)}),e5e=re(Ri,{rte:q(M5e),trk:q(R5e),wpt:q(I5e)});class t5e extends _y{constructor(e){super(),e=e||{},this.dataProjection=xe("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Zs(e)):Xs(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Ri.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Ri.includes(t.namespaceURI)&&t.localName==="metadata")return ce({},JBe,t,[]);return null}readFeatureFromNode(e,t){if(!Ri.includes(e.namespaceURI))return null;const r=YBe[e.localName];if(!r)return null;const n=r(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!Ri.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=ce([],XBe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ot("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ru),r.setAttributeNS(ru,"xsi:schemaLocation",WBe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),it({node:r},e5e,b5e,e,[t]),r}}const i5e=re(Ri,{name:G(de),cmt:G(de),desc:G(de),src:G(de),link:vy,number:G(Ji),extensions:ux,type:G(de),rtept:C5e}),r5e=re(Ri,{ele:G(At),time:G(hx)}),n5e=re(Ri,{name:G(de),cmt:G(de),desc:G(de),src:G(de),link:vy,number:G(Ji),type:G(de),extensions:ux,trkseg:A5e}),s5e=re(Ri,{trkpt:T5e}),o5e=re(Ri,{ele:G(At),time:G(hx)}),a5e=re(Ri,{ele:G(At),time:G(hx),magvar:G(At),geoidheight:G(At),name:G(de),cmt:G(de),desc:G(de),src:G(de),link:vy,sym:G(de),type:G(de),fix:G(de),sat:G(Ji),hdop:G(At),vdop:G(At),pdop:G(At),ageofdgpsdata:G(At),dgpsid:G(Ji),extensions:ux}),l5e=["text","type"],c5e=re(Ri,{text:q(Ze),type:q(Ze)}),h5e=re(Ri,["name","cmt","desc","src","link","number","type","rtept"]),u5e=re(Ri,{name:q(Ze),cmt:q(Ze),desc:q(Ze),src:q(Ze),link:q(t2),number:q(Ev),type:q(Ze),rtept:sye(q(i2))}),d5e=re(Ri,["ele","time"]),f5e=re(Ri,["name","cmt","desc","src","link","number","type","trkseg"]),p5e=re(Ri,{name:q(Ze),cmt:q(Ze),desc:q(Ze),src:q(Ze),link:q(t2),number:q(Ev),type:q(Ze),trkseg:sye(q(L5e))}),g5e=Hi("trkpt"),m5e=re(Ri,{trkpt:q(i2)}),y5e=re(Ri,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),_5e=re(Ri,{ele:q(Wn),time:q(zBe),magvar:q(Wn),geoidheight:q(Wn),name:q(Ze),cmt:q(Ze),desc:q(Ze),src:q(Ze),link:q(t2),sym:q(Ze),type:q(Ze),fix:q(Ze),sat:q(Ev),hdop:q(Wn),vdop:q(Wn),pdop:q(Wn),ageofdgpsdata:q(Wn),dgpsid:q(Ev)}),v5e={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function b5e(i,e,t){const r=i.getGeometry();if(r){const n=v5e[r.getType()];if(n){const s=e[e.length-1].node;return ot(s.namespaceURI,n)}}}function QT(i,e,t,r){return i.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(i.push(r.ele),delete r.ele,e.hasZ=!0):i.push(0),"time"in r?(i.push(r.time),delete r.time,e.hasM=!0):i.push(0),i}function e2(i,e,t){let r="XY",n=2;if(i.hasZ&&i.hasM?(r="XYZM",n=4):i.hasZ?(r="XYZ",n=3):i.hasM&&(r="XYM",n=3),n!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],i.hasZ&&(e[s*n+2]=e[s*4+2]),i.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*n}return r}function x5e(i,e){const t=ce({},KBe,i,e);if(t)return t}function w5e(i,e){const t=ce({},QBe,i,e);if(t){const r=i.getAttribute("author");return r!==null&&(t.author=r),t}}function E5e(i,e){const t=e[e.length-1],r=i.getAttribute("minlat"),n=i.getAttribute("minlon"),s=i.getAttribute("maxlat"),o=i.getAttribute("maxlon");n!==null&&r!==null&&o!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function S5e(i,e){const t=e[e.length-1],r=i.getAttribute("id"),n=i.getAttribute("domain");r!==null&&n!==null&&(t.email=`${r}@${n}`)}function vy(i,e){const t=e[e.length-1],r=i.getAttribute("href");r!==null&&(t.link=r),ns(ZBe,i,e)}function ux(i,e){const t=e[e.length-1];t.extensionsNode_=i}function C5e(i,e){const t=ce({},r5e,i,e);if(t){const r=e[e.length-1],n=r.flatCoordinates,s=r.layoutOptions;QT(n,s,i,t)}}function T5e(i,e){const t=ce({},o5e,i,e);if(t){const r=e[e.length-1],n=r.flatCoordinates,s=r.layoutOptions;QT(n,s,i,t)}}function A5e(i,e){const t=e[e.length-1];ns(s5e,i,e);const r=t.flatCoordinates;t.ends.push(r.length)}function aye(i,e){const t=e[0],r=ce({flatCoordinates:[],layoutOptions:{}},i5e,i,e);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=e2(s,n),a=new Ii(n,o);Pi(a,!1,t);const l=new mi(a);return l.setProperties(r,!0),l}function lye(i,e){const t=e[0],r=ce({flatCoordinates:[],ends:[],layoutOptions:{}},n5e,i,e);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=e2(o,n,s),l=new vn(n,a,s);Pi(l,!1,t);const c=new mi(l);return c.setProperties(r,!0),c}function cye(i,e){const t=e[0],r=ce({},a5e,i,e);if(!r)return;const n={},s=QT([],n,i,r),o=e2(n,s),a=new $i(s,o);Pi(a,!1,t);const l=new mi(a);return l.setProperties(r,!0),l}function t2(i,e,t){i.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];it({node:i},c5e,Or,s,t,l5e)}function i2(i,e,t){const r=t[t.length-1],s=r.node.namespaceURI,o=r.properties;switch(i.setAttributeNS(null,"lat",String(e[1])),i.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=i.nodeName=="rtept"?d5e[s]:y5e[s],c=as(o,l);it({node:i,properties:o},_5e,Or,c,t,l)}function M5e(i,e,t){const r=t[0],n=e.getProperties(),s={node:i};s.properties=n;const o=e.getGeometry();if(o.getType()=="LineString"){const h=Pi(o,!0,r);s.geometryLayout=h.getLayout(),n.rtept=h.getCoordinates()}const a=t[t.length-1].node,l=h5e[a.namespaceURI],c=as(n,l);it(s,u5e,Or,c,t,l)}function R5e(i,e,t){const r=t[0],n=e.getProperties(),s={node:i};s.properties=n;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const h=Pi(o,!0,r);n.trkseg=h.getLineStrings()}const a=t[t.length-1].node,l=f5e[a.namespaceURI],c=as(n,l);it(s,p5e,Or,c,t,l)}function L5e(i,e,t){const r={node:i};r.geometryLayout=e.getLayout(),r.properties={},it(r,m5e,g5e,e.getCoordinates(),t)}function I5e(i,e,t){const r=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Pi(s,!0,r);n.geometryLayout=o.getLayout(),i2(i,o.getCoordinates(),t)}}const P5e=t5e;class r2 extends my{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(N0(e),this.adaptOptions(t))}readFeatureFromText(e,t){return ze()}readFeatures(e,t){return this.readFeaturesFromText(N0(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return ze()}readGeometry(e,t){return this.readGeometryFromText(N0(e),this.adaptOptions(t))}readGeometryFromText(e,t){return ze()}readProjection(e){return this.readProjectionFromText(N0(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return ze()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return ze()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return ze()}}function N0(i){return typeof i=="string"?i:""}const k5e=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,O5e=/^H.([A-Z]{3}).*?:(.*)/,D5e=/^HFDTE(\d{2})(\d{2})(\d{2})/,F5e=/\r\n|\r|\n/;class N5e extends r2{constructor(e){super(),e=e||{},this.dataProjection=xe("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none"}readFeatureFromText(e,t){const r=this.altitudeMode_,n=e.split(F5e),s={},o=[];let a=2e3,l=0,c=1,h=-1,u,d;for(u=0,d=n.length;u<d;++u){const m=n[u];let y;if(m.charAt(0)=="B"){if(y=k5e.exec(m),y){const _=parseInt(y[1],10),v=parseInt(y[2],10),x=parseInt(y[3],10);let w=parseInt(y[4],10)+parseInt(y[5],10)/6e4;y[6]=="S"&&(w=-w);let T=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(y[9]=="W"&&(T=-T),o.push(T,w),r!="none"){let R;r=="gps"?R=parseInt(y[11],10):r=="barometric"?R=parseInt(y[12],10):R=0,o.push(R)}let A=Date.UTC(a,l,c,_,v,x);A<h&&(A=Date.UTC(a,l,c+1,_,v,x)),o.push(A/1e3),h=A}}else m.charAt(0)=="H"&&(y=D5e.exec(m),y?(c=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=O5e.exec(m),y&&(s[y[1]]=y[2].trim())))}if(o.length===0)return null;const f=r=="none"?"XYM":"XYZM",p=new Ii(o,f),g=new mi(Pi(p,!1,t));return g.setProperties(s,!0),g}readFeaturesFromText(e,t){const r=this.readFeatureFromText(e,t);return r?[r]:[]}}const $5e=N5e,gr={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},nu={};nu[gr.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};nu[gr.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};nu[gr.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};nu.none={none:{supports:[],formats:[],qualities:[]}};const B5e=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Rle=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,j5e=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function z5e(i){let e=i.getComplianceLevelSupportedFeatures();return e===void 0&&(e=nu[gr.VERSION1].level0),{url:i.imageInfo["@id"]===void 0?void 0:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,i.imageInfo.formats===void 0?[]:i.imageInfo.formats],qualities:[...e.qualities,i.imageInfo.qualities===void 0?[]:i.imageInfo.qualities],resolutions:i.imageInfo.scale_factors,tileSize:i.imageInfo.tile_width!==void 0?i.imageInfo.tile_height!==void 0?[i.imageInfo.tile_width,i.imageInfo.tile_height]:[i.imageInfo.tile_width,i.imageInfo.tile_width]:i.imageInfo.tile_height!=null?[i.imageInfo.tile_height,i.imageInfo.tile_height]:void 0}}function G5e(i){const e=i.getComplianceLevelSupportedFeatures(),t=Array.isArray(i.imageInfo.profile)&&i.imageInfo.profile.length>1,r=t&&i.imageInfo.profile[1].supports?i.imageInfo.profile[1].supports:[],n=t&&i.imageInfo.profile[1].formats?i.imageInfo.profile[1].formats:[],s=t&&i.imageInfo.profile[1].qualities?i.imageInfo.profile[1].qualities:[];return{url:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(o){return o.width})[0],i.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...e.supports,...r],formats:[...e.formats,...n],qualities:[...e.qualities,...s]}}function U5e(i){const e=i.getComplianceLevelSupportedFeatures(),t=i.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...i.imageInfo.extraFormats],r=i.imageInfo.preferredFormats!==void 0&&Array.isArray(i.imageInfo.preferredFormats)&&i.imageInfo.preferredFormats.length>0?i.imageInfo.preferredFormats.filter(function(n){return["jpg","png","gif"].includes(n)}).reduce(function(n,s){return n===void 0&&t.includes(s)?s:n},void 0):void 0;return{url:i.imageInfo.id,sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(n){return[n.width,n.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(n){return n.width})[0],i.imageInfo.tiles.map(function(n){return n.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(n){return n.scaleFactors})[0],supports:i.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...i.imageInfo.extraFeatures],formats:t,qualities:i.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...i.imageInfo.extraQualities],preferredFormat:r}}const dx={};dx[gr.VERSION1]=z5e;dx[gr.VERSION2]=G5e;dx[gr.VERSION3]=U5e;class V5e{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return gr.VERSION1;case"http://iiif.io/api/image/2/context.json":return gr.VERSION2;case"http://iiif.io/api/image/3/context.json":return gr.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(gr.VERSION1)&&this.imageInfo.identifier)return gr.VERSION1;break}pt(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case gr.VERSION1:if(B5e.test(this.imageInfo.profile))return this.imageInfo.profile;break;case gr.VERSION3:if(j5e.test(this.imageInfo.profile))return this.imageInfo.profile;break;case gr.VERSION2:if(typeof this.imageInfo.profile=="string"&&Rle.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&Rle.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const t=this.getComplianceLevelEntryFromProfile(e);if(t===void 0)return;const r=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return t===void 0?nu.none.none:nu[e][t]}getTileSourceOptions(e){const t=e||{},r=this.getImageApiVersion();if(r===void 0)return;const n=r===void 0?void 0:dx[r](this);if(n!==void 0)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:t.format!==void 0&&n.formats.includes(t.format)?t.format:n.preferredFormat!==void 0?n.preferredFormat:"jpg",supports:n.supports,quality:t.quality&&n.qualities.includes(t.quality)?t.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:n.tileSize}}}const q5e=V5e,Tl=["http://www.google.com/kml/ext/2.2"],$e=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],H5e="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Lle={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},W5e=re($e,{ExtendedData:Sye,Region:Cye,MultiGeometry:G(xye,"geometry"),LineString:G(vye,"geometry"),LinearRing:G(bye,"geometry"),Point:G(wye,"geometry"),Polygon:G(Eye,"geometry"),Style:G(o2),StyleMap:Lje,address:G(de),description:G(de),name:G(de),open:G(Cc),phoneNumber:G(de),styleUrl:G(pye),visibility:G(Cc)},re(Tl,{MultiTrack:G(yje,"geometry"),Track:G(_ye,"geometry")})),Y5e=re($e,{ExtendedData:Sye,Region:Cye,Link:Gje,address:G(de),description:G(de),name:G(de),open:G(Cc),phoneNumber:G(de),visibility:G(Cc)}),X5e=re($e,{href:G(fye)}),Z5e=re($e,{Altitude:G(At),Longitude:G(At),Latitude:G(At),Tilt:G(At),AltitudeMode:G(de),Heading:G(At),Roll:G(At)}),hye=re($e,{LatLonAltBox:Dje,Lod:Nje}),K5e=re($e,["Document","Placemark"]),J5e=re($e,{Document:q(Zje),Placemark:q(Mye)});let Wd,C_=null,LS,Ng,$g,Bg,Sv,IS=null,n2,PS=null,kS,kh=null,Ile=null,OS=null;function Cv(i){return 32/Math.min(i[0],i[1])}function Q5e(){Wd=[255,255,255,1],C_=new ss({color:Wd}),LS=[20,2],Ng="pixels",$g="pixels",Bg=[64,64],Sv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",IS=new ox({anchor:LS,anchorOrigin:"bottom-left",anchorXUnits:Ng,anchorYUnits:$g,crossOrigin:"anonymous",rotation:0,scale:Cv(Bg),size:Bg,src:Sv}),n2="NO_IMAGE",PS=new mn({color:Wd,width:1}),kS=new mn({color:[51,51,51,1],width:2}),kh=new iu({font:"bold 16px Helvetica",fill:C_,stroke:kS,scale:.8}),Ile=new qi({fill:C_,image:IS,text:kh,stroke:PS,zIndex:0}),OS=[Ile]}let $0;function eje(i){return i}class tje extends _y{constructor(e){super(),e=e||{},OS||Q5e(),this.dataProjection=xe("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:OS,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:eje,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=re($e,{Document:wv(this.readDocumentOrFolder_,this),Folder:wv(this.readDocumentOrFolder_,this),Placemark:Fe(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=ce([],r,e,t,this);if(n)return n}readPlacemark_(e,t){const r=ce({geometry:null},W5e,e,t,this);if(!r)return;const n=new mi,s=e.getAttribute("id");s!==null&&n.setId(s);const o=t[0],a=r.geometry;if(a&&Pi(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,h=rje(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(h)}return delete r.Style,n.setProperties(r,!0),n}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const n=o2.call(this,e,t);if(n){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const n=mye.call(this,e,t);if(!n)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!$e.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!$e.includes(e.namespaceURI))return[];let r;const n=e.localName;if(n=="Document"||n=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&Ot(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=Zs(e);return this.readNameFromDocument(t)}return Xs(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if($e.includes(t.namespaceURI)&&t.localName=="name")return de(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if($e.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=Zs(e);Ot(t,this.readNetworkLinksFromDocument(r))}else Xs(e)?Ot(t,this.readNetworkLinksFromDocument(e)):Ot(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Ot(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if($e.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const n=ce({},Y5e,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;$e.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Ot(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=Zs(e);Ot(t,this.readRegionFromDocument(r))}else Xs(e)?Ot(t,this.readRegionFromDocument(e)):Ot(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Ot(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if($e.includes(r.namespaceURI)&&r.localName=="Region"){const n=ce({},hye,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;$e.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Ot(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=Zs(e);Ot(t,this.readCameraFromDocument(r))}else Xs(e)?Ot(t,this.readCameraFromDocument(e)):Ot(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Ot(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if($e.includes(r.namespaceURI)&&r.localName==="Camera"){const n=ce({},Z5e,r,[]);t.push(n)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;$e.includes(r.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&Ot(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ot($e[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",Tl[0]),r.setAttributeNS(n,"xmlns:xsi",ru),r.setAttributeNS(ru,"xsi:schemaLocation",H5e);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=K5e[r.namespaceURI],l=as(o,a);return it(s,J5e,Or,l,[t],a,this),r}}function ije(i,e){const t=[0,0];let r="start";const n=i.getImage();if(n){const a=n.getSize();if(a&&a.length==2){const l=n.getScaleArray(),c=n.getAnchor();t[0]=l[0]*(a[0]-c[0]),t[1]=l[1]*(a[1]/2-c[1]),r="left"}}let s=i.getText();return s?(s=s.clone(),s.setFont(s.getFont()||kh.getFont()),s.setScale(s.getScale()||kh.getScale()),s.setFill(s.getFill()||kh.getFill()),s.setStroke(s.getStroke()||kS)):s=kh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new qi({image:n,text:s})}function rje(i,e,t,r,n){return function(s,o){let a=n,l="",c=[];if(a){const u=s.getGeometry();if(u)if(u instanceof Yr)c=u.getGeometriesArrayRecursive().filter(function(d){const f=d.getType();return f==="Point"||f==="MultiPoint"}),a=c.length>0;else{const d=u.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&($0||($0=document.createElement("textarea")),$0.innerHTML=l,l=$0.value));let h=t;if(i?h=i:e&&(h=uye(e,t,r)),a){const u=ije(h[0],l);if(c.length>0){u.setGeometry(new Yr(c));const d=new qi({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[u,d].concat(h.slice(1))}return u}return h}}function uye(i,e,t){return Array.isArray(i)?i:typeof i=="string"?uye(t[i],e,t):e}function fx(i){const e=kn(i,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function dye(i){let e=kn(i,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=r.exec(e);){const s=parseFloat(n[1]),o=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;t.push(s,o,a),e=e.substr(n[0].length)}if(e==="")return t}function fye(i){const e=kn(i,!1).trim();let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function pye(i){const e=kn(i,!1).trim().replace(/^(?!.*#)/,"#");let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function nje(i){const e=i.getAttribute("xunits"),t=i.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(i.getAttribute("x")),xunits:Lle[e],y:parseFloat(i.getAttribute("y")),yunits:Lle[t],origin:r}}function gye(i){return At(i)}const sje=re($e,{Pair:Rje});function mye(i,e){return ce(void 0,sje,i,e,this)}const oje=re($e,{Icon:G(bje),color:G(fx),heading:G(At),hotSpot:G(nje),scale:G(gye)});function aje(i,e){const t=ce({},oje,i,e);if(!t)return;const r=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let o;const a=n.href;a?o=a:s&&(o=Sv);let l,c,h,u="bottom-left";const d=t.hotSpot;d?(l=[d.x,d.y],c=d.xunits,h=d.yunits,u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=LS,c=Ng,h=$g):o.includes("arrow-reverse")?(l=[54,42],c=Ng,h=$g):o.includes("paddle")&&(l=[32,1],c=Ng,h=$g));let f;const p=n.x,g=n.y;p!==void 0&&g!==void 0&&(f=[p,g]);let m;const y=n.w,_=n.h;y!==void 0&&_!==void 0&&(m=[y,_]);let v;const x=t.heading;x!==void 0&&(v=Mo(x));const w=t.scale,T=t.color;if(s){o==Sv&&(m=Bg);const A=new ox({anchor:l,anchorOrigin:u,anchorXUnits:c,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:f,offsetOrigin:"bottom-left",rotation:v,scale:w,size:m,src:this.iconUrlFunction_(o),color:T}),R=A.getScaleArray()[0],L=A.getSize();if(L===null){const P=A.getImageState();if(P===Le.IDLE||P===Le.LOADING){const F=function(){const B=A.getImageState();if(!(B===Le.IDLE||B===Le.LOADING)){const b=A.getSize();if(b&&b.length==2){const E=Cv(b);A.setScale(R*E)}A.unlistenImageChange(F)}};A.listenImageChange(F),P===Le.IDLE&&A.load()}}else if(L.length==2){const P=Cv(L);A.setScale(R*P)}r.imageStyle=A}else r.imageStyle=n2}const lje=re($e,{color:G(fx),scale:G(gye)});function cje(i,e){const t=ce({},lje,i,e);if(!t)return;const r=e[e.length-1],n=new iu({fill:new ss({color:"color"in t?t.color:Wd}),scale:t.scale});r.textStyle=n}const hje=re($e,{color:G(fx),width:G(At)});function uje(i,e){const t=ce({},hje,i,e);if(!t)return;const r=e[e.length-1],n=new mn({color:"color"in t?t.color:Wd,width:"width"in t?t.width:1});r.strokeStyle=n}const dje=re($e,{color:G(fx),fill:G(Cc),outline:G(Cc)});function fje(i,e){const t=ce({},dje,i,e);if(!t)return;const r=e[e.length-1],n=new ss({color:"color"in t?t.color:Wd});r.fillStyle=n;const s=t.fill;s!==void 0&&(r.fill=s);const o=t.outline;o!==void 0&&(r.outline=o)}const pje=re($e,{coordinates:Ve(dye)});function yye(i,e){return ce(null,pje,i,e)}function gje(i,e){const r=e[e.length-1].coordinates,n=kn(i,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);r.push([a,l,c])}else r.push([])}const mje=re(Tl,{Track:Fe(_ye)});function yje(i,e){const t=ce([],mje,i,e);if(t)return new vn(t)}const _je=re($e,{when:Uje},re(Tl,{coord:gje}));function _ye(i,e){const t=ce({coordinates:[],whens:[]},_je,i,e);if(!t)return;const r=[],n=t.coordinates,s=t.whens;for(let o=0,a=Math.min(n.length,s.length);o<a;++o)n[o].length==3&&r.push(n[o][0],n[o][1],n[o][2],s[o]);return new Ii(r,"XYZM")}const vje=re($e,{href:G(fye)},re(Tl,{x:G(At),y:G(At),w:G(At),h:G(At)}));function bje(i,e){const t=ce({},vje,i,e);return t||null}const xje=re($e,{coordinates:Ve(dye)});function s2(i,e){return ce(null,xje,i,e)}const px=re($e,{extrude:G(Cc),tessellate:G(Cc),altitudeMode:G(de)});function vye(i,e){const t=ce({},px,i,e),r=s2(i,e);if(r){const n=new Ii(r,"XYZ");return n.setProperties(t,!0),n}}function bye(i,e){const t=ce({},px,i,e),r=s2(i,e);if(r){const n=new tr(r,"XYZ",[r.length]);return n.setProperties(t,!0),n}}const wje=re($e,{LineString:Fe(vye),LinearRing:Fe(bye),MultiGeometry:Fe(xye),Point:Fe(wye),Polygon:Fe(Eye)});function xye(i,e){const t=ce([],wje,i,e);if(!t)return null;if(t.length===0)return new Yr(t);let r,n=!0;const s=t[0].getType();let o;for(let a=1,l=t.length;a<l;++a)if(o=t[a],o.getType()!=s){n=!1;break}if(n){let a,l;if(s=="Point"){const c=t[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let h=1,u=t.length;h<u;++h)o=t[h],Ot(l,o.getFlatCoordinates());r=new oo(l,a),Uw(r,t)}else if(s=="LineString")r=new vn(t),Uw(r,t);else if(s=="Polygon")r=new os(t),Uw(r,t);else if(s=="GeometryCollection")r=new Yr(t);else throw new Error("Unknown geometry type found")}else r=new Yr(t);return r}function wye(i,e){const t=ce({},px,i,e),r=s2(i,e);if(r){const n=new $i(r,"XYZ");return n.setProperties(t,!0),n}}const Eje=re($e,{innerBoundaryIs:Bje,outerBoundaryIs:zje});function Eye(i,e){const t=ce({},px,i,e),r=ce([null],Eje,i,e);if(r&&r[0]){const n=r[0],s=[n.length];for(let a=1,l=r.length;a<l;++a)Ot(n,r[a]),s.push(n.length);const o=new tr(n,"XYZ",s);return o.setProperties(t,!0),o}}const Sje=re($e,{IconStyle:aje,LabelStyle:cje,LineStyle:uje,PolyStyle:fje});function o2(i,e){const t=ce({},Sje,i,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:C_;const n=t.fill;n!==void 0&&!n&&(r=null);let s;"imageStyle"in t?t.imageStyle!=n2&&(s=t.imageStyle):s=IS;const o="textStyle"in t?t.textStyle:kh,a="strokeStyle"in t?t.strokeStyle:PS,l=t.outline;return l!==void 0&&!l?[new qi({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new Yr(d.getGeometriesArrayRecursive().filter(function(f){const p=f.getType();return p!=="Polygon"&&p!=="MultiPolygon"}))}if(u!=="Polygon"&&u!=="MultiPolygon")return h},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new qi({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new Yr(d.getGeometriesArrayRecursive().filter(function(f){const p=f.getType();return p==="Polygon"||p==="MultiPolygon"}))}if(u==="Polygon"||u==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new qi({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function Uw(i,e){const t=e.length,r=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<t;++c){const h=e[c];r[c]=h.get("extrude"),n[c]=h.get("tessellate"),s[c]=h.get("altitudeMode"),o=o||r[c]!==void 0,a=a||n[c]!==void 0,l=l||s[c]}o&&i.set("extrude",r),a&&i.set("tessellate",n),l&&i.set("altitudeMode",s)}const Cje=re($e,{displayName:G(de),value:G(de)});function Tje(i,e){const t=i.getAttribute("name");ns(Cje,i,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Aje=re($e,{Data:Tje,SchemaData:Pje});function Sye(i,e){ns(Aje,i,e)}function Cye(i,e){ns(hye,i,e)}const Mje=re($e,{Style:G(o2),key:G(de),styleUrl:G(pye)});function Rje(i,e){const t=ce({},Mje,i,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function Lje(i,e){const t=mye.call(this,i,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const Ije=re($e,{SimpleData:kje});function Pje(i,e){ns(Ije,i,e)}function kje(i,e){const t=i.getAttribute("name");if(t!==null){const r=de(i),n=e[e.length-1];n[t]=r}}const Oje=re($e,{altitudeMode:G(de),minAltitude:G(At),maxAltitude:G(At),north:G(At),south:G(At),east:G(At),west:G(At)});function Dje(i,e){const t=ce({},Oje,i,e);if(!t)return;const r=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=n,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const Fje=re($e,{minLodPixels:G(At),maxLodPixels:G(At),minFadeExtent:G(At),maxFadeExtent:G(At)});function Nje(i,e){const t=ce({},Fje,i,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const $je=re($e,{LinearRing:Fe(yye)});function Bje(i,e){const t=ce([],$je,i,e);t.length>0&&e[e.length-1].push(...t)}const jje=re($e,{LinearRing:Ve(yye)});function zje(i,e){const t=ce(void 0,jje,i,e);if(t){const r=e[e.length-1];r[0]=t}}function Gje(i,e){ns(X5e,i,e)}function Uje(i,e){const r=e[e.length-1].whens,n=kn(i,!1),s=Date.parse(n);r.push(isNaN(s)?0:s)}function gx(i,e){const t=Do(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(n[s]).toString(16);n[s]=o.length==1?"0"+o:o}Ze(i,n.join(""))}function Vje(i,e,t){const r=t[t.length-1],n=r.layout,s=r.stride;let o;if(n=="XY"||n=="XYM")o=2;else if(n=="XYZ"||n=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let h=1;h<o;++h)l+=","+e[c+h]}}Ze(i,l)}const T_=re($e,{Data:q(qje),value:q(Wje),displayName:q(Hje)});function qje(i,e,t){i.setAttribute("name",e.name);const r={node:i},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&it(r,T_,Or,[n.displayName],t,["displayName"]),n!==null&&n.value&&it(r,T_,Or,[n.value],t,["value"])):it(r,T_,Or,[n],t,["value"])}function Hje(i,e){jBe(i,e)}function Wje(i,e){Ze(i,e)}const Yje=re($e,{Placemark:q(Mye)}),Xje=function(i,e,t){const r=e[e.length-1].node;return ot(r.namespaceURI,"Placemark")};function Zje(i,e,t){it({node:i},Yje,Xje,e,t,void 0,this)}const Kje=Hi("Data");function Jje(i,e,t){const r={node:i},n=e.names,s=e.values,o=n.length;for(let a=0;a<o;a++)it(r,T_,Kje,[{name:n[a],value:s[a]}],t)}const Ple=re($e,["href"],re(Tl,["x","y","w","h"])),kle=re($e,{href:q(Ze)},re(Tl,{x:q(Wn),y:q(Wn),w:q(Wn),h:q(Wn)})),Qje=function(i,e,t){return ot(Tl[0],"gx:"+t)};function e4e(i,e,t){const r={node:i},n=t[t.length-1].node;let s=Ple[n.namespaceURI],o=as(e,s);it(r,kle,Or,o,t,s),s=Ple[Tl[0]],o=as(e,s),it(r,kle,Qje,o,t,s)}const t4e=re($e,["scale","heading","Icon","color","hotSpot"]),i4e=re($e,{Icon:q(e4e),color:q(gx),heading:q(Wn),hotSpot:q(R4e),scale:q(Lye)});function r4e(i,e,t){const r={node:i},n={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const m=e.getAnchor(),y=e.getOrigin();if(y&&a&&y[0]!==0&&y[1]!==o[1]&&(l.x=y[0],l.y=a[1]-(y[1]+o[1])),m&&(m[0]!==o[0]/2||m[1]!==o[1]/2)){const _={x:m[0],xunits:"pixels",y:o[1]-m[1],yunits:"pixels"};n.hotSpot=_}}n.Icon=l;let c=e.getScaleArray()[0],h=o;if(h===null&&(h=Bg),h.length==2){const m=Cv(h);c=c/m}c!==1&&(n.scale=c);const u=e.getRotation();u!==0&&(n.heading=u);const d=e.getColor();d&&(n.color=d);const f=t[t.length-1].node,p=t4e[f.namespaceURI],g=as(n,p);it(r,i4e,Or,g,t,p)}const n4e=re($e,["color","scale"]),s4e=re($e,{color:q(gx),scale:q(Lye)});function o4e(i,e,t){const r={node:i},n={},s=e.getFill();s&&(n.color=s.getColor());const o=e.getScale();o&&o!==1&&(n.scale=o);const a=t[t.length-1].node,l=n4e[a.namespaceURI],c=as(n,l);it(r,s4e,Or,c,t,l)}const a4e=re($e,["color","width"]),l4e=re($e,{color:q(gx),width:q(Wn)});function c4e(i,e,t){const r={node:i},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=a4e[s.namespaceURI],a=as(n,o);it(r,l4e,Or,a,t,o)}const h4e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Tye=function(i,e,t){if(i){const r=e[e.length-1].node;return ot(r.namespaceURI,h4e[i.getType()])}},u4e=Hi("Point"),d4e=Hi("LineString"),f4e=Hi("LinearRing"),p4e=Hi("Polygon"),g4e=re($e,{LineString:q(Yd),Point:q(Yd),Polygon:q(Rye),GeometryCollection:q(Aye)});function Aye(i,e,t){const r={node:i},n=e.getType();let s=[],o;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=Tye;else if(n==="MultiPoint")s=e.getPoints(),o=u4e;else if(n==="MultiLineString")s=e.getLineStrings(),o=d4e;else if(n==="MultiPolygon")s=e.getPolygons(),o=p4e;else throw new Error("Unknown geometry type");it(r,g4e,o,s,t)}const m4e=re($e,{LinearRing:q(Yd)});function Ole(i,e,t){it({node:i},m4e,f4e,[e],t)}const Vw=re($e,{ExtendedData:q(Jje),MultiGeometry:q(Aye),LineString:q(Yd),LinearRing:q(Yd),Point:q(Yd),Polygon:q(Rye),Style:q(M4e),address:q(Ze),description:q(Ze),name:q(Ze),open:q(Tf),phoneNumber:q(Ze),styleUrl:q(Ze),visibility:q(Tf)}),y4e=re($e,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),_4e=Hi("ExtendedData");function Mye(i,e,t){const r={node:i};e.getId()&&i.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(n||{}).sort().filter(function(f){return!s[f]}),a=e.getStyleFunction();if(a){const f=a(e,0);if(f){const p=Array.isArray(f)?f:[f];let g=p;if(e.getGeometry()&&(g=p.filter(function(m){const y=m.getGeometryFunction()(e);if(y){const _=y.getType();return _==="GeometryCollection"?y.getGeometriesArrayRecursive().filter(function(v){const x=v.getType();return x==="Point"||x==="MultiPoint"}).length:_==="Point"||_==="MultiPoint"}})),this.writeStyles_){let m=p,y=p;e.getGeometry()&&(m=p.filter(function(_){const v=_.getGeometryFunction()(e);if(v){const x=v.getType();return x==="GeometryCollection"?v.getGeometriesArrayRecursive().filter(function(w){const T=w.getType();return T==="LineString"||T==="MultiLineString"}).length:x==="LineString"||x==="MultiLineString"}}),y=p.filter(function(_){const v=_.getGeometryFunction()(e);if(v){const x=v.getType();return x==="GeometryCollection"?v.getGeometriesArrayRecursive().filter(function(w){const T=w.getType();return T==="Polygon"||T==="MultiPolygon"}).length:x==="Polygon"||x==="MultiPolygon"}})),n.Style={pointStyles:g,lineStyles:m,polyStyles:y}}if(g.length&&n.name===void 0){const m=g[0].getText();m&&(n.name=m.getText())}}}const l=t[t.length-1].node,c=y4e[l.namespaceURI],h=as(n,c);if(it(r,Vw,Or,h,t,c),o.length>0){const f=as(n,o);it(r,Vw,_4e,[{names:o,values:f}],t)}const u=t[0];let d=e.getGeometry();d&&(d=Pi(d,!0,u)),it(r,Vw,Tye,[d],t)}const v4e=re($e,["extrude","tessellate","altitudeMode","coordinates"]),b4e=re($e,{extrude:q(Tf),tessellate:q(Tf),altitudeMode:q(Ze),coordinates:q(Vje)});function Yd(i,e,t){const r=e.getFlatCoordinates(),n={node:i};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=t[t.length-1].node,a=v4e[o.namespaceURI],l=as(s,a);it(n,b4e,Or,l,t,a)}const x4e=re($e,["color","fill","outline"]),Dle=re($e,{outerBoundaryIs:q(Ole),innerBoundaryIs:q(Ole)}),w4e=Hi("innerBoundaryIs"),E4e=Hi("outerBoundaryIs");function Rye(i,e,t){const r=e.getLinearRings(),n=r.shift(),s={node:i};it(s,Dle,w4e,r,t),it(s,Dle,E4e,[n],t)}const S4e=re($e,{color:q(gx),fill:q(Tf),outline:q(Tf)});function C4e(i,e,t){const r={node:i},n=e.getFill(),s=e.getStroke(),o={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,l=x4e[a.namespaceURI],c=as(o,l);it(r,S4e,Or,c,t,l)}function Lye(i,e){Wn(i,Math.round(e*1e6)/1e6)}const T4e=re($e,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),A4e=re($e,{IconStyle:q(r4e),LabelStyle:q(o4e),LineStyle:q(c4e),PolyStyle:q(C4e)});function M4e(i,e,t){const r={node:i},n={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(n.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(n.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(n.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!n.LineStyle&&(n.LineStyle=l),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=T4e[s.namespaceURI],a=as(n,o);it(r,A4e,Or,a,t,o)}function R4e(i,e){i.setAttribute("x",String(e.x)),i.setAttribute("y",String(e.y)),i.setAttribute("xunits",e.xunits),i.setAttribute("yunits",e.yunits)}const Iye=tje;var a2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a2.read=function(i,e,t,r,n){var s,o,a=n*8-r-1,l=(1<<a)-1,c=l>>1,h=-7,u=t?n-1:0,d=t?-1:1,f=i[e+u];for(u+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=s*256+i[e+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+i[e+u],u+=d,h-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(f?-1:1)*o*Math.pow(2,s-r)};a2.write=function(i,e,t,r,n,s){var o,a,l,c=s*8-n-1,h=(1<<c)-1,u=h>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=d/l:e+=d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,n),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;i[t+f]=a&255,f+=p,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;i[t+f]=o&255,f+=p,o/=256,c-=8);i[t+f-p]|=g*128};var L4e=Jt,B0=a2;function Jt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Jt.Varint=0;Jt.Fixed64=1;Jt.Bytes=2;Jt.Fixed32=5;var DS=65536*65536,Fle=1/DS,I4e=12,Pye=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Jt.prototype={destroy:function(){this.buf=null},readFields:function(i,e,t){for(t=t||this.length;this.pos<t;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=r&7,i(n,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=j0(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=$le(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=j0(this.buf,this.pos)+j0(this.buf,this.pos+4)*DS;return this.pos+=8,i},readSFixed64:function(){var i=j0(this.buf,this.pos)+$le(this.buf,this.pos+4)*DS;return this.pos+=8,i},readFloat:function(){var i=B0.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=B0.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,t,r;return r=e[this.pos++],t=r&127,r<128||(r=e[this.pos++],t|=(r&127)<<7,r<128)||(r=e[this.pos++],t|=(r&127)<<14,r<128)||(r=e[this.pos++],t|=(r&127)<<21,r<128)?t:(r=e[this.pos],t|=(r&15)<<28,P4e(t,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=I4e&&Pye?H4e(this.buf,e,i):q4e(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Jt.Bytes)return i.push(this.readVarint(e));var t=ka(this);for(i=i||[];this.pos<t;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSVarint());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Jt.Bytes)return i.push(this.readBoolean());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFloat());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Jt.Bytes)return i.push(this.readDouble());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed32());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed32());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed64());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed64());var e=ka(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===Jt.Varint)for(;this.buf[this.pos++]>127;);else if(e===Jt.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Jt.Fixed32)this.pos+=4;else if(e===Jt.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),rd(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),rd(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),rd(this.buf,i&-1,this.pos),rd(this.buf,Math.floor(i*Fle),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),rd(this.buf,i&-1,this.pos),rd(this.buf,Math.floor(i*Fle),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){k4e(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=W4e(this.buf,i,this.pos);var t=this.pos-e;t>=128&&Nle(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(i){this.realloc(4),B0.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),B0.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=i[t]},writeRawMessage:function(i,e){this.pos++;var t=this.pos;i(e,this);var r=this.pos-t;r>=128&&Nle(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeMessage:function(i,e,t){this.writeTag(i,Jt.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,F4e,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,N4e,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,j4e,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,$4e,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,B4e,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,z4e,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,G4e,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,U4e,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,V4e,e)},writeBytesField:function(i,e){this.writeTag(i,Jt.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Jt.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Jt.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Jt.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Jt.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Jt.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Jt.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Jt.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Jt.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Jt.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function P4e(i,e,t){var r=t.buf,n,s;if(s=r[t.pos++],n=(s&112)>>4,s<128||(s=r[t.pos++],n|=(s&127)<<3,s<128)||(s=r[t.pos++],n|=(s&127)<<10,s<128)||(s=r[t.pos++],n|=(s&127)<<17,s<128)||(s=r[t.pos++],n|=(s&127)<<24,s<128)||(s=r[t.pos++],n|=(s&1)<<31,s<128))return id(i,n,e);throw new Error("Expected varint not more than 10 bytes")}function ka(i){return i.type===Jt.Bytes?i.readVarint()+i.pos:i.pos+1}function id(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function k4e(i,e){var t,r;if(i>=0?(t=i%4294967296|0,r=i/4294967296|0):(t=~(-i%4294967296),r=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),O4e(t,r,e),D4e(r,e)}function O4e(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function D4e(i,e){var t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function Nle(i,e,t){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(var n=t.pos-1;n>=i;n--)t.buf[n+r]=t.buf[n]}function F4e(i,e){for(var t=0;t<i.length;t++)e.writeVarint(i[t])}function N4e(i,e){for(var t=0;t<i.length;t++)e.writeSVarint(i[t])}function $4e(i,e){for(var t=0;t<i.length;t++)e.writeFloat(i[t])}function B4e(i,e){for(var t=0;t<i.length;t++)e.writeDouble(i[t])}function j4e(i,e){for(var t=0;t<i.length;t++)e.writeBoolean(i[t])}function z4e(i,e){for(var t=0;t<i.length;t++)e.writeFixed32(i[t])}function G4e(i,e){for(var t=0;t<i.length;t++)e.writeSFixed32(i[t])}function U4e(i,e){for(var t=0;t<i.length;t++)e.writeFixed64(i[t])}function V4e(i,e){for(var t=0;t<i.length;t++)e.writeSFixed64(i[t])}function j0(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function rd(i,e,t){i[t]=e,i[t+1]=e>>>8,i[t+2]=e>>>16,i[t+3]=e>>>24}function $le(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function q4e(i,e,t){for(var r="",n=e;n<t;){var s=i[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a>t)break;var l,c,h;a===1?s<128&&(o=s):a===2?(l=i[n+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=i[n+1],c=i[n+2],(l&192)===128&&(c&192)===128&&(o=(s&15)<<12|(l&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=i[n+1],c=i[n+2],h=i[n+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(o=(s&15)<<18|(l&63)<<12|(c&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),n+=a}return r}function H4e(i,e,t){return Pye.decode(i.subarray(e,t))}function W4e(i,e,t){for(var r=0,n,s;r<e.length;r++){if(n=e.charCodeAt(r),n>55295&&n<57344)if(s)if(n<56320){i[t++]=239,i[t++]=191,i[t++]=189,s=n;continue}else n=s-55296<<10|n-56320|65536,s=null;else{n>56319||r+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):s=n;continue}else s&&(i[t++]=239,i[t++]=191,i[t++]=189,s=null);n<128?i[t++]=n:(n<2048?i[t++]=n>>6|192:(n<65536?i[t++]=n>>12|224:(i[t++]=n>>18|240,i[t++]=n>>12&63|128),i[t++]=n>>6&63|128),i[t++]=n&63|128)}return t}const Y4e=no(L4e);class X4e extends my{constructor(e){super(),e=e||{},this.dataProjection=new _f({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:un,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,n){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,c=0,h=0,u=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),c+=e.readSVarint(),o===1&&h>u&&(n.push(h),u=h),r.push(l,c),h+=2;else if(o===7)h>u&&(r.push(r[u],r[u+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>u&&(n.push(h),u=h)}createFeature_(e,t,r){const n=t.type;if(n===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],c=[];this.readRawGeometry_(e,t,l,c);const h=eze(n,c.length);if(this.featureClass_===un)s=new this.featureClass_(h,l,c,2,o,a),s.transform(r.dataProjection);else{let u;if(h=="Polygon"){const p=wme(l,c);u=p.length>1?new os(l,"XY",p):new tr(l,"XY",c)}else u=h==="Point"?new $i(l,"XY"):h==="LineString"?new Ii(l,"XY"):h==="MultiPoint"?new oo(l,"XY"):h==="MultiLineString"?new vn(l,"XY",c):null;const d=this.featureClass_;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=Pi(u,!1,r);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const n=xe(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;const s=new Y4e(e),o=s.readFields(Z4e,{}),a=[];for(const l in o){if(r&&!r.includes(l))continue;const c=o[l],h=c?[0,0,c.extent,c.extent]:null;n.setExtent(h);for(let u=0,d=c.length;u<d;++u){const f=Q4e(s,c,u),p=this.createFeature_(s,f,t);p!==null&&a.push(p)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Z4e(i,e,t){if(i===3){const r={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(K4e,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function K4e(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let r=null;const n=t.readVarint()+t.pos;for(;t.pos<n;)i=t.readVarint()>>3,r=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(r)}}function J4e(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const n=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[n]=s}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function Q4e(i,e,t){i.pos=e.features[t];const r=i.readVarint()+i.pos,n={layer:e,type:0,properties:{}};return i.readFields(J4e,n,r),n}function eze(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}const l2=X4e;class c2{read(e){if(!e)return null;if(typeof e=="string"){const t=Zs(e);return this.readFromDocument(t)}return Xs(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){ze()}}const tze="http://www.w3.org/1999/xlink";function lp(i){return i.getAttributeNS(tze,"href")}const ls=[null,"http://www.opengis.net/ows/1.1"],ize=re(ls,{ServiceIdentification:G(Aze),ServiceProvider:G(Rze),OperationsMetadata:G(Cze)});class rze extends c2{constructor(){super()}readFromNode(e){const t=ce({},ize,e,[]);return t||null}}const nze=re(ls,{DeliveryPoint:G(de),City:G(de),AdministrativeArea:G(de),PostalCode:G(de),Country:G(de),ElectronicMailAddress:G(de)}),sze=re(ls,{Value:_i(Lze)}),oze=re(ls,{AllowedValues:G(_ze)}),aze=re(ls,{Phone:G(Tze),Address:G(yze)}),lze=re(ls,{HTTP:G(Eze)}),cze=re(ls,{Get:_i(wze),Post:void 0}),hze=re(ls,{DCP:G(xze)}),uze=re(ls,{Operation:Sze}),dze=re(ls,{Voice:G(de),Facsimile:G(de)}),fze=re(ls,{Constraint:_i(vze)}),pze=re(ls,{IndividualName:G(de),PositionName:G(de),ContactInfo:G(bze)}),gze=re(ls,{Abstract:G(de),AccessConstraints:G(de),Fees:G(de),Title:G(de),ServiceTypeVersion:G(de),ServiceType:G(de)}),mze=re(ls,{ProviderName:G(de),ProviderSite:G(lp),ServiceContact:G(Mze)});function yze(i,e){return ce({},nze,i,e)}function _ze(i,e){return ce({},sze,i,e)}function vze(i,e){const t=i.getAttribute("name");if(t)return ce({name:t},oze,i,e)}function bze(i,e){return ce({},aze,i,e)}function xze(i,e){return ce({},lze,i,e)}function wze(i,e){const t=lp(i);if(t)return ce({href:t},fze,i,e)}function Eze(i,e){return ce({},cze,i,e)}function Sze(i,e){const t=i.getAttribute("name"),r=ce({},hze,i,e);if(!r)return;const n=e[e.length-1];n[t]=r}function Cze(i,e){return ce({},uze,i,e)}function Tze(i,e){return ce({},dze,i,e)}function Aze(i,e){return ce({},gze,i,e)}function Mze(i,e){return ce({},pze,i,e)}function Rze(i,e){return ce({},mze,i,e)}function Lze(i,e){return de(i)}const kye=rze;function Ble(i,e,t,r,n,s){n!==void 0?(n=n,s=s!==void 0?s:0):(n=[],s=0);let o=e;for(;o<t;){const a=i[o++];n[s++]=i[o++],n[s++]=a;for(let l=2;l<r;++l)n[s++]=i[o++]}return n.length=s,n}class Ize extends r2{constructor(e){super(),e=e||{},this.dataProjection=xe("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t);return new mi(r)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const r=pm(this.geometryLayout_),n=kze(e,r,this.factor_);Ble(n,0,n.length,r,n);const s=Qa(n,0,n.length,r),o=new Ii(s,this.geometryLayout_);return Pi(o,!1,this.adaptOptions(t))}writeFeatureText(e,t){const r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){e=Pi(e,!0,this.adaptOptions(t));const r=e.getFlatCoordinates(),n=e.getStride();return Ble(r,0,r.length,n,r),Pze(r,n,this.factor_)}}function Pze(i,e,t){t=t||1e5;let r;const n=new Array(e);for(r=0;r<e;++r)n[r]=0;for(let s=0,o=i.length;s<o;)for(r=0;r<e;++r,++s){const a=i[s],l=a-n[r];n[r]=a,i[s]=l}return Oze(i,t)}function kze(i,e,t){t=t||1e5;let r;const n=new Array(e);for(r=0;r<e;++r)n[r]=0;const s=Dze(i,t);for(let o=0,a=s.length;o<a;)for(r=0;r<e;++r,++o)n[r]+=s[o],s[o]=n[r];return s}function Oze(i,e){e=e||1e5;for(let t=0,r=i.length;t<r;++t)i[t]=Math.round(i[t]*e);return Fze(i)}function Dze(i,e){e=e||1e5;const t=Nze(i);for(let r=0,n=t.length;r<n;++r)t[r]/=e;return t}function Fze(i){for(let e=0,t=i.length;e<t;++e){const r=i[e];i[e]=r<0?~(r<<1):r<<1}return $ze(i)}function Nze(i){const e=Bze(i);for(let t=0,r=e.length;t<r;++t){const n=e[t];e[t]=n&1?~(n>>1):n>>1}return e}function $ze(i){let e="";for(let t=0,r=i.length;t<r;++t)e+=jze(i[t]);return e}function Bze(i){const e=[];let t=0,r=0;for(let n=0,s=i.length;n<s;++n){const o=i.charCodeAt(n)-63;t|=(o&31)<<r,o<32?(e.push(t),t=0,r=0):r+=5}return e}function jze(i){let e,t="";for(;i>=32;)e=(32|i&31)+63,t+=String.fromCharCode(e),i>>=5;return e=i+63,t+=String.fromCharCode(e),t}const zze=Ize;class Gze extends ZT{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=xe(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,t){if(e.type=="Topology"){const r=e;let n,s=null,o=null;r.transform&&(n=r.transform,s=n.scale,o=n.translate);const a=r.arcs;n&&Kze(a,s,o);const l=[],c=r.objects,h=this.layerName_;let u;for(const d in c)this.layers_&&!this.layers_.includes(d)||(c[d].type==="GeometryCollection"?(u=c[d],l.push.apply(l,Zze(u,a,s,o,h,d,t))):(u=c[d],l.push(Oye(u,a,s,o,h,d,t))));return l}return[]}readProjectionFromObject(e){return this.dataProjection}}const Uze={Point:Vze,LineString:Hze,Polygon:Yze,MultiPoint:qze,MultiLineString:Wze,MultiPolygon:Xze};function mx(i,e){const t=[];let r;for(let n=0,s=i.length;n<s;++n)if(r=i[n],n>0&&t.pop(),r>=0){const o=e[r];for(let a=0,l=o.length;a<l;++a)t.push(o[a].slice(0))}else{const o=e[~r];for(let a=o.length-1;a>=0;--a)t.push(o[a].slice(0))}return t}function Vze(i,e,t){const r=i.coordinates;return e&&t&&h2(r,e,t),new $i(r)}function qze(i,e,t){const r=i.coordinates;if(e&&t)for(let n=0,s=r.length;n<s;++n)h2(r[n],e,t);return new oo(r)}function Hze(i,e){const t=mx(i.arcs,e);return new Ii(t)}function Wze(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r)t[r]=mx(i.arcs[r],e);return new vn(t)}function Yze(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r)t[r]=mx(i.arcs[r],e);return new tr(t)}function Xze(i,e){const t=[];for(let r=0,n=i.arcs.length;r<n;++r){const s=i.arcs[r],o=[];for(let a=0,l=s.length;a<l;++a)o[a]=mx(s[a],e);t[r]=o}return new os(t)}function Zze(i,e,t,r,n,s,o){const a=i.geometries,l=[];for(let c=0,h=a.length;c<h;++c)l[c]=Oye(a[c],e,t,r,n,s,o);return l}function Oye(i,e,t,r,n,s,o){let a=null;const l=i.type;if(l){const u=Uze[l];l==="Point"||l==="MultiPoint"?a=u(i,t,r):a=u(i,e),a=Pi(a,!1,o)}const c=new mi({geometry:a});i.id!==void 0&&c.setId(i.id);let h=i.properties;return n&&(h||(h={}),h[n]=s),h&&c.setProperties(h,!0),c}function Kze(i,e,t){for(let r=0,n=i.length;r<n;++r)Jze(i[r],e,t)}function Jze(i,e,t){let r=0,n=0;for(let s=0,o=i.length;s<o;++s){const a=i[s];r+=a[0],n+=a[1],a[0]=r,a[1]=n,h2(a,e,t)}}function h2(i,e,t){i[0]=i[0]*e[0]+t[0],i[1]=i[1]*e[1]+t[1]}const Dye=Gze;class Zt extends vt{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,r){const n=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),super.writeGeometryElement(e,t,r)}}Zt.prototype.namespace="http://www.opengis.net/gml/3.2";Zt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Ve(vt.prototype.readFlatPos),posList:Ve(vt.prototype.readFlatPosList),coordinates:Ve(Ct.prototype.readFlatCoordinates)}};Zt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};Zt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Ve(De.prototype.readPoint),MultiPoint:Ve(De.prototype.readMultiPoint),LineString:Ve(De.prototype.readLineString),MultiLineString:Ve(De.prototype.readMultiLineString),LinearRing:Ve(De.prototype.readLinearRing),Polygon:Ve(De.prototype.readPolygon),MultiPolygon:Ve(De.prototype.readMultiPolygon),Surface:Ve(Zt.prototype.readSurface),MultiSurface:Ve(vt.prototype.readMultiSurface),Curve:Ve(Zt.prototype.readCurve),MultiCurve:Ve(vt.prototype.readMultiCurve),Envelope:Ve(Zt.prototype.readEnvelope)}};Zt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Fe(vt.prototype.curveMemberParser),curveMembers:Fe(vt.prototype.curveMemberParser)}};Zt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Fe(vt.prototype.surfaceMemberParser),surfaceMembers:Fe(vt.prototype.surfaceMemberParser)}};Zt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Fe(De.prototype.readLineString),Curve:Fe(vt.prototype.readCurve)}};Zt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Fe(De.prototype.readPolygon),Surface:Fe(vt.prototype.readSurface)}};Zt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Ve(vt.prototype.readPatch)}};Zt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Ve(vt.prototype.readSegment)}};Zt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Fe(vt.prototype.readFlatPosList),upperCorner:Fe(vt.prototype.readFlatPosList)}};Zt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Ve(vt.prototype.readPolygonPatch)}};Zt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:wv(vt.prototype.readLineStringSegment)}};Zt.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Fe(De.prototype.pointMemberParser),pointMembers:Fe(De.prototype.pointMemberParser)}};Zt.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Fe(De.prototype.lineStringMemberParser),lineStringMembers:Fe(De.prototype.lineStringMemberParser)}};Zt.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Fe(De.prototype.polygonMemberParser),polygonMembers:Fe(De.prototype.polygonMemberParser)}};Zt.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Fe(De.prototype.readFlatCoordinatesFromNode)}};Zt.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Fe(De.prototype.readLineString)}};Zt.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Fe(De.prototype.readPolygon)}};Zt.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Ve(De.prototype.readFlatLinearRing),Ring:Ve(Zt.prototype.readFlatCurveRing)}};Zt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:q(vt.prototype.writeRing),interior:q(vt.prototype.writeRing)}};Zt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:q(Ze),upperCorner:q(Ze)}};Zt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:q(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:q(vt.prototype.writeSurfaceOrPolygonMember)}};Zt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:q(vt.prototype.writePointMember)}};Zt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:q(vt.prototype.writeLineStringOrCurveMember),curveMember:q(vt.prototype.writeLineStringOrCurveMember)}};Zt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:q(vt.prototype.writeCurveOrLineString),MultiCurve:q(vt.prototype.writeMultiCurveOrLineString),Point:q(Zt.prototype.writePoint),MultiPoint:q(vt.prototype.writeMultiPoint),LineString:q(vt.prototype.writeCurveOrLineString),MultiLineString:q(vt.prototype.writeMultiCurveOrLineString),LinearRing:q(vt.prototype.writeLinearRing),Polygon:q(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:q(vt.prototype.writeMultiSurfaceOrPolygon),Surface:q(vt.prototype.writeSurfaceOrPolygon),MultiSurface:q(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:q(vt.prototype.writeEnvelope)}};const u2=Zt;class Fye{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class Qze extends Fye{constructor(e,t){super(e),this.conditions=t,pt(this.conditions.length>=2,"At least 2 conditions are required")}}class eGe extends Qze{constructor(e){super("And",Array.prototype.slice.call(arguments))}}const tGe=eGe;class iGe extends Fye{constructor(e,t,r){if(super("BBOX"),this.geometryName=e,this.extent=t,t.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function rGe(i){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(tGe,e))}function nGe(i,e,t){return new iGe(i,e,t)}const jle={"http://www.opengis.net/gml":{boundedBy:G(De.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Fe(De.prototype.readFeaturesInternal)}},sGe={"http://www.opengis.net/wfs":{totalInserted:G(Ji),totalUpdated:G(Ji),totalDeleted:G(Ji)},"http://www.opengis.net/wfs/2.0":{totalInserted:G(Ji),totalUpdated:G(Ji),totalDeleted:G(Ji)}},oGe={"http://www.opengis.net/wfs":{TransactionSummary:G(Gle,"transactionSummary"),InsertResults:G(Vle,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:G(Gle,"transactionSummary"),InsertResults:G(Vle,"insertIds")}},aGe={"http://www.opengis.net/wfs":{PropertyName:q(Ze)},"http://www.opengis.net/wfs/2.0":{PropertyName:q(Ze)}},Nye={"http://www.opengis.net/wfs":{Insert:q(qle),Update:q(Wle),Delete:q(Hle),Property:q(Yle),Native:q(Xle)},"http://www.opengis.net/wfs/2.0":{Insert:q(qle),Update:q(Wle),Delete:q(Hle),Property:q(Yle),Native:q(Xle)}},$ye="feature",d2="http://www.w3.org/2000/xmlns/",f2={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},FS={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},p2={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},zle={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},g2={"2.0.0":u2,"1.1.0":vt,"1.0.0":Ct},lGe="1.1.0";class cGe extends _y{constructor(e){super(),e=e||{},this.version_=e.version?e.version:lGe,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new g2[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:zle[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){const r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,t||{}));const n=[r];let s;this.version_==="2.0.0"?s=jle:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=ce([],s,e,n,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(e){if(e){if(typeof e=="string"){const t=Zs(e);return this.readTransactionResponseFromDocument(t)}return Xs(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const t=Zs(e);return this.readFeatureCollectionMetadataFromDocument(t)}return Xs(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){const t={},r=el(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,ce(t,jle,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return ce({},oGe,e,[])}writeGetFeature(e){const t=ot(FS[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&t.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&t.setAttribute("count",String(e.count)),e.viewParams!==void 0&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(ru,"xsi:schemaLocation",this.schemaLocation_);const r={node:t};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),pt(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let n=e.filter;e.bbox&&(pt(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),n=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,n)),Object.assign(r,{geometryName:e.geometryName,filter:n}),sce(t,e.featureTypes,[r])}else e.featureTypes.forEach(n=>{const s=this.combineBboxAndFilter(n.geometryName,n.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:n.geometryName,filter:s}),sce(t,[n.name],[r])});return t}combineBboxAndFilter(e,t,r,n){const s=nGe(e,t,r);return n?rGe(n,s):s}writeTransaction(e,t,r,n){const s=[],o=n.version?n.version:this.version_,a=ot(FS[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;n&&(l=n.gmlOptions?n.gmlOptions:{},n.handle&&a.setAttribute("handle",n.handle)),a.setAttributeNS(ru,"xsi:schemaLocation",zle[o]);const c=hGe(a,l,o,n);return e&&z0("Insert",e,s,c),t&&z0("Update",t,s,c),r&&z0("Delete",r,s,c),n.nativeElements&&z0("Native",n.nativeElements,s,c),a}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(t,r),xe(r.pop().srsName)}}return null}}function hGe(i,e,t,r){const n=r.featurePrefix?r.featurePrefix:$ye;let s;return t==="1.0.0"?s=2:t==="1.1.0"?s=3:t==="2.0.0"&&(s=3.2),Object.assign({node:i},{version:t,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:n,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},e)}function z0(i,e,t,r){it(r,Nye,Hi(i),e,t)}function Gle(i,e){return ce({},sGe,i,e)}const uGe={"http://www.opengis.net/ogc":{FeatureId:Fe(function(i,e){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:Fe(function(i,e){return i.getAttribute("fid")})}};function Ule(i,e){ns(uGe,i,e)}const dGe={"http://www.opengis.net/wfs":{Feature:Ule},"http://www.opengis.net/wfs/2.0":{Feature:Ule}};function Vle(i,e){return ce([],dGe,i,e)}function qle(i,e,t){const r=t[t.length-1],n=r.featureType,s=r.featureNS,o=r.gmlVersion,a=ot(s,n);i.appendChild(a),o===2?Ct.prototype.writeFeatureElement(a,e,t):o===3?vt.prototype.writeFeatureElement(a,e,t):u2.prototype.writeFeatureElement(a,e,t)}function Bye(i,e,t){const n=t[t.length-1].version,s=f2[n],o=ot(s,"Filter"),a=ot(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),i.appendChild(o)}function m2(i,e){i=i||$ye;const t=i+":";return e.startsWith(t)?e:t+e}function Hle(i,e,t){const r=t[t.length-1];pt(e.getId()!==void 0,"Features must have an id set");const n=r.featureType,s=r.featurePrefix,o=r.featureNS,a=m2(s,n);i.setAttribute("typeName",a),i.setAttributeNS(d2,"xmlns:"+s,o);const l=e.getId();l!==void 0&&Bye(i,l,t)}function Wle(i,e,t){const r=t[t.length-1];pt(e.getId()!==void 0,"Features must have an id set");const n=r.version,s=r.featureType,o=r.featurePrefix,a=r.featureNS,l=m2(o,s),c=e.getGeometryName();i.setAttribute("typeName",l),i.setAttributeNS(d2,"xmlns:"+o,a);const h=e.getId();if(h!==void 0){const u=e.getKeys(),d=[];for(let f=0,p=u.length;f<p;f++){const g=e.get(u[f]);if(g!==void 0){let m=u[f];g&&typeof g.getSimplifiedGeometry=="function"&&(m=c),d.push({name:m,value:g})}}it({version:n,gmlVersion:r.gmlVersion,node:i,hasZ:r.hasZ,srsName:r.srsName},Nye,Hi("Property"),d,t),Bye(i,h,t)}}function Yle(i,e,t){const r=t[t.length-1],n=r.version,s=FS[n],a=ot(s,n==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(i.appendChild(a),Ze(a,e.name),e.value!==void 0&&e.value!==null){const c=ot(s,"Value");i.appendChild(c),e.value&&typeof e.value.getSimplifiedGeometry=="function"?l===2?Ct.prototype.writeGeometryElement(c,e.value,t):l===3?vt.prototype.writeGeometryElement(c,e.value,t):u2.prototype.writeGeometryElement(c,e.value,t):Ze(c,e.value)}}function Xle(i,e,t){e.vendorId&&i.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&Ze(i,e.value)}const yx={"http://www.opengis.net/wfs":{Query:q(Zle)},"http://www.opengis.net/wfs/2.0":{Query:q(Zle)},"http://www.opengis.net/ogc":{During:q(Qle),And:q(G0),Or:q(G0),Not:q(ece),BBOX:q(Kle),Contains:q(Wl),Intersects:q(Wl),Within:q(Wl),DWithin:q(Jle),PropertyIsEqualTo:q(js),PropertyIsNotEqualTo:q(js),PropertyIsLessThan:q(js),PropertyIsLessThanOrEqualTo:q(js),PropertyIsGreaterThan:q(js),PropertyIsGreaterThanOrEqualTo:q(js),PropertyIsNull:q(tce),PropertyIsBetween:q(ice),PropertyIsLike:q(rce)},"http://www.opengis.net/fes/2.0":{During:q(Qle),And:q(G0),Or:q(G0),Not:q(ece),BBOX:q(Kle),Contains:q(Wl),Disjoint:q(Wl),Intersects:q(Wl),ResourceId:q(pGe),Within:q(Wl),DWithin:q(Jle),PropertyIsEqualTo:q(js),PropertyIsNotEqualTo:q(js),PropertyIsLessThan:q(js),PropertyIsLessThanOrEqualTo:q(js),PropertyIsGreaterThan:q(js),PropertyIsGreaterThanOrEqualTo:q(js),PropertyIsNull:q(tce),PropertyIsBetween:q(ice),PropertyIsLike:q(rce)}};function Zle(i,e,t){const r=t[t.length-1],n=r.version,s=r.featurePrefix,o=r.featureNS,a=r.propertyNames,l=r.srsName;let c;s?c=m2(s,e):c=e;let h;n==="2.0.0"?h="typeNames":h="typeName",i.setAttribute(h,c),l&&i.setAttribute("srsName",l),o&&i.setAttributeNS(d2,"xmlns:"+s,o);const u=Object.assign({},r);u.node=i,it(u,aGe,Hi("PropertyName"),a,t);const d=r.filter;if(d){const f=ot(_x(n),"Filter");i.appendChild(f),fGe(f,d,t)}}function fGe(i,e,t){const r=t[t.length-1],n={node:i};Object.assign(n,{context:r}),it(n,yx,Hi(e.getTagName()),[e],t)}function Kle(i,e,t){const r=t[t.length-1],s=r.context.version;r.srsName=e.srsName;const o=g2[s];cp(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.extent,t)}function pGe(i,e,t){i.setAttribute("rid",e.rid)}function Wl(i,e,t){const r=t[t.length-1],s=r.context.version;r.srsName=e.srsName;const o=g2[s];cp(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.geometry,t)}function Jle(i,e,t){const s=t[t.length-1].context.version;Wl(i,e,t);const o=ot(_x(s),"Distance");Ze(o,e.distance.toString()),s==="2.0.0"?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),i.appendChild(o)}function Qle(i,e,t){const s=t[t.length-1].context.version;Tv(p2[s],"ValueReference",i,e.propertyName);const o=ot(al,"TimePeriod");i.appendChild(o);const a=ot(al,"begin");o.appendChild(a),nce(a,e.begin);const l=ot(al,"end");o.appendChild(l),nce(l,e.end)}function G0(i,e,t){const n=t[t.length-1].context,s={node:i};Object.assign(s,{context:n});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const c=o[a];it(s,yx,Hi(c.getTagName()),[c],t)}}function ece(i,e,t){const n=t[t.length-1].context,s={node:i};Object.assign(s,{context:n});const o=e.condition;it(s,yx,Hi(o.getTagName()),[o],t)}function js(i,e,t){const s=t[t.length-1].context.version;e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),cp(s,i,e.propertyName),Av(s,i,""+e.expression)}function tce(i,e,t){const s=t[t.length-1].context.version;cp(s,i,e.propertyName)}function ice(i,e,t){const s=t[t.length-1].context.version,o=_x(s);cp(s,i,e.propertyName);const a=ot(o,"LowerBoundary");i.appendChild(a),Av(s,a,""+e.lowerBoundary);const l=ot(o,"UpperBoundary");i.appendChild(l),Av(s,l,""+e.upperBoundary)}function rce(i,e,t){const s=t[t.length-1].context.version;i.setAttribute("wildCard",e.wildCard),i.setAttribute("singleChar",e.singleChar),i.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),cp(s,i,e.propertyName),Av(s,i,""+e.pattern)}function Tv(i,e,t,r){const n=ot(i,e);Ze(n,r),t.appendChild(n)}function Av(i,e,t){Tv(_x(i),"Literal",e,t)}function cp(i,e,t){i==="2.0.0"?Tv(p2[i],"ValueReference",e,t):Tv(f2[i],"PropertyName",e,t)}function nce(i,e){const t=ot(al,"TimeInstant");i.appendChild(t);const r=ot(al,"timePosition");t.appendChild(r),Ze(r,e)}function sce(i,e,t){const r=t[t.length-1],n=Object.assign({},r);n.node=i,it(n,yx,Hi("Query"),e,t)}function _x(i){let e;return i==="2.0.0"?e=p2[i]:e=f2[i],e}const gGe=cGe,si={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class oce{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let r=0;r<e;r++)t.push(this.readLineString());return t}readWkbHeader(e){const r=this.readUint8()>0,n=this.readUint32(r),s=Math.floor((n&268435455)/1e3),o=!!(n&2147483648)||s===1||s===3,a=!!(n&1073741824)||s===2||s===3,l=!!(n&536870912),c=(n&268435455)%1e3,h=["XY",o?"Z":"",a?"M":""].join(""),u=l?this.readUint32(r):null;if(e!==void 0&&e!==c)throw new Error("Unexpected WKB geometry type "+c);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==h)throw new Error("Inconsistent geometry layout");if(u&&this.srid_!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=o,this.hasM_=a,this.layout_=h,this.srid_=u,this.initialized_=!0;return c}readWkbPayload(e){switch(e){case si.POINT:return this.readPoint();case si.LINE_STRING:return this.readLineString();case si.POLYGON:case si.TRIANGLE:return this.readPolygon();case si.MULTI_POINT:return this.readMultiPoint();case si.MULTI_LINE_STRING:return this.readMultiLineString();case si.MULTI_POLYGON:case si.POLYHEDRAL_SURFACE:case si.TIN:return this.readMultiPolygon();case si.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const r=this.readUint32(),n=[];for(let s=0;s<r;s++){const o=e.call(this,t);o&&n.push(o)}return n}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,si.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,si.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,si.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case si.POINT:return new $i(t,this.layout_);case si.LINE_STRING:return new Ii(t,this.layout_);case si.POLYGON:case si.TRIANGLE:return new tr(t,this.layout_);case si.MULTI_POINT:return new oo(t,this.layout_);case si.MULTI_LINE_STRING:return new vn(t,this.layout_);case si.MULTI_POLYGON:case si.POLYHEDRAL_SURFACE:case si.TIN:return new os(t,this.layout_);case si.GEOMETRY_COLLECTION:return new Yr(t);default:return null}}getSrid(){return this.srid_}}class mGe{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const r=Object.assign.apply(null,t.split("").map((n,s)=>({[n]:e[s]})));for(const n of this.layout_)this.writeDouble(n in r?r[n]:this.nodata_[n])}writeLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writePoint(e[r],t)}writePolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeLineString(e[r],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const r=(n,s)=>n===s?n:n==="XYZM"?s:s==="XYZM"?n:"XY";if(e instanceof ba)return r(e.getLayout(),t);if(e instanceof Yr){const n=e.getGeometriesArray();for(let s=0;s<n.length&&t!=="XY";s++)t=this.findMinimumLayout(n[s],t)}return t}writeGeometry(e,t){const r={Point:si.POINT,LineString:si.LINE_STRING,Polygon:si.POLYGON,MultiPoint:si.MULTI_POINT,MultiLineString:si.MULTI_LINE_STRING,MultiPolygon:si.MULTI_POLYGON,GeometryCollection:si.GEOMETRY_COLLECTION},n=e.getType(),s=r[n];if(!s)throw new Error("GeometryType "+n+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,t),e instanceof ba?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,e.getCoordinates(),e.getLayout()):e instanceof Yr&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,o)=>s+o[0],0),t=new ArrayBuffer(e),r=new DataView(t);let n=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(n,s[1]);break;case 4:r.setUint32(n,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(n,s[1],this.isLittleEndian_);break}n+=s[0]}),t}}class yGe extends my{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new mi({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let r=[];const n=this.readGeometry(e,t);return this.splitCollection&&n instanceof Yr?r=n.getGeometriesArray():r=[n],r.map(s=>new mi({geometry:s}))}readGeometry(e,t){const r=ace(e);if(!r)return null;const s=new oce(r).readGeometry();return this.viewCache_=r,t=this.getReadOptions(e,t),this.viewCache_=null,Pi(s,!1,t)}readProjection(e){const t=this.viewCache_||ace(e);if(!t)return;const r=new oce(t);return r.readWkbHeader(),r.getSrid()&&xe("EPSG:"+r.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new Yr(e.map(r=>r.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const r=new mGe({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let n=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=t.dataProjection&&xe(t.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(n=Number(a.substring(5)))}}r.writeGeometry(Pi(e,!0,t),n);const s=r.getBuffer();return this.hex_?_Ge(s):s}}function _Ge(i){const e=new Uint8Array(i);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function vGe(i){const e=new Uint8Array(i.length/2);for(let t=0;t<i.length/2;t++)e[t]=parseInt(i.substr(t*2,2),16);return new DataView(e.buffer)}function ace(i){return typeof i=="string"?vGe(i):ArrayBuffer.isView(i)?i instanceof DataView?i:new DataView(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new DataView(i):null}const bGe=yGe,xGe={POINT:$i,LINESTRING:Ii,POLYGON:tr,MULTIPOINT:oo,MULTILINESTRING:vn,MULTIPOLYGON:os},jye="EMPTY",zye="Z",Gye="M",wGe="ZM",Qt={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},EGe={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class SGe{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let r=e,n;if(e=="(")n=Qt.LEFT_PAREN;else if(e==",")n=Qt.COMMA;else if(e==")")n=Qt.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")n=Qt.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))n=Qt.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")n=Qt.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:n}}readNumber_(){let e;const t=this.index_;let r=!1,n=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(n=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!n&&(e=="e"||e=="E")||n&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}let CGe=class{constructor(e){this.lexer_=e,this.token_={position:0,type:Qt.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(Qt.TEXT)){const r=t.value;r===zye?e="XYZ":r===Gye?e="XYM":r===wGe&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Qt.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(Qt.COMMA));if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Qt.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Qt.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Qt.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Qt.LEFT_PAREN)){let e;if(this.token_.type==Qt.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Qt.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Qt.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(Qt.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let r=0;r<t;++r){const n=this.token_;if(this.match(Qt.NUMBER))e.push(n.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(Qt.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(Qt.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(Qt.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(Qt.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(Qt.TEXT)&&this.token_.value==jye;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(Qt.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new Yr([]);const o=this.parseGeometryCollectionText_();return new Yr(o)}const n=xGe[t];if(!n)throw new Error("Invalid geometry type: "+t);let s;if(r)t=="POINT"?s=[NaN,NaN]:s=[];else switch(t){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new n(s,this.layout_)}throw new Error(this.formatErrorMessage_())}};class TGe extends r2{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new SGe(e);return new CGe(t).parse()}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t),n=new mi;return n.setGeometry(r),n}readFeaturesFromText(e,t){let r=[];const n=this.readGeometryFromText(e,t);this.splitCollection_&&n.getType()=="GeometryCollection"?r=n.getGeometriesArray():r=[n];const s=[];for(let o=0,a=r.length;o<a;++o){const l=new mi;l.setGeometry(r[o]),s.push(l)}return s}readGeometryFromText(e,t){const r=this.parse_(e);return Pi(r,!1,t)}writeFeatureText(e,t){const r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const r=[];for(let s=0,o=e.length;s<o;++s)r.push(e[s].getGeometry());const n=new Yr(r);return this.writeGeometryText(n,t)}writeGeometryText(e,t){return qye(Pi(e,!0,t))}}function Uye(i){const e=i.getCoordinates();return e.length===0?"":e.join(" ")}function AGe(i){const e=[],t=i.getPoints();for(let r=0,n=t.length;r<n;++r)e.push("("+Uye(t[r])+")");return e.join(",")}function MGe(i){const e=[],t=i.getGeometries();for(let r=0,n=t.length;r<n;++r)e.push(qye(t[r]));return e.join(",")}function y2(i){const e=i.getCoordinates(),t=[];for(let r=0,n=e.length;r<n;++r)t.push(e[r].join(" "));return t.join(",")}function RGe(i){const e=[],t=i.getLineStrings();for(let r=0,n=t.length;r<n;++r)e.push("("+y2(t[r])+")");return e.join(",")}function Vye(i){const e=[],t=i.getLinearRings();for(let r=0,n=t.length;r<n;++r)e.push("("+y2(t[r])+")");return e.join(",")}function LGe(i){const e=[],t=i.getPolygons();for(let r=0,n=t.length;r<n;++r)e.push("("+Vye(t[r])+")");return e.join(",")}function IGe(i){const e=i.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=zye),(e==="XYM"||e==="XYZM")&&(t+=Gye),t}const PGe={Point:Uye,LineString:y2,Polygon:Vye,MultiPoint:AGe,MultiLineString:RGe,MultiPolygon:LGe,GeometryCollection:MGe};function qye(i){const e=i.getType(),t=PGe[e],r=t(i);let n=EGe[e];if(typeof i.getFlatCoordinates=="function"){const s=IGe(i);s.length>0&&(n+=" "+s)}return r.length===0?n+" "+jye:n+"("+r+")"}const kGe=TGe,Jr=[null,"http://www.opengis.net/wms"],OGe=re(Jr,{Service:G(tUe),Capability:G(eUe)}),DGe=re(Jr,{Request:G(lUe),Exception:G(sUe),Layer:G(oUe)});class FGe extends c2{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=ce({version:this.version},OGe,e,[]);return t||null}}const NGe=re(Jr,{Name:G(de),Title:G(de),Abstract:G(de),KeywordList:G(Xye),OnlineResource:G(lp),ContactInformation:G(iUe),Fees:G(de),AccessConstraints:G(de),LayerLimit:G(Ji),MaxWidth:G(Ji),MaxHeight:G(Ji)}),$Ge=re(Jr,{ContactPersonPrimary:G(rUe),ContactPosition:G(de),ContactAddress:G(nUe),ContactVoiceTelephone:G(de),ContactFacsimileTelephone:G(de),ContactElectronicMailAddress:G(de)}),BGe=re(Jr,{ContactPerson:G(de),ContactOrganization:G(de)}),jGe=re(Jr,{AddressType:G(de),Address:G(de),City:G(de),StateOrProvince:G(de),PostCode:G(de),Country:G(de)}),zGe=re(Jr,{Format:Fe(de)}),Hye=re(Jr,{Name:G(de),Title:G(de),Abstract:G(de),KeywordList:G(Xye),CRS:_i(de),EX_GeographicBoundingBox:G(QGe),BoundingBox:_i(JGe),Dimension:_i(aUe),Attribution:G(KGe),AuthorityURL:_i(uUe),Identifier:_i(de),MetadataURL:_i(dUe),DataURL:_i(ml),FeatureListURL:_i(ml),Style:_i(fUe),MinScaleDenominator:G(At),MaxScaleDenominator:G(At),Layer:_i(Wye)}),GGe=re(Jr,{Title:G(de),OnlineResource:G(lp),LogoURL:G(Yye)}),UGe=re(Jr,{westBoundLongitude:G(At),eastBoundLongitude:G(At),southBoundLatitude:G(At),northBoundLatitude:G(At)}),VGe=re(Jr,{GetCapabilities:G(qw),GetMap:G(qw),GetFeatureInfo:G(qw)}),qGe=re(Jr,{Format:_i(de),DCPType:_i(cUe)}),HGe=re(Jr,{HTTP:G(hUe)}),WGe=re(Jr,{Get:G(ml),Post:G(ml)}),YGe=re(Jr,{Name:G(de),Title:G(de),Abstract:G(de),LegendURL:_i(Yye),StyleSheetURL:G(ml),StyleURL:G(ml)}),XGe=re(Jr,{Format:G(de),OnlineResource:G(lp)}),ZGe=re(Jr,{Keyword:Fe(de)});function KGe(i,e){return ce({},GGe,i,e)}function JGe(i,e){const t=[qa(i.getAttribute("minx")),qa(i.getAttribute("miny")),qa(i.getAttribute("maxx")),qa(i.getAttribute("maxy"))],r=[qa(i.getAttribute("resx")),qa(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:t,res:r}}function QGe(i,e){const t=ce({},UGe,i,e);if(!t)return;const r=t.westBoundLongitude,n=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(r===void 0||n===void 0||s===void 0||o===void 0))return[r,n,s,o]}function eUe(i,e){return ce({},DGe,i,e)}function tUe(i,e){return ce({},NGe,i,e)}function iUe(i,e){return ce({},$Ge,i,e)}function rUe(i,e){return ce({},BGe,i,e)}function nUe(i,e){return ce({},jGe,i,e)}function sUe(i,e){return ce([],zGe,i,e)}function oUe(i,e){const t=ce({},Hye,i,e);return t.Layer===void 0?Object.assign(t,Wye(i,e)):t}function Wye(i,e){const t=e[e.length-1],r=ce({},Hye,i,e);if(!r)return;let n=Gh(i.getAttribute("queryable"));n===void 0&&(n=t.queryable),r.queryable=n!==void 0?n:!1;let s=el(i.getAttribute("cascaded"));s===void 0&&(s=t.cascaded),r.cascaded=s;let o=Gh(i.getAttribute("opaque"));o===void 0&&(o=t.opaque),r.opaque=o!==void 0?o:!1;let a=Gh(i.getAttribute("noSubsets"));a===void 0&&(a=t.noSubsets),r.noSubsets=a!==void 0?a:!1;let l=qa(i.getAttribute("fixedWidth"));l||(l=t.fixedWidth),r.fixedWidth=l;let c=qa(i.getAttribute("fixedHeight"));return c||(c=t.fixedHeight),r.fixedHeight=c,["Style","CRS","AuthorityURL"].forEach(function(d){if(d in t){const f=r[d]||[];r[d]=f.concat(t[d])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(d){if(!(d in r)){const f=t[d];r[d]=f}}),r}function aUe(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:Gh(i.getAttribute("multipleValues")),nearestValue:Gh(i.getAttribute("nearestValue")),current:Gh(i.getAttribute("current")),values:de(i)}}function ml(i,e){return ce({},XGe,i,e)}function lUe(i,e){return ce({},VGe,i,e)}function cUe(i,e){return ce({},HGe,i,e)}function hUe(i,e){return ce({},WGe,i,e)}function qw(i,e){return ce({},qGe,i,e)}function Yye(i,e){const t=ml(i,e);if(t){const r=[el(i.getAttribute("width")),el(i.getAttribute("height"))];return t.size=r,t}}function uUe(i,e){const t=ml(i,e);if(t)return t.name=i.getAttribute("name"),t}function dUe(i,e){const t=ml(i,e);if(t)return t.type=i.getAttribute("type"),t}function fUe(i,e){return ce({},YGe,i,e)}function Xye(i,e){return ce([],ZGe,i,e)}const pUe=FGe,gUe="_feature",mUe="_layer";class yUe extends _y{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new Ct,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let n=[];if(e.childNodes.length===0)return n;if(r=="msGMLOutput")for(let s=0,o=e.childNodes.length;s<o;s++){const a=e.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,c=t[0],h=mUe,u=l.localName.replace(h,"");if(this.layers_&&!this.layers_.includes(u))continue;const d=u+gUe;c.featureType=d,c.featureNS=this.featureNS_;const f={};f[d]=Fe(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=re([c.featureNS,null],f);l.setAttribute("namespaceURI",this.featureNS_);const g=ce([],p,l,t,this.gmlFormat_);g&&Ot(n,g)}if(r=="FeatureCollection"){const s=ce([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(n=s)}return n}readFeaturesFromNode(e,t){const r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}const _Ue=yUe,Ma=[null,"http://www.opengis.net/wmts/1.0"],hp=[null,"http://www.opengis.net/ows/1.1"],vUe=re(Ma,{Contents:G(LUe)});let bUe=class extends c2{constructor(){super(),this.owsParser_=new kye}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=ce(r,vUe,e,[]),r||null):null}};const xUe=re(Ma,{Layer:_i(IUe),TileMatrixSet:_i(PUe)}),wUe=re(Ma,{Style:_i(kUe),Format:_i(de),TileMatrixSetLink:_i(OUe),Dimension:_i(DUe),ResourceURL:_i(FUe)},re(hp,{Title:G(de),Abstract:G(de),WGS84BoundingBox:G(Kye),BoundingBox:_i(NUe),Identifier:G(de)})),EUe=re(Ma,{LegendURL:_i($Ue)},re(hp,{Title:G(de),Identifier:G(de)})),SUe=re(Ma,{TileMatrixSet:G(de),TileMatrixSetLimits:G(jUe)}),CUe=re(Ma,{TileMatrixLimits:Fe(zUe)}),TUe=re(Ma,{TileMatrix:G(de),MinTileRow:G(Ji),MaxTileRow:G(Ji),MinTileCol:G(Ji),MaxTileCol:G(Ji)}),AUe=re(Ma,{Default:G(de),Value:_i(de)},re(hp,{Identifier:G(de)})),Zye=re(hp,{LowerCorner:Fe(NS),UpperCorner:Fe(NS)}),MUe=re(Ma,{WellKnownScaleSet:G(de),TileMatrix:_i(BUe)},re(hp,{SupportedCRS:G(de),Identifier:G(de),BoundingBox:G(Kye)})),RUe=re(Ma,{TopLeftCorner:G(NS),ScaleDenominator:G(At),TileWidth:G(Ji),TileHeight:G(Ji),MatrixWidth:G(Ji),MatrixHeight:G(Ji)},re(hp,{Identifier:G(de)}));function LUe(i,e){return ce({},xUe,i,e)}function IUe(i,e){return ce({},wUe,i,e)}function PUe(i,e){return ce({},MUe,i,e)}function kUe(i,e){const t=ce({},EUe,i,e);if(!t)return;const r=i.getAttribute("isDefault")==="true";return t.isDefault=r,t}function OUe(i,e){return ce({},SUe,i,e)}function DUe(i,e){return ce({},AUe,i,e)}function FUe(i,e){const t=i.getAttribute("format"),r=i.getAttribute("template"),n=i.getAttribute("resourceType"),s={};return t&&(s.format=t),r&&(s.template=r),n&&(s.resourceType=n),s}function Kye(i,e){const t=ce([],Zye,i,e);if(t.length==2)return Vr(t)}function NUe(i,e){const t=i.getAttribute("crs"),r=ce([],Zye,i,e);if(r.length==2)return{extent:Vr(r),crs:t}}function $Ue(i,e){const t={};return t.format=i.getAttribute("format"),t.href=lp(i),t}function NS(i,e){const t=de(i).split(/\s+/);if(!t||t.length!=2)return;const r=+t[0],n=+t[1];if(!(isNaN(r)||isNaN(n)))return[r,n]}function BUe(i,e){return ce({},RUe,i,e)}function jUe(i,e){return ce([],CUe,i,e)}function zUe(i,e){return ce({},TUe,i,e)}const _2=bUe,GUe=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:xBe,GML:HBe,GPX:P5e,GeoJSON:op,IGC:$5e,IIIFInfo:q5e,KML:Iye,MVT:l2,OWS:kye,Polyline:zze,TopoJSON:Dye,WFS:gGe,WKB:bGe,WKT:kGe,WMSCapabilities:pUe,WMSGetFeatureInfo:_Ue,WMTSCapabilities:_2},Symbol.toStringTag,{value:"Module"})),He={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},U0=[He.FILL],hc=[He.STROKE],Oh=[He.BEGIN_PATH],lce=[He.CLOSE_PATH];class Jye{drawCustom(e,t,r,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class by extends Jye{constructor(e,t,r,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],As(r,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(e,t,r,n,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=n);let h=e[t],u=e[t+1];const d=this.tmpCoordinate_;let f=!0,p,g,m;for(p=t+n;p<r;p+=n)d[0]=e[p],d[1]=e[p+1],m=fS(c,d),m!==g?(f&&(a[l++]=h,a[l++]=u,f=!1),a[l++]=d[0],a[l++]=d[1]):m===Ir.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,h=d[0],u=d[1],g=m;return(s&&f||p===t+n)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(e,t,r,n,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],c=this.appendFlatLineCoordinates(e,t,l,n,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,r,n,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,h,u,d,f;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let g=0,m=p.length;g<m;++g){const y=[];f=this.drawCustomCoordinates_(c,f,p[g],a,y),d.push(y)}this.instructions.push([He.CUSTOM,l,d,e,r,vS,s]),this.hitDetectionInstructions.push([He.CUSTOM,l,d,e,n||r,vS,s]);break;case"Polygon":case"MultiLineString":u=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,u),this.instructions.push([He.CUSTOM,l,u,e,r,gm,s]),this.hitDetectionInstructions.push([He.CUSTOM,l,u,e,n||r,gm,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([He.CUSTOM,l,h,e,r,Qa,s]),this.hitDetectionInstructions.push([He.CUSTOM,l,h,e,n||r,Qa,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([He.CUSTOM,l,h,e,r,Qa,s]),this.hitDetectionInstructions.push([He.CUSTOM,l,h,e,n||r,Qa,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([He.CUSTOM,l,h,e,r,void 0,s]),this.hitDetectionInstructions.push([He.CUSTOM,l,h,e,n||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[He.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[He.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let n,s,o=-1;for(t=0;t<r;++t)n=e[t],s=n[0],s==He.END_GEOMETRY?o=t:s==He.BEGIN_GEOMETRY&&(n[2]=t,JFe(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const n=e.getColor();r.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,r.fillStyle=aa(n||Kn)}else r.fillStyle=void 0;if(t){const n=t.getColor();r.strokeStyle=aa(n||_m);const s=t.getLineCap();r.lineCap=s!==void 0?s:Sf;const o=t.getLineDash();r.lineDash=o?o.slice():sl;const a=t.getLineDashOffset();r.lineDashOffset=a||ol;const l=t.getLineJoin();r.lineJoin=l!==void 0?l:Cf;const c=t.getWidth();r.lineWidth=c!==void 0?c:bm;const h=t.getMiterLimit();r.miterLimit=h!==void 0?h:ym,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[He.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[He.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,n=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=n||s!=e.currentLineDash&&!Ta(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[He.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Jge(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;rs(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class UUe extends by{constructor(e,t,r,n){super(e,t,r,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!As(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const n=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,s);this.instructions.push([He.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([He.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const n=e.getFlatCoordinates(),s=[];for(let l=0,c=n.length;l<c;l+=e.getStride())(!this.maxExtent||As(this.maxExtent,n.slice(l,l+2)))&&s.push(n[l],n[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([He.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([He.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const VUe=UUe;class qUe extends by{constructor(e,t,r,n){super(e,t,r,n)}drawFlatCoordinates_(e,t,r,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,r,n,!1,!1),a=[He.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([He.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,sl,ol],Oh);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(hc),this.endGeometry(t)}drawMultiLineString(e,t,r){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([He.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,sl,ol],Oh);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(hc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(hc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(hc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Oh)}}const HUe=qUe;class WUe extends by{constructor(e,t,r,n){super(e,t,r,n)}drawFlatCoordinatess_(e,t,r,n){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(Oh),this.hitDetectionInstructions.push(Oh);for(let c=0;c<l;++c){const h=r[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,h,n,!0,!a),f=[He.MOVE_TO_LINE_TO,u,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(lce),this.hitDetectionInstructions.push(lce)),t=h}return o&&(this.instructions.push(U0),this.hitDetectionInstructions.push(U0)),a&&(this.instructions.push(hc),this.hitDetectionInstructions.push(hc)),t}drawCircle(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_FILL_STYLE,Kn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,sl,ol]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[He.CIRCLE,c];this.instructions.push(Oh,h),this.hitDetectionInstructions.push(Oh,h),n.fillStyle!==void 0&&(this.instructions.push(U0),this.hitDetectionInstructions.push(U0)),n.strokeStyle!==void 0&&(this.instructions.push(hc),this.hitDetectionInstructions.push(hc)),this.endGeometry(t)}drawPolygon(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_FILL_STYLE,Kn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,sl,ol]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,r){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_FILL_STYLE,Kn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([He.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,sl,ol]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,n=t.length;r<n;++r)t[r]=Th(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const cce=WUe;function YUe(i,e,t,r,n){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+n<r;){const[c,h]=l.slice(-2),u=e[o+n],d=e[o+n+1],f=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=f,a>=i){const p=(i-a+f)/f,g=Es(c,u,p),m=Es(h,d,p);l.push(g,m),s.push(l),l=[g,m],a==i&&(o+=n),a=0}else if(a<i)l.push(e[o+n],e[o+n+1]),o+=n;else{const p=f-a,g=Es(c,u,p/f),m=Es(h,d,p/f);l.push(g,m),s.push(l),l=[g,m],a=0,o+=n}}return a>0&&s.push(l),s}function XUe(i,e,t,r,n){let s=t,o=t,a=0,l=0,c=t,h,u,d,f,p,g,m,y,_,v;for(u=t;u<r;u+=n){const x=e[u],w=e[u+1];p!==void 0&&(_=x-p,v=w-g,f=Math.sqrt(_*_+v*v),m!==void 0&&(l+=d,h=Math.acos((m*_+y*v)/(d*f)),h>i&&(l>a&&(a=l,s=c,o=u),l=0,c=u-n)),d=f,m=_,y=v),p=x,g=w}return l+=f,l>a?[c,u]:[s,o]}const Mv={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class ZUe extends by{constructor(e,t,r,n){super(e,t,r,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Kn]={fillStyle:Kn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const n=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let h=null,u=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!gi(this.maxExtent,e.getExtent()))return;let d;if(h=e.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const m=e.getEndss();d=[];for(let y=0,_=m.length;y<_;++y)d.push(m[y][0])}this.beginGeometry(e,t,r);const f=o.repeat,p=f?void 0:o.textAlign;let g=0;for(let m=0,y=d.length;m<y;++m){let _;f?_=YUe(f*this.resolution,h,g,d[m],u):_=[h.slice(g,d[m])];for(let v=0,x=_.length;v<x;++v){const w=_[v];let T=0,A=w.length;if(p==null){const L=XUe(o.maxAngle,w,0,w.length,2);T=L[0],A=L[1]}for(let L=T;L<A;L+=u)a.push(w[L],w[L+1]);const R=a.length;g=d[m],this.drawChars_(l,R),l=R}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),u=2;break;case"Polygon":h=e.getFlatInteriorPoint(),o.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const _=e.getFlatInteriorPoints();h=[];for(let v=0,x=_.length;v<x;v+=3)o.overflow||d.push(_[v+2]/this.resolution),h.push(_[v],_[v+1]);if(h.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(h,u);if(f===l)return;if(d&&(f-l)/2!==h.length/u){let _=l/2;d=d.filter((v,x)=>{const w=a[(_+x)*2]===h[x*u]&&a[(_+x)*2+1]===h[x*u+1];return w||--_,w})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let p=o.padding;if(p!=Ph&&(o.scale[0]<0||o.scale[1]<0)){let _=o.padding[0],v=o.padding[1],x=o.padding[2],w=o.padding[3];o.scale[0]<0&&(v=-v,w=-w),o.scale[1]<0&&(_=-_,x=-x),p=[_,v,x,w]}const g=this.pixelRatio;this.instructions.push([He.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==Ph?Ph:p.map(function(_){return _*g}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/g,y=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Kn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([He.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Kn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||vm,justify:t.justify,textBaseline:t.textBaseline||fv,scale:t.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Mv[n.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([He.DRAW_CHARS,e,t,c,n.overflow,a,n.maxAngle,l,h,s,d*l,u,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([He.DRAW_CHARS,e,t,c,n.overflow,a&&Kn,n.maxAngle,l,h,s,d*l,u,o,1/l,this.declutterMode_])}setTextStyle(e,t){let r,n,s;if(!e)this.text_="";else{const o=e.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=aa(o.getColor()||Kn)):(n=null,this.textFillState_=n);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),g=a.getLineDashOffset(),m=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||Sf,s.lineDash=p?p.slice():sl,s.lineDashOffset=g===void 0?ol:g,s.lineJoin=a.getLineJoin()||Cf,s.lineWidth=m===void 0?bm:m,s.miterLimit=y===void 0?ym:y,s.strokeStyle=aa(a.getColor()||_m)}r=this.textState_;const l=e.getFont()||Pme;T3e(l);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||fv,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Ph,r.scale=c===void 0?[1,1]:c;const h=e.getOffsetX(),u=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ae(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Ae(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const KUe={Circle:cce,Default:by,Image:VUe,LineString:HUe,Polygon:cce,Text:ZUe};class Qye{constructor(e,t,r,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const n in r){const s=r[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[r];n===void 0&&(n={},this.buildersByZIndex_[r]=n);let s=n[t];if(s===void 0){const o=KUe[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}class e0e extends oy{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return ze()}getData(e){return null}prepareFrame(e){return ze()}renderFrame(e,t){return ze()}loadedTileCallback(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}createLoadedTileFinder(e,t,r){return(n,s)=>{const o=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,s,o)}}forEachFeatureAtCoordinate(e,t,r,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Le.LOADED||t.getState()===Le.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Le.LOADED&&t!=Le.ERROR&&e.addEventListener(Ie.CHANGE,this.boundHandleImageChange_),t==Le.IDLE&&(e.load(),t=e.getState()),t==Le.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class v2{constructor(){ee(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(e,t)=>{if(typeof xS()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,n=t.length;r<n;r+=2){const s=t[r],o=t[r+1];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const hce=[];let yd=null;function JUe(){yd=vi(1,1,void 0,{willReadFrequently:!0})}class b2 extends e0e{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Vi(),this.pixelTransform=Vi(),this.inversePixelTransform=Vi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,r){yd||JUe(),yd.clearRect(0,0,1,1);let n;try{yd.drawImage(e,t,r,1,1,0,0,1,1),n=yd.getImageData(0,0,1,1).data}catch{return yd=null,null}return n}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const n=this.getLayer().getClassName();let s,o;if(e&&e.className===n&&(!r||e&&e.style.backgroundColor&&Ta(Do(e.style.backgroundColor),Do(r)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=vi();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const n=No(r),s=ep(r),o=Qf(r),a=Qh(r);Ci(t.coordinateToPixelTransform,n),Ci(t.coordinateToPixelTransform,s),Ci(t.coordinateToPixelTransform,o),Ci(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ci(l,n),Ci(l,s),Ci(l,o),Ci(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,r){const n=this.getLayer();if(n.hasListener(e)){const s=new Dg(e,this.inversePixelTransform,r,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(vr.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(vr.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new v2),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(vr.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(vr.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,n,s,o,a){const l=s/2,c=o/2,h=n/t,u=-h,d=-e[0]+a,f=-e[1];return Pn(this.tempTransform,l,c,h,u,-r,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function QUe(i,e,t,r,n,s,o,a,l,c,h,u){let d=i[e],f=i[e+1],p=0,g=0,m=0,y=0;function _(){p=d,g=f,e+=r,d=i[e],f=i[e+1],y+=m,m=Math.sqrt((d-p)*(d-p)+(f-g)*(f-g))}do _();while(e<t-r&&y+m<s);let v=m===0?0:(s-y)/m;const x=Es(p,d,v),w=Es(g,f,v),T=e-r,A=y,R=s+a*l(c,n,h);for(;e<t-r&&y+m<R;)_();v=m===0?0:(R-y)/m;const L=Es(p,d,v),P=Es(g,f,v);let F;if(u){const M=[x,w,L,P];ST(M,0,4,2,u,M,M),F=M[0]>M[2]}else F=x>L;const B=Math.PI,b=[],E=T+r===e;e=T,m=0,y=A,d=i[e],f=i[e+1];let C;if(E){_(),C=Math.atan2(f-g,d-p),F&&(C+=C>0?-B:B);const M=(L+x)/2,O=(P+w)/2;return b[0]=[M,O,(R-s)/2,C,n],b}n=n.replace(/\n/g," ");for(let M=0,O=n.length;M<O;){_();let D=Math.atan2(f-g,d-p);if(F&&(D+=D>0?-B:B),C!==void 0){let N=D-C;if(N+=N>B?-2*B:N<-B?2*B:0,Math.abs(N)>o)return null}C=D;const U=M;let z=0;for(;M<O;++M){const N=F?O-M-1:M,X=a*l(c,n[N],h);if(e+r<t&&y+m<s+z+X/2)break;z+=X}if(M===U)continue;const Z=F?n.substring(O-U,O-M):n.substring(U,M);v=m===0?0:(s+z/2-y)/m;const Q=Es(p,d,v),V=Es(g,f,v);b.push([Q,V,z/2,D,Z]),s+=z}return b}const nd=_n(),Ul=[],Oa=[],Da=[],Vl=[];function uce(i){return i[3].declutterBox}const dce=new RegExp("[-----]");function Hw(i,e){return e==="start"?e=dce.test(i)?"right":"left":e==="end"&&(e=dce.test(i)?"left":"right"),Mv[e]}function e6e(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class t6e{constructor(e,t,r,n,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Vi(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new v2:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,n){const s=e+t+r+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=Array.isArray(e),d=l.justify?Mv[l.justify]:Hw(Array.isArray(e)?e[0]:e,l.textAlign||vm),f=n&&o.lineWidth?o.lineWidth:0,p=u?e:e.split(`
`).reduce(e6e,[]),{width:g,height:m,widths:y,heights:_,lineWidths:v}=M3e(l,p),x=g+f,w=[],T=(x+2)*h[0],A=(m+f)*h[1],R={width:T<0?Math.floor(T):Math.ceil(T),height:A<0?Math.floor(A):Math.ceil(A),contextInstructions:w};(h[0]!=1||h[1]!=1)&&w.push("scale",h),n&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",f),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),r&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");const L=.5-d;let P=d*x+L*f;const F=[],B=[];let b=0,E=0,C=0,M=0,O;for(let D=0,U=p.length;D<U;D+=2){const z=p[D];if(z===`
`){E+=b,b=0,P=d*x+L*f,++M;continue}const Z=p[D+1]||l.font;Z!==O&&(n&&F.push("font",Z),r&&B.push("font",Z),O=Z),b=Math.max(b,_[C]);const Q=[z,P+L*y[C]+d*(y[C]-v[M]),.5*(f+b)+E];P+=y[C],n&&F.push("strokeText",Q),r&&B.push("fillText",Q),++C}return Array.prototype.push.apply(w,F),Array.prototype.push.apply(w,B),this.labels_[s]=R,R}replayTextBackground_(e,t,r,n,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,n,s,o,a,l,c,h,u,d,f,p,g,m){a*=d[0],l*=d[1];let y=r-a,_=n-l;const v=s+c>e?e-c:s,x=o+h>t?t-h:o,w=p[3]+v*d[0]+p[1],T=p[0]+x*d[1]+p[2],A=y-p[3],R=_-p[0];(g||u!==0)&&(Ul[0]=A,Vl[0]=A,Ul[1]=R,Oa[1]=R,Oa[0]=A+w,Da[0]=Oa[0],Da[1]=R+T,Vl[1]=Da[1]);let L;return u!==0?(L=Pn(Vi(),r,n,1,1,u,-r,-n),Ci(L,Ul),Ci(L,Oa),Ci(L,Da),Ci(L,Vl),to(Math.min(Ul[0],Oa[0],Da[0],Vl[0]),Math.min(Ul[1],Oa[1],Da[1],Vl[1]),Math.max(Ul[0],Oa[0],Da[0],Vl[0]),Math.max(Ul[1],Oa[1],Da[1],Vl[1]),nd)):to(Math.min(A,A+w),Math.min(R,R+T),Math.max(A,A+w),Math.max(R,R+T),nd),f&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:v,drawImageH:x,originX:c,originY:h,declutterBox:{minX:nd[0],minY:nd[1],maxX:nd[2],maxY:nd[3],value:m},canvasTransform:L,scale:d}}replayImageOrLabel_(e,t,r,n,s,o,a){const l=!!(o||a),c=n.declutterBox,h=a?a[2]*n.scale[0]/2:0;return c.minX-h<=t[0]&&c.maxX+h>=0&&c.minY-h<=t[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,Ul,Oa,Da,Vl,o,a),R3e(e,n.canvasTransform,s,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Ci(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(r[0]%n,r[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,n){const s=this.textStates[t],o=this.createLabel(e,t,n,r),a=this.strokeStates[r],l=this.pixelRatio,c=Hw(Array.isArray(e)?e[0]:e,s.textAlign||vm),h=Mv[s.textBaseline||fv],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*u,p=h*o.height/l+2*(.5-h)*u;return{label:o,anchorX:f,anchorY:p}}execute_(e,t,r,n,s,o,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&Ta(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=pc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),DNe(this.renderedTransform_,r));let u=0;const d=n.length;let f=0,p,g,m,y,_,v,x,w,T,A,R,L,P,F=0,B=0,b=null,E=null;const C=this.coordinateCache_,M=this.viewRotation_,O=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,D={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},U=this.instructions!=n||this.overlaps?0:200;let z,Z,Q,V;for(;u<d;){const N=n[u];switch(N[0]){case He.BEGIN_GEOMETRY:z=N[1],V=N[3],z.getGeometry()?a!==void 0&&!gi(a,V.getExtent())?u=N[2]+1:++u:u=N[2],c&&(c.zIndex=N[4]);break;case He.BEGIN_PATH:F>U&&(this.fill_(e),F=0),B>U&&(e.stroke(),B=0),!F&&!B&&(e.beginPath(),_=NaN,v=NaN),++u;break;case He.CIRCLE:f=N[1];const ne=h[f],fe=h[f+1],ve=h[f+2],ge=h[f+3],he=ve-ne,Ce=ge-fe,Ue=Math.sqrt(he*he+Ce*Ce);e.moveTo(ne+Ue,fe),e.arc(ne,fe,Ue,0,2*Math.PI,!0),++u;break;case He.CLOSE_PATH:e.closePath(),++u;break;case He.CUSTOM:f=N[1],p=N[2];const Je=N[3],Bi=N[4],ki=N[5];D.geometry=Je,D.feature=z,u in C||(C[u]=[]);const bi=C[u];ki?ki(h,f,p,2,bi):(bi[0]=h[f],bi[1]=h[f+1],bi.length=2),c&&(c.zIndex=N[6]),Bi(bi,D),++u;break;case He.DRAW_IMAGE:f=N[1],p=N[2],T=N[3],g=N[4],m=N[5];let hs=N[6];const co=N[7],oe=N[8],ho=N[9],jo=N[10];let Ar=N[11];const Fr=N[12];let wn=N[13];y=N[14]||"declutter";const tn=N[15];if(!T&&N.length>=20){A=N[19],R=N[20],L=N[21],P=N[22];const Wi=this.drawLabelWithPointPlacement_(A,R,L,P);T=Wi.label,N[3]=T;const fs=N[23];g=(Wi.anchorX-fs)*this.pixelRatio,N[4]=g;const Nr=N[24];m=(Wi.anchorY-Nr)*this.pixelRatio,N[5]=m,hs=T.height,N[6]=hs,wn=T.width,N[13]=wn}let uo;N.length>25&&(uo=N[25]);let fo,us,Nn;N.length>17?(fo=N[16],us=N[17],Nn=N[18]):(fo=Ph,us=!1,Nn=!1),jo&&O?Ar+=M:!jo&&!O&&(Ar-=M);let Rl=0;for(;f<p;f+=2){if(uo&&uo[Rl++]<wn/this.pixelRatio)continue;const Wi=this.calculateImageOrLabelDimensions_(T.width,T.height,h[f],h[f+1],wn,hs,g,m,oe,ho,Ar,Fr,s,fo,us||Nn,z),fs=[e,t,T,Wi,co,us?b:null,Nn?E:null];if(l){let Nr,En,Mr;if(tn){const yi=p-f;if(!tn[yi]){tn[yi]={args:fs,declutterMode:y};continue}const ir=tn[yi];Nr=ir.args,En=ir.declutterMode,delete tn[yi],Mr=uce(Nr)}let $n,Sn;if(Nr&&(En!=="declutter"||!l.collides(Mr))&&($n=!0),(y!=="declutter"||!l.collides(Wi.declutterBox))&&(Sn=!0),En==="declutter"&&y==="declutter"){const yi=$n&&Sn;$n=yi,Sn=yi}$n&&(En!=="none"&&l.insert(Mr),this.replayImageOrLabel_.apply(this,Nr)),Sn&&(y!=="none"&&l.insert(Wi.declutterBox),this.replayImageOrLabel_.apply(this,fs))}else this.replayImageOrLabel_.apply(this,fs)}++u;break;case He.DRAW_CHARS:const ur=N[1],Bc=N[2],Ll=N[3],wu=N[4];P=N[5];const Eu=N[6],jc=N[7],zc=N[8];L=N[9];const Il=N[10];A=N[11],R=N[12];const Gc=[N[13],N[13]];y=N[14]||"declutter";const Pl=this.textStates[R],zo=Pl.font,ds=[Pl.scale[0]*jc,Pl.scale[1]*jc];let Go;zo in this.widths_?Go=this.widths_[zo]:(Go={},this.widths_[zo]=Go);const kl=tye(h,ur,Bc,2),Uc=Math.abs(ds[0])*mle(zo,A,Go);if(wu||Uc<=kl){const Wi=this.textStates[R].textAlign,fs=(kl-Uc)*Hw(A,Wi),Nr=QUe(h,ur,Bc,2,A,fs,Eu,Math.abs(ds[0]),mle,zo,Go,O?0:this.viewRotation_);e:if(Nr){const En=[];let Mr,$n,Sn,yi,ir;if(L)for(Mr=0,$n=Nr.length;Mr<$n;++Mr){ir=Nr[Mr],Sn=ir[4],yi=this.createLabel(Sn,R,"",L),g=ir[2]+(ds[0]<0?-Il:Il),m=Ll*yi.height+(.5-Ll)*2*Il*ds[1]/ds[0]-zc;const Bn=this.calculateImageOrLabelDimensions_(yi.width,yi.height,ir[0],ir[1],yi.width,yi.height,g,m,0,0,ir[3],Gc,!1,Ph,!1,z);if(l&&y==="declutter"&&l.collides(Bn.declutterBox))break e;En.push([e,t,yi,Bn,1,null,null])}if(P)for(Mr=0,$n=Nr.length;Mr<$n;++Mr){ir=Nr[Mr],Sn=ir[4],yi=this.createLabel(Sn,R,P,""),g=ir[2],m=Ll*yi.height-zc;const Bn=this.calculateImageOrLabelDimensions_(yi.width,yi.height,ir[0],ir[1],yi.width,yi.height,g,m,0,0,ir[3],Gc,!1,Ph,!1,z);if(l&&y==="declutter"&&l.collides(Bn.declutterBox))break e;En.push([e,t,yi,Bn,1,null,null])}l&&y!=="none"&&l.load(En.map(uce));for(let Bn=0,Ol=En.length;Bn<Ol;++Bn)this.replayImageOrLabel_.apply(this,En[Bn])}}++u;break;case He.END_GEOMETRY:if(o!==void 0){z=N[1];const Wi=o(z,V);if(Wi)return Wi}++u;break;case He.FILL:U?F++:this.fill_(e),++u;break;case He.MOVE_TO_LINE_TO:for(f=N[1],p=N[2],Z=h[f],Q=h[f+1],x=Z+.5|0,w=Q+.5|0,(x!==_||w!==v)&&(e.moveTo(Z,Q),_=x,v=w),f+=2;f<p;f+=2)Z=h[f],Q=h[f+1],x=Z+.5|0,w=Q+.5|0,(f==p-2||x!==_||w!==v)&&(e.lineTo(Z,Q),_=x,v=w);++u;break;case He.SET_FILL_STYLE:b=N,this.alignAndScaleFill_=N[2],F&&(this.fill_(e),F=0,B&&(e.stroke(),B=0)),e.fillStyle=N[1],++u;break;case He.SET_STROKE_STYLE:E=N,B&&(e.stroke(),B=0),this.setStrokeStyle_(e,N),++u;break;case He.STROKE:U?B++:e.stroke(),++u;break;default:++u;break}}F&&this.fill_(e),B&&e.stroke()}execute(e,t,r,n,s,o){this.viewRotation_=n,this.execute_(e,t,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,r,n,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const jg=["Polygon","Circle","LineString","Image","Text","Default"],Rv=["Image","Text"],i6e=jg.filter(i=>!Rv.includes(i));class t0e{constructor(e,t,r,n,s,o,a){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Vi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);const s=e[r];for(const o in s){const a=s[o];n[o]=new t6e(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,n,s,o){n=Math.round(n);const a=n*2+1,l=Pn(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=vi(a,a,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=_n(),kg(u,e),rs(u,t*(this.renderBuffer_+n),u));const d=r6e(n);let f;function p(w,T){const A=h.getImageData(0,0,a,a).data;for(let R=0,L=d.length;R<L;R++)if(A[d[R]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(w)){const P=(d[R]-3)/4,F=n-P%a,B=n-(P/a|0),b=s(w,T,F*F+B*B);if(b)return b}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(fa);let m,y,_,v,x;for(m=g.length-1;m>=0;--m){const w=g[m].toString();for(_=this.executorsByZIndex_[w],y=jg.length-1;y>=0;--y)if(f=jg[y],v=_[f],v!==void 0&&(x=v.executeHitDetection(h,l,r,p,u),x))return x}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],n=t[1],s=t[2],o=t[3],a=[r,n,r,o,s,o,s,n];return pc(a,0,8,2,e,a),a}isEmpty(){return gl(this.executorsByZIndex_)}execute(e,t,r,n,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(fa),o=o||jg;let c,h,u,d,f,p;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const g=l[c].toString();for(f=this.executorsByZIndex_[g],u=0,d=o.length;u<d;++u){const m=o[u];if(p=f[m],p!==void 0){const y=a===null?void 0:p.getZIndexContext(),_=y?y.getContext():e,v=this.maxExtent_&&m!=="Image"&&m!=="Text";if(v&&(_.save(),this.clip(_,r)),p.execute(_,t,r,n,s,a),v&&_.restore(),y){y.offset();const x=l[c];this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(fa);for(let r=0,n=t.length;r<n;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()})}}const Ww={};function r6e(i){if(Ww[i]!==void 0)return Ww[i];const e=i*2+1,t=i*i,r=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=r[a];l||(l=[],r[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const n=[];for(let s=0,o=r.length;s<o;++s)r[s]&&n.push(...r[s]);return Ww[i]=n,n}class n6e extends Jye{constructor(e,t,r,n,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=n,this.transformRotation_=n?Kf(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Vi()}drawImages_(e,t,r,n){if(!this.image_)return;const s=pc(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=s.length;h<u;h+=2){const d=s[h]-this.imageAnchorX_,f=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,g=f+this.imageAnchorY_;Pn(a,p,g,1,1,c,-p,-g),o.save(),o.transform.apply(o,a),o.translate(p,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,r,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=pc(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=n){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,r,n,s){const o=this.context_,a=pc(e,t,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,t,r,n){for(let s=0,o=r.length;s<o;++s)t=this.moveToLineTo_(e,t,r[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=zNe(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,n=t.length;r<n;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(gi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(n,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!gi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];n=this.drawRings_(r,n,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Ta(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,n=e.textAlign?e.textAlign:vm;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=n&&(r.textAlign=n,t.textAlign=n),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:aa(r||Kn)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=s||sl;this.strokeState_={lineCap:n!==void 0?n:Sf,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||ol)*this.pixelRatio_,lineJoin:a!==void 0?a:Cf,lineWidth:(l!==void 0?l:bm)*this.pixelRatio_,miterLimit:c!==void 0?c:ym,strokeStyle:aa(r||_m)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:aa(f||Kn)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const f=r.getColor(),p=r.getLineCap(),g=r.getLineDash(),m=r.getLineDashOffset(),y=r.getLineJoin(),_=r.getWidth(),v=r.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:Sf,lineDash:g||sl,lineDashOffset:m||ol,lineJoin:y!==void 0?y:Cf,lineWidth:_!==void 0?_:bm,miterLimit:v!==void 0?v:ym,strokeStyle:aa(f||_m)}}const n=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:n!==void 0?n:Pme,textAlign:u!==void 0?u:vm,textBaseline:d!==void 0?d:fv},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,p,g)=>f+=g%2?" ":p,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const i0e=n6e,Cs=.5;function r0e(i,e,t,r,n,s,o,a,l){const c=l?ly(n):n,h=i[0]*Cs,u=i[1]*Cs,d=vi(h,u);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new i0e(d,Cs,n,null,o,a,l?Sl(TNe(),l):null),g=t.length,m=Math.floor((256*256*256-1)/g),y={};for(let v=1;v<=g;++v){const x=t[v-1],w=x.getStyleFunction()||r;if(!w)continue;let T=w(x,s);if(!T)continue;Array.isArray(T)||(T=[T]);const R=(v*m).toString(16).padStart(7,"#00000");for(let L=0,P=T.length;L<P;++L){const F=T[L],B=F.getGeometryFunction()(x);if(!B||!gi(c,B.getExtent()))continue;const b=F.clone(),E=b.getFill();E&&E.setColor(R);const C=b.getStroke();C&&(C.setColor(R),C.setLineDash(null)),b.setText(void 0);const M=F.getImage();if(M){const z=M.getImageSize();if(!z)continue;const Z=vi(z[0],z[1],void 0,{alpha:!1}),Q=Z.canvas;Z.fillStyle=R,Z.fillRect(0,0,Q.width,Q.height),b.setImage(new ox({img:Q,anchor:M.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}const O=b.getZIndex()||0;let D=y[O];D||(D={},y[O]=D,D.Polygon=[],D.Circle=[],D.LineString=[],D.Point=[]);const U=B.getType();if(U==="GeometryCollection"){const z=B.getGeometriesArrayRecursive();for(let Z=0,Q=z.length;Z<Q;++Z){const V=z[Z];D[V.getType().replace("Multi","")].push(V,b)}}else D[U.replace("Multi","")].push(B,b)}}const _=Object.keys(y).map(Number).sort(fa);for(let v=0,x=_.length;v<x;++v){const w=y[_[v]];for(const T in w){const A=w[T];for(let R=0,L=A.length;R<L;R+=2){p.setStyle(A[R+1]);for(let P=0,F=e.length;P<F;++P)p.setTransform(e[P]),p.drawGeometry(A[R])}}}return d.getImageData(0,0,f.width,f.height)}function n0e(i,e,t){const r=[];if(t){const n=Math.floor(Math.round(i[0])*Cs),s=Math.floor(Math.round(i[1])*Cs),o=(tt(n,0,t.width-1)+tt(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],h=t.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/e.length);h&&h%u===0&&r.push(e[h/u-1])}return r}const s6e=.5,s0e={Point:f6e,LineString:h6e,Polygon:g6e,MultiPoint:p6e,MultiLineString:u6e,MultiPolygon:d6e,GeometryCollection:c6e,Circle:a6e};function o6e(i,e){return parseInt(Ae(i),10)-parseInt(Ae(e),10)}function Lv(i,e){const t=o0e(i,e);return t*t}function o0e(i,e){return s6e*i/e}function a6e(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function Iv(i,e,t,r,n,s,o,a){const l=[],c=t.getImage();if(c){let d=!0;const f=c.getImageState();f==Le.LOADED||f==Le.ERROR?d=!1:f==Le.IDLE&&c.load(),d&&l.push(c.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>n(null)),l6e(i,e,t,r,s,o,a),u}function l6e(i,e,t,r,n,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,n);if(t.getRenderer())a0e(i,l,t,e,o);else{const h=s0e[l.getType()];h(i,l,t,e,o,s)}}function a0e(i,e,t,r,n){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)a0e(i,o[a],t,r,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),n)}function c6e(i,e,t,r,n,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=s0e[o[a].getType()];c(i,o[a],t,r,n,s)}}function h6e(i,e,t,r,n){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,n)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,n)}}function u6e(i,e,t,r,n){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,n)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,n)}}function d6e(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,n)}}function f6e(i,e,t,r,n,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Le.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawPoint(e,r,n)}if(l){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(e,r,n)}}function p6e(i,e,t,r,n,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),h=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Le.LOADED)return;const u=i.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,h),u.drawMultiPoint(e,r,n)}if(c){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(e,r,n)}}function g6e(i,e,t,r,n){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,n)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,n)}}class l0e extends b2{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=_n(),this.wrappedRenderedExtent_=_n(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const n=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,g=!(p[ci.ANIMATING]||p[ci.INTERACTING]),m=this.context,y=Math.round(rt(n)/a*f),_=Math.round(fi(n)/a*f),v=u.getWrapX()&&l.canWrapX(),x=v?rt(h):null,w=v?Math.ceil((n[2]-h[2])/x)+1:1;let T=v?Math.floor((n[0]-h[0])/x):0;do{const A=this.getRenderTransform(o,a,c,f,y,_,T*x);e.execute(m,[m.canvas.width,m.canvas.height],A,c,g,r===void 0?jg:r?Rv:i6e,r?d&&t.declutter[d]:void 0)}while(++T<w)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=vi(this.context.canvas.width,this.context.canvas.height,hce))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,tu(this.context),hce.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(e,t){const r=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.extent,o=e.viewState.resolution,a=Math.round(rt(s)/o*r),l=Math.round(fi(s)/o*r);Pn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,0,-a/2,-l/2),cy(this.inversePixelTransform,this.pixelTransform);const c=ET(this.pixelTransform);this.useContainer(t,c,this.getBackground(e));const h=this.context,u=h.canvas,d=this.replayGroup_;let f=d&&!d.isEmpty();if(!f&&!(this.getLayer().hasListener(vr.PRERENDER)||this.getLayer().hasListener(vr.POSTRENDER)))return null;u.width!=a||u.height!=l?(u.width=a,u.height=l,u.style.transform!==c&&(u.style.transform=c)):this.containerReused||h.clearRect(0,0,a,l),this.setDrawContext_(),this.preRender(h,e);const p=e.viewState;p.projection;let g=!1;if(f&&n.extent&&this.clipping){const m=Ms(n.extent);f=gi(m,e.extent),g=f&&!Hr(m,e.extent),g&&this.clipUnrotated(h,e,m)}return f&&this.renderWorlds(d,e,this.getLayer().getDeclutter()?!1:void 0),g&&h.restore(),this.postRender(h,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=[this.context.canvas.width,this.context.canvas.height];Ci(this.pixelTransform,r);const n=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=r[0]*Cs,d=r[1]*Cs;h.push(this.getRenderTransform(n,s,o,Cs,u,d,0).slice());const f=c.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Hr(p,l)){let g=l[0];const m=rt(p);let y=0,_;for(;g<p[0];)--y,_=m*y,h.push(this.getRenderTransform(n,s,o,Cs,u,d,_).slice()),g+=m;for(y=0,g=l[2];g>p[2];)++y,_=m*y,h.push(this.getRenderTransform(n,s,o,Cs,u,d,_).slice()),g-=m}this.hitDetectionImageData_=r0e(r,h,this.renderedFeatures_,c.getStyleFunction(),l,s,o,Lv(s,this.renderedPixelRatio_),null)}t(n0e(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,n,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},h=function(p,g,m){const y=Ae(p),_=c[y];if(_){if(_!==!0&&m<_.distanceSq){if(m===0)return c[y]=!0,s.splice(s.lastIndexOf(_),1),n(p,l,g);_.geometry=g,_.distanceSq=m}}else{if(m===0)return c[y]=!0,n(p,l,g);s.push(c[y]={feature:p,layer:l,geometry:g,distanceSq:m,callback:n})}};let u;const d=[this.replayGroup_],f=this.getLayer().getDeclutter();return d.some(p=>u=p.forEachFeatureAtCoordinate(e,o,a,r,h,f&&t.declutter[f]?t.declutter[f].all().map(g=>g.value):null)),u}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const n=e.viewHints[ci.ANIMATING],s=e.viewHints[ci.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&n||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,u=c.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let g=t.getRenderOrder();g===void 0&&(g=o6e);const m=c.center.slice(),y=rs(l,p*u),_=y.slice(),v=[y.slice()],x=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!Hr(x,e.extent)){const E=rt(x),C=Math.max(rt(y)/2,E);y[0]=x[0]-C,y[2]=x[2]+C,Zb(m,h);const M=dT(v[0],h);M[0]<x[0]&&M[2]<x[2]?v.push([M[0]+E,M[1],M[2]+E,M[3]]):M[0]>x[0]&&M[2]>x[2]&&v.push([M[0]-E,M[1],M[2]-E,M[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&Hr(this.wrappedRenderedExtent_,y))return Ta(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new Qye(o0e(u,d),y,u,d);let T;for(let E=0,C=v.length;E<C;++E)r.loadFeatures(v[E],u,h);const A=Lv(u,d);let R=!0;const L=(E,C)=>{let M;const O=E.getStyleFunction()||t.getStyleFunction();if(O&&(M=O(E,u)),M){const D=this.renderFeature(E,A,M,w,T,this.getLayer().getDeclutter(),C);R=R&&!D}},P=ly(y),F=r.getFeaturesInExtent(P);g&&F.sort(g);for(let E=0,C=F.length;E<C;++E)L(F[E],E);this.renderedFeatures_=F,this.ready=R;const B=w.finish(),b=new t0e(y,u,d,r.getOverlaps(),B,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=m,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=b,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,n,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,h=r.length;c<h;++c)l=Iv(n,e,r[c],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Iv(n,e,r,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class kc extends np{constructor(e){super(e)}createRenderer(){return new l0e(this)}}class $S{constructor(e){this.rbush_=new qb(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Ae(t)]=r}load(e,t){const r=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const o=e[n],a=t[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=l,this.items_[Ae(a)]=l}this.rbush_.load(r)}remove(e){const t=Ae(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Ae(t)],n=[r.minX,r.minY,r.maxX,r.maxY];io(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let n=0,s=e.length;n<s;n++)if(r=t(e[n]),r)return r;return r}isEmpty(){return gl(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return to(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class m6e extends so{constructor(e){super(),this.projection=xe(e.projection),this.attributions_=fce(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,n){t.viewResolver=r,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=fce(e),this.changed()}setState(e){this.state_=e,this.changed()}}function fce(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const up=m6e,Lr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function y6e(i,e){return[[-1/0,-1/0,1/0,1/0]]}let _6e=!1;function c0e(i,e,t,r,n,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,r,n):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=_6e,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let h;c=="json"?h=JSON.parse(a.responseText):c=="text"?h=a.responseText:c=="xml"?(h=a.responseXML,h||(h=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(h=a.response),h?s(e.readFeatures(h,{extent:t,featureProjection:n}),e.readProjection(h)):o()}else o()},a.onerror=o,a.send()}function pce(i,e){return function(t,r,n,s,o){const a=this;c0e(i,e,t,r,n,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||pf)}}class ql extends Dn{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Oc extends up{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=pf,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(pt(this.format_,"`format` must be set when `url` is set"),this.loader_=pce(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:y6e;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new $S:null,this.loadedExtentsRtree_=new $S,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,n;Array.isArray(e.features)?n=e.features:e.features&&(r=e.features,n=r.getArray()),!t&&r===void 0&&(r=new gn(n)),n!==void 0&&this.addFeaturesInternal(n),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ae(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new ql(Lr.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof un||(this.featureChangeKeys_[e]=[lt(t,Ie.CHANGE,this.handleFeatureChange_,this),lt(t,Jh.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof un){const s=this.idIndex_[n];s instanceof un?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:r=!1}else r=!1}return r&&(pt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],n=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Ae(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=Ae(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();t.push(h),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(Lr.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new ql(Lr.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Lr.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Lr.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(dn.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(dn.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Xt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const r=n=>{this.removeFeatureInternal(n)};this.featuresRtree_.forEach(r);for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new ql(Lr.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(n){const s=n.getGeometry();if(s instanceof un||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const n=r.getGeometry();if(n instanceof un||n.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),gl(this.nullGeometryFeatures_)||Ot(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=_Ne(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],n=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||ff,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),u=a;if(a=h instanceof un?0:h.closestPointXY(r,n,o,a),a<u){s=c;const d=Math.sqrt(a);l[0]=r-d,l[1]=n-d,l[2]=r+d,l[3]=n+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Ae(t),n=t.getGeometry();if(!n)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new ql(Lr.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ae(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&gl(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];n.forEachInExtent(l,function(h){return Hr(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ql(Lr.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new ql(Lr.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ql(Lr.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let r;t.forEachInExtent(e,function(n){if(io(n.extent,e))return r=n,!0}),r&&t.remove(r)}removeFeatures(e){const t=[];for(let r=0,n=e.length;r<n;++r){const s=e[r],o=this.removeFeatureInternal(s);o&&t.push(o)}t.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ae(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];if(!r)return;r.forEach(Xt),delete this.featureChangeKeys_[t];const n=e.getId();return n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.hasListener(Lr.REMOVEFEATURE)&&this.dispatchEvent(new ql(Lr.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const r in this.idIndex_){const n=this.idIndex_[r];if(e instanceof un&&Array.isArray(n)&&n.includes(e))n.splice(n.indexOf(e),1);else if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){pt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(pce(e,this.format_))}}function v6e(i){if(!(i.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=i.inversePixelTransform[0],t=i.inversePixelTransform[1],r=Math.sqrt(e*e+t*t),n=i.frameState,s=ip(i.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=Lv(n.viewState.resolution,r);let a;return new i0e(i.context,r,n.extent,s,n.viewState.rotation,o,a)}function h0e(i,e,t){const r=[];let n=i(0),s=i(1),o=e(n),a=e(s);const l=[s,n],c=[a,o],h=[1,0],u={};let d=1e5,f,p,g,m,y,_;for(;--d>0&&h.length>0;)g=h.pop(),n=l.pop(),o=c.pop(),_=g.toString(),_ in u||(r.push(o[0],o[1]),u[_]=!0),m=h.pop(),s=l.pop(),a=c.pop(),y=(g+m)/2,f=i(y),p=e(f),Yge(p[0],p[1],o[0],o[1],a[0],a[1])<t?(r.push(a[0],a[1]),_=m.toString(),u[_]=!0):(h.push(m,y,y,g),c.push(a,p,p,o),l.push(s,f,f,n));return r}function b6e(i,e,t,r,n){const s=xe("EPSG:4326");return h0e(function(o){return[i,e+(t-e)*o]},va(s,r),n)}function x6e(i,e,t,r,n){const s=xe("EPSG:4326");return h0e(function(o){return[e+(t-e)*o,i]},va(s,r),n)}const w6e=new mn({color:"rgba(0,0,0,0.2)"}),E6e=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class S6e extends kc{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals,super(t),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:w6e,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?tle.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?tle.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new qi({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new iu({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ss({color:"rgba(0,0,0,1)"}),stroke:new mn({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const n=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(n),this.lonLabelStyleBase_},this.latLabelStyleBase_=new qi({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new iu({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ss({color:"rgba(0,0,0,1)"}),stroke:new mn({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const n=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(n),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(vr.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:E6e,this.setSource(new Oc({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new gn,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new qi({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let r=e.slice();return this.projection_&&this.getSource().getWrapX()&&dT(r,this.projection_),this.loadedExtent_&&(fNe(this.loadedExtent_,r,t)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(e,t,r){this.loadedExtent_=e;const n=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Er(s,e);if(this.renderedExtent_&&io(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,Aa(o)))return;const a=kr(o),l=t*t/4;(!this.projection_||!qr(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,t,l);let h=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(h+=this.meridians_.length),this.parallelsLabels_&&(h+=this.parallels_.length);let u;for(;h>this.featurePool_.length;)u=new mi,this.featurePool_.push(u);const d=n.getFeaturesCollection();d.clear();let f=0,p,g;for(p=0,g=this.meridians_.length;p<g;++p)u=this.featurePool_[f++],u.setGeometry(this.meridians_[p]),u.setStyle(this.lineStyle_),d.push(u);for(p=0,g=this.parallels_.length;p<g;++p)u=this.featurePool_[f++],u.setGeometry(this.parallels_[p]),u.setStyle(this.lineStyle_),d.push(u)}addMeridian_(e,t,r,n,s,o){const a=this.getMeridian_(e,t,r,n,o);if(gi(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new $i([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,t,r,n,s,o){const a=this.getParallel_(e,t,r,n,o);if(gi(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new $i([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const t=e.frameState.viewState.rotation,r=e.frameState.viewState.resolution,n=e.frameState.size,s=e.frameState.extent,o=kr(s);let a=s;if(t){const p=n[0]*r,g=n[1]*r;a=[o[0]-p/2,o[1]-g/2,o[0]+p/2,o[1]+g/2]}let l=0,c=0,h=this.latLabelPosition_<.5;const u=this.projection_.getExtent(),d=rt(u);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Hr(u,s)){l=Math.floor((s[0]-u[0])/d),c=Math.ceil((s[2]-u[2])/d);const p=Math.abs(t)>Math.PI/2;h=h!==p}const f=v6e(e);for(let p=l;p<=c;++p){let g=this.meridians_.length+this.parallels_.length,m,y,_,v;if(this.meridiansLabels_)for(y=0,_=this.meridiansLabels_.length;y<_;++y){const x=this.meridians_[y];if(!t&&p===0)v=this.getMeridianPoint_(x,s,y);else{const w=x.clone();w.translate(p*d,0),w.rotate(-t,o),v=this.getMeridianPoint_(w,a,y),v.rotate(t,o)}m=this.featurePool_[g++],m.setGeometry(v),m.set("graticule_label",this.meridiansLabels_[y].text),f.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(p===l&&h||p===c&&!h))for(y=0,_=this.parallels_.length;y<_;++y){const x=this.parallels_[y];if(!t&&p===0)v=this.getParallelPoint_(x,s,y);else{const w=x.clone();w.translate(p*d,0),w.rotate(-t,o),v=this.getParallelPoint_(w,a,y),v.rotate(t,o)}m=this.featurePool_[g++],m.setGeometry(v),m.set("graticule_label",this.parallelsLabels_[y].text),f.drawFeature(m,this.latLabelStyle_(m))}}}createGraticule_(e,t,r,n){const s=this.getInterval_(r);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=rt(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Hr(a,e)&&(rt(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const c=[tt(t[0],this.minX_,this.maxX_),tt(t[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(c);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let u=tt(h[0],this.minLon_,this.maxLon_),d=tt(h[1],this.minLat_,this.maxLat_);const f=this.maxLines_;let p,g,m,y,_=e;o||(_=[tt(e[0],this.minX_,this.maxX_),tt(e[1],this.minY_,this.maxY_),tt(e[2],this.minX_,this.maxX_),tt(e[3],this.minY_,this.maxY_)]);const v=bf(_,this.toLonLatTransform_,void 0,8);let x=v[3],w=v[2],T=v[1],A=v[0];if(o||(As(_,this.bottomLeft_)&&(A=this.minLon_,T=this.minLat_),As(_,this.bottomRight_)&&(w=this.maxLon_,T=this.minLat_),As(_,this.topLeft_)&&(A=this.minLon_,x=this.maxLat_),As(_,this.topRight_)&&(w=this.maxLon_,x=this.maxLat_),x=tt(x,d,this.maxLat_),w=tt(w,u,this.maxLon_),T=tt(T,this.minLat_,d),A=tt(A,this.minLon_,u)),u=Math.floor(u/s)*s,y=tt(u,this.minLon_,this.maxLon_),g=this.addMeridian_(y,T,x,n,e,0),p=0,o)for(;(y-=s)>=A&&p++<f;)g=this.addMeridian_(y,T,x,n,e,g);else for(;y!=this.minLon_&&p++<f;)y=Math.max(y-s,this.minLon_),g=this.addMeridian_(y,T,x,n,e,g);if(y=tt(u,this.minLon_,this.maxLon_),p=0,o)for(;(y+=s)<=w&&p++<f;)g=this.addMeridian_(y,T,x,n,e,g);else for(;y!=this.maxLon_&&p++<f;)y=Math.min(y+s,this.maxLon_),g=this.addMeridian_(y,T,x,n,e,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/s)*s,m=tt(d,this.minLat_,this.maxLat_),g=this.addParallel_(m,A,w,n,e,0),p=0;m!=this.minLat_&&p++<f;)m=Math.max(m-s,this.minLat_),g=this.addParallel_(m,A,w,n,e,g);for(m=tt(d,this.minLat_,this.maxLat_),p=0;m!=this.maxLat_&&p++<f;)m=Math.min(m+s,this.maxLat_),g=this.addParallel_(m,A,w,n,e,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(e){const t=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let n=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,c=this.intervals_.length;l<c;++l){const h=tt(this.intervals_[l]/2,0,90),u=tt(r,-90+h,90-h);if(o[0]=t-h,o[1]=u-h,a[0]=t+h,a[1]=u+h,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;n=this.intervals_[l]}return n}getMeridian_(e,t,r,n,s){const o=b6e(e,t,r,this.projection_,n);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new Ii(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,t,r){const n=e.getFlatCoordinates();let s=1,o=n.length-1;n[s]>n[o]&&(s=o,o=1);const a=Math.max(t[1],n[s]),l=Math.min(t[3],n[o]),c=tt(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,l),u=[n[s-1]+(n[o-1]-n[s-1])*(c-n[s])/(n[o]-n[s]),c],d=this.meridiansLabels_[r].geom;return d.setCoordinates(u),d}getMeridians(){return this.meridians_}getParallel_(e,t,r,n,s){const o=x6e(e,t,r,this.projection_,n);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new Ii(o,"XY"),a}getParallelPoint_(e,t,r){const n=e.getFlatCoordinates();let s=0,o=n.length-2;n[s]>n[o]&&(s=o,o=0);const a=Math.max(t[0],n[s]),l=Math.min(t[2],n[o]),c=tt(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,l),h=n[s+1]+(n[o+1]-n[s+1])*(c-n[s])/(n[o]-n[s]),u=[c,h],d=this.parallelsLabels_[r].geom;return d.setCoordinates(u),d}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=xe("EPSG:4326"),r=e.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const n=va(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,c){c=c||2;const h=n(a,l,c);for(let u=0,d=h.length;u<d;u+=c)h[u]<o&&(h[u]+=360);return h}}this.fromLonLatTransform_=va(t,e);const s=bf([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(kr(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}const C6e=S6e,vx=34962,bx=34963,T6e=35040,x2=35044,BS=35048,A6e=5121,M6e=5123,R6e=5125,u0e=5126,gce=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function L6e(i,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!f3e},e);const t=gce.length;for(let r=0;r<t;++r)try{const n=i.getContext(gce[r],e);if(n)return n}catch{}return null}const I6e={STATIC_DRAW:x2,STREAM_DRAW:T6e,DYNAMIC_DRAW:BS};class Pv{constructor(e,t){this.array_=null,this.type_=e,pt(e===vx||e===bx,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:I6e.STATIC_DRAW}ofSize(e){return this.array_=new(Yw(this.type_))(e),this}fromArray(e){return this.array_=Yw(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(Yw(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Yw(i){switch(i){case vx:return Float32Array;case bx:return Uint32Array;default:return Float32Array}}const V0={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},P6e=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,k6e=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class mce{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||P6e),t.compileShader(r);const n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||k6e),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const n=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,c=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,n,s,r[0],r[1],o,a,l,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,r,n){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=Ae(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),n&&n(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let r,n=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(s.location,n++);else if(Array.isArray(r))switch(r.length){case 2:t.uniform2f(s.location,r[0],r[1]);return;case 3:t.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:t.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(s.location,r)})}}function d0e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function f0e(i,e){return i[0]=e[0],i[1]=e[1],i[4]=e[2],i[5]=e[3],i[12]=e[4],i[13]=e[5],i}const ja={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},ia={UNSIGNED_BYTE:A6e,UNSIGNED_SHORT:M6e,UNSIGNED_INT:R6e,FLOAT:u0e},kv={};function yce(i){return"shared/"+i}let _ce=0;function O6e(){const i="unique/"+_ce;return _ce+=1,i}function D6e(i){let e=kv[i];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:L6e(t)},kv[i]=e}return e.users+=1,e.context}function F6e(i){const e=kv[i];if(!e||(e.users-=1,e.users>0))return;const t=e.context,r=t.getExtension("WEBGL_lose_context");r&&r.loseContext();const n=t.canvas;n.width=1,n.height=1,delete kv[i]}class N6e extends sy{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?yce(e.canvasCacheKey):O6e(),this.gl_=D6e(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(V0.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(V0.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Vi(),this.offsetScaleMatrix_=Vi(),this.tmpMat4_=d0e(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new mce({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new mce({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===yce(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,r=Ae(e);let n=this.bufferCache_[r];if(!n){const s=t.createBuffer();n={buffer:e,webGlBuffer:s},this.bufferCache_[r]=n}t.bindBuffer(e.getType(),n.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,r=Ae(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(V0.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(V0.RESTORED,this.boundHandleWebGLContextRestored_),F6e(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,r){const n=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}bindTexture(e,t,r){const n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}prepareDrawToRenderTarget(e,t,r,n){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),n?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const r=this.gl_;this.getExtension("OES_element_index_uint");const n=r.UNSIGNED_INT,s=4,o=t-e,a=e*s;r.drawElements(r.TRIANGLES,o,n,a)}finalizeDraw(e,t,r){for(let n=0,s=this.postProcessPasses_.length;n<s;n++)n===s-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,r=e.viewState.rotation,n=e.pixelRatio;this.setUniformFloatValue(ja.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(ja.ZOOM,e.viewState.zoom),this.setUniformFloatValue(ja.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(ja.PIXEL_RATIO,n),this.setUniformFloatVec2(ja.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(ja.ROTATION,r)}applyHitDetectionUniform(e){const t=this.getUniformLocation(ja.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(ja.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let r,n=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,n,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),n++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,f0e(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const r=this.gl_,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}getProgram(e,t){const r=this.gl_,n=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(t,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(n)}`;throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=Ae(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=Ae(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const r=e.size,n=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return Pn(t,0,0,2/(s*r[0]),2/(s*r[1]),-n,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,r,n,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,r,!1,n,s))}enableAttributes(e){const t=$6e(e);let r=0;for(let n=0;n<e.length;n++){const s=e[n];this.enableAttributeArray_(s.name,s.size,s.type||u0e,t,r),r+=s.size*p0e(s.type)}}handleWebGLContextLost(e){Xf(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,r){const n=this.gl_;r=r||n.createTexture();const s=0,o=n.RGBA,a=0,l=n.RGBA,c=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,s,o,l,c,t):n.texImage2D(n.TEXTURE_2D,s,o,e[0],e[1],a,l,c,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}function $6e(i){let e=0;for(let t=0;t<i.length;t++){const r=i[t];e+=r.size*p0e(r.type)}return e}function p0e(i){switch(i){case ia.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case ia.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case ia.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case ia.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class xx extends e0e{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Vi(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(ei.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(vr.PRECOMPOSE)){const n=new Dg(vr.PRECOMPOSE,void 0,t,e);r.dispatchEvent(n)}}dispatchPostComposeEvent(e,t){const r=this.getLayer();if(r.hasListener(vr.POSTCOMPOSE)){const n=new Dg(vr.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(n)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,r=-1,n;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof xx)){t=!0;continue}const h=l.getClassName();if((t||h!==n)&&(r+=1,t=!1),n=h,c===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new N6e({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),n&&(this.helper.getCanvas().className=n),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,r){const n=this.getLayer();if(n.hasListener(e)){Pn(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new Dg(e,this.inversePixelTransform_,r,t);n.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(vr.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(vr.POSTRENDER,e,t)}}const Wo=new Uint8Array(4);class B6e{constructor(e,t){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Ta(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return Wo[0]=0,Wo[1]=0,Wo[2]=0,Wo[3]=0,Wo;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return Wo[0]=this.data_[r*4],Wo[1]=this.data_[r*4+1],Wo[2]=this.data_[r*4+2],Wo[3]=this.data_[r*4+3],Wo}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const vce={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};var g0e={exports:{}};g0e.exports=wx;g0e.exports.default=wx;function wx(i,e,t){t=t||2;var r=e&&e.length,n=r?e[0]*t:i.length,s=m0e(i,0,n,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,h,u,d,f;if(r&&(s=V6e(i,e,s,t)),i.length>80*t){a=c=i[0],l=h=i[1];for(var p=t;p<n;p+=t)u=i[p],d=i[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return Sm(s,o,t,a,l,f,0),o}function m0e(i,e,t,r,n){var s,o;if(n===GS(i,e,t,r)>0)for(s=e;s<t;s+=r)o=bce(s,i[s],i[s+1],o);else for(s=t-r;s>=e;s-=r)o=bce(s,i[s],i[s+1],o);return o&&Ex(o,o.next)&&(Tm(o),o=o.next),o}function su(i,e){if(!i)return i;e||(e=i);var t=i,r;do if(r=!1,!t.steiner&&(Ex(t,t.next)||Ui(t.prev,t,t.next)===0)){if(Tm(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Sm(i,e,t,r,n,s,o){if(i){!o&&s&&X6e(i,r,n,s);for(var a=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,s?z6e(i,r,n,s):j6e(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),Tm(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=G6e(su(i),e,t),Sm(i,e,t,r,n,s,2)):o===2&&U6e(i,e,t,r,n,s):Sm(su(i),e,t,r,n,s,1);break}}}}function j6e(i){var e=i.prev,t=i,r=i.next;if(Ui(e,t,r)>=0)return!1;for(var n=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,h=n<s?n<o?n:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=n>s?n>o?n:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Rd(n,a,s,l,o,c,p.x,p.y)&&Ui(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function z6e(i,e,t,r){var n=i.prev,s=i,o=i.next;if(Ui(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,c=o.x,h=n.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,g=a>l?a>c?a:c:l>c?l:c,m=h>u?h>d?h:d:u>d?u:d,y=jS(f,p,e,t,r),_=jS(g,m,e,t,r),v=i.prevZ,x=i.nextZ;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=f&&v.x<=g&&v.y>=p&&v.y<=m&&v!==n&&v!==o&&Rd(a,h,l,u,c,d,v.x,v.y)&&Ui(v.prev,v,v.next)>=0||(v=v.prevZ,x.x>=f&&x.x<=g&&x.y>=p&&x.y<=m&&x!==n&&x!==o&&Rd(a,h,l,u,c,d,x.x,x.y)&&Ui(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=f&&v.x<=g&&v.y>=p&&v.y<=m&&v!==n&&v!==o&&Rd(a,h,l,u,c,d,v.x,v.y)&&Ui(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=m&&x!==n&&x!==o&&Rd(a,h,l,u,c,d,x.x,x.y)&&Ui(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function G6e(i,e,t){var r=i;do{var n=r.prev,s=r.next.next;!Ex(n,s)&&y0e(n,r,r.next,s)&&Cm(n,s)&&Cm(s,n)&&(e.push(n.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Tm(r),Tm(r.next),r=i=s),r=r.next}while(r!==i);return su(r)}function U6e(i,e,t,r,n,s){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&J6e(o,a)){var l=_0e(o,a);o=su(o,o.next),l=su(l,l.next),Sm(o,e,t,r,n,s,0),Sm(l,e,t,r,n,s,0);return}a=a.next}o=o.next}while(o!==i)}function V6e(i,e,t,r){var n=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:i.length,c=m0e(i,a,l,r,!1),c===c.next&&(c.steiner=!0),n.push(K6e(c));for(n.sort(q6e),s=0;s<n.length;s++)t=H6e(n[s],t);return t}function q6e(i,e){return i.x-e.x}function H6e(i,e){var t=W6e(i,e);if(!t)return e;var r=_0e(t,i);return su(r,r.next),su(t,t.next)}function W6e(i,e){var t=e,r=i.x,n=i.y,s=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===r))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,c=o.x,h=o.y,u=1/0,d;t=o;do r>=t.x&&t.x>=c&&r!==t.x&&Rd(n<h?r:s,n,c,h,n<h?s:r,n,t.x,t.y)&&(d=Math.abs(n-t.y)/(r-t.x),Cm(t,i)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&Y6e(o,t)))&&(o=t,u=d)),t=t.next;while(t!==l);return o}function Y6e(i,e){return Ui(i.prev,i,e.prev)<0&&Ui(e.next,i,i.next)<0}function X6e(i,e,t,r){var n=i;do n.z===0&&(n.z=jS(n.x,n.y,e,t,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,Z6e(n)}function Z6e(i){var e,t,r,n,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(n=t,t=t.nextZ,a--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:i=n,n.prevZ=s,s=n;t=r}s.nextZ=null,c*=2}while(o>1);return i}function jS(i,e,t,r,n){return i=(i-t)*n|0,e=(e-r)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function K6e(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Rd(i,e,t,r,n,s,o,a){return(n-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(r-a)}function J6e(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Q6e(i,e)&&(Cm(i,e)&&Cm(e,i)&&e8e(i,e)&&(Ui(i.prev,i,e.prev)||Ui(i,e.prev,e))||Ex(i,e)&&Ui(i.prev,i,i.next)>0&&Ui(e.prev,e,e.next)>0)}function Ui(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Ex(i,e){return i.x===e.x&&i.y===e.y}function y0e(i,e,t,r){var n=H0(Ui(i,e,t)),s=H0(Ui(i,e,r)),o=H0(Ui(t,r,i)),a=H0(Ui(t,r,e));return!!(n!==s&&o!==a||n===0&&q0(i,t,e)||s===0&&q0(i,r,e)||o===0&&q0(t,i,r)||a===0&&q0(t,e,r))}function q0(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function H0(i){return i>0?1:i<0?-1:0}function Q6e(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&y0e(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Cm(i,e){return Ui(i.prev,i,i.next)<0?Ui(i,e,i.next)>=0&&Ui(i,i.prev,e)>=0:Ui(i,e,i.prev)<0||Ui(i,i.next,e)<0}function e8e(i,e){var t=i,r=!1,n=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==i);return r}function _0e(i,e){var t=new zS(i.i,i.x,i.y),r=new zS(e.i,e.x,e.y),n=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=n,n.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function bce(i,e,t,r){var n=new zS(i,e,t);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Tm(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function zS(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}wx.deviation=function(i,e,t,r){var n=e&&e.length,s=n?e[0]*t:i.length,o=Math.abs(GS(i,0,s,t));if(n)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,h=a<l-1?e[a+1]*t:i.length;o-=Math.abs(GS(i,c,h,t))}var u=0;for(a=0;a<r.length;a+=3){var d=r[a]*t,f=r[a+1]*t,p=r[a+2]*t;u+=Math.abs((i[d]-i[p])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[p+1]-i[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function GS(i,e,t,r){for(var n=0,s=e,o=t-r;s<t;s+=r)n+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return n}wx.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,n=0;n<i.length;n++){for(var s=0;s<i[n].length;s++)for(var o=0;o<e;o++)t.vertices.push(i[n][s][o]);n>0&&(r+=i[n-1].length,t.holes.push(r))}return t};const xce=.985;function t8e(i,e){e=e||[];const t=256,r=t-1;return e[0]=Math.floor(i/t/t/t)/r,e[1]=Math.floor(i/t/t)%t/r,e[2]=Math.floor(i/t)%t/r,e[3]=i%t/r,e}function i8e(i){let e=0;const t=256,r=t-1;return e+=Math.round(i[0]*t*t*t*r),e+=Math.round(i[1]*t*t*r),e+=Math.round(i[2]*t*r),e+=Math.round(i[3]*r),e}function r8e(){const i='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}function n8e(i,e){const t=i.viewState.projection,n=e.getSource().getWrapX()&&t.canWrapX(),s=t.getExtent(),o=i.extent,a=n?rt(s):null,l=n?Math.ceil((o[2]-s[2])/a)+1:1;return[n?Math.floor((o[0]-s[0])/a):0,l,a]}class v0e extends xx{constructor(e,t){const r=t.uniforms||{},n=Vi();r[ja.PROJECTION_MATRIX]=n,super(e,{uniforms:r,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Pv(vx,BS),this.indicesBuffer_=new Pv(bx,BS),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const s=t.attributes?t.attributes.map(function(a){return{name:"a_prop_"+a.name,size:1,type:ia.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:ia.FLOAT},{name:"a_index",size:1,type:ia.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:ia.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:ia.FLOAT})),this.attributes.push(...s),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=_n(),this.currentTransform_=n,this.renderTransform_=Vi(),this.invertRenderTransform_=Vi(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=r8e(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===vce.GENERATE_POINT_BUFFERS){const c=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=c,cy(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[lt(o,Lr.ADDFEATURE,this.handleSourceFeatureAdded_,this),lt(o,Lr.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),lt(o,Lr.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),lt(o,Lr.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Ae(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new B6e(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[Ae(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[Ae(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[Ae(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[r,n,s]=n8e(e,this.getLayer());return this.renderWorlds(e,!1,r,n,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,n,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),r=t.getSource(),n=e.viewState,s=!e.viewHints[ci.ANIMATING]&&!e.viewHints[ci.INTERACTING],o=!io(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=n.projection,c=n.resolution,h=t instanceof np?t.getRenderBuffer():0,u=rs(e.extent,h*c);r.loadFeatures(u,c,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=Vi();this.helper.makeProjectionTransform(e,t);const n=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=n*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],c=[];let h=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],Ci(t,l),this.renderInstructions_[++h]=l[0],this.renderInstructions_[++h]=l[1],this.hitDetectionEnabled_){const f=t8e(h+5,c);this.renderInstructions_[++h]=f[0],this.renderInstructions_[++h]=f[1],this.renderInstructions_[++h]=f[2],this.renderInstructions_[++h]=f[3],this.renderInstructions_[++h]=Number(d)}for(let f=0;f<this.customAttributes.length;f++){const p=this.customAttributes[f].callback(o.feature,o.properties);this.renderInstructions_[++h]=p}}const u={id:++this.lastSentId,type:vce.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:n-2};u.projectionTransform=t,this.ready=!1,this.worker_.postMessage(u,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,t,r,n,s){if(pt(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=Ci(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=i8e(l),h=this.renderInstructions_[c],u=Math.floor(h).toString(),f=this.getLayer().getSource().getFeatureByUid(u);if(f)return n(f,this.getLayer(),null)}renderWorlds(e,t,r,n,s){let o=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),wT(this.currentTransform_,o*s,0),ip(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<n)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){Xt(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class s8e{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}}const w2=.5;class dp extends Zf{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Ie.CHANGE)}release(){this.state===ie.ERROR&&this.setState(ie.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==ie.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==ie.LOADED){e.interimTile=null;break}e.getState()==ie.LOADING?t=e:e.getState()==ie.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ie.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ze()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const n=t-r+1e3/60;return n>=this.transition_?1:hme(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}function Ov(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function US(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}let sd=null;function o8e(i){sd||(sd=vi(i.width,i.height,void 0,{willReadFrequently:!0}));const e=sd.canvas,t=i.width;e.width!==t&&(e.width=t);const r=i.height;return e.height!==r&&(e.height=r),sd.clearRect(0,0,t,r),sd.drawImage(i,0,0),sd.getImageData(0,0,t,r).data}const a8e=[256,256];class E2 extends dp{constructor(e){const t=ie.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=Ov(this.data_);return e?[e.width,e.height]:a8e}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ie.IDLE&&this.state!==ie.ERROR)return;this.state=ie.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ie.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ie.ERROR,e.changed()})}}const l8e=10,wce=.25;class S2{constructor(e,t,r,n,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=va(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const v=_[0]+"/"+_[1];return a[v]||(a[v]=l(_)),a[v]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&rt(n)>=rt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?rt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?rt(this.targetProj_.getExtent()):null;const c=No(r),h=ep(r),u=Qf(r),d=Qh(r),f=this.transformInv_(c),p=this.transformInv_(h),g=this.transformInv_(u),m=this.transformInv_(d),y=l8e+(o?Math.max(0,Math.ceil(Math.log2(dm(r)/(o*o*256*256)))):0);if(this.addQuad_(c,h,u,d,f,p,g,m,y),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(v,x,w){_=Math.min(_,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-_>this.sourceWorldWidth_/2){const x=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];x[0][0]-_>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-_>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-_>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const w=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-w<this.sourceWorldWidth_/2&&(v.source=x)}})}a={}}addTriangle_(e,t,r,n,s,o){this.triangles_.push({source:[n,s,o],target:[e,t,r]})}addQuad_(e,t,r,n,s,o,a,l,c){const h=Vr([s,o,a,l]),u=this.sourceWorldWidth_?rt(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=Vr([e,t,r,n]);p=rt(m)/this.targetWorldWidth_>wce||p}!f&&this.sourceProj_.isGlobal()&&u&&(p=u>wce||p)}if(!p&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!gi(h,this.maxSourceExtent_))return;let g=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(g=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(c>0){if(!p){const m=[(e[0]+r[0])/2,(e[1]+r[1])/2],y=this.transformInv_(m);let _;f?_=(pa(s[0],d)+pa(a[0],d))/2-pa(y[0],d):_=(s[0]+a[0])/2-y[0];const v=(s[1]+a[1])/2-y[1];p=_*_+v*v>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const m=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.transformInv_(m),_=[(n[0]+e[0])/2,(n[1]+e[1])/2],v=this.transformInv_(_);this.addQuad_(e,t,m,_,s,o,y,v,c-1),this.addQuad_(_,m,r,n,v,y,a,l,c-1)}else{const m=[(e[0]+t[0])/2,(e[1]+t[1])/2],y=this.transformInv_(m),_=[(r[0]+n[0])/2,(r[1]+n[1])/2],v=this.transformInv_(_);this.addQuad_(e,m,_,n,s,y,v,l,c-1),this.addQuad_(m,t,r,_,y,o,a,v,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}g&11||this.addTriangle_(e,r,n,s,a,l),g&14||this.addTriangle_(e,r,t,s,a,o),g&&(g&13||this.addTriangle_(t,n,e,o,l,s),g&7||this.addTriangle_(t,n,r,o,l,a))}calculateSourceExtent(){const e=_n();return this.triangles_.forEach(function(t,r,n){const s=t.source;kg(e,s[0]),kg(e,s[1]),kg(e,s[2])}),e}getTriangles(){return this.triangles_}}let Xw;const ll=[];function Ece(i,e,t,r,n){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(r,n),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,r)+1,Math.max(t,n)),i.restore()}function Zw(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function c8e(){if(Xw===void 0){const i=vi(6,6,ll);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Ece(i,4,5,4,0),Ece(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Xw=Zw(e,0)||Zw(e,4)||Zw(e,8),tu(i),ll.push(i.canvas)}return Xw}function Am(i,e,t,r){const n=tp(t,e,i);let s=wf(e,r,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||As(l,n)){const c=wf(i,s,n)/s;isFinite(c)&&c>0&&(s/=c)}return s}function b0e(i,e,t,r){const n=kr(t);let s=Am(i,e,n,r);return(!isFinite(s)||s<=0)&&hT(t,function(o){return s=Am(i,e,o,r),isFinite(s)&&s>0}),s}function C2(i,e,t,r,n,s,o,a,l,c,h,u,d,f){const p=vi(Math.round(t*i),Math.round(t*e),ll);if(u||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function g(w){return Math.round(w*t)/t}p.globalCompositeOperation="lighter";const m=_n();l.forEach(function(w,T,A){Qge(m,w.extent)});let y;const _=t/r,v=(u?1:1+Math.pow(2,-24))/_;if(!d||l.length!==1||c!==0){if(y=vi(Math.round(rt(m)*_),Math.round(fi(m)*_),ll),u||(y.imageSmoothingEnabled=!1),n&&f){const w=(n[0]-m[0])*_,T=-(n[3]-m[3])*_,A=rt(n)*_,R=fi(n)*_;y.rect(w,T,A,R),y.clip()}l.forEach(function(w,T,A){const R=(w.extent[0]-m[0])*_,L=-(w.extent[3]-m[3])*_,P=rt(w.extent)*_,F=fi(w.extent)*_;w.image.width>0&&w.image.height>0&&y.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,u?R:Math.round(R),u?L:Math.round(L),u?P:Math.round(R+P)-Math.round(R),u?F:Math.round(L+F)-Math.round(L))})}const x=No(o);return a.getTriangles().forEach(function(w,T,A){const R=w.source,L=w.target;let P=R[0][0],F=R[0][1],B=R[1][0],b=R[1][1],E=R[2][0],C=R[2][1];const M=g((L[0][0]-x[0])/s),O=g(-(L[0][1]-x[1])/s),D=g((L[1][0]-x[0])/s),U=g(-(L[1][1]-x[1])/s),z=g((L[2][0]-x[0])/s),Z=g(-(L[2][1]-x[1])/s),Q=P,V=F;P=0,F=0,B-=Q,b-=V,E-=Q,C-=V;const N=[[B,b,0,0,D-M],[E,C,0,0,z-M],[0,0,B,b,U-O],[0,0,E,C,Z-O]],X=iNe(N);if(!X)return;if(p.save(),p.beginPath(),c8e()||!u){p.moveTo(D,U);const fe=4,ve=M-D,ge=O-U;for(let he=0;he<fe;he++)p.lineTo(D+g((he+1)*ve/fe),U+g(he*ge/(fe-1))),he!=fe-1&&p.lineTo(D+g((he+1)*ve/fe),U+g((he+1)*ge/(fe-1)));p.lineTo(z,Z)}else p.moveTo(D,U),p.lineTo(M,O),p.lineTo(z,Z);p.clip(),p.transform(X[0],X[2],X[1],X[3],M,O),p.translate(m[0]-Q,m[3]-V);let ne;if(y)ne=y.canvas,p.scale(v,-v);else{const fe=l[0],ve=fe.extent;ne=fe.image,p.scale(rt(ve)/ne.width,-fi(ve)/ne.height)}p.drawImage(ne,0,0),p.restore()}),y&&(tu(y),ll.push(y.canvas)),h&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(w,T,A){const R=w.target,L=(R[0][0]-x[0])/s,P=-(R[0][1]-x[1])/s,F=(R[1][0]-x[0])/s,B=-(R[1][1]-x[1])/s,b=(R[2][0]-x[0])/s,E=-(R[2][1]-x[1])/s;p.beginPath(),p.moveTo(F,B),p.lineTo(L,P),p.lineTo(b,E),p.closePath(),p.stroke()}),p.restore()),p.canvas}class T2 extends E2{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),r=this.targetTileGrid_.getExtent();let n=this.sourceTileGrid_.getExtent();const s=r?Er(t,r):t;if(dm(s)===0){this.state=ie.EMPTY;return}const o=e.sourceProj,a=o.getExtent();a&&(n?n=Er(n,a):n=a);const l=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=b0e(o,c,s,l);if(!isFinite(h)||h<=0){this.state=ie.EMPTY;return}const u=e.errorThreshold!==void 0?e.errorThreshold:w2;if(this.triangulation_=new S2(o,c,s,n,h*u,l),this.triangulation_.getTriangles().length===0){this.state=ie.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let d=this.triangulation_.calculateSourceExtent();if(n&&(o.canWrapX()?(d[1]=tt(d[1],n[1],n[3]),d[3]=tt(d[3],n[1],n[3])):d=Er(d,n)),!dm(d))this.state=ie.EMPTY;else{const f=this.sourceTileGrid_.getTileRangeForExtentAndZ(d,this.sourceZ_),p=e.getTileFunction;for(let g=f.minX;g<=f.maxX;g++)for(let m=f.minY;m<=f.maxY;m++){const y=p(this.sourceZ_,g,m,this.pixelRatio_);y&&this.sourceTiles_.push(y)}this.sourceTiles_.length===0&&(this.state=ie.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{if(!t||t.getState()!==ie.LOADED)return;const r=t.getSize(),n=this.gutter_;let s;const o=US(t.getData());o?s=o:s=o8e(Ov(t.getData()));const a=[r[0]+2*n,r[1]+2*n],l=s instanceof Float32Array,c=a[0]*a[1],h=l?Float32Array:Uint8Array,u=new h(s.buffer),d=h.BYTES_PER_ELEMENT,f=d*u.length/c,p=u.byteLength/a[1],g=Math.floor(p/d/a[0]),m=c*g;let y=u;if(u.length!==m){y=new h(m);let _=0,v=0;const x=a[0]*g;for(let w=0;w<a[1];++w){for(let T=0;T<x;++T)y[_++]=u[v+T];v+=p/d}}e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),data:new Uint8Array(y.buffer),dataType:h,bytesPerPixel:f,pixelSize:a})}),this.sourceTiles_.length=0,e.length===0)this.state=ie.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),n=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let c,h;const u=e[0].bytesPerPixel,d=Math.ceil(u/3);for(let f=d-1;f>=0;--f){const p=[];for(let x=0,w=e.length;x<w;++x){const T=e[x],A=T.data,R=T.pixelSize,L=R[0],P=R[1],F=vi(L,P,ll),B=F.createImageData(L,P),b=B.data;let E=f*3;for(let C=0,M=b.length;C<M;C+=4)b[C]=A[E],b[C+1]=A[E+1],b[C+2]=A[E+2],b[C+3]=255,E+=u;F.putImageData(B,0,0),p.push({extent:T.extent,image:F.canvas})}const g=C2(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,p,this.gutter_,!1,!1,!1,!0);for(let x=0,w=p.length;x<w;++x){const A=p[x].image.getContext("2d");tu(A),ll.push(A.canvas)}const m=g.getContext("2d"),y=m.getImageData(0,0,g.width,g.height);tu(m),ll.push(g),c||(h=new Uint8Array(u*y.width*y.height),c=new e[0].dataType(h.buffer));const _=y.data;let v=f*3;for(let x=0,w=_.length;x<w;x+=4)_[x+3]===255?(h[v]=_[x],h[v+1]=_[x+1],h[v+2]=_[x+2]):(h[v]=0,h[v+1]=0,h[v+2]=0),v+=u}this.reprojData_=c,this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=ie.LOADED}this.changed()}load(){if(this.state!==ie.IDLE&&this.state!==ie.ERROR)return;this.state=ie.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const r=t.getState();if(r!==ie.IDLE&&r!==ie.LOADING)return;e++;const n=lt(t,Ie.CHANGE,function(){const s=t.getState();(s==ie.LOADED||s==ie.ERROR||s==ie.EMPTY)&&(Xt(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t){t.getState()==ie.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xt),this.sourcesListenerKeys_=null}}class Af extends dp{constructor(e,t,r,n,s,o,a,l,c,h,u,d){super(s,ie.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=n.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const m=p?Er(f,p):f;if(dm(m)===0){this.state=ie.EMPTY;return}const y=e.getExtent();y&&(g?g=Er(g,y):g=y);const _=n.getResolution(this.wrappedTileCoord_[0]),v=b0e(e,r,m,_);if(!isFinite(v)||v<=0){this.state=ie.EMPTY;return}const x=h!==void 0?h:w2;if(this.triangulation_=new S2(e,r,m,g,v*x,_),this.triangulation_.getTriangles().length===0){this.state=ie.EMPTY;return}this.sourceZ_=t.getZForResolution(v);let w=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(w[1]=tt(w[1],g[1],g[3]),w[3]=tt(w[3],g[1],g[3])):w=Er(w,g)),!dm(w))this.state=ie.EMPTY;else{const T=t.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let A=T.minX;A<=T.maxX;A++)for(let R=T.minY;R<=T.maxY;R++){const L=c(this.sourceZ_,A,R,a);L&&this.sourceTiles_.push(L)}this.sourceTiles_.length===0&&(this.state=ie.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==ie.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=ie.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),n=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=C2(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ie.LOADED}this.changed()}load(){if(this.state==ie.IDLE){this.state=ie.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const r=t.getState();if(r==ie.IDLE||r==ie.LOADING){e++;const n=lt(t,Ie.CHANGE,function(s){const o=t.getState();(o==ie.LOADED||o==ie.ERROR||o==ie.EMPTY)&&(Xt(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,r,n){t.getState()==ie.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(tu(this.canvas_.getContext("2d")),ll.push(this.canvas_),this.canvas_=null),super.release()}}class xy extends dp{constructor(e,t,r,n,s,o){super(e,t,o),this.crossOrigin_=n,this.src_=r,this.key=r,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ie.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ie.ERROR,this.unlistenImage_(),this.image_=h8e(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ie.LOADED:this.state=ie.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ie.ERROR&&(this.state=ie.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ie.IDLE&&(this.state=ie.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=v3e(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function h8e(){const i=vi(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class u8e extends Zf{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=e.gutter||0,this.helper_=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(Ie.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===ie.LOADED,this.loaded)this.uploadTile();else{if(e instanceof xy){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(Ie.CHANGE,this.handleTileChange_)}}uploadTile(){ze()}setReady(){this.ready=!0,this.dispatchEvent(Ie.CHANGE)}handleTileChange_(){this.tile.getState()===ie.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(Ie.CHANGE,this.handleTileChange_)}}function x0e(i,e,t){const r=t?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r)}function d8e(i,e,t,r){x0e(i,e,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}function Sce(i,e,t,r,n,s){const o=i.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,i.getExtension("OES_texture_float"),l=i.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),x0e(o,e,s&&l);const c=t.byteLength/r[1];let h=1;c%8===0?h=8:c%4===0?h=4:c%2===0&&(h=2);let u;switch(n){case 1:{u=o.LUMINANCE;break}case 2:{u=o.LUMINANCE_ALPHA;break}case 3:{u=o.RGB;break}case 4:{u=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${n}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,h),o.texImage2D(o.TEXTURE_2D,0,u,r[0],r[1],0,u,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let _d=null;function f8e(){_d=vi(1,1,void 0,{willReadFrequently:!0})}class p8e extends u8e{constructor(e){super(e),this.textures=[],this.renderSize_=Mi(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new Pv(vx,x2);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}uploadTile(){const e=this.helper_,t=e.getGL(),r=this.tile;this.textures.length=0;let n;r instanceof xy||r instanceof Af?n=r.getImage():n=r.getData();const s=Ov(n);if(s){const _=t.createTexture();this.textures.push(_),this.bandCount=4,d8e(t,_,s,r.interpolate),this.setReady();return}n=US(n);const o=r.getSize(),a=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],l=n instanceof Float32Array,c=a[0]*a[1],h=l?Float32Array:Uint8Array,u=h.BYTES_PER_ELEMENT,d=n.byteLength/a[1];this.bandCount=Math.floor(d/u/a[0]);const f=Math.ceil(this.bandCount/4);if(f===1){const _=t.createTexture();this.textures.push(_),Sce(e,_,n,a,this.bandCount,r.interpolate),this.setReady();return}const p=new Array(f);for(let _=0;_<f;++_){const v=t.createTexture();this.textures.push(v);const x=_<f-1?4:(this.bandCount-1)%4+1;p[_]=new h(c*x)}let g=0,m=0;const y=a[0]*this.bandCount;for(let _=0;_<a[1];++_){for(let v=0;v<y;++v){const x=n[m+v],w=Math.floor(g/this.bandCount),T=v%this.bandCount,A=Math.floor(T/4),R=p[A],L=R.length/c,P=T%4;R[w*L+P]=x,++g}m+=d/u}for(let _=0;_<f;++_){const v=this.textures[_],x=p[_],w=x.length/c;Sce(e,v,x,a,w,r.interpolate)}this.setReady()}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(Ie.CHANGE,this.handleTileChange_)}getImagePixelData_(e,t,r){const n=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1];_d||f8e(),_d.clearRect(0,0,1,1);const a=e.width,l=e.height,c=a-2*n,h=l-2*n,u=n+Math.floor(c*(t/s)),d=n+Math.floor(h*(r/o));let f;try{_d.drawImage(e,u,d,1,1,0,0,1,1),f=_d.getImageData(0,0,1,1).data}catch{return _d=null,null}return f}getArrayPixelData_(e,t,r,n){const s=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],l=t[0],c=t[1],h=l+2*s,u=c+2*s,d=s+Math.floor(l*(r/o)),f=s+Math.floor(c*(n/a));if(e instanceof DataView){const g=e.byteLength/(h*u),m=g*(f*h+d),y=e.buffer.slice(m,m+g);return new DataView(y)}const p=this.bandCount*(f*h+d);return e.slice(p,p+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof E2){const r=this.tile.getData(),n=US(r);if(n){const s=this.tile.getSize();return this.getArrayPixelData_(n,s,e,t)}return this.getImagePixelData_(Ov(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}class A2{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return pt(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return pt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){pt(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}class Sx{constructor(e,t,r,n){this.minX=e,this.maxX=t,this.minY=r,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function od(i,e,t,r,n){return n!==void 0?(n.minX=i,n.maxX=e,n.minY=t,n.maxY=r,n):new Sx(i,e,t,r)}function Mm(i,e,t,r){return r!==void 0?(r[0]=i,r[1]=e,r[2]=t,r):[i,e,t]}function wa(i,e,t){return i+"/"+e+"/"+t}function ec(i){return wa(i[0],i[1],i[2])}function g8e(i){const[e,t,r]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return wa(e,t,r)}function w0e(i){return i.split("/").map(Number)}function M2(i){return(i[1]<<i[0])+i[2]}function m8e(i,e){const t=i[0],r=i[1],n=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,n):!0}const y8e={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},_8e={};function Cce(i){return 1/(i+2)}function v8e(){return{tileIds:new Set,representationsByZ:{}}}function Tce(i,e){return i.tileIds.has(Ae(e))}function Ace(i,e,t){const r=i.representationsByZ;t in r||(r[t]=new Set),r[t].add(e),i.tileIds.add(Ae(e.tile))}function Kw(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Er(e,Ms(t.extent,i.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(i.viewState.projection).getExtent();n&&(e=Er(e,n))}return e}function VS(i,e){return`${i.getKey()},${ec(e)}`}class b8e extends xx{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Vi(),this.tempMat4=d0e(),this.tempTileRange_=new Sx(0,0,0,0),this.tempTileCoord_=Mm(0,0,0),this.tempSize_=[0,0];const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new A2(r),this.frameState=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}isDrawableTile_(e){const t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==ie.LOADED||r==ie.EMPTY||r==ie.ERROR&&!n}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const r=this.getLayer().getRenderSource();return!r||Aa(Kw(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return ze()}enqueueTiles(e,t,r,n,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=l.getGutterForProjection(o.projection),u=Ae(l);u in e.wantedTiles||(e.wantedTiles[u]={});const d=e.wantedTiles[u],f=this.tileRepresentationCache,p=a.getMapInternal(),g=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection));for(let m=r;m>=g;--m){const y=c.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),_=c.getResolution(m);for(let v=y.minX;v<=y.maxX;++v)for(let x=y.minY;x<=y.maxY;++x){const w=Mm(m,v,x,this.tempTileCoord_),T=VS(l,w);let A,R;if(f.containsKey(T)&&(A=f.get(T),R=A.tile),(!A||A.tile.key!==l.getKey())&&(R=l.getTile(m,v,x,e.pixelRatio,o.projection)),Tce(n,R))continue;if(!A)A=this.createTileRepresentation({tile:R,grid:c,helper:this.helper,gutter:h}),f.set(T,A);else if(this.isDrawableTile_(R))A.setTile(R);else{const P=R.getInterimTile();A.setTile(P)}Ace(n,A,m);const L=R.getKey();d[L]=!0,R.getState()===ie.IDLE&&(e.tileQueue.isKeyQueued(L)||e.tileQueue.enqueue([R,u,c.getTileCoordCenter(w),_]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,r,n,s,o,a,l,c,h,u){}renderTileMask(e,t,r,n){}drawTile_(e,t,r,n,s,o,a){if(!t.ready)return;const c=t.tile.tileCoord,h=ec(c),u=h in o?o[h]:1,d=a.getResolution(r),f=Mi(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),g=a.getTileCoordExtent(c),m=u<1?-1:Cce(r);u<1&&(e.animate=!0);const y=e.viewState,_=y.center[0],v=y.center[1],x=f[0]+2*n,w=f[1]+2*n,T=x/w,A=(_-p[0])/(f[0]*d),R=(p[1]-v)/(f[1]*d),L=y.resolution/d,P=c[1],F=c[2];_S(this.tileTransform_),Og(this.tileTransform_,2/(e.size[0]*L/x),-2/(e.size[1]*L/x)),FNe(this.tileTransform_,y.rotation),Og(this.tileTransform_,1,1/T),wT(this.tileTransform_,(f[0]*(P-A)-n)/x,(f[1]*(F-R)-n)/w),this.renderTile(t,this.tileTransform_,e,s,d,f,p,g,m,n,u)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const r=e.viewState,n=this.getLayer(),s=n.getRenderSource(),o=s.getTileGridForProjection(r.projection),a=s.getGutterForProjection(r.projection),l=Kw(e,e.extent),c=o.getZForResolution(r.resolution,s.zDirection),h=v8e(),u=n.getPreload();if(e.nextExtent){const T=o.getZForResolution(r.nextResolution,s.zDirection),A=Kw(e,e.nextExtent);this.enqueueTiles(e,A,T,h,u)}this.enqueueTiles(e,l,c,h,0),u>0&&setTimeout(()=>{this.enqueueTiles(e,l,c-1,h,u-1)},0);const d={},f=Ae(this),p=e.time;let g=!1;for(const T of h.representationsByZ[c]){const A=T.tile;if((A instanceof Af||A instanceof T2)&&A.getState()===ie.EMPTY)continue;const R=A.tileCoord;if(T.ready){const F=A.getAlpha(f,p);if(F===1){A.endTransition(f);continue}g=!0;const B=ec(R);d[B]=F}if(this.renderComplete=!1,this.findAltTiles_(o,R,c+1,h))continue;const P=o.getMinZoom();for(let F=c-1;F>=P&&!this.findAltTiles_(o,R,F,h);--F);}const m=h.representationsByZ,y=Object.keys(m).map(Number).sort(KFe);if(this.beforeTilesMaskRender(e))for(let T=0,A=y.length;T<A;++T){const R=y[T];for(const L of m[R]){const P=L.tile.tileCoord;if(ec(P)in d)continue;const B=o.getTileCoordExtent(P);this.renderTileMask(L,R,B,Cce(R))}}this.beforeTilesRender(e,g);for(let T=0,A=y.length;T<A;++T){const R=y[T];for(const L of m[R]){const P=L.tile.tileCoord;ec(P)in d||this.drawTile_(e,L,R,a,l,d,o)}}for(const T of m[c]){const A=T.tile.tileCoord;ec(A)in d&&this.drawTile_(e,T,c,a,l,d,o)}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const v=this.helper.getCanvas(),x=this.tileRepresentationCache;for(;x.canExpireCache();)x.pop().dispose();const w=function(T,A){s.updateCacheSize(.1,A.viewState.projection),s.expireCache(A.viewState.projection,_8e)};return e.postRenderFunctions.push(w),this.postRender(t,e),v}findAltTiles_(e,t,r,n){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let c=s.minX;c<=s.maxX;++c)for(let h=s.minY;h<=s.maxY;++h){const u=VS(l,[r,c,h]);let d=!1;if(a.containsKey(u)){const f=a.get(u);f.ready&&!Tce(n,f.tile)&&(Ace(n,f,r),d=!0)}d||(o=!1)}return o}clearCache(){const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}const gt={...y8e,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},A_={TEXTURE_COORD:"a_textureCoord"},x8e=[{name:A_.TEXTURE_COORD,size:2,type:ia.FLOAT}];class w8e extends b8e{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new Pv(bx,x2),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){super.reset(e),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(e){return new p8e(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,r,n,s,o,a,l,c,h,u){const d=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(x8e);let f=0;for(;f<e.textures.length;){const T=`${gt.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(e.textures[f],f,T),++f}for(let T=0;T<this.paletteTextures_.length;++T){const A=this.paletteTextures_[T],R=A.getTexture(d);this.helper.bindTexture(R,f,A.name),++f}const p=r.viewState,g=o[0]+2*h,m=o[1]+2*h,_=e.tile.tileCoord,v=_[1],x=_[2];this.helper.setUniformMatrixValue(gt.TILE_TRANSFORM,f0e(this.tempMat4,t)),this.helper.setUniformFloatValue(gt.TRANSITION_ALPHA,u),this.helper.setUniformFloatValue(gt.DEPTH,c);let w=n;h>0&&(w=l,Er(w,n,w)),this.helper.setUniformFloatVec4(gt.RENDER_EXTENT,w),this.helper.setUniformFloatValue(gt.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(gt.ZOOM,p.zoom),this.helper.setUniformFloatValue(gt.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(gt.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(gt.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(gt.TEXTURE_ORIGIN_X,a[0]+v*o[0]*s-h*s),this.helper.setUniformFloatValue(gt.TEXTURE_ORIGIN_Y,a[1]-x*o[1]*s+h*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const n=this.getLayer(),s=Ci(r.pixelToCoordinateTransform,e.slice()),o=r.viewState,a=n.getExtent();if(a&&!As(Ms(a,o.projection),s))return null;const l=n.getSources(Vr([s]),o.resolution);let c,h,u;for(c=l.length-1;c>=0;--c)if(h=l[c],h.getState()==="ready"){if(u=h.getTileGridForProjection(o.projection),h.getWrapX())break;const f=u.getExtent();if(!f||As(f,s))break}if(c<0)return null;const d=this.tileRepresentationCache;for(let f=u.getZForResolution(o.resolution);f>=u.getMinZoom();--f){const p=u.getTileCoordForCoordAndZ(s,f),g=VS(h,p);if(!d.containsKey(g))continue;const m=d.get(g),y=m.tile;if((y instanceof Af||y instanceof T2)&&y.getState()===ie.EMPTY)return null;if(!m.loaded)continue;const _=u.getOrigin(f),v=Mi(u.getTileSize(f)),x=u.getResolution(f),w=(s[0]-_[0])/x-p[1]*v[0],T=(_[1]-s[1])/x-p[2]*v[1];return m.getPixelData(w,T)}return null}disposeInternal(){const e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}function E8e(i,e){return`operator_${i}_${Object.keys(e.functions).length}`}function Uh(i){const e=i.toString();return e.includes(".")?e:e+".0"}function R2(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(Uh).join(", ")})`}function M_(i){const e=Do(i),t=e.length>3?e[3]:1;return R2([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}const Jw={};let S8e=0;function Dv(i){return i in Jw||(Jw[i]=S8e++),Jw[i]}function Ha(i){return Uh(Dv(i))}function L2(i){return"u_var_"+i}function C8e(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const Qw="getBandValue",E0e="u_paletteTextures";function T8e(i,e,t,r){const n=ii(i,t,e);if(fy(n.type,vu))throw new Error("No matching type was found");if(!Ro(e,n.type)){const s=Sr(e),o=Sr(n.type);throw new Error(`Expected expression to be of type ${s}, got ${o}`)}return I2(n,e,r)}function Wt(i){return(e,t,r)=>{const n=t.args.length,s=new Array(n);for(let o=0;o<n;++o)s[o]=I2(t.args[o],r,e);return i(s,e)}}const A8e={[J.Get]:(i,e)=>{const r=e.args[0].value;return r in i.properties||(i.properties[r]={name:r,type:e.type}),(i.inFragmentShader?"v_prop_":"a_prop_")+r},[J.GeometryType]:(i,e,t)=>{const r="geometryType";return r in i.properties||(i.properties[r]={name:r,type:br,evaluator:o=>UT(o.getGeometry())}),(i.inFragmentShader?"v_prop_":"a_prop_")+r},[J.Var]:(i,e)=>{const r=e.args[0].value;return r in i.variables||(i.variables[r]={name:r,type:e.type}),L2(r)},[J.Resolution]:()=>"u_resolution",[J.Zoom]:()=>"u_zoom",[J.Time]:()=>"u_time",[J.Any]:Wt(i=>`(${i.join(" || ")})`),[J.All]:Wt(i=>`(${i.join(" && ")})`),[J.Not]:Wt(([i])=>`(!${i})`),[J.Equal]:Wt(([i,e])=>`(${i} == ${e})`),[J.NotEqual]:Wt(([i,e])=>`(${i} != ${e})`),[J.GreaterThan]:Wt(([i,e])=>`(${i} > ${e})`),[J.GreaterThanOrEqualTo]:Wt(([i,e])=>`(${i} >= ${e})`),[J.LessThan]:Wt(([i,e])=>`(${i} < ${e})`),[J.LessThanOrEqualTo]:Wt(([i,e])=>`(${i} <= ${e})`),[J.Multiply]:Wt(i=>`(${i.join(" * ")})`),[J.Divide]:Wt(([i,e])=>`(${i} / ${e})`),[J.Add]:Wt(i=>`(${i.join(" + ")})`),[J.Subtract]:Wt(([i,e])=>`(${i} - ${e})`),[J.Clamp]:Wt(([i,e,t])=>`clamp(${i}, ${e}, ${t})`),[J.Mod]:Wt(([i,e])=>`mod(${i}, ${e})`),[J.Pow]:Wt(([i,e])=>`pow(${i}, ${e})`),[J.Abs]:Wt(([i])=>`abs(${i})`),[J.Floor]:Wt(([i])=>`floor(${i})`),[J.Ceil]:Wt(([i])=>`ceil(${i})`),[J.Round]:Wt(([i])=>`floor(${i} + 0.5)`),[J.Sin]:Wt(([i])=>`sin(${i})`),[J.Cos]:Wt(([i])=>`cos(${i})`),[J.Atan]:Wt(([i,e])=>e!==void 0?`atan(${i}, ${e})`:`atan(${i})`),[J.Sqrt]:Wt(([i])=>`sqrt(${i})`),[J.Match]:Wt(i=>{const e=i[0],t=i[i.length-1];let r=null;for(let n=i.length-3;n>=1;n-=2){const s=i[n],o=i[n+1];r=`(${e} == ${s} ? ${o} : ${r||t})`}return r}),[J.Between]:Wt(([i,e,t])=>`(${i} >= ${e} && ${i} <= ${t})`),[J.Interpolate]:Wt(([i,e,...t])=>{let r="";for(let n=0;n<t.length-2;n+=2){const s=t[n],o=r||t[n+1],a=t[n+2],l=t[n+3];let c;i===Uh(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${i}, (${e} - ${s})) - 1.0) / (pow(${i}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[J.Case]:Wt(i=>{const e=i[i.length-1];let t=null;for(let r=i.length-3;r>=0;r-=2){const n=i[r],s=i[r+1];t=`(${n} ? ${s} : ${t||e})`}return t}),[J.In]:Wt(([i,...e],t)=>{const r=E8e("in",t),n=[];for(let s=0;s<e.length;s+=1)n.push(`  if (inputValue == ${e[s]}) { return true; }`);return t.functions[r]=`bool ${r}(float inputValue) {
${n.join(`
`)}
  return false;
}`,`${r}(${i})`}),[J.Array]:Wt(i=>`vec${i.length}(${i.join(", ")})`),[J.Color]:Wt(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`(${i[1]} * vec4(vec3(${i[0]} / 255.0), 1.0))`;const e=i.slice(0,3).map(r=>`${r} / 255.0`);return i.length===3?`vec4(${e.join(", ")}, 1.0)`:`(${i[3]} * vec4(${e.join(", ")}, 1.0))`}),[J.Band]:Wt(([i,e,t],r)=>{if(!(Qw in r.functions)){let n="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${gt.TILE_TEXTURE_ARRAY}[${a}]`;n+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[Qw]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${gt.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${gt.TEXTURE_PIXEL_HEIGHT};
${n}
}`}return`${Qw}(${i}, ${e??"0.0"}, ${t??"0.0"})`}),[J.Palette]:(i,e)=>{const[t,...r]=e.args,n=r.length,s=new Uint8Array(n*4);for(let c=0;c<r.length;c++){const h=r[c].value,u=Do(h),d=c*4;s[d]=u[0],s[d+1]=u[1],s[d+2]=u[2],s[d+3]=u[3]*255}i.paletteTextures||(i.paletteTextures=[]);const o=`${E0e}[${i.paletteTextures.length}]`,a=new s8e(o,s);i.paletteTextures.push(a);const l=I2(t,ye,i);return`texture2D(${o}, vec2((${l} + 0.5) / ${n}.0, 0.5))`}};function I2(i,e,t){if(i instanceof Fme){const r=A8e[i.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return r(t,i,e)}if((i.type&ye)>0)return Uh(i.value);if((i.type&xi)>0)return i.value.toString();if((i.type&br)>0)return Ha(i.value.toString());if((i.type&ri)>0)return M_(i.value);if((i.type&cr)>0)return R2(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${Sr(e)})`)}function M8e(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const ad=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,ld=M8e();class S0e{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Uh(ld["circle-radius"])} + ${Uh(ld["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=M_(ld["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Uh(ld["stroke-width"]),this.strokeColorExpression_=M_(ld["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Ha("round"),this.strokeJoinExpression_=Ha("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=M_(ld["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,t,r){return this.varyings_.push({name:e,type:t,expression:r}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${xce} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${xce}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Ha("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Ha("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Ha("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Ha("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0.5, -0.5, distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${ad}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}const vo={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},R8e=["#00f","#0ff","#0f0","#ff0","#f00"];class L8e extends np{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(vo.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:R8e),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";typeof r=="string"?this.weightFunction_=function(n){return n.get(r)}:this.weightFunction_=r,this.setRenderOrder(null)}getBlur(){return this.get(vo.BLUR)}getGradient(){return this.get(vo.GRADIENT)}getRadius(){return this.get(vo.RADIUS)}handleGradientChanged_(){this.gradient_=I8e(this.getGradient())}setBlur(e){this.set(vo.BLUR,e)}setGradient(e){this.set(vo.GRADIENT,e)}setRadius(e){this.set(vo.RADIUS,e)}createRenderer(){const e=new S0e().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new v0e(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const r=this.weightFunction_(t);return r!==void 0?tt(r,0,1):1}}],uniforms:{u_size:()=>(this.get(vo.RADIUS)+this.get(vo.BLUR))*2,u_blurSlope:()=>this.get(vo.RADIUS)/Math.max(1,this.get(vo.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function I8e(i){const r=vi(1,256),n=r.createLinearGradient(0,0,1,256),s=1/(i.length-1);for(let o=0,a=i.length;o<a;++o)n.addColorStop(o*s,i[o]);return r.fillStyle=n,r.fillRect(0,0,1,256),r.canvas}const P8e=L8e;class k8e extends yu{constructor(e){e=e||{},super(e)}}class C0e extends b2{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,s=n.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Er(l,Ms(t.extent,n.projection))),!a[ci.ANIMATING]&&!a[ci.INTERACTING]&&!Aa(l))if(o){const c=n.projection,h=o.getImage(l,s,r,c);h&&(this.loadImage(h)?this.image_=h:h.getState()===Le.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=Ci(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!As(s,n))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=rt(o),c=Math.floor(a.width*((n[0]-o[0])/l));if(c<0||c>=a.width)return null;const h=fi(o),u=Math.floor(a.height*((o[3]-n[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(e,t){const r=this.image_,n=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,u=e.viewState,d=u.center,f=u.resolution,p=h*o/(f*l),g=h*a/(f*l),m=e.extent,y=u.resolution,_=u.rotation,v=Math.round(rt(m)/y*h),x=Math.round(fi(m)/y*h);Pn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,_,-v/2,-x/2),cy(this.inversePixelTransform,this.pixelTransform);const w=ET(this.pixelTransform);this.useContainer(t,w,this.getBackground(e));const T=this.getRenderContext(e),A=this.context.canvas;A.width!=v||A.height!=x?(A.width=v,A.height=x):this.containerReused||T.clearRect(0,0,v,x);let R=!1,L=!0;if(c.extent){const E=Ms(c.extent,u.projection);L=gi(E,e.extent),R=L&&!Hr(E,e.extent),R&&this.clipUnrotated(T,e,E)}const P=r.getImage(),F=Pn(this.tempTransform,v/2,x/2,p,g,0,l*(n[0]-d[0])/o,l*(d[1]-n[3])/a);this.renderedResolution=a*h/l;const B=P.width*F[0],b=P.height*F[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e),L&&B>=.5&&b>=.5){const E=F[4],C=F[5],M=c.opacity;M!==1&&(T.save(),T.globalAlpha=M),T.drawImage(P,0,0,+P.width,+P.height,E,C,B,b),M!==1&&T.restore()}return this.postRender(this.context,e),R&&T.restore(),T.imageSmoothingEnabled=!0,w!==A.style.transform&&(A.style.transform=w),this.container}}class Cx extends k8e{constructor(e){super(e)}createRenderer(){return new C0e(this)}getData(e){return super.getData(e)}}const uc={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class T0e extends yu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(uc.PRELOAD)}setPreload(e){this.set(uc.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(uc.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(uc.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class A0e extends b2{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=_n(),this.tmpTileRange_=new Sx(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==ie.LOADED||r==ie.EMPTY||r==ie.ERROR&&!n}getTile(e,t,r,n){const s=n.pixelRatio,o=n.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,r,s,o);return c.getState()==ie.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=Ci(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!As(s,n))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=r.getRenderSource(),h=c.getTileGridForProjection(l.projection),u=c.getTilePixelRatio(t.pixelRatio);for(let d=h.getZForResolution(l.resolution);d>=h.getMinZoom();--d){const f=h.getTileCoordForCoordAndZ(n,d),p=c.getTile(d,f[1],f[2],o,a);if(!(p instanceof xy||p instanceof Af)||p instanceof Af&&p.getState()===ie.EMPTY)return null;if(p.getState()!==ie.LOADED)continue;const g=h.getOrigin(d),m=Mi(h.getTileSize(d)),y=h.getResolution(d),_=Math.floor(u*((n[0]-g[0])/y-f[1]*m[0])),v=Math.floor(u*((g[1]-n[1])/y-f[2]*m[1])),x=Math.round(u*c.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),_+x,v+x)}return null}loadedTileCallback(e,t,r){return this.isDrawableTile(r)?super.loadedTileCallback(e,t,r):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,o=n.resolution,a=n.center,l=n.rotation,c=e.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(s),p=f.getZForResolution(o,u.zDirection),g=f.getResolution(p);let m=e.extent;const y=e.viewState.resolution,_=u.getTilePixelRatio(c),v=Math.round(rt(m)/y*c),x=Math.round(fi(m)/y*c),w=r.extent&&Ms(r.extent);w&&(m=Er(m,Ms(r.extent)));const T=g*v/2/_,A=g*x/2/_,R=[a[0]-T,a[1]-A,a[0]+T,a[1]+A],L=f.getTileRangeForExtentAndZ(m,p),P={};P[p]={};const F=this.createLoadedTileFinder(u,s,P),B=this.tmpExtent,b=this.tmpTileRange_;this.newTiles_=!1;const E=l?pS(n.center,y,l,e.size):void 0;for(let V=L.minX;V<=L.maxX;++V)for(let N=L.minY;N<=L.maxY;++N){if(l&&!f.tileCoordIntersectsViewport([p,V,N],E))continue;const X=this.getTile(p,V,N,e);if(this.isDrawableTile(X)){const ve=Ae(this);if(X.getState()==ie.LOADED){P[p][X.tileCoord.toString()]=X;let ge=X.inTransition(ve);ge&&r.opacity!==1&&(X.endTransition(ve),ge=!1),!this.newTiles_&&(ge||!this.renderedTiles.includes(X))&&(this.newTiles_=!0)}if(X.getAlpha(ve,e.time)===1)continue}const ne=f.getTileCoordChildTileRange(X.tileCoord,b,B);let fe=!1;ne&&(fe=F(p+1,ne)),fe||f.forEachTileCoordParentTileRange(X.tileCoord,F,b,B)}const C=g/o*c/_;Pn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-v/2,-x/2);const M=ET(this.pixelTransform);this.useContainer(t,M,this.getBackground(e));const O=this.getRenderContext(e),D=this.context.canvas;cy(this.inversePixelTransform,this.pixelTransform),Pn(this.tempTransform,v/2,x/2,C,C,0,-v/2,-x/2),D.width!=v||D.height!=x?(D.width=v,D.height=x):this.containerReused||O.clearRect(0,0,v,x),w&&this.clipUnrotated(O,e,w),u.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,e),this.renderedTiles.length=0;let U=Object.keys(P).map(Number);U.sort(fa);let z,Z,Q;r.opacity===1&&(!this.containerReused||u.getOpaque(e.viewState.projection))?U=U.reverse():(z=[],Z=[]);for(let V=U.length-1;V>=0;--V){const N=U[V],X=u.getTilePixelSize(N,c,s),fe=f.getResolution(N)/g,ve=X[0]*fe*C,ge=X[1]*fe*C,he=f.getTileCoordForCoordAndZ(No(R),N),Ce=f.getTileCoordExtent(he),Ue=Ci(this.tempTransform,[_*(Ce[0]-R[0])/g,_*(R[3]-Ce[3])/g]),Je=_*u.getGutterForProjection(s),Bi=P[N];for(const ki in Bi){const bi=Bi[ki],hs=bi.tileCoord,co=he[1]-hs[1],oe=Math.round(Ue[0]-(co-1)*ve),ho=he[2]-hs[2],jo=Math.round(Ue[1]-(ho-1)*ge),Ar=Math.round(Ue[0]-co*ve),Fr=Math.round(Ue[1]-ho*ge),wn=oe-Ar,tn=jo-Fr,uo=p===N,fo=uo&&bi.getAlpha(Ae(this),e.time)!==1;let us=!1;if(!fo)if(z){Q=[Ar,Fr,Ar+wn,Fr,Ar+wn,Fr+tn,Ar,Fr+tn];for(let Nn=0,Rl=z.length;Nn<Rl;++Nn)if(p!==N&&N<Z[Nn]){const ur=z[Nn];gi([Ar,Fr,Ar+wn,Fr+tn],[ur[0],ur[3],ur[4],ur[7]])&&(us||(O.save(),us=!0),O.beginPath(),O.moveTo(Q[0],Q[1]),O.lineTo(Q[2],Q[3]),O.lineTo(Q[4],Q[5]),O.lineTo(Q[6],Q[7]),O.moveTo(ur[6],ur[7]),O.lineTo(ur[4],ur[5]),O.lineTo(ur[2],ur[3]),O.lineTo(ur[0],ur[1]),O.clip())}z.push(Q),Z.push(N)}else O.clearRect(Ar,Fr,wn,tn);this.drawTileImage(bi,e,Ar,Fr,wn,tn,Je,uo),z&&!fo?(us&&O.restore(),this.renderedTiles.unshift(bi)):this.renderedTiles.push(bi),this.updateUsedTiles(e.usedTiles,u,bi)}}return this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!io(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,u,f,c,s,m,p,h.getPreload()),this.scheduleExpireCache(e,u),this.postRender(this.context,e),r.extent&&O.restore(),O.imageSmoothingEnabled=!0,M!==D.style.transform&&(D.style.transform=M),this.container}drawTileImage(e,t,r,n,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const h=this.getRenderContext(t),u=Ae(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(u,t.time):1),p=f!==h.globalAlpha;p&&(h.save(),h.globalAlpha=f),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,n,s,o),p&&h.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const r=(function(n,s,o){const a=Ae(n);a in o.usedTiles&&n.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(r)}}updateUsedTiles(e,t,r){const n=Ae(t);n in e||(e[n]={}),e[n][r.getKey()]=!0}manageTilePyramid(e,t,r,n,s,o,a,l,c){const h=Ae(t);h in e.wantedTiles||(e.wantedTiles[h]={});const u=e.wantedTiles[h],d=e.tileQueue,f=r.getMinZoom(),p=e.viewState.rotation,g=p?pS(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let m=0,y,_,v,x,w,T;for(T=f;T<=a;++T)for(_=r.getTileRangeForExtentAndZ(o,T,_),v=r.getResolution(T),x=_.minX;x<=_.maxX;++x)for(w=_.minY;w<=_.maxY;++w)p&&!r.tileCoordIntersectsViewport([T,x,w],g)||(a-T<=l?(++m,y=t.getTile(T,x,w,n,s),y.getState()==ie.IDLE&&(u[y.getKey()]=!0,d.isKeyQueued(y.getKey())||d.enqueue([y,h,r.getTileCoordCenter(y.tileCoord),v])),c!==void 0&&c(y)):t.useTile(T,x,w,s));t.updateCacheSize(m,s)}}class Rm extends T0e{constructor(e){super(e)}createRenderer(){return new A0e(this)}}class P2 extends nx{constructor(e,t,r,n,s){const o=s!==void 0?Le.IDLE:Le.LOADED;super(e,t,r,o),this.loader_=s!==void 0?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Le.ERROR):this.state=Le.LOADED,this.changed()}load(){this.state==Le.IDLE&&(this.state=Le.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function Fv(i){return Array.isArray(i)?Math.min(...i):i}class O8e extends C0e{constructor(e){super(e),this.vectorRenderer_=new l0e(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Vi(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=Ci(this.coordinateToVectorPixelTransform_,Ci(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const t=e.pixelRatio,r=e.viewState,n=r.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),uT(a,this.layerImageRatio_));const l=rt(a)/n,c=fi(a)/n;if(!s[ci.ANIMATING]&&!s[ci.INTERACTING]&&!Aa(a)){o.useContainer(null,null);const h=o.context,u=e.layerStatesArray[e.layerIndex],d=Object.assign({},u,{opacity:1}),f=Object.assign({},e,{extent:a,size:[l,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(f.declutter={[p]:new qb(9)});let g=!0;const m=new P2(a,n,t,h.canvas,function(y){o.prepareFrame(f)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(f,null)&&(o.renderDeclutter(f),o.renderDeferred(f),g=!1),y())});m.addEventListener(Ie.CHANGE,()=>{if(m.getState()!==Le.LOADED)return;this.image_=g?null:m;const y=m.getPixelRatio(),_=Fv(m.getResolution())*t/y;this.renderedResolution=_,this.coordinateToVectorPixelTransform_=Pn(this.coordinateToVectorPixelTransform_,l/2,c/2,1/_,-1/_,0,-r.center[0],-r.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,r,n,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,s):super.forEachFeatureAtCoordinate(e,t,r,n,s)}}class D8e extends np{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new O8e(this)}}const F8e=D8e,N8e={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Mce={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class $8e extends A0e{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Vi(),this.tileClipContexts_=null}prepareTile(e,t,r){let n;const s=e.getState();return(s===ie.LOADED||s===ie.ERROR)&&(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(n=!0)),n}getTile(e,t,r,n){const s=n.pixelRatio,o=n.viewState,a=o.resolution,l=o.projection,c=this.getLayer(),h=c.getSource().getTile(e,t,r,s,l),u=n.viewHints,d=!(u[ci.ANIMATING]||u[ci.INTERACTING]);return(d||!h.wantedResolution)&&(h.wantedResolution=a),this.prepareTile(h,s,l)&&(d||Date.now()-n.time<8)&&c.getRenderMode()!=="vector"&&this.renderTileImage_(h,n),super.getTile(e,t,r,n)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?Ae(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){var m;const n=this.getLayer(),s=n.getRevision(),o=n.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(n);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const c=n.getSource(),h=!!n.getDeclutter(),u=c.getTileGrid(),f=c.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),p=c.getSourceTiles(t,r,e),g=Ae(n);delete e.hitDetectionImageData[g],e.executorGroups[g]=[],l.dirty=!1;for(let y=0,_=p.length;y<_;++y){const v=p[y];if(v.getState()!=ie.LOADED)continue;const x=v.tileCoord,w=u.getTileCoordExtent(x),T=Er(f,w),A=rs(T,n.getRenderBuffer()*a,this.tmpExtent),R=io(w,T)?null:A,L=new Qye(0,T,a,t),P=Lv(a,t),F=function(M,O){let D;const U=M.getStyleFunction()||n.getStyleFunction();if(U&&(D=U(M,a)),D){const z=this.renderFeature(M,P,D,L,h,O);l.dirty=l.dirty||z}},B=v.getFeatures();o&&o!==l.renderedRenderOrder&&B.sort(o);for(let M=0,O=B.length;M<O;++M){const D=B[M];(!R||gi(R,D.getGeometry().getExtent()))&&F.call(this,D,M)}const b=L.finish(),E=n.getRenderMode()!=="vector"&&h&&p.length===1?null:T,C=new t0e(E,a,t,c.getOverlaps(),b,n.getRenderBuffer(),!!((m=this.frameState)!=null&&m.declutter));e.executorGroups[g].push(C)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,r,n,s){const o=t.viewState.resolution,a=t.viewState.rotation;r=r??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(t.viewState.projection),u=Vr([e]);rs(u,o*r,u);const d={},f=function(m,y,_){let v=m.getId();v===void 0&&(v=Ae(m));const x=d[v];if(x){if(x!==!0&&_<x.distanceSq){if(_===0)return d[v]=!0,s.splice(s.lastIndexOf(x),1),n(m,l,y);x.geometry=y,x.distanceSq=_}}else{if(_===0)return d[v]=!0,n(m,l,y);s.push(d[v]={feature:m,layer:l,geometry:y,distanceSq:_,callback:n})}},p=this.renderedTiles;let g;for(let m=0,y=p.length;!g&&m<y;++m){const _=p[m],v=h.getTileCoordExtent(_.wrappedTileCoord);if(!gi(v,u))continue;const x=Ae(l),w=[_.executorGroups[x]],T=l.getDeclutter();w.some(A=>{const R=T?t.declutter[T].all().map(L=>L.value):null;for(let L=0,P=A.length;L<P;++L)if(g=A[L].forEachFeatureAtCoordinate(e,o,a,r,f,R),g)return!0})}return g}getFeatures(e){return new Promise((t,r)=>{const n=this.getLayer(),s=Ae(n),o=n.getSource(),a=this.renderedProjection,l=a.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(a),u=Ci(this.renderedPixelToCoordinateTransform_,e.slice()),d=h.getTileCoordForCoordAndResolution(u,c);let f;for(let v=0,x=this.renderedTiles.length;v<x;++v)if(d.toString()===this.renderedTiles[v].tileCoord.toString()){if(f=this.renderedTiles[v],f.getState()===ie.LOADED){const w=h.getTileCoordExtent(f.tileCoord);o.getWrapX()&&a.canWrapX()&&!Hr(l,w)&&Zb(u,a);break}f=void 0}if(!f||f.loadingSourceTiles>0){t([]);return}const p=h.getTileCoordExtent(f.wrappedTileCoord),g=No(p),m=[(u[0]-g[0])/c,(g[1]-u[1])/c],y=f.getSourceTiles().reduce(function(v,x){return v.concat(x.getFeatures())},[]);let _=f.hitDetectionImageData[s];if(!_){const v=Mi(h.getTileSize(h.getZForResolution(c,o.zDirection))),x=this.renderedRotation_,w=[this.getRenderTransform(h.getTileCoordCenter(f.wrappedTileCoord),c,0,Cs,v[0]*Cs,v[1]*Cs,0)];_=r0e(v,w,y,n.getStyleFunction(),h.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(n).renderedResolution,x),f.hitDetectionImageData[s]=_}t(n0e(m,y,_))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,n=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[ci.ANIMATING]||s[ci.INTERACTING]),a=this.renderedTiles;for(let l=0,c=a.length;l<c;++l){const h=a[l],u=h.executorGroups[Ae(this.getLayer())],d=this.getLayer().getDeclutter();if(u)for(let f=u.length-1;f>=0;--f)u[f].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(h,e),e.viewState.rotation,o,Rv,d?e.declutter[d]:void 0)}r.globalAlpha=n}renderDeferredInternal(e){const r=this.renderedTiles.reduce((o,a,l)=>(a.executorGroups[Ae(this.getLayer())].forEach(c=>o.push({executorGroup:c,index:l})),o),[]),n=r.map(({executorGroup:o})=>o.getDeferredZIndexContexts());n.map(o=>Object.keys(o)).flat().sort(fa).map(Number).forEach(o=>{n.forEach((a,l)=>{a[o]&&a[o].forEach(c=>{const{executorGroup:h,index:u}=r[l],d=h.getRenderedContext(),f=d.globalAlpha;d.globalAlpha=this.renderedOpacity_;const p=this.tileClipContexts_[u];p&&p.draw(d),c.draw(d),p&&d.restore(),d.globalAlpha=f,c.clear()})})})}getTileRenderTransform(e,t){const r=t.pixelRatio,n=t.viewState,s=n.center,o=n.resolution,a=n.rotation,l=t.size,c=Math.round(l[0]*r),h=Math.round(l[1]*r),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,p=d.getTileCoordExtent(e.wrappedTileCoord),g=d.getTileCoordExtent(f,this.tmpExtent)[0]-p[0];return ip(Og(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,o,a,r,c,h,g))}postRender(e,t){const r=t.viewHints,n=!(r[ci.ANIMATING]||r[ci.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),c=l?Mce[o].filter(x=>!Rv.includes(x)):Mce[o],h=t.viewState,u=h.rotation,d=s.getSource(),p=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),g=this.renderedTiles,m=[],y=[],_=[];let v=!0;for(let x=g.length-1;x>=0;--x){const w=g[x];v=v&&!w.getReplayState(s).dirty;const T=w.executorGroups[Ae(s)].filter(b=>b.hasExecutors(c));if(T.length===0)continue;const A=this.getTileRenderTransform(w,t),R=w.tileCoord[0];let L=!1;const P=T[0].getClipCoords(A);let F=e,B;if(P){l&&(B=new v2,F=B.getContext());for(let b=0,E=m.length;b<E;++b)if(p!==R&&R<y[b]){const C=m[b];gi([P[0],P[3],P[4],P[7]],[C[0],C[3],C[4],C[7]])&&(L||(F.save(),L=!0),F.beginPath(),F.moveTo(P[0],P[1]),F.lineTo(P[2],P[3]),F.lineTo(P[4],P[5]),F.lineTo(P[6],P[7]),F.moveTo(C[6],C[7]),F.lineTo(C[4],C[5]),F.lineTo(C[2],C[3]),F.lineTo(C[0],C[1]),F.clip())}m.push(P),y.push(R)}for(let b=0,E=T.length;b<E;++b)T[b].execute(e,[e.canvas.width,e.canvas.height],A,u,n,c);L&&(F===e?F.restore():_[x]=B)}e.globalAlpha=a,this.ready=v,this.tileClipContexts_=_,super.postRender(e,t)}renderFeature(e,t,r,n,s,o){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,c=r.length;l<c;++l)a=Iv(n,e,r[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=Iv(n,e,r,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==n}renderTileImage_(e,t){const r=this.getLayer(),n=e.getReplayState(r),s=r.getRevision(),o=e.executorGroups[Ae(r)];n.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],c=r.getSource();let h=t.pixelRatio;const d=t.viewState.projection,f=c.getTileGridForProjection(d),p=f.getResolution(e.tileCoord[0]),g=t.pixelRatio/e.wantedResolution*p,m=f.getResolution(l),y=e.getContext(r);h=Math.round(Math.max(h,g/h));const _=c.getTilePixelSize(l,h,d);y.canvas.width=_[0],y.canvas.height=_[1];const v=h/g;if(v!==1){const A=_S(this.tmpTransform_);Og(A,v,v),y.setTransform.apply(y,A)}const x=f.getTileCoordExtent(a,this.tmpExtent),w=g/m,T=_S(this.tmpTransform_);Og(T,w,-w),wT(T,-x[0],-x[3]);for(let A=0,R=o.length;A<R;++A)o[A].execute(y,[y.canvas.width*v,y.canvas.height*v],T,0,!0,N8e[r.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}class k2 extends np{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const r=e.renderMode||"hybrid";pt(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new $8e(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(uc.PRELOAD)}getUseInterimTilesOnError(){return this.get(uc.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(uc.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(uc.USE_INTERIM_TILES_ON_ERROR,e)}}function at(i,e,t){const r=GT();return r.style=i.style,T8e(e,t,r,i)}function Rce(i){const e=Do(i),t=e[0]*256,r=e[1],n=e[2]*256,s=Math.round(e[3]*255);return[t+r,n+s]}const B8e=`vec4 unpackColor(vec2 packedColor) {
  return fract(packedColor[1] / 256.0) * vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    1.0
  );
}`;function M0e(i){return i===ri?2:i===cr?4:1}function e1(i){const e=M0e(i);return e>1?`vec${e}`:"float"}function Nv(i){return(JSON.stringify(i).split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0),0)>>>0).toString()}function O2(i,e,t,r){if(`${r}radius`in i&&r!=="icon-"){let n=at(t,i[`${r}radius`],ye);if(`${r}radius2`in i){const s=at(t,i[`${r}radius2`],ye);n=`max(${n}, ${s})`}`${r}stroke-width`in i&&(n=`(${n} + ${at(t,i[`${r}stroke-width`],ye)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${n} * 2. + 0.5)`)}if(`${r}scale`in i){const n=at(t,i[`${r}scale`],ye|cr);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${n}`)}`${r}displacement`in i&&e.setSymbolOffsetExpression(at(t,i[`${r}displacement`],cr)),`${r}rotation`in i&&e.setSymbolRotationExpression(at(t,i[`${r}rotation`],ye)),`${r}rotate-with-view`in i&&e.setSymbolRotateWithView(!!i[`${r}rotate-with-view`])}function R0e(i,e,t,r,n){let s="vec4(0.)";if(e!==null&&(s=e),t!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${i})`;s=`mix(${t}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${i}))`;let a=`${s} * ${o}`;return n!==null&&(a=`${a} * ${n}`),a}function D2(i,e,t,r,n){const s=new Image;let o;return s.crossOrigin=i[`${r}cross-origin`]===void 0?"anonymous":i[`${r}cross-origin`],s.src=i[`${r}src`],s.complete&&s.width&&s.height?o=R2([s.width,s.height]):(t[`u_texture${n}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${n}_size`),o=`u_texture${n}_size`),t[`u_texture${n}`]=s,e.addUniform(`sampler2D u_texture${n}`),o}function F2(i,e,t,r,n){let s=at(t,i[`${e}offset`],cr);if(`${e}offset-origin`in i)switch(i[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${n} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${n} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${n} - ${s}`;break}return s}function j8e(i,e,t,r,n){n.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,O2(i,e,r,"circle-");let s=null;"circle-opacity"in i&&(s=at(n,i["circle-opacity"],ye));let o="coordsPx";"circle-scale"in i&&(o=`coordsPx / ${at(n,i["circle-scale"],ye|cr)}`);let a=null;"circle-fill-color"in i&&(a=at(n,i["circle-fill-color"],ri));let l=null;"circle-stroke-color"in i&&(l=at(n,i["circle-stroke-color"],ri));let c=at(n,i["circle-radius"],ye),h=null;"circle-stroke-width"in i&&(h=at(n,i["circle-stroke-width"],ye),c=`(${c} + ${h} * 0.5)`);const u=`circleDistanceField(${o}, ${c})`,d=R0e(u,a,l,h,s);e.setSymbolColorExpression(d)}function z8e(i,e,t,r,n){n.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,n.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,n.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,O2(i,e,r,"shape-");let s=null;"shape-opacity"in i&&(s=at(n,i["shape-opacity"],ye));let o="coordsPx";"shape-scale"in i&&(o=`coordsPx / ${at(n,i["shape-scale"],ye|cr)}`);let a=null;"shape-fill-color"in i&&(a=at(n,i["shape-fill-color"],ri));let l=null;"shape-stroke-color"in i&&(l=at(n,i["shape-stroke-color"],ri));let c=null;"shape-stroke-width"in i&&(c=at(n,i["shape-stroke-width"],ye));const h=at(n,i["shape-points"],ye);let u="0.";"shape-angle"in i&&(u=at(n,i["shape-angle"],ye));let d,f=at(n,i["shape-radius"],ye);if(c!==null&&(f=`${f} + ${c} * 0.5`),"shape-radius2"in i){let g=at(n,i["shape-radius2"],ye);c!==null&&(g=`${g} + ${c} * 0.5`),d=`starDistanceField(${o}, ${h}, ${f}, ${g}, ${u})`}else d=`regularDistanceField(${o}, ${h}, ${f}, ${u})`;const p=R0e(d,a,l,c,s);e.setSymbolColorExpression(p)}function G8e(i,e,t,r,n){let s="vec4(1.0)";"icon-color"in i&&(s=at(n,i["icon-color"],ri)),"icon-opacity"in i&&(s=`${s} * ${at(n,i["icon-opacity"],ye)}`);const o=Nv(i["icon-src"]),a=D2(i,e,t,"icon-",o);if(e.setSymbolColorExpression(`${s} * samplePremultiplied(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in i&&"icon-height"in i&&e.setSymbolSizeExpression(`vec2(${at(r,i["icon-width"],ye)}, ${at(r,i["icon-height"],ye)})`),"icon-offset"in i&&"icon-size"in i){const l=at(r,i["icon-size"],cr),c=e.getSymbolSizeExpression();e.setSymbolSizeExpression(l);const h=F2(i,"icon-",r,"v_quadSizePx",l);e.setTextureCoordinateExpression(`(vec4((${h}).xyxy) + vec4(0., 0., ${l})) / (${c}).xyxy`)}if(O2(i,e,r,"icon-"),"icon-anchor"in i){const l=at(r,i["icon-anchor"],cr);let c="1.0";"icon-scale"in i&&(c=at(r,i["icon-scale"],ye|cr));let h;i["icon-anchor-x-units"]==="pixels"&&i["icon-anchor-y-units"]==="pixels"?h=`${l} * ${c}`:i["icon-anchor-x-units"]==="pixels"?h=`${l} * vec2(vec2(${c}).x, v_quadSizePx.y)`:i["icon-anchor-y-units"]==="pixels"?h=`${l} * vec2(v_quadSizePx.x, vec2(${c}).x)`:h=`${l} * v_quadSizePx`;let u=`v_quadSizePx * vec2(0.5, -0.5) + ${h} * vec2(-1., 1.)`;if("icon-anchor-origin"in i)switch(i["icon-anchor-origin"]){case"top-right":u=`v_quadSizePx * -0.5 + ${h}`;break;case"bottom-left":u=`v_quadSizePx * 0.5 - ${h}`;break;case"bottom-right":u=`v_quadSizePx * vec2(-0.5, 0.5) + ${h} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${u}`)}}function U8e(i,e,t,r,n){if("stroke-color"in i&&e.setStrokeColorExpression(at(n,i["stroke-color"],ri)),"stroke-pattern-src"in i){const s=Nv(i["stroke-pattern-src"]),o=D2(i,e,t,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in i&&"stroke-pattern-size"in i&&(a=at(n,i["stroke-pattern-size"],cr),l=F2(i,"stroke-pattern-",n,o,a));let c="0.";"stroke-pattern-spacing"in i&&(c=at(n,i["stroke-pattern-spacing"],ye)),n.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return samplePremultiplied(texture, texCoord);
}`;const h=`u_texture${s}`;let u="1.";"stroke-color"in i&&(u=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${u} * sampleStrokePattern(${h}, ${o}, ${l}, ${a}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in i&&e.setStrokeWidthExpression(at(r,i["stroke-width"],ye)),"stroke-offset"in i&&e.setStrokeOffsetExpression(at(r,i["stroke-offset"],ye)),"stroke-line-cap"in i&&e.setStrokeCapExpression(at(r,i["stroke-line-cap"],br)),"stroke-line-join"in i&&e.setStrokeJoinExpression(at(r,i["stroke-line-join"],br)),"stroke-miter-limit"in i&&e.setStrokeMiterLimitExpression(at(r,i["stroke-miter-limit"],ye)),"stroke-line-dash"in i){n.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Ha("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Ha("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=i["stroke-line-dash"].map(f=>at(n,f,ye));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in i&&(o=at(r,i["stroke-line-dash-offset"],ye));const l=`dashDistanceField_${Nv(i["stroke-line-dash"])}`,c=s.map((f,p)=>`float dashLength${p} = ${f};`),h=s.map((f,p)=>`dashLength${p}`).join(" + ");let u="0.",d=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType)`;for(let f=2;f<s.length;f+=2)u=`${u} + dashLength${f-2} + dashLength${f-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${u}, dashLength${f}, totalDashLength, capType))`;n.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${c.join(`
  `)}
  float totalDashLength = ${h};
  return ${d};
}`,e.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function V8e(i,e,t,r,n){if("fill-color"in i&&e.setFillColorExpression(at(n,i["fill-color"],ri)),"fill-pattern-src"in i){const s=Nv(i["fill-pattern-src"]),o=D2(i,e,t,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in i&&"fill-pattern-size"in i&&(a=at(n,i["fill-pattern-size"],cr),l=F2(i,"fill-pattern-",n,o,a)),n.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);
}`;const c=`u_texture${s}`;let h="1.";"fill-color"in i&&(h=e.getFillColorExpression()),e.setFillColorExpression(`${h} * sampleFillPattern(${c}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function q8e(i){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:i},t={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:i},r=new S0e,n={};if("icon-src"in i?G8e(i,r,n,e,t):"shape-points"in i?z8e(i,r,n,e,t):"circle-radius"in i&&j8e(i,r,n,e,t),U8e(i,r,n,e,t),V8e(i,r,n,e,t),i.filter){const o=at(t,i.filter,xi);r.setFragmentDiscardExpression(`!${o}`)}Object.keys(t.variables).forEach(function(o){const a=t.variables[o],l=L2(a.name);r.addUniform(`${e1(a.type)} ${l}`);let c;a.type===br?c=()=>Dv(i.variables[a.name]):a.type===ri?c=()=>Rce([...Do(i.variables[a.name]||"#eee")]):a.type===xi?c=()=>i.variables[a.name]?1:0:c=()=>i.variables[a.name],n[l]=c}),Object.keys(t.properties).forEach(function(o){const a=t.properties[o];e.properties[o]||(e.properties[o]=a);let l=e1(a.type),c=`a_prop_${a.name}`;a.type===ri&&(l="vec4",c=`unpackColor(${c})`,r.addVertexShaderFunction(B8e)),r.addVarying(`v_prop_${a.name}`,l,c)}),Object.keys(e.properties).forEach(function(o){const a=e.properties[o];r.addAttribute(`${e1(a.type)} a_prop_${a.name}`)});const s=Object.keys(e.properties).map(function(o){const a=e.properties[o];let l;return a.evaluator?l=a.evaluator:a.type===br?l=c=>Dv(c.get(a.name)):a.type===ri?l=c=>Rce([...Do(c.get(a.name)||"#eee")]):a.type===xi?l=c=>c.get(a.name)?1:0:l=c=>c.get(a.name),{name:a.name,size:M0e(a.type),callback:l}});for(const o in e.functions)r.addVertexShaderFunction(e.functions[o]);for(const o in t.functions)r.addFragmentShaderFunction(t.functions[o]);return{builder:r,attributes:s.reduce((o,a)=>({...o,[a.name]:{callback:a.callback,size:a.size}}),{}),uniforms:n}}class H8e extends yu{constructor(e){const t=Object.assign({},e);super(t),this.parseResult_=q8e(e.style),this.styleVariables_=e.style.variables||{},this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(t=>({name:t,...this.parseResult_.attributes[t]}));return new v0e(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}const W8e=H8e;function Lce(i,e){const t=`
    attribute vec2 ${A_.TEXTURE_COORD};
    uniform mat4 ${gt.TILE_TRANSFORM};
    uniform float ${gt.TEXTURE_PIXEL_WIDTH};
    uniform float ${gt.TEXTURE_PIXEL_HEIGHT};
    uniform float ${gt.TEXTURE_RESOLUTION};
    uniform float ${gt.TEXTURE_ORIGIN_X};
    uniform float ${gt.TEXTURE_ORIGIN_Y};
    uniform float ${gt.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${A_.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${gt.TEXTURE_ORIGIN_X} + ${gt.TEXTURE_RESOLUTION} * ${gt.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${gt.TEXTURE_ORIGIN_Y} - ${gt.TEXTURE_RESOLUTION} * ${gt.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${gt.TILE_TRANSFORM} * vec4(${A_.TEXTURE_COORD}, ${gt.DEPTH}, 1.0);
    }
  `,r={...C8e(),inFragmentShader:!0,bandCount:e,style:i},n=[];if(i.color!==void 0){const u=at(r,i.color,ri);n.push(`color = ${u};`)}if(i.contrast!==void 0){const u=at(r,i.contrast,ye);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb - (${u} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const u=at(r,i.exposure,ye);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const u=at(r,i.saturation,ye);n.push(`
      float saturation = ${u} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const u=at(r,i.gamma,ye);n.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${u}));`)}if(i.brightness!==void 0){const u=at(r,i.brightness,ye);n.push(`color.rgb = clamp(color.rgb + ${u}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(r.variables).length;if(o>1&&!i.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let u=0;u<o;++u){const d=r.variables[Object.keys(r.variables)[u]];if(!(d.name in i.variables))throw new Error(`Missing '${d.name}' in style variables`);const f=L2(d.name);s[f]=function(){let p=i.variables[d.name];return typeof p=="string"&&(p=Dv(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(u){return`uniform float ${u};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${gt.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${E0e}[${r.paletteTextures.length}];`);const c=Object.keys(r.functions).map(function(u){return r.functions[u]}),h=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${gt.RENDER_EXTENT};
    uniform float ${gt.TRANSITION_ALPHA};
    uniform float ${gt.TEXTURE_PIXEL_WIDTH};
    uniform float ${gt.TEXTURE_PIXEL_HEIGHT};
    uniform float ${gt.RESOLUTION};
    uniform float ${gt.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${gt.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${gt.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${gt.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${gt.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${gt.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${n.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${gt.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:h,uniforms:s,paletteTextures:r.paletteTextures}}class $v extends T0e{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style;const r=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=r,this.styleVariables_=this.style_.variables||{},this.addChangeListener(ei.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=Lce(this.style_,this.getSourceBandCount_());return new w8e(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const r=this.getRenderer();let n;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],r.prepareFrame(e)&&(n=r.renderFrame(e));return n}render(e,t){this.rendered=!0;const r=e.viewState,n=this.getSources(e.extent,r.resolution);let s=!0;for(let a=0,l=n.length;a<l;++a){const c=n[a],h=c.getState();if(h=="loading"){const u=()=>{c.getState()=="ready"&&(c.removeEventListener("change",u),this.changed())};c.addEventListener("change",u)}s=s&&h=="ready"}const o=this.renderSources(e,n);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,o;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!n.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=Lce(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}$v.prototype.dispose;const Y8e=Object.freeze(Object.defineProperty({__proto__:null,Graticule:C6e,Group:Os,Heatmap:P8e,Image:Cx,Layer:yu,Tile:Rm,Vector:kc,VectorImage:F8e,VectorTile:k2,WebGLPoints:W8e,WebGLTile:$v},Symbol.toStringTag,{value:"Module"}));class Tx extends A2{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),r=w0e(e)[0];this.forEach(n=>{n.tileCoord[0]!==r&&(this.remove(ec(n.tileCoord)),n.release())})}}const Xd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},cd=[0,0,0],Hl=5;class Dc{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,pt(QFe(this.resolutions_,(n,s)=>s-n,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,pt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=No(r)),pt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,pt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:mf,pt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const o=new Sx(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,o=n.maxX;s<=o;++s)for(let a=n.minY,l=n.maxY;a<=l;++a)r([t,s,a])}forEachTileCoordParentTileRange(e,t,r,n){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,n);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=od(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,c,r),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return od(s,s+1,o,o+1,t)}const n=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],o=e[2];if(t===n)return od(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-n),c=Math.floor(s*l),h=Math.floor(o*l);if(t<n)return od(c,c,h,h,r);const u=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return od(c,u,h,d,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,cd);const n=cd[1],s=cd[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,cd);const o=cd[1],a=cd[2];return od(n,o,s,a,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=Mi(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*r,t[1]-(e[2]+.5)*n[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Mi(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*n,a=r[1]-(e[2]+1)*s[1]*n,l=o+s[0]*n,c=a+s[1]*n;return to(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,n,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),c=Mi(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/r/c[0],u=a*(l[1]-t)/r/c[1];return n?(h=lc(h,Hl)-1,u=lc(u,Hl)-1):(h=Ad(h,Hl),u=Ad(u,Hl)),Mm(o,h,u,s)}getTileCoordForXYAndZ_(e,t,r,n,s){const o=this.getOrigin(r),a=this.getResolution(r),l=Mi(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/l[0],h=(o[1]-t)/a/l[1];return n?(c=lc(c,Hl)-1,h=lc(h,Hl)-1):(c=Ad(c,Hl),h=Ad(h,Hl)),Mm(r,c,h,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Xb(this.resolutions_,e,t||0);return tt(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return vme(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let n=this.minZoom;n<t;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r}}class X8e extends Dc{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function Z8e(i,e,t){const r=[],n=[],s=[],o=[],a=[];t=t!==void 0?t:[];const l="SupportedCRS",c="TileMatrix",h="Identifier",u="ScaleDenominator",d="TopLeftCorner",f="TileWidth",p="TileHeight",g=i[l],m=xe(g),y=m.getMetersPerUnit(),_=m.getAxisOrientation().substr(0,2)=="ne";return i[c].sort(function(v,x){return x[u]-v[u]}),i[c].forEach(function(v){let x;if(t.length>0?x=t.find(function(w){return v[h]==w[c]?!0:v[h].includes(":")?!1:i[h]+":"+v[h]===w[c]}):x=!0,x){n.push(v[h]);const w=v[u]*28e-5/y,T=v[f],A=v[p];_?s.push([v[d][1],v[d][0]]):s.push(v[d]),r.push(w),o.push(T==A?T:[T,A]),a.push([v.MatrixWidth,v.MatrixHeight])}}),new X8e({extent:e,origins:s,resolutions:r,matrixIds:n,tileSizes:o,sizes:a})}function N2(i){let e=i.getDefaultTileGrid();return e||(e=Q8e(i),i.setDefaultTileGrid(e)),e}function K8e(i,e,t){const r=e[0],n=i.getTileCoordCenter(e),s=Al(t);if(!As(s,n)){const o=rt(s),a=Math.ceil((s[0]-n[0])/o);return n[0]+=o*a,i.getTileCoordForCoordAndZ(n,r)}return e}function J8e(i,e,t,r){r=r!==void 0?r:"top-left";const n=L0e(i,e,t);return new Dc({extent:i,origin:gNe(i,r),resolutions:n,tileSize:t})}function Fc(i){const e=i||{},t=e.extent||xe("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:L0e(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Dc(r)}function L0e(i,e,t,r){e=e!==void 0?e:Zge,t=Mi(t!==void 0?t:mf);const n=fi(i),s=rt(i);r=r>0?r:Math.max(s/t[0],n/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function Q8e(i,e,t,r){const n=Al(i);return J8e(n,e,t,r)}function Al(i){i=xe(i);let e=i.getExtent();if(!e){const t=180*yf.degrees/i.getMetersPerUnit();e=to(-t,-t,t,t)}return e}class eVe extends up{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Mi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Tx(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}forEachLoadedTile(e,t,r,n){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let h=r.minX;h<=r.maxX;++h)for(let u=r.minY;u<=r.maxY;++u)l=wa(t,h,u),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===ie.LOADED,c&&(c=n(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,n,s){return ze()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:N2(e)}getTileCacheForProjection(e){const t=this.getProjection();return pt(t===null||qr(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const n=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),o=Mi(n.getTileSize(e),this.tmpSize);return s==1?o:Eme(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=K8e(r,e,t)),m8e(e,r)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}useTile(e,t,r,n){}}class I0e extends Dn{constructor(e,t){super(e),this.tile=t}}const fp=eVe;function tVe(i,e){const t=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(r,o[1].toString()).replace(n,o[2].toString()).replace(s,function(){const c=o[0],h=e.getFullTileRange(c);if(!h)throw new Error("The {-y} placeholder requires a tile grid with extent");return(h.getHeight()-o[2]-1).toString()})}}function $2(i,e){const t=i.length,r=new Array(t);for(let n=0;n<t;++n)r[n]=tVe(i[n],e);return Mf(r)}function Mf(i){return i.length===1?i[0]:function(e,t,r){if(!e)return;const n=M2(e),s=pa(n,i.length);return i[s](e,t,r)}}function iVe(i,e,t){}function B2(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const r=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=r;s<=n;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const r=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=r;n++)e.push(i.replace(t[0],n.toString()));return e}return e.push(i),e}class j2 extends fp{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===j2.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Ae(t),n=t.getState();let s;n==ie.LOADING?(this.tileLoadingKeys_[r]=!0,s=Xd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=n==ie.ERROR?Xd.TILELOADERROR:n==ie.LOADED?Xd.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new I0e(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=B2(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($2(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}useTile(e,t,r){const n=wa(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const z2=j2;class ao extends z2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:rVe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:xy,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(const n in this.tileCacheForProjection){const s=this.tileCacheForProjection[n];s.expireCache(s==r?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!qr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!qr(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||qr(t,e)))return this.tileGrid;const r=Ae(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=N2(e)),this.tileGridForProjection[r]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||qr(t,e))return this.tileCache;const r=Ae(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Tx(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}createTile_(e,t,r,n,s,o){const a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,n,s):void 0,h=new this.tileClass(a,c!==void 0?ie.IDLE:ie.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(Ie.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,r,n,s){const o=this.getProjection();if(!o||!s||qr(o,s))return this.getTileInternal(e,t,r,n,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,r];let c;const h=ec(l);a.containsKey(h)&&(c=a.get(h));const u=this.getKey();if(c&&c.key==u)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),g=new Af(o,d,s,f,l,p,this.getTilePixelRatio(n),this.getGutter(),(m,y,_,v)=>this.getTileInternal(m,y,_,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=u,c?(g.interimTile=c,g.refreshInterimChain(),a.replace(h,g)):a.set(h,g),g}getTileInternal(e,t,r,n,s){let o=null;const a=wa(e,t,r),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,r,n,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,r,n,s,l),c.getState()==ie.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const r=xe(e);if(r){const n=Ae(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function rVe(i,e){i.getImage().src=e}function nVe(i){const e=i[0],t=new Array(e);let r=1<<e-1,n,s;for(n=0;n<e;++n)s=48,i[1]&r&&(s+=1),i[2]&r&&(s+=2),t[n]=String.fromCharCode(s),r>>=1;return t.join("")}const sVe='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class oVe extends ao{constructor(e){const t=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:xe("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=t,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(n=>n.json()).then(n=>this.handleImageryMetadataResponse(n))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const t=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?t.zoomMax:this.maxZoom_,n=this.getProjection(),s=Al(n),o=this.hidpi_?2:1,a=t.imageWidth==t.imageHeight?t.imageWidth/o:[t.imageWidth/o,t.imageHeight/o],l=Fc({extent:s,minZoom:t.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const c=this.culture_,h=this.hidpi_,u=this.placeholderTiles_;if(this.tileUrlFunction=Mf(t.imageUrlSubdomains.map(function(d){const f=[0,0,0],p=t.imageUrl.replace("{subdomain}",d).replace("{culture}",c);return function(g,m,y){if(!g)return;Mm(g[0],g[1],g[2],f);const _=new URL(p.replace("{quadkey}",nVe(f))),v=_.searchParams;return h&&(v.set("dpi","d1"),v.set("device","mobile")),u===!0?v.delete("n"):u===!1&&v.set("n","z"),_.toString()}})),t.imageryProviders){const d=Sl(xe("EPSG:4326"),this.getProjection());this.setAttributions(f=>{const p=[],g=f.viewState,m=this.getTileGrid(),y=m.getZForResolution(g.resolution,this.zDirection),v=m.getTileCoordForCoordAndZ(g.center,y)[0];return t.imageryProviders.map(function(x){let w=!1;const T=x.coverageAreas;for(let A=0,R=T.length;A<R;++A){const L=T[A];if(v>=L.zoomMin&&v<=L.zoomMax){const P=L.bbox,F=[P[1],P[0],P[3],P[2]],B=bf(F,d);if(gi(B,f.extent)){w=!0;break}}}w&&p.push(x.attribution)}),p.push(sVe),p})}this.setState("ready")}}const aVe=oVe;class Tc extends ao{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:Fc({extent:Al(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class lVe extends Tc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,e)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",t),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(e,t){const r=t.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}const cVe=lVe;class hVe extends Oc{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const r=t.getGeometry();return pt(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,r){this.source.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Ie.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Ie.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const r=e===0?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,n&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=_n(),t=this.distance*this.resolution,r=this.source.getFeatures(),n={};for(let s=0,o=r.length;s<o;s++){const a=r[s];if(!(Ae(a)in n)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();Hd(c,e),rs(e,t,e);const h=this.source.getFeaturesInExtent(e).filter(function(u){const d=Ae(u);return d in n?!1:(n[d]=!0,!0)});this.features.push(this.createCluster(h,e))}}}}createCluster(e,t){const r=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?tme(r,l.getCoordinates()):e.splice(a,1)}rme(r,1/e.length);const n=kr(t),s=this.interpolationRatio,o=new $i([r[0]*(1-s)+n[0]*s,r[1]*(1-s)+n[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new mi({geometry:o,features:e})}}const uVe=hVe;class G2 extends fp{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&t&&(r=Fc({extent:Al(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Mi(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?Mi(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return!t||qr(t,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,r,n,s){const o=this.getTileCacheForProjection(n),a=wa(e,t,r);if(o.containsKey(a)){const m=o.get(a);if(m&&m.key==this.getKey())return m}const l=this.getTileGrid(),c=Math.max.apply(null,l.getResolutions().map((m,y)=>{const _=Mi(l.getTileSize(y)),v=this.getTileSize(y);return Math.max(v[0]/_[0],v[1]/_[1])})),h=this.getTileGridForProjection(s),u=this.getTileGridForProjection(n),d=[e,t,r],f=this.getTileCoordForTileUrlFunction(d,n),p=Object.assign({sourceProj:s,sourceTileGrid:h,targetProj:n,targetTileGrid:u,tileCoord:d,wrappedTileCoord:f,pixelRatio:c,gutter:this.getGutterForProjection(s),getTileFunction:(m,y,_,v)=>this.getTile(m,y,_,v,s)},this.tileOptions),g=new T2(p);return g.key=this.getKey(),g}getTile(e,t,r,n,s){const o=this.getProjection();if(o&&s&&!qr(o,s))return this.getReprojTile_(e,t,r,s,o);const a=this.getTileSize(e),l=wa(e,t,r);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const c=this.loader_;function h(){return aT(function(){return c(e,t,r)})}const u=Object.assign({tileCoord:[e,t,r],loader:h,size:a},this.tileOptions),d=new E2(u);return d.key=this.getKey(),d.addEventListener(Ie.CHANGE,this.handleTileChange_),this.tileCache.set(l,d),d}handleTileChange_(e){const t=e.target,r=Ae(t),n=t.getState();let s;n==ie.LOADING?(this.tileLoadingKeys_[r]=!0,s=Xd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=n==ie.ERROR?Xd.TILELOADERROR:n==ie.LOADED?Xd.TILELOADEND:void 0),s&&this.dispatchEvent(new I0e(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||qr(t,e)))return this.tileGrid;const r=Ae(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=N2(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,t){const r=xe(e);if(r){const n=Ae(r);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=t)}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||qr(t,e))return this.tileCache;const r=Ae(e);return r in this.tileCacheForProjection_||(this.tileCacheForProjection_[r]=new Tx(.1)),this.tileCacheForProjection_[r]}expireCache(e,t){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(const n in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[n];s.expireCache(s==r?t:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}function Qr(i){return(e,...t)=>dVe(i,e,t)}function pp(i,e){return Qr(P0e(i,e).get)}const{apply:dVe,construct:not,defineProperty:sot,get:oot,getOwnPropertyDescriptor:P0e,getPrototypeOf:U2,has:aot,ownKeys:fVe,set:lot,setPrototypeOf:cot}=Reflect,{iterator:wy,species:hot,toStringTag:pVe,for:uot}=Symbol,gVe=Object,{create:V2,defineProperty:mVe,freeze:dot,is:fot}=gVe,yVe=Array,_Ve=yVe.prototype,k0e=_Ve[wy],vVe=Qr(k0e),O0e=ArrayBuffer,bVe=O0e.prototype;pp(bVe,"byteLength");const Ice=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Ice&&pp(Ice.prototype,"byteLength");const D0e=U2(Uint8Array);D0e.from;const Fn=D0e.prototype;Fn[wy];Qr(Fn.keys);Qr(Fn.values);Qr(Fn.entries);Qr(Fn.set);Qr(Fn.reverse);Qr(Fn.fill);Qr(Fn.copyWithin);Qr(Fn.sort);Qr(Fn.slice);Qr(Fn.subarray);pp(Fn,"buffer");pp(Fn,"byteOffset");pp(Fn,"length");pp(Fn,pVe);const xVe=Uint8Array,F0e=Uint16Array,q2=Uint32Array,wVe=Float32Array,Lm=U2([][wy]()),N0e=Qr(Lm.next),EVe=Qr(function*(){}().next),SVe=U2(Lm),CVe=DataView.prototype,TVe=Qr(CVe.getUint16),H2=WeakMap,$0e=H2.prototype,B0e=Qr($0e.get),AVe=Qr($0e.set),j0e=new H2,MVe=V2(null,{next:{value:function(){const e=B0e(j0e,this);return N0e(e)}},[wy]:{value:function(){return this}}});function RVe(i){if(i[wy]===k0e&&Lm.next===N0e)return i;const e=V2(MVe);return AVe(j0e,e,vVe(i)),e}const LVe=new H2,IVe=V2(SVe,{next:{value:function(){const e=B0e(LVe,this);return EVe(e)},writable:!0,configurable:!0}});for(const i of fVe(Lm))i!=="next"&&mVe(IVe,i,P0e(Lm,i));const z0e=new O0e(4),PVe=new wVe(z0e),kVe=new q2(z0e),Yo=new F0e(512),Xo=new xVe(512);for(let i=0;i<256;++i){const e=i-127;e<-27?(Yo[i]=0,Yo[i|256]=32768,Xo[i]=24,Xo[i|256]=24):e<-14?(Yo[i]=1024>>-e-14,Yo[i|256]=1024>>-e-14|32768,Xo[i]=-e-1,Xo[i|256]=-e-1):e<=15?(Yo[i]=e+15<<10,Yo[i|256]=e+15<<10|32768,Xo[i]=13,Xo[i|256]=13):e<128?(Yo[i]=31744,Yo[i|256]=64512,Xo[i]=24,Xo[i|256]=24):(Yo[i]=31744,Yo[i|256]=64512,Xo[i]=13,Xo[i|256]=13)}const W2=new q2(2048);for(let i=1;i<1024;++i){let e=i<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,W2[i]=e|t}for(let i=1024;i<2048;++i)W2[i]=939524096+(i-1024<<13);const gp=new q2(64);for(let i=1;i<31;++i)gp[i]=i<<23;gp[31]=1199570944;gp[32]=2147483648;for(let i=33;i<63;++i)gp[i]=2147483648+(i-32<<23);gp[63]=3347054592;const G0e=new F0e(64);for(let i=1;i<64;++i)i!==32&&(G0e[i]=1024);function OVe(i){const e=i>>10;return kVe[0]=W2[G0e[e]+(i&1023)]+gp[e],PVe[0]}function U0e(i,e,...t){return OVe(TVe(i,e,...RVe(t)))}var Y2={exports:{}};function V0e(i,e,t){const r=t&&t.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+i);const n=typeof i=="object"?i.outer:i,s=n.slice(0,n.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const l=o[a],c=e+"\\="+l+"([^"+l+"]*)"+l;r&&console.log("[xml-utils] pattern:",c);const u=new RegExp(c).exec(s);if(r&&console.log("[xml-utils] match:",u),u)return u[1]}}Y2.exports=V0e;Y2.exports.default=V0e;var DVe=Y2.exports;const t1=no(DVe);var X2={exports:{}},Z2={exports:{}},K2={exports:{}};function q0e(i,e,t){const n=new RegExp(e).exec(i.slice(t));return n?t+n.index:-1}K2.exports=q0e;K2.exports.default=q0e;var FVe=K2.exports,J2={exports:{}};function H0e(i,e,t){const n=new RegExp(e).exec(i.slice(t));return n?t+n.index+n[0].length-1:-1}J2.exports=H0e;J2.exports.default=H0e;var NVe=J2.exports,Q2={exports:{}};function W0e(i,e){const t=new RegExp(e,"g"),r=i.match(t);return r?r.length:0}Q2.exports=W0e;Q2.exports.default=W0e;var $Ve=Q2.exports;const BVe=FVe,i1=NVe,Pce=$Ve;function Y0e(i,e,t){const r=t&&t.debug||!1,n=!(t&&typeof t.nested===!1),s=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const o=BVe(i,`<${e}[ 
>/]`,s);if(r&&console.log("[xml-utils] start:",o),o===-1)return;const a=i.slice(o+e.length);let l=i1(a,"^[^<]*[ /]>",0);const c=l!==-1&&a[l-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",c),c===!1)if(n){let f=0,p=1,g=0;for(;(l=i1(a,"[ /]"+e+">",f))!==-1;){const m=a.substring(f,l+1);if(p+=Pce(m,"<"+e+`[ 
	>]`),g+=Pce(m,"</"+e+">"),g>=p)break;f=l}}else l=i1(a,"[ /]"+e+">",0);const h=o+e.length+l+1;if(r&&console.log("[xml-utils] end:",h),h===-1)return;const u=i.slice(o,h);let d;return c?d=null:d=u.slice(u.indexOf(">")+1,u.lastIndexOf("<")),{inner:d,outer:u,start:o,end:h}}Z2.exports=Y0e;Z2.exports.default=Y0e;var jVe=Z2.exports;const zVe=jVe;function X0e(i,e,t){const r=[],n=t&&t.debug||!1,s=t&&typeof t.nested=="boolean"?t.nested:!0;let o=t&&t.startIndex||0,a;for(;a=zVe(i,e,{debug:n,startIndex:o});)s?o=a.start+1+e.length:o=a.end,r.push(a);return n&&console.log("findTagsByName found",r.length,"tags"),r}X2.exports=X0e;X2.exports.default=X0e;var GVe=X2.exports;const UVe=no(GVe),zg={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Jo={};for(const i in zg)zg.hasOwnProperty(i)&&(Jo[zg[i]]=parseInt(i,10));const VVe=[Jo.BitsPerSample,Jo.ExtraSamples,Jo.SampleFormat,Jo.StripByteCounts,Jo.StripOffsets,Jo.StripRowCounts,Jo.TileByteCounts,Jo.TileOffsets,Jo.SubIFDs],r1={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},_t={};for(const i in r1)r1.hasOwnProperty(i)&&(_t[r1[i]]=parseInt(i,10));const Un={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},qVe={Unspecified:0,Assocalpha:1,Unassalpha:2},pot={Version:0,AddCompression:1},got={None:0,Deflate:1,Zstandard:2},HVe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function WVe(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=256-i[o]/e*256,n[a]=s,n[a+1]=s,n[a+2]=s;return n}function YVe(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=i[o]/e*256,n[a]=s,n[a+1]=s,n[a+2]=s;return n}function XVe(i,e){const{width:t,height:r}=i,n=new Uint8Array(t*r*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<i.length;++a,l+=3){const c=i[a];n[l]=e[c]/65536*256,n[l+1]=e[c+s]/65536*256,n[l+2]=e[c+o]/65536*256}return n}function ZVe(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let n=0,s=0;n<i.length;n+=4,s+=3){const o=i[n],a=i[n+1],l=i[n+2],c=i[n+3];r[s]=255*((255-o)/256)*((255-c)/256),r[s+1]=255*((255-a)/256)*((255-c)/256),r[s+2]=255*((255-l)/256)*((255-c)/256)}return r}function KVe(i){const{width:e,height:t}=i,r=new Uint8ClampedArray(e*t*3);for(let n=0,s=0;n<i.length;n+=3,s+=3){const o=i[n],a=i[n+1],l=i[n+2];r[s]=o+1.402*(l-128),r[s+1]=o-.34414*(a-128)-.71414*(l-128),r[s+2]=o+1.772*(a-128)}return r}const JVe=.95047,QVe=1,eqe=1.08883;function tqe(i){const{width:e,height:t}=i,r=new Uint8Array(e*t*3);for(let n=0,s=0;n<i.length;n+=3,s+=3){const o=i[n+0],a=i[n+1]<<24>>24,l=i[n+2]<<24>>24;let c=(o+16)/116,h=a/500+c,u=c-l/200,d,f,p;h=JVe*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),c=QVe*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=eqe*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),d=h*3.2406+c*-1.5372+u*-.4986,f=h*-.9689+c*1.8758+u*.0415,p=h*.0557+c*-.204+u*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,r[s]=Math.max(0,Math.min(1,d))*255,r[s+1]=Math.max(0,Math.min(1,f))*255,r[s+2]=Math.max(0,Math.min(1,p))*255}return r}const Z0e=new Map;function Nc(i,e){Array.isArray(i)||(i=[i]),i.forEach(t=>Z0e.set(t,e))}async function K0e(i){const e=Z0e.get(i.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const t=await e();return new t(i)}Nc([void 0,1],()=>Rc(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(i=>i.default));Nc(5,()=>Rc(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(i=>i.default));Nc(6,()=>{throw new Error("old style JPEG compression is not supported.")});Nc(7,()=>Rc(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(i=>i.default));Nc([8,32946],()=>Rc(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(i=>i.default));Nc(32773,()=>Rc(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(i=>i.default));Nc(34887,()=>Rc(()=>import("./lerc-Cs6P20-W.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));Nc(50001,()=>Rc(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([21,1]),import.meta.url).then(i=>i.default));function Ax(i,e,t,r=1){return new(Object.getPrototypeOf(i)).constructor(e*t*r)}function iqe(i,e,t,r,n){const s=e/r,o=t/n;return i.map(a=>{const l=Ax(a,r,n);for(let c=0;c<n;++c){const h=Math.min(Math.round(o*c),t-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(s*u),e-1),f=a[h*e+d];l[c*r+u]=f}}return l})}function Zd(i,e,t){return(1-t)*i+t*e}function rqe(i,e,t,r,n){const s=e/r,o=t/n;return i.map(a=>{const l=Ax(a,r,n);for(let c=0;c<n;++c){const h=o*c,u=Math.floor(h),d=Math.min(Math.ceil(h),t-1);for(let f=0;f<r;++f){const p=s*f,g=p%1,m=Math.floor(p),y=Math.min(Math.ceil(p),e-1),_=a[u*e+m],v=a[u*e+y],x=a[d*e+m],w=a[d*e+y],T=Zd(Zd(_,v,g),Zd(x,w,g),h%1);l[c*r+f]=T}}return l})}function nqe(i,e,t,r,n,s="nearest"){switch(s.toLowerCase()){case"nearest":return iqe(i,e,t,r,n);case"bilinear":case"linear":return rqe(i,e,t,r,n);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function sqe(i,e,t,r,n,s){const o=e/r,a=t/n,l=Ax(i,r,n,s);for(let c=0;c<n;++c){const h=Math.min(Math.round(a*c),t-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(o*u),e-1);for(let f=0;f<s;++f){const p=i[h*e*s+d*s+f];l[c*r*s+u*s+f]=p}}}return l}function oqe(i,e,t,r,n,s){const o=e/r,a=t/n,l=Ax(i,r,n,s);for(let c=0;c<n;++c){const h=a*c,u=Math.floor(h),d=Math.min(Math.ceil(h),t-1);for(let f=0;f<r;++f){const p=o*f,g=p%1,m=Math.floor(p),y=Math.min(Math.ceil(p),e-1);for(let _=0;_<s;++_){const v=i[u*e*s+m*s+_],x=i[u*e*s+y*s+_],w=i[d*e*s+m*s+_],T=i[d*e*s+y*s+_],A=Zd(Zd(v,x,g),Zd(w,T,g),h%1);l[c*r*s+f*s+_]=A}}}return l}function aqe(i,e,t,r,n,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return sqe(i,e,t,r,n,s);case"bilinear":case"linear":return oqe(i,e,t,r,n,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function lqe(i,e,t){let r=0;for(let n=e;n<t;++n)r+=i[n];return r}function qS(i,e,t){switch(i){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function cqe(i,e){return(i===1||i===2)&&e<=32&&e%8===0?!1:!(i===3&&(e===16||e===32||e===64))}function hqe(i,e,t,r,n,s,o){const a=new DataView(i),l=t===2?o*s:o*s*r,c=t===2?1:r,h=qS(e,n,l),u=parseInt("1".repeat(n),2);if(e===1){let d;t===1?d=r*n:d=n;let f=s*d;f&7&&(f=f+7&-8);for(let p=0;p<o;++p){const g=p*f;for(let m=0;m<s;++m){const y=g+m*c*n;for(let _=0;_<c;++_){const v=y+_*n,x=(p*s+m)*c+_,w=Math.floor(v/8),T=v%8;if(T+n<=8)h[x]=a.getUint8(w)>>8-n-T&u;else if(T+n<=16)h[x]=a.getUint16(w)>>16-n-T&u;else if(T+n<=24){const A=a.getUint16(w)<<8|a.getUint8(w+2);h[x]=A>>24-n-T&u}else h[x]=a.getUint32(w)>>32-n-T&u}}}}return h.buffer}class J0e{constructor(e,t,r,n,s,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=n,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(n,s){return U0e(this,n,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const r=this.getSampleFormat(e),n=this.getBitsPerSample(e);return qS(r,n,t)}async getTileOrStrip(e,t,r,n,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:c}=this;this.planarConfiguration===1?l=t*o+e:this.planarConfiguration===2&&(l=r*o*a+t*o+e);let h,u;this.isTiled?(h=this.fileDirectory.TileOffsets[l],u=this.fileDirectory.TileByteCounts[l]):(h=this.fileDirectory.StripOffsets[l],u=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:h,length:u}],s))[0];let f;return c===null||!c[l]?(f=(async()=>{let p=await n.decode(this.fileDirectory,d);const g=this.getSampleFormat(),m=this.getBitsPerSample();return cqe(g,m)&&(p=hqe(p,g,this.planarConfiguration,this.getSamplesPerPixel(),m,this.getTileWidth(),this.getBlockHeight(t))),p})(),c!==null&&(c[l]=f)):f=c[l],{x:e,y:t,sample:r,data:await f}}async _readRaster(e,t,r,n,s,o,a,l,c){const h=this.getTileWidth(),u=this.getTileHeight(),d=this.getWidth(),f=this.getHeight(),p=Math.max(Math.floor(e[0]/h),0),g=Math.min(Math.ceil(e[2]/h),Math.ceil(d/h)),m=Math.max(Math.floor(e[1]/u),0),y=Math.min(Math.ceil(e[3]/u),Math.ceil(f/u)),_=e[2]-e[0];let v=this.getBytesPerPixel();const x=[],w=[];for(let R=0;R<t.length;++R)this.planarConfiguration===1?x.push(lqe(this.fileDirectory.BitsPerSample,0,t[R])/8):x.push(0),w.push(this.getReaderForSample(t[R]));const T=[],{littleEndian:A}=this;for(let R=m;R<y;++R)for(let L=p;L<g;++L){let P;this.planarConfiguration===1&&(P=this.getTileOrStrip(L,R,0,s,c));for(let F=0;F<t.length;++F){const B=F,b=t[F];this.planarConfiguration===2&&(v=this.getSampleByteSize(b),P=this.getTileOrStrip(L,R,b,s,c));const E=P.then(C=>{const M=C.data,O=new DataView(M),D=this.getBlockHeight(C.y),U=C.y*u,z=C.x*h,Z=U+D,Q=(C.x+1)*h,V=w[B],N=Math.min(D,D-(Z-e[3]),f-U),X=Math.min(h,h-(Q-e[2]),d-z);for(let ne=Math.max(0,e[1]-U);ne<N;++ne)for(let fe=Math.max(0,e[0]-z);fe<X;++fe){const ve=(ne*h+fe)*v,ge=V.call(O,ve+x[B],A);let he;n?(he=(ne+U-e[1])*_*t.length+(fe+z-e[0])*t.length+B,r[he]=ge):(he=(ne+U-e[1])*_+fe+z-e[0],r[B][he]=ge)}});T.push(E)}}if(await Promise.all(T),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let R;return n?R=aqe(r,e[2]-e[0],e[3]-e[1],o,a,t.length,l):R=nqe(r,e[2]-e[0],e[3]-e[1],o,a,l),R.width=o,R.height=a,R}return r.width=o||e[2]-e[0],r.height=a||e[3]-e[1],r}async readRasters({window:e,samples:t=[],interleave:r,pool:n=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:c}={}){const h=e||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=h[2]-h[0],d=h[3]-h[1],f=u*d,p=this.getSamplesPerPixel();if(!t||!t.length)for(let _=0;_<p;++_)t.push(_);else for(let _=0;_<t.length;++_)if(t[_]>=p)return Promise.reject(new RangeError(`Invalid sample index '${t[_]}'.`));let g;if(r){const _=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,v=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=qS(_,v,f*t.length),l&&g.fill(l)}else{g=[];for(let _=0;_<t.length;++_){const v=this.getArrayForSample(t[_],f);Array.isArray(l)&&_<l.length?v.fill(l[_]):l&&!Array.isArray(l)&&v.fill(l),g.push(v)}}const m=n||await K0e(this.fileDirectory);return await this._readRaster(h,t,g,r,m,s,o,a,c)}async readRGB({window:e,interleave:t=!0,pool:r=null,width:n,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===Un.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==qVe.Unspecified&&a){y=[];for(let _=0;_<this.fileDirectory.BitsPerSample.length;_+=1)y.push(_)}return this.readRasters({window:e,interleave:t,samples:y,pool:r,width:n,height:s,resampleMethod:o,signal:l})}let u;switch(h){case Un.WhiteIsZero:case Un.BlackIsZero:case Un.Palette:u=[0];break;case Un.CMYK:u=[0,1,2,3];break;case Un.YCbCr:case Un.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:c,interleave:!0,samples:u,pool:r,width:n,height:s,resampleMethod:o,signal:l},{fileDirectory:f}=this,p=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let m;switch(h){case Un.WhiteIsZero:m=WVe(p,g);break;case Un.BlackIsZero:m=YVe(p,g);break;case Un.Palette:m=XVe(p,f.ColorMap);break;case Un.CMYK:m=ZVe(p);break;case Un.YCbCr:m=KVe(p);break;case Un.CIELab:m=tqe(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const y=new Uint8Array(m.length/3),_=new Uint8Array(m.length/3),v=new Uint8Array(m.length/3);for(let x=0,w=0;x<m.length;x+=3,++w)y[w]=m[x],_[w]=m[x+1],v[w]=m[x+2];m=[y,_,v]}return m.width=p.width,m.height=p.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=UVe(r,"Item");e===null?n=n.filter(s=>t1(s,"sample")===void 0):n=n.filter(s=>Number(t1(s,"sample"))===e);for(let s=0;s<n.length;++s){const o=n[s];t[t1(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return[r[0],-r[5],r[10]];if(e){const[n,s,o]=e.getResolution();return[n*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(){const e=this.getHeight(),t=this.getWidth();if(this.fileDirectory.ModelTransformation){const[r,n,s,o,a,l,c,h]=this.fileDirectory.ModelTransformation,d=[[0,0],[0,e],[t,0],[t,e]].map(([g,m])=>[o+r*g+n*m,h+a*g+l*m]),f=d.map(g=>g[0]),p=d.map(g=>g[1]);return[Math.min(...f),Math.min(...p),Math.max(...f),Math.max(...p)]}else{const r=this.getOrigin(),n=this.getResolution(),s=r[0],o=r[1],a=s+n[0]*this.getWidth(),l=o+n[1]*this.getHeight();return[Math.min(s,a),Math.min(o,l),Math.max(s,a),Math.max(o,l)]}}}class uqe{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),n=this.getUint32(e+4,t);let s;if(t){if(s=r+2**32*n,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+n,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,t){let r=0;const n=(this._dataView.getUint8(e+(t?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));n&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),r+=a*256**o}return n&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return U0e(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class dqe{constructor(e,t,r,n){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let n;if(this._littleEndian){if(n=t+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*t+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(e){let t=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let n=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));r&&(n?o!==0&&(o=~(o-1)&255,n=!1):o=~o&255),t+=o*256**s}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const fqe=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class pqe{constructor(e=fqe,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(r=>{Rc(()=>import("./decoder-Ddo2r026.js"),__vite__mapDeps([22,8]),import.meta.url).then(n=>{r(n.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let n=0;n<e;n++)this.workers.push({worker:r(),idle:!0})}))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?K0e(e).then(r=>r.decode(e,t)):new Promise(r=>{const n=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(n.idle=!0,r(a.data.decoded),n.worker.removeEventListener("message",o))};n.worker.addEventListener("message",o),n.worker.postMessage({fileDirectory:e,buffer:t,id:s},[t])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const kce=`\r
\r
`;function Q0e(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const e={};for(const[t,r]of i)e[t.toLowerCase()]=r;return e}function gqe(i){const e=i.split(`\r
`).map(t=>{const r=t.split(":").map(n=>n.trim());return r[0]=r[0].toLowerCase(),r});return Q0e(e)}function mqe(i){const[e,...t]=i.split(";").map(n=>n.trim()),r=t.map(n=>n.split("="));return{type:e,params:Q0e(r)}}function HS(i){let e,t,r;return i&&([,e,t,r]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10)),{start:e,end:t,total:r}}function yqe(i,e){let t=null;const r=new TextDecoder("ascii"),n=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(i,a,s.length))===s&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<i.byteLength;){const a=r.decode(new Uint8Array(i,t,Math.min(s.length+1024,i.byteLength-t)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const c=l.indexOf(kce),h=gqe(l.substr(0,c)),{start:u,end:d,total:f}=HS(h["content-range"]),p=t+s.length+c+kce.length,g=parseInt(d,10)+1-parseInt(u,10);n.push({headers:h,data:i.slice(p,p+g),offset:u,length:g,fileSize:f}),t=p+g+4}return n}class eA{async fetch(e,t=void 0){return Promise.all(e.map(r=>this.fetchSlice(r,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class _qe extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,s]=r;this._deleteIfExpired(n,s)===!1&&(yield[n,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,s]=r;this.cache.has(n)||this._deleteIfExpired(n,s)===!1&&(yield[n,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function vqe(i){return new Promise(e=>setTimeout(e,i))}function bqe(i,e){const t=Array.isArray(i)?i:Array.from(i),r=Array.isArray(e)?e:Array.from(e);return t.map((n,s)=>[n,r[s]])}class Rf extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Rf),this.name="AbortError"}}class xqe extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const wqe=xqe;class Eqe{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}}class Oce{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}}class Sqe extends eA{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new _qe({maxSize:r,onEviction:(n,s)=>{this.evictedBlocks.set(n,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],n=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:f}of e){let p=d+f;const{fileSize:g}=this;g!==null&&(p=Math.min(p,g));const m=Math.floor(d/this.blockSize)*this.blockSize;for(let y=m;y<p;y+=this.blockSize){const _=Math.floor(y/this.blockSize);!this.blockCache.has(_)&&!this.blockRequests.has(_)&&(this.blockIdsToFetch.add(_),n.push(_)),this.blockRequests.has(_)&&r.push(this.blockRequests.get(_)),s.push(_)}}await vqe(),this.fetchBlocks(t);const o=[];for(const d of n)this.blockRequests.has(d)&&o.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],l=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const d of l){const f=this.blockRequests.get(d);if(!f)throw new Error(`Block ${d} is not in the block requests`);a.push(f)}await Promise.allSettled(a)}if(t&&t.aborted)throw new Rf("Request was aborted");const c=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),h=c.filter(d=>!d);if(h.length)throw new wqe(h,"Request failed");const u=new Map(bqe(s,c));return this.readSliceData(e,u)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let n=0;n<t.length;++n){const s=t[n];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await r)[n],l=o*this.blockSize,c=l-a.offset,h=Math.min(c+this.blockSize,a.data.byteLength),u=a.data.slice(c,h),d=new Eqe(l,u.byteLength,u,o);this.blockCache.set(o,d),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((o,a)=>o-a);if(t.length===0)return[];let r=[],n=null;const s=[];for(const o of t)n===null||n+1===o?(r.push(o),n=o):(s.push(new Oce(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],n=o);return s.push(new Oce(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(e,t){return e.map(r=>{let n=r.offset+r.length;this.fileSize!==null&&(n=Math.min(this.fileSize,n));const s=Math.floor(r.offset/this.blockSize),o=Math.floor(n/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=s;c<=o;++c){const h=t.get(c),u=h.offset-r.offset,d=h.top-n;let f=0,p=0,g;u<0?f=-u:u>0&&(p=u),d<0?g=h.length-f:g=n-h.offset-f;const m=new Uint8Array(h.data,f,g);l.set(m,p)}return a})}}class tA{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class iA{constructor(e){this.url=e}async request({headers:e,credentials:t,signal:r}={}){throw new Error("request is not implemented")}}class Cqe extends tA{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Tqe extends iA{constructor(e,t){super(e),this.credentials=t}async request({headers:e,credentials:t,signal:r}={}){const n=await fetch(this.url,{headers:e,credentials:t,signal:r});return new Cqe(n)}}class Aqe extends tA{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Mqe extends iA{constructRequest(e,t){return new Promise((r,n)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;r(new Aqe(s,o))},s.onerror=n,s.onabort=()=>n(new Rf("Request aborted")),s.send(),t&&(t.aborted&&s.abort(),t.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}const n1={};class Rqe extends tA{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Lqe extends iA{constructor(e){super(e),this.parsedUrl=n1.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",n1)}constructRequest(e,t){return new Promise((r,n)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const c=[];o.on("data",h=>{c.push(h)}),o.on("end",()=>{const h=Buffer.concat(c).buffer;l(h)}),o.on("error",n)});r(new Rqe(o,a))});s.on("error",n),t&&(t.aborted&&s.destroy(new Rf("Request aborted")),t.addEventListener("abort",()=>s.destroy(new Rf("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class rA extends eA{constructor(e,t,r,n){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:n,length:s})=>`${n}-${n+s}`).join(",")}`},signal:t});if(r.ok)if(r.status===206){const{type:n,params:s}=mqe(r.getHeader("content-type"));if(n==="multipart/byteranges"){const u=yqe(await r.getData(),s.boundary);return this._fileSize=u[0].fileSize||null,u}const o=await r.getData(),{start:a,end:l,total:c}=HS(r.getHeader("content-range"));this._fileSize=c||null;const h=[{data:o,offset:a,length:l-a}];if(e.length>1){const u=await Promise.all(e.slice(1).map(d=>this.fetchSlice(d,t)));return h.concat(u)}return h}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const n=await r.getData();return this._fileSize=n.byteLength,[{data:n,offset:0,length:n.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:n}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:t});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=HS(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:r,length:n}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function nA(i,{blockSize:e,cacheSize:t}){return e===null?i:new Sqe(i,{blockSize:e,cacheSize:t})}function Iqe(i,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:n=!1,...s}={}){const o=new Tqe(i,t),a=new rA(o,e,r,n);return nA(a,s)}function Pqe(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...n}={}){const s=new Mqe(i),o=new rA(s,e,t,r);return nA(o,n)}function kqe(i,{headers:e={},maxRanges:t=0,allowFullFile:r=!1,...n}={}){const s=new Lqe(i),o=new rA(s,e,t,r);return nA(o,n)}function WS(i,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Iqe(i,t):typeof XMLHttpRequest<"u"?Pqe(i,t):kqe(i,t)}class Oqe extends eA{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((r,n)=>{const s=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=a=>r(a.target.result),o.onerror=n,o.onabort=n,o.readAsArrayBuffer(s),t&&t.addEventListener("abort",()=>o.abort())})}}function Dqe(i){return new Oqe(i)}function YS(i){switch(i){case _t.BYTE:case _t.ASCII:case _t.SBYTE:case _t.UNDEFINED:return 1;case _t.SHORT:case _t.SSHORT:return 2;case _t.LONG:case _t.SLONG:case _t.FLOAT:case _t.IFD:return 4;case _t.RATIONAL:case _t.SRATIONAL:case _t.DOUBLE:case _t.LONG8:case _t.SLONG8:case _t.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function Fqe(i){const e=i.GeoKeyDirectory;if(!e)return null;const t={};for(let r=4;r<=e[3]*4;r+=4){const n=HVe[e[r]],s=e[r+1]?zg[e[r+1]]:null,o=e[r+2],a=e[r+3];let l=null;if(!s)l=a;else{if(l=i[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${n}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}t[n]=l}return t}function hd(i,e,t,r){let n=null,s=null;const o=YS(e);switch(e){case _t.BYTE:case _t.ASCII:case _t.UNDEFINED:n=new Uint8Array(t),s=i.readUint8;break;case _t.SBYTE:n=new Int8Array(t),s=i.readInt8;break;case _t.SHORT:n=new Uint16Array(t),s=i.readUint16;break;case _t.SSHORT:n=new Int16Array(t),s=i.readInt16;break;case _t.LONG:case _t.IFD:n=new Uint32Array(t),s=i.readUint32;break;case _t.SLONG:n=new Int32Array(t),s=i.readInt32;break;case _t.LONG8:case _t.IFD8:n=new Array(t),s=i.readUint64;break;case _t.SLONG8:n=new Array(t),s=i.readInt64;break;case _t.RATIONAL:n=new Uint32Array(t*2),s=i.readUint32;break;case _t.SRATIONAL:n=new Int32Array(t*2),s=i.readInt32;break;case _t.FLOAT:n=new Float32Array(t),s=i.readFloat32;break;case _t.DOUBLE:n=new Float64Array(t),s=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===_t.RATIONAL||e===_t.SRATIONAL)for(let a=0;a<t;a+=2)n[a]=s.call(i,r+a*o),n[a+1]=s.call(i,r+(a*o+4));else for(let a=0;a<t;++a)n[a]=s.call(i,r+a*o);return e===_t.ASCII?new TextDecoder("utf-8").decode(n):n}class Nqe{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}}class W0 extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class e_e{async readRasters(e={}){const{window:t,width:r,height:n}=e;let{resX:s,resY:o,bbox:a}=e;const l=await this.getImage();let c=l;const h=await this.getImageCount(),u=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(t){const[p,g]=l.getOrigin(),[m,y]=l.getResolution();a=[p+t[0]*m,g+t[1]*y,p+t[2]*m,g+t[3]*y]}const f=a||u;if(r){if(s)throw new Error("Both width and resX passed");s=(f[2]-f[0])/r}if(n){if(o)throw new Error("Both width and resY passed");o=(f[3]-f[1])/n}}if(s||o){const f=[];for(let p=0;p<h;++p){const g=await this.getImage(p),{SubfileType:m,NewSubfileType:y}=g.fileDirectory;(p===0||m===2||y&1)&&f.push(g)}f.sort((p,g)=>p.getWidth()-g.getWidth());for(let p=0;p<f.length;++p){const g=f[p],m=(u[2]-u[0])/g.getWidth(),y=(u[3]-u[1])/g.getHeight();if(c=g,s&&s>m||o&&o>y)break}}let d=t;if(a){const[f,p]=l.getOrigin(),[g,m]=c.getResolution(l);d=[Math.round((a[0]-f)/g),Math.round((a[1]-p)/m),Math.round((a[2]-f)/g),Math.round((a[3]-p)/m)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return c.readRasters({...e,window:d})}}class Lf extends e_e{constructor(e,t,r,n,s={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=n,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new dqe((await this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(e);const s=this.bigTiff?n.readUint64(e):n.readUint16(e),o=s*t+(this.bigTiff?16:6);n.covers(e,o)||(n=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let u=0;u<s;l+=t,++u){const d=n.readUint16(l),f=n.readUint16(l+2),p=this.bigTiff?n.readUint64(l+4):n.readUint32(l+4);let g,m;const y=YS(f),_=l+(this.bigTiff?12:8);if(y*p<=(this.bigTiff?8:4))g=hd(n,f,p,_);else{const v=n.readOffset(_),x=YS(f)*p;if(n.covers(v,x))g=hd(n,f,p,v);else{const w=await this.getSlice(v,x);g=hd(w,f,p,v)}}p===1&&VVe.indexOf(d)===-1&&!(f===_t.RATIONAL||f===_t.SRATIONAL)?m=g[0]:m=g,a[zg[d]]=m}const c=Fqe(a),h=n.readOffset(e+r+t*s);return new Nqe(a,c,h)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof W0?new W0(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new W0(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new J0e(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof W0)t=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100;let n=await this.getSlice(e,r);if(t===hd(n,_t.ASCII,t.length,e)){const o=hd(n,_t.ASCII,r,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>r&&(n=await this.getSlice(e,a));const l=hd(n,_t.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,h])=>{this.ghostValues[c]=h})}return this.ghostValues}static async fromSource(e,t,r){const n=(await e.fetch([{offset:0,length:1024}],r))[0],s=new uqe(n),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let c;if(l===42)c=!1;else if(l===43){if(c=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const h=c?s.getUint64(8,a):s.getUint32(4,a);return new Lf(e,a,c,h,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class $qe extends e_e{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const s=this.imageFiles[n];for(let o=0;o<this.imageCounts[n];o++){if(e===t){const a=await s.requestIFD(r);return new J0e(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount}}async function Bqe(i,e={},t){return Lf.fromSource(WS(i,e),t)}async function jqe(i,e){return Lf.fromSource(Dqe(i),e)}async function zqe(i,e=[],t={},r){const n=await Lf.fromSource(WS(i,t),r),s=await Promise.all(e.map(o=>Lf.fromSource(WS(o,t))));return new $qe(n,s)}function Gqe(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function Uqe(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,r=Un;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}const Dce="STATISTICS_MAXIMUM",Fce="STATISTICS_MINIMUM",s1=256;let o1;function Vqe(){return o1||(o1=new pqe),o1}function qqe(i){try{return i.getBoundingBox()}catch{return[0,0,i.getWidth(),i.getHeight()]}}function Hqe(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function Wqe(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}function Yqe(i){const e=i.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let r=xe(t);if(!r){const n=Kae(e.ProjLinearUnitsGeoKey);n&&(r=new _f({code:t,units:n}))}return r}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let r=xe(t);if(!r){const n=Kae(e.GeogAngularUnitsGeoKey);n&&(r=new _f({code:t,units:n}))}return r}return null}function Xqe(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let r=0;r<e;++r)t[r]=i.getImage(r);return Promise.all(t)})}function Zqe(i,e){let t;return i.blob?t=jqe(i.blob):i.overviews?t=zqe(i.url,i.overviews,e):t=Bqe(i.url,e),t.then(Xqe)}function gg(i,e,t,r,n){if(Array.isArray(i)){const s=i.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(r);throw n(o),o}for(let o=0;o<s;++o)gg(i[o],e[o],t,r,n);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(r)}function Kqe(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function Jqe(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}class sA extends G2{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,n=new Array(t);for(let s=0;s<t;++s)n[s]=Zqe(this.sourceInfo_[s],this.sourceOptions_);Promise.all(n).then(function(s){r.configure_(s)}).catch(function(s){lv(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let r=t.length-1;r>=0;--r){const n=t[r],s=Yqe(n);if(s){this.projection=s;break}}}configure_(e){let t,r,n,s,o;const a=new Array(e.length),l=new Array(e.length),c=new Array(e.length);let h=0;const u=e.length;for(let g=0;g<u;++g){const m=[],y=[];e[g].forEach(R=>{Gqe(R)?y.push(R):m.push(R)});const _=m.length;if(y.length>0&&y.length!==_)throw new Error(`Expected one mask per image found ${y.length} masks and ${_} images`);let v,x;const w=new Array(_),T=new Array(_),A=new Array(_);l[g]=new Array(_),c[g]=new Array(_);for(let R=0;R<_;++R){const L=m[R],P=L.getGDALNoData();c[g][R]=L.getGDALMetadata(0),l[g][R]=P;const F=this.sourceInfo_[g].bands;a[g]=F?F.length:L.getSamplesPerPixel();const B=_-(R+1);v||(v=qqe(L)),x||(x=Hqe(L));const b=Wqe(L,m[0]);A[B]=b[0];const E=[L.getTileWidth(),L.getTileHeight()];E[0]!==E[1]&&E[1]<s1&&(E[0]=s1,E[1]=s1),w[B]=E;const C=b[0]/Math.abs(b[1]);T[B]=[E[0],E[1]/C]}if(t?Er(t,v,t):t=v,!r)r=x;else{const R=`Origin mismatch for source ${g}, got [${x}] but expected [${r}]`;gg(r,x,0,R,this.viewRejector)}if(!o)o=A,this.resolutionFactors_[g]=1;else{o.length-h>A.length&&(h=o.length-A.length);const R=o[o.length-1]/A[A.length-1];this.resolutionFactors_[g]=R;const L=A.map(F=>F*=R),P=`Resolution mismatch for source ${g}, got [${L}] but expected [${o}]`;gg(o.slice(h,o.length),L,.02,P,this.viewRejector)}n?gg(n.slice(h,n.length),T,.01,`Tile size mismatch for source ${g}`,this.viewRejector):n=T,s?gg(s.slice(h,s.length),w,0,`Tile size mismatch for source ${g}`,this.viewRejector):s=w,this.sourceImagery_[g]=m.reverse(),this.sourceMasks_[g]=y.reverse()}for(let g=0,m=this.sourceImagery_.length;g<m;++g){const y=this.sourceImagery_[g];for(;y.length<o.length;)y.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;e:for(let g=0;g<u;++g){if(this.sourceInfo_[g].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[g].length){this.addAlpha_=!0;break}const m=l[g],y=this.sourceInfo_[g].bands;if(y){for(let _=0;_<y.length;++_)if(m[y[_]-1]!==null){this.addAlpha_=!0;break e}continue}for(let _=0;_<m.length;++_)if(m[_]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let g=0;g<u;++g)d+=a[g];this.bandCount=d;const f=new Dc({extent:t,minZoom:h,origin:r,resolutions:o,tileSizes:n});this.tileGrid=f,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:eu(kr(t),this.projection),extent:ly(t,this.projection),zoom:p})}loadTile_(e,t,r){const n=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,l=this.sourceInfo_,c=Vqe();for(let h=0;h<s;++h){const u=l[h],d=this.resolutionFactors_[h],f=[Math.round(t*(n[0]*d)),Math.round(r*(n[1]*d)),Math.round((t+1)*(n[0]*d)),Math.round((r+1)*(n[1]*d))],p=this.sourceImagery_[h][e];let g;u.bands&&(g=u.bands.map(function(x){return x-1}));let m;"nodata"in u&&u.nodata!==null?m=u.nodata:g?m=g.map(function(x){return a[h][x]}):m=a[h];const y={window:f,width:n[0],height:n[1],samples:g,fillValue:m,pool:c,interleave:!1};Uqe(this.convertToRGB_,p)?o[h]=p.readRGB(y):o[h]=p.readRasters(y);const _=s+h,v=this.sourceMasks_[h][e];if(!v){o[_]=Promise.resolve(null);continue}o[_]=v.readRasters({window:f,width:n[0],height:n[1],samples:[0],pool:c,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch(function(h){throw lv(h),h})}composeTile_(e,t){const r=this.metadata_,n=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,c=this.normalize_,h=this.addAlpha_,u=e[0]*e[1],d=u*o;let f;c?f=new Uint8Array(d):f=new Float32Array(d);let p=0;for(let g=0;g<u;++g){let m=h;for(let y=0;y<s;++y){const _=n[y];let v=_.min,x=_.max,w,T;if(c){const A=r[y][0];v===void 0&&(A&&Fce in A?v=parseFloat(A[Fce]):v=Kqe(t[y][0])),x===void 0&&(A&&Dce in A?x=parseFloat(A[Dce]):x=Jqe(t[y][0])),w=255/(x-v),T=-v*w}for(let A=0;A<a[y];++A){const R=t[y][A][g];let L;if(c?L=tt(w*R+T,0,255):L=R,!h)f[p]=L;else{let P=_.nodata;if(P===void 0){let B;_.bands?B=_.bands[A]-1:B=A,P=l[y][B]}const F=isNaN(P);(!F&&R!==P||F&&!isNaN(R))&&(m=!1,f[p]=L)}p++}if(!m){const A=s+y,R=t[A];R&&!R[0][g]&&(m=!0)}}h&&(m||(f[p]=255),p++)}return f}}sA.prototype.getView;const Qqe="https://tile.googleapis.com/v1/createSession",eHe="https://tile.googleapis.com/v1/2dtiles",tHe="https://tile.googleapis.com/tile/v1/viewport",iHe=22;class rHe extends ao{constructor(e){const t=!!e.highDpi,r=e.overlay!==!0;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:r,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const n={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(n.imageFormat=e.imageFormat),e.scale&&(n.scale=e.scale),t&&(n.highDpi=!0),e.layerTypes&&(n.layerTypes=e.layerTypes),e.styles&&(n.styles=e.styles),e.overlay===!0&&(n.overlay=!0),this.sessionTokenRequest_=n,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=Qqe+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(e,t);if(!r.ok){try{const u=await r.json();this.error_=new Error(u.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const n=await r.json(),s=this.getTilePixelRatio(1),o=[n.tileWidth/s,n.tileHeight/s];this.tileGrid=Fc({extent:Al(this.getProjection()),maxZoom:iHe,tileSize:o});const a=n.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(u,d,f){const p=u[0],g=u[1],m=u[2];return`${eHe}/${p}/${g}/${m}?session=${a}&key=${l}`};const c=parseInt(n.expiry,10)*1e3,h=Math.max(c-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),h),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[ci.ANIMATING]||e.viewHints[ci.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,r]=rle(Qh(e.extent),e.viewState.projection),[n,s]=rle(ep(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${r}&east=${n}&west=${t}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const c=this.sessionTokenValue_,h=this.apiKey_,u=`${tHe}?session=${c}&key=${h}&${l}`;return this.previousViewportAttribution_=await fetch(u).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}const nHe=rHe;let t_e=class extends xy{constructor(e,t,r,n,s,o,a){super(t,r,n,s,o,a),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==ie.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;const r=vi(t[0],t[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e}};class sHe extends ao{constructor(e){const t=e.size,r=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",n=e.tilePixelRatio||1,s=t[0],o=t[1],a=[],l=e.tileSize||mf;let c=l*n;switch(r){case"default":for(;s>c||o>c;)a.push([Math.ceil(s/c),Math.ceil(o/c)]),c+=c;break;case"truncated":let T=s,A=o;for(;T>c||A>c;)a.push([Math.ceil(T/c),Math.ceil(A/c)]),T>>=1,A>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const h=[n],u=[0];for(let T=1,A=a.length;T<A;T++)h.push(n<<T),u.push(a[T-1][0]*a[T-1][1]+u[T-1]);h.reverse();const d=new Dc({tileSize:l,extent:e.extent||[0,-o,s,0],resolutions:h});let f=e.url;f&&!f.includes("{TileGroup}")&&!f.includes("{tileIndex}")&&(f+="{TileGroup}/{z}-{x}-{y}.jpg");const p=B2(f);let g=l*n;function m(T){return function(A,R,L){if(!A)return;const P=A[0],F=A[1],B=A[2],b=F+B*a[P][0],E=(b+u[P])/g|0,C={z:P,x:F,y:B,tileIndex:b,TileGroup:"TileGroup"+E};return T.replace(/\{(\w+?)\}/g,function(M,O){return C[O]})}}const y=Mf(p.map(m)),_=t_e.bind(null,Mi(l*n));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:_,tileGrid:d,tileUrlFunction:y,transition:e.transition}),this.zDirection=e.zDirection;const v=d.getTileCoordForCoordAndResolution(kr(d.getExtent()),h[h.length-1]),x=y(v,1,null),w=new Image;w.addEventListener("error",()=>{g=l,this.changed()}),w.src=x}}const oHe=sHe;function Zp(i){return i.toLocaleString("en",{maximumFractionDigits:10})}class aHe extends ao{constructor(e){const t=e||{};let r=t.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const n=t.version||gr.VERSION2,s=t.sizes||[],o=t.size;pt(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],c=t.tileSize,h=t.tilePixelRatio||1,u=t.format||"jpg",d=t.quality||(t.version==gr.VERSION1?"native":"default");let f=t.resolutions||[];const p=t.supports||[],g=t.extent||[0,-l,a,0],m=s!=null&&Array.isArray(s)&&s.length>0,y=c!==void 0&&(typeof c=="number"&&Number.isInteger(c)&&c>0||Array.isArray(c)&&c.length>0),_=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let v,x,w;if(f.sort(function(L,P){return P-L}),y||_)if(c!=null&&(typeof c=="number"&&Number.isInteger(c)&&c>0?(v=c,x=c):Array.isArray(c)&&c.length>0&&((c.length==1||c[1]==null&&Number.isInteger(c[0]))&&(v=c[0],x=c[0]),c.length==2&&(Number.isInteger(c[0])&&Number.isInteger(c[1])?(v=c[0],x=c[1]):c[0]==null&&Number.isInteger(c[1])&&(v=c[1],x=c[1])))),(v===void 0||x===void 0)&&(v=mf,x=mf),f.length==0){w=Math.max(Math.ceil(Math.log(a/v)/Math.LN2),Math.ceil(Math.log(l/x)/Math.LN2));for(let L=w;L>=0;L--)f.push(Math.pow(2,L))}else{const L=Math.max(...f);w=Math.round(Math.log(L)/Math.LN2)}else if(v=a,x=l,f=[],m){s.sort(function(P,F){return P[0]-F[0]}),w=-1;const L=[];for(let P=0;P<s.length;P++){const F=a/s[P][0];if(f.length>0&&f[f.length-1]==F){L.push(P);continue}f.push(F),w++}if(L.length>0)for(let P=0;P<L.length;P++)s.splice(L[P]-P,1)}else f.push(1),s.push([a,l]),w=0;const T=new Dc({tileSize:[v,x],extent:g,origin:No(g),resolutions:f}),A=function(L,P,F){let B,b;const E=L[0];if(E>w)return;const C=L[1],M=L[2],O=f[E];if(!(C===void 0||M===void 0||O===void 0||C<0||Math.ceil(a/O/v)<=C||M<0||Math.ceil(l/O/x)<=M)){if(_||y){const D=C*v*O,U=M*x*O;let z=v*O,Z=x*O,Q=v,V=x;if(D+z>a&&(z=a-D),U+Z>l&&(Z=l-U),D+v*O>a&&(Q=Math.floor((a-D+O-1)/O)),U+x*O>l&&(V=Math.floor((l-U+O-1)/O)),D==0&&z==a&&U==0&&Z==l)B="full";else if(!_||p.includes("regionByPx"))B=D+","+U+","+z+","+Z;else if(p.includes("regionByPct")){const N=Zp(D/a*100),X=Zp(U/l*100),ne=Zp(z/a*100),fe=Zp(Z/l*100);B="pct:"+N+","+X+","+ne+","+fe}n==gr.VERSION3&&(!_||p.includes("sizeByWh"))?b=Q+","+V:!_||p.includes("sizeByW")?b=Q+",":p.includes("sizeByH")?b=","+V:p.includes("sizeByWh")?b=Q+","+V:p.includes("sizeByPct")&&(b="pct:"+Zp(100/O))}else if(B="full",m){const D=s[E][0],U=s[E][1];n==gr.VERSION3?D==a&&U==l?b="max":b=D+","+U:D==a?b="full":b=D+","}else b=n==gr.VERSION3?"max":"full";return r+B+"/"+b+"/0/"+d+"."+u}},R=t_e.bind(null,Mi(c||256).map(function(L){return L*h}));super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:R,tileGrid:T,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:A,transition:t.transition}),this.zDirection=t.zDirection}}const lHe=aHe;class cHe extends nx{constructor(e,t,r,n,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?Er(r,c):r,u=kr(h),d=Am(e,t,u,n),f=w2,p=new S2(e,t,h,l,d*f,n),g=p.calculateSourceExtent(),m=Aa(g)?null:o(g,d,s),y=m?Le.IDLE:Le.EMPTY,_=m?m.getPixelRatio():1;super(r,n,_,y),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=p,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=m,this.sourcePixelRatio_=_,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Le.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Le.LOADED){const t=rt(this.targetExtent_)/this.targetResolution_,r=fi(this.targetExtent_)/this.targetResolution_;this.canvas_=C2(t,r,this.sourcePixelRatio_,Fv(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Le.IDLE){this.state=Le.LOADING,this.changed();const e=this.sourceImage_.getState();e==Le.LOADED||e==Le.ERROR?this.reproject_():(this.sourceListenerKey_=lt(this.sourceImage_,Ie.CHANGE,function(t){const r=this.sourceImage_.getState();(r==Le.LOADED||r==Le.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Xt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const la=4,a1={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class hHe extends Dn{constructor(e,t){super(e),this.image=t}}class uHe extends up{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Xb(t,e,0);e=t[r]}return e}getImage(e,t,r,n){const s=this.getProjection();if(!s||!n||qr(s,n))return s&&(n=s),this.getImageInternal(e,t,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&qr(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&io(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new cHe(s,n,e,t,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,n){if(this.loader){const s=Rx(e,t,r,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Hr(this.wantedExtent_,s)||Hr(this.image.getExtent(),s))&&(this.wantedResolution_&&Fv(this.wantedResolution_)===o||Fv(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new nx(s,o,r,this.loader),this.image.addEventListener(Ie.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case Le.LOADING:this.loading=!0,r=a1.IMAGELOADSTART;break;case Le.LOADED:this.loading=!1,r=a1.IMAGELOADEND;break;case Le.ERROR:this.loading=!1,r=a1.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new hHe(r,t))}}function Mx(i,e){i.getImage().src=e}function Rx(i,e,t,r){const n=e/t,s=kr(i),o=lc(rt(i)/n,la),a=lc(fi(i)/n,la),l=lc((r-1)*o/2,la),c=o+2*l,h=lc((r-1)*a/2,la),u=a+2*h;return fm(s,n,0,[c,u])}const $c=uHe;function yl(i,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const r=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+r}function i_e(i,e,t,r,n,s){const o=n.getCode().split(/:(?=\d+$)/).pop(),a=t/r,l=[ov(rt(e)/a,la),ov(fi(e)/a,la)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const c=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return yl(c,s)}function r_e(i){const e=i.load?i.load:Pc,t=xe(i.projection||"EPSG:3857");return function(r,n,s){s=i.hidpi?s:1;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,i.params),r=Rx(r,n,s,i.ratio);const a=i_e(i.url,r,n,s,t,o),l=new Image;return i.crossOrigin!==null&&(l.crossOrigin=i.crossOrigin),e(l,a).then(c=>{const h=rt(r)/c.width*s;return{image:c,extent:r,resolution:h,pixelRatio:s}})}}class dHe extends $c{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Mx,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=r_e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Pc(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const fHe=dHe;class pHe extends $c{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,r,n){t=this.findNearestResolution(t);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==r&&Hr(s.getExtent(),e))return s;e=e.slice(),uT(e,this.ratio_);const o=rt(e)/t,a=fi(e)/t,l=[o*r,a*r],c=this.canvasFunction_.call(this,e,t,r,l,n);return c&&(s=new P2(e,t,r,c)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}const gHe=pHe;function mHe(i,e,t,r){const n=rt(i),s=fi(i),o=e[0],a=e[1],l=.0254/r;return a*n>o*s?n*t/(o*l):s*t/(a*l)}function yHe(i,e,t,r,n,s,o){const a=mHe(t,r,s,o),l=kr(t),c={OPERATION:n?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(c,e),yl(i,c)}function n_e(i){const e=i.load||Pc;return function(t,r,n){const s=new Image;i.crossOrigin!==null&&(s.crossOrigin=i.crossOrigin),t=Rx(t,r,n,i.ratio);const o=rt(t)/r,a=fi(t)/r,l=[o*n,a*n],c=yHe(i.url,i.params,t,l,i.useOverlay,i.metersPerUnit||1,i.displayDpi||96);return e(s,c).then(h=>({image:h,extent:t,pixelRatio:n}))}}class _He extends $c{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Mx,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=n_e({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Pc(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}const vHe=_He;function s_e(i){const e=i.load||Pc,t=i.imageExtent,r=new Image;return i.crossOrigin!==null&&(r.crossOrigin=i.crossOrigin),()=>e(r,i.url).then(n=>{const s=rt(t)/n.width,o=fi(t)/n.height;return{image:n,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}class o_e extends $c{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:Mx;super({attributions:e.attributions,interpolate:e.interpolate,projection:xe(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new nx(this.imageExtent_,void 0,1,s_e({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(n,s)=>(this.image.setImage(n),r(this.image,s),Pc(n))})),this.image.addEventListener(Ie.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,n){return gi(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const Bv="1.3.0",Nce=[101,101];function a_e(i,e,t,r,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=r.getAxisOrientation();let o;const a=fT(n.VERSION,"1.3")>=0;return n[a?"CRS":"SRS"]=r.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,n.BBOX=o.join(","),yl(i,n)}function l_e(i,e,t,r,n,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[ov(rt(i)/a,la),ov(fi(i)/a,la)];if(t!=1)switch(o){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return a_e(n,i,l,r,s)}function jv(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Bv,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}function c_e(i){const e=i.hidpi===void 0?!0:i.hidpi,t=xe(i.projection||"EPSG:3857"),r=i.ratio||1.5,n=i.load||Pc;return(s,o,a)=>{s=Rx(s,o,a,r),a!=1&&(!e||i.serverType===void 0)&&(a=1);const l=l_e(s,o,a,t,i.url,jv(i.params,"GetMap"),i.serverType),c=new Image;return i.crossOrigin!==null&&(c.crossOrigin=i.crossOrigin),n(c,l).then(h=>({image:h,extent:s,pixelRatio:a}))}}function bHe(i,e,t){if(i.url===void 0)return;const r=xe(i.projection||"EPSG:3857"),n=fm(e,t,0,Nce),s={QUERY_LAYERS:i.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,jv(i.params,"GetFeatureInfo"),i.params);const o=Ad((e[0]-n[0])/t,la),a=Ad((n[3]-e[1])/t,la),l=fT(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,a_e(i.url,n,Nce,r,s)}function xHe(i,e){if(i.url===void 0)return;const t={SERVICE:"WMS",VERSION:Bv,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i.params===void 0||i.params.LAYER===void 0){const r=i.params.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;t.LAYER=r}if(e!==void 0){const r=xe(i.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*r/n}return Object.assign(t,i.params),yl(i.url,t)}class wHe extends $c{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Mx,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,r,n){const s=xe(r),o=this.getProjection();o&&o!==s&&(t=Am(o,s,e,t),e=tp(e,s,o));const a={url:this.url_,params:{...this.params_,...n},projection:o||s};return bHe(a,e,t)}getLegendUrl(e,t){return xHe({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=c_e({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Pc(s))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const h_e=wHe;function oA(i,e,t,r){const n=document.createElement("script"),s="olc_"+Ae(e);function o(){delete window[s],n.parentNode.removeChild(n)}n.async=!0,n.src=i+(i.includes("?")?"&":"?")+(r||"callback")+"="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(n)}class EHe extends Error{constructor(e){const t="Unexpected response status: "+e.status;super(t),this.name="ResponseError",this.response=e}}class SHe extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function u_e(i){return new Promise(function(e,t){function r(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(c){const h="Error parsing response text as JSON: "+c.message;t(new Error(h));return}e(l);return}t(new EHe(a))}function n(o){t(new SHe(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",n),s.open("GET",i),s.setRequestHeader("Accept","application/json"),s.send()})}function d_e(i,e){return e.includes("://")?e:new URL(e,i).href}const CHe={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},THe={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function AHe(i,e){let t,r;for(let n=0;n<i.length;++n){const s=i[n];if(s.rel==="item"){if(s.type===e){t=s.href;break}(CHe[s.type]||!r&&s.type.startsWith("image/"))&&(r=s.href)}}if(!t)if(r)t=r;else throw new Error('Could not find "item" link');return t}function MHe(i,e,t){let r,n;const s={};for(let o=0;o<i.length;++o){const a=i[o];if(s[a.type]=a.href,a.rel==="item"){if(a.type===e){r=a.href;break}THe[a.type]&&(n=a.href)}}if(!r&&t)for(let o=0;o<t.length;++o){const a=t[o];if(s[a]){r=s[a];break}}if(!r)if(n)r=n;else throw new Error('Could not find "item" link');return r}function $ce(i,e,t,r){let n=i.projection;if(!n&&(n=xe(e.crs),!n))throw new Error(`Unsupported CRS: ${e.crs}`);const s=e.orderedAxes,o=(s?s.slice(0,2).map(w=>w.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):n.getAxisOrientation().substr(0,2))!=="en",a=e.tileMatrices,l={};for(let w=0;w<a.length;++w){const T=a[w];l[T.id]=T}const c={},h=[];if(r)for(let w=0;w<r.length;++w){const T=r[w],A=T.tileMatrix;h.push(A),c[A]=T}else for(let w=0;w<a.length;++w){const T=a[w].id;h.push(T)}const u=h.length,d=new Array(u),f=new Array(u),p=new Array(u),g=new Array(u),m=[-1/0,-1/0,1/0,1/0];for(let w=0;w<u;++w){const T=h[w],A=l[T],R=A.pointOfOrigin;o?d[w]=[R[1],R[0]]:d[w]=R,f[w]=A.cellSize,p[w]=[A.matrixWidth,A.matrixHeight],g[w]=[A.tileWidth,A.tileHeight];const L=c[T];if(L){const P=A.cellSize*A.tileWidth,F=d[w][0]+L.minTileCol*P,B=d[w][0]+(L.maxTileCol+1)*P,b=A.cellSize*A.tileHeight,E=A.cornerOfOrigin==="bottomLeft";let C,M;E?(C=d[w][1]+L.minTileRow*b,M=d[w][1]+(L.maxTileRow+1)*b):(C=d[w][1]-(L.maxTileRow+1)*b,M=d[w][1]-L.minTileRow*b),Er(m,[F,C,B,M],m)}}const y=new Dc({origins:d,resolutions:f,sizes:p,tileSizes:g,extent:r?m:void 0}),_=i.context,v=i.url;function x(w,T,A){if(!w)return;const R=h[w[0]],L=l[R],P=L.cornerOfOrigin==="bottomLeft",F={tileMatrix:R,tileCol:w[1],tileRow:P?-w[2]-1:w[2]};if(r){const b=c[L.id];if(F.tileCol<b.minTileCol||F.tileCol>b.maxTileCol||F.tileRow<b.minTileRow||F.tileRow>b.maxTileRow)return}Object.assign(F,_);const B=t.replace(/\{(\w+?)\}/g,function(b,E){return F[E]});return d_e(v,B)}return{grid:y,urlTemplate:t,urlFunction:x}}function RHe(i,e){const t=e.tileMatrixSetLimits;let r;if(e.dataType==="map")r=AHe(e.links,i.mediaType);else if(e.dataType==="vector")r=MHe(e.links,i.mediaType,i.supportedMediaTypes);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return $ce(i,e.tileMatrixSet,r,t);const n=e.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!n)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=n.href,o=d_e(i.url,s);return u_e(o).then(function(a){return $ce(i,a,r,t)})}function f_e(i){return u_e(i.url).then(function(e){return RHe(i,e)})}class LHe extends ao{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null};f_e(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){lv(e),this.setState("error")}}const IHe=LHe;let PHe=class extends dp{constructor(e,t,r,n,s,o){super(e,t,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ie.IDLE&&(this.setState(ie.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ie.ERROR)}setFeatures(e){this.features_=e,this.setState(ie.LOADED)}setLoader(e){this.loader_=e}};const Bce=[];class kHe extends dp{constructor(e,t,r,n){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.wrappedTileCoord=r}getContext(e){const t=Ae(e);return t in this.context_||(this.context_[t]=vi(1,1,Bce)),this.context_[t]}hasContext(e){return Ae(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=Ae(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];tu(t),Bce.push(t.canvas),delete this.context_[e]}super.release()}}class Ey extends z2{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Al(t),n=e.tileGrid||Fc({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:OHe,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new Tx(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:PHe,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],r=this.tileCache;if(r.getCount()===0)return t;const n=w0e(r.peekFirstKey())[0],s=this.tileGrid;return r.forEach(function(o){if(o.tileCoord[0]!==n||o.getState()!==ie.LOADED)return;const a=o.getSourceTiles();for(let l=0,c=a.length;l<c;++l){const h=a[l],u=h.tileCoord;if(gi(e,s.getTileCoordExtent(u))){const d=h.getFeatures();if(d)for(let f=0,p=d.length;f<p;++f){const g=d[f],m=g.getGeometry();gi(e,m.getExtent())&&t.push(g)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const r=this.getTileCacheForProjection(e),n=Object.keys(t).reduce((s,o)=>{const a=g8e(o),l=r.peek(a);if(l){const c=l.sourceTiles;for(let h=0,u=c.length;h<u;++h)s[c[h].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(n)}getSourceTiles(e,t,r){if(r.getState()===ie.IDLE){r.setState(ie.LOADING);const n=r.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(n),a=n[0],l=s.getResolution(a);rs(o,-l,o);const c=this.tileGrid,h=c.getExtent();h&&Er(o,h,o);const u=c.getZForResolution(l,this.zDirection);c.forEachTileCoord(o,u,d=>{const f=this.tileUrlFunction(d,e,t),p=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?ie.IDLE:ie.EMPTY,f,this.format_,this.tileLoadFunction);r.sourceTiles.push(p);const g=p.getState();if(g<ie.LOADED){const m=y=>{this.handleTileChange(y);const _=p.getState();if(_===ie.LOADED||_===ie.ERROR){const v=p.getKey();v in r.errorTileKeys?p.getState()===ie.LOADED&&delete r.errorTileKeys[v]:r.loadingSourceTiles--,_===ie.ERROR?r.errorTileKeys[v]=!0:p.removeEventListener(Ie.CHANGE,m),r.loadingSourceTiles===0&&r.setState(gl(r.errorTileKeys)?ie.LOADED:ie.ERROR)}};p.addEventListener(Ie.CHANGE,m),r.loadingSourceTiles++}g===ie.IDLE&&(p.extent=c.getTileCoordExtent(d),p.projection=t,p.resolution=c.getResolution(d[0]),this.sourceTileCache.set(f,p),p.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(d=>d.getState()===ie.ERROR)?ie.ERROR:ie.LOADED)}return r.sourceTiles}getTile(e,t,r,n,s){const o=wa(e,t,r),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const c=[e,t,r];let h=this.getTileCoordForTileUrlFunction(c,s);const u=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(h&&u){const g=d.getTileCoordExtent(h);rs(g,-d.getResolution(e),g),gi(u,g)||(h=null)}let f=!0;if(h!==null){const g=this.tileGrid,m=d.getResolution(e),y=g.getZForResolution(m,1),_=d.getTileCoordExtent(h);rs(_,-m,_),g.forEachTileCoord(_,y,v=>{f=f&&!this.tileUrlFunction(v,n,s)})}const p=new kHe(c,f?ie.EMPTY:ie.IDLE,h,this.getSourceTiles.bind(this,n,s));return p.key=a,l?(p.interimTile=l,p.refreshInterimChain(),this.tileCache.replace(o,p)):this.tileCache.set(o,p),p}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const n=this.tileGrid,s=n.getResolutions().slice(),o=s.map(function(c,h){return n.getOrigin(h)}),a=s.map(function(c,h){return n.getTileSize(h)}),l=Zge+1;for(let c=s.length;c<l;++c)s.push(s[c-1]/2),o.push(o[c-1]),a.push(a[c-1]);r=new Dc({extent:n.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const n=this.getTileGridForProjection(r),s=Mi(n.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function OHe(i,e){i.setLoader(function(t,r,n){c0e(e,i.getFormat(),t,r,n,i.onLoad.bind(i),i.onError.bind(i))})}class DHe extends Ey{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null};f_e(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){lv(e),this.setState("error")}}const FHe=DHe,p_e='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class NHe extends Tc{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[p_e];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const g_e=NHe;let m_e=!0;try{new ImageData(10,10)}catch{m_e=!1}let l1;function $He(i,e,t){if(m_e)return new ImageData(i,e,t);l1||(l1=document.createElement("canvas").getContext("2d"));const r=l1.createImageData(e,t);return r.data.set(i),r}function y_e(i){let e=!0;try{new ImageData(10,10)}catch{e=!1}function t(r,n,s){return e?new ImageData(r,n,s):{data:r,width:n,height:s}}return function(r){const n=r.buffers,s=r.meta,o=r.imageOps,a=r.width,l=r.height,c=n.length,h=n[0].byteLength;if(o){const p=new Array(c);for(let m=0;m<c;++m)p[m]=t(new Uint8ClampedArray(n[m]),a,l);return i(p,s).data.buffer}const u=new Uint8ClampedArray(h),d=new Array(c),f=new Array(c);for(let p=0;p<c;++p)d[p]=new Uint8ClampedArray(n[p]),f[p]=[0,0,0,0];for(let p=0;p<h;p+=4){for(let m=0;m<c;++m){const y=d[m];f[m][0]=y[p],f[m][1]=y[p+1],f[m][2]=y[p+2],f[m][3]=y[p+3]}const g=i(f,s);u[p]=g[0],u[p+1]=g[1],u[p+2]=g[2],u[p+3]=g[3]}return u.buffer}}function BHe(i,e){const r=Object.keys(i.lib||{}).map(function(s){return"const "+s+" = "+i.lib[s].toString()+";"}).concat(["const __minion__ = ("+y_e.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",e),n}function jHe(i,e){const t=y_e(i.operation);let r=!1;return{postMessage:function(n){setTimeout(function(){r||e({data:{buffer:t(n),meta:n.meta}})},0)},terminate:function(){r=!0}}}class zHe extends sy{constructor(e){super(),this._imageOps=!!e.imageOps;let t;e.threads===0?t=0:this._imageOps?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let n=0;n<t;++n)r[n]=BHe(e,this._onWorkerMessage.bind(this,n));else r[0]=jHe(e,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}_enqueue(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||this._queue.length===0)return;const e=this._queue.shift();this._job=e;const t=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(l){return l.data.buffer}),s=this._workers.length;if(this._running=s,s===1){this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const c=l*a,h=[];for(let u=0,d=n.length;u<d;++u)h.push(n[u].slice(c,c+a));this._workers[l].postMessage({buffers:h,meta:e.meta,imageOps:this._imageOps,width:t,height:r},h)}}_onWorkerMessage(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,this._running===0&&this._resolveJob())}_resolveJob(){const e=this._job,t=this._workers.length;let r,n;if(t===1)r=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),n=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this._dataLookup[a].buffer,c=a*o;r.set(new Uint8ClampedArray(l),c),n[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},e.callback(null,$He(r,e.inputs[0].width,e.inputs[0].height),n),this._dispatch()}disposeInternal(){for(let e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}const jce={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class zce extends Dn{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class __e extends $c{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=VHe(e.sources);const t=this.changed.bind(this);for(let r=0,n=this.layers_.length;r<n;++r)this.layers_[r].addEventListener(Ie.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new Gme(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Vi(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:UHe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Vi(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ae(this),renderTargets:{}},this.setAttributions(function(r){const n=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],l=a instanceof up?a:a.getSource();if(!l)continue;const c=l.getAttributions();if(typeof c=="function"){const h=c(r);n.push.apply(n,h)}}return n.length!==0?n:null}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new zHe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const s=kr(e);n.size[0]=Math.ceil(rt(e)/t),n.size[1]=Math.ceil(fi(e)/t),n.extent=[s[0]-n.size[0]*t/2,s[1]-n.size[1]*t/2,s[0]+n.size[0]*t/2,s[1]+n.size[1]*t/2],n.time=Date.now();const o=n.viewState;return o.center=s,o.projection=r,o.resolution=t,n}allSourcesReady_(){let e=!0,t;for(let r=0,n=this.layers_.length;r<n;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!io(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=GHe(this.layers_[s],e);if(o)r[s]=o;else return}const n={};this.dispatchEvent(new zce(jce.BEFOREOPERATIONS,e,n)),this.processor_.process(r,n,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,n){if(t||!r)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!io(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(rt(s)/o),c=Math.round(fi(s)/o);a=vi(l,c),this.renderedImageCanvas_=new P2(s,o,1,a.canvas)}a.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new zce(jce.AFTEROPERATIONS,e,n))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,n=this.layers_.length;r<n&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}__e.prototype.dispose;let vh=null;function GHe(i,e){const t=i.getRenderer();if(!t)throw new Error("Unsupported layer type: "+i);if(!t.prepareFrame(e))return null;const r=e.size[0],n=e.size[1];if(r===0||n===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===n)return o.getContext("2d").getImageData(0,0,r,n)}if(!vh)vh=vi(r,n,void 0,{willReadFrequently:!0});else{const a=vh.canvas;a.width!==r||a.height!==n?vh=vi(r,n,void 0,{willReadFrequently:!0}):vh.clearRect(0,0,r,n)}return vh.drawImage(o,0,0,r,n),vh.getImageData(0,0,r,n)}function UHe(i){return i.map(function(e){return e.getLayerState()})}function VHe(i){const e=i.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=qHe(i[r]);return t}function qHe(i){let e;return i instanceof up?i instanceof fp?e=new Rm({source:i}):i instanceof $c&&(e=new Cx({source:i})):e=i,e}const HHe=__e,WHe='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',YHe='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',XHe='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',ZHe={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},KHe={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class JHe extends Tc{constructor(e){const t=e.layer.indexOf("-"),r=t==-1?e.layer:e.layer.slice(0,t),n=KHe[r]||{minZoom:0,maxZoom:20,retina:!0},s=ZHe[e.layer],o=e.apiKey?"?api_key="+e.apiKey:"",a=n.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,c=[WHe,YHe,p_e];e.layer.startsWith("stamen_")&&c.splice(1,0,XHe),super({attributions:c,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:n.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:n.minZoom,opaque:s.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}const QHe=JHe;class eWe extends ao{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=_n(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,r,n,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const c=pa(M2(e),a.length);l=a[c]}return i_e(l,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),n,s,o)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const s=n.getTileCoordExtent(e,this.tmpExtent_);let o=Mi(n.getTileSize(e[0]),this.tmpSize);t!=1&&(o=Eme(o,t,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,s,t,r,a)}}const tWe=eWe;class iWe extends Tc{constructor(e){e=e||{},super({opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,r)=>{const n=t.getTileCoord()[0],s=Mi(this.tileGrid.getTileSize(n)),o=vi(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(r,s[0]/2,s[1]/2,s[0]),o.fillText(r,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})}}const rWe=iWe;class v_e extends ao{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:xe("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)oA(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=xe("EPSG:4326"),r=this.getProjection();let n;if(e.bounds!==void 0){const c=Sl(t,r);n=bf(e.bounds,c)}const s=Al(r),o=e.minzoom||0,a=e.maxzoom||22,l=Fc({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=$2(e.tiles,l),e.attribution&&!this.getAttributions()){const c=n!==void 0?n:s;this.setAttributions(function(h){return gi(c,h.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class aA extends ao{constructor(e){e=e||{};const t=Object.assign({},e.params),r="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=_n(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,n){const s=xe(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=tp(e,s,o),c=Am(o,s,e,t),h=a.getZForResolution(c,this.zDirection),u=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const p=this.gutter_;p!==0&&(f=rs(f,u*p,f));const g={QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,jv(this.params_,"GetFeatureInfo"),n);const m=Math.floor((l[0]-f[0])/u),y=Math.floor((f[3]-l[1])/u);return g[this.v13_?"I":"X"]=m,g[this.v13_?"J":"Y"]=y,this.getRequestUrl_(d,f,1,o||s,g)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:Bv,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;r.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*n/s}return Object.assign(r,t),yl(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,n,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=pa(M2(e),o.length);a=o[l]}return l_e(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),r,n,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||Bv;this.v13_=fT(e,"1.3")>=0}tileUrlFunction(e,t,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let o=n.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=rs(o,s*a,o));const l=Object.assign({},jv(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,r,l)}}class nWe extends dp{constructor(e,t,r,n,s,o){super(e,t),this.src_=r,this.extent_=n,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof n!="string")return null;let s=n.charCodeAt(Math.floor(t*n.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(e,t,r){this.state==ie.EMPTY&&r===!0?(this.state=ie.IDLE,gf(this,Ie.CHANGE,function(n){t(this.getData(e))},this),this.loadInternal_()):r===!0?setTimeout(()=>{t(this.getData(e))},0):t(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=ie.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=ie.LOADED,this.changed()}loadInternal_(){if(this.state==ie.IDLE)if(this.state=ie.LOADING,this.jsonp_)oA(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(ie.EMPTY)}}class sWe extends fp{constructor(e){if(super({projection:xe("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=iVe,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)oA(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,t,r,n){if(this.tileGrid){const s=this.tileGrid.getZForResolution(t,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(e,r,n)}else n===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const t=xe("EPSG:4326"),r=this.getProjection();let n;if(e.bounds!==void 0){const h=Sl(t,r);n=bf(e.bounds,h)}const s=Al(r),o=e.minzoom||0,a=e.maxzoom||22,l=Fc({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=e.template;const c=e.grids;if(!c){this.setState("error");return}if(this.tileUrlFunction_=$2(c,l),e.attribution){const h=n!==void 0?n:s;this.setAttributions(function(u){return gi(h,u.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,t,r,n,s){const o=wa(e,t,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);const a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,s),c=this.tileUrlFunction_(l,n,s),h=new nWe(a,c!==void 0?ie.IDLE:ie.EMPTY,c!==void 0?c:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,h),h}useTile(e,t,r){const n=wa(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const oWe=sWe;class lA extends ao{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=B2(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Mf(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(Mf(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?yl(e,r):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in r?r[a.toLowerCase()]:o});const n=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const c={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(c,s);let h=e;return t=="KVP"?h=yl(h,c):h=h.replace(/\{(\w+?)\}/g,function(u,d){return c[d]}),h}}}function b_e(i,e){const t=i.Contents.Layer,r=t==null?void 0:t.find(function(B){return B.Identifier==e.layer});if(!r)return null;const n=i.Contents.TileMatrixSet;let s;r.TileMatrixSetLink.length>1?"projection"in e?s=r.TileMatrixSetLink.findIndex(function(B){const E=n.find(function(O){return O.Identifier==B.TileMatrixSet}).SupportedCRS,C=xe(E),M=xe(e.projection);return C&&M?qr(C,M):E==e.projection}):s=r.TileMatrixSetLink.findIndex(function(B){return B.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const o=r.TileMatrixSetLink[s].TileMatrixSet,a=r.TileMatrixSetLink[s].TileMatrixSetLimits;let l=r.Format[0];"format"in e&&(l=e.format),s=r.Style.findIndex(function(B){return"style"in e?B.Title==e.style:B.isDefault}),s<0&&(s=0);const c=r.Style[s].Identifier,h={};"Dimension"in r&&r.Dimension.forEach(function(B,b,E){const C=B.Identifier;let M=B.Default;M===void 0&&(M=B.Value[0]),h[C]=M});const d=i.Contents.TileMatrixSet.find(function(B){return B.Identifier==o});let f;const p=d.SupportedCRS;if(p&&(f=xe(p)),"projection"in e){const B=xe(e.projection);B&&(!f||qr(B,f))&&(f=B)}let g=!1;const m=f.getAxisOrientation().substr(0,2)=="ne";let y=d.TileMatrix[0],_={MinTileCol:0,MinTileRow:0,MaxTileCol:y.MatrixWidth-1,MaxTileRow:y.MatrixHeight-1};if(a){_=a[a.length-1];const B=d.TileMatrix.find(b=>b.Identifier===_.TileMatrix||d.Identifier+":"+b.Identifier===_.TileMatrix);B&&(y=B)}const v=y.ScaleDenominator*28e-5/f.getMetersPerUnit(),x=m?[y.TopLeftCorner[1],y.TopLeftCorner[0]]:y.TopLeftCorner,w=y.TileWidth*v,T=y.TileHeight*v;let A=d.BoundingBox;A&&m&&(A=[A[1],A[0],A[3],A[2]]);let R=[x[0]+w*_.MinTileCol,x[1]-T*(1+_.MaxTileRow),x[0]+w*(1+_.MaxTileCol),x[1]-T*_.MinTileRow];if(A!==void 0&&!Hr(A,R)){const B=r.WGS84BoundingBox,b=xe("EPSG:4326").getExtent();if(R=A,B)g=B[0]===b[0]&&B[2]===b[2];else{const E=yT(A,d.SupportedCRS,"EPSG:4326");g=E[0]-1e-10<=b[0]&&E[2]+1e-10>=b[2]}}const L=Z8e(d,R,a),P=[];let F=e.requestEncoding;if(F=F!==void 0?F:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const B=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let b=0,E=B.length;b<E;++b)if(B[b].Constraint){const M=B[b].Constraint.find(function(O){return O.name=="GetEncoding"}).AllowedValues.Value;if(F===""&&(F=M[0]),F==="KVP")M.includes("KVP")&&P.push(B[b].href);else break}else B[b].href&&(F="KVP",P.push(B[b].href))}return P.length===0&&(F="REST",r.ResourceURL.forEach(function(B){B.resourceType==="tile"&&(l=B.format,P.push(B.template))})),{urls:P,layer:e.layer,matrixSet:o,format:l,projection:f,requestEncoding:F,tileGrid:L,style:c,dimensions:h,wrapX:g,crossOrigin:e.crossOrigin}}function aWe(i,e){const t=new A2(32),r=i.getExtent();return function(n,s){t.expireCache(),r&&(n=Er(r,n));const o=i.getZForResolution(s),a=[];return i.forEachTileCoord(n,o,l=>{const c=l.toString();if(!t.containsKey(c)){const h=e(l);t.set(c,h)}a.push(t.get(c))}),a}}const lWe=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:aVe,CartoDB:cVe,Cluster:uVe,DataTile:G2,GeoTIFF:sA,Google:nHe,IIIF:lHe,Image:$c,ImageArcGISRest:fHe,ImageCanvas:gHe,ImageMapGuide:vHe,ImageStatic:o_e,ImageWMS:h_e,OGCMapTile:IHe,OGCVectorTile:FHe,OSM:g_e,Raster:HHe,Source:up,StadiaMaps:QHe,Tile:fp,TileArcGISRest:tWe,TileDebug:rWe,TileImage:ao,TileJSON:v_e,TileWMS:aA,UTFGrid:oWe,UrlTile:z2,Vector:Oc,VectorTile:Ey,WMTS:lA,XYZ:Tc,Zoomify:oHe,createArcGISRestLoader:r_e,createMapGuideLoader:n_e,createStaticLoader:s_e,createWMSLoader:c_e,sourcesFromTileGrid:aWe},Symbol.toStringTag,{value:"Module"})),ji={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},cWe={ERROR:"error"};class hWe extends Dn{constructor(e){super(cWe.ERROR),this.code=e.code,this.message=e.message}}class uWe extends so{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Jb,this.watchId_=void 0,this.addChangeListener(ji.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(ji.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Sl(xe("EPSG:4326"),e),this.position_&&this.set(ji.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(ji.ACCURACY,t.accuracy),this.set(ji.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(ji.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(ji.HEADING,t.heading===null?void 0:Mo(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const r=this.transform_(this.position_);this.set(ji.POSITION,r.slice()),this.set(ji.SPEED,t.speed===null?void 0:t.speed);const n=JNe(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(ji.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new hWe(e))}getAccuracy(){return this.get(ji.ACCURACY)}getAccuracyGeometry(){return this.get(ji.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(ji.ALTITUDE)}getAltitudeAccuracy(){return this.get(ji.ALTITUDE_ACCURACY)}getHeading(){return this.get(ji.HEADING)}getPosition(){return this.get(ji.POSITION)}getProjection(){return this.get(ji.PROJECTION)}getSpeed(){return this.get(ji.SPEED)}getTracking(){return this.get(ji.TRACKING)}getTrackingOptions(){return this.get(ji.TRACKING_OPTIONS)}setProjection(e){this.set(ji.PROJECTION,xe(e))}setTracking(e){this.set(ji.TRACKING,e)}setTrackingOptions(e){this.set(ji.TRACKING_OPTIONS,e)}}const sn={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class x_e extends so{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+S3e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(sn.ELEMENT,this.handleElementChanged),this.addChangeListener(sn.MAP,this.handleMapChanged),this.addChangeListener(sn.OFFSET,this.handleOffsetChanged),this.addChangeListener(sn.POSITION,this.handlePositionChanged),this.addChangeListener(sn.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(sn.ELEMENT)}getId(){return this.id}getMap(){return this.get(sn.MAP)||null}getOffset(){return this.get(sn.OFFSET)}getPosition(){return this.get(sn.POSITION)}getPositioning(){return this.get(sn.POSITIONING)}handleElementChanged(){Rme(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(uv(this.element),Xt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=lt(e,Qo.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(sn.ELEMENT,e)}setMap(e){this.set(sn.MAP,e)}setOffset(e){this.set(sn.OFFSET,e)}setPosition(e){this.set(sn.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(sn.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[m3e(n),y3e(n)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Hr(r,s)){const a=s[0]-r[0],l=r[2]-s[2],c=s[1]-r[1],h=r[3]-s[3],u=[0,0];if(a<0?u[0]=a-o:l<0&&(u[0]=Math.abs(l)+o),c<0?u[1]=c-o:h<0&&(u[1]=Math.abs(h)+o),u[0]!==0||u[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const p=[f[0]+u[0],f[1]+u[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(p),duration:g.duration,easing:g.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),n=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(sn.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(r,n)}updateRenderedPosition(e,t){const r=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const h=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,r.transform=h)}getOptions(){return this.options}}const Gce=0,Gg=1,Uce=[0,0,0,0],Kd=[],c1={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class h1 extends Dn{constructor(e,t,r){super(e),this.features=t,this.mapBrowserEvent=r}}class dWe extends bu{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Kme,this.defaultDeleteCondition_=function(r){return P$e(r)&&F$e(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_v,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new $S,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new kc({source:new Oc({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:pWe(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new gn(this.source_.getFeatures()),this.source_.addEventListener(Lr.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Lr.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(dn.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(dn.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),e.addEventListener(Ie.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new gn;const r=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const o=t[n];for(let a=0,l=o.length;a<l;++a){const c=o[a].feature;c&&!r.includes(c)&&this.featuresBeingModified_.push(c)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new h1(c1.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Ie.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,r=[];t.forEach(function(n){e===n.feature&&r.push(n)});for(let n=r.length-1;n>=0;--n){const s=r[n];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length-1;n<s;++n){const o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert(Vr(o),a)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[n],index:a,segment:c};this.rBush_.insert(Vr(c),h)}}}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),h={feature:e,geometry:t,depth:[n],index:a,segment:c};this.rBush_.insert(Vr(c),h)}}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let h=0,u=c.length-1;h<u;++h){const d=c.slice(h,h+2),f={feature:e,geometry:t,depth:[a,n],index:h,segment:d};this.rBush_.insert(Vr(d),f)}}}}writeCircleGeometry_(e,t){const r=t.getCenter(),n={feature:e,geometry:t,index:Gce,segment:[r,r]},s={feature:e,geometry:t,index:Gg,segment:[r,r]},o=[n,s];n.featureSegments=o,s.featureSegments=o,this.rBush_.insert(Hd(r),n);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let n=0;n<r.length;++n){const s=r[n],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,r){let n=this.vertexFeature_;return n?n.getGeometry().setCoordinates(e):(n=new mi(new $i(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n)),n.set("features",t),n.set("geometries",r),n}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Dt.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Dt.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Dt.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],n=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],l=a[0],c=l.feature;r.includes(c)||r.push(c);const h=l.geometry;n.includes(h)||n.push(h);const u=l.depth;let d;const f=l.segment,p=a[1];for(;t.length<h.getStride();)t.push(f[p][t.length]);switch(h.getType()){case"Point":d=t,f[0]=t,f[1]=t;break;case"MultiPoint":d=h.getCoordinates(),d[l.index]=t,f[0]=t,f[1]=t;break;case"LineString":d=h.getCoordinates(),d[l.index+p]=t,f[p]=t;break;case"MultiLineString":d=h.getCoordinates(),d[u[0]][l.index+p]=t,f[p]=t;break;case"Polygon":d=h.getCoordinates(),d[u[0]][l.index+p]=t,f[p]=t;break;case"MultiPolygon":d=h.getCoordinates(),d[u[1]][u[0]][l.index+p]=t,f[p]=t;break;case"Circle":if(f[0]=t,f[1]=t,l.index===Gce)this.changingFeature_=!0,h.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let g=av(Ki(h.getCenter()),Ki(t));h.setRadius(g),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(h,d)}this.createOrUpdateVertexFeature_(t,r,n)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const r=this.vertexFeature_;if(r){e.map.getView().getProjection();const n=[],s=r.getGeometry().getCoordinates(),o=Vr([s]),a=this.rBush_.getInExtent(o),l={};a.sort(fWe);for(let c=0,h=a.length;c<h;++c){const u=a[c],d=u.segment;let f=Ae(u.geometry);const p=u.depth;if(p&&(f+="-"+p.join("-")),l[f]||(l[f]=new Array(2)),u.geometry.getType()==="Circle"&&u.index===Gg){const g=qce(t,u);Vs(g,s)&&!l[f][0]&&(this.dragSegments_.push([u,0]),l[f][0]=u);continue}if(Vs(d[0],s)&&!l[f][0]){this.dragSegments_.push([u,0]),l[f][0]=u;continue}if(Vs(d[1],s)&&!l[f][1]){if(l[f][0]&&l[f][0].index===0){let g=u.geometry.getCoordinates();switch(u.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":g=g[p[1]];case"Polygon":if(u.index!==g[p[0]].length-2)continue;break}}this.dragSegments_.push([u,1]),l[f][1]=u;continue}Ae(d)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(e)&&n.push(u)}n.length&&this.willModifyFeatures_(e,[n]);for(let c=n.length-1;c>=0;--c)this.insertVertex_(n[c],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const r=this.dragSegments_[t][0],n=r.geometry;if(n.getType()==="Circle"){const s=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(Hd(s),o);let l=n;this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(Vr(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new h1(c1.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,r){const n=r||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(l,c){return Vce(n,l)-Vce(n,c)};let o,a;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(c,h,u)=>{u&&u.getType()==="Point"&&(u=new $i(eu(u.getCoordinates())));const d=u||c.getGeometry();if(c instanceof mi&&this.features_.getArray().includes(c)){a=d;const f=c.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:c,geometry:a,segment:[f,f]}]}return!0},{layerFilter:l})}if(!o){const l=Ms(Hd(n,Uce)),c=t.getView().getResolution()*this.pixelTolerance_,h=ly(rs(l,c,Uce));o=this.rBush_.getInExtent(h)}if(o&&o.length>0){const l=o.sort(s)[0],c=l.segment;let h=qce(n,l);const u=t.getPixelFromCoordinate(h);let d=av(e,u);if(a||d<=this.pixelTolerance_){const f={};if(f[Ae(c)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-n[0],this.delta_[1]=h[1]-n[1]),l.geometry.getType()==="Circle"&&l.index===Gg)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry]);else{const p=t.getPixelFromCoordinate(c[0]),g=t.getPixelFromCoordinate(c[1]),m=xf(u,p),y=xf(u,g);d=Math.sqrt(Math.min(m,y)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(h=m>y?c[1]:c[0]),this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry]);const _={};_[Ae(l.geometry)]=!0;for(let v=1,x=o.length;v<x;++v){const w=o[v].segment;if(Vs(c[0],w[0])&&Vs(c[1],w[1])||Vs(c[0],w[1])&&Vs(c[1],w[0])){const T=Ae(o[v].geometry);T in _||(_[T]=!0,f[Ae(w)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const r=e.segment,n=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const h={segment:[r[0],t],feature:n,geometry:s,depth:o,index:a};c.insert(Vr(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[t,r[1]],feature:n,geometry:s,depth:o,index:a+1};c.insert(Vr(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Dt.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new h1(c1.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r=!1,n,s,o,a,l,c,h,u,d,f,p;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],p=Ae(f.feature),f.depth&&(p+="-"+f.depth.join("-")),p in t||(t[p]={}),o[1]===0?(t[p].right=f,t[p].index=f.index):o[1]==1&&(t[p].left=f,t[p].index=f.index+1);for(p in t){switch(d=t[p].right,h=t[p].left,c=t[p].index,u=c-1,h!==void 0?f=h:f=d,u<0&&(u=0),a=f.geometry,s=a.getCoordinates(),n=s,r=!1,a.getType()){case"MultiLineString":s[f.depth[0]].length>2&&(s[f.depth[0]].splice(c,1),r=!0);break;case"LineString":s.length>2&&(s.splice(c,1),r=!0);break;case"MultiPolygon":n=n[f.depth[1]];case"Polygon":n=n[f.depth[0]],n.length>4&&(c==n.length-1&&(c=0),n.splice(c,1),r=!0,c===0&&(n.pop(),n.push(n[0]),u=n.length-1));break}if(r){this.setGeometryCoordinates_(a,s);const g=[];if(h!==void 0&&(this.rBush_.remove(h),g.push(h.segment[0])),d!==void 0&&(this.rBush_.remove(d),g.push(d.segment[1])),h!==void 0&&d!==void 0){const m={depth:f.depth,feature:f.feature,geometry:f.geometry,index:u,segment:g};this.rBush_.insert(Vr(m.segment),m)}this.updateSegmentIndices_(a,c,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||Ta(s.depth,r))&&s.index>t&&(s.index+=n)})}}function fWe(i,e){return i.index-e.index}function Vce(i,e,t){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===Gg){const o=xf(s.getCenter(),Ki(i)),a=Math.sqrt(o)-s.getRadius();return a*a}}const n=Ki(i);return Kd[0]=Ki(e.segment[0]),Kd[1]=Ki(e.segment[1]),vNe(n,Kd)}function qce(i,e,t){const r=e.geometry;if(r.getType()==="Circle"&&e.index===Gg)return eu(r.getClosestPoint(Ki(i)));const n=Ki(i);return Kd[0]=Ki(e.segment[0]),Kd[1]=Ki(e.segment[1]),eu(ime(n,Kd))}function pWe(){const i=Ome();return function(e,t){return i.Point}}const Y0={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class X0 extends Dn{constructor(e,t){super(e),this.feature=t}}function gWe(i,e){const t=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();w_e(i,s,t)}return t}function Z0(i,e){return nl(i[0],i[1],e[0],e[1])}function Ld(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function K0(i,e,t){let r,n;e<t?(r=e,n=t):(r=t,n=e);const s=Math.ceil(r),o=Math.floor(n);if(s>o){const l=Id(i,r),c=Id(i,n);return Z0(l,c)}let a=0;if(r<s){const l=Id(i,r),c=Ld(i,s);a+=Z0(l,c)}if(o<n){const l=Ld(i,o),c=Id(i,n);a+=Z0(l,c)}for(let l=s;l<o-1;++l){const c=Ld(i,l),h=Ld(i,l+1);a+=Z0(c,h)}return a}function w_e(i,e,t){if(e instanceof Ii){J0(i,e.getCoordinates(),!1,t);return}if(e instanceof vn){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n)J0(i,r[n],!1,t);return}if(e instanceof tr){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n)J0(i,r[n],!0,t);return}if(e instanceof os){const r=e.getCoordinates();for(let n=0,s=r.length;n<s;++n){const o=r[n];for(let a=0,l=o.length;a<l;++a)J0(i,o[a],!0,t)}return}if(e instanceof Yr){const r=e.getGeometries();for(let n=0;n<r.length;++n)w_e(i,r[n],t);return}}const u1={index:-1,endIndex:NaN};function mWe(i,e,t,r){const n=i[0],s=i[1];let o=1/0,a=-1,l=NaN;for(let u=0;u<e.targets.length;++u){const d=e.targets[u],f=d.coordinates;let p=1/0,g;for(let m=0;m<f.length-1;++m){const y=f[m],_=f[m+1],v=E_e(n,s,y,_);v.squaredDistance<p&&(p=v.squaredDistance,g=m+v.along)}p<o&&(o=p,d.ring&&e.targetIndex===u&&(d.endIndex>d.startIndex?g<d.startIndex&&(g+=f.length):d.endIndex<d.startIndex&&g>d.startIndex&&(g-=f.length)),l=g,a=u)}const c=e.targets[a];let h=c.ring;if(e.targetIndex===a&&h){const u=Id(c.coordinates,l),d=t.getPixelFromCoordinate(u);av(d,e.startPx)>r&&(h=!1)}if(h){const u=c.coordinates,d=u.length,f=c.startIndex,p=l;if(f<p){const g=K0(u,f,p);K0(u,f,p-d)<g&&(l-=d)}else{const g=K0(u,f,p);K0(u,f,p+d)<g&&(l+=d)}}return u1.index=a,u1.endIndex=l,u1}function J0(i,e,t,r){const n=i[0],s=i[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],h=E_e(n,s,l,c);if(h.squaredDistance===0){const u=o+h.along;r.push({coordinates:e,ring:t,startIndex:u,endIndex:u});return}}}const d1={along:0,squaredDistance:0};function E_e(i,e,t,r){const n=t[0],s=t[1],o=r[0],a=r[1],l=o-n,c=a-s;let h=0,u=n,d=s;return(l!==0||c!==0)&&(h=tt(((i-n)*l+(e-s)*c)/(l*l+c*c),0,1),u+=l*h,d+=c*h),d1.along=h,d1.squaredDistance=Kf(nl(i,e,u,d),10),d1}function Id(i,e){const t=i.length;let r=Math.floor(e);const n=e-r;r>=t?r-=t:r<0&&(r+=t);let s=r+1;s>=t&&(s-=t);const o=i[r],a=o[0],l=o[1],c=i[s],h=c[0]-a,u=c[1]-l;return[a+h*n,l+u*n]}class yWe extends bu{constructor(e){const t=e;t.stopDown||(t.stopDown=Yf),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=bWe(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:ff,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const n=this.mode_;if(n==="Circle")r=function(s,o,a){const l=o||new cx([NaN,NaN]),c=Ki(s[0]),h=xf(c,Ki(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(h),this.geometryLayout_),l};else{let s;n==="Point"?s=$i:n==="LineString"?s=Ii:n==="Polygon"&&(s=tr),r=function(o,a,l){return a?n==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new kc({source:new Oc({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:_We(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:WT,this.freehandCondition_,e.freehand?this.freehandCondition_=_v:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Xme,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(TS.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=_v:t=e:t=D$e,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Ie.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Dt.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Dt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Dt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===Dt.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===Dt.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Dt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Dt.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new za(Dt.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Vr([r,n]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=gWe(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const r=e.startIndex<=e.endIndex,n=e.startIndex<=t;r===n?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),r=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),r=n-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;const n=[];if(t<r){const s=Math.ceil(t);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)n.push(Ld(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)n.push(Ld(e.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&av(t.startPx,e.pixel)<this.snapTolerance_)return;const r=mWe(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}t.targetIndex=r.index;const n=t.targets[t.targetIndex];n.endIndex=r.endIndex;const s=Id(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,r=e.pixel,n=t[0]-r[0],s=t[1]-r[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const h=s[l],u=a.getPixelFromCoordinate(h),d=e[0]-u[0],f=e[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(d*d+f*f)<=p,r){this.finishCoordinate_=h;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new mi(new $i(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new mi);const t=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new Ii(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const t=this.getMap().getView().getProjection(),r=pm(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new mi(new Ii(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new mi,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new X0(Y0.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),r=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=pm(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let n,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let o;if(n==="LineString"||n==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const r=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,n),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new oo([t])):this.type_==="MultiLineString"?e.setGeometry(new vn([t])):this.type_==="MultiPolygon"&&e.setGeometry(new os([t])),this.dispatchEvent(new X0(Y0.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new X0(Y0.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&n.shift(),n.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new mi(new $i(n)),this.updateSketchFeatures_(),this.dispatchEvent(new X0(Y0.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function _We(){const i=Ome();return function(e,t){return i[e.getGeometry().getType()]}}function vWe(){return function(i,e,t){const r=Vr([i[0],i[i.length-1]].map(function(s){return Ki(s)})),n=[[Qh(r),Qf(r),ep(r),No(r),Qh(r)]];return e?e.setCoordinates(n):e=new tr(n),e}}function bWe(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const xWe=yWe;function wWe(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var ou=1,au=2,Jd=3,EWe=4,XS=5,Hce=6378137,SWe=6356752314e-3,Wce=.0066943799901413165,Ug=484813681109536e-20,me=Math.PI/2,CWe=.16666666666666666,TWe=.04722222222222222,AWe=.022156084656084655,Se=1e-10,Ur=.017453292519943295,ca=57.29577951308232,ai=Math.PI/4,Im=Math.PI*2,or=3.14159265359,cs={};cs.greenwich=0;cs.lisbon=-9.131906111111;cs.paris=2.337229166667;cs.bogota=-74.080916666667;cs.madrid=-3.687938888889;cs.rome=12.452333333333;cs.bern=7.439583333333;cs.jakarta=106.807719444444;cs.ferro=-17.666666666667;cs.brussels=4.367975;cs.stockholm=18.058277777778;cs.athens=23.7163375;cs.oslo=10.722916666667;const MWe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Yce=/[\s_\-\/\(\)]/g;function Ac(i,e){if(i[e])return i[e];for(var t=Object.keys(i),r=e.toLowerCase().replace(Yce,""),n=-1,s,o;++n<t.length;)if(s=t[n],o=s.toLowerCase().replace(Yce,""),o===r)return i[s]}function ZS(i){var e={},t=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Ur},lat_1:function(a){e.lat1=a*Ur},lat_2:function(a){e.lat2=a*Ur},lat_ts:function(a){e.lat_ts=a*Ur},lon_0:function(a){e.long0=a*Ur},lon_1:function(a){e.long1=a*Ur},lon_2:function(a){e.long2=a*Ur},alpha:function(a){e.alpha=parseFloat(a)*Ur},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*Ur},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Ac(MWe,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Ur},pm:function(a){var l=Ac(cs,a);e.from_greenwich=(l||parseFloat(a))*Ur},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(r in t)n=t[r],r in o?(s=o[r],typeof s=="function"?s(n):e[s]=n):e[r]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Pm=1,S_e=2,C_e=3,zv=4,T_e=5,cA=-1,RWe=/\s/,LWe=/[A-Za-z]/,IWe=/[A-Za-z84_]/,Lx=/[,\]]/,A_e=/[\d\.E\-\+]/;function Ml(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Pm}Ml.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==zv)for(;RWe.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Pm:return this.neutral(i);case S_e:return this.keyword(i);case zv:return this.quoted(i);case T_e:return this.afterquote(i);case C_e:return this.number(i);case cA:return}};Ml.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=zv;return}if(Lx.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};Ml.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Pm;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Pm,this.currentObject=this.stack.pop(),this.currentObject||(this.state=cA);return}};Ml.prototype.number=function(i){if(A_e.test(i)){this.word+=i;return}if(Lx.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};Ml.prototype.quoted=function(i){if(i==='"'){this.state=T_e;return}this.word+=i};Ml.prototype.keyword=function(i){if(IWe.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Pm;return}if(Lx.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};Ml.prototype.neutral=function(i){if(LWe.test(i)){this.word=i,this.state=S_e;return}if(i==='"'){this.word="",this.state=zv;return}if(A_e.test(i)){this.word=i,this.state=C_e;return}if(Lx.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};Ml.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===cA)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function PWe(i){var e=new Ml(i);return e.output()}function Xce(i,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:i,n=t.reduce(function(s,o){return Pd(o,s),s},r);e&&(i[e]=n)}function Pd(i,e){if(!Array.isArray(i)){e[i]=!0;return}var t=i.shift();if(t==="PARAMETER"&&(t=i.shift()),i.length===1){if(Array.isArray(i[0])){e[t]={},Pd(i[0],e[t]);return}e[t]=i[0];return}if(!i.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=i;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(i);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Pd(i[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Pd(i[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],Xce(e,t,i);return;default:for(r=-1;++r<i.length;)if(!Array.isArray(i[r]))return Pd(i,e[t]);return Xce(e,t,i)}}var kWe=.017453292519943295;function OWe(i,e){var t=e[0],r=e[1];!(t in i)&&r in i&&(i[t]=i[r],e.length===3&&(i[t]=e[2](i[t])))}function Zo(i){return i*kWe}function DWe(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,r=i.AXIS.length;t<r;++t){var n=[i.AXIS[t][0].toLowerCase(),i.AXIS[t][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?e+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?e+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?e+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(c){var h=i.to_meter||1;return c*h}var a=function(c){return OWe(i,c)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Zo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Zo],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Zo],["lat0","latitude_of_origin",Zo],["lat0","standard_parallel_1",Zo],["lat1","standard_parallel_1",Zo],["lat2","standard_parallel_2",Zo],["azimuth","Azimuth"],["alpha","azimuth",Zo],["srsCode","name"]];l.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=Zo(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=Zo(i.lat0>0?90:-90))}function M_e(i){var e=PWe(i),t=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",t]);var n={};return Pd(e,n),DWe(n),n}function An(i){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?An[i]=ZS(arguments[1]):An[i]=M_e(arguments[1]):An[i]=t}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(r){Array.isArray(r)?An.apply(e,r):An(r)});if(typeof i=="string"){if(i in An)return An[i]}else"EPSG"in i?An["EPSG:"+i.EPSG]=i:"ESRI"in i?An["ESRI:"+i.ESRI]=i:"IAU2000"in i?An["IAU2000:"+i.IAU2000]=i:console.log(i);return}}wWe(An);function FWe(i){return typeof i=="string"}function NWe(i){return i in An}var $We=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function BWe(i){return $We.some(function(e){return i.indexOf(e)>-1})}var jWe=["3857","900913","3785","102113"];function zWe(i){var e=Ac(i,"authority");if(e){var t=Ac(e,"epsg");return t&&jWe.indexOf(t)>-1}}function GWe(i){var e=Ac(i,"extension");if(e)return Ac(e,"proj4")}function UWe(i){return i[0]==="+"}function VWe(i){if(FWe(i)){if(NWe(i))return An[i];if(BWe(i)){var e=M_e(i);if(zWe(e))return An["EPSG:3857"];var t=GWe(e);return t?ZS(t):e}if(UWe(i))return ZS(i)}else return i}function Zce(i,e){i=i||{};var t,r;if(!e)return i;for(r in e)t=e[r],t!==void 0&&(i[r]=t);return i}function Ea(i,e,t){var r=i*e;return t/Math.sqrt(1-r*r)}function Sy(i){return i<0?-1:1}function ke(i){return Math.abs(i)<=or?i:i-Sy(i)*Im}function Lo(i,e,t){var r=i*t,n=.5*i;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(me-e))/r}function km(i,e){for(var t=.5*i,r,n,s=me-2*Math.atan(e),o=0;o<=15;o++)if(r=i*Math.sin(s),n=me-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function qWe(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ea(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function HWe(i){var e=i.x,t=i.y;if(t*ca>90&&t*ca<-90&&e*ca>180&&e*ca<-180)return null;var r,n;if(Math.abs(Math.abs(t)-me)<=Se)return null;if(this.sphere)r=this.x0+this.a*this.k0*ke(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ai+.5*t));else{var s=Math.sin(t),o=Lo(this.e,t,s);r=this.x0+this.a*this.k0*ke(e-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return i.x=r,i.y=n,i}function WWe(i){var e=i.x-this.x0,t=i.y-this.y0,r,n;if(this.sphere)n=me-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(n=km(this.e,s),n===-9999)return null}return r=ke(this.long0+e/(this.a*this.k0)),i.x=r,i.y=n,i}var YWe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const XWe={init:qWe,forward:HWe,inverse:WWe,names:YWe};function ZWe(){}function Kce(i){return i}var KWe=["longlat","identity"];const JWe={init:ZWe,forward:Kce,inverse:Kce,names:KWe};var QWe=[XWe,JWe],R_={},Gv=[];function R_e(i,e){var t=Gv.length;return i.names?(Gv[t]=i,i.names.forEach(function(r){R_[r.toLowerCase()]=t}),this):(console.log(e),!0)}function e9e(i){if(!i)return!1;var e=i.toLowerCase();if(typeof R_[e]<"u"&&Gv[R_[e]])return Gv[R_[e]]}function t9e(){QWe.forEach(R_e)}const i9e={start:t9e,add:R_e,get:e9e};var ut={};ut.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ut.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ut.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ut.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ut.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};ut.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ut.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ut.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};ut.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ut.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ut.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ut.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};ut.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ut.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};ut.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};ut.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};ut.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};ut.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ut.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ut.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};ut.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};ut.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};ut.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};ut.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};ut.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ut.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ut.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ut.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ut.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ut.hough={a:6378270,rf:297,ellipseName:"Hough"};ut.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ut.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ut.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ut.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ut.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};ut.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ut.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ut.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};ut.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};ut.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ut.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ut.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var r9e=ut.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ut.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function n9e(i,e,t,r){var n=i*i,s=e*e,o=(n-s)/n,a=0;r?(i*=1-o*(CWe+o*(TWe+o*AWe)),n=i*i,o=0):a=Math.sqrt(o);var l=(n-s)/s;return{es:o,e:a,ep2:l}}function s9e(i,e,t,r,n){if(!i){var s=Ac(ut,r);s||(s=r9e),i=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*i),(t===0||Math.abs(i-e)<Se)&&(n=!0,e=i),{a:i,b:e,rf:t,sphere:n}}var Cr={};Cr.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Cr.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Cr.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Cr.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Cr.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Cr.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Cr.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Cr.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Cr.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Cr.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Cr.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Cr.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Cr.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Cr.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Cr.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Cr.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Cr.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Cr.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function o9e(i,e,t,r,n,s,o){var a={};return i===void 0||i==="none"?a.datum_type=XS:a.datum_type=EWe,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=ou),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=au,a.datum_params[3]*=Ug,a.datum_params[4]*=Ug,a.datum_params[5]*=Ug,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Jd,a.grids=o),a.a=t,a.b=r,a.es=n,a.ep2=s,a}var L_e={};function a9e(i,e){var t=new DataView(e),r=h9e(t),n=u9e(t,r),s=d9e(t,n,r),o={header:n,subgrids:s};return L_e[i]=o,o}function l9e(i){if(i===void 0)return null;var e=i.split(",");return e.map(c9e)}function c9e(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:L_e[i]||null,isNull:!1}}function kd(i){return i/3600*Math.PI/180}function h9e(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function u9e(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:KS(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function KS(i,e,t){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,t)))}function d9e(i,e,t){for(var r=176,n=[],s=0;s<e.nSubgrids;s++){var o=p9e(i,r,t),a=g9e(i,r,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[kd(o.lowerLongitude),kd(o.lowerLatitude)],del:[kd(o.longitudeInterval),kd(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:f9e(a)}),r+=176+o.gridNodeCount*16}return n}function f9e(i){return i.map(function(e){return[kd(e.longitudeShift),kd(e.latitudeShift)]})}function p9e(i,e,t){return{name:KS(i,e+8,e+16).trim(),parent:KS(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,t),upperLatitude:i.getFloat64(e+88,t),lowerLongitude:i.getFloat64(e+104,t),upperLongitude:i.getFloat64(e+120,t),latitudeInterval:i.getFloat64(e+136,t),longitudeInterval:i.getFloat64(e+152,t),gridNodeCount:i.getInt32(e+168,t)}}function g9e(i,e,t,r){for(var n=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(n+a*s,r),longitudeShift:i.getFloat32(n+a*s+4,r),latitudeAccuracy:i.getFloat32(n+a*s+8,r),longitudeAccuracy:i.getFloat32(n+a*s+12,r)};o.push(l)}return o}function ga(i,e){if(!(this instanceof ga))return new ga(i);e=e||function(c){if(c)throw c};var t=VWe(i);if(typeof t!="object"){e(i);return}var r=ga.projections.get(t.projName);if(!r){e(i);return}if(t.datumCode&&t.datumCode!=="none"){var n=Ac(Cr,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=s9e(t.a,t.b,t.rf,t.ellps,t.sphere),o=n9e(s.a,s.b,s.rf,t.R_A),a=l9e(t.nadgrids),l=t.datum||o9e(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);Zce(this,t),Zce(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}ga.projections=i9e;ga.projections.start();function m9e(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===ou?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===au?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function I_e(i,e,t){var r=i.x,n=i.y,s=i.z?i.z:0,o,a,l,c;if(n<-me&&n>-1.001*me)n=-me;else if(n>me&&n<1.001*me)n=me;else{if(n<-me)return{x:-1/0,y:-1/0,z:i.z};if(n>me)return{x:1/0,y:1/0,z:i.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),c=Math.cos(n),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-e)+s)*a}}function P_e(i,e,t,r){var n=1e-12,s=n*n,o=30,a,l,c,h,u,d,f,p,g,m,y,_,v,x=i.x,w=i.y,T=i.z?i.z:0,A,R,L;if(a=Math.sqrt(x*x+w*w),l=Math.sqrt(x*x+w*w+T*T),a/t<n){if(A=0,l/t<n)return R=me,L=-r,{x:i.x,y:i.y,z:i.z}}else A=Math.atan2(w,x);c=T/l,h=a/l,u=1/Math.sqrt(1-e*(2-e)*h*h),p=h*(1-e)*u,g=c*u,v=0;do v++,f=t/Math.sqrt(1-e*g*g),L=a*p+T*g-f*(1-e*g*g),d=e*f/(f+L),u=1/Math.sqrt(1-d*(2-d)*h*h),m=h*(1-d)*u,y=c*u,_=y*p-m*g,p=m,g=y;while(_*_>s&&v<o);return R=Math.atan(y/Math.abs(m)),{x:A,y:R,z:L}}function y9e(i,e,t){if(e===ou)return{x:i.x+t[0],y:i.y+t[1],z:i.z+t[2]};if(e===au){var r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6];return{x:c*(i.x-l*i.y+a*i.z)+r,y:c*(l*i.x+i.y-o*i.z)+n,z:c*(-a*i.x+o*i.y+i.z)+s}}}function _9e(i,e,t){if(e===ou)return{x:i.x-t[0],y:i.y-t[1],z:i.z-t[2]};if(e===au){var r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=(i.x-r)/c,u=(i.y-n)/c,d=(i.z-s)/c;return{x:h+l*u-a*d,y:-l*h+u+o*d,z:a*h-o*u+d}}}function Q0(i){return i===ou||i===au}function v9e(i,e,t){if(m9e(i,e)||i.datum_type===XS||e.datum_type===XS)return t;var r=i.a,n=i.es;if(i.datum_type===Jd){var s=Jce(i,!1,t);if(s!==0)return;r=Hce,n=Wce}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Jd&&(o=Hce,a=SWe,l=Wce),n===l&&r===o&&!Q0(i.datum_type)&&!Q0(e.datum_type))return t;if(t=I_e(t,n,r),Q0(i.datum_type)&&(t=y9e(t,i.datum_type,i.datum_params)),Q0(e.datum_type)&&(t=_9e(t,e.datum_type,e.datum_params)),t=P_e(t,l,o,a),e.datum_type===Jd){var c=Jce(e,!0,t);if(c!==0)return}return t}function Jce(i,e,t){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(s.push(a.name),a.isNull){n=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,h=l.length;c<h;c++){var u=l[c],d=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,f=u.ll[0]-d,p=u.ll[1]-d,g=u.ll[0]+(u.lim[0]-1)*u.del[0]+d,m=u.ll[1]+(u.lim[1]-1)*u.del[1]+d;if(!(p>r.y||f>r.x||m<r.y||g<r.x)&&(n=b9e(r,e,u),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*ca+" "+r.y*ca+" tried: '"+s+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function b9e(i,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return r;var n={x:i.x,y:i.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=ke(n.x-Math.PI)+Math.PI;var s=Qce(n,t);if(e){if(isNaN(s.x))return r;s.x=n.x-s.x,s.y=n.y-s.y;var o=9,a=1e-12,l,c;do{if(c=Qce(s,t),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(c.x+s.x),y:n.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ke(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=i.x+s.x,r.y=i.y+s.y);return r}function Qce(i,e){var t={x:i.x/e.del[0],y:i.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var h={x:e.cvs[o][0],y:e.cvs[o][1]},u=n.x*n.y,d=n.x*(1-n.y),f=(1-n.x)*(1-n.y),p=(1-n.x)*n.y;return s.x=f*a.x+d*l.x+p*h.x+u*c.x,s.y=f*a.y+d*l.y+p*h.y+u*c.y,s}function ehe(i,e,t){var r=t.x,n=t.y,s=t.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=r,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(o=n,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),i.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":t[a]!==void 0&&(c.z=o);break;case"d":t[a]!==void 0&&(c.z=-o);break;default:return null}return c}function k_e(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function x9e(i){the(i.x),the(i.y)}function the(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function w9e(i,e){return(i.datum.datum_type===ou||i.datum.datum_type===au||i.datum.datum_type===Jd)&&e.datumCode!=="WGS84"||(e.datum.datum_type===ou||e.datum.datum_type===au||e.datum.datum_type===Jd)&&i.datumCode!=="WGS84"}function Uv(i,e,t,r){var n;Array.isArray(t)?t=k_e(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(x9e(t),i.datum&&e.datum&&w9e(i,e)&&(n=new ga("WGS84"),t=Uv(i,n,t,r),i=n),r&&i.axis!=="enu"&&(t=ehe(i,!1,t)),i.projName==="longlat")t={x:t.x*Ur,y:t.y*Ur,z:t.z||0};else if(i.to_meter&&(t={x:t.x*i.to_meter,y:t.y*i.to_meter,z:t.z||0}),t=i.inverse(t),!t)return;if(i.from_greenwich&&(t.x+=i.from_greenwich),t=v9e(i.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*ca,y:t.y*ca,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?ehe(e,!0,t):(t&&!s&&delete t.z,t)}var ihe=ga("WGS84");function f1(i,e,t,r){var n,s,o;return Array.isArray(t)?(n=Uv(i,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.splice(3)):[n.x,n.y,t[2]].concat(t.splice(3)):[n.x,n.y].concat(t.splice(2)):[n.x,n.y]):(s=Uv(i,e,t,r),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function rhe(i){return i instanceof ga?i:i.oProj?i.oProj:ga(i)}function bn(i,e,t){i=rhe(i);var r=!1,n;return typeof e>"u"?(e=i,i=ihe,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=i,i=ihe,r=!0),e=rhe(e),t?f1(i,e,t):(n={forward:function(s,o){return f1(i,e,s,o)},inverse:function(s,o){return f1(e,i,s,o)}},r&&(n.oProj=e),n)}var nhe=6,O_e="AJSAJS",D_e="AFAFAF",Od=65,Vn=73,Gs=79,mg=86,yg=90;const E9e={forward:F_e,inverse:S9e,toPoint:N_e};function F_e(i,e){return e=e||5,A9e(C9e({lat:i[1],lon:i[0]}),e)}function S9e(i){var e=hA(B_e(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function N_e(i){var e=hA(B_e(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function p1(i){return i*(Math.PI/180)}function she(i){return 180*(i/Math.PI)}function C9e(i){var e=i.lat,t=i.lon,r=6378137,n=.00669438,s=.9996,o,a,l,c,h,u,d,f=p1(e),p=p1(t),g,m;m=Math.floor((t+180)/6)+1,t===180&&(m=60),e>=56&&e<64&&t>=3&&t<12&&(m=32),e>=72&&e<84&&(t>=0&&t<9?m=31:t>=9&&t<21?m=33:t>=21&&t<33?m=35:t>=33&&t<42&&(m=37)),o=(m-1)*6-180+3,g=p1(o),a=n/(1-n),l=r/Math.sqrt(1-n*Math.sin(f)*Math.sin(f)),c=Math.tan(f)*Math.tan(f),h=a*Math.cos(f)*Math.cos(f),u=Math.cos(f)*(p-g),d=r*((1-n/4-3*n*n/64-5*n*n*n/256)*f-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*f)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*f)-35*n*n*n/3072*Math.sin(6*f));var y=s*l*(u+(1-c+h)*u*u*u/6+(5-18*c+c*c+72*h-58*a)*u*u*u*u*u/120)+5e5,_=s*(d+l*Math.tan(f)*(u*u/2+(5-c+9*h+4*h*h)*u*u*u*u/24+(61-58*c+c*c+600*h-330*a)*u*u*u*u*u*u/720));return e<0&&(_+=1e7),{northing:Math.round(_),easting:Math.round(y),zoneNumber:m,zoneLetter:T9e(e)}}function hA(i){var e=i.northing,t=i.easting,r=i.zoneLetter,n=i.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,u,d,f,p,g,m,y,_,v=t-5e5,x=e;r<"N"&&(x-=1e7),m=(n-1)*6-180+3,l=a/(1-a),g=x/s,y=g/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),_=y+(3*c/2-27*c*c*c/32)*Math.sin(2*y)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*y)+151*c*c*c/96*Math.sin(6*y),h=o/Math.sqrt(1-a*Math.sin(_)*Math.sin(_)),u=Math.tan(_)*Math.tan(_),d=l*Math.cos(_)*Math.cos(_),f=o*(1-a)/Math.pow(1-a*Math.sin(_)*Math.sin(_),1.5),p=v/(h*s);var w=_-h*Math.tan(_)/f*(p*p/2-(5+3*u+10*d-4*d*d-9*l)*p*p*p*p/24+(61+90*u+298*d+45*u*u-252*l-3*d*d)*p*p*p*p*p*p/720);w=she(w);var T=(p-(1+2*u+d)*p*p*p/6+(5-2*d+28*u-3*d*d+8*l+24*u*u)*p*p*p*p*p/120)/Math.cos(_);T=m+she(T);var A;if(i.accuracy){var R=hA({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});A={top:R.lat,right:R.lon,bottom:w,left:T}}else A={lat:w,lon:T};return A}function T9e(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function A9e(i,e){var t="00000"+i.easting,r="00000"+i.northing;return i.zoneNumber+i.zoneLetter+M9e(i.easting,i.northing,i.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function M9e(i,e,t){var r=$_e(t),n=Math.floor(i/1e5),s=Math.floor(e/1e5)%20;return R9e(n,s,r)}function $_e(i){var e=i%nhe;return e===0&&(e=nhe),e}function R9e(i,e,t){var r=t-1,n=O_e.charCodeAt(r),s=D_e.charCodeAt(r),o=n+i-1,a=s+e,l=!1;o>yg&&(o=o-yg+Od-1,l=!0),(o===Vn||n<Vn&&o>Vn||(o>Vn||n<Vn)&&l)&&o++,(o===Gs||n<Gs&&o>Gs||(o>Gs||n<Gs)&&l)&&(o++,o===Vn&&o++),o>yg&&(o=o-yg+Od-1),a>mg?(a=a-mg+Od-1,l=!0):l=!1,(a===Vn||s<Vn&&a>Vn||(a>Vn||s<Vn)&&l)&&a++,(a===Gs||s<Gs&&a>Gs||(a>Gs||s<Gs)&&l)&&(a++,a===Vn&&a++),a>mg&&(a=a-mg+Od-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function B_e(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,t=null,r="",n,s=0;!/[A-Z]/.test(n=i.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+i;r+=n,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;t=i.substring(s,s+=2);for(var l=$_e(o),c=L9e(t.charAt(0),l),h=I9e(t.charAt(1),l);h<P9e(a);)h+=2e6;var u=e-s;if(u%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=u/2,f=0,p=0,g,m,y,_,v;return d>0&&(g=1e5/Math.pow(10,d),m=i.substring(s,s+d),f=parseFloat(m)*g,y=i.substring(s+d),p=parseFloat(y)*g),_=f+c,v=p+h,{easting:_,northing:v,zoneLetter:a,zoneNumber:o,accuracy:g}}function L9e(i,e){for(var t=O_e.charCodeAt(e-1),r=1e5,n=!1;t!==i.charCodeAt(0);){if(t++,t===Vn&&t++,t===Gs&&t++,t>yg){if(n)throw"Bad character: "+i;t=Od,n=!0}r+=1e5}return r}function I9e(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var t=D_e.charCodeAt(e-1),r=0,n=!1;t!==i.charCodeAt(0);){if(t++,t===Vn&&t++,t===Gs&&t++,t>mg){if(n)throw"Bad character: "+i;t=Od,n=!0}r+=1e5}return r}function P9e(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function If(i,e,t){if(!(this instanceof If))return new If(i,e,t);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var r=i.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=i,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}If.fromMGRS=function(i){return new If(N_e(i))};If.prototype.toMGRS=function(i){return F_e([this.x,this.y],i)};var k9e=1,O9e=.25,ohe=.046875,ahe=.01953125,lhe=.01068115234375,D9e=.75,F9e=.46875,N9e=.013020833333333334,$9e=.007120768229166667,B9e=.3645833333333333,j9e=.005696614583333333,z9e=.3076171875;function j_e(i){var e=[];e[0]=k9e-i*(O9e+i*(ohe+i*(ahe+i*lhe))),e[1]=i*(D9e-i*(ohe+i*(ahe+i*lhe)));var t=i*i;return e[2]=t*(F9e-i*(N9e+i*$9e)),t*=i,e[3]=t*(B9e-i*j9e),e[4]=t*i*z9e,e}function Ix(i,e,t,r){return t*=e,e*=e,r[0]*i-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var G9e=20;function z_e(i,e,t){for(var r=1/(1-e),n=i,s=G9e;s;--s){var o=Math.sin(n),a=1-e*o*o;if(a=(Ix(n,o,Math.cos(n),t)-i)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<Se)return n}return n}function U9e(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=j_e(this.es),this.ml0=Ix(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function V9e(i){var e=i.x,t=i.y,r=ke(e-this.long0),n,s,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var h=l*r,u=Math.pow(h,2),d=this.ep2*Math.pow(l,2),f=Math.pow(d,2),p=Math.abs(l)>Se?Math.tan(t):0,g=Math.pow(p,2),m=Math.pow(g,2);n=1-this.es*Math.pow(a,2),h=h/Math.sqrt(n);var y=Ix(t,a,l,this.en);s=this.a*(this.k0*h*(1+u/6*(1-g+d+u/20*(5-18*g+m+14*d-58*g*d+u/42*(61+179*m-m*g-479*g)))))+this.x0,o=this.a*(this.k0*(y-this.ml0+a*r*h/2*(1+u/12*(5-g+9*d+4*f+u/30*(61+m-58*g+270*d-330*g*d+u/56*(1385+543*m-m*g-3111*g))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<Se)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>Se)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=s,i.y=o,i}function q9e(i){var e,t,r,n,s=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=z_e(e,this.es,this.en),Math.abs(t)<me){var u=Math.sin(t),d=Math.cos(t),f=Math.abs(d)>Se?Math.tan(t):0,p=this.ep2*Math.pow(d,2),g=Math.pow(p,2),m=Math.pow(f,2),y=Math.pow(m,2);e=1-this.es*Math.pow(u,2);var _=s*Math.sqrt(e)/this.k0,v=Math.pow(_,2);e=e*f,r=t-e*v/(1-this.es)*.5*(1-v/12*(5+3*m-9*p*m+p-4*g-v/30*(61+90*m-252*p*m+45*y+46*p-v/56*(1385+3633*m+4095*y+1574*y*m)))),n=ke(this.long0+_*(1-v/6*(1+2*m+p-v/20*(5+28*m+24*y+8*p*m+6*p-v/42*(61+662*m+1320*y+720*y*m))))/d)}else r=me*Sy(o),n=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,h=Math.cos(c);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&h===0?n=0:n=ke(Math.atan2(l,h)+this.long0)}return i.x=n,i.y=r,i}var H9e=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const L_={init:U9e,forward:V9e,inverse:q9e,names:H9e};function G_e(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function Hs(i,e){i=Math.abs(i),e=Math.abs(e);var t=Math.max(i,e),r=Math.min(i,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function W9e(i){var e=1+i,t=e-1;return t===0?i:i*Math.log(e)/t}function Y9e(i){var e=Math.abs(i);return e=W9e(e*(1+e/(Hs(1,e)+1))),i<0?-e:e}function uA(i,e){for(var t=2*Math.cos(2*e),r=i.length-1,n=i[r],s=0,o;--r>=0;)o=-s+t*n+i[r],s=n,n=o;return e+o*Math.sin(2*e)}function X9e(i,e){for(var t=2*Math.cos(e),r=i.length-1,n=i[r],s=0,o;--r>=0;)o=-s+t*n+i[r],s=n,n=o;return Math.sin(e)*o}function Z9e(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function U_e(i,e,t){for(var r=Math.sin(e),n=Math.cos(e),s=G_e(t),o=Z9e(t),a=2*n*o,l=-2*r*s,c=i.length-1,h=i[c],u=0,d=0,f=0,p,g;--c>=0;)p=d,g=u,d=h,u=f,h=-p+a*d-l*u+i[c],f=-g+l*d+a*u;return a=r*o,l=n*s,[a*h-l*f,a*f+l*h]}function K9e(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(L_.init.apply(this),this.forward=L_.forward,this.inverse=L_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=uA(this.cbg,this.lat0);this.Zb=-this.Qn*(r+X9e(this.gtu,2*r))}function J9e(i){var e=ke(i.x-this.long0),t=i.y;t=uA(this.cbg,t);var r=Math.sin(t),n=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(r,o*n),e=Math.atan2(s*n,Hs(r,n*o)),e=Y9e(Math.tan(e));var a=U_e(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,c=1/0),i.x=l,i.y=c,i}function Q9e(i){var e=(i.x-this.x0)*(1/this.a),t=(i.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,n;if(Math.abs(e)<=2.623395162778){var s=U_e(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(G_e(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),c=Math.cos(e);t=Math.atan2(o*c,Hs(l,c*a)),e=Math.atan2(l,c*a),r=ke(e+this.long0),n=uA(this.cgb,t)}else r=1/0,n=1/0;return i.x=r,i.y=n,i}var e7e=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const I_={init:K9e,forward:J9e,inverse:Q9e,names:e7e};function t7e(i,e){if(i===void 0){if(i=Math.floor((ke(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var i7e="etmerc";function r7e(){var i=t7e(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Ur,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,I_.init.apply(this),this.forward=I_.forward,this.inverse=I_.inverse}var n7e=["Universal Transverse Mercator System","utm"];const s7e={init:r7e,names:n7e,dependsOn:i7e};function dA(i,e){return Math.pow((1-i)/(1+i),e)}var o7e=20;function a7e(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ai)/(Math.pow(Math.tan(.5*this.lat0+ai),this.C)*dA(this.e*i,this.ratexp))}function l7e(i){var e=i.x,t=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+ai),this.C)*dA(this.e*Math.sin(t),this.ratexp))-me,i.x=this.C*e,i}function c7e(i){for(var e=1e-14,t=i.x/this.C,r=i.y,n=Math.pow(Math.tan(.5*r+ai)/this.K,1/this.C),s=o7e;s>0&&(r=2*Math.atan(n*dA(this.e*Math.sin(i.y),-.5*this.e))-me,!(Math.abs(r-i.y)<e));--s)i.y=r;return s?(i.x=t,i.y=r,i):null}var h7e=["gauss"];const fA={init:a7e,forward:l7e,inverse:c7e,names:h7e};function u7e(){fA.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function d7e(i){var e,t,r,n;return i.x=ke(i.x-this.long0),fA.forward.apply(this,[i]),e=Math.sin(i.y),t=Math.cos(i.y),r=Math.cos(i.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),i.x=n*t*Math.sin(i.x),i.y=n*(this.cosc0*e-this.sinc0*t*r),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function f7e(i){var e,t,r,n,s;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,s=Hs(i.x,i.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),n=Math.asin(t*this.sinc0+i.y*e*this.cosc0/s),r=Math.atan2(i.x*e,s*this.cosc0*t-i.y*this.sinc0*e)}else n=this.phic0,r=0;return i.x=r,i.y=n,fA.inverse.apply(this,[i]),i.x=ke(i.x+this.long0),i}var p7e=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const g7e={init:u7e,forward:d7e,inverse:f7e,names:p7e};function m7e(i,e,t){return e*=t,Math.tan(.5*(me+i))*Math.pow((1-e)/(1+e),.5*t)}function y7e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Se&&(this.k0=.5*(1+Sy(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Se&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Se&&Math.abs(Math.cos(this.lat_ts))>Se&&(this.k0=.5*this.cons*Ea(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Lo(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ea(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-me,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function _7e(i){var e=i.x,t=i.y,r=Math.sin(t),n=Math.cos(t),s,o,a,l,c,h,u=ke(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Se&&Math.abs(t+this.lat0)<=Se?(i.x=NaN,i.y=NaN,i):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(u)),i.x=this.a*s*n*Math.sin(u)+this.x0,i.y=this.a*s*(this.coslat0*r-this.sinlat0*n*Math.cos(u))+this.y0,i):(o=2*Math.atan(this.ssfn_(t,r,this.e))-me,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Se?(c=Lo(this.e,t*this.con,this.con*r),h=2*this.a*this.k0*c/this.cons,i.x=this.x0+h*Math.sin(e-this.long0),i.y=this.y0-this.con*h*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<Se?(s=2*this.a*this.k0/(1+l*Math.cos(u)),i.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(u))),i.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(u))+this.y0),i.x=s*l*Math.sin(u)+this.x0,i))}function v7e(i){i.x-=this.x0,i.y-=this.y0;var e,t,r,n,s,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=Se?(i.x=e,i.y=t,i):(t=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Se?this.lat0>0?e=ke(this.long0+Math.atan2(i.x,-1*i.y)):e=ke(this.long0+Math.atan2(i.x,i.y)):e=ke(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=e,i.y=t,i)}else if(Math.abs(this.coslat0)<=Se){if(o<=Se)return t=this.lat0,e=this.long0,i.x=e,i.y=t,i;i.x*=this.con,i.y*=this.con,r=o*this.cons/(2*this.a*this.k0),t=this.con*km(this.e,r),e=this.con*ke(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Se?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+i.y*Math.sin(n)*this.cosX0/o),e=ke(this.long0+Math.atan2(i.x*Math.sin(n),o*this.cosX0*Math.cos(n)-i.y*this.sinX0*Math.sin(n)))),t=-1*km(this.e,Math.tan(.5*(me+s)));return i.x=e,i.y=t,i}var b7e=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const x7e={init:y7e,forward:_7e,inverse:v7e,names:b7e,ssfn_:m7e};function w7e(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),t=this.a,r=this.rf,n=1/r,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function E7e(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),r=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function S7e(i){for(var e=i.x-this.x0,t=i.y-this.y0,r=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,c=s,h=-1e3,u=0;Math.abs(c-h)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=c,i}var C7e=["somerc"];const T7e={init:w7e,forward:E7e,inverse:S7e,names:C7e};var vd=1e-7;function A7e(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(t)!==-1}function M7e(){var i,e,t,r,n,s,o,a,l,c,h=0,u,d=0,f=0,p=0,g=0,m=0,y=0;this.no_off=A7e(this),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),_&&(y=this.alpha),v&&(h=this.rectified_grid_angle*Ur),_||v)d=this.longc;else if(f=this.long1,g=this.lat1,p=this.long2,m=this.lat2,Math.abs(g-m)<=vd||(i=Math.abs(g))<=vd||Math.abs(i-me)<=vd||Math.abs(Math.abs(this.lat0)-me)<=vd||Math.abs(Math.abs(m)-me)<=vd)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>Se?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),i=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/i,r=this.B*e/(t*Math.sqrt(i)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(Lo(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=n=1),_||v?(_?(u=Math.asin(Math.sin(y)/r),v||(h=y)):(u=h,y=Math.asin(r*Math.sin(u))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(u))/this.B):(s=Math.pow(Lo(this.e,g,Math.sin(g)),this.B),o=Math.pow(Lo(this.e,m,Math.sin(m)),this.B),n=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),i=f-p,i<-Math.pi?p-=Im:i>Math.pi&&(p+=Im),this.lam0=ke(.5*(f+p)-Math.atan(c*Math.tan(.5*this.B*(f-p))/l)/this.B),u=Math.atan(2*Math.sin(this.B*ke(f-this.lam0))/(n-1/n)),h=y=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(ai-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(ai+n))}function R7e(i){var e={},t,r,n,s,o,a,l,c;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-me)>Se){if(o=this.E/Math.pow(Lo(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,t=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*i.x),n=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Se)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*i.x),Math.abs(a)<vd?l=this.A*i.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else c=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function L7e(i){var e,t,r,n,s,o,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(t=i.y,e=i.x):(t=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),n=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(a)-1)<Se)l.x=0,l.y=a<0?-me:me;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=km(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var I7e=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const P7e={init:M7e,forward:R7e,inverse:L7e,names:I7e};function k7e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Se)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Ea(this.e,e,t),n=Lo(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Ea(this.e,s,o),l=Lo(this.e,this.lat2,s),c=Lo(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Se?this.ns=Math.log(r/a)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function O7e(i){var e=i.x,t=i.y;Math.abs(2*Math.abs(t)-Math.PI)<=Se&&(t=Sy(t)*(me-2*Se));var r=Math.abs(Math.abs(t)-me),n,s;if(r>Se)n=Lo(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var o=this.ns*ke(e-this.long0);return i.x=this.k0*(s*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,i}function D7e(i){var e,t,r,n,s,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),n=km(this.e,r),n===-9999)return null}else n=-me;return s=ke(l/this.ns+this.long0),i.x=s,i.y=n,i}var F7e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const N7e={init:k7e,forward:O7e,inverse:D7e,names:F7e};function $7e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function B7e(i){var e,t,r,n,s,o,a,l=i.x,c=i.y,h=ke(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function j7e(i){var e,t,r,n,s,o,a,l,c=i.x;i.x=i.y,i.y=c,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.atan2(i.y,i.x),n=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),t=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(e)),i.x=this.long0-t/this.alfa,a=e,l=0;var h=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,h+=1;while(l===0&&h<15);return h>=15?null:i}var z7e=["Krovak","krovak"];const G7e={init:$7e,forward:B7e,inverse:j7e,names:z7e};function In(i,e,t,r,n){return i*n-e*Math.sin(2*n)+t*Math.sin(4*n)-r*Math.sin(6*n)}function Cy(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Ty(i){return .375*i*(1+.25*i*(1+.46875*i))}function Ay(i){return .05859375*i*i*(1+.75*i)}function My(i){return i*i*i*(35/3072)}function Pf(i,e,t){var r=e*t;return i/Math.sqrt(1-r*r)}function mp(i){return Math.abs(i)<me?i:i-Sy(i)*Math.PI}function Vv(i,e,t,r,n){var s,o;s=i/e;for(var a=0;a<15;a++)if(o=(i-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-n*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function U7e(){this.sphere||(this.e0=Cy(this.es),this.e1=Ty(this.es),this.e2=Ay(this.es),this.e3=My(this.es),this.ml0=this.a*In(this.e0,this.e1,this.e2,this.e3,this.lat0))}function V7e(i){var e,t,r=i.x,n=i.y;if(r=ke(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=Pf(this.a,this.e,s),l=Math.tan(n)*Math.tan(n),c=r*Math.cos(n),h=c*c,u=this.es*o*o/(1-this.es),d=this.a*In(this.e0,this.e1,this.e2,this.e3,n);e=a*c*(1-h*l*(1/6-(8-l+8*u)*h/120)),t=d-this.ml0+a*s/o*h*(.5+(5-l+6*u)*h/24)}return i.x=e+this.x0,i.y=t+this.y0,i}function q7e(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,r,n;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=Vv(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-me)<=Se)return i.x=this.long0,i.y=me,t<0&&(i.y*=-1),i;var l=Pf(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),u=e*this.a/l,d=u*u;r=a-l*Math.tan(a)/c*u*u*(.5-(1+3*h)*u*u/24),n=u*(1-d*(h/3+(1+3*h)*h*d/15))/Math.cos(a)}return i.x=ke(n+this.long0),i.y=mp(r),i}var H7e=["Cassini","Cassini_Soldner","cass"];const W7e={init:U7e,forward:V7e,inverse:q7e,names:H7e};function gc(i,e){var t;return i>1e-7?(t=i*e,(1-i*i)*(e/(1-t*t)-.5/i*Math.log((1-t)/(1+t)))):2*e}var Y7e=1,X7e=2,Z7e=3,K7e=4;function J7e(){var i=Math.abs(this.lat0);if(Math.abs(i-me)<Se?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<Se?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=gc(this.e,1),this.mmf=.5/(1-this.es),this.apa=aYe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=gc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Q7e(i){var e,t,r,n,s,o,a,l,c,h,u=i.x,d=i.y;if(u=ke(u-this.long0),this.sphere){if(s=Math.sin(d),h=Math.cos(d),r=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+h*r:1+this.sinph0*s+this.cosph0*h*r,t<=Se)return null;t=Math.sqrt(2/t),e=t*h*Math.sin(u),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Se)return null;t=ai-d*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(u),t*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(u),n=Math.sin(u),s=Math.sin(d),o=gc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=me+d,o=this.qp-o;break;case this.S_POLE:c=d-me,o=this.qp+o;break}if(Math.abs(c)<Se)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?t=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):t=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*n,t=r*(this.mode===this.S_POLE?c:-c)):e=t=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*t+this.y0,i}function eYe(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,r,n,s,o,a,l,c;if(this.sphere){var h=0,u,d=0;if(u=Math.sqrt(e*e+t*t),n=u*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=Se?0:Math.asin(t*d/u),e*=d,t=h*u;break;case this.OBLIQ:n=Math.abs(u)<=Se?this.lat0:Math.asin(h*this.sinph0+t*d*this.cosph0/u),e*=d*this.cosph0,t=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:t=-t,n=me-n;break;case this.S_POLE:n-=me;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Se)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+t*o*this.cosb1/l,a=this.qp*c,t=l*this.cosb1*s-t*this.sinb1*o):(c=t*o/l,a=this.qp*c,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return i.x=this.long0,i.y=this.lat0,i;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,t),n=lYe(Math.asin(c),this.apa)}return i.x=ke(this.long0+r),i.y=n,i}var tYe=.3333333333333333,iYe=.17222222222222222,rYe=.10257936507936508,nYe=.06388888888888888,sYe=.0664021164021164,oYe=.016415012942191543;function aYe(i){var e,t=[];return t[0]=i*tYe,e=i*i,t[0]+=e*iYe,t[1]=e*nYe,e*=i,t[0]+=e*rYe,t[1]+=e*sYe,t[2]=e*oYe,t}function lYe(i,e){var t=i+i;return i+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var cYe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const hYe={init:J7e,forward:Q7e,inverse:eYe,names:cYe,S_POLE:Y7e,N_POLE:X7e,EQUIT:Z7e,OBLIQ:K7e};function Mc(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function uYe(){Math.abs(this.lat1+this.lat2)<Se||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ea(this.e3,this.sin_po,this.cos_po),this.qs1=gc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ea(this.e3,this.sin_po,this.cos_po),this.qs2=gc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=gc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Se?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function dYe(i){var e=i.x,t=i.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=gc(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ke(e-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return i.x=o,i.y=a,i}function fYe(i){var e,t,r,n,s,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),r=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),r=-1),n=0,e!==0&&(n=Math.atan2(r*i.x,r*i.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,t)),s=ke(n/this.ns0+this.long0),i.x=s,i.y=o,i}function pYe(i,e){var t,r,n,s,o,a=Mc(.5*e);if(i<Se)return a;for(var l=i*i,c=1;c<=25;c++)if(t=Math.sin(a),r=Math.cos(a),n=i*t,s=1-n*n,o=.5*s*s/r*(e/(1-l)-t/s+.5/i*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var gYe=["Albers_Conic_Equal_Area","Albers","aea"];const mYe={init:uYe,forward:dYe,inverse:fYe,names:gYe,phi1z:pYe};function yYe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function _Ye(i){var e,t,r,n,s,o,a,l,c=i.x,h=i.y;return r=ke(c-this.long0),e=Math.sin(h),t=Math.cos(h),n=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*n,s=1,o>0||Math.abs(o)<=Se?(a=this.x0+this.a*s*t*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)/o):(a=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function vYe(i){var e,t,r,n,s,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),r=Math.cos(n),o=Mc(r*this.sin_p14+i.y*t*this.cos_p14/e),s=Math.atan2(i.x*t,e*this.cos_p14*r-i.y*this.sin_p14*t),s=ke(this.long0+s)):(o=this.phic0,s=0),i.x=s,i.y=o,i}var bYe=["gnom"];const xYe={init:yYe,forward:_Ye,inverse:vYe,names:bYe};function wYe(i,e){var t=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*me:me;for(var r=Math.asin(.5*e),n,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=i*s,n=Math.pow(1-a*a,2)/(2*o)*(e/(1-i*i)-s/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function EYe(){this.sphere||(this.k0=Ea(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function SYe(i){var e=i.x,t=i.y,r,n,s=ke(e-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=gc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return i.x=r,i.y=n,i}function CYe(i){i.x-=this.x0,i.y-=this.y0;var e,t;return this.sphere?(e=ke(this.long0+i.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(t=wYe(this.e,2*i.y*this.k0/this.a),e=ke(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=t,i}var TYe=["cea"];const AYe={init:EYe,forward:SYe,inverse:CYe,names:TYe};function MYe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function RYe(i){var e=i.x,t=i.y,r=ke(e-this.long0),n=mp(t-this.lat0);return i.x=this.x0+this.a*r*this.rc,i.y=this.y0+this.a*n,i}function LYe(i){var e=i.x,t=i.y;return i.x=ke(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=mp(this.lat0+(t-this.y0)/this.a),i}var IYe=["Equirectangular","Equidistant_Cylindrical","eqc"];const PYe={init:MYe,forward:RYe,inverse:LYe,names:IYe};var che=20;function kYe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cy(this.es),this.e1=Ty(this.es),this.e2=Ay(this.es),this.e3=My(this.es),this.ml0=this.a*In(this.e0,this.e1,this.e2,this.e3,this.lat0)}function OYe(i){var e=i.x,t=i.y,r,n,s,o=ke(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=Se?(r=this.a*o,n=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),n=this.a*(mp(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Se)r=this.a*o,n=-1*this.ml0;else{var a=Pf(this.a,this.e,Math.sin(t))/Math.tan(t);r=a*Math.sin(s),n=this.a*In(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return i.x=r+this.x0,i.y=n+this.y0,i}function DYe(i){var e,t,r,n,s,o,a,l,c;if(r=i.x-this.x0,n=i.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Se)e=ke(r/this.a+this.long0),t=0;else{o=this.lat0+n/this.a,a=r*r/this.a/this.a+o*o,l=o;var h;for(s=che;s;--s)if(h=Math.tan(l),c=-1*(o*(l*h+1)-l-.5*(l*l+a)*h)/((l-o)/h-1),l+=c,Math.abs(c)<=Se){t=l;break}e=ke(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(n+this.ml0)<=Se)t=0,e=ke(this.long0+r/this.a);else{o=(this.ml0+n)/this.a,a=r*r/this.a/this.a+o*o,l=o;var u,d,f,p,g;for(s=che;s;--s)if(g=this.e*Math.sin(l),u=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*In(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=d/this.a,c=(o*(u*p+1)-p-.5*u*(p*p+a))/(this.es*Math.sin(2*l)*(p*p+a-2*o*p)/(4*u)+(o-p)*(u*f-2/Math.sin(2*l))-f),l-=c,Math.abs(c)<=Se){t=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ke(this.long0+Math.asin(r*u/this.a)/Math.sin(t))}return i.x=e,i.y=t,i}var FYe=["Polyconic","poly"];const NYe={init:kYe,forward:OYe,inverse:DYe,names:FYe};function $Ye(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function BYe(i){var e,t=i.x,r=i.y,n=r-this.lat0,s=t-this.long0,o=n/Ug*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var h=c,u=a,d=1,f=0,p,g,m=0,y=0;for(e=1;e<=6;e++)p=d*h-f*u,g=f*h+d*u,d=p,f=g,m=m+this.B_re[e]*d-this.B_im[e]*f,y=y+this.B_im[e]*d+this.B_re[e]*f;return i.x=y*this.a+this.x0,i.y=m*this.a+this.y0,i}function jYe(i){var e,t=i.x,r=i.y,n=t-this.x0,s=r-this.y0,o=s/this.a,a=n/this.a,l=1,c=0,h,u,d=0,f=0;for(e=1;e<=6;e++)h=l*o-c*a,u=c*o+l*a,l=h,c=u,d=d+this.C_re[e]*l-this.C_im[e]*c,f=f+this.C_im[e]*l+this.C_re[e]*c;for(var p=0;p<this.iterations;p++){var g=d,m=f,y,_,v=o,x=a;for(e=2;e<=6;e++)y=g*d-m*f,_=m*d+g*f,g=y,m=_,v=v+(e-1)*(this.B_re[e]*g-this.B_im[e]*m),x=x+(e-1)*(this.B_im[e]*g+this.B_re[e]*m);g=1,m=0;var w=this.B_re[1],T=this.B_im[1];for(e=2;e<=6;e++)y=g*d-m*f,_=m*d+g*f,g=y,m=_,w=w+e*(this.B_re[e]*g-this.B_im[e]*m),T=T+e*(this.B_im[e]*g+this.B_re[e]*m);var A=w*w+T*T;d=(v*w+x*T)/A,f=(x*w-v*T)/A}var R=d,L=f,P=1,F=0;for(e=1;e<=9;e++)P=P*R,F=F+this.D[e]*P;var B=this.lat0+F*Ug*1e5,b=this.long0+L;return i.x=b,i.y=B,i}var zYe=["New_Zealand_Map_Grid","nzmg"];const GYe={init:$Ye,forward:BYe,inverse:jYe,names:zYe};function UYe(){}function VYe(i){var e=i.x,t=i.y,r=ke(e-this.long0),n=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return i.x=n,i.y=s,i}function qYe(i){i.x-=this.x0,i.y-=this.y0;var e=ke(this.long0+i.x/this.a),t=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=t,i}var HYe=["Miller_Cylindrical","mill"];const WYe={init:UYe,forward:VYe,inverse:qYe,names:HYe};var YYe=20;function XYe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=j_e(this.es)}function ZYe(i){var e,t,r=i.x,n=i.y;if(r=ke(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=YYe;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Se)break}e=this.a*this.C_x*r*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var l=Math.sin(n),c=Math.cos(n);t=this.a*Ix(n,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return i.x=e,i.y=t,i}function KYe(i){var e,t,r,n;return i.x-=this.x0,r=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Mc((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Mc(Math.sin(e)/this.n)),r=ke(r+this.long0),e=mp(e)):(e=z_e(i.y/this.a,this.es,this.en),n=Math.abs(e),n<me?(n=Math.sin(e),t=this.long0+i.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),r=ke(t)):n-Se<me&&(r=this.long0)),i.x=r,i.y=e,i}var JYe=["Sinusoidal","sinu"];const QYe={init:XYe,forward:ZYe,inverse:KYe,names:JYe};function eXe(){}function tXe(i){for(var e=i.x,t=i.y,r=ke(e-this.long0),n=t,s=Math.PI*Math.sin(t);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<Se)break}n/=2,Math.PI/2-Math.abs(t)<Se&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return i.x=a,i.y=l,i}function iXe(i){var e,t;i.x-=this.x0,i.y-=this.y0,t=i.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=ke(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return i.x=r,i.y=n,i}var rXe=["Mollweide","moll"];const nXe={init:eXe,forward:tXe,inverse:iXe,names:rXe};function sXe(){Math.abs(this.lat1+this.lat2)<Se||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cy(this.es),this.e1=Ty(this.es),this.e2=Ay(this.es),this.e3=My(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ea(this.e,this.sinphi,this.cosphi),this.ml1=In(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Se?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ea(this.e,this.sinphi,this.cosphi),this.ml2=In(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=In(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function oXe(i){var e=i.x,t=i.y,r;if(this.sphere)r=this.a*(this.g-t);else{var n=In(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-n)}var s=this.ns*ke(e-this.long0),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return i.x=o,i.y=a,i}function aXe(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,t,r,n;this.ns>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*i.x,e*i.y)),this.sphere)return n=ke(this.long0+s/this.ns),r=mp(this.g-t/this.a),i.x=n,i.y=r,i;var o=this.g-t/this.a;return r=Vv(o,this.e0,this.e1,this.e2,this.e3),n=ke(this.long0+s/this.ns),i.x=n,i.y=r,i}var lXe=["Equidistant_Conic","eqdc"];const cXe={init:sXe,forward:oXe,inverse:aXe,names:lXe};function hXe(){this.R=this.a}function uXe(i){var e=i.x,t=i.y,r=ke(e-this.long0),n,s;Math.abs(t)<=Se&&(n=this.x0+this.R*r,s=this.y0);var o=Mc(2*Math.abs(t/Math.PI));(Math.abs(r)<=Se||Math.abs(Math.abs(t)-me)<=Se)&&(n=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(o),h=Math.cos(o),u=h/(c+h-1),d=u*u,f=u*(2/c-1),p=f*f,g=Math.PI*this.R*(a*(u-p)+Math.sqrt(l*(u-p)*(u-p)-(p+l)*(d-p)))/(p+l);r<0&&(g=-g),n=this.x0+g;var m=l+u;return g=Math.PI*this.R*(f*m-a*Math.sqrt((p+l)*(l+1)-m*m))/(p+l),t>=0?s=this.y0+g:s=this.y0-g,i.x=n,i.y=s,i}function dXe(i){var e,t,r,n,s,o,a,l,c,h,u,d,f;return i.x-=this.x0,i.y-=this.y0,u=Math.PI*this.R,r=i.x/u,n=i.y/u,s=r*r+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+r*r,l=-2*o+1+2*n*n+s*s,f=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,h=2*Math.sqrt(-c/3),u=3*f/c/h,Math.abs(u)>1&&(u>=0?u=1:u=-1),d=Math.acos(u)/3,i.y>=0?t=(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:t=-(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<Se?e=this.long0:e=ke(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-n*n)+s*s))/2/r),i.x=e,i.y=t,i}var fXe=["Van_der_Grinten_I","VanDerGrinten","vandg"];const pXe={init:hXe,forward:uXe,inverse:dXe,names:fXe};function gXe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function mXe(i){var e=i.x,t=i.y,r=Math.sin(i.y),n=Math.cos(i.y),s=ke(e-this.long0),o,a,l,c,h,u,d,f,p,g,m,y,_,v,x,w,T,A,R,L,P,F,B;return this.sphere?Math.abs(this.sin_p12-1)<=Se?(i.x=this.x0+this.a*(me-t)*Math.sin(s),i.y=this.y0-this.a*(me-t)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Se?(i.x=this.x0+this.a*(me+t)*Math.sin(s),i.y=this.y0+this.a*(me+t)*Math.cos(s),i):(A=this.sin_p12*r+this.cos_p12*n*Math.cos(s),w=Math.acos(A),T=w?w/Math.sin(w):1,i.x=this.x0+this.a*T*n*Math.sin(s),i.y=this.y0+this.a*T*(this.cos_p12*r-this.sin_p12*n*Math.cos(s)),i):(o=Cy(this.es),a=Ty(this.es),l=Ay(this.es),c=My(this.es),Math.abs(this.sin_p12-1)<=Se?(h=this.a*In(o,a,l,c,me),u=this.a*In(o,a,l,c,t),i.x=this.x0+(h-u)*Math.sin(s),i.y=this.y0-(h-u)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Se?(h=this.a*In(o,a,l,c,me),u=this.a*In(o,a,l,c,t),i.x=this.x0+(h+u)*Math.sin(s),i.y=this.y0+(h+u)*Math.cos(s),i):(d=r/n,f=Pf(this.a,this.e,this.sin_p12),p=Pf(this.a,this.e,r),g=Math.atan((1-this.es)*d+this.es*f*this.sin_p12/(p*n)),m=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(g)-this.sin_p12*Math.cos(s)),m===0?R=Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):Math.abs(Math.abs(m)-Math.PI)<=Se?R=-Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):R=Math.asin(Math.sin(s)*Math.cos(g)/Math.sin(m)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),_=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),v=y*_,x=_*_,L=R*R,P=L*R,F=P*R,B=F*R,w=f*R*(1-L*x*(1-x)/6+P/8*v*(1-2*x)+F/120*(x*(4-7*x)-3*y*y*(1-7*x))-B/48*v),i.x=this.x0+w*Math.sin(m),i.y=this.y0+w*Math.cos(m),i))}function yXe(i){i.x-=this.x0,i.y-=this.y0;var e,t,r,n,s,o,a,l,c,h,u,d,f,p,g,m,y,_,v,x,w,T,A,R;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*me*this.a?void 0:(t=e/this.a,r=Math.sin(t),n=Math.cos(t),s=this.long0,Math.abs(e)<=Se?o=this.lat0:(o=Mc(n*this.sin_p12+i.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-me,Math.abs(a)<=Se?this.lat0>=0?s=ke(this.long0+Math.atan2(i.x,-i.y)):s=ke(this.long0-Math.atan2(-i.x,i.y)):s=ke(this.long0+Math.atan2(i.x*r,e*this.cos_p12*n-i.y*this.sin_p12*r))),i.x=s,i.y=o,i)):(l=Cy(this.es),c=Ty(this.es),h=Ay(this.es),u=My(this.es),Math.abs(this.sin_p12-1)<=Se?(d=this.a*In(l,c,h,u,me),e=Math.sqrt(i.x*i.x+i.y*i.y),f=d-e,o=Vv(f/this.a,l,c,h,u),s=ke(this.long0+Math.atan2(i.x,-1*i.y)),i.x=s,i.y=o,i):Math.abs(this.sin_p12+1)<=Se?(d=this.a*In(l,c,h,u,me),e=Math.sqrt(i.x*i.x+i.y*i.y),f=e-d,o=Vv(f/this.a,l,c,h,u),s=ke(this.long0+Math.atan2(i.x,i.y)),i.x=s,i.y=o,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),m=Math.atan2(i.x,i.y),p=Pf(this.a,this.e,this.sin_p12),y=Math.cos(m),_=this.e*this.cos_p12*y,v=-_*_/(1-this.es),x=3*this.es*(1-v)*this.sin_p12*this.cos_p12*y/(1-this.es),w=e/p,T=w-v*(1+v)*Math.pow(w,3)/6-x*(1+3*v)*Math.pow(w,4)/24,A=1-v*T*T/2-w*T*T*T/6,g=Math.asin(this.sin_p12*Math.cos(T)+this.cos_p12*Math.sin(T)*y),s=ke(this.long0+Math.asin(Math.sin(m)*Math.sin(T)/Math.cos(g))),R=Math.sin(g),o=Math.atan2((R-this.es*A*this.sin_p12)*Math.tan(g),R*(1-this.es)),i.x=s,i.y=o,i))}var _Xe=["Azimuthal_Equidistant","aeqd"];const vXe={init:gXe,forward:mXe,inverse:yXe,names:_Xe};function bXe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function xXe(i){var e,t,r,n,s,o,a,l,c=i.x,h=i.y;return r=ke(c-this.long0),e=Math.sin(h),t=Math.cos(h),n=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*n,s=1,(o>0||Math.abs(o)<=Se)&&(a=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)),i.x=a,i.y=l,i}function wXe(i){var e,t,r,n,s,o,a;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),t=Mc(e/this.a),r=Math.sin(t),n=Math.cos(t),o=this.long0,Math.abs(e)<=Se?(a=this.lat0,i.x=o,i.y=a,i):(a=Mc(n*this.sin_p14+i.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-me,Math.abs(s)<=Se?(this.lat0>=0?o=ke(this.long0+Math.atan2(i.x,-i.y)):o=ke(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=ke(this.long0+Math.atan2(i.x*r,e*this.cos_p14*n-i.y*this.sin_p14*r)),i.x=o,i.y=a,i))}var EXe=["ortho"];const SXe={init:bXe,forward:xXe,inverse:wXe,names:EXe};var Gi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},li={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function CXe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=me-ai/2?this.face=Gi.TOP:this.lat0<=-(me-ai/2)?this.face=Gi.BOTTOM:Math.abs(this.long0)<=ai?this.face=Gi.FRONT:Math.abs(this.long0)<=me+ai?this.face=this.long0>0?Gi.RIGHT:Gi.LEFT:this.face=Gi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function TXe(i){var e={x:0,y:0},t,r,n,s,o,a,l={value:0};if(i.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):t=i.y,r=i.x,this.face===Gi.TOP)s=me-t,r>=ai&&r<=me+ai?(l.value=li.AREA_0,n=r-me):r>me+ai||r<=-(me+ai)?(l.value=li.AREA_1,n=r>0?r-or:r+or):r>-(me+ai)&&r<=-ai?(l.value=li.AREA_2,n=r+me):(l.value=li.AREA_3,n=r);else if(this.face===Gi.BOTTOM)s=me+t,r>=ai&&r<=me+ai?(l.value=li.AREA_0,n=-r+me):r<ai&&r>=-ai?(l.value=li.AREA_1,n=-r):r<-ai&&r>=-(me+ai)?(l.value=li.AREA_2,n=-r-me):(l.value=li.AREA_3,n=r>0?-r+or:-r-or);else{var c,h,u,d,f,p,g;this.face===Gi.RIGHT?r=Qd(r,+me):this.face===Gi.BACK?r=Qd(r,+or):this.face===Gi.LEFT&&(r=Qd(r,-me)),d=Math.sin(t),f=Math.cos(t),p=Math.sin(r),g=Math.cos(r),c=f*g,h=f*p,u=d,this.face===Gi.FRONT?(s=Math.acos(c),n=e_(s,u,h,l)):this.face===Gi.RIGHT?(s=Math.acos(h),n=e_(s,u,-c,l)):this.face===Gi.BACK?(s=Math.acos(-c),n=e_(s,u,-h,l)):this.face===Gi.LEFT?(s=Math.acos(-h),n=e_(s,u,c,l)):(s=n=0,l.value=li.AREA_0)}return a=Math.atan(12/or*(n+Math.acos(Math.sin(n)*Math.cos(ai))-me)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===li.AREA_1?a+=me:l.value===li.AREA_2?a+=or:l.value===li.AREA_3&&(a+=1.5*or),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function AXe(i){var e={lam:0,phi:0},t,r,n,s,o,a,l,c,h,u={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,r=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),t=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?u.value=li.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(u.value=li.AREA_1,t-=me):i.x<0&&-i.x>=Math.abs(i.y)?(u.value=li.AREA_2,t=t<0?t+or:t-or):(u.value=li.AREA_3,t+=me),h=or/12*Math.tan(t),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(t),s=Math.tan(r),l=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Gi.TOP)c=Math.acos(l),e.phi=me-c,u.value===li.AREA_0?e.lam=a+me:u.value===li.AREA_1?e.lam=a<0?a+or:a-or:u.value===li.AREA_2?e.lam=a-me:e.lam=a;else if(this.face===Gi.BOTTOM)c=Math.acos(l),e.phi=c-me,u.value===li.AREA_0?e.lam=-a+me:u.value===li.AREA_1?e.lam=-a:u.value===li.AREA_2?e.lam=-a-me:e.lam=a<0?-a-or:-a+or;else{var d,f,p;d=l,h=d*d,h>=1?p=0:p=Math.sqrt(1-h)*Math.sin(a),h+=p*p,h>=1?f=0:f=Math.sqrt(1-h),u.value===li.AREA_1?(h=f,f=-p,p=h):u.value===li.AREA_2?(f=-f,p=-p):u.value===li.AREA_3&&(h=f,f=p,p=-h),this.face===Gi.RIGHT?(h=d,d=-f,f=h):this.face===Gi.BACK?(d=-d,f=-f):this.face===Gi.LEFT&&(h=d,d=f,f=-h),e.phi=Math.acos(-p)-me,e.lam=Math.atan2(f,d),this.face===Gi.RIGHT?e.lam=Qd(e.lam,-me):this.face===Gi.BACK?e.lam=Qd(e.lam,-or):this.face===Gi.LEFT&&(e.lam=Qd(e.lam,+me))}if(this.es!==0){var g,m,y;g=e.phi<0?1:0,m=Math.tan(e.phi),y=this.b/Math.sqrt(m*m+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),g&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function e_(i,e,t,r){var n;return i<Se?(r.value=li.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=ai?r.value=li.AREA_0:n>ai&&n<=me+ai?(r.value=li.AREA_1,n-=me):n>me+ai||n<=-(me+ai)?(r.value=li.AREA_2,n=n>=0?n-or:n+or):(r.value=li.AREA_3,n+=me)),n}function Qd(i,e){var t=i+e;return t<-or?t+=Im:t>+or&&(t-=Im),t}var MXe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const RXe={init:CXe,forward:TXe,inverse:AXe,names:MXe};var JS=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],_g=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],V_e=.8487,q_e=1.3523,H_e=ca/5,LXe=1/H_e,Dd=18,qv=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},IXe=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function PXe(i,e,t,r){for(var n=e;r;--r){var s=i(n);if(n-=s,Math.abs(s)<t)break}return n}function kXe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function OXe(i){var e=ke(i.x-this.long0),t=Math.abs(i.y),r=Math.floor(t*H_e);r<0?r=0:r>=Dd&&(r=Dd-1),t=ca*(t-LXe*r);var n={x:qv(JS[r],t)*e,y:qv(_g[r],t)};return i.y<0&&(n.y=-n.y),n.x=n.x*this.a*V_e+this.x0,n.y=n.y*this.a*q_e+this.y0,n}function DXe(i){var e={x:(i.x-this.x0)/(this.a*V_e),y:Math.abs(i.y-this.y0)/(this.a*q_e)};if(e.y>=1)e.x/=JS[Dd][0],e.y=i.y<0?-me:me;else{var t=Math.floor(e.y*Dd);for(t<0?t=0:t>=Dd&&(t=Dd-1);;)if(_g[t][0]>e.y)--t;else if(_g[t+1][0]<=e.y)++t;else break;var r=_g[t],n=5*(e.y-r[0])/(_g[t+1][0]-r[0]);n=PXe(function(s){return(qv(r,s)-e.y)/IXe(r,s)},n,Se,100),e.x/=qv(JS[t],n),e.y=(5*t+n)*Ur,i.y<0&&(e.y=-e.y)}return e.x=ke(e.x+this.long0),e}var FXe=["Robinson","robin"];const NXe={init:kXe,forward:OXe,inverse:DXe,names:FXe};function $Xe(){this.name="geocent"}function BXe(i){var e=I_e(i,this.es,this.a);return e}function jXe(i){var e=P_e(i,this.es,this.a,this.b);return e}var zXe=["Geocentric","geocentric","geocent","Geocent"];const GXe={init:$Xe,forward:BXe,inverse:jXe,names:zXe};var hn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Kp={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function UXe(){if(Object.keys(Kp).forEach((function(t){if(typeof this[t]>"u")this[t]=Kp[t].def;else{if(Kp[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Kp[t].num&&(this[t]=parseFloat(this[t]))}Kp[t].degrees&&(this[t]=this[t]*Ur)}).bind(this)),Math.abs(Math.abs(this.lat0)-me)<Se?this.mode=this.lat0<0?hn.S_POLE:hn.N_POLE:Math.abs(this.lat0)<Se?this.mode=hn.EQUIT:(this.mode=hn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function VXe(i){i.x-=this.long0;var e=Math.sin(i.y),t=Math.cos(i.y),r=Math.cos(i.x),n,s;switch(this.mode){case hn.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case hn.EQUIT:s=t*r;break;case hn.S_POLE:s=-e;break;case hn.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),n=s*t*Math.sin(i.x),this.mode){case hn.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case hn.EQUIT:s*=e;break;case hn.N_POLE:s*=-(t*r);break;case hn.S_POLE:s*=t*r;break}var o,a;return o=s*this.cg+n*this.sg,a=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*a,s=o*a,i.x=n*this.a,i.y=s*this.a,i}function qXe(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},t,r,n;n=1/(this.pn1-i.y*this.sw),t=this.pn1*i.x*n,r=this.pn1*i.y*this.cw*n,i.x=t*this.cg+r*this.sg,i.y=r*this.cg-t*this.sg;var s=Hs(i.x,i.y);if(Math.abs(s)<Se)e.x=0,e.y=i.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case hn.OBLIQ:e.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/s),i.y=(o-this.sinph0*Math.sin(e.y))*s,i.x*=a*this.cosph0;break;case hn.EQUIT:e.y=Math.asin(i.y*a/s),i.y=o*s,i.x*=a;break;case hn.N_POLE:e.y=Math.asin(o),i.y=-i.y;break;case hn.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var HXe=["Tilted_Perspective","tpers"];const WXe={init:UXe,forward:VXe,inverse:qXe,names:HXe};function YXe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function XXe(i){var e=i.x,t=i.y,r,n,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/Hs(this.radius_p*Math.cos(t),Math.sin(t));if(n=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-n)*n-s*s-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/Hs(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(s/r),i.y=this.radius_g_1*Math.atan(o/Hs(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),n=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(t),r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/Hs(o,r)),i.y=this.radius_g_1*Math.atan(o/r)):(i.x=this.radius_g_1*Math.atan(s/r),i.y=this.radius_g_1*Math.atan(o/Hs(s,r))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function ZXe(i){var e=-1,t=0,r=0,n,s,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Hs(1,r)):(t=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Hs(1,t));var l=r/this.radius_p;if(n=t*t+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,r*=a,i.x=Math.atan2(t,e),i.y=Math.atan(r*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*n*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*n),e=this.radius_g+a*e,t*=a,r*=a,i.x=Math.atan2(t,e),i.y=Math.atan(r*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var KXe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const JXe={init:YXe,forward:XXe,inverse:ZXe,names:KXe};var Vg=1.340264,qg=-.081106,Hg=893e-6,Wg=.003796,Hv=Math.sqrt(3)/2;function QXe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function eZe(i){var e=ke(i.x-this.long0),t=i.y,r=Math.asin(Hv*Math.sin(t)),n=r*r,s=n*n*n;return i.x=e*Math.cos(r)/(Hv*(Vg+3*qg*n+s*(7*Hg+9*Wg*n))),i.y=r*(Vg+qg*n+s*(Hg+Wg*n)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function tZe(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var e=1e-9,t=12,r=i.y,n,s,o,a,l,c;for(c=0;c<t&&(n=r*r,s=n*n*n,o=r*(Vg+qg*n+s*(Hg+Wg*n))-i.y,a=Vg+3*qg*n+s*(7*Hg+9*Wg*n),r-=l=o/a,!(Math.abs(l)<e));++c);return n=r*r,s=n*n*n,i.x=Hv*i.x*(Vg+3*qg*n+s*(7*Hg+9*Wg*n))/Math.cos(r),i.y=Math.asin(Math.sin(r)/Hv),i.x=ke(i.x+this.long0),i}var iZe=["eqearth","Equal Earth","Equal_Earth"];const rZe={init:QXe,forward:eZe,inverse:tZe,names:iZe};function nZe(i){i.Proj.projections.add(L_),i.Proj.projections.add(I_),i.Proj.projections.add(s7e),i.Proj.projections.add(g7e),i.Proj.projections.add(x7e),i.Proj.projections.add(T7e),i.Proj.projections.add(P7e),i.Proj.projections.add(N7e),i.Proj.projections.add(G7e),i.Proj.projections.add(W7e),i.Proj.projections.add(hYe),i.Proj.projections.add(mYe),i.Proj.projections.add(xYe),i.Proj.projections.add(AYe),i.Proj.projections.add(PYe),i.Proj.projections.add(NYe),i.Proj.projections.add(GYe),i.Proj.projections.add(WYe),i.Proj.projections.add(QYe),i.Proj.projections.add(nXe),i.Proj.projections.add(cXe),i.Proj.projections.add(pXe),i.Proj.projections.add(vXe),i.Proj.projections.add(SXe),i.Proj.projections.add(RXe),i.Proj.projections.add(NXe),i.Proj.projections.add(GXe),i.Proj.projections.add(WXe),i.Proj.projections.add(JXe),i.Proj.projections.add(rZe)}bn.defaultDatum="WGS84";bn.Proj=ga;bn.WGS84=new bn.Proj("WGS84");bn.Point=If;bn.toPoint=k_e;bn.defs=An;bn.nadgrid=a9e;bn.transform=Uv;bn.mgrs=E9e;bn.version="__VERSION__";nZe(bn);let pA=null;function sZe(){return!!pA}function Px(i){pA=i;const e=Object.keys(i.defs),t=e.length;let r,n;for(r=0;r<t;++r){const s=e[r];if(!xe(s)){const o=i.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),cme(new _f({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<t;++r){const s=e[r],o=xe(s);for(n=0;n<t;++n){const a=e[n],l=xe(a);if(!Kge(s,a))if(i.defs[s]===i.defs[a])yS([o,l]);else{const c=i(s,a);ENe(o,l,nle(o,l,c.forward),nle(l,o,c.inverse))}}}}let oZe=async function(i){const e=await fetch(`https://epsg.io/${i}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};async function W_e(i){typeof i=="string"&&(i=parseInt(i.split(":").pop(),10));const e=pA;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const t="EPSG:"+i;return e.defs(t)||(e.defs(t,await oZe(i)),Px(e)),xe(t)}const gA={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};function hhe(i,e,t,r){const n=new CustomEvent(e,{detail:{originalEvent:t,geoJSON:r}});i.dispatchEvent(n)}function Y_e(i,e,t,r=!1,n=!1){const s=r?[i.feature]:i.features;n&&e.getSource().clear();const o=e.getSource().getFeatures();if(!e.get("multipleFeatures")&&(o.length||s.length>1))return console.error("Multiple features detected!");s.forEach(c=>{const h=c.getGeometry();if(h instanceof Ii){const d=sme(h,{radius:6378137,projection:"EPSG:3857"});c.set("measure",d)}else if(h instanceof tr){const d=ome(h,{radius:6378137,projection:"EPSG:3857"});c.set("measure",d)}const u=Ae(c);c.set("id",u),c.setId(u)}),!r&&s.length&&(e.getSource().addFeatures(s),t.map.getView().fit(e.getSource().getExtent(),{duration:750}));const a=new op,l=JSON.parse(a.writeFeatures(s,gA));(r||n)&&hhe(t,"drawend",i,l),hhe(t,"addfeatures",i,l)}function aZe(i,e,t,r=!1){try{const n=lZe(i);if(!n){console.error("Unsupported format or invalid data");return}const s=n.readFeatures(i,gA);Y_e({features:s},e,t,!1,r)}catch(n){console.error("Error parsing data:",n)}}function lZe(i){return cZe(i)?new op:hZe(i)?new Iye({extractStyles:!1}):uZe(i)?new Dye:null}function cZe(i){try{const e=JSON.parse(i);return e.type==="FeatureCollection"||e.type==="Feature"}catch{return!1}}function hZe(i){return i.includes("<kml")&&i.includes("</kml>")}function uZe(i){try{const e=JSON.parse(i);return e.type==="Topology"&&e.objects}catch{return!1}}async function dZe(i){return Px(bn),await W_e(i)}function fZe(i,e){bn.defs(i,e),Px(bn)}function pZe(i,e,t){const r=Object.assign({},t);if(i.interactions[r.id])throw Error(`Interaction with id: ${r.id} already exists.`);r.modify=typeof r.modify=="boolean"?r.modify:!0;const n=e.getSource();r.type==="Box"&&(r.geometryFunction=vWe(),r.type="Circle");const s=new xWe({...r,source:n});r.active===!1&&s.setActive(!1),s.on("drawend",l=>{e.get("isDrawingEnabled")&&Y_e(l,e,i,!0)}),i.map.addInteraction(s),i.interactions[r.id]=s;const o=new dWe({source:n});o.setActive(r.modify),i.map.addInteraction(o),i.interactions[`${r.id}_modify`]=o;const a=()=>{i.getLayerById(e.get("id"))||(i.removeInteraction(r.id),i.removeInteraction(`${r.id}_modify`),i.map.getLayerGroup().un("change",a))};i.map.getLayerGroup().on("change",a)}var gZe=Object.defineProperty,mZe=Object.getOwnPropertyDescriptor,yZe=(i,e,t,r)=>{for(var n=r>1?void 0:r?mZe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&gZe(e,t,n),n};class X_e extends DC{constructor(){super(),this.propertyTransform=(e,t)=>e}renderContent(e){e1e(this.hasTemplate("properties")?ae`${this.renderTemplate("properties",e.getProperties(),"tooltip-1")}`:ae` <style>
              ul {
                margin: 0;
                padding: 15px 15px 15px 30px;
                background: #0008;
                border-radius: 15px;
                color: white;
                max-width: 250px;
                font-size: small;
              }
              span {
                font-weight: bold;
              }
            </style>
            <ul>
              ${Object.entries(e.getProperties()).map(([t,r])=>this.propertyTransform({key:t,value:r},e)).filter(t=>t).map(({key:t,value:r})=>ae`<li><span>${t}</span>: ${r}</li>`)}
            </ul>`,this.shadowRoot)}}yZe([Me()],X_e.prototype,"propertyTransform",2);customElements.define("eox-map-tooltip",X_e);class _Ze{constructor(e,t,r){var d,f;this.eoxMap=e,this.selectLayer=t,this.options=r,this.active=r.active||t.getVisible(),this.panIn=r.panIn||!1;const n=this.eoxMap.map.getOverlayById("eox-map-tooltip");let s;this.selectedFids=[],n?(this.tooltip=n.getElement(),s=n):(this.tooltip=this.eoxMap.querySelector("eox-map-tooltip")||((d=r.overlay)==null?void 0:d.element),this.tooltip&&(s=new x_e({element:this.tooltip,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...r.overlay}),this.eoxMap.map.addOverlay(s)));const o=()=>{s&&r.condition==="pointermove"&&s.setPosition(void 0)};e.map.on("change:target",p=>{var g,m;(g=p.oldValue)==null||g.removeEventListener("pointerleave",o),(m=p.target.getTargetElement())==null||m.addEventListener("pointerleave",o)}),(f=e.map.getTargetElement())==null||f.addEventListener("pointerleave",o);let a;if(this.options.layer)a=this.options.layer;else{const p=this.selectLayer.get("_jsonDefinition");a={...p,style:r.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:p.type}}}a.renderMode="vector",delete a.interactions,this.selectStyleLayer=kf(e,a),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const l=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((p,g)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(p))?l(p,g):null);const c=p=>{this.panIn&&this.eoxMap.map.getView().fit(p.getGeometry().getExtent(),{duration:750})},h=p=>{if(!this.active)return;const g=this.eoxMap.map.getView().getZoom();p.dragging||!this.active||g<this.selectLayer.getMinZoom()||g>this.selectLayer.getMaxZoom()||this.selectLayer.getFeatures(p.pixel).then(m=>{const y=m.length?m[0]:null,_=y?[this.getId(y)]:[],v=this.selectedFids[0]!==_[0];if(this.selectedFids=_,v&&(this.selectStyleLayer.changed(),y&&c(y)),s){const w=p.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",T=p.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${T}-${w}`),s.setPosition(y?p.coordinate:null),y&&this.tooltip.renderContent&&this.tooltip.renderContent(y)}const x=new CustomEvent("select",{detail:{id:r.id,originalEvent:p,feature:y}});this.eoxMap.dispatchEvent(x)})};this.eoxMap.map.on(r.condition||"click",h),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const p=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(p),this.setActive(p)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener),this.removeListener=()=>{},this.eoxMap.map.getLayers().on("remove",this.removeListener);const u=()=>{e.getLayerById(t.get("id"))||(e.selectInteractions[r.id].remove(),e.map.getLayerGroup().un("change",u))};e.map.getLayerGroup().on("change",u)}setActive(e){this.active=e}highlightById(e){this.selectedFids=e,this.selectStyleLayer.changed()}remove(){this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener),this.eoxMap.map.getLayers().un("remove",this.removeListener)}getId(e){if(this.options.idProperty)return e.get(this.options.idProperty);if(e.getId()!==void 0)return e.getId();if(e.get("id")!==void 0)return e.get("id");throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function vZe(i,e,t){if(i.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);return i.selectInteractions[t.id]=new _Ze(i,e,t),i.selectInteractions[t.id]}const bZe={GeoJSON:op,MVT:l2},xZe={Group:Os,Image:Cx,Tile:Rm,Vector:kc,VectorTile:k2},wZe={ImageWMS:h_e,OSM:g_e,Tile:fp,TileWMS:aA,Vector:Oc,VectorTile:Ey,WMTS:lA,XYZ:Tc};function kf(i,e,t=!0){var c,h;e=JSON.parse(JSON.stringify(e));const r={...bZe,...window.eoxMapAdvancedOlFormats},n={...xZe,...window.eoxMapAdvancedOlLayers},s={...wZe,...window.eoxMapAdvancedOlSources},o=n[e.type],a=s[(c=e.source)==null?void 0:c.type];if(!o)throw window.eoxMapAdvancedOlLayers?new Error(`Layer type ${e.type} not supported!`):new Error(`Layer type ${e.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);if(e.source&&!a)throw window.eoxMapAdvancedOlSources?new Error(`Source type ${e.source.type} not supported!`):new Error(`Source type ${e.source.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);const l=new o({...e,...e.source&&{source:new a({...e.source,...e.source.format&&{format:new r[e.source.format]},...e.source.tileGrid&&{tileGrid:Fc({...e.source.tileGrid})}})},...e.type==="Group"&&{layers:[]},...e.properties,style:void 0});if(l.set("_jsonDefinition",e,!0),e.type==="Group"){const u=e.layers.reverse().map(d=>kf(i,d));u.forEach(d=>d.set("_group",l,!0)),l.setLayers(new gn(u))}if(e.style&&l.setStyle(e.style),t&&((h=e.interactions)!=null&&h.length))for(let u=0,d=e.interactions.length;u<d;u++){const f=e.interactions[u];Z_e(i,l,f)}return J_e(l,e),l}function Z_e(i,e,t){t.type==="draw"?pZe(i,e,t.options):t.type==="select"&&vZe(i,e,t.options)}function K_e(i,e,t){var s,o,a,l;const r=t.get("_jsonDefinition");if(e.type!==r.type||((s=e.source)==null?void 0:s.type)!==((o=r.source)==null?void 0:o.type))throw new Error("Layers are not compatible to be updated");const n=kf(i,e,!1);if(JSON.stringify(e.source)!==JSON.stringify(r.source)&&t.setSource(n.getSource()),["Vector","VectorTile"].includes(e.type)&&JSON.stringify(e.style)!==JSON.stringify(r.style)&&t.setStyle(n.getStyle()),JSON.stringify(e.properties)!==JSON.stringify(r.properties)&&t.setProperties(e.properties),e.visible!==r.visible&&t.setVisible(e.visible),e.opacity!==r.opacity&&t.setOpacity(e.opacity),JSON.stringify(e.interactions)!==JSON.stringify(r.interactions)&&((a=r.interactions)==null||a.forEach(c=>{const h=e.interactions.find(u=>u.type===c.type);h?h.type==="draw"?(i.interactions[h.options.id].setActive(h.options.active),i.interactions[`${h.options.id}_modify`].setActive(h.options.modify)):i.selectInteractions[h.options.id].setActive(h.options.active):i.removeInteraction(c.options.id)}),(l=e.interactions)==null||l.forEach(c=>{r.interactions.find(u=>u.type===c.type)||Z_e(i,t,c)})),e.type==="Group"){const c=e.layers.map(u=>{var d;return(d=u.properties)==null?void 0:d.id}),h=t.getLayers();h.forEach(u=>{c.includes(u.get("id"))||h.remove(u)}),e.layers.forEach(u=>{const d=u.properties.id;if(h.getArray().map(f=>f.get("id")).includes(d))K_e(i,u,i.getLayerById(d));else{const f=kf(i,u);h.push(f)}}),h.getArray().sort((u,d)=>c.indexOf(u.get("id"))-c.indexOf(d.get("id"))),h.changed()}return J_e(t,e),t.set("_jsonDefinition",e,!0),t}const EZe=(i,e)=>e?[...e].reverse().map(t=>kf(i,t)):[];function J_e(i,e){i.on("change:opacity",()=>{e.opacity=i.getOpacity()}),i.on("change:visible",()=>{e.visible=i.getVisible()}),i.on("change:zIndex",()=>{e.zIndex=i.getZIndex()}),i.on("propertychange",t=>{t.key!=="map"&&(e.properties[t.key]=t.target.get(t.key))})}function g1(i,e){return Q_e(i.map.getLayers().getArray()).find(r=>r.get("id")===e)}function Q_e(i){const e=[];e.push(...i);let t=e.filter(r=>r instanceof Os);for(;t.length;){const r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n].getLayers().getArray();e.push(...o),r.push(...o.filter(a=>a instanceof Os))}t=r}return e}function SZe(i){if(i){const e=i;return!Vs(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90?SNe(e):e}return[0,0]}const uhe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],dhe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class CZe extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const r=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ie.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${xa} ${_u}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(fhe(t))if(phe(t))AZe(t);else{let r;this.source_?r=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:r=e.getTargetElement(),this.keys_?TZe(r):eve(r)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=phe(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Ef(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(dhe.ENTERFULLSCREEN)):(Ef(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(dhe.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(nr.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(nr.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let r=0,n=e.length;r<n;++r)Xt(e[r]);e.length=0;const t=this.getMap();if(t){const r=t.getOwnerDocument();fhe(r)?this.element.classList.remove(ple):this.element.classList.add(ple);for(let n=0,s=uhe.length;n<s;++n)e.push(lt(r,uhe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function fhe(i){const e=i.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&i.fullscreenEnabled)}function phe(i){return!!(i.webkitIsFullScreen||i.fullscreenElement)}function eve(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}function TZe(i){i.webkitRequestFullscreen?i.webkitRequestFullscreen():eve(i)}function AZe(i){i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()}const MZe=CZe,m1="projection",ghe="coordinateFormat";class RZe extends $o{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(m1,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(ghe)}getProjection(){return this.get(m1)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(lt(t,ta.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(lt(t,ta.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(ghe,e)}setProjection(e){this.set(m1,xe(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Sl(this.mapProjection_,s):this.transform_=Jb}const n=this.getMap().getCoordinateFromPixelInternal(e);if(n){if(this.transform_(n,n),this.wrapX_){const o=this.getProjection()||this.mapProjection_;Zb(n,o)}const s=this.getCoordinateFormat();s?t=s(n):t=n.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const LZe=RZe,y1=.75,t_=.1;class IZe extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",r=e.tipLabel!==void 0?e.tipLabel:"Overview map",n=e.collapseLabel!==void 0?e.collapseLabel:"";typeof n=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const s=e.label!==void 0?e.label:"";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=r,a.appendChild(o),a.addEventListener(Ie.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new eye({view:e.view,controls:new gn,interactions:new gn});this.ovmap_=l,e.layers&&e.layers.forEach(function(_){l.addLayer(_)});const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new x_e({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const h=t+" "+xa+" "+_u+(this.collapsed_&&this.collapsible_?" "+dv:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.ovmapDiv_),u.appendChild(a);const d=this,f=this.boxOverlay_,p=this.boxOverlay_.getElement(),g=function(_){return{clientX:_.clientX,clientY:_.clientY}},m=function(_){const v=g(_),x=l.getEventCoordinateInternal(v);f.setPosition(x)},y=function(_){const v=l.getEventCoordinateInternal(_);d.getMap().getView().setCenterInternal(v),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)};p.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",y)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const r=t.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(lt(e,Jh.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===nr.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const r=this.getMap().getView();this.bindView_(r)}else!this.ovmap_.isRendered()&&(e.key===nr.TARGET||e.key===nr.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new qs({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ys.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(ys.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const r=e.getSize(),s=e.getView().calculateExtentInternal(r);if(this.viewExtent_&&io(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),c=t.getPixelFromCoordinateInternal(No(s)),h=t.getPixelFromCoordinateInternal(Qf(s)),u=Math.abs(c[0]-h[0]),d=Math.abs(c[1]-h[1]),f=o[0],p=o[1];u<f*t_||d<p*t_||u>f*y1||d>p*y1?this.resetExtent_():Hr(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,r=e.getSize(),s=e.getView().calculateExtentInternal(r),o=t.getView(),a=Math.log(y1/t_)/Math.LN2,l=1/(Math.pow(2,a/2)*t_);uT(s,l),o.fitInternal(hv(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,r=e.getView();t.getView().setCenterInternal(r.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const r=e.getSize(),n=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),c=n.getCenterInternal(),h=n.getResolution(),u=s.getResolution(),d=r[0]*h/u,f=r[1]*h/u;if(a.setPosition(c),l){l.style.width=d+"px",l.style.height=f+"px";const p="rotate("+o+"rad)";l.style.transform=p}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=gf(this.ovmap_,Qo.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(dv),this.collapsed_?Ef(this.collapseLabel_,this.label_):Ef(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const PZe=IZe,_1="units",kZe=[1,2,5],Jp=25.4/.28;class OZe extends $o{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+xa,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(_1,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(_1)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(_1,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,n=this.getUnits(),s=n=="degrees"?"degrees":"m";let o=wf(r,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||Jp)/Jp,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Jp)/Jp:void 0;let c=a*o,h="";if(n=="degrees"){const v=yf.degrees;c*=v,c<v/60?(h="",o*=3600):c<v?(h="",o*=60):h=""}else if(n=="imperial")c<.9144?(h="in",o/=.0254):c<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344);else if(n=="nautical")o/=1852,h="NM";else if(n=="metric")c<1e-6?(h="nm",o*=1e9):c<.001?(h="m",o*=1e6):c<1?(h="mm",o*=1e3):c<1e3?h="m":(h="km",o/=1e3);else if(n=="us")c<.9144?(h="in",o*=39.37):c<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472);else throw new Error("Invalid units");let u=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,p,g,m,y;for(;;){p=Math.floor(u/3);const v=Math.pow(10,p);if(d=kZe[(u%3+3)%3]*v,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=g,f=m,p=y;break}else if(f>=a)break;g=d,m=f,y=p,++u}const _=this.scaleBar_?this.createScaleBar(f,d,h):d.toFixed(p<0?-p:0)+" "+h;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let h=0;h<o;++h){const u=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(h%2===0||o===2?this.createStepText(h,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,n,s){const a=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${r?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=wf(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Jp,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const DZe=OZe,Qp={VERTICAL:0,HORIZONTAL:1};class FZe extends $o{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Qp.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=t+"-thumb "+xa;const n=this.element;n.className=t+" "+xa+" "+_u,n.appendChild(r),n.addEventListener(ta.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(ta.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(ta.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(Ie.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(Ie.CLICK,XFe,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,r=e.offsetHeight;if(t===0&&r===0)return this.sliderInitialized_=!1;const n=getComputedStyle(e);t-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),r-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>r?(this.direction_=Qp.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=Qp.VERTICAL,this.heightLimit_=r-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),s=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:s,duration:this.duration_,easing:gu})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(lt(s,ta.POINTERMOVE,r,this),lt(s,ta.POINTERUP,n,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,r=e.clientY-this.startY_,n=this.getRelativePosition_(t,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Xt),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),r=this.element.firstElementChild;this.direction_==Qp.HORIZONTAL?r.style.left=this.widthLimit_*t+"px":r.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let r;return this.direction_===Qp.HORIZONTAL?r=e/this.widthLimit_:r=t/this.heightLimit_,tt(r,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return tt(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const NZe=FZe;class $Ze extends $o{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",r=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof r=="string"?document.createTextNode(r):r),s.addEventListener(Ie.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+xa+" "+_u,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),r=this.extent?Ms(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(hv(r))}}const BZe=$Ze,jZe=Object.freeze(Object.defineProperty({__proto__:null,Attribution:Ume,Control:$o,FullScreen:MZe,MousePosition:LZe,OverviewMap:PZe,Rotate:Vme,ScaleLine:DZe,Zoom:qme,ZoomSlider:NZe,ZoomToExtent:BZe,defaults:Hme},Symbol.toStringTag,{value:"Module"}));class zZe extends $o{constructor(e){const t=e||{},r=document.createElement("div");r.className="geolocation ol-unselectable ol-control";const n=document.createElement("button");n.title="Show your location";const s=document.createElement("img");if(t.buttonIcon)s.src=t.buttonIcon;else{const o=`url(
        "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-6 -6 36 36'%3E %3Cpath d='M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z' /%3E%3C/svg%3E"
      )`;s.style.background="var(--ol-subtle-foreground-color)",s.style.maskImage=o,s.style.webkitMaskImage=o}s.style.height="100%",s.style.width="100%",s.style.position="absolute",s.style.pointerEvents="none",r.appendChild(s),r.appendChild(n),super({element:r}),this._centerWhenReady=t.centerWhenReady,this._highAccuracy=t.highAccuracy,this._trackAccuracy=t.trackAccuracy,this._trackHeading=t.trackHeading,this._positionFeature=new mi({geometry:new $i([NaN,NaN]),heading:0}),this._source=new Oc({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new mi,this._accuracyFeature.setStyle(new qi({fill:new ss({color:"rgba(0, 0, 0, 0.2)"}),stroke:new mn({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new kc({source:this._source}),t.style&&this._layer.setStyle(t.style),n.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(e){this._layer.setMap(e),super.setMap(e),e&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((e,t)=>{const r=this.getMap();r&&(this._geolocation=new uWe({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:r.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",n=>{r.getView().setCenter(n.target.getPosition())}),this._geolocation.on("error",function(n){t(n)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",n=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",n.target.getHeading())}),this._geolocation.on("change:position",()=>{const n=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(n||null),e(n)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())})})}getElement(){return this.element}async centerOnPosition(){var e,t;try{await this.initGeolocation();const r=(e=this._geolocation)==null?void 0:e.getPosition();r&&((t=this.getMap())==null||t.getView().setCenter(r))}catch(r){console.error(r)}}}const GZe={...jZe,Geolocation:zZe};function UZe(i,e,t,r){e&&e[t]?JSON.stringify(e[t])!==JSON.stringify(r)&&(i.removeControl(t),mhe(i,t,r)):mhe(i,t,r)}function mhe(i,e,t){const r=Object.assign({},t);t&&t.layers&&(r.layers=EZe(i,t.layers));const n=new GZe[e](r);i.map.addControl(n),i.mapControls[e]=n}var VZe=Object.defineProperty,qZe=Object.getOwnPropertyDescriptor,HZe=(i,e,t,r)=>{for(var n=r>1?void 0:r?qZe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&VZe(e,t,n),n};class tve extends DC{constructor(){super(...arguments),this.value=50}render(){return ae`
      <style>
        :host {
          display: block;
        }
        /* Inspired by https://www.codehim.com/html5-css3/html-css-image-comparison-slider/ */
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: 0.2rem;

          position: relative;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
          padding-bottom: 50%;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          box-shadow: 0 0 5px black;
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          box-shadow: 0 0 5px black;
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
      </style>
      <div class="eox-map-compare">
        <div class="eox-map-compare__first">
          <slot name="first"></slot>
        </div>
        <div class="eox-map-compare__second">
          <slot name="second"></slot>
        </div>
        <input
          type="range"
          class="eox-map-compare__range"
          min="0"
          max="100"
          value=${this.value}
          @input=${e=>this.value=parseInt(e.target.value)}
        />
      </div>
    `}}HZe([Me()],tve.prototype,"value",2);customElements.define("eox-map-compare",tve);function WZe(i,e,t=.001){let r=!0;for(let n=i.length-1;n>=0;--n)if(!YZe(i[n],e[n],t)){r=!1;break}return r}function YZe(i,e,t=.001){return Math.abs(i-e)<t}function yhe(i,e=!1){e?(i.addInteraction(new vv({condition:Cle})),"ontouchstart"in window||navigator.maxTouchPoints>0?i.addInteraction(new Fg({condition:function(r){return this.getPointerCount()===2||Cle(r)}})):i.addInteraction(new Fg)):(i.addInteraction(new vv),i.addInteraction(new Fg))}function XZe(i){i.getInteractions().getArray().forEach(e=>{(e instanceof vv||e instanceof Fg)&&i.removeInteraction(e)})}var ZZe=Object.defineProperty,KZe=Object.getOwnPropertyDescriptor,Bo=(i,e,t,r)=>{for(var n=r>1?void 0:r?KZe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&ZZe(e,t,n),n};let ro=class extends hi{constructor(){super(...arguments),this._center=[0,0],this.zoom=0,this.map=new eye({controls:[],layers:[],view:new qs({center:[0,0],zoom:0,projection:this.projection})}),this.interactions={},this.selectInteractions={},this.mapControls={},this.addOrUpdateLayer=i=>{var n;i.interactions||(i.interactions=[]);const e=(n=i.properties)==null?void 0:n.id,t=e?g1(this,e):!1;let r;return t?(K_e(this,i,t),r=t):(r=kf(this,i),this.map.addLayer(r)),r},this.removeInteraction=i=>{this.map.removeInteraction(this.interactions[i]),delete this.interactions[i],this.interactions[`${i}_modify`]&&(this.map.removeInteraction(this.interactions[`${i}_modify`]),delete this.interactions[`${i}_modify`])},this.removeSelect=i=>{this.selectInteractions[i].remove(),delete this.selectInteractions[i]},this.removeControl=i=>{this.map.removeControl(this.mapControls[i]),delete this.mapControls[i]},this.getLayerById=i=>g1(this,i),this.parseFeature=i=>new op().writeFeaturesObject(i,gA),this.parseTextToFeature=(i,e,t=!1)=>{aZe(i,e,this,t)},this.registerProjectionFromCode=dZe,this.registerProjection=fZe,this.getFlatLayersArray=Q_e}set center(i){const e=(i==null?void 0:i.length)&&WZe(i,this.map.getView().getCenter());if(i&&!e)if(!this.projection||this.projection==="EPSG:3857"){const t=SZe(i);this.map.getView().setCenter(t),this._center=t}else this.map.getView().setCenter(i),this._center=i}get center(){return this._center}set controls(i){const e=this._controls,t=i;if(e){const r=Object.keys(e),n=Object.keys(t);for(let s=0,o=r.length;s<o;s++){const a=r[s];n.includes(a)||this.removeControl(a)}}if(t){const r=Object.keys(i);for(let n=0,s=r.length;n<s;n++){const o=r[n];UZe(this,e,o,i[o])}}this._controls=t}get controls(){return this._controls}set layers(i){const e=this._layers,t=JSON.parse(JSON.stringify(i)).reverse();e&&e.forEach(n=>{var s,o;if(!((s=n.properties)!=null&&s.id)||!t.find(a=>a.properties.id===n.properties.id)){const a=g1(this,(o=n.properties)==null?void 0:o.id);this.map.removeLayer(a)}}),t.forEach(n=>{this.addOrUpdateLayer(n)});const r=t.map(n=>{var s;return(s=n.properties)==null?void 0:s.id});this.map.getLayers().getArray().sort((n,s)=>r.indexOf(n.get("id"))-r.indexOf(s.get("id"))),this._layers=t}get layers(){return this._layers}set preventScroll(i){i?(XZe(this.map),yhe(this.map,!0)):yhe(this.map),this._preventScroll=i}get preventScroll(){return this._preventScroll}set config(i){var e,t,r;this._config=i,this.zoom=((e=i==null?void 0:i.view)==null?void 0:e.zoom)||0,this.projection=((t=i==null?void 0:i.view)==null?void 0:t.projection)||"EPSG:3857",this.center=((r=i.view)==null?void 0:r.center)||[0,0],this.layers=(i==null?void 0:i.layers)||[],this.controls=(i==null?void 0:i.controls)||{},this.preventScroll===void 0&&(this.preventScroll=i==null?void 0:i.preventScroll)}get config(){return this._config}get projection(){return this._projection}set projection(i){const e=this.map.getView();if(i&&i!==e.getProjection().getCode()){const t=tp(e.getCenter(),e.getProjection().getCode(),i),r=xe(i),n=e.getResolution(),s=e.getProjection().getMetersPerUnit(),o=r.getMetersPerUnit(),a=wf(e.getProjection(),1/s,e.getCenter(),"m")*s,l=wf(r,1/o,t,"m")*o,c=n*a/l,h=new qs({zoom:e.getZoom(),center:t,resolution:c,rotation:e.getRotation(),projection:i});["change:center","change:resolution","change:rotation","propertychange"].forEach(d=>{const f=e.getListeners(d);if(f!=null&&f.length)for(let p=f.length-1;p>=0;p--){const g=f[p];e.un(d,g),h.on(d,g)}}),this.map.setView(h),this.getFlatLayersArray(this.map.getLayers().getArray()).filter(d=>d instanceof kc).forEach(d=>d.getSource().refresh()),this._projection=i,this.center=t}}render(){return ae`
      <style>
        ${`
      :host {
        display: block;
      }
      .eox-map-tooltip {
        pointer-events: none !important;
      }
    `}
        ${J$e}
        ${Q$e}
      </style>
      <div style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}buffer(i,e){return rs(i,e)}firstUpdated(){if(this.sync){const i=document.querySelector(this.sync);i&&this.map.setView(i.map.getView())}this.map.once("change:target",i=>{i.target.getView().setCenter(this.center)}),this.map.setTarget(this.renderRoot.querySelector("div")),this.map.on("loadend",()=>{this.dispatchEvent(new CustomEvent("loadend",{detail:this.map}))})}updated(i){i.has("zoom")&&this.map.getView().setZoom(this.zoom||0)}};Bo([Me({attribute:!1,type:Array})],ro.prototype,"layers",1);Bo([Me({attribute:"prevent-scroll",type:Boolean})],ro.prototype,"preventScroll",1);Bo([Me({attribute:!1,type:Object})],ro.prototype,"config",1);Bo([Me({attribute:"projection",type:String})],ro.prototype,"projection",1);Bo([Me({attribute:!1,type:Number})],ro.prototype,"zoom",2);Bo([Me()],ro.prototype,"sync",2);Bo([hr()],ro.prototype,"map",2);Bo([hr()],ro.prototype,"interactions",2);Bo([hr()],ro.prototype,"selectInteractions",2);Bo([hr()],ro.prototype,"mapControls",2);ro=Bo([Xr("eox-map")],ro);window.eoxMapAdvancedOlFormats=GUe;var Rn=(i,e,t)=>new Promise((r,n)=>{var s=l=>{try{a(t.next(l))}catch(c){n(c)}},o=l=>{try{a(t.throw(l))}catch(c){n(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(i,e)).next())}),Ts=Uint8Array,Fd=Uint16Array,JZe=Int32Array,ive=new Ts([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rve=new Ts([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),QZe=new Ts([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nve=function(i,e){for(var t=new Fd(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];for(var n=new JZe(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)n[s]=s-t[r]<<5|r;return{b:t,r:n}},sve=nve(ive,2),ove=sve.b,eKe=sve.r;ove[28]=258,eKe[258]=28;var tKe=nve(rve,0),iKe=tKe.b,QS=new Fd(32768);for(ni=0;ni<32768;++ni)Fa=(ni&43690)>>1|(ni&21845)<<1,Fa=(Fa&52428)>>2|(Fa&13107)<<2,Fa=(Fa&61680)>>4|(Fa&3855)<<4,QS[ni]=((Fa&65280)>>8|(Fa&255)<<8)>>1;var Fa,ni,Yg=function(i,e,t){for(var r=i.length,n=0,s=new Fd(e);n<r;++n)i[n]&&++s[i[n]-1];var o=new Fd(e);for(n=1;n<e;++n)o[n]=o[n-1]+s[n-1]<<1;var a;if(t){a=new Fd(1<<e);var l=15-e;for(n=0;n<r;++n)if(i[n])for(var c=n<<4|i[n],h=e-i[n],u=o[i[n]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)a[QS[u]>>l]=c}else for(a=new Fd(r),n=0;n<r;++n)i[n]&&(a[n]=QS[o[i[n]-1]++]>>15-i[n]);return a},Ry=new Ts(288);for(ni=0;ni<144;++ni)Ry[ni]=8;var ni;for(ni=144;ni<256;++ni)Ry[ni]=9;var ni;for(ni=256;ni<280;++ni)Ry[ni]=7;var ni;for(ni=280;ni<288;++ni)Ry[ni]=8;var ni,ave=new Ts(32);for(ni=0;ni<32;++ni)ave[ni]=5;var ni,rKe=Yg(Ry,9,1),nKe=Yg(ave,5,1),v1=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},bo=function(i,e,t){var r=e/8|0;return(i[r]|i[r+1]<<8)>>(e&7)&t},b1=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},sKe=function(i){return(i+7)/8|0},oKe=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var r=new Ts(t-e);return r.set(i.subarray(e,t)),r},aKe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bs=function(i,e,t){var r=new Error(e||aKe[i]);if(r.code=i,Error.captureStackTrace&&Error.captureStackTrace(r,bs),!t)throw r;return r},mA=function(i,e,t,r){var n=i.length,s=r?r.length:0;if(!n||e.f&&!e.l)return t||new Ts(0);var o=!t||e.i!=2,a=e.i;t||(t=new Ts(n*3));var l=function(he){var Ce=t.length;if(he>Ce){var Ue=new Ts(Math.max(Ce*2,he));Ue.set(t),t=Ue}},c=e.f||0,h=e.p||0,u=e.b||0,d=e.l,f=e.d,p=e.m,g=e.n,m=n*8;do{if(!d){c=bo(i,h,1);var y=bo(i,h+1,3);if(h+=3,y)if(y==1)d=rKe,f=nKe,p=9,g=5;else if(y==2){var w=bo(i,h,31)+257,T=bo(i,h+10,15)+4,A=w+bo(i,h+5,31)+1;h+=14;for(var R=new Ts(A),L=new Ts(19),P=0;P<T;++P)L[QZe[P]]=bo(i,h+P*3,7);h+=T*3;for(var F=v1(L),B=(1<<F)-1,b=Yg(L,F,1),P=0;P<A;){var E=b[bo(i,h,B)];h+=E&15;var _=E>>4;if(_<16)R[P++]=_;else{var C=0,M=0;for(_==16?(M=3+bo(i,h,3),h+=2,C=R[P-1]):_==17?(M=3+bo(i,h,7),h+=3):_==18&&(M=11+bo(i,h,127),h+=7);M--;)R[P++]=C}}var O=R.subarray(0,w),D=R.subarray(w);p=v1(O),g=v1(D),d=Yg(O,p,1),f=Yg(D,g,1)}else bs(1);else{var _=sKe(h)+4,v=i[_-4]|i[_-3]<<8,x=_+v;if(x>n){a&&bs(0);break}o&&l(u+v),t.set(i.subarray(_,x),u),e.b=u+=v,e.p=h=x*8,e.f=c;continue}if(h>m){a&&bs(0);break}}o&&l(u+131072);for(var U=(1<<p)-1,z=(1<<g)-1,Z=h;;Z=h){var C=d[b1(i,h)&U],Q=C>>4;if(h+=C&15,h>m){a&&bs(0);break}if(C||bs(2),Q<256)t[u++]=Q;else if(Q==256){Z=h,d=null;break}else{var V=Q-254;if(Q>264){var P=Q-257,N=ive[P];V=bo(i,h,(1<<N)-1)+ove[P],h+=N}var X=f[b1(i,h)&z],ne=X>>4;X||bs(3),h+=X&15;var D=iKe[ne];if(ne>3){var N=rve[ne];D+=b1(i,h)&(1<<N)-1,h+=N}if(h>m){a&&bs(0);break}o&&l(u+131072);var fe=u+V;if(u<D){var ve=s-D,ge=Math.min(D,fe);for(ve+u<0&&bs(3);u<ge;++u)t[u]=r[ve+u]}for(;u<fe;u+=4)t[u]=t[u-D],t[u+1]=t[u+1-D],t[u+2]=t[u+2-D],t[u+3]=t[u+3-D];u=fe}}e.l=d,e.p=Z,e.b=u,e.f=c,d&&(c=1,e.m=p,e.d=f,e.n=g)}while(!c);return u==t.length?t:oKe(t,0,u)},lKe=new Ts(0),cKe=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&bs(6,"invalid gzip data");var e=i[3],t=10;e&4&&(t+=(i[10]|i[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!i[t++]);return t+(e&2)},hKe=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},uKe=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&bs(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&bs(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function dKe(i,e){return mA(i,{i:2},e&&e.out,e&&e.dictionary)}function fKe(i,e){var t=cKe(i);return t+8>i.length&&bs(6,"invalid gzip data"),mA(i.subarray(t,-8),{i:2},e&&e.out||new Ts(hKe(i)),e&&e.dictionary)}function pKe(i,e){return mA(i.subarray(uKe(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function eC(i,e){return i[0]==31&&i[1]==139&&i[2]==8?fKe(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?dKe(i,e):pKe(i,e)}var gKe=typeof TextDecoder<"u"&&new TextDecoder,mKe=0;try{gKe.decode(lKe,{stream:!0}),mKe=1}catch{}var lve=(i,e)=>i*Math.pow(2,e),eg=(i,e)=>Math.floor(i/Math.pow(2,e)),Wv=(i,e)=>lve(i.getUint16(e+1,!0),8)+i.getUint8(e),cve=(i,e)=>lve(i.getUint32(e+2,!0),16)+i.getUint16(e,!0),yKe=(i,e,t,r,n)=>{if(i!=r.getUint8(n))return i-r.getUint8(n);const s=Wv(r,n+1);if(e!=s)return e-s;const o=Wv(r,n+4);return t!=o?t-o:0},_Ke=(i,e,t,r)=>{const n=hve(i,e|128,t,r);return n?{z:e,x:t,y:r,offset:n[0],length:n[1],is_dir:!0}:null},_he=(i,e,t,r)=>{const n=hve(i,e,t,r);return n?{z:e,x:t,y:r,offset:n[0],length:n[1],is_dir:!1}:null},hve=(i,e,t,r)=>{let n=0,s=i.byteLength/17-1;for(;n<=s;){const o=s+n>>1,a=yKe(e,t,r,i,o*17);if(a>0)n=o+1;else if(a<0)s=o-1;else return[cve(i,o*17+7),i.getUint32(o*17+13,!0)]}return null},vKe=(i,e)=>i.is_dir&&!e.is_dir?1:!i.is_dir&&e.is_dir?-1:i.z!==e.z?i.z-e.z:i.x!==e.x?i.x-e.x:i.y-e.y,uve=(i,e)=>{const t=i.getUint8(e*17);return{z:t&127,x:Wv(i,e*17+1),y:Wv(i,e*17+4),offset:cve(i,e*17+7),length:i.getUint32(e*17+13,!0),is_dir:t>>7===1}},vhe=i=>{const e=[],t=new DataView(i);for(let r=0;r<t.byteLength/17;r++)e.push(uve(t,r));return bKe(e)},bKe=i=>{i.sort(vKe);const e=new ArrayBuffer(17*i.length),t=new Uint8Array(e);for(let r=0;r<i.length;r++){const n=i[r];let s=n.z;n.is_dir&&(s=s|128),t[r*17]=s,t[r*17+1]=n.x&255,t[r*17+2]=n.x>>8&255,t[r*17+3]=n.x>>16&255,t[r*17+4]=n.y&255,t[r*17+5]=n.y>>8&255,t[r*17+6]=n.y>>16&255,t[r*17+7]=n.offset&255,t[r*17+8]=eg(n.offset,8)&255,t[r*17+9]=eg(n.offset,16)&255,t[r*17+10]=eg(n.offset,24)&255,t[r*17+11]=eg(n.offset,32)&255,t[r*17+12]=eg(n.offset,48)&255,t[r*17+13]=n.length&255,t[r*17+14]=n.length>>8&255,t[r*17+15]=n.length>>16&255,t[r*17+16]=n.length>>24&255}return e},xKe=(i,e)=>{if(i.byteLength<17)return null;const t=i.byteLength/17,r=uve(i,t-1);if(r.is_dir){const n=r.z,s=e.z-n,o=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:n,x:o,y:a}}return null};function wKe(i){return Rn(this,null,function*(){const e=yield i.getBytes(0,512e3),t=new DataView(e.data),r=t.getUint32(4,!0),n=t.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,r)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let c=0;"maxzoom"in o&&(c=+o.maxzoom);let h=0,u=0,d=0,f=-180,p=-85,g=180,m=85;if(o.bounds){const _=o.bounds.split(",");f=+_[0],p=+_[1],g=+_[2],m=+_[3]}if(o.center){const _=o.center.split(",");h=+_[0],u=+_[1],d=+_[2]}return{specVersion:t.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:n*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:c,minLon:f,minLat:p,maxLon:g,maxLat:m,centerZoom:d,centerLon:h,centerLat:u,etag:e.etag}})}function EKe(i,e,t,r,n,s,o){return Rn(this,null,function*(){let a=yield t.getArrayBuffer(e,i.rootDirectoryOffset,i.rootDirectoryLength,i);i.specVersion===1&&(a=vhe(a));const l=_he(new DataView(a),r,n,s);if(l){let u=(yield e.getBytes(l.offset,l.length,o)).data;const d=new DataView(u);return d.getUint8(0)==31&&d.getUint8(1)==139&&(u=eC(new Uint8Array(u))),{data:u}}const c=xKe(new DataView(a),{z:r,x:n,y:s});if(c){const h=_Ke(new DataView(a),c.z,c.x,c.y);if(h){let u=yield t.getArrayBuffer(e,h.offset,h.length,i);i.specVersion===1&&(u=vhe(u));const d=_he(new DataView(u),r,n,s);if(d){let p=(yield e.getBytes(d.offset,d.length,o)).data;const g=new DataView(p);return g.getUint8(0)==31&&g.getUint8(1)==139&&(p=eC(new Uint8Array(p))),{data:p}}}}})}var dve={getHeader:wKe,getZxy:EKe};function ud(i,e){return(e>>>0)*4294967296+(i>>>0)}function SKe(i,e){const t=e.buf;let r,n;if(n=t[e.pos++],r=(n&112)>>4,n<128||(n=t[e.pos++],r|=(n&127)<<3,n<128)||(n=t[e.pos++],r|=(n&127)<<10,n<128)||(n=t[e.pos++],r|=(n&127)<<17,n<128)||(n=t[e.pos++],r|=(n&127)<<24,n<128)||(n=t[e.pos++],r|=(n&1)<<31,n<128))return ud(i,r);throw new Error("Expected varint not more than 10 bytes")}function tg(i){const e=i.buf;let t,r;return r=e[i.pos++],t=r&127,r<128||(r=e[i.pos++],t|=(r&127)<<7,r<128)||(r=e[i.pos++],t|=(r&127)<<14,r<128)||(r=e[i.pos++],t|=(r&127)<<21,r<128)?t:(r=e[i.pos],t|=(r&15)<<28,SKe(t,i))}function CKe(i,e,t,r){if(r==0){t==1&&(e[0]=i-1-e[0],e[1]=i-1-e[1]);const n=e[0];e[0]=e[1],e[1]=n}}var TKe=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function AKe(i,e,t){if(i>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,i)-1||t>Math.pow(2,i)-1)throw Error("tile x/y outside zoom level bounds");const r=TKe[i],n=Math.pow(2,i);let s=0,o=0,a=0;const l=[e,t];let c=n/2;for(;c>0;)s=(l[0]&c)>0?1:0,o=(l[1]&c)>0?1:0,a+=c*c*(3*s^o),CKe(c,l,s,o),c=c/2;return r+a}function fve(i,e){return Rn(this,null,function*(){if(e===1||e===0)return i;if(e===2){if(typeof globalThis.DecompressionStream>"u")return eC(new Uint8Array(i));{let r=new Response(i).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var bd=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(bd||{}),MKe=127;function RKe(i,e){let t=0,r=i.length-1;for(;t<=r;){const n=r+t>>1,s=e-i[n].tileId;if(s>0)t=n+1;else if(s<0)r=n-1;else return i[n]}return r>=0&&(i[r].runLength===0||e-i[r].tileId<i[r].runLength)?i[r]:null}var LKe=class{constructor(i,e=new Headers){this.url=i,this.customHeaders=e}getKey(){return this.url}setHeaders(i){this.customHeaders=i}getBytes(i,e,t){return Rn(this,null,function*(){let r;t||(r=new AbortController,t=r.signal);const n=new Headers(this.customHeaders);n.set("Range","bytes="+i+"-"+(i+e-1));let s=yield fetch(this.url,{signal:t,headers:n});if(s.status===416&&i===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const c=+l.substr(8);s=yield fetch(this.url,{signal:t,headers:{Range:"bytes=0-"+(c-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>e))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function xo(i,e){const t=i.getUint32(e+4,!0),r=i.getUint32(e+0,!0);return t*Math.pow(2,32)+r}function IKe(i,e){const t=new DataView(i),r=t.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:xo(t,8),rootDirectoryLength:xo(t,16),jsonMetadataOffset:xo(t,24),jsonMetadataLength:xo(t,32),leafDirectoryOffset:xo(t,40),leafDirectoryLength:xo(t,48),tileDataOffset:xo(t,56),tileDataLength:xo(t,64),numAddressedTiles:xo(t,72),numTileEntries:xo(t,80),numTileContents:xo(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}function pve(i){const e={buf:new Uint8Array(i),pos:0},t=tg(e),r=[];let n=0;for(let s=0;s<t;s++){const o=tg(e);r.push({tileId:n+o,offset:0,length:0,runLength:1}),n+=o}for(let s=0;s<t;s++)r[s].runLength=tg(e);for(let s=0;s<t;s++)r[s].length=tg(e);for(let s=0;s<t;s++){const o=tg(e);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}function PKe(i){const e=new DataView(i);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Nd=class extends Error{};function kKe(i,e,t,r){return Rn(this,null,function*(){const n=yield i.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(PKe(n.data)<3)return[yield dve.getHeader(i)];const o=n.data.slice(0,MKe);let a=n.etag;r&&n.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+i.getKey()),a=void 0);const l=IKe(o,a);if(t){const c=n.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),h=i.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,u=pve(yield e(c,l.internalCompression));return[l,[h,u.length,u]]}return[l,void 0]})}function OKe(i,e,t,r,n){return Rn(this,null,function*(){const s=yield i.getBytes(t,r);if(n.etag&&n.etag!==s.etag)throw new Nd(s.etag);const o=yield e(s.data,n.internalCompression),a=pve(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var DKe=class{constructor(i=100,e=!0,t=fve){this.cache=new Map,this.maxCacheEntries=i,this.counter=1,this.prefetch=e,this.decompress=t}getHeader(i,e){return Rn(this,null,function*(){const t=i.getKey();if(this.cache.has(t))return this.cache.get(t).lastUsed=this.counter++,yield this.cache.get(t).data;const r=new Promise((n,s)=>{kKe(i,this.decompress,this.prefetch,e).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),n(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(i,e,t,r){return Rn(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+e+"|"+t;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise((o,a)=>{OKe(i,this.decompress,e,t,r).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(i,e,t,r){return Rn(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+e+"|"+t;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise((o,a)=>{i.getBytes(e,t).then(l=>{if(r.etag&&r.etag!==l.etag)throw new Nd(l.etag);o(l.data),this.cache.has(n),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let i=1/0,e;this.cache.forEach((t,r)=>{t.lastUsed<i&&(i=t.lastUsed,e=r)}),e&&this.cache.delete(e)}}invalidate(i,e){return Rn(this,null,function*(){this.cache.delete(i.getKey()),yield this.getHeader(i,e)})}},yA=class{constructor(i,e,t){typeof i=="string"?this.source=new LKe(i):this.source=i,t?this.decompress=t:this.decompress=fve,e?this.cache=e:this.cache=new DKe}getHeader(){return Rn(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(i,e,t,r){return Rn(this,null,function*(){const n=AKe(i,e,t),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return dve.getZxy(s,this.source,this.cache,i,e,t,r);if(i<s.minZoom||i>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const c=yield this.cache.getDirectory(this.source,o,a,s),h=RKe(c,n);if(h)if(h.runLength>0){const u=yield this.source.getBytes(s.tileDataOffset+h.offset,h.length,r);if(s.etag&&s.etag!==u.etag)throw new Nd(u.etag);return{data:yield this.decompress(u.data,s.tileCompression),cacheControl:u.cacheControl,expires:u.expires}}else o=s.leafDirectoryOffset+h.offset,a=h.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(i,e,t,r){return Rn(this,null,function*(){try{return yield this.getZxyAttempt(i,e,t,r)}catch(n){if(n instanceof Nd)return this.cache.invalidate(this.source,n.message),yield this.getZxyAttempt(i,e,t,r);throw n}})}getMetadataAttempt(){return Rn(this,null,function*(){const i=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(i.jsonMetadataOffset,i.jsonMetadataLength);if(i.etag&&i.etag!==e.etag)throw new Nd(e.etag);const t=yield this.decompress(e.data,i.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(t))})}getMetadata(){return Rn(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(i){if(i instanceof Nd)return this.cache.invalidate(this.source,i.message),yield this.getMetadataAttempt();throw i}})}};class FKe extends Dn{constructor(e){super(Ie.ERROR),this.error=e}}class Si{constructor(e){this.name=e}toString(){return this.name}}Si.GeoTIFF=new Si("GeoTIFF");Si.ImageStatic=new Si("ImageStatic");Si.PMTilesRaster=new Si("PMTilesRaster");Si.PMTilesVector=new Si("PMTilesVector");Si.TileJSON=new Si("TileJSON");Si.TileWMS=new Si("TileWMS");Si.WMTS=new Si("WMTS");Si.XYZ=new Si("XYZ");var gve={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(xr,function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(u,d){return u.indexOf(d)===-1?u.length:u.indexOf(d)}function n(u){var d=u.replace(/^v/,"").replace(/\+.*$/,""),f=r(d,"-"),p=d.substring(0,f).split(".");return p.push(d.substring(f+1)),p}function s(u){return isNaN(Number(u))?u:Number(u)}function o(u){if(typeof u!="string")throw new TypeError("Invalid argument expected string");if(!t.test(u))throw new Error("Invalid argument not valid semver ('"+u+"' received)")}function a(u,d){[u,d].forEach(o);for(var f=n(u),p=n(d),g=0;g<Math.max(f.length-1,p.length-1);g++){var m=parseInt(f[g]||0,10),y=parseInt(p[g]||0,10);if(m>y)return 1;if(y>m)return-1}var _=f[f.length-1],v=p[p.length-1];if(_&&v){var x=_.split(".").map(s),w=v.split(".").map(s);for(g=0;g<Math.max(x.length,w.length);g++){if(x[g]===void 0||typeof w[g]=="string"&&typeof x[g]=="number")return-1;if(w[g]===void 0||typeof x[g]=="string"&&typeof w[g]=="number"||x[g]>w[g])return 1;if(w[g]>x[g])return-1}}else if(_||v)return _?-1:1;return 0}var l=[">",">=","=","<","<="],c={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function h(u){if(typeof u!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof u);if(l.indexOf(u)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(u){return typeof u=="string"&&t.test(u)},a.compare=function(u,d,f){h(f);var p=a(u,d);return c[f].indexOf(p)>-1},a})})(gve);var NKe=gve.exports,tC=NKe;const _A="1.0.0",_e=!0,We={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},Vh={itemAndCollection:{"cube:":We.datacube,"eo:":We.eo,"file:":We.file,"label:":We.label,"pc:":We.pointcloud,"processing:":We.processing,"proj:":We.projection,"raster:":We.raster,"sar:":We.sar,"sat:":We.sat,"sci:":We.scientific,"view:":We.view,version:We.version,deprecated:We.version,published:We.timestamps,expires:We.timestamps,unpublished:We.timestamps},catalog:{},collection:{item_assets:We["item-assets"]},item:{}};Vh.collection=Object.assign(Vh.collection,Vh.itemAndCollection);Vh.item=Object.assign(Vh.item,Vh.itemAndCollection);var vg={parseUrl(i){let e=i.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(e)return{id:e[1],version:e[2]}}},$t={version:_A,extensions:{},set(i){if(typeof i.stac_version!="string"?$t.version="0.6.0":$t.version=i.stac_version,Array.isArray(i.stac_extensions))for(let e of i.stac_extensions){let t=vg.parseUrl(e);t&&($t.extensions[t.id]=t.version)}},before(i,e=null){let t=e?$t.extensions[e]:$t.version;return typeof t>"u"?!1:tC.compare(t,i,"<")}},K={type(i){let e=typeof i;if(e==="object"){if(i===null)return"null";if(Array.isArray(i))return"array"}return e},is(i,e){return K.type(i)===e},isDefined(i){return typeof i<"u"},isObject(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)},rename(i,e,t){return typeof i[e]<"u"&&typeof i[t]>"u"?(i[t]=i[e],delete i[e],!0):!1},forAll(i,e,t){if(i[e]&&typeof i[e]=="object")for(let r in i[e])t(i[e][r])},toArray(i,e){return typeof i[e]<"u"&&!Array.isArray(i[e])?(i[e]=[i[e]],!0):!1},flattenArray(i,e,t,r=!1){if(Array.isArray(i[e])){for(let n in i[e])if(typeof t[n]=="string"){let s=i[e][n];i[t[n]]=r?[s]:s}return delete i[e],!0}return!1},flattenOneElementArray(i,e,t=!1){return!t&&Array.isArray(i[e])?i[e].length===1?(i[e]=i[e][0],!0):!1:!0},removeFromArray(i,e,t){if(Array.isArray(i[e])){let r=i[e].indexOf(t);return r>-1&&i[e].splice(r,1),!0}return!1},ensure(i,e,t){return K.type(t)!==K.type(i[e])&&(i[e]=t),!0},upgradeExtension(i,e){let{id:t,version:r}=vg.parseUrl(e),n=i.stac_extensions.findIndex(s=>{let o=vg.parseUrl(s);return o&&o.id===t&&tC.compare(o.version,r,"<")});return n!==-1?(i.stac_extensions[n]=e,!0):!1},addExtension(i,e){let{id:t,version:r}=vg.parseUrl(e),n=i.stac_extensions.findIndex(s=>{if(s===e)return!0;let o=vg.parseUrl(s);return!!(o&&o.id===t&&tC.compare(o.version,r,"<"))});return n===-1?i.stac_extensions.push(e):i.stac_extensions[n]=e,i.stac_extensions.sort(),!0},removeExtension(i,e){return K.removeFromArray(i,"stac_extensions",e)},migrateExtensionShortnames(i){let e=Object.keys(We),t=Object.values(We);return K.mapValues(i,"stac_extensions",e,t)},populateExtensions(i,e){let t=[];(e=="catalog"||e=="collection")&&t.push(i),(e=="item"||e=="collection")&&K.isObject(i.assets)&&(t=t.concat(Object.values(i.assets))),e=="collection"&&K.isObject(i.item_assets)&&(t=t.concat(Object.values(i.item_assets))),e=="collection"&&K.isObject(i.summaries)&&t.push(i.summaries),e=="item"&&K.isObject(i.properties)&&t.push(i.properties);for(let r of t)Object.keys(r).forEach(n=>{let s=n.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(s)){let o=Vh[e][s[0]];K.is(o,"string")&&K.addExtension(i,o)}})},mapValues(i,e,t,r){let n=s=>{let o=t.indexOf(s);return o>=0?r[o]:s};return Array.isArray(i[e])?i[e]=i[e].map(n):typeof i[e]<"u"&&(i[e]=n(i[e])),!0},mapObject(i,e){for(let t in i)i[t]=e(i[t],t)},moveTo(i,e,t,r=!1,n=!1){let s;return r?n?s=o=>Array.isArray(o):s=o=>Array.isArray(o)&&o.length===1:s=K.isDefined,s(i[e])?(t[e]=r&&!n?i[e][0]:i[e],delete i[e],!0):!1},runAll(i,e,t,r){for(let n in i)n.startsWith("migrate")||i[n](e,t,r)},toUTC(i,e){if(typeof i[e]=="string")try{return i[e]=this.toISOString(i[e]),!0}catch{}return delete i[e],!1},toISOString(i){return i instanceof Date||(i=new Date(i)),i.toISOString().replace(".000","")}},ra={multihash:null,hexToUint8(i){if(i.length===0||i.length%2!==0)throw new Error(`The string "${i}" is not valid hex.`);return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))},uint8ToHex(i){return i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")},toMultihash(i,e,t){if(!ra.multihash||!K.is(i[e],"string"))return!1;try{const r=ra.multihash.encode(ra.hexToUint8(i[e]),t);return i[e]=ra.uint8ToHex(r),!0}catch(r){return console.warn(r),!1}}},vA={migrate(i,e=!0){return $t.set(i),e&&(i.stac_version=_A),i.type="Catalog",K.ensure(i,"stac_extensions",[]),$t.before("1.0.0-rc.1")&&K.migrateExtensionShortnames(i),K.ensure(i,"id",""),K.ensure(i,"description",""),K.ensure(i,"links",[]),K.runAll(vA,i,i),$t.before("0.8.0")&&K.populateExtensions(i,"catalog"),i}},bA={migrate(i,e=!0){return vA.migrate(i,e),i.type="Collection",$t.before("1.0.0-rc.1")&&K.migrateExtensionShortnames(i),K.ensure(i,"license","proprietary"),K.ensure(i,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),K.runAll(bA,i,i),K.isObject(i.properties)&&(K.removeFromArray(i,"stac_extensions","commons"),delete i.properties),$t.before("0.8.0")&&K.populateExtensions(i,"collection"),$t.before("1.0.0-beta.1")&&K.mapValues(i,"stac_extensions",["assets"],["item-assets"]),i},extent(i){if(K.ensure(i,"extent",{}),$t.before("0.8.0")&&(Array.isArray(i.extent.spatial)&&(i.extent.spatial={bbox:[i.extent.spatial]}),Array.isArray(i.extent.temporal)&&(i.extent.temporal={interval:[i.extent.temporal]})),K.ensure(i.extent,"spatial",{}),K.ensure(i.extent.spatial,"bbox",[]),K.ensure(i.extent,"temporal",{}),K.ensure(i.extent.temporal,"interval",[]),$t.before("1.0.0-rc.3")){if(i.extent.temporal.interval.length>1){let e,t;for(let r of i.extent.temporal.interval){if(r[0]===null)e=null;else if(typeof r[0]=="string"&&e!==null)try{let n=new Date(r[0]);(typeof e>"u"||n<e)&&(e=n)}catch{}if(r[1]===null)t=null;else if(typeof r[1]=="string"&&t!==null)try{let n=new Date(r[1]);(typeof t>"u"||n>t)&&(t=n)}catch{}}i.extent.temporal.interval.unshift([e?K.toISOString(e):null,t?K.toISOString(t):null])}if(i.extent.spatial.bbox.length>1){let e=i.extent.spatial.bbox.reduce((t,r)=>Array.isArray(r)?Math.max(r.length,t):t,4);if(e>=4){let t=new Array(e).fill(null),r=e/2;for(let n of i.extent.spatial.bbox){if(!Array.isArray(n)||n.length<4)break;for(let s in n){let o=n[s];t[s]===null?t[s]=o:s<r?t[s]=Math.min(o,t[s]):t[s]=Math.max(o,t[s])}}t.findIndex(n=>n===null)===-1&&i.extent.spatial.bbox.unshift(t)}}}},collectionAssets(i){$t.before("1.0.0-rc.1")&&K.removeExtension(i,"collection-assets"),Om.migrateAll(i)},itemAsset(i){$t.before("1.0.0-beta.2")&&K.rename(i,"item_assets","assets"),Om.migrateAll(i,"item_assets")},summaries(i){if(K.ensure(i,"summaries",{}),$t.before("0.8.0")&&K.isObject(i.other_properties)){for(let e in i.other_properties){let t=i.other_properties[e];Array.isArray(t.extent)&&t.extent.length===2?i.summaries[e]={minimum:t.extent[0],maximum:t.extent[1]}:Array.isArray(t.values)&&(t.values.filter(r=>Array.isArray(r)).length===t.values.length?i.summaries[e]=t.values.reduce((r,n)=>r.concat(n),[]):i.summaries[e]=t.values)}delete i.other_properties}if($t.before("1.0.0-beta.1")&&K.isObject(i.properties)&&!i.links.find(e=>["child","item"].includes(e.rel)))for(let e in i.properties){let t=i.properties[e];Array.isArray(t)||(t=[t]),i.summaries[e]=t}$t.before("1.0.0-rc.1")&&K.mapObject(i.summaries,e=>(K.rename(e,"min","minimum"),K.rename(e,"max","maximum"),e)),kx.migrate(i.summaries,i,!0),K.moveTo(i.summaries,"sci:doi",i,!0)&&K.addExtension(i,We.scientific),K.moveTo(i.summaries,"sci:publications",i,!0,!0)&&K.addExtension(i,We.scientific),K.moveTo(i.summaries,"sci:citation",i,!0)&&K.addExtension(i,We.scientific),K.moveTo(i.summaries,"cube:dimensions",i,!0)&&K.addExtension(i,We.datacube),Object.keys(i.summaries).length===0&&delete i.summaries}},xA={migrate(i,e=null,t=!0){$t.set(i),t&&(i.stac_version=_A),K.ensure(i,"stac_extensions",[]),$t.before("1.0.0-rc.1")&&K.migrateExtensionShortnames(i),K.ensure(i,"id",""),K.ensure(i,"type","Feature"),K.isObject(i.geometry)||(i.geometry=null),i.geometry!==null&&K.ensure(i,"bbox",[]),K.ensure(i,"properties",{}),K.ensure(i,"links",[]),K.ensure(i,"assets",{});let r=!1;return K.isObject(e)&&K.isObject(e.properties)&&(K.removeFromArray(i,"stac_extensions","commons"),i.properties=Object.assign({},e.properties,i.properties),r=!0),K.runAll(xA,i,i),kx.migrate(i.properties,i),Om.migrateAll(i),($t.before("0.8.0")||r)&&K.populateExtensions(i,"item"),i}},mve={migrate(i,e=!0){return K.ensure(i,"collections",[]),K.ensure(i,"links",[]),K.runAll(mve,i,i),i.collections=i.collections.map(t=>bA.migrate(t,e)),i}},yve={migrate(i,e=!0){return K.ensure(i,"type","FeatureCollection"),K.ensure(i,"features",[]),K.ensure(i,"links",[]),K.runAll(yve,i,i),i.features=i.features.map(t=>xA.migrate(t,null,e)),i}},Om={migrateAll(i,e="assets"){for(let t in i[e])Om.migrate(i[e][t],i)},migrate(i,e){return K.runAll(Om,i,e),kx.migrate(i,e),i},mediaTypes(i){K.is(i.type,"string")&&K.mapValues(i,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(i,e){let t=K.isObject(e.properties)&&Array.isArray(e.properties["eo:bands"])?e.properties["eo:bands"]:[];if(Array.isArray(i["eo:bands"]))for(let r in i["eo:bands"]){let n=i["eo:bands"][r];K.is(n,"number")&&K.isObject(t[n])?n=t[n]:K.isObject(n)||(n={}),i["eo:bands"][r]=n}}},kx={migrate(i,e,t=!1){return K.runAll(kx,i,e,t),i},_commonMetadata(i){$t.before("1.0.0-rc.3")&&(K.toUTC(i,"created"),K.toUTC(i,"updated"))},_timestamps(i,e){K.toUTC(i,"published"),K.toUTC(i,"expires"),K.toUTC(i,"unpublished"),K.upgradeExtension(e,We.timestamps)},_versioningIndicator(i,e){K.upgradeExtension(e,We.version)},checksum(i,e){$t.before("0.9.0")&&ra.multihash&&(K.rename(i,"checksum:md5","checksum:multihash")&&ra.toMultihash(i,"checksum:multihash","md5"),K.rename(i,"checksum:sha1","checksum:multihash")&&ra.toMultihash(i,"checksum:multihash","sha1"),K.rename(i,"checksum:sha2","checksum:multihash")&&ra.toMultihash(i,"checksum:multihash","sha2-256"),K.rename(i,"checksum:sha3","checksum:multihash")&&ra.toMultihash(i,"checksum:multihash","sha3-256")),$t.before("1.0.0-rc.1")&&K.rename(i,"checksum:multihash","file:checksum")&&K.addExtension(e,We.file),K.removeExtension(e,"checksum")},classification(i,e){$t.before("1.1.0","classification")&&K.forAll(i,"classification:classes",t=>K.rename(t,"color-hint","color_hint")),K.upgradeExtension(e,We.classification)},cube(i,e){K.upgradeExtension(e,We.datacube)},dtr(i,e){$t.before("0.9.0")&&(K.rename(i,"dtr:start_datetime","start_datetime"),K.rename(i,"dtr:end_datetime","end_datetime"),K.removeExtension(e,"datetime-range"))},eo(i,e){$t.before("0.9.0")&&(K.rename(i,"eo:epsg","proj:epsg")&&K.addExtension(e,We.projection),K.rename(i,"eo:platform","platform"),K.rename(i,"eo:instrument","instruments")&&K.toArray(i,"instruments"),K.rename(i,"eo:constellation","constellation"),K.rename(i,"eo:off_nadir","view:off_nadir")&&K.addExtension(e,We.view),K.rename(i,"eo:azimuth","view:azimuth")&&K.addExtension(e,We.view),K.rename(i,"eo:incidence_angle","view:incidence_angle")&&K.addExtension(e,We.view),K.rename(i,"eo:sun_azimuth","view:sun_azimuth")&&K.addExtension(e,We.view),K.rename(i,"eo:sun_elevation","view:sun_elevation")&&K.addExtension(e,We.view)),$t.before("1.0.0-beta.1")&&K.rename(i,"eo:gsd","gsd"),K.upgradeExtension(e,We.eo)},file(i,e){K.upgradeExtension(e,We.file)},label(i,e){$t.before("0.8.0")&&(K.rename(i,"label:property","label:properties"),K.rename(i,"label:task","label:tasks"),K.rename(i,"label:overview","label:overviews")&&K.toArray(i,"label:overviews"),K.rename(i,"label:method","label:methods"),K.toArray(i,"label:classes")),K.upgradeExtension(e,We.label)},pc(i,e){$t.before("0.8.0")&&K.rename(i,"pc:schema","pc:schemas"),K.upgradeExtension(e,We.pointcloud)},processing(i,e){K.upgradeExtension(e,We.processing)},proj(i,e){K.upgradeExtension(e,We.projection)},raster(i,e){K.upgradeExtension(e,We.raster)},sar(i,e,t){K.rename(i,"sar:incidence_angle","view:incidence_angle")&&K.addExtension(e,We.view),K.rename(i,"sar:pass_direction","sat:orbit_state")&&K.mapValues(i,"sat:orbit_state",[null],["geostationary"])&&K.addExtension(e,We.sat),$t.before("0.7.0")&&(K.flattenArray(i,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],t),K.flattenArray(i,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],t),K.flattenArray(i,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],t),K.rename(i,"sar:off_nadir","view:off_nadir")&&K.addExtension(e,We.view)),$t.before("0.9.0")&&(K.rename(i,"sar:platform","platform"),K.rename(i,"sar:instrument","instruments")&&K.toArray(i,"instruments"),K.rename(i,"sar:constellation","constellation"),K.rename(i,"sar:type","sar:product_type"),K.rename(i,"sar:polarization","sar:polarizations"),K.flattenOneElementArray(i,"sar:absolute_orbit",t)&&K.rename(i,"sar:absolute_orbit","sat:absolute_orbit")&&K.addExtension(e,We.sat),K.flattenOneElementArray(i,"sar:relative_orbit",t)&&K.rename(i,"sar:relative_orbit","sat:relative_orbit")&&K.addExtension(e,We.sat)),K.upgradeExtension(e,We.sar)},sat(i,e){$t.before("0.9.0")&&(K.rename(i,"sat:off_nadir_angle","sat:off_nadir"),K.rename(i,"sat:azimuth_angle","sat:azimuth"),K.rename(i,"sat:sun_azimuth_angle","sat:sun_azimuth"),K.rename(i,"sat:sun_elevation_angle","sat:sun_elevation")),K.upgradeExtension(e,We.sat)},sci(i,e){K.upgradeExtension(e,We.scientific)},item(i){$t.before("0.8.0")&&(K.rename(i,"item:license","license"),K.rename(i,"item:providers","providers"))},table(i,e){K.upgradeExtension(e,We.table)},view(i,e){K.upgradeExtension(e,We.view)}},xd={item(i,e=null,t=!0){return xA.migrate(i,e,t)},catalog(i,e=!0){return vA.migrate(i,e)},collection(i,e=!0){return bA.migrate(i,e)},collectionCollection(i,e=!0){return mve.migrate(i,e)},itemCollection(i,e=!0){return yve.migrate(i,e)},stac(i,e=!0){return i.type==="Feature"?xd.item(i,null,e):i.type==="FeatureCollection"?xd.itemCollection(i,e):i.type==="Collection"||!i.type&&K.isDefined(i.extent)&&K.isDefined(i.license)?xd.collection(i,e):!i.type&&Array.isArray(i.collections)?xd.collectionCollection(i,e):xd.catalog(i,e)},enableMultihash(i){ra.multihash=i}},$Ke=xd;const BKe=no($Ke);function yp(i){let e=i.length>=6,t=i[0],r=i[e?3:2],n=i[1],s=i[e?4:3],o={west:t,east:r,south:n,north:s};return e&&(o.base=i[2],o.height=i[5]),o}function x1(i){let{west:e,east:t,south:r,north:n}=yp(i);return[[[e,n],[e,r],[t,r],[t,n],[e,n]]]}function jKe(i){if(!Io(i))return null;let e=yp(i),t=[];if(vve(i)){let r=(e.west+360+e.east)/2;r>180&&(r-=360),t.push(r)}else t.push((e.west+e.east)/2);return t.push((e.south+e.north)/2),typeof e.base<"u"&&t.push((e.base+e.height)/2),t}function _ve(i){if(Io(i)?i=[i]:Array.isArray(i)&&(i=i.filter(r=>Io(r))),!Array.isArray(i)||i.length===0)return null;let e=i.reduce((r,n)=>{if(vve(n)){let{west:s,east:o,south:a,north:l}=yp(n);r.push(x1([-180,a,o,l])),r.push(x1([s,a,180,l]))}else r.push(x1(n));return r},[]),t=null;if(e.length===1?t={type:"Polygon",coordinates:e[0]}:e.length>1&&(t={type:"MultiPolygon",coordinates:e}),t)return{type:"Feature",geometry:t,properties:{}}}function Io(i){if(!Array.isArray(i)||![4,6].includes(i.length)||i.some(s=>typeof s!="number"))return!1;let{west:e,east:t,south:r,north:n}=yp(i);return r<=n&&e>=-180&&e<=180&&r>=-90&&t<=180&&t>=-180&&n<=90}function vve(i){if(!Io(i))return!1;let{west:e,east:t}=yp(i);return e>t}function bve(i){if(!Array.isArray(i)||i.length===0)return null;let e={west:180,south:90,east:-180,north:-90};i.forEach(r=>{if(!Io(r))return;let n=yp(r),s=["west","south"];for(let o in n){let a=s.includes(o)?Math.min:Math.max;e[o]=a(e[o],n[o])}});let t=[e.west,e.south,e.east,e.north];return Io(t)?t:null}function ts(i){return typeof i=="string"&&i.length>0}function Hn(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)}function xve(...i){if(i=i.filter(e=>Array.isArray(e)),i.length>1){let e=Math.max(...i.map(r=>r.length)),t=[];for(let r=0;r<e;r++)t.push(Object.assign({},...i.map(n=>n[r])));return t}else if(i.length===1)return i[0];return[]}function zKe(i){switch(i){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return i.startsWith("u")?0:null}function GKe(i){switch(i){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class Ox{constructor(e,t={},r=[]){if(!Hn(e))throw new Error("Given data is not an object");if(e instanceof Ox){for(let n of r)this[n]=e[n];e=e.toJSON()}this._keyMap=t,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let n in e)typeof this[n]>"u"&&(n in t?this[n]=t[n](e[n],this):this[n]=e[n])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return jKe(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(t=>{if(typeof this[t]=="function"||this._privateKeys.includes(t))return;let r=this[t];if(t in this._keyMap){let n=Array.isArray(r)?[]:{};for(let s in r)n[s]=r[s].toJSON();r=n}e[t]=r}),e}}var wve={exports:{}},bg={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */bg.exports;var bhe;function UKe(){return bhe||(bhe=1,function(i,e){(function(t){var r=e&&!e.nodeType&&e,n=i&&!i.nodeType&&i,s=typeof xr=="object"&&xr;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,c=1,h=26,u=38,d=700,f=72,p=128,g="-",m=/^xn--/,y=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-c,w=Math.floor,T=String.fromCharCode,A;function R(z){throw new RangeError(v[z])}function L(z,Z){for(var Q=z.length,V=[];Q--;)V[Q]=Z(z[Q]);return V}function P(z,Z){var Q=z.split("@"),V="";Q.length>1&&(V=Q[0]+"@",z=Q[1]),z=z.replace(_,".");var N=z.split("."),X=L(N,Z).join(".");return V+X}function F(z){for(var Z=[],Q=0,V=z.length,N,X;Q<V;)N=z.charCodeAt(Q++),N>=55296&&N<=56319&&Q<V?(X=z.charCodeAt(Q++),(X&64512)==56320?Z.push(((N&1023)<<10)+(X&1023)+65536):(Z.push(N),Q--)):Z.push(N);return Z}function B(z){return L(z,function(Z){var Q="";return Z>65535&&(Z-=65536,Q+=T(Z>>>10&1023|55296),Z=56320|Z&1023),Q+=T(Z),Q}).join("")}function b(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:l}function E(z,Z){return z+22+75*(z<26)-((Z!=0)<<5)}function C(z,Z,Q){var V=0;for(z=Q?w(z/d):z>>1,z+=w(z/Z);z>x*h>>1;V+=l)z=w(z/x);return w(V+(x+1)*z/(z+u))}function M(z){var Z=[],Q=z.length,V,N=0,X=p,ne=f,fe,ve,ge,he,Ce,Ue,Je,Bi,ki;for(fe=z.lastIndexOf(g),fe<0&&(fe=0),ve=0;ve<fe;++ve)z.charCodeAt(ve)>=128&&R("not-basic"),Z.push(z.charCodeAt(ve));for(ge=fe>0?fe+1:0;ge<Q;){for(he=N,Ce=1,Ue=l;ge>=Q&&R("invalid-input"),Je=b(z.charCodeAt(ge++)),(Je>=l||Je>w((a-N)/Ce))&&R("overflow"),N+=Je*Ce,Bi=Ue<=ne?c:Ue>=ne+h?h:Ue-ne,!(Je<Bi);Ue+=l)ki=l-Bi,Ce>w(a/ki)&&R("overflow"),Ce*=ki;V=Z.length+1,ne=C(N-he,V,he==0),w(N/V)>a-X&&R("overflow"),X+=w(N/V),N%=V,Z.splice(N++,0,X)}return B(Z)}function O(z){var Z,Q,V,N,X,ne,fe,ve,ge,he,Ce,Ue=[],Je,Bi,ki,bi;for(z=F(z),Je=z.length,Z=p,Q=0,X=f,ne=0;ne<Je;++ne)Ce=z[ne],Ce<128&&Ue.push(T(Ce));for(V=N=Ue.length,N&&Ue.push(g);V<Je;){for(fe=a,ne=0;ne<Je;++ne)Ce=z[ne],Ce>=Z&&Ce<fe&&(fe=Ce);for(Bi=V+1,fe-Z>w((a-Q)/Bi)&&R("overflow"),Q+=(fe-Z)*Bi,Z=fe,ne=0;ne<Je;++ne)if(Ce=z[ne],Ce<Z&&++Q>a&&R("overflow"),Ce==Z){for(ve=Q,ge=l;he=ge<=X?c:ge>=X+h?h:ge-X,!(ve<he);ge+=l)bi=ve-he,ki=l-he,Ue.push(T(E(he+bi%ki,0))),ve=w(bi/ki);Ue.push(T(E(ve,0))),X=C(Q,Bi,V==N),Q=0,++V}++Q,++Z}return Ue.join("")}function D(z){return P(z,function(Z){return m.test(Z)?M(Z.slice(4).toLowerCase()):Z})}function U(z){return P(z,function(Z){return y.test(Z)?"xn--"+O(Z):Z})}if(o={version:"1.3.2",ucs2:{decode:F,encode:B},decode:M,encode:O,toASCII:U,toUnicode:D},r&&n)if(i.exports==r)n.exports=o;else for(A in o)o.hasOwnProperty(A)&&(r[A]=o[A]);else t.punycode=o})(xr)}(bg,bg.exports)),bg.exports}var w1={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var xhe;function VKe(){return xhe||(xhe=1,function(i){(function(e,t){i.exports?i.exports=t():e.IPv6=t(e)})(xr,function(e){var t=e&&e.IPv6;function r(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,c=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(c=7);var h;for(h=0;h<l&&a[h]!=="";h++);if(h<c)for(a.splice(h,1,"0000");a.length<c;)a.splice(h,0,"0000");for(var u,d=0;d<c;d++){u=a[d].split("");for(var f=0;f<3&&(u[0]==="0"&&u.length>1);f++)u.splice(0,1);a[d]=u.join("")}var p=-1,g=0,m=0,y=-1,_=!1;for(d=0;d<c;d++)_?a[d]==="0"?m+=1:(_=!1,m>g&&(p=y,g=m)):a[d]==="0"&&(_=!0,y=d,m=1);m>g&&(p=y,g=m),g>1&&a.splice(p,g,""),l=a.length;var v="";for(a[0]===""&&(v=":"),d=0;d<l&&(v+=a[d],d!==l-1);d++)v+=":";return a[l-1]===""&&(v+=":"),v}function n(){return e.IPv6===this&&(e.IPv6=t),this}return{best:r,noConflict:n}})}(w1)),w1.exports}var E1={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var whe;function qKe(){return whe||(whe=1,function(i){(function(e,t){i.exports?i.exports=t():e.SecondLevelDomains=t(e)})(xr,function(e){var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return!1;var o=n.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=r.list[n.slice(s+1)];return a?a.indexOf(" "+n.slice(o+1,s)+" ")>=0:!1},is:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return!1;var o=n.lastIndexOf(".",s-1);if(o>=0)return!1;var a=r.list[n.slice(s+1)];return a?a.indexOf(" "+n.slice(0,s)+" ")>=0:!1},get:function(n){var s=n.lastIndexOf(".");if(s<=0||s>=n.length-1)return null;var o=n.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=r.list[n.slice(s+1)];return!a||a.indexOf(" "+n.slice(o+1,s)+" ")<0?null:n.slice(o+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r})}(E1)),E1.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(i){(function(e,t){i.exports?i.exports=t(UKe(),VKe(),qKe()):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(xr,function(e,t,r,n){var s=n&&n.URI;function o(b,E){var C=arguments.length>=1,M=arguments.length>=2;if(!(this instanceof o))return C?M?new o(b,E):new o(b):new o;if(b===void 0){if(C)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?b=location.href+"":b=""}if(b===null&&C)throw new TypeError("null is not a valid argument for URI");return this.href(b),E!==void 0?this.absoluteTo(E):this}function a(b){return/^[0-9]+$/.test(b)}o.version="1.19.11";var l=o.prototype,c=Object.prototype.hasOwnProperty;function h(b){return b.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(b){return b===void 0?"Undefined":String(Object.prototype.toString.call(b)).slice(8,-1)}function d(b){return u(b)==="Array"}function f(b,E){var C={},M,O;if(u(E)==="RegExp")C=null;else if(d(E))for(M=0,O=E.length;M<O;M++)C[E[M]]=!0;else C[E]=!0;for(M=0,O=b.length;M<O;M++){var D=C&&C[b[M]]!==void 0||!C&&E.test(b[M]);D&&(b.splice(M,1),O--,M--)}return b}function p(b,E){var C,M;if(d(E)){for(C=0,M=E.length;C<M;C++)if(!p(b,E[C]))return!1;return!0}var O=u(E);for(C=0,M=b.length;C<M;C++)if(O==="RegExp"){if(typeof b[C]=="string"&&b[C].match(E))return!0}else if(b[C]===E)return!0;return!1}function g(b,E){if(!d(b)||!d(E)||b.length!==E.length)return!1;b.sort(),E.sort();for(var C=0,M=b.length;C<M;C++)if(b[C]!==E[C])return!1;return!0}function m(b){var E=/^\/+|\/+$/g;return b.replace(E,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(b){if(!(!b||!b.nodeName)){var E=b.nodeName.toLowerCase();if(!(E==="input"&&b.type!=="image"))return o.domAttributes[E]}};function y(b){return escape(b)}function _(b){return encodeURIComponent(b).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}o.encode=_,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=_,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(b,E){var C=o.encode(b+"");return E===void 0&&(E=o.escapeQuerySpace),E?C.replace(/%20/g,"+"):C},o.decodeQuery=function(b,E){b+="",E===void 0&&(E=o.escapeQuerySpace);try{return o.decode(E?b.replace(/\+/g,"%20"):b)}catch{return b}};var v={encode:"encode",decode:"decode"},x,w=function(b,E){return function(C){try{return o[E](C+"").replace(o.characters[b][E].expression,function(M){return o.characters[b][E].map[M]})}catch{return C}}};for(x in v)o[x+"PathSegment"]=w("pathname",v[x]),o[x+"UrnPathSegment"]=w("urnpath",v[x]);var T=function(b,E,C){return function(M){var O;C?O=function(Z){return o[E](o[C](Z))}:O=o[E];for(var D=(M+"").split(b),U=0,z=D.length;U<z;U++)D[U]=O(D[U]);return D.join(b)}};o.decodePath=T("/","decodePathSegment"),o.decodeUrnPath=T(":","decodeUrnPathSegment"),o.recodePath=T("/","encodePathSegment","decode"),o.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),o.encodeReserved=w("reserved","encode"),o.parse=function(b,E){var C;return E||(E={preventInvalidHostname:o.preventInvalidHostname}),b=b.replace(o.leading_whitespace_expression,""),b=b.replace(o.ascii_tab_whitespace,""),C=b.indexOf("#"),C>-1&&(E.fragment=b.substring(C+1)||null,b=b.substring(0,C)),C=b.indexOf("?"),C>-1&&(E.query=b.substring(C+1)||null,b=b.substring(0,C)),b=b.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),b=b.replace(/^[/\\]{2,}/i,"//"),b.substring(0,2)==="//"?(E.protocol=null,b=b.substring(2),b=o.parseAuthority(b,E)):(C=b.indexOf(":"),C>-1&&(E.protocol=b.substring(0,C)||null,E.protocol&&!E.protocol.match(o.protocol_expression)?E.protocol=void 0:b.substring(C+1,C+3).replace(/\\/g,"/")==="//"?(b=b.substring(C+3),b=o.parseAuthority(b,E)):(b=b.substring(C+1),E.urn=!0))),E.path=b,E},o.parseHost=function(b,E){b||(b=""),b=b.replace(/\\/g,"/");var C=b.indexOf("/"),M,O;if(C===-1&&(C=b.length),b.charAt(0)==="[")M=b.indexOf("]"),E.hostname=b.substring(1,M)||null,E.port=b.substring(M+2,C)||null,E.port==="/"&&(E.port=null);else{var D=b.indexOf(":"),U=b.indexOf("/"),z=b.indexOf(":",D+1);z!==-1&&(U===-1||z<U)?(E.hostname=b.substring(0,C)||null,E.port=null):(O=b.substring(0,C).split(":"),E.hostname=O[0]||null,E.port=O[1]||null)}return E.hostname&&b.substring(C).charAt(0)!=="/"&&(C++,b="/"+b),E.preventInvalidHostname&&o.ensureValidHostname(E.hostname,E.protocol),E.port&&o.ensureValidPort(E.port),b.substring(C)||"/"},o.parseAuthority=function(b,E){return b=o.parseUserinfo(b,E),o.parseHost(b,E)},o.parseUserinfo=function(b,E){var C=b,M=b.indexOf("\\");M!==-1&&(b=b.replace(/\\/g,"/"));var O=b.indexOf("/"),D=b.lastIndexOf("@",O>-1?O:b.length-1),U;return D>-1&&(O===-1||D<O)?(U=b.substring(0,D).split(":"),E.username=U[0]?o.decode(U[0]):null,U.shift(),E.password=U[0]?o.decode(U.join(":")):null,b=C.substring(D+1)):(E.username=null,E.password=null),b},o.parseQuery=function(b,E){if(!b)return{};if(b=b.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!b)return{};for(var C={},M=b.split("&"),O=M.length,D,U,z,Z=0;Z<O;Z++)D=M[Z].split("="),U=o.decodeQuery(D.shift(),E),z=D.length?o.decodeQuery(D.join("="),E):null,U!=="__proto__"&&(c.call(C,U)?((typeof C[U]=="string"||C[U]===null)&&(C[U]=[C[U]]),C[U].push(z)):C[U]=z);return C},o.build=function(b){var E="",C=!1;return b.protocol&&(E+=b.protocol+":"),!b.urn&&(E||b.hostname)&&(E+="//",C=!0),E+=o.buildAuthority(b)||"",typeof b.path=="string"&&(b.path.charAt(0)!=="/"&&C&&(E+="/"),E+=b.path),typeof b.query=="string"&&b.query&&(E+="?"+b.query),typeof b.fragment=="string"&&b.fragment&&(E+="#"+b.fragment),E},o.buildHost=function(b){var E="";if(b.hostname)o.ip6_expression.test(b.hostname)?E+="["+b.hostname+"]":E+=b.hostname;else return"";return b.port&&(E+=":"+b.port),E},o.buildAuthority=function(b){return o.buildUserinfo(b)+o.buildHost(b)},o.buildUserinfo=function(b){var E="";return b.username&&(E+=o.encode(b.username)),b.password&&(E+=":"+o.encode(b.password)),E&&(E+="@"),E},o.buildQuery=function(b,E,C){var M="",O,D,U,z;for(D in b)if(D!=="__proto__"&&c.call(b,D))if(d(b[D]))for(O={},U=0,z=b[D].length;U<z;U++)b[D][U]!==void 0&&O[b[D][U]+""]===void 0&&(M+="&"+o.buildQueryParameter(D,b[D][U],C),E!==!0&&(O[b[D][U]+""]=!0));else b[D]!==void 0&&(M+="&"+o.buildQueryParameter(D,b[D],C));return M.substring(1)},o.buildQueryParameter=function(b,E,C){return o.encodeQuery(b,C)+(E!==null?"="+o.encodeQuery(E,C):"")},o.addQuery=function(b,E,C){if(typeof E=="object")for(var M in E)c.call(E,M)&&o.addQuery(b,M,E[M]);else if(typeof E=="string"){if(b[E]===void 0){b[E]=C;return}else typeof b[E]=="string"&&(b[E]=[b[E]]);d(C)||(C=[C]),b[E]=(b[E]||[]).concat(C)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(b,E,C){if(typeof E=="object")for(var M in E)c.call(E,M)&&o.setQuery(b,M,E[M]);else if(typeof E=="string")b[E]=C===void 0?null:C;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(b,E,C){var M,O,D;if(d(E))for(M=0,O=E.length;M<O;M++)b[E[M]]=void 0;else if(u(E)==="RegExp")for(D in b)E.test(D)&&(b[D]=void 0);else if(typeof E=="object")for(D in E)c.call(E,D)&&o.removeQuery(b,D,E[D]);else if(typeof E=="string")C!==void 0?u(C)==="RegExp"?!d(b[E])&&C.test(b[E])?b[E]=void 0:b[E]=f(b[E],C):b[E]===String(C)&&(!d(C)||C.length===1)?b[E]=void 0:d(b[E])&&(b[E]=f(b[E],C)):b[E]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(b,E,C,M){switch(u(E)){case"String":break;case"RegExp":for(var O in b)if(c.call(b,O)&&E.test(O)&&(C===void 0||o.hasQuery(b,O,C)))return!0;return!1;case"Object":for(var D in E)if(c.call(E,D)&&!o.hasQuery(b,D,E[D]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(C)){case"Undefined":return E in b;case"Boolean":var U=!!(d(b[E])?b[E].length:b[E]);return C===U;case"Function":return!!C(b[E],E,b);case"Array":if(!d(b[E]))return!1;var z=M?p:g;return z(b[E],C);case"RegExp":return d(b[E])?M?p(b[E],C):!1:!!(b[E]&&b[E].match(C));case"Number":C=String(C);case"String":return d(b[E])?M?p(b[E],C):!1:b[E]===C;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var b=[],E=[],C=0,M=0;M<arguments.length;M++){var O=new o(arguments[M]);b.push(O);for(var D=O.segment(),U=0;U<D.length;U++)typeof D[U]=="string"&&E.push(D[U]),D[U]&&C++}if(!E.length||!C)return new o("");var z=new o("").segment(E);return(b[0].path()===""||b[0].path().slice(0,1)==="/")&&z.path("/"+z.path()),z.normalize()},o.commonPath=function(b,E){var C=Math.min(b.length,E.length),M;for(M=0;M<C;M++)if(b.charAt(M)!==E.charAt(M)){M--;break}return M<1?b.charAt(0)===E.charAt(0)&&b.charAt(0)==="/"?"/":"":((b.charAt(M)!=="/"||E.charAt(M)!=="/")&&(M=b.substring(0,M).lastIndexOf("/")),b.substring(0,M+1))},o.withinString=function(b,E,C){C||(C={});var M=C.start||o.findUri.start,O=C.end||o.findUri.end,D=C.trim||o.findUri.trim,U=C.parens||o.findUri.parens,z=/[a-z0-9-]=["']?$/i;for(M.lastIndex=0;;){var Z=M.exec(b);if(!Z)break;var Q=Z.index;if(C.ignoreHtml){var V=b.slice(Math.max(Q-3,0),Q);if(V&&z.test(V))continue}for(var N=Q+b.slice(Q).search(O),X=b.slice(Q,N),ne=-1;;){var fe=U.exec(X);if(!fe)break;var ve=fe.index+fe[0].length;ne=Math.max(ne,ve)}if(ne>-1?X=X.slice(0,ne)+X.slice(ne).replace(D,""):X=X.replace(D,""),!(X.length<=Z[0].length)&&!(C.ignore&&C.ignore.test(X))){N=Q+X.length;var ge=E(X,Q,N,b);if(ge===void 0){M.lastIndex=N;continue}ge=String(ge),b=b.slice(0,Q)+ge+b.slice(N),M.lastIndex=Q+ge.length}}return M.lastIndex=0,b},o.ensureValidHostname=function(b,E){var C=!!b,M=!!E,O=!1;if(M&&(O=p(o.hostProtocols,E)),O&&!C)throw new TypeError("Hostname cannot be empty, if protocol is "+E);if(b&&b.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(b).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(b){if(b){var E=Number(b);if(!(a(E)&&E>0&&E<65536))throw new TypeError('Port "'+b+'" is not a valid port')}},o.noConflict=function(b){if(b){var E={URI:this.noConflict()};return n.URITemplate&&typeof n.URITemplate.noConflict=="function"&&(E.URITemplate=n.URITemplate.noConflict()),n.IPv6&&typeof n.IPv6.noConflict=="function"&&(E.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&typeof n.SecondLevelDomains.noConflict=="function"&&(E.SecondLevelDomains=n.SecondLevelDomains.noConflict()),E}else n.URI===this&&(n.URI=s);return this},l.build=function(b){return b===!0?this._deferred_build=!0:(b===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function A(b){return function(E,C){return E===void 0?this._parts[b]||"":(this._parts[b]=E||null,this.build(!C),this)}}function R(b,E){return function(C,M){return C===void 0?this._parts[b]||"":(C!==null&&(C=C+"",C.charAt(0)===E&&(C=C.substring(1))),this._parts[b]=C,this.build(!M),this)}}l.protocol=A("protocol"),l.username=A("username"),l.password=A("password"),l.hostname=A("hostname"),l.port=A("port"),l.query=R("query","?"),l.fragment=R("fragment","#"),l.search=function(b,E){var C=this.query(b,E);return typeof C=="string"&&C.length?"?"+C:C},l.hash=function(b,E){var C=this.fragment(b,E);return typeof C=="string"&&C.length?"#"+C:C},l.pathname=function(b,E){if(b===void 0||b===!0){var C=this._parts.path||(this._parts.hostname?"/":"");return b?(this._parts.urn?o.decodeUrnPath:o.decodePath)(C):C}else return this._parts.urn?this._parts.path=b?o.recodeUrnPath(b):"":this._parts.path=b?o.recodePath(b):"/",this.build(!E),this},l.path=l.pathname,l.href=function(b,E){var C;if(b===void 0)return this.toString();this._string="",this._parts=o._parts();var M=b instanceof o,O=typeof b=="object"&&(b.hostname||b.path||b.pathname);if(b.nodeName){var D=o.getDomAttribute(b);b=b[D]||"",O=!1}if(!M&&O&&b.pathname!==void 0&&(b=b.toString()),typeof b=="string"||b instanceof String)this._parts=o.parse(String(b),this._parts);else if(M||O){var U=M?b._parts:b;for(C in U)C!=="query"&&c.call(this._parts,C)&&(this._parts[C]=U[C]);U.query&&this.query(U.query,!1)}else throw new TypeError("invalid input");return this.build(!E),this},l.is=function(b){var E=!1,C=!1,M=!1,O=!1,D=!1,U=!1,z=!1,Z=!this._parts.urn;switch(this._parts.hostname&&(Z=!1,C=o.ip4_expression.test(this._parts.hostname),M=o.ip6_expression.test(this._parts.hostname),E=C||M,O=!E,D=O&&r&&r.has(this._parts.hostname),U=O&&o.idn_expression.test(this._parts.hostname),z=O&&o.punycode_expression.test(this._parts.hostname)),b.toLowerCase()){case"relative":return Z;case"absolute":return!Z;case"domain":case"name":return O;case"sld":return D;case"ip":return E;case"ip4":case"ipv4":case"inet4":return C;case"ip6":case"ipv6":case"inet6":return M;case"idn":return U;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return z}return null};var L=l.protocol,P=l.port,F=l.hostname;l.protocol=function(b,E){if(b&&(b=b.replace(/:(\/\/)?$/,""),!b.match(o.protocol_expression)))throw new TypeError('Protocol "'+b+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return L.call(this,b,E)},l.scheme=l.protocol,l.port=function(b,E){return this._parts.urn?b===void 0?"":this:(b!==void 0&&(b===0&&(b=null),b&&(b+="",b.charAt(0)===":"&&(b=b.substring(1)),o.ensureValidPort(b))),P.call(this,b,E))},l.hostname=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b!==void 0){var C={preventInvalidHostname:this._parts.preventInvalidHostname},M=o.parseHost(b,C);if(M!=="/")throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]');b=C.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(b,this._parts.protocol)}return F.call(this,b,E)},l.origin=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0){var C=this.protocol(),M=this.authority();return M?(C?C+"://":"")+this.authority():""}else{var O=o(b);return this.protocol(O.protocol()).authority(O.authority()).build(!E),this}},l.host=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var C=o.parseHost(b,this._parts);if(C!=="/")throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]');return this.build(!E),this},l.authority=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var C=o.parseAuthority(b,this._parts);if(C!=="/")throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]');return this.build(!E),this},l.userinfo=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0){var C=o.buildUserinfo(this._parts);return C&&C.substring(0,C.length-1)}else return b[b.length-1]!=="@"&&(b+="@"),o.parseUserinfo(b,this._parts),this.build(!E),this},l.resource=function(b,E){var C;return b===void 0?this.path()+this.search()+this.hash():(C=o.parse(b),this._parts.path=C.path,this._parts.query=C.query,this._parts.fragment=C.fragment,this.build(!E),this)},l.subdomain=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0){if(!this._parts.hostname||this.is("IP"))return"";var C=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,C)||""}else{var M=this._parts.hostname.length-this.domain().length,O=this._parts.hostname.substring(0,M),D=new RegExp("^"+h(O));if(b&&b.charAt(b.length-1)!=="."&&(b+="."),b.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return b&&o.ensureValidHostname(b,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(D,b),this.build(!E),this}},l.domain=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(typeof b=="boolean"&&(E=b,b=void 0),b===void 0){if(!this._parts.hostname||this.is("IP"))return"";var C=this._parts.hostname.match(/\./g);if(C&&C.length<2)return this._parts.hostname;var M=this._parts.hostname.length-this.tld(E).length-1;return M=this._parts.hostname.lastIndexOf(".",M-1)+1,this._parts.hostname.substring(M)||""}else{if(!b)throw new TypeError("cannot set domain empty");if(b.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(b,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=b;else{var O=new RegExp(h(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(O,b)}return this.build(!E),this}},l.tld=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(typeof b=="boolean"&&(E=b,b=void 0),b===void 0){if(!this._parts.hostname||this.is("IP"))return"";var C=this._parts.hostname.lastIndexOf("."),M=this._parts.hostname.substring(C+1);return E!==!0&&r&&r.list[M.toLowerCase()]&&r.get(this._parts.hostname)||M}else{var O;if(b)if(b.match(/[^a-zA-Z0-9-]/))if(r&&r.is(b))O=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(O,b);else throw new TypeError('TLD "'+b+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");O=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(O,b)}else throw new TypeError("cannot set TLD empty");return this.build(!E),this}},l.directory=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0||b===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var C=this._parts.path.length-this.filename().length-1,M=this._parts.path.substring(0,C)||(this._parts.hostname?"/":"");return b?o.decodePath(M):M}else{var O=this._parts.path.length-this.filename().length,D=this._parts.path.substring(0,O),U=new RegExp("^"+h(D));return this.is("relative")||(b||(b="/"),b.charAt(0)!=="/"&&(b="/"+b)),b&&b.charAt(b.length-1)!=="/"&&(b+="/"),b=o.recodePath(b),this._parts.path=this._parts.path.replace(U,b),this.build(!E),this}},l.filename=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(typeof b!="string"){if(!this._parts.path||this._parts.path==="/")return"";var C=this._parts.path.lastIndexOf("/"),M=this._parts.path.substring(C+1);return b?o.decodePathSegment(M):M}else{var O=!1;b.charAt(0)==="/"&&(b=b.substring(1)),b.match(/\.?\//)&&(O=!0);var D=new RegExp(h(this.filename())+"$");return b=o.recodePath(b),this._parts.path=this._parts.path.replace(D,b),O?this.normalizePath(E):this.build(!E),this}},l.suffix=function(b,E){if(this._parts.urn)return b===void 0?"":this;if(b===void 0||b===!0){if(!this._parts.path||this._parts.path==="/")return"";var C=this.filename(),M=C.lastIndexOf("."),O,D;return M===-1?"":(O=C.substring(M+1),D=/^[a-z0-9%]+$/i.test(O)?O:"",b?o.decodePathSegment(D):D)}else{b.charAt(0)==="."&&(b=b.substring(1));var U=this.suffix(),z;if(U)b?z=new RegExp(h(U)+"$"):z=new RegExp(h("."+U)+"$");else{if(!b)return this;this._parts.path+="."+o.recodePath(b)}return z&&(b=o.recodePath(b),this._parts.path=this._parts.path.replace(z,b)),this.build(!E),this}},l.segment=function(b,E,C){var M=this._parts.urn?":":"/",O=this.path(),D=O.substring(0,1)==="/",U=O.split(M);if(b!==void 0&&typeof b!="number"&&(C=E,E=b,b=void 0),b!==void 0&&typeof b!="number")throw new Error('Bad segment "'+b+'", must be 0-based integer');if(D&&U.shift(),b<0&&(b=Math.max(U.length+b,0)),E===void 0)return b===void 0?U:U[b];if(b===null||U[b]===void 0)if(d(E)){U=[];for(var z=0,Z=E.length;z<Z;z++)!E[z].length&&(!U.length||!U[U.length-1].length)||(U.length&&!U[U.length-1].length&&U.pop(),U.push(m(E[z])))}else(E||typeof E=="string")&&(E=m(E),U[U.length-1]===""?U[U.length-1]=E:U.push(E));else E?U[b]=m(E):U.splice(b,1);return D&&U.unshift(""),this.path(U.join(M),C)},l.segmentCoded=function(b,E,C){var M,O,D;if(typeof b!="number"&&(C=E,E=b,b=void 0),E===void 0){if(M=this.segment(b,E,C),!d(M))M=M!==void 0?o.decode(M):void 0;else for(O=0,D=M.length;O<D;O++)M[O]=o.decode(M[O]);return M}if(!d(E))E=typeof E=="string"||E instanceof String?o.encode(E):E;else for(O=0,D=E.length;O<D;O++)E[O]=o.encode(E[O]);return this.segment(b,E,C)};var B=l.query;return l.query=function(b,E){if(b===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof b=="function"){var C=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),M=b.call(this,C);return this._parts.query=o.buildQuery(M||C,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!E),this}else return b!==void 0&&typeof b!="string"?(this._parts.query=o.buildQuery(b,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!E),this):B.call(this,b,E)},l.setQuery=function(b,E,C){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof b=="string"||b instanceof String)M[b]=E!==void 0?E:null;else if(typeof b=="object")for(var O in b)c.call(b,O)&&(M[O]=b[O]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof b!="string"&&(C=E),this.build(!C),this},l.addQuery=function(b,E,C){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(M,b,E===void 0?null:E),this._parts.query=o.buildQuery(M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof b!="string"&&(C=E),this.build(!C),this},l.removeQuery=function(b,E,C){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(M,b,E),this._parts.query=o.buildQuery(M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof b!="string"&&(C=E),this.build(!C),this},l.hasQuery=function(b,E,C){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(M,b,E,C)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(b){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!b)),this},l.normalizeHostname=function(b){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!b)),this},l.normalizePort=function(b){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!b)),this},l.normalizePath=function(b){var E=this._parts.path;if(!E)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!b),this;if(this._parts.path==="/")return this;E=o.recodePath(E);var C,M="",O,D;for(E.charAt(0)!=="/"&&(C=!0,E="/"+E),(E.slice(-3)==="/.."||E.slice(-2)==="/.")&&(E+="/"),E=E.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),C&&(M=E.substring(1).match(/^(\.\.\/)+/)||"",M&&(M=M[0]));O=E.search(/\/\.\.(\/|$)/),O!==-1;){if(O===0){E=E.substring(3);continue}D=E.substring(0,O).lastIndexOf("/"),D===-1&&(D=O),E=E.substring(0,D)+E.substring(O+3)}return C&&this.is("relative")&&(E=M+E.substring(1)),this._parts.path=E,this.build(!b),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(b){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!b)),this},l.normalizeFragment=function(b){return this._parts.fragment||(this._parts.fragment=null,this.build(!b)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var b=o.encode,E=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=b,o.decode=E}return this},l.unicode=function(){var b=o.encode,E=o.decode;o.encode=_,o.decode=unescape;try{this.normalize()}finally{o.encode=b,o.decode=E}return this},l.readable=function(){var b=this.clone();b.username("").password("").normalize();var E="";if(b._parts.protocol&&(E+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&e?(E+=e.toUnicode(b._parts.hostname),b._parts.port&&(E+=":"+b._parts.port)):E+=b.host()),b._parts.hostname&&b._parts.path&&b._parts.path.charAt(0)!=="/"&&(E+="/"),E+=b.path(!0),b._parts.query){for(var C="",M=0,O=b._parts.query.split("&"),D=O.length;M<D;M++){var U=(O[M]||"").split("=");C+="&"+o.decodeQuery(U[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),U[1]!==void 0&&(C+="="+o.decodeQuery(U[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}E+="?"+C.substring(1)}return E+=o.decodeQuery(b.hash(),!0),E},l.absoluteTo=function(b){var E=this.clone(),C=["protocol","username","password","hostname","port"],M,O,D;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(b instanceof o||(b=new o(b)),E._parts.protocol||(E._parts.protocol=b._parts.protocol,this._parts.hostname))return E;for(O=0;D=C[O];O++)E._parts[D]=b._parts[D];return E._parts.path?(E._parts.path.substring(-2)===".."&&(E._parts.path+="/"),E.path().charAt(0)!=="/"&&(M=b.directory(),M=M||(b.path().indexOf("/")===0?"/":""),E._parts.path=(M?M+"/":"")+E._parts.path,E.normalizePath())):(E._parts.path=b._parts.path,E._parts.query||(E._parts.query=b._parts.query)),E.build(),E},l.relativeTo=function(b){var E=this.clone().normalize(),C,M,O,D,U;if(E._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(b=new o(b).normalize(),C=E._parts,M=b._parts,D=E.path(),U=b.path(),D.charAt(0)!=="/")throw new Error("URI is already relative");if(U.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(C.protocol===M.protocol&&(C.protocol=null),C.username!==M.username||C.password!==M.password||C.protocol!==null||C.username!==null||C.password!==null)return E.build();if(C.hostname===M.hostname&&C.port===M.port)C.hostname=null,C.port=null;else return E.build();if(D===U)return C.path="",E.build();if(O=o.commonPath(D,U),!O)return E.build();var z=M.path.substring(O.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return C.path=z+C.path.substring(O.length)||"./",E.build()},l.equals=function(b){var E=this.clone(),C=new o(b),M={},O={},D={},U,z,Z;if(E.normalize(),C.normalize(),E.toString()===C.toString())return!0;if(U=E.query(),z=C.query(),E.query(""),C.query(""),E.toString()!==C.toString()||U.length!==z.length)return!1;M=o.parseQuery(U,this._parts.escapeQuerySpace),O=o.parseQuery(z,this._parts.escapeQuerySpace);for(Z in M)if(c.call(M,Z)){if(d(M[Z])){if(!g(M[Z],O[Z]))return!1}else if(M[Z]!==O[Z])return!1;D[Z]=!0}for(Z in O)if(c.call(O,Z)&&!D[Z])return!1;return!0},l.preventInvalidHostname=function(b){return this._parts.preventInvalidHostname=!!b,this},l.duplicateQueryParameters=function(b){return this._parts.duplicateQueryParameters=!!b,this},l.escapeQuerySpace=function(b){return this._parts.escapeQuerySpace=!!b,this},o})})(wve);var HKe=wve.exports;const iC=no(HKe),Ehe=["http","https"];function WKe(i){return typeof i=="string"&&i.startsWith("/vsi")&&!i.startsWith("/vsicurl/")}function YKe(i,e,t=!0){return XKe(i,e,!1,t)}function XKe(i,e=null,t=!1,r=!0){typeof i=="string"&&i.startsWith("/vsicurl/")&&(i=i.replace(/^\/vsicurl\//,""));let n=iC(i);if(e&&n.is("relative")&&!WKe(i)){let s=iC(e),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),n=n.absoluteTo(s)}return n.normalize(),t&&(n.query(""),n.fragment("")),r?n.toString():n}const ZKe="application/geo+json",KKe=["application/json",ZKe,"text/json"],She=["image/gif","image/jpeg","image/apng","image/png","image/webp"],Eve=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],Sve=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(Eve);function wA(i,e,t=!1){return Array.isArray(e)||(e=[e]),t&&typeof i>"u"?!0:typeof i!="string"?!1:(e=e.map(r=>r.toLowerCase()),e.includes(i.toLowerCase()))}function JKe(i,e=!1){return wA(i,KKe,e)}class Cve extends Ox{constructor(e,t=null,r={},n=[]){super(e,r,["_context"].concat(n)),this._context||(this._context=t)}getAbsoluteUrl(e=!0){return this._context?YKe(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let t=new iC(this.href),r=t.protocol().toLowerCase(),n=t.suffix().toLowerCase();return ts(r)&&!Ehe.includes(r)?!1:ts(this.type)&&She.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&ts(n)&&(n==="jpg"||She.includes("image/"+n)))}isType(e){return ts(this.type)&&wA(this.type,e)}isGeoTIFF(){return this.isType(Sve)}isCOG(){return this.isType(Eve)}isHTTP(){let t=this.getAbsoluteUrl(!1).protocol().toLowerCase();return ts(t)&&Ehe.includes(t)}}class EA extends Cve{constructor(e,t=null){super(e,t)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(e,t=null){return Array.isArray(e)?e.map(r=>Hn(r)?new EA(r,t):r):[]}}class Tve extends Ox{constructor(e,t=null,r={},n=[]){if(super(e,Object.assign({links:EA.fromLinks},r),["_url"].concat(n)),!this._url&&(this._url=t,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,t=!0){return this.getLinksWithRels([e]).filter(r=>JKe(r.type,t))}getStacLinkWithRel(e,t=!0){const r=this.getStacLinksWithRel(e,t);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>Hn(e)&&ts(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(t=>t.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(t=>e.includes(t.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(t=>!e.includes(t.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class Ave extends Tve{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getAll(){return[]}}class mc extends Cve{constructor(e,t=null,r=null){super(e,r,{},["_key"]),this._key||(this._key=t)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getBands(){return xve(this["eo:bands"],this["raster:bands"])}findVisualBands(){let e={red:null,green:null,blue:null},t=this.getBands();for(let n in t){let s=parseInt(n,10),o=t[s];Hn(o)&&ts(o.common_name)&&o.common_name in e&&(e[o.common_name]={index:s,band:o})}return Object.values(e).every(n=>n!==null)?e:null}findBand(e,t="name",r=null){Array.isArray(e)||(e=[e]),Hn(r)||(r=this.getBands());let n=r.findIndex(s=>Hn(s)&&e.includes(s[t]));return n>=0?{index:n,band:r[n]}:null}getBand(e){return Hn(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(e=null){e=this.getBand(e);const t={minimum:null,maximum:null},r=a=>a.minimum!==null&&a.maximum!==null;if(e&&(Hn(e.statistics)&&(typeof e.statistics.minimum=="number"&&(t.minimum=e.statistics.minimum),typeof e.statistics.maximum=="number"&&(t.maximum=e.statistics.maximum),r(t))||Hn(e.histogram)&&(typeof e.histogram.min=="number"&&(t.minimum=e.histogram.min),typeof e.histogram.max=="number"&&(t.maximum=e.histogram.max),r(t))))return t;let n=this.getMetadata("classification:classes");if(Array.isArray(n)&&(n.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),t),r(t)))return t;let s=this.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),t),r(t)))return t;let o=Hn(e)&&e.data_type||this.getMetadata("file:data_type");return o&&(t.minimum=zKe(o),t.maximum=GKe(o)),t}getNoDataValues(e=null){e=this.getBand(e);let t=[];if(e&&typeof e.nodata<"u")t.push(e.nodata);else{let r=this.getMetadata("file:nodata");if(typeof r<"u")t=r;else{let n=this.getMetadata("classification:classes");Array.isArray(n)&&(t=n.filter(s=>!!s.nodata).map(s=>s.value))}}return t.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}isDefinition(){return!ts(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(e,t=!1){return Array.isArray(e)||(e=[e]),t&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>e.includes(r))}static fromAssets(e,t=null){let r={};if(Hn(e))for(let n in e)r[n]=new mc(e[n],n,t);return r}}class Ly extends Tve{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(t=>t.canBrowserDisplayImage(e))}getThumbnails(e=!0,t=null){let r=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(r.length===0&&(r=this.getLinksWithRels(["preview"])),e&&(r=r.filter(n=>n.canBrowserDisplayImage())),t&&r.length>1){let n=s=>Array.isArray(s.roles)&&s.roles.includes(t)||s.getKey()===t;r=r.filter(n).concat(r.filter(s=>!n(s)))}return r}getDefaultGeoTIFF(e=!0,t=!1){var n;return(n=this.rankGeoTIFFs(e,t)[0])==null?void 0:n.asset}rankGeoTIFFs(e=!0,t=!1,r=null,n=null){Hn(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(Sve);e&&(o=o.filter(l=>l.isHTTP()&&(!t||l.isCOG())));let a=Object.entries(r);for(let l of o){let c=0;if(a.length>0){let h=a.filter(([u])=>l.hasRole(u,!0)).map(([,u])=>u);h.length>0&&(c+=Math.max(...h))}!t&&l.isCOG()&&(c+=2),l.findVisualBands()&&(c+=1),typeof n=="function"&&(c+=n(l)),s.push({asset:l,score:c})}return s.sort((l,c)=>c.score-l.score),s}findVisualAssets(){let e={red:null,green:null,blue:null},t=Object.keys(e),r=this.getAssets();for(let s of r){let o=s.getBands();if(o.length!==1)continue;let a=s.findBand(t,"common_name",o);a&&(e[a.band.common_name]=s)}return Object.values(e).every(s=>s!==null)?e:null}getAsset(e){return Hn(this.assets)&&this.assets[e]||null}getAssets(){return Hn(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,t=!1){return this.getAssets().filter(r=>r.hasRole(e,t))}getAssetWithRole(e,t=!1){return this.getAssetsWithRoles([e],t)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(t=>wA(t.type,e))}equals(e){return this===e?!0:!(e instanceof Ly)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}}class Mve extends Ly{constructor(e,t=null,r={},n=[]){super(e,t,r,n)}getObjectType(){return this.type}getSearchLink(e=null){let t=this.getStacLinksWithRel("search");return e?t[0]||null:t.find(r=>r.method===e||!e&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class QKe extends Mve{constructor(e,t=null){super(e,t)}}function xg(i){if(ts(i)&&i.length>=10)try{let t=i.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function eJe(i,e){return new Date(i.valueOf()+(e-i)/2)}function Rve(i){if(!Array.isArray(i)||i.length===0)return null;let e,t;const r=(n,s,o)=>typeof n>"u"?s:n===null||s===null?null:o(n,s);return i.forEach(([n,s])=>{e=r(e,n,Math.min),t=r(t,s,Math.max)}),[e===null?null:new Date(e),t===null?null:new Date(t)]}class Lve extends Mve{constructor(e,t=null){const r={assets:mc.fromAssets,item_assets:mc.fromAssets};super(e,t,r)}toGeoJSON(){let e=_ve(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0&&Io(e[0])?e[0]:null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1&&Io(e[0])?e:e.length>1?e.filter((t,r)=>r>0&&Io(t)):[]}getRawBoundingBoxes(){var t,r;let e=(r=(t=this.extent)==null?void 0:t.spatial)==null?void 0:r.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var t,r;let e=(r=(t=this.extent)==null?void 0:t.temporal)==null?void 0:r.interval;return Array.isArray(e)&&e.length>0?e.filter(n=>Array.isArray(n)&&(ts(n[0])||ts(n[1]))).map(n=>n.map(s=>xg(s))):[]}getSummary(e){return this.summaries[e]}getBands(){let e=this.getSummary("eo:bands"),t=this.getSummary("raster:bands"),r=[e,t].filter(n=>Array.isArray(n));return r.length>=2?xve(...r):r.length===1?r[0]:[]}}class tJe extends Ave{constructor(e,t=null){const r={collections:n=>n.map(s=>new Lve(s))};super(e,t,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return bve(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return Rve(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}}class Ive extends Ly{constructor(e,t=null){super(e,t,{assets:mc.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Io(this.bbox)?this.bbox:null}getBoundingBoxes(){return Io(this.bbox)?[this.bbox]:[]}getDateTime(){let e=xg(this.properties.datetime);if(!e){let t=xg(this.properties.start_datetime),r=xg(this.properties.end_datetime);return t&&r?eJe(t,r):t||r}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return ts(this.properties.start_datetime)||ts(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:ts(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(t=>t.map(r=>xg(r)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("eo:bands");return Array.isArray(e)?e:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class iJe extends Ave{constructor(e,t=null){const r={features:n=>n.map(s=>new Ive(s))};super(e,t,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return bve(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return Rve(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}}function rJe(i,e=!0,t=!1){return e&&(i=BKe.stac(i,t)),i.type==="Feature"?new Ive(i):i.type==="FeatureCollection"?new iJe(i):i.type==="Collection"||!i.type&&typeof i.extent<"u"&&typeof i.license<"u"?new Lve(i):!i.type&&Array.isArray(i.collections)?new tJe(i):new QKe(i)}class Che extends G2{constructor(t){super({...t,state:"loading"});ee(this,"loadImage",t=>new Promise((r,n)=>{const s=new Image;s.addEventListener("load",()=>r(s)),s.addEventListener("error",()=>n(new Error("load failed"))),s.src=t}));const r=new yA(t.url);r.getHeader().then(n=>{this.tileGrid.minZoom=n.minZoom,this.tileGrid.maxZoom=n.maxZoom,this.setLoader(async(s,o,a)=>{const l=await r.getZxy(s,o,a),c=URL.createObjectURL(new Blob([l.data])),h=await this.loadImage(c);return URL.revokeObjectURL(c),h}),this.setState("ready")})}}class nJe extends Ey{constructor(t){super({...t,state:"loading",url:"pmtiles://"+t.url+"/{z}/{x}/{y}",format:new l2});ee(this,"tileLoadFunction",(t,r)=>{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=r.match(n),o=+s[2],a=+s[3],l=+s[4];t.setLoader((c,h,u)=>{t.setState(ie.LOADING),this.pmtiles_.getZxy(o,a,l).then(d=>{if(d){const f=t.getFormat();t.setFeatures(f.readFeatures(d.data,{extent:c,featureProjection:u})),t.setState(ie.LOADED)}else t.setFeatures([]),t.setState(ie.EMPTY)}).catch(d=>{t.setFeatures([]),t.setState(ie.ERROR)})})});this.pmtiles_=new yA(t.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const sJe=new qi({fill:new ss({color:"rgba(255,255,255,0.4)"}),stroke:new mn({color:"#3399CC",width:3})}),oJe=new qi({stroke:new mn({color:"#ff9933",width:1})});function aJe(i,e){const t={url:i.getAbsoluteUrl()};let r=null;i.getBands().length===1&&(r=0);const{minimum:n,maximum:s}=i.getMinMaxValues(r);typeof n=="number"&&(t.min=n),typeof s=="number"&&(t.max=s);const o=i.getNoDataValues(r);return o.length>0&&(t.nodata=o[0]),e.length>0&&(t.bands=e),t}async function The(i,e=void 0){let t=e;if(sZe()){const r=i.getMetadata("proj:epsg");if(r)try{t=await W_e(r)}catch{}}return t}function Ahe(i,e){const t=i.clone();return e.hasOnlyBounds()||t.setFill(null),t}function lJe(i){let e=i.href;if(e.includes("{s}"))if(Array.isArray(i["href:servers"])&&i["href:servers"].length>0){const t=Math.random()*i["href:servers"].length|0;e=e.replace("{s}",i["href:servers"][t])}else return null;return e}async function cJe(i){try{const e=new URL(i);e.searchParams.set("service","wmts"),e.searchParams.set("request","GetCapabilities");const t=await fetch(e);return new _2().read(await t.text())}catch{return null}}class SA extends Os{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||sJe,this.collectionStyle_=e.collectionStyle||oJe,this.boundsLayer_=null,e.data){try{this.configure_(e.data,e.url,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");fetch(e.url).then(r=>r.json()).then(r=>this.configure_(r,e.url,e.assets,e.bands)).catch(r=>this.handleError_(r))}getBoundsLayer(){return this.boundsLayer_}handleError_(e){this.dispatchEvent(new FKe(e))}configure_(e,t=null,r=null,n=[]){e instanceof mc||e instanceof Ly?this.data_=e:this.data_=rJe(e),t&&t.includes("://")&&this.data_.setAbsoluteUrl(t),this.bands_=n,this.boundsLayer_=this.addFootprint_();const s=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(Ahe(this.boundsStyle_,this))};this.getLayers().on("add",s),this.getLayers().on("remove",s),this.setAssets(r).then(()=>this.dispatchEvent("assetsready")).catch(o=>this.handleError_(o)),this.dispatchEvent("sourceready")}async addApiCollection_(){const e=this.getData().getAll().map(t=>{const r=new SA({data:t,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(r),r});return await Promise.all(e)}async addStacAssets_(){let e=this.getAssets();if(e===null){e=[];const r=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(r)e.push(r);else{const n=this.getData().getThumbnails();n.length>0&&e.push(n[0])}}const t=e.map(r=>this.addImagery_(r));return await Promise.all(t)}async addImagery_(e){if(e){if(e.isGeoTIFF())return await this.addGeoTiff_(e);if(e.canBrowserDisplayImage())return await this.addThumbnail_(e)}}async addThumbnail_(e){if(!this.displayPreview_)return;let t={url:e.getAbsoluteUrl(),projection:await The(e,"EPSG:4326"),imageExtent:e.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(t=await this.getSourceOptions_(Si.ImageStatic,t,e));const r=new Cx({source:new o_e(t)});return this.addLayer_(r,e),r}async addWebMapLinks_(){const e=this.getWebMapLinks();if(e.length>0)return await this.addLayerForLink(e[0])}async addLayerForLink(e){const t=lJe(e);if(!t)return;const r={attributions:e.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},n=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,e)),a),s=[];switch(e.rel){case"pmtiles":const a=await new yA(r.url).getHeader();let l;switch(a.tileType){case bd.Mvt:l=new nJe(await n(Si.PMTilesVector,r));break;case bd.Avif:case bd.Jpeg:case bd.Png:case bd.Webp:l=new Che(await n(Si.PMTilesRaster,r));break;default:return}s.push(l);break;case"tilejson":s.push(new v_e(await n(Si.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const u in e["wms:layers"]){const d=e["wms:layers"][u];let f;Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][u]=="string"&&(f=e["wms:styles"][u]);const p=Object.assign({LAYERS:d,STYLES:f},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(p.FORMAT=e.type);const g=await n(Si.TileWMS,Object.assign({},r,{params:p}));s.push(new aA(g))}break;case"wmts":const c=await cJe(t);if(!c)return;const h=Array.isArray(e["wmts:layer"])?e["wmts:layer"]:[e["wmts:layer"]];for(const u of h){let d=Object.assign({},r,{layer:u});typeof e.type=="string"&&e.type.startsWith("image/")&&(d.format=e.type),d=await n(Si.WMTS,d),s.push(new lA(b_e(c,d)))}break;case"xyz":s.push(new Tc(await n(Si.XYZ,r)));break;default:return}return s.map(o=>{let a;return o instanceof Ey?a=new k2({source:o,declutter:!0}):o instanceof Che?a=new $v({source:o}):a=new Rm({source:o}),this.addLayer_(a,e),a})}async addGeoTiff_(e){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[aJe(e,this.bands_)]};const n=await The(e);n&&(r.projection=n),this.getSourceOptions_&&(r=await this.getSourceOptions_(Si.GeoTIFF,r,e));const s=async(o,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(o));try{const o=new sA(r),a=new $v({source:o});if(this.useTileLayerAsFallback_){const l=()=>s(e,a);o.on("error",l),o.on("tileloaderror",l),o.on("change",()=>{o.getState()==="error"&&s(e,a)}),a.on("error",l),await o.getView()}return this.addLayer_(a,e),a}catch(o){if(this.useTileLayerAsFallback_)return await s(e,null);this.handleError_(o)}}async addTileLayerForImagery_(e){let t={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(e)};this.getSourceOptions_&&(t=await this.getSourceOptions_(Si.XYZ,t,e));const r=new Rm({source:new Tc(t)});return this.addLayer_(r,e),r}addLayer_(e,t,r=0){e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=_ve(t.getBoundingBox()):e=t.toGeoJSON(),e){const r=new op,n=new Oc({format:r,loader:(o,a,l)=>{const c=r.readFeatures(e,{featureProjection:l});n.addFeatures(c)}}),s=new kc({source:n,style:Ahe(this.boundsStyle_,this),visible:this.displayFootprint_});return s.set("bounds",!0),this.addLayer_(s,t,1),s}return null}async updateLayers_(){const e=this.getLayers();for(let r=e.getLength()-1;r>=0;r--){const s=e.item(r).get("stac");s&&(s.isLink()||s.isAsset())&&e.removeAt(r)}const t=this.getData();t.isItemCollection()||t.isCollectionCollection()?await this.addApiCollection_():(t.isItem()||t.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){let e=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(e=[this.displayWebMapLink_]);let t=this.data_.getLinksWithRels(e);return Array.isArray(this.displayWebMapLink_)?t=this.displayWebMapLink_.map(r=>{if(typeof r=="string"){const n=t.find(s=>s.id===r);return n||null}return r}).filter(r=>!!r):t.sort((r,n)=>{const s=e.indexOf(r.rel),o=e.indexOf(n.rel);return s-o}),t}async setAssets(e){Array.isArray(e)?this.assets_=e.map(t=>typeof t=="string"?this.getData().getAsset(t):t instanceof mc?t:new mc(t)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const e=this.boundsLayer_.getMapInternal();if(!e)return;const t=e.getView();if(!t)return;const r=this.getData();if(!r)return;const n=r.getBoundingBox();if(n)return yT(n,"EPSG:4326",t.getProjection())}}Px(bn);window.eoxMapAdvancedOlLayers={...Y8e,STAC:SA};class hJe extends ao{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e==null?void 0:e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const n=new _2().read(e),s=b_e(n,t);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=Mf(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?yl(e,r):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in r?r[a.toLowerCase()]:o});const n=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:n.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=e;return t=="KVP"?l=yl(l,a):l=l.replace(/\{(\w+?)\}/g,function(c,h){return a[h]}),l}}}window.eoxMapAdvancedOlSources={...lWe,WMTSCapabilities:hJe};const uJe=i=>i.map(([e,t])=>{var n,s;if(e==="extent"&&((s=(n=t.value)==null?void 0:n.temporal)==null?void 0:s.interval.length)>0){const o=t.value.temporal.interval[0];Array.isArray(o)&&(typeof o[0]=="string"||typeof o[1]=="string")&&(t.formatted=`${new Date(o[0]).toISOString().substring(0,10)} - ${new Date(o[1]).toISOString().substring(0,10)}`)}t.formatted=t.formatted.replaceAll(new RegExp('(?<!href=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),o=>`<a target="_blank" href="${o}">${o}</a>`);const r=o=>Object.entries(o).filter(([a,l])=>{let c=!0;return l.roles&&(c=l.roles.includes("metadata")),l.rel&&(c=l.rel==="example"),c});return(e==="assets"||e==="links"||e==="providers")&&(t.formatted=r(t.value).map(([o,a])=>`<div class="button-container">
              ${a.description?`<div><p>${a.description}</p></div>`:""}
              <a class="button icon-text small block" target="_blank" href="${a.href||a.url}"
                >${a.name||a.title||o}
                </a>
            </div>`).join("")),["providers","assets","links"].includes(e)&&(t.length=r(t.value).length),[e,t]}),dJe=`
:host {
  display: block;
}
`,fJe=`
${Vf}

:host {
  --color-primary: #004170;
  --color-primary-lighter: color-mix(in srgb, var(--color-primary), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
header h1 {
  font-size: 24px;
  color: var(--color-primary);
}
header h2 {
  font-size: 22px;
  color: var(--color-primary);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#properties ul {
  padding: 0;
}
section#properties > ul {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#properties slot > li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#properties slot:not([name=description]) ul li {
  list-style: none;
}
section#properties .colon {
  margin-right: 4px;
}
section#properties .label {
  font-weight: bold;
}
section#properties ul li,
section#properties ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#properties ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--color-primary);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;var S1,Mhe;function _p(){return Mhe||(Mhe=1,S1={locales:[],translate:null,format(e,t=null){if(t)for(let r in t)e=e.replaceAll(`{${r}}`,t[r]);return e}}),S1}var C1,Rhe;function Iy(){if(Rhe)return C1;Rhe=1;const i=_p(),e={e(t){return typeof t!="string"&&(t=String(t)),t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(t,r=null){return typeof i.translate=="function"?i.translate(t,r):i.format(t,r)},toNothing(t=null){return t===null&&(t=e.t("n/a")),`<i class="null">${t}</i>`},toList(t,r=!1,n=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(t)||(t=[t]),r&&(t=t.slice(0),typeof r=="function"?t.sort(r):t.sort(),s===null&&(o="ol")),typeof n=="function"&&(t=t.map(n)),t.length===0?e.toNothing():t.length===1?t[0]:`<${o}><li>${t.join("</li><li>")}</li></${o}>`},toLink(t,r="",n="",s="_blank"){return r||(t.length>50?r=t.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"/[]/"+o[4]:o[1]}):r=t.replace(/^\w+:\/\//i,"")),`<a href="${e.e(t)}" rel="${e.e(n)}" target="${e.e(s)}">${e.e(r)}</a>`},toObject(t,r=null,n=null,s=[],o=null,a=[]){let l="<dl>",c=Array.isArray(s)&&s.length>=2?s:Object.keys(t);for(let h of c){if(!(h in t)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([h])))continue;let u;typeof n=="function"?u=n(h,t):u=e.formatKey(h,!0);let d=t[h];typeof r=="function"&&(d=r(d,h,t)),l+=`<dt>${u}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(t,r){return`<abbr title="${e.e(r)}">${e.e(t)}</abbr>`},isObject(t){return typeof t=="object"&&t===Object(t)&&!Array.isArray(t)},formatKey(t,r=!1){if(t.includes("/"))return e.e(e.t(t));r===!1&&(t=t.replace(/^[\w-]+:/i,""));let n=t.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return e.e(e.t(n))},hexToUint8(t){if(t.length===0||t.length%2!==0)throw new Error(`The string "${t}" is not valid hex.`);return new Uint8Array(t.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(t){return t.reduce((r,n)=>r+n.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(t){return t.reduce((r,n)=>Object.keys(n).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),r),[])},unit(t,r=""){return typeof r=="string"&&r.length>0?(r=e.t(r),`${t}&nbsp;<span class="unit">${r}</unit>`):t}};return C1=e,C1}const i_=Iy(),pJe=_p(),wg={fields(i){let e=["extensions","metadata","links","assets"];for(let t of e)for(let r in i[t])i[t][r]=wg.field(i[t][r],i[t],i);return i},field(i,e={},t={}){if(typeof i=="string")return{label:i};if(typeof i.alias=="string"){let r=e[i.alias]||t.metadata[i.alias];if(!r)throw new Error("Alias is invalid: "+i.alias);return Object.assign(i,wg.field(r,e,t))}if(i_.isObject(i.items)){let r=[];for(let n in i.items)i.items[n]=wg.field(i.items[n],e,t),r.push(Object.assign({key:n},i.items[n]));i.itemOrder=r.sort((n,s)=>n.id===!0?-1:s.id===!0?1:typeof n.order=="number"&&typeof s.order=="number"?n.order-s.order:i_.t(n.label).localeCompare(i_.t(s.label),pJe.locales)).map(n=>n.key)}if(i_.isObject(i.properties))for(let r in i.properties)i.properties[r]=wg.field(i.properties[r],e,t);return i}};var gJe=wg;const ig=gJe,Pve={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(i){i=ig.fields(i);for(let e in this.fields)Object.assign(this.fields[e],i[e])},getDependency(i){return this.dependencies[i]||console.warn(`Dependency '${i}' not registered.`),this.dependencies[i]},addDependency(i,e){this.dependencies[i]=e},addExtension(i,e){this.fields.extensions[i]=ig.field(e,this.fields.extensions)},addMetadataField(i,e){this.fields.metadata[i]=ig.field(e,this.fields.metadata)},addLinkField(i,e){this.fields.links[i]=ig.field(e,this.fields.links)},addAssetField(i,e){this.fields.assets[i]=ig.field(e,this.fields.assets)},addMetadataFields(i){for(var e in i)Pve.addMetadataField(e,i[e])},getExtension(i){return this.fields.extensions[i]?this.fields.extensions[i]:{}},getSpecification(i,e=null){let t={};return e==="assets"&&this.fields.assets[i]?t=this.fields.assets[i]:e==="links"&&this.fields.links[i]?t=this.fields.links[i]:this.fields.metadata[i]&&(t=this.fields.metadata[i]),t}};var CA=Pve;const mJe={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},yJe={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"}},_Je={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},vJe={id:"Identifier",keywords:"Keywords",datetime:{label:"Time of Data",format:"Timestamp",summary:!1},title:{label:"Title",summary:!1},description:{label:"Description",format:"CommonMark",summary:!1},start_datetime:{label:"Time of Data begins",format:"Timestamp",summary:!1},end_datetime:{label:"Time of Data ends",format:"Timestamp",summary:!1},created:{label:"Created",format:"Timestamp",summary:"r"},updated:{label:"Updated",format:"Timestamp",summary:"r"},published:{label:"Published",format:"Timestamp",summary:"r"},expires:{label:"Expires",format:"Timestamp",summary:"r"},unpublished:{label:"Unpublished",format:"Timestamp",summary:"r"},license:{label:"License",format:"License",summary:!1},providers:{label:"Providers",format:"Providers",summary:!1},platform:"Platform",instruments:{label:"Instruments",format:"CSV"},constellation:"Constellation",mission:"Mission",gsd:{label:"GSD",explain:"Ground Sample Distance",unit:"m"},version:{label:"Data Version",summary:!1},deprecated:{label:"Deprecated",summary:!1},experimental:{label:"Experimental",summary:!1},language:{label:"Current Language",ext:"language",summary:"v",properties:{name:{label:"Name"},alternate:{label:"Alternate Name"},code:{label:"Code"},dir:{label:"Direction",explain:"Reading and writing direction",mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},languages:{label:"Available Languages",ext:"language",summary:!1,items:{name:{label:"Name",sortable:!0,order:0},alternate:{label:"Alternate Name",sortable:!0,order:1},code:{label:"Code",sortable:!0,order:2},dir:{label:"Direction",explain:"Reading and writing direction",sortable:!0,order:3,mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},contacts:{label:"Contacts",ext:"contacts",summary:"v",items:{name:{label:"Name"},identifier:{label:"Identifier"},position:{label:"Position"},organization:{label:"Organization"},logo:{label:"Logo",format:"Image"},phones:{label:"Phone",items:{value:{label:"Number",format:"Phone",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal",fax:"Fax"}}}},emails:{label:"Email",items:{value:{label:"Address",format:"Email",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal"}}}},addresses:{label:"Postal Addresses",format:"Address",items:{deliveryPoint:{label:"Street / House",order:0},city:{label:"City",order:1},administrativeArea:{label:"State / Province",order:2},postalCode:{label:"Postal Code",order:3},country:{label:"Country",order:4}}},links:{label:"Additional Resources",format:"Link"},contactInstructions:"Further Instructions",roles:{label:"Types",format:"CSV"}}},themes:{label:"Themes",ext:"themes",summary:!1,items:{scheme:{label:"Vocabulary",order:0,format:"Url"},concepts:{label:"Terms",order:1,format:"Concepts",items:{id:{label:"Identifier",order:0},title:{label:"Title",order:1},description:{label:"Description",order:2},url:{label:"URL",order:3,format:"Url"}}}}},crs:{label:"CRS",format:"CRS",explain:"Coordinate Reference System"},"anon:size":{label:"Uncertainty",unit:"",explain:"The size of one side of the anonymized bounding box"},"anon:warning":{label:"Warning",summary:!1},"classification:classes":{summary:!1,label:"Classes",items:{color_hint:{label:"Color",order:0,format:"HexColor"},value:{label:"Value",order:1},title:{label:"Title",order:2},name:{label:"Identifier",order:3},description:{label:"Description",order:4,format:"CommonMark"},nodata:{label:"No-data value",order:5,default:!1}}},"classification:bitfields":{summary:!1,label:"Bit Mask",items:{name:{label:"Name",order:0},offset:{label:"Offset",explain:"Offset to the first bit",order:1},length:{label:"Number of bits",order:2},description:{label:"Description",order:3,format:"CommonMark"},classes:{alias:"classification:classes"},roles:{label:"Purpose"}}},"cube:dimensions":{label:"Dimensions",summary:!1,listWithKeys:!0,items:{type:{label:"Type",order:0},axis:{label:"Axis",order:1},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},bbox:{alias:"proj:bbox",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:5},geometry_types:{label:"Geometry Types",order:5},reference_system:{label:"Reference System",explain:"Coordinate / Temporal / Other Reference System",order:6}}},"cube:variables":{label:"Variables",summary:!1,listWithKeys:!0,items:{dimensions:{label:"Dimensions",order:0},type:{label:"Type",order:1,mapping:{data:"Measured values",auxiliary:"Coordinate data"}},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:6}}},"eo:bands":{label:"Spectral Bands",items:{name:{label:"Name",sortable:!0,id:!0,order:0},common_name:{label:"Common Name",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2},center_wavelength:{label:"Wavelength",explain:"The center wavelength of the band",unit:"m",sortable:!0,order:5},full_width_half_max:{label:"FWHM",explain:"Full Width Half Max",unit:"m",sortable:!0,order:6},gsd:{alias:"gsd",sortable:!0,order:3},cloud_cover:{alias:"eo:cloud_cover",sortable:!0,order:4},solar_illumination:{label:"Solar Illumination",sortable:!0,order:7,unit:"W/m/m"},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"eo:cloud_cover":{label:"Cloud Cover",unit:"%"},"eo:snow_cover":{label:"Snow/Ice Cover",unit:"%"},"forecast:reference_datetime":{label:"Reference Time",format:"Timestamp",summary:"r"},"forecast:horizon":{label:"Forecast Horizon",explain:"The time between the reference time and the forecast time",format:"Duration",summary:"r"},"forecast:duration":{label:"Forecast Length",format:"Duration",summary:"r"},"file:bits_per_sample":"Bits per Sample","file:byte_order":"Byte Order","file:checksum":{label:"Checksum",format:"Checksum",summary:!1},"file:data_type":{label:"Data Type of Values",format:"FileDataType"},"file:header_size":{label:"Header Size",format:"FileSize",summary:!1},"file:nodata":{label:"No-Data Values",format:"CSV",summary:!1},"file:size":{label:"Size",format:"FileSize",summary:!1},"file:unit":"Unit of Values","file:values":{label:"Map of Values",summary:!1,items:{values:{label:"Values",format:"CSV",order:1},summary:{label:"Summary",order:0}}},"file:local_path":{label:"Local Path",summary:!1},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{label:"System Environment",mapping:{OR:"Operational system, real-time data",OT:"Operational system, test data",IR:"Test system, real-time data",IT:"Test system, test data",IP:"Test system, playback data",IS:"Test system, simulated data"}},"goes:image_type":{label:"Area",mapping:{"FULL DISK":"The Americas (full disk)",CONUS:"North America (continental US)",MESOSCALE:"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{label:"Area in Central/South America",mapping:{1:"Region 1",2:"Region 2"}},"goes:mode":{label:"Capture Mode",mapping:{3:"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)",4:"4: 1x full disk (every 5 minutes)",6:"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{label:"Time Threshold in a Group",explain:"Lightning group maximum time difference among lightning events in a group",unit:"s"},"goes:flash_time_threshold":{label:"Time Threshold in a Flash",explain:"Lightning flash maximum time difference among lightning events in a flash",unit:"s"},"goes:lightning_wavelength":{label:"Central Wavelength",unit:"nm"},"goes:yaw_flip_flag":{label:"Yaw Flip Configuration",explain:"Flag indicating that the spacecraft is operating in yaw flip configuration.",mapping:{0:"Upright",1:"Neither",2:"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{label:"Satellite Subpoint Latitude",unit:"N"},"goes:nominal_satellite_subpoint_lon":{label:"Satellite Subpoint Longitude",unit:"E"},"goes:nominal_satellite_height":{label:"Satellite Height",explain:"Nominal satellite height above GRS 80 ellipsoid",unit:"km"},"goes:percent_navigated_L1b_events":{label:"Events navigated by Instrument",format:"Percent0to1",unit:"%"},"goes:percent_uncorrectable_L0_errors":{label:"Data Lost",format:"Percent0to1",unit:"%"},"grid:code":{label:"Grid",format:"GridCode"},"raster:bands":{label:"Bands",items:{nodata:{alias:"file:nodata"},sampling:{label:"Sampling",mapping:{area:"Area",point:"Point (at pixel center)"}},data_type:{alias:"file:data_type"},bits_per_sample:{alias:"file:bits_per_sample"},spatial_resolution:{label:"Resolution",explain:"Average spatial resolution",unit:"m"},statistics:{label:"Statistics",items:{mean:"Average",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stdev:{label:"Std. Dev.",explain:"Standard Deviation"},valid_percent:{label:"Valid",explain:"Percentage of valid pixels",unit:"%"}}},unit:{alias:"file:unit"},scale:"Scale",offset:"Offset",histogram:{label:"Histogram",custom:!0},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"label:properties":{label:"Properties",null:"raster data"},"label:classes":{label:"Classes",items:{name:{label:"Name",null:"raster-formatted",sortable:!0,id:!0},classes:"Classes"}},"label:description":{label:"Description",format:"CommonMark",summary:!1},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{label:"Overviews",summary:!1,items:{property_key:{label:"Property Key",id:!0},counts:{label:"Counts",custom:!0},statistics:{label:"Statistics",custom:!0}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{label:"Pass Number",mapping:{1:"1 (less latency / less gauges)",2:"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{label:"Accumulation Period",unit:"h"},"noaa_mrms_qpe:region":{label:"Region",mapping:{CONUS:"Continental US",HAWAII:"Hawaii",GUAM:"Guam",ALASKA:"Alaska",CARIB:"Caribbean Islands"}},"openeo:status":"Processing Status",api_version:{label:"API Version",ext:"openeo"},backend_version:{label:"Back-End Version",ext:"openeo"},production:{label:"Production-Ready",ext:"openeo"},endpoints:{label:"Supported Endpoints",ext:"openeo",summary:!1,items:{path:{label:"Path Template",order:0},methods:{label:"HTTP Methods",order:1,format:"CSV"}}},billing:{label:"Billing",ext:"openeo",custom:!0,summary:!1},"order:status":{label:"Status",mapping:{orderable:"Orderable (data can be ordered)",ordered:"Ordered (preparing to deliver data)",pending:"Pending (waiting for activation)",shipping:"Shipping (data is getting processed)",succeeded:"Delivered (data is available)",failed:"Failed (unable to deliver)",canceled:"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{label:"Submitted",format:"Timestamp",summary:"r"},"order:expiration_date":{alias:"expires"},"pc:count":{label:"Points",explain:"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{label:"Schemas",summary:!1,items:{name:{label:"Name",sortable:!0,id:!0},size:{label:"Size",unit:"bytes",sortable:!0},type:{label:"Type",sortable:!0}}},"pc:density":"Density","pc:statistics":{label:"Statistics",summary:"s",items:{name:{label:"Name",id:!0},position:"Position",average:"Average",count:"Count",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stddev:{label:"Std. Dev.",explain:"Standard Deviation"},variance:"Variance"}},"processing:expression":{label:"Processing Instructions",summary:!1},"processing:lineage":{label:"Lineage",format:"CommonMark",summary:!1},"processing:level":"Level","processing:facility":"Facility","processing:software":{label:"Software",format:"Software",summary:!1},"proj:epsg":{label:"EPSG Code",format:"EPSG",summary:"v"},"proj:wkt2":{label:"WKT2",explain:"Well-Known Text, version 2",format:"WKT2",summary:!1},"proj:projjson":{label:"PROJJSON",explain:"JSON encoding of WKT2",format:"PROJJSON",summary:!1},"proj:geometry":{label:"Footprint",custom:!0,summary:!1},"proj:bbox":{label:"Bounding Box",custom:!0,summary:!1},"proj:centroid":{label:"Centroid",custom:!0,summary:!1},"proj:shape":{label:"Image Dimensions",format:"Shape",summary:!1},"proj:transform":{label:"Transformation Matrix",format:"Transform",summary:!1},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{label:"Center Frequency",unit:"GHz"},"sar:polarizations":{label:"Polarizations",format:"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{label:"Range Resolution",unit:"m"},"sar:resolution_azimuth":{label:"Azimuth Resolution",unit:"m"},"sar:pixel_spacing_range":{label:"Range Pixel Spacing",unit:"m"},"sar:pixel_spacing_azimuth":{label:"Azimuth Pixel Spacing",unit:"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{label:"ENL",explain:"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{label:"Int. Designator",explain:"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{label:"Abs. Orbit Number",explain:"Absolute Orbit Number"},"sat:relative_orbit":{label:"Rel. Orbit Number",explain:"Relative Orbit Number"},"sat:anx_datetime":{label:"ANX Time",explain:"Ascending Node Crossing time",summary:"r"},"sci:doi":{label:"DOI",format:"DOI"},"sci:citation":"Citation","sci:publications":{label:"Publications",summary:!1,items:{citation:{label:"Publication",sortable:!0,order:0},doi:{label:"DOI",format:"DOI",sortable:!0,order:1}}},"ssys:targets":"Target Body","storage:platform":{label:"Provider",mapping:{ALIBABA:"Alibaba Cloud",AWS:"Amazon AWS",AZURE:"Microsoft Azure",GCP:"Google Cloud Platform",IBM:"IBM Cloud",ORACLE:"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{label:"Columns",items:{name:{label:"Name",sortable:!0,id:!0,order:0},type:{label:"Data Type",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{label:"Tables",summary:!1,listWithKeys:!0,items:{name:{label:"Name",sortable:!0,id:!0,order:0},description:{label:"Description",format:"CommonMark",order:1}}},"tiles:tile_matrix_sets":{label:"Tile Matrix Sets",custom:!0,summary:!1},"tiles:tile_matrix_set_links":{label:"Tile Matrix Set Links",custom:!0,summary:!1},"view:off_nadir":{label:"Off-Nadir Angle",unit:""},"view:incidence_angle":{label:"Incidence Angle",unit:""},"view:azimuth":{label:"Viewing Azimuth",unit:""},"view:sun_azimuth":{label:"Sun Azimuth",unit:""},"view:sun_elevation":{label:"Sun Elevation",unit:""},"pl:black_fill":{label:"Unfilled Image Parts",unit:"%"},"pl:clear_percent":{label:"Clear Sky",unit:"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{label:"Spatial Resolution",unit:"m"},"pl:publishing_stage":{label:"Publishing Stage",mapping:{preview:"Preview",standard:"Standard",finalized:"Finalized"}},"pl:quality_category":{label:"Quality Category",mapping:{standard:"Standard",test:"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{label:"Type",mapping:{image:"Single image",image_collection:"Image collection",table:"Table"}},"gee:cadence":"Cadence","gee:schema":{label:"Variables",items:{name:"Name",description:"Description",type:"Data Type"},summary:!1},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{label:"Terms of Use",format:"CommonMark",summary:!1},"gee:visualizations":{label:"Visualizations",custom:!0,summary:!1},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{label:"WRS Type",explain:"Worldwide Reference System Type"},"landsat:wrs_path":{label:"WRS Path",explain:"Worldwide Reference System Path"},"landsat:wrs_row":{label:"WRS Row",explain:"Worldwide Reference System Row"},"landsat:cloud_cover_land":{label:"Land Cloud Cover",unit:"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{label:"Summary",summary:!1},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{label:"Product ID",summary:"s"},"sentinel:data_coverage":{label:"Data Coverage",unit:"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{label:"Processing Level",explain:"Geolocation precision level",mapping:{L2:"Geolocation using only satellite telemetry",L3:"Control points used to geolocate image, no terrain correction",L4:"Control points used to geolocate image, orthorectified"},summary:"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{label:"Specification",mapping:{SR:"Surface Reflectance (Optical)",ST:"Surface Temperature (Optical)",NRB:"Normalized Radar Backscatter (SAR)",POL:"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{label:"Platform Altitude",unit:"m"},"card4l:incidence_angle_near_range":{label:"Incidence Angle (near)",unit:""},"card4l:incidence_angle_far_range":{label:"Incidence Angle (far)",unit:""},"card4l:noise_equivalent_intensity":{label:"Noise Equivalent Intensity",unit:"dB"},"card4l:mean_faraday_rotation_angle":{label:"Mean Faraday Rotation",unit:""},"card4l:speckle_filtering":{label:"Speckle Filtering",custom:!0,summary:!1,null:"not applied"},"card4l:relative_rtc_accuracy":{label:"Rel. RTC Accuracy",explain:"Relative accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:absolute_rtc_accuracy":{label:"Abs. RTC Accuracy",explain:"Absolute accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:northern_geometric_accuracy":{label:"Northern Geometric Accuracy",unit:"m"},"card4l:eastern_geometric_accuracy":{label:"Eastern Geometric Accuracy",unit:"m"},"card4l:ellipsoidal_height":{label:"Ellipsoidal Height",unit:"m"},"geoadmin:variant":{label:"Product Variant",mapping:{krel:"RGB color with relief",komb:"RGB color without relief",kgrel:"Grayscale with relief",kgrs:"Grayscale without relief"}},"href:servers":{label:"Servers",ext:"web-map-links"},"pmtiles:layers":{label:"Layers",ext:"web-map-links"},"wms:layers":{label:"Layers",ext:"web-map-links"},"wms:styles":{label:"Styles",ext:"web-map-links"},"wms:dimensions":{label:"Dimensions",ext:"web-map-links"},"wms:transparent":{label:"Transparency",ext:"web-map-links"},"wmts:layer":{label:"Layers",ext:"web-map-links"},"wmts:dimensions":{label:"Dimensions",ext:"web-map-links"}},bJe={extensions:mJe,links:yJe,assets:_Je,metadata:vJe};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tl=function(){return tl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},tl.apply(this,arguments)},qh="\\d+(?:[\\.,]\\d+)?",xJe="("+qh+"W)",wJe="("+qh+"Y)?("+qh+"M)?("+qh+"D)?",EJe="T("+qh+"H)?("+qh+"M)?("+qh+"S)?",SJe="^P(?:"+xJe+"|"+wJe+"(?:"+EJe+")?)$",CJe=new RegExp(SJe),kve=["weeks","years","months","days","hours","minutes","seconds"],Ove={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},TJe=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),AJe=function(i){var e=i.match(CJe);if(!e)throw new Error("Invalid duration string");var t=e.slice(1).reduce(function(r,n,s){return r[kve[s]]=parseFloat(n)||0,r},{});return t},MJe=function(i){return i.weeks&&i.weeks>0?Object.assign({},TJe,{weeks:i.weeks}):kve.reduce(function(e,t){var r;return tl(tl({},e),(r={},r[t]=i[t]||0,r))},{})},TA={locales:{},options:{},setLocales:function(i,e){this.locales=tl(tl({},this.locales),i),e&&(this.options=tl(tl({},this.options),e))},getLangConfig:function(i){var e=this.locales[i];if(!e&&this.options.fallbackLocale&&(e=this.locales[this.options.fallbackLocale]),!e)throw new Error("isoDuration: Translations for language: "+i+" are not provided");return e}},RJe=function(i){for(var e=["years","months","days"],t="",r=0,n=e;r<n.length;r++){var s=n[r];i[s]&&(t+=""+i[s]+Ove[s])}return t},LJe=function(i){for(var e=["hours","minutes","seconds"],t="",r=0,n=e;r<n.length;r++){var s=n[r];i[s]&&(t+=""+i[s]+Ove[s])}return t},IJe=function(i){if(i.weeks>0)return"P"+i.weeks+"W";var e="P",t=RJe(i);t&&(e+=t);var r=LJe(i);return r&&(e+="T"+r),!t&&!r&&(e+="0D"),e},PJe=function(i,e){var t=TA.getLangConfig(e);return i.weeks+" "+t.weeks(i.weeks)},kJe=function(i,e,t){for(var r=TA.getLangConfig(e),n="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],c=i[l];if(c&&(n!==""&&(n+=" "),n+=c+" "+r[l](c),o++,t&&t.largest&&t.largest<=o))break}return n},OJe=function(i,e,t){return i.weeks>0?PJe(i,e):kJe(i,e,t)},T1=["seconds","minutes","hours","days","months"],r_=function(i){return function(e){return{nextUnitValue:Math.floor(e/i),value:e%i}}},Lhe=function(i,e){return new Date(e,i+1,0).getDate()},DJe={seconds:r_(60),minutes:r_(60),hours:r_(24),days:function(i,e){for(var t=e?new Date(e.getTime()):new Date,r=i,n=0,s=Lhe(t.getMonth(),t.getFullYear());r>s;)r=r-s,n++,t.setMonth(t.getMonth()+1),s=Lhe(t.getMonth(),t.getFullYear());return{nextUnitValue:n,value:r}},months:r_(12)},FJe=function(i,e){for(var t=tl({},i),r=0;r<T1.length;r++){var n=T1[r],s=t[n];if(s>0){var o=DJe[n](s,e);if(t[n]=o.value,o.nextUnitValue){var a=n==="months"?"years":T1[r+1];t[a]=t[a]+o.nextUnitValue}}}return t},Ihe=function(){function i(e){this.durationObj=e}return i.prototype.parse=function(){return this.durationObj},i.prototype.toString=function(){return IJe(this.durationObj)},i.prototype.humanize=function(e,t){return OJe(this.durationObj,e,t)},i.prototype.normalize=function(e){return this.durationObj=FJe(this.durationObj,e),this},i.prototype.isEmpty=function(){var e=this;return Object.keys(this.durationObj).every(function(t){return e.durationObj[t]===0})},i}();function NJe(i){return i<=2?0:i>2&&i<11?1:0}var $Je={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return["",""][NJe(i)]},seconds:function(i){return i===1?"":""},decimal:","};function ar(i){return Math.floor(i)!==i?2:i%100>=5&&i%100<=20||i%10>=5&&i%10<=9||i%10===0?0:i%10===1?1:i>1?2:0}var BJe={years:function(i){return["","",""][ar(i)]},months:function(i){return["","",""][ar(i)]},weeks:function(i){return["","",""][ar(i)]},days:function(i){return["","",""][ar(i)]},hours:function(i){return["","",""][ar(i)]},minutes:function(i){return["","",""][ar(i)]},seconds:function(i){return["","",""][ar(i)]},decimal:","},jJe={years:function(i){return"any"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"os")},weeks:function(i){return"setman"+(i===1?"a":"es")},days:function(i){return"di"+(i===1?"a":"es")},hours:function(i){return"hor"+(i===1?"a":"es")},minutes:function(i){return"minut"+(i===1?"":"s")},seconds:function(i){return"segon"+(i===1?"":"s")},decimal:","};function Yn(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&i%100<10?2:3}var zJe={years:function(i){return["rok","roku","roky","let"][Yn(i)]},months:function(i){return["msc","msce","msce","msc"][Yn(i)]},weeks:function(i){return["tden","tdne","tdny","tdn"][Yn(i)]},days:function(i){return["den","dne","dny","dn"][Yn(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodin"][Yn(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][Yn(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][Yn(i)]},decimal:","},GJe={years:function(){return"r"},months:function(i){return"mned"+(i===1?"":"er")},weeks:function(i){return"uge"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"e")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minut"+(i===1?"":"ter")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},UJe={years:function(i){return"Jahr"+(i===1?"":"e")},months:function(i){return"Monat"+(i===1?"":"e")},weeks:function(i){return"Woche"+(i===1?"":"n")},days:function(i){return"Tag"+(i===1?"":"e")},hours:function(i){return"Stunde"+(i===1?"":"n")},minutes:function(i){return"Minute"+(i===1?"":"n")},seconds:function(i){return"Sekunde"+(i===1?"":"n")},decimal:","},VJe={years:function(i){return"year"+(i===1?"":"s")},months:function(i){return"month"+(i===1?"":"s")},weeks:function(i){return"week"+(i===1?"":"s")},days:function(i){return"day"+(i===1?"":"s")},hours:function(i){return"hour"+(i===1?"":"s")},minutes:function(i){return"minute"+(i===1?"":"s")},seconds:function(i){return"second"+(i===1?"":"s")},decimal:"."},qJe={years:function(i){return"ao"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"es")},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"da"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},HJe={years:function(i){return"aasta"+(i===1?"":"t")},months:function(i){return"kuu"+(i===1?"":"d")},weeks:function(i){return"ndal"+(i===1?"":"at")},days:function(i){return"pev"+(i===1?"":"a")},hours:function(i){return"tund"+(i===1?"":"i")},minutes:function(i){return"minut"+(i===1?"":"it")},seconds:function(i){return"sekund"+(i===1?"":"it")},decimal:","},WJe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},YJe={years:function(i){return i===1?"vuosi":"vuotta"},months:function(i){return i===1?"kuukausi":"kuukautta"},weeks:function(i){return"viikko"+(i===1?"":"a")},days:function(i){return"piv"+(i===1?"":"")},hours:function(i){return"tunti"+(i===1?"":"a")},minutes:function(i){return"minuutti"+(i===1?"":"a")},seconds:function(i){return"sekunti"+(i===1?"":"a")},decimal:","},XJe={years:function(){return"r"},months:function(i){return i===1?"mnaur":"mnair"},weeks:function(i){return i===1?"vika":"vikur"},days:function(i){return i===1?"dagur":"dagar"},hours:function(i){return i===1?"tmi":"tmar"},minutes:function(i){return i===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},ZJe={years:function(i){return"an"+(i>=2?"s":"")},months:function(){return"mois"},weeks:function(i){return"semaine"+(i>=2?"s":"")},days:function(i){return"jour"+(i>=2?"s":"")},hours:function(i){return"heure"+(i>=2?"s":"")},minutes:function(i){return"minute"+(i>=2?"s":"")},seconds:function(i){return"seconde"+(i>=2?"s":"")},decimal:","},KJe={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return i===1?"":""},seconds:function(i){return i===1?"":""},decimal:","},JJe={years:function(i){return i===1?"":""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(i){return i===1?"":""},hours:function(i){return i===1?"":""},minutes:function(i){return i===1?"":""},seconds:function(i){return i===1?"":""},decimal:"."},QJe={years:function(i){return i%10===2||i%10===3||i%10===4?"godine":"godina"},months:function(i){return i===1?"mjesec":i===2||i===3||i===4?"mjeseca":"mjeseci"},weeks:function(i){return i%10===1&&i!==11?"tjedan":"tjedna"},days:function(i){return i===1?"dan":"dana"},hours:function(i){return i===1?"sat":i===2||i===3||i===4?"sata":"sati"},minutes:function(i){var e=i%10;return(e===2||e===3||e===4)&&(i<10||i>14)?"minute":"minuta"},seconds:function(i){return i===10||i===11||i===12||i===13||i===14||i===16||i===17||i===18||i===19||i%10===5?"sekundi":i%10===1?"sekunda":i%10===2||i%10===3||i%10===4?"sekunde":"sekundi"},decimal:","},eQe={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},tQe={years:function(){return"r"},months:function(i){return"mnu"+(i===1?"ur":"ir")},weeks:function(i){return"vik"+(i===1?"a":"ur")},days:function(i){return"dag"+(i===1?"ur":"ar")},hours:function(i){return"klukkutm"+(i===1?"i":"ar")},minutes:function(i){return"mnt"+(i===1?"a":"ur")},seconds:function(i){return"seknd"+(i===1?"a":"ur")},decimal:"."},iQe={years:function(i){return"ann"+(i===1?"o":"i")},months:function(i){return"mes"+(i===1?"e":"i")},weeks:function(i){return"settiman"+(i===1?"a":"e")},days:function(i){return"giorn"+(i===1?"o":"i")},hours:function(i){return"or"+(i===1?"a":"e")},minutes:function(i){return"minut"+(i===1?"o":"i")},seconds:function(i){return"second"+(i===1?"o":"i")},decimal:","},rQe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},nQe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},sQe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function dd(i){return i===1||i%10===1&&i%100>20?0:Math.floor(i)!==i||i%10>=2&&i%100>20||i%10>=2&&i%100<10?1:2}var oQe={years:function(i){return i%10===0||i%100>=10&&i%100<=20?"met":"metai"},months:function(i){return["mnuo","mnesiai","mnesi"][dd(i)]},weeks:function(i){return["savait","savaits","savaii"][dd(i)]},days:function(i){return["diena","dienos","dien"][dd(i)]},hours:function(i){return["valanda","valandos","valand"][dd(i)]},minutes:function(i){return["minut","minuts","minui"][dd(i)]},seconds:function(i){return["sekund","sekunds","sekundi"][dd(i)]},decimal:","};function bh(i){return i===1||i%10===1&&i%100!==11?0:1}var aQe={years:function(i){return["gads","gadi"][bh(i)]},months:function(i){return["mnesis","mnei"][bh(i)]},weeks:function(i){return["neda","nedas"][bh(i)]},days:function(i){return["diena","dienas"][bh(i)]},hours:function(i){return["stunda","stundas"][bh(i)]},minutes:function(i){return["minte","mintes"][bh(i)]},seconds:function(i){return["sekunde","sekundes"][bh(i)]},decimal:","},lQe={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},cQe={years:function(){return"jaar"},months:function(i){return i===1?"maand":"maanden"},weeks:function(i){return i===1?"week":"weken"},days:function(i){return i===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(i){return i===1?"minuut":"minuten"},seconds:function(i){return i===1?"seconde":"seconden"},decimal:","},hQe={years:function(){return"r"},months:function(i){return"mned"+(i===1?"":"er")},weeks:function(i){return"uke"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"er")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minutt"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","};function xh(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&!(i%100>10&&i%100<20)?2:3}var uQe={years:function(i){return["rok","roku","lata","lat"][xh(i)]},months:function(i){return["miesic","miesica","miesice","miesicy"][xh(i)]},weeks:function(i){return["tydzie","tygodnia","tygodnie","tygodni"][xh(i)]},days:function(i){return["dzie","dnia","dni","dni"][xh(i)]},hours:function(i){return["godzina","godziny","godziny","godzin"][xh(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][xh(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][xh(i)]},decimal:","},dQe={years:function(i){return"ano"+(i===1?"":"s")},months:function(i){return i===1?"ms":"meses"},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"dia"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},fQe={years:function(i){return i===1?"an":"ani"},months:function(i){return i===1?"lun":"luni"},weeks:function(i){return i===1?"sptmn":"sptmni"},days:function(i){return i===1?"zi":"zile"},hours:function(i){return i===1?"or":"ore"},minutes:function(i){return i===1?"minut":"minute"},seconds:function(i){return i===1?"secund":"secunde"},decimal:","},pQe={years:function(i){return["","",""][ar(i)]},months:function(i){return["","",""][ar(i)]},weeks:function(i){return["","",""][ar(i)]},days:function(i){return["","",""][ar(i)]},hours:function(i){return["","",""][ar(i)]},minutes:function(i){return["","",""][ar(i)]},seconds:function(i){return["","",""][ar(i)]},decimal:","},gQe={years:function(i){return["rok","roky","roky","rokov"][Yn(i)]},months:function(i){return["mesiac","mesiace","mesiace","mesiacov"][Yn(i)]},weeks:function(i){return["tde","tdne","tdne","tdov"][Yn(i)]},days:function(i){return["de","dni","dni","dn"][Yn(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodn"][Yn(i)]},minutes:function(i){return["minta","minty","minty","mint"][Yn(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","seknd"][Yn(i)]},decimal:","},mQe={years:function(){return"r"},months:function(i){return"mnad"+(i===1?"":"er")},weeks:function(i){return"veck"+(i===1?"a":"or")},days:function(i){return"dag"+(i===1?"":"ar")},hours:function(i){return"timm"+(i===1?"e":"ar")},minutes:function(i){return"minut"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},yQe={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},_Qe={years:function(i){return["","",""][ar(i)]},months:function(i){return["","",""][ar(i)]},weeks:function(i){return["","",""][ar(i)]},days:function(i){return["","",""][ar(i)]},hours:function(i){return["","",""][ar(i)]},minutes:function(i){return["","",""][ar(i)]},seconds:function(i){return["","",""][ar(i)]},decimal:","},vQe={years:function(){return""},months:function(i){return i===1?"":""},weeks:function(i){return i===1?"":""},days:function(){return""},hours:function(i){return i===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},bQe={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},xQe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},wQe={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function Dve(i){return typeof i=="string"?new Ihe(AJe(i)):new Ihe(MJe(i))}Dve.setLocales=function(i,e){TA.setLocales(i,e)};const EQe=Object.freeze(Object.defineProperty({__proto__:null,ar:$Je,bg:BJe,ca:jJe,cs:zJe,da:GJe,de:UJe,en:VJe,es:qJe,et:HJe,fa:WJe,fi:YJe,fo:XJe,fr:ZJe,gr:KJe,he:JJe,hr:QJe,hu:eQe,is:tQe,isoDuration:Dve,it:iQe,ja:rQe,ko:nQe,lo:sQe,lt:oQe,lv:aQe,ms:lQe,nl:cQe,no:hQe,pl:uQe,pt:dQe,ro:fQe,ru:pQe,sk:gQe,sv:mQe,tr:yQe,uk:_Qe,ur:vQe,vi:bQe,zhCN:xQe,zhTW:wQe},Symbol.toStringTag,{value:"Module"})),SQe=Df(EQe);var n_={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Phe;function CQe(){if(Phe)return n_;Phe=1;var i=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;n_.format=o,n_.parse=a;function o(u){if(!u||typeof u!="object")throw new TypeError("argument obj is required");var d=u.parameters,f=u.type;if(!f||!s.test(f))throw new TypeError("invalid type");var p=f;if(d&&typeof d=="object")for(var g,m=Object.keys(d).sort(),y=0;y<m.length;y++){if(g=m[y],!t.test(g))throw new TypeError("invalid parameter name");p+="; "+g+"="+c(d[g])}return p}function a(u){if(!u)throw new TypeError("argument string is required");var d=typeof u=="object"?l(u):u;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var f=d.indexOf(";"),p=f!==-1?d.slice(0,f).trim():d.trim();if(!s.test(p))throw new TypeError("invalid media type");var g=new h(p.toLowerCase());if(f!==-1){var m,y,_;for(i.lastIndex=f;y=i.exec(d);){if(y.index!==f)throw new TypeError("invalid parameter format");f+=y[0].length,m=y[1].toLowerCase(),_=y[2],_.charCodeAt(0)===34&&(_=_.slice(1,-1),_.indexOf("\\")!==-1&&(_=_.replace(r,"$1"))),g.parameters[m]=_}if(f!==d.length)throw new TypeError("invalid parameter format")}return g}function l(u){var d;if(typeof u.getHeader=="function"?d=u.getHeader("content-type"):typeof u.headers=="object"&&(d=u.headers&&u.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function c(u){var d=String(u);if(t.test(d))return d;if(d.length>0&&!e.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(n,"\\$1")+'"'}function h(u){this.parameters=Object.create(null),this.type=u}return n_}var s_={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var khe;function TQe(){return khe||(khe=1,function(i,e){(function(t,r){r(e)})(xr,function(t){function r(S){switch(S._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var n=function(S,I){this.current=S,this.entering=I===!0},s=function(){var S=this.current,I=this.entering;if(S===null)return null;var j=r(S);return I&&j?S._firstChild?(this.current=S._firstChild,this.entering=!0):this.entering=!1:S===this.root?this.current=null:S._next===null?(this.current=S._parent,this.entering=!1):(this.current=S._next,this.entering=!0),{entering:I,node:S}},o=function(S){return{current:S,root:S,entering:!0,next:s,resumeAt:n}},a=function(S,I){this._type=S,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=I,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(S){this._literal=S}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(S){this._destination=S}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(S){this._title=S}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(S){this._info=S}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(S){this._level=S}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(S){this._listData.type=S}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(S){this._listData.tight=S}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(S){this._listData.start=S}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(S){this._listData.delimiter=S}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(S){this._onEnter=S}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(S){this._onExit=S}}),a.prototype.appendChild=function(S){S.unlink(),S._parent=this,this._lastChild?(this._lastChild._next=S,S._prev=this._lastChild,this._lastChild=S):(this._firstChild=S,this._lastChild=S)},a.prototype.prependChild=function(S){S.unlink(),S._parent=this,this._firstChild?(this._firstChild._prev=S,S._next=this._firstChild,this._firstChild=S):(this._firstChild=S,this._lastChild=S)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(S){S.unlink(),S._next=this._next,S._next&&(S._next._prev=S),S._prev=this,this._next=S,S._parent=this._parent,S._next||(S._parent._lastChild=S)},a.prototype.insertBefore=function(S){S.unlink(),S._prev=this._prev,S._prev&&(S._prev._next=S),S._next=this,this._prev=S,S._parent=this._parent,S._prev||(S._parent._firstChild=S)},a.prototype.walker=function(){var S=new o(this);return S};var c={};function h(S){var I,j,H=c[S];if(H)return H;for(H=c[S]=[],I=0;I<128;I++)j=String.fromCharCode(I),/^[0-9a-z]$/i.test(j)?H.push(j):H.push("%"+("0"+I.toString(16).toUpperCase()).slice(-2));for(I=0;I<S.length;I++)H[S.charCodeAt(I)]=S[I];return H}function u(S,I,j){var H,ue,se,Ge,we,Ye="";for(typeof I!="string"&&(j=I,I=u.defaultChars),typeof j>"u"&&(j=!0),we=h(I),H=0,ue=S.length;H<ue;H++){if(se=S.charCodeAt(H),j&&se===37&&H+2<ue&&/^[0-9a-f]{2}$/i.test(S.slice(H+1,H+3))){Ye+=S.slice(H,H+3),H+=2;continue}if(se<128){Ye+=we[se];continue}if(se>=55296&&se<=57343){if(se>=55296&&se<=56319&&H+1<ue&&(Ge=S.charCodeAt(H+1),Ge>=56320&&Ge<=57343)){Ye+=encodeURIComponent(S[H]+S[H+1]),H++;continue}Ye+="%EF%BF%BD";continue}Ye+=encodeURIComponent(S[H])}return Ye}u.defaultChars=";/?:@&=+$,-_.!~*'()#",u.componentChars="-_.!~*'()";var d=u,f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof xr<"u"?xr:typeof self<"u"?self:{};function p(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function g(S,I){return I={exports:{}},S(I,I.exports),I.exports}function m(S){return S&&S.default||S}var y="",_="",v="",x="",w="",T="",A="",R="",L="",P="",F="",B="",b="",E="",C="",M="",O="",D="",U="",z="",Z="",Q="",V="",N="",X="",ne="",fe="&",ve="&",ge="",he="",Ce="",Ue="",Je="",Bi="",ki="",bi="",hs="",co="",oe="",ho="",jo="",Ar="",Fr="",wn="",tn="",uo="",fo="",us="",Nn="",Rl="",ur="",Bc="",Ll="",wu="",Eu="",jc="",zc="",Il="",Gc="",Pl="",zo="",ds="'",Go="",kl="",Uc="",Wi="",fs="",Nr="",En="",Mr="",$n="*",Sn="",yi="",ir="",Bn="",Ol="",Dl="",Ra="",vp="",Oy="",Dy="",Fy="",Su="",$="",Y="",le="",te="",Te="",Xe="",mt="",Re="",Pe="",xt="",Mt="",qe="",Bt="",Cn="",mr="",Qe="",Tt="",et="",ui="",rr="",Yi="",Oi="",Di="",$r="",Br="",po="",bp="",xp="",Vc="",Ny="",wp="",Uo="",qc="",Ep="",Sp="",Cp="",Tp="",$y="",By="",Fl="",Nl="",Vo="",jy="",zy="",Gy="",Hc="",La="",Wc="",Yc="",Cu="",Uy="",Vy="=",Ap="",Mp="",Rp="",Lp="",Ip="",Tu="",Au="",Mu="",Ru="",Lu="",qy="",Iu="",Pu="",ku="",Ou="",Du="",Fu="",Nu="",jr="",ps="",Hy="",Wy="",Xc="",Zc="",Pp="",Kc="",Jc="",$u="",Bu="",ju="",zu="",kp="",Op="",Gu="",Uu="",Vu="",qu="",Hu="",Dp="",Fp="",Qc="",Yy="",Xy="",Zy="",Ky="",W="",pe="",Be="",Ht="",Fi="",Ft="",jn="",eh="",OA="",DA="",FA="",NA="",$A="",BA="",jA="",zA="",GA="",UA="\\",VA="",qA="",HA="",WA="",YA="",XA="",ZA="",KA="",JA="",QA="",eM="",tM="",iM="",rM="",nM="",sM="",oM="",aM="",lM="",cM="",hM="",uM="",dM="",fM="",pM="",gM="",mM="",yM="",_M="",vM="",bM="",xM="",wM="",EM="",SM="",CM="",TM="",AM="",MM="",RM="",LM="",IM="",PM="",kM="",OM="",DM="",FM="",NM="",$M="",BM="",jM="",zM="",GM="",UM="",VM="",qM="",HM="",WM="",YM="",XM="",ZM="",KM="",JM="",QM="",eR="",tR="",iR="",rR="",nR="",sR="",oR="",aR="",lR=":",cR="",hR="",uR="",dR="",fR=",",pR="@",gR="",mR="",yR="",_R="",vR="",bR="",xR="",wR="",ER="",SR="",CR="",TR="",AR="",MR="",RR="",LR="",IR="",PR="",kR="",OR="",DR="",FR="",NR="",$R="",BR="",jR="",zR="",GR="",UR="",VR="",qR="",HR="",WR="",YR="",XR="",ZR="",KR="",JR="",QR="",eL="",tL="",iL="",rL="",nL="",sL="",oL="",aL="",lL="",cL="",hL="",uL="",dL="",fL="",pL="",gL="",mL="",yL="",_L="",vL="",bL="",xL="",wL="",EL="",SL="",CL="",TL="",AL="",ML="",RL="",LL="",IL="",PL="",kL="",OL="",DL="",FL="",NL="",$L="",BL="",jL="",zL="",GL="",UL="",VL="",qL="",HL="",WL="",YL="",XL="",ZL="",KL="",JL="",QL="`",eI="",tI="",iI="",rI="",nI="",sI="",oI="",aI="",lI="",cI="",hI="",uI="",dI="",fI="",pI="",gI="",mI="",yI="",_I="$",vI="",bI="",xI="",wI="",EI="",SI="",CI="",TI="",AI="",MI="",RI="",LI="",II="",PI="",kI="",OI="",DI="",FI="",NI="",$I="",BI="",jI="",zI="",GI="",UI="",VI="",qI="",HI="",WI="",YI="",XI="",ZI="",KI="",JI="",QI="",eP="",tP="",iP="",rP="",nP="",sP="",oP="",aP="",lP="",cP="",hP="",uP="",dP="",fP="",pP="",gP="",mP="",yP="",_P="",vP="",bP="",xP="",wP="",EP="",SP="",CP="",TP="",AP="",MP="",RP="",LP="",IP="",PP="",kP="",OP="",DP="",FP="",NP="",$P="",BP="",jP="",zP="",GP="",UP="",VP="",qP="",HP="",WP="",YP="",XP="",ZP="",KP="",JP="",QP="",ek="",tk="",ik="",rk="",nk="",sk="",ok="",ak="",lk="",ck="",hk="",uk="",dk="",fk="",pk="",gk="",mk="",yk="",_k="",vk="",bk="",xk="",wk="",Ek="",Sk="",Ck="",Tk="",Ak="",Mk="",Rk="",Lk="",Ik="",Pk="",kk="",Ok="=",Dk="",Fk="",Nk="",$k="",Bk="",jk="",zk="",Gk="",Uk="",Vk="",qk="",Hk="",Wk="",Yk="",Xk="",Zk="",Kk="",Jk="",Qk="",eO="",tO="!",iO="",rO="",nO="",sO="",oO="",aO="",lO="",cO="",hO="",uO="",dO="",fO="",pO="",gO="",mO="",yO="",_O="",vO="fj",bO="",xO="",wO="",EO="",SO="",CO="",TO="",AO="",MO="",RO="",LO="",IO="",PO="",kO="",OO="",DO="",FO="",NO="",$O="",BO="",jO="",zO="",GO="",UO="",VO="",qO="",HO="",WO="",YO="",XO="",ZO="",KO="",JO="",QO="",eD="",tD="",iD="",rD="",nD="",sD="",oD="",aD="",lD="",cD="",hD="",uD="",dD="",fD="",pD="",gD="",mD="",yD="",_D="",vD="",bD="",xD="",wD="",ED="",SD="",CD="",TD="",AD="",MD="",RD="",LD="",ID="",PD="",kD="",OD="",DD="",FD="",ND="",$D="",BD="",jD="",zD="",GD="",UD="",VD="",qD="",HD="",WD="`",YD="",XD="",ZD="",KD="",JD="",QD="",eF="",tF="",iF="",rF="",nF="",sF="",oF="",aF="",lF=">",cF=">",hF="",uF="",dF="",fF="",pF="",gF="",mF="",yF="",_F="",vF="",bF="",xF="",wF="",EF="",SF="",CF="",TF="",AF="",MF="",RF="",LF="",IF="",PF="",kF="^",OF="",DF="",FF="",NF="",$F="",BF="",jF="",zF="",GF="",UF="",VF="",qF="",HF="",WF="",YF="",XF="",ZF="",KF="",JF="",QF="",eN="",tN="",iN="",rN="",nN="",sN="",oN="",aN="",lN="",cN="",hN="",uN="",dN="",fN="",pN="",gN="",mN="",yN="",_N="",vN="",bN="",xN="",wN="",EN="",SN="",CN="",TN="",AN="",MN="",RN="",LN="",IN="",PN="",kN="",ON="",DN="",FN="",NN="",$N="",BN="",jN="",zN="",GN="",UN="",VN="",qN="",HN="",WN="",YN="",XN="",ZN="",KN="",JN="",QN="",e3="",t3="",i3="",r3="",n3="",s3="",o3="",a3="",l3="",c3="",h3="",u3="",d3="",f3="",p3="",g3="",m3="",y3="",_3="",v3="",b3="",x3="",w3="",E3="",S3="",C3="",T3="",A3="",M3="",R3="",L3="",I3="",P3="",k3="",O3="",D3="",F3="",N3="",$3="",B3="",j3="",z3="",G3="",U3="",V3="",q3="",H3="",W3="",Y3="",X3="",Z3="",K3="",J3="",Q3="",e$="",t$="",i$="",r$="",n$="",s$="",o$="",a$="",l$="",c$="",h$="",u$="",d$="",f$="",p$="",g$="",m$="",y$="",_$="",v$="",b$="",x$="",w$="",E$="",S$="",C$="",T$="",A$="",M$="",R$="",L$="",I$="",P$="",k$="",O$="",D$="",F$="",N$="",$$="",B$="",j$="",z$="{",G$="[",U$="",V$="",q$="",H$="",W$="",Y$="",X$="",Z$="",K$="{",J$="",Q$="",eB="",tB="",iB="",rB="",nB="",sB="",oB="",aB="",lB="",cB="",hB="",uB="",dB="",fB="",pB="",gB="",mB="",yB="",_B="",vB="",bB="",xB="",wB="",EB="",SB="",CB="",TB="",AB="",MB="",RB="",LB="",IB="",PB="",kB="",OB="",DB="",FB="",NB="",$B="",BB="",jB="",zB="",GB="",UB="",VB="",qB="",HB="",WB="",YB="",XB="",ZB="",KB="",JB="",QB="",e5="",t5="",i5="",r5="",n5="",s5="",o5="",a5="",l5="",c5="",h5="",u5="",d5="",f5="",p5="",g5="",m5="",y5="",_5="",v5="",b5="",x5="",w5="",E5="",S5="",C5="",T5="",A5="",M5="",R5="",L5="",I5="",P5="",k5="",O5="",D5="",F5="",N5="",$5="",B5="",j5="",z5="",G5="",U5="",V5="",q5="",H5="",W5="",Y5="",X5="",Z5="",K5="",J5="",Q5="",ej="",tj="",ij="",rj="",nj="",sj="",oj="",aj="",lj="",cj="",hj="",uj="",dj="_",fj="",pj="",gj="",mj="",yj="",_j="(",vj="",bj="",xj="",wj="",Ej="",Sj="",Cj="",Tj="",Aj="",Mj="",Rj="",Lj="",Ij="",Pj="",kj="",Oj="[",Dj="",Fj="",Nj="",$j="",Bj="",jj="",zj="<",Gj="<",Uj="",Vj="",qj="",Hj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",e4="",t4="",i4="",r4="",n4="",s4="",o4="",a4="",l4="",c4="",h4="",u4="",d4="",f4="",p4="",g4="",m4="",y4="",_4="",v4="",b4="",x4="",w4="",E4="",S4="",C4="*",T4="",A4="",M4="",R4="",L4="",I4="",P4="",k4="",O4="",D4="",F4="",N4="",$4="",B4="",j4="",z4="",G4="",U4="",V4="",q4="",H4="",W4="",Y4="",X4="",Z4="",K4="",J4="",Q4="",ez="",tz="",iz="",rz="",nz="",sz="",oz="",az="",lz="",cz="",hz="",uz="",dz="",fz="",pz="",gz="",mz="",yz="",_z="",vz="",bz="",xz="",wz="",Ez="",Sz="",Cz="",Tz="",Az="",Mz="",Rz="",Lz="",Iz="",Pz="",kz="",Oz="",Dz=`
`,Fz="",Nz="",$z="",Bz="",jz="",zz="",Gz="",Uz="",Vz="",qz="",Hz="",Wz="",Yz="",Xz="",Zz="",Kz="",Jz="",Qz="",eG="",tG="",iG="",rG="",nG="",sG="",oG="",aG="",lG="",cG="",hG="",uG="",dG="",fG="",pG="",gG="",mG="",yG="",_G="",vG="",bG="",xG="",wG="",EG="",SG="",CG="",TG="",AG="",MG="",RG="",LG="",IG="",PG="",kG="",OG="",DG="",FG="",NG="",$G="",BG="",jG="",zG="",GG="",UG="",VG="",qG="",HG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eU="",tU="",iU="",rU="",nU="",sU="",oU="",aU="",lU="",cU="",hU="",uU="",dU="",fU="",pU="",gU="",mU="",yU="",_U="",vU="",bU="",xU="",wU="",EU="",SU="",CU="",TU="",AU="",MU="",RU="",LU="",IU="",PU="",kU="",OU="",DU="",FU="",NU="",$U="",BU="",jU="",zU="",GU="",UU="",VU="",qU="",HU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",e6="",t6="",i6="",r6="",n6="",s6="",o6="",a6="",l6="",c6="",h6="",u6="",d6="",f6="",p6="",g6="",m6="",y6="",_6="",v6="",b6="",x6="",w6="",E6="",S6="",C6="",T6="",A6="",M6="",R6="",L6="",I6="",P6="",k6="",O6="",D6="",F6="",N6="",$6="",B6="",j6="",z6="",G6="",U6="",V6="#",q6="",H6="",W6="",Y6="",X6="",Z6="",K6="",J6="",Q6=">",e8="",t8="",i8="",r8="",n8="<",s8="",o8="",a8="",l8="",c8="",h8="",u8="",d8="",f8="",p8="",g8="",m8="",y8="",_8="",v8="",b8="",x8="",w8="",E8="",S8="",C8="",T8="",A8="",M8="",R8="",L8="",I8="",P8="",k8="",O8="",D8="",F8="",N8="",$8="",B8="",j8="",z8="",G8="",U8="",V8="",q8="",H8="",W8="",Y8="",X8="",Z8="",K8="",J8="",Q8="",eV="",tV="",iV="",rV="",nV="",sV="",oV="",aV="",lV="",cV="",hV="",uV="",dV="",fV="",pV="",gV="",mV="",yV="",_V="",vV="",bV="",xV="",wV="",EV="",SV="",CV="",TV="",AV="",MV="",RV="",LV="",IV="",PV="",kV="",OV="",DV="",FV="",NV="",$V="",BV="",jV="",zV="",GV="",UV="",VV="",qV="%",HV=".",WV="",YV="",XV="",ZV="",KV="",JV="",QV="",eq="",tq="",iq="",rq="",nq="",sq="",oq="",aq="",lq="",cq="",hq="",uq="",dq="",fq="+",pq="",gq="",mq="",yq="",_q="",vq="",bq="",xq="",wq="",Eq="",Sq="",Cq="",Tq="",Aq="",Mq="",Rq="",Lq="",Iq="",Pq="",kq="",Oq="",Dq="",Fq="",Nq="",$q="",Bq="",jq="",zq="",Gq="",Uq="",Vq="",qq="",Hq="",Wq="",Yq="",Xq="",Zq="",Kq="",Jq="",Qq="",eH="",tH="",iH="",rH="",nH="",sH="",oH="",aH="",lH="",cH="",hH="",uH="",dH="",fH="",pH="",gH="",mH="",yH="",_H="",vH="",bH="",xH="",wH="",EH="?",SH="",CH='"',TH='"',AH="",MH="",RH="",LH="",IH="",PH="",kH="",OH="",DH="",FH="",NH="",$H="",BH="",jH="",zH="",GH="",UH="",VH="",qH="",HH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eW="",tW="",iW="",rW="",nW="",sW="",oW="",aW="",lW="}",cW="]",hW="",uW="",dW="",fW="",pW="",gW="",mW="",yW="",_W="}",vW="",bW="",xW="",wW="",EW="",SW="",CW="",TW="",AW="",MW="",RW="",LW="",IW="",PW="",kW="",OW="",DW="",FW="",NW="",$W="",BW="",jW="",zW="",GW="",UW="",VW="",qW="",HW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",e9="",t9="",i9="",r9="",n9="",s9="",o9="",a9="",l9="",c9="",h9="",u9="",d9="",f9="",p9="",g9="",m9="",y9="",_9="",v9="",b9="",x9="",w9="",E9="",S9="",C9="",T9="",A9="",M9="",R9="",L9="",I9="",P9="",k9="",O9="",D9="",F9="",N9="",$9="",B9="",j9="",z9="",G9="",U9=")",V9="",q9="",H9="",W9="",Y9="",X9="",Z9="",K9="",J9="",Q9="]",e7="",t7="",i7="",r7="",n7="",s7="",o7="",a7="",l7="",c7="",h7="",u7="",d7="",f7="",p7="",g7="",m7="",y7="",_7="",v7="",b7="",x7="",w7="",E7="",S7="",C7="",T7="",A7="",M7="",R7="",L7="",I7="",P7="",k7="",O7="",D7="",F7="",N7="",$7="",B7="",j7="",z7=";",G7="",U7="",V7="",q7="",H7="",W7="",Y7="",X7="",Z7="",K7="",J7="",Q7="",eY="",tY="",iY="",rY="",nY="",sY="",oY="",aY="",lY="",cY="",hY="",uY="",dY="",fY="",pY="",gY="",mY="",yY="",_Y="",vY="",bY="",xY="",wY="",EY="",SY="",CY="",TY="",AY="",MY="",RY="",LY="",IY="",PY="",kY="",OY="",DY="",FY="/",NY="",$Y="",BY="",jY="",zY="",GY="",UY="",VY="",qY="",HY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",iX="",rX="",nX="",sX="",oX="",aX="",lX="",cX="",hX="",uX="",dX="",fX="",pX="",gX="",mX="",yX="",_X="",vX="",bX="",xX="",wX="",EX="",SX="",CX="",TX="",AX="",MX="",RX="",LX="",IX="",PX="",kX="",OX="",DX="",FX="",NX="",$X="",BX="",jX="",zX="",GX="",UX="",VX="",qX="",HX="",WX="",YX="",XX="",ZX="",KX="",JX="",QX="",eZ="",tZ="",iZ="",rZ="",nZ="",sZ="",oZ="",aZ="",lZ="",cZ="",hZ="",uZ="",dZ="",fZ="",pZ="",gZ="",mZ="",yZ="",_Z="",vZ="",bZ="",xZ="",wZ="",EZ="",SZ="",CZ="",TZ="",AZ="",MZ="",RZ="",LZ="",IZ="",PZ="",kZ="",OZ="",DZ="",FZ="",NZ="",$Z="",BZ="",jZ="",zZ="	",GZ="",UZ="",VZ="",qZ="",HZ="",WZ="",YZ="",XZ="",ZZ="",KZ="",JZ="",QZ="",eK="",tK="",iK="",rK="",nK="",sK="",oK="",aK="",lK="",cK="",hK="",uK="",dK="",fK="",pK="",gK="",mK="",yK="",_K="",vK="",bK="",xK="",wK="",EK="",SK="",CK="",TK="",AK="",MK="",RK="",LK="",IK="",PK="",kK="",OK="",DK="",FK="",NK="",$K="",BK="",jK="",zK="",GK="",UK="",VK="",qK="",HK="",WK="",YK="",XK="",ZK="",KK="",JK="",QK="",eJ="",tJ="",iJ="",rJ="",nJ="",sJ="",oJ="",aJ="",lJ="",cJ="",hJ="",uJ="",dJ="",fJ="",pJ="",gJ="",mJ="",yJ="",_J="",vJ="",bJ="",xJ="",wJ="",EJ="",SJ="",CJ="",TJ="",AJ="",MJ="",RJ="",LJ="",IJ="",PJ="",kJ="",OJ="",DJ="",FJ="",NJ="",$J="",BJ="",jJ="",zJ="",GJ="",UJ="",VJ="",qJ="_",HJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",iQ="",rQ="",nQ="",sQ="",oQ="",aQ="",lQ="",cQ="",hQ="",uQ="",dQ="",fQ="",pQ="",gQ="",mQ="",yQ="",_Q="",vQ="",bQ="",xQ="",wQ="",EQ="",SQ="",CQ="",TQ="",AQ="",MQ="",RQ="",LQ="",IQ="",PQ="",kQ="",OQ="",DQ="",FQ="",NQ="",$Q="",BQ="",jQ="",zQ="",GQ="",UQ="",VQ="",qQ="",HQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",iee="",ree="",nee="",see="",oee="",aee="",lee="",cee="",hee="",uee="",dee="",fee="",pee="",gee="",mee="",yee="",_ee="",vee="|",bee="",xee="|",wee="",Eee="",See="|",Cee="",Tee="",Aee="",Mee="",Ree="",Lee="",Iee="",Pee="",kee="",Oee="",Dee="",Fee="",Nee="",$ee="",Bee="",jee="",zee="",Gee="",Uee="",Vee="",qee="",Hee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="",tte="",ite="",rte="",nte="",ste="",ote="",ate="",lte="",cte="",hte="",ute="",dte="",fte="",pte="",gte="",mte="",yte="",_te="",vte="",bte="",xte="",wte="",Ete="",Ste="",Cte="",Tte="",Ate="",Mte="",Rte="",Lte="",Ite="",Pte="",kte="",Ote="",Dte="",Fte="",Nte="",$te="",Bte="",jte="",zte="",Gte="",Ute="",Vte="",qte="",Hte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",eie="",tie="",iie="",rie="",nie="",sie="",oie="",aie="",lie="",cie="",hie="",uie="",die="",fie="",pie="",gie="",mie="",yie="",_ie="",vie="",bie="",xie="",wie="",Eie="",Sie="",obe={Aacute:y,aacute:_,Abreve:v,abreve:x,ac:w,acd:T,acE:A,Acirc:R,acirc:L,acute:P,Acy:F,acy:B,AElig:b,aelig:E,af:C,Afr:M,afr:O,Agrave:D,agrave:U,alefsym:z,aleph:Z,Alpha:Q,alpha:V,Amacr:N,amacr:X,amalg:ne,amp:fe,AMP:ve,andand:ge,And:he,and:Ce,andd:Ue,andslope:Je,andv:Bi,ang:ki,ange:bi,angle:hs,angmsdaa:co,angmsdab:oe,angmsdac:ho,angmsdad:jo,angmsdae:Ar,angmsdaf:Fr,angmsdag:wn,angmsdah:tn,angmsd:uo,angrt:fo,angrtvb:us,angrtvbd:Nn,angsph:Rl,angst:ur,angzarr:Bc,Aogon:Ll,aogon:wu,Aopf:Eu,aopf:jc,apacir:zc,ap:Il,apE:Gc,ape:Pl,apid:zo,apos:ds,ApplyFunction:Go,approx:kl,approxeq:Uc,Aring:Wi,aring:fs,Ascr:Nr,ascr:En,Assign:Mr,ast:$n,asymp:Sn,asympeq:yi,Atilde:ir,atilde:Bn,Auml:Ol,auml:Dl,awconint:Ra,awint:vp,backcong:Oy,backepsilon:Dy,backprime:Fy,backsim:Su,backsimeq:$,Backslash:Y,Barv:le,barvee:te,barwed:Te,Barwed:Xe,barwedge:mt,bbrk:Re,bbrktbrk:Pe,bcong:xt,Bcy:Mt,bcy:qe,bdquo:Bt,becaus:Cn,because:mr,Because:Qe,bemptyv:Tt,bepsi:et,bernou:ui,Bernoullis:rr,Beta:Yi,beta:Oi,beth:Di,between:$r,Bfr:Br,bfr:po,bigcap:bp,bigcirc:xp,bigcup:Vc,bigodot:Ny,bigoplus:wp,bigotimes:Uo,bigsqcup:qc,bigstar:Ep,bigtriangledown:Sp,bigtriangleup:Cp,biguplus:Tp,bigvee:$y,bigwedge:By,bkarow:Fl,blacklozenge:Nl,blacksquare:Vo,blacktriangle:jy,blacktriangledown:zy,blacktriangleleft:Gy,blacktriangleright:Hc,blank:La,blk12:Wc,blk14:Yc,blk34:Cu,block:Uy,bne:Vy,bnequiv:Ap,bNot:Mp,bnot:Rp,Bopf:Lp,bopf:Ip,bot:Tu,bottom:Au,bowtie:Mu,boxbox:Ru,boxdl:Lu,boxdL:qy,boxDl:Iu,boxDL:Pu,boxdr:ku,boxdR:Ou,boxDr:Du,boxDR:Fu,boxh:Nu,boxH:jr,boxhd:ps,boxHd:Hy,boxhD:Wy,boxHD:Xc,boxhu:Zc,boxHu:Pp,boxhU:Kc,boxHU:Jc,boxminus:$u,boxplus:Bu,boxtimes:ju,boxul:zu,boxuL:kp,boxUl:Op,boxUL:Gu,boxur:Uu,boxuR:Vu,boxUr:qu,boxUR:Hu,boxv:Dp,boxV:Fp,boxvh:Qc,boxvH:Yy,boxVh:Xy,boxVH:Zy,boxvl:Ky,boxvL:W,boxVl:pe,boxVL:Be,boxvr:Ht,boxvR:Fi,boxVr:Ft,boxVR:jn,bprime:eh,breve:OA,Breve:DA,brvbar:FA,bscr:NA,Bscr:$A,bsemi:BA,bsim:jA,bsime:zA,bsolb:GA,bsol:UA,bsolhsub:VA,bull:qA,bullet:HA,bump:WA,bumpE:YA,bumpe:XA,Bumpeq:ZA,bumpeq:KA,Cacute:JA,cacute:QA,capand:eM,capbrcup:tM,capcap:iM,cap:rM,Cap:nM,capcup:sM,capdot:oM,CapitalDifferentialD:aM,caps:lM,caret:cM,caron:hM,Cayleys:uM,ccaps:dM,Ccaron:fM,ccaron:pM,Ccedil:gM,ccedil:mM,Ccirc:yM,ccirc:_M,Cconint:vM,ccups:bM,ccupssm:xM,Cdot:wM,cdot:EM,cedil:SM,Cedilla:CM,cemptyv:TM,cent:AM,centerdot:MM,CenterDot:RM,cfr:LM,Cfr:IM,CHcy:PM,chcy:kM,check:OM,checkmark:DM,Chi:FM,chi:NM,circ:$M,circeq:BM,circlearrowleft:jM,circlearrowright:zM,circledast:GM,circledcirc:UM,circleddash:VM,CircleDot:qM,circledR:HM,circledS:WM,CircleMinus:YM,CirclePlus:XM,CircleTimes:ZM,cir:KM,cirE:JM,cire:QM,cirfnint:eR,cirmid:tR,cirscir:iR,ClockwiseContourIntegral:rR,CloseCurlyDoubleQuote:nR,CloseCurlyQuote:sR,clubs:oR,clubsuit:aR,colon:lR,Colon:cR,Colone:hR,colone:uR,coloneq:dR,comma:fR,commat:pR,comp:gR,compfn:mR,complement:yR,complexes:_R,cong:vR,congdot:bR,Congruent:xR,conint:wR,Conint:ER,ContourIntegral:SR,copf:CR,Copf:TR,coprod:AR,Coproduct:MR,copy:RR,COPY:LR,copysr:IR,CounterClockwiseContourIntegral:PR,crarr:kR,cross:OR,Cross:DR,Cscr:FR,cscr:NR,csub:$R,csube:BR,csup:jR,csupe:zR,ctdot:GR,cudarrl:UR,cudarrr:VR,cuepr:qR,cuesc:HR,cularr:WR,cularrp:YR,cupbrcap:XR,cupcap:ZR,CupCap:KR,cup:JR,Cup:QR,cupcup:eL,cupdot:tL,cupor:iL,cups:rL,curarr:nL,curarrm:sL,curlyeqprec:oL,curlyeqsucc:aL,curlyvee:lL,curlywedge:cL,curren:hL,curvearrowleft:uL,curvearrowright:dL,cuvee:fL,cuwed:pL,cwconint:gL,cwint:mL,cylcty:yL,dagger:_L,Dagger:vL,daleth:bL,darr:xL,Darr:wL,dArr:EL,dash:SL,Dashv:CL,dashv:TL,dbkarow:AL,dblac:ML,Dcaron:RL,dcaron:LL,Dcy:IL,dcy:PL,ddagger:kL,ddarr:OL,DD:DL,dd:FL,DDotrahd:NL,ddotseq:$L,deg:BL,Del:jL,Delta:zL,delta:GL,demptyv:UL,dfisht:VL,Dfr:qL,dfr:HL,dHar:WL,dharl:YL,dharr:XL,DiacriticalAcute:ZL,DiacriticalDot:KL,DiacriticalDoubleAcute:JL,DiacriticalGrave:QL,DiacriticalTilde:eI,diam:tI,diamond:iI,Diamond:rI,diamondsuit:nI,diams:sI,die:oI,DifferentialD:aI,digamma:lI,disin:cI,div:hI,divide:uI,divideontimes:dI,divonx:fI,DJcy:pI,djcy:gI,dlcorn:mI,dlcrop:yI,dollar:_I,Dopf:vI,dopf:bI,Dot:xI,dot:wI,DotDot:EI,doteq:SI,doteqdot:CI,DotEqual:TI,dotminus:AI,dotplus:MI,dotsquare:RI,doublebarwedge:LI,DoubleContourIntegral:II,DoubleDot:PI,DoubleDownArrow:kI,DoubleLeftArrow:OI,DoubleLeftRightArrow:DI,DoubleLeftTee:FI,DoubleLongLeftArrow:NI,DoubleLongLeftRightArrow:$I,DoubleLongRightArrow:BI,DoubleRightArrow:jI,DoubleRightTee:zI,DoubleUpArrow:GI,DoubleUpDownArrow:UI,DoubleVerticalBar:VI,DownArrowBar:qI,downarrow:HI,DownArrow:WI,Downarrow:YI,DownArrowUpArrow:XI,DownBreve:ZI,downdownarrows:KI,downharpoonleft:JI,downharpoonright:QI,DownLeftRightVector:eP,DownLeftTeeVector:tP,DownLeftVectorBar:iP,DownLeftVector:rP,DownRightTeeVector:nP,DownRightVectorBar:sP,DownRightVector:oP,DownTeeArrow:aP,DownTee:lP,drbkarow:cP,drcorn:hP,drcrop:uP,Dscr:dP,dscr:fP,DScy:pP,dscy:gP,dsol:mP,Dstrok:yP,dstrok:_P,dtdot:vP,dtri:bP,dtrif:xP,duarr:wP,duhar:EP,dwangle:SP,DZcy:CP,dzcy:TP,dzigrarr:AP,Eacute:MP,eacute:RP,easter:LP,Ecaron:IP,ecaron:PP,Ecirc:kP,ecirc:OP,ecir:DP,ecolon:FP,Ecy:NP,ecy:$P,eDDot:BP,Edot:jP,edot:zP,eDot:GP,ee:UP,efDot:VP,Efr:qP,efr:HP,eg:WP,Egrave:YP,egrave:XP,egs:ZP,egsdot:KP,el:JP,Element:QP,elinters:ek,ell:tk,els:ik,elsdot:rk,Emacr:nk,emacr:sk,empty:ok,emptyset:ak,EmptySmallSquare:lk,emptyv:ck,EmptyVerySmallSquare:hk,emsp13:uk,emsp14:dk,emsp:fk,ENG:pk,eng:gk,ensp:mk,Eogon:yk,eogon:_k,Eopf:vk,eopf:bk,epar:xk,eparsl:wk,eplus:Ek,epsi:Sk,Epsilon:Ck,epsilon:Tk,epsiv:Ak,eqcirc:Mk,eqcolon:Rk,eqsim:Lk,eqslantgtr:Ik,eqslantless:Pk,Equal:kk,equals:Ok,EqualTilde:Dk,equest:Fk,Equilibrium:Nk,equiv:$k,equivDD:Bk,eqvparsl:jk,erarr:zk,erDot:Gk,escr:Uk,Escr:Vk,esdot:qk,Esim:Hk,esim:Wk,Eta:Yk,eta:Xk,ETH:Zk,eth:Kk,Euml:Jk,euml:Qk,euro:eO,excl:tO,exist:iO,Exists:rO,expectation:nO,exponentiale:sO,ExponentialE:oO,fallingdotseq:aO,Fcy:lO,fcy:cO,female:hO,ffilig:uO,fflig:dO,ffllig:fO,Ffr:pO,ffr:gO,filig:mO,FilledSmallSquare:yO,FilledVerySmallSquare:_O,fjlig:vO,flat:bO,fllig:xO,fltns:wO,fnof:EO,Fopf:SO,fopf:CO,forall:TO,ForAll:AO,fork:MO,forkv:RO,Fouriertrf:LO,fpartint:IO,frac12:PO,frac13:kO,frac14:OO,frac15:DO,frac16:FO,frac18:NO,frac23:$O,frac25:BO,frac34:jO,frac35:zO,frac38:GO,frac45:UO,frac56:VO,frac58:qO,frac78:HO,frasl:WO,frown:YO,fscr:XO,Fscr:ZO,gacute:KO,Gamma:JO,gamma:QO,Gammad:eD,gammad:tD,gap:iD,Gbreve:rD,gbreve:nD,Gcedil:sD,Gcirc:oD,gcirc:aD,Gcy:lD,gcy:cD,Gdot:hD,gdot:uD,ge:dD,gE:fD,gEl:pD,gel:gD,geq:mD,geqq:yD,geqslant:_D,gescc:vD,ges:bD,gesdot:xD,gesdoto:wD,gesdotol:ED,gesl:SD,gesles:CD,Gfr:TD,gfr:AD,gg:MD,Gg:RD,ggg:LD,gimel:ID,GJcy:PD,gjcy:kD,gla:OD,gl:DD,glE:FD,glj:ND,gnap:$D,gnapprox:BD,gne:jD,gnE:zD,gneq:GD,gneqq:UD,gnsim:VD,Gopf:qD,gopf:HD,grave:WD,GreaterEqual:YD,GreaterEqualLess:XD,GreaterFullEqual:ZD,GreaterGreater:KD,GreaterLess:JD,GreaterSlantEqual:QD,GreaterTilde:eF,Gscr:tF,gscr:iF,gsim:rF,gsime:nF,gsiml:sF,gtcc:oF,gtcir:aF,gt:lF,GT:cF,Gt:hF,gtdot:uF,gtlPar:dF,gtquest:fF,gtrapprox:pF,gtrarr:gF,gtrdot:mF,gtreqless:yF,gtreqqless:_F,gtrless:vF,gtrsim:bF,gvertneqq:xF,gvnE:wF,Hacek:EF,hairsp:SF,half:CF,hamilt:TF,HARDcy:AF,hardcy:MF,harrcir:RF,harr:LF,hArr:IF,harrw:PF,Hat:kF,hbar:OF,Hcirc:DF,hcirc:FF,hearts:NF,heartsuit:$F,hellip:BF,hercon:jF,hfr:zF,Hfr:GF,HilbertSpace:UF,hksearow:VF,hkswarow:qF,hoarr:HF,homtht:WF,hookleftarrow:YF,hookrightarrow:XF,hopf:ZF,Hopf:KF,horbar:JF,HorizontalLine:QF,hscr:eN,Hscr:tN,hslash:iN,Hstrok:rN,hstrok:nN,HumpDownHump:sN,HumpEqual:oN,hybull:aN,hyphen:lN,Iacute:cN,iacute:hN,ic:uN,Icirc:dN,icirc:fN,Icy:pN,icy:gN,Idot:mN,IEcy:yN,iecy:_N,iexcl:vN,iff:bN,ifr:xN,Ifr:wN,Igrave:EN,igrave:SN,ii:CN,iiiint:TN,iiint:AN,iinfin:MN,iiota:RN,IJlig:LN,ijlig:IN,Imacr:PN,imacr:kN,image:ON,ImaginaryI:DN,imagline:FN,imagpart:NN,imath:$N,Im:BN,imof:jN,imped:zN,Implies:GN,incare:UN,in:"",infin:VN,infintie:qN,inodot:HN,intcal:WN,int:YN,Int:XN,integers:ZN,Integral:KN,intercal:JN,Intersection:QN,intlarhk:e3,intprod:t3,InvisibleComma:i3,InvisibleTimes:r3,IOcy:n3,iocy:s3,Iogon:o3,iogon:a3,Iopf:l3,iopf:c3,Iota:h3,iota:u3,iprod:d3,iquest:f3,iscr:p3,Iscr:g3,isin:m3,isindot:y3,isinE:_3,isins:v3,isinsv:b3,isinv:x3,it:w3,Itilde:E3,itilde:S3,Iukcy:C3,iukcy:T3,Iuml:A3,iuml:M3,Jcirc:R3,jcirc:L3,Jcy:I3,jcy:P3,Jfr:k3,jfr:O3,jmath:D3,Jopf:F3,jopf:N3,Jscr:$3,jscr:B3,Jsercy:j3,jsercy:z3,Jukcy:G3,jukcy:U3,Kappa:V3,kappa:q3,kappav:H3,Kcedil:W3,kcedil:Y3,Kcy:X3,kcy:Z3,Kfr:K3,kfr:J3,kgreen:Q3,KHcy:e$,khcy:t$,KJcy:i$,kjcy:r$,Kopf:n$,kopf:s$,Kscr:o$,kscr:a$,lAarr:l$,Lacute:c$,lacute:h$,laemptyv:u$,lagran:d$,Lambda:f$,lambda:p$,lang:g$,Lang:m$,langd:y$,langle:_$,lap:v$,Laplacetrf:b$,laquo:x$,larrb:w$,larrbfs:E$,larr:S$,Larr:C$,lArr:T$,larrfs:A$,larrhk:M$,larrlp:R$,larrpl:L$,larrsim:I$,larrtl:P$,latail:k$,lAtail:O$,lat:D$,late:F$,lates:N$,lbarr:$$,lBarr:B$,lbbrk:j$,lbrace:z$,lbrack:G$,lbrke:U$,lbrksld:V$,lbrkslu:q$,Lcaron:H$,lcaron:W$,Lcedil:Y$,lcedil:X$,lceil:Z$,lcub:K$,Lcy:J$,lcy:Q$,ldca:eB,ldquo:tB,ldquor:iB,ldrdhar:rB,ldrushar:nB,ldsh:sB,le:oB,lE:aB,LeftAngleBracket:lB,LeftArrowBar:cB,leftarrow:hB,LeftArrow:uB,Leftarrow:dB,LeftArrowRightArrow:fB,leftarrowtail:pB,LeftCeiling:gB,LeftDoubleBracket:mB,LeftDownTeeVector:yB,LeftDownVectorBar:_B,LeftDownVector:vB,LeftFloor:bB,leftharpoondown:xB,leftharpoonup:wB,leftleftarrows:EB,leftrightarrow:SB,LeftRightArrow:CB,Leftrightarrow:TB,leftrightarrows:AB,leftrightharpoons:MB,leftrightsquigarrow:RB,LeftRightVector:LB,LeftTeeArrow:IB,LeftTee:PB,LeftTeeVector:kB,leftthreetimes:OB,LeftTriangleBar:DB,LeftTriangle:FB,LeftTriangleEqual:NB,LeftUpDownVector:$B,LeftUpTeeVector:BB,LeftUpVectorBar:jB,LeftUpVector:zB,LeftVectorBar:GB,LeftVector:UB,lEg:VB,leg:qB,leq:HB,leqq:WB,leqslant:YB,lescc:XB,les:ZB,lesdot:KB,lesdoto:JB,lesdotor:QB,lesg:e5,lesges:t5,lessapprox:i5,lessdot:r5,lesseqgtr:n5,lesseqqgtr:s5,LessEqualGreater:o5,LessFullEqual:a5,LessGreater:l5,lessgtr:c5,LessLess:h5,lesssim:u5,LessSlantEqual:d5,LessTilde:f5,lfisht:p5,lfloor:g5,Lfr:m5,lfr:y5,lg:_5,lgE:v5,lHar:b5,lhard:x5,lharu:w5,lharul:E5,lhblk:S5,LJcy:C5,ljcy:T5,llarr:A5,ll:M5,Ll:R5,llcorner:L5,Lleftarrow:I5,llhard:P5,lltri:k5,Lmidot:O5,lmidot:D5,lmoustache:F5,lmoust:N5,lnap:$5,lnapprox:B5,lne:j5,lnE:z5,lneq:G5,lneqq:U5,lnsim:V5,loang:q5,loarr:H5,lobrk:W5,longleftarrow:Y5,LongLeftArrow:X5,Longleftarrow:Z5,longleftrightarrow:K5,LongLeftRightArrow:J5,Longleftrightarrow:Q5,longmapsto:ej,longrightarrow:tj,LongRightArrow:ij,Longrightarrow:rj,looparrowleft:nj,looparrowright:sj,lopar:oj,Lopf:aj,lopf:lj,loplus:cj,lotimes:hj,lowast:uj,lowbar:dj,LowerLeftArrow:fj,LowerRightArrow:pj,loz:gj,lozenge:mj,lozf:yj,lpar:_j,lparlt:vj,lrarr:bj,lrcorner:xj,lrhar:wj,lrhard:Ej,lrm:Sj,lrtri:Cj,lsaquo:Tj,lscr:Aj,Lscr:Mj,lsh:Rj,Lsh:Lj,lsim:Ij,lsime:Pj,lsimg:kj,lsqb:Oj,lsquo:Dj,lsquor:Fj,Lstrok:Nj,lstrok:$j,ltcc:Bj,ltcir:jj,lt:zj,LT:Gj,Lt:Uj,ltdot:Vj,lthree:qj,ltimes:Hj,ltlarr:Wj,ltquest:Yj,ltri:Xj,ltrie:Zj,ltrif:Kj,ltrPar:Jj,lurdshar:Qj,luruhar:e4,lvertneqq:t4,lvnE:i4,macr:r4,male:n4,malt:s4,maltese:o4,Map:"",map:a4,mapsto:l4,mapstodown:c4,mapstoleft:h4,mapstoup:u4,marker:d4,mcomma:f4,Mcy:p4,mcy:g4,mdash:m4,mDDot:y4,measuredangle:_4,MediumSpace:v4,Mellintrf:b4,Mfr:x4,mfr:w4,mho:E4,micro:S4,midast:C4,midcir:T4,mid:A4,middot:M4,minusb:R4,minus:L4,minusd:I4,minusdu:P4,MinusPlus:k4,mlcp:O4,mldr:D4,mnplus:F4,models:N4,Mopf:$4,mopf:B4,mp:j4,mscr:z4,Mscr:G4,mstpos:U4,Mu:V4,mu:q4,multimap:H4,mumap:W4,nabla:Y4,Nacute:X4,nacute:Z4,nang:K4,nap:J4,napE:Q4,napid:ez,napos:tz,napprox:iz,natural:rz,naturals:nz,natur:sz,nbsp:oz,nbump:az,nbumpe:lz,ncap:cz,Ncaron:hz,ncaron:uz,Ncedil:dz,ncedil:fz,ncong:pz,ncongdot:gz,ncup:mz,Ncy:yz,ncy:_z,ndash:vz,nearhk:bz,nearr:xz,neArr:wz,nearrow:Ez,ne:Sz,nedot:Cz,NegativeMediumSpace:Tz,NegativeThickSpace:Az,NegativeThinSpace:Mz,NegativeVeryThinSpace:Rz,nequiv:Lz,nesear:Iz,nesim:Pz,NestedGreaterGreater:kz,NestedLessLess:Oz,NewLine:Dz,nexist:Fz,nexists:Nz,Nfr:$z,nfr:Bz,ngE:jz,nge:zz,ngeq:Gz,ngeqq:Uz,ngeqslant:Vz,nges:qz,nGg:Hz,ngsim:Wz,nGt:Yz,ngt:Xz,ngtr:Zz,nGtv:Kz,nharr:Jz,nhArr:Qz,nhpar:eG,ni:tG,nis:iG,nisd:rG,niv:nG,NJcy:sG,njcy:oG,nlarr:aG,nlArr:lG,nldr:cG,nlE:hG,nle:uG,nleftarrow:dG,nLeftarrow:fG,nleftrightarrow:pG,nLeftrightarrow:gG,nleq:mG,nleqq:yG,nleqslant:_G,nles:vG,nless:bG,nLl:xG,nlsim:wG,nLt:EG,nlt:SG,nltri:CG,nltrie:TG,nLtv:AG,nmid:MG,NoBreak:RG,NonBreakingSpace:LG,nopf:IG,Nopf:PG,Not:kG,not:OG,NotCongruent:DG,NotCupCap:FG,NotDoubleVerticalBar:NG,NotElement:$G,NotEqual:BG,NotEqualTilde:jG,NotExists:zG,NotGreater:GG,NotGreaterEqual:UG,NotGreaterFullEqual:VG,NotGreaterGreater:qG,NotGreaterLess:HG,NotGreaterSlantEqual:WG,NotGreaterTilde:YG,NotHumpDownHump:XG,NotHumpEqual:ZG,notin:KG,notindot:JG,notinE:QG,notinva:eU,notinvb:tU,notinvc:iU,NotLeftTriangleBar:rU,NotLeftTriangle:nU,NotLeftTriangleEqual:sU,NotLess:oU,NotLessEqual:aU,NotLessGreater:lU,NotLessLess:cU,NotLessSlantEqual:hU,NotLessTilde:uU,NotNestedGreaterGreater:dU,NotNestedLessLess:fU,notni:pU,notniva:gU,notnivb:mU,notnivc:yU,NotPrecedes:_U,NotPrecedesEqual:vU,NotPrecedesSlantEqual:bU,NotReverseElement:xU,NotRightTriangleBar:wU,NotRightTriangle:EU,NotRightTriangleEqual:SU,NotSquareSubset:CU,NotSquareSubsetEqual:TU,NotSquareSuperset:AU,NotSquareSupersetEqual:MU,NotSubset:RU,NotSubsetEqual:LU,NotSucceeds:IU,NotSucceedsEqual:PU,NotSucceedsSlantEqual:kU,NotSucceedsTilde:OU,NotSuperset:DU,NotSupersetEqual:FU,NotTilde:NU,NotTildeEqual:$U,NotTildeFullEqual:BU,NotTildeTilde:jU,NotVerticalBar:zU,nparallel:GU,npar:UU,nparsl:VU,npart:qU,npolint:HU,npr:WU,nprcue:YU,nprec:XU,npreceq:ZU,npre:KU,nrarrc:JU,nrarr:QU,nrArr:e6,nrarrw:t6,nrightarrow:i6,nRightarrow:r6,nrtri:n6,nrtrie:s6,nsc:o6,nsccue:a6,nsce:l6,Nscr:c6,nscr:h6,nshortmid:u6,nshortparallel:d6,nsim:f6,nsime:p6,nsimeq:g6,nsmid:m6,nspar:y6,nsqsube:_6,nsqsupe:v6,nsub:b6,nsubE:x6,nsube:w6,nsubset:E6,nsubseteq:S6,nsubseteqq:C6,nsucc:T6,nsucceq:A6,nsup:M6,nsupE:R6,nsupe:L6,nsupset:I6,nsupseteq:P6,nsupseteqq:k6,ntgl:O6,Ntilde:D6,ntilde:F6,ntlg:N6,ntriangleleft:$6,ntrianglelefteq:B6,ntriangleright:j6,ntrianglerighteq:z6,Nu:G6,nu:U6,num:V6,numero:q6,numsp:H6,nvap:W6,nvdash:Y6,nvDash:X6,nVdash:Z6,nVDash:K6,nvge:J6,nvgt:Q6,nvHarr:e8,nvinfin:t8,nvlArr:i8,nvle:r8,nvlt:n8,nvltrie:s8,nvrArr:o8,nvrtrie:a8,nvsim:l8,nwarhk:c8,nwarr:h8,nwArr:u8,nwarrow:d8,nwnear:f8,Oacute:p8,oacute:g8,oast:m8,Ocirc:y8,ocirc:_8,ocir:v8,Ocy:b8,ocy:x8,odash:w8,Odblac:E8,odblac:S8,odiv:C8,odot:T8,odsold:A8,OElig:M8,oelig:R8,ofcir:L8,Ofr:I8,ofr:P8,ogon:k8,Ograve:O8,ograve:D8,ogt:F8,ohbar:N8,ohm:$8,oint:B8,olarr:j8,olcir:z8,olcross:G8,oline:U8,olt:V8,Omacr:q8,omacr:H8,Omega:W8,omega:Y8,Omicron:X8,omicron:Z8,omid:K8,ominus:J8,Oopf:Q8,oopf:eV,opar:tV,OpenCurlyDoubleQuote:iV,OpenCurlyQuote:rV,operp:nV,oplus:sV,orarr:oV,Or:aV,or:lV,ord:cV,order:hV,orderof:uV,ordf:dV,ordm:fV,origof:pV,oror:gV,orslope:mV,orv:yV,oS:_V,Oscr:vV,oscr:bV,Oslash:xV,oslash:wV,osol:EV,Otilde:SV,otilde:CV,otimesas:TV,Otimes:AV,otimes:MV,Ouml:RV,ouml:LV,ovbar:IV,OverBar:PV,OverBrace:kV,OverBracket:OV,OverParenthesis:DV,para:FV,parallel:NV,par:$V,parsim:BV,parsl:jV,part:zV,PartialD:GV,Pcy:UV,pcy:VV,percnt:qV,period:HV,permil:WV,perp:YV,pertenk:XV,Pfr:ZV,pfr:KV,Phi:JV,phi:QV,phiv:eq,phmmat:tq,phone:iq,Pi:rq,pi:nq,pitchfork:sq,piv:oq,planck:aq,planckh:lq,plankv:cq,plusacir:hq,plusb:uq,pluscir:dq,plus:fq,plusdo:pq,plusdu:gq,pluse:mq,PlusMinus:yq,plusmn:_q,plussim:vq,plustwo:bq,pm:xq,Poincareplane:wq,pointint:Eq,popf:Sq,Popf:Cq,pound:Tq,prap:Aq,Pr:Mq,pr:Rq,prcue:Lq,precapprox:Iq,prec:Pq,preccurlyeq:kq,Precedes:Oq,PrecedesEqual:Dq,PrecedesSlantEqual:Fq,PrecedesTilde:Nq,preceq:$q,precnapprox:Bq,precneqq:jq,precnsim:zq,pre:Gq,prE:Uq,precsim:Vq,prime:qq,Prime:Hq,primes:Wq,prnap:Yq,prnE:Xq,prnsim:Zq,prod:Kq,Product:Jq,profalar:Qq,profline:eH,profsurf:tH,prop:iH,Proportional:rH,Proportion:nH,propto:sH,prsim:oH,prurel:aH,Pscr:lH,pscr:cH,Psi:hH,psi:uH,puncsp:dH,Qfr:fH,qfr:pH,qint:gH,qopf:mH,Qopf:yH,qprime:_H,Qscr:vH,qscr:bH,quaternions:xH,quatint:wH,quest:EH,questeq:SH,quot:CH,QUOT:TH,rAarr:AH,race:MH,Racute:RH,racute:LH,radic:IH,raemptyv:PH,rang:kH,Rang:OH,rangd:DH,range:FH,rangle:NH,raquo:$H,rarrap:BH,rarrb:jH,rarrbfs:zH,rarrc:GH,rarr:UH,Rarr:VH,rArr:qH,rarrfs:HH,rarrhk:WH,rarrlp:YH,rarrpl:XH,rarrsim:ZH,Rarrtl:KH,rarrtl:JH,rarrw:QH,ratail:eW,rAtail:tW,ratio:iW,rationals:rW,rbarr:nW,rBarr:sW,RBarr:oW,rbbrk:aW,rbrace:lW,rbrack:cW,rbrke:hW,rbrksld:uW,rbrkslu:dW,Rcaron:fW,rcaron:pW,Rcedil:gW,rcedil:mW,rceil:yW,rcub:_W,Rcy:vW,rcy:bW,rdca:xW,rdldhar:wW,rdquo:EW,rdquor:SW,rdsh:CW,real:TW,realine:AW,realpart:MW,reals:RW,Re:LW,rect:IW,reg:PW,REG:kW,ReverseElement:OW,ReverseEquilibrium:DW,ReverseUpEquilibrium:FW,rfisht:NW,rfloor:$W,rfr:BW,Rfr:jW,rHar:zW,rhard:GW,rharu:UW,rharul:VW,Rho:qW,rho:HW,rhov:WW,RightAngleBracket:YW,RightArrowBar:XW,rightarrow:ZW,RightArrow:KW,Rightarrow:JW,RightArrowLeftArrow:QW,rightarrowtail:e9,RightCeiling:t9,RightDoubleBracket:i9,RightDownTeeVector:r9,RightDownVectorBar:n9,RightDownVector:s9,RightFloor:o9,rightharpoondown:a9,rightharpoonup:l9,rightleftarrows:c9,rightleftharpoons:h9,rightrightarrows:u9,rightsquigarrow:d9,RightTeeArrow:f9,RightTee:p9,RightTeeVector:g9,rightthreetimes:m9,RightTriangleBar:y9,RightTriangle:_9,RightTriangleEqual:v9,RightUpDownVector:b9,RightUpTeeVector:x9,RightUpVectorBar:w9,RightUpVector:E9,RightVectorBar:S9,RightVector:C9,ring:T9,risingdotseq:A9,rlarr:M9,rlhar:R9,rlm:L9,rmoustache:I9,rmoust:P9,rnmid:k9,roang:O9,roarr:D9,robrk:F9,ropar:N9,ropf:$9,Ropf:B9,roplus:j9,rotimes:z9,RoundImplies:G9,rpar:U9,rpargt:V9,rppolint:q9,rrarr:H9,Rrightarrow:W9,rsaquo:Y9,rscr:X9,Rscr:Z9,rsh:K9,Rsh:J9,rsqb:Q9,rsquo:e7,rsquor:t7,rthree:i7,rtimes:r7,rtri:n7,rtrie:s7,rtrif:o7,rtriltri:a7,RuleDelayed:l7,ruluhar:c7,rx:h7,Sacute:u7,sacute:d7,sbquo:f7,scap:p7,Scaron:g7,scaron:m7,Sc:y7,sc:_7,sccue:v7,sce:b7,scE:x7,Scedil:w7,scedil:E7,Scirc:S7,scirc:C7,scnap:T7,scnE:A7,scnsim:M7,scpolint:R7,scsim:L7,Scy:I7,scy:P7,sdotb:k7,sdot:O7,sdote:D7,searhk:F7,searr:N7,seArr:$7,searrow:B7,sect:j7,semi:z7,seswar:G7,setminus:U7,setmn:V7,sext:q7,Sfr:H7,sfr:W7,sfrown:Y7,sharp:X7,SHCHcy:Z7,shchcy:K7,SHcy:J7,shcy:Q7,ShortDownArrow:eY,ShortLeftArrow:tY,shortmid:iY,shortparallel:rY,ShortRightArrow:nY,ShortUpArrow:sY,shy:oY,Sigma:aY,sigma:lY,sigmaf:cY,sigmav:hY,sim:uY,simdot:dY,sime:fY,simeq:pY,simg:gY,simgE:mY,siml:yY,simlE:_Y,simne:vY,simplus:bY,simrarr:xY,slarr:wY,SmallCircle:EY,smallsetminus:SY,smashp:CY,smeparsl:TY,smid:AY,smile:MY,smt:RY,smte:LY,smtes:IY,SOFTcy:PY,softcy:kY,solbar:OY,solb:DY,sol:FY,Sopf:NY,sopf:$Y,spades:BY,spadesuit:jY,spar:zY,sqcap:GY,sqcaps:UY,sqcup:VY,sqcups:qY,Sqrt:HY,sqsub:WY,sqsube:YY,sqsubset:XY,sqsubseteq:ZY,sqsup:KY,sqsupe:JY,sqsupset:QY,sqsupseteq:eX,square:tX,Square:iX,SquareIntersection:rX,SquareSubset:nX,SquareSubsetEqual:sX,SquareSuperset:oX,SquareSupersetEqual:aX,SquareUnion:lX,squarf:cX,squ:hX,squf:uX,srarr:dX,Sscr:fX,sscr:pX,ssetmn:gX,ssmile:mX,sstarf:yX,Star:_X,star:vX,starf:bX,straightepsilon:xX,straightphi:wX,strns:EX,sub:SX,Sub:CX,subdot:TX,subE:AX,sube:MX,subedot:RX,submult:LX,subnE:IX,subne:PX,subplus:kX,subrarr:OX,subset:DX,Subset:FX,subseteq:NX,subseteqq:$X,SubsetEqual:BX,subsetneq:jX,subsetneqq:zX,subsim:GX,subsub:UX,subsup:VX,succapprox:qX,succ:HX,succcurlyeq:WX,Succeeds:YX,SucceedsEqual:XX,SucceedsSlantEqual:ZX,SucceedsTilde:KX,succeq:JX,succnapprox:QX,succneqq:eZ,succnsim:tZ,succsim:iZ,SuchThat:rZ,sum:nZ,Sum:sZ,sung:oZ,sup1:aZ,sup2:lZ,sup3:cZ,sup:hZ,Sup:uZ,supdot:dZ,supdsub:fZ,supE:pZ,supe:gZ,supedot:mZ,Superset:yZ,SupersetEqual:_Z,suphsol:vZ,suphsub:bZ,suplarr:xZ,supmult:wZ,supnE:EZ,supne:SZ,supplus:CZ,supset:TZ,Supset:AZ,supseteq:MZ,supseteqq:RZ,supsetneq:LZ,supsetneqq:IZ,supsim:PZ,supsub:kZ,supsup:OZ,swarhk:DZ,swarr:FZ,swArr:NZ,swarrow:$Z,swnwar:BZ,szlig:jZ,Tab:zZ,target:GZ,Tau:UZ,tau:VZ,tbrk:qZ,Tcaron:HZ,tcaron:WZ,Tcedil:YZ,tcedil:XZ,Tcy:ZZ,tcy:KZ,tdot:JZ,telrec:QZ,Tfr:eK,tfr:tK,there4:iK,therefore:rK,Therefore:nK,Theta:sK,theta:oK,thetasym:aK,thetav:lK,thickapprox:cK,thicksim:hK,ThickSpace:uK,ThinSpace:dK,thinsp:fK,thkap:pK,thksim:gK,THORN:mK,thorn:yK,tilde:_K,Tilde:vK,TildeEqual:bK,TildeFullEqual:xK,TildeTilde:wK,timesbar:EK,timesb:SK,times:CK,timesd:TK,tint:AK,toea:MK,topbot:RK,topcir:LK,top:IK,Topf:PK,topf:kK,topfork:OK,tosa:DK,tprime:FK,trade:NK,TRADE:$K,triangle:BK,triangledown:jK,triangleleft:zK,trianglelefteq:GK,triangleq:UK,triangleright:VK,trianglerighteq:qK,tridot:HK,trie:WK,triminus:YK,TripleDot:XK,triplus:ZK,trisb:KK,tritime:JK,trpezium:QK,Tscr:eJ,tscr:tJ,TScy:iJ,tscy:rJ,TSHcy:nJ,tshcy:sJ,Tstrok:oJ,tstrok:aJ,twixt:lJ,twoheadleftarrow:cJ,twoheadrightarrow:hJ,Uacute:uJ,uacute:dJ,uarr:fJ,Uarr:pJ,uArr:gJ,Uarrocir:mJ,Ubrcy:yJ,ubrcy:_J,Ubreve:vJ,ubreve:bJ,Ucirc:xJ,ucirc:wJ,Ucy:EJ,ucy:SJ,udarr:CJ,Udblac:TJ,udblac:AJ,udhar:MJ,ufisht:RJ,Ufr:LJ,ufr:IJ,Ugrave:PJ,ugrave:kJ,uHar:OJ,uharl:DJ,uharr:FJ,uhblk:NJ,ulcorn:$J,ulcorner:BJ,ulcrop:jJ,ultri:zJ,Umacr:GJ,umacr:UJ,uml:VJ,UnderBar:qJ,UnderBrace:HJ,UnderBracket:WJ,UnderParenthesis:YJ,Union:XJ,UnionPlus:ZJ,Uogon:KJ,uogon:JJ,Uopf:QJ,uopf:eQ,UpArrowBar:tQ,uparrow:iQ,UpArrow:rQ,Uparrow:nQ,UpArrowDownArrow:sQ,updownarrow:oQ,UpDownArrow:aQ,Updownarrow:lQ,UpEquilibrium:cQ,upharpoonleft:hQ,upharpoonright:uQ,uplus:dQ,UpperLeftArrow:fQ,UpperRightArrow:pQ,upsi:gQ,Upsi:mQ,upsih:yQ,Upsilon:_Q,upsilon:vQ,UpTeeArrow:bQ,UpTee:xQ,upuparrows:wQ,urcorn:EQ,urcorner:SQ,urcrop:CQ,Uring:TQ,uring:AQ,urtri:MQ,Uscr:RQ,uscr:LQ,utdot:IQ,Utilde:PQ,utilde:kQ,utri:OQ,utrif:DQ,uuarr:FQ,Uuml:NQ,uuml:$Q,uwangle:BQ,vangrt:jQ,varepsilon:zQ,varkappa:GQ,varnothing:UQ,varphi:VQ,varpi:qQ,varpropto:HQ,varr:WQ,vArr:YQ,varrho:XQ,varsigma:ZQ,varsubsetneq:KQ,varsubsetneqq:JQ,varsupsetneq:QQ,varsupsetneqq:eee,vartheta:tee,vartriangleleft:iee,vartriangleright:ree,vBar:nee,Vbar:see,vBarv:oee,Vcy:aee,vcy:lee,vdash:cee,vDash:hee,Vdash:uee,VDash:dee,Vdashl:fee,veebar:pee,vee:gee,Vee:mee,veeeq:yee,vellip:_ee,verbar:vee,Verbar:bee,vert:xee,Vert:wee,VerticalBar:Eee,VerticalLine:See,VerticalSeparator:Cee,VerticalTilde:Tee,VeryThinSpace:Aee,Vfr:Mee,vfr:Ree,vltri:Lee,vnsub:Iee,vnsup:Pee,Vopf:kee,vopf:Oee,vprop:Dee,vrtri:Fee,Vscr:Nee,vscr:$ee,vsubnE:Bee,vsubne:jee,vsupnE:zee,vsupne:Gee,Vvdash:Uee,vzigzag:Vee,Wcirc:qee,wcirc:Hee,wedbar:Wee,wedge:Yee,Wedge:Xee,wedgeq:Zee,weierp:Kee,Wfr:Jee,wfr:Qee,Wopf:ete,wopf:tte,wp:ite,wr:rte,wreath:nte,Wscr:ste,wscr:ote,xcap:ate,xcirc:lte,xcup:cte,xdtri:hte,Xfr:ute,xfr:dte,xharr:fte,xhArr:pte,Xi:gte,xi:mte,xlarr:yte,xlArr:_te,xmap:vte,xnis:bte,xodot:xte,Xopf:wte,xopf:Ete,xoplus:Ste,xotime:Cte,xrarr:Tte,xrArr:Ate,Xscr:Mte,xscr:Rte,xsqcup:Lte,xuplus:Ite,xutri:Pte,xvee:kte,xwedge:Ote,Yacute:Dte,yacute:Fte,YAcy:Nte,yacy:$te,Ycirc:Bte,ycirc:jte,Ycy:zte,ycy:Gte,yen:Ute,Yfr:Vte,yfr:qte,YIcy:Hte,yicy:Wte,Yopf:Yte,yopf:Xte,Yscr:Zte,yscr:Kte,YUcy:Jte,yucy:Qte,yuml:eie,Yuml:tie,Zacute:iie,zacute:rie,Zcaron:nie,zcaron:sie,Zcy:oie,zcy:aie,Zdot:lie,zdot:cie,zeetrf:hie,ZeroWidthSpace:uie,Zeta:die,zeta:fie,zfr:pie,Zfr:gie,ZHcy:mie,zhcy:yie,zigrarr:_ie,zopf:vie,Zopf:bie,Zscr:xie,zscr:wie,zwj:Eie,zwnj:Sie},abe=Object.freeze({__proto__:null,Aacute:y,aacute:_,Abreve:v,abreve:x,ac:w,acd:T,acE:A,Acirc:R,acirc:L,acute:P,Acy:F,acy:B,AElig:b,aelig:E,af:C,Afr:M,afr:O,Agrave:D,agrave:U,alefsym:z,aleph:Z,Alpha:Q,alpha:V,Amacr:N,amacr:X,amalg:ne,amp:fe,AMP:ve,andand:ge,And:he,and:Ce,andd:Ue,andslope:Je,andv:Bi,ang:ki,ange:bi,angle:hs,angmsdaa:co,angmsdab:oe,angmsdac:ho,angmsdad:jo,angmsdae:Ar,angmsdaf:Fr,angmsdag:wn,angmsdah:tn,angmsd:uo,angrt:fo,angrtvb:us,angrtvbd:Nn,angsph:Rl,angst:ur,angzarr:Bc,Aogon:Ll,aogon:wu,Aopf:Eu,aopf:jc,apacir:zc,ap:Il,apE:Gc,ape:Pl,apid:zo,apos:ds,ApplyFunction:Go,approx:kl,approxeq:Uc,Aring:Wi,aring:fs,Ascr:Nr,ascr:En,Assign:Mr,ast:$n,asymp:Sn,asympeq:yi,Atilde:ir,atilde:Bn,Auml:Ol,auml:Dl,awconint:Ra,awint:vp,backcong:Oy,backepsilon:Dy,backprime:Fy,backsim:Su,backsimeq:$,Backslash:Y,Barv:le,barvee:te,barwed:Te,Barwed:Xe,barwedge:mt,bbrk:Re,bbrktbrk:Pe,bcong:xt,Bcy:Mt,bcy:qe,bdquo:Bt,becaus:Cn,because:mr,Because:Qe,bemptyv:Tt,bepsi:et,bernou:ui,Bernoullis:rr,Beta:Yi,beta:Oi,beth:Di,between:$r,Bfr:Br,bfr:po,bigcap:bp,bigcirc:xp,bigcup:Vc,bigodot:Ny,bigoplus:wp,bigotimes:Uo,bigsqcup:qc,bigstar:Ep,bigtriangledown:Sp,bigtriangleup:Cp,biguplus:Tp,bigvee:$y,bigwedge:By,bkarow:Fl,blacklozenge:Nl,blacksquare:Vo,blacktriangle:jy,blacktriangledown:zy,blacktriangleleft:Gy,blacktriangleright:Hc,blank:La,blk12:Wc,blk14:Yc,blk34:Cu,block:Uy,bne:Vy,bnequiv:Ap,bNot:Mp,bnot:Rp,Bopf:Lp,bopf:Ip,bot:Tu,bottom:Au,bowtie:Mu,boxbox:Ru,boxdl:Lu,boxdL:qy,boxDl:Iu,boxDL:Pu,boxdr:ku,boxdR:Ou,boxDr:Du,boxDR:Fu,boxh:Nu,boxH:jr,boxhd:ps,boxHd:Hy,boxhD:Wy,boxHD:Xc,boxhu:Zc,boxHu:Pp,boxhU:Kc,boxHU:Jc,boxminus:$u,boxplus:Bu,boxtimes:ju,boxul:zu,boxuL:kp,boxUl:Op,boxUL:Gu,boxur:Uu,boxuR:Vu,boxUr:qu,boxUR:Hu,boxv:Dp,boxV:Fp,boxvh:Qc,boxvH:Yy,boxVh:Xy,boxVH:Zy,boxvl:Ky,boxvL:W,boxVl:pe,boxVL:Be,boxvr:Ht,boxvR:Fi,boxVr:Ft,boxVR:jn,bprime:eh,breve:OA,Breve:DA,brvbar:FA,bscr:NA,Bscr:$A,bsemi:BA,bsim:jA,bsime:zA,bsolb:GA,bsol:UA,bsolhsub:VA,bull:qA,bullet:HA,bump:WA,bumpE:YA,bumpe:XA,Bumpeq:ZA,bumpeq:KA,Cacute:JA,cacute:QA,capand:eM,capbrcup:tM,capcap:iM,cap:rM,Cap:nM,capcup:sM,capdot:oM,CapitalDifferentialD:aM,caps:lM,caret:cM,caron:hM,Cayleys:uM,ccaps:dM,Ccaron:fM,ccaron:pM,Ccedil:gM,ccedil:mM,Ccirc:yM,ccirc:_M,Cconint:vM,ccups:bM,ccupssm:xM,Cdot:wM,cdot:EM,cedil:SM,Cedilla:CM,cemptyv:TM,cent:AM,centerdot:MM,CenterDot:RM,cfr:LM,Cfr:IM,CHcy:PM,chcy:kM,check:OM,checkmark:DM,Chi:FM,chi:NM,circ:$M,circeq:BM,circlearrowleft:jM,circlearrowright:zM,circledast:GM,circledcirc:UM,circleddash:VM,CircleDot:qM,circledR:HM,circledS:WM,CircleMinus:YM,CirclePlus:XM,CircleTimes:ZM,cir:KM,cirE:JM,cire:QM,cirfnint:eR,cirmid:tR,cirscir:iR,ClockwiseContourIntegral:rR,CloseCurlyDoubleQuote:nR,CloseCurlyQuote:sR,clubs:oR,clubsuit:aR,colon:lR,Colon:cR,Colone:hR,colone:uR,coloneq:dR,comma:fR,commat:pR,comp:gR,compfn:mR,complement:yR,complexes:_R,cong:vR,congdot:bR,Congruent:xR,conint:wR,Conint:ER,ContourIntegral:SR,copf:CR,Copf:TR,coprod:AR,Coproduct:MR,copy:RR,COPY:LR,copysr:IR,CounterClockwiseContourIntegral:PR,crarr:kR,cross:OR,Cross:DR,Cscr:FR,cscr:NR,csub:$R,csube:BR,csup:jR,csupe:zR,ctdot:GR,cudarrl:UR,cudarrr:VR,cuepr:qR,cuesc:HR,cularr:WR,cularrp:YR,cupbrcap:XR,cupcap:ZR,CupCap:KR,cup:JR,Cup:QR,cupcup:eL,cupdot:tL,cupor:iL,cups:rL,curarr:nL,curarrm:sL,curlyeqprec:oL,curlyeqsucc:aL,curlyvee:lL,curlywedge:cL,curren:hL,curvearrowleft:uL,curvearrowright:dL,cuvee:fL,cuwed:pL,cwconint:gL,cwint:mL,cylcty:yL,dagger:_L,Dagger:vL,daleth:bL,darr:xL,Darr:wL,dArr:EL,dash:SL,Dashv:CL,dashv:TL,dbkarow:AL,dblac:ML,Dcaron:RL,dcaron:LL,Dcy:IL,dcy:PL,ddagger:kL,ddarr:OL,DD:DL,dd:FL,DDotrahd:NL,ddotseq:$L,deg:BL,Del:jL,Delta:zL,delta:GL,demptyv:UL,dfisht:VL,Dfr:qL,dfr:HL,dHar:WL,dharl:YL,dharr:XL,DiacriticalAcute:ZL,DiacriticalDot:KL,DiacriticalDoubleAcute:JL,DiacriticalGrave:QL,DiacriticalTilde:eI,diam:tI,diamond:iI,Diamond:rI,diamondsuit:nI,diams:sI,die:oI,DifferentialD:aI,digamma:lI,disin:cI,div:hI,divide:uI,divideontimes:dI,divonx:fI,DJcy:pI,djcy:gI,dlcorn:mI,dlcrop:yI,dollar:_I,Dopf:vI,dopf:bI,Dot:xI,dot:wI,DotDot:EI,doteq:SI,doteqdot:CI,DotEqual:TI,dotminus:AI,dotplus:MI,dotsquare:RI,doublebarwedge:LI,DoubleContourIntegral:II,DoubleDot:PI,DoubleDownArrow:kI,DoubleLeftArrow:OI,DoubleLeftRightArrow:DI,DoubleLeftTee:FI,DoubleLongLeftArrow:NI,DoubleLongLeftRightArrow:$I,DoubleLongRightArrow:BI,DoubleRightArrow:jI,DoubleRightTee:zI,DoubleUpArrow:GI,DoubleUpDownArrow:UI,DoubleVerticalBar:VI,DownArrowBar:qI,downarrow:HI,DownArrow:WI,Downarrow:YI,DownArrowUpArrow:XI,DownBreve:ZI,downdownarrows:KI,downharpoonleft:JI,downharpoonright:QI,DownLeftRightVector:eP,DownLeftTeeVector:tP,DownLeftVectorBar:iP,DownLeftVector:rP,DownRightTeeVector:nP,DownRightVectorBar:sP,DownRightVector:oP,DownTeeArrow:aP,DownTee:lP,drbkarow:cP,drcorn:hP,drcrop:uP,Dscr:dP,dscr:fP,DScy:pP,dscy:gP,dsol:mP,Dstrok:yP,dstrok:_P,dtdot:vP,dtri:bP,dtrif:xP,duarr:wP,duhar:EP,dwangle:SP,DZcy:CP,dzcy:TP,dzigrarr:AP,Eacute:MP,eacute:RP,easter:LP,Ecaron:IP,ecaron:PP,Ecirc:kP,ecirc:OP,ecir:DP,ecolon:FP,Ecy:NP,ecy:$P,eDDot:BP,Edot:jP,edot:zP,eDot:GP,ee:UP,efDot:VP,Efr:qP,efr:HP,eg:WP,Egrave:YP,egrave:XP,egs:ZP,egsdot:KP,el:JP,Element:QP,elinters:ek,ell:tk,els:ik,elsdot:rk,Emacr:nk,emacr:sk,empty:ok,emptyset:ak,EmptySmallSquare:lk,emptyv:ck,EmptyVerySmallSquare:hk,emsp13:uk,emsp14:dk,emsp:fk,ENG:pk,eng:gk,ensp:mk,Eogon:yk,eogon:_k,Eopf:vk,eopf:bk,epar:xk,eparsl:wk,eplus:Ek,epsi:Sk,Epsilon:Ck,epsilon:Tk,epsiv:Ak,eqcirc:Mk,eqcolon:Rk,eqsim:Lk,eqslantgtr:Ik,eqslantless:Pk,Equal:kk,equals:Ok,EqualTilde:Dk,equest:Fk,Equilibrium:Nk,equiv:$k,equivDD:Bk,eqvparsl:jk,erarr:zk,erDot:Gk,escr:Uk,Escr:Vk,esdot:qk,Esim:Hk,esim:Wk,Eta:Yk,eta:Xk,ETH:Zk,eth:Kk,Euml:Jk,euml:Qk,euro:eO,excl:tO,exist:iO,Exists:rO,expectation:nO,exponentiale:sO,ExponentialE:oO,fallingdotseq:aO,Fcy:lO,fcy:cO,female:hO,ffilig:uO,fflig:dO,ffllig:fO,Ffr:pO,ffr:gO,filig:mO,FilledSmallSquare:yO,FilledVerySmallSquare:_O,fjlig:vO,flat:bO,fllig:xO,fltns:wO,fnof:EO,Fopf:SO,fopf:CO,forall:TO,ForAll:AO,fork:MO,forkv:RO,Fouriertrf:LO,fpartint:IO,frac12:PO,frac13:kO,frac14:OO,frac15:DO,frac16:FO,frac18:NO,frac23:$O,frac25:BO,frac34:jO,frac35:zO,frac38:GO,frac45:UO,frac56:VO,frac58:qO,frac78:HO,frasl:WO,frown:YO,fscr:XO,Fscr:ZO,gacute:KO,Gamma:JO,gamma:QO,Gammad:eD,gammad:tD,gap:iD,Gbreve:rD,gbreve:nD,Gcedil:sD,Gcirc:oD,gcirc:aD,Gcy:lD,gcy:cD,Gdot:hD,gdot:uD,ge:dD,gE:fD,gEl:pD,gel:gD,geq:mD,geqq:yD,geqslant:_D,gescc:vD,ges:bD,gesdot:xD,gesdoto:wD,gesdotol:ED,gesl:SD,gesles:CD,Gfr:TD,gfr:AD,gg:MD,Gg:RD,ggg:LD,gimel:ID,GJcy:PD,gjcy:kD,gla:OD,gl:DD,glE:FD,glj:ND,gnap:$D,gnapprox:BD,gne:jD,gnE:zD,gneq:GD,gneqq:UD,gnsim:VD,Gopf:qD,gopf:HD,grave:WD,GreaterEqual:YD,GreaterEqualLess:XD,GreaterFullEqual:ZD,GreaterGreater:KD,GreaterLess:JD,GreaterSlantEqual:QD,GreaterTilde:eF,Gscr:tF,gscr:iF,gsim:rF,gsime:nF,gsiml:sF,gtcc:oF,gtcir:aF,gt:lF,GT:cF,Gt:hF,gtdot:uF,gtlPar:dF,gtquest:fF,gtrapprox:pF,gtrarr:gF,gtrdot:mF,gtreqless:yF,gtreqqless:_F,gtrless:vF,gtrsim:bF,gvertneqq:xF,gvnE:wF,Hacek:EF,hairsp:SF,half:CF,hamilt:TF,HARDcy:AF,hardcy:MF,harrcir:RF,harr:LF,hArr:IF,harrw:PF,Hat:kF,hbar:OF,Hcirc:DF,hcirc:FF,hearts:NF,heartsuit:$F,hellip:BF,hercon:jF,hfr:zF,Hfr:GF,HilbertSpace:UF,hksearow:VF,hkswarow:qF,hoarr:HF,homtht:WF,hookleftarrow:YF,hookrightarrow:XF,hopf:ZF,Hopf:KF,horbar:JF,HorizontalLine:QF,hscr:eN,Hscr:tN,hslash:iN,Hstrok:rN,hstrok:nN,HumpDownHump:sN,HumpEqual:oN,hybull:aN,hyphen:lN,Iacute:cN,iacute:hN,ic:uN,Icirc:dN,icirc:fN,Icy:pN,icy:gN,Idot:mN,IEcy:yN,iecy:_N,iexcl:vN,iff:bN,ifr:xN,Ifr:wN,Igrave:EN,igrave:SN,ii:CN,iiiint:TN,iiint:AN,iinfin:MN,iiota:RN,IJlig:LN,ijlig:IN,Imacr:PN,imacr:kN,image:ON,ImaginaryI:DN,imagline:FN,imagpart:NN,imath:$N,Im:BN,imof:jN,imped:zN,Implies:GN,incare:UN,infin:VN,infintie:qN,inodot:HN,intcal:WN,int:YN,Int:XN,integers:ZN,Integral:KN,intercal:JN,Intersection:QN,intlarhk:e3,intprod:t3,InvisibleComma:i3,InvisibleTimes:r3,IOcy:n3,iocy:s3,Iogon:o3,iogon:a3,Iopf:l3,iopf:c3,Iota:h3,iota:u3,iprod:d3,iquest:f3,iscr:p3,Iscr:g3,isin:m3,isindot:y3,isinE:_3,isins:v3,isinsv:b3,isinv:x3,it:w3,Itilde:E3,itilde:S3,Iukcy:C3,iukcy:T3,Iuml:A3,iuml:M3,Jcirc:R3,jcirc:L3,Jcy:I3,jcy:P3,Jfr:k3,jfr:O3,jmath:D3,Jopf:F3,jopf:N3,Jscr:$3,jscr:B3,Jsercy:j3,jsercy:z3,Jukcy:G3,jukcy:U3,Kappa:V3,kappa:q3,kappav:H3,Kcedil:W3,kcedil:Y3,Kcy:X3,kcy:Z3,Kfr:K3,kfr:J3,kgreen:Q3,KHcy:e$,khcy:t$,KJcy:i$,kjcy:r$,Kopf:n$,kopf:s$,Kscr:o$,kscr:a$,lAarr:l$,Lacute:c$,lacute:h$,laemptyv:u$,lagran:d$,Lambda:f$,lambda:p$,lang:g$,Lang:m$,langd:y$,langle:_$,lap:v$,Laplacetrf:b$,laquo:x$,larrb:w$,larrbfs:E$,larr:S$,Larr:C$,lArr:T$,larrfs:A$,larrhk:M$,larrlp:R$,larrpl:L$,larrsim:I$,larrtl:P$,latail:k$,lAtail:O$,lat:D$,late:F$,lates:N$,lbarr:$$,lBarr:B$,lbbrk:j$,lbrace:z$,lbrack:G$,lbrke:U$,lbrksld:V$,lbrkslu:q$,Lcaron:H$,lcaron:W$,Lcedil:Y$,lcedil:X$,lceil:Z$,lcub:K$,Lcy:J$,lcy:Q$,ldca:eB,ldquo:tB,ldquor:iB,ldrdhar:rB,ldrushar:nB,ldsh:sB,le:oB,lE:aB,LeftAngleBracket:lB,LeftArrowBar:cB,leftarrow:hB,LeftArrow:uB,Leftarrow:dB,LeftArrowRightArrow:fB,leftarrowtail:pB,LeftCeiling:gB,LeftDoubleBracket:mB,LeftDownTeeVector:yB,LeftDownVectorBar:_B,LeftDownVector:vB,LeftFloor:bB,leftharpoondown:xB,leftharpoonup:wB,leftleftarrows:EB,leftrightarrow:SB,LeftRightArrow:CB,Leftrightarrow:TB,leftrightarrows:AB,leftrightharpoons:MB,leftrightsquigarrow:RB,LeftRightVector:LB,LeftTeeArrow:IB,LeftTee:PB,LeftTeeVector:kB,leftthreetimes:OB,LeftTriangleBar:DB,LeftTriangle:FB,LeftTriangleEqual:NB,LeftUpDownVector:$B,LeftUpTeeVector:BB,LeftUpVectorBar:jB,LeftUpVector:zB,LeftVectorBar:GB,LeftVector:UB,lEg:VB,leg:qB,leq:HB,leqq:WB,leqslant:YB,lescc:XB,les:ZB,lesdot:KB,lesdoto:JB,lesdotor:QB,lesg:e5,lesges:t5,lessapprox:i5,lessdot:r5,lesseqgtr:n5,lesseqqgtr:s5,LessEqualGreater:o5,LessFullEqual:a5,LessGreater:l5,lessgtr:c5,LessLess:h5,lesssim:u5,LessSlantEqual:d5,LessTilde:f5,lfisht:p5,lfloor:g5,Lfr:m5,lfr:y5,lg:_5,lgE:v5,lHar:b5,lhard:x5,lharu:w5,lharul:E5,lhblk:S5,LJcy:C5,ljcy:T5,llarr:A5,ll:M5,Ll:R5,llcorner:L5,Lleftarrow:I5,llhard:P5,lltri:k5,Lmidot:O5,lmidot:D5,lmoustache:F5,lmoust:N5,lnap:$5,lnapprox:B5,lne:j5,lnE:z5,lneq:G5,lneqq:U5,lnsim:V5,loang:q5,loarr:H5,lobrk:W5,longleftarrow:Y5,LongLeftArrow:X5,Longleftarrow:Z5,longleftrightarrow:K5,LongLeftRightArrow:J5,Longleftrightarrow:Q5,longmapsto:ej,longrightarrow:tj,LongRightArrow:ij,Longrightarrow:rj,looparrowleft:nj,looparrowright:sj,lopar:oj,Lopf:aj,lopf:lj,loplus:cj,lotimes:hj,lowast:uj,lowbar:dj,LowerLeftArrow:fj,LowerRightArrow:pj,loz:gj,lozenge:mj,lozf:yj,lpar:_j,lparlt:vj,lrarr:bj,lrcorner:xj,lrhar:wj,lrhard:Ej,lrm:Sj,lrtri:Cj,lsaquo:Tj,lscr:Aj,Lscr:Mj,lsh:Rj,Lsh:Lj,lsim:Ij,lsime:Pj,lsimg:kj,lsqb:Oj,lsquo:Dj,lsquor:Fj,Lstrok:Nj,lstrok:$j,ltcc:Bj,ltcir:jj,lt:zj,LT:Gj,Lt:Uj,ltdot:Vj,lthree:qj,ltimes:Hj,ltlarr:Wj,ltquest:Yj,ltri:Xj,ltrie:Zj,ltrif:Kj,ltrPar:Jj,lurdshar:Qj,luruhar:e4,lvertneqq:t4,lvnE:i4,macr:r4,male:n4,malt:s4,maltese:o4,map:a4,mapsto:l4,mapstodown:c4,mapstoleft:h4,mapstoup:u4,marker:d4,mcomma:f4,Mcy:p4,mcy:g4,mdash:m4,mDDot:y4,measuredangle:_4,MediumSpace:v4,Mellintrf:b4,Mfr:x4,mfr:w4,mho:E4,micro:S4,midast:C4,midcir:T4,mid:A4,middot:M4,minusb:R4,minus:L4,minusd:I4,minusdu:P4,MinusPlus:k4,mlcp:O4,mldr:D4,mnplus:F4,models:N4,Mopf:$4,mopf:B4,mp:j4,mscr:z4,Mscr:G4,mstpos:U4,Mu:V4,mu:q4,multimap:H4,mumap:W4,nabla:Y4,Nacute:X4,nacute:Z4,nang:K4,nap:J4,napE:Q4,napid:ez,napos:tz,napprox:iz,natural:rz,naturals:nz,natur:sz,nbsp:oz,nbump:az,nbumpe:lz,ncap:cz,Ncaron:hz,ncaron:uz,Ncedil:dz,ncedil:fz,ncong:pz,ncongdot:gz,ncup:mz,Ncy:yz,ncy:_z,ndash:vz,nearhk:bz,nearr:xz,neArr:wz,nearrow:Ez,ne:Sz,nedot:Cz,NegativeMediumSpace:Tz,NegativeThickSpace:Az,NegativeThinSpace:Mz,NegativeVeryThinSpace:Rz,nequiv:Lz,nesear:Iz,nesim:Pz,NestedGreaterGreater:kz,NestedLessLess:Oz,NewLine:Dz,nexist:Fz,nexists:Nz,Nfr:$z,nfr:Bz,ngE:jz,nge:zz,ngeq:Gz,ngeqq:Uz,ngeqslant:Vz,nges:qz,nGg:Hz,ngsim:Wz,nGt:Yz,ngt:Xz,ngtr:Zz,nGtv:Kz,nharr:Jz,nhArr:Qz,nhpar:eG,ni:tG,nis:iG,nisd:rG,niv:nG,NJcy:sG,njcy:oG,nlarr:aG,nlArr:lG,nldr:cG,nlE:hG,nle:uG,nleftarrow:dG,nLeftarrow:fG,nleftrightarrow:pG,nLeftrightarrow:gG,nleq:mG,nleqq:yG,nleqslant:_G,nles:vG,nless:bG,nLl:xG,nlsim:wG,nLt:EG,nlt:SG,nltri:CG,nltrie:TG,nLtv:AG,nmid:MG,NoBreak:RG,NonBreakingSpace:LG,nopf:IG,Nopf:PG,Not:kG,not:OG,NotCongruent:DG,NotCupCap:FG,NotDoubleVerticalBar:NG,NotElement:$G,NotEqual:BG,NotEqualTilde:jG,NotExists:zG,NotGreater:GG,NotGreaterEqual:UG,NotGreaterFullEqual:VG,NotGreaterGreater:qG,NotGreaterLess:HG,NotGreaterSlantEqual:WG,NotGreaterTilde:YG,NotHumpDownHump:XG,NotHumpEqual:ZG,notin:KG,notindot:JG,notinE:QG,notinva:eU,notinvb:tU,notinvc:iU,NotLeftTriangleBar:rU,NotLeftTriangle:nU,NotLeftTriangleEqual:sU,NotLess:oU,NotLessEqual:aU,NotLessGreater:lU,NotLessLess:cU,NotLessSlantEqual:hU,NotLessTilde:uU,NotNestedGreaterGreater:dU,NotNestedLessLess:fU,notni:pU,notniva:gU,notnivb:mU,notnivc:yU,NotPrecedes:_U,NotPrecedesEqual:vU,NotPrecedesSlantEqual:bU,NotReverseElement:xU,NotRightTriangleBar:wU,NotRightTriangle:EU,NotRightTriangleEqual:SU,NotSquareSubset:CU,NotSquareSubsetEqual:TU,NotSquareSuperset:AU,NotSquareSupersetEqual:MU,NotSubset:RU,NotSubsetEqual:LU,NotSucceeds:IU,NotSucceedsEqual:PU,NotSucceedsSlantEqual:kU,NotSucceedsTilde:OU,NotSuperset:DU,NotSupersetEqual:FU,NotTilde:NU,NotTildeEqual:$U,NotTildeFullEqual:BU,NotTildeTilde:jU,NotVerticalBar:zU,nparallel:GU,npar:UU,nparsl:VU,npart:qU,npolint:HU,npr:WU,nprcue:YU,nprec:XU,npreceq:ZU,npre:KU,nrarrc:JU,nrarr:QU,nrArr:e6,nrarrw:t6,nrightarrow:i6,nRightarrow:r6,nrtri:n6,nrtrie:s6,nsc:o6,nsccue:a6,nsce:l6,Nscr:c6,nscr:h6,nshortmid:u6,nshortparallel:d6,nsim:f6,nsime:p6,nsimeq:g6,nsmid:m6,nspar:y6,nsqsube:_6,nsqsupe:v6,nsub:b6,nsubE:x6,nsube:w6,nsubset:E6,nsubseteq:S6,nsubseteqq:C6,nsucc:T6,nsucceq:A6,nsup:M6,nsupE:R6,nsupe:L6,nsupset:I6,nsupseteq:P6,nsupseteqq:k6,ntgl:O6,Ntilde:D6,ntilde:F6,ntlg:N6,ntriangleleft:$6,ntrianglelefteq:B6,ntriangleright:j6,ntrianglerighteq:z6,Nu:G6,nu:U6,num:V6,numero:q6,numsp:H6,nvap:W6,nvdash:Y6,nvDash:X6,nVdash:Z6,nVDash:K6,nvge:J6,nvgt:Q6,nvHarr:e8,nvinfin:t8,nvlArr:i8,nvle:r8,nvlt:n8,nvltrie:s8,nvrArr:o8,nvrtrie:a8,nvsim:l8,nwarhk:c8,nwarr:h8,nwArr:u8,nwarrow:d8,nwnear:f8,Oacute:p8,oacute:g8,oast:m8,Ocirc:y8,ocirc:_8,ocir:v8,Ocy:b8,ocy:x8,odash:w8,Odblac:E8,odblac:S8,odiv:C8,odot:T8,odsold:A8,OElig:M8,oelig:R8,ofcir:L8,Ofr:I8,ofr:P8,ogon:k8,Ograve:O8,ograve:D8,ogt:F8,ohbar:N8,ohm:$8,oint:B8,olarr:j8,olcir:z8,olcross:G8,oline:U8,olt:V8,Omacr:q8,omacr:H8,Omega:W8,omega:Y8,Omicron:X8,omicron:Z8,omid:K8,ominus:J8,Oopf:Q8,oopf:eV,opar:tV,OpenCurlyDoubleQuote:iV,OpenCurlyQuote:rV,operp:nV,oplus:sV,orarr:oV,Or:aV,or:lV,ord:cV,order:hV,orderof:uV,ordf:dV,ordm:fV,origof:pV,oror:gV,orslope:mV,orv:yV,oS:_V,Oscr:vV,oscr:bV,Oslash:xV,oslash:wV,osol:EV,Otilde:SV,otilde:CV,otimesas:TV,Otimes:AV,otimes:MV,Ouml:RV,ouml:LV,ovbar:IV,OverBar:PV,OverBrace:kV,OverBracket:OV,OverParenthesis:DV,para:FV,parallel:NV,par:$V,parsim:BV,parsl:jV,part:zV,PartialD:GV,Pcy:UV,pcy:VV,percnt:qV,period:HV,permil:WV,perp:YV,pertenk:XV,Pfr:ZV,pfr:KV,Phi:JV,phi:QV,phiv:eq,phmmat:tq,phone:iq,Pi:rq,pi:nq,pitchfork:sq,piv:oq,planck:aq,planckh:lq,plankv:cq,plusacir:hq,plusb:uq,pluscir:dq,plus:fq,plusdo:pq,plusdu:gq,pluse:mq,PlusMinus:yq,plusmn:_q,plussim:vq,plustwo:bq,pm:xq,Poincareplane:wq,pointint:Eq,popf:Sq,Popf:Cq,pound:Tq,prap:Aq,Pr:Mq,pr:Rq,prcue:Lq,precapprox:Iq,prec:Pq,preccurlyeq:kq,Precedes:Oq,PrecedesEqual:Dq,PrecedesSlantEqual:Fq,PrecedesTilde:Nq,preceq:$q,precnapprox:Bq,precneqq:jq,precnsim:zq,pre:Gq,prE:Uq,precsim:Vq,prime:qq,Prime:Hq,primes:Wq,prnap:Yq,prnE:Xq,prnsim:Zq,prod:Kq,Product:Jq,profalar:Qq,profline:eH,profsurf:tH,prop:iH,Proportional:rH,Proportion:nH,propto:sH,prsim:oH,prurel:aH,Pscr:lH,pscr:cH,Psi:hH,psi:uH,puncsp:dH,Qfr:fH,qfr:pH,qint:gH,qopf:mH,Qopf:yH,qprime:_H,Qscr:vH,qscr:bH,quaternions:xH,quatint:wH,quest:EH,questeq:SH,quot:CH,QUOT:TH,rAarr:AH,race:MH,Racute:RH,racute:LH,radic:IH,raemptyv:PH,rang:kH,Rang:OH,rangd:DH,range:FH,rangle:NH,raquo:$H,rarrap:BH,rarrb:jH,rarrbfs:zH,rarrc:GH,rarr:UH,Rarr:VH,rArr:qH,rarrfs:HH,rarrhk:WH,rarrlp:YH,rarrpl:XH,rarrsim:ZH,Rarrtl:KH,rarrtl:JH,rarrw:QH,ratail:eW,rAtail:tW,ratio:iW,rationals:rW,rbarr:nW,rBarr:sW,RBarr:oW,rbbrk:aW,rbrace:lW,rbrack:cW,rbrke:hW,rbrksld:uW,rbrkslu:dW,Rcaron:fW,rcaron:pW,Rcedil:gW,rcedil:mW,rceil:yW,rcub:_W,Rcy:vW,rcy:bW,rdca:xW,rdldhar:wW,rdquo:EW,rdquor:SW,rdsh:CW,real:TW,realine:AW,realpart:MW,reals:RW,Re:LW,rect:IW,reg:PW,REG:kW,ReverseElement:OW,ReverseEquilibrium:DW,ReverseUpEquilibrium:FW,rfisht:NW,rfloor:$W,rfr:BW,Rfr:jW,rHar:zW,rhard:GW,rharu:UW,rharul:VW,Rho:qW,rho:HW,rhov:WW,RightAngleBracket:YW,RightArrowBar:XW,rightarrow:ZW,RightArrow:KW,Rightarrow:JW,RightArrowLeftArrow:QW,rightarrowtail:e9,RightCeiling:t9,RightDoubleBracket:i9,RightDownTeeVector:r9,RightDownVectorBar:n9,RightDownVector:s9,RightFloor:o9,rightharpoondown:a9,rightharpoonup:l9,rightleftarrows:c9,rightleftharpoons:h9,rightrightarrows:u9,rightsquigarrow:d9,RightTeeArrow:f9,RightTee:p9,RightTeeVector:g9,rightthreetimes:m9,RightTriangleBar:y9,RightTriangle:_9,RightTriangleEqual:v9,RightUpDownVector:b9,RightUpTeeVector:x9,RightUpVectorBar:w9,RightUpVector:E9,RightVectorBar:S9,RightVector:C9,ring:T9,risingdotseq:A9,rlarr:M9,rlhar:R9,rlm:L9,rmoustache:I9,rmoust:P9,rnmid:k9,roang:O9,roarr:D9,robrk:F9,ropar:N9,ropf:$9,Ropf:B9,roplus:j9,rotimes:z9,RoundImplies:G9,rpar:U9,rpargt:V9,rppolint:q9,rrarr:H9,Rrightarrow:W9,rsaquo:Y9,rscr:X9,Rscr:Z9,rsh:K9,Rsh:J9,rsqb:Q9,rsquo:e7,rsquor:t7,rthree:i7,rtimes:r7,rtri:n7,rtrie:s7,rtrif:o7,rtriltri:a7,RuleDelayed:l7,ruluhar:c7,rx:h7,Sacute:u7,sacute:d7,sbquo:f7,scap:p7,Scaron:g7,scaron:m7,Sc:y7,sc:_7,sccue:v7,sce:b7,scE:x7,Scedil:w7,scedil:E7,Scirc:S7,scirc:C7,scnap:T7,scnE:A7,scnsim:M7,scpolint:R7,scsim:L7,Scy:I7,scy:P7,sdotb:k7,sdot:O7,sdote:D7,searhk:F7,searr:N7,seArr:$7,searrow:B7,sect:j7,semi:z7,seswar:G7,setminus:U7,setmn:V7,sext:q7,Sfr:H7,sfr:W7,sfrown:Y7,sharp:X7,SHCHcy:Z7,shchcy:K7,SHcy:J7,shcy:Q7,ShortDownArrow:eY,ShortLeftArrow:tY,shortmid:iY,shortparallel:rY,ShortRightArrow:nY,ShortUpArrow:sY,shy:oY,Sigma:aY,sigma:lY,sigmaf:cY,sigmav:hY,sim:uY,simdot:dY,sime:fY,simeq:pY,simg:gY,simgE:mY,siml:yY,simlE:_Y,simne:vY,simplus:bY,simrarr:xY,slarr:wY,SmallCircle:EY,smallsetminus:SY,smashp:CY,smeparsl:TY,smid:AY,smile:MY,smt:RY,smte:LY,smtes:IY,SOFTcy:PY,softcy:kY,solbar:OY,solb:DY,sol:FY,Sopf:NY,sopf:$Y,spades:BY,spadesuit:jY,spar:zY,sqcap:GY,sqcaps:UY,sqcup:VY,sqcups:qY,Sqrt:HY,sqsub:WY,sqsube:YY,sqsubset:XY,sqsubseteq:ZY,sqsup:KY,sqsupe:JY,sqsupset:QY,sqsupseteq:eX,square:tX,Square:iX,SquareIntersection:rX,SquareSubset:nX,SquareSubsetEqual:sX,SquareSuperset:oX,SquareSupersetEqual:aX,SquareUnion:lX,squarf:cX,squ:hX,squf:uX,srarr:dX,Sscr:fX,sscr:pX,ssetmn:gX,ssmile:mX,sstarf:yX,Star:_X,star:vX,starf:bX,straightepsilon:xX,straightphi:wX,strns:EX,sub:SX,Sub:CX,subdot:TX,subE:AX,sube:MX,subedot:RX,submult:LX,subnE:IX,subne:PX,subplus:kX,subrarr:OX,subset:DX,Subset:FX,subseteq:NX,subseteqq:$X,SubsetEqual:BX,subsetneq:jX,subsetneqq:zX,subsim:GX,subsub:UX,subsup:VX,succapprox:qX,succ:HX,succcurlyeq:WX,Succeeds:YX,SucceedsEqual:XX,SucceedsSlantEqual:ZX,SucceedsTilde:KX,succeq:JX,succnapprox:QX,succneqq:eZ,succnsim:tZ,succsim:iZ,SuchThat:rZ,sum:nZ,Sum:sZ,sung:oZ,sup1:aZ,sup2:lZ,sup3:cZ,sup:hZ,Sup:uZ,supdot:dZ,supdsub:fZ,supE:pZ,supe:gZ,supedot:mZ,Superset:yZ,SupersetEqual:_Z,suphsol:vZ,suphsub:bZ,suplarr:xZ,supmult:wZ,supnE:EZ,supne:SZ,supplus:CZ,supset:TZ,Supset:AZ,supseteq:MZ,supseteqq:RZ,supsetneq:LZ,supsetneqq:IZ,supsim:PZ,supsub:kZ,supsup:OZ,swarhk:DZ,swarr:FZ,swArr:NZ,swarrow:$Z,swnwar:BZ,szlig:jZ,Tab:zZ,target:GZ,Tau:UZ,tau:VZ,tbrk:qZ,Tcaron:HZ,tcaron:WZ,Tcedil:YZ,tcedil:XZ,Tcy:ZZ,tcy:KZ,tdot:JZ,telrec:QZ,Tfr:eK,tfr:tK,there4:iK,therefore:rK,Therefore:nK,Theta:sK,theta:oK,thetasym:aK,thetav:lK,thickapprox:cK,thicksim:hK,ThickSpace:uK,ThinSpace:dK,thinsp:fK,thkap:pK,thksim:gK,THORN:mK,thorn:yK,tilde:_K,Tilde:vK,TildeEqual:bK,TildeFullEqual:xK,TildeTilde:wK,timesbar:EK,timesb:SK,times:CK,timesd:TK,tint:AK,toea:MK,topbot:RK,topcir:LK,top:IK,Topf:PK,topf:kK,topfork:OK,tosa:DK,tprime:FK,trade:NK,TRADE:$K,triangle:BK,triangledown:jK,triangleleft:zK,trianglelefteq:GK,triangleq:UK,triangleright:VK,trianglerighteq:qK,tridot:HK,trie:WK,triminus:YK,TripleDot:XK,triplus:ZK,trisb:KK,tritime:JK,trpezium:QK,Tscr:eJ,tscr:tJ,TScy:iJ,tscy:rJ,TSHcy:nJ,tshcy:sJ,Tstrok:oJ,tstrok:aJ,twixt:lJ,twoheadleftarrow:cJ,twoheadrightarrow:hJ,Uacute:uJ,uacute:dJ,uarr:fJ,Uarr:pJ,uArr:gJ,Uarrocir:mJ,Ubrcy:yJ,ubrcy:_J,Ubreve:vJ,ubreve:bJ,Ucirc:xJ,ucirc:wJ,Ucy:EJ,ucy:SJ,udarr:CJ,Udblac:TJ,udblac:AJ,udhar:MJ,ufisht:RJ,Ufr:LJ,ufr:IJ,Ugrave:PJ,ugrave:kJ,uHar:OJ,uharl:DJ,uharr:FJ,uhblk:NJ,ulcorn:$J,ulcorner:BJ,ulcrop:jJ,ultri:zJ,Umacr:GJ,umacr:UJ,uml:VJ,UnderBar:qJ,UnderBrace:HJ,UnderBracket:WJ,UnderParenthesis:YJ,Union:XJ,UnionPlus:ZJ,Uogon:KJ,uogon:JJ,Uopf:QJ,uopf:eQ,UpArrowBar:tQ,uparrow:iQ,UpArrow:rQ,Uparrow:nQ,UpArrowDownArrow:sQ,updownarrow:oQ,UpDownArrow:aQ,Updownarrow:lQ,UpEquilibrium:cQ,upharpoonleft:hQ,upharpoonright:uQ,uplus:dQ,UpperLeftArrow:fQ,UpperRightArrow:pQ,upsi:gQ,Upsi:mQ,upsih:yQ,Upsilon:_Q,upsilon:vQ,UpTeeArrow:bQ,UpTee:xQ,upuparrows:wQ,urcorn:EQ,urcorner:SQ,urcrop:CQ,Uring:TQ,uring:AQ,urtri:MQ,Uscr:RQ,uscr:LQ,utdot:IQ,Utilde:PQ,utilde:kQ,utri:OQ,utrif:DQ,uuarr:FQ,Uuml:NQ,uuml:$Q,uwangle:BQ,vangrt:jQ,varepsilon:zQ,varkappa:GQ,varnothing:UQ,varphi:VQ,varpi:qQ,varpropto:HQ,varr:WQ,vArr:YQ,varrho:XQ,varsigma:ZQ,varsubsetneq:KQ,varsubsetneqq:JQ,varsupsetneq:QQ,varsupsetneqq:eee,vartheta:tee,vartriangleleft:iee,vartriangleright:ree,vBar:nee,Vbar:see,vBarv:oee,Vcy:aee,vcy:lee,vdash:cee,vDash:hee,Vdash:uee,VDash:dee,Vdashl:fee,veebar:pee,vee:gee,Vee:mee,veeeq:yee,vellip:_ee,verbar:vee,Verbar:bee,vert:xee,Vert:wee,VerticalBar:Eee,VerticalLine:See,VerticalSeparator:Cee,VerticalTilde:Tee,VeryThinSpace:Aee,Vfr:Mee,vfr:Ree,vltri:Lee,vnsub:Iee,vnsup:Pee,Vopf:kee,vopf:Oee,vprop:Dee,vrtri:Fee,Vscr:Nee,vscr:$ee,vsubnE:Bee,vsubne:jee,vsupnE:zee,vsupne:Gee,Vvdash:Uee,vzigzag:Vee,Wcirc:qee,wcirc:Hee,wedbar:Wee,wedge:Yee,Wedge:Xee,wedgeq:Zee,weierp:Kee,Wfr:Jee,wfr:Qee,Wopf:ete,wopf:tte,wp:ite,wr:rte,wreath:nte,Wscr:ste,wscr:ote,xcap:ate,xcirc:lte,xcup:cte,xdtri:hte,Xfr:ute,xfr:dte,xharr:fte,xhArr:pte,Xi:gte,xi:mte,xlarr:yte,xlArr:_te,xmap:vte,xnis:bte,xodot:xte,Xopf:wte,xopf:Ete,xoplus:Ste,xotime:Cte,xrarr:Tte,xrArr:Ate,Xscr:Mte,xscr:Rte,xsqcup:Lte,xuplus:Ite,xutri:Pte,xvee:kte,xwedge:Ote,Yacute:Dte,yacute:Fte,YAcy:Nte,yacy:$te,Ycirc:Bte,ycirc:jte,Ycy:zte,ycy:Gte,yen:Ute,Yfr:Vte,yfr:qte,YIcy:Hte,yicy:Wte,Yopf:Yte,yopf:Xte,Yscr:Zte,yscr:Kte,YUcy:Jte,yucy:Qte,yuml:eie,Yuml:tie,Zacute:iie,zacute:rie,Zcaron:nie,zcaron:sie,Zcy:oie,zcy:aie,Zdot:lie,zdot:cie,zeetrf:hie,ZeroWidthSpace:uie,Zeta:die,zeta:fie,zfr:pie,Zfr:gie,ZHcy:mie,zhcy:yie,zigrarr:_ie,zopf:vie,Zopf:bie,Zscr:xie,zscr:wie,zwj:Eie,zwnj:Sie,default:obe}),Cie="",Tie="",Aie="",Mie="",Rie="",Lie="",Iie="",Pie="",kie="",Oie="&",Die="&",Fie="",Nie="",$ie="",Bie="",jie="",zie="",Gie="",Uie="",Vie="",qie="",Hie="",Wie="",Yie="",Xie="",Zie="",Kie="",Jie="",Qie="",ere="",tre="",ire="",rre="",nre="",sre="",ore="",are="",lre="",cre="",hre="",ure=">",dre=">",fre="",pre="",gre="",mre="",yre="",_re="",vre="",bre="",xre="",wre="",Ere="",Sre="<",Cre="<",Tre="",Are="",Mre="",Rre="",Lre="",Ire="",Pre="",kre="",Ore="",Dre="",Fre="",Nre="",$re="",Bre="",jre="",zre="",Gre="",Ure="",Vre="",qre="",Hre="",Wre="",Yre="",Xre="",Zre='"',Kre='"',Jre="",Qre="",ene="",tne="",ine="",rne="",nne="",sne="",one="",ane="",lne="",cne="",hne="",une="",dne="",fne="",pne="",gne="",mne="",yne="",_ne="",vne="",bne="",xne="",wne="",lbe={Aacute:Cie,aacute:Tie,Acirc:Aie,acirc:Mie,acute:Rie,AElig:Lie,aelig:Iie,Agrave:Pie,agrave:kie,amp:Oie,AMP:Die,Aring:Fie,aring:Nie,Atilde:$ie,atilde:Bie,Auml:jie,auml:zie,brvbar:Gie,Ccedil:Uie,ccedil:Vie,cedil:qie,cent:Hie,copy:Wie,COPY:Yie,curren:Xie,deg:Zie,divide:Kie,Eacute:Jie,eacute:Qie,Ecirc:ere,ecirc:tre,Egrave:ire,egrave:rre,ETH:nre,eth:sre,Euml:ore,euml:are,frac12:lre,frac14:cre,frac34:hre,gt:ure,GT:dre,Iacute:fre,iacute:pre,Icirc:gre,icirc:mre,iexcl:yre,Igrave:_re,igrave:vre,iquest:bre,Iuml:xre,iuml:wre,laquo:Ere,lt:Sre,LT:Cre,macr:Tre,micro:Are,middot:Mre,nbsp:Rre,not:Lre,Ntilde:Ire,ntilde:Pre,Oacute:kre,oacute:Ore,Ocirc:Dre,ocirc:Fre,Ograve:Nre,ograve:$re,ordf:Bre,ordm:jre,Oslash:zre,oslash:Gre,Otilde:Ure,otilde:Vre,Ouml:qre,ouml:Hre,para:Wre,plusmn:Yre,pound:Xre,quot:Zre,QUOT:Kre,raquo:Jre,reg:Qre,REG:ene,sect:tne,shy:ine,sup1:rne,sup2:nne,sup3:sne,szlig:one,THORN:ane,thorn:lne,times:cne,Uacute:hne,uacute:une,Ucirc:dne,ucirc:fne,Ugrave:pne,ugrave:gne,uml:mne,Uuml:yne,uuml:_ne,Yacute:vne,yacute:bne,yen:xne,yuml:wne},cbe=Object.freeze({__proto__:null,Aacute:Cie,aacute:Tie,Acirc:Aie,acirc:Mie,acute:Rie,AElig:Lie,aelig:Iie,Agrave:Pie,agrave:kie,amp:Oie,AMP:Die,Aring:Fie,aring:Nie,Atilde:$ie,atilde:Bie,Auml:jie,auml:zie,brvbar:Gie,Ccedil:Uie,ccedil:Vie,cedil:qie,cent:Hie,copy:Wie,COPY:Yie,curren:Xie,deg:Zie,divide:Kie,Eacute:Jie,eacute:Qie,Ecirc:ere,ecirc:tre,Egrave:ire,egrave:rre,ETH:nre,eth:sre,Euml:ore,euml:are,frac12:lre,frac14:cre,frac34:hre,gt:ure,GT:dre,Iacute:fre,iacute:pre,Icirc:gre,icirc:mre,iexcl:yre,Igrave:_re,igrave:vre,iquest:bre,Iuml:xre,iuml:wre,laquo:Ere,lt:Sre,LT:Cre,macr:Tre,micro:Are,middot:Mre,nbsp:Rre,not:Lre,Ntilde:Ire,ntilde:Pre,Oacute:kre,oacute:Ore,Ocirc:Dre,ocirc:Fre,Ograve:Nre,ograve:$re,ordf:Bre,ordm:jre,Oslash:zre,oslash:Gre,Otilde:Ure,otilde:Vre,Ouml:qre,ouml:Hre,para:Wre,plusmn:Yre,pound:Xre,quot:Zre,QUOT:Kre,raquo:Jre,reg:Qre,REG:ene,sect:tne,shy:ine,sup1:rne,sup2:nne,sup3:sne,szlig:one,THORN:ane,thorn:lne,times:cne,Uacute:hne,uacute:une,Ucirc:dne,ucirc:fne,Ugrave:pne,ugrave:gne,uml:mne,Uuml:yne,uuml:_ne,Yacute:vne,yacute:bne,yen:xne,yuml:wne,default:lbe}),Ene="&",Sne="'",Cne=">",Tne="<",Ane='"',hbe={amp:Ene,apos:Sne,gt:Cne,lt:Tne,quot:Ane},ube=Object.freeze({__proto__:null,amp:Ene,apos:Sne,gt:Cne,lt:Tne,quot:Ane,default:hbe}),dbe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},fbe=Object.freeze({__proto__:null,default:dbe}),pbe=m(fbe),Mne=g(function(S,I){var j=f&&f.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(I,"__esModule",{value:!0});var H=j(pbe);function ue(se){if(se>=55296&&se<=57343||se>1114111)return"";se in H.default&&(se=H.default[se]);var Ge="";return se>65535&&(se-=65536,Ge+=String.fromCharCode(se>>>10&1023|55296),se=56320|se&1023),Ge+=String.fromCharCode(se),Ge}I.default=ue});p(Mne);var Rne=m(abe),gbe=m(cbe),Lne=m(ube),Ia=g(function(S,I){var j=f&&f.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}};Object.defineProperty(I,"__esModule",{value:!0});var H=j(Rne),ue=j(gbe),se=j(Lne),Ge=j(Mne);I.decodeXML=we(se.default),I.decodeHTMLStrict=we(H.default);function we(Rt){var Lt=Object.keys(Rt).join("|"),jt=Nt(Rt);Lt+="|#[xX][\\da-fA-F]+|#\\d+";var zt=new RegExp("&(?:"+Lt+");","g");return function(yr){return String(yr).replace(zt,jt)}}var Ye=function(Rt,Lt){return Rt<Lt?1:-1};I.decodeHTML=function(){for(var Rt=Object.keys(ue.default).sort(Ye),Lt=Object.keys(H.default).sort(Ye),jt=0,zt=0;jt<Lt.length;jt++)Rt[zt]===Lt[jt]?(Lt[jt]+=";?",zt++):Lt[jt]+=";";var yr=new RegExp("&(?:"+Lt.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),sh=Nt(H.default);function Vx(oh){return oh.substr(-1)!==";"&&(oh+=";"),sh(oh)}return function(oh){return String(oh).replace(yr,Vx)}}();function Nt(Rt){return function(jt){return jt.charAt(1)==="#"?jt.charAt(2)==="X"||jt.charAt(2)==="x"?Ge.default(parseInt(jt.substr(3),16)):Ge.default(parseInt(jt.substr(2),10)):Rt[jt.slice(1,-1)]}}});p(Ia),Ia.decodeXML,Ia.decodeHTMLStrict,Ia.decodeHTML;var th=g(function(S,I){var j=f&&f.__importDefault||function(Rr){return Rr&&Rr.__esModule?Rr:{default:Rr}};Object.defineProperty(I,"__esModule",{value:!0});var H=j(Lne),ue=Nt(H.default),se=Rt(ue);I.encodeXML=sh(ue,se);var Ge=j(Rne),we=Nt(Ge.default),Ye=Rt(we);I.encodeHTML=sh(we,Ye);function Nt(Rr){return Object.keys(Rr).sort().reduce(function(Bl,qo){return Bl[Rr[qo]]="&"+qo+";",Bl},{})}function Rt(Rr){var Bl=[],qo=[];return Object.keys(Rr).forEach(function(ah){return ah.length===1?Bl.push("\\"+ah):qo.push(ah)}),qo.unshift("["+Bl.join("")+"]"),new RegExp(qo.join("|"),"g")}var Lt=/[^\0-\x7F]/g,jt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function zt(Rr){return"&#x"+Rr.charCodeAt(0).toString(16).toUpperCase()+";"}function yr(Rr,Bl){var qo=Rr.charCodeAt(0),ah=Rr.charCodeAt(1),zwe=(qo-55296)*1024+ah-56320+65536;return"&#x"+zwe.toString(16).toUpperCase()+";"}function sh(Rr,Bl){return function(qo){return qo.replace(Bl,function(ah){return Rr[ah]}).replace(jt,yr).replace(Lt,zt)}}var Vx=Rt(ue);function oh(Rr){return Rr.replace(Vx,zt).replace(jt,yr).replace(Lt,zt)}I.escape=oh});p(th),th.encodeXML,th.encodeHTML,th.escape;var zr=g(function(S,I){Object.defineProperty(I,"__esModule",{value:!0});function j(we,Ye){return(!Ye||Ye<=0?Ia.decodeXML:Ia.decodeHTML)(we)}I.decode=j;function H(we,Ye){return(!Ye||Ye<=0?Ia.decodeXML:Ia.decodeHTMLStrict)(we)}I.decodeStrict=H;function ue(we,Ye){return(!Ye||Ye<=0?th.encodeXML:th.encodeHTML)(we)}I.encode=ue;var se=th;I.encodeXML=se.encodeXML,I.encodeHTML=se.encodeHTML,I.escape=se.escape,I.encodeHTML4=se.encodeHTML,I.encodeHTML5=se.encodeHTML;var Ge=Ia;I.decodeXML=Ge.decodeXML,I.decodeHTML=Ge.decodeHTML,I.decodeHTMLStrict=Ge.decodeHTMLStrict,I.decodeHTML4=Ge.decodeHTML,I.decodeHTML5=Ge.decodeHTML,I.decodeHTML4Strict=Ge.decodeHTMLStrict,I.decodeHTML5Strict=Ge.decodeHTMLStrict,I.decodeXMLStrict=Ge.decodeXML});p(zr),zr.decode,zr.decodeStrict,zr.encode,zr.encodeXML,zr.encodeHTML,zr.escape,zr.encodeHTML4,zr.encodeHTML5,zr.decodeXML;var Ine=zr.decodeHTML;zr.decodeHTMLStrict,zr.decodeHTML4,zr.decodeHTML5,zr.decodeHTML4Strict,zr.decodeHTML5Strict,zr.decodeXMLStrict;var mbe=92,Pne="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",kne="[A-Za-z][A-Za-z0-9-]*",ybe="[a-zA-Z_:][a-zA-Z0-9:._-]*",_be="[^\"'=<>`\\x00-\\x20]+",vbe="'[^']*'",bbe='"[^"]*"',xbe="(?:"+_be+"|"+vbe+"|"+bbe+")",wbe="(?:\\s*=\\s*"+xbe+")",Ebe="(?:\\s+"+ybe+wbe+"?)",One="<"+kne+Ebe+"*\\s*/?>",Dne="</"+kne+"\\s*[>]",Sbe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Cbe="[<][?][\\s\\S]*?[?][>]",Tbe="<![A-Z]+\\s+[^>]*>",Abe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Mbe="(?:"+One+"|"+Dne+"|"+Sbe+"|"+Cbe+"|"+Tbe+"|"+Abe+")",Rbe=new RegExp("^"+Mbe),Lbe=/[\\&]/,Fne="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",Ibe=new RegExp("\\\\"+Fne+"|"+Pne,"gi"),Pbe='[&<>"]',Nne=new RegExp(Pbe,"g"),kbe=function(S){return S.charCodeAt(0)===mbe?S.charAt(1):Ine(S)},$ne=function(S){return Lbe.test(S)?S.replace(Ibe,kbe):S},Obe=function(S){try{return d(S)}catch{return S}},Dbe=function(S){switch(S){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return S}},Bne=function(S){return Nne.test(S)?S.replace(Nne,Dbe):S};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var $x;function Bx(S){return $x(S)}if(String.fromCodePoint)$x=function(S){try{return String.fromCodePoint(S)}catch(I){if(I instanceof RangeError)return"";throw I}};else{var Fbe=String.fromCharCode,Nbe=Math.floor;$x=function(){var S=16384,I=[],j,H,ue=-1,se=arguments.length;if(!se)return"";for(var Ge="";++ue<se;){var we=Number(arguments[ue]);if(!isFinite(we)||we<0||we>1114111||Nbe(we)!==we)return"";we<=65535?I.push(we):(we-=65536,j=(we>>10)+55296,H=we%1024+56320,I.push(j,H)),(ue+1===se||I.length>S)&&(Ge+=Fbe.apply(null,I),I.length=0)}return Ge}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var S=function(){try{var j={},H=Object.defineProperty,ue=H(j,j,j)&&H}catch{}return ue}(),I=function(j){if(this==null)throw TypeError();var H=String(this),ue=j?Number(j):0;if(ue!=ue&&(ue=0),ue<0||ue==1/0)throw RangeError();for(var se="";ue;)ue%2==1&&(se+=H),ue>1&&(H+=H),ue>>=1;return se};S?S(String.prototype,"repeat",{value:I,configurable:!0,writable:!0}):String.prototype.repeat=I}();var Jy=Obe,jx=$ne,jne=10,zx=42,Qy=95,$be=96,zne=91,Bbe=93,Gne=60,jbe=33,Une=92,zbe=38,Vne=40,Gx=41,Gbe=58,ih=39,rh=34,qne=Fne,Ux="\\\\"+qne,Ube=Pne,Vbe=Rbe,Hne=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),qbe=new RegExp('^(?:"('+Ux+`|[^"\\x00])*"|'(`+Ux+"|[^'\\x00])*'|\\(("+Ux+"|[^()\\x00])*\\))"),Hbe=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,Wne=new RegExp("^"+qne),Wbe=new RegExp("^"+Ube,"i"),Ybe=/`+/,Xbe=/^`+/,Zbe=/\.\.\./g,Kbe=/--+/g,Jbe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Qbe=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,exe=/^ *(?:\n *)?/,Yne=/^[ \t\n\x0b\x0c\x0d]/,Xne=/^\s/,txe=/ *$/,ixe=/^ */,Zne=/^ *(?:\n|$)/,rxe=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,nxe=/^[^\n`\[\]\\!<&*_'"]+/m,rn=function(S){var I=new a("text");return I._literal=S,I},Kne=function(S){return S.slice(1,S.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},sxe=function(S){var I=S.exec(this.subject.slice(this.pos));return I===null?null:(this.pos+=I.index+I[0].length,I[0])},oxe=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},axe=function(){return this.match(exe),!0},lxe=function(S){var I=this.match(Xbe);if(I===null)return!1;for(var j=this.pos,H,ue,se;(H=this.match(Ybe))!==null;)if(H===I)return ue=new a("code"),se=this.subject.slice(j,this.pos-I.length).replace(/\n/gm," "),se.length>0&&se.match(/[^ ]/)!==null&&se[0]==" "&&se[se.length-1]==" "?ue._literal=se.slice(1,se.length-1):ue._literal=se,S.appendChild(ue),!0;return this.pos=j,S.appendChild(rn(I)),!0},cxe=function(S){var I=this.subject,j;return this.pos+=1,this.peek()===jne?(this.pos+=1,j=new a("linebreak"),S.appendChild(j)):Wne.test(I.charAt(this.pos))?(S.appendChild(rn(I.charAt(this.pos))),this.pos+=1):S.appendChild(rn("\\")),!0},hxe=function(S){var I,j,H;return(I=this.match(Jbe))?(j=I.slice(1,I.length-1),H=new a("link"),H._destination=Jy("mailto:"+j),H._title="",H.appendChild(rn(j)),S.appendChild(H),!0):(I=this.match(Qbe))?(j=I.slice(1,I.length-1),H=new a("link"),H._destination=Jy(j),H._title="",H.appendChild(rn(j)),S.appendChild(H),!0):!1},uxe=function(S){var I=this.match(Vbe);if(I===null)return!1;var j=new a("html_inline");return j._literal=I,S.appendChild(j),!0},dxe=function(S){var I=0,j,H,ue,se=this.pos,Ge,we,Ye,Nt,Rt,Lt,jt,zt;if(S===ih||S===rh)I++,this.pos++;else for(;this.peek()===S;)I++,this.pos++;return I===0?null:(j=se===0?`
`:this.subject.charAt(se-1),ue=this.peek(),ue===-1?H=`
`:H=Bx(ue),Rt=Xne.test(H),Lt=Hne.test(H),jt=Xne.test(j),zt=Hne.test(j),Ge=!Rt&&(!Lt||jt||zt),we=!jt&&(!zt||Rt||Lt),S===Qy?(Ye=Ge&&(!we||zt),Nt=we&&(!Ge||Lt)):S===ih||S===rh?(Ye=Ge&&!we,Nt=we):(Ye=Ge,Nt=we),this.pos=se,{numdelims:I,can_open:Ye,can_close:Nt})},fxe=function(S,I){var j=this.scanDelims(S);if(!j)return!1;var H=j.numdelims,ue=this.pos,se;this.pos+=H,S===ih?se="":S===rh?se="":se=this.subject.slice(ue,this.pos);var Ge=rn(se);return I.appendChild(Ge),(j.can_open||j.can_close)&&(this.options.smart||S!==ih&&S!==rh)&&(this.delimiters={cc:S,numdelims:H,origdelims:H,node:Ge,previous:this.delimiters,next:null,can_open:j.can_open,can_close:j.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},pxe=function(S){S.previous!==null&&(S.previous.next=S.next),S.next===null?this.delimiters=S.previous:S.next.previous=S.previous},gxe=function(S,I){S.next!==I&&(S.next=I,I.previous=S)},mxe=function(S){for(var I,j,H,ue,se,Ge,we,Ye,Nt,Rt,Lt=[[],[],[]],jt=!1,zt=0;zt<3;zt++)Lt[zt][Qy]=S,Lt[zt][zx]=S,Lt[zt][ih]=S,Lt[zt][rh]=S;for(j=this.delimiters;j!==null&&j.previous!==S;)j=j.previous;for(;j!==null;){var yr=j.cc;if(!j.can_close)j=j.next;else{for(I=j.previous,Rt=!1;I!==null&&I!==S&&I!==Lt[j.origdelims%3][yr];){if(jt=(j.can_open||I.can_close)&&j.origdelims%3!==0&&(I.origdelims+j.origdelims)%3===0,I.cc===j.cc&&I.can_open&&!jt){Rt=!0;break}I=I.previous}if(H=j,yr===zx||yr===Qy)if(!Rt)j=j.next;else{we=j.numdelims>=2&&I.numdelims>=2?2:1,ue=I.node,se=j.node,I.numdelims-=we,j.numdelims-=we,ue._literal=ue._literal.slice(0,ue._literal.length-we),se._literal=se._literal.slice(0,se._literal.length-we);var sh=new a(we===1?"emph":"strong");for(Ye=ue._next;Ye&&Ye!==se;)Nt=Ye._next,Ye.unlink(),sh.appendChild(Ye),Ye=Nt;ue.insertAfter(sh),gxe(I,j),I.numdelims===0&&(ue.unlink(),this.removeDelimiter(I)),j.numdelims===0&&(se.unlink(),Ge=j.next,this.removeDelimiter(j),j=Ge)}else yr===ih?(j.node._literal="",Rt&&(I.node._literal=""),j=j.next):yr===rh&&(j.node._literal="",Rt&&(I.node.literal=""),j=j.next);Rt||(Lt[H.origdelims%3][yr]=H.previous,H.can_open||this.removeDelimiter(H))}}for(;this.delimiters!==null&&this.delimiters!==S;)this.removeDelimiter(this.delimiters)},yxe=function(){var S=this.match(qbe);return S===null?null:jx(S.substr(1,S.length-2))},_xe=function(){var S=this.match(Hbe);if(S===null){if(this.peek()===Gne)return null;for(var I=this.pos,j=0,H;(H=this.peek())!==-1;)if(H===Une&&Wne.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(H===Vne)this.pos+=1,j+=1;else if(H===Gx){if(j<1)break;this.pos+=1,j-=1}else{if(Yne.exec(Bx(H))!==null)break;this.pos+=1}return this.pos===I&&H!==Gx||j!==0?null:(S=this.subject.substr(I,this.pos-I),Jy(jx(S)))}else return Jy(jx(S.substr(1,S.length-2)))},vxe=function(){var S=this.match(rxe);return S===null||S.length>1001?0:S.length},bxe=function(S){var I=this.pos;this.pos+=1;var j=rn("[");return S.appendChild(j),this.addBracket(j,I,!1),!0},xxe=function(S){var I=this.pos;if(this.pos+=1,this.peek()===zne){this.pos+=1;var j=rn("![");S.appendChild(j),this.addBracket(j,I+1,!0)}else S.appendChild(rn("!"));return!0},wxe=function(S){var I,j,H,ue,se=!1,Ge,we;if(this.pos+=1,I=this.pos,we=this.brackets,we===null)return S.appendChild(rn("]")),!0;if(!we.active)return S.appendChild(rn("]")),this.removeBracket(),!0;j=we.image;var Ye=this.pos;if(this.peek()===Vne&&(this.pos++,this.spnl()&&(H=this.parseLinkDestination())!==null&&this.spnl()&&(Yne.test(this.subject.charAt(this.pos-1))&&(ue=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===Gx?(this.pos+=1,se=!0):this.pos=Ye),!se){var Nt=this.pos,Rt=this.parseLinkLabel();if(Rt>2?Ge=this.subject.slice(Nt,Nt+Rt):we.bracketAfter||(Ge=this.subject.slice(we.index,I)),Rt===0&&(this.pos=Ye),Ge){var Lt=this.refmap[Kne(Ge)];Lt&&(H=Lt.destination,ue=Lt.title,se=!0)}}if(se){var jt=new a(j?"image":"link");jt._destination=H,jt._title=ue||"";var zt,yr;for(zt=we.node._next;zt;)yr=zt._next,zt.unlink(),jt.appendChild(zt),zt=yr;if(S.appendChild(jt),this.processEmphasis(we.previousDelimiter),this.removeBracket(),we.node.unlink(),!j)for(we=this.brackets;we!==null;)we.image||(we.active=!1),we=we.previous;return!0}else return this.removeBracket(),this.pos=I,S.appendChild(rn("]")),!0},Exe=function(S,I,j){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:S,previous:this.brackets,previousDelimiter:this.delimiters,index:I,image:j,active:!0}},Sxe=function(){this.brackets=this.brackets.previous},Cxe=function(S){var I;return(I=this.match(Wbe))?(S.appendChild(rn(Ine(I))),!0):!1},Txe=function(S){var I;return(I=this.match(nxe))?(this.options.smart?S.appendChild(rn(I.replace(Zbe,"").replace(Kbe,function(j){var H=0,ue=0;return j.length%3===0?ue=j.length/3:j.length%2===0?H=j.length/2:j.length%3===2?(H=1,ue=(j.length-2)/3):(H=2,ue=(j.length-4)/3),"".repeat(ue)+"".repeat(H)}))):S.appendChild(rn(I)),!0):!1},Axe=function(S){this.pos+=1;var I=S._lastChild;if(I&&I.type==="text"&&I._literal[I._literal.length-1]===" "){var j=I._literal[I._literal.length-2]===" ";I._literal=I._literal.replace(txe,""),S.appendChild(new a(j?"linebreak":"softbreak"))}else S.appendChild(new a("softbreak"));return this.match(ixe),!0},Mxe=function(S,I){this.subject=S,this.pos=0;var j,H,ue,se,Ge=this.pos;if(se=this.parseLinkLabel(),se===0)return 0;if(j=this.subject.substr(0,se),this.peek()===Gbe)this.pos++;else return this.pos=Ge,0;if(this.spnl(),H=this.parseLinkDestination(),H===null)return this.pos=Ge,0;var we=this.pos;this.spnl(),this.pos!==we&&(ue=this.parseLinkTitle()),ue===null&&(ue="",this.pos=we);var Ye=!0;if(this.match(Zne)===null&&(ue===""?Ye=!1:(ue="",this.pos=we,Ye=this.match(Zne)!==null)),!Ye)return this.pos=Ge,0;var Nt=Kne(j);return Nt===""?(this.pos=Ge,0):(I[Nt]||(I[Nt]={destination:H,title:ue}),this.pos-Ge)},Rxe=function(S){var I=!1,j=this.peek();if(j===-1)return!1;switch(j){case jne:I=this.parseNewline(S);break;case Une:I=this.parseBackslash(S);break;case $be:I=this.parseBackticks(S);break;case zx:case Qy:I=this.handleDelim(j,S);break;case ih:case rh:I=this.options.smart&&this.handleDelim(j,S);break;case zne:I=this.parseOpenBracket(S);break;case jbe:I=this.parseBang(S);break;case Bbe:I=this.parseCloseBracket(S);break;case Gne:I=this.parseAutolink(S)||this.parseHtmlTag(S);break;case zbe:I=this.parseEntity(S);break;default:I=this.parseString(S);break}return I||(this.pos+=1,S.appendChild(rn(Bx(j)))),!0},Lxe=function(S){for(this.subject=S._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(S););S._string_content=null,this.processEmphasis(null)};function Ixe(S){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:sxe,peek:oxe,spnl:axe,parseBackticks:lxe,parseBackslash:cxe,parseAutolink:hxe,parseHtmlTag:uxe,scanDelims:dxe,handleDelim:fxe,parseLinkTitle:yxe,parseLinkDestination:_xe,parseLinkLabel:vxe,parseOpenBracket:bxe,parseBang:xxe,parseCloseBracket:wxe,addBracket:Exe,removeBracket:Sxe,parseEntity:Cxe,parseString:Txe,parseNewline:Axe,parseReference:Mxe,parseInline:Rxe,processEmphasis:mxe,removeDelimiter:pxe,options:S||{},parse:Lxe}}var e0=4,Jne=9,Pxe=10,Qne=62,kxe=60,ese=32,tse=91,Oxe=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+One+"|"+Dne+")\\s*$","i")],Dxe=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],Fxe=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,Nxe=/^[#`~*+_=<>0-9-]/,ise=/[^ \t\f\v\r\n]/,$xe=/^[*+-]/,Bxe=/^(\d{1,9})([.)])/,jxe=/^#{1,6}(?:[ \t]+|$)/,zxe=/^`{3,}(?!.*`)|^~{3,}/,Gxe=/^(?:`{3,}|~{3,})(?= *$)/,Uxe=/^(?:=+|-+)[ \t]*$/,Vxe=/\r\n|\n|\r/,qxe=function(S){return!ise.test(S)},Np=function(S){return S===ese||S===Jne},Ns=function(S,I){return I<S.length?S.charCodeAt(I):-1},rse=function(S){for(;S;){if(S._lastLineBlank)return!0;var I=S.type;if(!S._lastLineChecked&&(I==="list"||I==="item"))S._lastLineChecked=!0,S=S._lastChild;else{S._lastLineChecked=!0;break}}return!1},Hxe=function(){if(this.partiallyConsumedTab){this.offset+=1;var S=4-this.column%4;this.tip._string_content+=" ".repeat(S)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},Wxe=function(S,I){for(;!this.blocks[this.tip.type].canContain(S);)this.finalize(this.tip,this.lineNumber-1);var j=I+1,H=new a(S,[[this.lineNumber,j],[0,0]]);return H._string_content="",this.tip.appendChild(H),this.tip=H,H},Yxe=function(S,I){var j=S.currentLine.slice(S.nextNonspace),H,ue,se,Ge,we={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:S.indent};if(S.indent>=4)return null;if(H=j.match($xe))we.type="bullet",we.bulletChar=H[0][0];else if((H=j.match(Bxe))&&(I.type!=="paragraph"||H[1]==="1"))we.type="ordered",we.start=parseInt(H[1]),we.delimiter=H[2];else return null;if(ue=Ns(S.currentLine,S.nextNonspace+H[0].length),!(ue===-1||ue===Jne||ue===ese)||I.type==="paragraph"&&!S.currentLine.slice(S.nextNonspace+H[0].length).match(ise))return null;S.advanceNextNonspace(),S.advanceOffset(H[0].length,!0),se=S.column,Ge=S.offset;do S.advanceOffset(1,!0),ue=Ns(S.currentLine,S.offset);while(S.column-se<5&&Np(ue));var Ye=Ns(S.currentLine,S.offset)===-1,Nt=S.column-se;return Nt>=5||Nt<1||Ye?(we.padding=H[0].length+1,S.column=se,S.offset=Ge,Np(Ns(S.currentLine,S.offset))&&S.advanceOffset(1,!0)):we.padding=H[0].length+Nt,we},Xxe=function(S,I){return S.type===I.type&&S.delimiter===I.delimiter&&S.bulletChar===I.bulletChar},Zxe=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var S=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=S}this.allClosed=!0}},nse={document:{continue:function(){return 0},finalize:function(){},canContain:function(S){return S!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(S,I){for(var j=I._firstChild;j;){if(rse(j)&&j._next){I._listData.tight=!1;break}for(var H=j._firstChild;H;){if(rse(H)&&(j._next||H._next)){I._listData.tight=!1;break}H=H._next}j=j._next}},canContain:function(S){return S==="item"},acceptsLines:!1},block_quote:{continue:function(S){var I=S.currentLine;if(!S.indented&&Ns(I,S.nextNonspace)===Qne)S.advanceNextNonspace(),S.advanceOffset(1,!1),Np(Ns(I,S.offset))&&S.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(S){return S!=="item"},acceptsLines:!1},item:{continue:function(S,I){if(S.blank){if(I._firstChild==null)return 1;S.advanceNextNonspace()}else if(S.indent>=I._listData.markerOffset+I._listData.padding)S.advanceOffset(I._listData.markerOffset+I._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(S){return S!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(S,I){var j=S.currentLine,H=S.indent;if(I._isFenced){var ue=H<=3&&j.charAt(S.nextNonspace)===I._fenceChar&&j.slice(S.nextNonspace).match(Gxe);if(ue&&ue[0].length>=I._fenceLength)return S.lastLineLength=S.offset+H+ue[0].length,S.finalize(I,S.lineNumber),2;for(var se=I._fenceOffset;se>0&&Np(Ns(j,S.offset));)S.advanceOffset(1,!0),se--}else if(H>=e0)S.advanceOffset(e0,!0);else if(S.blank)S.advanceNextNonspace();else return 1;return 0},finalize:function(S,I){if(I._isFenced){var j=I._string_content,H=j.indexOf(`
`),ue=j.slice(0,H),se=j.slice(H+1);I.info=$ne(ue.trim()),I._literal=se}else I._literal=I._string_content.replace(/(\n *)+$/,`
`);I._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(S,I){return S.blank&&(I._htmlBlockType===6||I._htmlBlockType===7)?1:0},finalize:function(S,I){I._literal=I._string_content.replace(/(\n *)+$/,""),I._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(S){return S.blank?1:0},finalize:function(S,I){for(var j,H=!1;Ns(I._string_content,0)===tse&&(j=S.inlineParser.parseReference(I._string_content,S.refmap));)I._string_content=I._string_content.slice(j),H=!0;H&&qxe(I._string_content)&&I.unlink()},canContain:function(){return!1},acceptsLines:!0}},Kxe=[function(S){return!S.indented&&Ns(S.currentLine,S.nextNonspace)===Qne?(S.advanceNextNonspace(),S.advanceOffset(1,!1),Np(Ns(S.currentLine,S.offset))&&S.advanceOffset(1,!0),S.closeUnmatchedBlocks(),S.addChild("block_quote",S.nextNonspace),1):0},function(S){var I;if(!S.indented&&(I=S.currentLine.slice(S.nextNonspace).match(jxe))){S.advanceNextNonspace(),S.advanceOffset(I[0].length,!1),S.closeUnmatchedBlocks();var j=S.addChild("heading",S.nextNonspace);return j.level=I[0].trim().length,j._string_content=S.currentLine.slice(S.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),S.advanceOffset(S.currentLine.length-S.offset),2}else return 0},function(S){var I;if(!S.indented&&(I=S.currentLine.slice(S.nextNonspace).match(zxe))){var j=I[0].length;S.closeUnmatchedBlocks();var H=S.addChild("code_block",S.nextNonspace);return H._isFenced=!0,H._fenceLength=j,H._fenceChar=I[0][0],H._fenceOffset=S.indent,S.advanceNextNonspace(),S.advanceOffset(j,!1),2}else return 0},function(S,I){if(!S.indented&&Ns(S.currentLine,S.nextNonspace)===kxe){var j=S.currentLine.slice(S.nextNonspace),H;for(H=1;H<=7;H++)if(Oxe[H].test(j)&&(H<7||I.type!=="paragraph")){S.closeUnmatchedBlocks();var ue=S.addChild("html_block",S.offset);return ue._htmlBlockType=H,2}}return 0},function(S,I){var j;if(!S.indented&&I.type==="paragraph"&&(j=S.currentLine.slice(S.nextNonspace).match(Uxe))){S.closeUnmatchedBlocks();for(var H;Ns(I._string_content,0)===tse&&(H=S.inlineParser.parseReference(I._string_content,S.refmap));)I._string_content=I._string_content.slice(H);if(I._string_content.length>0){var ue=new a("heading",I.sourcepos);return ue.level=j[0][0]==="="?1:2,ue._string_content=I._string_content,I.insertAfter(ue),I.unlink(),S.tip=ue,S.advanceOffset(S.currentLine.length-S.offset,!1),2}else return 0}else return 0},function(S){return!S.indented&&Fxe.test(S.currentLine.slice(S.nextNonspace))?(S.closeUnmatchedBlocks(),S.addChild("thematic_break",S.nextNonspace),S.advanceOffset(S.currentLine.length-S.offset,!1),2):0},function(S,I){var j;return(!S.indented||I.type==="list")&&(j=Yxe(S,I))?(S.closeUnmatchedBlocks(),(S.tip.type!=="list"||!Xxe(I._listData,j))&&(I=S.addChild("list",S.nextNonspace),I._listData=j),I=S.addChild("item",S.nextNonspace),I._listData=j,1):0},function(S){return S.indented&&S.tip.type!=="paragraph"&&!S.blank?(S.advanceOffset(e0,!0),S.closeUnmatchedBlocks(),S.addChild("code_block",S.offset),2):0}],Jxe=function(S,I){for(var j=this.currentLine,H,ue,se;S>0&&(se=j[this.offset]);)se==="	"?(H=4-this.column%4,I?(this.partiallyConsumedTab=H>S,ue=H>S?S:H,this.column+=ue,this.offset+=this.partiallyConsumedTab?0:1,S-=ue):(this.partiallyConsumedTab=!1,this.column+=H,this.offset+=1,S-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,S-=1)},Qxe=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},ewe=function(){for(var S=this.currentLine,I=this.offset,j=this.column,H;(H=S.charAt(I))!=="";)if(H===" ")I++,j++;else if(H==="	")I++,j+=4-j%4;else break;this.blank=H===`
`||H==="\r"||H==="",this.nextNonspace=I,this.nextNonspaceColumn=j,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=e0},twe=function(S){var I=!0,j,H=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,S.indexOf("\0")!==-1&&(S=S.replace(/\0/g,"")),this.currentLine=S;for(var ue;(ue=H._lastChild)&&ue._open;){switch(H=ue,this.findNextNonspace(),this.blocks[H.type].continue(this,H)){case 0:break;case 1:I=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!I){H=H._parent;break}}this.allClosed=H===this.oldtip,this.lastMatchedContainer=H;for(var se=H.type!=="paragraph"&&nse[H.type].acceptsLines,Ge=this.blockStarts,we=Ge.length;!se;){if(this.findNextNonspace(),!this.indented&&!Nxe.test(S.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var Ye=0;Ye<we;){var Nt=Ge[Ye](this,H);if(Nt===1){H=this.tip;break}else if(Nt===2){H=this.tip,se=!0;break}else Ye++}if(Ye===we){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&H.lastChild&&(H.lastChild._lastLineBlank=!0),j=H.type;for(var Rt=this.blank&&!(j==="block_quote"||j==="code_block"&&H._isFenced||j==="item"&&!H._firstChild&&H.sourcepos[0][0]===this.lineNumber),Lt=H;Lt;)Lt._lastLineBlank=Rt,Lt=Lt._parent;this.blocks[j].acceptsLines?(this.addLine(),j==="html_block"&&H._htmlBlockType>=1&&H._htmlBlockType<=5&&Dxe[H._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=S.length,this.finalize(H,this.lineNumber))):this.offset<S.length&&!this.blank&&(H=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=S.length},iwe=function(S,I){var j=S._parent;S._open=!1,S.sourcepos[1]=[I,this.lastLineLength],this.blocks[S.type].finalize(this,S),this.tip=j},rwe=function(S){var I,j,H,ue=S.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;j=ue.next();)I=j.node,H=I.type,!j.entering&&(H==="paragraph"||H==="heading")&&this.inlineParser.parse(I)},sse=function(){var S=new a("document",[[1,1],[0,0]]);return S},nwe=function(S){this.doc=new sse,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var I=S.split(Vxe),j=I.length;S.charCodeAt(S.length-1)===Pxe&&(j-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var H=0;H<j;H++)this.incorporateLine(I[H]);for(;this.tip;)this.finalize(this.tip,j);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function swe(S){return{doc:new sse,blocks:nse,blockStarts:Kxe,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new Ixe(S),findNextNonspace:ewe,advanceOffset:Jxe,advanceNextNonspace:Qxe,addLine:Hxe,addChild:Wxe,incorporateLine:twe,finalize:iwe,processInlines:rwe,closeUnmatchedBlocks:Zxe,parse:nwe,options:S||{}}}function $l(){}function owe(S){var I=S.walker(),j,H;for(this.buffer="",this.lastOut=`
`;j=I.next();)H=j.node.type,this[H]&&this[H](j.node,j.entering);return this.buffer}function awe(S){this.buffer+=S,this.lastOut=S}function lwe(){this.lastOut!==`
`&&this.lit(`
`)}function cwe(S){this.lit(S)}function hwe(S){return S}$l.prototype.render=owe,$l.prototype.out=cwe,$l.prototype.lit=awe,$l.prototype.cr=lwe,$l.prototype.esc=hwe;var uwe=/^javascript:|vbscript:|file:|data:/i,dwe=/^data:image\/(?:png|gif|jpeg|webp)/i,ose=function(S){return uwe.test(S)&&!dwe.test(S)};function fwe(S,I,j){if(!(this.disableTags>0)){if(this.buffer+="<"+S,I&&I.length>0)for(var H=0,ue;(ue=I[H])!==void 0;)this.buffer+=" "+ue[0]+'="'+ue[1]+'"',H++;j&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function Ei(S){S=S||{},S.softbreak=S.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=S}function pwe(S){this.out(S.literal)}function gwe(){this.lit(this.options.softbreak)}function mwe(){this.tag("br",[],!0),this.cr()}function ywe(S,I){var j=this.attrs(S);I?(this.options.safe&&ose(S.destination)||j.push(["href",this.esc(S.destination)]),S.title&&j.push(["title",this.esc(S.title)]),this.tag("a",j)):this.tag("/a")}function _we(S,I){I?(this.disableTags===0&&(this.options.safe&&ose(S.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(S.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(S.title&&this.lit('" title="'+this.esc(S.title)),this.lit('" />')))}function vwe(S,I){this.tag(I?"em":"/em")}function bwe(S,I){this.tag(I?"strong":"/strong")}function xwe(S,I){var j=S.parent.parent,H=this.attrs(S);j!==null&&j.type==="list"&&j.listTight||(I?(this.cr(),this.tag("p",H)):(this.tag("/p"),this.cr()))}function wwe(S,I){var j="h"+S.level,H=this.attrs(S);I?(this.cr(),this.tag(j,H)):(this.tag("/"+j),this.cr())}function Ewe(S){this.tag("code"),this.out(S.literal),this.tag("/code")}function Swe(S){var I=S.info?S.info.split(/\s+/):[],j=this.attrs(S);I.length>0&&I[0].length>0&&j.push(["class","language-"+this.esc(I[0])]),this.cr(),this.tag("pre"),this.tag("code",j),this.out(S.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function Cwe(S){var I=this.attrs(S);this.cr(),this.tag("hr",I,!0),this.cr()}function Twe(S,I){var j=this.attrs(S);I?(this.cr(),this.tag("blockquote",j),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function Awe(S,I){var j=S.listType==="bullet"?"ul":"ol",H=this.attrs(S);if(I){var ue=S.listStart;ue!==null&&ue!==1&&H.push(["start",ue.toString()]),this.cr(),this.tag(j,H),this.cr()}else this.cr(),this.tag("/"+j),this.cr()}function Mwe(S,I){var j=this.attrs(S);I?this.tag("li",j):(this.tag("/li"),this.cr())}function Rwe(S){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(S.literal)}function Lwe(S){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(S.literal),this.cr()}function Iwe(S,I){I&&S.onEnter?this.lit(S.onEnter):!I&&S.onExit&&this.lit(S.onExit)}function Pwe(S,I){this.cr(),I&&S.onEnter?this.lit(S.onEnter):!I&&S.onExit&&this.lit(S.onExit),this.cr()}function kwe(S){this.lit(this.esc(S))}function Owe(S){var I=[];if(this.options.sourcepos){var j=S.sourcepos;j&&I.push(["data-sourcepos",String(j[0][0])+":"+String(j[0][1])+"-"+String(j[1][0])+":"+String(j[1][1])])}return I}Ei.prototype=Object.create($l.prototype),Ei.prototype.text=pwe,Ei.prototype.html_inline=Rwe,Ei.prototype.html_block=Lwe,Ei.prototype.softbreak=gwe,Ei.prototype.linebreak=mwe,Ei.prototype.link=ywe,Ei.prototype.image=_we,Ei.prototype.emph=vwe,Ei.prototype.strong=bwe,Ei.prototype.paragraph=xwe,Ei.prototype.heading=wwe,Ei.prototype.code=Ewe,Ei.prototype.code_block=Swe,Ei.prototype.thematic_break=Cwe,Ei.prototype.block_quote=Twe,Ei.prototype.list=Awe,Ei.prototype.item=Mwe,Ei.prototype.custom_inline=Iwe,Ei.prototype.custom_block=Pwe,Ei.prototype.esc=Bne,Ei.prototype.out=kwe,Ei.prototype.tag=fwe,Ei.prototype.attrs=Owe;var Dwe=/\<[^>]*\>/;function Fwe(S){return S.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function nh(S){S=S||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=S}function Nwe(S){this.buffer="";var I,j,H=S.walker(),ue,se,Ge,we,Ye,Nt,Rt=this.options;for(Rt.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;ue=H.next();)if(Ge=ue.entering,se=ue.node,Nt=se.type,we=se.isContainer,Ye=Nt==="thematic_break"||Nt==="linebreak"||Nt==="softbreak",j=Fwe(Nt),Ge){switch(I=[],Nt){case"document":I.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":se.listType!==null&&I.push(["type",se.listType.toLowerCase()]),se.listStart!==null&&I.push(["start",String(se.listStart)]),se.listTight!==null&&I.push(["tight",se.listTight?"true":"false"]);var Lt=se.listDelimiter;if(Lt!==null){var jt="";Lt==="."?jt="period":jt="paren",I.push(["delimiter",jt])}break;case"code_block":se.info&&I.push(["info",se.info]);break;case"heading":I.push(["level",String(se.level)]);break;case"link":case"image":I.push(["destination",se.destination]),I.push(["title",se.title]);break;case"custom_inline":case"custom_block":I.push(["on_enter",se.onEnter]),I.push(["on_exit",se.onExit]);break}if(Rt.sourcepos){var zt=se.sourcepos;zt&&I.push(["sourcepos",String(zt[0][0])+":"+String(zt[0][1])+"-"+String(zt[1][0])+":"+String(zt[1][1])])}if(this.cr(),this.out(this.tag(j,I,Ye)),we)this.indentLevel+=1;else if(!we&&!Ye){var yr=se.literal;yr&&this.out(this.esc(yr)),this.out(this.tag("/"+j))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+j));return Rt.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function $we(S){this.disableTags>0?this.buffer+=S.replace(Dwe,""):this.buffer+=S,this.lastOut=S}function Bwe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var S=this.indentLevel;S>0;S--)this.buffer+=this.indent}}function jwe(S,I,j){var H="<"+S;if(I&&I.length>0)for(var ue=0,se;(se=I[ue])!==void 0;)H+=" "+se[0]+'="'+this.esc(se[1])+'"',ue++;return j&&(H+=" /"),H+=">",H}nh.prototype=Object.create($l.prototype),nh.prototype.render=Nwe,nh.prototype.out=$we,nh.prototype.cr=Bwe,nh.prototype.tag=jwe,nh.prototype.esc=Bne,t.HtmlRenderer=Ei,t.Node=a,t.Parser=swe,t.Renderer=$l,t.XmlRenderer=nh,Object.defineProperty(t,"__esModule",{value:!0})})}(s_,s_.exports)),s_.exports}var o_={exports:{}},A1,Ohe;function AQe(){if(Ohe)return A1;Ohe=1;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,_=p.length;y!==_&&p[y]===0;)y++,g++;for(var v=(_-y)*h+1>>>0,x=new Uint8Array(v);y!==_;){for(var w=p[y],T=0,A=v-1;(w!==0||T<m)&&A!==-1;A--,T++)w+=256*x[A]>>>0,x[A]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");m=T,y++}for(var R=v-m;R!==v&&x[R]===0;)R++;for(var L=l.repeat(g);R<v;++R)L+=e.charAt(x[R]);return L}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===l;)m++,g++;for(var _=(p.length-g)*c+1>>>0,v=new Uint8Array(_);p[g];){var x=t[p.charCodeAt(g)];if(x===255)return;for(var w=0,T=_-1;(x!==0||w<y)&&T!==-1;T--,w++)x+=a*v[T]>>>0,v[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=w,g++}if(p[g]!==" "){for(var A=_-y;A!==_&&v[A]===0;)A++;for(var R=new Uint8Array(m+(_-A)),L=m;A!==_;)R[L++]=v[A++];return R}}}function f(p){var g=d(p);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:u,decodeUnsafe:d,decode:f}}return A1=i,A1}var a_={},M1={},R1={},L1,Dhe;function Fve(){return Dhe||(Dhe=1,L1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||o.enumerable!==!0)return!1}return!0}),L1}var I1,Fhe;function AA(){if(Fhe)return I1;Fhe=1;var i=Fve();return I1=function(){return i()&&!!Symbol.toStringTag},I1}var P1,Nhe;function MQe(){return Nhe||(Nhe=1,P1=Error),P1}var k1,$he;function RQe(){return $he||($he=1,k1=EvalError),k1}var O1,Bhe;function LQe(){return Bhe||(Bhe=1,O1=RangeError),O1}var D1,jhe;function IQe(){return jhe||(jhe=1,D1=ReferenceError),D1}var F1,zhe;function Nve(){return zhe||(zhe=1,F1=SyntaxError),F1}var N1,Ghe;function Dx(){return Ghe||(Ghe=1,N1=TypeError),N1}var $1,Uhe;function PQe(){return Uhe||(Uhe=1,$1=URIError),$1}var B1,Vhe;function kQe(){if(Vhe)return B1;Vhe=1;var i=typeof Symbol<"u"&&Symbol,e=Fve();return B1=function(){return typeof i!="function"||typeof Symbol!="function"||typeof i("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},B1}var j1,qhe;function OQe(){if(qhe)return j1;qhe=1;var i={foo:{}},e=Object;return j1=function(){return{__proto__:i}.foo===i.foo&&!({__proto__:null}instanceof e)},j1}var z1,Hhe;function DQe(){if(Hhe)return z1;Hhe=1;var i="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",n=function(l,c){for(var h=[],u=0;u<l.length;u+=1)h[u]=l[u];for(var d=0;d<c.length;d+=1)h[d+l.length]=c[d];return h},s=function(l,c){for(var h=[],u=c||0,d=0;u<l.length;u+=1,d+=1)h[d]=l[u];return h},o=function(a,l){for(var c="",h=0;h<a.length;h+=1)c+=a[h],h+1<a.length&&(c+=l);return c};return z1=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(i+c);for(var h=s(arguments,1),u,d=function(){if(this instanceof u){var y=c.apply(this,n(h,arguments));return Object(y)===y?y:this}return c.apply(l,n(h,arguments))},f=t(0,c.length-h.length),p=[],g=0;g<f;g++)p[g]="$"+g;if(u=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var m=function(){};m.prototype=c.prototype,u.prototype=new m,m.prototype=null}return u},z1}var G1,Whe;function MA(){if(Whe)return G1;Whe=1;var i=DQe();return G1=Function.prototype.bind||i,G1}var U1,Yhe;function FQe(){if(Yhe)return U1;Yhe=1;var i=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=MA();return U1=t.call(i,e),U1}var V1,Xhe;function Py(){if(Xhe)return V1;Xhe=1;var i,e=MQe(),t=RQe(),r=LQe(),n=IQe(),s=Nve(),o=Dx(),a=PQe(),l=Function,c=function(O){try{return l('"use strict"; return ('+O+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var u=function(){throw new o},d=h?function(){try{return arguments.callee,u}catch{try{return h(arguments,"callee").get}catch{return u}}}():u,f=kQe()(),p=OQe()(),g=Object.getPrototypeOf||(p?function(O){return O.__proto__}:null),m={},y=typeof Uint8Array>"u"||!g?i:g(Uint8Array),_={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":f&&g?g([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":m,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&g?g(g([][Symbol.iterator]())):i,"%JSON%":typeof JSON=="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!f||!g?i:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":r,"%ReferenceError%":n,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!f||!g?i:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&g?g(""[Symbol.iterator]()):i,"%Symbol%":f?Symbol:i,"%SyntaxError%":s,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet};if(g)try{null.error}catch(O){var v=g(g(O));_["%Error.prototype%"]=v}var x=function O(D){var U;if(D==="%AsyncFunction%")U=c("async function () {}");else if(D==="%GeneratorFunction%")U=c("function* () {}");else if(D==="%AsyncGeneratorFunction%")U=c("async function* () {}");else if(D==="%AsyncGenerator%"){var z=O("%AsyncGeneratorFunction%");z&&(U=z.prototype)}else if(D==="%AsyncIteratorPrototype%"){var Z=O("%AsyncGenerator%");Z&&g&&(U=g(Z.prototype))}return _[D]=U,U},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=MA(),A=FQe(),R=T.call(Function.call,Array.prototype.concat),L=T.call(Function.apply,Array.prototype.splice),P=T.call(Function.call,String.prototype.replace),F=T.call(Function.call,String.prototype.slice),B=T.call(Function.call,RegExp.prototype.exec),b=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,C=function(D){var U=F(D,0,1),z=F(D,-1);if(U==="%"&&z!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(z==="%"&&U!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Z=[];return P(D,b,function(Q,V,N,X){Z[Z.length]=N?P(X,E,"$1"):V||Q}),Z},M=function(D,U){var z=D,Z;if(A(w,z)&&(Z=w[z],z="%"+Z[0]+"%"),A(_,z)){var Q=_[z];if(Q===m&&(Q=x(z)),typeof Q>"u"&&!U)throw new o("intrinsic "+D+" exists, but is not available. Please file an issue!");return{alias:Z,name:z,value:Q}}throw new s("intrinsic "+D+" does not exist!")};return V1=function(D,U){if(typeof D!="string"||D.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof U!="boolean")throw new o('"allowMissing" argument must be a boolean');if(B(/^%?[^%]*%?$/,D)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var z=C(D),Z=z.length>0?z[0]:"",Q=M("%"+Z+"%",U),V=Q.name,N=Q.value,X=!1,ne=Q.alias;ne&&(Z=ne[0],L(z,R([0,1],ne)));for(var fe=1,ve=!0;fe<z.length;fe+=1){var ge=z[fe],he=F(ge,0,1),Ce=F(ge,-1);if((he==='"'||he==="'"||he==="`"||Ce==='"'||Ce==="'"||Ce==="`")&&he!==Ce)throw new s("property names with quotes must have matching quotes");if((ge==="constructor"||!ve)&&(X=!0),Z+="."+ge,V="%"+Z+"%",A(_,V))N=_[V];else if(N!=null){if(!(ge in N)){if(!U)throw new o("base intrinsic for "+D+" exists, but the property is not available.");return}if(h&&fe+1>=z.length){var Ue=h(N,ge);ve=!!Ue,ve&&"get"in Ue&&!("originalValue"in Ue.get)?N=Ue.get:N=N[ge]}else ve=A(N,ge),N=N[ge];ve&&!X&&(_[V]=N)}}return N},V1}var q1={exports:{}},H1,Zhe;function RA(){if(Zhe)return H1;Zhe=1;var i=Py(),e=i("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return H1=e,H1}var W1,Khe;function LA(){if(Khe)return W1;Khe=1;var i=Py(),e=i("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return W1=e,W1}var Y1,Jhe;function NQe(){if(Jhe)return Y1;Jhe=1;var i=RA(),e=Nve(),t=Dx(),r=LA();return Y1=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,d=!!r&&r(s,o);if(i)i(s,o,{configurable:h===null&&d?d.configurable:!h,enumerable:l===null&&d?d.enumerable:!l,value:a,writable:c===null&&d?d.writable:!c});else if(u||!l&&!c&&!h)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Y1}var X1,Qhe;function $Qe(){if(Qhe)return X1;Qhe=1;var i=RA(),e=function(){return!!i};return e.hasArrayLengthDefineBug=function(){if(!i)return null;try{return i([],"length",{value:1}).length!==1}catch{return!0}},X1=e,X1}var Z1,eue;function BQe(){if(eue)return Z1;eue=1;var i=Py(),e=NQe(),t=$Qe()(),r=LA(),n=Dx(),s=i("%Math.floor%");return Z1=function(a,l){if(typeof a!="function")throw new n("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new n("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],h=!0,u=!0;if("length"in a&&r){var d=r(a,"length");d&&!d.configurable&&(h=!1),d&&!d.writable&&(u=!1)}return(h||u||!c)&&(t?e(a,"length",l,!0,!0):e(a,"length",l)),a},Z1}var tue;function $ve(){return tue||(tue=1,function(i){var e=MA(),t=Py(),r=BQe(),n=Dx(),s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=RA(),c=t("%Math.max%");i.exports=function(d){if(typeof d!="function")throw new n("a function is required");var f=a(e,o,arguments);return r(f,1+c(0,d.length-(arguments.length-1)),!0)};var h=function(){return a(e,s,arguments)};l?l(i.exports,"apply",{value:h}):i.exports.apply=h}(q1)),q1.exports}var K1,iue;function Bve(){if(iue)return K1;iue=1;var i=Py(),e=$ve(),t=e(i("String.prototype.indexOf"));return K1=function(n,s){var o=i(n,!!s);return typeof o=="function"&&t(n,".prototype.")>-1?e(o):o},K1}var J1,rue;function jQe(){if(rue)return J1;rue=1;var i=AA()(),e=Bve(),t=e("Object.prototype.toString"),r=function(a){return i&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},n=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=n,J1=s?r:n,J1}var Q1,nue;function zQe(){if(nue)return Q1;nue=1;var i=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,r=AA()(),n=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return Q1=function(l){if(typeof l!="function")return!1;if(t.test(e.call(l)))return!0;if(!r){var c=i.call(l);return c==="[object GeneratorFunction]"}if(!n)return!1;if(typeof o>"u"){var h=s();o=h?n(h):!1}return n(l)===o},Q1}var eE,sue;function GQe(){if(sue)return eE;sue=1;var i=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,t)}catch(_){_!==r&&(e=null)}else e=null;var n=/^\s*class\b/,s=function(v){try{var x=i.call(v);return n.test(x)}catch{return!1}},o=function(v){try{return s(v)?!1:(i.call(v),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",c="[object Function]",h="[object GeneratorFunction]",u="[object HTMLAllCollection]",d="[object HTML document.all class]",f="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),m=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(m=function(v){if((g||!v)&&(typeof v>"u"||typeof v=="object"))try{var x=a.call(v);return(x===u||x===d||x===f||x===l)&&v("")==null}catch{}return!1})}return eE=e?function(v){if(m(v))return!0;if(!v||typeof v!="function"&&typeof v!="object")return!1;try{e(v,null,t)}catch(x){if(x!==r)return!1}return!s(v)&&o(v)}:function(v){if(m(v))return!0;if(!v||typeof v!="function"&&typeof v!="object")return!1;if(p)return o(v);if(s(v))return!1;var x=a.call(v);return x!==c&&x!==h&&!/^\[object HTML/.test(x)?!1:o(v)},eE}var tE,oue;function UQe(){if(oue)return tE;oue=1;var i=GQe(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=function(l,c,h){for(var u=0,d=l.length;u<d;u++)t.call(l,u)&&(h==null?c(l[u],u,l):c.call(h,l[u],u,l))},n=function(l,c,h){for(var u=0,d=l.length;u<d;u++)h==null?c(l.charAt(u),u,l):c.call(h,l.charAt(u),u,l)},s=function(l,c,h){for(var u in l)t.call(l,u)&&(h==null?c(l[u],u,l):c.call(h,l[u],u,l))},o=function(l,c,h){if(!i(c))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=h),e.call(l)==="[object Array]"?r(l,c,u):typeof l=="string"?n(l,c,u):s(l,c,u)};return tE=o,tE}var iE,aue;function VQe(){if(aue)return iE;aue=1;var i=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?xr:globalThis;return iE=function(){for(var r=[],n=0;n<i.length;n++)typeof e[i[n]]=="function"&&(r[r.length]=i[n]);return r},iE}var rE,lue;function jve(){if(lue)return rE;lue=1;var i=UQe(),e=VQe(),t=$ve(),r=Bve(),n=LA(),s=r("Object.prototype.toString"),o=AA()(),a=typeof globalThis>"u"?xr:globalThis,l=e(),c=r("String.prototype.slice"),h=Object.getPrototypeOf,u=r("Array.prototype.indexOf",!0)||function(m,y){for(var _=0;_<m.length;_+=1)if(m[_]===y)return _;return-1},d={__proto__:null};o&&n&&h?i(l,function(g){var m=new a[g];if(Symbol.toStringTag in m){var y=h(m),_=n(y,Symbol.toStringTag);if(!_){var v=h(y);_=n(v,Symbol.toStringTag)}d["$"+g]=t(_.get)}}):i(l,function(g){var m=new a[g],y=m.slice||m.set;y&&(d["$"+g]=t(y))});var f=function(m){var y=!1;return i(d,function(_,v){if(!y)try{"$"+_(m)===v&&(y=c(v,1))}catch{}}),y},p=function(m){var y=!1;return i(d,function(_,v){if(!y)try{_(m),y=c(v,1)}catch{}}),y};return rE=function(m){if(!m||typeof m!="object")return!1;if(!o){var y=c(s(m),8,-1);return u(l,y)>-1?y:y!=="Object"?!1:p(m)}return n?f(m):null},rE}var nE,cue;function qQe(){if(cue)return nE;cue=1;var i=jve();return nE=function(t){return!!i(t)},nE}var hue;function HQe(){return hue||(hue=1,function(i){var e=jQe(),t=zQe(),r=jve(),n=qQe();function s(oe){return oe.call.bind(oe)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),c=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),u=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var f=s(Symbol.prototype.valueOf);function p(oe,ho){if(typeof oe!="object")return!1;try{return ho(oe),!0}catch{return!1}}i.isArgumentsObject=e,i.isGeneratorFunction=t,i.isTypedArray=n;function g(oe){return typeof Promise<"u"&&oe instanceof Promise||oe!==null&&typeof oe=="object"&&typeof oe.then=="function"&&typeof oe.catch=="function"}i.isPromise=g;function m(oe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(oe):n(oe)||V(oe)}i.isArrayBufferView=m;function y(oe){return r(oe)==="Uint8Array"}i.isUint8Array=y;function _(oe){return r(oe)==="Uint8ClampedArray"}i.isUint8ClampedArray=_;function v(oe){return r(oe)==="Uint16Array"}i.isUint16Array=v;function x(oe){return r(oe)==="Uint32Array"}i.isUint32Array=x;function w(oe){return r(oe)==="Int8Array"}i.isInt8Array=w;function T(oe){return r(oe)==="Int16Array"}i.isInt16Array=T;function A(oe){return r(oe)==="Int32Array"}i.isInt32Array=A;function R(oe){return r(oe)==="Float32Array"}i.isFloat32Array=R;function L(oe){return r(oe)==="Float64Array"}i.isFloat64Array=L;function P(oe){return r(oe)==="BigInt64Array"}i.isBigInt64Array=P;function F(oe){return r(oe)==="BigUint64Array"}i.isBigUint64Array=F;function B(oe){return l(oe)==="[object Map]"}B.working=typeof Map<"u"&&B(new Map);function b(oe){return typeof Map>"u"?!1:B.working?B(oe):oe instanceof Map}i.isMap=b;function E(oe){return l(oe)==="[object Set]"}E.working=typeof Set<"u"&&E(new Set);function C(oe){return typeof Set>"u"?!1:E.working?E(oe):oe instanceof Set}i.isSet=C;function M(oe){return l(oe)==="[object WeakMap]"}M.working=typeof WeakMap<"u"&&M(new WeakMap);function O(oe){return typeof WeakMap>"u"?!1:M.working?M(oe):oe instanceof WeakMap}i.isWeakMap=O;function D(oe){return l(oe)==="[object WeakSet]"}D.working=typeof WeakSet<"u"&&D(new WeakSet);function U(oe){return D(oe)}i.isWeakSet=U;function z(oe){return l(oe)==="[object ArrayBuffer]"}z.working=typeof ArrayBuffer<"u"&&z(new ArrayBuffer);function Z(oe){return typeof ArrayBuffer>"u"?!1:z.working?z(oe):oe instanceof ArrayBuffer}i.isArrayBuffer=Z;function Q(oe){return l(oe)==="[object DataView]"}Q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Q(new DataView(new ArrayBuffer(1),0,1));function V(oe){return typeof DataView>"u"?!1:Q.working?Q(oe):oe instanceof DataView}i.isDataView=V;var N=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function X(oe){return l(oe)==="[object SharedArrayBuffer]"}function ne(oe){return typeof N>"u"?!1:(typeof X.working>"u"&&(X.working=X(new N)),X.working?X(oe):oe instanceof N)}i.isSharedArrayBuffer=ne;function fe(oe){return l(oe)==="[object AsyncFunction]"}i.isAsyncFunction=fe;function ve(oe){return l(oe)==="[object Map Iterator]"}i.isMapIterator=ve;function ge(oe){return l(oe)==="[object Set Iterator]"}i.isSetIterator=ge;function he(oe){return l(oe)==="[object Generator]"}i.isGeneratorObject=he;function Ce(oe){return l(oe)==="[object WebAssembly.Module]"}i.isWebAssemblyCompiledModule=Ce;function Ue(oe){return p(oe,c)}i.isNumberObject=Ue;function Je(oe){return p(oe,h)}i.isStringObject=Je;function Bi(oe){return p(oe,u)}i.isBooleanObject=Bi;function ki(oe){return o&&p(oe,d)}i.isBigIntObject=ki;function bi(oe){return a&&p(oe,f)}i.isSymbolObject=bi;function hs(oe){return Ue(oe)||Je(oe)||Bi(oe)||ki(oe)||bi(oe)}i.isBoxedPrimitive=hs;function co(oe){return typeof Uint8Array<"u"&&(Z(oe)||ne(oe))}i.isAnyArrayBuffer=co,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(oe){Object.defineProperty(i,oe,{enumerable:!1,value:function(){throw new Error(oe+" is not supported in userland")}})})}(R1)),R1}var sE,uue;function WQe(){return uue||(uue=1,sE=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),sE}var l_={exports:{}},due;function YQe(){return due||(due=1,typeof Object.create=="function"?l_.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:l_.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),l_.exports}var fue;function pue(){return fue||(fue=1,function(i){var e={},t=Object.getOwnPropertyDescriptors||function(N){for(var X=Object.keys(N),ne={},fe=0;fe<X.length;fe++)ne[X[fe]]=Object.getOwnPropertyDescriptor(N,X[fe]);return ne},r=/%[sdj%]/g;i.format=function(V){if(!T(V)){for(var N=[],X=0;X<arguments.length;X++)N.push(a(arguments[X]));return N.join(" ")}for(var X=1,ne=arguments,fe=ne.length,ve=String(V).replace(r,function(he){if(he==="%%")return"%";if(X>=fe)return he;switch(he){case"%s":return String(ne[X++]);case"%d":return Number(ne[X++]);case"%j":try{return JSON.stringify(ne[X++])}catch{return"[Circular]"}default:return he}}),ge=ne[X];X<fe;ge=ne[++X])v(ge)||!P(ge)?ve+=" "+ge:ve+=" "+a(ge);return ve},i.deprecate=function(V,N){if(typeof process<"u"&&process.noDeprecation===!0)return V;if(typeof process>"u")return function(){return i.deprecate(V,N).apply(this,arguments)};var X=!1;function ne(){if(!X){if(process.throwDeprecation)throw new Error(N);process.traceDeprecation?console.trace(N):console.error(N),X=!0}return V.apply(this,arguments)}return ne};var n={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}i.debuglog=function(V){if(V=V.toUpperCase(),!n[V])if(s.test(V)){var N=process.pid;n[V]=function(){var X=i.format.apply(i,arguments);console.error("%s %d: %s",V,N,X)}}else n[V]=function(){};return n[V]};function a(V,N){var X={seen:[],stylize:c};return arguments.length>=3&&(X.depth=arguments[2]),arguments.length>=4&&(X.colors=arguments[3]),_(N)?X.showHidden=N:N&&i._extend(X,N),R(X.showHidden)&&(X.showHidden=!1),R(X.depth)&&(X.depth=2),R(X.colors)&&(X.colors=!1),R(X.customInspect)&&(X.customInspect=!0),X.colors&&(X.stylize=l),u(X,V,X.depth)}i.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(V,N){var X=a.styles[N];return X?"\x1B["+a.colors[X][0]+"m"+V+"\x1B["+a.colors[X][1]+"m":V}function c(V,N){return V}function h(V){var N={};return V.forEach(function(X,ne){N[X]=!0}),N}function u(V,N,X){if(V.customInspect&&N&&b(N.inspect)&&N.inspect!==i.inspect&&!(N.constructor&&N.constructor.prototype===N)){var ne=N.inspect(X,V);return T(ne)||(ne=u(V,ne,X)),ne}var fe=d(V,N);if(fe)return fe;var ve=Object.keys(N),ge=h(ve);if(V.showHidden&&(ve=Object.getOwnPropertyNames(N)),B(N)&&(ve.indexOf("message")>=0||ve.indexOf("description")>=0))return f(N);if(ve.length===0){if(b(N)){var he=N.name?": "+N.name:"";return V.stylize("[Function"+he+"]","special")}if(L(N))return V.stylize(RegExp.prototype.toString.call(N),"regexp");if(F(N))return V.stylize(Date.prototype.toString.call(N),"date");if(B(N))return f(N)}var Ce="",Ue=!1,Je=["{","}"];if(y(N)&&(Ue=!0,Je=["[","]"]),b(N)){var Bi=N.name?": "+N.name:"";Ce=" [Function"+Bi+"]"}if(L(N)&&(Ce=" "+RegExp.prototype.toString.call(N)),F(N)&&(Ce=" "+Date.prototype.toUTCString.call(N)),B(N)&&(Ce=" "+f(N)),ve.length===0&&(!Ue||N.length==0))return Je[0]+Ce+Je[1];if(X<0)return L(N)?V.stylize(RegExp.prototype.toString.call(N),"regexp"):V.stylize("[Object]","special");V.seen.push(N);var ki;return Ue?ki=p(V,N,X,ge,ve):ki=ve.map(function(bi){return g(V,N,X,ge,bi,Ue)}),V.seen.pop(),m(ki,Ce,Je)}function d(V,N){if(R(N))return V.stylize("undefined","undefined");if(T(N)){var X="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return V.stylize(X,"string")}if(w(N))return V.stylize(""+N,"number");if(_(N))return V.stylize(""+N,"boolean");if(v(N))return V.stylize("null","null")}function f(V){return"["+Error.prototype.toString.call(V)+"]"}function p(V,N,X,ne,fe){for(var ve=[],ge=0,he=N.length;ge<he;++ge)U(N,String(ge))?ve.push(g(V,N,X,ne,String(ge),!0)):ve.push("");return fe.forEach(function(Ce){Ce.match(/^\d+$/)||ve.push(g(V,N,X,ne,Ce,!0))}),ve}function g(V,N,X,ne,fe,ve){var ge,he,Ce;if(Ce=Object.getOwnPropertyDescriptor(N,fe)||{value:N[fe]},Ce.get?Ce.set?he=V.stylize("[Getter/Setter]","special"):he=V.stylize("[Getter]","special"):Ce.set&&(he=V.stylize("[Setter]","special")),U(ne,fe)||(ge="["+fe+"]"),he||(V.seen.indexOf(Ce.value)<0?(v(X)?he=u(V,Ce.value,null):he=u(V,Ce.value,X-1),he.indexOf(`
`)>-1&&(ve?he=he.split(`
`).map(function(Ue){return"  "+Ue}).join(`
`).slice(2):he=`
`+he.split(`
`).map(function(Ue){return"   "+Ue}).join(`
`))):he=V.stylize("[Circular]","special")),R(ge)){if(ve&&fe.match(/^\d+$/))return he;ge=JSON.stringify(""+fe),ge.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ge=ge.slice(1,-1),ge=V.stylize(ge,"name")):(ge=ge.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ge=V.stylize(ge,"string"))}return ge+": "+he}function m(V,N,X){var ne=V.reduce(function(fe,ve){return ve.indexOf(`
`)>=0,fe+ve.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ne>60?X[0]+(N===""?"":N+`
 `)+" "+V.join(`,
  `)+" "+X[1]:X[0]+N+" "+V.join(", ")+" "+X[1]}i.types=HQe();function y(V){return Array.isArray(V)}i.isArray=y;function _(V){return typeof V=="boolean"}i.isBoolean=_;function v(V){return V===null}i.isNull=v;function x(V){return V==null}i.isNullOrUndefined=x;function w(V){return typeof V=="number"}i.isNumber=w;function T(V){return typeof V=="string"}i.isString=T;function A(V){return typeof V=="symbol"}i.isSymbol=A;function R(V){return V===void 0}i.isUndefined=R;function L(V){return P(V)&&C(V)==="[object RegExp]"}i.isRegExp=L,i.types.isRegExp=L;function P(V){return typeof V=="object"&&V!==null}i.isObject=P;function F(V){return P(V)&&C(V)==="[object Date]"}i.isDate=F,i.types.isDate=F;function B(V){return P(V)&&(C(V)==="[object Error]"||V instanceof Error)}i.isError=B,i.types.isNativeError=B;function b(V){return typeof V=="function"}i.isFunction=b;function E(V){return V===null||typeof V=="boolean"||typeof V=="number"||typeof V=="string"||typeof V=="symbol"||typeof V>"u"}i.isPrimitive=E,i.isBuffer=WQe();function C(V){return Object.prototype.toString.call(V)}function M(V){return V<10?"0"+V.toString(10):V.toString(10)}var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var V=new Date,N=[M(V.getHours()),M(V.getMinutes()),M(V.getSeconds())].join(":");return[V.getDate(),O[V.getMonth()],N].join(" ")}i.log=function(){console.log("%s - %s",D(),i.format.apply(i,arguments))},i.inherits=YQe(),i._extend=function(V,N){if(!N||!P(N))return V;for(var X=Object.keys(N),ne=X.length;ne--;)V[X[ne]]=N[X[ne]];return V};function U(V,N){return Object.prototype.hasOwnProperty.call(V,N)}var z=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;i.promisify=function(N){if(typeof N!="function")throw new TypeError('The "original" argument must be of type Function');if(z&&N[z]){var X=N[z];if(typeof X!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(X,z,{value:X,enumerable:!1,writable:!1,configurable:!0}),X}function X(){for(var ne,fe,ve=new Promise(function(Ce,Ue){ne=Ce,fe=Ue}),ge=[],he=0;he<arguments.length;he++)ge.push(arguments[he]);ge.push(function(Ce,Ue){Ce?fe(Ce):ne(Ue)});try{N.apply(this,ge)}catch(Ce){fe(Ce)}return ve}return Object.setPrototypeOf(X,Object.getPrototypeOf(N)),z&&Object.defineProperty(X,z,{value:X,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(X,t(N))},i.promisify.custom=z;function Z(V,N){if(!V){var X=new Error("Promise was rejected with a falsy value");X.reason=V,V=X}return N(V)}function Q(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var X=[],ne=0;ne<arguments.length;ne++)X.push(arguments[ne]);var fe=X.pop();if(typeof fe!="function")throw new TypeError("The last argument must be of type Function");var ve=this,ge=function(){return fe.apply(ve,arguments)};V.apply(this,X).then(function(he){process.nextTick(ge.bind(null,null,he))},function(he){process.nextTick(Z.bind(null,he,ge))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(V)),Object.defineProperties(N,t(V)),N}i.callbackify=Q}(M1)),M1}var gue;function XQe(){return gue||(gue=1,a_.TextEncoder=typeof TextEncoder<"u"?TextEncoder:pue().TextEncoder,a_.TextDecoder=typeof TextDecoder<"u"?TextDecoder:pue().TextDecoder),a_}var oE,mue;function IA(){if(mue)return oE;mue=1;const{TextEncoder:i,TextDecoder:e}=XQe(),t=new e,r=a=>t.decode(a),n=new i,s=a=>n.encode(a);function o(a,l){const c=new Uint8Array(l);let h=0;for(const u of a)c.set(u,h),h+=u.length;return c}return oE={decodeText:r,encodeText:s,concat:o},oE}var aE,yue;function ZQe(){if(yue)return aE;yue=1;const{encodeText:i}=IA();class e{constructor(r,n,s,o){this.name=r,this.code=n,this.codeBuf=i(this.code),this.alphabet=o,this.codec=s(o)}encode(r){return this.codec.encode(r)}decode(r){for(const n of r)if(this.alphabet&&this.alphabet.indexOf(n)<0)throw new Error(`invalid character '${n}' in '${r}'`);return this.codec.decode(r)}}return aE=e,aE}var lE,_ue;function KQe(){if(_ue)return lE;_ue=1;const i=(r,n,s)=>{const o={};for(let d=0;d<n.length;++d)o[n[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let c=0,h=0,u=0;for(let d=0;d<a;++d){const f=o[r[d]];if(f===void 0)throw new SyntaxError("Invalid character "+r[d]);h=h<<s|f,c+=s,c>=8&&(c-=8,l[u++]=255&h>>c)}if(c>=s||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return l},e=(r,n,s)=>{const o=n[n.length-1]==="=",a=(1<<s)-1;let l="",c=0,h=0;for(let u=0;u<r.length;++u)for(h=h<<8|r[u],c+=8;c>s;)c-=s,l+=n[a&h>>c];if(c&&(l+=n[a&h<<s-c]),o)for(;l.length*s&7;)l+="=";return l};return lE={rfc4648:r=>n=>({encode(s){return e(s,n,r)},decode(s){return i(s,n,r)}})},lE}var cE,vue;function JQe(){if(vue)return cE;vue=1;const i=AQe(),e=ZQe(),{rfc4648:t}=KQe(),{decodeText:r,encodeText:n}=IA(),o=[["identity","\0",()=>({encode:r,decode:n}),""],["base2","0",t(1),"01"],["base8","7",t(3),"01234567"],["base10","9",i,"0123456789"],["base16","f",t(4),"0123456789abcdef"],["base16upper","F",t(4),"0123456789ABCDEF"],["base32hex","v",t(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",t(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",t(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",t(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",t(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",i,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",i,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",i,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((c,h)=>(c[h[0]]=new e(h[0],h[1],h[2],h[3]),c),{}),l=o.reduce((c,h)=>(c[h[1]]=a[h[0]],c),{});return cE={names:a,codes:l},cE}var bue;function QQe(){return bue||(bue=1,function(i,e){const t=JQe(),{encodeText:r,decodeText:n,concat:s}=IA();function o(f,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:m}=u(f);return h(g,p),s([m,p],m.length+p.length)}function a(f,p){const g=u(f),m=r(g.encode(p));return s([g.codeBuf,m],g.codeBuf.length+m.length)}function l(f){f instanceof Uint8Array&&(f=n(f));const p=f[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(f=f.toLowerCase()),u(f[0]).decode(f.substring(1))}function c(f){if(f instanceof Uint8Array&&(f=n(f)),Object.prototype.toString.call(f)!=="[object String]")return!1;try{return u(f[0]).name}catch{return!1}}function h(f,p){u(f).decode(n(p))}function u(f){if(Object.prototype.hasOwnProperty.call(t.names,f))return t.names[f];if(Object.prototype.hasOwnProperty.call(t.codes,f))return t.codes[f];throw new Error(`Unsupported encoding: ${f}`)}function d(f){return f instanceof Uint8Array&&(f=n(f)),u(f[0])}e=i.exports=o,e.encode=a,e.decode=l,e.isEncoded=c,e.encoding=u,e.encodingFromData=d,e.names=Object.freeze(t.names),e.codes=Object.freeze(t.codes)}(o_,o_.exports)),o_.exports}var hE,xue;function eet(){if(xue)return hE;xue=1,hE=n;var i=128,e=127,t=~e,r=Math.pow(2,31);function n(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw n.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=r;)o[a++]=s&255|i,s/=128;for(;s&t;)o[a++]=s&255|i,s>>>=7;return o[a]=s|0,n.bytes=a-l+1,o}return hE}var uE,wue;function tet(){if(wue)return uE;wue=1,uE=t;var i=128,e=127;function t(r,o){var s=0,o=o||0,a=0,l=o,c,h=r.length;do{if(l>=h||a>49)throw t.bytes=0,new RangeError("Could not decode varint");c=r[l++],s+=a<28?(c&e)<<a:(c&e)*Math.pow(2,a),a+=7}while(c>=i);return t.bytes=l-o,s}return uE}var dE,Eue;function iet(){if(Eue)return dE;Eue=1;var i=Math.pow(2,7),e=Math.pow(2,14),t=Math.pow(2,21),r=Math.pow(2,28),n=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return dE=function(c){return c<i?1:c<e?2:c<t?3:c<r?4:c<n?5:c<s?6:c<o?7:c<a?8:c<l?9:10},dE}var fE,Sue;function ret(){return Sue||(Sue=1,fE={encode:eet(),decode:tet(),encodingLength:iet()}),fE}var pE,Cue;function net(){return Cue||(Cue=1,pE={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),pE}function set(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<i.length;n++){var s=i.charAt(n),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=n}var a=i.length,l=i.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,_=p.length;y!==_&&p[y]===0;)y++,g++;for(var v=(_-y)*h+1>>>0,x=new Uint8Array(v);y!==_;){for(var w=p[y],T=0,A=v-1;(w!==0||T<m)&&A!==-1;A--,T++)w+=256*x[A]>>>0,x[A]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");m=T,y++}for(var R=v-m;R!==v&&x[R]===0;)R++;for(var L=l.repeat(g);R<v;++R)L+=i.charAt(x[R]);return L}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===l;)m++,g++;for(var _=(p.length-g)*c+1>>>0,v=new Uint8Array(_);p[g];){var x=t[p.charCodeAt(g)];if(x===255)return;for(var w=0,T=_-1;(x!==0||w<y)&&T!==-1;T--,w++)x+=a*v[T]>>>0,v[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=w,g++}if(p[g]!==" "){for(var A=_-y;A!==_&&v[A]===0;)A++;for(var R=new Uint8Array(m+(_-A)),L=m;A!==_;)R[L++]=v[A++];return R}}}function f(p){var g=d(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:d,decode:f}}var oet=set,aet=oet;const zve=new Uint8Array(0),cet=i=>i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),het=i=>{const e=i.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):zve},Gve=(i,e)=>{if(i===e)return!0;if(i.byteLength!==e.byteLength)return!1;for(let t=0;t<i.byteLength;t++)if(i[t]!==e[t])return!1;return!0},xu=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},uet=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),Uve=i=>new TextEncoder().encode(i),Vve=i=>new TextDecoder().decode(i),det=Object.freeze(Object.defineProperty({__proto__:null,coerce:xu,empty:zve,equals:Gve,fromHex:het,fromString:Uve,isBinary:uet,toHex:cet,toString:Vve},Symbol.toStringTag,{value:"Module"}));class fet{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pet{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qve(this,e)}}class get{constructor(e){this.decoders=e}or(e){return qve(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qve=(i,e)=>new get({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class met{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new fet(e,t,r),this.decoder=new pet(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Fx=({name:i,prefix:e,encode:t,decode:r})=>new met(i,e,t,r),ky=({prefix:i,name:e,alphabet:t})=>{const{encode:r,decode:n}=aet(t,e);return Fx({prefix:i,name:e,encode:r,decode:s=>xu(n(s))})},yet=(i,e,t,r)=>{const n={};for(let h=0;h<e.length;++h)n[e[h]]=h;let s=i.length;for(;i[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,l=0,c=0;for(let h=0;h<s;++h){const u=n[i[h]];if(u===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<t|u,a+=t,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=t||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},_et=(i,e,t)=>{const r=e[e.length-1]==="=",n=(1<<t)-1;let s="",o=0,a=0;for(let l=0;l<i.length;++l)for(a=a<<8|i[l],o+=8;o>t;)o-=t,s+=e[n&a>>o];if(o&&(s+=e[n&a<<t-o]),r)for(;s.length*t&7;)s+="=";return s},en=({name:i,prefix:e,bitsPerChar:t,alphabet:r})=>Fx({prefix:e,name:i,encode(n){return _et(n,r,t)},decode(n){return yet(n,r,t,i)}}),vet=Fx({prefix:"\0",name:"identity",encode:i=>Vve(i),decode:i=>Uve(i)}),bet=Object.freeze(Object.defineProperty({__proto__:null,identity:vet},Symbol.toStringTag,{value:"Module"})),xet=en({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),wet=Object.freeze(Object.defineProperty({__proto__:null,base2:xet},Symbol.toStringTag,{value:"Module"})),Eet=en({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cet=Object.freeze(Object.defineProperty({__proto__:null,base8:Eet},Symbol.toStringTag,{value:"Module"})),Tet=ky({prefix:"9",name:"base10",alphabet:"0123456789"}),Aet=Object.freeze(Object.defineProperty({__proto__:null,base10:Tet},Symbol.toStringTag,{value:"Module"})),Met=en({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ret=en({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Let=Object.freeze(Object.defineProperty({__proto__:null,base16:Met,base16upper:Ret},Symbol.toStringTag,{value:"Module"})),Xg=en({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Iet=en({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pet=en({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ket=en({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Oet=en({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Det=en({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fet=en({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Net=en({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$et=en({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Bet=Object.freeze(Object.defineProperty({__proto__:null,base32:Xg,base32hex:Oet,base32hexpad:Fet,base32hexpadupper:Net,base32hexupper:Det,base32pad:Pet,base32padupper:ket,base32upper:Iet,base32z:$et},Symbol.toStringTag,{value:"Module"})),jet=ky({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zet=ky({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Get=Object.freeze(Object.defineProperty({__proto__:null,base36:jet,base36upper:zet},Symbol.toStringTag,{value:"Module"})),Wa=ky({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uet=ky({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Vet=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Wa,base58flickr:Uet},Symbol.toStringTag,{value:"Module"})),qet=en({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Het=en({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wet=en({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yet=en({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Xet=Object.freeze(Object.defineProperty({__proto__:null,base64:qet,base64pad:Het,base64url:Wet,base64urlpad:Yet},Symbol.toStringTag,{value:"Module"})),Hve=Array.from(""),Zet=Hve.reduce((i,e,t)=>(i[t]=e,i),[]),Ket=Hve.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Jet(i){return i.reduce((e,t)=>(e+=Zet[t],e),"")}function Qet(i){const e=[];for(const t of i){const r=Ket[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const ett=Fx({prefix:"",name:"base256emoji",encode:Jet,decode:Qet}),ttt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ett},Symbol.toStringTag,{value:"Module"}));var itt=Wve,Tue=128,rtt=127,ntt=~rtt,stt=Math.pow(2,31);function Wve(i,e,t){e=e||[],t=t||0;for(var r=t;i>=stt;)e[t++]=i&255|Tue,i/=128;for(;i&ntt;)e[t++]=i&255|Tue,i>>>=7;return e[t]=i|0,Wve.bytes=t-r+1,e}var ott=rC,att=128,Aue=127;function rC(i,r){var t=0,r=r||0,n=0,s=r,o,a=i.length;do{if(s>=a)throw rC.bytes=0,new RangeError("Could not decode varint");o=i[s++],t+=n<28?(o&Aue)<<n:(o&Aue)*Math.pow(2,n),n+=7}while(o>=att);return rC.bytes=s-r,t}var ltt=Math.pow(2,7),ctt=Math.pow(2,14),htt=Math.pow(2,21),utt=Math.pow(2,28),dtt=Math.pow(2,35),ftt=Math.pow(2,42),ptt=Math.pow(2,49),gtt=Math.pow(2,56),mtt=Math.pow(2,63),ytt=function(i){return i<ltt?1:i<ctt?2:i<htt?3:i<utt?4:i<dtt?5:i<ftt?6:i<ptt?7:i<gtt?8:i<mtt?9:10},_tt={encode:itt,decode:ott,encodingLength:ytt},Yv=_tt;const Xv=(i,e=0)=>[Yv.decode(i,e),Yv.decode.bytes],Dm=(i,e,t=0)=>(Yv.encode(i,e,t),e),Fm=i=>Yv.encodingLength(i),vtt=Object.freeze(Object.defineProperty({__proto__:null,decode:Xv,encodeTo:Dm,encodingLength:Fm},Symbol.toStringTag,{value:"Module"})),Nm=(i,e)=>{const t=e.byteLength,r=Fm(i),n=r+Fm(t),s=new Uint8Array(n+t);return Dm(i,s,0),Dm(t,s,r),s.set(e,n),new Nx(i,t,e,s)},Yve=i=>{const e=xu(i),[t,r]=Xv(e),[n,s]=Xv(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new Nx(t,n,o,e)},Xve=(i,e)=>i===e?!0:i.code===e.code&&i.size===e.size&&Gve(i.bytes,e.bytes);class Nx{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const btt=Object.freeze(Object.defineProperty({__proto__:null,Digest:Nx,create:Nm,decode:Yve,equals:Xve},Symbol.toStringTag,{value:"Module"})),PA=({name:i,code:e,encode:t})=>new Zve(i,e,t);class Zve{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Nm(this.code,t):t.then(r=>Nm(this.code,r))}else throw Error("Unknown type, must be binary type")}}const xtt=Object.freeze(Object.defineProperty({__proto__:null,Hasher:Zve,from:PA},Symbol.toStringTag,{value:"Module"})),Kve=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),wtt=PA({name:"sha2-256",code:18,encode:Kve("SHA-256")}),Ett=PA({name:"sha2-512",code:19,encode:Kve("SHA-512")}),Stt=Object.freeze(Object.defineProperty({__proto__:null,sha256:wtt,sha512:Ett},Symbol.toStringTag,{value:"Module"})),Jve=0,Ctt="identity",Qve=xu,Ttt=i=>Nm(Jve,Qve(i)),Att={code:Jve,name:Ctt,encode:Qve,digest:Ttt},Mtt=Object.freeze(Object.defineProperty({__proto__:null,identity:Att},Symbol.toStringTag,{value:"Module"})),Rtt="raw",Ltt=85,Itt=i=>xu(i),Ptt=i=>xu(i),ktt=Object.freeze(Object.defineProperty({__proto__:null,code:Ltt,decode:Ptt,encode:Itt,name:Rtt},Symbol.toStringTag,{value:"Module"})),Ott=new TextEncoder,Dtt=new TextDecoder,Ftt="json",Ntt=512,$tt=i=>Ott.encode(JSON.stringify(i)),Btt=i=>JSON.parse(Dtt.decode(i)),jtt=Object.freeze(Object.defineProperty({__proto__:null,code:Ntt,decode:Btt,encode:$tt,name:Ftt},Symbol.toStringTag,{value:"Module"}));class ln{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:h_,byteLength:h_,code:c_,version:c_,multihash:c_,bytes:c_,_baseCache:h_,asCID:h_})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==rg)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Vtt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ln.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Nm(e,t);return ln.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Xve(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return Gtt(t,n,e||Wa.encoder);default:return Utt(t,n,e||Xg.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Htt(/^0\.0/,Wtt),!!(e&&(e[Rue]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof ln)return e;if(e!=null&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:s}=e;return new ln(t,r,n,s||Mue(t,r,n.bytes))}else if(e!=null&&e[Rue]===!0){const{version:t,multihash:r,code:n}=e,s=Yve(r);return ln.create(t,n,s)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==rg)throw new Error(`Version 0 CID must use dag-pb (code: ${rg}) block encoding`);return new ln(e,t,r,r.bytes)}case 1:{const n=Mue(e,t,r.bytes);return new ln(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return ln.create(0,rg,e)}static createV1(e,t){return ln.create(1,e,t)}static decode(e){const[t,r]=ln.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=ln.inspectBytes(e),r=t.size-t.multihashSize,n=xu(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=n.subarray(t.multihashSize-t.digestSize),o=new Nx(t.multihashCode,t.digestSize,s,n);return[t.version===0?ln.createV0(o):ln.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[u,d]=Xv(e.subarray(t));return t+=d,u};let n=r(),s=rg;if(n===18?(n=0,t=0):n===1&&(s=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);const o=t,a=r(),l=r(),c=t+l,h=c-o;return{version:n,codec:s,multihashCode:a,digestSize:l,multihashSize:h,size:c}}static parse(e,t){const[r,n]=ztt(e,t),s=ln.decode(n);return s._baseCache.set(r,e),s}}const ztt=(i,e)=>{switch(i[0]){case"Q":{const t=e||Wa;return[Wa.prefix,t.decode(`${Wa.prefix}${i}`)]}case Wa.prefix:{const t=e||Wa;return[Wa.prefix,t.decode(i)]}case Xg.prefix:{const t=e||Xg;return[Xg.prefix,t.decode(i)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[i[0],e.decode(i)]}}},Gtt=(i,e,t)=>{const{prefix:r}=t;if(r!==Wa.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const n=e.get(r);if(n==null){const s=t.encode(i).slice(1);return e.set(r,s),s}else return n},Utt=(i,e,t)=>{const{prefix:r}=t,n=e.get(r);if(n==null){const s=t.encode(i);return e.set(r,s),s}else return n},rg=112,Vtt=18,Mue=(i,e,t)=>{const r=Fm(i),n=r+Fm(e),s=new Uint8Array(n+t.byteLength);return Dm(i,s,0),Dm(e,s,r),s.set(t,n),s},Rue=Symbol.for("@ipld/js-cid/CID"),c_={writable:!1,configurable:!1,enumerable:!0},h_={writable:!1,enumerable:!1,configurable:!1},qtt="0.0.0-dev",Htt=(i,e)=>{if(i.test(qtt))console.warn(e);else throw new Error(e)},Wtt=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,Ytt={...bet,...wet,...Cet,...Aet,...Let,...Bet,...Get,...Vet,...Xet,...ttt},Xtt={...Stt,...Mtt},Ztt={raw:ktt,json:jtt},Ktt=Object.freeze(Object.defineProperty({__proto__:null,CID:ln,bases:Ytt,bytes:det,codecs:Ztt,digest:btt,hasher:xtt,hashes:Xtt,varint:vtt},Symbol.toStringTag,{value:"Module"})),Jtt=Df(Ktt);var gE,Lue;function ebe(){if(Lue)return gE;Lue=1;const{bases:i}=Jtt;function e(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const t=e("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),r=e("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return gE={utf8:t,"utf-8":t,hex:i.base16,latin1:r,ascii:r,binary:r,...i},gE}var mE,Iue;function Qtt(){if(Iue)return mE;Iue=1;const i=ebe();function e(t,r="utf8"){const n=i[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return n.encoder.encode(t).substring(1)}return mE=e,mE}var yE,Pue;function eit(){if(Pue)return yE;Pue=1;const i=ebe();function e(t,r="utf8"){const n=i[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return n.decoder.decode(`${n.prefix}${t}`)}return yE=e,yE}var _E,kue;function tit(){if(kue)return _E;kue=1;function i(e,t){t||(t=e.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(t);let n=0;for(const s of e)r.set(s,n),n+=s.length;return r}return _E=i,_E}var vE,Oue;function iit(){if(Oue)return vE;Oue=1;const i=QQe(),e=ret(),{names:t}=net(),r=Qtt(),n=eit(),s=tit(),o={};for(const _ in t){const v=_;o[t[v]]=v}function a(_){if(!(_ instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(_,"base16")}function l(_){return n(_,"base16")}function c(_){if(!(_ instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(i.encode("base58btc",_)).slice(1)}function h(_){const v=_ instanceof Uint8Array?r(_):_;return i.decode("z"+v)}function u(_){if(!(_ instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(_.length<2)throw new Error("multihash too short. must be > 2 bytes.");const v=e.decode(_);if(!g(v))throw new Error(`multihash unknown function code: 0x${v.toString(16)}`);_=_.slice(e.decode.bytes);const x=e.decode(_);if(x<0)throw new Error(`multihash invalid length: ${x}`);if(_=_.slice(e.decode.bytes),_.length!==x)throw new Error(`multihash length inconsistent: 0x${r(_,"base16")}`);return{code:v,name:o[v],length:x,digest:_}}function d(_,v,x){if(!_||v===void 0)throw new Error("multihash encode requires at least two args: digest, code");const w=f(v);if(!(_ instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(x==null&&(x=_.length),x&&_.length!==x)throw new Error("digest length should be equal to specified length.");const T=e.encode(w),A=e.encode(x);return s([T,A,_],T.length+A.length+_.length)}function f(_){let v=_;if(typeof _=="string"){if(t[_]===void 0)throw new Error(`Unrecognized hash function named: ${_}`);v=t[_]}if(typeof v!="number")throw new Error(`Hash function code should be a number. Got: ${v}`);if(o[v]===void 0&&!p(v))throw new Error(`Unrecognized function code: ${v}`);return v}function p(_){return _>0&&_<16}function g(_){return!!(p(_)||o[_])}function m(_){u(_)}function y(_){return m(_),_.subarray(0,2)}return vE={names:t,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:c,fromB58String:h,decode:u,encode:d,coerceCode:f,isAppCode:p,validate:m,prefix:y,isValidCode:g},vE}var bE,Due;function kA(){if(Due)return bE;Due=1;const i=Iy(),e=_p(),t={array(r,n=!1,s=""){return i.toList(r,n,o=>t.format(o,s))},object(r){return i.toObject(r,n=>t.format(n))},null(r=null){return r===null&&(r=i.t("n/a")),i.toNothing(r)},number(r,n=""){return typeof r!="number"&&(r=parseFloat(r)),i.unit(r.toLocaleString(e.locales,{maximumFractionDigits:10}),n)},string(r,n=""){return i.unit(i.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),n)},boolean(r){return r?"":""},format(r,n=""){return typeof r=="boolean"?t.boolean(r):typeof r=="number"?t.number(r,n):typeof r=="string"?t.string(r,n):Array.isArray(r)?t.array(r,n):i.isObject(r)?t.object(r):t.null()}};return bE=t,bE}const rit="Afar",nit="Abkhazian",sit="Afrikaans",oit="Akan",ait="Amharic",lit="Aragonese",cit="Arabic",hit="Assamese",uit="Avar",dit="Aymara",fit="Azerbaijani",pit="Bashkir",git="Belarusian",mit="Bulgarian",yit="Bihari",_it="Bislama",vit="Bambara",bit="Bengali",xit="Tibetan",wit="Breton",Eit="Bosnian",Sit="Catalan",Cit="Chechen",Tit="Chamorro",Ait="Corsican",Mit="Cree",Rit="Czech",Lit="Old Bulgarian",Iit="Chuvash",Pit="Welsh",kit="Danish",Oit="German",Dit="Divehi",Fit="Dzongkha",Nit="Ewe",$it="Greek",Bit="English",jit="Esperanto",zit="Spanish",Git="Estonian",Uit="Basque",Vit="Persian",qit="Peul",Hit="Finnish",Wit="Fijian",Yit="Faroese",Xit="French",Zit="West Frisian",Kit="Irish",Jit="Scottish Gaelic",Qit="Galician",ert="Guarani",trt="Gujarati",irt="Manx",rrt="Hausa",nrt="Hebrew",srt="Hindi",ort="Hiri Motu",art="Croatian",lrt="Haitian",crt="Hungarian",hrt="Armenian",urt="Herero",drt="Interlingua",frt="Indonesian",prt="Interlingue",grt="Igbo",mrt="Sichuan Yi",yrt="Inupiak",_rt="Ido",vrt="Icelandic",brt="Italian",xrt="Inuktitut",wrt="Japanese",Ert="Javanese",Srt="Georgian",Crt="Kongo",Trt="Kikuyu",Art="Kuanyama",Mrt="Kazakh",Rrt="Greenlandic",Lrt="Cambodian",Irt="Kannada",Prt="Korean",krt="Kanuri",Ort="Kashmiri",Drt="Kurdish",Frt="Komi",Nrt="Cornish",$rt="Kirghiz",Brt="Latin",jrt="Luxembourgish",zrt="Ganda",Grt="Limburgian",Urt="Lingala",Vrt="Laotian",qrt="Lithuanian",Hrt="Latvian",Wrt="Malagasy",Yrt="Marshallese",Xrt="Maori",Zrt="Macedonian",Krt="Malayalam",Jrt="Mongolian",Qrt="Moldovan",ent="Marathi",tnt="Malay",int="Maltese",rnt="Burmese",nnt="Nauruan",snt="North Ndebele",ont="Nepali",ant="Ndonga",lnt="Dutch",cnt="Norwegian Nynorsk",hnt="Norwegian",unt="South Ndebele",dnt="Navajo",fnt="Chichewa",pnt="Occitan",gnt="Ojibwa",mnt="Oromo",ynt="Oriya",_nt="Ossetian",vnt="Punjabi",bnt="Pali",xnt="Polish",wnt="Pashto",Ent="Portuguese",Snt="Quechua",Cnt="Raeto Romance",Tnt="Kirundi",Ant="Romanian",Mnt="Russian",Rnt="Rwandi",Lnt="Sanskrit",Int="Sardinian",Pnt="Sindhi",knt="Sango",Ont="Serbo-Croatian",Dnt="Sinhalese",Fnt="Slovak",Nnt="Slovenian",$nt="Samoan",Bnt="Shona",jnt="Somalia",znt="Albanian",Gnt="Serbian",Unt="Swati",Vnt="Southern Sotho",qnt="Sundanese",Hnt="Swedish",Wnt="Swahili",Ynt="Tamil",Xnt="Telugu",Znt="Tajik",Knt="Thai",Jnt="Tigrinya",Qnt="Turkmen",est="Tagalog",tst="Tswana",ist="Tonga",rst="Turkish",nst="Tsonga",sst="Tatar",ost="Twi",ast="Tahitian",lst="Uyghur",cst="Ukrainian",hst="Urdu",ust="Venda",dst="Vietnamese",fst="Volapk",pst="Walloon",gst="Wolof",mst="Xhosa",yst="Yiddish",_st="Yoruba",vst="Zhuang",bst="Chinese",xst="Zulu",wst={aa:rit,ab:nit,af:sit,ak:oit,am:ait,an:lit,ar:cit,as:hit,av:uit,ay:dit,az:fit,ba:pit,be:git,bg:mit,bh:yit,bi:_it,bm:vit,bn:bit,bo:xit,br:wit,bs:Eit,ca:Sit,ce:Cit,ch:Tit,co:Ait,cr:Mit,cs:Rit,cu:Lit,cv:Iit,cy:Pit,da:kit,de:Oit,dv:Dit,dz:Fit,ee:Nit,el:$it,en:Bit,eo:jit,es:zit,et:Git,eu:Uit,fa:Vit,ff:qit,fi:Hit,fj:Wit,fo:Yit,fr:Xit,fy:Zit,ga:Kit,gd:Jit,gl:Qit,gn:ert,gu:trt,gv:irt,ha:rrt,he:nrt,hi:srt,ho:ort,hr:art,ht:lrt,hu:crt,hy:hrt,hz:urt,ia:drt,id:frt,ie:prt,ig:grt,ii:mrt,ik:yrt,io:_rt,is:vrt,it:brt,iu:xrt,ja:wrt,jv:Ert,ka:Srt,kg:Crt,ki:Trt,kj:Art,kk:Mrt,kl:Rrt,km:Lrt,kn:Irt,ko:Prt,kr:krt,ks:Ort,ku:Drt,kv:Frt,kw:Nrt,ky:$rt,la:Brt,lb:jrt,lg:zrt,li:Grt,ln:Urt,lo:Vrt,lt:qrt,lv:Hrt,mg:Wrt,mh:Yrt,mi:Xrt,mk:Zrt,ml:Krt,mn:Jrt,mo:Qrt,mr:ent,ms:tnt,mt:int,my:rnt,na:nnt,nd:snt,ne:ont,ng:ant,nl:lnt,nn:cnt,no:hnt,nr:unt,nv:dnt,ny:fnt,oc:pnt,oj:gnt,om:mnt,or:ynt,os:_nt,pa:vnt,pi:bnt,pl:xnt,ps:wnt,pt:Ent,qu:Snt,rm:Cnt,rn:Tnt,ro:Ant,ru:Mnt,rw:Rnt,sa:Lnt,sc:Int,sd:Pnt,sg:knt,sh:Ont,si:Dnt,sk:Fnt,sl:Nnt,sm:$nt,sn:Bnt,so:jnt,sq:znt,sr:Gnt,ss:Unt,st:Vnt,su:qnt,sv:Hnt,sw:Wnt,ta:Ynt,te:Xnt,tg:Znt,th:Knt,ti:Jnt,tk:Qnt,tl:est,tn:tst,to:ist,tr:rst,ts:nst,tt:sst,tw:ost,ty:ast,ug:lst,uk:cst,ur:hst,ve:ust,vi:dst,vo:fst,wa:pst,wo:gst,xh:mst,yi:yst,yo:_st,za:vst,zh:bst,zu:xst};var xE,Fue;function tbe(){if(Fue)return xE;Fue=1;const i=Iy(),e=kA(),t=_p(),r=CA,n={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,c=null){let h=i.isObject(c)&&typeof c=="string"?c.title:s;return i.toLink(s,h,c.rel||"")},formatLink(s){return i.toList(s,!1,o=>i.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return i.e(i.t(n._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const c=r.getDependency("content-type");if(!c)return l?"":i.e(s);let h;try{h=c.parse(s)}catch(u){return console.warn(u),l?"":i.e(s)}switch(h.type){case"image/tiff":return h.parameters.application==="geotiff"?h.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB2";case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";default:{let[u,d]=h.type.split("/");if(d=i.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(u){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return new Date(s).toLocaleString(t.locales,{timeZone:"UTC",timeZoneName:"short"})}catch{}return e.null()},formatPercent0to1(s,o,a={}){return e.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return new Date(s).toLocaleString(t.locales,{day:"numeric",month:"numeric",year:"numeric"})}catch{}return e.null()},formatDuration(s){if(typeof s=="string"){const o=r.getDependency("@musement/iso-duration");if(!o)return i.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let c=a(s).humanize("en");return c.length===0?i.e(i.t("none")):i.e(c)}return e.null()},formatLanguageCode(s){if(Array.isArray(s))return i.toList(s,!0,n.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return e.null();const o=wst,[a,...l]=s.split("-");if(a in o){const c=o[a];return l.length>0?i.e(i.t(`${c} (${l.join(" ")})`)):i.e(i.t(c))}return i.e(i.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return e.null();if(s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return i.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let c=Array.isArray(l.links)?l.links.filter(h=>i.isObject(h)&&typeof h.href=="string"&&h.rel==="license"):[];return c.length>0?i.toList(c,!1,h=>i.toLink(h.href,h.title||s,"license")):e.string(s)},formatProviders(s){return i.toList(s,!1,o=>{let a=o.name,l="",c="";return typeof o.url=="string"&&o.url.length>0&&(a=i.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(h=>e.format(h)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(c=n.formatCommonMark(o.description)),`${a}${l}${c}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return e.null();const o=r.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!n.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else n.allowHtmlInCommonMark?a=s:a=i.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!i.isObject(s))return e.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return i.toList(o,!0,null,!1)},formatDOI(s){return s=e.format(s),i.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return i.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return i.toLink(o,a)}return e.format(o)})},formatEPSG(s){return typeof s=="string"&&(s=s.replace(/^epsg:/i,"")),s=parseInt(s,10),s>0?i.toLink(`http://epsg.io/${s}`,s):e.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?e.null():s[0]===s[1]?e.format(s[0],a.unit):s[0]===null?`< ${e.format(s[1],a.unit)}`:s[1]===null?`> ${e.format(s[0],a.unit)}`:s.map(l=>e.format(l,a.unit)).join("  ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?e.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return i.isObject(s)?i.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+n.formatEPSG(s):typeof s.name=="string"?e.string(s.name):e.object(s):e.null()},formatTemporalExtent(s,o,a={}){let l=a.shorten?n.formatDate:n.formatTimestamp;return!Array.isArray(s)||s.length<2||typeof s[0]!="string"&&typeof s[1]!="string"?e.null():typeof s[0]!="string"?i.t("Until {0}",[l(s[1])]):typeof s[1]!="string"?i.t("{0} until present",[l(s[0])]):s[0]===s[1]?n.formatTimestamp(s[0]):s.map(c=>l(c)).join(" - ")},formatTemporalExtents(s,o,a={}){let l=(c,h)=>c[0]===null?-1:c[0].localeCompare(h[0],t.locales);return i.toList(s,l,c=>n.formatTemporalExtent(c,o,a))},formatWKT2(s){if(typeof s!="string")return e.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,c)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${c}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return e.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return i.unit((s/Math.pow(1024,o)).toFixed(2)*1,n.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return e.null();const o=r.getDependency("multihashes");if(!o)return i.e(s);try{const a=o.decode(i.hexToUint8(s)),l=i.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${i.e(i.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${i.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return e.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?i.t("non-standard"):typeof s=="string"&&s in n.fileDataTypes?i.abbrev(i.t(s),i.t(n.fileDataTypes[s])):e.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${n.formatCSV(l)}]`)}return o.join("<br>")}else return n.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>e.format(l,a.unit)).join("  "):e.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(e.format).join(o?"; ":", ")}else return e.format(s)},formatImage(s,o){let a="",l=null;if(i.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return e.format(l);return`<img src="${i.e(l)}" title="${i.e(a)}" class="${i.e(o.replace(":","_"))}">`},formatPhone(s){return i.toLink(`tel:${s}`,s)},formatEmail(s){return i.toLink(`mailto:${s}`,s)},formatConcepts(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=i.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${i.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=i.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${i.e(o.description)}</small>`),a})},formatAddress(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return e.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return e.format(s);let o=function(h,u,d,f){let p=u.length;if(p%2===1)h.push(`Code: ${u}`);else{let g=p/2,m=u.substring(0,g);h.push(`${d}: ${m}`);let y=u.substring(g,p);h.push(`${f}: ${y}`)}},[a,l]=s.split(/-(.*)/),c=[];switch(a){case"MGRS":c.push(i.abbrev(i.t(a),i.t("Military Grid Reference System")));let[,h,u,d,f]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);c.push(`${i.t("UTM Zone")}: ${h}`),c.push(`${i.t("Latitude Band")}: ${u}`),c.push(`${i.t("Square Identifier")}: ${d}`),f&&o(c,f,i.t("Easting"),i.t("Northing"));break;case"MSIN":c.push(i.t("MODIS Sinusoidal Tile Grid")),o(c,l,i.t("Horizontal"),i.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);c.push(i.abbrev(i.t("WRS-"+p),i.t("Worldwide Reference System "+p))),o(c,l,i.t("Path"),i.t("Row"));break;case"DOQ":c.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quadrangle"))),c.push(`${i.t("Quadrangle")}: ${l}`);break;case"DOQQ":c.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);c.push(`${i.t("Quadrangle")}: ${g}`);let m=l.substr(-2),y=m[0]==="N"?i.t("North"):i.t("South"),_=m[1]==="E"?i.t("East"):i.t("West");c.push(`${i.t("Quarter")}: ${y} ${_}`);break;case"MXRA":c.push(i.t("Maxar ARD Tile Grid"));let[v,x]=l.split(/-(.*)/);v.startsWith("Z")&&(v=v.substring(1)),c.push(`${i.t("UTM Zone")}: ${v}`),c.push(`${i.t("Quadkey")}: ${x}`);break;case"EASE":let[w,T]=l.split("-");if(w==="DGGS"){c.push(i.t("EASE-DGGS"));let[L,P,...F]=T.split(".");if(c.push(`${i.t("Level")}: ${L}`),P.length===6){c.push(`${i.t("Level 0 row cell")}: ${P.substring(0,3)}`),c.push(`${i.t("Level 0 column cell")}: ${P.substring(3,6)}`);for(let B in F){let b=F[B];b.length===2&&(c.push(`${i.t("Fraction of level {i} row cell",{i:B})}: ${b[0]}`),c.push(`${i.t("Fraction of level {i} column cell",{i:B})}: ${b[1]}`))}}break}case"CDEM":let[,A,R]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);c.push(i.t("Copernicus Digital Elevation Model Grid")),c.push(`${i.t("Easting")}: ${R}`),c.push(`${i.t("Northing")}: ${A}`);default:c.push(s)}return c.join("<br>")}};return xE=n,xE}var wE,Nue;function Est(){if(Nue)return wE;Nue=1;const i=CA,e=Iy(),t=_p(),r=kA(),n=tbe();function s(m,y,_,v,x){let w={};for(let T in y){let A;try{let R=T.split(/:(.*)/);R.length===1&&R.unshift(x);let L=R[0];if(typeof v=="function"&&!v(T,[T]))continue;A=y[T];let P=i.getSpecification(T,_);P.ext&&(L=P.ext);let F=!1;_==="summaries"&&P.listWithKeys&&Array.isArray(A)&&A.length>0&&(A=A[0],F=!0);let B=null,b=[];if(e.isObject(P.items)){let C=A;P.listWithKeys&&(C=Object.values(C));let M=[];Array.isArray(C)?M=e.keysFromListOfObjects(C):e.isObject(C)&&(M=Object.keys(C)),B={},b=P.itemOrder.filter(O=>M.includes(O)),M.forEach(O=>{typeof P.items[O]>"u"?(B[O]={label:e.formatKey(O),explain:O},b.push(O)):(B[O]=Object.assign({},P.items[O]),B[O].label=p(O,P.items[O]))})}let E;if(_==="summaries")if(!F&&e.isObject(A))if(typeof A.minimum<"u"&&typeof A.maximum<"u"){const C=M=>f(M,T,m,y,P,v,[T]);A.minimum===A.maximum?E=C(A.minimum):A.minimum===null?E=`< ${C(A.maximum)}`:A.maximum===null?E=`> ${C(A.minimum)}`:E=`${C(A.minimum)}  ${C(A.maximum)}`}else E=r.object(A);else if(i.externalRenderer&&B){let C=F?Object.assign({},A):A.slice(0);for(let M in C){let O=e.isObject(C[M])?{}:[];for(let D in B)O[D]=f(C[M][D],D,m,y,B[D]);C[M]=O}}else Array.isArray(A)?E=e.toList(A,!P.custom&&!P.items,C=>f(C,T,m,y,P)):console.warn(`Invalid summary value: ${A}`);typeof E>"u"&&(E=f(A,T,m,y,P,v,[T])),e.isObject(w[L])||(w[L]={extension:L,label:g(L),properties:{}}),w[L].properties[T]={label:p(T,P),value:A,formatted:E,items:B,itemOrder:b,spec:P}}catch(R){console.error(`Field '${T}' with value '${A}' resulted in an error`,R)}}return Object.values(w).sort((T,A)=>T.extension.localeCompare(A.extension,t.locales))}function o(m,y,_=null,v=""){return s(y,m,"assets",_,v)}function a(m,y,_=null,v=""){return s(y,m,"links",_,v)}function l(m,y,_=null,v=""){return s(y,m,"providers",_,v)}function c(m,y=null,_=""){return s(m,m.summaries,"summaries",y,_)}function h(m,y=null,_=""){return s(m,m,"collection",y,_)}function u(m,y=null,_=""){return s(m,m,"catalog",y,_)}function d(m,y=null,_=""){return s(m,m.properties,"metadata",y,_)}function f(m,y,_=null,v=null,x=null,w=null,T=[]){if(e.isObject(x)||(x=i.getSpecification(y)),typeof x.format=="string"){let A=n[`format${x.format}`];return A||console.warn(`Formatter '${x.format}' not available.`),A(m,y,x,_,v)}else{if(typeof x.formatter=="function")return x.formatter(m,y,x,_,v);if(e.isObject(x.mapping)){let A=String(m);return typeof x.mapping[A]<"u"?m=x.mapping[A]:typeof x.mapping[A.toLowerCase()]<"u"?m=x.mapping[A.toLowerCase()]:typeof x.mapping[A.toUpperCase()]<"u"&&(m=x.mapping[A.toUpperCase()]),r.format(e.t(m),x.unit)}else{if(m===null&&x.null)return r.null(x.null);if(Array.isArray(m)){let A=(R,L)=>f(R,y,_,v,x,w,T.concat([L]));return typeof w=="function"&&T.length>0&&(m=m.filter((R,L)=>w(T[0],T.concat([L])))),i.externalRenderer&&(x.custom||x.items)?m.map(A):e.toList(m,!1,A)}else if(e.isObject(m)){let A=L=>e.isObject(x.items)?x.listWithKeys?{items:x.items,itemOrder:x.itemOrder}:x.items[L]:e.isObject(x.properties)?x.properties[L]:{},R=(L,P,F)=>f(L,P,_,F,A(P),w,T.concat([P]));if(i.externalRenderer&&(x.custom||x.items||x.properties)){let L={};for(let P in m)typeof w=="function"&&T.length>0&&!w(T[0],T.concat([k]))||(L[P]=R(m[P],P,m));return L}else{let L=F=>p(F,A(F)),P=x.listWithKeys?[]:x.itemOrder;return e.toObject(m,R,L,P,w,T)}}else return r.format(m,x.unit)}}}function p(m,y=null){if(e.isObject(y)||(y=i.getSpecification(m)),e.isObject(y)&&typeof y.label=="string"){if(typeof y.explain=="string")return y.explain.match(/^https?:\/\//i)?e.toLink(y.explain,e.t(y.label),"about"):e.abbrev(e.t(y.label),e.t(y.explain));if(typeof y.label=="string")return e.t(y.label)}return e.formatKey(m)}function g(m){return p(m,i.getExtension(m))}return wE={format:f,label:p,extension:g,formatCatalog:u,formatCollection:h,formatSummaries:c,formatItemProperties:d,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},wE}const lu=CA;lu.importFields(bJe);lu.addDependency("@musement/iso-duration",SQe);lu.addDependency("content-type",CQe());lu.addDependency("commonmark",TQe());lu.addDependency("multihashes",iit());var ibe={...Est(),Fields:lu.exportFields(),Registry:lu,Helper:Iy(),DataTypes:kA(),Formatters:tbe(),I18N:_p()};const EE=no(ibe);var Sst=Object.defineProperty,Cst=Object.getOwnPropertyDescriptor,lo=(i,e,t,r)=>{for(var n=r>1?void 0:r?Cst(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Sst(e,t,n),n};let Ds=class extends hi{constructor(){super(...arguments),this.header=[],this.tags=[],this.properties=[],this.featured=[],this.footer=[],this.styleOverride="",this.stacInfo=[],this.fetchStac=async i=>{const t=await(await fetch(`${i}?ts=${Date.now()}`)).json();this.stacInfo=await this.parseStac(t),this.dispatchEvent(new CustomEvent("loaded"))},this.parseStac=async i=>{if(i.type==="Catalog")return EE.formatCatalog(i);if(i.type==="Collection")return EE.formatCollection(i);if(i.type==="Feature")return EE.formatItemProperties(i)}}buildProperties(i){ibe.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0;const e=t=>uJe(Object.entries(this.stacProperties).filter(([r])=>t===this.properties&&(!t||t.length<1)?!0:t==null?void 0:t.includes(r)).reverse().sort(([r],[n])=>(t==null?void 0:t.indexOf(r))>(t==null?void 0:t.indexOf(n))?1:-1));return i.length<1?null:(this.stacProperties=i.reduce((t,r)=>({...t,...r.properties}),{}),ae`
      ${e(this.header).length>0?ae`
            <header part="header">
              <slot name="header">
                ${Qn(e(this.header),([,t],r)=>zd`
              <h${na((r+1).toString())}>${Ua(t.formatted)}</h${na((r+1).toString())}>
              `)}
              </slot>
            </header>
          `:It}
      <main>
        ${e(this.tags).length+e(this.properties).length>0?ae`
              <section id="tags" part="tags">
                <ul>
                  ${Qn(e(this.tags),([,t])=>ae`<slot name=${t.label.toLowerCase()}
                      ><li>
                        <span class="label"
                          >${Ua(t.formatted)}</span
                        >
                      </li></slot
                    >`)}
                </ul>
              </section>
              <section id="properties" part="properties">
                <ul
                  class=${e(this.properties).length===1?"single-property":It}
                >
                  ${Qn(e(this.properties),([,t])=>ae`
                      <slot name=${t.label.toLowerCase()}>
                        <li>
                          ${bt(e(this.properties).length>1,()=>ae` <span class="label">
                                ${t.label}</span
                              ><span class="colon">:</span>`)}
                          <span class="value">
                            ${Ua(t.formatted)}
                          </span>
                        </li>
                      </slot>
                    `)}
                </ul>
              </section>
            `:It}
        ${e(this.featured).length>0?ae`
              <section id="featured" part="featured">
                ${Qn(e(this.featured).filter(([t,r])=>r.length!==void 0?r.length>0:!0),([,t])=>ae`
                    <details>
                      <summary>
                        <slot
                          name="featured-${t.label.toLowerCase()}-summary"
                          class="title"
                        >
                          ${t.label}
                          ${bt(t.length,()=>ae`
                              <span class="count">${t.length}</span>
                            `)}
                        </slot>
                      </summary>
                      <div class="featured-container">
                        <slot name="featured-${t.label.toLowerCase()}">
                          ${Ua(t.formatted)}
                        </slot>
                      </div>
                    </details>
                  `)}
              </section>
            `:It}
      </main>
      ${e(this.footer).length>0?ae`
            <footer part="footer">
              <slot name="footer">
                ${Qn(e(this.footer),([t,r],n)=>zd`
                <div class="footer-container">
                  <h${na((n+1).toString())}>
                    ${Ua(r.label)}
                  </h${na((n+1).toString())}>
                  <small>${Ua(r.formatted)}</small>
                </div>
                ${bt(t==="sci:citation",()=>ae`
                    <button
                      class="copy icon"
                      @click=${()=>navigator.clipboard.writeText(r.formatted)}
                    >
                      copy
                    </button>
                  `)}
              `)}
              </slot>
            </footer>
          `:It}
    `)}render(){return ae`
      <style>
        ${dJe}
        ${!this.unstyled&&fJe}
        ${this.styleOverride}
      </style>
      <slot></slot>
      ${this.buildProperties(this.stacInfo)}
    `}updated(i){i.has("for")&&this.fetchStac(this.for)}};lo([Me({attribute:"allow-html"})],Ds.prototype,"allowHtml",2);lo([Me({type:Boolean})],Ds.prototype,"unstyled",2);lo([Me()],Ds.prototype,"for",2);lo([Me({type:Array})],Ds.prototype,"header",2);lo([Me({type:Array})],Ds.prototype,"tags",2);lo([Me({type:Array})],Ds.prototype,"properties",2);lo([Me({type:Array})],Ds.prototype,"featured",2);lo([Me({type:Array})],Ds.prototype,"footer",2);lo([Me({attribute:"style-override"})],Ds.prototype,"styleOverride",2);lo([hr()],Ds.prototype,"stacInfo",2);lo([hr()],Ds.prototype,"stacProperties",2);Ds=lo([Xr("eox-stacinfo")],Ds);const Tst=`
:host {
  display: block;
}
`,Ast=`
* {
  font-family: Roboto, sans-serif;
}

${Vf}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-left-drop-circle%3C/title%3E%3Cpath d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M14,7L9,12L14,17V7Z' fill='%23004170' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-right-drop-circle%3C/title%3E%3Cpath d='M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M10,17L15,12L10,7V17Z' fill='%23004170' /%3E%3C/svg%3E");
}
`;var rbe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(xr,function(){return function(t,r,n){r.prototype.dayOfYear=function(s){var o=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})})(rbe);var Mst=rbe.exports;const Rst=no(Mst);var nbe={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(xr,function(){var t="day";return function(r,n,s){var o=function(c){return c.add(4-c.isoWeekday(),t)},a=n.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(c){if(!this.$utils().u(c))return this.add(7*(c-this.isoWeek()),t);var h,u,d,f,p=o(this),g=(h=this.isoWeekYear(),u=this.$u,d=(u?s.utc:s)().year(h).startOf("year"),f=4-d.isoWeekday(),d.isoWeekday()>4&&(f+=7),d.add(f,t));return p.diff(g,"week")+1},a.isoWeekday=function(c){return this.$utils().u(c)?this.day()||7:this.day(this.day()%7?c:c-7)};var l=a.startOf;a.startOf=function(c,h){var u=this.$utils(),d=!!u.u(h)||h;return u.p(c)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(c,h)}}})})(nbe);var Lst=nbe.exports;const Ist=no(Lst);var Pst=Object.defineProperty,kst=Object.getOwnPropertyDescriptor,Tr=(i,e,t,r)=>{for(var n=r>1?void 0:r?kst(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Pst(e,t,n),n};Ka.extend(Rst);Ka.extend(Ist);let On=class extends hi{constructor(){super(...arguments),this.controlValues=[],this._newStepIndex=0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(i){i?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=i,this.requestUpdate()}setConfig(i){this.layer=i.layer??this.layer,this.controlProperty=i.controlProperty??this.controlProperty,this.controlValues=i.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(i){const e=this.controlValues.findIndex(t=>t===i);e>-1?this._newStepIndex=e:console.error(`Unable to find step "${i}" in available times!`)}_updateStep(i=1){var e;this._newStepIndex=this._newStepIndex+i,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),(e=this._controlSource)==null||e.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]}),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}}))}getFlatLayersArray(i){const e=[];e.push(...i);let t=e.filter(r=>r instanceof Os);for(;t.length;){const r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n].getLayers().getArray();e.push(...o),r.push(...o.filter(a=>a instanceof Os))}t=r}return e}render(){const i=document.querySelector(this.for),e=i.map||i;return e.once("loadend",()=>{if(!this._originalParams){const r=this.getFlatLayersArray(e.getLayers().getArray()).find(n=>n.get("id")===this.layer);this._controlSource=r.getSource(),this._originalParams=this._controlSource.getParams()}}),ae`
      <style>
        ${Tst}
        ${!this.unstyled&&Ast}
      </style>
      <main>
        <div id="controls" part="controls">
          <button
            part="previous"
            class="icon previous"
            @click="${()=>this.previous()}"
          >
            <
          </button>
          <button part="next" class="icon next" @click="${()=>this.next()}">
            >
          </button>
          ${this.disablePlay?It:ae`
                <button
                  part="play"
                  class="icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `}
          ${this.slider?ae`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(r=>r===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    width="300"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}

          <span part="current">${this.controlValues[this._newStepIndex]}</span>
        </div>
      </main>
    `}};Tr([Me({attribute:"control-property"})],On.prototype,"controlProperty",2);Tr([Me({attribute:"control-values",type:Array})],On.prototype,"controlValues",2);Tr([Me()],On.prototype,"for",2);Tr([Me()],On.prototype,"layer",2);Tr([Me({type:Boolean})],On.prototype,"slider",2);Tr([Me()],On.prototype,"_originalParams",2);Tr([Me({attribute:"disable-play",type:Boolean})],On.prototype,"disablePlay",2);Tr([Me({attribute:"current-step"})],On.prototype,"currentStep",1);Tr([hr()],On.prototype,"_animationInterval",2);Tr([hr()],On.prototype,"_controlSource",2);Tr([hr()],On.prototype,"_isAnimationPlaying",2);Tr([hr()],On.prototype,"_newStepIndex",2);Tr([Me({type:Boolean})],On.prototype,"unstyled",2);On=Tr([Xr("eox-timecontrol")],On);let Of=class extends hi{constructor(){super(...arguments),this.width=0,this.steps=[],this.height=6,this.svgWidth=0}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.handleResize()}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}get lines(){const i=this.numLines>this.width/2?this.width/2:this.numLines,e=this.width/(i-1);return Array.from({length:this.numLines},(t,r)=>r*e)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){const i=[];let e=null;return this.lines.forEach((t,r)=>{const s=Ka(this.steps[r]).year();(r===0||s!==e)&&i.push({label:s,position:t}),e=s}),i.filter((t,r)=>{const n=i[r+1];return!(n&&n.position-t.position<25)})}isYearLine(i){return this.yearMarks.some(t=>Math.abs(t.position-i)<1)}render(){return ae`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.lines.map((i,e)=>ase`
            <line
              key=${e}
              x1=${i}
              y1="0"
              x2=${i}
              y2=${this.isYearLine(i)?12:6}
              stroke=${this.isYearLine(i)?"#222":"#7596A2"}
              stroke-width=${this.isYearLine(i),1}
            ></line>
          `)}
          ${this.yearMarks.map((i,e)=>ase`
            <text
              key=${`y${e}`}
              x=${i.position}
              y=${this.height-1}
              fill="#555"
              font-size="13"
              font-weight="500"
            >
              ${i.label}
            </text>
          `)}
        </svg>
      </div>
    `}};Tr([Me({type:Number})],Of.prototype,"width",2);Tr([Me({type:Array})],Of.prototype,"steps",2);Tr([hr()],Of.prototype,"height",2);Tr([hr()],Of.prototype,"svgWidth",2);Of=Tr([Xr("eox-sliderticks")],Of);const sbe=(i,e)=>{var r;let{privateFields:t=!0}=e;return t||(r=i==null?void 0:i.modules)==null||r.forEach(n=>{var s;(s=n==null?void 0:n.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var c;return!((c=l.privacy)!=null&&c.includes("private"))}))})})}),Vwe(i)};sbe(a1e,{privateFields:!1});const Ost={parameters:{docs:{toc:!0,page:l1e,source:{transform:(i,e)=>{const t=e.undecoratedStoryFn(e);let r;const n={};return t.strings.map((s,o)=>{var h,u;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(u=(h=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:h[0])==null?void 0:u.replaceAll(" ",""),c=t.values[o];l&&c&&(n[r]||(n[r]={}),n[r][l]=c)}).filter(s=>s),Object.keys(n).forEach(s=>{i=i.replace(`<${s}`,`<${s}
  ${Object.keys(n[s]).map((o,a)=>`.${o}='\${${typeof n[s][o]=="string"?n[s][o]:JSON.stringify(n[s][o])}}'`).join(`
  `)}
  `)}),i}}}}},_ot=Object.freeze(Object.defineProperty({__proto__:null,default:Ost,setCustomElementsManifestWithOptions:sbe},Symbol.toStringTag,{value:"Module"}));export{pot as L,got as a,_ot as p};
